---
theme: angular
angular: teacherDashboard
title: <%= I18n.t('dashboard_landing_title').inspect %>
---
- authentication_required!
- forbidden! unless dashboard_user[:user_type] == 'teacher'

-#
  Temporarily include the terms interstitial.  There is JavaScript served by Pegasus (and
  which is customized for Pegasus use) and HTML generated by dashboard (which lets dashboard
  provide localized strings, etc. but which is also customized for Pegasus use).

%link{:href=>"/css/terms_interstitial.css", :rel=>"stylesheet"}
#interstitial
:javascript
  $(document).ready(function () {
    $("#interstitial").load( "/dashboardapi/terms_interstitial_for_pegasus/", function() {
      interstitialLoaded();
      });
  });
%script{src: CDO.code_org_url('js/terms_interstitial.js')}
%script{src: "/shared/js/angular/angular.min.js"}
%script{src: "/shared/js/angular-route/angular-route.min.js"}
%script{src: "/shared/js/angular-resource/angular-resource.min.js"}
%script{src: "/shared/js/angular-sanitize/angular-sanitize.min.js"}
%script{src: "/shared/js/ng-csv/ng-csv.min.js"}

%link(rel='stylesheet' type='text/css' href='/css/learn_tabs.css')
%link(rel='stylesheet' type='text/css' href='/style.css')
%link(rel='stylesheet' type='text/css' href='/css/page.css')
%link(rel='stylesheet' type='text/css' href='/shared/css/course-blocks.css')
%link(rel='stylesheet' type='text/css' href='/shared/css/teacher-announcement.css')
%link(rel='stylesheet' type='text/css' href='/shared/css/teacher-dashboard.css')
%link(rel='stylesheet' type='text/css' href='/shared/css/user-progress.css')

- js_locale = request.locale.to_s.downcase.tr('-', '_')
%script{src: asset_path("js/#{js_locale}/common_locale.js")}

- i18n = {}
- i18n[:hoc_category_name] = I18n.t('hoc_category_name', default: 'hoc')
- i18n[:dashboard_students_female] = I18n.t('dashboard_students_female')
- i18n[:dashboard_students_male] = I18n.t('dashboard_students_male')
- i18n[:dashboard_submission_submitted] = I18n.t('dashboard_submission_submitted')
- i18n[:dashboard_submission_in_progress] = I18n.t('dashboard_submission_in_progress')
- i18n[:dashboard_correctness_free_response] = I18n.t('dashboard_correctness_free_response')
- i18n[:dashboard_correctness_unsubmitted] = I18n.t('dashboard_correctness_unsubmitted')
- i18n[:dashboard_correctness_correct] = I18n.t('dashboard_correctness_correct')
- i18n[:dashboard_correctness_incorrect] = I18n.t('dashboard_correctness_incorrect')
- i18n[:error_string_none_selected] = I18n.t('dashboard_error_none_selected').gsub(/"/,"\\\\\"")
- i18n[:error_string_other_section] = I18n.t('dashboard_error_other_section').gsub(/"/,"\\\\\"")

- data = {}
- data[:studiourlprefix] = CDO.studio_url
- data[:i18n] = i18n
- data[:valid_scripts] = DashboardSection::valid_scripts(request.user_id)
- data[:valid_courses] = DashboardSection::valid_courses()
- data[:valid_login_types] = DashboardSection::valid_login_types
- data[:valid_grades] = DashboardSection::valid_grades
- data[:hoc_assign_warning] = Gatekeeper.allows('hoc_assign_warning', default: false)
- data[:disabled_scripts] = DashboardSection::progress_disabled_scripts(request.user_id)
/We Intentionally take the non-minified JS file here, as it contains a bunch of
/angular code that runs into problems when minified. Ideally we will fix those
/issues and minify this code.
%script{src: asset_path('js/code.org/public/teacher-dashboard/index.js'), data: {teacherdashboard: data.to_json}}

%div{'ng-view' => ''}
