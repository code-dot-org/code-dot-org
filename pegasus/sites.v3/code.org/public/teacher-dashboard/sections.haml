---
layout: none
theme: none
content-type: text/ng-template
---
=view :answer_dash

%div{class: "modal fade assign-confirm-modal", id: "assign-confirm"}
  .modal-dialog
    .modal-content
      .modal-header
        %button{ type: "button", class: "close", :"data-dismiss"=> "modal" }
          %span{ :"aria-hidden"=>"true" } &times;
          %span.sr-only= I18n.t('dashboard_sections_close')
        %h2{ class: "assign-confirm-header" }
          = I18n.t('dashboard_sections_assign_hoc_script_desc')
        .assign-confirm-container
          %div{style: "text-align: left;"}
            = I18n.t('dashboard_sections_assign_hoc_script_msg', certificate_url: CDO.code_org_url('/certificates'))
          .modal-buttons
            %button{ :type=>"button", :class=>"btn btn-primary btn-white", :"data-dismiss"=>"modal" }= I18n.t('dashboard_action_cancel')
            %button{ :type=>"button", :class=>"btn btn-primary", "ng-click" => "confirm_save()" }= I18n.t('dashboard_sections_assign_activity')

%div
  %br/
  %a{href: '/teacher-dashboard#/'}= I18n.t('dashboard_navigation_home_page')
  %span{style: "opacity:0.5"} &nbsp; &#9654; &nbsp;
  %b{style: "color: #ff8b02;"}= I18n.t('dashboard_navigation_all_sections')
  %br/
  %br/
  %button.btn.btn-white{"ng-click" => "new_section()"}= I18n.t('dashboard_sections_new_section')
  %br/
  %br/

  %div.jumbotron{'ng-show' => 'sectionsLoaded && sections.length <= 0'}
    %p= I18n.t('dashboard_sections_jumbotron_instruction')

  #sections-table-react

  %table{style: "width:100%; table-layout:auto;", 'ng-show' => 'sections.length > 0 && !hideSectionsTable'}
    %colgroup
      %col{width:"200"}
      %col{width:"130"}
      %col{width:"98"}
      %col{width:"130"}
      %col
      %col
      %col
    %tr
      %th.manage-th
        %a{href: "", "ng-click" => "order = 'name'"}= I18n.t('dashboard_sections_table_section')
      %th.manage-th
        %a{href: "", "ng-click" => "order = 'login_type'"}= I18n.t('dashboard_sections_table_secret')
      %th.manage-th
        %a{href: "", "ng-click" => "order = 'grade'"}= I18n.t('dashboard_sections_table_grade')
      %th.manage-th
        %a{href: "", "ng-click" => "order = 'course.name'"}= I18n.t('dashboard_sections_table_course')
      %th.manage-th
        %a{href: "", "ng-click" => "order = 'stage_extras'"}= I18n.t('dashboard_sections_table_stage_extras')
      %th.manage-th
        %a{href: "", "ng-click" => "order = 'pairing_allowed'"}= I18n.t('dashboard_sections_table_pairing_allowed')
      %th.manage-th
        %a{href: "", "ng-click" => "order = 'students.length'"}= I18n.t('dashboard_sections_table_students')
      %th.manage-th= I18n.t('dashboard_sections_table_code')
      %th.manage-th

    %tr{"ng-repeat" => "section in sections | orderBy:order", style: "vertical-align:top"}
      %td
        %span{"ng-hide" => "section.editing", style: "font-size:18px; padding-top:12px"}
          %a{"ng-href" => "#/sections/{{section.id}}"} {{section.name}}
        %span{"ng-hide" => "section.editing", style: "font-size:12px; opacity: 0.8"}
          %br/
          %div{style: "opacity: 0.7", "ng-show" => "section.students.length > 0"}
            %a{"ng-href" => "#/sections/{{section.id}}/progress"}= I18n.t('dashboard_navigation_view_progress')
          %div{style: "opacity: 0.7"}
            %a{"ng-href" => "#/sections/{{section.id}}/manage"}= '{{section.students.length}}' == 0 ? I18n.t('dashboard_navigation_add_students') : I18n.t('dashboard_navigation_manage_students')
        %span{"ng-show" => "section.editing"}
          %input{"ng-model" => "section.name", placeholder: I18n.t('dashboard_sections_name'), style: "width: 100%", type: "text"}/
      %td
        %span{"ng-hide" => "section.editing"} {{section.login_type}}
        %span{"ng-show" => "section.editing"}
          %select{"ng-model" => "section.login_type", "ng-options"=>"value for value in #{DashboardSection::valid_login_types.inspect}"}
      %td
        %span{"ng-hide" => "section.editing"} {{section.grade}}
        %span{"ng-show" => "section.editing"}
          %select{"ng-model" => "section.grade", "ng-options"=>"value for value in #{DashboardSection::valid_grades.inspect}"}
      %td
        %a{"ng-hide" => "section.editing", "ng-href" => "{{getPath(section)}}"} {{getName(section)}}
        %span{"ng-show" => "section.editing"}
          %select{"ng-model" => "section.assign_id", "ng-options"=>"assignable.assign_id as assignable.name group by assignable.category for assignable in assignable_list | orderBy:['category_priority', 'category', 'position', 'name']"}
            %option{value: ''}
      %td
        %span{"ng-hide" => "section.editing"} {{section.stage_extras ? "#{I18n.t('yes')}" : "#{I18n.t('no')}"}}
        %span{"ng-show" => "section.editing"}
          %input{"ng-model" => "section.stage_extras", type: "checkbox"}/
      %td
        %span{"ng-hide" => "section.editing"} {{section.pairing_allowed ? "#{I18n.t('yes')}" : "#{I18n.t('no')}"}}
        %span{"ng-show" => "section.editing"}
          %input{"ng-model" => "section.pairing_allowed", type: "checkbox"}/
      %td {{section.students.length}}
      %td
        {{section.code}}
      %td
        %span{"ng-show" => "section.confirmDelete"}
          = I18n.t('dashboard_action_confirm')
          %br
          %button.btn.btn-danger{"ng-click"=>'del(section)', style:"width:48.5%"}= I18n.t('dashboard_action_delete_yes')
          %button.btn.btn-white{"ng-click"=>'section.confirmDelete = false', style:"width:48.5%"}= I18n.t('dashboard_action_delete_no')
        %span{"ng-hide" => "section.confirmDelete"}
          %button.btn.btn-white{"ng-click" => "edit(section)", "ng-hide" => "section.editing", style:"width:48.5%"}= I18n.t('dashboard_action_edit')
          %button.btn.btn-primary{"ng-click" => "save(section)", "ng-show" => "section.editing", style:"width:48.5%"}= I18n.t('dashboard_action_save')
          %button.btn.btn-white{"ng-click" => "cancel(section)", "ng-show" => "section.editing", style:"width:48.5%"}= I18n.t('dashboard_action_cancel')
          %button.btn.btn-danger{"ng-show" => "!section.editing && section.students.length < 1", "ng-click" => "confirm_delete(section)", style:"width:48.5%"}= I18n.t('dashboard_action_delete')
        %form{:action=>"/certificates", :method=>"POST"}
          %input{"ng-repeat" => "student in section.students", :type=>'hidden', :name=>'names[]', :value=>'{{student.name}}'}
          %input{:type=>'hidden', :name=>'script', :value=>'{{section.script.name}}'}
          %input.btn.btn-white{type:"submit", value: I18n.t('dashboard_action_print_certificates'), style:"margin-top:10px; width:100%"}

  %br/
  %br/

  %p{style: "font-size:18px; color: #7665a0;"}= I18n.t('dashboard_sections_table_secret')
  %p= I18n.t('dashboard_sections_login_type_explanation')

  %br/

  %div
    %table{style: "width:100%; table-layout:fixed;"}
      %tr
        %th.manage-th
        %th.manage-th= I18n.t('dashboard_login_picture')
        %th.manage-th= I18n.t('dashboard_login_word')
        %th.manage-th= I18n.t('dashboard_login_none')
      %tr
        %td{style: "font-family: 'Gotham 7r', sans-serif;"}= I18n.t('dashboard_sections_email_question')
        %td= I18n.t('dashboard_action_delete_no')
        %td= I18n.t('dashboard_action_delete_no')
        %td= I18n.t('dashboard_action_delete_yes')
      %tr
        %td{style: "font-family: 'Gotham 7r', sans-serif;"}= I18n.t('dashboard_sections_account_creation_question')
        %td= I18n.t('dashboard_teacher')
        %td= I18n.t('dashboard_teacher')
        %td= I18n.t('dashboard_student')
      %tr
        %td{style: "font-family: 'Gotham 7r', sans-serif;"}= I18n.t('dashboard_sections_password_question')
        %td= I18n.t('dashboard_sections_picture_account_creation')
        %td= I18n.t('dashboard_sections_word_account_creation')
        %td= I18n.t('dashboard_sections_password_account_creation')
      %tr
        %td{style: "font-family: 'Gotham 7r', sans-serif;"}= I18n.t('dashboard_sections_sign_in_question')
        %td= I18n.t('dashboard_sections_sign_in_unique')
        %td= I18n.t('dashboard_sections_sign_in_unique')
        %td= I18n.t('dashboard_sections_sign_in_main')

  %br
    %p= I18n.t('dashboard_privacy_document_link')
  %br/
