-require 'state_abbr'

- content_for(:head) do
  =javascript_include_tag 'js/districtDropdown'

#pl-application-form
  #pl-application-facets.form-section

    .form-group
      .question= t('district_dropdown.school_type')
      %select#school-type.form-control{name: "#{form_name}[school_type]", type: "select", required: false}
        %option{value: "", selected: true, disabled: true}
        %option{value: "charter"}= t('district_dropdown.charter')
        %option{value: "private"}= t('district_dropdown.private')
        %option{value: "public"}= t('district_dropdown.public')
        %option{value: "other"}= t('district_dropdown.other')

    .form-group{style: "display: none"}
      .question= t('district_dropdown.zip')
      %input#school-zipcode.form-control{name: "#{form_name}[school_zip]", type: "text", required: false}

    .form-group{style: "display: none"}
      .question= t('district_dropdown.state')
      %select#school-state.form-control{name: "#{form_name}[school_state]", type: "select", required: false}
        %option{value: "", selected: true, disabled: true}
        - get_all_states_with_dc.each do |state_abbr, state_name|
          %option{value: state_abbr}= state_name
        %option{value: "other"}= t('district_dropdown.other')

    .form-group{style: "display: none"}
      .question= t('district_dropdown.search_district')
      #school-district

        -# We'll apply the Selectize UI control to this input.
        %input#school-district-id.form-control{name: "school_district_id_source", type: "text", required: false}

        -# This is the input we'll actually submit as part of the form.  We'll copy the Selectized value into
        -# here whenever it's changed.  Sometimes we'll override this with code, say 0 for "unknown district".
        -# Selectize was showing this 0 as a character when it was disabled, hence giving Selectize its own
        -# input to work with above.
        %input#school-district-id-form.form-control{name: "#{form_name}[school_district_id]", type: "hidden", required: false}

      %label
        %input#school-district-other{name: "school_district_other", type: "checkbox", style: "margin-top: 0px"}
        %span{style: "font-size: 12px"}
          = t('district_dropdown.other_district')
