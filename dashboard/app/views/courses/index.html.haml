:ruby
  lines_count = fetch_metrics['lines_of_code']
  lines_count = number_with_delimiter(lines_count, :delimiter => ',')
  students_count = fetch_user_metrics['number_students']
  students_count /= 1000000
  students_count = students_count.to_s

  courses_data = {}
  courses_data[:english] = @is_english
  courses_data[:teacher] = @is_teacher
  courses_data[:linescount] = lines_count
  courses_data[:studentscount] = students_count
  courses_data[:codeorgurlprefix] = CDO.code_org_url
  courses_data[:signedout] = @is_signed_out
  courses_data[:modernelementarycoursesavailable] = @modern_elementary_courses_available

  @page_title = @is_teacher ? I18n.t('courses_page.title_teacher') : I18n.t('courses_page.title_student')

  if @is_teacher
    courses_data[:specialAnnouncement] = Announcements.get_announcement_for_page("/courses")
  end

%link{:href=>'/shared/css/course-explorer.css', :rel=>'stylesheet'}

- if RaceInterstitialHelper.show?(current_user) || @force_race_interstitial
  = render partial: 'layouts/race_interstitial'

%script{src: webpack_asset_path('js/courses/index.js'), data: {courses: courses_data.to_json}}

-# Components generated by HAML which might be pulled in and displayed by the React model.
.hiddenComponents{style: "display: none"}
  = render inline: File.read(Rails.root.join('..', 'shared', 'haml', 'course_explorer_table.haml')), type: :haml, locals: {responsive: true}
  = render inline: File.read(Rails.root.join('..', 'shared', 'haml', 'tool_explorer_table.haml')), type: :haml
  = render partial: 'home/all_courses', locals: {locale: request.locale}

  #flashes
    = show_flashes.html_safe

#courses-container
