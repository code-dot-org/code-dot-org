- unless @is_legacy_share
  %div{style: 'display: none;'}= render partial: 'levels/reference_area'
- if @level.contained_levels.present?
  %div{style: 'display: none;'}= render partial: 'levels/contained_levels'

-# Ensure Font Awesome is loaded for use in apps
%span{style: 'font: 1px FontAwesome; position: absolute;', id: 'fa-preload'} &nbsp;

#codeApp
  .loading
  .slow_load
    = t(:slow_loading)
    %br
    %a{href: 'javascript: location.reload();'}= t(:try_reloading)

:javascript
  //<![CDATA[
  var script_path = "#{@script_level && @script_level.path}";
  var appOptions = #{app_options.to_json};
  appOptions.locale = '#{js_locale}';
  //]]>

- content_for :body_scripts do
  = render_app_dependencies

  -# Small inline script to kick off app initialization once all dependencies
  -# have been loaded.
  :javascript
    //<![CDATA[
    apps.setupApp(appOptions);
    apps.load(apps.init);
    //]]>
