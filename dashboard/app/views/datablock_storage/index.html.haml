-# TODO: post-firebase-cleanup, consider removing this entire debug interface (or not 🤷‍♀️): #56994

%h2 Tables
%table
  %tr
    %td table_name
    %td columns
    %td is_shared_table
  - @tables.each do |table|
    %tr
      %td= table.table_name
      %td= table.columns
      %td= table.is_shared_table

%h2 Records

%table
  %tr
    %td table_name
    %td record_id
    %td record_json
  - @records.each do |record|
    %tr
      %td= record.table_name
      %td= record.record_id
      %td= record.record_json

%h2 Key Value Pairs

%table
  %tr
    %td key
    %td value
  - @key_value_pairs.each do |kvp|
    %tr
      %td= kvp.key
      %td= kvp.value

%h2 KeyValuePair

%h3 set_key_value
= form_tag "set_key_value", :method => :post, :remote => false do
  = text_field_tag "key", "", placeholder: "key"
  = text_field_tag "value", "", placeholder: "\"value\""
  = submit_tag "set_key_value"

%h3 get_key_value
= form_tag "get_key_value", :method => :get, :remote => false do
  = text_field_tag "key", "", placeholder: "key"
  = submit_tag "get_key_value"

%h2 Record

%h3 create_record
= form_tag "create_record", :method => :post, :remote => false do
  = text_field_tag "table_name", "", placeholder: "table_name"
  = text_field_tag "record_json", "", placeholder: "record_json"
  = submit_tag "create_record"

%h3 read_records
= form_tag "read_records", :method => :get, :remote => false do
  = text_field_tag "table_name", "", placeholder: "table_name"
  = submit_tag "read_records"

%h3 update_record
= form_tag "update_record", :method => :put, :remote => false do
  = text_field_tag "table_name", "", placeholder: "table_name"
  = text_field_tag "record_id", "", placeholder: "record_id"
  = text_field_tag "record_json", "", placeholder: "record_json"
  = submit_tag "update_record"


%h3 delete_record
= form_tag "delete_record", :method => :delete, :remote => false do
  = text_field_tag "table_name", "", placeholder: "table_name"
  = text_field_tag "record_id", "", placeholder: "record_id"
  = submit_tag "delete_record"

%hr

%h2 Dataset Browser Data Loading Methods

%h3 get_table_names
= form_tag "get_table_names", :method => :get, :remote => false do
  = submit_tag "get_table_names"

%h3 get_key_values
= form_tag "get_key_values", :method => :get, :remote => false do
  = submit_tag "get_key_values"

%hr

%h2 Dataset Browser Actions Methods

%h3 create_table
= form_tag "create_table", :method => :post, :remote => false do
  = text_field_tag "table_name", "", placeholder: "table_name"
  = submit_tag "create_table"

%h3 delete_table
= form_tag "delete_table", :method => :delete, :remote => false do
  = text_field_tag "table_name", "", placeholder: "table_name"
  = submit_tag "delete_table"

%h3 clear_table
= form_tag "clear_table", :method => :delete, :remote => false do
  = text_field_tag "table_name", "", placeholder: "table_name"
  = submit_tag "clear_table"

%h3 import_csv
= form_tag "import_csv", :method => :post, :remote => false do
  = text_field_tag "table_name", "", placeholder: "table_name"
  = text_area_tag "table_data_csv", "", placeholder: "table_data_csv"
  = submit_tag "import_csv"

%h3 export_csv
= form_tag "export_csv", :method => :get, :remote => false do
  = text_field_tag "table_name", "", placeholder: "table_name"
  = submit_tag "export_csv"

%h3 get_column
= form_tag "get_column", :method => :get, :remote => false do
  = text_field_tag "table_name", "", placeholder: "table_name"
  = text_field_tag "column_name", "", placeholder: "column_name"
  = submit_tag "get_column"

%h3 add_column
= form_tag "add_column", :method => :post, :remote => false do
  = text_field_tag "table_name", "", placeholder: "table_name"
  = text_field_tag "column_name", "", placeholder: "column_name"
  = submit_tag "add_column"

%h3 delete_column
= form_tag "delete_column", :method => :delete, :remote => false do
  = text_field_tag "table_name", "", placeholder: "table_name"
  = text_field_tag "column_name", "", placeholder: "column_name"
  = submit_tag "delete_column"

%h3 rename_column
= form_tag "rename_column", :method => :put, :remote => false do
  = text_field_tag "table_name", "", placeholder: "table_name"
  = text_field_tag "old_column_name", "", placeholder: "old_column_name"
  = text_field_tag "new_column_name", "", placeholder: "new_column_name"
  = submit_tag "rename_column"

%h3 coerce_column
= form_tag "coerce_column", :method => :put, :remote => false do
  = text_field_tag "table_name", "", placeholder: "table_name"
  = text_field_tag "column_name", "", placeholder: "column_name"
  = text_field_tag "column_type", "", placeholder: "column_type"
  = submit_tag "coerce_column"

%h3 delete_key_value
= form_tag "delete_key_value", :method => :delete, :remote => false do
  = text_field_tag "key", "", placeholder: "key"
  = submit_tag "delete_key_value"

%h2 Other

%h3 populate_tables
= form_tag "populate_tables", :method => :put, :remote => false do
  = text_area_tag "tables_json", '{"baz": [{"name": "Sam", "age": 5}, {"name": "Syd", "age": 7}]}', placeholder: "tables_json"
  = submit_tag "populate_tables"

%h3 populate_key_values
= form_tag "populate_key_values", :method => :put, :remote => false do
  = text_area_tag "key_values_json", '{"baz": true, "bing": "Hiya", "tim": 5}', placeholder: "key_values_json"
  = submit_tag "populate_key_values"

%h3 get_columns_for_table
= form_tag "get_columns_for_table", :method => :get, :remote => false do
  = text_field_tag "table_name", "", placeholder: "table_name"
  = submit_tag "get_columns_for_table"

%h3 clear_all_data
= form_tag "clear_all_data", :method => :delete, :remote => false do
  = submit_tag "clear_all_data"

%h3 add_shared_table
= form_tag "add_shared_table", :method => :post, :remote => false do
  = text_field_tag "table_name", "100 Birds of the World", placeholder: "table_name"
  = submit_tag "add_shared_table"

%h2 Library Manifest

%div= @library_manifest

%h3 get_library_manifest
= form_tag "get_library_manifest", :method => :get, :remote => false do
  = submit_tag "get_library_manifest"

%h3 set_library_manifest
= form_tag "set_library_manifest", :method => :put, :remote => false do
  = text_area_tag "library_manifest", '{"categories":[{"datasets":["100 Birds of the World"],"name":"Animals","published":true}],"tables":[{"current":false,"description":"Data and images about 100 different species of birds around the world","docUrl":"https://studio.code.org/data_docs/100-birds/","name":"100 Birds of the World","published":true}]}'
  = submit_tag "set_library_manifest"
