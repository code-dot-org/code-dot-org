/* This file generates CSS that will be used to animate the Blockly blocks
 * in the DanceAiModal's UI.  We need it to be CSS so that the styling can
 * be applied to Blockly blocks that we are embedding.  The CSS selectors
 * are highly-specific to the current version of Blockly, and to the blocks
 * that we are embedding, and will likely need to be updated in case any of
 * these things change.
 */

// Create an animation that delays for $delay seconds and then fades in
// over the course of $duration seconds.
@mixin appear($index) {
  $name: appear-#{$index};
  $delay: $index;
  $duration: 1;

  $start_percent: #{100 * ($delay / ($delay + $duration))};

  @keyframes #{$name} {
    0%, #{$start_percent}% {
      opacity: 0;
    }
    100% {
      opacity: 1;
    }
  }

  animation: #{$name} #{$delay + $duration}s;
}

#ai-modal-inner-area {
  #fade-in {
    // First block
    .blocklyWorkspace .blocklyPath {
      @include appear(0);
    }

    // First block's text
    .blocklyBlockCanvas g .blocklyNonEditableText:nth-of-type(3) {
      @include appear(1);
    }

    // Second block
    .blocklyBlockCanvas g g .blocklyPath {
      @include appear(2);
    }

    // Second block's first text
    .blocklyBlockCanvas g .blocklyNonEditableText {
      @include appear(3);
    }

    // Second block's second text
    .blocklyBlockCanvas g .blocklyNonEditableText:nth-of-type(4) {
      @include appear(4);
    }
  }

  #preview-area {
    #defaultCanvas1 {
      width: 100% !important;
      height: 100% !important;
    }
  }
}
