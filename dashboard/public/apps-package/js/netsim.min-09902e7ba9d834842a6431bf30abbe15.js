require=function a(b,c,d){function e(g,h){if(!c[g]){if(!b[g]){var i="function"==typeof require&&require;if(!h&&i)return i(g,!0);if(f)return f(g,!0);var j=new Error("Cannot find module '"+g+"'");throw j.code="MODULE_NOT_FOUND",j}var k=c[g]={exports:{}};b[g][0].call(k.exports,function(a){var c=b[g][1][a];return e(c?c:a)},k,k.exports,a,b,c,d)}return c[g].exports}for(var f="function"==typeof require&&require,g=0;g<d.length;g++)e(d[g]);return e}({261:[function(a){var b=a("../appMain"),c=a("../StudioApp").singleton,d=a("./netsim"),e=a("./levels"),f=a("./skins");window.netsimMain=function(a){a.skinsModule=f,a.isEditorless=!0;var g=new d;g.injectStudioApp(c),b(g,e,a)}},{"../StudioApp":5,"../appMain":9,"./levels":259,"./netsim":262,"./skins":264}],264:[function(a,b,c){var d=a("../skins");c.load=function(a,b){var c=d.load(a,b);return c}},{"../skins":268}],262:[function(a,b){"use strict";function c(){var a=document.querySelector("#netsim-leftcol.pin_bottom");if(a){var b=document.querySelector(".small-footer"),c=0;if(b){var d=$("#codeApp");c+=$(b).outerHeight(!0),c-=parseInt(d.css("bottom"),10)}a.style.bottom=c+"px"}}function d(){var a=document.querySelector("#netsim-leftcol.pin_bottom"),b=document.querySelector(".small-footer");if(a&&b&&$(a).is(":visible")){b.style.maxWidth=a.offsetWidth+"px";var c=b.querySelector("form"),d=b.querySelector("small");d.style["float"]=d.offsetTop===c.offsetTop?"right":"left"}}var e=a("../utils"),f=e.getLodash(),g=a("./locale"),h=a("@cdo/shared/smallFooter"),i=a("../ObservableEvent"),j=a("../RunLoop"),k=a("./page.html.ejs"),l=a("./NetSimConstants"),m=a("./NetSimUtils"),n=a("./DashboardUser"),o=a("./NetSimBitLogPanel"),p=a("./NetSimLobby"),q=a("./NetSimLocalClientNode"),r=a("./NetSimLogger"),s=a("./NetSimLogPanel"),t=a("./NetSimRouterLogModal"),u=a("./NetSimRouterNode"),v=a("./NetSimSendPanel"),w=a("./NetSimShard"),x=a("./NetSimStatusPanel"),y=a("./NetSimTabsComponent"),z=a("./NetSimVisualization"),A=l.DnsMode,B=l.MessageGranularity,C=r.getSingleton(),D=a("./NetSimGlobals"),E=b.exports=function(){this.skin=null,this.level={},this.heading=0,this.currentUser_=n.getCurrentUser(),this.shard_=null,this.myNode=null,this.runLoop_=new j,this.chunkSize_=8,this.myDeviceBitRate_=1/0,this.enabledEncodings_=[],this.dnsMode_=A.NONE,this.receivedMessageLog_=null,this.sentMessageLog_=null,this.shardChange=new i,this.shardChange.register(this.onShardChange_.bind(this)),this.eventKeys={}};E.prototype.injectStudioApp=function(a){this.studioApp_=a},E.prototype.init=function(b){if(!this.studioApp_)throw new Error("NetSim requires a StudioApp");D.setRootControllers(this.studioApp_,this),b.skin.staticAvatar=null,b.skin.smallStaticAvatar=null,b.skin.failureAvatar=null,b.skin.winAvatar=null,this.skin=b.skin,this.level=m.scrubLevelConfiguration_(b.level),this.environment=b.rackEnv,this.usePusher=b.usePusher,this.pusherApplicationKey=b.pusherApplicationKey,this.reportingInfo_=b.report,b.html=k({assetUrl:this.studioApp_.assetUrl,data:{visualization:"",localeDirection:this.studioApp_.localeDirection(),controls:a("./controls.html.ejs")({assetUrl:this.studioApp_.assetUrl})},hideRunButton:!0}),b.enableShowCode=!1,b.pinWorkspaceToBottom=!0,b.loadAudio=this.loadAudio_.bind(this),this.studioApp_.configureDom=E.configureDomOverride_.bind(this.studioApp_),this.studioApp_.onResize=E.onResizeOverride_.bind(this.studioApp_),this.studioApp_.init(b),this.currentUser_.whenReady(function(){this.initWithUserName_(this.currentUser_)}.bind(this)),this.runLoop_.tick.register(this.tick.bind(this)),this.runLoop_.begin()},E.prototype.tick=function(a){this.isConnectedToShard()&&(this.myNode.tick(a),this.shard_.tick(a))},E.prototype.getUniqueLevelKey=function(){return location.pathname.substr(1).replace(/\W/g,"-")},E.prototype.getOverrideShardID=function(){var a=location.search.split("?");if(1===a.length)return void 0;var b;return a[1].split("&").forEach(function(a){var c=a.split("=");c.length>1&&"s"===c[0]&&(b=c[1])}),b},E.prototype.shouldShowAnyTabs=function(){return this.level.showTabs.length>0},E.prototype.initWithUserName_=function(a){this.mainContainer_=$("#netsim"),this.level.messageGranularity===B.PACKETS?(this.receivedMessageLog_=new s($("#netsim-received"),{logTitle:g.receivedMessageLog(),isMinimized:!1,hasUnreadMessages:!0,packetSpec:this.level.clientInitialPacketHeader}),this.sentMessageLog_=new s($("#netsim-sent"),{logTitle:g.sentMessageLog(),isMinimized:!0,hasUnreadMessages:!1,packetSpec:this.level.clientInitialPacketHeader})):this.level.messageGranularity===B.BITS&&(this.receivedMessageLog_=new o($("#netsim-received"),{logTitle:g.receiveBits(),isMinimized:!1,netsim:this,showReadWireButton:!0}),this.sentMessageLog_=new o($("#netsim-sent"),{logTitle:g.sentBitsLog(),isMinimized:!1,netsim:this})),this.statusPanel_=new x($("#netsim-status"),{disconnectCallback:this.disconnectFromRemote.bind(this,function(){})}),this.routerLogModal_=new t($("#router-log-modal")),this.visualization_=new z($("svg"),this.runLoop_),this.lobby_=new p($(".lobby-panel"),this,{user:a,levelKey:this.getUniqueLevelKey(),sharedShardSeed:this.getOverrideShardID()}),this.shouldShowAnyTabs()&&(this.tabs_=new y($("#netsim-tabs"),this.runLoop_,{chunkSizeSliderChangeCallback:this.setChunkSize.bind(this),myDeviceBitRateChangeCallback:this.setMyDeviceBitRate.bind(this),encodingChangeCallback:this.changeEncodings.bind(this),routerBandwidthSliderChangeCallback:this.setRouterBandwidth.bind(this),routerBandwidthSliderStopCallback:this.changeRemoteRouterBandwidth.bind(this),routerMemorySliderChangeCallback:this.setRouterMemory.bind(this),routerMemorySliderStopCallback:this.changeRemoteRouterMemory.bind(this),dnsModeChangeCallback:this.changeRemoteDnsMode.bind(this),becomeDnsCallback:this.becomeDnsNode.bind(this)}),this.tabs_.attachToRunLoop(this.runLoop_)),this.sendPanel_=new v($("#netsim-send"),this.level,this),this.changeEncodings(this.level.defaultEnabledEncodings),this.setChunkSize(this.level.defaultChunkSizeBits),this.setMyDeviceBitRate(this.level.defaultBitRateBitsPerSecond),this.setRouterBandwidth(this.level.defaultRouterBandwidth),this.setRouterMemory(this.level.defaultRouterMemory),this.setDnsMode(this.level.defaultDnsMode),this.render(),window.addEventListener("beforeunload",this.onBeforeUnload_.bind(this)),window.addEventListener("unload",this.onUnload_.bind(this)),window.addEventListener("resize",f.debounce(this.updateLayout.bind(this),250))},E.prototype.onBeforeUnload_=function(a){return window.__TestInterface&&window.__TestInterface.ignoreOnBeforeUnload?void 0:this.isConnectedToRemote()?(a.returnValue=g.onBeforeUnloadWarning(),g.onBeforeUnloadWarning()):void 0},E.prototype.onUnload_=function(){this.isConnectedToShard()&&this.synchronousDisconnectFromShard_()},E.prototype.isConnectedToShard=function(){return null!==this.myNode},E.prototype.isConnectedToShardID=function(a){return this.isConnectedToShard()&&this.shard_.id===a},E.prototype.connectToShard=function(a,b){return this.isConnectedToShard()?(C.warn("Auto-closing previous connection..."),void this.disconnectFromShard(this.connectToShard.bind(this,a,b))):(this.shard_=new w(a,D.getPubSubConfig()),void this.createMyClientNode_(b,function(a,b){this.myNode=b,this.shardChange.notifyObservers(this.shard_,this.myNode)}.bind(this)))},E.prototype.createMyClientNode_=function(a,b){q.create(this.shard_,a,function(a,c){return a?(C.error("Failed to create client node; "+a.message),void b(a,null)):(c.setLostConnectionCallback(this.disconnectFromShard.bind(this)),c.initializeSimulation(this.sentMessageLog_,this.receivedMessageLog_),void b(a,c))}.bind(this))},E.prototype.synchronousDisconnectFromShard_=function(){this.myNode.stopSimulation(),this.myNode.synchronousDestroy(),this.myNode=null},E.prototype.disconnectFromShard=function(a){return a=a||function(){},this.isConnectedToShard()?this.isConnectedToRemote()?void this.disconnectFromRemote(this.disconnectFromShard.bind(this,a)):(this.myNode.stopSimulation(),void this.myNode.destroy(function(b,c){b&&C.warn("Error destroying node:"+b.message),this.myNode=null,this.shardChange.notifyObservers(null,null),a(b,c)}.bind(this))):(C.warn("Redundant disconnect call."),void a(null,null))},E.prototype.isConnectedToRemote=function(){return this.isConnectedToClient()||this.isConnectedToRouter()},E.prototype.getConnectedRemoteNode=function(){var a=this.getConnectedClient(),b=this.getConnectedRouter();return a?a:b},E.prototype.isConnectedToClient=function(){return!!this.getConnectedClient()},E.prototype.getConnectedClient=function(){return this.isConnectedToShard()?this.myNode.myRemoteClient:null},E.prototype.isConnectedToRouter=function(){return!!this.getConnectedRouter()},E.prototype.getConnectedRouter=function(){return this.isConnectedToShard()?this.myNode.getMyRouter():null},E.prototype.connectToRouter=function(a){if(this.isConnectedToRemote())return C.warn("Auto-disconnecting from previous router."),void this.disconnectFromRemote(this.connectToRouter.bind(this,a));var b=this;u.get(a,this.shard_,function(c,d){return c?void C.warn("Failed to find router with ID "+a+"; "+c.message):void b.myNode.connectToRouter(d,function(a){a&&C.warn("Failed to connect to "+d.getDisplayName()+"; "+a.message)})})},E.prototype.disconnectFromRemote=function(a){a=e.valueOr(a,function(){}),this.myNode.disconnectRemote(a)},E.prototype.receiveBit=function(a){this.myNode.getLatestMessageOnSimplexWire(a)},E.prototype.changeEncodings=function(a){this.enabledEncodings_=a,this.tabs_&&this.tabs_.setEncodings(a),this.receivedMessageLog_.setEncodings(a),this.sentMessageLog_.setEncodings(a),this.sendPanel_.setEncodings(a),this.visualization_.setEncodings(a),this.updateLayout()},E.prototype.getEncodings=function(){return this.enabledEncodings_},E.prototype.setChunkSize=function(a){this.chunkSize_=a,this.tabs_&&this.tabs_.setChunkSize(a),this.receivedMessageLog_.setChunkSize(a),this.sentMessageLog_.setChunkSize(a),this.sendPanel_.setChunkSize(a)},E.prototype.setMyDeviceBitRate=function(a){this.myDeviceBitRate_=a,this.tabs_&&this.tabs_.setMyDeviceBitRate(a),this.sendPanel_.setBitRate(a)},E.prototype.setRouterCreationTime=function(a){this.tabs_&&this.tabs_.setRouterCreationTime(a)},E.prototype.setRouterBandwidth=function(a){this.tabs_&&this.tabs_.setRouterBandwidth(a)},E.prototype.changeRemoteRouterBandwidth=function(a){this.setRouterBandwidth(a),this.isConnectedToRouter()&&this.getConnectedRouter().setBandwidth(a)},E.prototype.setRouterMemory=function(a){this.tabs_&&this.tabs_.setRouterMemory(a)},E.prototype.changeRemoteRouterMemory=function(a){this.setRouterMemory(a),this.isConnectedToRouter()&&this.getConnectedRouter().setMemory(a)},E.prototype.setDnsMode=function(a){this.dnsMode_=a,this.tabs_&&this.tabs_.setDnsMode(a),this.visualization_.setDnsMode(a)},E.prototype.getDnsMode=function(){return this.dnsMode_},E.prototype.changeRemoteDnsMode=function(a){this.setDnsMode(a),this.isConnectedToRouter()&&this.getConnectedRouter().setDnsMode(a)},E.prototype.setIsDnsNode=function(a){this.tabs_&&this.tabs_.setIsDnsNode(a),this.isConnectedToRouter()&&this.setDnsTableContents(this.getConnectedRouter().getAddressTable())},E.prototype.setDnsNodeID=function(a){this.visualization_.setDnsNodeID(a)},E.prototype.becomeDnsNode=function(){if(this.setIsDnsNode(!0),this.myNode&&this.myNode.getMyRouter()){var a=this.myNode,b=a.getMyRouter();b.dnsNodeID=a.entityID,b.update()}},E.prototype.setDnsTableContents=function(a){this.tabs_&&this.tabs_.setDnsTableContents(a)},E.prototype.setRouterLogData=function(a){this.tabs_&&this.tabs_.setRouterLogData(a)},E.prototype.setRouterQueuedPacketCount_=function(a){this.tabs_&&this.tabs_.setRouterQueuedPacketCount(a)},E.prototype.setRouterMemoryInUse_=function(a){this.tabs_&&this.tabs_.setRouterMemoryInUse(a)},E.prototype.setRouterDataRate_=function(a){this.tabs_&&this.tabs_.setRouterDataRate(a)},E.prototype.loadAudio_=function(){},E.configureDomOverride_=function(a){var b=document.getElementById(a.containerId);b.innerHTML=a.html;var c=this.MIN_WORKSPACE_HEIGHT,d=document.getElementById("netsim-leftcol");a.pinWorkspaceToBottom?(document.body.style.overflow="hidden",b.className=b.className+" pin_bottom",d.className=d.className+" pin_bottom"):(d.style.minHeight=c+"px",b.style.minHeight=c+"px")};var F=f.debounce(function(){d(),c(),h.repositionCopyrightFlyout(),h.repositionMoreMenu()},10);E.onResizeOverride_=function(){var a=document.getElementById("appcontainer"),b=a.parentNode,c=window.getComputedStyle(b),d=parseInt(c.width,10);a.style.top=b.offsetTop+"px",a.style.width=d+"px",F()},E.prototype.render=function(){var a,b,c,d,e,f;a=!1,b=g.disconnected(),this.myNode&&(b="In Lobby",c=this.myNode.getHostname(),this.myNode.myWire&&(d=this.myNode.myWire.localAddress)),this.isConnectedToRemote()&&(a=!0,b=g.connected(),e=this.getConnectedRemoteNode().getDisplayName()),f=this.lobby_.getShareLink(),this.isConnectedToRemote()?(this.mainContainer_.find("#netsim-disconnected").hide(),this.mainContainer_.find("#netsim-connected").show(),this.sendPanel_.setFromAddress(d),this.statusPanel_&&this.statusPanel_.render({isConnected:a,statusString:b,myHostname:c,myAddress:d,remoteNodeName:e,shareLink:f})):(this.mainContainer_.find("#netsim-disconnected").show(),this.mainContainer_.find("#netsim-connected").hide(),this.lobby_.render()),this.routerLogModal_&&this.routerLogModal_.render(),this.updateLayout()},E.prototype.onShardChange_=function(a,b){this.eventKeys.registeredWithLocalNode&&(this.eventKeys.registeredWithLocalNode.remoteChange.unregister(this.eventKeys.remoteChange),this.eventKeys.registeredWithLocalNode=null),b&&(this.eventKeys.remoteChange=b.remoteChange.register(this.onRemoteChange_.bind(this)),this.eventKeys.registeredWithLocalNode=b),this.routerLogModal_&&this.routerLogModal_.setShard(a),this.visualization_.setShard(a),this.visualization_.setLocalNode(b),this.render()},E.prototype.onRemoteChange_=function(a,b){var c=b&&b instanceof u,d=!b&&this.eventKeys.registeredWithRouter;this.eventKeys.registeredWithRouter&&(this.eventKeys.registeredWithRouter.stateChange.unregister(this.eventKeys.routerStateChange),this.eventKeys.registeredWithRouter.statsChange.unregister(this.eventKeys.routerStatsChange),this.eventKeys.registeredWithRouter.wiresChange.unregister(this.eventKeys.routerWiresChange),this.eventKeys.registeredWithRouter.logChange.unregister(this.eventKeys.routerLogChange),this.eventKeys.registeredWithRouter=null),c&&(this.eventKeys.routerStateChange=b.stateChange.register(this.onRouterStateChange_.bind(this)),this.eventKeys.routerStatsChange=b.statsChange.register(this.onRouterStatsChange_.bind(this)),this.eventKeys.routerWiresChange=b.wiresChange.register(this.onRouterWiresChange_.bind(this)),this.eventKeys.routerLogChange=b.logChange.register(this.onRouterLogChange_.bind(this)),this.eventKeys.registeredWithRouter=b),this.render(),c?this.onRouterConnect_(b):d&&this.onRouterDisconnect_()},E.prototype.onRouterConnect_=function(a){this.onRouterStateChange_(a),this.onRouterStatsChange_(a),this.setRouterLogData(a.getLog()),this.routerLogModal_.setRouter(a)},E.prototype.onRouterDisconnect_=function(){this.setRouterCreationTime(0),this.setRouterQueuedPacketCount_(0),this.setRouterMemoryInUse_(0),this.setRouterDataRate_(0),this.setRouterLogData([]),this.routerLogModal_.setRouter(null)},E.prototype.onRouterStateChange_=function(a){var b={};this.myNode&&(b=this.myNode),this.setRouterCreationTime(a.creationTime),this.setRouterBandwidth(a.bandwidth),this.setRouterMemory(a.memory),this.setDnsMode(a.dnsMode),this.setDnsNodeID(a.dnsMode===A.NONE?void 0:a.dnsNodeID),this.setIsDnsNode(a.dnsMode===A.MANUAL&&a.dnsNodeID===b.entityID)},E.prototype.onRouterStatsChange_=function(a){this.setRouterQueuedPacketCount_(a.getQueuedPacketCount()),this.setRouterMemoryInUse_(a.getMemoryInUse()),this.setRouterDataRate_(a.getCurrentDataRate())},E.prototype.onRouterWiresChange_=function(){this.isConnectedToRouter()&&this.setDnsTableContents(this.getConnectedRouter().getAddressTable())},E.prototype.onRouterLogChange_=function(){this.isConnectedToRouter()&&this.setRouterLogData(this.getConnectedRouter().getLog())},E.prototype.animateSetWireState=function(a){this.visualization_.animateSetWireState(a)},E.prototype.animateReadWireState=function(a){this.visualization_.animateReadWireState(a)},E.prototype.updateLayout=function(){var a=$("#netsim-rightcol"),b=$("#netsim-send"),c=$("#netsim-logs");if(F(),a.is(":visible")){var d=a.height(),e=b.height(),f=d-e,g=!this.sentMessageLog_.isMinimized(),h=!this.receivedMessageLog_.isMinimized();if(h&&g){var i=Math.floor(f/2);this.receivedMessageLog_.setHeight(i),this.sentMessageLog_.setHeight(i)}else h?this.receivedMessageLog_.setHeight(Math.floor(f-this.sentMessageLog_.getHeight())):g&&this.sentMessageLog_.setHeight(Math.floor(f-this.receivedMessageLog_.getHeight()));c.css("height",d-e)}},E.prototype.completeLevelAndContinue=function(){$(".submitButton").attr("disabled",!0),sendReport({fallbackResponse:this.reportingInfo_.fallback_response,callback:this.reportingInfo_.callback,app:"netsim",level:this.level.id,result:!0,testResult:100,onComplete:function(a){$(".submitButton").attr("disabled",!1),a.redirect&&(this.isConnectedToRemote()?this.disconnectFromRemote(function(){window.location.href=a.redirect}):window.location.href=a.redirect)}.bind(this)})}},{"../ObservableEvent":2,"../RunLoop":4,"../utils":318,"./DashboardUser":182,"./NetSimBitLogPanel":187,"./NetSimConstants":191,"./NetSimGlobals":203,"./NetSimLobby":204,"./NetSimLocalClientNode":205,"./NetSimLogPanel":209,"./NetSimLogger":210,"./NetSimRouterLogModal":228,"./NetSimRouterNode":229,"./NetSimSendPanel":235,"./NetSimShard":236,"./NetSimStatusPanel":242,"./NetSimTabsComponent":245,"./NetSimUtils":246,"./NetSimVisualization":247,"./controls.html.ejs":258,"./locale":260,"./page.html.ejs":263,"@cdo/shared/smallFooter":320}],263:[function(require,module,exports){module.exports=function(){var t=function anonymous(locals,filters,escape){escape=escape||function(a){return String(a).replace(/&(?!\w+;)/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")};var buf=[];with(locals||{})!function(){buf.push("");var a=require("../locale");buf.push('\n\n<div id="rotateContainer" style="background-image: url(',escape(assetUrl("media/turnphone_horizontal.png")),')">\n  <div id="rotateText">\n    <p>',escape(a.rotateText()),"<br>",escape(a.orientationLock()),"</p>\n  </div>\n</div>\n\n");var b=function(){buf.push('  <div id="bubble" class="clearfix">\n    <table id="prompt-table">\n      <tr>\n        <td id="prompt-icon-cell">\n          <img id="prompt-icon"/>\n        </td>\n        <td id="prompt-cell">\n          <p id="prompt">\n          </p>\n        </td>\n      </tr>\n    </table>\n    <div id="ani-gif-preview-wrapper">\n      <div id="ani-gif-preview">\n      </div>\n    </div>\n  </div>\n')};buf.push('\n<div id="appcontainer">\n  <!-- Should disable spell-check on all netsim elements -->\n  <div id="netsim" autocapitalize="false" autocorrect="false" autocomplete="false" spellcheck="false">\n\n    <div id="netsim-disconnected">\n      <div class="lobby-panel"></div>\n    </div>\n\n\n    <div id="netsim-connected">\n      <div id="netsim-leftcol">\n        <div class="column-width-limiter">\n\n          <div id="netsim-status"></div>\n\n          <div id="netsim-visualization">\n            <svg version="1.1" width="298" height="298" xmlns="http://www.w3.org/2000/svg">\n\n              <filter id="backgroundBlur">\n                <feGaussianBlur in="SourceGraphic" stdDeviation="5" />\n                <feComponentTransfer>\n                  <feFuncA slope="0.5" type="linear"></feFuncA>\n                </feComponentTransfer>\n              </filter>\n\n              <g id="centered-group" transform="translate(150,150)">\n                <g id="background-group" filter="url(#backgroundBlur)"></g>\n                <g id="foreground-group"></g>\n              </g>\n            </svg>\n          </div>\n\n          <div id="netsim-tabs"></div>\n\n        </div>\n      </div>\n\n      <div id="netsim-rightcol">\n        <div id="netsim-logs">\n          <div id="netsim-received"></div>\n          <div id="netsim-sent"></div>\n        </div>\n        <div id="netsim-send"></div>\n      </div>\n    </div>\n\n    <div id="router-log-modal" class="modal fade"></div>\n\n  </div>\n  <div id="footers" dir="',escape(data.localeDirection),'">\n  </div>\n  <div class="hidden">\n    '),b(),buf.push('\n  </div>\n</div>\n\n<div class="clear"></div>\n')}();return buf.join("")};return function(a){return t(a,require("ejs").filters)}}()},{"../locale":150,ejs:491}],259:[function(a,b){var c=a("./NetSimConstants"),d=(a("./Packet"),c.BITS_PER_NIBBLE,c.MessageGranularity),e=c.DnsMode,f=(c.EncodingType,c.NetSimTabType,b.exports={});f.custom={showClientsInLobby:!1,showRoutersInLobby:!1,canConnectToClients:!1,canConnectToRouters:!1,showAddRouterButton:!1,showLogBrowserButton:!1,messageGranularity:d.BITS,automaticReceive:!1,broadcastMode:!1,connectedRouters:!1,minimumExtraHops:0,maximumExtraHops:0,addressFormat:"4",packetCountBitWidth:4,routerExpectsPacketHeader:[],clientInitialPacketHeader:[],showHostnameInGraph:!1,showAddPacketButton:!1,showPacketSizeControl:!1,defaultPacketSizeLimit:8192,showTabs:[],defaultTabIndex:0,showPulseRateSlider:!1,showMetronome:!1,showEncodingControls:[],defaultEnabledEncodings:[],showBitRateControl:!1,lockBitRateControl:!1,defaultBitRateBitsPerSecond:1/0,showChunkSizeControl:!1,lockChunkSizeControl:!1,defaultChunkSizeBits:8,showRouterBandwidthControl:!1,defaultRouterBandwidth:1/0,showRouterMemoryControl:!1,defaultRouterMemory:1/0,defaultRandomDropChance:0,showDnsModeControl:!1,defaultDnsMode:e.NONE},f.playground={showClientsInLobby:!1,showRoutersInLobby:!0,canConnectToClients:!1,canConnectToRouters:!0,showAddRouterButton:!0,showLogBrowserButton:!0,messageGranularity:d.PACKETS,automaticReceive:!0,broadcastMode:!1,connectedRouters:!1,minimumExtraHops:0,maximumExtraHops:0,addressFormat:"4",packetCountBitWidth:4,routerExpectsPacketHeader:["toAddress","fromAddress"],clientInitialPacketHeader:["toAddress","fromAddress"],showHostnameInGraph:!1,showAddPacketButton:!1,showPacketSizeControl:!1,defaultPacketSizeLimit:8192,showTabs:["instructions","my_device","router","dns"],defaultTabIndex:0,showPulseRateSlider:!1,showMetronome:!1,showEncodingControls:["a_and_b","binary","hexadecimal","decimal","ascii"],defaultEnabledEncodings:["a_and_b","binary","hexadecimal","decimal","ascii"],showBitRateControl:!0,lockBitRateControl:!1,defaultBitRateBitsPerSecond:1/0,showChunkSizeControl:!0,lockChunkSizeControl:!1,defaultChunkSizeBits:8,showRouterBandwidthControl:!0,defaultRouterBandwidth:1/0,showRouterMemoryControl:!0,defaultRouterMemory:1/0,defaultRandomDropChance:0,showDnsModeControl:!0,defaultDnsMode:e.NONE}},{"./NetSimConstants":191,"./Packet":255}],258:[function(require,module,exports){module.exports=function(){var t=function anonymous(locals,filters,escape){escape=escape||function(a){return String(a).replace(/&(?!\w+;)/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")};var buf=[];with(locals||{})!function(){buf.push('<div id="slider-cell">\n  <img id="spinner" style="visibility: hidden;" src="',escape(assetUrl("media/netsim/loading.gif")),'" height=15 width=15>\n</div>\n')}();return buf.join("")};return function(a){return t(a,require("ejs").filters)}}()},{ejs:491}],247:[function(a,b){"use strict";var c=a("../utils"),d=c.getLodash(),e=a("./NetSimNodeFactory"),f=a("./NetSimWire"),g=a("./NetSimVizAutoDnsNode"),h=a("./NetSimVizNode"),i=a("./NetSimVizSimulationNode"),j=a("./NetSimVizSimulationWire"),k=a("./NetSimVizWire"),l=a("./NetSimGlobals"),m=a("./tweens"),n=a("./NetSimConstants"),o=n.DnsMode,p=n.NodeType,q=b.exports=function(a,b){this.svgRoot_=a,this.shard_=null,this.elements_=[],this.localNode=null,this.visualizationWidth=300,this.visualizationHeight=300,this.dnsMode_=null,this.autoDnsNode_=null,this.autoDnsWire_=null,this.eventKeys={},this.encodings_=[],b.tick.register(this.tick.bind(this)),b.render.register(this.render.bind(this))};q.prototype.tick=function(a){this.elements_.forEach(function(b){b.tick(a)}),this.elements_=this.elements_.filter(function(a){return a.isDead()?(a.getRoot().remove(),!1):!0})},q.prototype.render=function(a){this.elements_.forEach(function(b){b.render(a)})},q.prototype.setShard=function(a){this.shard_=a,this.eventKeys.registeredWithShard&&(this.eventKeys.registeredWithShard.nodeTable.tableChange.unregister(this.eventKeys.nodeTable),this.eventKeys.registeredWithShard.wireTable.tableChange.unregister(this.eventKeys.wireTable),this.eventKeys.registeredWithShard=null),a&&(this.eventKeys.nodeTable=a.nodeTable.tableChange.register(this.onNodeTableChange_.bind(this)),this.eventKeys.wireTable=a.wireTable.tableChange.register(this.onWireTableChange_.bind(this)),this.eventKeys.registeredWithShard=a)},q.prototype.setLocalNode=function(a){this.eventKeys.registeredWithLocalNode&&(this.eventKeys.registeredWithLocalNode.remoteChange.unregister(this.eventKeys.remoteChange),this.eventKeys.registeredWithLocalNode=null),a&&(this.eventKeys.remoteChange=a.remoteChange.register(this.onRemoteChange_.bind(this)),this.eventKeys.registeredWithLocalNode=a),a?(this.localNode?this.localNode.configureFrom(a):(this.localNode=new i(a),this.elements_.push(this.localNode),this.svgRoot_.find("#background-group").append(this.localNode.getRoot())),this.localNode.setIsLocalNode()):this.localNode&&(this.localNode.kill(),this.localNode=null),this.pullElementsToForeground()},q.prototype.onRemoteChange_=function(){this.pullElementsToForeground(),this.distributeForegroundNodes()},q.prototype.getElementByEntityID=function(a,b){return d.find(this.elements_,function(c){return c instanceof a&&c.getCorrespondingEntityID&&c.getCorrespondingEntityID()===b})},q.prototype.getReciprocatedWiresAttachedToNode=function(a){if(a.isRouter)return this.getWiresAttachedToNode(a);var b=this.getLocalWiresAttachedToNode(a);return b.filter(function(b){return b.remoteVizNode.isRouter?!0:this.getWiresAttachedToNode(b.remoteVizNode).some(function(b){return b.remoteVizNode===a})},this)},q.prototype.getLocalWiresAttachedToNode=function(a){return this.elements_.filter(function(b){return b instanceof k&&b.localVizNode===a})},q.prototype.getWiresAttachedToNode=function(a){return this.elements_.filter(function(b){return b instanceof k&&(b.localVizNode===a||b.remoteVizNode===a)})},q.prototype.onNodeTableChange_=function(a){var b=e.nodesFromRows(this.shard_,a);this.updateVizEntitiesOfType_(i,b,function(a){var b=new i(a);return b.setDnsMode(this.dnsMode_),b.snapToPosition(Math.random()*this.visualizationWidth-this.visualizationWidth/2,Math.random()*this.visualizationHeight-this.visualizationHeight/2),b}.bind(this))},q.prototype.onWireTableChange_=function(a){var b=a.map(function(a){return new f(this.shard_,a)},this);this.updateVizEntitiesOfType_(j,b,function(a){var b=new j(a,this.getElementByEntityID.bind(this));return b.setEncodings(this.encodings_),b}.bind(this)),l.getLevelConfig().broadcastMode&&this.updateBroadcastModeWires_(),this.pullElementsToForeground(),this.distributeForegroundNodes()},q.prototype.updateBroadcastModeWires_=function(){this.elements_.forEach(function(a){a instanceof k&&!(a instanceof j)&&a.kill()},this);var a=this.generateBroadcastModeConnections_();a.forEach(function(a){var b=new k(a.nodeA,a.nodeB);this.addVizElement_(b)},this)},q.prototype.generateBroadcastModeConnections_=function(){for(var a=this.shard_.nodeTable.readAll(),b=this.shard_.wireTable.readAll(),c=a.length,d={},e=0;c>e;e++)d[a[e].id]=e;for(var f=new Array(c),g=0;c>g;g++){f[g]=new Array(c);for(var h=0;c>h;h++)f[g][h]=!1}b.forEach(function(a){var b=d[a.localNodeID],c=d[a.remoteNodeID];void 0!==b&&void 0!==c&&(f[b][c]=!0,f[c][b]=!0)});for(var j=0;c>j;j++)for(var k=0;c>k;k++)for(var l=0;c>l;l++)f[k][j]&&f[j][l]&&(f[k][l]=!0);for(var m=[],n=0;c-1>n;n++)for(var o=n+1;c>o;o++){var q=a[n].type===p.CLIENT&&a[o].type===p.CLIENT,r=f[n][o];q&&r&&m.push({nodeA:this.getElementByEntityID(i,a[n].id),nodeB:this.getElementByEntityID(i,a[o].id)})}return m},q.prototype.updateVizEntitiesOfType_=function(a,b,c){this.killVizEntitiesOfTypeMissingMatch_(a,b),b.forEach(function(b){var d=this.getElementByEntityID(a,b.entityID);d?d.configureFrom(b):this.addVizElement_(c(b))},this)},q.prototype.killVizEntitiesOfTypeMissingMatch_=function(a,b){this.elements_.forEach(function(c){var d=c instanceof a,e=b.some(function(a){return c.getCorrespondingEntityID&&a.entityID===c.getCorrespondingEntityID()});d&&!e&&c.kill()})},q.prototype.addVizElement_=function(a){this.elements_.push(a),this.svgRoot_.find("#background-group").prepend(a.getRoot())};var r=function(a,b){a.getRoot().detach(),a instanceof k?a.getRoot().prependTo(b):a.getRoot().appendTo(b)};q.prototype.pullElementsToForeground=function(){this.elements_.forEach(function(a){a.visited=!1});var a=[];this.localNode&&a.push(this.localNode);for(var b;a.length>0;)b=a.pop(),b.visited=!0,a=a.concat(this.getUnvisitedNeighborsOf_(b));var c=this.svgRoot_.find("#foreground-group"),d=this.svgRoot_.find("#background-group");this.elements_.forEach(function(a){var b=$.contains(c[0],a.getRoot()[0]);a.visited&&!b?(r(a,c),a.onDepthChange(!0)):!a.visited&&b&&(r(a,d),a.onDepthChange(!1))},this),this.updateAutoDnsNode()},q.prototype.getUnvisitedNeighborsOf_=function(a){var b=[];return a instanceof i?(b=l.getLevelConfig().broadcastMode?this.getWiresAttachedToNode(a):this.getReciprocatedWiresAttachedToNode(a),a.isRouter&&this.autoDnsNode_&&(b.push(this.autoDnsNode_),b.push(this.autoDnsWire_))):a instanceof k&&(a.localVizNode&&b.push(a.localVizNode),a.remoteVizNode&&b.push(a.remoteVizNode)),b.filter(function(a){return!a.visited})},q.prototype.distributeForegroundNodes=function(){if(l.getLevelConfig().broadcastMode)return void this.distributeForegroundNodesForBroadcast_();var a=this.elements_.filter(function(a){return a instanceof h&&a.isForeground});if(0!==a.length){if(1===a.length)return void a[0].tweenToPosition(0,0,600,m.easeOutQuad);var b;if(2===a.length){b=this.localNode;var c=d.find(a,function(a){return a!==b});return b.tweenToPosition(-75,0,400,m.easeOutQuad),void c.tweenToPosition(75,0,600,m.easeOutQuad)}b=this.localNode;var e=d.find(a,function(a){return a.isRouter}),f=a.filter(function(a){return a!==b&&a!==e});b.tweenToPosition(-100,0,400,m.easeOutQuad),e.tweenToPosition(0,0,500,m.easeOutQuad);for(var g=2*Math.PI/(f.length+1),i=0;i<f.length;i++){var j=100,k=Math.PI+(i+1)*g,n=Math.cos(k)*j,o=Math.sin(k)*j;f[i].tweenToPosition(n,o,600,m.easeOutQuad)}}},q.prototype.distributeForegroundNodesForBroadcast_=function(){var a=this.elements_.filter(function(a){return a instanceof i&&a.isForeground&&!a.isRouter});if(0!==a.length){if(1===a.length)return void a[0].tweenToPosition(0,0,600,m.easeOutQuad);var b;if(2===a.length){b=this.localNode;var c=d.find(a,function(a){return a!==b});return b.tweenToPosition(-75,0,400,m.easeOutQuad),void c.tweenToPosition(75,0,600,m.easeOutQuad)}b=this.localNode;var e=a.filter(function(a){return a!==b});b.tweenToPosition(-100,0,400,m.easeOutQuad);for(var f=2*Math.PI/(e.length+1),g=0;g<e.length;g++){var h=100,j=Math.PI+(g+1)*f,k=Math.cos(j)*h,l=Math.sin(j)*h;e[g].tweenToPosition(k,l,600,m.easeOutQuad)}}},q.prototype.setDnsMode=function(a){this.dnsMode_=a,a===o.AUTOMATIC?this.makeAutoDnsNode():this.destroyAutoDnsNode(),this.elements_.forEach(function(b){b instanceof i&&b.setDnsMode(a)}),this.pullElementsToForeground(),this.distributeForegroundNodes()},q.prototype.makeAutoDnsNode=function(){this.autoDnsNode_||(this.autoDnsNode_=new g,this.addVizElement_(this.autoDnsNode_),this.autoDnsWire_=new k(this.autoDnsNode_,null),this.addVizElement_(this.autoDnsWire_))},q.prototype.updateAutoDnsNode=function(){if(this.autoDnsNode_){var a=d.find(this.elements_,function(a){return a instanceof i&&a.isRouter&&a.isForeground});a&&this.autoDnsNode_.setAddress(a.autoDnsAddress),this.autoDnsWire_.localVizNode=this.autoDnsNode_,this.autoDnsWire_.remoteVizNode=a}},q.prototype.destroyAutoDnsNode=function(){this.autoDnsNode_&&(this.autoDnsNode_.kill(),this.autoDnsNode_=null),this.autoDnsWire_&&(this.autoDnsWire_.kill(),this.autoDnsWire_=null)
},q.prototype.setDnsNodeID=function(a){this.elements_.forEach(function(b){b instanceof i&&b.setIsDnsNode(b.getCorrespondingEntityID()===a)})},q.prototype.setEncodings=function(a){this.encodings_=a,this.elements_.forEach(function(b){b instanceof j&&b.setEncodings(a)})},q.prototype.animateSetWireState=function(a){var b=this.getVizWireToRemote(),c=this.getVizWireFromRemote();b&&c&&(c.hide(),b.animateSetState(a))},q.prototype.animateReadWireState=function(a){var b=this.getVizWireToRemote(),c=this.getVizWireFromRemote();b&&c&&(c.hide(),b.animateReadState(a))},q.prototype.getVizWireToRemote=function(){if(!this.localNode)return null;var a=this.elements_.filter(function(a){return a instanceof j&&a.localVizNode===this.localNode},this);return 0===a.length?null:a[0]},q.prototype.getVizWireFromRemote=function(){if(!this.localNode)return null;var a=this.elements_.filter(function(a){return a instanceof j&&a.remoteVizNode===this.localNode},this);return 0===a.length?null:a[0]}},{"../utils":318,"./NetSimConstants":191,"./NetSimGlobals":203,"./NetSimNodeFactory":218,"./NetSimVizAutoDnsNode":248,"./NetSimVizNode":250,"./NetSimVizSimulationNode":251,"./NetSimVizSimulationWire":252,"./NetSimVizWire":253,"./NetSimWire":254,"./tweens":265}],252:[function(a,b){"use strict";a("../utils");var c=a("./NetSimGlobals"),d=a("./NetSimVizNode"),e=a("./NetSimVizWire"),f=b.exports=function(a,b){var c=b(d,a.localNodeID),f=b(d,a.remoteNodeID);e.call(this,c,f),this.correspondingWireID_=a.entityID,this.getElementByEntityID_=b,this.configureFrom(a),this.render()};f.inherits(e),f.prototype.configureFrom=function(a){this.localVizNode=this.getElementByEntityID_(d,a.localNodeID),this.remoteVizNode=this.getElementByEntityID_(d,a.remoteNodeID),this.localVizNode&&this.localVizNode.setAddress(a.localAddress),this.remoteVizNode&&this.remoteVizNode.setAddress(a.remoteAddress),c.getLevelConfig().broadcastMode&&this.getRoot().css("display","none")},f.prototype.getCorrespondingEntityID=function(){return this.correspondingWireID_},f.prototype.kill=function(){f.superPrototype.kill.call(this),this.correspondingWireID_=void 0}},{"../utils":318,"./NetSimGlobals":203,"./NetSimVizNode":250,"./NetSimVizWire":253}],253:[function(a,b){"use strict";a("../utils");var c=a("./NetSimUtils").jQuerySvgElement,d=a("./NetSimVizElement"),e=a("./tweens"),f=a("./DataConverters"),g=a("./NetSimConstants"),h=g.EncodingType,i=f.binaryToAB,j=-10,k=b.exports=function(a,b){d.call(this);var e=this.getRoot();e.addClass("viz-wire"),this.line_=c("path").appendTo(e),this.questionMark_=c("text").text("?").addClass("question-mark").appendTo(e),this.text_=c("text").addClass("state-label").appendTo(e),this.textPosX_=0,this.textPosY_=0,this.encodings_=[],this.localVizNode=a,this.remoteVizNode=b,this.render()};k.inherits(d),k.prototype.render=function(a){k.superPrototype.render.call(this,a);var b="M 0 0",c={x:0,y:0};this.localVizNode&&this.remoteVizNode&&(b="M "+this.localVizNode.posX+" "+this.localVizNode.posY+" L "+this.remoteVizNode.posX+" "+this.remoteVizNode.posY,c=this.getWireCenterPosition()),this.line_.attr("d",b),this.text_.attr("x",this.textPosX_).attr("y",this.textPosY_),this.questionMark_.attr("x",c.x).attr("y",c.y)},k.prototype.hide=function(){this.getRoot().addClass("hidden-wire")},k.prototype.kill=function(){k.superPrototype.kill.call(this),this.localVizNode=null,this.remoteVizNode=null},k.prototype.setEncodings=function(a){this.encodings_=a},k.prototype.animateSetState=function(a){if(this.localVizNode&&this.remoteVizNode){var b=300,c=300;this.stopAllAnimation(),this.setWireClasses_(a),this.text_.text(this.getDisplayBit_(a)),this.snapTextToPosition(this.getLocalNodePosition()),this.tweenTextToPosition(this.getWireCenterPosition(),b,e.easeOutQuad),this.doAfterDelay(b+c,function(){this.setWireClasses_("unknown")}.bind(this))}},k.prototype.animateReadState=function(a){if(this.localVizNode&&this.remoteVizNode){var b=300,c=300;this.stopAllAnimation(),this.setWireClasses_(a),this.text_.text(this.getDisplayBit_(a)),this.snapTextToPosition(this.getWireCenterPosition()),this.doAfterDelay(b,function(){this.tweenTextToPosition(this.getLocalNodePosition(),c,e.easeOutQuad),this.setWireClasses_("unknown")}.bind(this))}},k.prototype.setWireClasses_=function(a){var b="0"===a,c=!b&&"1"===a,d=!b&&!c;this.getRoot().toggleClass("state-on",c),this.getRoot().toggleClass("state-off",b),this.getRoot().toggleClass("state-unknown",d)},k.prototype.getDisplayBit_=function(a){return this.isEncodingEnabled_(h.A_AND_B)&&!this.isEncodingEnabled_(h.BINARY)&&(a=i(a)),a},k.prototype.isEncodingEnabled_=function(a){return this.encodings_.some(function(b){return b===a})},k.prototype.tweenTextToPosition=function(a,b,c){b>0?(this.tweens_.push(new e.TweenValueTo(this,"textPosX_",a.x,b,c)),this.tweens_.push(new e.TweenValueTo(this,"textPosY_",a.y,b,c))):(this.textPosX_=a.x,this.textPosY_=a.y)},k.prototype.snapTextToPosition=function(a){this.tweenTextToPosition(a,0)},k.prototype.getLocalNodePosition=function(){return{x:this.localVizNode.posX,y:this.localVizNode.posY}},k.prototype.getWireCenterPosition=function(){return{x:(this.remoteVizNode.posX-this.localVizNode.posX)/2+this.localVizNode.posX,y:(this.remoteVizNode.posY-this.remoteVizNode.posY)/2+this.localVizNode.posY+j}}},{"../utils":318,"./DataConverters":183,"./NetSimConstants":191,"./NetSimUtils":246,"./NetSimVizElement":249,"./tweens":265}],251:[function(a,b){"use strict";a("../utils");var c=a("./NetSimConstants"),d=a("./NetSimVizNode"),e=c.NodeType,f=a("./NetSimGlobals"),g=b.exports=function(a){d.call(this),this.correspondingNodeID_=a.entityID,this.autoDnsAddress=void 0,this.configureFrom(a),this.render()};g.inherits(d),g.prototype.configureFrom=function(a){this.correspondingNodeID_=a.entityID;var b=f.getLevelConfig();this.setName(b.showHostnameInGraph?a.getHostname():a.getShortDisplayName()),a.getNodeType()===e.ROUTER&&(this.isRouter=!0,this.getRoot().addClass("router-node"),this.autoDnsAddress=a.getAutoDnsAddress(),b.broadcastMode&&this.getRoot().css("display","none"))},g.prototype.getCorrespondingEntityID=function(){return this.correspondingNodeID_},g.prototype.kill=function(){g.superPrototype.kill.call(this),this.correspondingNodeID_=void 0}},{"../utils":318,"./NetSimConstants":191,"./NetSimGlobals":203,"./NetSimVizNode":250}],248:[function(a,b){"use strict";a("../utils");var c=a("./NetSimGlobals"),d=a("./NetSimVizNode"),e=b.exports=function(){d.call(this),this.getRoot().addClass("auto-dns-node");var a=c.getLevelConfig();this.setName(a.showHostnameInGraph?"dns":"DNS"),this.setIsDnsNode(!0),this.render()};e.inherits(d)},{"../utils":318,"./NetSimGlobals":203,"./NetSimVizNode":250}],250:[function(a,b){"use strict";a("../utils");var c=a("./NetSimConstants"),d=a("./NetSimUtils").jQuerySvgElement,e=a("./NetSimVizElement"),f=a("./tweens"),g=c.DnsMode,h=a("./NetSimGlobals"),i=30,j=20,k=10,l=b.exports=function(){e.call(this),this.address_=void 0,this.dnsMode_=void 0,this.isRouter=!1,this.isLocalNode=!1,this.isDnsNode=!1;var a=this.getRoot();a.addClass("viz-node");var b=37,c=4;d("circle").attr("cx",0).attr("cy",0).attr("r",b).appendTo(a),this.nameGroup_=d("g").attr("transform","translate(0,0)").appendTo(a),this.displayName_=d("text").attr("x",0).attr("y",c),this.nameBox_=d("rect").addClass("name-box"),this.nameGroup_.append(this.nameBox_).append(this.displayName_),this.addressGroup_=d("g").attr("transform","translate(0,30)").hide().appendTo(a),this.addressBox_=d("rect").addClass("address-box").appendTo(this.addressGroup_),this.addressText_=d("text").addClass("address-box").attr("x",0).attr("y",c).text("?").appendTo(this.addressGroup_),this.snapToScale(0),this.tweenToScale(.5,800,f.easeOutElastic)};l.inherits(e),l.prototype.setIsLocalNode=function(){this.isLocalNode=!0,this.getRoot().addClass("local-node")},l.prototype.setName=function(a){this.displayName_.text(a),this.resizeNameBox_()},l.prototype.resizeNameBox_=function(){this.resizeRectToText_(this.nameBox_,this.displayName_)},l.prototype.resizeAddressBox_=function(){this.resizeRectToText_(this.addressBox_,this.addressText_)},l.prototype.resizeRectToText_=function(a,b){try{var c=b[0].getBBox(),d=Math.max(i,c.width+j),e=c.height+k,f=d/2,g=e/2;a.attr("x",-f).attr("y",-g).attr("rx",g).attr("ry",g).attr("width",d).attr("height",e)}catch(h){}},l.prototype.kill=function(){l.superPrototype.kill.call(this),this.stopAllAnimation(),this.tweenToScale(0,200,f.easeInQuad)},l.prototype.tick=function(a){if(l.superPrototype.tick.call(this,a),!this.isForeground&&0===this.tweens_.length){var b=300*Math.random()-150,c=300*Math.random()-150;this.tweenToPosition(b,c,2e4,f.easeInOutQuad)}},l.prototype.render=function(a){l.superPrototype.render.call(this,a),this.isForeground&&this.tweens_.length>0&&(this.resizeNameBox_(),this.resizeAddressBox_())},l.prototype.onDepthChange=function(a){l.superPrototype.onDepthChange.call(this,a),this.isDying()||this.isDead()||(this.tweens_.length=0,a?this.tweenToScale(1,600,f.easeOutElastic):this.tweenToScale(.5,600,f.easeOutElastic))},l.prototype.setAddress=function(a){this.address_=a,this.updateAddressDisplay()},l.prototype.setDnsMode=function(a){this.dnsMode_=a,this.updateAddressDisplay()},l.prototype.setIsDnsNode=function(a){this.isDnsNode=a,this.updateAddressDisplay()},l.prototype.updateAddressDisplay=function(){var a=h.getLevelConfig();return void 0===this.address_||a.broadcastMode||this.isRouter?void this.addressGroup_.hide():(this.addressGroup_.show(),this.addressText_.text(this.dnsMode_===g.NONE?void 0!==this.address_?this.address_:"?":this.isLocalNode||this.isDnsNode?this.address_:"?"),void this.resizeAddressBox_())}},{"../utils":318,"./NetSimConstants":191,"./NetSimGlobals":203,"./NetSimUtils":246,"./NetSimVizElement":249,"./tweens":265}],249:[function(a,b){"use strict";var c=a("./NetSimUtils").jQuerySvgElement,d=a("./tweens"),e=b.exports=function(){this.posX=0,this.posY=0,this.scale=1,this.isForeground=!1,this.rootGroup_=c("g"),this.tweens_=[],this.isDead_=!1};e.prototype.getRoot=function(){return this.rootGroup_},e.prototype.kill=function(){this.isDead_=!0},e.prototype.isDead=function(){return this.isDead_&&0===this.tweens_.length},e.prototype.isDying=function(){return this.isDead_&&this.tweens_.length>0},e.prototype.tick=function(){},e.prototype.render=function(a){a&&(this.tweens_.forEach(function(b){b.tick(a)}),this.tweens_=this.tweens_.filter(function(a){return!a.isFinished}));var b="translate("+this.posX+" "+this.posY+") scale("+this.scale+")";this.rootGroup_.attr("transform",b)},e.prototype.onDepthChange=function(a){this.isForeground=a},e.prototype.stopAllAnimation=function(){this.tweens_.length=0},e.prototype.tweenToPosition=function(a,b,c,e){this.isDying()||this.isDead()||(this.removeAllTweensOnProperties(["posX","posY"]),c>0?(this.tweens_.push(new d.TweenValueTo(this,"posX",a,c,e)),this.tweens_.push(new d.TweenValueTo(this,"posY",b,c,e))):(this.posX=a,this.posY=b))},e.prototype.snapToPosition=function(a,b){this.tweenToPosition(a,b,0)},e.prototype.tweenToScale=function(a,b,c){this.removeAllTweensOnProperty("scale"),b>0?this.tweens_.push(new d.TweenValueTo(this,"scale",a,b,c)):this.scale=a},e.prototype.doAfterDelay=function(a,b){a>0?this.tweens_.push(new d.DoAfterDelay(this,a,b)):b()},e.prototype.removeAllTweensOnProperty=function(a){this.removeAllTweensOnProperties([a])},e.prototype.removeAllTweensOnProperties=function(a){this.tweens_=this.tweens_.filter(function(b){var c=b.target===this,d=a.some(function(a){return b.propertyName===a});return!(c&&d)},this)},e.prototype.snapToScale=function(a){this.tweenToScale(a,0)}},{"./NetSimUtils":246,"./tweens":265}],265:[function(a,b,c){"use strict";var d=a("../utils").valueOr,e=600;c.easeOutElastic=function(a,b,c,d){var e,f,g;return e=1.70158,f=0,g=c,0===a?b:1==(a/=d)?b+c:(f||(f=.3*d),g<Math.abs(c)?(g=c,e=f/4):e=f/(2*Math.PI)*Math.asin(c/g),g*Math.pow(2,-10*a)*Math.sin(2*(a*d-e)*Math.PI/f)+c+b)},c.easeInQuad=function(a,b,c,d){return c*(a/=d)*a+b},c.easeOutQuad=function(a,b,c,d){return-c*(a/=d)*(a-2)+b},c.easeInOutQuad=function(a,b,c,d){return(a/=d/2)<1?c/2*a*a+b:-c/2*(--a*(a-2)-1)+b},c.linear=function(a,b,c,d){return c*(a/d)+b},c.TweenValueTo=function(a,b,f,g,h){this.isFinished=!1,this.startTime_=void 0,this.target=a,this.propertyName=b,this.tweenFunction_=d(h,c.linear),this.startValue_=a[b],this.deltaValue_=f-this.startValue_,this.duration_=d(g,e)},c.TweenValueTo.prototype.tick=function(a){void 0===this.startTime_&&(this.startTime_=a.time);var b=a.time-this.startTime_;0!==this.deltaValue_&&(this.target[this.propertyName]=this.tweenFunction_(b,this.startValue_,this.deltaValue_,this.duration_)),b>=this.duration_&&(this.target[this.propertyName]=this.startValue_+this.deltaValue_,this.isFinished=!0)},c.DoAfterDelay=function(a,b,c){this.isFinished=!1,this.startTime_=void 0,this.target=a,this.propertyName=null,this.duration_=b,this.callback_=c},c.DoAfterDelay.prototype.tick=function(a){void 0===this.startTime_&&(this.startTime_=a.time);var b=a.time-this.startTime_;b>=this.duration_&&(this.callback_(),this.isFinished=!0)}},{"../utils":318}],245:[function(a,b){"use strict";var c=a("./NetSimTabsComponent.html.ejs"),d=a("./NetSimRouterTab"),e=a("./NetSimMyDeviceTab"),f=a("./NetSimDnsTab"),g=a("./NetSimConstants").NetSimTabType,h=a("./NetSimUtils").shouldShowTab,i=a("./NetSimGlobals"),j=b.exports=function(a,b,c){this.rootDiv_=a,this.runLoop_=b,this.chunkSizeSliderChangeCallback_=c.chunkSizeSliderChangeCallback,this.myDeviceBitRateChangeCallback_=c.myDeviceBitRateChangeCallback,this.encodingChangeCallback_=c.encodingChangeCallback,this.routerBandwidthSliderChangeCallback_=c.routerBandwidthSliderChangeCallback,this.routerBandwidthSliderStopCallback_=c.routerBandwidthSliderStopCallback,this.routerMemorySliderChangeCallback_=c.routerMemorySliderChangeCallback,this.routerMemorySliderStopCallback_=c.routerMemorySliderStopCallback,this.dnsModeChangeCallback_=c.dnsModeChangeCallback,this.becomeDnsCallback_=c.becomeDnsCallback,this.routerTab_=null,this.myDeviceTab_=null,this.dnsTab_=null,this.render()};j.prototype.attachToRunLoop=function(a){this.routerTab_&&this.routerTab_.attachToRunLoop(a)},j.prototype.render=function(){var a=i.getLevelConfig(),b=$("#reference_area").first().clone(!0),j=$("#bubble").first().detach(),k=c({level:a}),l=$(k);if(this.rootDiv_.html(l),this.rootDiv_.find(".netsim-tabs").tabs({active:a.defaultTabIndex}),h(a,g.INSTRUCTIONS)&&b){var m=this.rootDiv_.find("#tab_instructions button").first();j.insertBefore(m),b.insertBefore(m),this.rootDiv_.find(".submitButton").click(function(a){$(a.target).is(":disabled")||i.completeLevelAndContinue()})}h(a,g.MY_DEVICE)&&(this.myDeviceTab_=new e(this.rootDiv_.find("#tab_my_device"),this.runLoop_,{chunkSizeChangeCallback:this.chunkSizeSliderChangeCallback_,bitRateChangeCallback:this.myDeviceBitRateChangeCallback_,encodingChangeCallback:this.encodingChangeCallback_})),h(a,g.ROUTER)&&(this.routerTab_=new d(this.rootDiv_.find("#tab_router"),{bandwidthSliderChangeCallback:this.routerBandwidthSliderChangeCallback_,bandwidthSliderStopCallback:this.routerBandwidthSliderStopCallback_,memorySliderChangeCallback:this.routerMemorySliderChangeCallback_,memorySliderStopCallback:this.routerMemorySliderStopCallback_})),h(a,g.DNS)&&(this.dnsTab_=new f(this.rootDiv_.find("#tab_dns"),this.dnsModeChangeCallback_,this.becomeDnsCallback_))},j.prototype.setChunkSize=function(a){this.myDeviceTab_&&this.myDeviceTab_.setChunkSize(a)},j.prototype.setMyDeviceBitRate=function(a){this.myDeviceTab_&&this.myDeviceTab_.setBitRate(a)},j.prototype.setEncodings=function(a){this.myDeviceTab_&&this.myDeviceTab_.setEncodings(a)},j.prototype.setRouterCreationTime=function(a){this.routerTab_&&this.routerTab_.setRouterCreationTime(a)},j.prototype.setRouterBandwidth=function(a){this.routerTab_&&this.routerTab_.setBandwidth(a)},j.prototype.setRouterMemory=function(a){this.routerTab_&&this.routerTab_.setMemory(a)},j.prototype.setRouterQueuedPacketCount=function(a){this.routerTab_&&this.routerTab_.setRouterQueuedPacketCount(a)},j.prototype.setRouterMemoryInUse=function(a){this.routerTab_&&this.routerTab_.setMemoryInUse(a)},j.prototype.setRouterDataRate=function(a){this.routerTab_&&this.routerTab_.setDataRate(a)},j.prototype.setDnsMode=function(a){this.dnsTab_&&this.dnsTab_.setDnsMode(a)},j.prototype.setIsDnsNode=function(a){this.dnsTab_&&this.dnsTab_.setIsDnsNode(a)},j.prototype.setDnsTableContents=function(a){this.dnsTab_&&this.dnsTab_.setDnsTableContents(a)},j.prototype.setRouterLogData=function(a){this.routerTab_&&this.routerTab_.setRouterLogData(a)}},{"./NetSimConstants":191,"./NetSimDnsTab":197,"./NetSimGlobals":203,"./NetSimMyDeviceTab":216,"./NetSimRouterTab":233,"./NetSimTabsComponent.html.ejs":244,"./NetSimUtils":246}],244:[function(require,module,exports){module.exports=function(){var t=function anonymous(locals,filters,escape){escape=escape||function(a){return String(a).replace(/&(?!\w+;)/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")};var buf=[];with(locals||{})!function(){buf.push("");var a=require("./locale"),b=require("./NetSimUtils").shouldShowTab,c=require("./NetSimConstants").NetSimTabType,d=b(level,c.INSTRUCTIONS),e=b(level,c.MY_DEVICE),f=b(level,c.ROUTER),g=b(level,c.DNS);buf.push('\n<div class="netsim-tabs">\n  <ul>\n    '),d&&buf.push('\n    <li><a href="#tab_instructions">',escape(a.instructions()),"</a></li>\n    "),buf.push("\n    "),e&&buf.push('\n      <li><a href="#tab_my_device">',escape(a.myDevice()),"</a></li>\n    "),buf.push("\n    "),f&&buf.push('\n      <li><a href="#tab_router">',escape(a.router()),"</a></li>\n    "),buf.push("\n    "),g&&buf.push('\n      <li><a href="#tab_dns">',escape(a.dns()),"</a></li>\n    "),buf.push("\n  </ul>\n  "),d&&buf.push('\n    <div id="tab_instructions">\n      <button id="finished" class="btn btn-primary submitButton">',escape(a.continueButton()),"</button>\n    </div>\n  "),buf.push("\n  "),e&&buf.push('\n    <div id="tab_my_device"></div>\n  '),buf.push("\n  "),f&&buf.push('\n    <div id="tab_router"></div>\n  '),buf.push("\n  "),g&&buf.push('\n    <div id="tab_dns"></div>\n  '),buf.push("\n</div>")}();return buf.join("")};return function(a){return t(a,require("ejs").filters)}}()},{"./NetSimConstants":191,"./NetSimUtils":246,"./locale":260,ejs:491}],242:[function(a,b){"use strict";a("../utils");var c=a("./NetSimStatusPanel.html.ejs"),d=a("./NetSimPanel.js"),e=b.exports=function(a,b){this.disconnectCallback_=b.disconnectCallback,d.call(this,a,{className:"netsim_status_panel",panelTitle:"Status",userToggleable:!1,beginMinimized:!0})};e.inherits(d),e.prototype.render=function(a){a=a||{},this.setPanelTitle(a.statusString),e.superPrototype.render.call(this);var b=$(c({remoteNodeName:a.remoteNodeName,myHostname:a.myHostname,myAddress:a.myAddress,shareLink:a.shareLink}));this.getBody().html(b),a.isConnected&&this.addButton("Disconnect",this.disconnectCallback_)}},{"../utils":318,"./NetSimPanel.js":223,"./NetSimStatusPanel.html.ejs":241}],241:[function(require,module,exports){module.exports=function(){var t=function anonymous(locals,filters,escape){escape=escape||function(a){return String(a).replace(/&(?!\w+;)/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")};var buf=[];with(locals||{})!function(){buf.push("");var a=require("./locale");buf.push('\n<div class="content-wrap">\n  '),remoteNodeName&&buf.push("\n  <p>Connected to ",escape(remoteNodeName),"</p>\n  "),buf.push("\n\n  "),myHostname&&buf.push("\n  <p>My hostname: ",escape(myHostname),"</p>\n  "),buf.push("\n\n  "),myAddress&&buf.push("\n  <p>My address: ",escape(myAddress),"</p>\n  "),buf.push("\n\n  "),shareLink&&buf.push('\n  <p><a href="',escape(shareLink),'">',escape(a.shareThisNetwork()),"</a></p>\n  "),buf.push("\n</div>\n")}();return buf.join("")};return function(a){return t(a,require("ejs").filters)}}()},{"./locale":260,ejs:491}],236:[function(a,b){"use strict";var c=a("./NetSimTable"),d=a("./PubSubService"),e=b.exports=function(a,b){this.id=a,this.pubSub=d.create(b);var e=this.pubSub.subscribe(a);this.nodeTable=new c(e,a,"n"),this.wireTable=new c(e,a,"w"),this.messageTable=new c(e,a,"m"),this.logTable=new c(e,a,"l",{useIncrementalRefresh:!0}),this.logTable.unsubscribe()};e.prototype.tick=function(a){this.nodeTable.tick(a),this.wireTable.tick(a),this.messageTable.tick(a),this.logTable.tick(a)}},{"./NetSimTable":243,"./PubSubService":257}],257:[function(a,b,c){"use strict";var d=a("./PubSubChannel"),e=c;e.create=function(a){return a.usePusher?new e.PusherService(a.pusherApplicationKey):new e.NullService},e.NullService=function(){},e.NullService.prototype.subscribe=function(){return new d.NullChannel},e.NullService.prototype.unsubscribe=function(){},e.PusherService=function(a){this.api_=new Pusher(a,{encrypted:!0})},e.PusherService.prototype.subscribe=function(a){return new d.PusherChannel(this.api_.subscribe(a))},e.PusherService.prototype.unsubscribe=function(a){this.api_.unsubscribe(a)}},{"./PubSubChannel":256}],256:[function(a,b,c){"use strict";var d=c;d.NullChannel=function(){},d.NullChannel.prototype.subscribe=function(){},d.NullChannel.prototype.unsubscribe=function(){},d.PusherChannel=function(a){this.pusherChannel_=a},d.PusherChannel.prototype.subscribe=function(a,b){this.pusherChannel_.bind(a,b)},d.PusherChannel.prototype.unsubscribe=function(a,b){this.pusherChannel_.unbind(a,b)}},{}],243:[function(a,b){"use strict";var c=a("../utils").getLodash(),d=a("../ObservableEvent"),e=a("./NetSimApi"),f=a("./NetSimGlobals"),g=a("./ArgumentUtils"),h=1e4,i=250,j=200,k=1e3,l=b.exports=function(a,b,c,f){g.validateRequired(a,"channel"),g.validateRequired(b,"shardID",g.isString),g.validateRequired(c,"tableName",g.isString),f=g.extendOptionsObject(f),this.tableName_=c,this.channel_=a,this.subscribe(),this.channelCallback_=void 0,this.api_=e.makeTableApi(b,c),this.tableChange=new d,this.cache_={},this.latestRowID_=0,this.lastRefreshTime_=0,this.useIncrementalRefresh_=f.get("useIncrementalRefresh",g.isBoolean,!1),this.minimumDelayBeforeRefresh_=f.get("minimumDelayBeforeRefresh",g.isPositiveNoninfiniteNumber,i),this.maximumJitterDelay_=f.get("maximumJitterDelay",g.isPositiveNoninfiniteNumber,j),this.minimumDelayBetweenRefreshes_=f.get("minimumDelayBetweenRefreshes",g.isPositiveNoninfiniteNumber,k),this.pollingInterval_=h,this.refreshTable_=this.makeThrottledRefresh_()};l.prototype.subscribe=function(){this.channelCallback_=l.prototype.onPubSubEvent.bind(this),this.channel_.subscribe(this.tableName_,this.channelCallback_)},l.prototype.unsubscribe=function(){this.channel_.unsubscribe(this.tableName_,this.channelCallback_),this.channelCallback=void 0},l.prototype.refresh=function(a){a=a||function(){};var b=$.Deferred(),c=this.useIncrementalRefresh_?this.api_.allRowsFromID.bind(this.api_,this.latestRowID_+1):this.api_.allRows.bind(this.api_),d=this.useIncrementalRefresh_?this.incrementalCacheUpdate_.bind(this):this.fullCacheUpdate_.bind(this),e=function(c,e){c?(a(c,e),b.reject(c)):(d(e),a(c,e),b.resolve())};if(0===this.maximumJitterDelay_)c(e);else{var g=f.randomIntInRange(0,this.maximumJitterDelay_);setTimeout(c.bind(this,e),g)}return b.promise()},l.prototype.makeThrottledRefresh_=function(){var a=c.throttle(this.refresh.bind(this),this.minimumDelayBetweenRefreshes_);return c.debounce(a,this.minimumDelayBeforeRefresh_,{maxWait:this.minimumDelayBeforeRefresh_})},l.prototype.readAll=function(){return this.arrayFromCache_()},l.prototype.read=function(a,b){this.api_.fetchRow(a,function(c,d){null===c&&this.updateCacheRow_(a,d),b(c,d)}.bind(this))},l.prototype.create=function(a,b){this.api_.createRow(a,function(a,c){null===a&&this.addRowToCache_(c),b(a,c)}.bind(this))},l.prototype.update=function(a,b,c){this.api_.updateRow(a,b,function(d,e){null===d&&this.updateCacheRow_(a,b),c(d,e)}.bind(this))},l.prototype["delete"]=function(a,b){this.api_.deleteRow(a,function(c,d){null===c&&this.removeRowFromCache_(a),b(c,d)}.bind(this))},l.prototype.synchronousDelete=function(a){var b=!1;this.api_.deleteRow(a,function(b){if(b)throw b;this.removeRowFromCache_(a)}.bind(this),b)},l.prototype.fullCacheUpdate_=function(a){var b=0,d=a.reduce(function(a,c){return a[c.id]=c,c.id>b&&(b=c.id),a},{});c.isEqual(this.cache_,d)||(this.cache_=d,this.latestRowID_=b,this.tableChange.notifyObservers(this.arrayFromCache_())),this.lastRefreshTime_=Date.now()},l.prototype.incrementalCacheUpdate_=function(a){if(a.length>0){var b=0;a.forEach(function(a){this.cache_[a.id]=a,b=Math.max(b,a.id)},this),this.latestRowID_=b,this.tableChange.notifyObservers(this.arrayFromCache_())}this.lastRefreshTime_=Date.now()},l.prototype.addRowToCache_=function(a){this.cache_[a.id]=a,this.tableChange.notifyObservers(this.arrayFromCache_())},l.prototype.removeRowFromCache_=function(a){void 0!==this.cache_[a]&&(delete this.cache_[a],this.tableChange.notifyObservers(this.arrayFromCache_()))},l.prototype.updateCacheRow_=function(a,b){var d=this.cache_[a],e=b;e.id=a,c.isEqual(d,e)||(this.cache_[a]=e,this.tableChange.notifyObservers(this.arrayFromCache_()))},l.prototype.arrayFromCache_=function(){var a=[];for(var b in this.cache_)this.cache_.hasOwnProperty(b)&&a.push(this.cache_[b]);return a},l.prototype.setPollingInterval=function(a){this.pollingInterval_=a},l.prototype.setMinimumDelayBetweenRefreshes=function(a){this.minimumDelayBetweenRefreshes_=a,this.refreshTable_=this.makeThrottledRefresh_()},l.prototype.setMinimumDelayBeforeRefresh=function(a){this.minimumDelayBeforeRefresh_=a,this.refreshTable_=this.makeThrottledRefresh_()},l.prototype.setMaximumJitterDelay=function(a){this.maximumJitterDelay_=a},l.prototype.tick=function(){var a=Date.now();a-this.lastRefreshTime_>=this.pollingInterval_&&(this.lastRefreshTime_=a,this.refreshTable_())},l.prototype.onPubSubEvent=function(){this.refreshTable_()}},{"../ObservableEvent":2,"../utils":318,"./ArgumentUtils":181,"./NetSimApi":184,"./NetSimGlobals":203}],235:[function(a,b){"use strict";var c=a("../utils"),d=a("./locale"),e=a("./NetSimSendPanel.html.ejs"),f=a("./NetSimPanel"),g=a("./NetSimPacketEditor"),h=a("./NetSimPacketSizeControl"),i=a("./Packet"),j=a("./DataConverters"),k=a("./NetSimConstants"),l=a("./NetSimGlobals"),m=k.EncodingType,n=k.MessageGranularity,o=k.BITS_PER_BYTE,p=j.binaryToAB,q=a("./NetSimLogger").getSingleton(),r=b.exports=function(a,b,c){this.levelConfig_=b,this.packetSpec_=b.clientInitialPacketHeader,this.netsim_=c,this.packets_=[],this.lastPacketToAddress_="0",this.fromAddress_=0,this.maxPacketSize_=b.defaultPacketSizeLimit,this.chunkSize_=o,this.bitRate_=1/0,this.enabledEncodings_=b.defaultEnabledEncodings,this.packetsDiv_=null,this.packetSizeControl_=null,this.isPlayingSendAnimation_=!1;var e=b.messageGranularity===n.PACKETS?d.sendAMessage():d.sendBits();this.netsim_.runLoop_.tick.register(this.tick.bind(this)),f.call(this,a,{className:"netsim-send-panel",panelTitle:e})};r.inherits(f),r.prototype.beginSendingPackets_=function(){this.isPlayingSendAnimation_=!0,this.disableEverything()},r.prototype.stopSendingPackets_=function(){this.resetPackets_(),this.enableEverything(),this.isPlayingSendAnimation_=!1},r.prototype.tick=function(a){if(this.isPlayingSendAnimation_){if(0===this.packets_.length)return void this.stopSendingPackets_();var b=this.packets_[0];b.isSending()?b.tick(a):(this.lastPacketToAddress_=b.toAddress,b.beginSending(this.netsim_.myNode))}},r.prototype.render=function(){r.superPrototype.render.call(this);var a=$(e({level:this.levelConfig_}));if(this.getBody().html(a),this.levelConfig_.showPacketSizeControl){var b=l.getLevelConfig(),c=new i.Encoder(b.addressFormat,b.packetCountBitWidth,this.packetSpec_);this.packetSizeControl_=new h(this.rootDiv_.find(".packet-size"),this.packetSizeChangeCallback_.bind(this),{minimumPacketSize:c.getHeaderLength(),sliderStepValue:1}),this.packetSizeControl_.setValue(this.maxPacketSize_)}this.packetsDiv_=this.getBody().find(".send-panel-packets"),this.getBody().find("#add-packet-button").click(this.onAddPacketButtonPress_.bind(this)),this.getBody().find("#send-button").click(this.onSendEventTriggered_.bind(this)),this.getBody().find("#set-wire-button").click(this.onSetWireButtonPress_.bind(this)),this.resetPackets_()},r.prototype.addPacket_=function(){var a=this.packets_.length+1;this.packets_.forEach(function(b){b.setPacketCount(a)});var b;b=this.packets_.length>0?this.packets_[this.packets_.length-1].toAddress:this.lastPacketToAddress_;var c=new g({messageGranularity:this.levelConfig_.messageGranularity,packetSpec:this.packetSpec_,toAddress:b,fromAddress:this.fromAddress_,packetIndex:a,packetCount:a,maxPacketSize:this.maxPacketSize_,chunkSize:this.chunkSize_,bitRate:this.bitRate_,enabledEncodings:this.enabledEncodings_,removePacketCallback:this.removePacket_.bind(this),contentChangeCallback:this.onContentChange_.bind(this),enterKeyPressedCallback:this.onSendEventTriggered_.bind(this)}),d=this.netsim_.updateLayout.bind(this.netsim_);c.getRoot().appendTo(this.packetsDiv_),c.getRoot().hide().slideDown("fast",function(){c.getFirstVisibleMessageBox().focus(),d()}),this.packets_.push(c)},r.prototype.removePacket_=function(a){var b=this.netsim_.updateLayout.bind(this.netsim_);if(a.getRoot().slideUp("fast",function(){$(this).remove(),b()}),this.packets_=this.packets_.filter(function(b){return b!==a}),!this.isPlayingSendAnimation_)for(var c,d=this.packets_.length,e=0;d>e;e++)c=e+1,this.packets_[e].setPacketIndex(c),this.packets_[e].setPacketCount(d)},r.prototype.resetPackets_=function(){this.packetsDiv_.empty(),this.packets_.length=0,this.addPacket_()},r.prototype.onContentChange_=function(){var a=this.getNextBit_();void 0===a?(this.getSetWireButton().text(d.setWire()),this.conditionallyToggleSetWireButton()):(this.isEncodingEnabled_(m.A_AND_B)&&!this.isEncodingEnabled_(m.BINARY)&&(a=p(a)),this.getSetWireButton().text(d.setWireToValue({value:a})),this.conditionallyToggleSetWireButton())},r.prototype.isEncodingEnabled_=function(a){return this.enabledEncodings_.some(function(b){return b===a})},r.prototype.setFromAddress=function(a){this.fromAddress_=c.valueOr(a,0),this.packets_.forEach(function(a){a.setFromAddress(this.fromAddress_)}.bind(this))},r.prototype.onAddPacketButtonPress_=function(a){var b=$(a.target);if(!b.is("[disabled]")){this.addPacket_();var c=this.getBody().find(".send-panel-packets");c.animate({scrollTop:c[0].scrollHeight},"fast")}},r.prototype.onSendEventTriggered_=function(a){var b=$(a.target);b.is("[disabled]")||this.beginSendingPackets_()},r.prototype.onSetWireButtonPress_=function(a){var b=$(a.target);if(!b.is("[disabled]")){var c=this.netsim_.myNode;if(!c)throw new Error("Tried to set wire state when no connection is established.");var d=this.getNextBit_();if(void 0===d)throw new Error("Tried to set wire state when no bit is queued.");this.disableEverything(),this.netsim_.animateSetWireState(d),c.setSimplexWireState(d,function(a){return a?void q.warn(a.message):(this.consumeFirstBit(),this.enableEverything(),void this.conditionallyToggleSetWireButton())}.bind(this))}},r.prototype.getNextBit_=function(){return this.packets_.length>0?this.packets_[0].getFirstBit():void 0},r.prototype.disableEverything=function(){this.getBody().find("input, textarea").prop("disabled",!0),this.getBody().find(".netsim-button").attr("disabled","disabled"),this.packetSizeControl_&&this.packetSizeControl_.disable()},r.prototype.getSetWireButton=function(){return this.getBody().find("#set-wire-button")},r.prototype.conditionallyToggleSetWireButton=function(){var a=this.getSetWireButton();return void 0===this.getNextBit_()?a.attr("disabled","disabled"):a.removeAttr("disabled"),a},r.prototype.enableEverything=function(){this.getBody().find("input, textarea").prop("disabled",!1),this.getBody().find(".netsim-button").removeAttr("disabled"),this.packetSizeControl_&&this.packetSizeControl_.enable()},r.prototype.consumeFirstBit=function(){this.packets_.length>0&&(this.packets_[0].consumeFirstBit(),""===this.packets_[0].getPacketBinary()&&this.packets_.length>1&&this.removePacket_(this.packets_[0]))},r.prototype.setEncodings=function(a){this.enabledEncodings_=a,this.packets_.forEach(function(b){b.setEncodings(a)
}),this.onContentChange_()},r.prototype.setChunkSize=function(a){this.chunkSize_=a,this.packets_.forEach(function(b){b.setChunkSize(a)})},r.prototype.setBitRate=function(a){this.bitRate_=a,this.packets_.forEach(function(b){b.setBitRate(a)})},r.prototype.packetSizeChangeCallback_=function(a){this.maxPacketSize_=a,this.packets_.forEach(function(b){b.setMaxPacketSize(a)})},r.prototype.onMinimizerClick_=function(){r.superPrototype.onMinimizerClick_.call(this),this.netsim_.updateLayout()}},{"../utils":318,"./DataConverters":183,"./NetSimConstants":191,"./NetSimGlobals":203,"./NetSimLogger":210,"./NetSimPacketEditor":220,"./NetSimPacketSizeControl":221,"./NetSimPanel":223,"./NetSimSendPanel.html.ejs":234,"./Packet":255,"./locale":260}],234:[function(require,module,exports){module.exports=function(){var t=function anonymous(locals,filters,escape){escape=escape||function(a){return String(a).replace(/&(?!\w+;)/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")};var buf=[];with(locals||{})!function(){buf.push("");var a=require("./locale"),b=require("./NetSimConstants").MessageGranularity;buf.push('\n<div class="send-panel-packets"></div>\n<div class="panel-footer">\n  <div class="right-side-controls">\n    '),level.showAddPacketButton&&buf.push('\n      <span class="netsim-button secondary large-button" id="add-packet-button">',escape(a.addPacket()),"</span>\n    "),buf.push("\n    "),level.messageGranularity===b.PACKETS?buf.push('\n      <span class="netsim-button large-button" id="send-button">',escape(a.send()),"</span>\n    "):level.messageGranularity===b.BITS&&buf.push('\n      <span class="netsim-button large-button" id="set-wire-button">',escape(a.setWire()),"</span>\n    "),buf.push('\n  </div>\n  <div class="packet-size"></div>\n</div>\n')}();return buf.join("")};return function(a){return t(a,require("ejs").filters)}}()},{"./NetSimConstants":191,"./locale":260,ejs:491}],233:[function(a,b){"use strict";var c=a("./NetSimRouterTab.html.ejs"),d=a("./NetSimBandwidthControl"),e=a("./NetSimMemoryControl"),f=a("./NetSimRouterStatsTable"),g=a("./NetSimGlobals"),h=b.exports=function(a,b){this.rootDiv_=a,this.bandwidthSliderChangeCallback_=b.bandwidthSliderChangeCallback,this.bandwidthSliderStopCallback_=b.bandwidthSliderStopCallback,this.memorySliderChangeCallback_=b.memorySliderChangeCallback,this.memorySliderStopCallback_=b.memorySliderStopCallback,this.routerStatsTable_=null,this.bandwidthControl_=null,this.memoryControl_=null,this.render()};h.prototype.attachToRunLoop=function(a){this.routerStatsTable_&&this.routerStatsTable_.attachToRunLoop(a)},h.prototype.render=function(){var a=g.getLevelConfig(),b=$(c({level:a}));this.rootDiv_.html(b),this.routerStatsTable_=new f(this.rootDiv_.find(".router-stats")),a.showRouterBandwidthControl&&(this.bandwidthControl_=new d(this.rootDiv_.find(".bandwidth-control"),this.bandwidthSliderChangeCallback_,this.bandwidthSliderStopCallback_)),a.showRouterMemoryControl&&(this.memoryControl_=new e(this.rootDiv_.find(".memory-control"),this.memorySliderChangeCallback_,this.memorySliderStopCallback_))},h.prototype.setRouterLogData=function(a){this.routerStatsTable_&&this.routerStatsTable_.setRouterLogData(a)},h.prototype.setRouterCreationTime=function(a){this.routerStatsTable_&&this.routerStatsTable_.setRouterCreationTime(a)},h.prototype.setBandwidth=function(a){this.bandwidthControl_&&this.bandwidthControl_.setValue(a),this.routerStatsTable_&&this.routerStatsTable_.setBandwidth(a)},h.prototype.setMemory=function(a){this.memoryControl_&&this.memoryControl_.setValue(a),this.routerStatsTable_&&this.routerStatsTable_.setTotalMemory(a)},h.prototype.setRouterQueuedPacketCount=function(a){this.routerStatsTable_&&this.routerStatsTable_.setRouterQueuedPacketCount(a)},h.prototype.setMemoryInUse=function(a){this.routerStatsTable_&&this.routerStatsTable_.setMemoryInUse(a)},h.prototype.setDataRate=function(a){this.routerStatsTable_&&this.routerStatsTable_.setDataRate(a)}},{"./NetSimBandwidthControl":185,"./NetSimGlobals":203,"./NetSimMemoryControl":211,"./NetSimRouterStatsTable":231,"./NetSimRouterTab.html.ejs":232}],232:[function(require,module,exports){module.exports=function(){var t=function anonymous(locals,filters,escape){escape=escape||function(a){return String(a).replace(/&(?!\w+;)/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")};var buf=[];with(locals||{})!function(){buf.push("");var a=require("./locale");buf.push('\n<div class="netsim-router-tab">\n  <h1>',escape(a.routerTab_stats()),'</h1>\n  <div class="router-stats"></div>\n  '),level.showRouterBandwidthControl&&buf.push("\n    <h1>",escape(a.routerTab_bandwidth()),'</h1>\n    <div class="bandwidth-control"></div>\n  '),buf.push("\n  "),level.showRouterMemoryControl&&buf.push("\n    <h1>",escape(a.routerTab_memory()),'</h1>\n    <div class="memory-control"></div>\n  '),buf.push("\n  <h1>",escape(a.routerTab_logs()),'</h1>\n  <span class="secondary netsim-button large-button" id="show-router-log-modal-two" data-toggle="modal" data-target="#router-log-modal">',escape(a.logBrowserButton()),"</span>\n</div>\n")}();return buf.join("")};return function(a){return t(a,require("ejs").filters)}}()},{"./locale":260,ejs:491}],231:[function(a,b){"use strict";var c=a("./NetSimRouterStatsTable.html.ejs"),d=a("./NetSimUtils"),e=a("./NetSimLogEntry"),f=500,g=1e3,h=60,i=g*h,j=60,k=i*j,l=b.exports=function(a){this.rootDiv_=a,this.lastRenderTime_=null,this.routerCreationTime_=0,this.totalPackets_=0,this.successfulPackets_=0,this.totalData_=0,this.successfulData_=0,this.bandwidthLimit_=0,this.dataRate_=0,this.totalMemory_=0,this.queuedPackets_=0,this.usedMemory_=0,this.render({})};l.prototype.attachToRunLoop=function(a){a.render.register(this.render.bind(this))},l.prototype.render=function(a){if(this.needsRender(a)){var b=$(c({uptime:this.getLocalizedUptime(),queuedPackets:this.queuedPackets_,totalPackets:this.totalPackets_,successfulPackets:this.successfulPackets_,totalData:this.totalData_,successfulData:this.successfulData_,bandwidthLimit:this.bandwidthLimit_,dataRate:this.dataRate_,totalMemory:this.totalMemory_,usedMemory:this.usedMemory_}));this.rootDiv_.html(b),this.lastRenderTime_=a.time}},l.prototype.needsRender=function(a){return!this.lastRenderTime_||a.time-this.lastRenderTime_>f},l.prototype.setNeedsRender=function(){this.lastRenderTime_=null},l.prototype.getLocalizedUptime=function(){var a=0,b=0,c=0;if(this.routerCreationTime_>0){var e=Date.now()-this.routerCreationTime_;a=Math.floor(e/k),e-=a*k,b=Math.floor(e/i),e-=b*i,c=Math.floor(e/g)}return a.toString()+":"+d.zeroPadLeft(b,2)+":"+d.zeroPadLeft(c,2)};var m=function(a){return a.reduce(function(a,b){return a+b.binary.length},0)};l.prototype.setRouterLogData=function(a){var b=a.filter(function(a){return a.status===e.LogStatus.SUCCESS});this.totalPackets_=a.length,this.successfulPackets_=b.length,this.totalData_=m(a),this.successfulData_=m(b),this.setNeedsRender()},l.prototype.setRouterCreationTime=function(a){this.routerCreationTime_=a,this.setNeedsRender()},l.prototype.setBandwidth=function(a){this.bandwidthLimit_=a,this.setNeedsRender()},l.prototype.setTotalMemory=function(a){this.totalMemory_=a,this.setNeedsRender()},l.prototype.setRouterQueuedPacketCount=function(a){this.queuedPackets_=a,this.setNeedsRender()},l.prototype.setMemoryInUse=function(a){this.usedMemory_=a,this.setNeedsRender()},l.prototype.setDataRate=function(a){this.dataRate_=a,this.setNeedsRender()}},{"./NetSimLogEntry":206,"./NetSimRouterStatsTable.html.ejs":230,"./NetSimUtils":246}],230:[function(require,module,exports){module.exports=function(){var t=function anonymous(locals,filters,escape){escape=escape||function(a){return String(a).replace(/&(?!\w+;)/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")};var buf=[];with(locals||{})!function(){buf.push("");var a=require("../utils"),b=require("./NetSimUtils"),c=function(a,b){buf.push("\n      <tr>\n        <th nowrap>",escape(a),"</th>\n        <td>",escape(b),"</td>\n      </tr>\n    ")},d=function(b,d,e,f){f=a.valueOr(f,function(a){return a});var g=f(d)+" / "+f(e);e>0&&1/0>e&&(g+=" ("+Math.round(100*d/e)+"%)"),c(b,g)};buf.push("\n<table>\n  <tbody>\n    "),c("Uptime",uptime),buf.push("\n    "),c("Queued Packets",queuedPackets),buf.push("\n    "),d("Memory Use",usedMemory,totalMemory,b.bitsToLocalizedRoundedBytesize),buf.push("\n    "),d("Throughput",dataRate,bandwidthLimit,b.bitrateToLocalizedRoundedBitrate),buf.push("\n    "),d("Routed Packets",successfulPackets,totalPackets),buf.push("\n    "),d("Routed Data",successfulData,totalData,b.bitsToLocalizedRoundedBytesize),buf.push("\n  </tbody>\n</table>\n")}();return buf.join("")};return function(a){return t(a,require("ejs").filters)}}()},{"../utils":318,"./NetSimUtils":246,ejs:491}],228:[function(a,b){"use strict";var c=a("../utils").getLodash(),d=a("./NetSimLogEntry"),e=a("./Packet"),f=a("./NetSimRouterLogModal.html.ejs"),g=a("./NetSimGlobals"),h=b.exports=function(a){this.rootDiv_=a,this.shard_=null,this.router_=null,this.logEntries_=[],this.eventKeys_={},this.sortBy_="timestamp",this.sortDescending_=!0,this.render()};h.iterateeMap={timestamp:function(a){return a.timestamp},"logged-by":function(a){var b=a.getOriginNode();return b?b.getDisplayName():a.nodeID.toString(10)},status:function(a){return a.getLocalizedStatus()},"from-address":function(a){return a.getHeaderField(e.HeaderType.FROM_ADDRESS)},"to-address":function(a){return a.getHeaderField(e.HeaderType.TO_ADDRESS)},"packet-info":function(a){return a.getLocalizedPacketInfo()},message:function(a){return a.getMessageAscii()}},h.prototype.render=function(){this.rootDiv_.off("shown.bs.modal.onModalOpen"),this.rootDiv_.off("hidden.bs.modal.onModalClose");var a=this.isAllRouterMode()?this.logEntries_:this.logEntries_.filter(function(a){return a.nodeID===this.router_.entityID},this),b=h.iterateeMap[this.sortBy_],d=c.sortBy(a,b);this.sortDescending_&&d.reverse();var e=$(f({logEntries:d,isAllRouterMode:this.isAllRouterMode(),sortBy:this.sortBy_,sortDescending:this.sortDescending_}));this.rootDiv_.html(e),this.rootDiv_.on("shown.bs.modal.onModalOpen",function(){this.shard_&&this.shard_.logTable.subscribe()}.bind(this)),this.rootDiv_.on("hidden.bs.modal.onModalClose",function(){this.shard_&&this.shard_.logTable.unsubscribe()}.bind(this)),this.rootDiv_.find("th").click(function(a){this.onSortHeaderClick_($(a.target).attr("data-sort-key"))}.bind(this))},h.prototype.onSortHeaderClick_=function(a){a&&(this.sortBy_===a?this.sortDescending_=!this.sortDescending_:(this.sortBy_=a,this.sortDescending_=!1),this.render())},h.prototype.setRouter=function(a){this.router_=a,this.render()},h.prototype.isAllRouterMode=function(){var a=g.getLevelConfig();return a.connectedRouters?!0:!this.router_},h.prototype.setShard=function(a){this.eventKeys_.registeredWithShard&&(this.eventKeys_.registeredWithShard.logTable.tableChange.unregister(this.eventKeys_.logTableChange),this.eventKeys_.registeredWithShard=null),a&&(this.eventKeys_.logTableChange=a.logTable.tableChange.register(this.onLogTableChange_.bind(this)),this.eventKeys_.registeredWithShard=a),this.shard_=a},h.prototype.onLogTableChange_=function(a){var b=g.getLevelConfig().routerExpectsPacketHeader;this.logEntries_=a.map(function(a){return new d(this.shard_,a,b)},this),this.render()}},{"../utils":318,"./NetSimGlobals":203,"./NetSimLogEntry":206,"./NetSimRouterLogModal.html.ejs":227,"./Packet":255}],227:[function(require,module,exports){module.exports=function(){var t=function anonymous(locals,filters,escape){escape=escape||function(a){return String(a).replace(/&(?!\w+;)/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")};var buf=[];with(locals||{})!function(){function a(a){return a===sortBy?sortDescending?'<i class="fa fa-sort-desc"></i>':'<i class="fa fa-sort-asc"></i>':""}buf.push("");var b=require("./Packet"),c=require("./locale"),d=require("./NetSimGlobals"),e=d.getLevelConfig().routerExpectsPacketHeader,f=e.indexOf(b.HeaderType.TO_ADDRESS)>-1,g=e.indexOf(b.HeaderType.FROM_ADDRESS)>-1,h=e.indexOf(b.HeaderType.PACKET_INDEX)>-1&&e.indexOf(b.HeaderType.PACKET_COUNT)>-1;buf.push('\n<div class="modal-dialog modal-lg">\n    <div class="modal-header">\n      <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>\n      '),isAllRouterMode?buf.push('\n        <h4 class="modal-title">',escape(c.logBrowserHeader_all()),"</h4>\n      "):buf.push('\n        <h4 class="modal-title">',escape(c.logBrowserHeader_mine()),"</h4>\n      "),buf.push('\n    </div>\n    <div class="modal-body">\n      <table>\n        <thead>\n          <tr>\n            <th nowrap data-sort-key="timestamp">',escape(c.time())," ",a("timestamp"),'</th>\n            <th nowrap data-sort-key="logged-by">',escape(c.loggedByNode())," ",a("logged-by"),'</th>\n            <th nowrap data-sort-key="status">',escape(c.status())," ",a("status"),"</th>\n            "),g&&buf.push('\n              <th nowrap data-sort-key="from-address">',escape(c.from())," ",a("from-address"),"</th>\n            "),buf.push("\n            "),f&&buf.push('\n              <th nowrap data-sort-key="to-address">',escape(c.to())," ",a("to-address"),"</th>\n            "),buf.push("\n            "),h&&buf.push('\n              <th nowrap data-sort-key="packet-info">',escape(c.packet())," ",a("packet-info"),"</th>\n            "),buf.push('\n            <th nowrap data-sort-key="message">',escape(c.message())," ",a("message"),"</th>\n          </tr>\n        </thead>\n        <tbody>\n          "),logEntries.forEach(function(a){var c=a.getOriginNode();buf.push("\n              <tr>\n                <td nowrap>",escape(a.getTimeString()),"</td>\n                <td nowrap>",escape(c?c.getDisplayName():a.nodeID),"</td>\n                <td nowrap>",escape(a.getLocalizedStatus()),"</td>\n                "),g&&buf.push("\n                  <td nowrap>",escape(a.getHeaderField(b.HeaderType.FROM_ADDRESS)),"</td>\n                "),buf.push("\n                "),f&&buf.push("\n                  <td nowrap>",escape(a.getHeaderField(b.HeaderType.TO_ADDRESS)),"</td>\n                "),buf.push("\n                "),h&&buf.push("\n                  <td nowrap>",escape(a.getLocalizedPacketInfo()),"</td>\n                "),buf.push("\n                <td>",escape(a.getMessageAscii()),"</td>\n              </tr>\n              ")}),buf.push('\n        </tbody>\n      </table>\n    </div>\n    <div class="modal-footer">\n      <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>\n    </div>\n</div>')}();return buf.join("")};return function(a){return t(a,require("ejs").filters)}}()},{"./NetSimGlobals":203,"./Packet":255,"./locale":260,ejs:491}],221:[function(a,b){"use strict";var c=a("./locale"),d=a("./NetSimSlider"),e=b.exports=function(a,b,c){d.call(this,a,{onChange:b,min:c.minimumPacketSize,max:8192,upperBoundInfinite:!1}),this.render()};e.inherits(d),e.prototype.getPacketSizeText=function(a){return c.numBitsPerPacket({numBits:a})},e.prototype.valueToLabel=function(a){return 1/0===a?c.unlimited():c.numBitsPerPacket({numBits:a})},e.prototype.valueToShortLabel=function(a){return 1/0===a?c.unlimited():a}},{"./NetSimSlider":240,"./locale":260}],220:[function(a,b){"use strict";a("../utils");var c=a("./locale"),d=a("./NetSimPacketEditor.html.ejs"),e=a("../constants").KeyCodes,f=a("./NetSimEncodingControl"),g=a("./NetSimLogPanel"),h=a("./Packet"),i=a("./DataConverters"),j=a("./NetSimConstants"),k=a("./NetSimGlobals"),l=j.EncodingType,m=j.BITS_PER_BYTE,n=i.minifyBinary,o=i.formatAB,p=i.formatBinary,q=i.formatHex,r=i.alignDecimal,s=i.abToBinary,t=i.abToInt,u=i.binaryToAB,v=i.binaryToHex,w=i.binaryToInt,x=i.binaryToDecimal,y=i.binaryToAscii,z=i.hexToBinary,A=i.intToAB,B=i.intToBinary,C=i.intToHex,D=i.decimalToBinary,E=i.asciiToBinary,F=b.exports=function(a){var b=k.getLevelConfig();this.ROW_TYPES=[{typeName:l.A_AND_B,addressFieldAllowedCharacters:/[AB\s]/i,addressFieldConversion:function(a){return i.binaryToAddressString(i.abToBinary(a),b.addressFormat)},shortNumberAllowedCharacters:/[AB]/i,shortNumberConversion:K,messageAllowedCharacters:/[AB\s]/i,messageConversion:s},{typeName:l.BINARY,addressFieldAllowedCharacters:/[01\s]/i,addressFieldConversion:function(a){return i.binaryToAddressString(a,b.addressFormat)},shortNumberAllowedCharacters:/[01]/,shortNumberConversion:J,messageAllowedCharacters:/[01\s]/,messageConversion:n},{typeName:l.HEXADECIMAL,addressFieldAllowedCharacters:/[0-9a-f\s]/i,addressFieldConversion:function(a){return i.binaryToAddressString(i.hexToBinary(a),b.addressFormat)},shortNumberAllowedCharacters:/[0-9a-f]/i,shortNumberConversion:L,messageAllowedCharacters:/[0-9a-f\s]/i,messageConversion:z},{typeName:l.DECIMAL,addressFieldAllowedCharacters:/[0-9.\s]/i,addressFieldConversion:N,shortNumberAllowedCharacters:/[0-9]/,shortNumberConversion:M,messageAllowedCharacters:/[0-9\s]/,messageConversion:function(a){return D(a,this.currentChunkSize_)}.bind(this)},{typeName:l.ASCII,addressFieldAllowedCharacters:/[0-9.\s]/i,addressFieldConversion:N,shortNumberAllowedCharacters:/[0-9]/,shortNumberConversion:M,messageAllowedCharacters:/./,messageConversion:function(a){return E(a,this.currentChunkSize_)}.bind(this)}],this.rootDiv_=$("<div>").addClass("netsim-packet"),this.messageGranularity_=a.messageGranularity,this.packetSpec_=a.packetSpec,this.toAddress=a.toAddress||i.binaryToAddressString("0",b.addressFormat),this.fromAddress=a.fromAddress||i.binaryToAddressString("0",b.addressFormat),this.packetIndex=void 0!==a.packetIndex?a.packetIndex:1,this.packetCount=void 0!==a.packetCount?a.packetCount:1,this.message=a.message||"",this.maxPacketSize_=a.maxPacketSize||8192,this.currentChunkSize_=a.chunkSize||m,this.bitRate_=a.bitRate||1/0;var c=a.enabledEncodings||[];this.enabledEncodingsHash_=f.encodingsAsHash(c),this.removePacketCallback_=a.removePacketCallback,this.contentChangeCallback_=a.contentChangeCallback,this.enterKeyPressedCallback_=a.enterKeyPressedCallback,this.removePacketButton_=null,this.bitCounter_=null,this.isPlayingSendAnimation_=!1,this.isSendingPacketToRemote_=!1,this.myNode_=null,this.originalBinary_="",this.remainingBinary_="",this.lastBitSentTime_=void 0,this.render()};F.prototype.getRoot=function(){return this.rootDiv_},F.prototype.getFirstVisibleMessageBox=function(){return this.getRoot().find("textarea.message:visible").first()},F.prototype.render=function(){var a=$(d({messageGranularity:this.messageGranularity_,packetSpec:this.packetSpec_,enabledEncodingsHash:this.enabledEncodingsHash_}));this.rootDiv_.html(a),this.bindElements_(),this.updateFields_(),this.updateRemoveButtonVisibility_(),g.adjustHeaderColumnWidths(this.rootDiv_),f.hideRowsByEncoding(this.rootDiv_,Object.keys(this.enabledEncodingsHash_))},F.prototype.beginSending=function(a){this.isPlayingSendAnimation_=!0,this.originalBinary_=this.getPacketBinary().substr(0,this.maxPacketSize_),this.remainingBinary_=this.originalBinary_,this.myNode_=a,0===this.remainingBinary_.length&&this.finishSending()},F.prototype.finishSending=function(){this.isPlayingSendAnimation_=!1,this.isSendingPacketToRemote_=!0,this.myNode_.sendMessage(this.originalBinary_,function(){this.isSendingPacketToRemote_=!1,this.removePacketCallback_(this)}.bind(this))},F.prototype.isSending=function(){return this.isPlayingSendAnimation_||this.isSendingPacketToRemote_},F.prototype.tick=function(a){if(this.isPlayingSendAnimation_&&!this.isSendingPacketToRemote_){this.lastBitSentTime_||(this.lastBitSentTime_=a.time);var b=a.time-this.lastBitSentTime_,c=1e3*(1/this.bitRate_),d=Math.floor(b/c);d>0&&(this.lastBitSentTime_=a.time,this.remainingBinary_=this.remainingBinary_.substr(d),this.setPacketBinary(this.remainingBinary_),0===this.remainingBinary_.length&&this.finishSending())}};var G=function(a){var b=$(a.target);b.hasClass("watermark")&&(b.val(""),b.removeClass("watermark"))},H=function(a){return 13==a.keyCode&&!(a.ctrlKey||a.shiftKey)},I=function(a){return function(b){if(b.metaKey||b.ctrlKey)return!0;if(b.which<e.SPACE||b.which>=e.DELETE)return!0;var c=String.fromCharCode(b.which);return a.test(c)?void 0:(b.preventDefault(),!1)}};F.prototype.makeKeyupHandler=function(a,b,c){return function(d){var e=b(d.target.value,c);"string"!=typeof e&&isNaN(e)||(this[a]=e,this.updateFields_(d.target))}.bind(this)},F.prototype.makeBlurHandler=function(a,b,c){return function(d){var e=b(d.target.value,c);"number"==typeof e&&isNaN(e)&&(e=b("0")),this[a]=e,this.updateFields_()}.bind(this)};var J=function(a,b){return w(a.substr(-b))},K=function(a,b){return t(a.substr(-b))},L=function(a,b){return J(z(a),b)},M=function(a,b){return J(B(parseInt(a,10)),b)},N=function(a){var b=k.getLevelConfig(),c=i.addressStringToBinary(a,b.addressFormat);return i.binaryToAddressString(c,b.addressFormat)};F.prototype.getEnabledRowTypes_=function(){return this.ROW_TYPES.filter(function(a){return this.isEncodingEnabled_(a.typeName)},this)},F.prototype.bindElements_=function(){var a=k.getLevelConfig(),b=new h.Encoder(a.addressFormat,a.packetCountBitWidth,this.packetSpec_),c=this.rootDiv_;this.getEnabledRowTypes_().forEach(function(a){var d=c.find("tr."+a.typeName),e=a.typeName+"UI";this[e]={};var f=this[e];this.packetSpec_.forEach(function(c){var e,g,i=c,j=b.getFieldBitWidth(i);h.isAddressField(i)?(e=a.addressFieldAllowedCharacters,g=a.addressFieldConversion):(e=a.shortNumberAllowedCharacters,g=a.shortNumberConversion),f[i]=d.find("input."+i),f[i].keypress(I(e)),f[i].keyup(this.makeKeyupHandler(i,g,j)),f[i].blur(this.makeBlurHandler(i,g,j))},this),f.message=d.find("textarea.message"),f.message.focus(G),f.message.keypress(I(a.messageAllowedCharacters)),f.message.keydown(function(a){H(a)&&this.enterKeyPressedCallback_(a)}.bind(this)),f.message.keyup(this.makeKeyupHandler("message",a.messageConversion)),f.message.blur(this.makeBlurHandler("message",a.messageConversion))},this),this.removePacketButton_=c.find(".remove-packet-button"),this.removePacketButton_.click(this.onRemovePacketButtonClick_.bind(this)),this.bitCounter_=c.find(".bit-counter")},F.prototype.updateFields_=function(a){var b=this.currentChunkSize_,d=[],e=k.getLevelConfig(),f=new h.Encoder(e.addressFormat,e.packetCountBitWidth,this.packetSpec_);this.packetSpec_.forEach(function(a){var b,c,g,j,k,m=a,n=f.getFieldBitWidth(m);h.isAddressField(m)?(b=function(a){return i.binaryToAB(i.addressStringToBinary(a,e.addressFormat))},c=function(a){return i.formatBinaryForAddressHeader(i.addressStringToBinary(a,e.addressFormat),e.addressFormat)},g=function(a){return i.binaryToHex(i.addressStringToBinary(a,e.addressFormat))},j=N,k=N):(b=A,c=B,g=C,j=function(a){return a.toString(10)},k=j),this.isEncodingEnabled_(l.A_AND_B)&&d.push({inputElement:this.a_and_bUI[m],newValue:b(this[m],n)}),this.isEncodingEnabled_(l.BINARY)&&d.push({inputElement:this.binaryUI[m],newValue:c(this[m],n)}),this.isEncodingEnabled_(l.HEXADECIMAL)&&d.push({inputElement:this.hexadecimalUI[m],newValue:g(this[m],Math.ceil(n/4))}),this.isEncodingEnabled_(l.DECIMAL)&&d.push({inputElement:this.decimalUI[m],newValue:j(this[m],n)}),this.isEncodingEnabled_(l.ASCII)&&d.push({inputElement:this.asciiUI[m],newValue:k(this[m],n)})},this),this.isEncodingEnabled_(l.A_AND_B)&&d.push({inputElement:this.a_and_bUI.message,newValue:o(u(this.message),b),watermark:c.a_and_b()}),this.isEncodingEnabled_(l.BINARY)&&d.push({inputElement:this.binaryUI.message,newValue:p(this.message,b),watermark:c.binary()}),this.isEncodingEnabled_(l.HEXADECIMAL)&&d.push({inputElement:this.hexadecimalUI.message,newValue:q(v(this.message),b),watermark:c.hexadecimal()}),this.isEncodingEnabled_(l.DECIMAL)&&d.push({inputElement:this.decimalUI.message,newValue:r(x(this.message,b)),watermark:c.decimal()}),this.isEncodingEnabled_(l.ASCII)&&d.push({inputElement:this.asciiUI.message,newValue:y(this.message,b),watermark:c.ascii()}),d.forEach(function(b){b.inputElement[0]!==a&&(b.watermark&&""===b.newValue?(b.inputElement.val(b.watermark),b.inputElement.addClass("watermark")):(b.inputElement.val(b.newValue),b.inputElement.removeClass("watermark")))}),this.updateBitCounter(),this.contentChangeCallback_()},F.prototype.updateRemoveButtonVisibility_=function(){this.removePacketButton_.css("display",1===this.packetCount?"none":"")},F.prototype.getPacketBinary=function(){var a=k.getLevelConfig(),b=new h.Encoder(a.addressFormat,a.packetCountBitWidth,this.packetSpec_);return b.concatenateBinary(b.makeBinaryHeaders({toAddress:this.toAddress,fromAddress:this.fromAddress,packetIndex:this.packetIndex,packetCount:this.packetCount}),this.message)},F.prototype.setPacketBinary=function(a){var b=new h(this.packetSpec_,a);this.specContainsHeader_(h.HeaderType.TO_ADDRESS)&&(this.toAddress=b.getHeaderAsAddressString(h.HeaderType.TO_ADDRESS)),this.specContainsHeader_(h.HeaderType.FROM_ADDRESS)&&(this.fromAddress=b.getHeaderAsAddressString(h.HeaderType.FROM_ADDRESS)),this.specContainsHeader_(h.HeaderType.PACKET_INDEX)&&(this.packetIndex=b.getHeaderAsInt(h.HeaderType.PACKET_INDEX)),this.specContainsHeader_(h.HeaderType.PACKET_COUNT)&&(this.packetCount=b.getHeaderAsInt(h.HeaderType.PACKET_COUNT)),this.message=b.getBodyAsBinary(),this.updateFields_()},F.prototype.specContainsHeader_=function(a){return this.packetSpec_.some(function(b){return b===a})},F.prototype.getFirstBit=function(){var a=this.getPacketBinary();return a.length>0?a.substr(0,1):void 0},F.prototype.setFromAddress=function(a){this.fromAddress=a,this.updateFields_()},F.prototype.setPacketIndex=function(a){this.packetIndex=a,this.updateFields_()},F.prototype.setPacketCount=function(a){this.packetCount=a,this.updateFields_(),this.updateRemoveButtonVisibility_()},F.prototype.setMaxPacketSize=function(a){this.maxPacketSize_=a,this.updateBitCounter()},F.prototype.setEncodings=function(a){this.enabledEncodingsHash_=f.encodingsAsHash(a),f.hideRowsByEncoding(this.rootDiv_,a),this.render()},F.prototype.isEncodingEnabled_=function(a){return this.enabledEncodingsHash_[a]===!0},F.prototype.setChunkSize=function(a){this.currentChunkSize_=a,this.updateFields_()},F.prototype.setBitRate=function(a){this.bitRate_=a},F.prototype.updateBitCounter=function(){var a=this.getPacketBinary().length,b=this.maxPacketSize_;this.bitCounter_.html(c.bitCounter({x:a,y:b})),this.bitCounter_.toggleClass("oversized",a>this.maxPacketSize_)},F.prototype.onRemovePacketButtonClick_=function(a){var b=$(a.target);b.is("[disabled]")||b.parents().is("[disabled]")||this.removePacketCallback_(this)},F.prototype.consumeFirstBit=function(){this.setPacketBinary(this.getPacketBinary().substr(1))}},{"../constants":107,"../utils":318,"./DataConverters":183,"./NetSimConstants":191,"./NetSimEncodingControl":201,"./NetSimGlobals":203,"./NetSimLogPanel":209,"./NetSimPacketEditor.html.ejs":219,"./Packet":255,"./locale":260}],219:[function(require,module,exports){module.exports=function(){var t=function anonymous(locals,filters,escape){escape=escape||function(a){return String(a).replace(/&(?!\w+;)/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")};var buf=[];with(locals||{})!function(){function a(a){return enabledEncodingsHash[a]===!0}function b(){buf.push('\n      <thead>\n        <tr>\n          <th nowrap class="',escape(j.ENCODING_LABEL),'"></th>\n          '),n&&buf.push('\n          <th nowrap class="',escape(j.TO_ADDRESS),'">',escape(d.to()),"</th>\n          "),buf.push("\n          "),o&&buf.push('\n          <th nowrap class="',escape(j.FROM_ADDRESS),'">',escape(d.from()),"</th>\n          "),buf.push("\n          "),p&&buf.push('\n          <th nowrap class="',escape(j.PACKET_INFO),'">',escape(d.packet()),"</th>\n          "),buf.push('\n          <th class="',escape(j.MESSAGE),'">\n            ',escape(d.message()),'\n            <div class="packet-controls">\n              <span class="netsim-button secondary remove-packet-button" title="',escape(d.removePacket()),'"><i class="fa fa-times"></i></span>\n            </div>\n          </th>\n        </tr>\n      </thead>\n    ')}function c(a){buf.push('\n      <tr class="',escape(a),'">\n        <th nowrap class="',escape(j.ENCODING_LABEL),'">',escape(k(a)),"</th>\n        "),n&&buf.push('\n        <td nowrap class="',escape(j.TO_ADDRESS),'"><input type="text" class="',escape(g.HeaderType.TO_ADDRESS),'" /></td>\n        '),buf.push("\n        "),o&&buf.push('\n        <td nowrap class="',escape(j.FROM_ADDRESS),'"><input type="text" readonly class="',escape(g.HeaderType.FROM_ADDRESS),'" /></td>\n        '),buf.push("\n        "),p&&buf.push('\n        <td nowrap class="',escape(j.PACKET_INFO),'"><input type="text" readonly class="',escape(g.HeaderType.PACKET_INDEX),'" />',escape(d._of_()),'<input type="text" readonly class="',escape(g.HeaderType.PACKET_COUNT),'" /></td>\n        '),buf.push('\n        <td class="',escape(j.MESSAGE),'"><div><textarea class="message"></textarea></div></td>\n      </tr>\n    ')}buf.push("");var d=require("./locale"),e=require("./NetSimConstants"),f=require("./NetSimUtils"),g=require("./Packet"),h=e.EncodingType,i=e.MessageGranularity,j=e.PacketUIColumnType,k=f.getEncodingLabel,l=f.forEachEnumValue,m=packetSpec,n=m.indexOf(g.HeaderType.TO_ADDRESS)>-1,o=m.indexOf(g.HeaderType.FROM_ADDRESS)>-1,p=m.indexOf(g.HeaderType.PACKET_INDEX)>-1&&m.indexOf(g.HeaderType.PACKET_COUNT)>-1,q=messageGranularity===i.PACKETS;buf.push("\n<table>\n  "),q&&b(),buf.push("\n  <tbody>\n    "),l(h,function(b){a(b)&&c(b)}),buf.push("\n  </tbody>\n</table>\n\n"),q&&buf.push('\n  <div class="bit-counter"></div>\n'),buf.push("\n")}();return buf.join("")};return function(a){return t(a,require("ejs").filters)}}()},{"./NetSimConstants":191,"./NetSimUtils":246,"./Packet":255,"./locale":260,ejs:491}],216:[function(a,b){"use strict";var c=a("./NetSimMyDeviceTab.html.ejs"),d=a("./NetSimBitRateControl"),e=a("./NetSimPulseRateControl"),f=a("./NetSimChunkSizeControl"),g=a("./NetSimEncodingControl"),h=a("./NetSimMetronome"),i=a("./NetSimGlobals"),j=b.exports=function(a,b,c){this.rootDiv_=a,this.runLoop_=b,this.bitsPerSecond_=1,this.chunkSizeSliderChangeCallback_=c.chunkSizeChangeCallback,this.bitRateChangeCallback_=c.bitRateChangeCallback,this.encodingChangeCallback_=c.encodingChangeCallback,this.metronome_=null,this.pulseRateControl_=null,this.bitRateControl_=null,this.chunkSizeControl_=null,this.encodingControl_=null,this.render()};j.prototype.render=function(){var a=i.getLevelConfig(),b=$(c({level:a}));this.rootDiv_.html(b),a.showMetronome&&(this.metronome_=new h(this.rootDiv_.find(".metronome"),this.runLoop_),this.metronome_.setFrequency(this.bitsPerSecond_)),a.showPulseRateSlider&&(this.pulseRateControl_=new e(this.rootDiv_.find(".pulse-rate"),1/this.bitsPerSecond_,function(a){this.bitRateChangeCallback_(1/a)}.bind(this))),a.showBitRateControl&&(this.bitRateControl_=new d(this.rootDiv_.find(".bitrate"),this.bitsPerSecond_,this.bitRateChangeCallback_),a.lockBitRateControl&&this.bitRateControl_.disable()),a.showChunkSizeControl&&(this.chunkSizeControl_=new f(this.rootDiv_.find(".chunk-size"),this.chunkSizeSliderChangeCallback_),a.lockChunkSizeControl&&this.chunkSizeControl_.disable()),a.showEncodingControls.length>0&&(this.encodingControl_=new g(this.rootDiv_.find(".encoding"),a,this.encodingChangeCallback_))},j.prototype.pulseRateSliderChange_=function(a){this.setBitRate(1/a)},j.prototype.setBitRate=function(a){this.bitsPerSecond_=a,this.metronome_&&this.metronome_.setFrequency(a),this.bitRateControl_&&this.bitRateControl_.setValue(a),this.pulseRateControl_&&1/0>a&&this.pulseRateControl_.setValue(1/a)},j.prototype.setChunkSize=function(a){this.chunkSizeControl_&&this.chunkSizeControl_.setValue(a)},j.prototype.setEncodings=function(a){this.encodingControl_&&this.encodingControl_.setEncodings(a)}},{"./NetSimBitRateControl":188,"./NetSimChunkSizeControl":189,"./NetSimEncodingControl":201,"./NetSimGlobals":203,"./NetSimMetronome":214,"./NetSimMyDeviceTab.html.ejs":215,"./NetSimPulseRateControl":224}],224:[function(a,b){"use strict";
a("../utils");var c=a("./locale"),d=a("./NetSimSlider"),e=b.exports=function(a,b,c){d.DecimalPrecisionSlider.call(this,a,{onChange:c,value:b,min:.5,max:5,step:-.25}),this.render()};e.inherits(d.DecimalPrecisionSlider),e.prototype.valueToLabel=function(a){var b=Math.floor(100*a)/100;return 1===b?c.xSecondPerPulse({x:b}):c.xSecondsPerPulse({x:b})},e.prototype.valueToShortLabel=function(a){return a}},{"../utils":318,"./NetSimSlider":240,"./locale":260}],215:[function(require,module,exports){module.exports=function(){var t=function anonymous(locals,filters,escape){escape=escape||function(a){return String(a).replace(/&(?!\w+;)/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")};var buf=[];with(locals||{})!function(){buf.push('<div class="netsim-my-device-tab">\n\n  '),level.showMetronome&&buf.push('\n    <div class="metronome"></div>\n  '),buf.push("\n\n  "),level.showPulseRateSlider&&buf.push('\n    <h1>Pulse rate</h1>\n    <div class="pulse-rate"></div>\n  '),buf.push("\n\n  "),level.showBitRateControl&&buf.push('\n    <h1>Bitrate</h1>\n    <div class="bitrate"></div>\n  '),buf.push("\n\n  "),level.showChunkSizeControl&&buf.push('\n    <h1>Chunk size</h1>\n    <div class="chunk-size"></div>\n  '),buf.push("\n\n  "),level.showEncodingControls.length>0&&buf.push('\n    <div class="encoding"></div>\n  '),buf.push("\n\n</div>\n")}();return buf.join("")};return function(a){return t(a,require("ejs").filters)}}()},{ejs:491}],214:[function(a,b){"use strict";var c=a("./NetSimMetronome.html.ejs"),d=b.exports=function(a,b){this.rootDiv_=a,this.lastPulseTime_=void 0,this.pulseIntervalMillis_=0,this.progress_=0,this.pulseAge_=0,b.render.register(this.render.bind(this))};d.prototype.render=function(a){if(this.lastPulseTime_||(this.lastPulseTime_=a.time),1/0===this.pulseIntervalMillis_)this.progress_=0,this.pulseAge_=1/0;else if(this.pulseAge_=a.time-this.lastPulseTime_,this.progress_=Math.min(this.pulseAge_/this.pulseIntervalMillis_,1),this.pulseAge_>=this.pulseIntervalMillis_)for(var b=a.time-this.pulseIntervalMillis_;this.lastPulseTime_<b;)this.lastPulseTime_+=this.pulseIntervalMillis_;var d=$(c({progress:this.progress_,pulseAge:this.pulseAge_}));this.rootDiv_.html(d)},d.prototype.setFrequency=function(a){return 0===a||1/0===a?void(this.pulseIntervalMillis_=1/0):void(this.pulseIntervalMillis_=1e3/a)}},{"./NetSimMetronome.html.ejs":213}],213:[function(require,module,exports){module.exports=function(){var t=function anonymous(locals,filters,escape){escape=escape||function(a){return String(a).replace(/&(?!\w+;)/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")};var buf=[];with(locals||{})!function(){function a(a,b){return"M"+a+" "+b}function b(a,b){return"L "+a+" "+b}function c(a,b,c,d,e,f,g){return"A "+a+" "+b+", "+c+", "+d+", "+e+", "+f+" "+g}function d(){return"Z"}function e(e){var h=2*Math.PI*e,i=e>=.5?1:0,j=Math.sin(h),k=Math.cos(h),l=f*k,m=f*j,n=g*k,o=g*j;return[a(f,0),c(f,f,0,i,1,l,m),b(n,o),c(g,g,0,i,0,g,0),d()].join(" ")}buf.push("");var f=45,g=30,h=500,i=Math.min(pulseAge/h,1),j=g*(1-i);buf.push('\n<div class="netsim-metronome">\n  <svg version="1.1" width="100" height="100" xmlns="http://www.w3.org/2000/svg">\n    <g id="centered-group" transform="translate(50,50)">\n      <circle r="48" cx="0" cy="0" fill="darkgray"></circle>\n      <circle r="48" cx="-1" cy="1" fill="lightgray"></circle>\n      <circle r="46" cx="0" cy="0" fill="#f5f5f5"></circle>\n      <circle class="pulse-dot" r="',escape(j),'" cx="0" cy="0"></circle>\n      <g transform="rotate(-90)">\n        <path class="progress-meter" d="',escape(e(progress)),'"></path>\n      </g>\n    </g>\n  </svg>\n</div>\n')}();return buf.join("")};return function(a){return t(a,require("ejs").filters)}}()},{ejs:491}],211:[function(a,b){"use strict";a("../utils");var c=a("./NetSimConstants"),d=a("./NetSimUtils"),e=a("./NetSimSlider"),f=b.exports=function(a,b,d){e.LogarithmicSlider.call(this,a,{onChange:b,onStop:d,value:1/0,min:c.BITS_PER_BYTE,max:c.BITS_PER_MEGABYTE,upperBoundInfinite:!0}),this.render()};f.inherits(e.LogarithmicSlider),f.prototype.valueToLabel=function(a){return d.bitsToLocalizedRoundedBytesize(a)}},{"../utils":318,"./NetSimConstants":191,"./NetSimSlider":240,"./NetSimUtils":246}],209:[function(a,b){"use strict";var c=a("../utils"),d=a("./locale"),e=a("./NetSimLogPanel.html.ejs"),f=a("./Packet"),g=a("./NetSimLogPacket.html.ejs"),h=a("./NetSimPanel"),i=a("./NetSimEncodingControl"),j=a("./NetSimGlobals"),k=400,l=50,m=b.exports=function(a,b){this.packetSpec_=b.packetSpec,this.packets_=[],this.currentEncodings_=[],this.currentChunkSize_=8,this.logTitle_=b.logTitle,this.hasUnreadMessages_=!!b.hasUnreadMessages,this.maximumLogPackets_=c.valueOr(b.maximumLogPackets,l),h.call(this,a,{className:"netsim-log-panel",panelTitle:b.logTitle,beginMinimized:b.isMinimized})};m.inherits(h),m.prototype.render=function(){m.superPrototype.render.call(this);var a=$(e({}));this.getBody().html(a),this.addButton(d.clear(),this.onClearButtonPress_.bind(this)),this.scrollArea_=this.getBody().find(".scroll-area"),this.updateUnreadCount()},m.prototype.onClearButtonPress_=function(){this.scrollArea_.empty(),this.packets_.length=0,this.updateUnreadCount()},m.prototype.log=function(a,b){var c=this.packets_.some(function(a){return a.packetID==b});if(!c){this.packets_.splice(this.maximumLogPackets_-1,this.packets_.length).forEach(function(a){a.getRoot().remove()});var d=new n(a,b,{packetSpec:this.packetSpec_,encodings:this.currentEncodings_,chunkSize:this.currentChunkSize_,isUnread:this.hasUnreadMessages_,markAsReadCallback:this.updateUnreadCount.bind(this)});d.getRoot().hide(),d.getRoot().prependTo(this.scrollArea_),d.getRoot().slideDown(k),this.packets_.unshift(d),this.updateUnreadCount()}},m.prototype.updateUnreadCount=function(){var a=this.packets_.reduce(function(a,b){return a+(b.isUnread?1:0)},0);this.setPanelTitle(a>0?d.appendCountToTitle({title:this.logTitle_,count:a}):this.logTitle_)},m.prototype.setEncodings=function(a){this.currentEncodings_=a,this.packets_.forEach(function(b){b.setEncodings(a)})},m.prototype.setChunkSize=function(a){this.currentChunkSize_=a,this.packets_.forEach(function(b){b.setChunkSize(a)})};var n=function(a,b,c){this.packetID=b,this.packetBinary_=a,this.packetSpec_=c.packetSpec,this.encodings_=c.encodings,this.chunkSize_=c.chunkSize,this.isUnread=c.isUnread,this.isMinimized=!1,this.markAsReadCallback_=c.markAsReadCallback,this.rootDiv_=$("<div>").addClass("packet"),this.rootDiv_.click(this.markAsRead.bind(this)),this.render()};n.prototype.render=function(){var a=i.encodingsAsHash(this.encodings_),b=g({packetBinary:this.packetBinary_,packetSpec:this.packetSpec_,enabledEncodingsHash:a,chunkSize:this.chunkSize_,isMinimized:this.isMinimized}),c=$(b);m.adjustHeaderColumnWidths(c),i.hideRowsByEncoding(c,this.encodings_),this.rootDiv_.html(c),this.rootDiv_.find(".expander").click(this.toggleMinimized.bind(this)),this.rootDiv_.toggleClass("unread",this.isUnread)},n.prototype.getRoot=function(){return this.rootDiv_},m.adjustHeaderColumnWidths=function(a){var b=j.getLevelConfig(),c=new f.Encoder(b.addressFormat,b.packetCountBitWidth,b.clientInitialPacketHeader),d=c.getFieldBitWidth(f.HeaderType.TO_ADDRESS),e=c.getFieldBitWidth(f.HeaderType.PACKET_COUNT),g=12.5,h=g*d;a.find("td.toAddress, th.toAddress, td.fromAddress, th.fromAddress").css("width",h+"px");var i=.75,k=i*d;a.find("td.toAddress input, td.fromAddress input").css("width",k+"em");var l=2*g*e+21;a.find("td.packetInfo, th.packetInfo").css("width",l+"px");var m=i*e;a.find("td.packetInfo input").css("width",m+"em")},n.prototype.setEncodings=function(a){this.encodings_=a,this.render()},n.prototype.setChunkSize=function(a){this.chunkSize_=a,this.render()},n.prototype.markAsRead=function(){this.isUnread&&(this.isUnread=!1,this.render(),this.markAsReadCallback_())},n.prototype.toggleMinimized=function(){this.isMinimized=!this.isMinimized,this.render()},m.prototype.setHeight=function(a){var b=this.getRoot().find(".netsim-panel"),c=b.find("h1"),d=b.find(".panel-body"),e=parseFloat(b.css("margin-top"))+parseFloat(b.css("margin-bottom")),f=c.outerHeight(!0),g=parseFloat(d.css("border-top-width"))+parseFloat(d.css("border-bottom-width")),h=parseFloat(this.scrollArea_.css("margin-top"))+parseFloat(this.scrollArea_.css("margin-bottom")),i=a-(e+f+g+h);this.scrollArea_.height(Math.floor(i))},m.prototype.getHeight=function(){return this.getRoot().find(".netsim-panel").outerHeight(!0)},m.prototype.onMinimizerClick_=function(){m.superPrototype.onMinimizerClick_.call(this),j.updateLayout()}},{"../utils":318,"./NetSimEncodingControl":201,"./NetSimGlobals":203,"./NetSimLogPacket.html.ejs":207,"./NetSimLogPanel.html.ejs":208,"./NetSimPanel":223,"./Packet":255,"./locale":260}],208:[function(require,module,exports){module.exports=function(){var t=function anonymous(locals,filters,escape){escape=escape||function(a){return String(a).replace(/&(?!\w+;)/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")};var buf=[];with(locals||{})!function(){buf.push('<div class="scroll-area">\n</div>\n')}();return buf.join("")};return function(a){return t(a,require("ejs").filters)}}()},{ejs:491}],207:[function(require,module,exports){module.exports=function(){var t=function anonymous(locals,filters,escape){escape=escape||function(a){return String(a).replace(/&(?!\w+;)/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")};var buf=[];with(locals||{})!function(){function a(a){return enabledEncodingsHash[a]===!0}function b(){var b=x.getBodyAsBinary();return a(k.ASCII)?u(b,chunkSize):a(k.DECIMAL)?p(t(b,chunkSize)):a(k.HEXADECIMAL)?o(s(b),chunkSize):a(k.BINARY)?n(b,chunkSize):a(k.A_AND_B)?m(q(b),chunkSize):b}function c(b,c,d,e,f){a(b)&&(buf.push('\n        <tr class="',escape(b),'">\n          <th nowrap class="',escape(l.ENCODING_LABEL),'">',escape(h(b)),"</th>\n          "),z&&buf.push('\n            <td nowrap class="',escape(l.TO_ADDRESS),'">',escape(c),"</td>\n          "),buf.push("\n          "),A&&buf.push('\n            <td nowrap class="',escape(l.FROM_ADDRESS),'">',escape(d),"</td>\n          "),buf.push("\n          "),B&&buf.push('\n            <td nowrap class="',escape(l.PACKET_INFO),'">',escape(e),"</td>\n          "),buf.push('\n          <td class="',escape(l.MESSAGE),'">',escape(f),"</td>\n        </tr>\n    "))}buf.push("");var d=require("./NetSimConstants"),e=require("./NetSimGlobals"),f=require("./DataConverters"),g=require("./locale"),h=require("./NetSimUtils").getEncodingLabel,i=require("./Packet"),j=e.getLevelConfig(),k=d.EncodingType,l=d.PacketUIColumnType,m=f.formatAB,n=f.formatBinary,o=f.formatHex,p=f.alignDecimal,q=f.binaryToAB,r=f.binaryToInt,s=f.binaryToHex,t=f.binaryToDecimal,u=f.binaryToAscii,v=function(a){return f.binaryToAddressString(a,j.addressFormat)},w=function(a){return f.formatBinaryForAddressHeader(a,j.addressFormat)},x=new i(packetSpec,packetBinary),y=packetSpec,z=y.indexOf(i.HeaderType.TO_ADDRESS)>-1,A=y.indexOf(i.HeaderType.FROM_ADDRESS)>-1,B=y.indexOf(i.HeaderType.PACKET_INDEX)>-1&&y.indexOf(i.HeaderType.PACKET_COUNT)>-1;buf.push("\n  ");var C=z?x.getHeaderAsBinary(i.HeaderType.TO_ADDRESS):"",D=A?x.getHeaderAsBinary(i.HeaderType.FROM_ADDRESS):"",E=B?x.getHeaderAsBinary(i.HeaderType.PACKET_INDEX):"",F=B?x.getHeaderAsBinary(i.HeaderType.PACKET_COUNT):"",G=x.getBodyAsBinary();buf.push("\n  "),isMinimized?buf.push('\n      <div class="minimized-packet single-line-with-ellipsis user-data">\n        <i class="fa fa-plus-square expander"></i>\n        ',escape(b()),"\n      </div>\n  "):(buf.push('\n    <table class="maximized-packet">\n      <thead>\n        <tr>\n          <th nowrap class="',escape(l.ENCODING_LABEL),'">\n            <i class="fa fa-minus-square expander"></i>\n          </th>\n          '),z&&buf.push('\n            <th nowrap class="',escape(l.TO_ADDRESS),'">',escape(g.to()),"</th>\n          "),buf.push("\n          "),A&&buf.push('\n            <th nowrap class="',escape(l.FROM_ADDRESS),'">',escape(g.from()),"</th>\n          "),buf.push("\n          "),B&&buf.push('\n            <th nowrap class="',escape(l.PACKET_INFO),'">',escape(g.packet()),"</th>\n          "),buf.push('\n          <th class="',escape(l.MESSAGE),'">\n            ',escape(g.message()),"\n          </th>\n        </tr>\n      </thead>\n      <tbody>\n      "),c(k.ASCII,v(C),v(D),g.xOfYPackets({x:r(E),y:r(F)}),u(G,chunkSize)),c(k.DECIMAL,v(C),v(D),g.xOfYPackets({x:r(E),y:r(F)}),p(t(G,chunkSize))),c(k.HEXADECIMAL,s(C),s(D),g.xOfYPackets({x:s(E),y:s(F)}),o(s(G),chunkSize)),c(k.BINARY,w(C,4),w(D,4),n(E+F,j.packetCountBitWidth),n(G,chunkSize)),c(k.A_AND_B,q(C),q(D),m(q(E+F),j.packetCountBitWidth),m(q(G),chunkSize)),buf.push("\n      </tbody>\n    </table>\n  ")),buf.push("\n")}();return buf.join("")};return function(a){return t(a,require("ejs").filters)}}()},{"./DataConverters":183,"./NetSimConstants":191,"./NetSimGlobals":203,"./NetSimUtils":246,"./Packet":255,"./locale":260,ejs:491}],205:[function(a,b){"use strict";var c=a("../utils"),d=c.getLodash(),e=a("./NetSimClientNode"),f=a("./NetSimEntity"),g=a("./NetSimMessage"),h=a("./NetSimLogger"),i=a("./NetSimRouterNode"),j=a("../ObservableEvent"),k=h.getSingleton(),l=a("./NetSimConstants"),m=a("./NetSimGlobals"),n=l.MessageGranularity,o=b.exports=function(a,b){e.call(this,a,b),this.myWire=null,this.myRemoteClient=null,this.myRouterID_=void 0,this.routers_=[],this.sentLog_=null,this.receivedLog_=null,this.remoteChange=new j,this.onNodeLostConnection_=void 0,this.eventKeys={}};o.inherits(e),o.create=function(a,b,c){var d=new o(a);d.displayName_=b,d.getTable().create(d.buildRow(),function(b,d){if(b)return void c(b,null);var e=new o(a,d);c(null,e)})},o.prototype.setDisplayName=function(a){this.displayName_=a},o.prototype.initializeSimulation=function(a,b){this.sentLog_=a,this.receivedLog_=b,this.eventKeys.nodeTable=this.shard_.nodeTable.tableChange.register(this.onNodeTableChange_.bind(this)),this.eventKeys.wireTable=this.shard_.wireTable.tableChange.register(this.onWireTableChange_.bind(this)),this.eventKeys.messageTable=this.shard_.messageTable.tableChange.register(this.onMessageTableChange_.bind(this)),this.eventKeys.registeredOnShard=this.shard_,this.onNodeTableChange_(this.shard_.nodeTable.readAll())},o.prototype.stopSimulation=function(){this.eventKeys.registeredOnShard&&(this.eventKeys.registeredOnShard.nodeTable.tableChange.unregister(this.eventKeys.nodeTable),this.eventKeys.registeredOnShard.wireTable.tableChange.unregister(this.eventKeys.wireTable),this.eventKeys.registeredOnShard.messageTable.tableChange.unregister(this.eventKeys.messageTable),this.eventKeys.registeredOnShard=null)},o.prototype.tick=function(a){this.routers_.forEach(function(b){b.tick(a)})},o.prototype.setLostConnectionCallback=function(a){if(void 0!==this.onNodeLostConnection_&&void 0!==a)throw new Error("Node already has a lost connection callback.");this.onNodeLostConnection_=a},o.prototype.update=function(a){a=a||function(){};var b=this;o.superPrototype.update.call(this,function(c,d){c&&(k.error("Local node update failed: "+c.message),void 0!==b.onNodeLostConnection_&&b.onNodeLostConnection_()),a(c,d)})},o.prototype.connectToNode=function(a,b){o.superPrototype.connectToNode.call(this,a,function(a,c){a?b(a,null):(this.myWire=c,b(a,c))}.bind(this))},o.prototype.connectToClient=function(a,b){this.connectToNode(a,function(a,c){this.shard_.wireTable.refresh().always(b.bind(null,a,c))}.bind(this))},o.prototype.connectToRouter=function(a,b){b=b||function(){},k.info(this.getDisplayName()+": Connecting to "+a.getDisplayName()),this.connectToNode(a,function(c,d){if(c)return void b(c);this.myRouterID_=a.entityID;var e=this.getMyRouter();e.requestAddress(d,this.getHostname(),function(a){return a?void this.disconnectRemote(b):(this.remoteChange.notifyObservers(this.myWire,e),void b(null))}.bind(this))}.bind(this))},o.prototype.getMyRouter=function(){return void 0===this.myRouterID_?null:d.find(this.routers_,function(a){return a.entityID===this.myRouterID_}.bind(this))},o.prototype.destroy=function(a){if(this.myRemoteClient||void 0!==this.myRouterID_)return void this.disconnectRemote(function(b){return b?void a(b):void this.destroy(a)}.bind(this));var b=this.shard_.messageTable.readAll().filter(function(a){return a.simulatedBy===this.entityID},this).map(function(a){return new g(this.shard_,a)},this);return b.length>0?void f.destroyEntities(b,function(b){return b?void a(b):void this.destroy(a)}.bind(this)):void o.superPrototype.destroy.call(this,a)},o.prototype.disconnectRemote=function(a){a=a||function(){},this.myWire.destroy(function(b){b&&k.info("Error while disconnecting: "+b.message),this.cleanUpAfterDestroyingWire_(),a(null)}.bind(this))},o.prototype.cleanUpAfterDestroyingWire_=function(){this.myWire=null,this.myRemoteClient=null,this.myRouterID_=void 0,this.remoteChange.notifyObservers(null,null)},o.prototype.sendMessage=function(a,b){if(!this.myWire)return void b(new Error("Cannot send message; not connected."));var c=this.myWire.localNodeID,d=this.myWire.remoteNodeID,e=this.selectSimulatingNode_(c,d),f=m.getLevelConfig(),h=f.minimumExtraHops;f.minimumExtraHops!==f.maximumExtraHops&&(h=m.randomIntInRange(f.minimumExtraHops,f.maximumExtraHops+1));var i=this;g.send(this.shard_,{fromNodeID:c,toNodeID:d,simulatedBy:e,payload:a,extraHopsRemaining:h},function(f,g){return f?(k.error("Failed to send message: "+f.message+"\n"+JSON.stringify(a)),void b(f)):(k.info(this.getDisplayName()+": Sent message:\nfrom: "+c+"\nto  : "+d+"\nsim : "+e+"\nhops: "+h),i.sentLog_&&i.sentLog_.log(a,g.id),void b(null))}.bind(this))},o.prototype.selectSimulatingNode_=function(a,b){return m.getLevelConfig().messageGranularity===n.BITS?a:void 0!==this.myRouterID_&&this.myRouterID_===b?a:b},o.prototype.sendMessages=function(a,b){return 0===a.length?void b(null):void this.sendMessage(a[0],function(c,d){return c?void b(c,d):void this.sendMessages(a.slice(1),b)}.bind(this))},o.prototype.onNodeTableChange_=function(a){this.routers_=this.routers_.filter(function(b){var c=a.some(function(a){return a.id===b.entityID});return c?!0:(b.stopSimulation(),!1)}),a.filter(function(a){return a.type===l.NodeType.ROUTER}).forEach(function(a){var b=this.routers_.some(function(b){return a.id===b.entityID});if(!b){var c=new i(this.shard_,a);c.initializeSimulation(this.entityID),this.routers_.push(c)}},this)},o.prototype.onWireTableChange_=function(a){if(this.myWire){var b,c,f=d.find(a,function(a){return a.remoteNodeID===this.myWire.localNodeID&&a.localNodeID===this.myWire.remoteNodeID}.bind(this));f&&!this.myRemoteClient?e.get(f.localNodeID,this.shard_,function(a,b){this.myRemoteClient=b,this.remoteChange.notifyObservers(this.myWire,this.myRemoteClient)}.bind(this)):!f&&this.myRemoteClient?this.disconnectRemote():f||this.myRemoteClient||(b=d.find(a,function(a){return a.localNodeID===this.myWire.remoteNodeID&&a.remoteNodeID!==this.myWire.localNodeID}.bind(this)),c=b?a.some(function(a){return a.remoteNodeID==b.localNodeID&&a.localNodeID==b.remoteNodeID}):void 0,b&&c&&this.disconnectRemote())}},o.prototype.onMessageTableChange_=function(a){if(m.getLevelConfig().automaticReceive&&!this.isProcessingMessages_){var b=a.map(function(a){return new g(this.shard_,a)}.bind(this)).filter(function(a){return a.toNodeID===this.entityID&&a.simulatedBy===this.entityID}.bind(this));0!==b.length&&(k.info("Local node received "+b.length+" messages"),this.isProcessingMessages_=!0,f.destroyEntities(b,function(a){return a?(k.error("Error pulling message off the wire: "+a.message),void(this.isProcessingMessages_=!1)):(b.forEach(function(a){this.handleMessage_(a)},this),k.info("Local node finished processing "+b.length+" messages"),void(this.isProcessingMessages_=!1))}.bind(this)))}},o.prototype.handleMessage_=function(a){k.info(this.getDisplayName()+": Handling incoming message"),this.receivedLog_&&this.receivedLog_.log(a.payload,a.entityID)},o.prototype.getLatestMessageOnSimplexWire=function(a){if(!this.myWire)return void a(new Error("Unable to retrieve message; not connected."));var b=this.shard_.messageTable;b.refresh().fail(a).done(function(){var c=b.readAll().filter(function(a){return this.myWire.isMessageRowOnSimplexWire(a)}.bind(this));if(0===c.length)return void a(null,null);var d=c[c.length-1];a(null,new g(this.shard_,d))}.bind(this))},o.prototype.setSimplexWireState=function(a,b){this.sendMessage(a,function(a){return a?(k.warn(a.message),void b(new Error("Failed to set wire state."))):void this.removeMyOldMessagesFromWire_(b)}.bind(this))},o.prototype.removeMyOldMessagesFromWire_=function(a){if(!this.myWire)return void a(new Error("Unable to retrieve message; not connected."));var b=this.shard_.messageTable;b.refresh().fail(a).done(function(){var c=b.readAll().filter(function(a){return this.myWire.isMessageRowOnSimplexWire(a)},this),d=c.slice(0,-1),e=d.filter(function(a){return a.simulatedBy===this.entityID},this),h=e.map(function(a){return new g(this.shard_,a)},this);f.destroyEntities(h,a)}.bind(this))}},{"../ObservableEvent":2,"../utils":318,"./NetSimClientNode":190,"./NetSimConstants":191,"./NetSimEntity":202,"./NetSimGlobals":203,"./NetSimLogger":210,"./NetSimMessage":212,"./NetSimRouterNode":229}],204:[function(a,b){"use strict";var c=a("../utils"),d=c.getLodash(),e=a("./locale"),f=a("./NetSimNodeFactory"),g=a("./NetSimClientNode"),h=a("./NetSimRouterNode"),i=a("./NetSimShardSelectionPanel"),j=a("./NetSimRemoteNodeSelectionPanel"),k=a("./NetSimLogger").getSingleton(),l=a("./NetSimGlobals"),m=b.exports=function(a,b,c){this.rootDiv_=a,this.netsim_=b,this.levelKey_=c.levelKey,this.shardSelectionPanel_=null,this.nodeSelectionPanel_=null,this.shard_=null,this.myNode_=null,this.eventKeys={},this.displayName_=c.user.isSignedIn?c.user.name:"",this.shardChoices_=[],this.selectedShardID_=void 0,this.nodesOnShard_=[],this.incomingConnectionNodes_=[],this.remoteNode_=null,c.user.isSignedIn?this.getUserSections_(function(a){this.buildShardChoiceList_(a,c.sharedShardSeed),this.render()}.bind(this)):this.buildShardChoiceList_([],c.sharedShardSeed),this.render(),this.netsim_.shardChange.register(this.onShardChange_.bind(this))};m.prototype.render=function(){var a=null!==this.shard_;a?this.nodeSelectionPanel_=new j(this.rootDiv_,{nodesOnShard:this.nodesOnShard_,incomingConnectionNodes:this.incomingConnectionNodes_,remoteNode:this.remoteNode_,myNodeID:this.myNode_.entityID},{addRouterCallback:this.addRouterToLobby.bind(this),cancelButtonCallback:this.onCancelButtonClick_.bind(this),joinButtonCallback:this.onJoinButtonClick_.bind(this)}):this.shardSelectionPanel_=new i(this.rootDiv_,{displayName:this.displayName_,shardChoices:this.shardChoices_,selectedShardID:this.selectedShardID_},{setNameCallback:this.setDisplayName.bind(this),setShardCallback:this.setShardID.bind(this)})},m.prototype.setDisplayName=function(a){this.displayName_=a,this.render(),this.selectedShardID_&&this.displayName_&&!this.netsim_.isConnectedToShardID(this.selectedShardID_)&&this.netsim_.connectToShard(this.selectedShardID_,this.displayName_)},m.prototype.setShardID=function(a){this.selectedShardID_=a,this.render(),this.selectedShardID_&&this.displayName_&&!this.netsim_.isConnectedToShardID(this.selectedShardID_)&&this.netsim_.connectToShard(this.selectedShardID_,this.displayName_)},m.prototype.onShardChange_=function(a,b){this.eventKeys.registeredShard&&(this.eventKeys.registeredShard.nodeTable.tableChange.unregister(this.eventKeys.nodeTable),this.eventKeys.registeredShard.wireTable.tableChange.unregister(this.eventKeys.wireTable),this.registeredShard=void 0),this.shard_=a,this.myNode_=b,this.shard_?(this.eventKeys.nodeTable=this.shard_.nodeTable.tableChange.register(this.onNodeTableChange_.bind(this)),this.eventKeys.wireTable=this.shard_.wireTable.tableChange.register(this.onWireTableChange_.bind(this)),this.eventKeys.registeredShard=this.shard_,this.fetchInitialLobbyData_()):(this.selectedShardID_=void 0,this.nodesOnShard_.length=0,this.incomingConnectionNodes_.length=0,this.render(),1===this.shardChoices_.length&&this.setShardID(this.shardChoices_[0].shardID))},m.prototype.fetchInitialLobbyData_=function(){$.when(this.shard_.nodeTable.refresh(),this.shard_.wireTable.refresh()).fail(function(a,b){a?k.warn("Node table refresh failed: "+a):b&&k.warn("Wire table refresh failed: "+b)}.bind(this)).done(function(){l.getLevelConfig().canConnectToRouters&&!this.doesShardContainRouter()&&this.addRouterToLobby()}.bind(this))},m.prototype.doesShardContainRouter=function(){return void 0!==d.find(this.nodesOnShard_,function(a){return a instanceof h})},m.prototype.addRouterToLobby=function(){h.create(this.shard_,function(a){a&&k.error("Unable to create router: "+a.message)}.bind(this))},m.prototype.onJoinButtonClick_=function(a){a instanceof h?this.netsim_.connectToRouter(a.entityID):a instanceof g&&this.myNode_.connectToClient(a,function(){})},m.prototype.onCancelButtonClick_=function(){this.netsim_.disconnectFromRemote()},m.prototype.onNodeTableChange_=function(a){this.nodesOnShard_=f.nodesFromRows(this.shard_,a),this.render()},m.prototype.onWireTableChange_=function(a){this.incomingConnectionNodes_=a.filter(function(a){return a.remoteNodeID===this.myNode_.entityID},this).map(function(a){return d.find(this.nodesOnShard_,function(b){return b.entityID===a.localNodeID})},this).filter(function(a){return void 0!==a});var b=d.find(a,function(a){return a.localNodeID===this.myNode_.entityID}.bind(this));this.remoteNode_=b?d.find(this.nodesOnShard_,function(a){return a.entityID===b.remoteNodeID}):null,this.render()},m.prototype.getUserSections_=function(a){var b=$.ajax({dataType:"json",url:"/v2/sections/membership"}),c=$.ajax({dataType:"json",url:"/v2/sections"});$.when(b,c).done(function(b,c){var d=b[0],e=c[0];a(d.concat(e))})},m.prototype.buildShardChoiceList_=function(a,b){if(this.shardChoices_.length=0,b){var d=this.makeShardIDFromSeed_(b);this.shardChoices_.push({shardSeed:b,shardID:d,displayName:b})}if(this.shardChoices_=this.shardChoices_.concat(a.map(function(a){return{shardSeed:a.id,shardID:this.makeShardIDFromSeed_(a.id),displayName:a.name}}.bind(this))),0===this.shardChoices_.length){var f=c.createUuid(),g=this.makeShardIDFromSeed_(f);this.shardChoices_.push({shardSeed:f,shardID:g,displayName:e.myPrivateNetwork()})}1!==this.shardChoices_.length||this.selectedShardID_||this.setShardID(this.shardChoices_[0].shardID)},m.prototype.makeShardIDFromSeed_=function(a){return("ns_"+this.levelKey_+"_"+a).substr(0,48)},m.prototype.getShareLink=function(){if(!this.displayName_)return"";var a=d.find(this.shardChoices_,function(a){return a.shardID===this.selectedShardID_}.bind(this));if(a){var b=document.location.protocol+"//"+document.location.host+document.location.pathname;return b+"?s="+a.shardSeed}return""}},{"../utils":318,"./NetSimClientNode":190,"./NetSimGlobals":203,"./NetSimLogger":210,"./NetSimNodeFactory":218,"./NetSimRemoteNodeSelectionPanel":226,"./NetSimRouterNode":229,"./NetSimShardSelectionPanel":238,"./locale":260}],238:[function(a,b){"use strict";var c=a("../utils"),d=a("./locale"),e=a("./NetSimShardSelectionPanel.html.ejs"),f=a("./NetSimPanel"),g=a("../constants").KeyCodes,h="",i=b.exports=function(a,b,e){this.displayName_=b.displayName,this.shardChoices_=c.valueOr(b.shardChoices,[]),this.selectedShardID_=c.valueOr(b.selectedShardID,h),this.setNameCallback_=e.setNameCallback,this.setShardCallback_=e.setShardCallback,f.call(this,a,{className:"netsim-shard-selection-panel",panelTitle:d.pickASection(),userToggleable:!1})};i.inherits(f),i.prototype.render=function(){i.superPrototype.render.call(this);var a=$(e({displayName:this.displayName_,selectedShardID:this.selectedShardID_,shardChoices:this.shardChoices_,SELECTOR_NONE_VALUE:h}));this.getBody().html(a);var b=this.getBody().find("#netsim-lobby-name");b.keyup(this.onNameKeyUp_.bind(this));var c=this.getBody().find("#netsim-lobby-set-name-button");c.click(this.setNameButtonClick_.bind(this));var d=this.getBody().find("#netsim-shard-select");d.change(this.onShardSelectChange_.bind(this)),d.keyup(this.onShardSelectKeyUp_.bind(this));var f=this.getBody().find("#netsim-shard-confirm-button");f.click(this.setShardButtonClick_.bind(this)),0===this.displayName_.length?b.focus():this.selectedShardID_===h&&d.focus()},i.prototype.onNameKeyUp_=function(a){var b=a.target.value,c=this.getBody().find("#netsim-lobby-set-name-button");c.attr("disabled",0===b.length),b.length>0&&a.which===g.ENTER&&this.setNameButtonClick_()},i.prototype.setNameButtonClick_=function(){this.setNameCallback_(this.getBody().find("#netsim-lobby-name").val())},i.prototype.onShardSelectChange_=function(a){var b=a.target.value,c=this.getBody().find("#netsim-shard-confirm-button");c.attr("disabled",!b||b===h)},i.prototype.onShardSelectKeyUp_=function(a){var b=a.target.value;b&&b!==h&&a.which===g.ENTER&&this.setShardButtonClick_()},i.prototype.setShardButtonClick_=function(){this.setShardCallback_(this.getBody().find("#netsim-shard-select").val())}},{"../constants":107,"../utils":318,"./NetSimPanel":223,"./NetSimShardSelectionPanel.html.ejs":237,"./locale":260}],237:[function(require,module,exports){module.exports=function(){var t=function anonymous(locals,filters,escape){escape=escape||function(a){return String(a).replace(/&(?!\w+;)/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")};var buf=[];with(locals||{})!function(){buf.push("");var a=require("./locale");if(buf.push('\n<div class="content-wrap">\n  <div class="field-box display-name-control">\n    <label for="netsim-lobby-name">',escape(a.myName()),'</label>\n    <input id="netsim-lobby-name" type="text" value="',escape(displayName),'" '),displayName.length>0&&buf.push("disabled"),buf.push(" />\n    "),0===displayName.length&&buf.push('\n      <input id="netsim-lobby-set-name-button" type="button" value="',escape(a.setName()),'" disabled />\n    '),buf.push("\n  </div>\n  "),displayName.length>0){buf.push('\n    <div class="field-box shard-control">\n      <label for="netsim-shard-select">',escape(a.mySection()),'</label>\n      <select id="netsim-shard-select" '),selectedShardID&&buf.push("disabled"),buf.push('>\n        <option value="',escape(SELECTOR_NONE_VALUE),'">',escape(a.dropdownPickOne()),"</option>\n        ");var b=!1;shardChoices.forEach(function(a){var c="";a.shardID===selectedShardID&&(c="selected",b=!0),buf.push('\n              <option value="',escape(a.shardID),'" ',escape(c),">",escape(a.displayName),"</option>\n            ")}),buf.push("\n      </select>\n      "),selectedShardID||(buf.push('\n        <input id="netsim-shard-confirm-button" type="button" value="',escape(a.joinSection()),'" '),b||buf.push("disabled"),buf.push(" />\n      ")),buf.push("\n    </div>\n  ")}buf.push('\n  <div class="clearfix"></div>\n</div>\n')}();return buf.join("")};return function(a){return t(a,require("ejs").filters)}}()},{"./locale":260,ejs:491}],226:[function(a,b){"use strict";var c=a("../utils"),d=c.getLodash(),e=a("./locale"),f=a("./NetSimPanel"),g=a("./NetSimRemoteNodeSelectionPanel.html.ejs"),h=a("./NetSimConstants").NodeType,i=a("./NetSimGlobals"),j=b.exports=function(a,b,c){this.nodesOnShard_=b.nodesOnShard,this.incomingConnectionNodes_=b.incomingConnectionNodes,this.remoteNode_=b.remoteNode,this.myNodeID_=b.myNodeID,this.addRouterCallback_=c.addRouterCallback,this.cancelButtonCallback_=c.cancelButtonCallback,this.joinButtonCallback_=c.joinButtonCallback,f.call(this,a,{className:"netsim-lobby-panel",panelTitle:this.getLocalizedPanelTitle(),userToggleable:!1})};j.inherits(f),j.prototype.render=function(){var a=$("#reference_area").first().clone(!0);j.superPrototype.render.call(this);var b=$(g({controller:this,nodesOnShard:this.nodesOnShard_,incomingConnectionNodes:this.incomingConnectionNodes_,remoteNode:this.remoteNode_}));this.getBody().html(b),this.getBody().find(".instructions").append(a),this.addRouterButton_=this.getBody().find("#netsim-lobby-add-router"),this.addRouterButton_.click(this.addRouterCallback_),this.getBody().find(".join-button").click(this.onJoinClick_.bind(this)),this.getBody().find(".accept-button").click(this.onJoinClick_.bind(this)),this.getBody().find(".cancel-button").click(this.cancelButtonCallback_)
},j.prototype.getLocalizedPanelTitle=function(){var a=i.getLevelConfig();return a.canConnectToClients&&a.canConnectToRouters?e.connectToANode():a.canConnectToClients?e.connectToAPeer():a.canConnectToRouters?a.broadcastMode?e.connectToARoom():e.connectToARouter():e.connectToANode()},j.prototype.getLocalizedLobbyInstructions=function(){var a=i.getLevelConfig();return a.canConnectToClients&&a.canConnectToRouters?e.lobbyInstructionsGeneral():a.canConnectToClients?e.lobbyInstructionsForPeers():a.canConnectToRouters?a.broadcastMode?e.lobbyInstructionsForRooms():e.lobbyInstructionsForRouters():e.lobbyInstructionsGeneral()},j.prototype.onJoinClick_=function(a){var b=$(a.target);if(!b.is("[disabled]")){var c=b.data("nodeId"),e=d.find(this.nodesOnShard_,function(a){return a.entityID===c});this.joinButtonCallback_(e)}},j.prototype.isMyNode=function(a){return this.myNodeID_===a.entityID},j.prototype.canConnectToNode=function(a){if(this.isMyNode(a))return!1;var b=a.getNodeType()===h.CLIENT,c=a.getNodeType()===h.ROUTER;if(c&&a.isFull())return!1;var d=i.getLevelConfig(),e=d.canConnectToClients,f=d.canConnectToRouters;return b&&e||c&&f},j.prototype.hasOutgoingRequest=function(){return!!this.remoteNode_},j.prototype.shouldShowNode=function(a){var b=i.getLevelConfig(),c=a.getNodeType()===h.CLIENT,d=a.getNodeType()===h.ROUTER,e=b.showClientsInLobby,f=b.showRoutersInLobby;return c&&e||d&&f}},{"../utils":318,"./NetSimConstants":191,"./NetSimGlobals":203,"./NetSimPanel":223,"./NetSimRemoteNodeSelectionPanel.html.ejs":225,"./locale":260}],225:[function(require,module,exports){module.exports=function(){var t=function anonymous(locals,filters,escape){escape=escape||function(a){return String(a).replace(/&(?!\w+;)/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")};var buf=[];with(locals||{})!function(){function a(a,b,c,d){var f=e.valueOr(c,[]);f.push("netsim-button"),f.push("large-button"),d=e.valueOr(d,{});var g='<span class="'+f.join(" ")+'" ';b&&(g+='id="'+b+'" ');for(var h in d)d.hasOwnProperty(h)&&(g+=h+'="'+d[h]+'" ');return g+=">"+a+"</span>"}function b(a){buf.push('\n    <tr>\n      <th colspan="3">',escape(a),"</th>\n    </tr>\n  ")}function c(a){a=e.valueOr(a,""),buf.push('\n    <tr>\n      <td colspan="3" class="empty-row">',a,"</td>\n    </tr>\n  ")}function d(b,c,d,e){buf.push("\n    <tr>\n      <td nowrap>",escape(b.displayName)," <small>(",escape(b.hostname),")</small></td>\n      <td>",c,'</td>\n      <td class="button-column">\n        ');var f="";"join-button"===d?f=a(g.buttonJoin(),void 0,[d,e],{"data-node-id":b.nodeID}):"accept-button"===d?f=a(g.buttonAccept(),void 0,[d,e],{"data-node-id":b.nodeID}):"cancel-button"===d?f=a(g.buttonCancel(),void 0,[d,e,"secondary"],{"data-node-id":b.nodeID}):"full-button"===d&&(f=a(g.buttonFull(),void 0,[d,e],{disabled:"disabled"})),buf.push("\n        ",f,"\n      </td>\n    </tr>\n  ")}buf.push("");var e=require("../utils"),f=e.getLodash(),g=require("./locale"),h=require("./NetSimGlobals"),i=require("./NetSimConstants").NodeType,j=h.getAssetUrlFunction(),k=h.getLevelConfig(),l=function(a){return void 0===f.find(incomingConnectionNodes,function(b){return b.entityID===a.entityID})},m=function(a){return!remoteNode||remoteNode.entityID!==a.entityID},n=function(a){var b=a.getNodeType()===i.ROUTER?["router-row"]:["user-row"];return controller.isMyNode(a)&&b.push("own-row"),{nodeID:a.entityID,classAttr:b.join(" "),displayName:a.getDisplayName(),hostname:a.getHostname(),status:a.getStatus(),isFull:a.getNodeType()===i.ROUTER&&a.isFull(),canConnectToNode:controller.canConnectToNode(a)}},o=function(a,b){return a.displayName>b.displayName?1:-1},p=nodesOnShard.filter(controller.shouldShowNode.bind(controller)).filter(l).filter(m).map(n).sort(o),q=incomingConnectionNodes.filter(controller.shouldShowNode.bind(controller)).filter(m).map(n).sort(o),r=(remoteNode?[remoteNode]:[]).filter(controller.shouldShowNode.bind(controller)).map(n);buf.push('\n<div class="content-wrap">\n  <div class="instructions">',escape(controller.getLocalizedLobbyInstructions()),'</div>\n  <div class="controls">\n    <table>\n\n      '),r.length>0&&(b(g.outgoingConnectionRequests()),r.forEach(function(a){var b=g.lobbyStatusWaitingForOther({spinner:'<img src="'+j("media/netsim/loading.gif")+'" />',otherName:a.displayName,otherStatus:a.status});d(a,b,"cancel-button",a.classAttr)}),c()),q.length>0&&(b(g.incomingConnectionRequests()),q.forEach(function(a){var b;!controller.hasOutgoingRequest()&&a.canConnectToNode&&(b="accept-button");var c=g.lobbyStatusWaitingForYou();d(a,c,b,a.classAttr)}),c()),b(g.lobby()),p.forEach(function(a){var b;controller.hasOutgoingRequest()||(a.isFull?b="full-button":a.canConnectToNode&&(b="join-button")),d(a,a.status,b,a.classAttr)});var s=[];if(!controller.hasOutgoingRequest()&&k.showAddRouterButton){var t=k.broadcastMode?g.addRoom():g.addRouter();s.push(a(t,"netsim-lobby-add-router",["secondary"]))}k.showLogBrowserButton&&s.push(a(g.logBrowserButton(),"show-router-log-modal",["secondary"],{"data-toggle":"modal","data-target":"#router-log-modal"})),s.length>0?c(s.join(" ")):0===p.length&&c(g.lobbyIsEmpty()),buf.push('\n\n    </table>\n  </div>\n  <div class="clear"></div>\n</div>\n')}();return buf.join("")};return function(a){return t(a,require("ejs").filters)}}()},{"../utils":318,"./NetSimConstants":191,"./NetSimGlobals":203,"./locale":260,ejs:491}],218:[function(a,b){"use strict";var c=a("./NetSimConstants"),d=c.NodeType,e=b.exports;e.nodesFromRows=function(a,b){return b.map(e.nodeFromRow.bind(this,a))},e.nodeFromRow=function(b,c){if(c.type===d.CLIENT){var e=a("./NetSimClientNode");return new e(b,c)}if(c.type===d.ROUTER){var f=a("./NetSimRouterNode");return new f(b,c)}throw new Error("Unable to map row to node.")}},{"./NetSimClientNode":190,"./NetSimConstants":191,"./NetSimRouterNode":229}],229:[function(a,b){"use strict";var c=a("../utils"),d=a("./locale"),e=a("./NetSimConstants"),f=a("./NetSimUtils"),g=a("./NetSimNode"),h=a("./NetSimEntity"),i=a("./NetSimLogEntry"),j=a("./NetSimLogger"),k=a("./NetSimWire"),l=a("./NetSimMessage"),m=a("../ObservableEvent"),n=a("./Packet"),o=a("./DataConverters"),p=a("./NetSimNodeFactory"),q=c.getLodash(),r=f.serializeNumber,s=f.deserializeNumber,t=o.asciiToBinary,u=e.DnsMode,v=e.NodeType,w=e.BITS_PER_BYTE,x=j.getSingleton(),y=a("./NetSimGlobals"),z=6,A=0,B=15,C="dns",D="NOT_FOUND",E=6e5,F=4096,G=b.exports=function(a,b){b=void 0!==b?b:{},g.call(this,a,b);var d=y.getLevelConfig();this.creationTime=c.valueOr(b.creationTime,Date.now()),this.dnsMode=c.valueOr(b.dnsMode,d.defaultDnsMode),this.dnsNodeID=b.dnsNodeID,this.bandwidth=c.valueOr(s(b.bandwidth),d.defaultRouterBandwidth),this.memory=c.valueOr(s(b.memory),d.defaultRouterMemory),this.randomDropChance=c.valueOr(b.randomDropChance,d.defaultRandomDropChance),this.simulateForSender_=void 0,this.simulationTime_=0,this.packetSpec_=[],this.stateCache_={},this.stateChange=new m,this.statsChange=new m,this.myWireRowCache_=[],this.wiresChange=new m,this.myLogRowCache_=[],this.logChange=new m,this.isRouterProcessing_=!1,this.routerQueueCache_=[],this.localRoutingSchedule_=[],this.isAutoDnsProcessing_=!1,this.autoDnsQueue_=[]};G.inherits(g),G.create=function(a,b){h.create(G,a,b)},G.get=function(a,b,c){h.get(G,a,b,c)},G.prototype.buildRow=function(){return c.extend(G.superPrototype.buildRow.call(this),{creationTime:this.creationTime,bandwidth:r(this.bandwidth),memory:r(this.memory),dnsMode:this.dnsMode,dnsNodeID:this.dnsNodeID,randomDropChance:this.randomDropChance})},G.prototype.onMyStateChange_=function(a){this.creationTime=a.creationTime,this.bandwidth=s(a.bandwidth),this.memory=s(a.memory),this.dnsMode=a.dnsMode,this.dnsNodeID=a.dnsNodeID,this.randomDropChance=a.randomDropChance,this.stateChange.notifyObservers(this)},G.prototype.tick=function(a){this.simulationTime_=a.time,this.routeOverdueMessages_(a),this.dnsMode===u.AUTOMATIC&&this.tickAutoDns_(a)},G.prototype.routeOverdueMessages_=function(a){if(!this.isRouterProcessing_){var b=[],c=[];this.localRoutingSchedule_.forEach(function(d){a.time>=d.completionTime?(d.beingRouted=!0,b.push(d.message)):a.time>=d.expirationTime&&(d.beingRouted=!0,c.push(d.message))}),b.length+c.length!==0&&(this.isRouterProcessing_=!0,h.destroyEntities(c,function(){this.routeMessages_(b,function(){this.localRoutingSchedule_=this.localRoutingSchedule_.filter(function(a){return!a.beingRouted}),this.isRouterProcessing_=!1}.bind(this))}.bind(this)))}},G.prototype.recalculateSchedule=function(){for(var a,b,c=0,d=this.simulationTime_,e=0;e<this.routerQueueCache_.length;e++)a=this.routerQueueCache_[e],c+=a.payload.length,b=this.calculateProcessingDurationForMessage_(a),d+=b,this.localSimulationOwnsMessage_(a)&&c<=this.memory&&this.scheduleRoutingForMessage(a,d)},G.prototype.scheduleRoutingForMessage=function(a,b){var c=q.find(this.localRoutingSchedule_,function(b){return b.message.entityID===a.entityID});c?b<c.completionTime&&(c.completionTime=b):this.addMessageToSchedule_(a,b)},G.prototype.addMessageToSchedule_=function(a,b){this.localRoutingSchedule_.push({message:a,completionTime:b,expirationTime:this.simulationTime_+E,beingRouted:!1})},G.prototype.removeMessageFromSchedule_=function(a){for(var b,c=0;c<this.localRoutingSchedule_.length;c++)this.localRoutingSchedule_[c].message.entityID===a.entityID&&(b=c);void 0!==b&&this.localRoutingSchedule_.splice(b,1)},G.prototype.tickAutoDns_=function(){if(!this.isAutoDnsProcessing_){var a=this.autoDnsQueue_.filter(this.localSimulationOwnsMessage_.bind(this));0!==a.length&&(this.isAutoDnsProcessing_=!0,this.processAutoDnsRequests_(a,function(){this.isAutoDnsProcessing_=!1}.bind(this)))}},G.prototype.getDisplayName=function(){return y.getLevelConfig().broadcastMode?d.roomNumberX({x:this.getRouterNumber()}):d.routerNumberX({x:this.getRouterNumber()})},G.prototype.getRouterNumber=function(){var a=y.getLevelConfig().addressFormat,b=a.split(/\D+/).filter(function(a){return a.length>0}).map(function(a){return parseInt(a,10)}).reverse();if(b.length>=2){var c=Math.pow(2,b[1]);return this.entityID%c}return this.entityID},G.prototype.getAddress=function(){return this.makeLocalNetworkAddress_(A)},G.prototype.getAutoDnsAddress=function(){return this.makeLocalNetworkAddress_(B)},G.prototype.getHostname=function(){return this.getDisplayName().replace(/[^\w\d]/g,"").toLowerCase()},G.prototype.getNodeType=function(){return v.ROUTER},G.prototype.getStatus=function(){var a=y.getLevelConfig(),b=this.shard_.wireTable.readAll(),c=b.filter(function(a){return a.remoteNodeID===this.entityID},this);if(0===c.length)return a.broadcastMode?d.roomStatusNoConnections({maximumClients:z}):d.routerStatusNoConnections({maximumClients:z});var e=this.shard_.nodeTable.readAll(),f=c.map(function(a){var b=q.find(e,function(b){return b.id===a.localNodeID});return b?b.name:d.unknownNode()}).join(", ");return c.length>=z?a.broadcastMode?d.roomStatusFull({connectedClients:f}):d.routerStatusFull({connectedClients:f}):a.broadcastMode?d.roomStatus({connectedClients:f,remainingSpace:z-c.length}):d.routerStatus({connectedClients:f,remainingSpace:z-c.length})},G.prototype.isFull=function(){var a=this.shard_.wireTable.readAll(),b=a.filter(function(a){return a.remoteNodeID===this.entityID},this);return b.length>=z},G.prototype.validatePacketSpec_=function(a){y.getLevelConfig().broadcastMode||(a.some(function(a){return a===n.HeaderType.TO_ADDRESS})||x.warn("Packet specification does not have a toAddress field."),a.some(function(a){return a===n.HeaderType.FROM_ADDRESS})||x.warn("Packet specification does not have a fromAddress field."))},G.prototype.initializeSimulation=function(a){if(this.simulateForSender_=a,this.packetSpec_=y.getLevelConfig().routerExpectsPacketHeader,this.validatePacketSpec_(this.packetSpec_),void 0!==a){var b=this.shard_.nodeTable.tableChange,c=this.onNodeTableChange_.bind(this);this.nodeChangeKey_=b.register(c);var d=this.shard_.wireTable.tableChange,e=this.onWireTableChange_.bind(this);this.wireChangeKey_=d.register(e);var f=this.shard_.logTable.tableChange,g=this.onLogTableChange_.bind(this);this.logChangeKey_=f.register(g);var h=this.shard_.messageTable.tableChange,i=this.onMessageTableChange_.bind(this);this.newMessageEventKey_=h.register(i);var j=this.shard_.wireTable.readAll();this.onWireTableChange_(j);var k=this.shard_.logTable.readAll();this.onLogTableChange_(k)}},G.prototype.stopSimulation=function(){if(void 0!==this.nodeChangeKey_){var a=this.shard_.nodeTable.tableChange;a.unregister(this.nodeChangeKey_),this.nodeChangeKey_=void 0}if(void 0!==this.wireChangeKey_){var b=this.shard_.wireTable.tableChange;b.unregister(this.wireChangeKey_),this.wireChangeKey_=void 0}if(void 0!==this.logChangeKey_){var c=this.shard_.logTable.tableChange;c.unregister(this.logChangeKey_),this.logChangeKey_=void 0}if(void 0!==this.newMessageEventKey_){var d=this.shard_.messageTable.tableChange;d.unregister(this.newMessageEventKey_),this.newMessageEventKey_=void 0}},G.prototype.setDnsMode=function(a){this.dnsMode!==a&&(this.dnsMode===u.NONE?this.dnsNodeID=void 0:this.dnsMode===u.AUTOMATIC&&(this.dnsNodeID=B),this.dnsMode=a,this.update())},G.prototype.setBandwidth=function(a){this.bandwidth!==a&&(this.bandwidth=a,this.recalculateSchedule(),this.update())},G.prototype.setMemory=function(a){this.memory!==a&&(this.memory=a,this.enforceMemoryLimit_(),this.update())},G.prototype.getConnections=function(a){a=a||function(){};var b=this.shard_,c=b.wireTable,d=this.entityID;c.refresh().fail(function(b){a(b,[])}).done(function(){var e=c.readAll().map(function(a){return new k(b,a)}).filter(function(a){return a.remoteNodeID===d});a(null,e)}.bind(this))},G.prototype.countConnections=function(a){a=a||function(){},this.getConnections(function(b,c){a(b,c.length)})},G.prototype.log=function(a,b){i.create(this.shard_,this.entityID,a,b,function(){})};var H=function(a,b){return a.some(function(a){return a===b})};G.prototype.acceptConnection=function(a,b){var c=this;this.countConnections(function(a,d){return a?void b(a,!1):d>z?void b(new Error("Too many connections"),!1):void c.update(function(a){b(a,null===a)})})},G.prototype.requestAddress=function(a,b,c){c=c||function(){};var d=this;this.getConnections(function(e,f){if(e)return void c(e);for(var g,h=f.filter(function(a){return void 0!==a.localAddress}).map(function(a){return a.localAddress}),i=y.getLevelConfig().addressFormat,j=i.split(/\D+/).filter(function(a){return a.length>0}).map(function(a){return parseInt(a,10)}).reverse(),k=Math.min(Math.pow(2,j[0]),F),l=[],m=0;k>m;m++)g=this.makeLocalNetworkAddress_(m),g===this.getAddress()||g===this.getAutoDnsAddress()||H(h,g)||l.push(g);var n=y.randomIntInRange(0,l.length);a.localAddress=l[n],a.localHostname=b,a.remoteAddress=d.getAddress(),a.remoteHostname=d.getHostname(),a.update(c),x.info(this.getDisplayName()+": Assigned address "+a.localAddress+" to host "+a.localHostname)}.bind(this))},G.prototype.makeLocalNetworkAddress_=function(a){var b=y.getLevelConfig().addressFormat,c=!1,d=!1;return b.split(/(\D+)/).reverse().map(function(b){var e=parseInt(b,10);return isNaN(e)?b:c?d?"0":(d=!0,this.getRouterNumber().toString()):(c=!0,a.toString())}.bind(this)).reverse().join("")},G.prototype.getAddressTable=function(){var a=this.myWireRowCache_.map(function(a){return{hostname:a.localHostname,address:a.localAddress,isLocal:a.localNodeID===this.simulateForSender_,isDnsNode:a.localNodeID===this.dnsNodeID}}.bind(this));return this.dnsMode===u.AUTOMATIC&&a.push({hostname:C,address:this.getAutoDnsAddress(),isLocal:!1,isDnsNode:!0}),a},G.prototype.getAddressForNodeID_=function(a){var b=q.find(this.myWireRowCache_,function(b){return b.localNodeID===a});return void 0!==b?b.localAddress:void 0},G.prototype.getAddressForHostname_=function(a){if(a===this.getHostname())return this.getAddress();if(this.dnsMode===u.AUTOMATIC&&a===C)return this.getAutoDnsAddress();var b=q.find(this.myWireRowCache_,function(b){return b.localHostname===a});if(void 0!==b)return b.localAddress;if(!y.getLevelConfig().connectedRouters)return void 0;var c=p.nodesFromRows(this.shard_,this.shard_.nodeTable.readAll()),d=q.find(c,function(b){return b.getHostname()===a});return d?d.getAddress():void 0},G.prototype.getNodeIDForAddress_=function(a){if(a===this.getAddress())return this.entityID;if(this.dnsMode===u.AUTOMATIC&&a===this.getAutoDnsAddress())return this.entityID;var b=q.find(this.myWireRowCache_,function(b){return b.localAddress===a});return void 0!==b?b.localNodeID:void 0},G.prototype.getNextNodeTowardAddress_=function(a,b,d){if(a===this.getAddress())return this;if(this.dnsMode===u.AUTOMATIC&&a===this.getAutoDnsAddress())return this;var e=p.nodesFromRows(this.shard_,this.shard_.nodeTable.readAll()),f=q.find(this.myWireRowCache_,function(b){return b.localAddress===a});if(void 0!==f){var g=q.find(e,function(a){return a.entityID===f.localNodeID});if(void 0!==g)return g}var h=y.getLevelConfig();if(!h.connectedRouters)return null;var i=q.find(e,function(b){return a===b.getAddress()||b.getNodeType()===v.ROUTER&&a===b.getAutoDnsAddress()});if(!i)return null;var j=null;if(i.getNodeType()===v.ROUTER)j=i;else{var k=i.getOutgoingWire();k&&(j=c.valueOr(q.find(e,function(a){return a.entityID===k.remoteNodeID}),null))}if(!j)return null;if(b>0){var l=e.filter(function(a){return a.getNodeType()===v.ROUTER&&a.entityID!==j.entityID&&a.entityID!==this.entityID&&!d.some(function(b){return a.entityID===b})},this);if(l.length>0)return y.randomPickOne(l)}return j},G.prototype.onNodeTableChange_=function(a){var b=q.find(a,function(a){return a.id===this.entityID}.bind(this));void 0!==b&&(q.isEqual(this.stateCache_,b)||(this.stateCache_=b,this.onMyStateChange_(b)))},G.prototype.onWireTableChange_=function(a){var b=a.filter(function(a){return a.remoteNodeID===this.entityID}.bind(this));q.isEqual(this.myWireRowCache_,b)||(this.myWireRowCache_=b,this.wiresChange.notifyObservers())},G.prototype.onLogTableChange_=function(a){var b=a.filter(function(a){return a.nodeID===this.entityID}.bind(this));q.isEqual(this.myLogRowCache_,b)||(this.myLogRowCache_=b,this.logChange.notifyObservers())},G.prototype.getLog=function(){return this.myLogRowCache_.map(function(a){return new i(this.shard_,a,this.packetSpec_)}.bind(this))},G.prototype.getQueuedPacketCount=function(){return this.routerQueueCache_.length},G.prototype.getMemoryInUse=function(){return this.routerQueueCache_.reduce(function(a,b){return a+b.payload.length},0)},G.prototype.getCurrentDataRate=function(){return Math.min(this.getMemoryInUse(),this.bandwidth)},G.prototype.onMessageTableChange_=function(a){if(!this.simulateForSender_)throw new Error("Non-simulating router got message table change notifiction");var b=a.map(function(a){return new l(this.shard_,a)}.bind(this));this.updateRouterQueue_(b),this.dnsMode===u.AUTOMATIC&&this.updateAutoDnsQueue_(b)},G.prototype.updateRouterQueue_=function(a){var b=a.filter(l.isValid).filter(this.isMessageToRouter_.bind(this));q.isEqual(this.routerQueueCache_,b)||(x.info(this.getDisplayName()+": Message queue updated (size "+b.length+")"),this.routerQueueCache_=b,this.recalculateSchedule(),this.enforceMemoryLimit_(),this.statsChange.notifyObservers(this))},G.prototype.enforceMemoryLimit_=function(){var a=this.findFirstLocallySimulatedPacketOverMemoryLimit();a&&(this.removeMessageFromSchedule_(a),a.destroy(function(b){b||this.log(a.payload,i.LogStatus.DROPPED)}.bind(this)))},G.prototype.findFirstLocallySimulatedPacketOverMemoryLimit=function(){for(var a,b=0,c=0;c<this.routerQueueCache_.length;c++)if(a=this.routerQueueCache_[c],b+=a.payload.length,b>this.memory&&this.localSimulationOwnsMessage_(a))return a;return null},G.prototype.isMessageToRouter_=function(a){return this.dnsMode===u.AUTOMATIC&&this.isMessageToAutoDns_(a)?!1:a.toNodeID===this.entityID},G.prototype.routeMessages_=function(a,b){return 0===a.length?void b(null):void this.routeMessage_(a[0],function(c,d){return c?void b(c,d):void this.routeMessages_(a.slice(1),b)}.bind(this))},G.prototype.routeMessage_=function(a,b){a.destroy(function(c,d){if(c)return void b(c,d);if(this.randomDropChance>0&&y.random()<=this.randomDropChance)return this.log(a.payload,i.LogStatus.DROPPED),void b(null);var e=y.getLevelConfig();e.broadcastMode?this.forwardMessageToAll_(a,b):this.forwardMessageToRecipient_(a,b)}.bind(this))},G.prototype.forwardMessageToAll_=function(a,b){var c=this.myWireRowCache_.map(function(a){return a.localNodeID});this.forwardMessageToNodeIDs_(a,c,function(c,d){c?this.log(a.payload,i.LogStatus.DROPPED):this.log(a.payload,i.LogStatus.SUCCESS),b(c,d)}.bind(this))},G.prototype.forwardMessageToNodeIDs_=function(a,b,c){if(0===b.length)return void c(null);var d=b[0];l.send(this.shard_,{fromNodeID:this.entityID,toNodeID:d,simulatedBy:d,payload:a.payload},function(d){return d?void c(d):void this.forwardMessageToNodeIDs_(a,b.slice(1),c)}.bind(this))},G.prototype.forwardMessageToRecipient_=function(a,b){var c,d=this.entityID;try{var e=new n(this.packetSpec_,a.payload);c=e.getHeaderAsAddressString(n.HeaderType.TO_ADDRESS)}catch(f){return x.warn("Packet not readable by router"),this.log(a.payload,i.LogStatus.DROPPED),void b(null)}var g=this.getNextNodeTowardAddress_(c,a.extraHopsRemaining,a.visitedNodeIDs);if(null===g)return x.warn("Destination address not reachable"),this.log(a.payload,i.LogStatus.DROPPED),void b(null);if(g===this&&c===this.getAddress())return x.warn("Packet stopped at router."),this.log(a.payload,i.LogStatus.SUCCESS),void b(null);var h=a.simulatedBy;g.getNodeType()===v.CLIENT&&(h=g.entityID),l.send(this.shard_,{fromNodeID:d,toNodeID:g.entityID,simulatedBy:h,payload:a.payload,extraHopsRemaining:Math.max(0,a.extraHopsRemaining-1),visitedNodeIDs:a.visitedNodeIDs.concat(this.entityID)},function(c,d){this.log(a.payload,i.LogStatus.SUCCESS),b(c,d)}.bind(this))},G.prototype.localSimulationOwnsMessage_=function(a){return this.simulateForSender_&&a.simulatedBy===this.simulateForSender_},G.prototype.calculateProcessingDurationForMessage_=function(a){return 1/0===this.bandwidth?0:1e3*a.payload.length/this.bandwidth},G.prototype.updateAutoDnsQueue_=function(a){var b=a.filter(this.isMessageToAutoDns_.bind(this));q.isEqual(this.autoDnsQueue_,b)||(this.autoDnsQueue_=b)},G.prototype.isMessageToAutoDns_=function(a){var b,c;try{b=new n(this.packetSpec_,a.payload),c=b.getHeaderAsAddressString(n.HeaderType.TO_ADDRESS)}catch(d){return x.warn("Packet not readable by auto-DNS: "+d),!1}return a.toNodeID===this.entityID&&a.fromNodeID===this.entityID&&c===this.getAutoDnsAddress()},G.prototype.processAutoDnsRequests_=function(a,b){h.destroyEntities(a,function(c,d){return c?void b(c,d):void this.generateDnsResponses_(a,b)}.bind(this))},G.prototype.generateDnsResponses_=function(a,b){return 0===a.length?void b(null):void this.generateDnsResponse_(a[0],function(c,d){return c?void b(c,d):void this.generateDnsResponses_(a.slice(1),b)}.bind(this))},G.prototype.generateDnsResponse_=function(a,b){var e,f,g,h,i,j,k=this.entityID,m=this.entityID;try{e=new n(this.packetSpec_,a.payload),f=e.getHeaderAsAddressString(n.HeaderType.FROM_ADDRESS),g=e.getBodyAsAscii(w)}catch(o){return void b(o)}var p=g.match(/GET\s+(\S.*)/);if(null!==p){var q=p[1].split(/\s+/).map(function(a){var b=this.getAddressForHostname_(a);return a+":"+c.valueOr(b,D)}.bind(this));i=q.join(" ")}else i=d.autoDnsUsageMessage();h={fromAddress:this.getAutoDnsAddress(),toAddress:f,packetIndex:1,packetCount:1},j=e.encoder.concatenateBinary(e.encoder.makeBinaryHeaders(h),t(i,w)),l.send(this.shard_,{fromNodeID:m,toNodeID:k,simulatedBy:a.simulatedBy,payload:j},b)}},{"../ObservableEvent":2,"../utils":318,"./DataConverters":183,"./NetSimConstants":191,"./NetSimEntity":202,"./NetSimGlobals":203,"./NetSimLogEntry":206,"./NetSimLogger":210,"./NetSimMessage":212,"./NetSimNode":217,"./NetSimNodeFactory":218,"./NetSimUtils":246,"./NetSimWire":254,"./Packet":255,"./locale":260}],212:[function(a,b){"use strict";var c=a("../utils"),d=a("./NetSimEntity"),e=a("./DataConverters"),f=e.base64ToBinary,g=e.binaryToBase64,h=b.exports=function(a,b){b=void 0!==b?b:{},d.call(this,a,b),this.fromNodeID=b.fromNodeID,this.toNodeID=b.toNodeID,this.simulatedBy=b.simulatedBy;var e=b.base64Payload;this.payload=e?f(e.string,e.len):"",this.extraHopsRemaining=c.valueOr(b.extraHopsRemaining,0),this.visitedNodeIDs=c.valueOr(b.visitedNodeIDs,[])};h.inherits(d),h.send=function(a,b,d){var e=new h(a);e.fromNodeID=b.fromNodeID,e.toNodeID=b.toNodeID,e.simulatedBy=b.simulatedBy,e.payload=b.payload,e.extraHopsRemaining=c.valueOr(b.extraHopsRemaining,0),e.visitedNodeIDs=c.valueOr(b.visitedNodeIDs,[]);try{e.getTable().create(e.buildRow(),d)}catch(f){d(f,null)}},h.isValid=function(a){return/^[01]*$/.test(a.payload)},h.prototype.getTable=function(){return this.shard_.messageTable},h.prototype.buildRow=function(){return{fromNodeID:this.fromNodeID,toNodeID:this.toNodeID,simulatedBy:this.simulatedBy,base64Payload:g(this.payload),extraHopsRemaining:this.extraHopsRemaining,visitedNodeIDs:this.visitedNodeIDs}}},{"../utils":318,"./DataConverters":183,"./NetSimEntity":202}],206:[function(a,b){"use strict";var c=a("moment"),d=a("../utils"),e=d.getLodash(),f=a("./locale"),g=a("./NetSimEntity"),h=a("./Packet"),i=a("./NetSimNodeFactory"),j=a("./DataConverters"),k=j.formatBinary,l=j.base64ToBinary,m=j.binaryToBase64,n=a("./NetSimConstants").BITS_PER_BYTE,o=b.exports=function(a,b,c){b=void 0!==b?b:{},g.call(this,a,b),this.nodeID=b.nodeID;var e=b.base64Binary;this.binary=e?l(e.string,e.len):"",this.status=d.valueOr(b.status,o.LogStatus.SUCCESS),this.packet_=new h(d.valueOr(c,[]),this.binary),this.timestamp=void 0!==b.timestamp?b.timestamp:Date.now()};o.inherits(g),o.LogStatus={SUCCESS:"success",DROPPED:"dropped"},o.prototype.getTable=function(){return this.shard_.logTable},o.prototype.buildRow=function(){return{nodeID:this.nodeID,base64Binary:m(this.binary),status:this.status,timestamp:this.timestamp}},o.create=function(a,b,c,d,e){var f=new o(a);f.nodeID=b,f.binary=c,f.status=d,f.timestamp=Date.now(),f.getTable().create(f.buildRow(),function(b,c){return b?void e(b,null):void e(b,new o(a,c))})},o.prototype.getHeaderField=function(a){try{return h.isAddressField(a)?this.packet_.getHeaderAsAddressString(a):this.packet_.getHeaderAsInt(a).toString()}catch(b){return""}},o.prototype.getMessageBinary=function(){return k(this.packet_.getBodyAsBinary(),n)},o.prototype.getMessageAscii=function(){return this.packet_.getBodyAsAscii(n)},o.prototype.getLocalizedStatus=function(){return this.status===o.LogStatus.SUCCESS?f.logStatus_success():this.status===o.LogStatus.DROPPED?f.logStatus_dropped():""},o.prototype.getLocalizedPacketInfo=function(){return f.xOfYPackets({x:this.getHeaderField(h.HeaderType.PACKET_INDEX),y:this.getHeaderField(h.HeaderType.PACKET_COUNT)})},o.prototype.getTimeString=function(){return c(this.timestamp).format("h:mm:ss.SSS A")},o.prototype.getOriginNode=function(){var a=this.shard_.nodeTable.readAll(),b=e.find(a,function(a){return a.id===this.nodeID}.bind(this));return b?i.nodeFromRow(this.shard_,b):null}},{"../utils":318,"./DataConverters":183,"./NetSimConstants":191,"./NetSimEntity":202,"./NetSimNodeFactory":218,"./Packet":255,"./locale":260,moment:495}],495:[function(a,b,c){!function(a,d){"object"==typeof c&&"undefined"!=typeof b?b.exports=d():"function"==typeof define&&define.amd?define(d):a.moment=d()}(this,function(){"use strict";function c(){return Fd.apply(null,arguments)}function d(a){Fd=a}function e(a){return"[object Array]"===Object.prototype.toString.call(a)}function f(a){return a instanceof Date||"[object Date]"===Object.prototype.toString.call(a)}function g(a,b){var c,d=[];for(c=0;c<a.length;++c)d.push(b(a[c],c));return d}function h(a,b){return Object.prototype.hasOwnProperty.call(a,b)}function i(a,b){for(var c in b)h(b,c)&&(a[c]=b[c]);return h(b,"toString")&&(a.toString=b.toString),h(b,"valueOf")&&(a.valueOf=b.valueOf),a}function j(a,b,c,d){return Bb(a,b,c,d,!0).utc()}function k(){return{empty:!1,unusedTokens:[],unusedInput:[],overflow:-2,charsLeftOver:0,nullInput:!1,invalidMonth:null,invalidFormat:!1,userInvalidated:!1,iso:!1}}function l(a){return null==a._pf&&(a._pf=k()),a._pf}function m(a){if(null==a._isValid){var b=l(a);a._isValid=!isNaN(a._d.getTime())&&b.overflow<0&&!b.empty&&!b.invalidMonth&&!b.nullInput&&!b.invalidFormat&&!b.userInvalidated,a._strict&&(a._isValid=a._isValid&&0===b.charsLeftOver&&0===b.unusedTokens.length&&void 0===b.bigHour)}return a._isValid}function n(a){var b=j(0/0);return null!=a?i(l(b),a):l(b).userInvalidated=!0,b}function o(a,b){var c,d,e;if("undefined"!=typeof b._isAMomentObject&&(a._isAMomentObject=b._isAMomentObject),"undefined"!=typeof b._i&&(a._i=b._i),"undefined"!=typeof b._f&&(a._f=b._f),"undefined"!=typeof b._l&&(a._l=b._l),"undefined"!=typeof b._strict&&(a._strict=b._strict),"undefined"!=typeof b._tzm&&(a._tzm=b._tzm),"undefined"!=typeof b._isUTC&&(a._isUTC=b._isUTC),"undefined"!=typeof b._offset&&(a._offset=b._offset),"undefined"!=typeof b._pf&&(a._pf=l(b)),"undefined"!=typeof b._locale&&(a._locale=b._locale),Hd.length>0)for(c in Hd)d=Hd[c],e=b[d],"undefined"!=typeof e&&(a[d]=e);return a}function p(a){o(this,a),this._d=new Date(+a._d),Id===!1&&(Id=!0,c.updateOffset(this),Id=!1)}function q(a){return a instanceof p||null!=a&&null!=a._isAMomentObject}function r(a){var b=+a,c=0;return 0!==b&&isFinite(b)&&(c=b>=0?Math.floor(b):Math.ceil(b)),c}function s(a,b,c){var d,e=Math.min(a.length,b.length),f=Math.abs(a.length-b.length),g=0;for(d=0;e>d;d++)(c&&a[d]!==b[d]||!c&&r(a[d])!==r(b[d]))&&g++;return g+f}function t(){}function u(a){return a?a.toLowerCase().replace("_","-"):a}function v(a){for(var b,c,d,e,f=0;f<a.length;){for(e=u(a[f]).split("-"),b=e.length,c=u(a[f+1]),c=c?c.split("-"):null;b>0;){if(d=w(e.slice(0,b).join("-")))return d;if(c&&c.length>=b&&s(e,c,!0)>=b-1)break;b--}f++}return null}function w(c){var d=null;if(!Jd[c]&&"undefined"!=typeof b&&b&&b.exports)try{d=Gd._abbr,a("./locale/"+c),x(d)}catch(e){}return Jd[c]}function x(a,b){var c;return a&&(c="undefined"==typeof b?z(a):y(a,b),c&&(Gd=c)),Gd._abbr}function y(a,b){return null!==b?(b.abbr=a,Jd[a]||(Jd[a]=new t),Jd[a].set(b),x(a),Jd[a]):(delete Jd[a],null)}function z(a){var b;if(a&&a._locale&&a._locale._abbr&&(a=a._locale._abbr),!a)return Gd;if(!e(a)){if(b=w(a))return b;a=[a]}return v(a)}function A(a,b){var c=a.toLowerCase();Kd[c]=Kd[c+"s"]=Kd[b]=a}function B(a){return"string"==typeof a?Kd[a]||Kd[a.toLowerCase()]:void 0}function C(a){var b,c,d={};for(c in a)h(a,c)&&(b=B(c),b&&(d[b]=a[c]));return d}function D(a,b){return function(d){return null!=d?(F(this,a,d),c.updateOffset(this,b),this):E(this,a)}}function E(a,b){return a._d["get"+(a._isUTC?"UTC":"")+b]()}function F(a,b,c){return a._d["set"+(a._isUTC?"UTC":"")+b](c)}function G(a,b){var c;if("object"==typeof a)for(c in a)this.set(c,a[c]);else if(a=B(a),"function"==typeof this[a])return this[a](b);return this}function H(a,b,c){for(var d=""+Math.abs(a),e=a>=0;d.length<b;)d="0"+d;return(e?c?"+":"":"-")+d}function I(a,b,c,d){var e=d;"string"==typeof d&&(e=function(){return this[d]()}),a&&(Od[a]=e),b&&(Od[b[0]]=function(){return H(e.apply(this,arguments),b[1],b[2])}),c&&(Od[c]=function(){return this.localeData().ordinal(e.apply(this,arguments),a)})}function J(a){return a.match(/\[[\s\S]/)?a.replace(/^\[|\]$/g,""):a.replace(/\\/g,"")}function K(a){var b,c,d=a.match(Ld);for(b=0,c=d.length;c>b;b++)d[b]=Od[d[b]]?Od[d[b]]:J(d[b]);return function(e){var f="";for(b=0;c>b;b++)f+=d[b]instanceof Function?d[b].call(e,a):d[b];return f}}function L(a,b){return a.isValid()?(b=M(b,a.localeData()),Nd[b]||(Nd[b]=K(b)),Nd[b](a)):a.localeData().invalidDate()}function M(a,b){function c(a){return b.longDateFormat(a)||a}var d=5;for(Md.lastIndex=0;d>=0&&Md.test(a);)a=a.replace(Md,c),Md.lastIndex=0,d-=1;return a}function N(a,b,c){be[a]="function"==typeof b?b:function(a){return a&&c?c:b}}function O(a,b){return h(be,a)?be[a](b._strict,b._locale):new RegExp(P(a))}function P(a){return a.replace("\\","").replace(/\\(\[)|\\(\])|\[([^\]\[]*)\]|\\(.)/g,function(a,b,c,d,e){return b||c||d||e}).replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&")
}function Q(a,b){var c,d=b;for("string"==typeof a&&(a=[a]),"number"==typeof b&&(d=function(a,c){c[b]=r(a)}),c=0;c<a.length;c++)ce[a[c]]=d}function R(a,b){Q(a,function(a,c,d,e){d._w=d._w||{},b(a,d._w,d,e)})}function S(a,b,c){null!=b&&h(ce,a)&&ce[a](b,c._a,c,a)}function T(a,b){return new Date(Date.UTC(a,b+1,0)).getUTCDate()}function U(a){return this._months[a.month()]}function V(a){return this._monthsShort[a.month()]}function W(a,b,c){var d,e,f;for(this._monthsParse||(this._monthsParse=[],this._longMonthsParse=[],this._shortMonthsParse=[]),d=0;12>d;d++){if(e=j([2e3,d]),c&&!this._longMonthsParse[d]&&(this._longMonthsParse[d]=new RegExp("^"+this.months(e,"").replace(".","")+"$","i"),this._shortMonthsParse[d]=new RegExp("^"+this.monthsShort(e,"").replace(".","")+"$","i")),c||this._monthsParse[d]||(f="^"+this.months(e,"")+"|^"+this.monthsShort(e,""),this._monthsParse[d]=new RegExp(f.replace(".",""),"i")),c&&"MMMM"===b&&this._longMonthsParse[d].test(a))return d;if(c&&"MMM"===b&&this._shortMonthsParse[d].test(a))return d;if(!c&&this._monthsParse[d].test(a))return d}}function X(a,b){var c;return"string"==typeof b&&(b=a.localeData().monthsParse(b),"number"!=typeof b)?a:(c=Math.min(a.date(),T(a.year(),b)),a._d["set"+(a._isUTC?"UTC":"")+"Month"](b,c),a)}function Y(a){return null!=a?(X(this,a),c.updateOffset(this,!0),this):E(this,"Month")}function Z(){return T(this.year(),this.month())}function $(a){var b,c=a._a;return c&&-2===l(a).overflow&&(b=c[ee]<0||c[ee]>11?ee:c[fe]<1||c[fe]>T(c[de],c[ee])?fe:c[ge]<0||c[ge]>24||24===c[ge]&&(0!==c[he]||0!==c[ie]||0!==c[je])?ge:c[he]<0||c[he]>59?he:c[ie]<0||c[ie]>59?ie:c[je]<0||c[je]>999?je:-1,l(a)._overflowDayOfYear&&(de>b||b>fe)&&(b=fe),l(a).overflow=b),a}function _(a){c.suppressDeprecationWarnings===!1&&"undefined"!=typeof console&&console.warn&&console.warn("Deprecation warning: "+a)}function ab(a,b){var c=!0,d=a+"\n"+(new Error).stack;return i(function(){return c&&(_(d),c=!1),b.apply(this,arguments)},b)}function bb(a,b){me[a]||(_(b),me[a]=!0)}function cb(a){var b,c,d=a._i,e=ne.exec(d);if(e){for(l(a).iso=!0,b=0,c=oe.length;c>b;b++)if(oe[b][1].exec(d)){a._f=oe[b][0]+(e[6]||" ");break}for(b=0,c=pe.length;c>b;b++)if(pe[b][1].exec(d)){a._f+=pe[b][0];break}d.match($d)&&(a._f+="Z"),vb(a)}else a._isValid=!1}function db(a){var b=qe.exec(a._i);return null!==b?void(a._d=new Date(+b[1])):(cb(a),void(a._isValid===!1&&(delete a._isValid,c.createFromInputFallback(a))))}function eb(a,b,c,d,e,f,g){var h=new Date(a,b,c,d,e,f,g);return 1970>a&&h.setFullYear(a),h}function fb(a){var b=new Date(Date.UTC.apply(null,arguments));return 1970>a&&b.setUTCFullYear(a),b}function gb(a){return hb(a)?366:365}function hb(a){return a%4===0&&a%100!==0||a%400===0}function ib(){return hb(this.year())}function jb(a,b,c){var d,e=c-b,f=c-a.day();return f>e&&(f-=7),e-7>f&&(f+=7),d=Cb(a).add(f,"d"),{week:Math.ceil(d.dayOfYear()/7),year:d.year()}}function kb(a){return jb(a,this._week.dow,this._week.doy).week}function lb(){return this._week.dow}function mb(){return this._week.doy}function nb(a){var b=this.localeData().week(this);return null==a?b:this.add(7*(a-b),"d")}function ob(a){var b=jb(this,1,4).week;return null==a?b:this.add(7*(a-b),"d")}function pb(a,b,c,d,e){var f,g,h=fb(a,0,1).getUTCDay();return h=0===h?7:h,c=null!=c?c:e,f=e-h+(h>d?7:0)-(e>h?7:0),g=7*(b-1)+(c-e)+f+1,{year:g>0?a:a-1,dayOfYear:g>0?g:gb(a-1)+g}}function qb(a){var b=Math.round((this.clone().startOf("day")-this.clone().startOf("year"))/864e5)+1;return null==a?b:this.add(a-b,"d")}function rb(a,b,c){return null!=a?a:null!=b?b:c}function sb(a){var b=new Date;return a._useUTC?[b.getUTCFullYear(),b.getUTCMonth(),b.getUTCDate()]:[b.getFullYear(),b.getMonth(),b.getDate()]}function tb(a){var b,c,d,e,f=[];if(!a._d){for(d=sb(a),a._w&&null==a._a[fe]&&null==a._a[ee]&&ub(a),a._dayOfYear&&(e=rb(a._a[de],d[de]),a._dayOfYear>gb(e)&&(l(a)._overflowDayOfYear=!0),c=fb(e,0,a._dayOfYear),a._a[ee]=c.getUTCMonth(),a._a[fe]=c.getUTCDate()),b=0;3>b&&null==a._a[b];++b)a._a[b]=f[b]=d[b];for(;7>b;b++)a._a[b]=f[b]=null==a._a[b]?2===b?1:0:a._a[b];24===a._a[ge]&&0===a._a[he]&&0===a._a[ie]&&0===a._a[je]&&(a._nextDay=!0,a._a[ge]=0),a._d=(a._useUTC?fb:eb).apply(null,f),null!=a._tzm&&a._d.setUTCMinutes(a._d.getUTCMinutes()-a._tzm),a._nextDay&&(a._a[ge]=24)}}function ub(a){var b,c,d,e,f,g,h;b=a._w,null!=b.GG||null!=b.W||null!=b.E?(f=1,g=4,c=rb(b.GG,a._a[de],jb(Cb(),1,4).year),d=rb(b.W,1),e=rb(b.E,1)):(f=a._locale._week.dow,g=a._locale._week.doy,c=rb(b.gg,a._a[de],jb(Cb(),f,g).year),d=rb(b.w,1),null!=b.d?(e=b.d,f>e&&++d):e=null!=b.e?b.e+f:f),h=pb(c,d,e,g,f),a._a[de]=h.year,a._dayOfYear=h.dayOfYear}function vb(a){if(a._f===c.ISO_8601)return void cb(a);a._a=[],l(a).empty=!0;var b,d,e,f,g,h=""+a._i,i=h.length,j=0;for(e=M(a._f,a._locale).match(Ld)||[],b=0;b<e.length;b++)f=e[b],d=(h.match(O(f,a))||[])[0],d&&(g=h.substr(0,h.indexOf(d)),g.length>0&&l(a).unusedInput.push(g),h=h.slice(h.indexOf(d)+d.length),j+=d.length),Od[f]?(d?l(a).empty=!1:l(a).unusedTokens.push(f),S(f,d,a)):a._strict&&!d&&l(a).unusedTokens.push(f);l(a).charsLeftOver=i-j,h.length>0&&l(a).unusedInput.push(h),l(a).bigHour===!0&&a._a[ge]<=12&&a._a[ge]>0&&(l(a).bigHour=void 0),a._a[ge]=wb(a._locale,a._a[ge],a._meridiem),tb(a),$(a)}function wb(a,b,c){var d;return null==c?b:null!=a.meridiemHour?a.meridiemHour(b,c):null!=a.isPM?(d=a.isPM(c),d&&12>b&&(b+=12),d||12!==b||(b=0),b):b}function xb(a){var b,c,d,e,f;if(0===a._f.length)return l(a).invalidFormat=!0,void(a._d=new Date(0/0));for(e=0;e<a._f.length;e++)f=0,b=o({},a),null!=a._useUTC&&(b._useUTC=a._useUTC),b._f=a._f[e],vb(b),m(b)&&(f+=l(b).charsLeftOver,f+=10*l(b).unusedTokens.length,l(b).score=f,(null==d||d>f)&&(d=f,c=b));i(a,c||b)}function yb(a){if(!a._d){var b=C(a._i);a._a=[b.year,b.month,b.day||b.date,b.hour,b.minute,b.second,b.millisecond],tb(a)}}function zb(a){var b,c=a._i,d=a._f;return a._locale=a._locale||z(a._l),null===c||void 0===d&&""===c?n({nullInput:!0}):("string"==typeof c&&(a._i=c=a._locale.preparse(c)),q(c)?new p($(c)):(e(d)?xb(a):d?vb(a):f(c)?a._d=c:Ab(a),b=new p($(a)),b._nextDay&&(b.add(1,"d"),b._nextDay=void 0),b))}function Ab(a){var b=a._i;void 0===b?a._d=new Date:f(b)?a._d=new Date(+b):"string"==typeof b?db(a):e(b)?(a._a=g(b.slice(0),function(a){return parseInt(a,10)}),tb(a)):"object"==typeof b?yb(a):"number"==typeof b?a._d=new Date(b):c.createFromInputFallback(a)}function Bb(a,b,c,d,e){var f={};return"boolean"==typeof c&&(d=c,c=void 0),f._isAMomentObject=!0,f._useUTC=f._isUTC=e,f._l=c,f._i=a,f._f=b,f._strict=d,zb(f)}function Cb(a,b,c,d){return Bb(a,b,c,d,!1)}function Db(a,b){var c,d;if(1===b.length&&e(b[0])&&(b=b[0]),!b.length)return Cb();for(c=b[0],d=1;d<b.length;++d)b[d][a](c)&&(c=b[d]);return c}function Eb(){var a=[].slice.call(arguments,0);return Db("isBefore",a)}function Fb(){var a=[].slice.call(arguments,0);return Db("isAfter",a)}function Gb(a){var b=C(a),c=b.year||0,d=b.quarter||0,e=b.month||0,f=b.week||0,g=b.day||0,h=b.hour||0,i=b.minute||0,j=b.second||0,k=b.millisecond||0;this._milliseconds=+k+1e3*j+6e4*i+36e5*h,this._days=+g+7*f,this._months=+e+3*d+12*c,this._data={},this._locale=z(),this._bubble()}function Hb(a){return a instanceof Gb}function Ib(a,b){I(a,0,0,function(){var a=this.utcOffset(),c="+";return 0>a&&(a=-a,c="-"),c+H(~~(a/60),2)+b+H(~~a%60,2)})}function Jb(a){var b=(a||"").match($d)||[],c=b[b.length-1]||[],d=(c+"").match(ve)||["-",0,0],e=+(60*d[1])+r(d[2]);return"+"===d[0]?e:-e}function Kb(a,b){var d,e;return b._isUTC?(d=b.clone(),e=(q(a)||f(a)?+a:+Cb(a))-+d,d._d.setTime(+d._d+e),c.updateOffset(d,!1),d):Cb(a).local()}function Lb(a){return 15*-Math.round(a._d.getTimezoneOffset()/15)}function Mb(a,b){var d,e=this._offset||0;return null!=a?("string"==typeof a&&(a=Jb(a)),Math.abs(a)<16&&(a=60*a),!this._isUTC&&b&&(d=Lb(this)),this._offset=a,this._isUTC=!0,null!=d&&this.add(d,"m"),e!==a&&(!b||this._changeInProgress?ac(this,Xb(a-e,"m"),1,!1):this._changeInProgress||(this._changeInProgress=!0,c.updateOffset(this,!0),this._changeInProgress=null)),this):this._isUTC?e:Lb(this)}function Nb(a,b){return null!=a?("string"!=typeof a&&(a=-a),this.utcOffset(a,b),this):-this.utcOffset()}function Ob(a){return this.utcOffset(0,a)}function Pb(a){return this._isUTC&&(this.utcOffset(0,a),this._isUTC=!1,a&&this.subtract(Lb(this),"m")),this}function Qb(){return this._tzm?this.utcOffset(this._tzm):"string"==typeof this._i&&this.utcOffset(Jb(this._i)),this}function Rb(a){return a=a?Cb(a).utcOffset():0,(this.utcOffset()-a)%60===0}function Sb(){return this.utcOffset()>this.clone().month(0).utcOffset()||this.utcOffset()>this.clone().month(5).utcOffset()}function Tb(){if(this._a){var a=this._isUTC?j(this._a):Cb(this._a);return this.isValid()&&s(this._a,a.toArray())>0}return!1}function Ub(){return!this._isUTC}function Vb(){return this._isUTC}function Wb(){return this._isUTC&&0===this._offset}function Xb(a,b){var c,d,e,f=a,g=null;return Hb(a)?f={ms:a._milliseconds,d:a._days,M:a._months}:"number"==typeof a?(f={},b?f[b]=a:f.milliseconds=a):(g=we.exec(a))?(c="-"===g[1]?-1:1,f={y:0,d:r(g[fe])*c,h:r(g[ge])*c,m:r(g[he])*c,s:r(g[ie])*c,ms:r(g[je])*c}):(g=xe.exec(a))?(c="-"===g[1]?-1:1,f={y:Yb(g[2],c),M:Yb(g[3],c),d:Yb(g[4],c),h:Yb(g[5],c),m:Yb(g[6],c),s:Yb(g[7],c),w:Yb(g[8],c)}):null==f?f={}:"object"==typeof f&&("from"in f||"to"in f)&&(e=$b(Cb(f.from),Cb(f.to)),f={},f.ms=e.milliseconds,f.M=e.months),d=new Gb(f),Hb(a)&&h(a,"_locale")&&(d._locale=a._locale),d}function Yb(a,b){var c=a&&parseFloat(a.replace(",","."));return(isNaN(c)?0:c)*b}function Zb(a,b){var c={milliseconds:0,months:0};return c.months=b.month()-a.month()+12*(b.year()-a.year()),a.clone().add(c.months,"M").isAfter(b)&&--c.months,c.milliseconds=+b-+a.clone().add(c.months,"M"),c}function $b(a,b){var c;return b=Kb(b,a),a.isBefore(b)?c=Zb(a,b):(c=Zb(b,a),c.milliseconds=-c.milliseconds,c.months=-c.months),c}function _b(a,b){return function(c,d){var e,f;return null===d||isNaN(+d)||(bb(b,"moment()."+b+"(period, number) is deprecated. Please use moment()."+b+"(number, period)."),f=c,c=d,d=f),c="string"==typeof c?+c:c,e=Xb(c,d),ac(this,e,a),this}}function ac(a,b,d,e){var f=b._milliseconds,g=b._days,h=b._months;e=null==e?!0:e,f&&a._d.setTime(+a._d+f*d),g&&F(a,"Date",E(a,"Date")+g*d),h&&X(a,E(a,"Month")+h*d),e&&c.updateOffset(a,g||h)}function bc(a){var b=a||Cb(),c=Kb(b,this).startOf("day"),d=this.diff(c,"days",!0),e=-6>d?"sameElse":-1>d?"lastWeek":0>d?"lastDay":1>d?"sameDay":2>d?"nextDay":7>d?"nextWeek":"sameElse";return this.format(this.localeData().calendar(e,this,Cb(b)))}function cc(){return new p(this)}function dc(a,b){var c;return b=B("undefined"!=typeof b?b:"millisecond"),"millisecond"===b?(a=q(a)?a:Cb(a),+this>+a):(c=q(a)?+a:+Cb(a),c<+this.clone().startOf(b))}function ec(a,b){var c;return b=B("undefined"!=typeof b?b:"millisecond"),"millisecond"===b?(a=q(a)?a:Cb(a),+a>+this):(c=q(a)?+a:+Cb(a),+this.clone().endOf(b)<c)}function fc(a,b,c){return this.isAfter(a,c)&&this.isBefore(b,c)}function gc(a,b){var c;return b=B(b||"millisecond"),"millisecond"===b?(a=q(a)?a:Cb(a),+this===+a):(c=+Cb(a),+this.clone().startOf(b)<=c&&c<=+this.clone().endOf(b))}function hc(a){return 0>a?Math.ceil(a):Math.floor(a)}function ic(a,b,c){var d,e,f=Kb(a,this),g=6e4*(f.utcOffset()-this.utcOffset());return b=B(b),"year"===b||"month"===b||"quarter"===b?(e=jc(this,f),"quarter"===b?e/=3:"year"===b&&(e/=12)):(d=this-f,e="second"===b?d/1e3:"minute"===b?d/6e4:"hour"===b?d/36e5:"day"===b?(d-g)/864e5:"week"===b?(d-g)/6048e5:d),c?e:hc(e)}function jc(a,b){var c,d,e=12*(b.year()-a.year())+(b.month()-a.month()),f=a.clone().add(e,"months");return 0>b-f?(c=a.clone().add(e-1,"months"),d=(b-f)/(f-c)):(c=a.clone().add(e+1,"months"),d=(b-f)/(c-f)),-(e+d)}function kc(){return this.clone().locale("en").format("ddd MMM DD YYYY HH:mm:ss [GMT]ZZ")}function lc(){var a=this.clone().utc();return 0<a.year()&&a.year()<=9999?"function"==typeof Date.prototype.toISOString?this.toDate().toISOString():L(a,"YYYY-MM-DD[T]HH:mm:ss.SSS[Z]"):L(a,"YYYYYY-MM-DD[T]HH:mm:ss.SSS[Z]")}function mc(a){var b=L(this,a||c.defaultFormat);return this.localeData().postformat(b)}function nc(a,b){return this.isValid()?Xb({to:this,from:a}).locale(this.locale()).humanize(!b):this.localeData().invalidDate()}function oc(a){return this.from(Cb(),a)}function pc(a,b){return this.isValid()?Xb({from:this,to:a}).locale(this.locale()).humanize(!b):this.localeData().invalidDate()}function qc(a){return this.to(Cb(),a)}function rc(a){var b;return void 0===a?this._locale._abbr:(b=z(a),null!=b&&(this._locale=b),this)}function sc(){return this._locale}function tc(a){switch(a=B(a)){case"year":this.month(0);case"quarter":case"month":this.date(1);case"week":case"isoWeek":case"day":this.hours(0);case"hour":this.minutes(0);case"minute":this.seconds(0);case"second":this.milliseconds(0)}return"week"===a&&this.weekday(0),"isoWeek"===a&&this.isoWeekday(1),"quarter"===a&&this.month(3*Math.floor(this.month()/3)),this}function uc(a){return a=B(a),void 0===a||"millisecond"===a?this:this.startOf(a).add(1,"isoWeek"===a?"week":a).subtract(1,"ms")}function vc(){return+this._d-6e4*(this._offset||0)}function wc(){return Math.floor(+this/1e3)}function xc(){return this._offset?new Date(+this):this._d}function yc(){var a=this;return[a.year(),a.month(),a.date(),a.hour(),a.minute(),a.second(),a.millisecond()]}function zc(){return m(this)}function Ac(){return i({},l(this))}function Bc(){return l(this).overflow}function Cc(a,b){I(0,[a,a.length],0,b)}function Dc(a,b,c){return jb(Cb([a,11,31+b-c]),b,c).week}function Ec(a){var b=jb(this,this.localeData()._week.dow,this.localeData()._week.doy).year;return null==a?b:this.add(a-b,"y")}function Fc(a){var b=jb(this,1,4).year;return null==a?b:this.add(a-b,"y")}function Gc(){return Dc(this.year(),1,4)}function Hc(){var a=this.localeData()._week;return Dc(this.year(),a.dow,a.doy)}function Ic(a){return null==a?Math.ceil((this.month()+1)/3):this.month(3*(a-1)+this.month()%3)}function Jc(a,b){if("string"==typeof a)if(isNaN(a)){if(a=b.weekdaysParse(a),"number"!=typeof a)return null}else a=parseInt(a,10);return a}function Kc(a){return this._weekdays[a.day()]}function Lc(a){return this._weekdaysShort[a.day()]}function Mc(a){return this._weekdaysMin[a.day()]}function Nc(a){var b,c,d;for(this._weekdaysParse||(this._weekdaysParse=[]),b=0;7>b;b++)if(this._weekdaysParse[b]||(c=Cb([2e3,1]).day(b),d="^"+this.weekdays(c,"")+"|^"+this.weekdaysShort(c,"")+"|^"+this.weekdaysMin(c,""),this._weekdaysParse[b]=new RegExp(d.replace(".",""),"i")),this._weekdaysParse[b].test(a))return b}function Oc(a){var b=this._isUTC?this._d.getUTCDay():this._d.getDay();return null!=a?(a=Jc(a,this.localeData()),this.add(a-b,"d")):b}function Pc(a){var b=(this.day()+7-this.localeData()._week.dow)%7;return null==a?b:this.add(a-b,"d")}function Qc(a){return null==a?this.day()||7:this.day(this.day()%7?a:a-7)}function Rc(a,b){I(a,0,0,function(){return this.localeData().meridiem(this.hours(),this.minutes(),b)})}function Sc(a,b){return b._meridiemParse}function Tc(a){return"p"===(a+"").toLowerCase().charAt(0)}function Uc(a,b,c){return a>11?c?"pm":"PM":c?"am":"AM"}function Vc(a){I(0,[a,3],0,"millisecond")}function Wc(){return this._isUTC?"UTC":""}function Xc(){return this._isUTC?"Coordinated Universal Time":""}function Yc(a){return Cb(1e3*a)}function Zc(){return Cb.apply(null,arguments).parseZone()}function $c(a,b,c){var d=this._calendar[a];return"function"==typeof d?d.call(b,c):d}function _c(a){var b=this._longDateFormat[a];return!b&&this._longDateFormat[a.toUpperCase()]&&(b=this._longDateFormat[a.toUpperCase()].replace(/MMMM|MM|DD|dddd/g,function(a){return a.slice(1)}),this._longDateFormat[a]=b),b}function ad(){return this._invalidDate}function bd(a){return this._ordinal.replace("%d",a)}function cd(a){return a}function dd(a,b,c,d){var e=this._relativeTime[c];return"function"==typeof e?e(a,b,c,d):e.replace(/%d/i,a)}function ed(a,b){var c=this._relativeTime[a>0?"future":"past"];return"function"==typeof c?c(b):c.replace(/%s/i,b)}function fd(a){var b,c;for(c in a)b=a[c],"function"==typeof b?this[c]=b:this["_"+c]=b;this._ordinalParseLenient=new RegExp(this._ordinalParse.source+"|"+/\d{1,2}/.source)}function gd(a,b,c,d){var e=z(),f=j().set(d,b);return e[c](f,a)}function hd(a,b,c,d,e){if("number"==typeof a&&(b=a,a=void 0),a=a||"",null!=b)return gd(a,b,c,e);var f,g=[];for(f=0;d>f;f++)g[f]=gd(a,f,c,e);return g}function id(a,b){return hd(a,b,"months",12,"month")}function jd(a,b){return hd(a,b,"monthsShort",12,"month")}function kd(a,b){return hd(a,b,"weekdays",7,"day")}function ld(a,b){return hd(a,b,"weekdaysShort",7,"day")}function md(a,b){return hd(a,b,"weekdaysMin",7,"day")}function nd(){var a=this._data;return this._milliseconds=Te(this._milliseconds),this._days=Te(this._days),this._months=Te(this._months),a.milliseconds=Te(a.milliseconds),a.seconds=Te(a.seconds),a.minutes=Te(a.minutes),a.hours=Te(a.hours),a.months=Te(a.months),a.years=Te(a.years),this}function od(a,b,c,d){var e=Xb(b,c);return a._milliseconds+=d*e._milliseconds,a._days+=d*e._days,a._months+=d*e._months,a._bubble()}function pd(a,b){return od(this,a,b,1)}function qd(a,b){return od(this,a,b,-1)}function rd(){var a,b,c,d=this._milliseconds,e=this._days,f=this._months,g=this._data,h=0;return g.milliseconds=d%1e3,a=hc(d/1e3),g.seconds=a%60,b=hc(a/60),g.minutes=b%60,c=hc(b/60),g.hours=c%24,e+=hc(c/24),h=hc(sd(e)),e-=hc(td(h)),f+=hc(e/30),e%=30,h+=hc(f/12),f%=12,g.days=e,g.months=f,g.years=h,this}function sd(a){return 400*a/146097}function td(a){return 146097*a/400}function ud(a){var b,c,d=this._milliseconds;if(a=B(a),"month"===a||"year"===a)return b=this._days+d/864e5,c=this._months+12*sd(b),"month"===a?c:c/12;switch(b=this._days+Math.round(td(this._months/12)),a){case"week":return b/7+d/6048e5;case"day":return b+d/864e5;case"hour":return 24*b+d/36e5;case"minute":return 1440*b+d/6e4;case"second":return 86400*b+d/1e3;case"millisecond":return Math.floor(864e5*b)+d;default:throw new Error("Unknown unit "+a)}}function vd(){return this._milliseconds+864e5*this._days+this._months%12*2592e6+31536e6*r(this._months/12)}function wd(a){return function(){return this.as(a)}}function xd(a){return a=B(a),this[a+"s"]()}function yd(a){return function(){return this._data[a]}}function zd(){return hc(this.days()/7)}function Ad(a,b,c,d,e){return e.relativeTime(b||1,!!c,a,d)}function Bd(a,b,c){var d=Xb(a).abs(),e=hf(d.as("s")),f=hf(d.as("m")),g=hf(d.as("h")),h=hf(d.as("d")),i=hf(d.as("M")),j=hf(d.as("y")),k=e<jf.s&&["s",e]||1===f&&["m"]||f<jf.m&&["mm",f]||1===g&&["h"]||g<jf.h&&["hh",g]||1===h&&["d"]||h<jf.d&&["dd",h]||1===i&&["M"]||i<jf.M&&["MM",i]||1===j&&["y"]||["yy",j];return k[2]=b,k[3]=+a>0,k[4]=c,Ad.apply(null,k)}function Cd(a,b){return void 0===jf[a]?!1:void 0===b?jf[a]:(jf[a]=b,!0)}function Dd(a){var b=this.localeData(),c=Bd(this,!a,b);return a&&(c=b.pastFuture(+this,c)),b.postformat(c)}function Ed(){var a=kf(this.years()),b=kf(this.months()),c=kf(this.days()),d=kf(this.hours()),e=kf(this.minutes()),f=kf(this.seconds()+this.milliseconds()/1e3),g=this.asSeconds();return g?(0>g?"-":"")+"P"+(a?a+"Y":"")+(b?b+"M":"")+(c?c+"D":"")+(d||e||f?"T":"")+(d?d+"H":"")+(e?e+"M":"")+(f?f+"S":""):"P0D"}var Fd,Gd,Hd=c.momentProperties=[],Id=!1,Jd={},Kd={},Ld=/(\[[^\[]*\])|(\\)?(Mo|MM?M?M?|Do|DDDo|DD?D?D?|ddd?d?|do?|w[o|w]?|W[o|W]?|Q|YYYYYY|YYYYY|YYYY|YY|gg(ggg?)?|GG(GGG?)?|e|E|a|A|hh?|HH?|mm?|ss?|S{1,4}|x|X|zz?|ZZ?|.)/g,Md=/(\[[^\[]*\])|(\\)?(LTS|LT|LL?L?L?|l{1,4})/g,Nd={},Od={},Pd=/\d/,Qd=/\d\d/,Rd=/\d{3}/,Sd=/\d{4}/,Td=/[+-]?\d{6}/,Ud=/\d\d?/,Vd=/\d{1,3}/,Wd=/\d{1,4}/,Xd=/[+-]?\d{1,6}/,Yd=/\d+/,Zd=/[+-]?\d+/,$d=/Z|[+-]\d\d:?\d\d/gi,_d=/[+-]?\d+(\.\d{1,3})?/,ae=/[0-9]*['a-z\u00A0-\u05FF\u0700-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]+|[\u0600-\u06FF\/]+(\s*?[\u0600-\u06FF]+){1,2}/i,be={},ce={},de=0,ee=1,fe=2,ge=3,he=4,ie=5,je=6;I("M",["MM",2],"Mo",function(){return this.month()+1}),I("MMM",0,0,function(a){return this.localeData().monthsShort(this,a)}),I("MMMM",0,0,function(a){return this.localeData().months(this,a)}),A("month","M"),N("M",Ud),N("MM",Ud,Qd),N("MMM",ae),N("MMMM",ae),Q(["M","MM"],function(a,b){b[ee]=r(a)-1}),Q(["MMM","MMMM"],function(a,b,c,d){var e=c._locale.monthsParse(a,d,c._strict);null!=e?b[ee]=e:l(c).invalidMonth=a});var ke="January_February_March_April_May_June_July_August_September_October_November_December".split("_"),le="Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sep_Oct_Nov_Dec".split("_"),me={};c.suppressDeprecationWarnings=!1;var ne=/^\s*(?:[+-]\d{6}|\d{4})-(?:(\d\d-\d\d)|(W\d\d$)|(W\d\d-\d)|(\d\d\d))((T| )(\d\d(:\d\d(:\d\d(\.\d+)?)?)?)?([\+\-]\d\d(?::?\d\d)?|\s*Z)?)?$/,oe=[["YYYYYY-MM-DD",/[+-]\d{6}-\d{2}-\d{2}/],["YYYY-MM-DD",/\d{4}-\d{2}-\d{2}/],["GGGG-[W]WW-E",/\d{4}-W\d{2}-\d/],["GGGG-[W]WW",/\d{4}-W\d{2}/],["YYYY-DDD",/\d{4}-\d{3}/]],pe=[["HH:mm:ss.SSSS",/(T| )\d\d:\d\d:\d\d\.\d+/],["HH:mm:ss",/(T| )\d\d:\d\d:\d\d/],["HH:mm",/(T| )\d\d:\d\d/],["HH",/(T| )\d\d/]],qe=/^\/?Date\((\-?\d+)/i;c.createFromInputFallback=ab("moment construction falls back to js Date. This is discouraged and will be removed in upcoming major release. Please refer to https://github.com/moment/moment/issues/1407 for more info.",function(a){a._d=new Date(a._i+(a._useUTC?" UTC":""))}),I(0,["YY",2],0,function(){return this.year()%100}),I(0,["YYYY",4],0,"year"),I(0,["YYYYY",5],0,"year"),I(0,["YYYYYY",6,!0],0,"year"),A("year","y"),N("Y",Zd),N("YY",Ud,Qd),N("YYYY",Wd,Sd),N("YYYYY",Xd,Td),N("YYYYYY",Xd,Td),Q(["YYYY","YYYYY","YYYYYY"],de),Q("YY",function(a,b){b[de]=c.parseTwoDigitYear(a)}),c.parseTwoDigitYear=function(a){return r(a)+(r(a)>68?1900:2e3)};var re=D("FullYear",!1);I("w",["ww",2],"wo","week"),I("W",["WW",2],"Wo","isoWeek"),A("week","w"),A("isoWeek","W"),N("w",Ud),N("ww",Ud,Qd),N("W",Ud),N("WW",Ud,Qd),R(["w","ww","W","WW"],function(a,b,c,d){b[d.substr(0,1)]=r(a)});var se={dow:0,doy:6};I("DDD",["DDDD",3],"DDDo","dayOfYear"),A("dayOfYear","DDD"),N("DDD",Vd),N("DDDD",Rd),Q(["DDD","DDDD"],function(a,b,c){c._dayOfYear=r(a)}),c.ISO_8601=function(){};var te=ab("moment().min is deprecated, use moment.min instead. https://github.com/moment/moment/issues/1548",function(){var a=Cb.apply(null,arguments);return this>a?this:a}),ue=ab("moment().max is deprecated, use moment.max instead. https://github.com/moment/moment/issues/1548",function(){var a=Cb.apply(null,arguments);return a>this?this:a});Ib("Z",":"),Ib("ZZ",""),N("Z",$d),N("ZZ",$d),Q(["Z","ZZ"],function(a,b,c){c._useUTC=!0,c._tzm=Jb(a)});var ve=/([\+\-]|\d\d)/gi;c.updateOffset=function(){};var we=/(\-)?(?:(\d*)\.)?(\d+)\:(\d+)(?:\:(\d+)\.?(\d{3})?)?/,xe=/^(-)?P(?:(?:([0-9,.]*)Y)?(?:([0-9,.]*)M)?(?:([0-9,.]*)D)?(?:T(?:([0-9,.]*)H)?(?:([0-9,.]*)M)?(?:([0-9,.]*)S)?)?|([0-9,.]*)W)$/;Xb.fn=Gb.prototype;var ye=_b(1,"add"),ze=_b(-1,"subtract");c.defaultFormat="YYYY-MM-DDTHH:mm:ssZ";var Ae=ab("moment().lang() is deprecated. Instead, use moment().localeData() to get the language configuration. Use moment().locale() to change languages.",function(a){return void 0===a?this.localeData():this.locale(a)});I(0,["gg",2],0,function(){return this.weekYear()%100}),I(0,["GG",2],0,function(){return this.isoWeekYear()%100}),Cc("gggg","weekYear"),Cc("ggggg","weekYear"),Cc("GGGG","isoWeekYear"),Cc("GGGGG","isoWeekYear"),A("weekYear","gg"),A("isoWeekYear","GG"),N("G",Zd),N("g",Zd),N("GG",Ud,Qd),N("gg",Ud,Qd),N("GGGG",Wd,Sd),N("gggg",Wd,Sd),N("GGGGG",Xd,Td),N("ggggg",Xd,Td),R(["gggg","ggggg","GGGG","GGGGG"],function(a,b,c,d){b[d.substr(0,2)]=r(a)}),R(["gg","GG"],function(a,b,d,e){b[e]=c.parseTwoDigitYear(a)}),I("Q",0,0,"quarter"),A("quarter","Q"),N("Q",Pd),Q("Q",function(a,b){b[ee]=3*(r(a)-1)}),I("D",["DD",2],"Do","date"),A("date","D"),N("D",Ud),N("DD",Ud,Qd),N("Do",function(a,b){return a?b._ordinalParse:b._ordinalParseLenient}),Q(["D","DD"],fe),Q("Do",function(a,b){b[fe]=r(a.match(Ud)[0],10)});var Be=D("Date",!0);I("d",0,"do","day"),I("dd",0,0,function(a){return this.localeData().weekdaysMin(this,a)}),I("ddd",0,0,function(a){return this.localeData().weekdaysShort(this,a)}),I("dddd",0,0,function(a){return this.localeData().weekdays(this,a)}),I("e",0,0,"weekday"),I("E",0,0,"isoWeekday"),A("day","d"),A("weekday","e"),A("isoWeekday","E"),N("d",Ud),N("e",Ud),N("E",Ud),N("dd",ae),N("ddd",ae),N("dddd",ae),R(["dd","ddd","dddd"],function(a,b,c){var d=c._locale.weekdaysParse(a);null!=d?b.d=d:l(c).invalidWeekday=a}),R(["d","e","E"],function(a,b,c,d){b[d]=r(a)});var Ce="Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),De="Sun_Mon_Tue_Wed_Thu_Fri_Sat".split("_"),Ee="Su_Mo_Tu_We_Th_Fr_Sa".split("_");I("H",["HH",2],0,"hour"),I("h",["hh",2],0,function(){return this.hours()%12||12}),Rc("a",!0),Rc("A",!1),A("hour","h"),N("a",Sc),N("A",Sc),N("H",Ud),N("h",Ud),N("HH",Ud,Qd),N("hh",Ud,Qd),Q(["H","HH"],ge),Q(["a","A"],function(a,b,c){c._isPm=c._locale.isPM(a),c._meridiem=a}),Q(["h","hh"],function(a,b,c){b[ge]=r(a),l(c).bigHour=!0});var Fe=/[ap]\.?m?\.?/i,Ge=D("Hours",!0);I("m",["mm",2],0,"minute"),A("minute","m"),N("m",Ud),N("mm",Ud,Qd),Q(["m","mm"],he);var He=D("Minutes",!1);I("s",["ss",2],0,"second"),A("second","s"),N("s",Ud),N("ss",Ud,Qd),Q(["s","ss"],ie);var Ie=D("Seconds",!1);I("S",0,0,function(){return~~(this.millisecond()/100)}),I(0,["SS",2],0,function(){return~~(this.millisecond()/10)}),Vc("SSS"),Vc("SSSS"),A("millisecond","ms"),N("S",Vd,Pd),N("SS",Vd,Qd),N("SSS",Vd,Rd),N("SSSS",Yd),Q(["S","SS","SSS","SSSS"],function(a,b){b[je]=r(1e3*("0."+a))});var Je=D("Milliseconds",!1);I("z",0,0,"zoneAbbr"),I("zz",0,0,"zoneName");var Ke=p.prototype;Ke.add=ye,Ke.calendar=bc,Ke.clone=cc,Ke.diff=ic,Ke.endOf=uc,Ke.format=mc,Ke.from=nc,Ke.fromNow=oc,Ke.to=pc,Ke.toNow=qc,Ke.get=G,Ke.invalidAt=Bc,Ke.isAfter=dc,Ke.isBefore=ec,Ke.isBetween=fc,Ke.isSame=gc,Ke.isValid=zc,Ke.lang=Ae,Ke.locale=rc,Ke.localeData=sc,Ke.max=ue,Ke.min=te,Ke.parsingFlags=Ac,Ke.set=G,Ke.startOf=tc,Ke.subtract=ze,Ke.toArray=yc,Ke.toDate=xc,Ke.toISOString=lc,Ke.toJSON=lc,Ke.toString=kc,Ke.unix=wc,Ke.valueOf=vc,Ke.year=re,Ke.isLeapYear=ib,Ke.weekYear=Ec,Ke.isoWeekYear=Fc,Ke.quarter=Ke.quarters=Ic,Ke.month=Y,Ke.daysInMonth=Z,Ke.week=Ke.weeks=nb,Ke.isoWeek=Ke.isoWeeks=ob,Ke.weeksInYear=Hc,Ke.isoWeeksInYear=Gc,Ke.date=Be,Ke.day=Ke.days=Oc,Ke.weekday=Pc,Ke.isoWeekday=Qc,Ke.dayOfYear=qb,Ke.hour=Ke.hours=Ge,Ke.minute=Ke.minutes=He,Ke.second=Ke.seconds=Ie,Ke.millisecond=Ke.milliseconds=Je,Ke.utcOffset=Mb,Ke.utc=Ob,Ke.local=Pb,Ke.parseZone=Qb,Ke.hasAlignedHourOffset=Rb,Ke.isDST=Sb,Ke.isDSTShifted=Tb,Ke.isLocal=Ub,Ke.isUtcOffset=Vb,Ke.isUtc=Wb,Ke.isUTC=Wb,Ke.zoneAbbr=Wc,Ke.zoneName=Xc,Ke.dates=ab("dates accessor is deprecated. Use date instead.",Be),Ke.months=ab("months accessor is deprecated. Use month instead",Y),Ke.years=ab("years accessor is deprecated. Use year instead",re),Ke.zone=ab("moment().zone is deprecated, use moment().utcOffset instead. https://github.com/moment/moment/issues/1779",Nb);var Le=Ke,Me={sameDay:"[Today at] LT",nextDay:"[Tomorrow at] LT",nextWeek:"dddd [at] LT",lastDay:"[Yesterday at] LT",lastWeek:"[Last] dddd [at] LT",sameElse:"L"},Ne={LTS:"h:mm:ss A",LT:"h:mm A",L:"MM/DD/YYYY",LL:"MMMM D, YYYY",LLL:"MMMM D, YYYY LT",LLLL:"dddd, MMMM D, YYYY LT"},Oe="Invalid date",Pe="%d",Qe=/\d{1,2}/,Re={future:"in %s",past:"%s ago",s:"a few seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",M:"a month",MM:"%d months",y:"a year",yy:"%d years"},Se=t.prototype;Se._calendar=Me,Se.calendar=$c,Se._longDateFormat=Ne,Se.longDateFormat=_c,Se._invalidDate=Oe,Se.invalidDate=ad,Se._ordinal=Pe,Se.ordinal=bd,Se._ordinalParse=Qe,Se.preparse=cd,Se.postformat=cd,Se._relativeTime=Re,Se.relativeTime=dd,Se.pastFuture=ed,Se.set=fd,Se.months=U,Se._months=ke,Se.monthsShort=V,Se._monthsShort=le,Se.monthsParse=W,Se.week=kb,Se._week=se,Se.firstDayOfYear=mb,Se.firstDayOfWeek=lb,Se.weekdays=Kc,Se._weekdays=Ce,Se.weekdaysMin=Mc,Se._weekdaysMin=Ee,Se.weekdaysShort=Lc,Se._weekdaysShort=De,Se.weekdaysParse=Nc,Se.isPM=Tc,Se._meridiemParse=Fe,Se.meridiem=Uc,x("en",{ordinalParse:/\d{1,2}(th|st|nd|rd)/,ordinal:function(a){var b=a%10,c=1===r(a%100/10)?"th":1===b?"st":2===b?"nd":3===b?"rd":"th";return a+c}}),c.lang=ab("moment.lang is deprecated. Use moment.locale instead.",x),c.langData=ab("moment.langData is deprecated. Use moment.localeData instead.",z);var Te=Math.abs,Ue=wd("ms"),Ve=wd("s"),We=wd("m"),Xe=wd("h"),Ye=wd("d"),Ze=wd("w"),$e=wd("M"),_e=wd("y"),af=yd("milliseconds"),bf=yd("seconds"),cf=yd("minutes"),df=yd("hours"),ef=yd("days"),ff=yd("months"),gf=yd("years"),hf=Math.round,jf={s:45,m:45,h:22,d:26,M:11},kf=Math.abs,lf=Gb.prototype;lf.abs=nd,lf.add=pd,lf.subtract=qd,lf.as=ud,lf.asMilliseconds=Ue,lf.asSeconds=Ve,lf.asMinutes=We,lf.asHours=Xe,lf.asDays=Ye,lf.asWeeks=Ze,lf.asMonths=$e,lf.asYears=_e,lf.valueOf=vd,lf._bubble=rd,lf.get=xd,lf.milliseconds=af,lf.seconds=bf,lf.minutes=cf,lf.hours=df,lf.days=ef,lf.weeks=zd,lf.months=ff,lf.years=gf,lf.humanize=Dd,lf.toISOString=Ed,lf.toString=Ed,lf.toJSON=Ed,lf.locale=rc,lf.localeData=sc,lf.toIsoString=ab("toIsoString() is deprecated. Please use toISOString() instead (notice the capitals)",Ed),lf.lang=Ae,I("X",0,0,"unix"),I("x",0,0,"valueOf"),N("x",Zd),N("X",_d),Q("X",function(a,b,c){c._d=new Date(1e3*parseFloat(a,10))}),Q("x",function(a,b,c){c._d=new Date(r(a))}),c.version="2.10.3",d(Cb),c.fn=Le,c.min=Eb,c.max=Fb,c.utc=j,c.unix=Yc,c.months=id,c.isDate=f,c.locale=x,c.invalid=n,c.duration=Xb,c.isMoment=q,c.weekdays=kd,c.parseZone=Zc,c.localeData=z,c.isDuration=Hb,c.monthsShort=jd,c.weekdaysMin=md,c.defineLocale=y,c.weekdaysShort=ld,c.normalizeUnits=B,c.relativeTimeThreshold=Cd;var mf=c;return mf})},{}],255:[function(a,b){"use strict";var c=a("./NetSimUtils"),d=a("./DataConverters"),e=a("./NetSimGlobals"),f=b.exports=function(a,b){var c=e.getLevelConfig();this.encoder=new f.Encoder(c.addressFormat,c.packetCountBitWidth,a),this.binary=b};f.HeaderType={TO_ADDRESS:"toAddress",FROM_ADDRESS:"fromAddress",PACKET_INDEX:"packetIndex",PACKET_COUNT:"packetCount"},f.isAddressField=function(a){return a===f.HeaderType.TO_ADDRESS||a===f.HeaderType.FROM_ADDRESS},f.isPacketField=function(a){return a===f.HeaderType.PACKET_INDEX||a===f.HeaderType.PACKET_COUNT},f.prototype.getHeaderAsBinary=function(a){return this.encoder.getHeader(a,this.binary)},f.prototype.getHeaderAsInt=function(a){return this.encoder.getHeaderAsInt(a,this.binary)},f.prototype.getHeaderAsAddressString=function(a){return this.encoder.getHeaderAsAddressString(a,this.binary)},f.prototype.getBodyAsBinary=function(){return this.encoder.getBody(this.binary)},f.prototype.getBodyAsAscii=function(a){return this.encoder.getBodyAsAscii(this.binary,a)},f.Encoder=function(a,b,c){this.addressFormat_=a,this.addressBitWidth_=this.calculateBitWidth(this.addressFormat_),this.packetCountBitWidth_=b,this.headerSpec_=c,this.validateSpec()},f.Encoder.prototype.calculateBitWidth=function(a){return a.split(/\D+/).reduce(function(a,b){return a+(parseInt(b,10)||0)},0)},f.Encoder.prototype.validateSpec=function(){for(var a={},b=0;b<this.headerSpec_.length;b++){var c=f.isAddressField(this.headerSpec_[b]),d=f.isPacketField(this.headerSpec_[b]);if(c&&0===this.addressBitWidth_)throw new Error("Invalid packet format: Includes an address field but  address format is invalid.");if(d&&0===this.packetCountBitWidth_)throw new Error("Invalid packet format: Includes a packet count field  but packet field bit width is zero");if(!c&&!d)throw new Error("Invalid packet format: Unrecognized packet header field "+this.headerSpec_[b]);if(a.hasOwnProperty(this.headerSpec_[b]))throw new Error("Invalid packet format: Field keys must be unique.");a[this.headerSpec_[b]]="used"}},f.Encoder.prototype.getHeader=function(a,b){var c=0,e=0;for(b=d.minifyBinary(b);this.headerSpec_[c]!==a;)if(e+=this.getFieldBitWidth(this.headerSpec_[c]),c++,c>=this.headerSpec_.length)throw new Error('Key "'+a+'" not found in packet spec.');var f=this.getFieldBitWidth(this.headerSpec_[c]),g=b.slice(e,e+f);if(1/0!==f)for(;g.length<f;)g+="0";return g},f.Encoder.prototype.getHeaderAsInt=function(a,b){return d.binaryToInt(this.getHeader(a,b))},f.Encoder.prototype.getHeaderAsAddressString=function(a,b){return d.binaryToAddressString(this.getHeader(a,b),this.addressFormat_)},f.Encoder.prototype.getBody=function(a){return d.minifyBinary(a).slice(this.getHeaderLength())
},f.Encoder.prototype.getHeaderLength=function(){return this.headerSpec_.reduce(function(a,b){return a+this.getFieldBitWidth(b)}.bind(this),0)},f.Encoder.prototype.getBodyAsAscii=function(a,b){return d.binaryToAscii(this.getBody(a),b)},f.Encoder.prototype.getFieldBitWidth=function(a){if(f.isAddressField(a))return this.addressBitWidth_;if(f.isPacketField(a))return this.packetCountBitWidth_;throw new Error("Unable to select a bit-width for field "+a)},f.Encoder.prototype.makeBinaryHeaders=function(a){var b={};return this.headerSpec_.forEach(function(c){a.hasOwnProperty(c)&&(b[c]=f.isAddressField(c)?this.addressStringToBinary(a[c]):d.intToBinary(a[c],this.getFieldBitWidth(c)))},this),b},f.Encoder.prototype.addressStringToBinary=function(a){return d.addressStringToBinary(a,this.addressFormat_)},f.Encoder.prototype.concatenateBinary=function(a,b){var d=[];return this.headerSpec_.forEach(function(b){var e=this.getFieldBitWidth(b),f=a.hasOwnProperty(b)?a[b]:"";f=f.slice(0,e),f=c.zeroPadLeft(f,e),d.push(f)},this),d.push(b),d.join("")}},{"./DataConverters":183,"./NetSimGlobals":203,"./NetSimUtils":246}],197:[function(a,b){"use strict";var c=a("./NetSimDnsTab.html.ejs"),d=a("./NetSimConstants").DnsMode,e=a("./NetSimDnsModeControl"),f=a("./NetSimDnsManualControl"),g=a("./NetSimDnsTable"),h=a("./NetSimGlobals"),i=b.exports=function(a,b,c){this.rootDiv_=a,this.dnsModeChangeCallback_=b,this.becomeDnsCallback_=c,this.dnsModeControl_=null,this.dnsManualControl_=null,this.dnsTable_=null,this.render()};i.prototype.render=function(){var a=h.getLevelConfig(),b=$(c({level:a}));this.rootDiv_.html(b),a.showDnsModeControl&&(this.dnsModeControl_=new e(this.rootDiv_.find(".dns_mode"),this.dnsModeChangeCallback_)),this.dnsManualControl_=new f(this.rootDiv_.find(".dns_manual_control"),this.becomeDnsCallback_),this.dnsTable_=new g(this.rootDiv_.find(".dns_table"))},i.prototype.setDnsMode=function(a){this.dnsModeControl_&&this.dnsModeControl_.setDnsMode(a),this.dnsTable_.setDnsMode(a),this.rootDiv_.find(".dns_manual_control").toggle(a===d.MANUAL),this.rootDiv_.find(".dns-notes").toggle(a!==d.NONE)},i.prototype.setIsDnsNode=function(a){this.dnsManualControl_.setIsDnsNode(a)},i.prototype.setDnsTableContents=function(a){this.dnsTable_.setDnsTableContents(a)}},{"./NetSimConstants":191,"./NetSimDnsManualControl":193,"./NetSimDnsModeControl":195,"./NetSimDnsTab.html.ejs":196,"./NetSimDnsTable":199,"./NetSimGlobals":203}],199:[function(a,b){"use strict";var c=a("./NetSimDnsTable.html.ejs"),d=a("./NetSimConstants").DnsMode,e=b.exports=function(a){this.rootDiv_=a,this.dnsMode_=d.NONE,this.addressTableData_=[],this.render()};e.prototype.render=function(){var a=$(c({dnsMode:this.dnsMode_,tableData:this.addressTableData_}));this.rootDiv_.html(a)},e.prototype.setDnsMode=function(a){this.dnsMode_=a,this.render()},e.prototype.setDnsTableContents=function(a){this.addressTableData_=a,this.render()}},{"./NetSimConstants":191,"./NetSimDnsTable.html.ejs":198}],198:[function(require,module,exports){module.exports=function(){var t=function anonymous(locals,filters,escape){escape=escape||function(a){return String(a).replace(/&(?!\w+;)/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")};var buf=[];with(locals||{})!function(){buf.push("");var a=require("./NetSimConstants").DnsMode;buf.push('\n<div class="netsim-dns-table">\n  <h1>My Network</h1>\n  <table>\n    <thead>\n    <tr>\n      <th>Hostname</th>\n      <th>Address</th>\n    </tr>\n    </thead>\n    <tbody>\n    '),tableData.forEach(function(b){var c=b.hostname,d="",e=[];(dnsMode===a.NONE||b.isDnsNode||b.isLocal)&&(d=b.address),b.isLocal&&(c+=" (Me)",e.push("local-node")),b.isDnsNode&&dnsMode!==a.NONE&&(c+=" (DNS)",e.push("dns-node")),buf.push('\n        <tr class="',escape(e.join(" ")),'">\n          <td>',escape(c),"</td>\n          <td>",escape(d),"</td>\n        </tr>\n      ")}),buf.push("\n    </tbody>\n  </table>\n</div>")}();return buf.join("")};return function(a){return t(a,require("ejs").filters)}}()},{"./NetSimConstants":191,ejs:491}],196:[function(require,module,exports){module.exports=function(){var t=function anonymous(locals,filters,escape){escape=escape||function(a){return String(a).replace(/&(?!\w+;)/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")};var buf=[];with(locals||{})!function(){buf.push('<div class="netsim-dns-tab">\n  '),level.showDnsModeControl&&buf.push('\n  <div class="dns_mode"></div>\n  '),buf.push('\n  <div class="dns_manual_control"></div>\n  <div class="dns_table"></div>\n  <div class="dns-notes">\n    <h1>Notes</h1>\n    <div>\n      <textarea></textarea>\n    </div>\n  </div>\n</div>\n')}();return buf.join("")};return function(a){return t(a,require("ejs").filters)}}()},{ejs:491}],195:[function(a,b){"use strict";var c=a("./NetSimDnsModeControl.html.ejs"),d=a("./NetSimConstants").DnsMode,e=b.exports=function(a,b){this.rootDiv_=a,this.dnsModeChangeCallback_=b,this.dnsModeRadios_=null,this.currentDnsMode_=d.NONE,this.render()};e.prototype.render=function(){var a=$(c({}));this.rootDiv_.html(a),this.dnsModeRadios_=this.rootDiv_.find('input[type="radio"][name="dns_mode"]'),this.dnsModeRadios_.change(this.onDnsModeChange_.bind(this)),this.setDnsMode(this.currentDnsMode_)},e.prototype.onDnsModeChange_=function(){var a=this.dnsModeRadios_.filter(":checked").val();this.dnsModeChangeCallback_(a)},e.prototype.setDnsMode=function(a){this.currentDnsMode_=a,this.dnsModeRadios_.filter('[value="'+a+'"]').prop("checked",!0)}},{"./NetSimConstants":191,"./NetSimDnsModeControl.html.ejs":194}],194:[function(require,module,exports){module.exports=function(){var t=function anonymous(locals,filters,escape){escape=escape||function(a){return String(a).replace(/&(?!\w+;)/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")};var buf=[];with(locals||{})!function(){function a(a,b){buf.push('\n    <div class="dns_mode_',escape(a),'">\n      <input id="dns_mode_',escape(a),'"\n                   type="radio"\n                   name="dns_mode"\n                   value="',escape(a),'" />\n      <label for="dns_mode_',escape(a),'">',escape(b),"</label>\n    </div>\n    ")}buf.push("");var b=require("./NetSimConstants").DnsMode,c=require("./locale");buf.push('\n<div class="dns-mode-control">\n  <h1>',escape(c.dnsMode()),"</h1>\n  "),a(b.NONE,c.dnsMode_NONE()),buf.push("\n  "),a(b.MANUAL,c.dnsMode_MANUAL()),buf.push("\n  "),a(b.AUTOMATIC,c.dnsMode_AUTOMATIC()),buf.push("\n</div>\n")}();return buf.join("")};return function(a){return t(a,require("ejs").filters)}}()},{"./NetSimConstants":191,"./locale":260,ejs:491}],193:[function(a,b){"use strict";var c=a("./NetSimDnsManualControl.html.ejs"),d=b.exports=function(a,b){this.rootDiv_=a,this.becomeDnsCallback_=b,this.render()};d.prototype.render=function(){var a=$(c({}));this.rootDiv_.html(a),this.rootDiv_.find('input[type="button"]').click(this.onBecomeDnsButtonClick_.bind(this))},d.prototype.onBecomeDnsButtonClick_=function(){this.becomeDnsCallback_()},d.prototype.setIsDnsNode=function(a){this.rootDiv_.find('input[type="button"]').attr("disabled",a)}},{"./NetSimDnsManualControl.html.ejs":192}],192:[function(require,module,exports){module.exports=function(){var t=function anonymous(locals,filters,escape){escape=escape||function(a){return String(a).replace(/&(?!\w+;)/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")};var buf=[];with(locals||{})!function(){buf.push('<div class="netsim_dns_manual_control">\n  <h1>Manual Control</h1>\n  <input id="become_dns_button" type="button" value="Take over as DNS" />\n</div>')}();return buf.join("")};return function(a){return t(a,require("ejs").filters)}}()},{ejs:491}],190:[function(a,b){"use strict";var c=a("../utils"),d=c.getLodash(),e=a("./locale"),f=a("./NetSimConstants").NodeType,g=a("./NetSimEntity"),h=a("./NetSimNode"),i=a("./NetSimWire"),j=b.exports=function(a,b){h.call(this,a,b)};j.inherits(h),j.prototype.getNodeType=function(){return f.CLIENT},j.prototype.getStatus=function(){var a=this.getOutgoingWire();if(!a)return e.notConnected();var b=this.shard_.nodeTable.readAll(),c=d.find(b,function(b){return b.id===a.remoteNodeID}),g=e.unknownNode();c&&(g=c.name);var h;if(c&&c.type===f.ROUTER)h=!0;else{var i=this.shard_.wireTable.readAll();h=d.find(i,function(b){return b.localNodeID===a.remoteNodeID&&b.remoteNodeID===a.localNodeID})}return h?e.connectedToNodeName({nodeName:g}):e.connectingToNodeName({nodeName:g})},j.prototype.getAddress=function(){var a=this.getOutgoingWire();return a?a.localAddress:void 0},j.prototype.getOutgoingWire=function(){var a=this.shard_.wireTable.readAll(),b=d.find(a,function(a){return a.localNodeID===this.entityID},this);return b?new i(this.shard_,b):null},j.get=function(a,b,c){g.get(j,a,b,c)}},{"../utils":318,"./NetSimConstants":191,"./NetSimEntity":202,"./NetSimNode":217,"./NetSimWire":254,"./locale":260}],217:[function(a,b){"use strict";a("../utils");var c=a("./locale"),d=a("./NetSimEntity"),e=a("./NetSimWire"),f=b.exports=function(a,b){b=void 0!==b?b:{},d.call(this,a,b),this.displayName_=b.name};f.inherits(d),f.prototype.getTable=function(){return this.shard_.nodeTable},f.prototype.buildRow=function(){return{type:this.getNodeType(),name:this.getDisplayName()}},f.prototype.getDisplayName=function(){return this.displayName_?this.displayName_:c.defaultNodeName()},f.prototype.getShortDisplayName=function(){var a=this.getDisplayName();return a.length>10&&(a=a.split(/\s/)[0]),a},f.prototype.getHostname=function(){return this.getShortDisplayName().replace(/[^\w\d]/g,"").toLowerCase()+this.entityID},f.prototype.getNodeType=function(){throw new Error("getNodeType method is not implemented")},f.prototype.getStatus=function(){throw new Error("getStatus method is not implemented")},f.prototype.connectToNode=function(a,b){b=b||function(){};var c=this;e.create(this.shard_,this.entityID,a.entityID,function(d,e){return d?void b(d,null):void a.acceptConnection(c,function(a,c){return a||!c?void e.destroy(function(){b(new Error("Connection rejected."),null)}):void b(null,e)})})},f.prototype.acceptConnection=function(a,b){b(null,!0)}},{"../utils":318,"./NetSimEntity":202,"./NetSimWire":254,"./locale":260}],254:[function(a,b){"use strict";a("../utils");var c=a("./NetSimEntity"),d=b.exports=function(a,b){b=void 0!==b?b:{},c.call(this,a,b),this.localNodeID=b.localNodeID,this.remoteNodeID=b.remoteNodeID,this.localAddress=b.localAddress,this.remoteAddress=b.remoteAddress,this.localHostname=b.localHostname,this.remoteHostname=b.remoteHostname};d.inherits(c),d.create=function(a,b,c,e){var f=new d(a);f.localNodeID=b,f.remoteNodeID=c,f.getTable().create(f.buildRow(),function(b,c){return b?void e(b,null):void e(null,new d(a,c))})},d.prototype.getTable=function(){return this.shard_.wireTable},d.prototype.buildRow=function(){return{localNodeID:this.localNodeID,remoteNodeID:this.remoteNodeID,localAddress:this.localAddress,remoteAddress:this.remoteAddress,localHostname:this.localHostname,remoteHostname:this.remoteHostname}},d.prototype.isMessageRowOnDuplexWire=function(a){return this.localNodeID===a.fromNodeID&&this.remoteNodeID===a.toNodeID},d.prototype.isMessageRowOnSimplexWire=function(a){var b=this.isMessageRowOnDuplexWire(a),c=this.localNodeID===a.toNodeID&&this.remoteNodeID===a.fromNodeID;return b||c}},{"../utils":318,"./NetSimEntity":202}],202:[function(a,b){"use strict";var c=b.exports=function(a,b){void 0===b&&(b={}),this.shard_=a,this.entityID=b.id};c.create=function(a,b,c){var d=new a(b);d.getTable().create(d.buildRow(),function(d,e){d?c(d,null):c(null,new a(b,e))})},c.get=function(a,b,c,d){var e=new a(c);e.getTable().read(b,function(b,e){b?d(b,null):d(b,new a(c,e))})},c.prototype.update=function(a){a=a||function(){},this.getTable().update(this.entityID,this.buildRow(),a)},c.prototype.destroy=function(a){a=a||function(){},this.getTable()["delete"](this.entityID,a)},c.prototype.synchronousDestroy=function(){return this.getTable().synchronousDelete(this.entityID)},c.prototype.getTable=function(){throw new Error("Method getTable is not implemented.")},c.prototype.buildRow=function(){return{}},c.destroyEntities=function(a,b){return 0===a.length?void b(null,!0):void a[0].destroy(function(d,e){return d?void b(d,e):void c.destroyEntities(a.slice(1),b)}.bind(this))}},{}],189:[function(a,b){"use strict";var c=a("./locale"),d=a("./NetSimSlider"),e=b.exports=function(a,b){d.call(this,a,{onChange:b,min:1,max:32}),this.render()};e.inherits(d),e.prototype.valueToLabel=function(a){return c.numBitsPerChunk({numBits:a})},e.prototype.valueToShortLabel=function(a){return a.toString()}},{"./NetSimSlider":240,"./locale":260}],188:[function(a,b){"use strict";a("../utils");var c=a("./NetSimUtils"),d=a("./NetSimSlider"),e=b.exports=function(a,b,c){d.call(this,a,{onChange:c,value:b,min:1,max:20,upperBoundInfinite:!0}),this.render()};e.inherits(d),e.prototype.valueToLabel=function(a){return c.bitrateToLocalizedRoundedBitrate(a)}},{"../utils":318,"./NetSimSlider":240,"./NetSimUtils":246}],187:[function(a,b){"use strict";a("../utils");var c=a("./locale"),d=a("./NetSimBitLogPanel.html.ejs"),e=a("./NetSimPanel"),f=a("./NetSimEncodingControl"),g=a("./NetSimGlobals"),h=a("./NetSimLogger").getSingleton(),i=b.exports=function(a,b){this.binary_="",this.encodings_=[],this.chunkSize_=8,this.logTitle_=b.logTitle,this.netsim_=b.netsim,this.showReadWireButton_=b.showReadWireButton,this.openHeight_=0,e.call(this,a,{className:"netsim-log-panel",panelTitle:b.logTitle,beginMinimized:b.isMinimized})};i.inherits(e),i.prototype.render=function(){i.superPrototype.render.call(this);var a=$(d({binary:this.binary_,enabledEncodings:this.encodings_,chunkSize:this.chunkSize_,showReadWireButton:this.showReadWireButton_}));this.getBody().html(a),f.hideRowsByEncoding(this.getBody(),this.encodings_),this.getBody().find("#read-wire-button").click(this.onReceiveButtonPress_.bind(this)),this.addButton(c.clear(),this.onClearButtonPress_.bind(this)),this.sizeToOpenHeight_()},i.prototype.onClearButtonPress_=function(){this.binary_="",this.render()},i.prototype.onReceiveButtonPress_=function(a){var b=$(a.target);b.is("[disabled]")||(b.attr("disabled","disabled"),this.netsim_.receiveBit(function(a,c){if(a)return h.warn("Error reading wire state: "+a.message),void b.removeAttr("disabled");var d="0";c&&(d=c.payload),this.log(d),this.netsim_.animateReadWireState(d),b.removeAttr("disabled")}.bind(this)))},i.prototype.log=function(a){this.binary_+=a.toString(),this.render()},i.prototype.setEncodings=function(a){this.encodings_=a,this.render()},i.prototype.setChunkSize=function(a){this.chunkSize_=a,this.render()},i.prototype.setHeight=function(a){this.openHeight_=a,this.sizeToOpenHeight_()},i.prototype.sizeToOpenHeight_=function(){var a=this.getRoot().find(".netsim-panel"),b=a.find("h1"),c=a.find(".panel-body"),d=a.find(".scroll-area"),e=parseFloat(a.css("margin-top"))+parseFloat(a.css("margin-bottom")),f=b.outerHeight(!0),g=parseFloat(c.css("border-top-width"))+parseFloat(c.css("border-bottom-width")),h=parseFloat(d.css("margin-top"))+parseFloat(d.css("margin-bottom")),i=this.openHeight_-(e+f+g+h);d.height(Math.floor(i))},i.prototype.getHeight=function(){return this.getRoot().find(".netsim-panel").outerHeight(!0)},i.prototype.onMinimizerClick_=function(){i.superPrototype.onMinimizerClick_.call(this),g.updateLayout()}},{"../utils":318,"./NetSimBitLogPanel.html.ejs":186,"./NetSimEncodingControl":201,"./NetSimGlobals":203,"./NetSimLogger":210,"./NetSimPanel":223,"./locale":260}],223:[function(a,b){"use strict";var c=a("../utils"),d=a("./NetSimPanel.html.ejs"),e=b.exports=function(a,b){this.instanceID_=e.uniqueIDCounter,e.uniqueIDCounter++,this.rootDiv_=a,this.className_=c.valueOr(b.className,""),this.panelTitle_=c.valueOr(b.panelTitle,""),this.userToggleable_=c.valueOr(b.userToggleable,!0),this.isMinimized_=c.valueOr(b.beginMinimized,!1),this.render()};e.uniqueIDCounter=0,e.prototype.render=function(){var a=$(d({instanceID:this.instanceID_,className:this.className_,panelTitle:this.panelTitle_,userToggleable:this.userToggleable_}));this.rootDiv_.html(a),this.userToggleable_&&this.rootDiv_.find(".minimizer").click(this.onMinimizerClick_.bind(this)),this.setMinimized(this.isMinimized_)},e.prototype.getRoot=function(){return this.rootDiv_},e.prototype.setPanelTitle=function(a){this.panelTitle_=a,this.rootDiv_.find(".title-text").text(a)},e.prototype.onMinimizerClick_=function(){this.setMinimized(!this.isMinimized_)},e.prototype.setMinimized=function(a){var b=this.rootDiv_.find(".netsim-panel"),c=b.find(".minimizer");a?(b.addClass("minimized"),c.find(".fa").addClass("fa-plus-square").removeClass("fa-minus-square")):(b.removeClass("minimized"),c.find(".fa").addClass("fa-minus-square").removeClass("fa-plus-square")),this.isMinimized_=a},e.prototype.isMinimized=function(){return this.isMinimized_},e.prototype.addButton=function(a,b){$("<span>").addClass("netsim-button").addClass("secondary").html(a).click(b).appendTo(this.rootDiv_.find(".panel-controls"))},e.prototype.getBody=function(){return this.rootDiv_.find(".panel-body")}},{"../utils":318,"./NetSimPanel.html.ejs":222}],222:[function(require,module,exports){module.exports=function(){var t=function anonymous(locals,filters,escape){escape=escape||function(a){return String(a).replace(/&(?!\w+;)/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")};var buf=[];with(locals||{})!function(){buf.push('<div id="netsim-panel-',escape(instanceID),'"\n     class="netsim-panel ',escape(className),'">\n  <h1>\n    <div class="panel-controls"></div>\n    <div class="single-line-with-ellipsis'),userToggleable&&buf.push(" minimizer"),buf.push('">\n      '),userToggleable&&buf.push('\n        <i class="fa fa-minus-square"></i>\n      '),buf.push('\n      <span class="title-text">',escape(panelTitle),'</span>\n    </div>\n  </h1>\n  <div class="panel-body">\n  </div>\n</div>\n')}();return buf.join("")};return function(a){return t(a,require("ejs").filters)}}()},{ejs:491}],203:[function(a,b){"use strict";var c=a("seedrandom"),d=null,e=null,f=Math.random,g=function(a,b){return Math.floor(f()*(b-a))+a};b.exports={setRootControllers:function(a,b){d=a,e=b},getLevelConfig:function(){return e.level},getPubSubConfig:function(){return{usePusher:e.usePusher,pusherApplicationKey:e.pusherApplicationKey}},getAssetUrlFunction:function(){return d.assetUrl},updateLayout:function(){e.updateLayout()},completeLevelAndContinue:function(){e.completeLevelAndContinue()},setRandomSeed:function(a){f=c(a)},random:function(){return f()},randomIntInRange:g,randomPickOne:function(a){var b=a.length;return 0===b?void 0:a[g(0,b)]}}},{seedrandom:651}],651:[function(a,b){var c=a("./lib/xor128"),d=a("./lib/xorwow"),e=a("./lib/xorshift7"),f=a("./lib/xor4096"),g=a("./lib/tychei"),h=a("./seedrandom");h.xor128=c,h.xorwow=d,h.xorshift7=e,h.xor4096=f,h.tychei=g,b.exports=h},{"./lib/tychei":652,"./lib/xor128":653,"./lib/xor4096":654,"./lib/xorshift7":655,"./lib/xorwow":656,"./seedrandom":657}],657:[function(a,b){!function(c,d){function e(a,b,e){var l=[];b=1==b?{entropy:!0}:b||{};var m=i(h(b.entropy?[a,k(c)]:null==a?j():a,3),l),p=new f(l),u=function(){for(var a=p.g(o),b=r,c=0;s>a;)a=(a+c)*n,b*=n,c=p.g(1);for(;a>=t;)a/=2,b/=2,c>>>=1;return(a+c)/b};return u.int32=function(){return 0|p.g(4)},u.quick=function(){return p.g(4)/(4*(1<<30))},u["double"]=u,i(k(p.S),c),(b.pass||e||function(a,b,c,e){return e&&(e.S&&g(e,p),a.state=function(){return g(p,{})}),c?(d[q]=a,b):a})(u,m,"global"in b?b.global:this==d,b.state)}function f(a){var b,c=a.length,d=this,e=0,f=d.i=d.j=0,g=d.S=[];for(c||(a=[c++]);n>e;)g[e]=e++;for(e=0;n>e;e++)g[e]=g[f=u&f+a[e%c]+(b=g[e])],g[f]=b;(d.g=function(a){for(var b,c=0,e=d.i,f=d.j,g=d.S;a--;)b=g[e=u&e+1],c=c*n+g[u&(g[e]=g[f=u&f+b])+(g[f]=b)];return d.i=e,d.j=f,c})(n)}function g(a,b){return b.i=a.i,b.j=a.j,b.S=a.S.slice(),b}function h(a,b){var c,d=[],e=typeof a;if(b&&"object"==e)for(c in a)try{d.push(h(a[c],b-1))}catch(f){}return d.length?d:"string"==e?a:a+"\x00"}function i(a,b){for(var c,d=a+"",e=0;e<d.length;)b[u&e]=u&(c^=19*b[u&e])+d.charCodeAt(e++);return k(b)}function j(){try{if(l)return k(l.randomBytes(n));var a=new Uint8Array(n);return(m.crypto||m.msCrypto).getRandomValues(a),k(a)}catch(b){var d=m.navigator,e=d&&d.plugins;return[+new Date,m,e,m.screen,k(c)]}}function k(a){return String.fromCharCode.apply(0,a)}var l,m=this,n=256,o=6,p=52,q="random",r=d.pow(n,o),s=d.pow(2,p),t=2*s,u=n-1;if(d["seed"+q]=e,i(d.random(),c),"object"==typeof b&&b.exports){b.exports=e;try{l=a("crypto")}catch(v){}}else"function"==typeof define&&define.amd&&define(function(){return e})}([],Math)},{crypto:328}],328:[function(a,b,c){"use strict";function d(){var a=[].slice.call(arguments).join(" ");throw new Error([a,"we accept pull requests","http://github.com/dominictarr/crypto-browserify"].join("\n"))}function e(a,b){for(var c in a)b(a[c],c)}c.randomBytes=c.rng=a("randombytes");var f=c.prng=a("./prng");c.createHash=c.Hash=a("create-hash"),c.createHmac=c.Hmac=a("create-hmac"),c.pseudoRandomBytes=function(a,b){if(!b||!b.call)return f(a);var c;try{c=f(a)}catch(d){return b(d)}b.call(this,void 0,c)};var g=["sha1","sha224","sha256","sha384","sha512","md5","rmd160"].concat(Object.keys(a("browserify-sign/algos")));c.getHashes=function(){return g};var h=a("./pbkdf2")(c);c.pbkdf2=h.pbkdf2,c.pbkdf2Sync=h.pbkdf2Sync,a("browserify-aes/inject")(c,b.exports),a("browserify-sign/inject")(b.exports,c),a("diffie-hellman/inject")(c,b.exports),a("create-ecdh/inject")(b.exports,c),a("public-encrypt/inject")(b.exports,c),e(["createCredentials"],function(a){c[a]=function(){d("sorry,",a,"is not implemented yet")}})},{"./pbkdf2":464,"./prng":465,"browserify-aes/inject":336,"browserify-sign/algos":347,"browserify-sign/inject":348,"create-ecdh/inject":394,"create-hash":416,"create-hmac":427,"diffie-hellman/inject":430,"public-encrypt/inject":436,randombytes:463}],465:[function(a,b){(function(c,d){"use strict";!function(){var e=("undefined"==typeof window?c:window)||{},f=e.crypto||e.msCrypto||a("crypto");b.exports=function(a){if(f.getRandomValues){var b=new d(a);return f.getRandomValues(b),b}if(f.pseudoRandomBytes)return f.pseudoRandomBytes(a);throw new Error("pseudo random number generation not yet implemented for this browser\nuse chrome, FireFox or Internet Explorer 11")}}()}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{},a("buffer").Buffer)},{buffer:324,crypto:323}],323:[function(a,b,c){arguments[4][322][0].apply(c,arguments)},{dup:322}],464:[function(a,b){"use strict";var c=a("pbkdf2-compat/pbkdf2");b.exports=function(a,b){b=b||{};var d=c(a);return b.pbkdf2=d.pbkdf2,b.pbkdf2Sync=d.pbkdf2Sync,b}},{"pbkdf2-compat/pbkdf2":435}],435:[function(a,b){(function(a){b.exports=function(b){function c(a,b,c,e,f,g){if("function"==typeof f&&(g=f,f=void 0),"function"!=typeof g)throw new Error("No callback provided to pbkdf2");setTimeout(function(){var h;try{h=d(a,b,c,e,f)}catch(i){return g(i)}g(void 0,h)})}function d(c,d,e,f,g){if("number"!=typeof e)throw new TypeError("Iterations not a number");if(0>e)throw new TypeError("Bad iterations");if("number"!=typeof f)throw new TypeError("Key length not a number");if(0>f)throw new TypeError("Bad key length");g=g||"sha1",a.isBuffer(c)||(c=new a(c)),a.isBuffer(d)||(d=new a(d));var h,i,j,k=1,l=new a(f),m=new a(d.length+4);d.copy(m,0,0,d.length);for(var n=1;k>=n;n++){m.writeUInt32BE(n,d.length);var o=b.createHmac(g,c).update(m).digest();if(!h&&(h=o.length,j=new a(h),k=Math.ceil(f/h),i=f-(k-1)*h,f>(Math.pow(2,32)-1)*h))throw new TypeError("keylen exceeds maximum length");o.copy(j,0,0,h);for(var p=1;e>p;p++){o=b.createHmac(g,c).update(o).digest();for(var q=0;h>q;q++)j[q]^=o[q]}var r=(n-1)*h,s=n==k?i:h;j.copy(l,r,0,s)}return l}return{pbkdf2:c,pbkdf2Sync:d}}}).call(this,a("buffer").Buffer)},{buffer:324}],463:[function(a,b){(function(a,c,d){"use strict";function e(b,c){var e=new d(b);return g.getRandomValues(e),"function"==typeof c?a.nextTick(function(){c(null,e)}):e}function f(){throw new Error("secure random number generation not supported by this browser\nuse chrome, FireFox or Internet Explorer 11")}var g=c.crypto||c.msCrypto;b.exports=g.getRandomValues?e:f}).call(this,a("_process"),"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{},a("buffer").Buffer)},{_process:470,buffer:324}],436:[function(a,b){b.exports=function(b,c){b.publicEncrypt=a("./publicEncrypt")(c),b.privateDecrypt=a("./privateDecrypt")(c)}},{"./privateDecrypt":460,"./publicEncrypt":461}],461:[function(a,b){(function(c){function d(a,b,d){var e=a.modulus.byteLength(),f=b.length,g=d.createHash("sha1").update(new c("")).digest(),k=g.length,l=2*k;if(f>e-l-2)throw new Error("message too long");var m=new c(e-f-l-2);m.fill(0);var n=e-k-1,o=d.randomBytes(k),p=i(c.concat([g,m,new c([1]),b],n),h(o,n,d)),q=i(o,h(p,k,d));return new j(c.concat([new c([0]),q,p],e))}function e(a,b,d){var e=b.length,g=a.modulus.byteLength();if(e>g-11)throw new Error("message too long");var h=f(g-e-3,d);return new j(c.concat([new c([0,2]),h,new c([0]),b],g))}function f(a,b){for(var d,e=new c(a),f=0,g=b.randomBytes(2*a),h=0;a>f;)h===g.length&&(g=b.randomBytes(2*a),h=0),d=g[h++],d&&(e[f++]=d);return e}var g=a("parse-asn1"),h=a("./mgf"),i=a("./xor"),j=a("bn.js");b.exports=function(a){function b(b,f){var h;h=b.padding?b.padding:4;var i,k=g(b);if(4===h)i=d(k,f,a);else if(1===h)i=e(k,f,a);else{if(3!==h)throw new Error("unknown padding");if(i=new j(f),i.cmp(k.modulus)>=0)throw new Error("data too long for modulus")}var l=i.toRed(j.mont(k.modulus)).redPow(new j(k.publicExponent)).fromRed().toArray();return new c(l)}return b}}).call(this,a("buffer").Buffer)},{"./mgf":437,"./xor":462,"bn.js":438,buffer:324,"parse-asn1":444}],460:[function(a,b){(function(c){function d(a,b,d){var e=(a.modulus,a.modulus.byteLength()),g=(b.length,d.createHash("sha1").update(new c("")).digest()),j=g.length;if(0!==b[0])throw new Error("decryption error");var k=b.slice(1,j+1),l=b.slice(j+1),m=i(k,h(l,j,d)),n=i(l,h(m,e-j-1,d));if(f(g,n.slice(0,j)))throw new Error("decryption error");for(var o=j;0===n[o];)o++;if(1!==n[o++])throw new Error("decryption error");return n.slice(o)}function e(a,b){for(var c=b.slice(0,2),d=2,e=0;0!==b[d++];)if(d>=b.length){e++;break}{var f=b.slice(2,d-1);b.slice(d-1,d)}return"0002"!==c.toString("hex")&&e++,f.length<8&&e++,b.slice(d)}function f(a,b){var c=0,d=a.length;a.length!==b.length&&(c++,d=Math.min(a.length,b.length));for(var e=-1;++e<d;)c+=a[e]^b[e];return c}var g=a("parse-asn1"),h=a("./mgf"),i=a("./xor"),j=a("bn.js"),k=a("browserify-rsa");b.exports=function(a){function b(b,f){var h;h=b.padding?b.padding:4;var i=g(b,a),l=i.modulus.byteLength();if(f.length>l||new j(f).cmp(i.modulus)>=0)throw new Error("decryption error");var m=k(f,i,a),n=new c(l-m.length);if(n.fill(0),m=c.concat([n,m],l),4===h)return d(i,m,a);if(1===h)return e(i,m,a);if(3===h)return m;throw new Error("unknown padding")}return b}}).call(this,a("buffer").Buffer)},{"./mgf":437,"./xor":462,"bn.js":438,"browserify-rsa":439,buffer:324,"parse-asn1":444}],462:[function(a,b){b.exports=function(a,b){for(var c=a.length,d=-1;++d<c;)a[d]^=b[d];return a}},{}],444:[function(a,b,c){arguments[4][375][0].apply(c,arguments)},{"./aesid.json":441,"./asn1":442,"./fixProc":443,buffer:324,dup:375,pemstrip:459}],459:[function(a,b,c){arguments[4][390][0].apply(c,arguments)},{dup:390}],443:[function(a,b,c){arguments[4][374][0].apply(c,arguments)},{"./EVP_BytesToKey":440,buffer:324,dup:374}],440:[function(a,b,c){arguments[4][371][0].apply(c,arguments)},{buffer:324,dup:371}],442:[function(a,b,c){arguments[4][373][0].apply(c,arguments)},{"asn1.js":446,"asn1.js-rfc3280":445,dup:373}],445:[function(a,b,c){arguments[4][376][0].apply(c,arguments)},{"asn1.js":446,dup:376}],446:[function(a,b,c){arguments[4][377][0].apply(c,arguments)},{"./asn1/api":447,"./asn1/base":449,"./asn1/constants":453,"./asn1/decoders":455,"./asn1/encoders":457,"bn.js":438,dup:377}],457:[function(a,b,c){arguments[4][388][0].apply(c,arguments)},{"./der":456,dup:388}],456:[function(a,b,c){arguments[4][387][0].apply(c,arguments)},{"../../asn1":446,buffer:324,dup:387,inherits:467}],455:[function(a,b,c){arguments[4][386][0].apply(c,arguments)},{"./der":454,dup:386}],454:[function(a,b,c){arguments[4][385][0].apply(c,arguments)},{"../../asn1":446,dup:385,inherits:467}],453:[function(a,b,c){arguments[4][384][0].apply(c,arguments)},{"./der":452,dup:384}],452:[function(a,b,c){arguments[4][383][0].apply(c,arguments)},{"../constants":453,dup:383}],449:[function(a,b,c){arguments[4][380][0].apply(c,arguments)},{"./buffer":448,"./node":450,"./reporter":451,dup:380}],451:[function(a,b,c){arguments[4][382][0].apply(c,arguments)},{dup:382,inherits:467}],450:[function(a,b,c){arguments[4][381][0].apply(c,arguments)},{"../base":449,dup:381,"minimalistic-assert":458}],458:[function(a,b,c){arguments[4][389][0].apply(c,arguments)},{dup:389}],448:[function(a,b,c){arguments[4][379][0].apply(c,arguments)},{"../base":449,buffer:324,dup:379,inherits:467}],447:[function(a,b,c){arguments[4][378][0].apply(c,arguments)},{"../asn1":446,dup:378,inherits:467,vm:489}],441:[function(a,b,c){arguments[4][372][0].apply(c,arguments)},{dup:372}],439:[function(a,b,c){arguments[4][350][0].apply(c,arguments)},{"bn.js":438,buffer:324,dup:350}],438:[function(a,b,c){arguments[4][349][0].apply(c,arguments)},{dup:349}],437:[function(a,b){(function(a){function c(b){var c=new a(4);return c.writeUInt32BE(b,0),c}b.exports=function(b,d,e){for(var f,g=new a(""),h=0;g.length<d;)f=c(h++),g=a.concat([g,e.createHash("sha1").update(b).update(f).digest()]);return g.slice(0,d)}}).call(this,a("buffer").Buffer)},{buffer:324}],430:[function(a,b){(function(c){var d=a("./primes.json"),e=a("./dh"),f=a("./generatePrime");b.exports=function(a,b){function g(b){return new e(new c(d[b].prime,"hex"),new c(d[b].gen,"hex"),a)}function h(b,d,g,h){return(c.isBuffer(d)||"string"==typeof d&&-1===["hex","binary","base64"].indexOf(d))&&(h=g,g=d,d=void 0),d=d||"binary",h=h||"binary",g=g||new c([2]),c.isBuffer(g)||(g=new c(g,h)),"number"==typeof b?new e(f(b,g,a),g,a,!0):(c.isBuffer(b)||(b=new c(b,d)),new e(b,g,a,!0))}b.DiffieHellmanGroup=b.createDiffieHellmanGroup=b.getDiffieHellman=g,b.createDiffieHellman=b.DiffieHellman=h}}).call(this,a("buffer").Buffer)},{"./dh":428,"./generatePrime":429,"./primes.json":434,buffer:324}],434:[function(a,b){b.exports={modp1:{gen:"02",prime:"ffffffffffffffffc90fdaa22168c234c4c6628b80dc1cd129024e088a67cc74020bbea63b139b22514a08798e3404ddef9519b3cd3a431b302b0a6df25f14374fe1356d6d51c245e485b576625e7ec6f44c42e9a63a3620ffffffffffffffff"},modp2:{gen:"02",prime:"ffffffffffffffffc90fdaa22168c234c4c6628b80dc1cd129024e088a67cc74020bbea63b139b22514a08798e3404ddef9519b3cd3a431b302b0a6df25f14374fe1356d6d51c245e485b576625e7ec6f44c42e9a637ed6b0bff5cb6f406b7edee386bfb5a899fa5ae9f24117c4b1fe649286651ece65381ffffffffffffffff"},modp5:{gen:"02",prime:"ffffffffffffffffc90fdaa22168c234c4c6628b80dc1cd129024e088a67cc74020bbea63b139b22514a08798e3404ddef9519b3cd3a431b302b0a6df25f14374fe1356d6d51c245e485b576625e7ec6f44c42e9a637ed6b0bff5cb6f406b7edee386bfb5a899fa5ae9f24117c4b1fe649286651ece45b3dc2007cb8a163bf0598da48361c55d39a69163fa8fd24cf5f83655d23dca3ad961c62f356208552bb9ed529077096966d670c354e4abc9804f1746c08ca237327ffffffffffffffff"},modp14:{gen:"02",prime:"ffffffffffffffffc90fdaa22168c234c4c6628b80dc1cd129024e088a67cc74020bbea63b139b22514a08798e3404ddef9519b3cd3a431b302b0a6df25f14374fe1356d6d51c245e485b576625e7ec6f44c42e9a637ed6b0bff5cb6f406b7edee386bfb5a899fa5ae9f24117c4b1fe649286651ece45b3dc2007cb8a163bf0598da48361c55d39a69163fa8fd24cf5f83655d23dca3ad961c62f356208552bb9ed529077096966d670c354e4abc9804f1746c08ca18217c32905e462e36ce3be39e772c180e86039b2783a2ec07a28fb5c55df06f4c52c9de2bcbf6955817183995497cea956ae515d2261898fa051015728e5a8aacaa68ffffffffffffffff"},modp15:{gen:"02",prime:"ffffffffffffffffc90fdaa22168c234c4c6628b80dc1cd129024e088a67cc74020bbea63b139b22514a08798e3404ddef9519b3cd3a431b302b0a6df25f14374fe1356d6d51c245e485b576625e7ec6f44c42e9a637ed6b0bff5cb6f406b7edee386bfb5a899fa5ae9f24117c4b1fe649286651ece45b3dc2007cb8a163bf0598da48361c55d39a69163fa8fd24cf5f83655d23dca3ad961c62f356208552bb9ed529077096966d670c354e4abc9804f1746c08ca18217c32905e462e36ce3be39e772c180e86039b2783a2ec07a28fb5c55df06f4c52c9de2bcbf6955817183995497cea956ae515d2261898fa051015728e5a8aaac42dad33170d04507a33a85521abdf1cba64ecfb850458dbef0a8aea71575d060c7db3970f85a6e1e4c7abf5ae8cdb0933d71e8c94e04a25619dcee3d2261ad2ee6bf12ffa06d98a0864d87602733ec86a64521f2b18177b200cbbe117577a615d6c770988c0bad946e208e24fa074e5ab3143db5bfce0fd108e4b82d120a93ad2caffffffffffffffff"},modp16:{gen:"02",prime:"ffffffffffffffffc90fdaa22168c234c4c6628b80dc1cd129024e088a67cc74020bbea63b139b22514a08798e3404ddef9519b3cd3a431b302b0a6df25f14374fe1356d6d51c245e485b576625e7ec6f44c42e9a637ed6b0bff5cb6f406b7edee386bfb5a899fa5ae9f24117c4b1fe649286651ece45b3dc2007cb8a163bf0598da48361c55d39a69163fa8fd24cf5f83655d23dca3ad961c62f356208552bb9ed529077096966d670c354e4abc9804f1746c08ca18217c32905e462e36ce3be39e772c180e86039b2783a2ec07a28fb5c55df06f4c52c9de2bcbf6955817183995497cea956ae515d2261898fa051015728e5a8aaac42dad33170d04507a33a85521abdf1cba64ecfb850458dbef0a8aea71575d060c7db3970f85a6e1e4c7abf5ae8cdb0933d71e8c94e04a25619dcee3d2261ad2ee6bf12ffa06d98a0864d87602733ec86a64521f2b18177b200cbbe117577a615d6c770988c0bad946e208e24fa074e5ab3143db5bfce0fd108e4b82d120a92108011a723c12a787e6d788719a10bdba5b2699c327186af4e23c1a946834b6150bda2583e9ca2ad44ce8dbbbc2db04de8ef92e8efc141fbecaa6287c59474e6bc05d99b2964fa090c3a2233ba186515be7ed1f612970cee2d7afb81bdd762170481cd0069127d5b05aa993b4ea988d8fddc186ffb7dc90a6c08f4df435c934063199ffffffffffffffff"},modp17:{gen:"02",prime:"ffffffffffffffffc90fdaa22168c234c4c6628b80dc1cd129024e088a67cc74020bbea63b139b22514a08798e3404ddef9519b3cd3a431b302b0a6df25f14374fe1356d6d51c245e485b576625e7ec6f44c42e9a637ed6b0bff5cb6f406b7edee386bfb5a899fa5ae9f24117c4b1fe649286651ece45b3dc2007cb8a163bf0598da48361c55d39a69163fa8fd24cf5f83655d23dca3ad961c62f356208552bb9ed529077096966d670c354e4abc9804f1746c08ca18217c32905e462e36ce3be39e772c180e86039b2783a2ec07a28fb5c55df06f4c52c9de2bcbf6955817183995497cea956ae515d2261898fa051015728e5a8aaac42dad33170d04507a33a85521abdf1cba64ecfb850458dbef0a8aea71575d060c7db3970f85a6e1e4c7abf5ae8cdb0933d71e8c94e04a25619dcee3d2261ad2ee6bf12ffa06d98a0864d87602733ec86a64521f2b18177b200cbbe117577a615d6c770988c0bad946e208e24fa074e5ab3143db5bfce0fd108e4b82d120a92108011a723c12a787e6d788719a10bdba5b2699c327186af4e23c1a946834b6150bda2583e9ca2ad44ce8dbbbc2db04de8ef92e8efc141fbecaa6287c59474e6bc05d99b2964fa090c3a2233ba186515be7ed1f612970cee2d7afb81bdd762170481cd0069127d5b05aa993b4ea988d8fddc186ffb7dc90a6c08f4df435c93402849236c3fab4d27c7026c1d4dcb2602646dec9751e763dba37bdf8ff9406ad9e530ee5db382f413001aeb06a53ed9027d831179727b0865a8918da3edbebcf9b14ed44ce6cbaced4bb1bdb7f1447e6cc254b332051512bd7af426fb8f401378cd2bf5983ca01c64b92ecf032ea15d1721d03f482d7ce6e74fef6d55e702f46980c82b5a84031900b1c9e59e7c97fbec7e8f323a97a7e36cc88be0f1d45b7ff585ac54bd407b22b4154aacc8f6d7ebf48e1d814cc5ed20f8037e0a79715eef29be32806a1d58bb7c5da76f550aa3d8a1fbff0eb19ccb1a313d55cda56c9ec2ef29632387fe8d76e3c0468043e8f663f4860ee12bf2d5b0b7474d6e694f91e6dcc4024ffffffffffffffff"},modp18:{gen:"02",prime:"ffffffffffffffffc90fdaa22168c234c4c6628b80dc1cd129024e088a67cc74020bbea63b139b22514a08798e3404ddef9519b3cd3a431b302b0a6df25f14374fe1356d6d51c245e485b576625e7ec6f44c42e9a637ed6b0bff5cb6f406b7edee386bfb5a899fa5ae9f24117c4b1fe649286651ece45b3dc2007cb8a163bf0598da48361c55d39a69163fa8fd24cf5f83655d23dca3ad961c62f356208552bb9ed529077096966d670c354e4abc9804f1746c08ca18217c32905e462e36ce3be39e772c180e86039b2783a2ec07a28fb5c55df06f4c52c9de2bcbf6955817183995497cea956ae515d2261898fa051015728e5a8aaac42dad33170d04507a33a85521abdf1cba64ecfb850458dbef0a8aea71575d060c7db3970f85a6e1e4c7abf5ae8cdb0933d71e8c94e04a25619dcee3d2261ad2ee6bf12ffa06d98a0864d87602733ec86a64521f2b18177b200cbbe117577a615d6c770988c0bad946e208e24fa074e5ab3143db5bfce0fd108e4b82d120a92108011a723c12a787e6d788719a10bdba5b2699c327186af4e23c1a946834b6150bda2583e9ca2ad44ce8dbbbc2db04de8ef92e8efc141fbecaa6287c59474e6bc05d99b2964fa090c3a2233ba186515be7ed1f612970cee2d7afb81bdd762170481cd0069127d5b05aa993b4ea988d8fddc186ffb7dc90a6c08f4df435c93402849236c3fab4d27c7026c1d4dcb2602646dec9751e763dba37bdf8ff9406ad9e530ee5db382f413001aeb06a53ed9027d831179727b0865a8918da3edbebcf9b14ed44ce6cbaced4bb1bdb7f1447e6cc254b332051512bd7af426fb8f401378cd2bf5983ca01c64b92ecf032ea15d1721d03f482d7ce6e74fef6d55e702f46980c82b5a84031900b1c9e59e7c97fbec7e8f323a97a7e36cc88be0f1d45b7ff585ac54bd407b22b4154aacc8f6d7ebf48e1d814cc5ed20f8037e0a79715eef29be32806a1d58bb7c5da76f550aa3d8a1fbff0eb19ccb1a313d55cda56c9ec2ef29632387fe8d76e3c0468043e8f663f4860ee12bf2d5b0b7474d6e694f91e6dbe115974a3926f12fee5e438777cb6a932df8cd8bec4d073b931ba3bc832b68d9dd300741fa7bf8afc47ed2576f6936ba424663aab639c5ae4f5683423b4742bf1c978238f16cbe39d652de3fdb8befc848ad922222e04a4037c0713eb57a81a23f0c73473fc646cea306b4bcbc8862f8385ddfa9d4b7fa2c087e879683303ed5bdd3a062b3cf5b3a278a66d2a13f83f44f82ddf310ee074ab6a364597e899a0255dc164f31cc50846851df9ab48195ded7ea1b1d510bd7ee74d73faf36bc31ecfa268359046f4eb879f924009438b481c6cd7889a002ed5ee382bc9190da6fc026e479558e4475677e9aa9e3050e2765694dfc81f56e880b96e7160c980dd98edd3dfffffffffffffffff"}}
},{}],428:[function(a,b){(function(c){function d(a,b){b=b||"utf8",c.isBuffer(a)||(a=new c(a,b)),this._pub=new j(a)}function e(a,b){b=b||"utf8",c.isBuffer(a)||(a=new c(a,b)),this._priv=new j(a)}function f(a,b){var c=b.toString("hex"),d=[c,a.toString(16)].join("_");if(d in s)return s[d];var e=0;if(a.isEven()||!r.simpleSieve||!r.fermatTest(a)||!l.test(a))return e+=1,e+="02"===c||"05"===c?8:4,s[d]=e,e;l.test(a.shrn(1))||(e+=2);var f,c=b.toString("hex");switch(c){case"02":a.mod(m).cmp(n)&&(e+=8);break;case"05":f=a.mod(o),f.cmp(p)&&f.cmp(q)&&(e+=8);break;default:e+=4}return s[d]=e,e}function g(a,b){try{Object.defineProperty(a,"verifyError",{enumerable:!0,value:b,writable:!1})}catch(c){a.verifyError=b}}function h(a,b,c,h){this.setGenerator(b),this.__prime=new j(a),this._prime=j.mont(this.__prime),this._pub=void 0,this._priv=void 0,h?(this.setPublicKey=d,this.setPrivateKey=e,g(this,f(this.__prime,b))):g(this,8),this._makeNum=function(){return c.randomBytes(a.length)}}function i(a,b){var d=new c(a.toArray());return b?d.toString(b):d}var j=a("bn.js"),k=a("miller-rabin"),l=new k,m=new j(24),n=new j(11),o=new j(10),p=new j(3),q=new j(7),r=a("./generatePrime");b.exports=h;var s={};h.prototype.generateKeys=function(){return this._priv||(this._priv=new j(this._makeNum())),this._pub=this._gen.toRed(this._prime).redPow(this._priv).fromRed(),this.getPublicKey()},h.prototype.computeSecret=function(a){a=new j(a),a=a.toRed(this._prime);var b=a.redPow(this._priv).fromRed(),d=new c(b.toArray()),e=this.getPrime();if(d.length<e.length){var f=new c(e.length-d.length);f.fill(0),d=c.concat([f,d])}return d},h.prototype.getPublicKey=function(a){return i(this._pub,a)},h.prototype.getPrivateKey=function(a){return i(this._priv,a)},h.prototype.getPrime=function(a){return i(this.__prime,a)},h.prototype.getGenerator=function(a){return i(this._gen,a)},h.prototype.setGenerator=function(a,b){b=b||"utf8",c.isBuffer(a)||(a=new c(a,b)),this._gen=new j(a)}}).call(this,a("buffer").Buffer)},{"./generatePrime":429,"bn.js":431,buffer:324,"miller-rabin":432}],429:[function(a,b){function c(){if(null!==u)return u;var a=1048576,b=[];b[0]=2;for(var c=1,d=3;a>d;d+=2){for(var e=Math.ceil(Math.sqrt(d)),f=0;c>f&&b[f]<=e&&d%b[f]!==0;f++);c!==f&&b[f]<=e||(b[c++]=d)}return u=b,b}function d(a){for(var b=c(),d=0;d<b.length;d++)if(0===a.modn(b[d]))return 0===a.cmpn(b[d])?!0:!1;return!0}function e(a){var b=g.mont(a);return 0===l.toRed(b).redPow(a.subn(1)).fromRed().cmpn(1)}function f(a,b,c){function f(a){i=-1;for(var d=new g(c.randomBytes(Math.ceil(a/8)));d.bitLength()>a;)d.ishrn(1);if(d.isEven()&&d.iadd(k),d.testn(1)||d.iadd(l),b.cmp(l))if(b.cmp(m))u={major:[s],minor:[l]};else{for(rem=d.mod(p);rem.cmp(q);)d.iadd(s),rem=d.mod(p);u={major:[s,n],minor:[l,o]}}else{for(;d.mod(h).cmp(r);)d.iadd(s);u={major:[h],minor:[t]}}return d}if(16>a)return new g(2===b||5===b?[140,123]:[140,39]);b=new g(b);for(var i,u,v=f(a),w=v.shrn(1);;){for(;v.bitLength()>a;)v=f(a),w=v.shrn(1);if(i++,d(w)&&d(v)&&e(w)&&e(v)&&j.test(w)&&j.test(v))return v;v.iadd(u.major[i%u.major.length]),w.iadd(u.minor[i%u.minor.length])}}b.exports=f,f.simpleSieve=d,f.fermatTest=e;var g=a("bn.js"),h=new g(24),i=a("miller-rabin"),j=new i,k=new g(1),l=new g(2),m=new g(5),n=new g(16),o=new g(8),p=new g(10),q=new g(3),r=(new g(7),new g(11)),s=new g(4),t=new g(12),u=null},{"bn.js":431,"miller-rabin":432}],432:[function(a,b){function c(a){this.rand=a||new e.Rand}var d=a("bn.js"),e=a("brorand");b.exports=c,c.create=function(a){return new c(a)},c.prototype._rand=function(a){var b=a.bitLength(),c=this.rand.generate(Math.ceil(b/8));c[0]|=3;var e=7&b;return 0!==e&&(c[c.length-1]>>=7-e),new d(c)},c.prototype.test=function(a,b,c){var e=a.bitLength(),f=d.mont(a),g=new d(1).toRed(f);b||(b=Math.max(1,e/48|0));for(var h=a.subn(1),i=h.subn(1),j=0;!h.testn(j);j++);for(var k=a.shrn(j),l=h.toRed(f),m=!0;b>0;b--){var n=this._rand(i);c&&c(n);var o=n.toRed(f).redPow(k);if(0!==o.cmp(g)&&0!==o.cmp(l)){for(var p=1;j>p;p++){if(o=o.redSqr(),0===o.cmp(g))return!1;if(0===o.cmp(l))break}if(p===j)return!1}}return m},c.prototype.getDivisor=function(a,b){var c=a.bitLength(),e=d.mont(a),f=new d(1).toRed(e);b||(b=Math.max(1,c/48|0));for(var g=a.subn(1),h=g.subn(1),i=0;!g.testn(i);i++);for(var j=a.shrn(i),k=g.toRed(e),l=!0;b>0;b--){var m=this._rand(h),n=a.gcd(m);if(0!==n.cmpn(1))return n;var o=m.toRed(e).redPow(j);if(0!==o.cmp(f)&&0!==o.cmp(k)){for(var p=1;i>p;p++){if(o=o.redSqr(),0===o.cmp(f))return o.fromRed().subn(1).gcd(a);if(0===o.cmp(k))break}if(p===i)return o=o.redSqr(),o.fromRed().subn(1).gcd(a)}}return l}},{"bn.js":431,brorand:433}],433:[function(a,b,c){arguments[4][363][0].apply(c,arguments)},{dup:363}],431:[function(a,b,c){arguments[4][349][0].apply(c,arguments)},{dup:349}],427:[function(a,b){(function(c){"use strict";function d(a,b){if(!(this instanceof d))return new d(a,b);f.call(this),this._opad=j,this._alg=a;var g="sha512"===a||"sha384"===a?128:64;b=this._key=c.isBuffer(b)?b:new c(b),b.length>g?b=e(a).update(b).digest():b.length<g&&(b=c.concat([b,h],g));for(var i=this._ipad=new c(g),j=this._opad=new c(g),k=0;g>k;k++)i[k]=54^b[k],j[k]=92^b[k];this._hash=e(a).update(i)}var e=a("create-hash/browser"),f=a("stream").Transform,g=a("inherits"),h=new c(128);h.fill(0),b.exports=d,g(d,f),d.prototype.update=function(a,b){return this.write(a,b),this},d.prototype._transform=function(a,b,c){this._hash.update(a),c()},d.prototype._flush=function(a){var b=this._hash.digest();this.push(e(this._alg).update(this._opad).update(b).digest()),a()},d.prototype.digest=function(a){this.end();for(var b,d=new c("");b=this.read();)d=c.concat([d,b]);return a&&(d=d.toString(a)),d}}).call(this,a("buffer").Buffer)},{buffer:324,"create-hash/browser":416,inherits:467,stream:486}],416:[function(a,b){(function(c){"use strict";function d(a){i.call(this),this._hash=a,this.buffers=[]}function e(a){i.call(this),this._hash=a}var f=a("sha.js"),g=a("./md5"),h=a("ripemd160"),i=a("stream").Transform,j=a("inherits");b.exports=function(a){return"md5"===a?new d(g):"rmd160"===a?new d(h):new e(f(a))},j(d,i),d.prototype._transform=function(a,b,c){this.buffers.push(a),c()},d.prototype._flush=function(a){var b=c.concat(this.buffers),d=this._hash(b);this.buffers=null,this.push(d),a()},d.prototype.update=function(a,b){return this.write(a,b),this},d.prototype.digest=function(a){this.end();for(var b,d=new c("");b=this.read();)d=c.concat([d,b]);return a&&(d=d.toString(a)),d},j(e,i),e.prototype._transform=function(a,b,c){this._hash.update(a),c()},e.prototype._flush=function(a){this.push(this._hash.digest()),this._hash=null,a()},e.prototype.update=function(a,b){return this.write(a,b),this},e.prototype.digest=function(a){this.end();for(var b,d=new c("");b=this.read();)d=c.concat([d,b]);return a&&(d=d.toString(a)),d}}).call(this,a("buffer").Buffer)},{"./md5":418,buffer:324,inherits:467,ripemd160:419,"sha.js":421,stream:486}],421:[function(a,b,c){var c=b.exports=function(a){var b=c[a.toLowerCase()];if(!b)throw new Error(a+" is not supported (we accept pull requests)");return new b};c.sha1=a("./sha1"),c.sha224=a("./sha224"),c.sha256=a("./sha256"),c.sha384=a("./sha384"),c.sha512=a("./sha512")},{"./sha1":422,"./sha224":423,"./sha256":424,"./sha384":425,"./sha512":426}],425:[function(a,b){(function(c){function d(){this.init(),this._w=h,g.call(this,128,112)}var e=a("inherits"),f=a("./sha512"),g=a("./hash"),h=new Array(160);e(d,f),d.prototype.init=function(){return this._a=-876896931,this._b=1654270250,this._c=-1856437926,this._d=355462360,this._e=1731405415,this._f=-1900787065,this._g=-619958771,this._h=1203062813,this._al=-1056596264,this._bl=914150663,this._cl=812702999,this._dl=-150054599,this._el=-4191439,this._fl=1750603025,this._gl=1694076839,this._hl=-1090891868,this},d.prototype._hash=function(){function a(a,c,d){b.writeInt32BE(a,d),b.writeInt32BE(c,d+4)}var b=new c(48);return a(this._a,this._al,0),a(this._b,this._bl,8),a(this._c,this._cl,16),a(this._d,this._dl,24),a(this._e,this._el,32),a(this._f,this._fl,40),b},b.exports=d}).call(this,a("buffer").Buffer)},{"./hash":420,"./sha512":426,buffer:324,inherits:467}],426:[function(a,b){(function(c){function d(){this.init(),this._w=k,i.call(this,128,112)}function e(a,b,c){return a>>>c|b<<32-c}function f(a,b,c){return a&b^~a&c}function g(a,b,c){return a&b^a&c^b&c}var h=a("inherits"),i=a("./hash"),j=[1116352408,3609767458,1899447441,602891725,3049323471,3964484399,3921009573,2173295548,961987163,4081628472,1508970993,3053834265,2453635748,2937671579,2870763221,3664609560,3624381080,2734883394,310598401,1164996542,607225278,1323610764,1426881987,3590304994,1925078388,4068182383,2162078206,991336113,2614888103,633803317,3248222580,3479774868,3835390401,2666613458,4022224774,944711139,264347078,2341262773,604807628,2007800933,770255983,1495990901,1249150122,1856431235,1555081692,3175218132,1996064986,2198950837,2554220882,3999719339,2821834349,766784016,2952996808,2566594879,3210313671,3203337956,3336571891,1034457026,3584528711,2466948901,113926993,3758326383,338241895,168717936,666307205,1188179964,773529912,1546045734,1294757372,1522805485,1396182291,2643833823,1695183700,2343527390,1986661051,1014477480,2177026350,1206759142,2456956037,344077627,2730485921,1290863460,2820302411,3158454273,3259730800,3505952657,3345764771,106217008,3516065817,3606008344,3600352804,1432725776,4094571909,1467031594,275423344,851169720,430227734,3100823752,506948616,1363258195,659060556,3750685593,883997877,3785050280,958139571,3318307427,1322822218,3812723403,1537002063,2003034995,1747873779,3602036899,1955562222,1575990012,2024104815,1125592928,2227730452,2716904306,2361852424,442776044,2428436474,593698344,2756734187,3733110249,3204031479,2999351573,3329325298,3815920427,3391569614,3928383900,3515267271,566280711,3940187606,3454069534,4118630271,4000239992,116418474,1914138554,174292421,2731055270,289380356,3203993006,460393269,320620315,685471733,587496836,852142971,1086792851,1017036298,365543100,1126000580,2618297676,1288033470,3409855158,1501505948,4234509866,1607167915,987167468,1816402316,1246189591],k=new Array(160);h(d,i),d.prototype.init=function(){return this._a=1779033703,this._b=-1150833019,this._c=1013904242,this._d=-1521486534,this._e=1359893119,this._f=-1694144372,this._g=528734635,this._h=1541459225,this._al=-205731576,this._bl=-2067093701,this._cl=-23791573,this._dl=1595750129,this._el=-1377402159,this._fl=725511199,this._gl=-79577749,this._hl=327033209,this},d.prototype._update=function(a){function b(){var a=i[B-30],b=i[B-30+1],c=e(a,b,1)^e(a,b,8)^a>>>7,f=e(b,a,1)^e(b,a,8)^e(b,a,7);a=i[B-4],b=i[B-4+1];var g=e(a,b,19)^e(b,a,29)^a>>>6,j=e(b,a,19)^e(a,b,29)^e(b,a,6),k=i[B-14],l=i[B-14+1],m=i[B-32],n=i[B-32+1];h=f+l,d=c+k+(f>>>0>h>>>0?1:0),h+=j,d=d+g+(j>>>0>h>>>0?1:0),h+=n,d=d+m+(n>>>0>h>>>0?1:0)}function c(){i[B]=d,i[B+1]=h;var a=g(k,l,m),b=g(s,t,u),c=e(k,s,28)^e(s,k,2)^e(s,k,7),C=e(s,k,28)^e(k,s,2)^e(k,s,7),D=e(o,w,14)^e(o,w,18)^e(w,o,9),E=e(w,o,14)^e(w,o,18)^e(o,w,9),F=j[B],G=j[B+1],H=f(o,p,q),I=f(w,x,y),J=z+E,K=r+D+(z>>>0>J>>>0?1:0);J+=I,K=K+H+(I>>>0>J>>>0?1:0),J+=G,K=K+F+(G>>>0>J>>>0?1:0),J+=h,K=K+d+(h>>>0>J>>>0?1:0);var L=C+b,M=c+a+(C>>>0>L>>>0?1:0);r=q,z=y,q=p,y=x,p=o,x=w,w=v+J|0,o=n+K+(v>>>0>w>>>0?1:0)|0,n=m,v=u,m=l,u=t,l=k,t=s,s=J+L|0,k=K+M+(J>>>0>s>>>0?1:0)|0,A++,B+=2}for(var d,h,i=this._w,k=0|this._a,l=0|this._b,m=0|this._c,n=0|this._d,o=0|this._e,p=0|this._f,q=0|this._g,r=0|this._h,s=0|this._al,t=0|this._bl,u=0|this._cl,v=0|this._dl,w=0|this._el,x=0|this._fl,y=0|this._gl,z=0|this._hl,A=0,B=0;16>A;)d=a.readInt32BE(4*B),h=a.readInt32BE(4*B+4),c();for(;80>A;)b(),c();this._al=this._al+s|0,this._bl=this._bl+t|0,this._cl=this._cl+u|0,this._dl=this._dl+v|0,this._el=this._el+w|0,this._fl=this._fl+x|0,this._gl=this._gl+y|0,this._hl=this._hl+z|0,this._a=this._a+k+(this._al>>>0<s>>>0?1:0)|0,this._b=this._b+l+(this._bl>>>0<t>>>0?1:0)|0,this._c=this._c+m+(this._cl>>>0<u>>>0?1:0)|0,this._d=this._d+n+(this._dl>>>0<v>>>0?1:0)|0,this._e=this._e+o+(this._el>>>0<w>>>0?1:0)|0,this._f=this._f+p+(this._fl>>>0<x>>>0?1:0)|0,this._g=this._g+q+(this._gl>>>0<y>>>0?1:0)|0,this._h=this._h+r+(this._hl>>>0<z>>>0?1:0)|0},d.prototype._hash=function(){function a(a,c,d){b.writeInt32BE(a,d),b.writeInt32BE(c,d+4)}var b=new c(64);return a(this._a,this._al,0),a(this._b,this._bl,8),a(this._c,this._cl,16),a(this._d,this._dl,24),a(this._e,this._el,32),a(this._f,this._fl,40),a(this._g,this._gl,48),a(this._h,this._hl,56),b},b.exports=d}).call(this,a("buffer").Buffer)},{"./hash":420,buffer:324,inherits:467}],423:[function(a,b){(function(c){function d(){this.init(),this._w=h,g.call(this,64,56)}var e=a("inherits"),f=a("./sha256"),g=a("./hash"),h=new Array(64);e(d,f),d.prototype.init=function(){return this._a=-1056596264,this._b=914150663,this._c=812702999,this._d=-150054599,this._e=-4191439,this._f=1750603025,this._g=1694076839,this._h=-1090891868,this},d.prototype._hash=function(){var a=new c(28);return a.writeInt32BE(this._a,0),a.writeInt32BE(this._b,4),a.writeInt32BE(this._c,8),a.writeInt32BE(this._d,12),a.writeInt32BE(this._e,16),a.writeInt32BE(this._f,20),a.writeInt32BE(this._g,24),a},b.exports=d}).call(this,a("buffer").Buffer)},{"./hash":420,"./sha256":424,buffer:324,inherits:467}],424:[function(a,b){(function(c){function d(){this.init(),this._w=p,n.call(this,64,56)}function e(a,b){return a>>>b|a<<32-b}function f(a,b){return a>>>b}function g(a,b,c){return a&b^~a&c}function h(a,b,c){return a&b^a&c^b&c}function i(a){return e(a,2)^e(a,13)^e(a,22)}function j(a){return e(a,6)^e(a,11)^e(a,25)}function k(a){return e(a,7)^e(a,18)^f(a,3)}function l(a){return e(a,17)^e(a,19)^f(a,10)}var m=a("inherits"),n=a("./hash"),o=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298],p=new Array(64);m(d,n),d.prototype.init=function(){return this._a=1779033703,this._b=-1150833019,this._c=1013904242,this._d=-1521486534,this._e=1359893119,this._f=-1694144372,this._g=528734635,this._h=1541459225,this},d.prototype._update=function(a){function b(){return l(d[t-2])+d[t-7]+k(d[t-15])+d[t-16]}function c(a){d[t]=a;var b=s+j(p)+g(p,q,r)+o[t]+a,c=i(e)+h(e,f,m);s=r,r=q,q=p,p=n+b,n=m,m=f,f=e,e=b+c,t++}for(var d=this._w,e=0|this._a,f=0|this._b,m=0|this._c,n=0|this._d,p=0|this._e,q=0|this._f,r=0|this._g,s=0|this._h,t=0;16>t;)c(a.readInt32BE(4*t));for(;64>t;)c(b());this._a=e+this._a|0,this._b=f+this._b|0,this._c=m+this._c|0,this._d=n+this._d|0,this._e=p+this._e|0,this._f=q+this._f|0,this._g=r+this._g|0,this._h=s+this._h|0},d.prototype._hash=function(){var a=new c(32);return a.writeInt32BE(this._a,0),a.writeInt32BE(this._b,4),a.writeInt32BE(this._c,8),a.writeInt32BE(this._d,12),a.writeInt32BE(this._e,16),a.writeInt32BE(this._f,20),a.writeInt32BE(this._g,24),a.writeInt32BE(this._h,28),a},b.exports=d}).call(this,a("buffer").Buffer)},{"./hash":420,buffer:324,inherits:467}],422:[function(a,b){(function(c){function d(){this.init(),this._w=h,g.call(this,64,56)}function e(a,b){return a<<b|a>>>32-b}var f=a("inherits"),g=a("./hash"),h=new Array(80);f(d,g),d.prototype.init=function(){return this._a=1732584193,this._b=4023233417,this._c=2562383102,this._d=271733878,this._e=3285377520,this},d.prototype._update=function(a){function b(){return e(f[l-3]^f[l-8]^f[l-14]^f[l-16],1)}function c(a,b){f[l]=a;var c=e(g,5)+b+k+a+d;k=j,j=i,i=e(h,30),h=g,g=c,l++}var d,f=this._w,g=this._a,h=this._b,i=this._c,j=this._d,k=this._e,l=0;for(d=1518500249;16>l;)c(a.readInt32BE(4*l),h&i|~h&j);for(;20>l;)c(b(),h&i|~h&j);for(d=1859775393;40>l;)c(b(),h^i^j);for(d=-1894007588;60>l;)c(b(),h&i|h&j|i&j);for(d=-899497514;80>l;)c(b(),h^i^j);this._a=g+this._a|0,this._b=h+this._b|0,this._c=i+this._c|0,this._d=j+this._d|0,this._e=k+this._e|0},d.prototype._hash=function(){var a=new c(20);return a.writeInt32BE(0|this._a,0),a.writeInt32BE(0|this._b,4),a.writeInt32BE(0|this._c,8),a.writeInt32BE(0|this._d,12),a.writeInt32BE(0|this._e,16),a},b.exports=d}).call(this,a("buffer").Buffer)},{"./hash":420,buffer:324,inherits:467}],420:[function(a,b){(function(a){function c(b,c){this._block=new a(b),this._finalSize=c,this._blockSize=b,this._len=0,this._s=0}c.prototype.update=function(b,c){"string"==typeof b&&(c=c||"utf8",b=new a(b,c));for(var d=this._len+=b.length,e=this._s||0,f=0,g=this._block;d>e;){for(var h=Math.min(b.length,f+this._blockSize-e%this._blockSize),i=h-f,j=0;i>j;j++)g[e%this._blockSize+j]=b[j+f];e+=i,f+=i,e%this._blockSize===0&&this._update(g)}return this._s=e,this},c.prototype.digest=function(a){var b=8*this._len;this._block[this._len%this._blockSize]=128,this._block.fill(0,this._len%this._blockSize+1),b%(8*this._blockSize)>=8*this._finalSize&&(this._update(this._block),this._block.fill(0)),this._block.writeInt32BE(b,this._blockSize-4);var c=this._update(this._block)||this._hash();return a?c.toString(a):c},c.prototype._update=function(){throw new Error("_update must be implemented by subclass")},b.exports=c}).call(this,a("buffer").Buffer)},{buffer:324}],419:[function(a,b){(function(a){function c(a){for(var b=[],c=0,d=0;c<a.length;c++,d+=8)b[d>>>5]|=a[c]<<24-d%32;return b}function d(a){for(var b=[],c=0;c<32*a.length;c+=8)b.push(a[c>>>5]>>>24-c%32&255);return b}function e(a,b,c){for(var d=0;16>d;d++){var e=c+d,l=b[e];b[e]=16711935&(l<<8|l>>>24)|4278255360&(l<<24|l>>>8)}var s,t,u,v,w,x,y,z,A,B;x=s=a[0],y=t=a[1],z=u=a[2],A=v=a[3],B=w=a[4];for(var C,d=0;80>d;d+=1)C=s+b[c+m[d]]|0,C+=16>d?f(t,u,v)+q[0]:32>d?g(t,u,v)+q[1]:48>d?h(t,u,v)+q[2]:64>d?i(t,u,v)+q[3]:j(t,u,v)+q[4],C=0|C,C=k(C,o[d]),C=C+w|0,s=w,w=v,v=k(u,10),u=t,t=C,C=x+b[c+n[d]]|0,C+=16>d?j(y,z,A)+r[0]:32>d?i(y,z,A)+r[1]:48>d?h(y,z,A)+r[2]:64>d?g(y,z,A)+r[3]:f(y,z,A)+r[4],C=0|C,C=k(C,p[d]),C=C+B|0,x=B,B=A,A=k(z,10),z=y,y=C;C=a[1]+u+A|0,a[1]=a[2]+v+B|0,a[2]=a[3]+w+x|0,a[3]=a[4]+s+y|0,a[4]=a[0]+t+z|0,a[0]=C}function f(a,b,c){return a^b^c}function g(a,b,c){return a&b|~a&c}function h(a,b,c){return(a|~b)^c}function i(a,b,c){return a&c|b&~c}function j(a,b,c){return a^(b|~c)}function k(a,b){return a<<b|a>>>32-b}function l(b){var f=[1732584193,4023233417,2562383102,271733878,3285377520];"string"==typeof b&&(b=new a(b,"utf8"));var g=c(b),h=8*b.length,i=8*b.length;g[h>>>5]|=128<<24-h%32,g[(h+64>>>9<<4)+14]=16711935&(i<<8|i>>>24)|4278255360&(i<<24|i>>>8);for(var j=0;j<g.length;j+=16)e(f,g,j);for(var j=0;5>j;j++){var k=f[j];f[j]=16711935&(k<<8|k>>>24)|4278255360&(k<<24|k>>>8)}var l=d(f);return new a(l)}var m=[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,7,4,13,1,10,6,15,3,12,0,9,5,2,14,11,8,3,10,14,4,9,15,8,1,2,7,0,6,13,11,5,12,1,9,11,10,0,8,12,4,13,3,7,15,14,5,6,2,4,0,5,9,7,12,2,10,14,1,3,8,11,6,15,13],n=[5,14,7,0,9,2,11,4,13,6,15,8,1,10,3,12,6,11,3,7,0,13,5,10,14,15,8,12,4,9,1,2,15,5,1,3,7,14,6,9,11,8,12,2,10,0,4,13,8,6,4,1,3,11,15,0,5,12,2,13,9,7,10,14,12,15,10,4,1,5,8,7,6,2,13,14,0,3,9,11],o=[11,14,15,12,5,8,7,9,11,13,14,15,6,7,9,8,7,6,8,13,11,9,7,15,7,12,15,9,11,7,13,12,11,13,6,7,14,9,13,15,14,8,13,6,5,12,7,5,11,12,14,15,14,15,9,8,9,14,5,6,8,6,5,12,9,15,5,11,6,8,13,12,5,12,13,14,11,8,5,6],p=[8,9,9,11,13,15,15,5,7,7,8,11,14,14,12,6,9,13,15,7,12,8,9,11,7,7,12,7,6,15,13,11,9,7,15,11,8,6,6,14,12,13,5,14,13,13,7,5,15,5,8,11,14,14,6,14,6,9,12,9,12,5,15,8,8,5,12,9,12,5,14,6,8,13,6,5,15,13,11,11],q=[0,1518500249,1859775393,2400959708,2840853838],r=[1352829926,1548603684,1836072691,2053994217,0];b.exports=l}).call(this,a("buffer").Buffer)},{buffer:324}],418:[function(a,b){"use strict";function c(a,b){a[b>>5]|=128<<b%32,a[(b+64>>>9<<4)+14]=b;for(var c=1732584193,d=-271733879,j=-1732584194,k=271733878,l=0;l<a.length;l+=16){var m=c,n=d,o=j,p=k;c=e(c,d,j,k,a[l+0],7,-680876936),k=e(k,c,d,j,a[l+1],12,-389564586),j=e(j,k,c,d,a[l+2],17,606105819),d=e(d,j,k,c,a[l+3],22,-1044525330),c=e(c,d,j,k,a[l+4],7,-176418897),k=e(k,c,d,j,a[l+5],12,1200080426),j=e(j,k,c,d,a[l+6],17,-1473231341),d=e(d,j,k,c,a[l+7],22,-45705983),c=e(c,d,j,k,a[l+8],7,1770035416),k=e(k,c,d,j,a[l+9],12,-1958414417),j=e(j,k,c,d,a[l+10],17,-42063),d=e(d,j,k,c,a[l+11],22,-1990404162),c=e(c,d,j,k,a[l+12],7,1804603682),k=e(k,c,d,j,a[l+13],12,-40341101),j=e(j,k,c,d,a[l+14],17,-1502002290),d=e(d,j,k,c,a[l+15],22,1236535329),c=f(c,d,j,k,a[l+1],5,-165796510),k=f(k,c,d,j,a[l+6],9,-1069501632),j=f(j,k,c,d,a[l+11],14,643717713),d=f(d,j,k,c,a[l+0],20,-373897302),c=f(c,d,j,k,a[l+5],5,-701558691),k=f(k,c,d,j,a[l+10],9,38016083),j=f(j,k,c,d,a[l+15],14,-660478335),d=f(d,j,k,c,a[l+4],20,-405537848),c=f(c,d,j,k,a[l+9],5,568446438),k=f(k,c,d,j,a[l+14],9,-1019803690),j=f(j,k,c,d,a[l+3],14,-187363961),d=f(d,j,k,c,a[l+8],20,1163531501),c=f(c,d,j,k,a[l+13],5,-1444681467),k=f(k,c,d,j,a[l+2],9,-51403784),j=f(j,k,c,d,a[l+7],14,1735328473),d=f(d,j,k,c,a[l+12],20,-1926607734),c=g(c,d,j,k,a[l+5],4,-378558),k=g(k,c,d,j,a[l+8],11,-2022574463),j=g(j,k,c,d,a[l+11],16,1839030562),d=g(d,j,k,c,a[l+14],23,-35309556),c=g(c,d,j,k,a[l+1],4,-1530992060),k=g(k,c,d,j,a[l+4],11,1272893353),j=g(j,k,c,d,a[l+7],16,-155497632),d=g(d,j,k,c,a[l+10],23,-1094730640),c=g(c,d,j,k,a[l+13],4,681279174),k=g(k,c,d,j,a[l+0],11,-358537222),j=g(j,k,c,d,a[l+3],16,-722521979),d=g(d,j,k,c,a[l+6],23,76029189),c=g(c,d,j,k,a[l+9],4,-640364487),k=g(k,c,d,j,a[l+12],11,-421815835),j=g(j,k,c,d,a[l+15],16,530742520),d=g(d,j,k,c,a[l+2],23,-995338651),c=h(c,d,j,k,a[l+0],6,-198630844),k=h(k,c,d,j,a[l+7],10,1126891415),j=h(j,k,c,d,a[l+14],15,-1416354905),d=h(d,j,k,c,a[l+5],21,-57434055),c=h(c,d,j,k,a[l+12],6,1700485571),k=h(k,c,d,j,a[l+3],10,-1894986606),j=h(j,k,c,d,a[l+10],15,-1051523),d=h(d,j,k,c,a[l+1],21,-2054922799),c=h(c,d,j,k,a[l+8],6,1873313359),k=h(k,c,d,j,a[l+15],10,-30611744),j=h(j,k,c,d,a[l+6],15,-1560198380),d=h(d,j,k,c,a[l+13],21,1309151649),c=h(c,d,j,k,a[l+4],6,-145523070),k=h(k,c,d,j,a[l+11],10,-1120210379),j=h(j,k,c,d,a[l+2],15,718787259),d=h(d,j,k,c,a[l+9],21,-343485551),c=i(c,m),d=i(d,n),j=i(j,o),k=i(k,p)}return Array(c,d,j,k)}function d(a,b,c,d,e,f){return i(j(i(i(b,a),i(d,f)),e),c)}function e(a,b,c,e,f,g,h){return d(b&c|~b&e,a,b,f,g,h)}function f(a,b,c,e,f,g,h){return d(b&e|c&~e,a,b,f,g,h)}function g(a,b,c,e,f,g,h){return d(b^c^e,a,b,f,g,h)}function h(a,b,c,e,f,g,h){return d(c^(b|~e),a,b,f,g,h)}function i(a,b){var c=(65535&a)+(65535&b),d=(a>>16)+(b>>16)+(c>>16);return d<<16|65535&c}function j(a,b){return a<<b|a>>>32-b}var k=a("./helpers");b.exports=function(a){return k.hash(a,c,16)}},{"./helpers":417}],417:[function(a,b,c){(function(a){"use strict";function b(b,c){if(b.length%f!==0){var d=b.length+(f-b.length%f);b=a.concat([b,g],d)}for(var e=[],h=c?b.readInt32BE:b.readInt32LE,i=0;i<b.length;i+=f)e.push(h.call(b,i));return e}function d(b,c,d){for(var e=new a(c),f=d?e.writeInt32BE:e.writeInt32LE,g=0;g<b.length;g++)f.call(e,b[g],4*g,!0);return e}function e(c,e,f,g){a.isBuffer(c)||(c=new a(c));var i=e(b(c,g),c.length*h);return d(i,f,g)}var f=4,g=new a(f);g.fill(0);var h=8;c.hash=e}).call(this,a("buffer").Buffer)},{buffer:324}],394:[function(a,b){var c=a("./ecdh");b.exports=function(a,b){b.createECDH=function(b){return new c(b,a)}}},{"./ecdh":393}],393:[function(a,b){(function(c){function d(a,b){f.rand=b.randomBytes,this.curve=new f.ec(a),this.keys=void 0}function e(a,b){Array.isArray(a)||(a=a.toArray());var d=new c(a);return b?d.toString(b):d}var f=a("elliptic"),g=a("bn.js");b.exports=d,d.prototype.generateKeys=function(a,b){return this.keys=this.curve.genKeyPair(),this.getPublicKey(a,b)},d.prototype.computeSecret=function(a,b,d){b=b||"utf8",c.isBuffer(a)||(a=new c(a,b)),a=new g(a),a=a.toString(16);var f=this.curve.keyPair(a,"hex").getPublic(),h=f.mul(this.keys.getPrivate()).getX();return e(h,d)},d.prototype.getPublicKey=function(a,b){var c=this.keys.getPublic("compressed"===b,!0);return"hybrid"===b&&(c[0]=c[c.length-1]%2?7:6),e(c,a)},d.prototype.getPrivateKey=function(a){return e(this.keys.getPrivate(),a)},d.prototype.setPublicKey=function(a,b){b=b||"utf8",c.isBuffer(a)||(a=new c(a,b));var d=new g(a);d=d.toArray(),this.keys._importPublicHex(d)},d.prototype.setPrivateKey=function(a,b){b=b||"utf8",c.isBuffer(a)||(a=new c(a,b));var d=new g(a);d=d.toString(16),this.keys._importPrivate(d)}}).call(this,a("buffer").Buffer)},{"bn.js":395,buffer:324,elliptic:396}],396:[function(a,b,c){arguments[4][351][0].apply(c,arguments)},{"../package.json":415,"./elliptic/curve":399,"./elliptic/curves":402,"./elliptic/ec":403,"./elliptic/hmac-drbg":406,"./elliptic/utils":407,brorand:408,dup:351}],415:[function(a,b,c){arguments[4][370][0].apply(c,arguments)},{dup:370}],408:[function(a,b,c){arguments[4][363][0].apply(c,arguments)},{dup:363}],407:[function(a,b,c){arguments[4][362][0].apply(c,arguments)},{"bn.js":395,dup:362}],406:[function(a,b,c){arguments[4][361][0].apply(c,arguments)},{"../elliptic":396,dup:361,"hash.js":409}],403:[function(a,b,c){arguments[4][358][0].apply(c,arguments)},{"../../elliptic":396,"./key":404,"./signature":405,"bn.js":395,dup:358}],405:[function(a,b,c){arguments[4][360][0].apply(c,arguments)},{"../../elliptic":396,"bn.js":395,dup:360}],404:[function(a,b,c){arguments[4][359][0].apply(c,arguments)},{"../../elliptic":396,"bn.js":395,dup:359}],402:[function(a,b,c){arguments[4][357][0].apply(c,arguments)},{"../elliptic":396,"bn.js":395,dup:357,"hash.js":409}],409:[function(a,b,c){arguments[4][364][0].apply(c,arguments)},{"./hash/common":410,"./hash/hmac":411,"./hash/ripemd":412,"./hash/sha":413,"./hash/utils":414,dup:364}],414:[function(a,b,c){arguments[4][369][0].apply(c,arguments)},{dup:369,inherits:467}],413:[function(a,b,c){arguments[4][368][0].apply(c,arguments)},{"../hash":409,dup:368}],412:[function(a,b,c){arguments[4][367][0].apply(c,arguments)},{"../hash":409,dup:367}],411:[function(a,b,c){arguments[4][366][0].apply(c,arguments)},{"../hash":409,dup:366}],410:[function(a,b,c){arguments[4][365][0].apply(c,arguments)},{"../hash":409,dup:365}],399:[function(a,b,c){arguments[4][354][0].apply(c,arguments)},{"./base":397,"./edwards":398,"./mont":400,"./short":401,dup:354}],401:[function(a,b,c){arguments[4][356][0].apply(c,arguments)},{"../../elliptic":396,"../curve":399,"bn.js":395,dup:356,inherits:467}],400:[function(a,b,c){arguments[4][355][0].apply(c,arguments)},{"../../elliptic":396,"../curve":399,"bn.js":395,dup:355,inherits:467}],398:[function(a,b,c){arguments[4][353][0].apply(c,arguments)},{"../../elliptic":396,"../curve":399,"bn.js":395,dup:353,inherits:467}],397:[function(a,b,c){arguments[4][352][0].apply(c,arguments)},{"../../elliptic":396,"bn.js":395,dup:352}],395:[function(a,b,c){arguments[4][349][0].apply(c,arguments)},{dup:349}],348:[function(a,b){(function(c){function d(a,b){h.Writable.call(this);var c=k[a];if(!c)throw new Error("Unknown message digest");this._hashType=c.hash,this._hash=b.createHash(c.hash),this._tag=c.id,this._crypto=b}function e(a,b){h.Writable.call(this);var c=k[a];if(!c)throw new Error("Unknown message digest");this._hash=b.createHash(c.hash),this._tag=c.id}var f=a("./sign"),g=a("./verify"),h=a("stream"),i=a("inherits"),j=a("./algos"),k={};Object.keys(j).forEach(function(a){k[a]=k[a.toLowerCase()]=j[a]}),b.exports=function(a,b){function c(a){return new d(a,b)}function f(a){return new e(a,b)}a.createSign=a.Sign=c,a.createVerify=a.Verify=f},i(d,h.Writable),d.prototype._write=function(a,b,c){this._hash.update(a),c()},d.prototype.update=function(a){return this.write(a),this},d.prototype.sign=function(a,b){this.end();var d=this._hash.digest(),e=f(c.concat([this._tag,d]),a,this._hashType,this._crypto);return b&&(e=e.toString(b)),e},i(e,h.Writable),e.prototype._write=function(a,b,c){this._hash.update(a),c()},e.prototype.update=function(a){return this.write(a),this},e.prototype.verify=function(a,b,d){this.end();var e=this._hash.digest();return c.isBuffer(b)||(b=new c(b,d)),g(b,c.concat([this._tag,e]),a)}}).call(this,a("buffer").Buffer)},{"./algos":347,"./sign":391,"./verify":392,buffer:324,inherits:467,stream:486}],392:[function(a,b){(function(c){function d(a,b,d){var g=h(d);if("ec"===g.type)return e(a,b,g);if("dsa"===g.type)return f(a,b,g);for(var i=g.modulus.byteLength(),k=[0,1];b.length+k.length+1<i;)k.push(255);k.push(0);for(var l=-1;++l<b.length;)k.push(b[l]);k=b;var m=j.mont(g.modulus);a=new j(a).toRed(m),a=a.redPow(new j(g.publicExponent)),a=new c(a.fromRed().toArray()),a=a.slice(a.length-b.length);var n=0;for(i=a.length,l=-1;++l<i;)n+=a[l]^b[l];return!n}function e(a,b,c){var d;"1.3.132.0.10"===c.data.algorithm.curve.join(".")&&(d=new i.ec("secp256k1"));var e=c.data.subjectPrivateKey.data;return d.verify(b.toString("hex"),a.toString("hex"),e.toString("hex"))}function f(a,b,c){var d=c.data.p,e=c.data.q,f=c.data.g,i=c.data.pub_key,k=h.signature.decode(a,"der"),l=k.s,m=k.r;g(l,e),g(m,e);var n=(j.mont(e),j.mont(d)),o=l.invm(e),p=f.toRed(n).redPow(new j(b).mul(o).mod(e)).fromRed().mul(i.toRed(n).redPow(m.mul(o).mod(e)).fromRed()).mod(d).mod(e);return!p.cmp(m)}function g(a,b){if(a.cmpn(0)<=0)throw new Error("invalid sig");if(a.cmp(b)>=b)throw new Error("invalid sig")}var h=a("parse-asn1"),i=a("elliptic"),j=a("bn.js");b.exports=d}).call(this,a("buffer").Buffer)},{"bn.js":349,buffer:324,elliptic:351,"parse-asn1":375}],391:[function(a,b){(function(c){function d(a,b,c,d){var g=m(b,d);if(g.curve)return e(a,g,d);if("dsa"===g.type)return f(a,g,c,d);for(var h=g.modulus.byteLength(),i=[0,1];a.length+i.length+1<h;)i.push(255);i.push(0);for(var j=-1;++j<a.length;)i.push(a[j]);var k=p(i,g,d);return k}function e(a,b,d){o.rand=d.randomBytes;var e;"1.3.132.0.10"===b.curve.join(".")&&(e=new o.ec("secp256k1"));var f=e.genKeyPair();f._importPrivate(b.privateKey);var g=f.sign(a);return new c(g.toDER())}function f(a,b,c,d){for(var e,f=b.params.priv_key,j=b.params.p,m=b.params.q,o=(n.mont(m),b.params.g),p=new n(0),q=i(a,m).mod(m),r=!1,s=h(f,m,a,c,d);r===!1;)e=k(m,s,c,d),p=l(o,e,j,m),r=e.invm(m).imul(q.add(f.mul(p))).mod(m),r.cmpn(0)||(r=!1,p=new n(0));return g(p,r)}function g(a,b){a=a.toArray(),b=b.toArray(),128&a[0]&&(a=[0].concat(a)),128&b[0]&&(b=[0].concat(b));var d=a.length+b.length+4,e=[48,d,2,a.length];return e=e.concat(a,[2,b.length],b),new c(e)}function h(a,b,d,e,f){if(a=new c(a.toArray()),a.length<b.byteLength()){var g=new c(b.byteLength()-a.length);g.fill(0),a=c.concat([g,a])}var h=d.length,i=j(d,b),k=new c(h);k.fill(1);var l=new c(h);return l.fill(0),l=f.createHmac(e,l).update(k).update(new c([0])).update(a).update(i).digest(),k=f.createHmac(e,l).update(k).digest(),l=f.createHmac(e,l).update(k).update(new c([1])).update(a).update(i).digest(),k=f.createHmac(e,l).update(k).digest(),{k:l,v:k}}function i(a,b){bits=new n(a);var c=8*a.length-b.bitLength();return c>0&&bits.ishrn(c),bits}function j(a,b){a=i(a,b),a=a.mod(b);var d=new c(a.toArray());if(d.length<b.byteLength()){var e=new c(b.byteLength()-d.length);e.fill(0),d=c.concat([e,d])}return d}function k(a,b,d,e){for(var f,g;;){for(f=new c("");8*f.length<a.bitLength();)b.v=e.createHmac(d,b.k).update(b.v).digest(),f=c.concat([f,b.v]);if(g=i(f,a),b.k=e.createHmac(d,b.k).update(b.v).update(new c([0])).digest(),b.v=e.createHmac(d,b.k).update(b.v).digest(),-1===g.cmp(a))return g}}function l(a,b,c,d){return a.toRed(n.mont(c)).redPow(b).fromRed().mod(d)}var m=a("parse-asn1"),n=a("bn.js"),o=a("elliptic"),p=a("browserify-rsa");b.exports=d,b.exports.getKay=h,b.exports.makeKey=k}).call(this,a("buffer").Buffer)},{"bn.js":349,"browserify-rsa":350,buffer:324,elliptic:351,"parse-asn1":375}],375:[function(a,b){(function(c){function d(a,b){var d;"object"!=typeof a||c.isBuffer(a)||(d=a.passphrase,a=a.key),"string"==typeof a&&(a=new c(a)),d&&(a=i(a,d,b));var h,j,k=f.strip(a),l=k.tag,m=new c(k.base64,"base64");switch(l){case"PUBLIC KEY":switch(j=g.PublicKey.decode(m,"der"),h=j.algorithm.algorithm.join(".")){case"1.2.840.113549.1.1.1":return g.RSAPublicKey.decode(j.subjectPublicKey.data,"der");
case"1.2.840.10045.2.1":return{type:"ec",data:g.ECPublicKey.decode(m,"der")};case"1.2.840.10040.4.1":return j=g.DSAPublicKey.decode(m,"der"),j.algorithm.parameters.pub_key=g.DSAparam.decode(j.subjectPublicKey.data,"der"),{type:"dsa",data:j.algorithm.parameters};default:throw new Error("unknown key id "+h)}throw new Error("unknown key type "+l);case"ENCRYPTED PRIVATE KEY":m=g.EncryptedPrivateKey.decode(m,"der"),m=e(b,m,d);case"PRIVATE KEY":switch(j=g.PrivateKey.decode(m,"der"),h=j.algorithm.algorithm.join(".")){case"1.2.840.113549.1.1.1":return g.RSAPrivateKey.decode(j.subjectPrivateKey,"der");case"1.2.840.10045.2.1":return j=g.ECPrivateWrap.decode(m,"der"),{curve:j.algorithm.curve,privateKey:g.ECPrivateKey.decode(j.subjectPrivateKey,"der").privateKey};case"1.2.840.10040.4.1":return j=g.DSAPrivateWrap.decode(m,"der"),j.algorithm.parameters.priv_key=g.DSAparam.decode(j.subjectPrivateKey,"der"),{type:"dsa",params:j.algorithm.parameters};default:throw new Error("unknown key id "+h)}throw new Error("unknown key type "+l);case"RSA PUBLIC KEY":return g.RSAPublicKey.decode(m,"der");case"RSA PRIVATE KEY":return g.RSAPrivateKey.decode(m,"der");case"DSA PRIVATE KEY":return{type:"dsa",params:g.DSAPrivateKey.decode(m,"der")};case"EC PRIVATE KEY":return m=g.ECPrivateKey.decode(m,"der"),{curve:m.parameters.value,privateKey:m.privateKey};default:throw new Error("unknown key type "+l)}}function e(a,b,d){var e=b.algorithm.decrypt.kde.kdeparams.salt,f=b.algorithm.decrypt.kde.kdeparams.iters,g=h[b.algorithm.decrypt.cipher.algo.join(".")],i=b.algorithm.decrypt.cipher.iv,j=b.subjectPrivateKey,k=parseInt(g.split("-")[1],10)/8,l=a.pbkdf2Sync(d,e,f,k),m=a.createDecipheriv(g,l,i),n=[];return n.push(m.update(j)),n.push(m["final"]()),c.concat(n)}var f=a("pemstrip"),g=a("./asn1"),h=a("./aesid.json"),i=a("./fixProc");b.exports=d,d.signature=g.signature}).call(this,a("buffer").Buffer)},{"./aesid.json":372,"./asn1":373,"./fixProc":374,buffer:324,pemstrip:390}],390:[function(a,b,c){c.strip=function(a){a=a.toString();var b=/^-----BEGIN (.*)-----\n/,c=b.exec(a),d=c[1],e=new RegExp("\n-----END "+d+"-----(\n*)$"),f=a.slice(c[0].length).replace(e,"").replace(/\n/g,"");return{tag:d,base64:f}};var d=function(a,b){for(var c=[];a;){if(a.length<b){c.push(a);break}c.push(a.substr(0,b)),a=a.substr(b)}return c.join("\n")};c.assemble=function(a){var b=a.tag,c=a.base64,e="-----BEGIN "+b+"-----",f="-----END "+b+"-----";return e+"\n"+d(c,64)+"\n"+f+"\n"}},{}],374:[function(a,b){(function(c){function d(a){for(var b=[];a;){if(a.length<64){b.push(a);break}b.push(a.slice(0,64)),a=a.slice(64)}return b.join("\n")}var e=/Proc-Type: 4,ENCRYPTED\n\r?DEK-Info: AES-((?:128)|(?:192)|(?:256))-CBC,([0-9A-H]+)\n\r?\n\r?([0-9A-z\n\r\+\/\=]+)\n\r?/m,f=/^-----BEGIN (.*)-----\n/,g=a("./EVP_BytesToKey");b.exports=function(a,b,h){var i=a.toString(),j=i.match(e);if(!j)return a;var k="aes"+j[1],l=new c(j[2],"hex"),m=new c(j[3].replace(/\n\r?/g,""),"base64"),n=g(h,b,l.slice(0,8),parseInt(j[1])),o=[],p=h.createDecipheriv(k,n,l);o.push(p.update(m)),o.push(p["final"]());var q=c.concat(o).toString("base64"),r=i.match(f)[1];return"-----BEGIN "+r+"-----\n"+d(q)+"\n-----END "+r+"-----\n"}}).call(this,a("buffer").Buffer)},{"./EVP_BytesToKey":371,buffer:324}],371:[function(a,b){(function(a){b.exports=function(b,c,d,e){e/=8;for(var f,g,h,i=0,j=new a(e),k=0;;){if(f=b.createHash("md5"),k++>0&&f.update(g),f.update(c),f.update(d),g=f.digest(),h=0,e>0)for(;;){if(0===e)break;if(h===g.length)break;j[i++]=g[h++],e--}if(0===e)break}for(h=0;h<g.length;h++)g[h]=0;return j}}).call(this,a("buffer").Buffer)},{buffer:324}],373:[function(a,b,c){var d=a("asn1.js"),e=a("asn1.js-rfc3280"),f=d.define("RSAPrivateKey",function(){this.seq().obj(this.key("version")["int"](),this.key("modulus")["int"](),this.key("publicExponent")["int"](),this.key("privateExponent")["int"](),this.key("prime1")["int"](),this.key("prime2")["int"](),this.key("exponent1")["int"](),this.key("exponent2")["int"](),this.key("coefficient")["int"]())});c.RSAPrivateKey=f;var g=d.define("RSAPublicKey",function(){this.seq().obj(this.key("modulus")["int"](),this.key("publicExponent")["int"]())});c.RSAPublicKey=g;var h=e.SubjectPublicKeyInfo;c.PublicKey=h;var i=d.define("ECPublicKey",function(){this.seq().obj(this.key("algorithm").seq().obj(this.key("id").objid(),this.key("curve").objid()),this.key("subjectPrivateKey").bitstr())});c.ECPublicKey=i;var j=d.define("ECPrivateWrap",function(){this.seq().obj(this.key("version")["int"](),this.key("algorithm").seq().obj(this.key("id").objid(),this.key("curve").objid()),this.key("subjectPrivateKey").octstr())});c.ECPrivateWrap=j;var k=d.define("PrivateKeyInfo",function(){this.seq().obj(this.key("version")["int"](),this.key("algorithm").use(e.AlgorithmIdentifier),this.key("subjectPrivateKey").octstr())});c.PrivateKey=k;var l=d.define("EncryptedPrivateKeyInfo",function(){this.seq().obj(this.key("algorithm").seq().obj(this.key("id").objid(),this.key("decrypt").seq().obj(this.key("kde").seq().obj(this.key("id").objid(),this.key("kdeparams").seq().obj(this.key("salt").octstr(),this.key("iters")["int"]())),this.key("cipher").seq().obj(this.key("algo").objid(),this.key("iv").octstr()))),this.key("subjectPrivateKey").octstr())}),m=d.define("dsaParams",function(){this.seq().obj(this.key("algorithm").objid(),this.key("parameters").seq().obj(this.key("p")["int"](),this.key("q")["int"](),this.key("g")["int"]()))});c.EncryptedPrivateKey=l;var n=d.define("DSAPublicKey",function(){this.seq().obj(this.key("algorithm").use(m),this.key("subjectPublicKey").bitstr())});c.DSAPublicKey=n;var o=d.define("DSAPrivateWrap",function(){this.seq().obj(this.key("version")["int"](),this.key("algorithm").seq().obj(this.key("id").objid(),this.key("parameters").seq().obj(this.key("p")["int"](),this.key("q")["int"](),this.key("g")["int"]())),this.key("subjectPrivateKey").octstr())});c.DSAPrivateWrap=o;var p=d.define("DSAPrivateKey",function(){this.seq().obj(this.key("version")["int"](),this.key("p")["int"](),this.key("q")["int"](),this.key("g")["int"](),this.key("pub_key")["int"](),this.key("priv_key")["int"]())});c.DSAPrivateKey=p,c.DSAparam=d.define("DSAparam",function(){this["int"]()});var q=d.define("ECPrivateKey",function(){this.seq().obj(this.key("version")["int"](),this.key("privateKey").octstr(),this.key("parameters").optional().explicit(0).use(r),this.key("publicKey").optional().explicit(1).bitstr())});c.ECPrivateKey=q;var r=d.define("ECParameters",function(){this.choice({namedCurve:this.objid()})}),s=d.define("ECPrivateKey2",function(){this.seq().obj(this.key("version")["int"](),this.key("privateKey").octstr(),this.key("publicKey").seq().obj(this.key("key").bitstr()))});c.ECPrivateKey2=s,c.signature=d.define("signature",function(){this.seq().obj(this.key("r")["int"](),this.key("s")["int"]())})},{"asn1.js":377,"asn1.js-rfc3280":376}],376:[function(a,b,c){try{var d=a("asn1.js")}catch(e){var d=a("../..")}var f=d.define("CRLReason",function(){this["enum"]({0:"unspecified",1:"keyCompromise",2:"CACompromise",3:"affiliationChanged",4:"superseded",5:"cessationOfOperation",6:"certificateHold",8:"removeFromCRL",9:"privilegeWithdrawn",10:"AACompromise"})});c.CRLReason=f;var g=d.define("AlgorithmIdentifier",function(){this.seq().obj(this.key("algorithm").objid(),this.key("parameters").optional().any())});c.AlgorithmIdentifier=g;var h=d.define("Certificate",function(){this.seq().obj(this.key("tbsCertificate").use(i),this.key("signatureAlgorithm").use(g),this.key("signature").bitstr())});c.Certificate=h;var i=d.define("TBSCertificate",function(){this.seq().obj(this.key("version").def("v1").explicit(0).use(j),this.key("serialNumber").use(k),this.key("signature").use(g),this.key("issuer").use(r),this.key("validity").use(l),this.key("subject").use(r),this.key("subjectPublicKeyInfo").use(o),this.key("issuerUniqueID").optional().explicit(1).use(n),this.key("subjectUniqueID").optional().explicit(2).use(n),this.key("extensions").optional().explicit(3).use(p))});c.TBSCertificate=i;var j=d.define("Version",function(){this["int"]({0:"v1",1:"v2",2:"v3"})});c.Version=j;var k=d.define("CertificateSerialNumber",function(){this["int"]()});c.CertificateSerialNumber=k;var l=d.define("Validity",function(){this.seq().obj(this.key("notBefore").use(m),this.key("notAfter").use(m))});c.Validity=l;var m=d.define("Time",function(){this.choice({utcTime:this.utctime(),genTime:this.gentime()})});c.Time=m;var n=d.define("UniqueIdentifier",function(){this.bitstr()});c.UniqueIdentifier=n;var o=d.define("SubjectPublicKeyInfo",function(){this.seq().obj(this.key("algorithm").use(g),this.key("subjectPublicKey").bitstr())});c.SubjectPublicKeyInfo=o;var p=d.define("Extensions",function(){this.seqof(q)});c.Extensions=p;var q=d.define("Extension",function(){this.seq().obj(this.key("extnID").objid(),this.key("critical").bool().def(!1),this.key("extnValue").octstr())});c.Extension=q;var r=d.define("Name",function(){this.choice({rdn:this.use(s)})});c.Name=r;var s=d.define("RDNSequence",function(){this.seqof(t)});c.RDNSequence=s;var t=d.define("RelativeDistinguishedName",function(){this.setof(u)});c.RelativeDistinguishedName=t;var u=d.define("AttributeTypeAndValue",function(){this.seq().obj(this.key("type").use(v),this.key("value").use(w))});c.AttributeTypeAndValue=u;var v=d.define("AttributeType",function(){this.objid()});c.AttributeType=v;var w=d.define("AttributeValue",function(){this.any()});c.AttributeValue=w},{"asn1.js":377}],377:[function(a,b,c){var d=c;d.bignum=a("bn.js"),d.define=a("./asn1/api").define,d.base=a("./asn1/base"),d.constants=a("./asn1/constants"),d.decoders=a("./asn1/decoders"),d.encoders=a("./asn1/encoders")},{"./asn1/api":378,"./asn1/base":380,"./asn1/constants":384,"./asn1/decoders":386,"./asn1/encoders":388,"bn.js":349}],388:[function(a,b,c){var d=c;d.der=a("./der")},{"./der":387}],387:[function(a,b){function c(a){this.enc="der",this.name=a.name,this.entity=a,this.tree=new d,this.tree._init(a.body)}function d(a){j.Node.call(this,"der",a)}function e(a){return 10>=a?"0"+a:a}function f(a,b,c,d){var e;if("seqof"===a?a="seq":"setof"===a&&(a="set"),l.tagByName.hasOwnProperty(a))e=l.tagByName[a];else{if("number"!=typeof a||(0|a)!==a)return d.error("Unknown tag: "+a);e=a}return e>=31?d.error("Multi-octet tag encoding unsupported"):(b||(e|=32),e|=l.tagClassByName[c||"universal"]<<6)}var g=a("inherits"),h=a("buffer").Buffer,i=a("../../asn1"),j=i.base,k=i.bignum,l=i.constants.der;b.exports=c,c.prototype.encode=function(a,b){return this.tree._encode(a,b).join()},g(d,j.Node),d.prototype._encodeComposite=function(a,b,c,d){var e=f(a,b,c,this.reporter);if(d.length<128){var g=new h(2);return g[0]=e,g[1]=d.length,this._createEncoderBuffer([g,d])}for(var i=1,j=d.length;j>=256;j>>=8)i++;var g=new h(2+i);g[0]=e,g[1]=128|i;for(var j=1+i,k=d.length;k>0;j--,k>>=8)g[j]=255&k;return this._createEncoderBuffer([g,d])},d.prototype._encodeStr=function(a,b){return"octstr"===b?this._createEncoderBuffer(a):"bitstr"===b?this._createEncoderBuffer([0|a.unused,a.data]):"ia5str"===b?this._createEncoderBuffer(a):this.reporter.error("Encoding of string type: "+b+" unsupported")},d.prototype._encodeObjid=function(a,b,c){if("string"==typeof a){if(!b)return this.reporter.error("string objid given, but no values map found");if(!b.hasOwnProperty(a))return this.reporter.error("objid not found in values map");a=b[a].split(/\s+/g);for(var d=0;d<a.length;d++)a[d]|=0}else Array.isArray(a)&&(a=a.slice());if(!Array.isArray(a))return this.reporter.error("objid() should be either array or string, got: "+JSON.stringify(a));if(!c){if(a[1]>=40)return this.reporter.error("Second objid identifier OOB");a.splice(0,2,40*a[0]+a[1])}for(var e=0,d=0;d<a.length;d++){var f=a[d];for(e++;f>=128;f>>=7)e++}for(var g=new h(e),i=g.length-1,d=a.length-1;d>=0;d--){var f=a[d];for(g[i--]=127&f;(f>>=7)>0;)g[i--]=128|127&f}return this._createEncoderBuffer(g)},d.prototype._encodeTime=function(a,b){var c,d=new Date(a);return"gentime"===b?c=[d.getFullYear(),e(d.getUTCMonth()+1),e(d.getUTCDate()),e(d.getUTCHours()),e(d.getUTCMinutes()),e(d.getUTCSeconds()),"Z"].join(""):"utctime"===b?c=[d.getFullYear()%100,e(d.getUTCMonth()+1),e(d.getUTCDate()),e(d.getUTCHours()),e(d.getUTCMinutes()),e(d.getUTCSeconds()),"Z"].join(""):this.reporter.error("Encoding "+b+" time is not supported yet"),this._encodeStr(c,"octstr")},d.prototype._encodeNull=function(){return this._createEncoderBuffer("")},d.prototype._encodeInt=function(a,b){if("string"==typeof a){if(!b)return this.reporter.error("String int or enum given, but no values map");if(!b.hasOwnProperty(a))return this.reporter.error("Values map doesn't contain: "+JSON.stringify(a));a=b[a]}if(null!==k&&a instanceof k){var c=a.toArray();a.sign===!1&&128&c[0]&&c.unshift(0),a=new h(c)}if(h.isBuffer(a)){var d=a.length;0===a.length&&d++;var e=new h(d);return a.copy(e),0===a.length&&(e[0]=0),this._createEncoderBuffer(e)}if(128>a)return this._createEncoderBuffer(a);if(256>a)return this._createEncoderBuffer([0,a]);for(var d=1,f=a;f>=256;f>>=8)d++;for(var e=new Array(d),f=e.length-1;f>=0;f--)e[f]=255&a,a>>=8;return 128&e[0]&&e.unshift(0),this._createEncoderBuffer(new h(e))},d.prototype._encodeBool=function(a){return this._createEncoderBuffer(a?255:0)},d.prototype._use=function(a,b){return"function"==typeof a&&(a=a(b)),a._getEncoder("der").tree},d.prototype._skipDefault=function(a,b,c){var d,e=this._baseState;if(null===e["default"])return!1;var f=a.join();if(void 0===e.defaultBuffer&&(e.defaultBuffer=this._encodeValue(e["default"],b,c).join()),f.length!==e.defaultBuffer.length)return!1;for(d=0;d<f.length;d++)if(f[d]!==e.defaultBuffer[d])return!1;return!0}},{"../../asn1":377,buffer:324,inherits:467}],386:[function(a,b,c){var d=c;d.der=a("./der")},{"./der":385}],385:[function(a,b){function c(a){this.enc="der",this.name=a.name,this.entity=a,this.tree=new d,this.tree._init(a.body)}function d(a){i.Node.call(this,"der",a)}function e(a,b){var c=a.readUInt8(b);if(a.isError(c))return c;var d=k.tagClass[c>>6],e=0===(32&c);if(31===(31&c)){var f=c;for(c=0;128===(128&f);){if(f=a.readUInt8(b),a.isError(f))return f;c<<=7,c|=127&f}}else c&=31;var g=k.tag[c];return{cls:d,primitive:e,tag:c,tagStr:g}}function f(a,b,c){var d=a.readUInt8(c);if(a.isError(d))return d;if(!b&&128===d)return null;if(0===(128&d))return d;var e=127&d;if(e>=4)return a.error("length octect is too long");d=0;for(var f=0;e>f;f++){d<<=8;var g=a.readUInt8(c);if(a.isError(g))return g;d|=g}return d}var g=a("inherits"),h=a("../../asn1"),i=h.base,j=h.bignum,k=h.constants.der;b.exports=c,c.prototype.decode=function(a,b){return a instanceof i.DecoderBuffer||(a=new i.DecoderBuffer(a,b)),this.tree._decode(a,b)},g(d,i.Node),d.prototype._peekTag=function(a,b){if(a.isEmpty())return!1;var c=a.save(),d=e(a,'Failed to peek tag: "'+b+'"');return a.isError(d)?d:(a.restore(c),d.tag===b||d.tagStr===b)},d.prototype._decodeTag=function(a,b,c){var d=e(a,'Failed to decode tag of "'+b+'"');if(a.isError(d))return d;var g=f(a,d.primitive,'Failed to get length of "'+b+'"');if(a.isError(g))return g;if(!c&&d.tag!==b&&d.tagStr!==b&&d.tagStr+"of"!==b)return a.error('Failed to match tag: "'+b+'"');if(d.primitive||null!==g)return a.skip(g,'Failed to match body of: "'+b+'"');var h=a.start(),i=this._skipUntilEnd(a,'Failed to skip indefinite length body: "'+this.tag+'"');return a.isError(i)?i:a.cut(h)},d.prototype._skipUntilEnd=function(a,b){for(;;){var c=e(a,b);if(a.isError(c))return c;var d=f(a,c.primitive,b);if(a.isError(d))return d;var g;if(g=c.primitive||null!==d?a.skip(d):this._skipUntilEnd(a,b),a.isError(g))return g;if("end"===c.tagStr)break}},d.prototype._decodeList=function(a,b,c){for(var d=[];!a.isEmpty();){var e=this._peekTag(a,"end");if(a.isError(e))return e;var f=c.decode(a,"der");if(a.isError(f)&&e)break;d.push(f)}return d},d.prototype._decodeStr=function(a,b){if("octstr"===b)return a.raw();if("bitstr"===b){var c=a.readUInt8();return a.isError(c)?c:{unused:c,data:a.raw()}}return"ia5str"===b?a.raw().toString():this.error("Decoding of string type: "+b+" unsupported")},d.prototype._decodeObjid=function(a,b,c){for(var d=[],e=0;!a.isEmpty();){var f=a.readUInt8();e<<=7,e|=127&f,0===(128&f)&&(d.push(e),e=0)}128&f&&d.push(e);var g=d[0]/40|0,h=d[0]%40;return result=c?d:[g,h].concat(d.slice(1)),b&&(result=b[result.join(" ")]),result},d.prototype._decodeTime=function(a,b){var c=a.raw().toString();if("gentime"===b)var d=0|c.slice(0,4),e=0|c.slice(4,6),f=0|c.slice(6,8),g=0|c.slice(8,10),h=0|c.slice(10,12),i=0|c.slice(12,14);else{if("utctime"!==b)return this.error("Decoding "+b+" time is not supported yet");var d=0|c.slice(0,2),e=0|c.slice(2,4),f=0|c.slice(4,6),g=0|c.slice(6,8),h=0|c.slice(8,10),i=0|c.slice(10,12);d=70>d?2e3+d:1900+d}return Date.UTC(d,e-1,f,g,h,i,0)},d.prototype._decodeNull=function(){return null},d.prototype._decodeBool=function(a){var b=a.readUInt8();return a.isError(b)?b:0!==b},d.prototype._decodeInt=function(a,b){var c=0,d=a.raw();if(d.length>3)return new j(d);for(;!a.isEmpty();){c<<=8;var e=a.readUInt8();if(a.isError(e))return e;c|=e}return b&&(c=b[c]||c),c},d.prototype._use=function(a,b){return"function"==typeof a&&(a=a(b)),a._getDecoder("der").tree}},{"../../asn1":377,inherits:467}],384:[function(a,b,c){var d=c;d._reverse=function(a){var b={};return Object.keys(a).forEach(function(c){(0|c)==c&&(c=0|c);var d=a[c];b[d]=c}),b},d.der=a("./der")},{"./der":383}],383:[function(a,b,c){var d=a("../constants");c.tagClass={0:"universal",1:"application",2:"context",3:"private"},c.tagClassByName=d._reverse(c.tagClass),c.tag={0:"end",1:"bool",2:"int",3:"bitstr",4:"octstr",5:"null_",6:"objid",7:"objDesc",8:"external",9:"real",10:"enum",11:"embed",12:"utf8str",13:"relativeOid",16:"seq",17:"set",18:"numstr",19:"printstr",20:"t61str",21:"videostr",22:"ia5str",23:"utctime",24:"gentime",25:"graphstr",26:"iso646str",27:"genstr",28:"unistr",29:"charstr",30:"bmpstr"},c.tagByName=d._reverse(c.tag)},{"../constants":384}],380:[function(a,b,c){var d=c;d.Reporter=a("./reporter").Reporter,d.DecoderBuffer=a("./buffer").DecoderBuffer,d.EncoderBuffer=a("./buffer").EncoderBuffer,d.Node=a("./node")},{"./buffer":379,"./node":381,"./reporter":382}],382:[function(a,b,c){function d(a){this._reporterState={obj:null,path:[],options:a||{},errors:[]}}function e(a,b){this.path=a,this.rethrow(b)}var f=a("inherits");c.Reporter=d,d.prototype.isError=function(a){return a instanceof e},d.prototype.enterKey=function(a){return this._reporterState.path.push(a)},d.prototype.leaveKey=function(a,b,c){var d=this._reporterState;d.path=d.path.slice(0,a-1),null!==d.obj&&(d.obj[b]=c)},d.prototype.enterObject=function(){var a=this._reporterState,b=a.obj;return a.obj={},b},d.prototype.leaveObject=function(a){var b=this._reporterState,c=b.obj;return b.obj=a,c},d.prototype.error=function(a){var b,c=this._reporterState,d=a instanceof e;if(b=d?a:new e(c.path.map(function(a){return"["+JSON.stringify(a)+"]"}).join(""),a.message||a,a.stack),!c.options.partial)throw b;return d||c.errors.push(b),b},d.prototype.wrapResult=function(a){var b=this._reporterState;return b.options.partial?{result:this.isError(a)?null:a,errors:b.errors}:a},f(e,Error),e.prototype.rethrow=function(a){return this.message=a+" at: "+(this.path||"(shallow)"),Error.captureStackTrace(this,e),this}},{inherits:467}],381:[function(a,b){function c(a,b){var c={};this._baseState=c,c.enc=a,c.parent=b||null,c.children=null,c.tag=null,c.args=null,c.reverseArgs=null,c.choice=null,c.optional=!1,c.any=!1,c.obj=!1,c.use=null,c.useDecoder=null,c.key=null,c["default"]=null,c.explicit=null,c.implicit=null,c.parent||(c.children=[],this._wrap())}var d=a("../base").Reporter,e=a("../base").EncoderBuffer,f=a("minimalistic-assert"),g=["seq","seqof","set","setof","octstr","bitstr","objid","bool","gentime","utctime","null_","enum","int","ia5str"],h=["key","obj","use","optional","explicit","implicit","def","choice","any"].concat(g),i=["_peekTag","_decodeTag","_use","_decodeStr","_decodeObjid","_decodeTime","_decodeNull","_decodeInt","_decodeBool","_decodeList","_encodeComposite","_encodeStr","_encodeObjid","_encodeTime","_encodeNull","_encodeInt","_encodeBool"];b.exports=c;var j=["enc","parent","children","tag","args","reverseArgs","choice","optional","any","obj","use","alteredUse","key","default","explicit","implicit"];c.prototype.clone=function(){var a=this._baseState,b={};j.forEach(function(c){b[c]=a[c]});var c=new this.constructor(b.parent);return c._baseState=b,c},c.prototype._wrap=function(){var a=this._baseState;h.forEach(function(b){this[b]=function(){var c=new this.constructor(this);return a.children.push(c),c[b].apply(c,arguments)}},this)},c.prototype._init=function(a){var b=this._baseState;f(null===b.parent),a.call(this),b.children=b.children.filter(function(a){return a._baseState.parent===this},this),f.equal(b.children.length,1,"Root node can have only one child")},c.prototype._useArgs=function(a){var b=this._baseState,c=a.filter(function(a){return a instanceof this.constructor},this);a=a.filter(function(a){return!(a instanceof this.constructor)},this),0!==c.length&&(f(null===b.children),b.children=c,c.forEach(function(a){a._baseState.parent=this},this)),0!==a.length&&(f(null===b.args),b.args=a,b.reverseArgs=a.map(function(a){if("object"!=typeof a||a.constructor!==Object)return a;var b={};return Object.keys(a).forEach(function(c){c==(0|c)&&(c|=0);var d=a[c];b[d]=c}),b}))},i.forEach(function(a){c.prototype[a]=function(){var b=this._baseState;throw new Error(a+" not implemented for encoding: "+b.enc)}}),g.forEach(function(a){c.prototype[a]=function(){var b=this._baseState,c=Array.prototype.slice.call(arguments);return f(null===b.tag),b.tag=a,this._useArgs(c),this}}),c.prototype.use=function(a){var b=this._baseState;return f(null===b.use),b.use=a,this},c.prototype.optional=function(){var a=this._baseState;return a.optional=!0,this},c.prototype.def=function(a){var b=this._baseState;return f(null===b["default"]),b["default"]=a,b.optional=!0,this},c.prototype.explicit=function(a){var b=this._baseState;return f(null===b.explicit&&null===b.implicit),b.explicit=a,this},c.prototype.implicit=function(a){var b=this._baseState;return f(null===b.explicit&&null===b.implicit),b.implicit=a,this},c.prototype.obj=function(){var a=this._baseState,b=Array.prototype.slice.call(arguments);return a.obj=!0,0!==b.length&&this._useArgs(b),this},c.prototype.key=function k(k){var a=this._baseState;return f(null===a.key),a.key=k,this},c.prototype.any=function(){var a=this._baseState;return a.any=!0,this},c.prototype.choice=function(a){var b=this._baseState;return f(null===b.choice),b.choice=a,this._useArgs(Object.keys(a).map(function(b){return a[b]})),this},c.prototype._decode=function(a){var b=this._baseState;if(null===b.parent)return a.wrapResult(b.children[0]._decode(a));var c,d=b["default"],e=!0;if(null!==b.key&&(c=a.enterKey(b.key)),b.optional&&(e=this._peekTag(a,null!==b.explicit?b.explicit:null!==b.implicit?b.implicit:b.tag||0),a.isError(e)))return e;var f;if(b.obj&&e&&(f=a.enterObject()),e){if(null!==b.explicit){var g=this._decodeTag(a,b.explicit);if(a.isError(g))return g;a=g}if(null===b.use&&null===b.choice){if(b.any)var h=a.save();var i=this._decodeTag(a,null!==b.implicit?b.implicit:b.tag,b.any);if(a.isError(i))return i;b.any?d=a.raw(h):a=i}if(d=b.any?d:null===b.choice?this._decodeGeneric(b.tag,a):this._decodeChoice(a),a.isError(d))return d;if(!b.any&&null===b.choice&&null!==b.children){var j=b.children.some(function(b){b._decode(a)});if(j)return err}}return b.obj&&e&&(d=a.leaveObject(f)),null===b.key||null===d&&e!==!0||a.leaveKey(c,b.key,d),d},c.prototype._decodeGeneric=function(a,b){var c=this._baseState;return"seq"===a||"set"===a?null:"seqof"===a||"setof"===a?this._decodeList(b,a,c.args[0]):"octstr"===a||"bitstr"===a||"ia5str"===a?this._decodeStr(b,a):"objid"===a&&c.args?this._decodeObjid(b,c.args[0],c.args[1]):"objid"===a?this._decodeObjid(b,null,null):"gentime"===a||"utctime"===a?this._decodeTime(b,a):"null_"===a?this._decodeNull(b):"bool"===a?this._decodeBool(b):"int"===a||"enum"===a?this._decodeInt(b,c.args&&c.args[0]):null!==c.use?this._getUse(c.use,b._reporterState.obj)._decode(b):b.error("unknown tag: "+a)},c.prototype._getUse=function(a,b){var c=this._baseState;return c.useDecoder=this._use(a,b),f(null===c.useDecoder._baseState.parent),c.useDecoder=c.useDecoder._baseState.children[0],c.implicit!==c.useDecoder._baseState.implicit&&(c.useDecoder=c.useDecoder.clone(),c.useDecoder._baseState.implicit=c.implicit),c.useDecoder},c.prototype._decodeChoice=function(a){var b=this._baseState,c=null,d=!1;return Object.keys(b.choice).some(function(e){var f=a.save(),g=b.choice[e];try{var h=g._decode(a);if(a.isError(h))return!1;c={type:e,value:h},d=!0}catch(i){return a.restore(f),!1}return!0},this),d?c:a.error("Choice not matched")},c.prototype._createEncoderBuffer=function(a){return new e(a,this.reporter)},c.prototype._encode=function(a,b,c){var d=this._baseState;if(null===d["default"]||d["default"]!==a){var e=this._encodeValue(a,b,c);if(void 0!==e&&!this._skipDefault(e,b,c))return e}},c.prototype._encodeValue=function(a,b,c){var e=this._baseState;if(null===e.parent)return e.children[0]._encode(a,b||new d);var f=null;if(this.reporter=b,e.optional&&void 0===a){if(null===e["default"])return;a=e["default"]}var g=null,h=!1;if(e.any)f=this._createEncoderBuffer(a);else if(e.choice)f=this._encodeChoice(a,b);else if(e.children)g=e.children.map(function(c){if("null_"===c._baseState.tag)return c._encode(null,b,a);if(null===c._baseState.key)return b.error("Child should have a key");var d=b.enterKey(c._baseState.key);if("object"!=typeof a)return b.error("Child expected, but input is not object");var e=c._encode(a[c._baseState.key],b,a);return b.leaveKey(d),e},this).filter(function(a){return a}),g=this._createEncoderBuffer(g);else if("seqof"===e.tag||"setof"===e.tag){if(!e.args||1!==e.args.length)return b.error("Too many args for : "+e.tag);if(!Array.isArray(a))return b.error("seqof/setof, but data is not Array");var i=this.clone();i._baseState.implicit=null,g=this._createEncoderBuffer(a.map(function(c){var d=this._baseState;return this._getUse(d.args[0],a)._encode(c,b)},i))}else null!==e.use?f=this._getUse(e.use,c)._encode(a,b):(g=this._encodePrimitive(e.tag,a),h=!0);var f;if(!e.any&&null===e.choice){var j=null!==e.implicit?e.implicit:e.tag,k=null===e.implicit?"universal":"context";null===j?null===e.use&&b.error("Tag could be ommited only for .use()"):null===e.use&&(f=this._encodeComposite(j,h,k,g))}return null!==e.explicit&&(f=this._encodeComposite(e.explicit,!1,"context",f)),f},c.prototype._encodeChoice=function(a,b){var c=this._baseState,d=c.choice[a.type];return d||f(!1,a.type+" not found in "+JSON.stringify(Object.keys(c.choice))),d._encode(a.value,b)},c.prototype._encodePrimitive=function(a,b){var c=this._baseState;if("octstr"===a||"bitstr"===a||"ia5str"===a)return this._encodeStr(b,a);if("objid"===a&&c.args)return this._encodeObjid(b,c.reverseArgs[0],c.args[1]);if("objid"===a)return this._encodeObjid(b,null,null);if("gentime"===a||"utctime"===a)return this._encodeTime(b,a);if("null_"===a)return this._encodeNull();if("int"===a||"enum"===a)return this._encodeInt(b,c.args&&c.reverseArgs[0]);if("bool"===a)return this._encodeBool(b);throw new Error("Unsupported tag: "+a)}},{"../base":380,"minimalistic-assert":389}],389:[function(a,b){function c(a,b){if(!a)throw new Error(b||"Assertion failed")}b.exports=c,c.equal=function(a,b,c){if(a!=b)throw new Error(c||"Assertion failed: "+a+" != "+b)}},{}],379:[function(a,b,c){function d(a,b){return g.call(this,b),h.isBuffer(a)?(this.base=a,this.offset=0,void(this.length=a.length)):void this.error("Input not Buffer")}function e(a,b){if(Array.isArray(a))this.length=0,this.value=a.map(function(a){return a instanceof e||(a=new e(a,b)),this.length+=a.length,a},this);else if("number"==typeof a){if(!(a>=0&&255>=a))return b.error("non-byte EncoderBuffer value");this.value=a,this.length=1}else if("string"==typeof a)this.value=a,this.length=h.byteLength(a);else{if(!h.isBuffer(a))return b.error("Unsupported type: "+typeof a);this.value=a,this.length=a.length}}var f=a("inherits"),g=a("../base").Reporter,h=a("buffer").Buffer;f(d,g),c.DecoderBuffer=d,d.prototype.save=function(){return{offset:this.offset}},d.prototype.restore=function(a){var b=new d(this.base);return b.offset=a.offset,b.length=this.offset,this.offset=a.offset,b},d.prototype.isEmpty=function(){return this.offset===this.length},d.prototype.readUInt8=function(a){return this.offset+1<=this.length?this.base.readUInt8(this.offset++,!0):this.error(a||"DecoderBuffer overrun")},d.prototype.skip=function(a,b){if(!(this.offset+a<=this.length))return this.error(b||"DecoderBuffer overrun");var c=new d(this.base);return c._reporterState=this._reporterState,c.offset=this.offset,c.length=this.offset+a,this.offset+=a,c},d.prototype.raw=function(a){return this.base.slice(a?a.offset:this.offset,this.length)},c.EncoderBuffer=e,e.prototype.join=function(a,b){return a||(a=new h(this.length)),b||(b=0),0===this.length?a:(Array.isArray(this.value)?this.value.forEach(function(c){c.join(a,b),b+=c.length}):("number"==typeof this.value?a[b]=this.value:"string"==typeof this.value?a.write(this.value,b):h.isBuffer(this.value)&&this.value.copy(a,b),b+=this.length),a)}},{"../base":380,buffer:324,inherits:467}],378:[function(a,b,c){function d(a,b){this.name=a,this.body=b,this.decoders={},this.encoders={}}var e=a("../asn1"),f=a("inherits"),g=a("vm"),h=c;h.define=function(a,b){return new d(a,b)},d.prototype._createNamed=function(a){var b=g.runInThisContext("(function "+this.name+"(entity) {\n  this._initNamed(entity);\n})");return f(b,a),b.prototype._initNamed=function(b){a.call(this,b)},new b(this)},d.prototype._getDecoder=function(a){return this.decoders.hasOwnProperty(a)||(this.decoders[a]=this._createNamed(e.decoders[a])),this.decoders[a]},d.prototype.decode=function(a,b,c){return this._getDecoder(b).decode(a,c)},d.prototype._getEncoder=function(a){return this.encoders.hasOwnProperty(a)||(this.encoders[a]=this._createNamed(e.encoders[a])),this.encoders[a]},d.prototype.encode=function(a,b,c){return this._getEncoder(b).encode(a,c)}},{"../asn1":377,inherits:467,vm:489}],489:[function(require,module,exports){function Context(){}var indexOf=require("indexof"),Object_keys=function(a){if(Object.keys)return Object.keys(a);var b=[];for(var c in a)b.push(c);return b},forEach=function(a,b){if(a.forEach)return a.forEach(b);for(var c=0;c<a.length;c++)b(a[c],c,a)},defineProp=function(){try{return Object.defineProperty({},"_",{}),function(a,b,c){Object.defineProperty(a,b,{writable:!0,enumerable:!1,configurable:!0,value:c})}}catch(a){return function(a,b,c){a[b]=c}}}(),globals=["Array","Boolean","Date","Error","EvalError","Function","Infinity","JSON","Math","NaN","Number","Object","RangeError","ReferenceError","RegExp","String","SyntaxError","TypeError","URIError","decodeURI","decodeURIComponent","encodeURI","encodeURIComponent","escape","eval","isFinite","isNaN","parseFloat","parseInt","undefined","unescape"];Context.prototype={};var Script=exports.Script=function(a){return this instanceof Script?void(this.code=a):new Script(a)};Script.prototype.runInContext=function(a){if(!(a instanceof Context))throw new TypeError("needs a 'context' argument.");var b=document.createElement("iframe");b.style||(b.style={}),b.style.display="none",document.body.appendChild(b);var c=b.contentWindow,d=c.eval,e=c.execScript;!d&&e&&(e.call(c,"null"),d=c.eval),forEach(Object_keys(a),function(b){c[b]=a[b]}),forEach(globals,function(b){a[b]&&(c[b]=a[b])});var f=Object_keys(c),g=d.call(c,this.code);return forEach(Object_keys(c),function(b){(b in a||-1===indexOf(f,b))&&(a[b]=c[b])}),forEach(globals,function(b){b in a||defineProp(a,b,c[b])}),document.body.removeChild(b),g},Script.prototype.runInThisContext=function(){return eval(this.code)},Script.prototype.runInNewContext=function(a){var b=Script.createContext(a),c=this.runInContext(b);return forEach(Object_keys(b),function(c){a[c]=b[c]}),c},forEach(Object_keys(Script.prototype),function(a){exports[a]=Script[a]=function(b){var c=Script(b);
return c[a].apply(c,[].slice.call(arguments,1))}}),exports.createScript=function(a){return exports.Script(a)},exports.createContext=Script.createContext=function(a){var b=new Context;return"object"==typeof a&&forEach(Object_keys(a),function(c){b[c]=a[c]}),b}},{indexof:490}],490:[function(a,b){var c=[].indexOf;b.exports=function(a,b){if(c)return a.indexOf(b);for(var d=0;d<a.length;++d)if(a[d]===b)return d;return-1}},{}],372:[function(a,b){b.exports={"2.16.840.1.101.3.4.1.1":"aes-128-ecb","2.16.840.1.101.3.4.1.2":"aes-128-cbc","2.16.840.1.101.3.4.1.3":"aes-128-ofb","2.16.840.1.101.3.4.1.4":"aes-128-cfb","2.16.840.1.101.3.4.1.21":"aes-192-ecb","2.16.840.1.101.3.4.1.22":"aes-192-cbc","2.16.840.1.101.3.4.1.23":"aes-192-ofb","2.16.840.1.101.3.4.1.24":"aes-192-cfb","2.16.840.1.101.3.4.1.41":"aes-256-ecb","2.16.840.1.101.3.4.1.42":"aes-256-cbc","2.16.840.1.101.3.4.1.43":"aes-256-ofb","2.16.840.1.101.3.4.1.44":"aes-256-cfb"}},{}],351:[function(a,b,c){var d=c;d.version=a("../package.json").version,d.utils=a("./elliptic/utils"),d.rand=a("brorand"),d.hmacDRBG=a("./elliptic/hmac-drbg"),d.curve=a("./elliptic/curve"),d.curves=a("./elliptic/curves"),d.ec=a("./elliptic/ec")},{"../package.json":370,"./elliptic/curve":354,"./elliptic/curves":357,"./elliptic/ec":358,"./elliptic/hmac-drbg":361,"./elliptic/utils":362,brorand:363}],370:[function(a,b){b.exports={name:"elliptic",version:"1.0.1",description:"EC cryptography",main:"lib/elliptic.js",scripts:{test:"mocha --reporter=spec test/*-test.js"},repository:{type:"git",url:"git@github.com:indutny/elliptic"},keywords:["EC","Elliptic","curve","Cryptography"],author:{name:"Fedor Indutny",email:"fedor@indutny.com"},license:"MIT",bugs:{url:"https://github.com/indutny/elliptic/issues"},homepage:"https://github.com/indutny/elliptic",devDependencies:{browserify:"^3.44.2",mocha:"^1.18.2","uglify-js":"^2.4.13"},dependencies:{"bn.js":"^1.0.0",brorand:"^1.0.1","hash.js":"^1.0.0",inherits:"^2.0.1"},readme:"# Elliptic [![Build Status](https://secure.travis-ci.org/indutny/elliptic.png)](http://travis-ci.org/indutny/elliptic)\n\nFast elliptic-curve cryptography in a plain javascript implementation.\n\nNOTE: Please take a look at http://safecurves.cr.yp.to/ before choosing a curve\nfor your cryptography operations.\n\n## Incentive\n\nECC is much slower than regular RSA cryptography, the JS implementations are\neven more slower.\n\n## Benchmarks\n\n```bash\n$ node benchmarks/index.js\nBenchmarking: sign\nelliptic#sign x 262 ops/sec ±0.51% (177 runs sampled)\neccjs#sign x 55.91 ops/sec ±0.90% (144 runs sampled)\n------------------------\nFastest is elliptic#sign\n========================\nBenchmarking: verify\nelliptic#verify x 113 ops/sec ±0.50% (166 runs sampled)\neccjs#verify x 48.56 ops/sec ±0.36% (125 runs sampled)\n------------------------\nFastest is elliptic#verify\n========================\nBenchmarking: gen\nelliptic#gen x 294 ops/sec ±0.43% (176 runs sampled)\neccjs#gen x 62.25 ops/sec ±0.63% (129 runs sampled)\n------------------------\nFastest is elliptic#gen\n========================\nBenchmarking: ecdh\nelliptic#ecdh x 136 ops/sec ±0.85% (156 runs sampled)\n------------------------\nFastest is elliptic#ecdh\n========================\n```\n\n## API\n\n### ECDSA\n\n```javascript\nvar EC = require('elliptic').ec;\n\n// Create and initialize EC context\n// (better do it once and reuse it)\nvar ec = new EC('secp256k1');\n\n// Generate keys\nvar key = ec.genKeyPair();\n\n// Sign message (must be an array, or it'll be treated as a hex sequence)\nvar msg = [ 0, 1, 2, 3, 4, 5, 6, 7, 8, 9, 10 ];\nvar signature = key.sign(msg);\n\n// Export DER encoded signature in Array\nvar derSign = signature.toDER();\n\n// Verify signature\nconsole.log(key.verify(msg, derSign));\n```\n\n### ECDH\n\n```javascript\n// Generate keys\nvar key1 = ec.genKeyPair();\nvar key2 = ec.genKeyPair();\n\nvar shared1 = key1.derive(key2.getPublic());\nvar shared2 = key2.derive(key1.getPublic());\n\nconsole.log('Both shared secrets are BN instances');\nconsole.log(shared1.toString(16));\nconsole.log(shared2.toString(16));\n```\n\nNOTE: `.derive()` returns a [BN][1] instance.\n\n## Supported curves\n\nElliptic.js support following curve types:\n\n* Short Weierstrass\n* Montgomery\n* Edwards\n* Twisted Edwards\n\nFollowing curve 'presets' are embedded into the library:\n\n* `secp256k1`\n* `p192`\n* `p224`\n* `p256`\n* `curve25519`\n* `ed25519`\n\nNOTE: That `curve25519` could not be used for ECDSA, use `ed25519` instead.\n\n### Implementation details\n\nECDSA is using deterministic `k` value generation as per [RFC6979][0]. Most of\nthe curve operations are performed on non-affine coordinates (either projective\nor extended), various windowing techniques are used for different cases.\n\nAll operations are performed in reduction context using [bn.js][1], hashing is\nprovided by [hash.js][2]\n\n#### LICENSE\n\nThis software is licensed under the MIT License.\n\nCopyright Fedor Indutny, 2014.\n\nPermission is hereby granted, free of charge, to any person obtaining a\ncopy of this software and associated documentation files (the\n\"Software\"), to deal in the Software without restriction, including\nwithout limitation the rights to use, copy, modify, merge, publish,\ndistribute, sublicense, and/or sell copies of the Software, and to permit\npersons to whom the Software is furnished to do so, subject to the\nfollowing conditions:\n\nThe above copyright notice and this permission notice shall be included\nin all copies or substantial portions of the Software.\n\nTHE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS\nOR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF\nMERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN\nNO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM,\nDAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR\nOTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE\nUSE OR OTHER DEALINGS IN THE SOFTWARE.\n\n[0]: http://tools.ietf.org/html/rfc6979\n[1]: https://github.com/indutny/bn.js\n[2]: https://github.com/indutny/hash.js\n",readmeFilename:"README.md",_id:"elliptic@1.0.1",dist:{shasum:"4bd45bf8b90fa1d3895d54677745ef7c144d1265"},_from:"elliptic@^1.0.0",_resolved:"https://registry.npmjs.org/elliptic/-/elliptic-1.0.1.tgz"}},{}],363:[function(a,b){function c(a){this.rand=a}var d;if(b.exports=function(a){return d||(d=new c(null)),d.generate(a)},b.exports.Rand=c,c.prototype.generate=function(a){return this._rand(a)},"object"==typeof window)c.prototype._rand=window.crypto&&window.crypto.getRandomValues?function(a){var b=new Uint8Array(a);return window.crypto.getRandomValues(b),b}:window.msCrypto&&window.msCrypto.getRandomValues?function(a){var b=new Uint8Array(a);return window.msCrypto.getRandomValues(b),b}:function(){throw new Error("Not implemented yet")};else try{var e=a("crypto");c.prototype._rand=function(a){return e.randomBytes(a)}}catch(f){c.prototype._rand=function(a){for(var b=new Uint8Array(a),c=0;c<b.length;c++)b[c]=this.rand.getByte();return b}}},{}],362:[function(a,b,c){function d(a,b){if(Array.isArray(a))return a.slice();if(!a)return[];var c=[];if("string"==typeof a)if(b){if("hex"===b){a=a.replace(/[^a-z0-9]+/gi,""),a.length%2!==0&&(a="0"+a);for(var d=0;d<a.length;d+=2)c.push(parseInt(a[d]+a[d+1],16))}}else for(var d=0;d<a.length;d++){var e=a.charCodeAt(d),f=e>>8,g=255&e;f?c.push(f,g):c.push(g)}else for(var d=0;d<a.length;d++)c[d]=0|a[d];return c}function e(a){for(var b="",c=0;c<a.length;c++)b+=f(a[c].toString(16));return b}function f(a){return 1===a.length?"0"+a:a}function g(a,b){for(var c=[],d=1<<b+1,e=a.clone();e.cmpn(1)>=0;){var f;if(e.isOdd()){var g=e.andln(d-1);f=g>(d>>1)-1?(d>>1)-g:g,e.isubn(f)}else f=0;c.push(f);for(var h=0!==e.cmpn(0)&&0===e.andln(d-1)?b+1:1,i=1;h>i;i++)c.push(0);e.ishrn(h)}return c}function h(a,b){var c=[[],[]];a=a.clone(),b=b.clone();for(var d=0,e=0;a.cmpn(-d)>0||b.cmpn(-e)>0;){var f=a.andln(3)+d&3,g=b.andln(3)+e&3;3===f&&(f=-1),3===g&&(g=-1);var h;if(0===(1&f))h=0;else{var i=a.andln(7)+d&7;h=3!==i&&5!==i||2!==g?f:-f}c[0].push(h);var j;if(0===(1&g))j=0;else{var i=b.andln(7)+e&7;j=3!==i&&5!==i||2!==f?g:-g}c[1].push(j),2*d===h+1&&(d=1-d),2*e===j+1&&(e=1-e),a.ishrn(1),b.ishrn(1)}return c}var i=(a("bn.js"),c);i.assert=function(a,b){if(!a)throw new Error(b||"Assertion failed")},i.toArray=d,i.toHex=e,i.encode=function(a,b){return"hex"===b?e(a):a},i.zero2=f,i.getNAF=g,i.getJSF=h},{"bn.js":349}],361:[function(a,b){function c(a){if(!(this instanceof c))return new c(a);this.hash=a.hash,this.predResist=!!a.predResist,this.outLen=this.hash.outSize,this.minEntropy=a.minEntropy||this.hash.hmacStrength,this.reseed=null,this.reseedInterval=null,this.K=null,this.V=null;var b=f.toArray(a.entropy,a.entropyEnc),d=f.toArray(a.nonce,a.nonceEnc),e=f.toArray(a.pers,a.persEnc);g(b.length>=this.minEntropy/8,"Not enough entropy. Minimum is: "+this.minEntropy+" bits"),this._init(b,d,e)}var d=a("hash.js"),e=a("../elliptic"),f=e.utils,g=f.assert;b.exports=c,c.prototype._init=function(a,b,c){var d=a.concat(b).concat(c);this.K=new Array(this.outLen/8),this.V=new Array(this.outLen/8);for(var e=0;e<this.V.length;e++)this.K[e]=0,this.V[e]=1;this._update(d),this.reseed=1,this.reseedInterval=281474976710656},c.prototype._hmac=function(){return new d.hmac(this.hash,this.K)},c.prototype._update=function(a){var b=this._hmac().update(this.V).update([0]);a&&(b=b.update(a)),this.K=b.digest(),this.V=this._hmac().update(this.V).digest(),a&&(this.K=this._hmac().update(this.V).update([1]).update(a).digest(),this.V=this._hmac().update(this.V).digest())},c.prototype.reseed=function(a,b,c,d){"string"!=typeof b&&(d=c,c=b,b=null),a=f.toBuffer(a,b),c=f.toBuffer(c,d),g(a.length>=this.minEntropy/8,"Not enough entropy. Minimum is: "+this.minEntropy+" bits"),this._update(a.concat(c||[])),this.reseed=1},c.prototype.generate=function(a,b,c,d){if(this.reseed>this.reseedInterval)throw new Error("Reseed is required");"string"!=typeof b&&(d=c,c=b,b=null),c&&(c=f.toArray(c,d),this._update(c));for(var e=[];e.length<a;)this.V=this._hmac().update(this.V).digest(),e=e.concat(this.V);var g=e.slice(0,a);return this._update(c),this.reseed++,f.encode(g,b)}},{"../elliptic":351,"hash.js":364}],358:[function(a,b){function c(a){return this instanceof c?("string"==typeof a&&(g(e.curves.hasOwnProperty(a),"Unknown curve "+a),a=e.curves[a]),a instanceof e.curves.PresetCurve&&(a={curve:a}),this.curve=a.curve.curve,this.n=this.curve.n,this.nh=this.n.shrn(1),this.g=this.curve.g,this.g=a.curve.g,this.g.precompute(a.curve.n.bitLength()+1),void(this.hash=a.hash||a.curve.hash)):new c(a)}var d=a("bn.js"),e=a("../../elliptic"),f=e.utils,g=f.assert,h=a("./key"),i=a("./signature");b.exports=c,c.prototype.keyPair=function(a,b){return new h(this,a,b)},c.prototype.genKeyPair=function(a){a||(a={});for(var b=new e.hmacDRBG({hash:this.hash,pers:a.pers,entropy:a.entropy||e.rand(this.hash.hmacStrength),nonce:this.n.toArray()}),c=this.n.byteLength(),f=this.n.sub(new d(2));;){var g=new d(b.generate(c));if(!(g.cmp(f)>0))return g.iaddn(1),this.keyPair(g)}},c.prototype._truncateToN=function(a,b){var c=8*a.byteLength()-this.n.bitLength();return c>0&&(a=a.shrn(c)),!b&&a.cmp(this.n)>=0?a.sub(this.n):a},c.prototype.sign=function(a,b,c){b=this.keyPair(b,"hex"),a=this._truncateToN(new d(a,16)),c||(c={});for(var f=this.n.byteLength(),g=b.getPrivate().toArray(),h=g.length;21>h;h++)g.unshift(0);for(var j=a.toArray(),h=j.length;f>h;h++)j.unshift(0);for(var k=new e.hmacDRBG({hash:this.hash,entropy:g,nonce:j}),l=this.n.sub(new d(1));;){var m=new d(k.generate(this.n.byteLength()));if(m=this._truncateToN(m,!0),!(m.cmpn(1)<=0||m.cmp(l)>=0)){var n=this.g.mul(m);if(!n.isInfinity()){var o=n.getX().mod(this.n);if(0!==o.cmpn(0)){var p=m.invm(this.n).mul(o.mul(b.getPrivate()).iadd(a)).mod(this.n);if(0!==p.cmpn(0))return c.canonical&&p.cmp(this.nh)>0&&(p=this.n.sub(p)),new i(o,p)}}}}},c.prototype.verify=function(a,b,c){a=this._truncateToN(new d(a,16)),c=this.keyPair(c,"hex"),b=new i(b,"hex");var e=b.r,f=b.s;if(e.cmpn(1)<0||e.cmp(this.n)>=0)return!1;if(f.cmpn(1)<0||f.cmp(this.n)>=0)return!1;var g=f.invm(this.n),h=g.mul(a).mod(this.n),j=g.mul(e).mod(this.n),k=this.g.mulAdd(h,c.getPublic(),j);return k.isInfinity()?!1:0===k.getX().mod(this.n).cmp(e)}},{"../../elliptic":351,"./key":359,"./signature":360,"bn.js":349}],360:[function(a,b){function c(a,b){return a instanceof c?a:void(this._importDER(a,b)||(g(a&&b,"Signature without r or s"),this.r=new d(a,16),this.s=new d(b,16)))}var d=a("bn.js"),e=a("../../elliptic"),f=e.utils,g=f.assert;b.exports=c,c.prototype._importDER=function(a,b){if(a=f.toArray(a,b),a.length<6||48!==a[0]||2!==a[2])return!1;var c=a[1];if(1+c>a.length)return!1;var e=a[3];if(e>=128)return!1;if(4+e+2>=a.length)return!1;if(2!==a[4+e])return!1;var g=a[5+e];return g>=128?!1:4+e+2+g>a.length?!1:(this.r=new d(a.slice(4,4+e)),this.s=new d(a.slice(4+e+2,4+e+2+g)),!0)},c.prototype.toDER=function(a){var b=this.r.toArray(),c=this.s.toArray();128&b[0]&&(b=[0].concat(b)),128&c[0]&&(c=[0].concat(c));var d=b.length+c.length+4,e=[48,d,2,b.length];return e=e.concat(b,[2,c.length],c),f.encode(e,a)}},{"../../elliptic":351,"bn.js":349}],359:[function(a,b){function c(a,b,d){return b instanceof c?b:d instanceof c?d:(b||(b=d,d=null),null!==b&&"object"==typeof b&&(b.x?(d=b,b=null):(b.priv||b.pub)&&(d=b.pub,b=b.priv)),this.ec=a,this.priv=null,this.pub=null,void(this._importPublicHex(b,d)||("hex"===d&&(d=null),b&&this._importPrivate(b),d&&this._importPublic(d))))}{var d=a("bn.js"),e=a("../../elliptic"),f=e.utils;f.assert}b.exports=c,c.prototype.validate=function(){var a=this.getPublic();return a.isInfinity()?{result:!1,reason:"Invalid public key"}:a.validate()?a.mul(this.ec.curve.n).isInfinity()?{result:!0,reason:null}:{result:!1,reason:"Public key * N != O"}:{result:!1,reason:"Public key is not a point"}},c.prototype.getPublic=function(a,b){if(this.pub||(this.pub=this.ec.g.mul(this.priv)),"string"==typeof a&&(b=a,a=null),!b)return this.pub;for(var c=this.ec.curve.p.byteLength(),d=this.pub.getX().toArray(),e=d.length;c>e;e++)d.unshift(0);if(a)var g=[this.pub.getY().isEven()?2:3].concat(d);else{for(var h=this.pub.getY().toArray(),e=h.length;c>e;e++)h.unshift(0);var g=[4].concat(d,h)}return f.encode(g,b)},c.prototype.getPrivate=function(a){return"hex"===a?this.priv.toString(16,2):this.priv},c.prototype._importPrivate=function(a){this.priv=new d(a,16),this.priv=this.priv.mod(this.ec.curve.n)},c.prototype._importPublic=function(a){this.pub=this.ec.curve.point(a.x,a.y)},c.prototype._importPublicHex=function(a,b){a=f.toArray(a,b);var c=this.ec.curve.p.byteLength();if(4===a[0]&&a.length-1===2*c)this.pub=this.ec.curve.point(a.slice(1,1+c),a.slice(1+c,1+2*c));else{if(2!==a[0]&&3!==a[0]||a.length-1!==c)return!1;this.pub=this.ec.curve.pointFromX(3===a[0],a.slice(1,1+c))}return!0},c.prototype.derive=function(a){return a.mul(this.priv).getX()},c.prototype.sign=function(a){return this.ec.sign(a,this)},c.prototype.verify=function(a,b){return this.ec.verify(a,b,this)},c.prototype.inspect=function(){return"<Key priv: "+(this.priv&&this.priv.toString(16,2))+" pub: "+(this.pub&&this.pub.inspect())+" >"}},{"../../elliptic":351,"bn.js":349}],357:[function(a,b,c){function d(a){this.curve="short"===a.type?new h.curve["short"](a):"edwards"===a.type?new h.curve.edwards(a):new h.curve.mont(a),this.g=this.curve.g,this.n=this.curve.n,this.hash=a.hash,i(this.g.validate(),"Invalid curve"),i(this.g.mul(this.n).isInfinity(),"Invalid curve, G*N != O")}function e(a,b){Object.defineProperty(f,a,{configurable:!0,enumerable:!0,get:function(){var c=new d(b);return Object.defineProperty(f,a,{configurable:!0,enumerable:!0,value:c}),c}})}var f=c,g=a("hash.js"),h=(a("bn.js"),a("../elliptic")),i=h.utils.assert;f.PresetCurve=d,e("p192",{type:"short",prime:"p192",p:"ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff",a:"ffffffff ffffffff ffffffff fffffffe ffffffff fffffffc",b:"64210519 e59c80e7 0fa7e9ab 72243049 feb8deec c146b9b1",n:"ffffffff ffffffff ffffffff 99def836 146bc9b1 b4d22831",hash:g.sha256,gRed:!1,g:["188da80e b03090f6 7cbf20eb 43a18800 f4ff0afd 82ff1012","07192b95 ffc8da78 631011ed 6b24cdd5 73f977a1 1e794811"]}),e("p224",{type:"short",prime:"p224",p:"ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001",a:"ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff fffffffe",b:"b4050a85 0c04b3ab f5413256 5044b0b7 d7bfd8ba 270b3943 2355ffb4",n:"ffffffff ffffffff ffffffff ffff16a2 e0b8f03e 13dd2945 5c5c2a3d",hash:g.sha256,gRed:!1,g:["b70e0cbd 6bb4bf7f 321390b9 4a03c1d3 56c21122 343280d6 115c1d21","bd376388 b5f723fb 4c22dfe6 cd4375a0 5a074764 44d58199 85007e34"]}),e("p256",{type:"short",prime:null,p:"ffffffff 00000001 00000000 00000000 00000000 ffffffff ffffffff ffffffff",a:"ffffffff 00000001 00000000 00000000 00000000 ffffffff ffffffff fffffffc",b:"5ac635d8 aa3a93e7 b3ebbd55 769886bc 651d06b0 cc53b0f6 3bce3c3e 27d2604b",n:"ffffffff 00000000 ffffffff ffffffff bce6faad a7179e84 f3b9cac2 fc632551",hash:g.sha256,gRed:!1,g:["6b17d1f2 e12c4247 f8bce6e5 63a440f2 77037d81 2deb33a0 f4a13945 d898c296","4fe342e2 fe1a7f9b 8ee7eb4a 7c0f9e16 2bce3357 6b315ece cbb64068 37bf51f5"]}),e("curve25519",{type:"mont",prime:"p25519",p:"7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed",a:"76d06",b:"0",n:"1000000000000000 0000000000000000 14def9dea2f79cd6 5812631a5cf5d3ed",hash:g.sha256,gRed:!1,g:["9"]}),e("ed25519",{type:"edwards",prime:"p25519",p:"7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed",a:"-1",c:"1",d:"52036cee2b6ffe73 8cc740797779e898 00700a4d4141d8ab 75eb4dca135978a3",n:"1000000000000000 0000000000000000 14def9dea2f79cd6 5812631a5cf5d3ed",hash:g.sha256,gRed:!1,g:["216936d3cd6e53fec0a4e231fdd6dc5c692cc7609525a7b2c9562d608f25d51a","6666666666666666666666666666666666666666666666666666666666666658"]}),e("secp256k1",{type:"short",prime:"k256",p:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f",a:"0",b:"7",n:"ffffffff ffffffff ffffffff fffffffe baaedce6 af48a03b bfd25e8c d0364141",h:"1",hash:g.sha256,beta:"7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee",lambda:"5363ad4cc05c30e0a5261c028812645a122e22ea20816678df02967c1b23bd72",basis:[{a:"3086d221a7d46bcde86c90e49284eb15",b:"-e4437ed6010e88286f547fa90abfe4c3"},{a:"114ca50f7a8e2f3f657c1108d9d44cfd8",b:"3086d221a7d46bcde86c90e49284eb15"}],gRed:!1,g:["79be667ef9dcbbac55a06295ce870b07029bfcdb2dce28d959f2815b16f81798","483ada7726a3c4655da4fbfc0e1108a8fd17b448a68554199c47d08ffb10d4b8",{doubles:{step:4,points:[["e60fce93b59e9ec53011aabc21c23e97b2a31369b87a5ae9c44ee89e2a6dec0a","f7e3507399e595929db99f34f57937101296891e44d23f0be1f32cce69616821"],["8282263212c609d9ea2a6e3e172de238d8c39cabd5ac1ca10646e23fd5f51508","11f8a8098557dfe45e8256e830b60ace62d613ac2f7b17bed31b6eaff6e26caf"],["175e159f728b865a72f99cc6c6fc846de0b93833fd2222ed73fce5b551e5b739","d3506e0d9e3c79eba4ef97a51ff71f5eacb5955add24345c6efa6ffee9fed695"],["363d90d447b00c9c99ceac05b6262ee053441c7e55552ffe526bad8f83ff4640","4e273adfc732221953b445397f3363145b9a89008199ecb62003c7f3bee9de9"],["8b4b5f165df3c2be8c6244b5b745638843e4a781a15bcd1b69f79a55dffdf80c","4aad0a6f68d308b4b3fbd7813ab0da04f9e336546162ee56b3eff0c65fd4fd36"],["723cbaa6e5db996d6bf771c00bd548c7b700dbffa6c0e77bcb6115925232fcda","96e867b5595cc498a921137488824d6e2660a0653779494801dc069d9eb39f5f"],["eebfa4d493bebf98ba5feec812c2d3b50947961237a919839a533eca0e7dd7fa","5d9a8ca3970ef0f269ee7edaf178089d9ae4cdc3a711f712ddfd4fdae1de8999"],["100f44da696e71672791d0a09b7bde459f1215a29b3c03bfefd7835b39a48db0","cdd9e13192a00b772ec8f3300c090666b7ff4a18ff5195ac0fbd5cd62bc65a09"],["e1031be262c7ed1b1dc9227a4a04c017a77f8d4464f3b3852c8acde6e534fd2d","9d7061928940405e6bb6a4176597535af292dd419e1ced79a44f18f29456a00d"],["feea6cae46d55b530ac2839f143bd7ec5cf8b266a41d6af52d5e688d9094696d","e57c6b6c97dce1bab06e4e12bf3ecd5c981c8957cc41442d3155debf18090088"],["da67a91d91049cdcb367be4be6ffca3cfeed657d808583de33fa978bc1ec6cb1","9bacaa35481642bc41f463f7ec9780e5dec7adc508f740a17e9ea8e27a68be1d"],["53904faa0b334cdda6e000935ef22151ec08d0f7bb11069f57545ccc1a37b7c0","5bc087d0bc80106d88c9eccac20d3c1c13999981e14434699dcb096b022771c8"],["8e7bcd0bd35983a7719cca7764ca906779b53a043a9b8bcaeff959f43ad86047","10b7770b2a3da4b3940310420ca9514579e88e2e47fd68b3ea10047e8460372a"],["385eed34c1cdff21e6d0818689b81bde71a7f4f18397e6690a841e1599c43862","283bebc3e8ea23f56701de19e9ebf4576b304eec2086dc8cc0458fe5542e5453"],["6f9d9b803ecf191637c73a4413dfa180fddf84a5947fbc9c606ed86c3fac3a7","7c80c68e603059ba69b8e2a30e45c4d47ea4dd2f5c281002d86890603a842160"],["3322d401243c4e2582a2147c104d6ecbf774d163db0f5e5313b7e0e742d0e6bd","56e70797e9664ef5bfb019bc4ddaf9b72805f63ea2873af624f3a2e96c28b2a0"],["85672c7d2de0b7da2bd1770d89665868741b3f9af7643397721d74d28134ab83","7c481b9b5b43b2eb6374049bfa62c2e5e77f17fcc5298f44c8e3094f790313a6"],["948bf809b1988a46b06c9f1919413b10f9226c60f668832ffd959af60c82a0a","53a562856dcb6646dc6b74c5d1c3418c6d4dff08c97cd2bed4cb7f88d8c8e589"],["6260ce7f461801c34f067ce0f02873a8f1b0e44dfc69752accecd819f38fd8e8","bc2da82b6fa5b571a7f09049776a1ef7ecd292238051c198c1a84e95b2b4ae17"],["e5037de0afc1d8d43d8348414bbf4103043ec8f575bfdc432953cc8d2037fa2d","4571534baa94d3b5f9f98d09fb990bddbd5f5b03ec481f10e0e5dc841d755bda"],["e06372b0f4a207adf5ea905e8f1771b4e7e8dbd1c6a6c5b725866a0ae4fce725","7a908974bce18cfe12a27bb2ad5a488cd7484a7787104870b27034f94eee31dd"],["213c7a715cd5d45358d0bbf9dc0ce02204b10bdde2a3f58540ad6908d0559754","4b6dad0b5ae462507013ad06245ba190bb4850f5f36a7eeddff2c27534b458f2"],["4e7c272a7af4b34e8dbb9352a5419a87e2838c70adc62cddf0cc3a3b08fbd53c","17749c766c9d0b18e16fd09f6def681b530b9614bff7dd33e0b3941817dcaae6"],["fea74e3dbe778b1b10f238ad61686aa5c76e3db2be43057632427e2840fb27b6","6e0568db9b0b13297cf674deccb6af93126b596b973f7b77701d3db7f23cb96f"],["76e64113f677cf0e10a2570d599968d31544e179b760432952c02a4417bdde39","c90ddf8dee4e95cf577066d70681f0d35e2a33d2b56d2032b4b1752d1901ac01"],["c738c56b03b2abe1e8281baa743f8f9a8f7cc643df26cbee3ab150242bcbb891","893fb578951ad2537f718f2eacbfbbbb82314eef7880cfe917e735d9699a84c3"],["d895626548b65b81e264c7637c972877d1d72e5f3a925014372e9f6588f6c14b","febfaa38f2bc7eae728ec60818c340eb03428d632bb067e179363ed75d7d991f"],["b8da94032a957518eb0f6433571e8761ceffc73693e84edd49150a564f676e03","2804dfa44805a1e4d7c99cc9762808b092cc584d95ff3b511488e4e74efdf6e7"],["e80fea14441fb33a7d8adab9475d7fab2019effb5156a792f1a11778e3c0df5d","eed1de7f638e00771e89768ca3ca94472d155e80af322ea9fcb4291b6ac9ec78"],["a301697bdfcd704313ba48e51d567543f2a182031efd6915ddc07bbcc4e16070","7370f91cfb67e4f5081809fa25d40f9b1735dbf7c0a11a130c0d1a041e177ea1"],["90ad85b389d6b936463f9d0512678de208cc330b11307fffab7ac63e3fb04ed4","e507a3620a38261affdcbd9427222b839aefabe1582894d991d4d48cb6ef150"],["8f68b9d2f63b5f339239c1ad981f162ee88c5678723ea3351b7b444c9ec4c0da","662a9f2dba063986de1d90c2b6be215dbbea2cfe95510bfdf23cbf79501fff82"],["e4f3fb0176af85d65ff99ff9198c36091f48e86503681e3e6686fd5053231e11","1e63633ad0ef4f1c1661a6d0ea02b7286cc7e74ec951d1c9822c38576feb73bc"],["8c00fa9b18ebf331eb961537a45a4266c7034f2f0d4e1d0716fb6eae20eae29e","efa47267fea521a1a9dc343a3736c974c2fadafa81e36c54e7d2a4c66702414b"],["e7a26ce69dd4829f3e10cec0a9e98ed3143d084f308b92c0997fddfc60cb3e41","2a758e300fa7984b471b006a1aafbb18d0a6b2c0420e83e20e8a9421cf2cfd51"],["b6459e0ee3662ec8d23540c223bcbdc571cbcb967d79424f3cf29eb3de6b80ef","67c876d06f3e06de1dadf16e5661db3c4b3ae6d48e35b2ff30bf0b61a71ba45"],["d68a80c8280bb840793234aa118f06231d6f1fc67e73c5a5deda0f5b496943e8","db8ba9fff4b586d00c4b1f9177b0e28b5b0e7b8f7845295a294c84266b133120"],["324aed7df65c804252dc0270907a30b09612aeb973449cea4095980fc28d3d5d","648a365774b61f2ff130c0c35aec1f4f19213b0c7e332843967224af96ab7c84"],["4df9c14919cde61f6d51dfdbe5fee5dceec4143ba8d1ca888e8bd373fd054c96","35ec51092d8728050974c23a1d85d4b5d506cdc288490192ebac06cad10d5d"],["9c3919a84a474870faed8a9c1cc66021523489054d7f0308cbfc99c8ac1f98cd","ddb84f0f4a4ddd57584f044bf260e641905326f76c64c8e6be7e5e03d4fc599d"],["6057170b1dd12fdf8de05f281d8e06bb91e1493a8b91d4cc5a21382120a959e5","9a1af0b26a6a4807add9a2daf71df262465152bc3ee24c65e899be932385a2a8"],["a576df8e23a08411421439a4518da31880cef0fba7d4df12b1a6973eecb94266","40a6bf20e76640b2c92b97afe58cd82c432e10a7f514d9f3ee8be11ae1b28ec8"],["7778a78c28dec3e30a05fe9629de8c38bb30d1f5cf9a3a208f763889be58ad71","34626d9ab5a5b22ff7098e12f2ff580087b38411ff24ac563b513fc1fd9f43ac"],["928955ee637a84463729fd30e7afd2ed5f96274e5ad7e5cb09eda9c06d903ac","c25621003d3f42a827b78a13093a95eeac3d26efa8a8d83fc5180e935bcd091f"],["85d0fef3ec6db109399064f3a0e3b2855645b4a907ad354527aae75163d82751","1f03648413a38c0be29d496e582cf5663e8751e96877331582c237a24eb1f962"],["ff2b0dce97eece97c1c9b6041798b85dfdfb6d8882da20308f5404824526087e","493d13fef524ba188af4c4dc54d07936c7b7ed6fb90e2ceb2c951e01f0c29907"],["827fbbe4b1e880ea9ed2b2e6301b212b57f1ee148cd6dd28780e5e2cf856e241","c60f9c923c727b0b71bef2c67d1d12687ff7a63186903166d605b68baec293ec"],["eaa649f21f51bdbae7be4ae34ce6e5217a58fdce7f47f9aa7f3b58fa2120e2b3","be3279ed5bbbb03ac69a80f89879aa5a01a6b965f13f7e59d47a5305ba5ad93d"],["e4a42d43c5cf169d9391df6decf42ee541b6d8f0c9a137401e23632dda34d24f","4d9f92e716d1c73526fc99ccfb8ad34ce886eedfa8d8e4f13a7f7131deba9414"],["1ec80fef360cbdd954160fadab352b6b92b53576a88fea4947173b9d4300bf19","aeefe93756b5340d2f3a4958a7abbf5e0146e77f6295a07b671cdc1cc107cefd"],["146a778c04670c2f91b00af4680dfa8bce3490717d58ba889ddb5928366642be","b318e0ec3354028add669827f9d4b2870aaa971d2f7e5ed1d0b297483d83efd0"],["fa50c0f61d22e5f07e3acebb1aa07b128d0012209a28b9776d76a8793180eef9","6b84c6922397eba9b72cd2872281a68a5e683293a57a213b38cd8d7d3f4f2811"],["da1d61d0ca721a11b1a5bf6b7d88e8421a288ab5d5bba5220e53d32b5f067ec2","8157f55a7c99306c79c0766161c91e2966a73899d279b48a655fba0f1ad836f1"],["a8e282ff0c9706907215ff98e8fd416615311de0446f1e062a73b0610d064e13","7f97355b8db81c09abfb7f3c5b2515888b679a3e50dd6bd6cef7c73111f4cc0c"],["174a53b9c9a285872d39e56e6913cab15d59b1fa512508c022f382de8319497c","ccc9dc37abfc9c1657b4155f2c47f9e6646b3a1d8cb9854383da13ac079afa73"],["959396981943785c3d3e57edf5018cdbe039e730e4918b3d884fdff09475b7ba","2e7e552888c331dd8ba0386a4b9cd6849c653f64c8709385e9b8abf87524f2fd"],["d2a63a50ae401e56d645a1153b109a8fcca0a43d561fba2dbb51340c9d82b151","e82d86fb6443fcb7565aee58b2948220a70f750af484ca52d4142174dcf89405"],["64587e2335471eb890ee7896d7cfdc866bacbdbd3839317b3436f9b45617e073","d99fcdd5bf6902e2ae96dd6447c299a185b90a39133aeab358299e5e9faf6589"],["8481bde0e4e4d885b3a546d3e549de042f0aa6cea250e7fd358d6c86dd45e458","38ee7b8cba5404dd84a25bf39cecb2ca900a79c42b262e556d64b1b59779057e"],["13464a57a78102aa62b6979ae817f4637ffcfed3c4b1ce30bcd6303f6caf666b","69be159004614580ef7e433453ccb0ca48f300a81d0942e13f495a907f6ecc27"],["bc4a9df5b713fe2e9aef430bcc1dc97a0cd9ccede2f28588cada3a0d2d83f366","d3a81ca6e785c06383937adf4b798caa6e8a9fbfa547b16d758d666581f33c1"],["8c28a97bf8298bc0d23d8c749452a32e694b65e30a9472a3954ab30fe5324caa","40a30463a3305193378fedf31f7cc0eb7ae784f0451cb9459e71dc73cbef9482"],["8ea9666139527a8c1dd94ce4f071fd23c8b350c5a4bb33748c4ba111faccae0","620efabbc8ee2782e24e7c0cfb95c5d735b783be9cf0f8e955af34a30e62b945"],["dd3625faef5ba06074669716bbd3788d89bdde815959968092f76cc4eb9a9787","7a188fa3520e30d461da2501045731ca941461982883395937f68d00c644a573"],["f710d79d9eb962297e4f6232b40e8f7feb2bc63814614d692c12de752408221e","ea98e67232d3b3295d3b535532115ccac8612c721851617526ae47a9c77bfc82"]]},naf:{wnd:7,points:[["f9308a019258c31049344f85f89d5229b531c845836f99b08601f113bce036f9","388f7b0f632de8140fe337e62a37f3566500a99934c2231b6cb9fd7584b8e672"],["2f8bde4d1a07209355b4a7250a5c5128e88b84bddc619ab7cba8d569b240efe4","d8ac222636e5e3d6d4dba9dda6c9c426f788271bab0d6840dca87d3aa6ac62d6"],["5cbdf0646e5db4eaa398f365f2ea7a0e3d419b7e0330e39ce92bddedcac4f9bc","6aebca40ba255960a3178d6d861a54dba813d0b813fde7b5a5082628087264da"],["acd484e2f0c7f65309ad178a9f559abde09796974c57e714c35f110dfc27ccbe","cc338921b0a7d9fd64380971763b61e9add888a4375f8e0f05cc262ac64f9c37"],["774ae7f858a9411e5ef4246b70c65aac5649980be5c17891bbec17895da008cb","d984a032eb6b5e190243dd56d7b7b365372db1e2dff9d6a8301d74c9c953c61b"],["f28773c2d975288bc7d1d205c3748651b075fbc6610e58cddeeddf8f19405aa8","ab0902e8d880a89758212eb65cdaf473a1a06da521fa91f29b5cb52db03ed81"],["d7924d4f7d43ea965a465ae3095ff41131e5946f3c85f79e44adbcf8e27e080e","581e2872a86c72a683842ec228cc6defea40af2bd896d3a5c504dc9ff6a26b58"],["defdea4cdb677750a420fee807eacf21eb9898ae79b9768766e4faa04a2d4a34","4211ab0694635168e997b0ead2a93daeced1f4a04a95c0f6cfb199f69e56eb77"],["2b4ea0a797a443d293ef5cff444f4979f06acfebd7e86d277475656138385b6c","85e89bc037945d93b343083b5a1c86131a01f60c50269763b570c854e5c09b7a"],["352bbf4a4cdd12564f93fa332ce333301d9ad40271f8107181340aef25be59d5","321eb4075348f534d59c18259dda3e1f4a1b3b2e71b1039c67bd3d8bcf81998c"],["2fa2104d6b38d11b0230010559879124e42ab8dfeff5ff29dc9cdadd4ecacc3f","2de1068295dd865b64569335bd5dd80181d70ecfc882648423ba76b532b7d67"],["9248279b09b4d68dab21a9b066edda83263c3d84e09572e269ca0cd7f5453714","73016f7bf234aade5d1aa71bdea2b1ff3fc0de2a887912ffe54a32ce97cb3402"],["daed4f2be3a8bf278e70132fb0beb7522f570e144bf615c07e996d443dee8729","a69dce4a7d6c98e8d4a1aca87ef8d7003f83c230f3afa726ab40e52290be1c55"],["c44d12c7065d812e8acf28d7cbb19f9011ecd9e9fdf281b0e6a3b5e87d22e7db","2119a460ce326cdc76c45926c982fdac0e106e861edf61c5a039063f0e0e6482"],["6a245bf6dc698504c89a20cfded60853152b695336c28063b61c65cbd269e6b4","e022cf42c2bd4a708b3f5126f16a24ad8b33ba48d0423b6efd5e6348100d8a82"],["1697ffa6fd9de627c077e3d2fe541084ce13300b0bec1146f95ae57f0d0bd6a5","b9c398f186806f5d27561506e4557433a2cf15009e498ae7adee9d63d01b2396"],["605bdb019981718b986d0f07e834cb0d9deb8360ffb7f61df982345ef27a7479","2972d2de4f8d20681a78d93ec96fe23c26bfae84fb14db43b01e1e9056b8c49"],["62d14dab4150bf497402fdc45a215e10dcb01c354959b10cfe31c7e9d87ff33d","80fc06bd8cc5b01098088a1950eed0db01aa132967ab472235f5642483b25eaf"],["80c60ad0040f27dade5b4b06c408e56b2c50e9f56b9b8b425e555c2f86308b6f","1c38303f1cc5c30f26e66bad7fe72f70a65eed4cbe7024eb1aa01f56430bd57a"],["7a9375ad6167ad54aa74c6348cc54d344cc5dc9487d847049d5eabb0fa03c8fb","d0e3fa9eca8726909559e0d79269046bdc59ea10c70ce2b02d499ec224dc7f7"],["d528ecd9b696b54c907a9ed045447a79bb408ec39b68df504bb51f459bc3ffc9","eecf41253136e5f99966f21881fd656ebc4345405c520dbc063465b521409933"],["49370a4b5f43412ea25f514e8ecdad05266115e4a7ecb1387231808f8b45963","758f3f41afd6ed428b3081b0512fd62a54c3f3afbb5b6764b653052a12949c9a"],["77f230936ee88cbbd73df930d64702ef881d811e0e1498e2f1c13eb1fc345d74","958ef42a7886b6400a08266e9ba1b37896c95330d97077cbbe8eb3c7671c60d6"],["f2dac991cc4ce4b9ea44887e5c7c0bce58c80074ab9d4dbaeb28531b7739f530","e0dedc9b3b2f8dad4da1f32dec2531df9eb5fbeb0598e4fd1a117dba703a3c37"],["463b3d9f662621fb1b4be8fbbe2520125a216cdfc9dae3debcba4850c690d45b","5ed430d78c296c3543114306dd8622d7c622e27c970a1de31cb377b01af7307e"],["f16f804244e46e2a09232d4aff3b59976b98fac14328a2d1a32496b49998f247","cedabd9b82203f7e13d206fcdf4e33d92a6c53c26e5cce26d6579962c4e31df6"],["caf754272dc84563b0352b7a14311af55d245315ace27c65369e15f7151d41d1","cb474660ef35f5f2a41b643fa5e460575f4fa9b7962232a5c32f908318a04476"],["2600ca4b282cb986f85d0f1709979d8b44a09c07cb86d7c124497bc86f082120","4119b88753c15bd6a693b03fcddbb45d5ac6be74ab5f0ef44b0be9475a7e4b40"],["7635ca72d7e8432c338ec53cd12220bc01c48685e24f7dc8c602a7746998e435","91b649609489d613d1d5e590f78e6d74ecfc061d57048bad9e76f302c5b9c61"],["754e3239f325570cdbbf4a87deee8a66b7f2b33479d468fbc1a50743bf56cc18","673fb86e5bda30fb3cd0ed304ea49a023ee33d0197a695d0c5d98093c536683"],["e3e6bd1071a1e96aff57859c82d570f0330800661d1c952f9fe2694691d9b9e8","59c9e0bba394e76f40c0aa58379a3cb6a5a2283993e90c4167002af4920e37f5"],["186b483d056a033826ae73d88f732985c4ccb1f32ba35f4b4cc47fdcf04aa6eb","3b952d32c67cf77e2e17446e204180ab21fb8090895138b4a4a797f86e80888b"],["df9d70a6b9876ce544c98561f4be4f725442e6d2b737d9c91a8321724ce0963f","55eb2dafd84d6ccd5f862b785dc39d4ab157222720ef9da217b8c45cf2ba2417"],["5edd5cc23c51e87a497ca815d5dce0f8ab52554f849ed8995de64c5f34ce7143","efae9c8dbc14130661e8cec030c89ad0c13c66c0d17a2905cdc706ab7399a868"],["290798c2b6476830da12fe02287e9e777aa3fba1c355b17a722d362f84614fba","e38da76dcd440621988d00bcf79af25d5b29c094db2a23146d003afd41943e7a"],["af3c423a95d9f5b3054754efa150ac39cd29552fe360257362dfdecef4053b45","f98a3fd831eb2b749a93b0e6f35cfb40c8cd5aa667a15581bc2feded498fd9c6"],["766dbb24d134e745cccaa28c99bf274906bb66b26dcf98df8d2fed50d884249a","744b1152eacbe5e38dcc887980da38b897584a65fa06cedd2c924f97cbac5996"],["59dbf46f8c94759ba21277c33784f41645f7b44f6c596a58ce92e666191abe3e","c534ad44175fbc300f4ea6ce648309a042ce739a7919798cd85e216c4a307f6e"],["f13ada95103c4537305e691e74e9a4a8dd647e711a95e73cb62dc6018cfd87b8","e13817b44ee14de663bf4bc808341f326949e21a6a75c2570778419bdaf5733d"],["7754b4fa0e8aced06d4167a2c59cca4cda1869c06ebadfb6488550015a88522c","30e93e864e669d82224b967c3020b8fa8d1e4e350b6cbcc537a48b57841163a2"],["948dcadf5990e048aa3874d46abef9d701858f95de8041d2a6828c99e2262519","e491a42537f6e597d5d28a3224b1bc25df9154efbd2ef1d2cbba2cae5347d57e"],["7962414450c76c1689c7b48f8202ec37fb224cf5ac0bfa1570328a8a3d7c77ab","100b610ec4ffb4760d5c1fc133ef6f6b12507a051f04ac5760afa5b29db83437"],["3514087834964b54b15b160644d915485a16977225b8847bb0dd085137ec47ca","ef0afbb2056205448e1652c48e8127fc6039e77c15c2378b7e7d15a0de293311"],["d3cc30ad6b483e4bc79ce2c9dd8bc54993e947eb8df787b442943d3f7b527eaf","8b378a22d827278d89c5e9be8f9508ae3c2ad46290358630afb34db04eede0a4"],["1624d84780732860ce1c78fcbfefe08b2b29823db913f6493975ba0ff4847610","68651cf9b6da903e0914448c6cd9d4ca896878f5282be4c8cc06e2a404078575"],["733ce80da955a8a26902c95633e62a985192474b5af207da6df7b4fd5fc61cd4","f5435a2bd2badf7d485a4d8b8db9fcce3e1ef8e0201e4578c54673bc1dc5ea1d"],["15d9441254945064cf1a1c33bbd3b49f8966c5092171e699ef258dfab81c045c","d56eb30b69463e7234f5137b73b84177434800bacebfc685fc37bbe9efe4070d"],["a1d0fcf2ec9de675b612136e5ce70d271c21417c9d2b8aaaac138599d0717940","edd77f50bcb5a3cab2e90737309667f2641462a54070f3d519212d39c197a629"],["e22fbe15c0af8ccc5780c0735f84dbe9a790badee8245c06c7ca37331cb36980","a855babad5cd60c88b430a69f53a1a7a38289154964799be43d06d77d31da06"],["311091dd9860e8e20ee13473c1155f5f69635e394704eaa74009452246cfa9b3","66db656f87d1f04fffd1f04788c06830871ec5a64feee685bd80f0b1286d8374"],["34c1fd04d301be89b31c0442d3e6ac24883928b45a9340781867d4232ec2dbdf","9414685e97b1b5954bd46f730174136d57f1ceeb487443dc5321857ba73abee"],["f219ea5d6b54701c1c14de5b557eb42a8d13f3abbcd08affcc2a5e6b049b8d63","4cb95957e83d40b0f73af4544cccf6b1f4b08d3c07b27fb8d8c2962a400766d1"],["d7b8740f74a8fbaab1f683db8f45de26543a5490bca627087236912469a0b448","fa77968128d9c92ee1010f337ad4717eff15db5ed3c049b3411e0315eaa4593b"],["32d31c222f8f6f0ef86f7c98d3a3335ead5bcd32abdd94289fe4d3091aa824bf","5f3032f5892156e39ccd3d7915b9e1da2e6dac9e6f26e961118d14b8462e1661"],["7461f371914ab32671045a155d9831ea8793d77cd59592c4340f86cbc18347b5","8ec0ba238b96bec0cbdddcae0aa442542eee1ff50c986ea6b39847b3cc092ff6"],["ee079adb1df1860074356a25aa38206a6d716b2c3e67453d287698bad7b2b2d6","8dc2412aafe3be5c4c5f37e0ecc5f9f6a446989af04c4e25ebaac479ec1c8c1e"],["16ec93e447ec83f0467b18302ee620f7e65de331874c9dc72bfd8616ba9da6b5","5e4631150e62fb40d0e8c2a7ca5804a39d58186a50e497139626778e25b0674d"],["eaa5f980c245f6f038978290afa70b6bd8855897f98b6aa485b96065d537bd99","f65f5d3e292c2e0819a528391c994624d784869d7e6ea67fb18041024edc07dc"],["78c9407544ac132692ee1910a02439958ae04877151342ea96c4b6b35a49f51","f3e0319169eb9b85d5404795539a5e68fa1fbd583c064d2462b675f194a3ddb4"],["494f4be219a1a77016dcd838431aea0001cdc8ae7a6fc688726578d9702857a5","42242a969283a5f339ba7f075e36ba2af925ce30d767ed6e55f4b031880d562c"],["a598a8030da6d86c6bc7f2f5144ea549d28211ea58faa70ebf4c1e665c1fe9b5","204b5d6f84822c307e4b4a7140737aec23fc63b65b35f86a10026dbd2d864e6b"],["c41916365abb2b5d09192f5f2dbeafec208f020f12570a184dbadc3e58595997","4f14351d0087efa49d245b328984989d5caf9450f34bfc0ed16e96b58fa9913"],["841d6063a586fa475a724604da03bc5b92a2e0d2e0a36acfe4c73a5514742881","73867f59c0659e81904f9a1c7543698e62562d6744c169ce7a36de01a8d6154"],["5e95bb399a6971d376026947f89bde2f282b33810928be4ded112ac4d70e20d5","39f23f366809085beebfc71181313775a99c9aed7d8ba38b161384c746012865"],["36e4641a53948fd476c39f8a99fd974e5ec07564b5315d8bf99471bca0ef2f66","d2424b1b1abe4eb8164227b085c9aa9456ea13493fd563e06fd51cf5694c78fc"],["336581ea7bfbbb290c191a2f507a41cf5643842170e914faeab27c2c579f726","ead12168595fe1be99252129b6e56b3391f7ab1410cd1e0ef3dcdcabd2fda224"],["8ab89816dadfd6b6a1f2634fcf00ec8403781025ed6890c4849742706bd43ede","6fdcef09f2f6d0a044e654aef624136f503d459c3e89845858a47a9129cdd24e"],["1e33f1a746c9c5778133344d9299fcaa20b0938e8acff2544bb40284b8c5fb94","60660257dd11b3aa9c8ed618d24edff2306d320f1d03010e33a7d2057f3b3b6"],["85b7c1dcb3cec1b7ee7f30ded79dd20a0ed1f4cc18cbcfcfa410361fd8f08f31","3d98a9cdd026dd43f39048f25a8847f4fcafad1895d7a633c6fed3c35e999511"],["29df9fbd8d9e46509275f4b125d6d45d7fbe9a3b878a7af872a2800661ac5f51","b4c4fe99c775a606e2d8862179139ffda61dc861c019e55cd2876eb2a27d84b"],["a0b1cae06b0a847a3fea6e671aaf8adfdfe58ca2f768105c8082b2e449fce252","ae434102edde0958ec4b19d917a6a28e6b72da1834aff0e650f049503a296cf2"],["4e8ceafb9b3e9a136dc7ff67e840295b499dfb3b2133e4ba113f2e4c0e121e5","cf2174118c8b6d7a4b48f6d534ce5c79422c086a63460502b827ce62a326683c"],["d24a44e047e19b6f5afb81c7ca2f69080a5076689a010919f42725c2b789a33b","6fb8d5591b466f8fc63db50f1c0f1c69013f996887b8244d2cdec417afea8fa3"],["ea01606a7a6c9cdd249fdfcfacb99584001edd28abbab77b5104e98e8e3b35d4","322af4908c7312b0cfbfe369f7a7b3cdb7d4494bc2823700cfd652188a3ea98d"],["af8addbf2b661c8a6c6328655eb96651252007d8c5ea31be4ad196de8ce2131f","6749e67c029b85f52a034eafd096836b2520818680e26ac8f3dfbcdb71749700"],["e3ae1974566ca06cc516d47e0fb165a674a3dabcfca15e722f0e3450f45889","2aeabe7e4531510116217f07bf4d07300de97e4874f81f533420a72eeb0bd6a4"],["591ee355313d99721cf6993ffed1e3e301993ff3ed258802075ea8ced397e246","b0ea558a113c30bea60fc4775460c7901ff0b053d25ca2bdeee98f1a4be5d196"],["11396d55fda54c49f19aa97318d8da61fa8584e47b084945077cf03255b52984","998c74a8cd45ac01289d5833a7beb4744ff536b01b257be4c5767bea93ea57a4"],["3c5d2a1ba39c5a1790000738c9e0c40b8dcdfd5468754b6405540157e017aa7a","b2284279995a34e2f9d4de7396fc18b80f9b8b9fdd270f6661f79ca4c81bd257"],["cc8704b8a60a0defa3a99a7299f2e9c3fbc395afb04ac078425ef8a1793cc030","bdd46039feed17881d1e0862db347f8cf395b74fc4bcdc4e940b74e3ac1f1b13"],["c533e4f7ea8555aacd9777ac5cad29b97dd4defccc53ee7ea204119b2889b197","6f0a256bc5efdf429a2fb6242f1a43a2d9b925bb4a4b3a26bb8e0f45eb596096"],["c14f8f2ccb27d6f109f6d08d03cc96a69ba8c34eec07bbcf566d48e33da6593","c359d6923bb398f7fd4473e16fe1c28475b740dd098075e6c0e8649113dc3a38"],["a6cbc3046bc6a450bac24789fa17115a4c9739ed75f8f21ce441f72e0b90e6ef","21ae7f4680e889bb130619e2c0f95a360ceb573c70603139862afd617fa9b9f"],["347d6d9a02c48927ebfb86c1359b1caf130a3c0267d11ce6344b39f99d43cc38","60ea7f61a353524d1c987f6ecec92f086d565ab687870cb12689ff1e31c74448"],["da6545d2181db8d983f7dcb375ef5866d47c67b1bf31c8cf855ef7437b72656a","49b96715ab6878a79e78f07ce5680c5d6673051b4935bd897fea824b77dc208a"],["c40747cc9d012cb1a13b8148309c6de7ec25d6945d657146b9d5994b8feb1111","5ca560753be2a12fc6de6caf2cb489565db936156b9514e1bb5e83037e0fa2d4"],["4e42c8ec82c99798ccf3a610be870e78338c7f713348bd34c8203ef4037f3502","7571d74ee5e0fb92a7a8b33a07783341a5492144cc54bcc40a94473693606437"],["3775ab7089bc6af823aba2e1af70b236d251cadb0c86743287522a1b3b0dedea","be52d107bcfa09d8bcb9736a828cfa7fac8db17bf7a76a2c42ad961409018cf7"],["cee31cbf7e34ec379d94fb814d3d775ad954595d1314ba8846959e3e82f74e26","8fd64a14c06b589c26b947ae2bcf6bfa0149ef0be14ed4d80f448a01c43b1c6d"],["b4f9eaea09b6917619f6ea6a4eb5464efddb58fd45b1ebefcdc1a01d08b47986","39e5c9925b5a54b07433a4f18c61726f8bb131c012ca542eb24a8ac07200682a"],["d4263dfc3d2df923a0179a48966d30ce84e2515afc3dccc1b77907792ebcc60e","62dfaf07a0f78feb30e30d6295853ce189e127760ad6cf7fae164e122a208d54"],["48457524820fa65a4f8d35eb6930857c0032acc0a4a2de422233eeda897612c4","25a748ab367979d98733c38a1fa1c2e7dc6cc07db2d60a9ae7a76aaa49bd0f77"],["dfeeef1881101f2cb11644f3a2afdfc2045e19919152923f367a1767c11cceda","ecfb7056cf1de042f9420bab396793c0c390bde74b4bbdff16a83ae09a9a7517"],["6d7ef6b17543f8373c573f44e1f389835d89bcbc6062ced36c82df83b8fae859","cd450ec335438986dfefa10c57fea9bcc521a0959b2d80bbf74b190dca712d10"],["e75605d59102a5a2684500d3b991f2e3f3c88b93225547035af25af66e04541f","f5c54754a8f71ee540b9b48728473e314f729ac5308b06938360990e2bfad125"],["eb98660f4c4dfaa06a2be453d5020bc99a0c2e60abe388457dd43fefb1ed620c","6cb9a8876d9cb8520609af3add26cd20a0a7cd8a9411131ce85f44100099223e"],["13e87b027d8514d35939f2e6892b19922154596941888336dc3563e3b8dba942","fef5a3c68059a6dec5d624114bf1e91aac2b9da568d6abeb2570d55646b8adf1"],["ee163026e9fd6fe017c38f06a5be6fc125424b371ce2708e7bf4491691e5764a","1acb250f255dd61c43d94ccc670d0f58f49ae3fa15b96623e5430da0ad6c62b2"],["b268f5ef9ad51e4d78de3a750c2dc89b1e626d43505867999932e5db33af3d80","5f310d4b3c99b9ebb19f77d41c1dee018cf0d34fd4191614003e945a1216e423"],["ff07f3118a9df035e9fad85eb6c7bfe42b02f01ca99ceea3bf7ffdba93c4750d","438136d603e858a3a5c440c38eccbaddc1d2942114e2eddd4740d098ced1f0d8"],["8d8b9855c7c052a34146fd20ffb658bea4b9f69e0d825ebec16e8c3ce2b526a1","cdb559eedc2d79f926baf44fb84ea4d44bcf50fee51d7ceb30e2e7f463036758"],["52db0b5384dfbf05bfa9d472d7ae26dfe4b851ceca91b1eba54263180da32b63","c3b997d050ee5d423ebaf66a6db9f57b3180c902875679de924b69d84a7b375"],["e62f9490d3d51da6395efd24e80919cc7d0f29c3f3fa48c6fff543becbd43352","6d89ad7ba4876b0b22c2ca280c682862f342c8591f1daf5170e07bfd9ccafa7d"],["7f30ea2476b399b4957509c88f77d0191afa2ff5cb7b14fd6d8e7d65aaab1193","ca5ef7d4b231c94c3b15389a5f6311e9daff7bb67b103e9880ef4bff637acaec"],["5098ff1e1d9f14fb46a210fada6c903fef0fb7b4a1dd1d9ac60a0361800b7a00","9731141d81fc8f8084d37c6e7542006b3ee1b40d60dfe5362a5b132fd17ddc0"],["32b78c7de9ee512a72895be6b9cbefa6e2f3c4ccce445c96b9f2c81e2778ad58","ee1849f513df71e32efc3896ee28260c73bb80547ae2275ba497237794c8753c"],["e2cb74fddc8e9fbcd076eef2a7c72b0ce37d50f08269dfc074b581550547a4f7","d3aa2ed71c9dd2247a62df062736eb0baddea9e36122d2be8641abcb005cc4a4"],["8438447566d4d7bedadc299496ab357426009a35f235cb141be0d99cd10ae3a8","c4e1020916980a4da5d01ac5e6ad330734ef0d7906631c4f2390426b2edd791f"],["4162d488b89402039b584c6fc6c308870587d9c46f660b878ab65c82c711d67e","67163e903236289f776f22c25fb8a3afc1732f2b84b4e95dbda47ae5a0852649"],["3fad3fa84caf0f34f0f89bfd2dcf54fc175d767aec3e50684f3ba4a4bf5f683d","cd1bc7cb6cc407bb2f0ca647c718a730cf71872e7d0d2a53fa20efcdfe61826"],["674f2600a3007a00568c1a7ce05d0816c1fb84bf1370798f1c69532faeb1a86b","299d21f9413f33b3edf43b257004580b70db57da0b182259e09eecc69e0d38a5"],["d32f4da54ade74abb81b815ad1fb3b263d82d6c692714bcff87d29bd5ee9f08f","f9429e738b8e53b968e99016c059707782e14f4535359d582fc416910b3eea87"],["30e4e670435385556e593657135845d36fbb6931f72b08cb1ed954f1e3ce3ff6","462f9bce619898638499350113bbc9b10a878d35da70740dc695a559eb88db7b"],["be2062003c51cc3004682904330e4dee7f3dcd10b01e580bf1971b04d4cad297","62188bc49d61e5428573d48a74e1c655b1c61090905682a0d5558ed72dccb9bc"],["93144423ace3451ed29e0fb9ac2af211cb6e84a601df5993c419859fff5df04a","7c10dfb164c3425f5c71a3f9d7992038f1065224f72bb9d1d902a6d13037b47c"],["b015f8044f5fcbdcf21ca26d6c34fb8197829205c7b7d2a7cb66418c157b112c","ab8c1e086d04e813744a655b2df8d5f83b3cdc6faa3088c1d3aea1454e3a1d5f"],["d5e9e1da649d97d89e4868117a465a3a4f8a18de57a140d36b3f2af341a21b52","4cb04437f391ed73111a13cc1d4dd0db1693465c2240480d8955e8592f27447a"],["d3ae41047dd7ca065dbf8ed77b992439983005cd72e16d6f996a5316d36966bb","bd1aeb21ad22ebb22a10f0303417c6d964f8cdd7df0aca614b10dc14d125ac46"],["463e2763d885f958fc66cdd22800f0a487197d0a82e377b49f80af87c897b065","bfefacdb0e5d0fd7df3a311a94de062b26b80c61fbc97508b79992671ef7ca7f"],["7985fdfd127c0567c6f53ec1bb63ec3158e597c40bfe747c83cddfc910641917","603c12daf3d9862ef2b25fe1de289aed24ed291e0ec6708703a5bd567f32ed03"],["74a1ad6b5f76e39db2dd249410eac7f99e74c59cb83d2d0ed5ff1543da7703e9","cc6157ef18c9c63cd6193d83631bbea0093e0968942e8c33d5737fd790e0db08"],["30682a50703375f602d416664ba19b7fc9bab42c72747463a71d0896b22f6da3","553e04f6b018b4fa6c8f39e7f311d3176290d0e0f19ca73f17714d9977a22ff8"],["9e2158f0d7c0d5f26c3791efefa79597654e7a2b2464f52b1ee6c1347769ef57","712fcdd1b9053f09003a3481fa7762e9ffd7c8ef35a38509e2fbf2629008373"],["176e26989a43c9cfeba4029c202538c28172e566e3c4fce7322857f3be327d66","ed8cc9d04b29eb877d270b4878dc43c19aefd31f4eee09ee7b47834c1fa4b1c3"],["75d46efea3771e6e68abb89a13ad747ecf1892393dfc4f1b7004788c50374da8","9852390a99507679fd0b86fd2b39a868d7efc22151346e1a3ca4726586a6bed8"],["809a20c67d64900ffb698c4c825f6d5f2310fb0451c869345b7319f645605721","9e994980d9917e22b76b061927fa04143d096ccc54963e6a5ebfa5f3f8e286c1"],["1b38903a43f7f114ed4500b4eac7083fdefece1cf29c63528d563446f972c180","4036edc931a60ae889353f77fd53de4a2708b26b6f5da72ad3394119daf408f9"]]}}]})
},{"../elliptic":351,"bn.js":349,"hash.js":364}],364:[function(a,b,c){var d=c;d.utils=a("./hash/utils"),d.common=a("./hash/common"),d.sha=a("./hash/sha"),d.ripemd=a("./hash/ripemd"),d.hmac=a("./hash/hmac"),d.sha1=d.sha.sha1,d.sha256=d.sha.sha256,d.sha224=d.sha.sha224,d.sha384=d.sha.sha384,d.sha512=d.sha.sha512,d.ripemd160=d.ripemd.ripemd160},{"./hash/common":365,"./hash/hmac":366,"./hash/ripemd":367,"./hash/sha":368,"./hash/utils":369}],369:[function(a,b,c){function d(a,b){if(Array.isArray(a))return a.slice();if(!a)return[];var c=[];if("string"==typeof a)if(b){if("hex"===b){a=a.replace(/[^a-z0-9]+/gi,""),a.length%2!==0&&(a="0"+a);for(var d=0;d<a.length;d+=2)c.push(parseInt(a[d]+a[d+1],16))}}else for(var d=0;d<a.length;d++){var e=a.charCodeAt(d),f=e>>8,g=255&e;f?c.push(f,g):c.push(g)}else for(var d=0;d<a.length;d++)c[d]=0|a[d];return c}function e(a){for(var b="",c=0;c<a.length;c++)b+=h(a[c].toString(16));return b}function f(a){var b=a>>>24|a>>>8&65280|a<<8&16711680|(255&a)<<24;return b>>>0}function g(a,b){for(var c="",d=0;d<a.length;d++){var e=a[d];"little"===b&&(e=f(e)),c+=i(e.toString(16))}return c}function h(a){return 1===a.length?"0"+a:a}function i(a){return 7===a.length?"0"+a:6===a.length?"00"+a:5===a.length?"000"+a:4===a.length?"0000"+a:3===a.length?"00000"+a:2===a.length?"000000"+a:1===a.length?"0000000"+a:a}function j(a,b,c,d){var e=c-b;r(e%4===0);for(var f=new Array(e/4),g=0,h=b;g<f.length;g++,h+=4){var i;i="big"===d?a[h]<<24|a[h+1]<<16|a[h+2]<<8|a[h+3]:a[h+3]<<24|a[h+2]<<16|a[h+1]<<8|a[h],f[g]=i>>>0}return f}function k(a,b){for(var c=new Array(4*a.length),d=0,e=0;d<a.length;d++,e+=4){var f=a[d];"big"===b?(c[e]=f>>>24,c[e+1]=f>>>16&255,c[e+2]=f>>>8&255,c[e+3]=255&f):(c[e+3]=f>>>24,c[e+2]=f>>>16&255,c[e+1]=f>>>8&255,c[e]=255&f)}return c}function l(a,b){return a>>>b|a<<32-b}function m(a,b){return a<<b|a>>>32-b}function n(a,b){return a+b>>>0}function o(a,b,c){return a+b+c>>>0}function p(a,b,c,d){return a+b+c+d>>>0}function q(a,b,c,d,e){return a+b+c+d+e>>>0}function r(a,b){if(!a)throw new Error(b||"Assertion failed")}function s(a,b,c,d){var e=a[b],f=a[b+1],g=d+f>>>0,h=(d>g?1:0)+c+e;a[b]=h>>>0,a[b+1]=g}function t(a,b,c,d){var e=b+d>>>0,f=(b>e?1:0)+a+c;return f>>>0}function u(a,b,c,d){var e=b+d;return e>>>0}function v(a,b,c,d,e,f,g,h){var i=0,j=b;j=j+d>>>0,i+=b>j?1:0,j=j+f>>>0,i+=f>j?1:0,j=j+h>>>0,i+=h>j?1:0;var k=a+c+e+g+i;return k>>>0}function w(a,b,c,d,e,f,g,h){var i=b+d+f+h;return i>>>0}function x(a,b,c,d,e,f,g,h,i,j){var k=0,l=b;l=l+d>>>0,k+=b>l?1:0,l=l+f>>>0,k+=f>l?1:0,l=l+h>>>0,k+=h>l?1:0,l=l+j>>>0,k+=j>l?1:0;var m=a+c+e+g+i+k;return m>>>0}function y(a,b,c,d,e,f,g,h,i,j){var k=b+d+f+h+j;return k>>>0}function z(a,b,c){var d=b<<32-c|a>>>c;return d>>>0}function A(a,b,c){var d=a<<32-c|b>>>c;return d>>>0}function B(a,b,c){return a>>>c}function C(a,b,c){var d=a<<32-c|b>>>c;return d>>>0}var D=c,E=a("inherits");D.toArray=d,D.toHex=e,D.htonl=f,D.toHex32=g,D.zero2=h,D.zero8=i,D.join32=j,D.split32=k,D.rotr32=l,D.rotl32=m,D.sum32=n,D.sum32_3=o,D.sum32_4=p,D.sum32_5=q,D.assert=r,D.inherits=E,c.sum64=s,c.sum64_hi=t,c.sum64_lo=u,c.sum64_4_hi=v,c.sum64_4_lo=w,c.sum64_5_hi=x,c.sum64_5_lo=y,c.rotr64_hi=z,c.rotr64_lo=A,c.shr64_hi=B,c.shr64_lo=C},{inherits:467}],368:[function(a,b,c){function d(){return this instanceof d?(V.call(this),this.h=[1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225],this.k=W,void(this.W=new Array(64))):new d}function e(){return this instanceof e?(d.call(this),void(this.h=[3238371032,914150663,812702999,4144912697,4290775857,1750603025,1694076839,3204075428])):new e}function f(){return this instanceof f?(V.call(this),this.h=[1779033703,4089235720,3144134277,2227873595,1013904242,4271175723,2773480762,1595750129,1359893119,2917565137,2600822924,725511199,528734635,4215389547,1541459225,327033209],this.k=X,void(this.W=new Array(160))):new f}function g(){return this instanceof g?(f.call(this),void(this.h=[3418070365,3238371032,1654270250,914150663,2438529370,812702999,355462360,4144912697,1731405415,4290775857,2394180231,1750603025,3675008525,1694076839,1203062813,3204075428])):new g}function h(){return this instanceof h?(V.call(this),this.h=[1732584193,4023233417,2562383102,271733878,3285377520],void(this.W=new Array(80))):new h}function i(a,b,c){return a&b^~a&c}function j(a,b,c){return a&b^a&c^b&c}function k(a,b,c){return a^b^c}function l(a){return F(a,2)^F(a,13)^F(a,22)}function m(a){return F(a,6)^F(a,11)^F(a,25)}function n(a){return F(a,7)^F(a,18)^a>>>3}function o(a){return F(a,17)^F(a,19)^a>>>10}function p(a,b,c,d){return 0===a?i(b,c,d):1===a||3===a?k(b,c,d):2===a?j(b,c,d):void 0}function q(a,b,c,d,e){var f=a&c^~a&e;return 0>f&&(f+=4294967296),f}function r(a,b,c,d,e,f){var g=b&d^~b&f;return 0>g&&(g+=4294967296),g}function s(a,b,c,d,e){var f=a&c^a&e^c&e;return 0>f&&(f+=4294967296),f}function t(a,b,c,d,e,f){var g=b&d^b&f^d&f;return 0>g&&(g+=4294967296),g}function u(a,b){var c=K(a,b,28),d=K(b,a,2),e=K(b,a,7),f=c^d^e;return 0>f&&(f+=4294967296),f}function v(a,b){var c=L(a,b,28),d=L(b,a,2),e=L(b,a,7),f=c^d^e;return 0>f&&(f+=4294967296),f}function w(a,b){var c=K(a,b,14),d=K(a,b,18),e=K(b,a,9),f=c^d^e;return 0>f&&(f+=4294967296),f}function x(a,b){var c=L(a,b,14),d=L(a,b,18),e=L(b,a,9),f=c^d^e;return 0>f&&(f+=4294967296),f}function y(a,b){var c=K(a,b,1),d=K(a,b,8),e=M(a,b,7),f=c^d^e;return 0>f&&(f+=4294967296),f}function z(a,b){var c=L(a,b,1),d=L(a,b,8),e=N(a,b,7),f=c^d^e;return 0>f&&(f+=4294967296),f}function A(a,b){var c=K(a,b,19),d=K(b,a,29),e=M(a,b,6),f=c^d^e;return 0>f&&(f+=4294967296),f}function B(a,b){var c=L(a,b,19),d=L(b,a,29),e=N(a,b,6),f=c^d^e;return 0>f&&(f+=4294967296),f}var C=a("../hash"),D=C.utils,E=D.assert,F=D.rotr32,G=D.rotl32,H=D.sum32,I=D.sum32_4,J=D.sum32_5,K=D.rotr64_hi,L=D.rotr64_lo,M=D.shr64_hi,N=D.shr64_lo,O=D.sum64,P=D.sum64_hi,Q=D.sum64_lo,R=D.sum64_4_hi,S=D.sum64_4_lo,T=D.sum64_5_hi,U=D.sum64_5_lo,V=C.common.BlockHash,W=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298],X=[1116352408,3609767458,1899447441,602891725,3049323471,3964484399,3921009573,2173295548,961987163,4081628472,1508970993,3053834265,2453635748,2937671579,2870763221,3664609560,3624381080,2734883394,310598401,1164996542,607225278,1323610764,1426881987,3590304994,1925078388,4068182383,2162078206,991336113,2614888103,633803317,3248222580,3479774868,3835390401,2666613458,4022224774,944711139,264347078,2341262773,604807628,2007800933,770255983,1495990901,1249150122,1856431235,1555081692,3175218132,1996064986,2198950837,2554220882,3999719339,2821834349,766784016,2952996808,2566594879,3210313671,3203337956,3336571891,1034457026,3584528711,2466948901,113926993,3758326383,338241895,168717936,666307205,1188179964,773529912,1546045734,1294757372,1522805485,1396182291,2643833823,1695183700,2343527390,1986661051,1014477480,2177026350,1206759142,2456956037,344077627,2730485921,1290863460,2820302411,3158454273,3259730800,3505952657,3345764771,106217008,3516065817,3606008344,3600352804,1432725776,4094571909,1467031594,275423344,851169720,430227734,3100823752,506948616,1363258195,659060556,3750685593,883997877,3785050280,958139571,3318307427,1322822218,3812723403,1537002063,2003034995,1747873779,3602036899,1955562222,1575990012,2024104815,1125592928,2227730452,2716904306,2361852424,442776044,2428436474,593698344,2756734187,3733110249,3204031479,2999351573,3329325298,3815920427,3391569614,3928383900,3515267271,566280711,3940187606,3454069534,4118630271,4000239992,116418474,1914138554,174292421,2731055270,289380356,3203993006,460393269,320620315,685471733,587496836,852142971,1086792851,1017036298,365543100,1126000580,2618297676,1288033470,3409855158,1501505948,4234509866,1607167915,987167468,1816402316,1246189591],Y=[1518500249,1859775393,2400959708,3395469782];D.inherits(d,V),c.sha256=d,d.blockSize=512,d.outSize=256,d.hmacStrength=192,d.padLength=64,d.prototype._update=function(a,b){for(var c=this.W,d=0;16>d;d++)c[d]=a[b+d];for(;d<c.length;d++)c[d]=I(o(c[d-2]),c[d-7],n(c[d-15]),c[d-16]);var e=this.h[0],f=this.h[1],g=this.h[2],h=this.h[3],k=this.h[4],p=this.h[5],q=this.h[6],r=this.h[7];E(this.k.length===c.length);for(var d=0;d<c.length;d++){var s=J(r,m(k),i(k,p,q),this.k[d],c[d]),t=H(l(e),j(e,f,g));r=q,q=p,p=k,k=H(h,s),h=g,g=f,f=e,e=H(s,t)}this.h[0]=H(this.h[0],e),this.h[1]=H(this.h[1],f),this.h[2]=H(this.h[2],g),this.h[3]=H(this.h[3],h),this.h[4]=H(this.h[4],k),this.h[5]=H(this.h[5],p),this.h[6]=H(this.h[6],q),this.h[7]=H(this.h[7],r)},d.prototype._digest=function(a){return"hex"===a?D.toHex32(this.h,"big"):D.split32(this.h,"big")},D.inherits(e,d),c.sha224=e,e.blockSize=512,e.outSize=224,e.hmacStrength=192,e.padLength=64,e.prototype._digest=function(a){return"hex"===a?D.toHex32(this.h.slice(0,7),"big"):D.split32(this.h.slice(0,7),"big")},D.inherits(f,V),c.sha512=f,f.blockSize=1024,f.outSize=512,f.hmacStrength=192,f.padLength=128,f.prototype._prepareBlock=function(a,b){for(var c=this.W,d=0;32>d;d++)c[d]=a[b+d];for(;d<c.length;d+=2){var e=A(c[d-4],c[d-3]),f=B(c[d-4],c[d-3]),g=c[d-14],h=c[d-13],i=y(c[d-30],c[d-29]),j=z(c[d-30],c[d-29]),k=c[d-32],l=c[d-31];c[d]=R(e,f,g,h,i,j,k,l),c[d+1]=S(e,f,g,h,i,j,k,l)}},f.prototype._update=function(a,b){this._prepareBlock(a,b);var c=this.W,d=this.h[0],e=this.h[1],f=this.h[2],g=this.h[3],h=this.h[4],i=this.h[5],j=this.h[6],k=this.h[7],l=this.h[8],m=this.h[9],n=this.h[10],o=this.h[11],p=this.h[12],y=this.h[13],z=this.h[14],A=this.h[15];E(this.k.length===c.length);for(var B=0;B<c.length;B+=2){var C=z,D=A,F=w(l,m),G=x(l,m),H=q(l,m,n,o,p,y),I=r(l,m,n,o,p,y),J=this.k[B],K=this.k[B+1],L=c[B],M=c[B+1],N=T(C,D,F,G,H,I,J,K,L,M),R=U(C,D,F,G,H,I,J,K,L,M),C=u(d,e),D=v(d,e),F=s(d,e,f,g,h,i),G=t(d,e,f,g,h,i),S=P(C,D,F,G),V=Q(C,D,F,G);z=p,A=y,p=n,y=o,n=l,o=m,l=P(j,k,N,R),m=Q(k,k,N,R),j=h,k=i,h=f,i=g,f=d,g=e,d=P(N,R,S,V),e=Q(N,R,S,V)}O(this.h,0,d,e),O(this.h,2,f,g),O(this.h,4,h,i),O(this.h,6,j,k),O(this.h,8,l,m),O(this.h,10,n,o),O(this.h,12,p,y),O(this.h,14,z,A)},f.prototype._digest=function(a){return"hex"===a?D.toHex32(this.h,"big"):D.split32(this.h,"big")},D.inherits(g,f),c.sha384=g,g.blockSize=1024,g.outSize=384,g.hmacStrength=192,g.padLength=128,g.prototype._digest=function(a){return"hex"===a?D.toHex32(this.h.slice(0,12),"big"):D.split32(this.h.slice(0,12),"big")},D.inherits(h,V),c.sha1=h,h.blockSize=512,h.outSize=160,h.hmacStrength=80,h.padLength=64,h.prototype._update=function(a,b){for(var c=this.W,d=0;16>d;d++)c[d]=a[b+d];for(;d<c.length;d++)c[d]=G(c[d-3]^c[d-8]^c[d-14]^c[d-16],1);for(var e=this.h[0],f=this.h[1],g=this.h[2],h=this.h[3],i=this.h[4],d=0;d<c.length;d++){var j=~~(d/20),k=J(G(e,5),p(j,f,g,h),i,c[d],Y[j]);i=h,h=g,g=G(f,30),f=e,e=k}this.h[0]=H(this.h[0],e),this.h[1]=H(this.h[1],f),this.h[2]=H(this.h[2],g),this.h[3]=H(this.h[3],h),this.h[4]=H(this.h[4],i)},h.prototype._digest=function(a){return"hex"===a?D.toHex32(this.h,"big"):D.split32(this.h,"big")}},{"../hash":364}],367:[function(a,b,c){function d(){return this instanceof d?(n.call(this),this.h=[1732584193,4023233417,2562383102,271733878,3285377520],void(this.endian="little")):new d}function e(a,b,c,d){return 15>=a?b^c^d:31>=a?b&c|~b&d:47>=a?(b|~c)^d:63>=a?b&d|c&~d:b^(c|~d)}function f(a){return 15>=a?0:31>=a?1518500249:47>=a?1859775393:63>=a?2400959708:2840853838}function g(a){return 15>=a?1352829926:31>=a?1548603684:47>=a?1836072691:63>=a?2053994217:0}var h=a("../hash"),i=h.utils,j=i.rotl32,k=i.sum32,l=i.sum32_3,m=i.sum32_4,n=h.common.BlockHash;i.inherits(d,n),c.ripemd160=d,d.blockSize=512,d.outSize=160,d.hmacStrength=192,d.padLength=64,d.prototype._update=function(a,b){for(var c=this.h[0],d=this.h[1],h=this.h[2],i=this.h[3],n=this.h[4],s=c,t=d,u=h,v=i,w=n,x=0;80>x;x++){var y=k(j(m(c,e(x,d,h,i),a[o[x]+b],f(x)),q[x]),n);c=n,n=i,i=j(h,10),h=d,d=y,y=k(j(m(s,e(79-x,t,u,v),a[p[x]+b],g(x)),r[x]),w),s=w,w=v,v=j(u,10),u=t,t=y}y=l(this.h[1],h,v),this.h[1]=l(this.h[2],i,w),this.h[2]=l(this.h[3],n,s),this.h[3]=l(this.h[4],c,t),this.h[4]=l(this.h[0],d,u),this.h[0]=y},d.prototype._digest=function(a){return"hex"===a?i.toHex32(this.h,"little"):i.split32(this.h,"little")};var o=[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,7,4,13,1,10,6,15,3,12,0,9,5,2,14,11,8,3,10,14,4,9,15,8,1,2,7,0,6,13,11,5,12,1,9,11,10,0,8,12,4,13,3,7,15,14,5,6,2,4,0,5,9,7,12,2,10,14,1,3,8,11,6,15,13],p=[5,14,7,0,9,2,11,4,13,6,15,8,1,10,3,12,6,11,3,7,0,13,5,10,14,15,8,12,4,9,1,2,15,5,1,3,7,14,6,9,11,8,12,2,10,0,4,13,8,6,4,1,3,11,15,0,5,12,2,13,9,7,10,14,12,15,10,4,1,5,8,7,6,2,13,14,0,3,9,11],q=[11,14,15,12,5,8,7,9,11,13,14,15,6,7,9,8,7,6,8,13,11,9,7,15,7,12,15,9,11,7,13,12,11,13,6,7,14,9,13,15,14,8,13,6,5,12,7,5,11,12,14,15,14,15,9,8,9,14,5,6,8,6,5,12,9,15,5,11,6,8,13,12,5,12,13,14,11,8,5,6],r=[8,9,9,11,13,15,15,5,7,7,8,11,14,14,12,6,9,13,15,7,12,8,9,11,7,7,12,7,6,15,13,11,9,7,15,11,8,6,6,14,12,13,5,14,13,13,7,5,15,5,8,11,14,14,6,14,6,9,12,9,12,5,15,8,8,5,12,9,12,5,14,6,8,13,6,5,15,13,11,11]},{"../hash":364}],366:[function(a,b,c){function d(a,b,c){return this instanceof d?(this.Hash=a,this.blockSize=a.blockSize/8,this.outSize=a.outSize/8,this.inner=null,this.outer=null,void this._init(f.toArray(b,c))):new d(a,b,c)}var e=a("../hash"),f=e.utils,g=f.assert;b.exports=d,d.prototype._init=function(a){a.length>this.blockSize&&(a=(new this.Hash).update(a).digest()),g(a.length<=this.blockSize);for(var b=a.length;b<this.blockSize;b++)a.push(0);for(var b=0;b<a.length;b++)a[b]^=54;this.inner=(new this.Hash).update(a);for(var b=0;b<a.length;b++)a[b]^=106;this.outer=(new this.Hash).update(a)},d.prototype.update=function(a,b){return this.inner.update(a,b),this},d.prototype.digest=function(a){return this.outer.update(this.inner.digest()),this.outer.digest(a)}},{"../hash":364}],365:[function(a,b,c){function d(){this.pending=null,this.pendingTotal=0,this.blockSize=this.constructor.blockSize,this.outSize=this.constructor.outSize,this.hmacStrength=this.constructor.hmacStrength,this.padLength=this.constructor.padLength/8,this.endian="big",this._delta8=this.blockSize/8,this._delta32=this.blockSize/32}var e=a("../hash"),f=e.utils,g=f.assert;c.BlockHash=d,d.prototype.update=function(a,b){if(a=f.toArray(a,b),this.pending=this.pending?this.pending.concat(a):a,this.pendingTotal+=a.length,this.pending.length>=this._delta8){a=this.pending;var c=a.length%this._delta8;this.pending=a.slice(a.length-c,a.length),0===this.pending.length&&(this.pending=null),a=f.join32(a,0,a.length-c,this.endian);for(var d=0;d<a.length;d+=this._delta32)this._update(a,d,d+this._delta32)}return this},d.prototype.digest=function(a){return this.update(this._pad()),g(null===this.pending),this._digest(a)},d.prototype._pad=function(){var a=this.pendingTotal,b=this._delta8,c=b-(a+this.padLength)%b,d=new Array(c+this.padLength);d[0]=128;for(var e=1;c>e;e++)d[e]=0;if(a<<=3,"big"===this.endian){for(var f=8;f<this.padLength;f++)d[e++]=0;d[e++]=0,d[e++]=0,d[e++]=0,d[e++]=0,d[e++]=a>>>24&255,d[e++]=a>>>16&255,d[e++]=a>>>8&255,d[e++]=255&a}else{d[e++]=255&a,d[e++]=a>>>8&255,d[e++]=a>>>16&255,d[e++]=a>>>24&255,d[e++]=0,d[e++]=0,d[e++]=0,d[e++]=0;for(var f=8;f<this.padLength;f++)d[e++]=0}return d}},{"../hash":364}],354:[function(a,b,c){var d=c;d.base=a("./base"),d["short"]=a("./short"),d.mont=a("./mont"),d.edwards=a("./edwards")},{"./base":352,"./edwards":353,"./mont":355,"./short":356}],356:[function(a,b){function c(a){j.call(this,"short",a),this.a=new h(a.a,16).toRed(this.red),this.b=new h(a.b,16).toRed(this.red),this.tinv=this.two.redInvm(),this.zeroA=0===this.a.fromRed().cmpn(0),this.threeA=0===this.a.fromRed().sub(this.p).cmpn(-3),this.endo=this._getEndomorphism(a),this._endoWnafT1=new Array(4),this._endoWnafT2=new Array(4)}function d(a,b,c,d){j.BasePoint.call(this,a,"affine"),null===b&&null===c?(this.x=null,this.y=null,this.inf=!0):(this.x=new h(b,16),this.y=new h(c,16),d&&(this.x.forceRed(this.curve.red),this.y.forceRed(this.curve.red)),this.x.red||(this.x=this.x.toRed(this.curve.red)),this.y.red||(this.y=this.y.toRed(this.curve.red)),this.inf=!1)}function e(a,b,c,d){j.BasePoint.call(this,a,"jacobian"),null===b&&null===c&&null===d?(this.x=this.curve.one,this.y=this.curve.one,this.z=new h(0)):(this.x=new h(b,16),this.y=new h(c,16),this.z=new h(d,16)),this.x.red||(this.x=this.x.toRed(this.curve.red)),this.y.red||(this.y=this.y.toRed(this.curve.red)),this.z.red||(this.z=this.z.toRed(this.curve.red)),this.zOne=this.z===this.curve.one}var f=a("../curve"),g=a("../../elliptic"),h=a("bn.js"),i=a("inherits"),j=f.base,k=(g.utils.getNAF,g.utils.assert);i(c,j),b.exports=c,c.prototype._getEndomorphism=function(a){if(this.zeroA&&this.g&&this.n&&1===this.p.modn(3)){var b,c;if(a.beta)b=new h(a.beta,16).toRed(this.red);else{var d=this._getEndoRoots(this.p);b=d[0].cmp(d[1])<0?d[0]:d[1],b=b.toRed(this.red)}if(a.lambda)c=new h(a.lambda,16);else{var e=this._getEndoRoots(this.n);0===this.g.mul(e[0]).x.cmp(this.g.x.redMul(b))?c=e[0]:(c=e[1],k(0===this.g.mul(c).x.cmp(this.g.x.redMul(b))))}var f;return f=a.basis?a.basis.map(function(a){return{a:new h(a.a,16),b:new h(a.b,16)}}):this._getEndoBasis(c),{beta:b,lambda:c,basis:f}}},c.prototype._getEndoRoots=function(a){var b=a===this.p?this.red:h.mont(a),c=new h(2).toRed(b).redInvm(),d=c.redNeg(),e=(new h(1).toRed(b),new h(3).toRed(b).redNeg().redSqrt().redMul(c)),f=d.redAdd(e).fromRed(),g=d.redSub(e).fromRed();return[f,g]},c.prototype._getEndoBasis=function(a){for(var b,c,d,e,f,g,i,j=this.n.shrn(Math.floor(this.n.bitLength()/2)),k=a,l=this.n.clone(),m=new h(1),n=new h(0),o=new h(0),p=new h(1),q=0;0!==k.cmpn(0);){var r=l.div(k),s=l.sub(r.mul(k)),t=o.sub(r.mul(m)),u=p.sub(r.mul(n));if(!d&&s.cmp(j)<0)b=i.neg(),c=m,d=s.neg(),e=t;else if(d&&2===++q)break;i=s,l=k,k=s,o=m,m=t,p=n,n=u}f=s.neg(),g=t;var v=d.sqr().add(e.sqr()),w=f.sqr().add(g.sqr());return w.cmp(v)>=0&&(f=b,g=c),d.sign&&(d=d.neg(),e=e.neg()),f.sign&&(f=f.neg(),g=g.neg()),[{a:d,b:e},{a:f,b:g}]},c.prototype._endoSplit=function(a){var b=this.endo.basis,c=b[0],d=b[1],e=d.b.mul(a).divRound(this.n),f=c.b.neg().mul(a).divRound(this.n),g=e.mul(c.a),h=f.mul(d.a),i=e.mul(c.b),j=f.mul(d.b),k=a.sub(g).sub(h),l=i.add(j).neg();return{k1:k,k2:l}},c.prototype.point=function(a,b,c){return new d(this,a,b,c)},c.prototype.pointFromX=function(a,b){b=new h(b,16),b.red||(b=b.toRed(this.red));var c=b.redSqr().redMul(b).redIAdd(b.redMul(this.a)).redIAdd(this.b),d=c.redSqrt(),e=d.fromRed().isOdd();return(a&&!e||!a&&e)&&(d=d.redNeg()),this.point(b,d)},c.prototype.jpoint=function(a,b,c){return new e(this,a,b,c)},c.prototype.pointFromJSON=function(a,b){return d.fromJSON(this,a,b)},c.prototype.validate=function(a){if(a.inf)return!0;var b=a.x,c=a.y,d=this.a.redMul(b),e=b.redSqr().redMul(b).redIAdd(d).redIAdd(this.b);return 0===c.redSqr().redISub(e).cmpn(0)},c.prototype._endoWnafMulAdd=function(a,b){for(var c=this._endoWnafT1,d=this._endoWnafT2,e=0;e<a.length;e++){var f=this._endoSplit(b[e]),g=a[e],h=g._getBeta();f.k1.sign&&(f.k1.sign=!f.k1.sign,g=g.neg(!0)),f.k2.sign&&(f.k2.sign=!f.k2.sign,h=h.neg(!0)),c[2*e]=g,c[2*e+1]=h,d[2*e]=f.k1,d[2*e+1]=f.k2}for(var i=this._wnafMulAdd(1,c,d,2*e),j=0;2*e>j;j++)c[j]=null,d[j]=null;return i},i(d,j.BasePoint),d.prototype._getBeta=function(){function a(a){return d.point(a.x.redMul(d.endo.beta),a.y)}if(this.curve.endo){var b=this.precomputed;if(b&&b.beta)return b.beta;var c=this.curve.point(this.x.redMul(this.curve.endo.beta),this.y);if(b){var d=this.curve;b.beta=c,c.precomputed={beta:null,naf:b.naf&&{wnd:b.naf.wnd,points:b.naf.points.map(a)},doubles:b.doubles&&{step:b.doubles.step,points:b.doubles.points.map(a)}}}return c}},d.prototype.toJSON=function(){return this.precomputed?[this.x,this.y,this.precomputed&&{doubles:this.precomputed.doubles&&{step:this.precomputed.doubles.step,points:this.precomputed.doubles.points.slice(1)},naf:this.precomputed.naf&&{wnd:this.precomputed.naf.wnd,points:this.precomputed.naf.points.slice(1)}}]:[this.x,this.y]},d.fromJSON=function(a,b,c){function d(b){return a.point(b[0],b[1],c)}"string"==typeof b&&(b=JSON.parse(b));var e=a.point(b[0],b[1],c);if(!b[2])return e;var f=b[2];return e.precomputed={beta:null,doubles:f.doubles&&{step:f.doubles.step,points:[e].concat(f.doubles.points.map(d))},naf:f.naf&&{wnd:f.naf.wnd,points:[e].concat(f.naf.points.map(d))}},e},d.prototype.inspect=function(){return this.isInfinity()?"<EC Point Infinity>":"<EC Point x: "+this.x.fromRed().toString(16,2)+" y: "+this.y.fromRed().toString(16,2)+">"},d.prototype.isInfinity=function(){return this.inf},d.prototype.add=function(a){if(this.inf)return a;if(a.inf)return this;if(this.eq(a))return this.dbl();if(this.neg().eq(a))return this.curve.point(null,null);if(0===this.x.cmp(a.x))return this.curve.point(null,null);var b=this.y.redSub(a.y);0!==b.cmpn(0)&&(b=b.redMul(this.x.redSub(a.x).redInvm()));var c=b.redSqr().redISub(this.x).redISub(a.x),d=b.redMul(this.x.redSub(c)).redISub(this.y);return this.curve.point(c,d)},d.prototype.dbl=function(){if(this.inf)return this;var a=this.y.redAdd(this.y);if(0===a.cmpn(0))return this.curve.point(null,null);var b=this.curve.a,c=this.x.redSqr(),d=a.redInvm(),e=c.redAdd(c).redIAdd(c).redIAdd(b).redMul(d),f=e.redSqr().redISub(this.x.redAdd(this.x)),g=e.redMul(this.x.redSub(f)).redISub(this.y);return this.curve.point(f,g)},d.prototype.getX=function(){return this.x.fromRed()},d.prototype.getY=function(){return this.y.fromRed()},d.prototype.mul=function(a){return a=new h(a,16),this.precomputed&&this.precomputed.doubles?this.curve._fixedNafMul(this,a):this.curve.endo?this.curve._endoWnafMulAdd([this],[a]):this.curve._wnafMul(this,a)},d.prototype.mulAdd=function(a,b,c){var d=[this,b],e=[a,c];return this.curve.endo?this.curve._endoWnafMulAdd(d,e):this.curve._wnafMulAdd(1,d,e,2)},d.prototype.eq=function(a){return this===a||this.inf===a.inf&&(this.inf||0===this.x.cmp(a.x)&&0===this.y.cmp(a.y))},d.prototype.neg=function(a){function b(a){return a.neg()}if(this.inf)return this;var c=this.curve.point(this.x,this.y.redNeg());if(a&&this.precomputed){var d=this.precomputed;c.precomputed={naf:d.naf&&{wnd:d.naf.wnd,points:d.naf.points.map(b)},doubles:d.doubles&&{step:d.doubles.step,points:d.doubles.points.map(b)}}}return c},d.prototype.toJ=function(){if(this.inf)return this.curve.jpoint(null,null,null);var a=this.curve.jpoint(this.x,this.y,this.curve.one);return a},i(e,j.BasePoint),e.prototype.toP=function(){if(this.isInfinity())return this.curve.point(null,null);var a=this.z.redInvm(),b=a.redSqr(),c=this.x.redMul(b),d=this.y.redMul(b).redMul(a);return this.curve.point(c,d)},e.prototype.neg=function(){return this.curve.jpoint(this.x,this.y.redNeg(),this.z)},e.prototype.add=function(a){if(this.isInfinity())return a;if(a.isInfinity())return this;var b=a.z.redSqr(),c=this.z.redSqr(),d=this.x.redMul(b),e=a.x.redMul(c),f=this.y.redMul(b.redMul(a.z)),g=a.y.redMul(c.redMul(this.z)),h=d.redSub(e),i=f.redSub(g);if(0===h.cmpn(0))return 0!==i.cmpn(0)?this.curve.jpoint(null,null,null):this.dbl();var j=h.redSqr(),k=j.redMul(h),l=d.redMul(j),m=i.redSqr().redIAdd(k).redISub(l).redISub(l),n=i.redMul(l.redISub(m)).redISub(f.redMul(k)),o=this.z.redMul(a.z).redMul(h);return this.curve.jpoint(m,n,o)},e.prototype.mixedAdd=function(a){if(this.isInfinity())return a.toJ();if(a.isInfinity())return this;var b=this.z.redSqr(),c=this.x,d=a.x.redMul(b),e=this.y,f=a.y.redMul(b).redMul(this.z),g=c.redSub(d),h=e.redSub(f);if(0===g.cmpn(0))return 0!==h.cmpn(0)?this.curve.jpoint(null,null,null):this.dbl();var i=g.redSqr(),j=i.redMul(g),k=c.redMul(i),l=h.redSqr().redIAdd(j).redISub(k).redISub(k),m=h.redMul(k.redISub(l)).redISub(e.redMul(j)),n=this.z.redMul(g);return this.curve.jpoint(l,m,n)},e.prototype.dblp=function(a){if(0===a)return this;if(this.isInfinity())return this;if(!a)return this.dbl();if(this.curve.zeroA||this.curve.threeA){for(var b=this,c=0;a>c;c++)b=b.dbl();return b}for(var d=this.curve.a,e=this.curve.tinv,f=this.x,g=this.y,h=this.z,i=h.redSqr().redSqr(),j=g.redAdd(g),c=0;a>c;c++){var k=f.redSqr(),l=j.redSqr(),m=l.redSqr(),n=k.redAdd(k).redIAdd(k).redIAdd(d.redMul(i)),o=f.redMul(l),p=n.redSqr().redISub(o.redAdd(o)),q=o.redISub(p),r=n.redMul(q);r=r.redIAdd(r).redISub(m);var s=j.redMul(h);a>c+1&&(i=i.redMul(m)),f=p,h=s,j=r}return this.curve.jpoint(f,j.redMul(e),h)},e.prototype.dbl=function(){return this.isInfinity()?this:this.curve.zeroA?this._zeroDbl():this.curve.threeA?this._threeDbl():this._dbl()},e.prototype._zeroDbl=function(){if(this.zOne){var a=this.x.redSqr(),b=this.y.redSqr(),c=b.redSqr(),d=this.x.redAdd(b).redSqr().redISub(a).redISub(c);d=d.redIAdd(d);var e=a.redAdd(a).redIAdd(a),f=e.redSqr().redISub(d).redISub(d),g=c.redIAdd(c);g=g.redIAdd(g),g=g.redIAdd(g);var h=f,i=e.redMul(d.redISub(f)).redISub(g),j=this.y.redAdd(this.y)}else{var k=this.x.redSqr(),l=this.y.redSqr(),m=l.redSqr(),n=this.x.redAdd(l).redSqr().redISub(k).redISub(m);n=n.redIAdd(n);var o=k.redAdd(k).redIAdd(k),p=o.redSqr(),q=m.redIAdd(m);q=q.redIAdd(q),q=q.redIAdd(q);var h=p.redISub(n).redISub(n),i=o.redMul(n.redISub(h)).redISub(q),j=this.y.redMul(this.z);j=j.redIAdd(j)}return this.curve.jpoint(h,i,j)},e.prototype._threeDbl=function(){if(this.zOne){var a=this.x.redSqr(),b=this.y.redSqr(),c=b.redSqr(),d=this.x.redAdd(b).redSqr().redISub(a).redISub(c);d=d.redIAdd(d);var e=a.redAdd(a).redIAdd(a).redIAdd(this.curve.a),f=e.redSqr().redISub(d).redISub(d),g=f,h=c.redIAdd(c);h=h.redIAdd(h),h=h.redIAdd(h);var i=e.redMul(d.redISub(f)).redISub(h),j=this.y.redAdd(this.y)}else{var k=this.z.redSqr(),l=this.y.redSqr(),m=this.x.redMul(l),n=this.x.redSub(k).redMul(this.x.redAdd(k));n=n.redAdd(n).redIAdd(n);var o=m.redIAdd(m);o=o.redIAdd(o);var p=o.redAdd(o),g=n.redSqr().redISub(p),j=this.y.redAdd(this.z).redSqr().redISub(l).redISub(k),q=l.redSqr();q=q.redIAdd(q),q=q.redIAdd(q),q=q.redIAdd(q);var i=n.redMul(o.redISub(g)).redISub(q)}return this.curve.jpoint(g,i,j)},e.prototype._dbl=function(){var a=this.curve.a,b=(this.curve.tinv,this.x),c=this.y,d=this.z,e=d.redSqr().redSqr(),f=b.redSqr(),g=c.redSqr(),h=f.redAdd(f).redIAdd(f).redIAdd(a.redMul(e)),i=b.redAdd(b);i=i.redIAdd(i);var j=i.redMul(g),k=h.redSqr().redISub(j.redAdd(j)),l=j.redISub(k),m=g.redSqr();m=m.redIAdd(m),m=m.redIAdd(m),m=m.redIAdd(m);var n=h.redMul(l).redISub(m),o=c.redAdd(c).redMul(d);return this.curve.jpoint(k,n,o)},e.prototype.trpl=function(){if(!this.curve.zeroA)return this.dbl().add(this);var a=this.x.redSqr(),b=this.y.redSqr(),c=this.z.redSqr(),d=b.redSqr(),e=a.redAdd(a).redIAdd(a),f=e.redSqr(),g=this.x.redAdd(b).redSqr().redISub(a).redISub(d);g=g.redIAdd(g),g=g.redAdd(g).redIAdd(g),g=g.redISub(f);var h=g.redSqr(),i=d.redIAdd(d);i=i.redIAdd(i),i=i.redIAdd(i),i=i.redIAdd(i);var j=e.redIAdd(g).redSqr().redISub(f).redISub(h).redISub(i),k=b.redMul(j);k=k.redIAdd(k),k=k.redIAdd(k);var l=this.x.redMul(h).redISub(k);l=l.redIAdd(l),l=l.redIAdd(l);var m=this.y.redMul(j.redMul(i.redISub(j)).redISub(g.redMul(h)));m=m.redIAdd(m),m=m.redIAdd(m),m=m.redIAdd(m);var n=this.z.redAdd(g).redSqr().redISub(c).redISub(h);return this.curve.jpoint(l,m,n)},e.prototype.mul=function(a,b){return a=new h(a,b),this.curve._wnafMul(this,a)},e.prototype.eq=function(a){if("affine"===a.type)return this.eq(a.toJ());if(this===a)return!0;var b=this.z.redSqr(),c=a.z.redSqr();if(0!==this.x.redMul(c).redISub(a.x.redMul(b)).cmpn(0))return!1;var d=b.redMul(this.z),e=c.redMul(a.z);return 0===this.y.redMul(e).redISub(a.y.redMul(d)).cmpn(0)},e.prototype.inspect=function(){return this.isInfinity()?"<EC JPoint Infinity>":"<EC JPoint x: "+this.x.toString(16,2)+" y: "+this.y.toString(16,2)+" z: "+this.z.toString(16,2)+">"},e.prototype.isInfinity=function(){return 0===this.z.cmpn(0)}},{"../../elliptic":351,"../curve":354,"bn.js":349,inherits:467}],355:[function(a,b){function c(a){i.call(this,"mont",a),this.a=new g(a.a,16).toRed(this.red),this.b=new g(a.b,16).toRed(this.red),this.i4=new g(4).toRed(this.red).redInvm(),this.two=new g(2).toRed(this.red),this.a24=this.i4.redMul(this.a.redAdd(this.two))}function d(a,b,c){i.BasePoint.call(this,a,"projective"),null===b&&null===c?(this.x=this.curve.one,this.z=this.curve.zero):(this.x=new g(b,16),this.z=new g(c,16),this.x.red||(this.x=this.x.toRed(this.curve.red)),this.z.red||(this.z=this.z.toRed(this.curve.red)))}{var e=a("../curve"),f=a("../../elliptic"),g=a("bn.js"),h=a("inherits"),i=e.base;f.utils.getNAF,f.utils.assert}h(c,i),b.exports=c,c.prototype.point=function(a,b){return new d(this,a,b)},c.prototype.pointFromJSON=function(a){return d.fromJSON(this,a)},c.prototype.validate=function(a){var b=a.normalize().x,c=b.redSqr(),d=c.redMul(b).redAdd(c.redMul(this.a)).redAdd(b),e=d.redSqrt();return 0===e.redSqr().cmp(d)},h(d,i.BasePoint),d.prototype.precompute=function(){},d.fromJSON=function(a,b){return new d(a,b[0],b[1]||a.one)},d.prototype.inspect=function(){return this.isInfinity()?"<EC Point Infinity>":"<EC Point x: "+this.x.fromRed().toString(16,2)+" z: "+this.z.fromRed().toString(16,2)+">"},d.prototype.isInfinity=function(){return 0===this.z.cmpn(0)},d.prototype.dbl=function(){var a=this.x.redAdd(this.z),b=a.redSqr(),c=this.x.redSub(this.z),d=c.redSqr(),e=b.redSub(d),f=b.redMul(d),g=e.redMul(d.redAdd(this.curve.a24.redMul(e)));return this.curve.point(f,g)},d.prototype.add=function(){throw new Error("Not supported on Montgomery curve")},d.prototype.diffAdd=function(a,b){var c=this.x.redAdd(this.z),d=this.x.redSub(this.z),e=a.x.redAdd(a.z),f=a.x.redSub(a.z),g=f.redMul(c),h=e.redMul(d),i=b.z.redMul(g.redAdd(h).redSqr()),j=b.x.redMul(g.redISub(h).redSqr());return this.curve.point(i,j)},d.prototype.mul=function(a){for(var b=a.clone(),c=this,d=this.curve.point(null,null),e=this,f=[];0!==b.cmpn(0);b.ishrn(1))f.push(b.andln(1));for(var g=f.length-1;g>=0;g--)0===f[g]?(c=c.diffAdd(d,e),d=d.dbl()):(d=c.diffAdd(d,e),c=c.dbl());return d},d.prototype.mulAdd=function(){throw new Error("Not supported on Montgomery curve")},d.prototype.normalize=function(){return this.x=this.x.redMul(this.z.redInvm()),this.z=this.curve.one,this},d.prototype.getX=function(){return this.normalize(),this.x.fromRed()}},{"../../elliptic":351,"../curve":354,"bn.js":349,inherits:467}],353:[function(a,b){function c(a){this.twisted=1!=a.a,this.mOneA=this.twisted&&-1==a.a,this.extended=this.mOneA,i.call(this,"mont",a),this.a=new g(a.a,16).mod(this.red.m).toRed(this.red),this.c=new g(a.c,16).toRed(this.red),this.c2=this.c.redSqr(),this.d=new g(a.d,16).toRed(this.red),this.dd=this.d.redAdd(this.d),j(!this.twisted||0===this.c.fromRed().cmpn(1)),this.oneC=1==a.c}function d(a,b,c,d,e){i.BasePoint.call(this,a,"projective"),null===b&&null===c&&null===d?(this.x=this.curve.zero,this.y=this.curve.one,this.z=this.curve.one,this.t=this.curve.zero,this.zOne=!0):(this.x=new g(b,16),this.y=new g(c,16),this.z=d?new g(d,16):this.curve.one,this.t=e&&new g(e,16),this.x.red||(this.x=this.x.toRed(this.curve.red)),this.y.red||(this.y=this.y.toRed(this.curve.red)),this.z.red||(this.z=this.z.toRed(this.curve.red)),this.t&&!this.t.red&&(this.t=this.t.toRed(this.curve.red)),this.zOne=this.z===this.curve.one,this.curve.extended&&!this.t&&(this.t=this.x.redMul(this.y),this.zOne||(this.t=this.t.redMul(this.z.redInvm()))))}var e=a("../curve"),f=a("../../elliptic"),g=a("bn.js"),h=a("inherits"),i=e.base,j=(f.utils.getNAF,f.utils.assert);h(c,i),b.exports=c,c.prototype._mulA=function(a){return this.mOneA?a.redNeg():this.a.redMul(a)},c.prototype._mulC=function(a){return this.oneC?a:this.c.redMul(a)},c.prototype.point=function(a,b,c,e){return new d(this,a,b,c,e)},c.prototype.jpoint=function(a,b,c,d){return this.point(a,b,c,d)},c.prototype.pointFromJSON=function(a){return d.fromJSON(this,a)},c.prototype.pointFromX=function(a,b){b=new g(b,16),b.red||(b=b.toRed(this.red));
var c=b.redSqr(),d=this.c2.redSub(this.a.redMul(c)),f=this.one.redSub(this.c2.redMul(this.d).redMul(c)),h=d.redMul(f.redInvm()).redSqrt(),i=h.fromRed().isOdd();return(a&&!i||!a&&i)&&(h=h.redNeg()),this.point(b,h,e.one)},c.prototype.validate=function(a){if(a.isInfinity())return!0;a.normalize();var b=a.x.redSqr(),c=a.y.redSqr(),d=b.redMul(this.a).redAdd(c),e=this.c2.redMul(this.one.redAdd(this.d.redMul(b).redMul(c)));return 0===d.cmp(e)},h(d,i.BasePoint),d.fromJSON=function(a,b){return new d(a,b[0],b[1],b[2])},d.prototype.inspect=function(){return this.isInfinity()?"<EC Point Infinity>":"<EC Point x: "+this.x.fromRed().toString(16,2)+" y: "+this.y.fromRed().toString(16,2)+" z: "+this.z.fromRed().toString(16,2)+">"},d.prototype.isInfinity=function(){return 0===this.x.cmpn(0)&&0===this.y.cmp(this.z)},d.prototype._extDbl=function(){var a=this.x.redSqr(),b=this.y.redSqr(),c=this.z.redSqr();c=c.redIAdd(c);var d=this.curve._mulA(a),e=this.x.redAdd(this.y).redSqr().redISub(a).redISub(b),f=d.redAdd(b),g=f.redSub(c),h=d.redSub(b),i=e.redMul(g),j=f.redMul(h),k=e.redMul(h),l=g.redMul(f);return this.curve.point(i,j,l,k)},d.prototype._projDbl=function(){var a=this.x.redAdd(this.y).redSqr(),b=this.x.redSqr(),c=this.y.redSqr();if(this.curve.twisted){var d=this.curve._mulA(b),e=d.redAdd(c);if(this.zOne)var f=a.redSub(b).redSub(c).redMul(e.redSub(this.curve.two)),g=e.redMul(d.redSub(c)),h=e.redSqr().redSub(e).redSub(e);else var i=this.z.redSqr(),j=e.redSub(i).redISub(i),f=a.redSub(b).redISub(c).redMul(j),g=e.redMul(d.redSub(c)),h=e.redMul(j)}else var d=b.redAdd(c),i=this.curve._mulC(redMul(this.z)).redSqr(),j=d.redSub(i).redSub(i),f=this.curve._mulC(a.redISub(d)).redMul(j),g=this.curve._mulC(d).redMul(b.redISub(c)),h=d.redMul(j);return this.curve.point(f,g,h)},d.prototype.dbl=function(){return this.isInfinity()?this:this.curve.extended?this._extDbl():this._projDbl()},d.prototype._extAdd=function(a){var b=this.y.redSub(this.x).redMul(a.y.redSub(a.x)),c=this.y.redAdd(this.x).redMul(a.y.redAdd(a.x)),d=this.t.redMul(this.curve.dd).redMul(a.t),e=this.z.redMul(a.z.redAdd(a.z)),f=c.redSub(b),g=e.redSub(d),h=e.redAdd(d),i=c.redAdd(b),j=f.redMul(g),k=h.redMul(i),l=f.redMul(i),m=g.redMul(h);return this.curve.point(j,k,m,l)},d.prototype._projAdd=function(a){var b=this.z.redMul(a.z),c=b.redSqr(),d=this.x.redMul(a.x),e=this.y.redMul(a.y),f=this.curve.d.redMul(d).redMul(e),g=c.redSub(f),h=c.redAdd(f),i=this.x.redAdd(this.y).redMul(a.x.redAdd(a.y)).redISub(d).redISub(e),j=b.redMul(g).redMul(i);if(this.curve.twisted)var k=b.redMul(h).redMul(e.redSub(this.curve._mulA(d))),l=g.redMul(h);else var k=b.redMul(h).redMul(e.redSub(d)),l=this.curve._mulC(g).redMul(h);return this.curve.point(j,k,l)},d.prototype.add=function(a){return this.isInfinity()?a:a.isInfinity()?this:this.curve.extended?this._extAdd(a):this._projAdd(a)},d.prototype.mul=function(a){return this.precomputed&&this.precomputed.doubles?this.curve._fixedNafMul(this,a):this.curve._wnafMul(this,a)},d.prototype.mulAdd=function(a,b,c){return this.curve._wnafMulAdd(1,[this,b],[a,c],2)},d.prototype.normalize=function(){if(this.zOne)return this;var a=this.z.redInvm();return this.x=this.x.redMul(a),this.y=this.y.redMul(a),this.t&&(this.t=this.t.redMul(a)),this.z=this.curve.one,this.zOne=!0,this},d.prototype.neg=function(){return this.curve.point(this.x.redNeg(),this.y,this.z,this.t&&this.t.redNeg())},d.prototype.getX=function(){return this.normalize(),this.x.fromRed()},d.prototype.getY=function(){return this.normalize(),this.y.fromRed()},d.prototype.toP=d.prototype.normalize,d.prototype.mixedAdd=d.prototype.add},{"../../elliptic":351,"../curve":354,"bn.js":349,inherits:467}],352:[function(a,b){function c(a,b){this.type=a,this.p=new e(b.p,16),this.red=b.prime?e.red(b.prime):e.mont(this.p),this.zero=new e(0).toRed(this.red),this.one=new e(1).toRed(this.red),this.two=new e(2).toRed(this.red),this.n=b.n&&new e(b.n,16),this.g=b.g&&this.pointFromJSON(b.g,b.gRed),this._wnafT1=new Array(4),this._wnafT2=new Array(4),this._wnafT3=new Array(4),this._wnafT4=new Array(4)}function d(a,b){this.curve=a,this.type=b,this.precomputed=null}var e=a("bn.js"),f=a("../../elliptic"),g=f.utils.getNAF,h=f.utils.getJSF,i=f.utils.assert;b.exports=c,c.prototype.point=function(){throw new Error("Not implemented")},c.prototype.validate=function(){throw new Error("Not implemented")},c.prototype._fixedNafMul=function(a,b){var c=a._getDoubles(),d=g(b,1),e=(1<<c.step+1)-(c.step%2===0?2:1);e/=3;for(var f=[],h=0;h<d.length;h+=c.step){for(var i=0,b=h+c.step-1;b>=h;b--)i=(i<<1)+d[b];f.push(i)}for(var j=this.jpoint(null,null,null),k=this.jpoint(null,null,null),l=e;l>0;l--){for(var h=0;h<f.length;h++){var i=f[h];i===l?k=k.mixedAdd(c.points[h]):i===-l&&(k=k.mixedAdd(c.points[h].neg()))}j=j.add(k)}return j.toP()},c.prototype._wnafMul=function(a,b){var c=4,d=a._getNAFPoints(c);c=d.wnd;for(var e=d.points,f=g(b,c),h=this.jpoint(null,null,null),j=f.length-1;j>=0;j--){for(var b=0;j>=0&&0===f[j];j--)b++;if(j>=0&&b++,h=h.dblp(b),0>j)break;var k=f[j];i(0!==k),h="affine"===a.type?h.mixedAdd(k>0?e[k-1>>1]:e[-k-1>>1].neg()):h.add(k>0?e[k-1>>1]:e[-k-1>>1].neg())}return"affine"===a.type?h.toP():h},c.prototype._wnafMulAdd=function(a,b,c,d){for(var e=this._wnafT1,f=this._wnafT2,i=this._wnafT3,j=0,k=0;d>k;k++){var l=b[k],m=l._getNAFPoints(a);e[k]=m.wnd,f[k]=m.points}for(var k=d-1;k>=1;k-=2){var n=k-1,o=k;if(1===e[n]&&1===e[o]){var p=[b[n],null,null,b[o]];0===b[n].y.cmp(b[o].y)?(p[1]=b[n].add(b[o]),p[2]=b[n].toJ().mixedAdd(b[o].neg())):0===b[n].y.cmp(b[o].y.redNeg())?(p[1]=b[n].toJ().mixedAdd(b[o]),p[2]=b[n].add(b[o].neg())):(p[1]=b[n].toJ().mixedAdd(b[o]),p[2]=b[n].toJ().mixedAdd(b[o].neg()));var q=[-3,-1,-5,-7,0,7,5,1,3],r=h(c[n],c[o]);j=Math.max(r[0].length,j),i[n]=new Array(j),i[o]=new Array(j);for(var s=0;j>s;s++){var t=0|r[0][s],u=0|r[1][s];i[n][s]=q[3*(t+1)+(u+1)],i[o][s]=0,f[n]=p}}else i[n]=g(c[n],e[n]),i[o]=g(c[o],e[o]),j=Math.max(i[n].length,j),j=Math.max(i[o].length,j)}for(var v=this.jpoint(null,null,null),w=this._wnafT4,k=j;k>=0;k--){for(var x=0;k>=0;){for(var y=!0,s=0;d>s;s++)w[s]=0|i[s][k],0!==w[s]&&(y=!1);if(!y)break;x++,k--}if(k>=0&&x++,v=v.dblp(x),0>k)break;for(var s=0;d>s;s++){var l,z=w[s];0!==z&&(z>0?l=f[s][z-1>>1]:0>z&&(l=f[s][-z-1>>1].neg()),v="affine"===l.type?v.mixedAdd(l):v.add(l))}}for(var k=0;d>k;k++)f[k]=null;return v.toP()},c.BasePoint=d,d.prototype.validate=function(){return this.curve.validate(this)},d.prototype.precompute=function(a){if(this.precomputed)return this;var b={doubles:null,naf:null,beta:null};return b.naf=this._getNAFPoints(8),b.doubles=this._getDoubles(4,a),b.beta=this._getBeta(),this.precomputed=b,this},d.prototype._getDoubles=function(a,b){if(this.precomputed&&this.precomputed.doubles)return this.precomputed.doubles;for(var c=[this],d=this,e=0;b>e;e+=a){for(var f=0;a>f;f++)d=d.dbl();c.push(d)}return{step:a,points:c}},d.prototype._getNAFPoints=function(a){if(this.precomputed&&this.precomputed.naf)return this.precomputed.naf;for(var b=[this],c=(1<<a)-1,d=1===c?null:this.dbl(),e=1;c>e;e++)b[e]=b[e-1].add(d);return{wnd:a,points:b}},d.prototype._getBeta=function(){return null},d.prototype.dblp=function(a){for(var b=this,c=0;a>c;c++)b=b.dbl();return b}},{"../../elliptic":351,"bn.js":349}],350:[function(a,b){(function(c){function d(a,b){var c=f(a,b),d=c.toRed(g.mont(a.modulus)).redPow(new g(a.publicExponent)).fromRed();return{blinder:d,unblinder:c.invm(a.modulus)}}function e(a,b,e){var f=d(b,e),h=b.modulus.byteLength(),i=(g.mont(b.modulus),new g(a).mul(f.blinder).mod(b.modulus)),j=i.toRed(g.mont(b.prime1)),k=i.toRed(g.mont(b.prime2)),l=b.coefficient,m=b.prime1,n=b.prime2,o=j.redPow(b.exponent1),p=k.redPow(b.exponent2);o=o.fromRed(),p=p.fromRed();var q=o.isub(p).imul(l).mod(m);q.imul(n),p.iadd(q);var r=new c(p.imul(f.unblinder).mod(b.modulus).toArray());if(r.length<h){var s=new c(h-r.length);s.fill(0),r=c.concat([s,r],h)}return r}function f(a,b){for(var c=a.modulus.byteLength(),d=new g(b.randomBytes(c));d.cmp(a.modulus)>=0||!d.mod(a.prime1)||!d.mod(a.prime2);)d=new g(b.randomBytes(c));return d}var g=a("bn.js");b.exports=e,e.getr=f}).call(this,a("buffer").Buffer)},{"bn.js":349,buffer:324}],349:[function(a,b){function c(a,b){if(!a)throw new Error(b||"Assertion failed")}function d(a,b){a.super_=b;var c=function(){};c.prototype=b.prototype,a.prototype=new c,a.prototype.constructor=a}function e(a,b,c){return null!==a&&"object"==typeof a&&Array.isArray(a.words)?a:(this.sign=!1,this.words=null,this.length=0,this.red=null,("le"===b||"be"===b)&&(c=b,b=10),void(null!==a&&this._init(a||0,b||10,c||"be")))}function f(a,b){this.name=a,this.p=new e(b,16),this.n=this.p.bitLength(),this.k=new e(1).ishln(this.n).isub(this.p),this.tmp=this._tmp()}function g(){f.call(this,"k256","ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f")}function h(){f.call(this,"p224","ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001")}function i(){f.call(this,"p192","ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff")}function j(){f.call(this,"25519","7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed")}function k(a){if("string"==typeof a){var b=e._prime(a);this.m=b.p,this.prime=b}else this.m=a,this.prime=null}function l(a){k.call(this,a),this.shift=this.m.bitLength(),this.shift%26!==0&&(this.shift+=26-this.shift%26),this.r=new e(1).ishln(this.shift),this.r2=this.imod(this.r.sqr()),this.rinv=this.r.invm(this.m),this.minv=this.rinv.mul(this.r).sub(new e(1)).div(this.m).neg().mod(this.r)}"object"==typeof b&&(b.exports=e),e.BN=e,e.wordSize=26,e.prototype._init=function(a,b,d){if("number"==typeof a)return 0>a&&(this.sign=!0,a=-a),void(67108864>a?(this.words=[67108863&a],this.length=1):(this.words=[67108863&a,a/67108864&67108863],this.length=2));if("object"==typeof a)return this._initArray(a,b,d);"hex"===b&&(b=16),c(b===(0|b)&&b>=2&&36>=b),a=a.toString().replace(/\s+/g,"");var e=0;"-"===a[0]&&e++,16===b?this._parseHex(a,e):this._parseBase(a,b,e),"-"===a[0]&&(this.sign=!0),this.strip()},e.prototype._initArray=function(a,b,d){c("number"==typeof a.length),this.length=Math.ceil(a.length/3),this.words=new Array(this.length);for(var e=0;e<this.length;e++)this.words[e]=0;var f=0;if("be"===d)for(var e=a.length-1,g=0;e>=0;e-=3){var h=a[e]|a[e-1]<<8|a[e-2]<<16;this.words[g]|=h<<f&67108863,this.words[g+1]=h>>>26-f&67108863,f+=24,f>=26&&(f-=26,g++)}else if("le"===d)for(var e=0,g=0;e<a.length;e+=3){var h=a[e]|a[e+1]<<8|a[e+2]<<16;this.words[g]|=h<<f&67108863,this.words[g+1]=h>>>26-f&67108863,f+=24,f>=26&&(f-=26,g++)}return this.strip()},e.prototype._parseHex=function(a,b){this.length=Math.ceil((a.length-b)/6),this.words=new Array(this.length);for(var c=0;c<this.length;c++)this.words[c]=0;for(var d=0,c=a.length-6,e=0;c>=b;c-=6){var f=parseInt(a.slice(c,c+6),16);this.words[e]|=f<<d&67108863,this.words[e+1]|=f>>>26-d&4194303,d+=24,d>=26&&(d-=26,e++)}if(c+6!==b){var f=parseInt(a.slice(b,c+6),16);this.words[e]|=f<<d&67108863,this.words[e+1]|=f>>>26-d&4194303}this.strip()},e.prototype._parseBase=function(a,b,d){this.words=[0],this.length=1;for(var f=0,g=1,h=0,i=null,j=d;j<a.length;j++){var k,l=a[j];k=10===b||"9">=l?0|l:l>="a"?l.charCodeAt(0)-97+10:l.charCodeAt(0)-65+10,f*=b,f+=k,g*=b,h++,g>1048575&&(c(67108863>=g),i||(i=new e(g)),this.mul(i).copy(this),this.iadd(new e(f)),f=0,g=1,h=0)}0!==h&&(this.mul(new e(g)).copy(this),this.iadd(new e(f)))},e.prototype.copy=function(a){a.words=new Array(this.length);for(var b=0;b<this.length;b++)a.words[b]=this.words[b];a.length=this.length,a.sign=this.sign,a.red=this.red},e.prototype.clone=function(){var a=new e(null);return this.copy(a),a},e.prototype.strip=function(){for(;this.length>1&&0===this.words[this.length-1];)this.length--;return this._normSign()},e.prototype._normSign=function(){return 1===this.length&&0===this.words[0]&&(this.sign=!1),this},e.prototype.inspect=function(){return(this.red?"<BN-R: ":"<BN: ")+this.toString(16)+">"};var m=["","0","00","000","0000","00000","000000","0000000","00000000","000000000","0000000000","00000000000","000000000000","0000000000000","00000000000000","000000000000000","0000000000000000","00000000000000000","000000000000000000","0000000000000000000","00000000000000000000","000000000000000000000","0000000000000000000000","00000000000000000000000","000000000000000000000000","0000000000000000000000000"],n=[0,0,25,16,12,11,10,9,8,8,7,7,7,7,6,6,6,6,6,6,6,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5],o=[0,0,33554432,43046721,16777216,48828125,60466176,40353607,16777216,43046721,1e7,19487171,35831808,62748517,7529536,11390625,16777216,24137569,34012224,47045881,64e6,4084101,5153632,6436343,7962624,9765625,11881376,14348907,17210368,20511149,243e5,28629151,33554432,39135393,45435424,52521875,60466176];e.prototype.toString=function(a,b){if(a=a||10,16===a||"hex"===a){for(var d="",e=0,b=0|b||1,f=0,g=0;g<this.length;g++){var h=this.words[g],i=(16777215&(h<<e|f)).toString(16);f=h>>>24-e&16777215,d=0!==f||g!==this.length-1?m[6-i.length]+i+d:i+d,e+=2,e>=26&&(e-=26,g--)}for(0!==f&&(d=f.toString(16)+d);d.length%b!==0;)d="0"+d;return this.sign&&(d="-"+d),d}if(a===(0|a)&&a>=2&&36>=a){var j=n[a],k=o[a],d="",l=this.clone();for(l.sign=!1;0!==l.cmpn(0);){var p=l.modn(k).toString(a);l=l.idivn(k),d=0!==l.cmpn(0)?m[j-p.length]+p+d:p+d}return 0===this.cmpn(0)&&(d="0"+d),this.sign&&(d="-"+d),d}c(!1,"Base should be between 2 and 36")},e.prototype.toJSON=function(){return this.toString(16)},e.prototype.toArray=function(){this.strip();var a=new Array(this.byteLength());a[0]=0;for(var b=this.clone(),c=0;0!==b.cmpn(0);c++){var d=b.andln(255);b.ishrn(8),a[a.length-c-1]=d}return a},e.prototype._countBits=function(a){return a>=33554432?26:a>=16777216?25:a>=8388608?24:a>=4194304?23:a>=2097152?22:a>=1048576?21:a>=524288?20:a>=262144?19:a>=131072?18:a>=65536?17:a>=32768?16:a>=16384?15:a>=8192?14:a>=4096?13:a>=2048?12:a>=1024?11:a>=512?10:a>=256?9:a>=128?8:a>=64?7:a>=32?6:a>=16?5:a>=8?4:a>=4?3:a>=2?2:a>=1?1:0},e.prototype.bitLength=function(){var a=0,b=this.words[this.length-1],a=this._countBits(b);return 26*(this.length-1)+a},e.prototype.byteLength=function(){this.words[this.length-1];return Math.ceil(this.bitLength()/8)},e.prototype.neg=function(){if(0===this.cmpn(0))return this.clone();var a=this.clone();return a.sign=!this.sign,a},e.prototype.iadd=function(a){if(this.sign&&!a.sign){this.sign=!1;var b=this.isub(a);return this.sign=!this.sign,this._normSign()}if(!this.sign&&a.sign){a.sign=!1;var b=this.isub(a);return a.sign=!0,b._normSign()}var c,d;this.length>a.length?(c=this,d=a):(c=a,d=this);for(var e=0,f=0;f<d.length;f++){var b=c.words[f]+d.words[f]+e;this.words[f]=67108863&b,e=b>>>26}for(;0!==e&&f<c.length;f++){var b=c.words[f]+e;this.words[f]=67108863&b,e=b>>>26}if(this.length=c.length,0!==e)this.words[this.length]=e,this.length++;else if(c!==this)for(;f<c.length;f++)this.words[f]=c.words[f];return this},e.prototype.add=function(a){if(a.sign&&!this.sign){a.sign=!1;var b=this.sub(a);return a.sign=!0,b}if(!a.sign&&this.sign){this.sign=!1;var b=a.sub(this);return this.sign=!0,b}return this.length>a.length?this.clone().iadd(a):a.clone().iadd(this)},e.prototype.isub=function(a){if(a.sign){a.sign=!1;var b=this.iadd(a);return a.sign=!0,b._normSign()}if(this.sign)return this.sign=!1,this.iadd(a),this.sign=!0,this._normSign();var c=this.cmp(a);if(0===c)return this.sign=!1,this.length=1,this.words[0]=0,this;if(c>0)var d=this,e=a;else var d=a,e=this;for(var f=0,g=0;g<e.length;g++){var b=d.words[g]-e.words[g]-f;0>b?(b+=67108864,f=1):f=0,this.words[g]=b}for(;0!==f&&g<d.length;g++){var b=d.words[g]-f;0>b?(b+=67108864,f=1):f=0,this.words[g]=b}if(0===f&&g<d.length&&d!==this)for(;g<d.length;g++)this.words[g]=d.words[g];return this.length=Math.max(this.length,g),d!==this&&(this.sign=!0),this.strip()},e.prototype.sub=function(a){return this.clone().isub(a)},e.prototype._smallMulTo=function(a,b){b.sign=a.sign!==this.sign,b.length=this.length+a.length;for(var c=0,d=0;d<b.length-1;d++){for(var e=c>>>26,f=67108863&c,g=Math.min(d,a.length-1),h=Math.max(0,d-this.length+1);g>=h;h++){var i=d-h,j=0|this.words[i],k=0|a.words[h],l=j*k,m=67108863&l;e=e+(l/67108864|0)|0,m=m+f|0,f=67108863&m,e=e+(m>>>26)|0}b.words[d]=f,c=e}return 0!==c?b.words[d]=c:b.length--,b.strip()},e.prototype._bigMulTo=function(a,b){b.sign=a.sign!==this.sign,b.length=this.length+a.length;for(var c=0,d=0,e=0;e<b.length-1;e++){var f=d;d=0;for(var g=67108863&c,h=Math.min(e,a.length-1),i=Math.max(0,e-this.length+1);h>=i;i++){var j=e-i,k=0|this.words[j],l=0|a.words[i],m=k*l,n=67108863&m;f=f+(m/67108864|0)|0,n=n+g|0,g=67108863&n,f=f+(n>>>26)|0,d+=f>>>26,f&=67108863}b.words[e]=g,c=f,f=d}return 0!==c?b.words[e]=c:b.length--,b.strip()},e.prototype.mulTo=function(a,b){var c;return c=this.length+a.length<63?this._smallMulTo(a,b):this._bigMulTo(a,b)},e.prototype.mul=function(a){var b=new e(null);return b.words=new Array(this.length+a.length),this.mulTo(a,b)},e.prototype.imul=function(a){if(0===this.cmpn(0)||0===a.cmpn(0))return this.words[0]=0,this.length=1,this;var b=this.length,c=a.length;this.sign=a.sign!==this.sign,this.length=this.length+a.length,this.words[this.length-1]=0;for(var d=this.length-2;d>=0;d--){for(var e=0,f=0,g=Math.min(d,c-1),h=Math.max(0,d-b+1);g>=h;h++){var i=d-h,j=this.words[i],k=a.words[h],l=j*k,m=67108863&l;e+=l/67108864|0,m+=f,f=67108863&m,e+=m>>>26}this.words[d]=f,this.words[d+1]+=e,e=0}for(var e=0,i=1;i<this.length;i++){var n=this.words[i]+e;this.words[i]=67108863&n,e=n>>>26}return this.strip()},e.prototype.sqr=function(){return this.mul(this)},e.prototype.isqr=function(){return this.mul(this)},e.prototype.ishln=function(a){c("number"==typeof a&&a>=0);{var b=a%26,d=(a-b)/26,e=67108863>>>26-b<<26-b;this.clone()}if(0!==b){for(var f=0,g=0;g<this.length;g++){var h=this.words[g]&e,i=this.words[g]-h<<b;this.words[g]=i|f,f=h>>>26-b}f&&(this.words[g]=f,this.length++)}if(0!==d){for(var g=this.length-1;g>=0;g--)this.words[g+d]=this.words[g];for(var g=0;d>g;g++)this.words[g]=0;this.length+=d}return this.strip()},e.prototype.ishrn=function(a,b,d){c("number"==typeof a&&a>=0),b=b?(b-b%26)/26:0;var e=a%26,f=Math.min((a-e)/26,this.length),g=67108863^67108863>>>e<<e,h=d;if(b-=f,b=Math.max(0,b),h){for(var i=0;f>i;i++)h.words[i]=this.words[i];h.length=f}if(0===f);else if(this.length>f){this.length-=f;for(var i=0;i<this.length;i++)this.words[i]=this.words[i+f]}else this.words[0]=0,this.length=1;for(var j=0,i=this.length-1;i>=0&&(0!==j||i>=b);i--){var k=this.words[i];this.words[i]=j<<26-e|k>>>e,j=k&g}return h&&0!==j&&(h.words[h.length++]=j),0===this.length&&(this.words[0]=0,this.length=1),this.strip(),d?{hi:this,lo:h}:this},e.prototype.shln=function(a){return this.clone().ishln(a)},e.prototype.shrn=function(a){return this.clone().ishrn(a)},e.prototype.testn=function(a){c("number"==typeof a&&a>=0);var b=a%26,d=(a-b)/26,e=1<<b;if(this.length<=d)return!1;var f=this.words[d];return!!(f&e)},e.prototype.imaskn=function(a){c("number"==typeof a&&a>=0);var b=a%26,d=(a-b)/26;if(c(!this.sign,"imaskn works only with positive numbers"),0!==b&&d++,this.length=Math.min(d,this.length),0!==b){var e=67108863^67108863>>>b<<b;this.words[this.length-1]&=e}return this.strip()},e.prototype.maskn=function(a){return this.clone().imaskn(a)},e.prototype.iaddn=function(a){if(c("number"==typeof a),0>a)return this.isubn(-a);if(this.sign)return 1===this.length&&this.words[0]<a?(this.words[0]=a-this.words[0],this.sign=!1,this):(this.sign=!1,this.isubn(a),this.sign=!0,this);this.words[0]+=a;for(var b=0;b<this.length&&this.words[b]>=67108864;b++)this.words[b]-=67108864,b===this.length-1?this.words[b+1]=1:this.words[b+1]++;return this.length=Math.max(this.length,b+1),this},e.prototype.isubn=function(a){if(c("number"==typeof a),0>a)return this.iaddn(-a);if(this.sign)return this.sign=!1,this.iaddn(a),this.sign=!0,this;this.words[0]-=a;for(var b=0;b<this.length&&this.words[b]<0;b++)this.words[b]+=67108864,this.words[b+1]-=1;return this.strip()},e.prototype.addn=function(a){return this.clone().iaddn(a)},e.prototype.subn=function(a){return this.clone().isubn(a)},e.prototype.iabs=function(){return this.sign=!1,this},e.prototype.abs=function(){return this.clone().iabs()},e.prototype._wordDiv=function(a,b){for(var c=this.length-a.length,d=this.clone(),f=a,g="mod"!==b&&new e(0);d.length>f.length;){var h=67108864*d.words[d.length-1]+d.words[d.length-2],i=h/f.words[f.length-1],j=i/67108864|0,k=67108863&i;i=new e(null),i.words=[k,j],i.length=2;var c=26*(d.length-f.length-1);if(g){var l=i.shln(c);d.sign?g.isub(l):g.iadd(l)}i=i.mul(f).ishln(c),d.sign?d.iadd(i):d.isub(i)}for(;d.ucmp(f)>=0;){var h=d.words[d.length-1],i=new e(h/f.words[f.length-1]|0),c=26*(d.length-f.length);if(g){var l=i.shln(c);d.sign?g.isub(l):g.iadd(l)}i=i.mul(f).ishln(c),d.sign?d.iadd(i):d.isub(i)}return d.sign&&(g&&g.isubn(1),d.iadd(f)),{div:g?g:null,mod:d}},e.prototype.divmod=function(a,b){if(c(0!==a.cmpn(0)),this.sign&&!a.sign){var d,f,g=this.neg().divmod(a,b);return"mod"!==b&&(d=g.div.neg()),"div"!==b&&(f=0===g.mod.cmpn(0)?g.mod:a.sub(g.mod)),{div:d,mod:f}}if(!this.sign&&a.sign){var d,g=this.divmod(a.neg(),b);return"mod"!==b&&(d=g.div.neg()),{div:d,mod:g.mod}}return this.sign&&a.sign?this.neg().divmod(a.neg(),b):a.length>this.length||this.cmp(a)<0?{div:new e(0),mod:this}:1===a.length?"div"===b?{div:this.divn(a.words[0]),mod:null}:"mod"===b?{div:null,mod:new e(this.modn(a.words[0]))}:{div:this.divn(a.words[0]),mod:new e(this.modn(a.words[0]))}:this._wordDiv(a,b)},e.prototype.div=function(a){return this.divmod(a,"div").div},e.prototype.mod=function(a){return this.divmod(a,"mod").mod},e.prototype.divRound=function(a){var b=this.divmod(a);if(0===b.mod.cmpn(0))return b.div;var c=b.div.sign?b.mod.isub(a):b.mod,d=a.shrn(1),e=a.andln(1),f=c.cmp(d);return 0>f||1===e&&0===f?b.div:b.div.sign?b.div.isubn(1):b.div.iaddn(1)},e.prototype.modn=function(a){c(67108863>=a);for(var b=(1<<26)%a,d=0,e=this.length-1;e>=0;e--)d=(b*d+this.words[e])%a;return d},e.prototype.idivn=function(a){c(67108863>=a);for(var b=0,d=this.length-1;d>=0;d--){var e=this.words[d]+67108864*b;this.words[d]=e/a|0,b=e%a}return this.strip()},e.prototype.divn=function(a){return this.clone().idivn(a)},e.prototype._egcd=function(a,b){c(!b.sign),c(0!==b.cmpn(0));var d=this,f=b.clone();d=d.sign?d.mod(b):d.clone();for(var g=new e(0);f.isEven();)f.ishrn(1);for(var h=f.clone();d.cmpn(1)>0&&f.cmpn(1)>0;){for(;d.isEven();)d.ishrn(1),a.isEven()?a.ishrn(1):a.iadd(h).ishrn(1);for(;f.isEven();)f.ishrn(1),g.isEven()?g.ishrn(1):g.iadd(h).ishrn(1);d.cmp(f)>=0?(d.isub(f),a.isub(g)):(f.isub(d),g.isub(a))}return 0===d.cmpn(1)?a:g},e.prototype.gcd=function(a){if(0===this.cmpn(0))return a.clone();if(0===a.cmpn(0))return this.clone();var b=this.clone(),c=a.clone();b.sign=!1,c.sign=!1;for(var d=0;b.isEven()&&c.isEven();d++)b.ishrn(1),c.ishrn(1);for(;b.isEven();)b.ishrn(1);do{for(;c.isEven();)c.ishrn(1);if(b.cmp(c)<0){var e=b;b=c,c=e}b.isub(b.div(c).mul(c))}while(0!==b.cmpn(0)&&0!==c.cmpn(0));return 0===b.cmpn(0)?c.ishln(d):b.ishln(d)},e.prototype.invm=function(a){return this._egcd(new e(1),a).mod(a)},e.prototype.isEven=function(){return 0===(1&this.words[0])},e.prototype.isOdd=function(){return 1===(1&this.words[0])},e.prototype.andln=function(a){return this.words[0]&a},e.prototype.bincn=function(a){c("number"==typeof a);var b=a%26,d=(a-b)/26,e=1<<b;if(this.length<=d){for(var f=this.length;d+1>f;f++)this.words[f]=0;return this.words[d]|=e,this.length=d+1,this}for(var g=e,f=d;0!==g&&f<this.length;f++){var h=this.words[f];h+=g,g=h>>>26,h&=67108863,this.words[f]=h}return 0!==g&&(this.words[f]=g,this.length++),this},e.prototype.cmpn=function(a){var b=0>a;if(b&&(a=-a),this.sign&&!b)return-1;if(!this.sign&&b)return 1;a&=67108863,this.strip();var c;if(this.length>1)c=1;else{var d=this.words[0];c=d===a?0:a>d?-1:1}return this.sign&&(c=-c),c},e.prototype.cmp=function(a){if(this.sign&&!a.sign)return-1;if(!this.sign&&a.sign)return 1;var b=this.ucmp(a);return this.sign?-b:b},e.prototype.ucmp=function(a){if(this.length>a.length)return 1;if(this.length<a.length)return-1;for(var b=0,c=this.length-1;c>=0;c--){var d=this.words[c],e=a.words[c];if(d!==e){e>d?b=-1:d>e&&(b=1);break}}return b},e.red=function(a){return new k(a)},e.prototype.toRed=function(a){return c(!this.red,"Already a number in reduction context"),c(!this.sign,"red works only with positives"),a.convertTo(this)._forceRed(a)},e.prototype.fromRed=function(){return c(this.red,"fromRed works only with numbers in reduction context"),this.red.convertFrom(this)},e.prototype._forceRed=function(a){return this.red=a,this},e.prototype.forceRed=function(a){return c(!this.red,"Already a number in reduction context"),this._forceRed(a)},e.prototype.redAdd=function(a){return c(this.red,"redAdd works only with red numbers"),this.red.add(this,a)},e.prototype.redIAdd=function(a){return c(this.red,"redIAdd works only with red numbers"),this.red.iadd(this,a)},e.prototype.redSub=function(a){return c(this.red,"redSub works only with red numbers"),this.red.sub(this,a)},e.prototype.redISub=function(a){return c(this.red,"redISub works only with red numbers"),this.red.isub(this,a)},e.prototype.redShl=function(a){return c(this.red,"redShl works only with red numbers"),this.red.shl(this,a)},e.prototype.redMul=function(a){return c(this.red,"redMul works only with red numbers"),this.red._verify2(this,a),this.red.mul(this,a)},e.prototype.redIMul=function(a){return c(this.red,"redMul works only with red numbers"),this.red._verify2(this,a),this.red.imul(this,a)},e.prototype.redSqr=function(){return c(this.red,"redSqr works only with red numbers"),this.red._verify1(this),this.red.sqr(this)},e.prototype.redISqr=function(){return c(this.red,"redISqr works only with red numbers"),this.red._verify1(this),this.red.isqr(this)},e.prototype.redSqrt=function(){return c(this.red,"redSqrt works only with red numbers"),this.red._verify1(this),this.red.sqrt(this)},e.prototype.redInvm=function(){return c(this.red,"redInvm works only with red numbers"),this.red._verify1(this),this.red.invm(this)},e.prototype.redNeg=function(){return c(this.red,"redNeg works only with red numbers"),this.red._verify1(this),this.red.neg(this)},e.prototype.redPow=function(a){return c(this.red&&!a.red,"redPow(normalNum)"),this.red._verify1(this),this.red.pow(this,a)};var p={k256:null,p224:null,p192:null,p25519:null};f.prototype._tmp=function(){var a=new e(null);return a.words=new Array(Math.ceil(this.n/13)),a},f.prototype.ireduce=function(a){var b,c=a;do{var d=c.ishrn(this.n,0,this.tmp);c=this.imulK(d.hi),c=c.iadd(d.lo),b=c.bitLength()}while(b>this.n);var e=b<this.n?-1:c.cmp(this.p);return 0===e?(c.words[0]=0,c.length=1):e>0?c.isub(this.p):c.strip(),c},f.prototype.imulK=function(a){return a.imul(this.k)},d(g,f),g.prototype.imulK=function(a){a.words[a.length]=0,a.words[a.length+1]=0,a.length+=2;for(var b=0,c=0,d=0,e=0;e<a.length;e++){var f=a.words[e];c+=64*f,d+=977*f,c+=d/67108864|0,b+=c/67108864|0,c&=67108863,d&=67108863,a.words[e]=d,d=c,c=b,b=0}return 0===a.words[a.length-1]&&a.length--,0===a.words[a.length-1]&&a.length--,a},d(h,f),d(i,f),d(j,f),j.prototype.imulK=function(a){for(var b=0,c=0;c<a.length;c++){var d=19*a.words[c]+b,e=67108863&d;d>>>=26,a.words[c]=e,b=d}return 0!==b&&(a.words[a.length++]=b),a},e._prime=function q(a){if(p[a])return p[a];var q;if("k256"===a)q=new g;else if("p224"===a)q=new h;else if("p192"===a)q=new i;else{if("p25519"!==a)throw new Error("Unknown prime "+a);q=new j}return p[a]=q,q},k.prototype._verify1=function(a){c(!a.sign,"red works only with positives"),c(a.red,"red works only with red numbers")},k.prototype._verify2=function(a,b){c(!a.sign&&!b.sign,"red works only with positives"),c(a.red&&a.red===b.red,"red works only with red numbers")},k.prototype.imod=function(a){return this.prime?this.prime.ireduce(a)._forceRed(this):a.mod(this.m)._forceRed(this)},k.prototype.neg=function(a){var b=a.clone();return b.sign=!b.sign,b.iadd(this.m)._forceRed(this)},k.prototype.add=function(a,b){this._verify2(a,b);var c=a.add(b);return c.cmp(this.m)>=0&&c.isub(this.m),c._forceRed(this)},k.prototype.iadd=function(a,b){this._verify2(a,b);var c=a.iadd(b);return c.cmp(this.m)>=0&&c.isub(this.m),c},k.prototype.sub=function(a,b){this._verify2(a,b);var c=a.sub(b);return c.cmpn(0)<0&&c.iadd(this.m),c._forceRed(this)},k.prototype.isub=function(a,b){this._verify2(a,b);var c=a.isub(b);return c.cmpn(0)<0&&c.iadd(this.m),c},k.prototype.shl=function(a,b){return this._verify1(a),this.imod(a.shln(b))},k.prototype.imul=function(a,b){return this._verify2(a,b),this.imod(a.imul(b))},k.prototype.mul=function(a,b){return this._verify2(a,b),this.imod(a.mul(b))},k.prototype.isqr=function(a){return this.imul(a,a)},k.prototype.sqr=function(a){return this.mul(a,a)},k.prototype.sqrt=function(a){if(0===a.cmpn(0))return a.clone();var b=this.m.andln(3);if(c(b%2===1),3===b){var d=this.m.add(new e(1)).ishrn(2),f=this.pow(a,d);return f}for(var g=this.m.subn(1),h=0;0!==g.cmpn(0)&&0===g.andln(1);)h++,g.ishrn(1);c(0!==g.cmpn(0));var i=new e(1).toRed(this),j=i.redNeg(),k=this.m.subn(1).ishrn(1),l=this.m.bitLength();for(l=new e(2*l*l).toRed(this);0!==this.pow(l,k).cmp(j);)l.redIAdd(j);for(var m=this.pow(l,g),f=this.pow(a,g.addn(1).ishrn(1)),n=this.pow(a,g),o=h;0!==n.cmp(i);){for(var p=n,q=0;0!==p.cmp(i);q++)p=p.redSqr();c(o>q);var r=this.pow(m,new e(1).ishln(o-q-1));f=f.redMul(r),m=r.redSqr(),n=n.redMul(m),o=q}return f},k.prototype.invm=function(a){var b=a._egcd(new e(1),this.m);return b.sign?(b.sign=!1,this.imod(b).redNeg()):this.imod(b)},k.prototype.pow=function(a,b){for(var c=[],d=b.clone();0!==d.cmpn(0);)c.push(d.andln(1)),d.ishrn(1);for(var e=a,f=0;f<c.length&&0===c[f];f++,e=this.sqr(e));if(++f<c.length)for(var d=this.sqr(e);f<c.length;f++,d=this.sqr(d))0!==c[f]&&(e=this.mul(e,d));return e},k.prototype.convertTo=function(a){return a.clone()},k.prototype.convertFrom=function(a){var b=a.clone();return b.red=null,b},e.mont=function(a){return new l(a)},d(l,k),l.prototype.convertTo=function(a){return this.imod(a.shln(this.shift))},l.prototype.convertFrom=function(a){var b=this.imod(a.mul(this.rinv));return b.red=null,b},l.prototype.imul=function(a,b){if(0===a.cmpn(0)||0===b.cmpn(0))return a.words[0]=0,a.length=1,a;var c=a.imul(b),d=c.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),e=c.isub(d).ishrn(this.shift),f=e;return e.cmp(this.m)>=0?f=e.isub(this.m):e.cmpn(0)<0&&(f=e.iadd(this.m)),f._forceRed(this)},l.prototype.mul=function(a,b){if(0===a.cmpn(0)||0===b.cmpn(0))return new e(0)._forceRed(this);var c=a.mul(b),d=c.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),f=c.isub(d).ishrn(this.shift),g=f;return f.cmp(this.m)>=0?g=f.isub(this.m):f.cmpn(0)<0&&(g=f.iadd(this.m)),g._forceRed(this)},l.prototype.invm=function(a){var b=this.imod(a.invm(this.m).mul(this.r2));return b._forceRed(this)}},{}],347:[function(a,b,c){(function(a){c["RSA-SHA224"]=c.sha224WithRSAEncryption={sign:"rsa",hash:"sha224",id:new a("302d300d06096086480165030402040500041c","hex")},c["RSA-SHA256"]=c.sha256WithRSAEncryption={sign:"rsa",hash:"sha256",id:new a("3031300d060960864801650304020105000420","hex")},c["RSA-SHA384"]=c.sha384WithRSAEncryption={sign:"rsa",hash:"sha384",id:new a("3041300d060960864801650304020205000430","hex")},c["RSA-SHA512"]=c.sha512WithRSAEncryption={sign:"rsa",hash:"sha512",id:new a("3051300d060960864801650304020305000440","hex")},c["RSA-SHA1"]={sign:"rsa",hash:"sha1",id:new a("3021300906052b0e03021a05000414","hex")},c["ecdsa-with-SHA1"]={sign:"ecdsa",hash:"sha1",id:new a("","hex")},c.DSA=c["DSA-SHA1"]=c["DSA-SHA"]={sign:"dsa",hash:"sha1",id:new a("","hex")},c["DSA-SHA224"]=c["DSA-WITH-SHA224"]={sign:"dsa",hash:"sha224",id:new a("","hex")},c["DSA-SHA256"]=c["DSA-WITH-SHA256"]={sign:"dsa",hash:"sha256",id:new a("","hex")},c["DSA-SHA384"]=c["DSA-WITH-SHA384"]={sign:"dsa",hash:"sha384",id:new a("","hex")},c["DSA-SHA512"]=c["DSA-WITH-SHA512"]={sign:"dsa",hash:"sha512",id:new a("","hex")},c["DSA-RIPEMD160"]={sign:"dsa",hash:"rmd160",id:new a("","hex")},c["RSA-RIPEMD160"]=c.ripemd160WithRSA={sign:"rsa",hash:"rmd160",id:new a("3021300906052b2403020105000414","hex")},c["RSA-MD5"]=c.md5WithRSAEncryption={sign:"rsa",hash:"md5",id:new a("3020300c06082a864886f70d020505000410","hex")}
}).call(this,a("buffer").Buffer)},{buffer:324}],336:[function(a,b){b.exports=function(b,c){function d(){return Object.keys(g)}c=c||{};var e=a("./encrypter")(b);c.createCipher=c.Cipher=e.createCipher,c.createCipheriv=c.Cipheriv=e.createCipheriv;var f=a("./decrypter")(b);c.createDecipher=c.Decipher=f.createDecipher,c.createDecipheriv=c.Decipheriv=f.createDecipheriv;var g=a("./modes");c.listCiphers=c.getCiphers=d}},{"./decrypter":333,"./encrypter":334,"./modes":337}],334:[function(a,b){(function(c){function d(a,b,h){return this instanceof d?(g.call(this),this._cache=new e,this._cipher=new f.AES(b),this._prev=new c(h.length),h.copy(this._prev),this._mode=a,void(this._autopadding=!0)):new d(a,b,h)}function e(){return this instanceof e?void(this.cache=new c("")):new e}var f=a("./aes"),g=a("./cipherBase"),h=a("inherits"),i=a("./modes"),j=a("./EVP_BytesToKey"),k=a("./streamCipher"),l=a("./authCipher");h(d,g),d.prototype._update=function(a){this._cache.add(a);for(var b,d,e=[];b=this._cache.get();)d=this._mode.encrypt(this,b),e.push(d);return c.concat(e)},d.prototype._final=function(){var a=this._cache.flush();if(this._autopadding)return a=this._mode.encrypt(this,a),this._cipher.scrub(),a;if("10101010101010101010101010101010"!==a.toString("hex"))throw this._cipher.scrub(),new Error("data not multiple of block length")},d.prototype.setAutoPadding=function(a){this._autopadding=!!a},e.prototype.add=function(a){this.cache=c.concat([this.cache,a])},e.prototype.get=function(){if(this.cache.length>15){var a=this.cache.slice(0,16);return this.cache=this.cache.slice(16),a}return null},e.prototype.flush=function(){for(var a=16-this.cache.length,b=new c(a),d=-1;++d<a;)b.writeUInt8(a,d);var e=c.concat([this.cache,b]);return e};var m={ECB:a("./modes/ecb"),CBC:a("./modes/cbc"),CFB:a("./modes/cfb"),CFB8:a("./modes/cfb8"),CFB1:a("./modes/cfb1"),OFB:a("./modes/ofb"),CTR:a("./modes/ctr"),GCM:a("./modes/ctr")};b.exports=function(a){function b(a,b,e){var f=i[a.toLowerCase()];if(!f)throw new TypeError("invalid suite type");if("string"==typeof e&&(e=new c(e)),"string"==typeof b&&(b=new c(b)),b.length!==f.key/8)throw new TypeError("invalid key length "+b.length);if(e.length!==f.iv)throw new TypeError("invalid iv length "+e.length);return"stream"===f.type?new k(m[f.mode],b,e):"auth"===f.type?new l(m[f.mode],b,e):new d(m[f.mode],b,e)}function e(c,d){var e=i[c.toLowerCase()];if(!e)throw new TypeError("invalid suite type");var f=j(a,d,e.key,e.iv);return b(c,f.key,f.iv)}return{createCipher:e,createCipheriv:b}}}).call(this,a("buffer").Buffer)},{"./EVP_BytesToKey":329,"./aes":330,"./authCipher":331,"./cipherBase":332,"./modes":337,"./modes/cbc":338,"./modes/cfb":339,"./modes/cfb1":340,"./modes/cfb8":341,"./modes/ctr":342,"./modes/ecb":343,"./modes/ofb":344,"./streamCipher":345,buffer:324,inherits:467}],333:[function(a,b){(function(c){function d(a,b,f){return this instanceof d?(h.call(this),this._cache=new e,this._last=void 0,this._cipher=new g.AES(b),this._prev=new c(f.length),f.copy(this._prev),this._mode=a,void(this._autopadding=!0)):new d(a,b,f)}function e(){return this instanceof e?void(this.cache=new c("")):new e}function f(a){for(var b=a[15],c=-1;++c<b;)if(a[c+(16-b)]!==b)throw new Error("unable to decrypt data");return 16!==b?a.slice(0,16-b):void 0}var g=a("./aes"),h=a("./cipherBase"),i=a("inherits"),j=a("./modes"),k=a("./streamCipher"),l=a("./authCipher"),m=a("./EVP_BytesToKey");i(d,h),d.prototype._update=function(a){this._cache.add(a);for(var b,d,e=[];b=this._cache.get(this._autopadding);)d=this._mode.decrypt(this,b),e.push(d);return c.concat(e)},d.prototype._final=function(){var a=this._cache.flush();if(this._autopadding)return f(this._mode.decrypt(this,a));if(a)throw new Error("data not multiple of block length")},d.prototype.setAutoPadding=function(a){this._autopadding=!!a},e.prototype.add=function(a){this.cache=c.concat([this.cache,a])},e.prototype.get=function(a){var b;if(a){if(this.cache.length>16)return b=this.cache.slice(0,16),this.cache=this.cache.slice(16),b}else if(this.cache.length>=16)return b=this.cache.slice(0,16),this.cache=this.cache.slice(16),b;return null},e.prototype.flush=function(){return this.cache.length?this.cache:void 0};var n={ECB:a("./modes/ecb"),CBC:a("./modes/cbc"),CFB:a("./modes/cfb"),CFB8:a("./modes/cfb8"),CFB1:a("./modes/cfb1"),OFB:a("./modes/ofb"),CTR:a("./modes/ctr"),GCM:a("./modes/ctr")};b.exports=function(a){function b(a,b,e){var f=j[a.toLowerCase()];if(!f)throw new TypeError("invalid suite type");if("string"==typeof e&&(e=new c(e)),"string"==typeof b&&(b=new c(b)),b.length!==f.key/8)throw new TypeError("invalid key length "+b.length);if(e.length!==f.iv)throw new TypeError("invalid iv length "+e.length);return"stream"===f.type?new k(n[f.mode],b,e,!0):"auth"===f.type?new l(n[f.mode],b,e,!0):new d(n[f.mode],b,e)}function e(c,d){var e=j[c.toLowerCase()];if(!e)throw new TypeError("invalid suite type");var f=m(a,d,e.key,e.iv);return b(c,f.key,f.iv)}return{createDecipher:e,createDecipheriv:b}}}).call(this,a("buffer").Buffer)},{"./EVP_BytesToKey":329,"./aes":330,"./authCipher":331,"./cipherBase":332,"./modes":337,"./modes/cbc":338,"./modes/cfb":339,"./modes/cfb1":340,"./modes/cfb8":341,"./modes/ctr":342,"./modes/ecb":343,"./modes/ofb":344,"./streamCipher":345,buffer:324,inherits:467}],345:[function(a,b){(function(c){function d(a,b,g,h){return this instanceof d?(f.call(this),this._cipher=new e.AES(b),this._prev=new c(g.length),this._cache=new c(""),this._secCache=new c(""),this._decrypt=h,g.copy(this._prev),void(this._mode=a)):new d(a,b,g)}var e=a("./aes"),f=a("./cipherBase"),g=a("inherits");g(d,f),b.exports=d,d.prototype._update=function(a){return this._mode.encrypt(this,a,this._decrypt)},d.prototype._final=function(){this._cipher.scrub()}}).call(this,a("buffer").Buffer)},{"./aes":330,"./cipherBase":332,buffer:324,inherits:467}],344:[function(a,b,c){(function(b){function d(a){return a._prev=a._cipher.encryptBlock(a._prev),a._prev}var e=a("../xor");c.encrypt=function(a,c){for(;a._cache.length<c.length;)a._cache=b.concat([a._cache,d(a)]);var f=a._cache.slice(0,c.length);return a._cache=a._cache.slice(c.length),e(c,f)}}).call(this,a("buffer").Buffer)},{"../xor":346,buffer:324}],343:[function(a,b,c){c.encrypt=function(a,b){return a._cipher.encryptBlock(b)},c.decrypt=function(a,b){return a._cipher.decryptBlock(b)}},{}],342:[function(a,b,c){(function(b){function d(a){var b=a._cipher.encryptBlock(a._prev);return e(a._prev),b}function e(a){for(var b,c=a.length;c--;){if(b=a.readUInt8(c),255!==b){b++,a.writeUInt8(b,c);break}a.writeUInt8(0,c)}}var f=a("../xor");c.encrypt=function(a,c){for(;a._cache.length<c.length;)a._cache=b.concat([a._cache,d(a)]);var e=a._cache.slice(0,c.length);return a._cache=a._cache.slice(c.length),f(c,e)}}).call(this,a("buffer").Buffer)},{"../xor":346,buffer:324}],341:[function(a,b,c){(function(a){function b(b,c,d){var e=b._cipher.encryptBlock(b._prev),f=e[0]^c;return b._prev=a.concat([b._prev.slice(1),new a([d?c:f])]),f}c.encrypt=function(c,d,e){for(var f=d.length,g=new a(f),h=-1;++h<f;)g[h]=b(c,d[h],e);return g}}).call(this,a("buffer").Buffer)},{buffer:324}],340:[function(a,b,c){(function(a){function b(a,b,c){for(var e,f,g,h=-1,i=8,j=0;++h<i;)e=a._cipher.encryptBlock(a._prev),f=b&1<<7-h?128:0,g=e[0]^f,j+=(128&g)>>h%8,a._prev=d(a._prev,c?f:g);return j}function d(b,c){var d=b.length,e=-1,f=new a(b.length);for(b=a.concat([b,new a([c])]);++e<d;)f[e]=b[e]<<1|b[e+1]>>7;return f}c.encrypt=function(c,d,e){for(var f=d.length,g=new a(f),h=-1;++h<f;)g[h]=b(c,d[h],e);return g}}).call(this,a("buffer").Buffer)},{buffer:324}],339:[function(a,b,c){(function(b){function d(a,c,d){var f=c.length,g=e(c,a._cache);return a._cache=a._cache.slice(f),a._prev=b.concat([a._prev,d?c:g]),g}var e=a("../xor");c.encrypt=function(a,c,e){for(var f,g=new b("");c.length;){if(0===a._cache.length&&(a._cache=a._cipher.encryptBlock(a._prev),a._prev=new b("")),!(a._cache.length<=c.length)){g=b.concat([g,d(a,c,e)]);break}f=a._cache.length,g=b.concat([g,d(a,c.slice(0,f),e)]),c=c.slice(f)}return g}}).call(this,a("buffer").Buffer)},{"../xor":346,buffer:324}],338:[function(a,b,c){var d=a("../xor");c.encrypt=function(a,b){var c=d(b,a._prev);return a._prev=a._cipher.encryptBlock(c),a._prev},c.decrypt=function(a,b){var c=a._prev;a._prev=b;var e=a._cipher.decryptBlock(b);return d(e,c)}},{"../xor":346}],337:[function(a,b,c){c["aes-128-ecb"]={cipher:"AES",key:128,iv:0,mode:"ECB",type:"block"},c["aes-192-ecb"]={cipher:"AES",key:192,iv:0,mode:"ECB",type:"block"},c["aes-256-ecb"]={cipher:"AES",key:256,iv:0,mode:"ECB",type:"block"},c["aes-128-cbc"]={cipher:"AES",key:128,iv:16,mode:"CBC",type:"block"},c["aes-192-cbc"]={cipher:"AES",key:192,iv:16,mode:"CBC",type:"block"},c["aes-256-cbc"]={cipher:"AES",key:256,iv:16,mode:"CBC",type:"block"},c.aes128=c["aes-128-cbc"],c.aes192=c["aes-192-cbc"],c.aes256=c["aes-256-cbc"],c["aes-128-cfb"]={cipher:"AES",key:128,iv:16,mode:"CFB",type:"stream"},c["aes-192-cfb"]={cipher:"AES",key:192,iv:16,mode:"CFB",type:"stream"},c["aes-256-cfb"]={cipher:"AES",key:256,iv:16,mode:"CFB",type:"stream"},c["aes-128-cfb8"]={cipher:"AES",key:128,iv:16,mode:"CFB8",type:"stream"},c["aes-192-cfb8"]={cipher:"AES",key:192,iv:16,mode:"CFB8",type:"stream"},c["aes-256-cfb8"]={cipher:"AES",key:256,iv:16,mode:"CFB8",type:"stream"},c["aes-128-cfb1"]={cipher:"AES",key:128,iv:16,mode:"CFB1",type:"stream"},c["aes-192-cfb1"]={cipher:"AES",key:192,iv:16,mode:"CFB1",type:"stream"},c["aes-256-cfb1"]={cipher:"AES",key:256,iv:16,mode:"CFB1",type:"stream"},c["aes-128-ofb"]={cipher:"AES",key:128,iv:16,mode:"OFB",type:"stream"},c["aes-192-ofb"]={cipher:"AES",key:192,iv:16,mode:"OFB",type:"stream"},c["aes-256-ofb"]={cipher:"AES",key:256,iv:16,mode:"OFB",type:"stream"},c["aes-128-ctr"]={cipher:"AES",key:128,iv:16,mode:"CTR",type:"stream"},c["aes-192-ctr"]={cipher:"AES",key:192,iv:16,mode:"CTR",type:"stream"},c["aes-256-ctr"]={cipher:"AES",key:256,iv:16,mode:"CTR",type:"stream"},c["aes-128-gcm"]={cipher:"AES",key:128,iv:12,mode:"GCM",type:"auth"},c["aes-192-gcm"]={cipher:"AES",key:192,iv:12,mode:"GCM",type:"auth"},c["aes-256-gcm"]={cipher:"AES",key:256,iv:12,mode:"GCM",type:"auth"}},{}],331:[function(a,b){(function(c){function d(a,b,e,h){if(!(this instanceof d))return new d(a,b,e);g.call(this),this._finID=c.concat([e,new c([0,0,0,1])]),e=c.concat([e,new c([0,0,0,2])]),this._cipher=new f.AES(b),this._prev=new c(e.length),this._cache=new c(""),this._secCache=new c(""),this._decrypt=h,this._alen=0,this._len=0,e.copy(this._prev),this._mode=a;var j=new c(4);j.fill(0),this._ghash=new i(this._cipher.encryptBlock(j)),this._authTag=null,this._called=!1}function e(a,b){var c=0;a.length!==b.length&&c++;for(var d=Math.min(a.length,b.length),e=-1;++e<d;)c+=a[e]^b[e];return c}var f=a("./aes"),g=a("./cipherBase"),h=a("inherits"),i=a("./ghash"),j=a("./xor");h(d,g),b.exports=d,d.prototype._update=function(a){if(!this._called&&this._alen){var b=16-this._alen%16;16>b&&(b=new c(b),b.fill(0),this._ghash.update(b))}this._called=!0;var d=this._mode.encrypt(this,a);return this._ghash.update(this._decrypt?a:d),this._len+=a.length,d},d.prototype._final=function(){if(this._decrypt&&!this._authTag)throw new Error("Unsupported state or unable to authenticate data");var a=j(this._ghash["final"](8*this._alen,8*this._len),this._cipher.encryptBlock(this._finID));if(this._decrypt){if(e(a,this._authTag))throw new Error("Unsupported state or unable to authenticate data")}else this._authTag=a;this._cipher.scrub()},d.prototype.getAuthTag=function(){if(!this._decrypt&&c.isBuffer(this._authTag))return this._authTag;throw new Error("Attempting to get auth tag in unsupported state")},d.prototype.setAuthTag=function(a){if(!this._decrypt)throw new Error("Attempting to set auth tag in unsupported state");this._authTag=a},d.prototype.setAAD=function(a){if(this._called)throw new Error("Attempting to set AAD in unsupported state");this._ghash.update(a),this._alen+=a.length}}).call(this,a("buffer").Buffer)},{"./aes":330,"./cipherBase":332,"./ghash":335,"./xor":346,buffer:324,inherits:467}],346:[function(a,b){(function(a){function c(b,c){for(var d=Math.min(b.length,c.length),e=new a(d),f=-1;++f<d;)e.writeUInt8(b[f]^c[f],f);return e}b.exports=c}).call(this,a("buffer").Buffer)},{buffer:324}],335:[function(a,b){(function(a){function c(b){this.h=b,this.state=new a(16),this.state.fill(0),this.cache=new a("")}function d(a){return[a.readUInt32BE(0),a.readUInt32BE(4),a.readUInt32BE(8),a.readUInt32BE(12)]}function e(b){b=b.map(f);var c=new a(16);return c.writeUInt32BE(b[0],0),c.writeUInt32BE(b[1],4),c.writeUInt32BE(b[2],8),c.writeUInt32BE(b[3],12),c}function f(a){var b,c;return b=a>i||0>a?(c=Math.abs(a)%i,0>a?i-c:c):a}function g(a,b){return[a[0]^b[0],a[1]^b[1],a[2]^b[2],a[3]^b[3]]}var h=new a(16);h.fill(0),b.exports=c,c.prototype.ghash=function(a){for(var b=-1;++b<a.length;)this.state[b]^=a[b];this._multiply()},c.prototype._multiply=function(){for(var a,b,c,f=d(this.h),h=[0,0,0,0],i=-1;++i<128;){for(b=0!==(this.state[~~(i/8)]&1<<7-i%8),b&&(h=g(h,f)),c=0!==(1&f[3]),a=3;a>0;a--)f[a]=f[a]>>>1|(1&f[a-1])<<31;f[0]=f[0]>>>1,c&&(f[0]=f[0]^225<<24)}this.state=e(h)},c.prototype.update=function(b){this.cache=a.concat([this.cache,b]);for(var c;this.cache.length>=16;)c=this.cache.slice(0,16),this.cache=this.cache.slice(16),this.ghash(c)},c.prototype["final"]=function(b,c){return this.cache.length&&this.ghash(a.concat([this.cache,h],16)),this.ghash(e([0,b,0,c])),this.state};var i=Math.pow(2,32)}).call(this,a("buffer").Buffer)},{buffer:324}],332:[function(a,b){(function(c){function d(){e.call(this)}var e=a("stream").Transform,f=a("inherits");b.exports=d,f(d,e),d.prototype.update=function(a,b,d){"string"==typeof a&&(a=new c(a,b));var e=this._update(a);return d&&(e=e.toString(d)),e},d.prototype._transform=function(a,b,c){this.push(this._update(a)),c()},d.prototype._flush=function(a){try{this.push(this._final())}catch(b){return a(b)}a()},d.prototype["final"]=function(a){var b=this._final()||new c("");return a&&(b=b.toString(a)),b}}).call(this,a("buffer").Buffer)},{buffer:324,inherits:467,stream:486}],486:[function(a,b){function c(){d.call(this)}b.exports=c;var d=a("events").EventEmitter,e=a("inherits");e(c,d),c.Readable=a("readable-stream/readable.js"),c.Writable=a("readable-stream/writable.js"),c.Duplex=a("readable-stream/duplex.js"),c.Transform=a("readable-stream/transform.js"),c.PassThrough=a("readable-stream/passthrough.js"),c.Stream=c,c.prototype.pipe=function(a,b){function c(b){a.writable&&!1===a.write(b)&&j.pause&&j.pause()}function e(){j.readable&&j.resume&&j.resume()}function f(){k||(k=!0,a.end())}function g(){k||(k=!0,"function"==typeof a.destroy&&a.destroy())}function h(a){if(i(),0===d.listenerCount(this,"error"))throw a}function i(){j.removeListener("data",c),a.removeListener("drain",e),j.removeListener("end",f),j.removeListener("close",g),j.removeListener("error",h),a.removeListener("error",h),j.removeListener("end",i),j.removeListener("close",i),a.removeListener("close",i)}var j=this;j.on("data",c),a.on("drain",e),a._isStdio||b&&b.end===!1||(j.on("end",f),j.on("close",g));var k=!1;return j.on("error",h),a.on("error",h),j.on("end",i),j.on("close",i),a.on("close",i),a.emit("pipe",j),a}},{events:466,inherits:467,"readable-stream/duplex.js":475,"readable-stream/passthrough.js":482,"readable-stream/readable.js":483,"readable-stream/transform.js":484,"readable-stream/writable.js":485}],485:[function(a,b){b.exports=a("./lib/_stream_writable.js")},{"./lib/_stream_writable.js":480}],484:[function(a,b){b.exports=a("./lib/_stream_transform.js")},{"./lib/_stream_transform.js":479}],483:[function(a,b,c){var d=a("stream");c=b.exports=a("./lib/_stream_readable.js"),c.Stream=d,c.Readable=c,c.Writable=a("./lib/_stream_writable.js"),c.Duplex=a("./lib/_stream_duplex.js"),c.Transform=a("./lib/_stream_transform.js"),c.PassThrough=a("./lib/_stream_passthrough.js")},{"./lib/_stream_duplex.js":476,"./lib/_stream_passthrough.js":477,"./lib/_stream_readable.js":478,"./lib/_stream_transform.js":479,"./lib/_stream_writable.js":480,stream:486}],482:[function(a,b){b.exports=a("./lib/_stream_passthrough.js")},{"./lib/_stream_passthrough.js":477}],477:[function(a,b){function c(a){return this instanceof c?void d.call(this,a):new c(a)}b.exports=c;var d=a("./_stream_transform"),e=a("core-util-is");e.inherits=a("inherits"),e.inherits(c,d),c.prototype._transform=function(a,b,c){c(null,a)}},{"./_stream_transform":479,"core-util-is":481,inherits:467}],479:[function(a,b){function c(a,b){this.afterTransform=function(a,c){return d(b,a,c)},this.needTransform=!1,this.transforming=!1,this.writecb=null,this.writechunk=null}function d(a,b,c){var d=a._transformState;d.transforming=!1;var e=d.writecb;if(!e)return a.emit("error",new Error("no writecb in Transform class"));d.writechunk=null,d.writecb=null,null!==c&&void 0!==c&&a.push(c),e&&e(b);var f=a._readableState;f.reading=!1,(f.needReadable||f.length<f.highWaterMark)&&a._read(f.highWaterMark)}function e(a){if(!(this instanceof e))return new e(a);g.call(this,a);var b=(this._transformState=new c(a,this),this);this._readableState.needReadable=!0,this._readableState.sync=!1,this.once("finish",function(){"function"==typeof this._flush?this._flush(function(a){f(b,a)}):f(b)})}function f(a,b){if(b)return a.emit("error",b);var c=a._writableState,d=(a._readableState,a._transformState);if(c.length)throw new Error("calling transform done when ws.length != 0");if(d.transforming)throw new Error("calling transform done when still transforming");return a.push(null)}b.exports=e;var g=a("./_stream_duplex"),h=a("core-util-is");h.inherits=a("inherits"),h.inherits(e,g),e.prototype.push=function(a,b){return this._transformState.needTransform=!1,g.prototype.push.call(this,a,b)},e.prototype._transform=function(){throw new Error("not implemented")},e.prototype._write=function(a,b,c){var d=this._transformState;if(d.writecb=c,d.writechunk=a,d.writeencoding=b,!d.transforming){var e=this._readableState;(d.needTransform||e.needReadable||e.length<e.highWaterMark)&&this._read(e.highWaterMark)}},e.prototype._read=function(){var a=this._transformState;null!==a.writechunk&&a.writecb&&!a.transforming?(a.transforming=!0,this._transform(a.writechunk,a.writeencoding,a.afterTransform)):a.needTransform=!0}},{"./_stream_duplex":476,"core-util-is":481,inherits:467}],475:[function(a,b){b.exports=a("./lib/_stream_duplex.js")},{"./lib/_stream_duplex.js":476}],476:[function(a,b){(function(c){function d(a){return this instanceof d?(i.call(this,a),j.call(this,a),a&&a.readable===!1&&(this.readable=!1),a&&a.writable===!1&&(this.writable=!1),this.allowHalfOpen=!0,a&&a.allowHalfOpen===!1&&(this.allowHalfOpen=!1),void this.once("end",e)):new d(a)}function e(){this.allowHalfOpen||this._writableState.ended||c.nextTick(this.end.bind(this))}function f(a,b){for(var c=0,d=a.length;d>c;c++)b(a[c],c)}b.exports=d;var g=Object.keys||function(a){var b=[];for(var c in a)b.push(c);return b},h=a("core-util-is");h.inherits=a("inherits");var i=a("./_stream_readable"),j=a("./_stream_writable");h.inherits(d,i),f(g(j.prototype),function(a){d.prototype[a]||(d.prototype[a]=j.prototype[a])})}).call(this,a("_process"))},{"./_stream_readable":478,"./_stream_writable":480,_process:470,"core-util-is":481,inherits:467}],480:[function(a,b){(function(c){function d(a,b,c){this.chunk=a,this.encoding=b,this.callback=c}function e(a,b){a=a||{};var c=a.highWaterMark;this.highWaterMark=c||0===c?c:16384,this.objectMode=!!a.objectMode,this.highWaterMark=~~this.highWaterMark,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1;var d=a.decodeStrings===!1;this.decodeStrings=!d,this.defaultEncoding=a.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(a){n(b,a)},this.writecb=null,this.writelen=0,this.buffer=[],this.errorEmitted=!1}function f(b){var c=a("./_stream_duplex");return this instanceof f||this instanceof c?(this._writableState=new e(b,this),this.writable=!0,void w.call(this)):new f(b)}function g(a,b,d){var e=new Error("write after end");a.emit("error",e),c.nextTick(function(){d(e)})}function h(a,b,d,e){var f=!0;if(!u.isBuffer(d)&&"string"!=typeof d&&null!==d&&void 0!==d&&!b.objectMode){var g=new TypeError("Invalid non-string/buffer chunk");a.emit("error",g),c.nextTick(function(){e(g)}),f=!1}return f}function i(a,b,c){return a.objectMode||a.decodeStrings===!1||"string"!=typeof b||(b=new u(b,c)),b}function j(a,b,c,e,f){c=i(b,c,e),u.isBuffer(c)&&(e="buffer");var g=b.objectMode?1:c.length;b.length+=g;var h=b.length<b.highWaterMark;return h||(b.needDrain=!0),b.writing?b.buffer.push(new d(c,e,f)):k(a,b,g,c,e,f),h}function k(a,b,c,d,e,f){b.writelen=c,b.writecb=f,b.writing=!0,b.sync=!0,a._write(d,e,b.onwrite),b.sync=!1}function l(a,b,d,e,f){d?c.nextTick(function(){f(e)}):f(e),a._writableState.errorEmitted=!0,a.emit("error",e)}function m(a){a.writing=!1,a.writecb=null,a.length-=a.writelen,a.writelen=0}function n(a,b){var d=a._writableState,e=d.sync,f=d.writecb;if(m(d),b)l(a,d,e,b,f);else{var g=r(a,d);g||d.bufferProcessing||!d.buffer.length||q(a,d),e?c.nextTick(function(){o(a,d,g,f)}):o(a,d,g,f)}}function o(a,b,c,d){c||p(a,b),d(),c&&s(a,b)}function p(a,b){0===b.length&&b.needDrain&&(b.needDrain=!1,a.emit("drain"))}function q(a,b){b.bufferProcessing=!0;for(var c=0;c<b.buffer.length;c++){var d=b.buffer[c],e=d.chunk,f=d.encoding,g=d.callback,h=b.objectMode?1:e.length;if(k(a,b,h,e,f,g),b.writing){c++;break}}b.bufferProcessing=!1,c<b.buffer.length?b.buffer=b.buffer.slice(c):b.buffer.length=0}function r(a,b){return b.ending&&0===b.length&&!b.finished&&!b.writing}function s(a,b){var c=r(a,b);return c&&(b.finished=!0,a.emit("finish")),c}function t(a,b,d){b.ending=!0,s(a,b),d&&(b.finished?c.nextTick(d):a.once("finish",d)),b.ended=!0}b.exports=f;var u=a("buffer").Buffer;f.WritableState=e;var v=a("core-util-is");v.inherits=a("inherits");var w=a("stream");v.inherits(f,w),f.prototype.pipe=function(){this.emit("error",new Error("Cannot pipe. Not readable."))},f.prototype.write=function(a,b,c){var d=this._writableState,e=!1;return"function"==typeof b&&(c=b,b=null),u.isBuffer(a)?b="buffer":b||(b=d.defaultEncoding),"function"!=typeof c&&(c=function(){}),d.ended?g(this,d,c):h(this,d,a,c)&&(e=j(this,d,a,b,c)),e},f.prototype._write=function(a,b,c){c(new Error("not implemented"))},f.prototype.end=function(a,b,c){var d=this._writableState;"function"==typeof a?(c=a,a=null,b=null):"function"==typeof b&&(c=b,b=null),"undefined"!=typeof a&&null!==a&&this.write(a,b),d.ending||d.finished||t(this,d,c)}}).call(this,a("_process"))},{"./_stream_duplex":476,_process:470,buffer:324,"core-util-is":481,inherits:467,stream:486}],478:[function(a,b){(function(c){function d(b){b=b||{};var c=b.highWaterMark;this.highWaterMark=c||0===c?c:16384,this.highWaterMark=~~this.highWaterMark,this.buffer=[],this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=!1,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.calledRead=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.objectMode=!!b.objectMode,this.defaultEncoding=b.defaultEncoding||"utf8",this.ranOut=!1,this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,b.encoding&&(C||(C=a("string_decoder/").StringDecoder),this.decoder=new C(b.encoding),this.encoding=b.encoding)}function e(a){return this instanceof e?(this._readableState=new d(a,this),this.readable=!0,void A.call(this)):new e(a)}function f(a,b,c,d,e){var f=j(b,c);if(f)a.emit("error",f);else if(null===c||void 0===c)b.reading=!1,b.ended||k(a,b);else if(b.objectMode||c&&c.length>0)if(b.ended&&!e){var h=new Error("stream.push() after EOF");a.emit("error",h)}else if(b.endEmitted&&e){var h=new Error("stream.unshift() after end event");a.emit("error",h)}else!b.decoder||e||d||(c=b.decoder.write(c)),b.length+=b.objectMode?1:c.length,e?b.buffer.unshift(c):(b.reading=!1,b.buffer.push(c)),b.needReadable&&l(a),n(a,b);else e||(b.reading=!1);return g(b)}function g(a){return!a.ended&&(a.needReadable||a.length<a.highWaterMark||0===a.length)}function h(a){if(a>=D)a=D;else{a--;for(var b=1;32>b;b<<=1)a|=a>>b;a++}return a}function i(a,b){return 0===b.length&&b.ended?0:b.objectMode?0===a?0:1:null===a||isNaN(a)?b.flowing&&b.buffer.length?b.buffer[0].length:b.length:0>=a?0:(a>b.highWaterMark&&(b.highWaterMark=h(a)),a>b.length?b.ended?b.length:(b.needReadable=!0,0):a)}function j(a,b){var c=null;return y.isBuffer(b)||"string"==typeof b||null===b||void 0===b||a.objectMode||(c=new TypeError("Invalid non-string/buffer chunk")),c}function k(a,b){if(b.decoder&&!b.ended){var c=b.decoder.end();c&&c.length&&(b.buffer.push(c),b.length+=b.objectMode?1:c.length)}b.ended=!0,b.length>0?l(a):u(a)}function l(a){var b=a._readableState;b.needReadable=!1,b.emittedReadable||(b.emittedReadable=!0,b.sync?c.nextTick(function(){m(a)}):m(a))}function m(a){a.emit("readable")}function n(a,b){b.readingMore||(b.readingMore=!0,c.nextTick(function(){o(a,b)}))}function o(a,b){for(var c=b.length;!b.reading&&!b.flowing&&!b.ended&&b.length<b.highWaterMark&&(a.read(0),c!==b.length);)c=b.length;b.readingMore=!1}function p(a){return function(){var b=a._readableState;b.awaitDrain--,0===b.awaitDrain&&q(a)}}function q(a){function b(a){var b=a.write(c);!1===b&&d.awaitDrain++}var c,d=a._readableState;for(d.awaitDrain=0;d.pipesCount&&null!==(c=a.read());)if(1===d.pipesCount?b(d.pipes,0,null):v(d.pipes,b),a.emit("data",c),d.awaitDrain>0)return;return 0===d.pipesCount?(d.flowing=!1,void(z.listenerCount(a,"data")>0&&s(a))):void(d.ranOut=!0)}function r(){this._readableState.ranOut&&(this._readableState.ranOut=!1,q(this))}function s(a,b){var d=a._readableState;if(d.flowing)throw new Error("Cannot switch to old mode now.");var e=b||!1,f=!1;a.readable=!0,a.pipe=A.prototype.pipe,a.on=a.addListener=A.prototype.on,a.on("readable",function(){f=!0;for(var b;!e&&null!==(b=a.read());)a.emit("data",b);null===b&&(f=!1,a._readableState.needReadable=!0)}),a.pause=function(){e=!0,this.emit("pause")},a.resume=function(){e=!1,f?c.nextTick(function(){a.emit("readable")}):this.read(0),this.emit("resume")},a.emit("readable")}function t(a,b){var c,d=b.buffer,e=b.length,f=!!b.decoder,g=!!b.objectMode;if(0===d.length)return null;if(0===e)c=null;else if(g)c=d.shift();else if(!a||a>=e)c=f?d.join(""):y.concat(d,e),d.length=0;else if(a<d[0].length){var h=d[0];c=h.slice(0,a),d[0]=h.slice(a)}else if(a===d[0].length)c=d.shift();else{c=f?"":new y(a);for(var i=0,j=0,k=d.length;k>j&&a>i;j++){var h=d[0],l=Math.min(a-i,h.length);f?c+=h.slice(0,l):h.copy(c,i,0,l),l<h.length?d[0]=h.slice(l):d.shift(),i+=l}}return c}function u(a){var b=a._readableState;if(b.length>0)throw new Error("endReadable called on non-empty stream");!b.endEmitted&&b.calledRead&&(b.ended=!0,c.nextTick(function(){b.endEmitted||0!==b.length||(b.endEmitted=!0,a.readable=!1,a.emit("end"))}))}function v(a,b){for(var c=0,d=a.length;d>c;c++)b(a[c],c)}function w(a,b){for(var c=0,d=a.length;d>c;c++)if(a[c]===b)return c;return-1}b.exports=e;var x=a("isarray"),y=a("buffer").Buffer;e.ReadableState=d;var z=a("events").EventEmitter;z.listenerCount||(z.listenerCount=function(a,b){return a.listeners(b).length});var A=a("stream"),B=a("core-util-is");B.inherits=a("inherits");var C;B.inherits(e,A),e.prototype.push=function(a,b){var c=this._readableState;return"string"!=typeof a||c.objectMode||(b=b||c.defaultEncoding,b!==c.encoding&&(a=new y(a,b),b="")),f(this,c,a,b,!1)},e.prototype.unshift=function(a){var b=this._readableState;return f(this,b,a,"",!0)},e.prototype.setEncoding=function(b){C||(C=a("string_decoder/").StringDecoder),this._readableState.decoder=new C(b),this._readableState.encoding=b};var D=8388608;e.prototype.read=function(a){var b=this._readableState;b.calledRead=!0;var c,d=a;if(("number"!=typeof a||a>0)&&(b.emittedReadable=!1),0===a&&b.needReadable&&(b.length>=b.highWaterMark||b.ended))return l(this),null;if(a=i(a,b),0===a&&b.ended)return c=null,b.length>0&&b.decoder&&(c=t(a,b),b.length-=c.length),0===b.length&&u(this),c;var e=b.needReadable;return b.length-a<=b.highWaterMark&&(e=!0),(b.ended||b.reading)&&(e=!1),e&&(b.reading=!0,b.sync=!0,0===b.length&&(b.needReadable=!0),this._read(b.highWaterMark),b.sync=!1),e&&!b.reading&&(a=i(d,b)),c=a>0?t(a,b):null,null===c&&(b.needReadable=!0,a=0),b.length-=a,0!==b.length||b.ended||(b.needReadable=!0),b.ended&&!b.endEmitted&&0===b.length&&u(this),c},e.prototype._read=function(){this.emit("error",new Error("not implemented"))},e.prototype.pipe=function(a,b){function d(a){a===k&&f()}function e(){a.end()}function f(){a.removeListener("close",h),a.removeListener("finish",i),a.removeListener("drain",o),a.removeListener("error",g),a.removeListener("unpipe",d),k.removeListener("end",e),k.removeListener("end",f),(!a._writableState||a._writableState.needDrain)&&o()}function g(b){j(),a.removeListener("error",g),0===z.listenerCount(a,"error")&&a.emit("error",b)}function h(){a.removeListener("finish",i),j()}function i(){a.removeListener("close",h),j()}function j(){k.unpipe(a)}var k=this,l=this._readableState;switch(l.pipesCount){case 0:l.pipes=a;break;case 1:l.pipes=[l.pipes,a];break;default:l.pipes.push(a)}l.pipesCount+=1;var m=(!b||b.end!==!1)&&a!==c.stdout&&a!==c.stderr,n=m?e:f;l.endEmitted?c.nextTick(n):k.once("end",n),a.on("unpipe",d);var o=p(k);return a.on("drain",o),a._events&&a._events.error?x(a._events.error)?a._events.error.unshift(g):a._events.error=[g,a._events.error]:a.on("error",g),a.once("close",h),a.once("finish",i),a.emit("pipe",k),l.flowing||(this.on("readable",r),l.flowing=!0,c.nextTick(function(){q(k)})),a},e.prototype.unpipe=function(a){var b=this._readableState;if(0===b.pipesCount)return this;if(1===b.pipesCount)return a&&a!==b.pipes?this:(a||(a=b.pipes),b.pipes=null,b.pipesCount=0,this.removeListener("readable",r),b.flowing=!1,a&&a.emit("unpipe",this),this);if(!a){var c=b.pipes,d=b.pipesCount;b.pipes=null,b.pipesCount=0,this.removeListener("readable",r),b.flowing=!1;for(var e=0;d>e;e++)c[e].emit("unpipe",this);return this}var e=w(b.pipes,a);return-1===e?this:(b.pipes.splice(e,1),b.pipesCount-=1,1===b.pipesCount&&(b.pipes=b.pipes[0]),a.emit("unpipe",this),this)},e.prototype.on=function(a,b){var c=A.prototype.on.call(this,a,b);if("data"!==a||this._readableState.flowing||s(this),"readable"===a&&this.readable){var d=this._readableState;d.readableListening||(d.readableListening=!0,d.emittedReadable=!1,d.needReadable=!0,d.reading?d.length&&l(this,d):this.read(0))}return c},e.prototype.addListener=e.prototype.on,e.prototype.resume=function(){s(this),this.read(0),this.emit("resume")},e.prototype.pause=function(){s(this,!0),this.emit("pause")},e.prototype.wrap=function(a){var b=this._readableState,c=!1,d=this;a.on("end",function(){if(b.decoder&&!b.ended){var a=b.decoder.end();a&&a.length&&d.push(a)}d.push(null)}),a.on("data",function(e){if(b.decoder&&(e=b.decoder.write(e)),(!b.objectMode||null!==e&&void 0!==e)&&(b.objectMode||e&&e.length)){var f=d.push(e);f||(c=!0,a.pause())}});for(var e in a)"function"==typeof a[e]&&"undefined"==typeof this[e]&&(this[e]=function(b){return function(){return a[b].apply(a,arguments)}}(e));var f=["error","close","destroy","pause","resume"];return v(f,function(b){a.on(b,d.emit.bind(d,b))}),d._read=function(){c&&(c=!1,a.resume())},d},e._fromList=t}).call(this,a("_process"))},{_process:470,buffer:324,"core-util-is":481,events:466,inherits:467,isarray:468,stream:486,"string_decoder/":487}],487:[function(a,b,c){function d(a){if(a&&!i(a))throw new Error("Unknown encoding: "+a)}function e(a){return a.toString(this.encoding)}function f(a){this.charReceived=a.length%2,this.charLength=this.charReceived?2:0}function g(a){this.charReceived=a.length%3,this.charLength=this.charReceived?3:0}var h=a("buffer").Buffer,i=h.isEncoding||function(a){switch(a&&a.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}},j=c.StringDecoder=function(a){switch(this.encoding=(a||"utf8").toLowerCase().replace(/[-_]/,""),d(a),this.encoding){case"utf8":this.surrogateSize=3;
break;case"ucs2":case"utf16le":this.surrogateSize=2,this.detectIncompleteChar=f;break;case"base64":this.surrogateSize=3,this.detectIncompleteChar=g;break;default:return void(this.write=e)}this.charBuffer=new h(6),this.charReceived=0,this.charLength=0};j.prototype.write=function(a){for(var b="";this.charLength;){var c=a.length>=this.charLength-this.charReceived?this.charLength-this.charReceived:a.length;if(a.copy(this.charBuffer,this.charReceived,0,c),this.charReceived+=c,this.charReceived<this.charLength)return"";a=a.slice(c,a.length),b=this.charBuffer.slice(0,this.charLength).toString(this.encoding);var d=b.charCodeAt(b.length-1);if(!(d>=55296&&56319>=d)){if(this.charReceived=this.charLength=0,0===a.length)return b;break}this.charLength+=this.surrogateSize,b=""}this.detectIncompleteChar(a);var e=a.length;this.charLength&&(a.copy(this.charBuffer,0,a.length-this.charReceived,e),e-=this.charReceived),b+=a.toString(this.encoding,0,e);var e=b.length-1,d=b.charCodeAt(e);if(d>=55296&&56319>=d){var f=this.surrogateSize;return this.charLength+=f,this.charReceived+=f,this.charBuffer.copy(this.charBuffer,f,0,f),a.copy(this.charBuffer,0,0,f),b.substring(0,e)}return b},j.prototype.detectIncompleteChar=function(a){for(var b=a.length>=3?3:a.length;b>0;b--){var c=a[a.length-b];if(1==b&&c>>5==6){this.charLength=2;break}if(2>=b&&c>>4==14){this.charLength=3;break}if(3>=b&&c>>3==30){this.charLength=4;break}}this.charReceived=b},j.prototype.end=function(a){var b="";if(a&&a.length&&(b=this.write(a)),this.charReceived){var c=this.charReceived,d=this.charBuffer,e=this.encoding;b+=d.slice(0,c).toString(e)}return b}},{buffer:324}],481:[function(a,b,c){(function(a){function b(a){return Array.isArray(a)}function d(a){return"boolean"==typeof a}function e(a){return null===a}function f(a){return null==a}function g(a){return"number"==typeof a}function h(a){return"string"==typeof a}function i(a){return"symbol"==typeof a}function j(a){return void 0===a}function k(a){return l(a)&&"[object RegExp]"===r(a)}function l(a){return"object"==typeof a&&null!==a}function m(a){return l(a)&&"[object Date]"===r(a)}function n(a){return l(a)&&("[object Error]"===r(a)||a instanceof Error)}function o(a){return"function"==typeof a}function p(a){return null===a||"boolean"==typeof a||"number"==typeof a||"string"==typeof a||"symbol"==typeof a||"undefined"==typeof a}function q(b){return a.isBuffer(b)}function r(a){return Object.prototype.toString.call(a)}c.isArray=b,c.isBoolean=d,c.isNull=e,c.isNullOrUndefined=f,c.isNumber=g,c.isString=h,c.isSymbol=i,c.isUndefined=j,c.isRegExp=k,c.isObject=l,c.isDate=m,c.isError=n,c.isFunction=o,c.isPrimitive=p,c.isBuffer=q}).call(this,a("buffer").Buffer)},{buffer:324}],468:[function(a,b){b.exports=Array.isArray||function(a){return"[object Array]"==Object.prototype.toString.call(a)}},{}],466:[function(a,b){function c(){this._events=this._events||{},this._maxListeners=this._maxListeners||void 0}function d(a){return"function"==typeof a}function e(a){return"number"==typeof a}function f(a){return"object"==typeof a&&null!==a}function g(a){return void 0===a}b.exports=c,c.EventEmitter=c,c.prototype._events=void 0,c.prototype._maxListeners=void 0,c.defaultMaxListeners=10,c.prototype.setMaxListeners=function(a){if(!e(a)||0>a||isNaN(a))throw TypeError("n must be a positive number");return this._maxListeners=a,this},c.prototype.emit=function(a){var b,c,e,h,i,j;if(this._events||(this._events={}),"error"===a&&(!this._events.error||f(this._events.error)&&!this._events.error.length)){if(b=arguments[1],b instanceof Error)throw b;throw TypeError('Uncaught, unspecified "error" event.')}if(c=this._events[a],g(c))return!1;if(d(c))switch(arguments.length){case 1:c.call(this);break;case 2:c.call(this,arguments[1]);break;case 3:c.call(this,arguments[1],arguments[2]);break;default:for(e=arguments.length,h=new Array(e-1),i=1;e>i;i++)h[i-1]=arguments[i];c.apply(this,h)}else if(f(c)){for(e=arguments.length,h=new Array(e-1),i=1;e>i;i++)h[i-1]=arguments[i];for(j=c.slice(),e=j.length,i=0;e>i;i++)j[i].apply(this,h)}return!0},c.prototype.addListener=function(a,b){var e;if(!d(b))throw TypeError("listener must be a function");if(this._events||(this._events={}),this._events.newListener&&this.emit("newListener",a,d(b.listener)?b.listener:b),this._events[a]?f(this._events[a])?this._events[a].push(b):this._events[a]=[this._events[a],b]:this._events[a]=b,f(this._events[a])&&!this._events[a].warned){var e;e=g(this._maxListeners)?c.defaultMaxListeners:this._maxListeners,e&&e>0&&this._events[a].length>e&&(this._events[a].warned=!0,console.error("(node) warning: possible EventEmitter memory leak detected. %d listeners added. Use emitter.setMaxListeners() to increase limit.",this._events[a].length),"function"==typeof console.trace&&console.trace())}return this},c.prototype.on=c.prototype.addListener,c.prototype.once=function(a,b){function c(){this.removeListener(a,c),e||(e=!0,b.apply(this,arguments))}if(!d(b))throw TypeError("listener must be a function");var e=!1;return c.listener=b,this.on(a,c),this},c.prototype.removeListener=function(a,b){var c,e,g,h;if(!d(b))throw TypeError("listener must be a function");if(!this._events||!this._events[a])return this;if(c=this._events[a],g=c.length,e=-1,c===b||d(c.listener)&&c.listener===b)delete this._events[a],this._events.removeListener&&this.emit("removeListener",a,b);else if(f(c)){for(h=g;h-->0;)if(c[h]===b||c[h].listener&&c[h].listener===b){e=h;break}if(0>e)return this;1===c.length?(c.length=0,delete this._events[a]):c.splice(e,1),this._events.removeListener&&this.emit("removeListener",a,b)}return this},c.prototype.removeAllListeners=function(a){var b,c;if(!this._events)return this;if(!this._events.removeListener)return 0===arguments.length?this._events={}:this._events[a]&&delete this._events[a],this;if(0===arguments.length){for(b in this._events)"removeListener"!==b&&this.removeAllListeners(b);return this.removeAllListeners("removeListener"),this._events={},this}if(c=this._events[a],d(c))this.removeListener(a,c);else for(;c.length;)this.removeListener(a,c[c.length-1]);return delete this._events[a],this},c.prototype.listeners=function(a){var b;return b=this._events&&this._events[a]?d(this._events[a])?[this._events[a]]:this._events[a].slice():[]},c.listenerCount=function(a,b){var c;return c=a._events&&a._events[b]?d(a._events[b])?1:a._events[b].length:0}},{}],467:[function(a,b){b.exports="function"==typeof Object.create?function(a,b){a.super_=b,a.prototype=Object.create(b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}})}:function(a,b){a.super_=b;var c=function(){};c.prototype=b.prototype,a.prototype=new c,a.prototype.constructor=a}},{}],330:[function(a,b,c){(function(a){function b(a){var b,c;return b=a>h||0>a?(c=Math.abs(a)%h,0>a?h-c:c):a}function d(a){var b,c,d;for(b=c=0,d=a.length;d>=0?d>c:c>d;b=d>=0?++c:--c)a[b]=0;return!1}function e(){var a;this.SBOX=[],this.INV_SBOX=[],this.SUB_MIX=function(){var b,c;for(c=[],a=b=0;4>b;a=++b)c.push([]);return c}(),this.INV_SUB_MIX=function(){var b,c;for(c=[],a=b=0;4>b;a=++b)c.push([]);return c}(),this.init(),this.RCON=[0,1,2,4,8,16,32,64,128,27,54]}function f(a){for(var b=a.length/4,c=new Array(b),d=-1;++d<b;)c[d]=a.readUInt32BE(4*d);return c}function g(a){this._key=f(a),this._doReset()}var h=Math.pow(2,32);e.prototype.init=function(){var a,b,c,d,e,f,g,h,i,j;for(a=function(){var a,c;for(c=[],b=a=0;256>a;b=++a)c.push(128>b?b<<1:b<<1^283);return c}(),e=0,i=0,b=j=0;256>j;b=++j)c=i^i<<1^i<<2^i<<3^i<<4,c=c>>>8^255&c^99,this.SBOX[e]=c,this.INV_SBOX[c]=e,f=a[e],g=a[f],h=a[g],d=257*a[c]^16843008*c,this.SUB_MIX[0][e]=d<<24|d>>>8,this.SUB_MIX[1][e]=d<<16|d>>>16,this.SUB_MIX[2][e]=d<<8|d>>>24,this.SUB_MIX[3][e]=d,d=16843009*h^65537*g^257*f^16843008*e,this.INV_SUB_MIX[0][c]=d<<24|d>>>8,this.INV_SUB_MIX[1][c]=d<<16|d>>>16,this.INV_SUB_MIX[2][c]=d<<8|d>>>24,this.INV_SUB_MIX[3][c]=d,0===e?e=i=1:(e=f^a[a[a[h^f]]],i^=a[a[i]]);return!0};var i=new e;g.blockSize=16,g.prototype.blockSize=g.blockSize,g.keySize=32,g.prototype.keySize=g.keySize,g.prototype._doReset=function(){var a,b,c,d,e,f,g,h;for(c=this._key,b=c.length,this._nRounds=b+6,e=4*(this._nRounds+1),this._keySchedule=[],d=g=0;e>=0?e>g:g>e;d=e>=0?++g:--g)this._keySchedule[d]=b>d?c[d]:(f=this._keySchedule[d-1],d%b===0?(f=f<<8|f>>>24,f=i.SBOX[f>>>24]<<24|i.SBOX[f>>>16&255]<<16|i.SBOX[f>>>8&255]<<8|i.SBOX[255&f],f^=i.RCON[d/b|0]<<24):b>6&&d%b===4?f=i.SBOX[f>>>24]<<24|i.SBOX[f>>>16&255]<<16|i.SBOX[f>>>8&255]<<8|i.SBOX[255&f]:void 0,this._keySchedule[d-b]^f);for(this._invKeySchedule=[],a=h=0;e>=0?e>h:h>e;a=e>=0?++h:--h)d=e-a,f=this._keySchedule[d-(a%4?0:4)],this._invKeySchedule[a]=4>a||4>=d?f:i.INV_SUB_MIX[0][i.SBOX[f>>>24]]^i.INV_SUB_MIX[1][i.SBOX[f>>>16&255]]^i.INV_SUB_MIX[2][i.SBOX[f>>>8&255]]^i.INV_SUB_MIX[3][i.SBOX[255&f]];return!0},g.prototype.encryptBlock=function(b){b=f(new a(b));var c=this._doCryptBlock(b,this._keySchedule,i.SUB_MIX,i.SBOX),d=new a(16);return d.writeUInt32BE(c[0],0),d.writeUInt32BE(c[1],4),d.writeUInt32BE(c[2],8),d.writeUInt32BE(c[3],12),d},g.prototype.decryptBlock=function(b){b=f(new a(b));var c=[b[3],b[1]];b[1]=c[0],b[3]=c[1];var d=this._doCryptBlock(b,this._invKeySchedule,i.INV_SUB_MIX,i.INV_SBOX),e=new a(16);return e.writeUInt32BE(d[0],0),e.writeUInt32BE(d[3],4),e.writeUInt32BE(d[2],8),e.writeUInt32BE(d[1],12),e},g.prototype.scrub=function(){d(this._keySchedule),d(this._invKeySchedule),d(this._key)},g.prototype._doCryptBlock=function(a,c,d,e){var f,g,h,i,j,k,l,m,n,o,p,q;for(h=a[0]^c[0],i=a[1]^c[1],j=a[2]^c[2],k=a[3]^c[3],f=4,g=p=1,q=this._nRounds;q>=1?q>p:p>q;g=q>=1?++p:--p)l=d[0][h>>>24]^d[1][i>>>16&255]^d[2][j>>>8&255]^d[3][255&k]^c[f++],m=d[0][i>>>24]^d[1][j>>>16&255]^d[2][k>>>8&255]^d[3][255&h]^c[f++],n=d[0][j>>>24]^d[1][k>>>16&255]^d[2][h>>>8&255]^d[3][255&i]^c[f++],o=d[0][k>>>24]^d[1][h>>>16&255]^d[2][i>>>8&255]^d[3][255&j]^c[f++],h=l,i=m,j=n,k=o;return l=(e[h>>>24]<<24|e[i>>>16&255]<<16|e[j>>>8&255]<<8|e[255&k])^c[f++],m=(e[i>>>24]<<24|e[j>>>16&255]<<16|e[k>>>8&255]<<8|e[255&h])^c[f++],n=(e[j>>>24]<<24|e[k>>>16&255]<<16|e[h>>>8&255]<<8|e[255&i])^c[f++],o=(e[k>>>24]<<24|e[h>>>16&255]<<16|e[i>>>8&255]<<8|e[255&j])^c[f++],[b(l),b(m),b(n),b(o)]},c.AES=g}).call(this,a("buffer").Buffer)},{buffer:324}],329:[function(a,b){(function(a){b.exports=function(b,c,d,e){d/=8,e=e||0;for(var f,g,h,i=0,j=0,k=new a(d),l=new a(e),m=0;;){if(f=b.createHash("md5"),m++>0&&f.update(g),f.update(c),g=f.digest(),h=0,d>0)for(;;){if(0===d)break;if(h===g.length)break;k[i++]=g[h],d--,h++}if(e>0&&h!==g.length)for(;;){if(0===e)break;if(h===g.length)break;l[j++]=g[h],e--,h++}if(0===d&&0===e)break}for(h=0;h<g.length;h++)g[h]=0;return{key:k,iv:l}}}).call(this,a("buffer").Buffer)},{buffer:324}],324:[function(a,b,c){function d(a,b,c){if(!(this instanceof d))return new d(a,b,c);var e,f=typeof a;if("number"===f)e=a>0?a>>>0:0;else if("string"===f)e=d.byteLength(a,b);else{if("object"!==f||null===a)throw new TypeError("must start with number, buffer, array or string");"Buffer"===a.type&&K(a.data)&&(a=a.data),e=+a.length>0?Math.floor(+a.length):0}if(e>L)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+L.toString(16)+" bytes");var g;d.TYPED_ARRAY_SUPPORT?g=d._augment(new Uint8Array(e)):(g=this,g.length=e,g._isBuffer=!0);var h;if(d.TYPED_ARRAY_SUPPORT&&"number"==typeof a.byteLength)g._set(a);else if(A(a))if(d.isBuffer(a))for(h=0;e>h;h++)g[h]=a.readUInt8(h);else for(h=0;e>h;h++)g[h]=(a[h]%256+256)%256;else if("string"===f)g.write(a,0,b);else if("number"===f&&!d.TYPED_ARRAY_SUPPORT&&!c)for(h=0;e>h;h++)g[h]=0;return e>0&&e<=d.poolSize&&(g.parent=M),g}function e(a,b,c){if(!(this instanceof e))return new e(a,b,c);var f=new d(a,b,c);return delete f.parent,f}function f(a,b,c,d){c=Number(c)||0;var e=a.length-c;d?(d=Number(d),d>e&&(d=e)):d=e;var f=b.length;if(f%2!==0)throw new Error("Invalid hex string");d>f/2&&(d=f/2);for(var g=0;d>g;g++){var h=parseInt(b.substr(2*g,2),16);if(isNaN(h))throw new Error("Invalid hex string");a[c+g]=h}return g}function g(a,b,c,d){var e=G(C(b,a.length-c),a,c,d);return e}function h(a,b,c,d){var e=G(D(b),a,c,d);return e}function i(a,b,c,d){return h(a,b,c,d)}function j(a,b,c,d){var e=G(F(b),a,c,d);return e}function k(a,b,c,d){var e=G(E(b,a.length-c),a,c,d,2);return e}function l(a,b,c){return I.fromByteArray(0===b&&c===a.length?a:a.slice(b,c))}function m(a,b,c){var d="",e="";c=Math.min(a.length,c);for(var f=b;c>f;f++)a[f]<=127?(d+=H(e)+String.fromCharCode(a[f]),e=""):e+="%"+a[f].toString(16);return d+H(e)}function n(a,b,c){var d="";c=Math.min(a.length,c);for(var e=b;c>e;e++)d+=String.fromCharCode(127&a[e]);return d}function o(a,b,c){var d="";c=Math.min(a.length,c);for(var e=b;c>e;e++)d+=String.fromCharCode(a[e]);return d}function p(a,b,c){var d=a.length;(!b||0>b)&&(b=0),(!c||0>c||c>d)&&(c=d);for(var e="",f=b;c>f;f++)e+=B(a[f]);return e}function q(a,b,c){for(var d=a.slice(b,c),e="",f=0;f<d.length;f+=2)e+=String.fromCharCode(d[f]+256*d[f+1]);return e}function r(a,b,c){if(a%1!==0||0>a)throw new RangeError("offset is not uint");if(a+b>c)throw new RangeError("Trying to access beyond buffer length")}function s(a,b,c,e,f,g){if(!d.isBuffer(a))throw new TypeError("buffer must be a Buffer instance");if(b>f||g>b)throw new RangeError("value is out of bounds");if(c+e>a.length)throw new RangeError("index out of range")}function t(a,b,c,d){0>b&&(b=65535+b+1);for(var e=0,f=Math.min(a.length-c,2);f>e;e++)a[c+e]=(b&255<<8*(d?e:1-e))>>>8*(d?e:1-e)}function u(a,b,c,d){0>b&&(b=4294967295+b+1);for(var e=0,f=Math.min(a.length-c,4);f>e;e++)a[c+e]=b>>>8*(d?e:3-e)&255}function v(a,b,c,d,e,f){if(b>e||f>b)throw new RangeError("value is out of bounds");if(c+d>a.length)throw new RangeError("index out of range");if(0>c)throw new RangeError("index out of range")}function w(a,b,c,d,e){return e||v(a,b,c,4,3.4028234663852886e38,-3.4028234663852886e38),J.write(a,b,c,d,23,4),c+4}function x(a,b,c,d,e){return e||v(a,b,c,8,1.7976931348623157e308,-1.7976931348623157e308),J.write(a,b,c,d,52,8),c+8}function y(a){if(a=z(a).replace(O,""),a.length<2)return"";for(;a.length%4!==0;)a+="=";return a}function z(a){return a.trim?a.trim():a.replace(/^\s+|\s+$/g,"")}function A(a){return K(a)||d.isBuffer(a)||a&&"object"==typeof a&&"number"==typeof a.length}function B(a){return 16>a?"0"+a.toString(16):a.toString(16)}function C(a,b){var c,d=a.length,e=null;b=b||1/0;for(var f=[],g=0;d>g;g++){if(c=a.charCodeAt(g),c>55295&&57344>c){if(!e){if(c>56319){(b-=3)>-1&&f.push(239,191,189);continue}if(g+1===d){(b-=3)>-1&&f.push(239,191,189);continue}e=c;continue}if(56320>c){(b-=3)>-1&&f.push(239,191,189),e=c;continue}c=e-55296<<10|c-56320|65536,e=null}else e&&((b-=3)>-1&&f.push(239,191,189),e=null);if(128>c){if((b-=1)<0)break;f.push(c)}else if(2048>c){if((b-=2)<0)break;f.push(c>>6|192,63&c|128)}else if(65536>c){if((b-=3)<0)break;f.push(c>>12|224,c>>6&63|128,63&c|128)}else{if(!(2097152>c))throw new Error("Invalid code point");if((b-=4)<0)break;f.push(c>>18|240,c>>12&63|128,c>>6&63|128,63&c|128)}}return f}function D(a){for(var b=[],c=0;c<a.length;c++)b.push(255&a.charCodeAt(c));return b}function E(a,b){for(var c,d,e,f=[],g=0;g<a.length&&!((b-=2)<0);g++)c=a.charCodeAt(g),d=c>>8,e=c%256,f.push(e),f.push(d);return f}function F(a){return I.toByteArray(y(a))}function G(a,b,c,d,e){e&&(d-=d%e);for(var f=0;d>f&&!(f+c>=b.length||f>=a.length);f++)b[f+c]=a[f];return f}function H(a){try{return decodeURIComponent(a)}catch(b){return String.fromCharCode(65533)}}var I=a("base64-js"),J=a("ieee754"),K=a("is-array");c.Buffer=d,c.SlowBuffer=e,c.INSPECT_MAX_BYTES=50,d.poolSize=8192;var L=1073741823,M={};d.TYPED_ARRAY_SUPPORT=function(){try{var a=new ArrayBuffer(0),b=new Uint8Array(a);return b.foo=function(){return 42},42===b.foo()&&"function"==typeof b.subarray&&0===new Uint8Array(1).subarray(1,1).byteLength}catch(c){return!1}}(),d.isBuffer=function(a){return!(null==a||!a._isBuffer)},d.compare=function(a,b){if(!d.isBuffer(a)||!d.isBuffer(b))throw new TypeError("Arguments must be Buffers");for(var c=a.length,e=b.length,f=0,g=Math.min(c,e);g>f&&a[f]===b[f];f++);return f!==g&&(c=a[f],e=b[f]),e>c?-1:c>e?1:0},d.isEncoding=function(a){switch(String(a).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"raw":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},d.concat=function(a,b){if(!K(a))throw new TypeError("Usage: Buffer.concat(list[, length])");if(0===a.length)return new d(0);if(1===a.length)return a[0];var c;if(void 0===b)for(b=0,c=0;c<a.length;c++)b+=a[c].length;var e=new d(b),f=0;for(c=0;c<a.length;c++){var g=a[c];g.copy(e,f),f+=g.length}return e},d.byteLength=function(a,b){var c;switch(a+="",b||"utf8"){case"ascii":case"binary":case"raw":c=a.length;break;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":c=2*a.length;break;case"hex":c=a.length>>>1;break;case"utf8":case"utf-8":c=C(a).length;break;case"base64":c=F(a).length;break;default:c=a.length}return c},d.prototype.length=void 0,d.prototype.parent=void 0,d.prototype.toString=function(a,b,c){var d=!1;if(b>>>=0,c=void 0===c||1/0===c?this.length:c>>>0,a||(a="utf8"),0>b&&(b=0),c>this.length&&(c=this.length),b>=c)return"";for(;;)switch(a){case"hex":return p(this,b,c);case"utf8":case"utf-8":return m(this,b,c);case"ascii":return n(this,b,c);case"binary":return o(this,b,c);case"base64":return l(this,b,c);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return q(this,b,c);default:if(d)throw new TypeError("Unknown encoding: "+a);a=(a+"").toLowerCase(),d=!0}},d.prototype.equals=function(a){if(!d.isBuffer(a))throw new TypeError("Argument must be a Buffer");return 0===d.compare(this,a)},d.prototype.inspect=function(){var a="",b=c.INSPECT_MAX_BYTES;return this.length>0&&(a=this.toString("hex",0,b).match(/.{2}/g).join(" "),this.length>b&&(a+=" ... ")),"<Buffer "+a+">"},d.prototype.compare=function(a){if(!d.isBuffer(a))throw new TypeError("Argument must be a Buffer");return d.compare(this,a)},d.prototype.get=function(a){return console.log(".get() is deprecated. Access using array indexes instead."),this.readUInt8(a)},d.prototype.set=function(a,b){return console.log(".set() is deprecated. Access using array indexes instead."),this.writeUInt8(a,b)},d.prototype.write=function(a,b,c,d){if(isFinite(b))isFinite(c)||(d=c,c=void 0);else{var e=d;d=b,b=c,c=e}if(b=Number(b)||0,0>c||0>b||b>this.length)throw new RangeError("attempt to write outside buffer bounds");var l=this.length-b;c?(c=Number(c),c>l&&(c=l)):c=l,d=String(d||"utf8").toLowerCase();var m;switch(d){case"hex":m=f(this,a,b,c);break;case"utf8":case"utf-8":m=g(this,a,b,c);break;case"ascii":m=h(this,a,b,c);break;case"binary":m=i(this,a,b,c);break;case"base64":m=j(this,a,b,c);break;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":m=k(this,a,b,c);break;default:throw new TypeError("Unknown encoding: "+d)}return m},d.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}},d.prototype.slice=function(a,b){var c=this.length;a=~~a,b=void 0===b?c:~~b,0>a?(a+=c,0>a&&(a=0)):a>c&&(a=c),0>b?(b+=c,0>b&&(b=0)):b>c&&(b=c),a>b&&(b=a);var e;if(d.TYPED_ARRAY_SUPPORT)e=d._augment(this.subarray(a,b));else{var f=b-a;e=new d(f,void 0,!0);for(var g=0;f>g;g++)e[g]=this[g+a]}return e.length&&(e.parent=this.parent||this),e},d.prototype.readUIntLE=function(a,b,c){a>>>=0,b>>>=0,c||r(a,b,this.length);for(var d=this[a],e=1,f=0;++f<b&&(e*=256);)d+=this[a+f]*e;return d},d.prototype.readUIntBE=function(a,b,c){a>>>=0,b>>>=0,c||r(a,b,this.length);for(var d=this[a+--b],e=1;b>0&&(e*=256);)d+=this[a+--b]*e;return d},d.prototype.readUInt8=function(a,b){return b||r(a,1,this.length),this[a]},d.prototype.readUInt16LE=function(a,b){return b||r(a,2,this.length),this[a]|this[a+1]<<8},d.prototype.readUInt16BE=function(a,b){return b||r(a,2,this.length),this[a]<<8|this[a+1]},d.prototype.readUInt32LE=function(a,b){return b||r(a,4,this.length),(this[a]|this[a+1]<<8|this[a+2]<<16)+16777216*this[a+3]},d.prototype.readUInt32BE=function(a,b){return b||r(a,4,this.length),16777216*this[a]+(this[a+1]<<16|this[a+2]<<8|this[a+3])},d.prototype.readIntLE=function(a,b,c){a>>>=0,b>>>=0,c||r(a,b,this.length);for(var d=this[a],e=1,f=0;++f<b&&(e*=256);)d+=this[a+f]*e;return e*=128,d>=e&&(d-=Math.pow(2,8*b)),d},d.prototype.readIntBE=function(a,b,c){a>>>=0,b>>>=0,c||r(a,b,this.length);for(var d=b,e=1,f=this[a+--d];d>0&&(e*=256);)f+=this[a+--d]*e;return e*=128,f>=e&&(f-=Math.pow(2,8*b)),f},d.prototype.readInt8=function(a,b){return b||r(a,1,this.length),128&this[a]?-1*(255-this[a]+1):this[a]},d.prototype.readInt16LE=function(a,b){b||r(a,2,this.length);var c=this[a]|this[a+1]<<8;return 32768&c?4294901760|c:c},d.prototype.readInt16BE=function(a,b){b||r(a,2,this.length);var c=this[a+1]|this[a]<<8;return 32768&c?4294901760|c:c},d.prototype.readInt32LE=function(a,b){return b||r(a,4,this.length),this[a]|this[a+1]<<8|this[a+2]<<16|this[a+3]<<24},d.prototype.readInt32BE=function(a,b){return b||r(a,4,this.length),this[a]<<24|this[a+1]<<16|this[a+2]<<8|this[a+3]},d.prototype.readFloatLE=function(a,b){return b||r(a,4,this.length),J.read(this,a,!0,23,4)},d.prototype.readFloatBE=function(a,b){return b||r(a,4,this.length),J.read(this,a,!1,23,4)},d.prototype.readDoubleLE=function(a,b){return b||r(a,8,this.length),J.read(this,a,!0,52,8)},d.prototype.readDoubleBE=function(a,b){return b||r(a,8,this.length),J.read(this,a,!1,52,8)},d.prototype.writeUIntLE=function(a,b,c,d){a=+a,b>>>=0,c>>>=0,d||s(this,a,b,c,Math.pow(2,8*c),0);var e=1,f=0;for(this[b]=255&a;++f<c&&(e*=256);)this[b+f]=a/e>>>0&255;return b+c},d.prototype.writeUIntBE=function(a,b,c,d){a=+a,b>>>=0,c>>>=0,d||s(this,a,b,c,Math.pow(2,8*c),0);var e=c-1,f=1;for(this[b+e]=255&a;--e>=0&&(f*=256);)this[b+e]=a/f>>>0&255;return b+c},d.prototype.writeUInt8=function(a,b,c){return a=+a,b>>>=0,c||s(this,a,b,1,255,0),d.TYPED_ARRAY_SUPPORT||(a=Math.floor(a)),this[b]=a,b+1},d.prototype.writeUInt16LE=function(a,b,c){return a=+a,b>>>=0,c||s(this,a,b,2,65535,0),d.TYPED_ARRAY_SUPPORT?(this[b]=a,this[b+1]=a>>>8):t(this,a,b,!0),b+2},d.prototype.writeUInt16BE=function(a,b,c){return a=+a,b>>>=0,c||s(this,a,b,2,65535,0),d.TYPED_ARRAY_SUPPORT?(this[b]=a>>>8,this[b+1]=a):t(this,a,b,!1),b+2},d.prototype.writeUInt32LE=function(a,b,c){return a=+a,b>>>=0,c||s(this,a,b,4,4294967295,0),d.TYPED_ARRAY_SUPPORT?(this[b+3]=a>>>24,this[b+2]=a>>>16,this[b+1]=a>>>8,this[b]=a):u(this,a,b,!0),b+4},d.prototype.writeUInt32BE=function(a,b,c){return a=+a,b>>>=0,c||s(this,a,b,4,4294967295,0),d.TYPED_ARRAY_SUPPORT?(this[b]=a>>>24,this[b+1]=a>>>16,this[b+2]=a>>>8,this[b+3]=a):u(this,a,b,!1),b+4},d.prototype.writeIntLE=function(a,b,c,d){a=+a,b>>>=0,d||s(this,a,b,c,Math.pow(2,8*c-1)-1,-Math.pow(2,8*c-1));var e=0,f=1,g=0>a?1:0;for(this[b]=255&a;++e<c&&(f*=256);)this[b+e]=(a/f>>0)-g&255;return b+c},d.prototype.writeIntBE=function(a,b,c,d){a=+a,b>>>=0,d||s(this,a,b,c,Math.pow(2,8*c-1)-1,-Math.pow(2,8*c-1));var e=c-1,f=1,g=0>a?1:0;for(this[b+e]=255&a;--e>=0&&(f*=256);)this[b+e]=(a/f>>0)-g&255;return b+c},d.prototype.writeInt8=function(a,b,c){return a=+a,b>>>=0,c||s(this,a,b,1,127,-128),d.TYPED_ARRAY_SUPPORT||(a=Math.floor(a)),0>a&&(a=255+a+1),this[b]=a,b+1},d.prototype.writeInt16LE=function(a,b,c){return a=+a,b>>>=0,c||s(this,a,b,2,32767,-32768),d.TYPED_ARRAY_SUPPORT?(this[b]=a,this[b+1]=a>>>8):t(this,a,b,!0),b+2},d.prototype.writeInt16BE=function(a,b,c){return a=+a,b>>>=0,c||s(this,a,b,2,32767,-32768),d.TYPED_ARRAY_SUPPORT?(this[b]=a>>>8,this[b+1]=a):t(this,a,b,!1),b+2},d.prototype.writeInt32LE=function(a,b,c){return a=+a,b>>>=0,c||s(this,a,b,4,2147483647,-2147483648),d.TYPED_ARRAY_SUPPORT?(this[b]=a,this[b+1]=a>>>8,this[b+2]=a>>>16,this[b+3]=a>>>24):u(this,a,b,!0),b+4},d.prototype.writeInt32BE=function(a,b,c){return a=+a,b>>>=0,c||s(this,a,b,4,2147483647,-2147483648),0>a&&(a=4294967295+a+1),d.TYPED_ARRAY_SUPPORT?(this[b]=a>>>24,this[b+1]=a>>>16,this[b+2]=a>>>8,this[b+3]=a):u(this,a,b,!1),b+4},d.prototype.writeFloatLE=function(a,b,c){return w(this,a,b,!0,c)},d.prototype.writeFloatBE=function(a,b,c){return w(this,a,b,!1,c)},d.prototype.writeDoubleLE=function(a,b,c){return x(this,a,b,!0,c)},d.prototype.writeDoubleBE=function(a,b,c){return x(this,a,b,!1,c)},d.prototype.copy=function(a,b,c,e){var f=this;if(c||(c=0),e||0===e||(e=this.length),b>=a.length&&(b=a.length),b||(b=0),e>0&&c>e&&(e=c),e===c)return 0;if(0===a.length||0===f.length)return 0;if(0>b)throw new RangeError("targetStart out of bounds");if(0>c||c>=f.length)throw new RangeError("sourceStart out of bounds");if(0>e)throw new RangeError("sourceEnd out of bounds");e>this.length&&(e=this.length),a.length-b<e-c&&(e=a.length-b+c);var g=e-c;if(1e3>g||!d.TYPED_ARRAY_SUPPORT)for(var h=0;g>h;h++)a[h+b]=this[h+c];else a._set(this.subarray(c,c+g),b);return g},d.prototype.fill=function(a,b,c){if(a||(a=0),b||(b=0),c||(c=this.length),b>c)throw new RangeError("end < start");if(c!==b&&0!==this.length){if(0>b||b>=this.length)throw new RangeError("start out of bounds");if(0>c||c>this.length)throw new RangeError("end out of bounds");var d;if("number"==typeof a)for(d=b;c>d;d++)this[d]=a;else{var e=C(a.toString()),f=e.length;for(d=b;c>d;d++)this[d]=e[d%f]}return this}},d.prototype.toArrayBuffer=function(){if("undefined"!=typeof Uint8Array){if(d.TYPED_ARRAY_SUPPORT)return new d(this).buffer;for(var a=new Uint8Array(this.length),b=0,c=a.length;c>b;b+=1)a[b]=this[b];return a.buffer}throw new TypeError("Buffer.toArrayBuffer not supported in this browser")};var N=d.prototype;d._augment=function(a){return a.constructor=d,a._isBuffer=!0,a._get=a.get,a._set=a.set,a.get=N.get,a.set=N.set,a.write=N.write,a.toString=N.toString,a.toLocaleString=N.toString,a.toJSON=N.toJSON,a.equals=N.equals,a.compare=N.compare,a.copy=N.copy,a.slice=N.slice,a.readUIntLE=N.readUIntLE,a.readUIntBE=N.readUIntBE,a.readUInt8=N.readUInt8,a.readUInt16LE=N.readUInt16LE,a.readUInt16BE=N.readUInt16BE,a.readUInt32LE=N.readUInt32LE,a.readUInt32BE=N.readUInt32BE,a.readIntLE=N.readIntLE,a.readIntBE=N.readIntBE,a.readInt8=N.readInt8,a.readInt16LE=N.readInt16LE,a.readInt16BE=N.readInt16BE,a.readInt32LE=N.readInt32LE,a.readInt32BE=N.readInt32BE,a.readFloatLE=N.readFloatLE,a.readFloatBE=N.readFloatBE,a.readDoubleLE=N.readDoubleLE,a.readDoubleBE=N.readDoubleBE,a.writeUInt8=N.writeUInt8,a.writeUIntLE=N.writeUIntLE,a.writeUIntBE=N.writeUIntBE,a.writeUInt16LE=N.writeUInt16LE,a.writeUInt16BE=N.writeUInt16BE,a.writeUInt32LE=N.writeUInt32LE,a.writeUInt32BE=N.writeUInt32BE,a.writeIntLE=N.writeIntLE,a.writeIntBE=N.writeIntBE,a.writeInt8=N.writeInt8,a.writeInt16LE=N.writeInt16LE,a.writeInt16BE=N.writeInt16BE,a.writeInt32LE=N.writeInt32LE,a.writeInt32BE=N.writeInt32BE,a.writeFloatLE=N.writeFloatLE,a.writeFloatBE=N.writeFloatBE,a.writeDoubleLE=N.writeDoubleLE,a.writeDoubleBE=N.writeDoubleBE,a.fill=N.fill,a.inspect=N.inspect,a.toArrayBuffer=N.toArrayBuffer,a};var O=/[^+\/0-9A-z\-]/g},{"base64-js":325,ieee754:326,"is-array":327}],327:[function(a,b){var c=Array.isArray,d=Object.prototype.toString;b.exports=c||function(a){return!!a&&"[object Array]"==d.call(a)}},{}],326:[function(a,b,c){c.read=function(a,b,c,d,e){var f,g,h=8*e-d-1,i=(1<<h)-1,j=i>>1,k=-7,l=c?e-1:0,m=c?-1:1,n=a[b+l];for(l+=m,f=n&(1<<-k)-1,n>>=-k,k+=h;k>0;f=256*f+a[b+l],l+=m,k-=8);for(g=f&(1<<-k)-1,f>>=-k,k+=d;k>0;g=256*g+a[b+l],l+=m,k-=8);if(0===f)f=1-j;else{if(f===i)return g?0/0:1/0*(n?-1:1);g+=Math.pow(2,d),f-=j}return(n?-1:1)*g*Math.pow(2,f-d)},c.write=function(a,b,c,d,e,f){var g,h,i,j=8*f-e-1,k=(1<<j)-1,l=k>>1,m=23===e?Math.pow(2,-24)-Math.pow(2,-77):0,n=d?0:f-1,o=d?1:-1,p=0>b||0===b&&0>1/b?1:0;for(b=Math.abs(b),isNaN(b)||1/0===b?(h=isNaN(b)?1:0,g=k):(g=Math.floor(Math.log(b)/Math.LN2),b*(i=Math.pow(2,-g))<1&&(g--,i*=2),b+=g+l>=1?m/i:m*Math.pow(2,1-l),b*i>=2&&(g++,i/=2),g+l>=k?(h=0,g=k):g+l>=1?(h=(b*i-1)*Math.pow(2,e),g+=l):(h=b*Math.pow(2,l-1)*Math.pow(2,e),g=0));e>=8;a[c+n]=255&h,n+=o,h/=256,e-=8);for(g=g<<e|h,j+=e;j>0;a[c+n]=255&g,n+=o,g/=256,j-=8);a[c+n-o]|=128*p}},{}],325:[function(a,b,c){var d="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";!function(a){"use strict";function b(a){var b=a.charCodeAt(0);return b===g||b===l?62:b===h||b===m?63:i>b?-1:i+10>b?b-i+26+26:k+26>b?b-k:j+26>b?b-j+26:void 0}function c(a){function c(a){j[l++]=a}var d,e,g,h,i,j;if(a.length%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var k=a.length;i="="===a.charAt(k-2)?2:"="===a.charAt(k-1)?1:0,j=new f(3*a.length/4-i),g=i>0?a.length-4:a.length;var l=0;for(d=0,e=0;g>d;d+=4,e+=3)h=b(a.charAt(d))<<18|b(a.charAt(d+1))<<12|b(a.charAt(d+2))<<6|b(a.charAt(d+3)),c((16711680&h)>>16),c((65280&h)>>8),c(255&h);return 2===i?(h=b(a.charAt(d))<<2|b(a.charAt(d+1))>>4,c(255&h)):1===i&&(h=b(a.charAt(d))<<10|b(a.charAt(d+1))<<4|b(a.charAt(d+2))>>2,c(h>>8&255),c(255&h)),j}function e(a){function b(a){return d.charAt(a)}function c(a){return b(a>>18&63)+b(a>>12&63)+b(a>>6&63)+b(63&a)}var e,f,g,h=a.length%3,i="";for(e=0,g=a.length-h;g>e;e+=3)f=(a[e]<<16)+(a[e+1]<<8)+a[e+2],i+=c(f);switch(h){case 1:f=a[a.length-1],i+=b(f>>2),i+=b(f<<4&63),i+="==";break;case 2:f=(a[a.length-2]<<8)+a[a.length-1],i+=b(f>>10),i+=b(f>>4&63),i+=b(f<<2&63),i+="="}return i}var f="undefined"!=typeof Uint8Array?Uint8Array:Array,g="+".charCodeAt(0),h="/".charCodeAt(0),i="0".charCodeAt(0),j="a".charCodeAt(0),k="A".charCodeAt(0),l="-".charCodeAt(0),m="_".charCodeAt(0);a.toByteArray=c,a.fromByteArray=e}("undefined"==typeof c?this.base64js={}:c)},{}],656:[function(a,b){!function(a,b,c){function d(a){var b=this,c="";b.next=function(){var a=b.x^b.x>>>2;return b.x=b.y,b.y=b.z,b.z=b.w,b.w=b.v,(b.d=b.d+362437|0)+(b.v=b.v^b.v<<4^(a^a<<1))|0},b.x=0,b.y=0,b.z=0,b.w=0,b.v=0,a===(0|a)?b.x=a:c+=a;for(var d=0;d<c.length+64;d++)b.x^=0|c.charCodeAt(d),d==c.length&&(b.d=b.x<<10^b.x>>>4),b.next()}function e(a,b){return b.x=a.x,b.y=a.y,b.z=a.z,b.w=a.w,b.v=a.v,b.d=a.d,b}function f(a,b){var c=new d(a),f=b&&b.state,g=function(){return(c.next()>>>0)/(4*(1<<30))};return g["double"]=function(){do var a=c.next()>>>11,b=(c.next()>>>0)/(4*(1<<30)),d=(a+b)/(1<<21);while(0===d);return d},g.int32=c.next,g.quick=g,f&&("object"==typeof f&&e(f,c),g.state=function(){return e(c,{})}),g}b&&b.exports?b.exports=f:c&&c.amd?c(function(){return f}):this.xorwow=f}(this,"object"==typeof b&&b,"function"==typeof define&&define)},{}],655:[function(a,b){!function(a,b,c){function d(a){function b(a,b){var c,d,e=[];if(b===(0|b))d=e[0]=b;else for(b=""+b,c=0;c<b.length;++c)e[7&c]=e[7&c]<<15^b.charCodeAt(c)+e[c+1&7]<<13;for(;e.length<8;)e.push(0);for(c=0;8>c&&0===e[c];++c);for(d=8==c?e[7]=-1:e[c],a.x=e,a.i=0,c=256;c>0;--c)a.next()}var c=this;c.next=function(){var a,b,d=c.x,e=c.i;return a=d[e],a^=a>>>7,b=a^a<<24,a=d[e+1&7],b^=a^a>>>10,a=d[e+3&7],b^=a^a>>>3,a=d[e+4&7],b^=a^a<<7,a=d[e+7&7],a^=a<<13,b^=a^a<<9,d[e]=b,c.i=e+1&7,b},b(c,a)}function e(a,b){return b.x=a.x.slice(),b.i=a.i,b}function f(a,b){null==a&&(a=+new Date);var c=new d(a),f=b&&b.state,g=function(){return(c.next()>>>0)/(4*(1<<30))};return g["double"]=function(){do var a=c.next()>>>11,b=(c.next()>>>0)/(4*(1<<30)),d=(a+b)/(1<<21);while(0===d);return d},g.int32=c.next,g.quick=g,f&&(f.x&&e(f,c),g.state=function(){return e(c,{})}),g}b&&b.exports?b.exports=f:c&&c.amd?c(function(){return f}):this.xorshift7=f}(this,"object"==typeof b&&b,"function"==typeof define&&define)},{}],654:[function(a,b){!function(a,b,c){function d(a){function b(a,b){var c,d,e,f,g,h=[],i=128;for(b===(0|b)?(d=b,b=null):(b+="\x00",d=0,i=Math.max(i,b.length)),e=0,f=-32;i>f;++f)b&&(d^=b.charCodeAt((f+32)%b.length)),0===f&&(g=d),d^=d<<10,d^=d>>>15,d^=d<<4,d^=d>>>13,f>=0&&(g=g+1640531527|0,c=h[127&f]^=d+g,e=0==c?e+1:0);for(e>=128&&(h[127&(b&&b.length||0)]=-1),e=127,f=512;f>0;--f)d=h[e+34&127],c=h[e=e+1&127],d^=d<<13,c^=c<<17,d^=d>>>15,c^=c>>>12,h[e]=d^c;a.w=g,a.X=h,a.i=e}var c=this;c.next=function(){var a,b,d=c.w,e=c.X,f=c.i;return c.w=d=d+1640531527|0,b=e[f+34&127],a=e[f=f+1&127],b^=b<<13,a^=a<<17,b^=b>>>15,a^=a>>>12,b=e[f]=b^a,c.i=f,b+(d^d>>>16)|0},b(c,a)}function e(a,b){return b.i=a.i,b.w=a.w,b.X=a.X.slice(),b}function f(a,b){null==a&&(a=+new Date);var c=new d(a),f=b&&b.state,g=function(){return(c.next()>>>0)/(4*(1<<30))};return g["double"]=function(){do var a=c.next()>>>11,b=(c.next()>>>0)/(4*(1<<30)),d=(a+b)/(1<<21);
while(0===d);return d},g.int32=c.next,g.quick=g,f&&(f.X&&e(f,c),g.state=function(){return e(c,{})}),g}b&&b.exports?b.exports=f:c&&c.amd?c(function(){return f}):this.xor4096=f}(this,"object"==typeof b&&b,"function"==typeof define&&define)},{}],653:[function(a,b){!function(a,b,c){function d(a){var b=this,c="";b.x=0,b.y=0,b.z=0,b.w=0,b.next=function(){var a=b.x^b.x<<11;return b.x=b.y,b.y=b.z,b.z=b.w,b.w^=b.w>>>19^a^a>>>8},a===(0|a)?b.x=a:c+=a;for(var d=0;d<c.length+64;d++)b.x^=0|c.charCodeAt(d),b.next()}function e(a,b){return b.x=a.x,b.y=a.y,b.z=a.z,b.w=a.w,b}function f(a,b){var c=new d(a),f=b&&b.state,g=function(){return(c.next()>>>0)/(4*(1<<30))};return g["double"]=function(){do var a=c.next()>>>11,b=(c.next()>>>0)/(4*(1<<30)),d=(a+b)/(1<<21);while(0===d);return d},g.int32=c.next,g.quick=g,f&&("object"==typeof f&&e(f,c),g.state=function(){return e(c,{})}),g}b&&b.exports?b.exports=f:c&&c.amd?c(function(){return f}):this.xor128=f}(this,"object"==typeof b&&b,"function"==typeof define&&define)},{}],652:[function(a,b){!function(a,b,c){function d(a){var b=this,c="";b.next=function(){var a=b.b,c=b.c,d=b.d,e=b.a;return a=a<<25^a>>>7^c,c=c-d|0,d=d<<24^d>>>8^e,e=e-a|0,b.b=a=a<<20^a>>>12^c,b.c=c=c-d|0,b.d=d<<16^c>>>16^e,b.a=e-a|0},b.a=0,b.b=0,b.c=-1640531527,b.d=1367130551,a===Math.floor(a)?(b.a=a/(4*(1<<30))|0,b.b=0|a):c+=a;for(var d=0;d<c.length+20;d++)b.b^=0|c.charCodeAt(d),b.next()}function e(a,b){return b.a=a.a,b.b=a.b,b.c=a.c,b.d=a.d,b}function f(a,b){var c=new d(a),f=b&&b.state,g=function(){return(c.next()>>>0)/(4*(1<<30))};return g["double"]=function(){do var a=c.next()>>>11,b=(c.next()>>>0)/(4*(1<<30)),d=(a+b)/(1<<21);while(0===d);return d},g.int32=c.next,g.quick=g,f&&("object"==typeof f&&e(f,c),g.state=function(){return e(c,{})}),g}b&&b.exports?b.exports=f:c&&c.amd?c(function(){return f}):this.tychei=f}(this,"object"==typeof b&&b,"function"==typeof define&&define)},{}],201:[function(a,b){"use strict";var c=a("./NetSimEncodingControl.html.ejs"),d=a("./NetSimConstants").EncodingType,e=b.exports=function(a,b,c){this.rootDiv_=a,this.levelConfig_=b,this.changeEncodingCallback_=c,this.checkboxes_=null,this.render()};e.prototype.render=function(){var a=$(c({level:this.levelConfig_}));this.rootDiv_.html(a),this.checkboxes_=this.rootDiv_.find('input[type="checkbox"][name="encoding_checkboxes"]'),this.checkboxes_.change(this.onCheckboxesChange_.bind(this))},e.prototype.onCheckboxesChange_=function(){var a=[];this.checkboxes_.filter(":checked").each(function(b,c){a.push(c.value)}),this.changeEncodingCallback_(a)},e.prototype.setEncodings=function(a){this.checkboxes_.each(function(b,c){$(c).attr("checked",a.indexOf(c.value)>-1)})};var f=function(a){return a.map(function(a){return"tr."+a}).join(", ")};e.hideRowsByEncoding=function(a,b){var c=[];for(var e in d)d.hasOwnProperty(e)&&-1===b.indexOf(d[e])&&c.push(d[e]);a.find(f(b)).show(),a.find(f(c)).hide()},e.encodingsAsHash=function(a){return a.reduce(function(a,b){return a[b]=!0,a},{})}},{"./NetSimConstants":191,"./NetSimEncodingControl.html.ejs":200}],200:[function(require,module,exports){module.exports=function(){var t=function anonymous(locals,filters,escape){escape=escape||function(a){return String(a).replace(/&(?!\w+;)/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")};var buf=[];with(locals||{})!function(){function a(a,b){var c=["encoding_checkboxes_"+a];-1===level.showEncodingControls.indexOf(a)&&c.push("hidden-control"),buf.push('\n    <div class="',escape(c.join(" ")),'">\n      <input type="checkbox"\n             name="encoding_checkboxes"\n             id="encoding_checkboxes_',escape(a),'"\n             value="',escape(a),'"\n          />\n      <label for="encoding_checkboxes_',escape(a),'">',escape(b),"</label>\n    </div>\n    ")}buf.push("");var b=require("./NetSimConstants").EncodingType,c=require("./locale");buf.push('\n<div class="netsim-encoding-selector">\n  <h1>',escape(c.encoding()),"</h1>\n  "),a(b.ASCII,c.ascii()),buf.push("\n  "),a(b.DECIMAL,c.decimal()),buf.push("\n  "),a(b.HEXADECIMAL,c.hexadecimal()),buf.push("\n  "),a(b.BINARY,c.binary()),buf.push("\n  "),a(b.A_AND_B,c.a_and_b()),buf.push("\n</div>")}();return buf.join("")};return function(a){return t(a,require("ejs").filters)}}()},{"./NetSimConstants":191,"./locale":260,ejs:491}],186:[function(require,module,exports){module.exports=function(){var t=function anonymous(locals,filters,escape){escape=escape||function(a){return String(a).replace(/&(?!\w+;)/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")};var buf=[];with(locals||{})!function(){function a(a,b){buf.push('\n    <tr class="',escape(a),'">\n      <th nowrap class="',escape(g.ENCODING_LABEL),'">',escape(e(a)),'</th>\n      <td class="',escape(g.MESSAGE),'">',escape(b),"</td>\n    </tr>\n    ")}buf.push("");var b=require("./locale"),c=require("./NetSimConstants"),d=require("./DataConverters"),e=require("./NetSimUtils").getEncodingLabel,f=c.EncodingType,g=c.PacketUIColumnType;buf.push('\n<div class="scroll-area bit-log-scroll-area">\n  <div class="packet">\n    <table>\n      <tbody>\n        '),a(f.ASCII,d.binaryToAscii(binary,chunkSize)),a(f.DECIMAL,d.alignDecimal(d.binaryToDecimal(binary,chunkSize))),a(f.HEXADECIMAL,d.formatHex(d.binaryToHex(binary),chunkSize)),a(f.BINARY,d.formatBinary(binary,chunkSize)),a(f.A_AND_B,d.formatAB(d.binaryToAB(binary),chunkSize)),buf.push("\n      </tbody>\n    </table>\n  </div>\n  "),showReadWireButton&&buf.push('\n    <div class="panel-footer bit-log-panel-footer">\n      <div class="right-side-controls">\n        <span class="netsim-button large-button" id="read-wire-button">',escape(b.readWire()),"</span>\n      </div>\n    </div>\n  "),buf.push("\n</div>\n")}();return buf.join("")};return function(a){return t(a,require("ejs").filters)}}()},{"./DataConverters":183,"./NetSimConstants":191,"./NetSimUtils":246,"./locale":260,ejs:491}],185:[function(a,b){"use strict";a("../utils");var c=a("./NetSimConstants"),d=a("./NetSimUtils"),e=a("./NetSimSlider"),f=b.exports=function(a,b,d){e.LogarithmicSlider.call(this,a,{onChange:b,onStop:d,value:1/0,min:4,max:128*c.BITS_PER_KILOBIT,upperBoundInfinite:!0}),this.render()};f.inherits(e.LogarithmicSlider),f.prototype.valueToLabel=function(a){return d.bitrateToLocalizedRoundedBitrate(a)}},{"../utils":318,"./NetSimConstants":191,"./NetSimSlider":240,"./NetSimUtils":246}],240:[function(a,b){"use strict";var c=a("../utils"),d=a("./NetSimSlider.html.ejs"),e=a("./locale"),f=0,g=100,h=b.exports=function(a,b){if(this.instanceID_=h.uniqueIDCounter,h.uniqueIDCounter++,this.rootDiv_=a,this.changeCallback_=c.valueOr(b.onChange,function(){}),this.stopCallback_=c.valueOr(b.onStop,function(){}),this.minValue_=c.valueOr(b.min,f),this.maxValue_=c.valueOr(b.max,g),this.value_=c.valueOr(b.value,this.minValue_),this.isUpperBoundInfinite_=c.valueOr(b.upperBoundInfinite,!1),this.isLowerBoundInfinite_=c.valueOr(b.lowerBoundInfinite,!1),this.step_=c.valueOr(b.step,1),0===this.step_)throw new Error("NetSimSlider does not support zero step values.");if(this.step_%1!==0)throw new Error("NetSimSlider does not support non-integer step values.  Use DecimalPrecisionSlider instead.");this.isDisabled_=c.valueOr(b.isDisabled,!1)};h.uniqueIDCounter=0,h.prototype.isStepNegative_=function(){return this.step_<0},h.prototype.render=function(){var a=this.isLowerBoundInfinite_?-1/0:this.minValue_,b=this.isUpperBoundInfinite_?1/0:this.maxValue_,c=this.valueToSliderPosition(this.isStepNegative_()?b:a),e=this.valueToSliderPosition(this.isStepNegative_()?a:b),f=$(d({instanceID:this.instanceID_,minValue:this.valueToShortLabel(this.isStepNegative_()?b:a),maxValue:this.valueToShortLabel(this.isStepNegative_()?a:b)}));this.rootDiv_.html(f),this.rootDiv_.find(".slider").slider({value:this.valueToSliderPosition(this.value_),min:c,max:e,step:Math.abs(this.step_),slide:this.onSliderValueChange_.bind(this),stop:this.onSliderStop_.bind(this),disabled:this.isDisabled_}),(this.isLowerBoundInfinite_||this.isUpperBoundInfinite_)&&this.rootDiv_.find(".slider-labels").addClass("wide-labels"),this.setLabelFromValue_(this.value_)},h.prototype.disable=function(){this.isDisabled_=!0,this.rootDiv_.find(".slider").slider("option","disabled",!0)},h.prototype.enable=function(){this.isDisabled_=!1,this.rootDiv_.find(".slider").slider("option","disabled",!1)},h.prototype.setValue=function(a){this.value_!==a&&(this.value_=a,this.rootDiv_.find(".slider").slider("option","value",this.valueToSliderPosition(a)),this.setLabelFromValue_(a))},h.prototype.onSliderValueChange_=function(a,b){var c=this.sliderPositionToValue(b.value);this.value_=c,this.setLabelFromValue_(c),this.changeCallback_(c)},h.prototype.onSliderStop_=function(){this.stopCallback_(this.value_)},h.prototype.setLabelFromValue_=function(a){this.rootDiv_.find(".slider-value").text(this.valueToLabel(a))},h.prototype.valueToSliderPosition=function(a){return this.isUpperBoundInfinite_&&a>this.maxValue_?this.valueToSliderPosition(this.maxValue_)+this.step_:this.isLowerBoundInfinite_&&a<this.minValue_?this.valueToSliderPosition(this.minValue_)-this.step_:Math.max(this.minValue_,Math.min(this.maxValue_,a))*(this.isStepNegative_()?-1:1)},h.prototype.sliderPositionToValue=function(a){return this.isStepNegative_()?a<this.valueToSliderPosition(this.maxValue_)?this.isUpperBoundInfinite_?1/0:this.maxValue_:a>this.valueToSliderPosition(this.minValue_)?this.isLowerBoundInfinite_?-1/0:this.minValue_:-a:a>this.valueToSliderPosition(this.maxValue_)?this.isUpperBoundInfinite_?1/0:this.maxValue_:a<this.valueToSliderPosition(this.minValue_)?this.isLowerBoundInfinite_?-1/0:this.minValue_:a},h.prototype.valueToLabel=function(a){return 1/0===a||a===-1/0?e.unlimited():a},h.prototype.valueToShortLabel=function(a){return this.valueToLabel(a)},h.DecimalPrecisionSlider=function(a,b){this.precision_=c.valueOr(b.precision,2),b.step=b.step*Math.pow(10,this.precision_),h.call(this,a,b)},h.DecimalPrecisionSlider.inherits(h),h.DecimalPrecisionSlider.prototype.valueToSliderPosition=function(a){return h.prototype.valueToSliderPosition.call(this,a)*Math.pow(10,this.precision_)},h.DecimalPrecisionSlider.prototype.sliderPositionToValue=function(a){return h.prototype.sliderPositionToValue.call(this,a)/Math.pow(10,this.precision_)};var i=1,j=2;h.LogarithmicSlider=function(a,b){b.min=c.valueOr(b.min,i),h.call(this,a,b),this.logBase_=c.valueOr(b.logBase,j),this.lnLogBase_=Math.log(this.logBase_),this.calculateSliderBounds_()},h.LogarithmicSlider.inherits(h),h.LogarithmicSlider.prototype.calculateSliderBounds_=function(){this.maxSliderPosition=this.logFloor_(this.maxValue_),Math.pow(this.logBase_,this.maxSliderPosition)!==this.maxValue_&&(this.maxSliderPosition+=this.step_),this.minSliderPosition=this.logFloor_(this.minValue_),this.infinitySliderPosition=this.maxSliderPosition+this.step_,this.negInfinitySliderPosition=this.minSliderPosition-this.step_},h.LogarithmicSlider.prototype.logFloor_=function(a){var b=1e-7;return Math.floor(b+Math.log(a)/this.lnLogBase_)},h.LogarithmicSlider.prototype.valueToSliderPosition=function(a){return a>this.maxValue_?this.isUpperBoundInfinite_?this.infinitySliderPosition:this.maxSliderPosition:a===this.maxValue_?this.maxSliderPosition:a<this.minValue_?this.isLowerBoundInfinite_?this.negInfinitySliderPosition:this.minSliderPosition:a===this.minValue_?this.minSliderPosition:Math.max(this.minSliderPosition,this.logFloor_(a))},h.LogarithmicSlider.prototype.sliderPositionToValue=function(a){return a>this.maxSliderPosition?this.isUpperBoundInfinite_?1/0:this.maxValue_:a===this.maxSliderPosition?this.maxValue_:a<this.minSliderPosition?this.isLowerBoundInfinite_?-1/0:this.minValue_:a===this.minSliderPosition?this.minValue_:Math.pow(this.logBase_,a)}},{"../utils":318,"./NetSimSlider.html.ejs":239,"./locale":260}],239:[function(require,module,exports){module.exports=function(){var t=function anonymous(locals,filters,escape){escape=escape||function(a){return String(a).replace(/&(?!\w+;)/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")};var buf=[];with(locals||{})!function(){buf.push('<div id="netsim_slider_',escape(instanceID),'" class="netsim-slider">\n  <div class="slider-inline-wrap">\n    <div class="slider"></div>\n    <div class="slider-labels">\n      <div class="max-value">',escape(maxValue),'</div>\n      <div class="min-value">',escape(minValue),'</div>\n      <div class="current-value">\n        <label><span class="slider-value"></span></label>\n      </div>\n    </div>\n  </div>\n</div>\n')}();return buf.join("")};return function(a){return t(a,require("ejs").filters)}}()},{ejs:491}],184:[function(a,b){"use strict";var c="/v3/netsim",d={create:function(a){return $.extend({},d,{shardID:a,baseUrl:c+"/"+a})},makeTableApi:function(a){return e.create(this.shardID,a)}},e={create:function(a,b){return $.extend({},e,{shardID:a,tableName:b,baseUrl:c+"/"+a+"/"+b})},allRows:function(a){$.ajax({url:this.baseUrl,type:"get",dataType:"json"}).done(function(b){a(null,b)}).fail(function(b,c,d){var e=new Error("status: "+c+"; error: "+d);a(e,null)})},allRowsFromID:function(a,b){$.ajax({url:this.baseUrl+"@"+a,type:"get",dataType:"json"}).done(function(a){b(null,a)}).fail(function(a,c,d){var e=new Error("status: "+c+"; error: "+d);b(e,null)})},createRow:function(a,b){$.ajax({url:this.baseUrl,type:"post",contentType:"application/json; charset=utf-8",data:JSON.stringify(a)}).done(function(a){b(null,a)}).fail(function(a,c,d){var e=new Error("status: "+c+"; error: "+d);b(e,void 0)})},deleteRow:function(a,b,c){c=c!==!1,$.ajax({url:this.baseUrl+"/"+a+"/delete",type:"post",dataType:"json",async:c}).done(function(){b(null,!0)}).fail(function(a,c,d){var e=new Error("status: "+c+"; error: "+d);b(e,!1)})},fetchRow:function(a,b){$.ajax({url:this.baseUrl+"/"+a,type:"get",dataType:"json"}).done(function(a){b(null,a)}).fail(function(a,c,d){var e=new Error("status: "+c+"; error: "+d);b(e,void 0)})},updateRow:function(a,b,c){$.ajax({url:this.baseUrl+"/"+a,type:"post",contentType:"application/json; charset=utf-8",data:JSON.stringify(b)}).done(function(a){c(null,a)}).fail(function(a,b,d){var e=new Error("status: "+b+"; error: "+d);c(e,!1)})}};b.exports={makeShardApi:function(a){return d.create(a)},makeTableApi:function(a,b){return e.create(a,b)}}},{}],183:[function(a,b,c){"use strict";a("../utils");var d=a("./NetSimUtils");if(!window.atob||!window.btoa){var e=a("Base64");window.btoa=window.btoa||e.btoa,window.atob=window.atob||e.atob}c.minifyAB=function(a){return a.replace(/[^AB]/gi,"").toUpperCase()},c.formatAB=function(a,b){return c.formatBinary(c.abToBinary(a),b).replace(/0/g,"A").replace(/1/g,"B")},c.minifyBinary=function(a){return a.replace(/[^01]/g,"")},c.formatBinary=function(a,b){if(0>=b)throw new RangeError("Parameter chunkSize must be greater than zero");for(var d=c.minifyBinary(a),e=[],f=0;f<d.length;f+=b)e.push(d.substr(f,b));return e.join(" ")},c.minifyHex=function(a){return a.replace(/[^0-9A-F]/gi,"").toUpperCase()},c.minifyDecimal=function(a){return a.replace(/(^\s+|\s+$|[^0-9\s])/g,"").replace(/\s+/g," ")},c.formatHex=function(a,b){if(0>=b)throw new RangeError("Parameter chunkSize must be greater than zero");if(b%4!==0)return a;for(var d=b/4,e=c.minifyHex(a),f=[],g=0;g<e.length;g+=d)f.push(e.substr(g,d));return f.join(" ")},c.alignDecimal=function(a){if(""===a.replace(/\D/g,""))return"";var b=c.minifyDecimal(a).split(/\s+/),d=b.reduce(function(a,b){return b.length>a?b.length:a},0),e="0".repeat(d);return b.map(function(a){return(e+a).slice(-d)}).join(" ")},c.abToInt=function(a){return c.binaryToInt(c.abToBinary(a))},c.intToAB=function(a,b){return c.binaryToAB(c.intToBinary(a,b))},c.abToBinary=function(a){return c.minifyAB(a).replace(/A/g,"0").replace(/B/g,"1")},c.binaryToAB=function(a){return c.minifyBinary(a).replace(/0/g,"A").replace(/1/g,"B")},c.binaryToInt=function(a){return parseInt(c.minifyBinary(a),2)};var f=function(a,b,c){if(0>=c)throw new RangeError("Output width must be greater than zero");return d.zeroPadLeft(a.toString(b),c)};c.intToBinary=function(a,b){return f(a,2,b)},c.hexToInt=function(a){return parseInt(c.minifyHex(a),16)},c.intToHex=function(a,b){return f(a,16,b).toUpperCase()},c.hexToBinary=function(a){for(var b=c.minifyHex(a),d="",e=0;e<b.length;e++)d+=c.intToBinary(c.hexToInt(b.substr(e,1)),4);return d},c.binaryToHex=function(a){for(var b,e=4,f=[],g=c.minifyBinary(a),h=0;h<g.length;h+=e)b=d.zeroPadRight(g.substr(h,e),e),f.push(c.intToHex(c.binaryToInt(b),1));return f.join("")},c.decimalToBinary=function(a,b){return""===a.replace(/\D/g,"")?"":c.minifyDecimal(a).split(/\s+/).map(function(a){return c.intToBinary(parseInt(a,10),b)}).join("")},c.binaryToDecimal=function(a,b){for(var e,f=[],g=c.minifyBinary(a),h=0;h<g.length;h+=b)e=d.zeroPadRight(g.substr(h,b),b),f.push(c.binaryToInt(e));return f.join(" ")},c.asciiToBinary=function(a,b){for(var d=[],e=0;e<a.length;e++)d.push(c.intToBinary(a.charCodeAt(e),b));return d.join("")},c.binaryToAscii=function(a,b){if(0>=b)throw new RangeError("Parameter byteSize must be greater than zero");for(var e,f=[],g=c.minifyBinary(a),h=0;h<g.length;h+=b)e=d.zeroPadRight(g.substr(h,b),b),f.push(String.fromCharCode(c.binaryToInt(e)));return f.join("")},c.binaryToBase64=function(a){if(/^[01]*$/.test(a)===!1)throw new TypeError('argument binaryString to method binaryToBase64must be a binary string; received "'+a+'" instead');var b=8*Math.ceil(a.length/8),e=d.zeroPadRight(a,b),f=window.btoa(c.binaryToAscii(e,8));return{string:f,len:a.length}},c.base64ToBinary=function(a,b){return c.asciiToBinary(window.atob(a),8).substr(0,b)},c.binaryToAddressString=function(a,b){var d=c.minifyBinary(a);if(0===d.length)return"";var e=0;return b.split(/(\D+)/).map(function(a){var b=parseInt(a,10);if(isNaN(b))return a;var f=d.substr(e,b),g=f.length>0?c.binaryToInt(f):0;return e+=b,g.toString()}).join("")},c.addressStringToBinary=function(a,b){if(0===a.length)return"";for(var d,e=a.toString().split(/\D+/).map(function(a){return parseInt(a,10)}).filter(function(a){return!isNaN(a)}),f=b.split(/\D+/).map(function(a){return parseInt(a,10)}).filter(function(a){return!isNaN(a)}),g="",h=0;h<f.length;h++)d=h<e.length?e[h]:0,g+=c.intToBinary(d,f[h]);return g},c.formatBinaryForAddressHeader=function(a,b){var d=c.minifyBinary(a),e=b.split(/\D+/).map(function(a){return parseInt(a,10)}).filter(function(a){return!isNaN(a)}),f=[],g=0;e.forEach(function(a){var b=d.substr(g,a);b.length>0&&f.push(b),g+=a});var h=d.substr(g);return h.length>0&&f.push(h),f.join(" ")}},{"../utils":318,"./NetSimUtils":246,Base64:321}],321:[function(a,b,c){!function(){function a(a){this.message=a}var b="undefined"!=typeof c?c:this,d="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";a.prototype=new Error,a.prototype.name="InvalidCharacterError",b.btoa||(b.btoa=function(b){for(var c,e,f=String(b),g=0,h=d,i="";f.charAt(0|g)||(h="=",g%1);i+=h.charAt(63&c>>8-g%1*8)){if(e=f.charCodeAt(g+=.75),e>255)throw new a("'btoa' failed: The string to be encoded contains characters outside of the Latin1 range.");c=c<<8|e}return i}),b.atob||(b.atob=function(b){var c=String(b).replace(/=+$/,"");if(c.length%4==1)throw new a("'atob' failed: The string to be decoded is not correctly encoded.");for(var e,f,g=0,h=0,i="";f=c.charAt(h++);~f&&(e=g%4?64*e+f:f,g++%4)?i+=String.fromCharCode(255&e>>(-2*g&6)):0)f=d.indexOf(f);return i})}()},{}],246:[function(a,b,c){"use strict";var d=a("../utils"),e=d.getLodash(),f=a("./locale"),g=a("./NetSimConstants"),h=a("./NetSimLogger").getSingleton(),i=g.EncodingType;c.jQuerySvgElement=function(a){var b=$(document.createElementNS("http://www.w3.org/2000/svg",a));return b.addClass=function(a){var c=b.attr("class");return c?b.hasClass(a)||b.attr("class",c+" "+a):b.attr("class",a),b},b.removeClass=function(a){var c=b.attr("class");if(c){var d=c.split(/\s+/g).filter(function(b){return b!==a}).join(" ");b.attr("class",d)}return b},b.hasClass=function(a){var c=b.attr("class");return c&&c.split(/\s+/g).some(function(b){return b===a})},b.toggleClass=function(a,c){return c=d.valueOr(c,!b.hasClass(a)),c?b.addClass(a):b.removeClass(a),b},b},c.shouldShowTab=function(a,b){return a.showTabs.indexOf(b)>-1},c.getEncodingLabel=function(a){return a===i.ASCII?f.ascii():a===i.DECIMAL?f.decimal():a===i.HEXADECIMAL?f.hex():a===i.BINARY?f.binary():a===i.A_AND_B?f.a_and_b():""},c.forEachEnumValue=function(a,b){for(var c in a)a.hasOwnProperty(c)&&b(a[c])};var j=[{jsVal:1/0,jsonVal:"Infinity"},{jsVal:-1/0,jsonVal:"-Infinity"},{jsVal:0/0,jsonVal:"NaN"},{jsVal:void 0,jsonVal:"undefined"}],k=function(a){return a!==a};c.serializeNumber=function(a){var b=e.find(j,function(b){return b.jsVal===a||k(b.jsVal)&&k(a)});return b?b.jsonVal:a},c.deserializeNumber=function(a){var b=e.find(j,function(b){return b.jsonVal===a});return b?b.jsVal:a},c.scrubHeaderSpecForBackwardsCompatibility=function(a){var b=!1,c=[];return a.forEach(function(a){"string"==typeof a?c.push(a):null!==a&&"object"==typeof a&&(c.push(a.key),b=!0)}),b&&h.warn("Converting old header specification format to new format. This level should be updated to use the new format."),c},c.scrubLevelConfiguration_=function(a){var b=e.clone(a,!0);return b.routerExpectsPacketHeader=c.scrubHeaderSpecForBackwardsCompatibility(b.routerExpectsPacketHeader),b.clientInitialPacketHeader=c.scrubHeaderSpecForBackwardsCompatibility(b.clientInitialPacketHeader),b.addressFormat=b.addressFormat.toString(),b.defaultPacketSizeLimit=c.deserializeNumber(b.defaultPacketSizeLimit),1/0===b.defaultPacketSizeLimit&&(b.defaultPacketSizeLimit=8192),b.defaultBitRateBitsPerSecond=c.deserializeNumber(b.defaultBitRateBitsPerSecond),b.defaultChunkSizeBits=c.deserializeNumber(b.defaultChunkSizeBits),b.defaultRouterBandwidth=c.deserializeNumber(b.defaultRouterBandwidth),b.defaultRouterMemory=c.deserializeNumber(b.defaultRouterMemory),Object.keys(b).filter(function(a){return!/_/.test(a)}).forEach(function(a){var c=j.some(function(c){return b[a]===c.jsonVal});c&&h.warn("Level option '"+a+"' has unconverted string value '"+b[a]+"'")}),b},c.bitsToLocalizedRoundedBytesize=function(a){if(1/0===a)return f.unlimited();var b=Math.floor(a/g.BITS_PER_GIGABYTE);if(b>0)return f.x_GBytes({x:b});var c=Math.floor(a/g.BITS_PER_MEGABYTE);if(c>0)return f.x_MBytes({x:c});var d=Math.floor(a/g.BITS_PER_KILOBYTE);if(d>0)return f.x_KBytes({x:d});var e=Math.floor(a/g.BITS_PER_BYTE);return e>0?f.x_Bytes({x:e}):f.x_bits({x:a})},c.bitrateToLocalizedRoundedBitrate=function(a){if(1/0===a)return f.unlimited();var b=Math.floor(a/g.BITS_PER_GIGABIT);if(b>0)return f.x_Gbps({x:b});var c=Math.floor(a/g.BITS_PER_MEGABIT);if(c>0)return f.x_Mbps({x:c});var d=Math.floor(a/g.BITS_PER_KILOBIT);if(d>0)return f.x_Kbps({x:d});var e=Math.floor(100*a)/100;return f.x_bps({x:e})},c.zeroPadLeft=function(a,b){var c="0".repeat(b);return(c+a).slice(-b)},c.zeroPadRight=function(a,b){var c="0".repeat(b);return(a+c).substr(0,b)}},{"../utils":318,"./NetSimConstants":191,"./NetSimLogger":210,"./locale":260}],260:[function(a,b){b.exports=window.blockly.netsim_locale},{}],210:[function(a,b){"use strict";var c=b.exports=function(a,b){this.outputConsole_=a,this.log_=function(){},this.info=function(){},this.warn=function(){},this.error=function(){},this.setVerbosity(void 0===b?d.VERBOSE:b)},d={NONE:0,ERROR:1,WARN:2,INFO:3,VERBOSE:4};c.LogLevel=d;var e;c.getSingleton=function(){return void 0===e&&(e=new c(console,d.WARN)),e},c.prototype.setVerbosity=function(a){this.log_=this.outputConsole_&&this.outputConsole_.log?Function.prototype.bind.call(this.outputConsole_.log,this.outputConsole_):function(){},this.info=a>=d.INFO?this.outputConsole_&&this.outputConsole_.info?Function.prototype.bind.call(this.outputConsole_.info,this.outputConsole_):this.log_:function(){},this.warn=a>=d.WARN?this.outputConsole_&&this.outputConsole_.warn?Function.prototype.bind.call(this.outputConsole_.warn,this.outputConsole_):this.log_:function(){},this.error=a>=d.ERROR?this.outputConsole_&&this.outputConsole_.error?Function.prototype.bind.call(this.outputConsole_.error,this.outputConsole_):this.log_:function(){}},c.prototype.log=function(a,b){switch(void 0===b&&(b=d.INFO),b){case d.ERROR:this.error(a);break;case d.WARN:this.warn(a);break;case d.INFO:this.info(a);break;default:this.log_(a)}}},{}],191:[function(a,b,c){"use strict";c.BITS_PER_NIBBLE=4,c.BITS_PER_BYTE=8,c.BITS_PER_KILOBYTE=1024*c.BITS_PER_BYTE,c.BITS_PER_MEGABYTE=1024*c.BITS_PER_KILOBYTE,c.BITS_PER_GIGABYTE=1024*c.BITS_PER_MEGABYTE,c.BITS_PER_KILOBIT=1024,c.BITS_PER_MEGABIT=1024*c.BITS_PER_KILOBIT,c.BITS_PER_GIGABIT=1024*c.BITS_PER_MEGABIT,c.NodeType={CLIENT:"client",ROUTER:"router"},c.MessageGranularity={PACKETS:"packets",BITS:"bits"},c.DnsMode={NONE:"none",MANUAL:"manual",AUTOMATIC:"automatic"},c.EncodingType={ASCII:"ascii",DECIMAL:"decimal",HEXADECIMAL:"hexadecimal",BINARY:"binary",A_AND_B:"a_and_b"},c.NetSimTabType={INSTRUCTIONS:"instructions",MY_DEVICE:"my_device",ROUTER:"router",DNS:"dns"},c.PacketUIColumnType={ENCODING_LABEL:"encodingLabel",TO_ADDRESS:"toAddress",FROM_ADDRESS:"fromAddress",PACKET_INFO:"packetInfo",MESSAGE:"message"}},{}],182:[function(a,b){"use strict";var c=b.exports=function(){this.isReady=!1,this.whenReadyCallbacks_=[],this.id=void 0,this.name=""};c.currentUser_=null,c.getCurrentUser=function(){return c.currentUser_||(c.currentUser_=new c,$.ajax({url:"/v2/user",type:"get",dataType:"json",success:function(a){c.currentUser_.initialize(a)},error:function(){c.currentUser_.initialize({isSignedIn:!1})}})),c.currentUser_},c.prototype.initialize=function(a){this.id=a.id,this.name=a.name,this.isSignedIn=a.isSignedIn!==!1,this.isReady=!0,this.whenReadyCallbacks_.forEach(function(a){a(this)}.bind(this)),this.whenReadyCallbacks_.length=0},c.prototype.whenReady=function(a){this.isReady?a(this):this.whenReadyCallbacks_.push(a)}},{}],181:[function(a,b,c){"use strict";c.validateRequired=function(a,b,c){if(void 0===a)throw new TypeError(b+" is required.");if("function"==typeof c&&!c(a))throw new TypeError("Cannot set "+b+" to "+a+".");return a},c.extendOptionsObject=function(a){var b=void 0===a,c="object"==typeof a&&null!==a;if(!b&&!c)throw new TypeError("Options object must be an object.");if(a&&a.hasOwnProperty("get"))throw new Error('Cannot extend options; property "get" would be overwritten.');return $.extend({},a,{get:function(b,c,d){if(!a||void 0===a[b])return d;if("function"==typeof c&&!c(a[b]))throw new TypeError("Cannot set "+b+" to "+a[b]+".");return a[b]}})},c.isPositiveNoninfiniteNumber=function(a){return"number"==typeof a&&!isNaN(a)&&a>=0&&1/0!==a},c.isBoolean=function(a){return"boolean"==typeof a},c.isString=function(a){return"string"==typeof a}},{}],4:[function(a,b){"use strict";var c=a("./ObservableEvent"),d=window.performance&&window.performance.now?window.performance.now.bind(window.performance):Date.now,e=10,f=1e3/e,g=30,h=1e3/g,i=b.exports=function(){this.enabled=!1,this.tickClock=new i.Clock,this.renderClock=new i.Clock,this.tick_=this.buildTickMethod_(),this.render_=this.buildRenderMethod_(),this.tick=new c,this.render=new c};i.Clock=function(){this.time=d(),this.deltaTime=0},i.prototype.buildTickMethod_=function(){var a,b=this;return a=function(){if(b.enabled){var c=d();b.tickClock.deltaTime=c-b.tickClock.time,b.tickClock.time=c,b.tick.notifyObservers(b.tickClock),setTimeout(a,f-b.tickClock.deltaTime)}}},i.prototype.buildRenderMethod_=function(){var a,b=this;return a=window.requestAnimationFrame?function(c){b.enabled&&(b.renderClock.deltaTime=c-b.renderClock.time,b.renderClock.time=c,b.render.notifyObservers(b.renderClock),requestAnimationFrame(a))}:function(){if(b.enabled){var c=d();b.renderClock.deltaTime=c-b.renderClock.time,b.renderClock.time=c,b.render.notifyObservers(b.renderClock),setTimeout(a,h-b.renderClock.deltaTime)}}},i.prototype.begin=function(){this.enabled=!0,this.tickClock.time=d(),this.renderClock.time=d(),this.tick_(this.tickClock.time),this.render_(this.renderClock.time)},i.prototype.end=function(){this.enabled=!1}},{"./ObservableEvent":2}],2:[function(a,b){"use strict";var c=b.exports=function(){this.observerList_=[]};c.prototype.register=function(a){var b={toCall:a};return Object.freeze(b),this.observerList_.push(b),b},c.prototype.unregister=function(a){for(var b=0;b<this.observerList_.length;b++)if(a===this.observerList_[b])return this.observerList_.splice(b,1),!0;return!1},c.prototype.notifyObservers=function(){var a=Array.prototype.slice.call(arguments,0);this.observerList_.forEach(function(b){b.toCall.apply(void 0,a)})}},{}]},{},[261]);