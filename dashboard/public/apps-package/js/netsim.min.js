require=function a(b,c,d){function e(g,h){if(!c[g]){if(!b[g]){var i="function"==typeof require&&require;if(!h&&i)return i(g,!0);if(f)return f(g,!0);var j=new Error("Cannot find module '"+g+"'");throw j.code="MODULE_NOT_FOUND",j}var k=c[g]={exports:{}};b[g][0].call(k.exports,function(a){var c=b[g][1][a];return e(c?c:a)},k,k.exports,a,b,c,d)}return c[g].exports}for(var f="function"==typeof require&&require,g=0;g<d.length;g++)e(d[g]);return e}({161:[function(a){var b=a("../appMain"),c=a("../StudioApp").singleton,d=a("./netsim"),e=a("./levels"),f=a("./skins");window.netsimMain=function(a){a.skinsModule=f,a.isEditorless=!0;var g=new d;g.injectStudioApp(c),b(g,e,a)}},{"../StudioApp":4,"../appMain":5,"./levels":160,"./netsim":162,"./skins":165}],165:[function(a,b,c){var d=a("../skins");c.load=function(a,b){var c=d.load(a,b);return c}},{"../skins":168}],162:[function(a,b){"use strict";var c=a("./page.html"),d=a("./NetSimConnection"),e=a("./DashboardUser"),f=a("./NetSimLobby"),g=a("./NetSimTabsComponent"),h=a("./NetSimSendWidget"),i=a("./NetSimLogWidget"),j=a("../RunLoop"),k=b.exports=function(){this.skin=null,this.level=null,this.heading=0,this.currentUser_=e.getCurrentUser(),this.connection_=null,this.myConnectedRouter_=null,this.runLoop_=new j,this.encodingMode_="binary",this.chunkSize_=8,this.dnsMode_="none"};k.prototype.injectStudioApp=function(a){this.studioApp_=a},k.prototype.attachHandlers_=function(){},k.prototype.init=function(b){if(!this.studioApp_)throw new Error("NetSim requires a StudioApp");this.skin=b.skin,this.level=b.level,b.html=c({assetUrl:this.studioApp_.assetUrl,data:{visualization:"",localeDirection:this.studioApp_.localeDirection(),controls:a("./controls.html")({assetUrl:this.studioApp_.assetUrl})},hideRunButton:!0}),b.enableShowCode=!1,b.loadAudio=this.loadAudio_.bind(this),this.studioApp_.configureDom=this.configureDomOverride_.bind(this.studioApp_),this.studioApp_.onResize=this.onResizeOverride_.bind(this.studioApp_),this.studioApp_.init(b),this.attachHandlers_(),this.currentUser_.whenReady(function(){this.initWithUserName_(this.currentUser_)}.bind(this)),this.runLoop_.begin()},k.prototype.getOverrideShardID=function(){var a=location.search.split("?");if(1===a.length)return void 0;var b;return a[1].split("&").forEach(function(a){var c=a.split("=");c.length>1&&"s"===c[0]&&(b=c[1])}),b},k.prototype.initWithUserName_=function(a){this.mainContainer_=$("#netsim"),this.receivedMessageLog_=i.createWithin(document.getElementById("netsim_received"),"Received Messages"),this.sentMessageLog_=i.createWithin(document.getElementById("netsim_sent"),"Sent Messages"),this.connection_=new d(window,this.sentMessageLog_,this.receivedMessageLog_),this.connection_.attachToRunLoop(this.runLoop_),this.connection_.statusChanges.register(this.refresh_.bind(this)),this.connection_.shardChange.register(this.onShardChange_.bind(this));var b=document.getElementById("netsim_lobby_container");this.lobbyControl_=f.createWithin(b,this.connection_,a,this.getOverrideShardID()),this.tabs_=new g($("#netsim_tabs"),this.setChunkSize.bind(this),this.changeEncoding.bind(this),this.changeRemoteDnsMode.bind(this),this.becomeDnsNode.bind(this));var c=document.getElementById("netsim_send");this.sendWidget_=h.createWithin(c,this.connection_),this.changeEncoding(this.encodingMode_),this.setChunkSize(this.chunkSize_),this.setDnsMode(this.dnsMode_),this.refresh_()},k.prototype.refresh_=function(){this.connection_.isConnectedToRouter()?this.mainContainer_.show():this.mainContainer_.hide()},k.prototype.changeEncoding=function(a){this.encodingMode_=a,this.tabs_.setEncoding(a),this.receivedMessageLog_.setEncoding(a),this.sentMessageLog_.setEncoding(a),this.sendWidget_.setEncoding(a)},k.prototype.setChunkSize=function(a){this.chunkSize_=a,this.tabs_.setChunkSize(a),this.receivedMessageLog_.setChunkSize(a),this.sentMessageLog_.setChunkSize(a),this.sendWidget_.setChunkSize(a)},k.prototype.setDnsMode=function(a){this.dnsMode_=a,this.tabs_.setDnsMode(a)},k.prototype.changeRemoteDnsMode=function(a){if(this.setDnsMode(a),this.myConnectedRouter_){var b=this.myConnectedRouter_;b.dnsMode=a,b.update()}},k.prototype.setIsDnsNode=function(a){this.tabs_.setIsDnsNode(a),this.myConnectedRouter_&&this.setDnsTableContents(this.myConnectedRouter_.getAddressTable())},k.prototype.becomeDnsNode=function(){if(this.setIsDnsNode(!0),this.connection_&&this.connection_.myNode&&this.connection_.myNode.myRouter){var a=this.connection_.myNode,b=a.myRouter;b.dnsNodeID=a.entityID,b.update()}},k.prototype.setDnsTableContents=function(a){this.tabs_.setDnsTableContents(a)},k.prototype.setRouterLogData=function(a){this.tabs_.setRouterLogData(a)},k.prototype.loadAudio_=function(){},k.prototype.configureDomOverride_=function(a){var b=document.getElementById(a.containerId);b.innerHTML=a.html},k.prototype.onResizeOverride_=function(){var a=document.getElementById("appcontainer"),b=a.parentNode,c=window.getComputedStyle(b),d=parseInt(c.width,10);a.style.top=b.offsetTop+"px",a.style.width=d+"px"},k.prototype.onShardChange_=function(a,b){b&&b.routerChange.register(this.onRouterChange_.bind(this))},k.prototype.onRouterChange_=function(a,b){void 0!==this.routerStateChangeKey&&(this.myConnectedRouter_.stateChange.unregister(this.routerStateChangeKey),this.routerStateChangeKey=void 0),void 0!==this.routerWireChangeKey&&(this.myConnectedRouter_.wiresChange.unregister(this.routerWireChangeKey),this.routerWireChangeKey=void 0),void 0!==this.routerLogChangeKey&&(this.myConnectedRouter_.logChange.unregister(this.routerLogChangeKey),this.routerLogChangeKey=void 0),this.myConnectedRouter_=b,b&&(this.setDnsMode(b.dnsMode),this.routerStateChangeKey=b.stateChange.register(this.onRouterStateChange_.bind(this)),this.routerWireChangeKey=b.wiresChange.register(this.onRouterWiresChange_.bind(this)),this.routerLogChangeKey=b.logChange.register(this.onRouterLogChange_.bind(this)))},k.prototype.onRouterStateChange_=function(a){var b={};this.connection_&&this.connection_.myNode&&(b=this.connection_.myNode),this.setDnsMode(a.dnsMode),this.setIsDnsNode("manual"===a.dnsMode&&a.dnsNodeID===b.entityID)},k.prototype.onRouterWiresChange_=function(){this.myConnectedRouter_&&this.setDnsTableContents(this.myConnectedRouter_.getAddressTable())},k.prototype.onRouterLogChange_=function(){this.myConnectedRouter_&&this.setRouterLogData(this.myConnectedRouter_.getLog())}},{"../RunLoop":3,"./DashboardUser":115,"./NetSimConnection":119,"./NetSimLobby":133,"./NetSimLogWidget":138,"./NetSimSendWidget":150,"./NetSimTabsComponent":155,"./controls.html":158,"./page.html":164}],164:[function(require,module,exports){module.exports=function(){var t=function anonymous(locals,filters,escape){escape=escape||function(a){return String(a).replace(/&(?!\w+;)/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")};var buf=[];with(locals||{})!function(){buf.push("");{var a=require("../../locale/current/common");require("../../locale/current/netsim")}buf.push('\n\n<div id="rotateContainer" style="background-image: url(',escape(assetUrl("media/mobile_tutorial_turnphone.png")),')">\n  <div id="rotateText">\n    <p>',escape(a.rotateText()),"<br>",escape(a.orientationLock()),"</p>\n  </div>\n</div>\n\n");var b=function(){buf.push('  <div id="bubble" class="clearfix">\n    <table id="prompt-table">\n      <tr>\n        <td id="prompt-icon-cell">\n          <img id="prompt-icon"/>\n        </td>\n        <td id="prompt-cell">\n          <p id="prompt">\n          </p>\n        </td>\n      </tr>\n    </table>\n    <div id="ani-gif-preview-wrapper">\n      <div id="ani-gif-preview">\n        <img id="play-button" src="',escape(assetUrl("media/play-circle.png")),'"/>\n      </div>\n    </div>\n  </div>\n')};buf.push("\n");var c=function(a){buf.push("  "),a&&buf.push('    <div id="helpArea">\n      ',a,"\n    </div>\n  "),buf.push("")};buf.push('\n<div id="appcontainer">\n  <div id="netsim_lobby_container"></div>\n  <div id="netsim">\n    <div id="netsim_rightcol">\n      <div id="netsim_vizualization">\n        <img src="',escape(assetUrl("media/netsim/netsim_viz_mock.png")),'" />\n      </div>\n      <div id="netsim_tabs"></div>\n    </div>\n    <div id="netsim_leftcol">\n      <div id="netsim_received"></div>\n      <div id="netsim_sent"></div>\n      <div id="netsim_send"></div>\n    </div>\n\n  </div>\n  <div id="footers" dir="',escape(data.localeDirection),'">\n    '),b(),buf.push("\n    "),c(data.helpHtml),buf.push('\n  </div>\n</div>\n\n<div class="clear"></div>\n')}();return buf.join("")};return function(a){return t(a,require("ejs").filters)}}()},{"../../locale/current/common":219,"../../locale/current/netsim":224,ejs:235}],160:[function(a,b){var c=(a("../../locale/current/netsim"),b.exports={});c.netsim_demo={freePlay:!0}},{"../../locale/current/netsim":224}],224:[function(a,b){b.exports=window.blockly.appLocale},{}],158:[function(require,module,exports){module.exports=function(){var t=function anonymous(locals,filters,escape){escape=escape||function(a){return String(a).replace(/&(?!\w+;)/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")};var buf=[];with(locals||{})!function(){buf.push('<div id="slider-cell">\n  <img id="spinner" style="visibility: hidden;" src="',escape(assetUrl("media/turtle/loading.gif")),'" height=15 width=15>\n</div>\n')}();return buf.join("")};return function(a){return t(a,require("ejs").filters)}}()},{ejs:235}],155:[function(a,b){"use strict";var c=a("./NetSimTabsComponent.html"),d=a("./NetSimRouterTab"),e=a("./NetSimMyDeviceTab"),f=a("./NetSimDnsTab"),g=b.exports=function(a,b,c,d,e){this.rootDiv_=a,this.chunkSizeChangeCallback_=b,this.encodingChangeCallback_=c,this.dnsModeChangeCallback_=d,this.becomeDnsCallback_=e,this.routerTab_=null,this.myDeviceTab_=null,this.dnsTab_=null,this.render()};g.prototype.render=function(){var a=c({}),b=$(a);this.rootDiv_.html(b),this.rootDiv_.find(".netsim_tabs").tabs(),this.routerTab_=new d(this.rootDiv_.find("#tab_router")),this.myDeviceTab_=new e(this.rootDiv_.find("#tab_my_device"),this.chunkSizeChangeCallback_,this.encodingChangeCallback_),this.dnsTab_=new f(this.rootDiv_.find("#tab_dns"),this.dnsModeChangeCallback_,this.becomeDnsCallback_)},g.prototype.setChunkSize=function(a){this.myDeviceTab_.setChunkSize(a)},g.prototype.setEncoding=function(a){this.myDeviceTab_.setEncoding(a)},g.prototype.setDnsMode=function(a){this.dnsTab_.setDnsMode(a)},g.prototype.setIsDnsNode=function(a){this.dnsTab_.setIsDnsNode(a)},g.prototype.setDnsTableContents=function(a){this.dnsTab_.setDnsTableContents(a)},g.prototype.setRouterLogData=function(a){this.routerTab_.setRouterLogData(a)}},{"./NetSimDnsTab":125,"./NetSimMyDeviceTab":142,"./NetSimRouterTab":148,"./NetSimTabsComponent.html":154}],154:[function(require,module,exports){module.exports=function(){var t=function anonymous(locals,filters,escape){escape=escape||function(a){return String(a).replace(/&(?!\w+;)/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")};var buf=[];with(locals||{})!function(){buf.push('<div class="netsim_tabs">\n  <ul>\n    <li><a href="#tab_instructions">Instructions</a></li>\n    <li><a href="#tab_my_device">My Device</a></li>\n    <li><a href="#tab_router">Router</a></li>\n    <li><a href="#tab_dns">DNS</a></li>\n  </ul>\n  <div id="tab_instructions">\n    <p>In this activity, you and your group will still be acting as\n    nodes connected to a router.  But this time, the addresses of the\n    nodes are not visible to you.  Pick one member of your group to be\n    the DNS node.  To get the addresses of the other nodes, you must\n    send a message to the DNS node asking for the address of a particular\n    hostname.</p>\n    <p>If you are the DNS node: Go to the DNS tab and click "Take over\n    as DNS."</p>\n  </div>\n  <div id="tab_my_device"></div>\n  <div id="tab_router"></div>\n  <div id="tab_dns"></div>\n</div>')}();return buf.join("")};return function(a){return t(a,require("ejs").filters)}}()},{ejs:235}],150:[function(a,b){"use strict";var c=a("./NetSimSendWidget.html"),d=a("../constants").KeyCodes,e=a("./NetSimEncodingControl"),f=a("./PacketEncoder"),g=a("./dataConverters"),h=g.minifyBinary,i=g.formatBinary,j=g.formatHex,k=g.alignDecimal,l=g.binaryToInt,m=g.intToBinary,n=g.hexToInt,o=g.intToHex,p=g.hexToBinary,q=g.binaryToHex,r=g.decimalToBinary,s=g.binaryToDecimal,t=g.asciiToBinary,u=g.binaryToAscii,v=b.exports=function(a){this.connection_=a,this.connection_.statusChanges.register(this.onConnectionStatusChange_.bind(this)),this.toAddress=0,this.fromAddress=0,this.packetIndex=1,this.packetCount=1,this.message="",this.currentChunkSize_=8};v.createWithin=function(a,b){var d=new v(b);return a.innerHTML=c({}),d.bindElements_(),d.render(),d};var w=function(a){var b=$(a.target);b.hasClass("watermark")&&(b.val(""),b.removeClass("watermark"))},x=function(a){return function(b){if(b.metaKey||b.ctrlKey)return!0;if(b.which<d.SPACE||b.which>=d.DELETE)return!0;var c=String.fromCharCode(b.which);return a.test(c)?void 0:(b.preventDefault(),!1)}};v.prototype.makeKeyupHandler=function(a,b){return function(c){var d=b(c.target.value);isNaN(d)||(this[a]=d,this.render(c.target))}.bind(this)},v.prototype.makeBlurHandler=function(a,b){return function(c){var d=b(c.target.value);isNaN(d)&&(d=b("0")),this[a]=d,this.render()}.bind(this)},v.prototype.bindElements_=function(){var a=$("#netsim_send_widget"),b=["toAddress","fromAddress","packetIndex","packetCount"],c=[{typeName:"binary",shortNumberAllowedCharacters:/[01]/,shortNumberConversion:l,messageAllowedCharacters:/[01\s]/,messageConversion:h},{typeName:"hexadecimal",shortNumberAllowedCharacters:/[0-9a-f]/i,shortNumberConversion:n,messageAllowedCharacters:/[0-9a-f\s]/i,messageConversion:p},{typeName:"decimal",shortNumberAllowedCharacters:/[0-9]/,shortNumberConversion:parseInt,messageAllowedCharacters:/[0-9\s]/,messageConversion:function(a){return r(a,this.currentChunkSize_)}.bind(this)},{typeName:"ascii",shortNumberAllowedCharacters:/[0-9]/,shortNumberConversion:parseInt,messageAllowedCharacters:/./,messageConversion:function(a){return t(a,this.currentChunkSize_)}.bind(this)}];c.forEach(function(c){var d=a.find("tr."+c.typeName),e=c.typeName+"UI";this[e]={};var f=this[e];b.forEach(function(a){f[a]=d.find("input."+a),f[a].keypress(x(c.shortNumberAllowedCharacters)),f[a].keyup(this.makeKeyupHandler(a,c.shortNumberConversion)),f[a].blur(this.makeBlurHandler(a,c.shortNumberConversion))},this),f.message=d.find("textarea.message"),f.message.focus(w),f.message.keypress(x(c.messageAllowedCharacters)),f.message.keyup(this.makeKeyupHandler("message",c.messageConversion)),f.message.blur(this.makeBlurHandler("message",c.messageConversion))},this),this.bitCounter=a.find(".bit_counter"),this.sendButton_=a.find("#send_button"),this.sendButton_.click(this.onSendButtonPress_.bind(this))},v.prototype.onConnectionStatusChange_=function(){this.fromAddress=this.connection_.myNode&&this.connection_.myNode.myWire?this.connection_.myNode.myWire.localAddress:0,this.render()},v.prototype.render=function(a){var b=this.currentChunkSize_,c=[];["toAddress","fromAddress","packetIndex","packetCount"].forEach(function(a){c.push({inputElement:this.binaryUI[a],newValue:m(this[a],4)}),c.push({inputElement:this.hexadecimalUI[a],newValue:o(this[a],1)}),c.push({inputElement:this.decimalUI[a],newValue:this[a].toString(10)}),c.push({inputElement:this.asciiUI[a],newValue:this[a].toString(10)})},this),c.push({inputElement:this.binaryUI.message,newValue:i(this.message,b),watermark:"Binary"}),c.push({inputElement:this.hexadecimalUI.message,newValue:j(q(this.message),b),watermark:"Hexadecimal"}),c.push({inputElement:this.decimalUI.message,newValue:k(s(this.message,b)),watermark:"Decimal"}),c.push({inputElement:this.asciiUI.message,newValue:u(this.message,b),watermark:"ASCII"}),c.forEach(function(b){b.inputElement[0]!==a&&(b.watermark&&""===b.newValue?(b.inputElement.val(b.watermark),b.inputElement.addClass("watermark")):(b.inputElement.val(b.newValue),b.inputElement.removeClass("watermark")))});var d=this.getPacketBinary_();this.bitCounter.html(d.length+"/Infinity bits"),$("#netsim_send_widget").find("th.packetInfo, td.packetInfo").hide()},v.prototype.onSendButtonPress_=function(){var a=this.connection_.myNode;a&&(this.disableEverything(),a.sendMessage(this.getPacketBinary_(),function(){var a=$("#netsim_send_widget").find("tr.binary").find("textarea");a.val(""),a.blur(),this.enableEverything()}.bind(this)))},v.prototype.disableEverything=function(){$("#netsim_send_widget").find("input, textarea").prop("disabled",!0)},v.prototype.enableEverything=function(){$("#netsim_send_widget").find("input, textarea").prop("disabled",!1)},v.prototype.getPacketBinary_=function(){var a=4;return f.defaultPacketEncoder.createBinary({toAddress:m(this.toAddress,a),fromAddress:m(this.fromAddress,a),packetIndex:m(this.packetIndex,a),packetCount:m(this.packetCount,a),message:this.message})},v.prototype.setEncoding=function(a){e.hideRowsByEncoding($("#netsim_send_widget"),a)},v.prototype.setChunkSize=function(a){this.currentChunkSize_=a,this.render()}},{"../constants":46,"./NetSimEncodingControl":129,"./NetSimSendWidget.html":149,"./PacketEncoder":157,"./dataConverters":159}],149:[function(require,module,exports){module.exports=function(){var t=function anonymous(locals,filters,escape){escape=escape||function(a){return String(a).replace(/&(?!\w+;)/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")};var buf=[];with(locals||{})!function(){buf.push('<div id="netsim_send_widget" class="netsim_send_widget">\n  <h1>Send a Message</h1>\n  <div class="netsim_packet">\n    <table>\n      <thead>\n        <tr>\n          <th nowrap class="encodingLabel"></th>\n          <th nowrap class="toAddress">To</th>\n          <th nowrap class="fromAddress">From</th>\n          <th nowrap class="packetInfo">Packet</th>\n          <th class="message">Message</th>\n        </tr>\n      </thead>\n      <tbody>\n        <tr class="ascii">\n          <th nowrap class="encodingLabel">ASCII</th>\n          <td nowrap class="toAddress"><input type="text" class="toAddress" /></td>\n          <td nowrap class="fromAddress"><input type="text" readonly class="fromAddress" /></td>\n          <td nowrap class="packetInfo"><input type="text" readonly class="packetIndex" /> of <input type="text" readonly class="packetCount" /></td>\n          <td class="message"><div><textarea class="message"></textarea></div></td>\n        </tr>\n        <tr class="decimal">\n          <th nowrap class="encodingLabel">Decimal</th>\n          <td nowrap class="toAddress"><input type="text" class="toAddress" /></td>\n          <td nowrap class="fromAddress"><input type="text" readonly class="fromAddress" /></td>\n          <td nowrap class="packetInfo"><input type="text" readonly class="packetIndex" /> of <input type="text" readonly class="packetCount" /></td>\n          <td class="message"><div><textarea class="message"></textarea></div></td>\n        </tr>\n        <tr class="hexadecimal">\n          <th nowrap class="encodingLabel">Hexadecimal</th>\n          <td nowrap class="toAddress"><input type="text" class="toAddress" /></td>\n          <td nowrap class="fromAddress"><input type="text" readonly class="fromAddress" /></td>\n          <td nowrap class="packetInfo"><input type="text" readonly class="packetIndex" /> of <input type="text" readonly class="packetCount" /></td>\n          <td class="message"><div><textarea class="message"></textarea></div></td>\n        </tr>\n        <tr class="binary">\n          <th nowrap class="encodingLabel">Binary</th>\n          <td nowrap class="toAddress"><input type="text" class="toAddress" /></td>\n          <td nowrap class="fromAddress"><input type="text" readonly class="fromAddress" /></td>\n          <td nowrap class="packetInfo"><input type="text" readonly class="packetIndex" /> of <input type="text" readonly class="packetCount" /></td>\n          <td class="message"><div><textarea class="message"></textarea></div></td>\n        </tr>\n      </tbody>\n    </table>\n    <div class="bit_counter"></div>\n  </div>\n  <div class="send_widget_footer">\n    <!-- Packet size slider -->\n    <!-- Add packet button -->\n    <input type="button" id="send_button" value="Send" />\n  </div>\n</div>\n')}();return buf.join("")};return function(a){return t(a,require("ejs").filters)}}()},{ejs:235}],148:[function(a,b){"use strict";var c=a("./NetSimRouterTab.html"),d=a("./NetSimRouterLogTable"),e=b.exports=function(a){this.rootDiv_=a,this.routerLogTable_=null,this.render()};e.prototype.render=function(){var a=$(c({}));this.rootDiv_.html(a),this.routerLogTable_=new d(this.rootDiv_.find(".router_log_table"))},e.prototype.setRouterLogData=function(a){this.routerLogTable_.setRouterLogData(a)}},{"./NetSimRouterLogTable":145,"./NetSimRouterTab.html":147}],147:[function(require,module,exports){module.exports=function(){var t=function anonymous(locals,filters,escape){escape=escape||function(a){return String(a).replace(/&(?!\w+;)/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")};var buf=[];with(locals||{})!function(){buf.push('<div class="netsim_router_tab">\n  <div class="router_log_table"></div>\n</div>\n')}();return buf.join("")};return function(a){return t(a,require("ejs").filters)}}()},{ejs:235}],145:[function(a,b){"use strict";var c=a("./NetSimRouterLogTable.html"),d=b.exports=function(a){this.rootDiv_=a,this.routerLogData_=[],this.render()};d.prototype.render=function(){var a=$(c({tableData:this.routerLogData_}));this.rootDiv_.html(a)},d.prototype.setRouterLogData=function(a){this.routerLogData_=a,this.render()}},{"./NetSimRouterLogTable.html":144}],144:[function(require,module,exports){module.exports=function(){var t=function anonymous(locals,filters,escape){escape=escape||function(a){return String(a).replace(/&(?!\w+;)/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")};var buf=[];with(locals||{})!function(){buf.push("");{var a=require("./NetSimRouterNode");a.DnsMode}buf.push('\n<div class="netsim_router_log">\n  <h1>Router Traffic</h1>\n  <table>\n    <thead>\n    <tr>\n      <th nowrap>To</th>\n      <th nowrap>From</th>\n      <th nowrap>Message</th>\n      <th nowrap>Bits</th>\n    </tr>\n    </thead>\n    <tbody>\n    '),tableData.sort(function(a,b){return a.timestamp>b.timestamp?-1:1}),tableData.forEach(function(a){var b=[];buf.push('\n    <tr class="',escape(b.join(" ")),'">\n      <td nowrap>',escape(a.getToAddress()),"</td>\n      <td nowrap>",escape(a.getFromAddress()),"</td>\n      <td>",escape(a.getMessageAscii()),"</td>\n      <td nowrap>",escape(a.packet.length),"</td>\n    </tr>\n    ")}),buf.push("\n    </tbody>\n  </table>\n</div>")}();return buf.join("")};return function(a){return t(a,require("ejs").filters)}}()},{"./NetSimRouterNode":146,ejs:235}],142:[function(a,b){"use strict";var c=a("./NetSimMyDeviceTab.html"),d=a("./NetSimChunkSizeControl"),e=a("./NetSimEncodingControl"),f=b.exports=function(a,b,c){this.rootDiv_=a,this.chunkSizeChangeCallback_=b,this.encodingChangeCallback_=c,this.chunkSizeControl_=null,this.encodingControl_=null,this.render()};f.prototype.render=function(){var a=$(c({}));this.rootDiv_.html(a),this.chunkSizeControl_=new d(this.rootDiv_.find(".chunk_size"),this.chunkSizeChangeCallback_),this.encodingControl_=new e(this.rootDiv_.find(".encoding"),this.encodingChangeCallback_)},f.prototype.setChunkSize=function(a){this.chunkSizeControl_.setChunkSize(a)},f.prototype.setEncoding=function(a){this.encodingControl_.setEncoding(a),this.chunkSizeControl_.setEncoding(a)}},{"./NetSimChunkSizeControl":117,"./NetSimEncodingControl":129,"./NetSimMyDeviceTab.html":141}],141:[function(require,module,exports){module.exports=function(){var t=function anonymous(locals,filters,escape){escape=escape||function(a){return String(a).replace(/&(?!\w+;)/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")};var buf=[];with(locals||{})!function(){buf.push('<div class="netsim_my_device_tab">\n  <div class="encoding"></div>\n  <div class="chunk_size"></div>\n</div>\n')}();return buf.join("")};return function(a){return t(a,require("ejs").filters)}}()},{ejs:235}],138:[function(a,b){"use strict";var c=a("./NetSimLogWidget.html"),d=a("./NetSimLogPacket.html"),e=a("./NetSimEncodingControl"),f=b.exports=function(){this.packets_=[],this.currentEncoding_="all",this.currentChunkSize_=8};f.uniqueIDCounter=0,f.createWithin=function(a,b){var d=new f,e=f.uniqueIDCounter;return f.uniqueIDCounter++,a.innerHTML=c({logInstanceID:e,logTitle:b}),d.bindElements_(e),d},f.prototype.bindElements_=function(a){this.rootDiv_=$("#netsim_log_widget_"+a),this.scrollArea_=this.rootDiv_.find(".scroll_area"),this.clearButton_=this.rootDiv_.find(".clear_button"),this.clearButton_.click(this.onClearButtonPress_.bind(this)),this.rootDiv_.find("th.packetInfo, td.packetInfo").hide()},f.prototype.onClearButtonPress_=function(){this.scrollArea_.empty(),this.packets_=[]},f.prototype.log=function(a){var b=this.scrollArea_,c=b[0].scrollHeight-b[0].scrollTop<=b.outerHeight(),d=new g(a,this.currentEncoding_,this.currentChunkSize_);d.getRoot().appendTo(this.scrollArea_),this.packets_.push(d),c&&b.scrollTop(b[0].scrollHeight)},f.prototype.setEncoding=function(a){this.currentEncoding_=a,this.packets_.forEach(function(b){b.setEncoding(a)})},f.prototype.setChunkSize=function(a){this.currentChunkSize_=a,this.packets_.forEach(function(b){b.setChunkSize(a)})};var g=function(a,b,c){this.packetBinary_=a,this.encoding_=b,this.chunkSize_=c,this.rootDiv_=$("<div>").addClass("packet"),this.render()};g.prototype.render=function(){var a=d({packetBinary:this.packetBinary_,chunkSize:this.chunkSize_}),b=$(a);e.hideRowsByEncoding(b,this.encoding_),b.find("th.packetInfo, td.packetInfo").hide(),this.rootDiv_.html(b)},g.prototype.getRoot=function(){return this.rootDiv_},g.prototype.setEncoding=function(a){this.encoding_=a,this.render()},g.prototype.setChunkSize=function(a){this.chunkSize_=a,this.render()}},{"./NetSimEncodingControl":129,"./NetSimLogPacket.html":136,"./NetSimLogWidget.html":137}],137:[function(require,module,exports){module.exports=function(){var t=function anonymous(locals,filters,escape){escape=escape||function(a){return String(a).replace(/&(?!\w+;)/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")};var buf=[];with(locals||{})!function(){buf.push('<div id="netsim_log_widget_',escape(logInstanceID),'" class="netsim_log_widget">\n  <h1>',escape(logTitle),'\n    <div class="log_header_controls">\n      <input type="button" class="clear_button" value="Clear" />\n    </div>\n  </h1>\n  <div class="log_body">\n    <div class="scroll_area">\n    </div>\n  </div>\n</div>')}();return buf.join("")};return function(a){return t(a,require("ejs").filters)}}()},{ejs:235}],136:[function(require,module,exports){module.exports=function(){var t=function anonymous(locals,filters,escape){escape=escape||function(a){return String(a).replace(/&(?!\w+;)/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")};var buf=[];with(locals||{})!function(){function a(a){return"ascii"===a?"ASCII":"decimal"===a?"Decimal":"hexadecimal"===a?"Hexadecimal":"binary"===a?"Binary":""}function b(b,c,d,e,f){buf.push('\n    <tr class="',escape(b),'">\n      <th nowrap class="encodingLabel">',escape(a(b)),'</th>\n      <td nowrap class="toAddress">',escape(c),'</td>\n      <td nowrap class="fromAddress">',escape(d),'</td>\n      <td nowrap class="packetInfo">',escape(e),'</td>\n      <td class="message">',escape(f),"</td>\n    </tr>\n")}buf.push("");var c=require("./PacketEncoder"),d=require("./dataConverters"),e=d.formatBinary,f=d.formatHex,g=d.alignDecimal,h=d.binaryToInt,i=d.binaryToHex,j=d.binaryToDecimal,k=d.binaryToAscii;buf.push('\n<table>\n  <thead>\n    <tr>\n      <th nowrap class="encodingLabel"></th>\n      <th nowrap class="toAddress">To</th>\n      <th nowrap class="fromAddress">From</th>\n      <th nowrap class="packetInfo">Packet</th>\n      <th nowrap class="message">Message</th>\n    </tr>\n  </thead>\n  <tbody>\n  ');var l=c.defaultPacketEncoder.getField("toAddress",packetBinary),m=c.defaultPacketEncoder.getField("fromAddress",packetBinary),n=c.defaultPacketEncoder.getField("packetIndex",packetBinary),o=c.defaultPacketEncoder.getField("packetCount",packetBinary),p=c.defaultPacketEncoder.getField("message",packetBinary);b("ascii",h(l),h(m),h(n)+" of "+h(o),k(p,chunkSize)),b("decimal",h(l),h(m),h(n)+" of "+h(o),g(j(p,chunkSize))),b("hexadecimal",i(l),i(m),i(n)+" of "+i(o),f(i(p),chunkSize)),b("binary",e(l,4),e(m,4),e(n,4)+" "+e(o,4),e(p,chunkSize)),buf.push("\n  </tbody>\n</table>")}();return buf.join("")};return function(a){return t(a,require("ejs").filters)}}()},{"./PacketEncoder":157,"./dataConverters":159,ejs:235}],133:[function(a,b){"use strict";var c=a("../dom"),d=a("../utils"),e=a("./netsimUtils"),f=a("./NetSimLogger"),g=a("./NetSimClientNode"),h=a("./NetSimRouterNode"),i=a("./NetSimLobby.html"),j=new f(console,f.LogLevel.VERBOSE),k="none",l=b.exports=function(a,b,c){this.connection_=a,this.connection_.statusChanges.register(this.refresh_.bind(this)),j.info("NetSimLobby registered to connection statusChanges"),this.connection_.shardChange.register(this.onShardChange_.bind(this)),j.info("NetSimLobby registered to connection shardChanges"),this.shard_=null,this.user_=b,this.overrideShardID_=c,this.selectedID_=void 0,this.selectedListItem_=void 0};l.createWithin=function(a,b,c,d){var e=new l(b,c,d);return a.innerHTML=i({}),e.bindElements_(),e.refresh_(),e},l.prototype.bindElements_=function(){this.openRoot_=$("#netsim_lobby_open"),this.closedRoot_=$("#netsim_lobby_closed"),this.displayNameView_=this.openRoot_.find("#display_name_view"),this.shardView_=this.openRoot_.find("#shard_view"),this.nameInput_=this.displayNameView_.find("#netsim_lobby_name"),this.setNameButton_=this.displayNameView_.find("#netsim_lobby_set_name_button"),c.addClickTouchEvent(this.setNameButton_[0],this.setNameButtonClick_.bind(this)),this.shardSelector_=this.shardView_.find("#netsim_shard_select"),this.shardSelector_.change(this.onShardSelectorChange_.bind(this)),this.notConnectedNote_=this.shardView_.find("#netsim_not_connected_note"),this.notConnectedNote_.hide(),this.addRouterButton_=this.shardView_.find("#netsim_lobby_add_router"),c.addClickTouchEvent(this.addRouterButton_[0],this.addRouterButtonClick_.bind(this)),this.lobbyList_=this.shardView_.find("#netsim_lobby_list"),this.connectButton_=this.shardView_.find("#netsim_lobby_connect"),c.addClickTouchEvent(this.connectButton_[0],this.connectButtonClick_.bind(this)),this.disconnectButton_=this.closedRoot_.find("#netsim_lobby_disconnect"),c.addClickTouchEvent(this.disconnectButton_[0],this.disconnectButtonClick_.bind(this)),this.connectionStatusSpan_=this.closedRoot_.find("#netsim_lobby_statusbar"),this.shardLinks_=$(".shardLink"),this.shardLinks_.hide(),this.user_.isSignedIn&&(this.nameInput_.val(this.user_.name),this.refreshShardList_())},l.prototype.onShardChange_=function(a){this.shard_=a,null!==this.shard_&&(this.shard_.nodeTable.tableChange.register(this.onNodeTableChange_.bind(this)),j.info("NetSimLobby registered to nodeTable tableChange"))},l.prototype.onNodeTableChange_=function(a){var b=e.nodesFromRows(this.shard_,a);this.refreshLobbyList_(b)},l.prototype.setNameButtonClick_=function(){this.nameInput_.prop("disabled",!0),this.setNameButton_.hide(),this.shardSelector_.attr("disabled",!1),this.refreshShardList_()},l.prototype.onShardSelectorChange_=function(){this.connection_.isConnectedToShard()&&(this.connection_.disconnectFromShard(),this.nameInput_.disabled=!1),this.shardSelector_.val()!==k&&(this.nameInput_.disabled=!0,this.connection_.connectToShard(this.shardSelector_.val(),this.nameInput_.val()))},l.prototype.addRouterButtonClick_=function(){this.connection_.addRouterToLobby()},l.prototype.connectButtonClick_=function(){this.selectedID_&&this.connection_.connectToRouter(this.selectedID_)
},l.prototype.disconnectButtonClick_=function(){this.connection_.disconnectFromRouter()},l.prototype.refreshShardList_=function(){var a=this,b="demo",c=this.shardSelector_;return void 0!==this.overrideShardID_?void this.useShard(this.overrideShardID_):this.user_.isSignedIn?void this.getUserSections_(function(d){return 0===d.length?void this.useRandomShard():($(c).empty(),d.length>1&&$("<option>").val(k).html("-- PICK ONE --").appendTo(c),d.forEach(function(a){$("<option>").val("netsim_"+b+"_"+a.id).html(a.name).appendTo(c)}),void a.onShardSelectorChange_())}):void this.useRandomShard()},l.prototype.useRandomShard=function(){this.useShard("netsim_"+d.createUuid())},l.prototype.useShard=function(a){this.shardSelector_.empty(),$("<option>").val(a).html("My Private Network").appendTo(this.shardSelector_),this.shardLinks_.attr("href",this.buildShareLink(a)).show(),this.onShardSelectorChange_()},l.prototype.buildShareLink=function(a){var b=document.location.protocol+"//"+document.location.host+document.location.pathname;return b+"?s="+a},l.prototype.refresh_=function(){this.connection_.isConnectedToRouter()?this.refreshClosedLobby_():this.refreshOpenLobby_()},l.prototype.refreshClosedLobby_=function(){this.closedRoot_.show(),this.openRoot_.hide(),this.notConnectedNote_.hide(),this.connectionStatusSpan_.html(this.connection_.myNode.getStatus()+" "+this.connection_.myNode.getStatusDetail())},l.prototype.refreshOpenLobby_=function(){return this.openRoot_.show(),this.closedRoot_.hide(),""===this.nameInput_.val()?(this.nameInput_.prop("disabled",!1),this.setNameButton_.show(),void this.shardView_.hide()):(this.nameInput_.prop("disabled",!0),this.setNameButton_.hide(),this.shardView_.show(),this.connection_.isConnectedToShard()?(this.notConnectedNote_.hide(),this.addRouterButton_.show(),this.lobbyList_.show(),this.connectButton_.show(),void this.connection_.getAllNodes(function(a){this.refreshLobbyList_(a)}.bind(this))):(this.shardSelector_.val(k),this.notConnectedNote_.show(),this.addRouterButton_.hide(),this.lobbyList_.hide(),void this.connectButton_.hide()))},l.prototype.refreshLobbyList_=function(a){this.lobbyList_.empty();var b=a.filter(function(a){return a.getNodeType()===h.getNodeType()});b.sort(function(a,b){return a.getDisplayName()>b.getDisplayName()?1:-1}),this.selectedListItem_=void 0,b.forEach(function(a){var b=$("<li>").html(a.getDisplayName()+" : "+a.getStatus()+" "+a.getStatusDetail());a.getNodeType()===h.getNodeType()?b.addClass("router_row"):(b.addClass("user_row"),a.entityID===this.connection_.myNode.entityID&&b.addClass("own_row")),a.entityID===this.selectedID_&&(b.addClass("selected_row"),this.selectedListItem_=b),c.addClickTouchEvent(b[0],this.onRowClick_.bind(this,b,a)),b.appendTo(this.lobbyList_)}.bind(this)),this.onSelectionChange()},l.prototype.onRowClick_=function(a,b){if(g.getNodeType()!==b.getNodeType()){var c=this.selectedID_,d=this.selectedListItem_;d&&d.removeClass("selected_row"),this.selectedID_=void 0,this.selectedListItem_=void 0,b.entityID!==c&&(this.selectedID_=b.entityID,this.selectedListItem_=a,this.selectedListItem_.addClass("selected_row")),this.onSelectionChange()}},l.prototype.onSelectionChange=function(){this.connectButton_.attr("disabled",void 0===this.selectedListItem_)},l.prototype.getUserSections_=function(a){$.ajax({dataType:"json",url:"/v2/sections/membership",success:a})}},{"../dom":47,"../utils":214,"./NetSimClientNode":118,"./NetSimLobby.html":132,"./NetSimLogger":139,"./NetSimRouterNode":146,"./netsimUtils":163}],163:[function(a,b,c){"use strict";var d=a("./NetSimClientNode"),e=a("./NetSimRouterNode");c.nodesFromRows=function(a,b){return b.map(function(b){if(b.type===d.getNodeType())return new d(a,b);if(b.type==e.getNodeType())return new e(a,b);throw new Error("Unable to map row to node.")})}},{"./NetSimClientNode":118,"./NetSimRouterNode":146}],132:[function(require,module,exports){module.exports=function(){var t=function anonymous(locals,filters,escape){escape=escape||function(a){return String(a).replace(/&(?!\w+;)/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")};var buf=[];with(locals||{})!function(){buf.push('<div id="netsim_lobby_open">\n  <div id="display_name_view">\n    <label for="netsim_lobby_name">My Name:</label>\n    <input id="netsim_lobby_name" type="text" />\n    <input id="netsim_lobby_set_name_button" type="button" value="Set Name" />\n  </div>\n  <div id="shard_view">\n    <label for="netsim_shard_select">My Section:</label>\n    <select id="netsim_shard_select"></select>\n    <span id="netsim_not_connected_note">You are not connected. Select a class section from the list to connect.</span>\n    <a class="shardLink" href="#">Share this private network</a>\n    <input type="button" id="netsim_lobby_add_router" value="Add Router" />\n    <ul id="netsim_lobby_list"></ul>\n    <input type="button" id="netsim_lobby_connect" value="Connect" />\n  </div>\n</div>\n<div id="netsim_lobby_closed">\n    <span id="netsim_lobby_statusbar">...</span>\n    <a class="shardLink" href="#">Share this private network</a>\n    <input type="button" id="netsim_lobby_disconnect" value="Disconnect" />\n</div>\n')}();return buf.join("")};return function(a){return t(a,require("ejs").filters)}}()},{ejs:235}],129:[function(a,b){"use strict";var c=a("./NetSimEncodingControl.html"),d=b.exports=function(a,b){this.rootDiv_=a,this.changeEncodingCallback_=b,this.select_=null,this.render()};d.prototype.render=function(){var a=$(c({}));this.rootDiv_.html(a),this.select_=this.rootDiv_.find("select"),this.select_.change(this.onSelectChange_.bind(this))},d.prototype.onSelectChange_=function(){this.changeEncodingCallback_(this.select_.val())},d.prototype.setEncoding=function(a){this.select_.val(a)},d.hideRowsByEncoding=function(a,b){"all"===b?a.find("tr.binary, tr.hexadecimal, tr.decimal, tr.ascii").show():"binary"===b?(a.find("tr.binary").show(),a.find("tr.hexadecimal, tr.decimal, tr.ascii").hide()):"hexadecimal"===b?(a.find("tr.binary, tr.hexadecimal").show(),a.find("tr.decimal, tr.ascii").hide()):"decimal"===b?(a.find("tr.binary, tr.decimal").show(),a.find("tr.hexadecimal, tr.ascii").hide()):"ascii"===b&&(a.find("tr.binary, tr.ascii").show(),a.find("tr.hexadecimal, tr.decimal").hide())}},{"./NetSimEncodingControl.html":128}],128:[function(require,module,exports){module.exports=function(){var t=function anonymous(locals,filters,escape){escape=escape||function(a){return String(a).replace(/&(?!\w+;)/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")};var buf=[];with(locals||{})!function(){buf.push('<div class="netsim_encoding_selector">\n  <label for="encoding_selector">Encoding:</label>\n  <select id="encoding_selector">\n    <option value="all" selected>All</option>\n    <option value="binary">Binary</option>\n    <option value="hexadecimal">Hexadecimal</option>\n    <option value="decimal">Decimal</option>\n    <option value="ascii">ASCII</option>\n  </select>\n</div>')}();return buf.join("")};return function(a){return t(a,require("ejs").filters)}}()},{ejs:235}],125:[function(a,b){"use strict";var c=a("./NetSimDnsTab.html"),d=a("./NetSimDnsModeControl"),e=a("./NetSimDnsManualControl"),f=a("./NetSimDnsTable"),g=b.exports=function(a,b,c){this.rootDiv_=a,this.dnsModeChangeCallback_=b,this.becomeDnsCallback_=c,this.dnsModeControl_=null,this.dnsManualControl_=null,this.dnsTable_=null,this.render()};g.prototype.render=function(){var a=$(c({}));this.rootDiv_.html(a),this.dnsModeControl_=new d(this.rootDiv_.find(".dns_mode"),this.dnsModeChangeCallback_),this.dnsManualControl_=new e(this.rootDiv_.find(".dns_manual_control"),this.becomeDnsCallback_),this.dnsTable_=new f(this.rootDiv_.find(".dns_table"))},g.prototype.setDnsMode=function(a){this.dnsModeControl_.setDnsMode(a),this.dnsTable_.setDnsMode(a),"manual"===a?this.rootDiv_.find(".dns_manual_control").show():this.rootDiv_.find(".dns_manual_control").hide()},g.prototype.setIsDnsNode=function(a){this.dnsManualControl_.setIsDnsNode(a)},g.prototype.setDnsTableContents=function(a){this.dnsTable_.setDnsTableContents(a)}},{"./NetSimDnsManualControl":121,"./NetSimDnsModeControl":123,"./NetSimDnsTab.html":124,"./NetSimDnsTable":127}],127:[function(a,b){"use strict";var c=a("./NetSimDnsTable.html"),d=a("./NetSimRouterNode"),e=d.DnsMode,f=b.exports=function(a){this.rootDiv_=a,this.dnsMode_=e.NONE,this.addressTableData_=[],this.render()};f.prototype.render=function(){var a=$(c({dnsMode:this.dnsMode_,tableData:this.addressTableData_}));this.rootDiv_.html(a)},f.prototype.setDnsMode=function(a){this.dnsMode_=a,this.render()},f.prototype.setDnsTableContents=function(a){this.addressTableData_=a,this.render()}},{"./NetSimDnsTable.html":126,"./NetSimRouterNode":146}],126:[function(require,module,exports){module.exports=function(){var t=function anonymous(locals,filters,escape){escape=escape||function(a){return String(a).replace(/&(?!\w+;)/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")};var buf=[];with(locals||{})!function(){buf.push("");var a=require("./NetSimRouterNode"),b=a.DnsMode;buf.push('\n<div class="netsim_dns_table">\n  <h1>My Network</h1>\n  <table>\n    <thead>\n    <tr>\n      <th>Hostname</th>\n      <th>Address</th>\n    </tr>\n    </thead>\n    <tbody>\n    '),tableData.forEach(function(a){var c=a.hostname,d="",e=[];(dnsMode===b.NONE||a.isDnsNode||a.isLocal)&&(d=a.address),a.isLocal&&(c+=" (Me)",e.push("localNode")),a.isDnsNode&&dnsMode!==b.NONE&&(c+=" (DNS)",e.push("dnsNode")),buf.push('\n        <tr class="',escape(e.join(" ")),'">\n          <td>',escape(c),"</td>\n          <td>",escape(d),"</td>\n        </tr>\n      ")}),buf.push("\n    </tbody>\n  </table>\n</div>")}();return buf.join("")};return function(a){return t(a,require("ejs").filters)}}()},{"./NetSimRouterNode":146,ejs:235}],124:[function(require,module,exports){module.exports=function(){var t=function anonymous(locals,filters,escape){escape=escape||function(a){return String(a).replace(/&(?!\w+;)/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")};var buf=[];with(locals||{})!function(){buf.push('<div class="netsim_dns_tab">\n  <div class="dns_mode"></div>\n  <div class="dns_manual_control"></div>\n  <div class="dns_table"></div>\n</div>\n')}();return buf.join("")};return function(a){return t(a,require("ejs").filters)}}()},{ejs:235}],123:[function(a,b){"use strict";var c=a("./NetSimDnsModeControl.html"),d=b.exports=function(a,b){this.rootDiv_=a,this.dnsModeChangeCallback_=b,this.dnsModeRadios_=null,this.currentDnsMode_="none",this.render()};d.prototype.render=function(){var a=$(c({}));this.rootDiv_.html(a),this.dnsModeRadios_=this.rootDiv_.find('input[type="radio"][name="dns_mode"]'),this.dnsModeRadios_.change(this.onDnsModeChange_.bind(this)),this.setDnsMode(this.currentDnsMode_)},d.prototype.onDnsModeChange_=function(){var a=this.dnsModeRadios_.siblings(":checked").val();this.dnsModeChangeCallback_(a)},d.prototype.setDnsMode=function(a){this.currentDnsMode_=a,this.dnsModeRadios_.siblings('[value="'+a+'"]').prop("checked",!0)}},{"./NetSimDnsModeControl.html":122}],122:[function(require,module,exports){module.exports=function(){var t=function anonymous(locals,filters,escape){escape=escape||function(a){return String(a).replace(/&(?!\w+;)/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")};var buf=[];with(locals||{})!function(){buf.push('<div class="dns_mode_control">\n  <h1>DNS Mode</h1>\n  <input id="dns_mode_none" type="radio" name="dns_mode" value="none" /><label for="dns_mode_none">None</label>\n  <br/><input id="dns_mode_manual" type="radio" name="dns_mode" value="manual" /><label for="dns_mode_manual">Manual</label>\n  <br/><input id="dns_mode_automatic" type="radio" name="dns_mode" value="automatic" /><label for="dns_mode_automatic">Automatic</label>\n</div>')}();return buf.join("")};return function(a){return t(a,require("ejs").filters)}}()},{ejs:235}],121:[function(a,b){"use strict";var c=a("./NetSimDnsManualControl.html"),d=b.exports=function(a,b){this.rootDiv_=a,this.becomeDnsCallback_=b,this.render()};d.prototype.render=function(){var a=$(c({}));this.rootDiv_.html(a),this.rootDiv_.find('input[type="button"]').click(this.onBecomeDnsButtonClick_.bind(this))},d.prototype.onBecomeDnsButtonClick_=function(){this.becomeDnsCallback_()},d.prototype.setIsDnsNode=function(a){this.rootDiv_.find('input[type="button"]').attr("disabled",a)}},{"./NetSimDnsManualControl.html":120}],120:[function(require,module,exports){module.exports=function(){var t=function anonymous(locals,filters,escape){escape=escape||function(a){return String(a).replace(/&(?!\w+;)/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")};var buf=[];with(locals||{})!function(){buf.push('<div class="netsim_dns_manual_control">\n  <h1>Manual Control</h1>\n  <input id="become_dns_button" type="button" value="Take over as DNS" />\n</div>')}();return buf.join("")};return function(a){return t(a,require("ejs").filters)}}()},{ejs:235}],119:[function(a,b){"use strict";var c=a("./NetSimLogger"),d=a("./NetSimClientNode"),e=a("./NetSimRouterNode"),f=a("./NetSimLocalClientNode"),g=a("../ObservableEvent"),h=a("./NetSimShard"),i=a("./NetSimShardCleaner"),j=c.getSingleton(),k=b.exports=function(a,b,c){this.displayName_="",this.sentLog_=b,this.receivedLog_=c,this.shard_=null,this.shardCleaner_=null,this.myNode=null,this.shardChange=new g,this.statusChanges=new g,a.addEventListener("beforeunload",this.onBeforeUnload_.bind(this))};k.prototype.attachToRunLoop=function(a){a.tick.register(this.tick.bind(this))},k.prototype.tick=function(a){this.myNode&&(this.myNode.tick(a),this.shard_.tick(a),this.shardCleaner_.tick(a))},k.prototype.getLogger=function(){return j},k.prototype.onBeforeUnload_=function(){this.isConnectedToShard()&&this.disconnectFromShard()},k.prototype.connectToShard=function(a,b){this.isConnectedToShard()&&(j.warn("Auto-closing previous connection..."),this.disconnectFromShard()),this.shard_=new h(a),this.shardCleaner_=new i(this.shard_),this.createMyClientNode_(b)},k.prototype.disconnectFromShard=function(){return this.isConnectedToShard()?(this.isConnectedToRouter()&&this.disconnectFromRouter(),void this.myNode.destroy(function(){this.myNode.stopSimulation(),this.myNode=null,this.shardChange.notifyObservers(null,null),this.statusChanges.notifyObservers()}.bind(this))):void j.warn("Redundant disconnect call.")},k.prototype.createMyClientNode_=function(a){f.create(this.shard_,function(b,c){return null!==b?void j.error("Failed to create client node; "+b.message):(this.myNode=c,this.myNode.setDisplayName(a),this.myNode.setLostConnectionCallback(this.disconnectFromShard.bind(this)),this.myNode.initializeSimulation(this.sentLog_,this.receivedLog_),void this.myNode.update(function(){this.shardChange.notifyObservers(this.shard_,this.myNode),this.statusChanges.notifyObservers()}.bind(this)))}.bind(this))},k.prototype.isConnectedToShard=function(){return null!==this.myNode},k.prototype.getAllNodes=function(a){if(!this.isConnectedToShard())return j.warn("Can't get lobby rows, not connected to shard."),void a([]);var b=this;this.shard_.nodeTable.readAll(function(c,f){if(null!==c)return j.warn("Lobby data request failed, using empty list."),void a([]);var g=f.map(function(a){return a.type===d.getNodeType()?new d(b.shard_,a):a.type===e.getNodeType()?new e(b.shard_,a):void 0}).filter(function(a){return void 0!==a});a(g)})},k.prototype.addRouterToLobby=function(){var a=this;e.create(this.shard_,function(){a.statusChanges.notifyObservers()})},k.prototype.isConnectedToRouter=function(){return this.myNode&&this.myNode.myRouter},k.prototype.connectToRouter=function(a){this.isConnectedToRouter()&&(j.warn("Auto-disconnecting from previous router."),this.disconnectFromRouter());var b=this;e.get(a,this.shard_,function(c,d){return null!==c?void j.warn("Failed to find router with ID "+a+"; "+c.message):void b.myNode.connectToRouter(d,function(a){a&&j.warn("Failed to connect to "+d.getDisplayName()+"; "+a.message),b.statusChanges.notifyObservers()})})},k.prototype.disconnectFromRouter=function(){if(!this.isConnectedToRouter())return void j.warn("Cannot disconnect: Not connected.");var a=this;this.myNode.disconnectRemote(function(){a.statusChanges.notifyObservers()})}},{"../ObservableEvent":1,"./NetSimClientNode":118,"./NetSimLocalClientNode":134,"./NetSimLogger":139,"./NetSimRouterNode":146,"./NetSimShard":151,"./NetSimShardCleaner":152}],152:[function(a,b){"use strict";var c=a("../utils"),d=a("../commands"),e=d.Command,f=d.CommandSequence,g=a("./NetSimEntity"),h=a("./NetSimHeartbeat"),i=a("./NetSimNode"),j=a("./NetSimWire"),k=a("./NetSimMessage"),l=a("./NetSimLogEntry"),m=a("./NetSimLogger"),n=m.getSingleton(),o=12e4,p=6e5,q=6e4,r=function(a,b){b=void 0!==b?b:{},h.call(this,a,b),this.nodeID_=0};r.inherits(h),r.create=function(a,b){g.create(r,a,b)},r.getAllCurrent=function(a,b){a.heartbeatTable.readAll(function(c,d){if(c)return void b(c,null);var e=d.filter(function(a){return a.cleaner===!0&&Date.now()-a.time<q}).map(function(b){return new r(a,b)});b(null,e)})},r.prototype.buildRow_=function(){return c.extend(r.superPrototype.buildRow_.call(this),{cleaner:!0})};var s=b.exports=function(a){this.shard_=a,this.nextAttemptTime_=Date.now(),this.heartbeat_=null};s.prototype.tick=function(a){Date.now()>=this.nextAttemptTime_&&(this.nextAttemptTime_=Date.now()+o,this.cleanShard()),this.heartbeat_&&this.heartbeat_.tick(a),this.steps_&&(this.steps_.tick(a),this.steps_.isFinished()&&(this.steps_=void 0))},s.prototype.cleanShard=function(){this.getCleaningLock(function(a){return a?void n.warn(a.message):(this.steps_=new f([new t(this,"heartbeat",this.shard_.heartbeatTable),new w(this),new t(this,"heartbeat",this.shard_.heartbeatTable),new t(this,"node",this.shard_.nodeTable),new x(this),new t(this,"node",this.shard_.nodeTable),new t(this,"wire",this.shard_.wireTable),new y(this),new t(this,"message",this.shard_.messageTable),new z(this),new t(this,"log",this.shard_.logTable),new A(this),new v(this)]),void this.steps_.begin())}.bind(this))},s.prototype.hasCleaningLock=function(){return null!==this.heartbeat_},s.prototype.getCleaningLock=function(a){r.create(this.shard_,function(b,c){return b?void a(b,null):void r.getAllCurrent(this.shard_,function(b,d){return b||d.length>1?void c.destroy(function(){a(new Error("Failed to acquire cleaning lock"),null)}):(this.heartbeat_=c,n.info("Cleaning lock acquired"),void a(null,null))}.bind(this))}.bind(this))},s.prototype.releaseCleaningLock=function(a){this.heartbeat_.destroy(function(b){this.heartbeat_=null,this.nextAttemptTime_=Date.now()+p,n.info("Cleaning lock released"),a(b,null)}.bind(this))},s.prototype.cacheTable=function(a,b){void 0===this.tableCache&&(this.tableCache={}),this.tableCache[a]=b},s.prototype.getTableCache=function(a){return this.tableCache[a]},s.prototype.getShard=function(){return this.shard_};var t=function(a,b,c){e.call(this),this.cleaner_=a,this.key_=b,this.table_=c};t.inherits(e),t.prototype.onBegin_=function(){n.info("Begin CacheTable["+this.key_+"]"),this.table_.readAll(function(a,b){this.cleaner_.cacheTable(this.key_,b),this.succeed()}.bind(this))};var u=function(a){e.call(this),this.entity_=a};u.inherits(e),u.prototype.onBegin_=function(){n.info("Begin DestroyEntity["+this.entity_.entityID+"]"),this.entity_.destroy(function(a){return a?void this.fail():(n.info("Deleted entity"),void this.succeed())}.bind(this))};var v=function(a){e.call(this),this.cleaner_=a};v.inherits(e),v.prototype.onBegin_=function(){n.info("Begin ReleaseCleaningLock"),this.cleaner_.releaseCleaningLock(function(a){a?this.succeed():this.fail()}.bind(this))};var w=function(a){f.call(this),this.cleaner_=a};w.inherits(f),w.prototype.onBegin_=function(){n.info("Begin CleanHeartbeats");var a=this.cleaner_.getTableCache("heartbeat");this.commandList_=a.filter(function(a){return Date.now()-a.time>q}).map(function(a){return new u(new h(this.cleaner_.getShard(),a))}.bind(this)),f.prototype.onBegin_.call(this)};var x=function(a){f.call(this),this.cleaner_=a};x.inherits(f),x.prototype.onBegin_=function(){n.info("Begin CleanNodes");var a=this.cleaner_.getTableCache("heartbeat"),b=this.cleaner_.getTableCache("node");this.commandList_=b.filter(function(b){return a.every(function(a){return a.nodeID!==b.id})}).map(function(a){return new u(new i(this.cleaner_.getShard(),a))}.bind(this)),f.prototype.onBegin_.call(this)};var y=function(a){f.call(this),this.cleaner_=a};y.inherits(f),y.prototype.onBegin_=function(){n.info("Begin CleanWires");var a=this.cleaner_.getTableCache("node"),b=this.cleaner_.getTableCache("wire");this.commandList_=b.filter(function(b){return!(a.some(function(a){return a.id===b.localNodeID})&&a.some(function(a){return a.id===b.remoteNodeID}))}).map(function(a){return new u(new j(this.cleaner_.getShard(),a))}.bind(this)),f.prototype.onBegin_.call(this)};var z=function(a){f.call(this),this.cleaner_=a};z.inherits(f),z.prototype.onBegin_=function(){n.info("Begin CleanMessages");var a=this.cleaner_.getTableCache("node"),b=this.cleaner_.getTableCache("message");this.commandList_=b.filter(function(b){return a.every(function(a){return a.id!==b.toNodeID})}).map(function(a){return new u(new k(this.cleaner_.getShard(),a))}.bind(this)),f.prototype.onBegin_.call(this)};var A=function(a){f.call(this),this.cleaner_=a};A.inherits(f),A.prototype.onBegin_=function(){n.info("Begin CleanLogs");var a=this.cleaner_.getTableCache("node"),b=this.cleaner_.getTableCache("log");this.commandList_=b.filter(function(b){return a.every(function(a){return a.id!==b.nodeID})}).map(function(a){return new u(new l(this.cleaner_.getShard(),a))}.bind(this)),f.prototype.onBegin_.call(this)}},{"../commands":45,"../utils":214,"./NetSimEntity":130,"./NetSimHeartbeat":131,"./NetSimLogEntry":135,"./NetSimLogger":139,"./NetSimMessage":140,"./NetSimNode":143,"./NetSimWire":156}],151:[function(a,b){"use strict";var c=a("../appsApi").SharedTable,d=a("./NetSimTable"),e="HQJ8GCCMGP7Yh8MrtDusIA==";window&&window.location&&window.location.hostname&&"localhost"===window.location.hostname.split(".")[0]&&(e="JGW2rHUp_UCMW_fQmRf6iQ==");var f=b.exports=function(a){this.nodeTable=new d(new c(e,a+"_n")),this.wireTable=new d(new c(e,a+"_w")),this.messageTable=new d(new c(e,a+"_m")),this.messageTable.setPollingInterval(3e3),this.logTable=new d(new c(e,a+"_l")),this.logTable.setPollingInterval(1e4),this.heartbeatTable=new d(new c(e,a+"_h"))};f.prototype.tick=function(a){this.nodeTable.tick(a),this.wireTable.tick(a),this.messageTable.tick(a),this.logTable.tick(a)}},{"../appsApi":17,"./NetSimTable":153}],153:[function(a,b){"use strict";var c=a("../utils").getLodash(),d=a("../ObservableEvent"),e=5e3,f=b.exports=function(a){this.remoteTable_=a,this.tableChange=new d,this.cache_={},this.lastFullUpdateTime_=0,this.pollingInterval_=e};f.prototype.readAll=function(a){this.remoteTable_.readAll(function(b,c){a(b,c),null===b&&this.fullCacheUpdate_(c)}.bind(this))},f.prototype.read=function(a,b){this.remoteTable_.read(a,function(c,d){b(c,d),null===c&&this.updateCacheRow_(a,d)}.bind(this))},f.prototype.create=function(a,b){this.remoteTable_.create(a,function(a,c){b(a,c),null===a&&this.addRowToCache_(c)}.bind(this))},f.prototype.update=function(a,b,c){this.remoteTable_.update(a,b,function(d,e){c(d,e),null===d&&this.updateCacheRow_(a,b)}.bind(this))},f.prototype["delete"]=function(a,b){this.remoteTable_["delete"](a,function(c,d){b(c,d),null===c&&this.removeRowFromCache_(a)}.bind(this))},f.prototype.fullCacheUpdate_=function(a){var b=a.reduce(function(a,b){return a[b.id]=b,a},{});c.isEqual(this.cache_,b)||(this.cache_=b,this.tableChange.notifyObservers(this.arrayFromCache_())),this.lastFullUpdateTime_=Date.now()},f.prototype.addRowToCache_=function(a){this.cache_[a.id]=a,this.tableChange.notifyObservers(this.arrayFromCache_())},f.prototype.removeRowFromCache_=function(a){void 0!==this.cache_[a]&&(delete this.cache_[a],this.tableChange.notifyObservers(this.arrayFromCache_()))},f.prototype.updateCacheRow_=function(a,b){var d=this.cache_[a],e=b;e.id=a,c.isEqual(d,e)||(this.cache_[a]=e,this.tableChange.notifyObservers(this.arrayFromCache_()))},f.prototype.arrayFromCache_=function(){var a=[];for(var b in this.cache_)this.cache_.hasOwnProperty(b)&&a.push(this.cache_[b]);return a},f.prototype.setPollingInterval=function(a){this.pollingInterval_=a},f.prototype.tick=function(){var a=Date.now();a-this.lastFullUpdateTime_>this.pollingInterval_&&(this.lastFullUpdateTime_=a,this.readAll(function(){}))}},{"../ObservableEvent":1,"../utils":214}],146:[function(a,b){"use strict";var c=a("../utils"),d=c.getLodash(),e=a("./NetSimNode"),f=a("./NetSimEntity"),g=a("./NetSimLogEntry"),h=a("./NetSimLogger"),i=a("./NetSimWire"),j=a("./NetSimMessage"),k=a("./NetSimHeartbeat"),l=a("../ObservableEvent"),m=a("./PacketEncoder"),n=a("./dataConverters"),o=new h(console,h.LogLevel.VERBOSE),p=6,q=b.exports=function(a,b){b=void 0!==b?b:{},e.call(this,a,b),this.dnsMode=void 0!==b.dnsMode?b.dnsMode:q.DnsMode.NONE,this.dnsNodeID=b.dnsNodeID,this.simulateForSender_=void 0,this.heartbeat_=null,this.stateCache_={},this.stateChange=new l,this.myWireRowCache_=[],this.wiresChange=new l,this.myLogRowCache_=[],this.logChange=new l};q.inherits(e);var r={NONE:"none",MANUAL:"manual",AUTOMATIC:"automatic"};q.DnsMode=r,q.create=function(a,b){f.create(q,a,function(c,d){return null!==c?void b(c,null):void k.getOrCreate(a,d.entityID,function(a,c){return null!==a?void b(a,null):(d.heartbeat_=c,d.heartbeat_.setBeatInterval(12e3),void d.update(function(a){b(a,d)}))})})},q.get=function(a,b,c){f.get(q,a,b,function(d,e){return null!==d?void c(d,null):void k.getOrCreate(b,a,function(a,b){return null!==a?void c(a,null):(e.heartbeat_=b,e.heartbeat_.setBeatInterval(12e3),void c(null,e))})})},q.RouterStatus={INITIALIZING:"Initializing",READY:"Ready",FULL:"Full"};var s=q.RouterStatus;q.prototype.buildRow_=function(){return c.extend(q.superPrototype.buildRow_.call(this),{dnsMode:this.dnsMode,dnsNodeID:this.dnsNodeID})},q.prototype.tick=function(a){this.heartbeat_.tick(a)},q.prototype.update=function(a){a=a||function(){};var b=this;this.countConnections(function(c,d){b.status_=d>=p?s.FULL:s.READY,b.statusDetail_="("+d+"/"+p+")",q.superPrototype.update.call(b,a)})},q.prototype.getDisplayName=function(){return"Router "+this.entityID},q.prototype.getNodeType=function(){return q.getNodeType()},q.getNodeType=function(){return"router"},q.prototype.initializeSimulation=function(a){if(this.simulateForSender_=a,void 0!==a){var b=this.shard_.nodeTable.tableChange,c=this.onNodeTableChange_.bind(this);this.nodeChangeKey_=b.register(c),o.info("Router registered for nodeTable tableChange");var d=this.shard_.wireTable.tableChange,e=this.onWireTableChange_.bind(this);this.wireChangeKey_=d.register(e),o.info("Router registered for wireTable tableChange");var f=this.shard_.logTable.tableChange,g=this.onLogTableChange_.bind(this);this.logChangeKey_=f.register(g),o.info("Router registered for logTable tableChange");var h=this.shard_.messageTable.tableChange,i=this.onMessageTableChange_.bind(this);this.newMessageEventKey_=h.register(i),o.info("Router registered for messageTable tableChange")}},q.prototype.stopSimulation=function(){if(void 0!==this.nodeChangeKey_){var a=this.shard_.messageTable.tableChange;a.unregister(this.nodeChangeKey_),this.nodeChangeKey_=void 0,o.info("Router unregistered from nodeTable tableChange")}if(void 0!==this.wireChangeKey_){var b=this.shard_.messageTable.tableChange;b.unregister(this.wireChangeKey_),this.wireChangeKey_=void 0,o.info("Router unregistered from wireTable tableChange")}if(void 0!==this.logChangeKey_){var c=this.shard_.messageTable.tableChange;c.unregister(this.logChangeKey_),this.logChangeKey_=void 0,o.info("Router unregistered from logTable tableChange")}if(void 0!==this.newMessageEventKey_){var d=this.shard_.messageTable.tableChange;d.unregister(this.newMessageEventKey_),this.newMessageEventKey_=void 0,o.info("Router unregistered from messageTable tableChange")}},q.prototype.getConnections=function(a){a=a||function(){};var b=this.shard_,c=this.entityID;this.shard_.wireTable.readAll(function(d,e){if(d)return void a(d,[]);var f=e.map(function(a){return new i(b,a)}).filter(function(a){return a.remoteNodeID===c});a(null,f)})},q.prototype.countConnections=function(a){a=a||function(){},this.getConnections(function(b,c){a(b,c.length)})},q.prototype.log=function(a){g.create(this.shard_,this.entityID,a,function(){})};var t=function(a,b){return a.some(function(a){return a===b})};q.prototype.acceptConnection=function(a,b){var c=this;this.countConnections(function(a,d){return a?void b(a,!1):d>p?void b(new Error("Too many connections"),!1):void c.update(function(a){b(a,null===a)})})},q.prototype.requestAddress=function(a,b,c){c=c||function(){};var d=this;this.getConnections(function(e,f){if(e)return void c(e);for(var g=f.filter(function(a){return void 0!==a.localAddress}).map(function(a){return a.localAddress}),h=1;t(g,h);)h++;a.localAddress=h,a.localHostname=b,a.remoteAddress=0,a.remoteHostname=d.getHostname(),a.update(c)})},q.prototype.getAddressTable=function(){return this.myWireRowCache_.map(function(a){return{hostname:a.localHostname,address:a.localAddress,isLocal:a.localNodeID===this.simulateForSender_,isDnsNode:a.localNodeID===this.dnsNodeID}}.bind(this))},q.prototype.onNodeTableChange_=function(a){var b=d.find(a,function(a){return a.id===this.entityID}.bind(this));if(void 0===b)throw new Error("Unable to find router node in node table listing.");d.isEqual(this.stateCache_,b)||(this.stateCache_=b,o.info("Router state changed."),this.onMyStateChange_(b))},q.prototype.onMyStateChange_=function(a){this.dnsMode=a.dnsMode,this.dnsNodeID=a.dnsNodeID,this.stateChange.notifyObservers(this)},q.prototype.onWireTableChange_=function(a){var b=a.filter(function(a){return a.remoteNodeID===this.entityID}.bind(this));d.isEqual(this.myWireRowCache_,b)||(this.myWireRowCache_=b,o.info("Router wires changed."),this.wiresChange.notifyObservers())},q.prototype.onLogTableChange_=function(a){var b=a.filter(function(a){return a.nodeID===this.entityID}.bind(this));d.isEqual(this.myLogRowCache_,b)||(this.myLogRowCache_=b,o.info("Router logs changed."),this.logChange.notifyObservers())},q.prototype.getLog=function(){return this.myLogRowCache_.map(function(a){return new g(this.shard_,a)}.bind(this))},q.prototype.onMessageTableChange_=function(a){if(this.simulateForSender_&&!this.isProcessingMessages_){var b=this,c=a.map(function(a){return new j(b.shard_,a)}).filter(function(a){return a.fromNodeID===b.simulateForSender_&&a.toNodeID===b.entityID});c.length>0&&(this.isProcessingMessages_=!0,this.getConnections(function(a,d){c.forEach(function(a){a.destroy(function(c){return c?void o.error("Error pulling message off the wire for routing; "+c.message):void b.routeMessage_(a,d)})}),b.isProcessingMessages_=!1}))}},q.prototype.routeMessage_=function(a,b){var c;try{c=n.binaryToInt(m.defaultPacketEncoder.getField("toAddress",a.payload))}catch(d){return void this.log(a.payload)}var e=b.filter(function(a){return a.localAddress===c});if(0===e.length)return void this.log(a.payload);var f=e[0];j.send(this.shard_,f.remoteNodeID,f.localNodeID,a.payload,function(){this.log(a.payload)}.bind(this))}},{"../ObservableEvent":1,"../utils":214,"./NetSimEntity":130,"./NetSimHeartbeat":131,"./NetSimLogEntry":135,"./NetSimLogger":139,"./NetSimMessage":140,"./NetSimNode":143,"./NetSimWire":156,"./PacketEncoder":157,"./dataConverters":159}],135:[function(a,b){"use strict";a("../utils");var c=a("./NetSimEntity"),d=a("./PacketEncoder"),e=a("./dataConverters"),f=e.binaryToInt,g=e.formatBinary,h=e.binaryToAscii,i=8,j=b.exports=function(a,b){b=void 0!==b?b:{},c.call(this,a,b),this.nodeID=b.nodeID,this.packet=void 0!==b.packet?b.packet:"",this.timestamp=void 0!==b.timestamp?b.timestamp:Date.now()};j.inherits(c),j.prototype.getTable_=function(){return this.shard_.logTable},j.prototype.buildRow_=function(){return{nodeID:this.nodeID,packet:this.packet,timestamp:this.timestamp}
},j.create=function(a,b,c,d){var e=new j(a);e.nodeID=b,e.packet=c,e.timestamp=Date.now(),e.getTable_().create(e.buildRow_(),function(b,c){return null!==b?void d(b,null):void d(b,new j(a,c))})},j.prototype.getToAddress=function(){return f(d.defaultPacketEncoder.getField("toAddress",this.packet))},j.prototype.getFromAddress=function(){return f(d.defaultPacketEncoder.getField("fromAddress",this.packet))},j.prototype.getPacketIndex=function(){return f(d.defaultPacketEncoder.getField("packetIndex",this.packet))},j.prototype.getPacketCount=function(){return f(d.defaultPacketEncoder.getField("packetCount",this.packet))},j.prototype.getMessageBinary=function(){return g(d.defaultPacketEncoder.getField("message",this.packet),i)},j.prototype.getMessageAscii=function(){return h(d.defaultPacketEncoder.getField("message",this.packet),i)}},{"../utils":214,"./NetSimEntity":130,"./PacketEncoder":157,"./dataConverters":159}],157:[function(a,b){"use strict";var c=a("./dataConverters").minifyBinary,d=function(a){for(var b={},c=0;c<a.length;c++){if(!a[c].hasOwnProperty("key"))throw new Error("Invalid packet format: Each field must have a key.");if(!a[c].hasOwnProperty("bits"))throw new Error("Invalid packet format: Each field must have a length.");if(b.hasOwnProperty(a[c].key))throw new Error("Invalid packet format: Field keys must be unique.");if(b[a[c].key]="used",1/0===a[c].bits&&c+1<a.length)throw new Error("Invalid packet format: Infinity field length is only allowed in the last field.")}},e=b.exports=function(a){d(a),this.formatSpec_=a},f=4;e.defaultPacketEncoder=new e([{key:"toAddress",bits:f},{key:"fromAddress",bits:f},{key:"packetIndex",bits:f},{key:"packetCount",bits:f},{key:"message",bits:1/0}]),e.prototype.getField=function(a,b){var d=0,e=0;for(b=c(b);this.formatSpec_[d].key!==a;)if(e+=this.formatSpec_[d].bits,d++,d>=this.formatSpec_.length)throw new Error('Key "'+a+'" not found in packet spec.');var f=b.slice(e,e+this.formatSpec_[d].bits);if(1/0!==this.formatSpec_[d].bits)for(;f.length<this.formatSpec_[d].bits;)f+="0";return f},e.prototype.createBinary=function(a){for(var b="",c=0;c<this.formatSpec_.length;c++){var d="";if(a.hasOwnProperty(this.formatSpec_[c].key)&&(d=a[this.formatSpec_[c].key]),d.length>this.formatSpec_[c].bits&&(d=d.slice(0,this.formatSpec_[c].bits)),1/0!==this.formatSpec_[c].bits)for(;d.length<this.formatSpec_[c].bits;)d="0"+d;b+=d}return b}},{"./dataConverters":159}],159:[function(a,b,c){"use strict";a("../utils"),c.minifyBinary=function(a){return a.replace(/[^01]/g,"")},c.formatBinary=function(a,b){if(0>=b)throw new RangeError("Parameter chunkSize must be greater than zero");for(var d=c.minifyBinary(a),e=[],f=0;f<d.length;f+=b)e.push(d.substr(f,b));return e.join(" ")},c.minifyHex=function(a){return a.replace(/[^0-9A-F]/gi,"").toUpperCase()},c.minifyDecimal=function(a){return a.replace(/(^\s+|\s+$|[^0-9\s])/g,"").replace(/\s+/g," ")},c.formatHex=function(a,b){if(0>=b)throw new RangeError("Parameter chunkSize must be greater than zero");if(b%4!==0)return a;for(var d=b/4,e=c.minifyHex(a),f=[],g=0;g<e.length;g+=d)f.push(e.substr(g,d));return f.join(" ")},c.alignDecimal=function(a){if(""===a.replace(/\D/g,""))return"";var b=c.minifyDecimal(a).split(/\s+/),d=b.reduce(function(a,b){return b.length>a?b.length:a},0),e="0".repeat(d);return b.map(function(a){return(e+a).slice(-d)}).join(" ")},c.binaryToInt=function(a){return parseInt(c.minifyBinary(a),2)};var d=function(a,b){var c="0".repeat(b);return(c+a).slice(-b)},e=function(a,b){var c="0".repeat(b);return(a+c).substr(0,b)},f=function(a,b,c){if(0>=c)throw new RangeError("Output width must be greater than zero");return d(a.toString(b),c)};c.intToBinary=function(a,b){return f(a,2,b)},c.hexToInt=function(a){return parseInt(c.minifyHex(a),16)},c.intToHex=function(a,b){return f(a,16,b).toUpperCase()},c.hexToBinary=function(a){for(var b=c.minifyHex(a),d="",e=0;e<b.length;e++)d+=c.intToBinary(c.hexToInt(b.substr(e,1)),4);return d},c.binaryToHex=function(a){for(var b,d=4,f=[],g=c.minifyBinary(a),h=0;h<g.length;h+=d)b=e(g.substr(h,d),d),f.push(c.intToHex(c.binaryToInt(b),1));return f.join("")},c.decimalToBinary=function(a,b){return""===a.replace(/\D/g,"")?"":c.minifyDecimal(a).split(/\s+/).map(function(a){return c.intToBinary(parseInt(a,10),b)}).join("")},c.binaryToDecimal=function(a,b){for(var d,f=[],g=c.minifyBinary(a),h=0;h<g.length;h+=b)d=e(g.substr(h,b),b),f.push(c.binaryToInt(d));return f.join(" ")},c.asciiToBinary=function(a,b){for(var d=[],e=0;e<a.length;e++)d.push(c.intToBinary(a.charCodeAt(e),b));return d.join("")},c.binaryToAscii=function(a,b){if(0>=b)throw new RangeError("Parameter byteSize must be greater than zero");for(var d,f=[],g=c.minifyBinary(a),h=0;h<g.length;h+=b)d=e(g.substr(h,b),b),f.push(String.fromCharCode(c.binaryToInt(d)));return f.join("")}},{"../utils":214}],134:[function(a,b){"use strict";a("../utils");var c=a("./NetSimClientNode"),d=a("./NetSimEntity"),e=a("./NetSimMessage"),f=a("./NetSimHeartbeat"),g=a("./NetSimLogger"),h=a("../ObservableEvent"),i=g.getSingleton(),j=b.exports=function(a,b){c.call(this,a,b),this.myWire=null,this.myRouter=null,this.sentLog_=null,this.receivedLog_=null,this.heartbeat_=null,this.routerChange=new h,this.onNodeLostConnection_=void 0};j.inherits(c),j.create=function(a,b){d.create(j,a,function(c,d){return null!==c?void b(c,d):void f.getOrCreate(a,d.entityID,function(a,c){return null!==a?void b(a,null):(d.heartbeat_=c,d.heartbeat_.setFailureCallback(d.onFailedHeartbeat_.bind(d)),void b(null,d))})})},j.prototype.getStatus=function(){return this.status_?this.status_:"Online"},j.prototype.setDisplayName=function(a){this.displayName_=a},j.prototype.initializeSimulation=function(a,b){this.sentLog_=a,this.receivedLog_=b;var c=this.shard_.messageTable.tableChange,d=this.onMessageTableChange_.bind(this);this.newMessageEventKey_=c.register(d),i.info("Local node registered for messageTable tableChange")},j.prototype.stopSimulation=function(){if(void 0!==this.newMessageEventKey_){var a=this.shard_.messageTable.tableChange;a.unregister(this.newMessageEventKey_),this.newMessageEventKey_=void 0,i.info("Local node registered for messageTable tableChange")}},j.prototype.tick=function(a){this.heartbeat_.tick(a),this.myRouter&&this.myRouter.tick(a)},j.prototype.onFailedHeartbeat_=function(){i.error("Heartbeat failed."),void 0!==this.onNodeLostConnection_&&this.onNodeLostConnection_()},j.prototype.setLostConnectionCallback=function(a){if(void 0!==this.onNodeLostConnection_&&void 0!==a)throw new Error("Node already has a lost connection callback.");this.onNodeLostConnection_=a},j.prototype.update=function(a){a=a||function(){};var b=this;j.superPrototype.update.call(this,function(c,d){null!==c&&(i.error("Update failed."),void 0!==b.onNodeLostConnection_&&b.onNodeLostConnection_()),a(c,d)})},j.prototype.connectToRouter=function(a,b){b=b||function(){};var c=this;this.connectToNode(a,function(d,e){return d?void b(d):(c.myWire=e,c.myRouter=a,c.myRouter.initializeSimulation(c.entityID),void a.requestAddress(e,c.getHostname(),function(d){return d?void e.destroy(function(){b(d)}):(c.myWire=e,c.myRouter=a,c.routerChange.notifyObservers(c.myWire,c.myRouter),c.status_="Connected to "+a.getDisplayName()+" with address "+e.localAddress,void c.update(b))}))})},j.prototype.disconnectRemote=function(a){a=a||function(){};var b=this;this.myWire.destroy(function(c){return c?void a(c):(b.myWire=null,b.myRouter.update(a),b.myRouter.stopSimulation(),b.myRouter=null,void b.routerChange.notifyObservers(null,null))})},j.prototype.sendMessage=function(a,b){if(!this.myWire)return void b(new Error("Cannot send message; not connected."));var c=this.myWire.localNodeID,d=this.myWire.remoteNodeID,f=this;e.send(this.shard_,c,d,a,function(c){return c?(i.error("Failed to send message; "+c.message+": "+JSON.stringify(a)),void b(c)):(i.info("Local node sent message: "+JSON.stringify(a)),f.sentLog_&&f.sentLog_.log(a),void b(null))})},j.prototype.onMessageTableChange_=function(a){if(!this.isProcessingMessages_){var b=this,c=a.map(function(a){return new e(b.shard_,a)}).filter(function(a){return a.toNodeID===b.entityID});c.length>0&&(this.isProcessingMessages_=!0,c.forEach(function(a){a.destroy(function(c){return c?void i.error("Error pulling message off the wire: "+c.message):void b.handleMessage_(a)})}),this.isProcessingMessages_=!1)}},j.prototype.handleMessage_=function(a){this.receivedLog_&&this.receivedLog_.log(a.payload)}},{"../ObservableEvent":1,"../utils":214,"./NetSimClientNode":118,"./NetSimEntity":130,"./NetSimHeartbeat":131,"./NetSimLogger":139,"./NetSimMessage":140}],140:[function(a,b){"use strict";a("../utils");var c=a("./NetSimEntity"),d=b.exports=function(a,b){b=void 0!==b?b:{},c.call(this,a,b),this.fromNodeID=b.fromNodeID,this.toNodeID=b.toNodeID,this.payload=b.payload};d.inherits(c),d.send=function(a,b,c,e,f){var g=new d(a);g.fromNodeID=b,g.toNodeID=c,g.payload=e,g.getTable_().create(g.buildRow_(),f)},d.prototype.getTable_=function(){return this.shard_.messageTable},d.prototype.buildRow_=function(){return{fromNodeID:this.fromNodeID,toNodeID:this.toNodeID,payload:this.payload}}},{"../utils":214,"./NetSimEntity":130}],139:[function(a,b){"use strict";var c=b.exports=function(a,b){this.outputConsole_=a,this.log_=function(){},this.info=function(){},this.warn=function(){},this.error=function(){},this.setVerbosity(void 0===b?d.VERBOSE:b)},d={NONE:0,ERROR:1,WARN:2,INFO:3,VERBOSE:4};c.LogLevel=d;var e;c.getSingleton=function(){return void 0===e&&(e=new c(console,d.VERBOSE)),e},c.prototype.setVerbosity=function(a){this.log_=this.outputConsole_&&this.outputConsole_.log?Function.prototype.bind.call(this.outputConsole_.log,this.outputConsole_):function(){},this.info=a>=d.INFO?this.outputConsole_&&this.outputConsole_.info?Function.prototype.bind.call(this.outputConsole_.info,this.outputConsole_):this.log_:function(){},this.warn=a>=d.WARN?this.outputConsole_&&this.outputConsole_.warn?Function.prototype.bind.call(this.outputConsole_.warn,this.outputConsole_):this.log_:function(){},this.error=a>=d.ERROR?this.outputConsole_&&this.outputConsole_.error?Function.prototype.bind.call(this.outputConsole_.error,this.outputConsole_):this.log_:function(){}},c.prototype.log=function(a,b){switch(void 0===b&&(b=d.INFO),b){case d.ERROR:this.error(a);break;case d.WARN:this.warn(a);break;case d.INFO:this.info(a);break;default:this.log_(a)}}},{}],131:[function(a,b){"use strict";a("../utils");var c=a("./NetSimEntity"),d=6e3,e=b.exports=function(a,b){b=void 0!==b?b:{},c.call(this,a,b),this.nodeID=b.nodeID,this.time_=void 0!==b.time?b.time:Date.now(),this.intervalMs_=d,this.onFailedHeartbeat_=void 0};e.inherits(c),e.create=function(a,b){c.create(e,a,b)},e.getOrCreate=function(a,b,c){a.heartbeatTable.readAll(function(d,f){var g=f.filter(function(a){return a.nodeID==b}).sort(function(a,b){return a.time<b.time?1:-1});g.length>0?c(null,new e(a,g[0])):e.create(a,function(a,d){return null!==a?void c(a,null):(d.nodeID=b,void d.update(function(a){return null!==a?(d.destroy(),void c(a,null)):void c(null,d)}))})})},e.prototype.getTable_=function(){return this.shard_.heartbeatTable},e.prototype.buildRow_=function(){return{nodeID:this.nodeID,time:this.time_}},e.prototype.setBeatInterval=function(a){this.intervalMs_=a},e.prototype.setFailureCallback=function(a){if(void 0!==this.onFailedHeartbeat_&&void 0!==a)throw new Error("Heartbeat already has a failure callback.");this.onFailedHeartbeat_=a},e.prototype.tick=function(){Date.now()-this.time_>this.intervalMs_&&(this.time_=Date.now(),this.update(function(a){null!==a&&void 0!==this.onFailedHeartbeat_&&this.onFailedHeartbeat_()}.bind(this)))}},{"../utils":214,"./NetSimEntity":130}],118:[function(a,b){"use strict";a("../utils");var c=a("./NetSimNode"),d=b.exports=function(a,b){c.call(this,a,b)};d.inherits(c),d.prototype.getNodeType=function(){return d.getNodeType()},d.getNodeType=function(){return"user"},d.prototype.getStatus=function(){return this.status_?this.status_:"Online"}},{"../utils":214,"./NetSimNode":143}],143:[function(a,b){"use strict";a("../utils");var c=a("./NetSimEntity"),d=a("./NetSimWire"),e=b.exports=function(a,b){b=void 0!==b?b:{},c.call(this,a,b),this.displayName_=b.name,this.status_=b.status,this.statusDetail_=b.statusDetail};e.inherits(c),e.prototype.getTable_=function(){return this.shard_.nodeTable},e.prototype.buildRow_=function(){return{type:this.getNodeType(),name:this.getDisplayName(),status:this.getStatus(),statusDetail:this.getStatusDetail()}},e.prototype.getDisplayName=function(){return this.displayName_?this.displayName_:"[New Node]"},e.prototype.getHostname=function(){return this.getDisplayName().replace(/[^\w\d]/g,"").toLowerCase()+this.entityID},e.prototype.getNodeType=function(){throw new Error("getNodeType method is not implemented")},e.prototype.getStatus=function(){return this.status_},e.prototype.getStatusDetail=function(){return this.statusDetail_?this.statusDetail_:""},e.prototype.connectToNode=function(a,b){b=b||function(){};var c=this;d.create(this.shard_,this.entityID,a.entityID,function(d,e){return d?void b(d,null):void a.acceptConnection(c,function(a,c){return a||!c?void e.destroy(function(){b(new Error("Connection rejected."),null)}):void b(null,e)})})},e.prototype.acceptConnection=function(a,b){b(null,!0)}},{"../utils":214,"./NetSimEntity":130,"./NetSimWire":156}],156:[function(a,b){"use strict";a("../utils");var c=a("./NetSimEntity"),d=b.exports=function(a,b){b=void 0!==b?b:{},c.call(this,a,b),this.localNodeID=b.localNodeID,this.remoteNodeID=b.remoteNodeID,this.localAddress=b.localAddress,this.remoteAddress=b.remoteAddress,this.localHostname=b.localHostname,this.remoteHostname=b.remoteHostname};d.inherits(c),d.create=function(a,b,c,e){var f=new d(a);f.localNodeID=b,f.remoteNodeID=c,f.getTable_().create(f.buildRow_(),function(b,c){return null!==b?void e(b,null):void e(null,new d(a,c))})},d.prototype.getTable_=function(){return this.shard_.wireTable},d.prototype.buildRow_=function(){return{localNodeID:this.localNodeID,remoteNodeID:this.remoteNodeID,localAddress:this.localAddress,remoteAddress:this.remoteAddress,localHostname:this.localHostname,remoteHostname:this.remoteHostname}}},{"../utils":214,"./NetSimEntity":130}],130:[function(a,b){"use strict";var c=b.exports=function(a,b){void 0===b&&(b={}),this.shard_=a,this.entityID=b.id};c.create=function(a,b,c){var d=new a(b);d.getTable_().create(d.buildRow_(),function(d,e){null===d?c(null,new a(b,e)):c(d,null)})},c.get=function(a,b,c,d){var e=new a(c);e.getTable_().read(b,function(b,e){var f=null;b||(f=new a(c,e)),d(b,f)})},c.prototype.update=function(a){a=a||function(){},this.getTable_().update(this.entityID,this.buildRow_(),a)},c.prototype.destroy=function(a){a=a||function(){},this.getTable_()["delete"](this.entityID,a)},c.prototype.getTable_=function(){throw new Error("Method getTable_ is not implemented.")},c.prototype.buildRow_=function(){return{}}},{}],117:[function(a,b){"use strict";var c=a("./NetSimChunkSizeControl.html"),d=b.exports=function(a,b){this.rootDiv_=a,this.chunkSizeChangeCallback_=b,this.currentChunkSize_=8,this.currentUnits_=["byte"],this.render()};d.prototype.render=function(){var a=$(c({}));this.rootDiv_.html(a),this.rootDiv_.find(".chunk_size_slider").slider({value:this.currentChunkSize_,min:1,max:32,step:1,slide:this.onChunkSizeChange_.bind(this)}),this.setChunkSize(this.currentChunkSize_)},d.prototype.onChunkSizeChange_=function(a,b){var c=b.value;this.setChunkSize(c),this.chunkSizeChangeCallback_(c)},d.prototype.setChunkSize=function(a){var b=this.rootDiv_;this.currentChunkSize_=a,b.find(".chunk_size_slider").slider("option","value",a),b.find(".chunk_size_value").html(a)},d.prototype.setEncoding=function(a){this.currentUnits_="all"===a?["character","number"]:"ascii"===a?["character"]:"decimal"===a?["number"]:["byte"],this.rootDiv_.find(".unit_label").html(this.currentUnits_.join("/"))}},{"./NetSimChunkSizeControl.html":116}],116:[function(require,module,exports){module.exports=function(){var t=function anonymous(locals,filters,escape){escape=escape||function(a){return String(a).replace(/&(?!\w+;)/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")};var buf=[];with(locals||{})!function(){buf.push('<div class="netsim_chunk_size_control">\n  <label for="chunk_size_slider"><span class="chunk_size_value"></span> bits per <span class="unit_label"></span></label>\n  <div class="chunk_size_slider"></div>\n</div>\n')}();return buf.join("")};return function(a){return t(a,require("ejs").filters)}}()},{ejs:235}],115:[function(a,b){"use strict";var c=b.exports=function(){this.isReady=!1,this.whenReadyCallbacks_=[],this.id=void 0,this.name=""};c.currentUser_=null,c.getCurrentUser=function(){return c.currentUser_||(c.currentUser_=new c,$.ajax({url:"/v2/user",type:"get",dataType:"json",success:function(a){c.currentUser_.initialize(a)},error:function(){c.currentUser_.initialize({isSignedIn:!1})}})),c.currentUser_},c.prototype.initialize=function(a){this.id=a.id,this.name=a.name,this.isSignedIn=a.isSignedIn!==!1,this.isReady=!0,this.whenReadyCallbacks_.forEach(function(a){a(this)}.bind(this)),this.whenReadyCallbacks_=[]},c.prototype.whenReady=function(a){this.isReady?a(this):this.whenReadyCallbacks_.push(a)}},{}],45:[function(a,b){"use strict";a("./utils");var c=b.exports,d={NOT_STARTED:0,WORKING:1,SUCCESS:2,FAILURE:3},e=c.Command=function(){this.status_=d.NOT_STARTED};e.prototype.isStarted=function(){return this.status_!==d.NOT_STARTED},e.prototype.isFinished=function(){return this.succeeded()||this.failed()},e.prototype.succeeded=function(){return this.status_===d.SUCCESS},e.prototype.failed=function(){return this.status_===d.FAILURE},e.prototype.begin=function(){this.status_=d.WORKING,this.onBegin_()},e.prototype.succeed=function(){if(!this.isStarted())throw new Error("Command cannot succeed before it begins.");this.status_=d.SUCCESS,this.onEnd_()},e.prototype.fail=function(){if(!this.isStarted())throw new Error("Command cannot fail before it begins.");this.status_=d.FAILURE,this.onEnd_()},e.prototype.onBegin_=function(){},e.prototype.tick=function(){},e.prototype.onEnd_=function(){};var f=c.CommandSequence=function(a){e.call(this),this.commandList_=a,this.currentCommandIndex_=0};f.inherits(e),f.prototype.onBegin_=function(){this.currentCommandIndex_=0,0===this.commandList_.length&&this.succeed()},f.prototype.currentCommand=function(){return this.commandList_[this.currentCommandIndex_]},f.prototype.tick=function(a){for(;this.isStarted()&&!this.isFinished()&&this.currentCommand();)if(this.currentCommand().isStarted()?this.currentCommand().tick(a):this.currentCommand().begin(),this.currentCommand().succeeded())this.currentCommandIndex_++,void 0===this.currentCommand()&&this.succeed();else{if(!this.currentCommand().failed())break;this.fail()}}},{"./utils":214}],17:[function(a,b){"use strict";a("./utils");var c=b.exports,d=function(a){this.apiBaseUrl_=a};d.prototype.get=function(a,b){$.ajax({url:this.apiBaseUrl_+a,type:"get",dataType:"json"}).done(function(a){b(null,a)}).fail(function(a,c,d){b(new Error("textStatus: "+c+"; errorThrown: "+d),null)})},d.prototype.post=function(a,b,c){$.ajax({url:this.apiBaseUrl_+a,type:"post",contentType:"application/json; charset=utf-8",data:JSON.stringify(b)}).done(function(){c(null,null)}).fail(function(a,b,d){c(new Error("textStatus: "+b+"; errorThrown: "+d),null)})},d.prototype.postToGet=function(a,b,c){$.ajax({url:this.apiBaseUrl_+a,type:"post",contentType:"application/json; charset=utf-8",data:JSON.stringify(b)}).done(function(a){c(null,a)}).fail(function(a,b,d){c(new Error("textStatus: "+b+"; errorThrown: "+d),null)})},d.prototype["delete"]=function(a,b){$.ajax({url:this.apiBaseUrl_+a,type:"delete"}).done(function(){b(null,null)}).fail(function(a,c,d){b(new Error("textStatus: "+c+"; errorThrown: "+d),null)})},c.AppsTable=function(){this.requestHelper_=new d("/v3/apps")},c.AppsTable.prototype.readAll=function(a){this.requestHelper_.get("",a)},c.AppsTable.prototype.read=function(a,b){this.requestHelper_.get("/"+a,b)},c.AppsTable.prototype.create=function(a,b){this.requestHelper_.postToGet("",a,b)},c.AppsTable.prototype.update=function(a,b,c){this.requestHelper_.post("/"+a,b,c)},c.AppsTable.prototype["delete"]=function(a,b){this.requestHelper_["delete"]("/"+a,b)},c.SharedTable=function(a,b){c.AppsTable.call(this),this.requestHelper_=new d("/v3/apps/"+a+"/shared-tables/"+b)},c.SharedTable.inherits(c.AppsTable),c.UserTable=function(a,b){c.AppsTable.call(this),this.requestHelper_=new d("/v3/apps/"+a+"/user-tables/"+b)},c.UserTable.inherits(c.AppsTable),c.PropertyBag=function(a){this.requestHelper_=new d("/v3/apps"+a+"/shared-properties")},c.PropertyBag.prototype.readAll=function(a){this.requestHelper_.get("",a)},c.PropertyBag.prototype.read=function(a,b){this.requestHelper_.get("/"+a,b)},c.PropertyBag.prototype.set=function(a,b,c){this.requestHelper_.post("/"+a,b,c)},c.PropertyBag.prototype["delete"]=function(a,b){this.requestHelper_["delete"]("/"+a,b)},c.UserPropertyBag=function(a){c.PropertyBag.call(this,a),this.requestHelper_=new d("/v3/apps/"+a+"/user-properties")},c.UserPropertyBag.inherits(c.PropertyBag)},{"./utils":214}],3:[function(a,b){"use strict";var c=a("./ObservableEvent"),d=window.performance&&window.performance.now?window.performance.now.bind(window.performance):Date.now,e=30,f=1e3/e,g=b.exports=function(){this.enabled=!1,this.clock=new g.Clock,this.tick_=this.buildTickMethod_(),this.tick=new c,this.render=new c};g.Clock=function(){this.time=d(),this.deltaTime=0},g.prototype.buildTickMethod_=function(){var a,b=this;return a=window.requestAnimationFrame?function(c){b.enabled&&(b.clock.deltaTime=c-b.clock.time,b.clock.time=c,b.tick.notifyObservers(b.clock),b.render.notifyObservers(b.clock),requestAnimationFrame(a))}:function(){if(b.enabled){var c=d();b.clock.deltaTime=c-b.clock.time,b.clock.time=c,b.tick.notifyObservers(b.clock),b.render.notifyObservers(b.clock),setTimeout(a,f-b.clock.deltaTime)}}},g.prototype.begin=function(){this.enabled=!0,this.clock.time=d(),this.tick_(this.clock.time)},g.prototype.end=function(){this.enabled=!1}},{"./ObservableEvent":1}],1:[function(a,b){"use strict";var c=b.exports=function(){this.observerList_=[]};c.prototype.register=function(a){var b={toCall:a};return Object.freeze(b),this.observerList_.push(b),b},c.prototype.unregister=function(a){for(var b=0;b<this.observerList_.length;b++)if(a===this.observerList_[b])return this.observerList_.splice(b,1),!0;return!1},c.prototype.notifyObservers=function(){var a=Array.prototype.slice.call(arguments,0);this.observerList_.forEach(function(b){b.toCall.apply(void 0,a)})}},{}]},{},[161]);