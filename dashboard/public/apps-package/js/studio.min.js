require=function a(b,c,d){function e(g,h){if(!c[g]){if(!b[g]){var i="function"==typeof require&&require;if(!h&&i)return i(g,!0);if(f)return f(g,!0);var j=new Error("Cannot find module '"+g+"'");throw j.code="MODULE_NOT_FOUND",j}var k=c[g]={exports:{}};b[g][0].call(k.exports,function(a){var c=b[g][1][a];return e(c?c:a)},k,k.exports,a,b,c,d)}return c[g].exports}for(var f="function"==typeof require&&require,g=0;g<d.length;g++)e(d[g]);return e}({"/home/ubuntu/staging/apps/build/js/studio/main.js":[function(a,b,c){(function(b){var c=a("../appMain");window.Studio=a("./studio"),"undefined"!=typeof b&&(b.Studio=window.Studio);var d=a("./blocks"),e=a("./levels"),f=a("./skins");window.studioMain=function(a){a.skinsModule=f,a.blocksModule=d,c(window.Studio,e,a)}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"../appMain":"/home/ubuntu/staging/apps/build/js/appMain.js","./blocks":"/home/ubuntu/staging/apps/build/js/studio/blocks.js","./levels":"/home/ubuntu/staging/apps/build/js/studio/levels.js","./skins":"/home/ubuntu/staging/apps/build/js/studio/skins.js","./studio":"/home/ubuntu/staging/apps/build/js/studio/studio.js"}],"/home/ubuntu/staging/apps/build/js/studio/studio.js":[function(a,b,c){"use strict";function d(){switch(ra.map=sa.map,ra.wallMap=null,ra.wallMapRequested=null,ra.timeoutFailureTick=sa.timeoutFailureTick||1/0,ra.slowJsExecutionFactor=sa.slowJsExecutionFactor||1,ra.ticksBeforeFaceSouth=ra.slowJsExecutionFactor+ba.valueOr(sa.ticksBeforeFaceSouth,pb),ra.minWorkspaceHeight=sa.minWorkspaceHeight,ra.softButtons_=sa.softButtons||{},ra.protagonistSpriteIndex=ba.valueOr(sa.protagonistSpriteIndex,sa.protaganistSpriteIndex),sa.customGameType){case"Big Game":ra.customLogic=new Z(ra);break;case"Rocket Height":ra.customLogic=new _(ra);break;case"Sam the Bat":ra.customLogic=new aa(ra);break;case"Ninja Cat":ra.customLogic=new Z(ra,{staticPlayer:!0})}T.registerCustomGameLogic(ra.customLogic),sa.avatarList?ra.startAvatars=sa.avatarList.slice():ra.startAvatars=e(ta.avatarList,sa.firstSpriteIndex);for(var a in sa.scale)ra.scale[a]=sa.scale[a];ra.ROWS=ra.map.length,ra.COLS=ra.map[0].length,ra.SQUARE_SIZE=50,ra.HALF_SQUARE=ra.SQUARE_SIZE/2,ra.MARKER_HEIGHT=sa.markerHeight||100,ra.MARKER_WIDTH=sa.markerWidth||100,ra.MAZE_WIDTH=ra.SQUARE_SIZE*ra.COLS,ra.MAZE_HEIGHT=ra.SQUARE_SIZE*ra.ROWS,M.MAZE_WIDTH=ra.MAZE_WIDTH,M.MAZE_HEIGHT=ra.MAZE_HEIGHT}function e(a,b){return b=b||0,ca.flatten([a.slice(b),a.slice(0,b)])}function f(a,b,c,d,e,f){return Math.abs(a-b)<=c&&Math.abs(d-e)<=f}function g(a,b,c,d,e,f){return Math.abs(a-b)<c&&Math.abs(d-e)<f}function h(a,b,c){if(sa.autoArrowSteer){var d;switch(a){case"when-up":d=ia.NORTH;break;case"when-down":d=ia.SOUTH;break;case"when-left":d=ia.WEST;break;case"when-right":d=ia.EAST}d&&ra.queueCmd(null,"move",{spriteIndex:ra.protagonistSpriteIndex||0,dir:d})}ra.eventHandlers.forEach(function(d){if(M.isUsingBlockly()){if(d.name===a&&(b||0===d.cmdQueue.length)){ra.currentCmdQueue=d.cmdQueue;try{d.func(M,S,ra.Globals)}catch(e){}ra.currentCmdQueue=null}}else d.name===a&&ra.JSInterpreter.queueEvent(d.func,c)})}function i(a){for(var b=a.length-1;b>=0;b--)a[b].moveToNextPosition(),a[b].outOfBounds()&&(a[b].removeElement(),a.splice(b,1))}function j(a){for(var b=a.length-1;b>=0;b--)a[b].display()}function k(){if(sa.sortDrawOrder){for(var a=document.getElementById("spriteLayer"),b=[],c=0;c<ra.items.length;c++){var d={};d.element=ra.items[c].getElement(),d.y=ra.items[c].y+ra.items[c].height/2+ra.items[c].renderOffset.y,b.push(d),ra.drawDebugRect("itemLocation",ra.items[c].x,ra.items[c].y,4,4),ra.drawDebugRect("itemBottom",ra.items[c].x,d.y,4,4)}for(c=0;c<ra.sprite.length;c++){var e={};e.element=document.getElementById("sprite"+c),e.y=ra.sprite[c].displayY+ra.sprite[c].height,b.push(e),e={},e.element=document.getElementById("spriteWalk"+c),e.y=ra.sprite[c].displayY+ra.sprite[c].height,b.push(e),ra.drawDebugRect("spriteBottom",ra.sprite[c].x,e.y,4,4)}for(c=0;c<ra.tiles.length;c++){var f={};f.element=document.getElementById("tile_"+c),f.y=ra.tiles[c].bottomY,b.push(f)}for(c=0;c<ra.spriteGoals_.length;c++){var g={};g.element=document.getElementById("spriteFinish"+c);var h=ta.goalCollisionRectHeight||ra.MARKER_HEIGHT;g.y=ra.spriteGoals_[c].y+h,b.push(g)}for(b=ca.sortBy(b,"y"),c=0;c<b.length;++c)a.appendChild(b[c].element)}}function l(a,b,c){var d=c?ra.sprite[a].height:ra.sprite[a].width,e=c?ra.sprite[b].height:ra.sprite[b].width;return P.SPRITE_COLLIDE_DISTANCE_SCALING*(d+e)/2}function m(a,b,c){var d=ta.spriteCollisionRectWidth||ra.sprite[a].width,e=ta.spriteCollisionRectHeight||ra.sprite[a].height,f=ta.itemCollisionRectWidth||b.width,g=ta.itemCollisionRectHeight||b.height,h=c?e:d,i=c?g:f;return P.SPRITE_COLLIDE_DISTANCE_SCALING*(h+i)/2}function n(a,b,c){var d,e=c?a.height:a.width;return d="left"===b||"right"===b?c?ra.MAZE_HEIGHT:0:c?0:ra.MAZE_WIDTH,(e+d)/2}function o(a,b,c,d,e){for(var g=d.length-1;g>=0;g--){var i=d[g],j=i.getNextPosition();i.isFading&&i.isFading()||(ra.drawDebugRect("itemCollision",j.x,j.y,ta.itemCollisionRectWidth||i.width,ta.itemCollisionRectHeight||i.height),ra.drawDebugRect("spriteCollision",b,c,ta.spriteCollisionRectWidth||ra.sprite[a].width,ta.spriteCollisionRectHeight||ra.sprite[a].height),f(b,j.x,m(a,i,!1),c,j.y,m(a,i,!0))?i.startCollision(a)&&(ra.currentEventParams={eventObject:i},H(a,i.className,!0),ra.currentEventParams=null,e&&(1===d.length&&d===ra.items&&h("whenGetAllItems"),i.beginRemoveElement?i.beginRemoveElement():(i.removeElement(),d.splice(g,1)))):i.endCollision(a))}}function p(a,b,c,d){for(var e=0;e<xa.length&&sa.edgeCollisions;e++){var g,h,i=xa[e];switch(i){case"top":g=ra.MAZE_WIDTH/2,h=0;break;case"left":g=0,h=ra.MAZE_HEIGHT/2;break;case"bottom":g=ra.MAZE_WIDTH/2,h=ra.MAZE_HEIGHT;break;case"right":g=ra.MAZE_WIDTH,h=ra.MAZE_HEIGHT/2}f(b,g,n(a,i,!1),c,h,n(a,i,!0))?a.startCollision(i)&&d(i):a.endCollision(i)}}function q(a){return function(b){H(a,b)}}function r(){u();for(var a=0;a<ra.spriteCount;a++){var b=ra.sprite[a];if(b.visible){for(var c=b.width/2,d=b.height/2,e=Za(a,!1,!1),g=Za(a,!0,!1),h=e+c,i=g+d,j=0;j<ra.spriteCount;j++)if(a!=j&&ra.sprite[j].visible){var k=Za(j,!1,!1)+ra.sprite[j].width/2,m=Za(j,!0,!1)+ra.sprite[j].height/2;f(h,k,l(a,j,!1),i,m,l(a,j,!0))?ra.collideSpriteWith(a,j):b.endCollision(j),K(a,j)}for(o(a,h,i,ra.projectiles),o(a,h,i,ra.items,sa.removeItemsWhenActorCollides),p(b,h,i,q(a)),sa.wallMapCollisions&&(ra.willSpriteTouchWall(b,e,g)?(sa.blockMovingIntoWalls&&(Ya(a,!1),Ya(a,!0)),ra.collideSpriteWith(a,"wall")):b.endCollision("wall")),K(a,"wall"),j=0;j<xa.length;j++)K(a,xa[j]);for(j=0;j<ta.ProjectileClassNames.length;j++)K(a,ta.ProjectileClassNames[j]);for(j=0;j<ta.ItemClassNames.length;j++)K(a,ta.ItemClassNames[j])}}}function s(a){return function(b){ra.currentEventParams={eventObject:a},I(a.className,b,!0),ra.currentEventParams=null}}function t(){for(var a=ra.items.length-1;a>=0;a--){var b=ra.items[a];b.update(),b.hasCompletedFade&&b.hasCompletedFade()&&(b.removeElement(),ra.items.splice(a,1))}}function u(){for(var a=0;a<ra.items.length;a++){var b=ra.items[a],c=b.getNextPosition();if(!b.isFading||!b.isFading()){sa.wallMapCollisions&&(ra.willCollidableTouchWall(b,c.x,c.y)?(ra.currentEventParams={eventObject:b},ra.collideItemWith(b,"wall",!0),ra.currentEventParams=null):b.endCollision("wall")),sa.edgeCollisions&&p(b,c.x,c.y,s(b)),J(b.className,"wall");for(var d=0;d<xa.length;d++)J(b.className,xa[d])}}}function v(a){for(var b=0;b<a.length;b++)a[b].removeElement();a.length=0}function w(){return sa.coordinateGridBackground?"grid":sa.background||ta.defaultBackground}function x(){return sa.wallMapCollisions?sa.wallMap||ta.defaultWallMap:void 0}function y(a,b,c){var d=b+": ";void 0!==c&&(d+="Line: "+c+": "),d+=a,console.log&&console.log(d),void 0!==c&&ga.addRuntimeAnnotation(b,c,a)}function z(a,b){!b&&a instanceof SyntaxError&&(b=a.loc.line,R.selectEditorRowColError(M.editor,b-1,a.loc.column)),ra.JSInterpreter&&(ra.JSInterpreter.selectCurrentCode("ace_error"),b||(b=1+ra.JSInterpreter.getNearestUserCodeLine())),y(String(a),lb.ERROR,b),ra.executionError={err:a,lineNumber:b},a instanceof SyntaxError?(ra.preExecutionFailure=!0,ra.testResults=oa.SYNTAX_ERROR_FAIL,ra.onPuzzleComplete()):sa.freePlay||ra.onPuzzleComplete()}function A(a,b){var c=ra.sprite[a],d=0,e=new Date,f=e-ra.startTime;return b&&b.walkDirection?P.frameDirTableWalking[c.displayDir]:b&&b.walkFrame&&c.timePerFrame?Math.floor(f/c.timePerFrame)%c.frameCounts.walk:8===c.frameCounts.turns&&c.displayDir!==ia.SOUTH?c.frameCounts.normal+c.frameCounts.animation+1+P.frameDirTable[c.displayDir]:7===c.frameCounts.turns&&c.displayDir!==ia.SOUTH?c.frameCounts.normal+c.frameCounts.animation+P.frameDirTable[c.displayDir]:(1===c.frameCounts.animation&&ra.tickCount&&1===Math.round((ra.tickCount+a*nb)/mb)%ob&&(d=c.frameCounts.normal),c.frameCounts.normal>1&&c.timePerFrame&&(d=Math.floor(f/c.timePerFrame)%c.frameCounts.normal),!d&&c.emotion!==la.NORMAL&&c.frameCounts.emotions>0&&(d=c.frameCounts.normal+c.frameCounts.animation+c.frameCounts.turns+(c.emotion-1)),d)}function B(a){var b=ra.sprite[a];return b.frameCounts.normal+b.frameCounts.animation+b.frameCounts.turns+b.frameCounts.emotions}function C(a,b,c){return/.gif$/.test(ta[a])?1:b&&b[a]&&b[a].frames?b[a].frames:c}function D(a){return/^\d*$/.test(a)}function E(a){return-1!==xa.indexOf(a)}function F(a){return-1!==ta.ProjectileClassNames.indexOf(a)}function G(a){return-1!==ta.ItemClassNames.indexOf(a)}function H(a,b,c){var d="whenSpriteCollided-"+a+"-";h(d+b,c),h(d+"anything",c),D(b)?h(d+"any_actor",c):E(b)?h(d+"any_edge",c):F(b)?h(d+"any_projectile",c):G(b)&&h(d+"any_item",c)}function I(a,b,c){var d="whenItemCollided-"+a+"-";h(d+b,c),E(b)&&h(d+"any_edge",c)}function J(a,b){var c="whenItemCollided-"+a+"-";ra.executeQueue(c+b),E(b)&&ra.executeQueue(c+"any_edge")}function K(a,b){var c="whenSpriteCollided-"+a+"-";ra.executeQueue(c+b),ra.executeQueue(c+"any_actor"),ra.executeQueue(c+"anything"),E(b)?ra.executeQueue(c+"any_edge"):F(b)?ra.executeQueue(c+"any_projectile"):G(b)&&ra.executeQueue(c+"any_item")}function L(a,b){var c=ta.goalCollisionRectWidth||ra.MARKER_WIDTH,d=ta.goalCollisionRectHeight||ra.MARKER_HEIGHT,e=function(b){var e=b?a.height:a.width,f=b?d:c;return P.FINISH_COLLIDE_DISTANCE_SCALING*(e+f)/2},g=a.x+(ta.itemCollisionRectWidth||a.width)/2,h=a.y+(ta.itemCollisionRectHeight||a.height)/2,i=b.x+c/2,j=b.y+d/2;return ra.drawDebugRect("goalCollisionSprite",g,h,a.width,a.height),ra.drawDebugRect("goalCollisionGoal",i,j,c,d),f(g,i,e(!1),h,j,e(!0))}var M=a("../StudioApp").singleton,N=a("../locale"),O=a("./locale"),P=(a("../skins"),a("./constants")),Q=a("../constants"),R=a("../codegen"),S=a("./api"),T=a("./blocks"),U=a("../templates/page.html.ejs"),V=a("../dom"),W=a("./collidable"),X=a("./projectile"),Y=a("./Item"),Z=a("./bigGameLogic"),_=a("./rocketHeightLogic"),aa=a("./samBatLogic"),ba=(a("../xml").parseElement,a("../utils")),ca=(a("../dropletUtils"),ba.getLodash()),da=a("./dropletConfig"),ea=ba.getHammer(),fa=a("../JSInterpreter"),ga=a("../acemode/annotationList"),ha=a("./spriteActions");"undefined"!=typeof SVGElement&&(a("../canvg/rgbcolor.js"),a("../canvg/StackBlur.js"),a("../canvg/canvg.js"),a("../canvg/svg_todataurl"));var ia=P.Direction,ja=P.NextTurn,ka=P.SquareType,la=P.Emotions,ma=Q.KeyCodes,na=M.ResultType,oa=M.TestResults,pa="http://www.w3.org/2000/svg",qa=!1,ra=b.exports;ra.keyState={},ra.gesturesObserved={},ra.btnState={};var sa,ta,ua={UP:0,DOWN:1},va={LEFT:"leftButton",UP:"upButton",RIGHT:"rightButton",DOWN:"downButton"},wa=25,xa=["top","left","bottom","right"];M.setCheckForEmptyBlocks(!0);var ya={whenRun:"whenGameStarts",whenDown:"when-down",whenUp:"when-up",whenLeft:"when-left",whenRight:"when-right",whenGetCharacter:"whenSpriteCollided-"+(ra.protagonistSpriteIndex||0)+"-any_item",whenTouchCharacter:"whenSpriteCollided-"+(ra.protagonistSpriteIndex||0)+"-any_item",whenTouchObstacle:"whenSpriteCollided-"+(ra.protagonistSpriteIndex||0)+"-wall",whenGetAllCharacters:"whenGetAllItems",whenTouchAllCharacters:"whenGetAllItems",whenTouchGoal:"whenTouchGoal",whenTouchAllGoals:"whenTouchAllGoals",whenScore1000:"whenScore1000"};ra.scale={snapRadius:1,stepSpeed:33};var za=5e3,Aa=60,Ba=100,Ca=20,Da=24,Ea=7,Fa=5,Ga=15,Ha=360,Ia=Fa+Ga+Ea*Da,Ja=20,Ka=50,La=5,Ma=10,Na=20,Oa=4,Pa=5,Qa=180,Ra=20+Oa*Na,Sa=60,Ta=500,Ua={text:O.shareStudioTwitter(),hashtag:"StudioCode"},Va=function(){var a,b=document.getElementById("svgStudio");b.setAttribute("width",ra.MAZE_WIDTH),b.setAttribute("height",ra.MAZE_HEIGHT);var c=new ea(b);c.on("tap",ra.onSvgClicked),c.on("drag",ra.onSvgDrag);var d=document.getElementById("visualizationColumn");d.style.width=ra.MAZE_WIDTH+"px";var e=document.createElementNS(pa,"g");if(e.setAttribute("id","backgroundLayer"),b.appendChild(e),ta.background){var f=document.createElementNS(pa,"image");f.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",ta[ra.background].background),f.setAttribute("id","background"),f.setAttribute("height",ra.MAZE_HEIGHT),f.setAttribute("width",ra.MAZE_WIDTH),f.setAttribute("x",0),f.setAttribute("y",0),e.appendChild(f)}sa.coordinateGridBackground&&M.createCoordinateGridBackground({svg:"backgroundLayer",origin:0,firstLabel:100,lastLabel:300,increment:100});var g=document.createElementNS(pa,"g");if(g.setAttribute("id","spriteLayer"),b.appendChild(g),sa.wallMapCollisions&&ra.drawMapTiles(),ra.spriteStart_){for(a=0;a<ra.spriteCount;a++){var h=document.createElementNS(pa,"clipPath");h.setAttribute("id","spriteClipPath"+a);var i=document.createElementNS(pa,"rect");i.setAttribute("id","spriteClipRect"+a),h.appendChild(i),g.appendChild(h);var j=document.createElementNS(pa,"image");j.setAttribute("id","sprite"+a),j.setAttribute("clip-path","url(#spriteClipPath"+a+")"),g.appendChild(j);var k=document.createElementNS(pa,"image");k.setAttribute("id","spriteWalk"+a),k.setAttribute("clip-path","url(#spriteWalkClipPath"+a+")"),g.appendChild(k);var l=document.createElementNS(pa,"clipPath");l.setAttribute("id","spriteWalkClipPath"+a);var m=document.createElementNS(pa,"rect");m.setAttribute("id","spriteWalkClipRect"+a),l.appendChild(m),g.appendChild(l),V.addMouseDownTouchEvent(j,Wa(this,ra.onSpriteClicked,a))}for(a=0;a<ra.spriteCount;a++){var n=document.createElementNS(pa,"g");n.setAttribute("id","speechBubble"+a),n.setAttribute("visibility","hidden");var o=document.createElementNS(pa,"path");o.setAttribute("id","speechBubblePath"+a),o.setAttribute("class","studio-speech-bubble-path");var p=document.createElementNS(pa,"text");p.setAttribute("id","speechBubbleText"+a),p.setAttribute("class","studio-speech-bubble"),n.appendChild(o),n.appendChild(p),b.appendChild(n)}}var q=ba.valueOr(sa.goalOverride,{}),r=1;if(q.goalAnimation&&ta.animatedGoalFrames&&(r=ta.animatedGoalFrames),ra.spriteGoals_)for(a=0;a<ra.spriteGoals_.length;a++){var s=q.imageWidth||ra.MARKER_WIDTH,t=q.imageHeight||ra.MARKER_HEIGHT,u=document.createElementNS(pa,"clipPath");u.setAttribute("id","finishClipPath"+a);var v=document.createElementNS(pa,"rect");v.setAttribute("id","finishClipRect"+a),v.setAttribute("width",s),v.setAttribute("height",t),u.appendChild(v),b.appendChild(u);var w=document.createElementNS(pa,"image");w.setAttribute("id","spriteFinish"+a),w.setAttribute("width",r*s),w.setAttribute("height",t),w.setAttribute("clip-path","url(#finishClipPath"+a+")"),b.appendChild(w)}var x=document.createElementNS(pa,"text");if(x.setAttribute("id","score"),x.setAttribute("class","studio-score"),x.setAttribute("x",ra.MAZE_WIDTH/2),x.setAttribute("y",Sa),x.appendChild(document.createTextNode("")),x.setAttribute("visibility","hidden"),b.appendChild(x),sa.floatingScore){var y=document.createElementNS(pa,"text");y.setAttribute("id","floatingScore"),y.setAttribute("class","studio-floating-score"),y.setAttribute("x",ra.MAZE_WIDTH/2),y.setAttribute("y",Sa),y.appendChild(document.createTextNode("")),y.setAttribute("visibility","hidden"),b.appendChild(y)}var z=document.createElementNS(pa,"text");z.setAttribute("id","titleScreenTitle"),z.setAttribute("class","studio-ts-title"),z.setAttribute("x",ra.MAZE_WIDTH/2),z.setAttribute("y",Aa),z.appendChild(document.createTextNode("")),z.setAttribute("visibility","hidden"),b.appendChild(z);var A=document.createElementNS(pa,"g"),B=(ra.MAZE_WIDTH-Ha)/2;A.setAttribute("id","titleScreenTextGroup"),A.setAttribute("x",B),A.setAttribute("y",Ba),A.setAttribute("transform","translate("+B+","+Ba+")"),A.setAttribute("visibility","hidden");var C=document.createElementNS(pa,"rect");C.setAttribute("id","titleScreenTextRect"),C.setAttribute("x",0),C.setAttribute("y",0),C.setAttribute("width",Ha),C.setAttribute("class","studio-ts-text-rect");var D=document.createElementNS(pa,"text");D.setAttribute("id","titleScreenText"),D.setAttribute("class","studio-ts-text"),D.setAttribute("x",Ha/2),D.setAttribute("y",0),D.appendChild(document.createTextNode("")),A.appendChild(C),A.appendChild(D),b.appendChild(A)},Wa=function(a,b,c){return function(){var d=Array.prototype.slice.apply(arguments).concat(c);b.apply(a,d)}},Xa=function(a,b,c){var d=0;return ra.eventHandlers.forEach(function(e){var f=e.cmdQueue[0];if(f&&"moveDistance"===f.name&&f.opts.spriteIndex===a){var g,h=Math.min(f.opts.queuedDistance,ra.sprite[f.opts.spriteIndex].speed);switch(f.opts.dir){case ia.NORTH:g=b?-1:0;break;case ia.WEST:g=b?0:-1;break;case ia.SOUTH:g=b?1:0;break;case ia.EAST:g=b?0:1}c&&0!==g&&(f.opts.queuedDistance-=h,"0.00"===Math.abs(f.opts.queuedDistance).toFixed(2)&&(f.opts.queuedDistance=0)),d+=h*g}}),d},Ya=function(a,b){ra.eventHandlers.forEach(function(c){var d=c.cmdQueue[0];if(d&&"moveDistance"===d.name&&d.opts.spriteIndex===a){var e=d.opts.dir;!b||e!==ia.NORTH&&e!==ia.SOUTH?b||e!==ia.EAST&&e!==ia.WEST||(d.opts.queuedDistance=0):d.opts.queuedDistance=0}})},Za=function(a,b,c){var d=b?ra.sprite[a].y:ra.sprite[a].x;return d+Xa(a,b,c)},$a=function(a){var b=ra.sprite[a],c=b.x,d=b.y,e=Za(a,!1,!0),f=Za(a,!0,!0);if(sa.allowSpritesOutsidePlayspace)b.x=e,b.y=f;else{var g=ra.getPlayspaceBoundaries(b),h=Math.min(g.right,Math.max(g.left,e));e!=h&&Ya(a,!1),b.x=h;var i=Math.min(g.bottom,Math.max(g.top,f));f!=i&&Ya(a,!0),b.y=i}(c!==b.x||d!==b.y)&&(b.lastMove=ra.tickCount)},_a=function(a){for(;a.svgText.firstChild;)a.svgText.removeChild(a.svgText.firstChild);var b=a.text.toString().split(" "),c=document.createElementNS("http://www.w3.org/2000/svg","tspan");c.setAttribute("x",a.width/2),c.setAttribute("dy",a.lineHeight+a.topMargin);var d=document.createTextNode(b[0]);c.appendChild(d),a.svgText.appendChild(c);for(var e=1,f=1;f<b.length;f++){var g=c.firstChild.data.length;if(c.firstChild.data+=" "+b[f],c.getComputedTextLength&&c.getComputedTextLength()>a.width-2*a.sideMargin){if(c.firstChild.data=c.firstChild.data.slice(0,g),a.maxLines===e)return a.fullHeight;c=document.createElementNS("http://www.w3.org/2000/svg","tspan"),c.setAttribute("x",a.width/2),c.setAttribute("dy",a.lineHeight),d=document.createTextNode(b[f]),c.appendChild(d),a.svgText.appendChild(c),e++}}var h=a.maxLines-Math.max(1,e);return a.fullHeight-h*a.lineHeight};ra.initAutoHandlers=function(a){for(var b in a){var c=ra.JSInterpreter.findGlobalFunction(b);c&&fb(ra.eventHandlers,a[b],c)}},ra.callApiCode=function(a,b){fb(ra.eventHandlers,a,b),h(a),ra.executeQueue(a)},ra.onTick=function(){ra.tickCount++;var a;ra.clearDebugElements();var b=ra.pauseInterpreter||0!==(ra.tickCount-1)%ra.slowJsExecutionFactor;if(ra.yieldThisTick=!1,ra.customLogic&&ra.customLogic.onTick(),1===ra.tickCount&&h("whenGameStarts"),!b){for(ra.executeQueue("whenGameStarts"),h("repeatForever"),ra.executeQueue("repeatForever"),a=0;a<ra.spriteCount;a++)ra.executeQueue("whenSpriteClicked-"+a);for(var c in ma)if(ra.keyState[ma[c]]&&"keydown"===ra.keyState[ma[c]])switch(ma[c]){case ma.LEFT:h("when-left");break;case ma.UP:h("when-up");break;case ma.RIGHT:h("when-right");break;case ma.DOWN:h("when-down")}for(var d in va)if(ra.btnState[va[d]]&&ra.btnState[va[d]]===ua.DOWN)switch(va[d]){case va.LEFT:h("when-left");break;case va.UP:h("when-up");break;case va.RIGHT:h("when-right");break;case va.DOWN:h("when-down")}for(var e in ra.gesturesObserved){switch(e){case"left":h("when-left");break;case"up":h("when-up");break;case"right":h("when-right");break;case"down":h("when-down")}0===ra.gesturesObserved[e]--&&delete ra.gesturesObserved[e]}ra.executeQueue("when-left"),ra.executeQueue("when-up"),ra.executeQueue("when-right"),ra.executeQueue("when-down"),t(),r()}ra.JSInterpreter&&!b&&ra.JSInterpreter.executeInterpreter(1===ra.tickCount);var f=!1;for(a=0;a<ra.spriteCount;a++){b||$a(a);var g=!0;ba.valueOr(sa.ticksBeforeFaceSouth,ra.ticksBeforeFaceSouth);ra.tickCount-ra.sprite[a].lastMove>ra.ticksBeforeFaceSouth&&(ra.sprite[a].dir=ia.SOUTH,g=!1),ra.sprite[a].lastMove===1/0&&(g=!1),ra.displaySprite(a,g),ra.animateGoals();var l=ra.sprite[a];l.hasActions()&&(f=!0),ra.drawDebugRect("spriteCenter",ra.sprite[a].x,ra.sprite[a].y,5,5)}b||(i(ra.projectiles),i(ra.items)),j(ra.projectiles),j(ra.items),ra.updateFloatingScore(),ra.drawTimeoutRect(),k();var m=(new Date).getTime();!ra.succeededTime&&Bb()&&(ra.succeededTime=m),ra.succeededTime&&!f&&(!sa.delayCompletion||m>ra.succeededTime+sa.delayCompletion)&&ra.onPuzzleComplete()},ra.willSpriteTouchWall=function(a,b,c){var d=b+a.width/2,e=c+a.height/2;return ra.willCollidableTouchWall(a,d,e)},ra.willSpriteLeavePlayspace=function(a,b,c){var d=ra.getPlayspaceBoundaries(a);return b<d.left||b>d.right||c<d.top||c>d.bottom},ra.getWallValue=function(a,b){return 0>a||a>=ra.ROWS||0>b||b>=ra.COLS?0:ra.wallMap?ta[ra.wallMap]?ta[ra.wallMap][a][b]<<P.WallCoordsShift:0:ra.map[a][b]&P.WallAnyMask},ra.willCollidableTouchWall=function(a,b,c){var d=a.height,e=a.width;sa.gridAlignedMovement||(b+=ta.wallCollisionRectOffsetX,c+=ta.wallCollisionRectOffsetY,d=ta.wallCollisionRectHeight||d,e=ta.wallCollisionRectWidth||e),ra.drawDebugRect("avatarCollision",b,c,e,d);for(var f=Math.floor(b)+1,h=Math.floor(c)+1,i=Math.floor(b/ra.SQUARE_SIZE),j=Math.floor(c/ra.SQUARE_SIZE),k=Math.max(0,i-f);k<Math.min(ra.COLS,i+f);k++)for(var l=Math.max(0,j-h);l<Math.min(ra.ROWS,j+h);l++)if(ra.getWallValue(l,k)&&g(b,(k+.5)*ra.SQUARE_SIZE,ra.SQUARE_SIZE/2+e/2,c,(l+.5)*ra.SQUARE_SIZE,ra.SQUARE_SIZE/2+d/2))return!0;return!1},ra.onSvgDrag=function(a){ra.tickCount>0&&(ra.gesturesObserved[a.gesture.direction]=Math.round(a.gesture.distance/wa),a.gesture.preventDefault())},ra.onKey=function(a){ra.keyState[a.keyCode]=a.type,ra.tickCount>0&&a.keyCode>=ma.LEFT&&a.keyCode<=ma.DOWN&&a.preventDefault()},ra.onArrowButtonDown=function(a,b){ra.btnState[b]=ua.DOWN,a.preventDefault()},ra.onSpriteClicked=function(a,b){ra.tickCount>0&&h("whenSpriteClicked-"+b),a.preventDefault()},ra.onSvgClicked=function(a){ra.tickCount>0&&ra.eventHandlers.forEach(function(a){var b=a.cmdQueue[0];b&&b.opts.waitForClick&&!b.opts.complete&&(b.opts.waitCallback&&b.opts.waitCallback(),b.opts.complete=!0)}),a.preventDefault()},ra.onArrowButtonUp=function(a,b){ra.btnState[b]=ua.UP},ra.onMouseUp=function(a){ra.btnState={}},ra.initSprites=function(){ra.spriteCount=0,ra.sprite=[],ra.startTime=null,ra.spriteGoals_=[];for(var a=0;a<ra.ROWS;a++)for(var b=0;b<ra.COLS;b++)ra.map[a][b]&ka.SPRITEFINISH?ra.spriteGoals_.push({x:b*ra.SQUARE_SIZE,y:a*ra.SQUARE_SIZE,finished:!1}):ra.map[a][b]&ka.SPRITESTART&&(0===ra.spriteCount&&(ra.spriteStart_=[]),ra.spriteStart_[ra.spriteCount]={x:b*ra.SQUARE_SIZE,y:a*ra.SQUARE_SIZE},ra.spriteCount++);M.isUsingBlockly()&&(T.setSpriteCount(Blockly,ra.spriteCount),T.setStartAvatars(ra.startAvatars),sa.projectileCollisions&&T.enableProjectileCollisions(Blockly),sa.edgeCollisions&&T.enableEdgeCollisions(Blockly),sa.allowSpritesOutsidePlayspace&&T.enableSpritesOutsidePlayspace(Blockly))},ra.initReadonly=function(a){ta=a.skin,sa=a.level,d(),a.appMsg=O,ra.initSprites(),M.initReadonly(a)},ra.init=function(b){M.reset=this.reset.bind(this),M.runButtonClick=this.runButtonClick.bind(this),ra.projectiles=[],ra.items=[],ra.itemSpeed={},ra.itemActivity={},ra.eventHandlers=[],ra.perExecutionTimeouts=[],ra.tickIntervalId=null,ra.tiles=[],ra.tilesDrawn=!1,ra.clearEventHandlersKillTickLoop(),ta=b.skin,sa=b.level;var c=!!sa.useContractEditor;b.grayOutUndeletableBlocks=c,d(),ra.background=w(),ra.customLogic&&(ta.staticAvatar=null,ta.smallStaticAvatar=null,ta.failureAvatar=null,ta.winAvatar=null),window.addEventListener("keydown",ra.onKey,!1),window.addEventListener("keyup",ra.onKey,!1);var e=!sa.isProjectLevel,f=ca.isEmpty(sa.softButtons),g=a("./controls.html.ejs")({assetUrl:M.assetUrl,finishButton:f&&e}),h=a("./extraControlRows.html.ejs")({assetUrl:M.assetUrl,finishButton:!f&&e});b.html=U({assetUrl:M.assetUrl,data:{localeDirection:M.localeDirection(),visualization:a("./visualization.html.ejs")(),controls:g,extraControlRows:h,blockUsed:void 0,idealBlockNumber:void 0,editCode:sa.editCode,blockCounterClass:"block-counter-default",inputOutputTable:sa.inputOutputTable,readonlyWorkspace:b.readonlyWorkspace}}),b.loadAudio=function(){ta.soundFiles={},ta.sounds.forEach(function(a){ta.soundFiles[a]=[ta.assetUrl(a+".mp3"),ta.assetUrl(a+".ogg")],M.loadAudio(ta.soundFiles[a],a)})},b.afterInject=function(){for(var a in va)V.addMouseUpTouchEvent(document.getElementById(va[a]),Wa(this,ra.onArrowButtonUp,va[a])),V.addMouseDownTouchEvent(document.getElementById(va[a]),Wa(this,ra.onArrowButtonDown,va[a]));document.addEventListener("mouseup",ra.onMouseUp,!1),M.isUsingBlockly()&&(Blockly.HSV_SATURATION=.6,Blockly.SNAP_RADIUS*=ra.scale.snapRadius,Blockly.contractEditor&&Blockly.contractEditor.registerTestHandler(ra.getStudioExampleFailure)),Va()},b.afterClearPuzzle=function(){M.resetButtonClick(),ga.clearRuntimeAnnotations()},b.twitter=Ua,b.makeYourOwn=b.share,b.makeString=O.makeYourOwn(),b.makeUrl="http://code.org/studio",b.makeImage=M.assetUrl("media/promo.png"),b.enableShowCode=ba.valueOr(M.editCode,!1),b.varsInGlobals=!0,b.dropletConfig=da,b.dropIntoAceAtLineStart=!0,b.unusedConfig=[];for(var i in ta.AutohandlerTouchItems)ya[i]="whenSpriteCollided-"+(ra.protagonistSpriteIndex||0)+"-"+ta.AutohandlerTouchItems[i];for(i in ta.AutohandlerTouchAllItems)ya[i]="whenGetAll-"+ta.AutohandlerTouchAllItems[i];for(i in sa.autohandlerOverrides)ya[i]=sa.autohandlerOverrides[i];for(var j in ya)b.unusedConfig.push(j);b.appMsg=O,ra.initSprites(),M.init(b);var k=document.getElementById("finishButton");k&&V.addClickTouchEvent(k,ra.onPuzzleComplete),b.skin.preloadAssets&&(db(),cb(),bb())};var ab=function(a){var b=new Image;b.src=a},bb=function(){for(var a=ta.backgroundChoicesK1,b=0;b<a.length;b++)ab(a[b][0])},cb=function(){for(var a=0;a<ta.ProjectileClassNames.length;a++)ab(ta[ta.ProjectileClassNames[a]]);for(a=0;a<ta.ItemClassNames.length;a++)ab(ta[ta.ItemClassNames[a]])},db=function(){for(var a=0;a<ta.avatarList.length;a++)ab(ta[ta.avatarList[a]].sprite)};ra.clearEventHandlersKillTickLoop=function(){ra.eventHandlers.forEach(function(a){var b=a.cmdQueue[0];b&&b.opts.waitTimeout&&!b.opts.complete&&window.clearTimeout(b.opts.waitTimeout)}),ra.eventHandlers=[],ra.perExecutionTimeouts.forEach(function(a){clearTimeout(a)}),clearInterval(ra.tickIntervalId),ra.perExecutionTimeouts=[],ra.tickCount=0;for(var a=0;a<ra.spriteCount;a++)ra.sprite[a]&&ra.sprite[a].bubbleTimeout&&window.clearTimeout(ra.sprite[a].bubbleTimeout);v(ra.projectiles),v(ra.items)},ra.reset=function(a){var b;ra.clearEventHandlersKillTickLoop();var c=document.getElementById("svgStudio");ra.customLogic&&ra.customLogic.reset();var d=0;for(b=0;b<ra.softButtons_.length;b++)document.getElementById(ra.softButtons_[b]).style.display="inline",d++;if(d){var e=document.getElementById("soft-buttons");e.className="soft-buttons-"+d}for(ra.preExecutionFailure=!1,ra.message=null,ra.pauseInterpreter=!1,ra.playerScore=0,ra.scoreText=null,document.getElementById("score").setAttribute("visibility","hidden"),sa.floatingScore&&document.getElementById("floatingScore").setAttribute("visibility","hidden"),document.getElementById("titleScreenTitle").setAttribute("visibility","hidden"),document.getElementById("titleScreenTextGroup").setAttribute("visibility","hidden"),ra.background=null,ra.wallMap=null,ra.wallMapRequested=null,ra.setBackground({value:w()}),ra.gesturesObserved={},ra.currentCmdQueue=null,ra.sayComplete=0,ra.playSoundCount=0,ra.trackedBehavior={removedItemCount:0,touchedHazardCount:0,setActivityRecord:null,hasSetBot:!1,hasSetBotSpeed:!1,hasSetBackground:!1,hasSetMap:!1,hasAddedItem:!1,hasWonGame:!1,hasLostGame:!1},ra.lastMoveSingleDir=null,sa.goal&&(sa.goal.successState={}),ra.Globals={},M.editCode&&(ra.executionError=null,ra.JSInterpreter=null),b=0;b<ra.spriteCount;b++){ra.sprite[b]=new W({x:ra.spriteStart_[b].x,y:ra.spriteStart_[b].y,displayX:ra.spriteStart_[b].x,displayY:ra.spriteStart_[b].y,speed:P.DEFAULT_SPRITE_SPEED,size:P.DEFAULT_SPRITE_SIZE,dir:ia.NONE,displayDir:ia.SOUTH,emotion:sa.defaultEmotion||la.NORMAL,lastMove:1/0,visible:!sa.spritesHiddenToStart});var f={spriteIndex:b,value:ra.startAvatars[b%ra.startAvatars.length],forceHidden:sa.spritesHiddenToStart};ra.setSprite(f),ra.displaySprite(b),document.getElementById("speechBubble"+b).setAttribute("visibility","hidden"),ra.sprite[b].setOpacity(1);var g=document.getElementById("explosion"+b);g&&g.setAttribute("visibility","hidden")}ra.itemSpeed={};for(var h in ta.specialItemProperties)ra.itemSpeed[h]=ta.specialItemProperties[h].speed;ra.itemActivity={};for(h in ta.specialItemProperties)ra.itemActivity[h]=ta.specialItemProperties[h].activity;ra.createLevelItems(c);var i=x();for(i&&ra.setMap({value:x()}),b=0;b<ra.spriteCount;b++)ra.displaySprite(b);this.resetGoalSprites(),k(),ra.levelRestarted=!0,ra.succeededTime=null},ra.resetGoalSprites=function(){ra.touchAllGoalsEventFired=!1;for(var a=0;a<ra.spriteGoals_.length;a++){ra.spriteGoals_[a].finished=!1,ra.spriteGoals_[a].startFadeTime=null;var b=ba.valueOr(sa.goalOverride,{}),c=ba.valueOr(b.goalRenderOffsetX,ba.valueOr(ta.goalRenderOffsetX,0)),d=ba.valueOr(b.goalRenderOffsetY,ba.valueOr(ta.goalRenderOffsetY,0)),e=document.getElementById("spriteFinish"+a);e.setAttribute("x",ra.spriteGoals_[a].x+c),e.setAttribute("y",ra.spriteGoals_[a].y+d),e.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",ra.getGoalAssetFromSkin()),e.setAttribute("opacity",1);var f=document.getElementById("finishClipRect"+a);f.setAttribute("x",ra.spriteGoals_[a].x+c),f.setAttribute("y",ra.spriteGoals_[a].y+d)}},ra.getGoalAssetFromSkin=function(){var a=ta.goal;return sa.goalOverride&&(sa.goalOverride.goalAnimation?a=ta[sa.goalOverride.goalAnimation]:sa.goalOverride.goalImage&&(a=ta[sa.goalOverride.goalImage])),a},ra.getStudioExampleFailure=function(a){try{var b=a.getInputTargetBlock("ACTUAL"),c=a.getInputTargetBlock("EXPECTED");M.feedback_.throwOnInvalidExampleBlocks(b,c);var d=Blockly.Generator.blockSpaceToCode("JavaScript",["functional_definition"]),e=Blockly.Generator.blocksToCode("JavaScript",[a]);if(e){var f=R.evalWith(d+"; return"+e,{StudioApp:M,Studio:S,Globals:ra.Globals});return f?null:"Does not match definition."}return"No example code."}catch(g){return"Execution error: "+g.message}},ra.runButtonClick=function(){var a=document.getElementById("runButton"),b=document.getElementById("resetButton");if(b.style.minWidth||(b.style.minWidth=a.offsetWidth+"px"),M.toggleRunReset("reset"),M.isUsingBlockly()&&Blockly.mainBlockSpace.traceOn(!0),M.reset(!1),M.attempts++,ra.startTime=new Date,ra.execute(),sa.freePlay&&!sa.isProjectLevel&&(!M.hideSource||sa.showFinish)){var c=document.getElementById("share-cell");"share-cell-enabled"!==c.className&&(c.className="share-cell-enabled",M.onResize())}sa.showZeroScore&&ra.displayScore()};var eb=function(){var a;a=sa.freePlay&&!ra.customLogic instanceof Z?N.keepPlaying():N.tryAgain(),ra.waitingForReport||M.displayFeedback({app:"studio",skin:ta.id,feedbackType:ra.testResults,executionError:ra.executionError,tryAgainText:a,continueText:sa.freePlay?N.nextPuzzle():void 0,response:ra.response,level:sa,showingSharing:!sa.disableSharing&&sa.freePlay&&!ra.preExecutionFailure&&!sa.projectTemplateLevelName,feedbackImage:ra.feedbackImage,twitter:Ua,
saveToGalleryUrl:sa.freePlay&&ra.response&&ra.response.save_to_gallery_url,message:ra.message,appStrings:{reinfFeedbackMsg:O.reinfFeedbackMsg({backButton:a}),sharingText:O.shareGame()}})};ra.onReportComplete=function(a){ra.response=a,ra.waitingForReport=!1,eb()};var fb=function(a,b,c){a.push({name:b,func:c,cmdQueue:[]})},gb=function(a,b,c,d,e,f,g){for(var h=Blockly.mainBlockSpace.getTopBlocks(),i=0;h[i];i++){var j=h[i],k=j.getTitleValue(d)||"0",l=j.getTitleValue(f)||"0";if(!(j.type!==b||d&&e!==k||f&&g!==l)){var m=Blockly.Generator.blocksToCode("JavaScript",[j]);if(m){var n=R.functionFromCode(m,{StudioApp:M,Studio:S,Globals:ra.Globals}),o=c;d&&(o+="-"+e),f&&(o+="-"+g),fb(a,o,n)}}}},hb=function(a,b,c,d){for(var e=0;e<ra.spriteCount;e++)gb(a,b,c,d,String(e))},ib=function(a,b,c,d,e){for(var f=0;f<e.length;f++)gb(a,b,c,d,e[f])},jb=function(a,b,c,d,e){var f,g=function(g){gb(a,b,c,d,String(f),e,g)};for(f=0;f<ra.spriteCount;f++){for(var h=0;h<ra.spriteCount;h++)f!==h&&gb(a,b,c,d,String(f),e,String(h));ta.ProjectileClassNames.forEach(g),ta.ItemClassNames.forEach(g),xa.forEach(g),gb(a,b,c,d,String(f),e,"any_actor"),gb(a,b,c,d,String(f),e,"any_edge"),gb(a,b,c,d,String(f),e,"any_projectile"),gb(a,b,c,d,String(f),e,"anything")}},kb=function(a){var b=Blockly.Generator.blockSpaceToCode("JavaScript",a);try{R.evalWith(b,{StudioApp:M,Studio:S,Globals:ra.Globals})}catch(c){}};ra.checkForPreExecutionFailure=function(){if(M.hasUnfilledFunctionalBlock())return ra.result=!1,ra.testResults=oa.EMPTY_FUNCTIONAL_BLOCK,ra.message=M.getUnfilledFunctionalBlockError("functional_start_setValue"),ra.preExecutionFailure=!0,!0;if(M.hasExtraTopBlocks())return ra.result=!1,ra.testResults=oa.EXTRA_TOP_BLOCKS_FAIL,ra.preExecutionFailure=!0,!0;if(M.hasEmptyFunctionOrVariableName())return ra.result=!1,ra.testResults=oa.EMPTY_FUNCTION_NAME,ra.message=N.unnamedFunction(),ra.preExecutionFailure=!0,!0;var a=ra.checkExamples_();return void 0!==a.result?($.extend(ra,a),ra.preExecutionFailure=!0,!0):!1},ra.checkExamples_=function(){var a={};if(!sa.examplesRequired)return a;var b=M.getFunctionWithoutTwoExamples();if(b)return a.result=na.FAILURE,a.testResults=oa.EXAMPLE_FAILED,a.message=N.emptyExampleBlockErrorMsg({functionName:b}),a;var c=M.getUnfilledFunctionalExample();if(c){a.result=na.FAILURE,a.testResults=oa.EXAMPLE_FAILED;var d=c.getRootBlock().getInputTargetBlock("ACTUAL").getTitleValue("NAME");return a.message=N.emptyExampleBlockErrorMsg({functionName:d}),a}var e=M.checkForFailingExamples(ra.getStudioExampleFailure);return e&&(a.result=!1,a.testResults=oa.EXAMPLE_FAILED,a.message=N.exampleErrorMessage({functionName:e})),a};var lb={WARNING:"WARNING",ERROR:"ERROR"};ra.execute=function(){ra.result=M.UNSET,ra.testResults=oa.NO_TESTS_RUN,ra.waitingForReport=!1,ra.response=null;var a=[];if(M.isUsingBlockly()){if(ra.checkForPreExecutionFailure())return ra.onPuzzleComplete();gb(a,"when_run","whenGameStarts"),gb(a,"functional_start_setSpeeds","whenGameStarts"),gb(a,"functional_start_setBackgroundAndSpeeds","whenGameStarts"),gb(a,"functional_start_setFuncs","whenGameStarts"),gb(a,"functional_start_setValue","whenGameStarts"),gb(a,"studio_whenLeft","when-left"),gb(a,"studio_whenRight","when-right"),gb(a,"studio_whenUp","when-up"),gb(a,"studio_whenDown","when-down"),ib(a,"studio_whenArrow","when","VALUE",["left","right","up","down"]),gb(a,"studio_repeatForever","repeatForever"),gb(a,"studio_whenTouchItem","whenSpriteCollided-"+(ra.protagonistSpriteIndex||0)+"-any_item"),sa.wallMapCollisions&&gb(a,"studio_whenTouchWall","whenSpriteCollided-"+(ra.protagonistSpriteIndex||0)+"-wall"),hb(a,"studio_whenSpriteClicked","whenSpriteClicked","SPRITE"),jb(a,"studio_whenSpriteCollided","whenSpriteCollided","SPRITE1","SPRITE2")}if(M.playAudio("start"),M.reset(!1),sa.editCode){var b=M.editor.getValue(),c=M.editor.aceEditor.getSession();if(ga.attachToSession(c,M.editor),ga.clearRuntimeAnnotations(),ra.JSInterpreter=new fa({code:b,blocks:da.blocks,enableEvents:!0,studioApp:M,shouldRunAtMaxSpeed:function(){return 1===ra.slowJsExecutionFactor},onExecutionError:z}),!ra.JSInterpreter.initialized())return;ra.initAutoHandlers(ya)}else kb("procedures_defreturn"),kb("procedures_defnoreturn"),kb("functional_definition"),ra.eventHandlers=a;ra.perExecutionTimeouts=[],ra.tickIntervalId=window.setInterval(ra.onTick,ra.scale.stepSpeed)},ra.feedbackImage="",ra.encodedFeedbackImage="",ra.onPuzzleComplete=function(){ra.executionError?ra.result=na.ERROR:sa.freePlay&&!ra.preExecutionFailure&&(ra.result=na.SUCCESS),ra.clearEventHandlersKillTickLoop();var a=ra.result===na.SUCCESS;ra.preExecutionFailure||(ra.testResults=sa.freePlay?oa.FREE_PLAY:M.getTestResults(a,{executionError:ra.executionError})),ra.testResults>=oa.TOO_MANY_BLOCKS_FAIL?M.playAudio("win"):M.playAudio("failure");var b;if(sa.editCode)b=M.editor.getValue();else{var c=Blockly.Xml.blockSpaceToDom(Blockly.mainBlockSpace);b=Blockly.Xml.domToText(c)}ra.waitingForReport=!0;var d=function(){M.report({app:"studio",level:sa.id,result:ra.result===na.SUCCESS,testResult:ra.testResults,program:encodeURIComponent(b),image:ra.encodedFeedbackImage,onComplete:ra.onReportComplete})};"undefined"==typeof document.getElementById("svgStudio").toDataURL?d():document.getElementById("svgStudio").toDataURL("image/png",{callback:function(a){ra.feedbackImage=a,ra.encodedFeedbackImage=encodeURIComponent(ra.feedbackImage.split(",")[1]),d()}})};var mb=6,nb=7,ob=8,pb=4;ra.drawDebugRect=function(a,b,c,d,e){if(qa){var f=document.getElementById("svgStudio"),g=document.createElementNS(pa,"g");g.setAttribute("class",a+" debugRect");var h=document.createElementNS(pa,"rect");h.setAttribute("width",d),h.setAttribute("height",e),h.setAttribute("x",b-d/2),h.setAttribute("y",c-e/2),h.setAttribute("fill","rgba(255, 255, 255, 0.5)"),h.setAttribute("stroke","#000000"),h.setAttribute("stroke-width",1),g.appendChild(h),f.appendChild(g)}},ra.drawDebugLine=function(a,b,c,d,e,f){if(qa){f=ba.valueOr(f,"#000000");var g=document.getElementById("svgStudio"),h=document.createElementNS(pa,"g");h.setAttribute("class",a+" debugLine");var i=document.createElementNS(pa,"line");i.setAttribute("x1",b),i.setAttribute("y1",c),i.setAttribute("x2",d),i.setAttribute("y2",e),i.setAttribute("stroke",f),i.setAttribute("stroke-width",2),h.appendChild(i),g.appendChild(h)}},ra.drawTimeoutRect=function(){if(sa.showTimeoutRect&&ra.timeoutFailureTick!==1/0){$(".timeoutRect").remove();var a=.5,b=.4,c=ra.timeoutFailureTick-ra.tickCount,d=c/ra.timeoutFailureTick;if(a>=d){var e=b>d?1:1-(d-b)/(a-b),f=c*ra.MAZE_WIDTH/(ra.timeoutFailureTick*a),g=6;if(f>0){var h=document.getElementById("svgStudio"),i=document.createElementNS(pa,"g");i.setAttribute("class","timeoutRect");var j=document.createElementNS(pa,"rect");j.setAttribute("opacity",e),j.setAttribute("width",f),j.setAttribute("height",g),j.setAttribute("x",0),j.setAttribute("y",ra.MAZE_HEIGHT-g),j.setAttribute("fill","rgba(255, 255, 255, 0.5)"),i.appendChild(j),h.appendChild(i)}}}},ra.clearDebugElements=function(){$(".debugRect").remove(),$(".debugLine").remove()},ra.drawWallTile=function(a,b,c,d){var e,f,g=ta.tiles,h=0,i=ra.SQUARE_SIZE,j=0,k=8,l=8,m=!1;b==ka.WALL?(e=Math.floor(Math.random()*P.WallRandomCoordMax),f=e?Math.floor(Math.random()*P.WallRandomCoordMax):1+Math.floor(Math.random()*(P.WallRandomCoordMax-1))):(e=(b&P.WallCoordRowMask)>>P.WallCoordRowShift,f=(b&P.WallCoordColMask)>>P.WallCoordColShift,h=(b&P.WallTypeMask)>>P.WallTypeShift,h===P.WallType.JUMBO_SIZE?(m=!0,i=ta[ra.background].jumboTilesSize,k=ta[ra.background].jumboTilesRows,l=ta[ra.background].jumboTilesCols):h===P.WallType.DOUBLE_SIZE&&(i=2*ra.SQUARE_SIZE)),ra.background&&!m&&ta[ra.background].tiles?g=ta[ra.background].tiles:ra.background&&m&&ta[ra.background].jumboTiles&&(g=ta[ra.background].jumboTiles,j=ta[ra.background].jumboTilesAddOffset);var n=document.createElementNS(pa,"clipPath"),o="tile_clippath_"+ra.tiles.length;n.setAttribute("id",o),n.setAttribute("class","tile");var p=document.createElementNS(pa,"rect");p.setAttribute("width",i),p.setAttribute("height",i),p.setAttribute("x",d*ra.SQUARE_SIZE+j),p.setAttribute("y",c*ra.SQUARE_SIZE+j),n.appendChild(p),a.appendChild(n);var q=document.createElementNS(pa,"image"),r="tile_"+ra.tiles.length;q.setAttribute("id",r),q.setAttribute("class","tileClip"),q.setAttribute("width",l*i),q.setAttribute("height",k*i),q.setAttribute("x",d*ra.SQUARE_SIZE-f*i+j),q.setAttribute("y",c*ra.SQUARE_SIZE-e*i+j),q.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",g),a.appendChild(q),q.setAttribute("clip-path","url(#"+o+")");var s={};s.bottomY=c*ra.SQUARE_SIZE+j+i,ra.tiles.push(s)},ra.createLevelItems=function(a){for(var b=0;b<ra.ROWS;b++)for(var c=0;c<ra.COLS;c++)for(var d=ra.map[b][c],e=0;e<ta.ItemClassNames.length;e++)if(P.squareHasItemClass(e,d)){var f=ra.getItemOptionsForItemClass(ta.ItemClassNames[e]),g=$.extend({},f,{x:ra.HALF_SQUARE+ra.SQUARE_SIZE*c,y:ra.HALF_SQUARE+ra.SQUARE_SIZE*b}),h=new Y(g);h.createElement(a),h.display(),ra.items.push(h)}},ra.drawMapTiles=function(a){if(ra.wallMap||!ra.tilesDrawn){ra.tilesDrawn=!0;var b,c,d=[];for(b=0;b<ra.ROWS;b++)for(d[b]=[],c=0;c<ra.COLS;c++)d[b][c]=!1;var e=document.getElementById("backgroundLayer");for(b=0;b<ra.ROWS;b++)for(c=0;c<ra.COLS;c++){var f=ra.getWallValue(b,c);if(f){if(d[b][c])continue;var g=(f&P.WallTypeMask)>>P.WallTypeShift;g===P.WallType.DOUBLE_SIZE&&(d[b][c]=!0,d[b][c+1]=!0,d[b+1][c]=!0,d[b+1][c+1]=!0),ra.drawWallTile(e,f,b,c)}}}};var qb=function(a){var b=+a.getAttribute("height"),c="true"===a.getAttribute("onTop"),d="true"===a.getAttribute("onRight");a.setAttribute("d",wb(0,0,Qa,b,Ja,c,d))};ra.displaySprite=function(a,b){var c=ra.sprite[a];if("hidden"!==c.value){var d,e,f,g,h,i=document.getElementById("sprite"+a),j=document.getElementById("spriteWalk"+a);if(void 0!==c.value&&ta[c.value]&&ta[c.value].walk&&b){var k=document.getElementById("explosion"+a);if(k&&"hidden"!==k.getAttribute("visibility"))return void j.setAttribute("visibility","hidden");i.setAttribute("visibility","hidden"),j.setAttribute("visibility","visible"),g=c.drawWidth*A(a,{walkDirection:!0}),h=c.drawHeight*A(a,{walkFrame:!0}),d=j,e=document.getElementById("spriteWalkClipRect"+a),f=document.getElementById("spriteClipRect"+a)}else i.setAttribute("visibility","visible"),j.setAttribute("visibility","hidden"),g=c.drawWidth*A(a),h=0,d=i,e=document.getElementById("spriteClipRect"+a),f=document.getElementById("spriteWalkClipRect"+a);var l=0,m=0;if(sa.gridAlignedMovement&&(l=ta.gridSpriteRenderOffsetX||0,m=ta.gridSpriteRenderOffsetY||0),c.hasActions())c.updateActions();else{var n=e.getAttribute("x")-l,o=e.getAttribute("y")-m,p=c.dir;p===ia.NONE?c.dir=ia.SOUTH:(c.x!=n||c.y!=o)&&(c.dir=ia.NONE,c.x<n?c.dir|=ia.WEST:c.x>n&&(c.dir|=ia.EAST),c.y<o?c.dir|=ia.NORTH:c.y>o&&(c.dir|=ia.SOUTH)),c.displayX=c.x,c.displayY=c.y}c.dir!==c.displayDir&&ra.tickCount&&0===ra.tickCount%2&&(c.displayDir=ja[c.displayDir][c.dir]),d.setAttribute("x",c.displayX-g+l),d.setAttribute("y",c.displayY-h+m),e.setAttribute("x",c.displayX+l),e.setAttribute("y",c.displayY+m),f.setAttribute("x",c.displayX+l),f.setAttribute("y",c.displayY+m);var q=document.getElementById("speechBubble"+a),r=document.getElementById("speechBubblePath"+a),s=+r.getAttribute("height"),t="true"===r.getAttribute("onTop"),u="true"===r.getAttribute("onRight"),v=!0,w=!0,x=c.y-(s+La);0>x&&(x=c.y+c.height+La,v=!1);var y=c.x+Ka;y>ra.MAZE_WIDTH-Qa&&(y=c.x+c.width-(Qa+Ka),w=!1),r.setAttribute("onTop",v),r.setAttribute("onRight",w),(t!==v||u!==w)&&qb(r),q.setAttribute("transform","translate("+y+","+x+")")}},ra.displayScore=function(){var a=document.getElementById("score");ra.scoreText?a.textContent=ra.scoreText:a.textContent=O.scoreText({playerScore:ra.playerScore}),a.setAttribute("visibility","visible")},ra.animateGoals=function(){var a,b,c,d,e=new Date,f=sa.goalOverride&&sa.goalOverride.goalAnimation,g=ta.fadeOutGoal;f&&(a=e-ra.startTime,b=ta.animatedGoalFrames,c=ta.timePerGoalAnimationFrame,d=sa.goalOverride.imageWidth);for(var h=0;h<ra.spriteGoals_.length;h++){var i=ra.spriteGoals_[h];if(!i.finished||i.startFadeTime){var j=document.getElementById("spriteFinish"+h),k=document.getElementById("finishClipRect"+h);if(f){var l=parseInt(k.getAttribute("x"),10),m=Math.floor(a/c)%b;j.setAttribute("x",l-m*d)}if(g){var n=P.GOAL_FADE_TIME;if(i.startFadeTime){var o=1-(e-i.startFadeTime)/n;0>o&&(o=0,i.startFadeTime=null),j.setAttribute("opacity",o)}}}}},ra.displayFloatingScore=function(a){if(sa.floatingScore){var b=ra.sprite[0],c=document.getElementById("floatingScore");c.textContent=a>0?"+"+a:a,c.setAttribute("x",b.x+b.width/2),c.setAttribute("y",b.y+b.height/2),c.setAttribute("opacity",1),c.setAttribute("visibility","visible")}},ra.updateFloatingScore=function(){if(sa.floatingScore){var a=document.getElementById("floatingScore"),b=parseInt(a.getAttribute("y")),c=parseFloat(a.getAttribute("opacity"));c>0&&(c+=P.floatingScoreChangeOpacity,a.setAttribute("opacity",c)),b+=P.floatingScoreChangeY,a.setAttribute("y",b)}},ra.showCoordinates=function(){var a=ra.sprite[ra.protagonistSpriteIndex||0];if(a){var b=a.x+50,c=350-a.y;ra.setScoreText({text:"x: "+b+" y: "+c})}},ra.queueCmd=function(a,b,c){var d={id:a,name:b,opts:c};if(M.isUsingBlockly()){if(ra.currentEventParams)for(var e in ra.currentEventParams)d.opts[e]=ra.currentEventParams[e];ra.currentCmdQueue.push(d)}else ra.callCmd(d)},ra.executeQueue=function(a,b){ra.eventHandlers.forEach(function(b){if(!ra.yieldThisTick&&b.name===a&&b.cmdQueue.length)for(var c=b.cmdQueue[0];c&&ra.callCmd(c)&&(b.cmdQueue.shift(),!ra.yieldThisTick);c=b.cmdQueue[0]);})},ra.callCmd=function(a){switch(a.name){case"endGame":M.highlight(a.id),ra.endGame(a.opts);break;case"setBackground":M.highlight(a.id),ra.setBackground(a.opts),ra.trackedBehavior.hasSetBackground=!0;break;case"setMap":M.highlight(a.id),ra.setMap(a.opts),ra.trackedBehavior.hasSetMap=!0;break;case"setSprite":M.highlight(a.id),ra.setSprite(a.opts),ra.trackedBehavior.hasSetSprite=!0;break;case"saySprite":return a.opts.started||M.highlight(a.id),ra.saySprite(a.opts);case"setSpriteEmotion":M.highlight(a.id),ra.setSpriteEmotion(a.opts);break;case"setSpriteSpeed":M.highlight(a.id),ra.setSpriteSpeed(a.opts);break;case"setBotSpeed":M.highlight(a.id),ra.setBotSpeed(a.opts),ra.trackedBehavior.hasSetBotSpeed=!0;break;case"setSpriteSize":M.highlight(a.id),ra.setSpriteSize(a.opts);break;case"setSpritePosition":M.highlight(a.id),ra.setSpritePosition(a.opts);break;case"setSpriteXY":M.highlight(a.id),ra.setSpriteXY(a.opts);break;case"playSound":M.highlight(a.id),ra.playSound(a.opts);break;case"showTitleScreen":return a.opts.started||M.highlight(a.id),ra.showTitleScreen(a.opts);case"move":M.highlight(a.id),ra.moveSingle(a.opts);break;case"moveRight":M.highlight(a.id),ra.moveSingle({spriteIndex:ra.protagonistSpriteIndex||0,dir:ia.EAST});break;case"moveLeft":M.highlight(a.id),ra.moveSingle({spriteIndex:ra.protagonistSpriteIndex||0,dir:ia.WEST});break;case"moveUp":M.highlight(a.id),ra.moveSingle({spriteIndex:ra.protagonistSpriteIndex||0,dir:ia.NORTH});break;case"moveDown":M.highlight(a.id),ra.moveSingle({spriteIndex:ra.protagonistSpriteIndex||0,dir:ia.SOUTH});break;case"moveDistance":return a.opts.started||M.highlight(a.id),ra.moveDistance(a.opts);case"stop":M.highlight(a.id),ra.stop(a.opts);break;case"throwProjectile":return a.opts.started||M.highlight(a.id),ra.throwProjectile(a.opts);case"makeProjectile":M.highlight(a.id),ra.makeProjectile(a.opts);break;case"changeScore":M.highlight(a.id),ra.changeScore(a.opts);break;case"reduceScore":M.highlight(a.id),ra.reduceScore(a.opts);break;case"setScoreText":M.highlight(a.id),ra.setScoreText(a.opts);break;case"showCoordinates":M.highlight(a.id),ra.showCoordinates();break;case"wait":return a.opts.started||M.highlight(a.id),ra.wait(a.opts);case"vanish":M.highlight(a.id),ra.vanishActor(a.opts);break;case"addItem":M.highlight(a.id),ra.addItem(a.opts),ra.trackedBehavior.hasAddedItem=!0;break;case"setItemActivity":M.highlight(a.id),ra.setItemActivity(a.opts);break;case"setItemSpeed":M.highlight(a.id),ra.setItemSpeed(a.opts);break;case"showDebugInfo":M.highlight(a.id),ra.showDebugInfo(a.opts);break;case"onEvent":M.highlight(a.id),ra.onEvent(a.opts)}return!0},ra.playSound=function(a){if("string"!=typeof a.soundName)throw new TypeError("Incorrect parameter: "+a.soundName);var b=a.soundName.toLowerCase().trim();if(b===P.RANDOM_VALUE&&(b=ta.sounds[Math.floor(Math.random()*ta.sounds.length)]),!ta.soundFiles[b])throw new RangeError("Incorrect parameter: "+a.soundName);M.playAudio(b,{volume:1}),ra.playSoundCount++},ra.getItemOptionsForItemClass=function(a){var b=ba.valueOr(ta.specialItemProperties[a],{});return{className:a,image:ta[a],frames:C(a,ta.specialItemProperties,ta.itemFrames),loop:!0,width:b.width,height:b.height,dir:ia.NONE,speed:ra.itemSpeed[a],activity:ba.valueOr(ra.itemActivity[a],"roam"),isHazard:b.isHazard,renderOffset:ba.valueOr(b.renderOffset,{x:0,y:0}),renderScale:ba.valueOr(b.scale,1),animationRate:b.animationRate}},ra.addItem=function(a){if("string"!=typeof a.className)throw new TypeError("Incorrect parameter: "+a.className);var b=a.className.toLowerCase().trim();b===P.RANDOM_VALUE&&(b=ta.ItemClassNames[Math.floor(Math.random()*ta.ItemClassNames.length)]);var c=ta[b];if(!c)throw new RangeError("Incorrect parameter: "+a.className);var d=[ia.NORTH,ia.EAST,ia.SOUTH,ia.WEST,ia.NORTHEAST,ia.SOUTHEAST,ia.SOUTHWEST,ia.NORTHWEST],e=function(){var a={};return sa.itemGridAlignedMovement?(a.x=ra.HALF_SQUARE+ra.SQUARE_SIZE*Math.floor(Math.random()*ra.COLS),a.y=ra.HALF_SQUARE+ra.SQUARE_SIZE*Math.floor(Math.random()*ra.ROWS)):(a.x=ra.HALF_SQUARE+Math.floor(Math.random()*(ra.MAZE_WIDTH-ra.SQUARE_SIZE)),a.y=ra.HALF_SQUARE+Math.floor(Math.random()*(ra.MAZE_HEIGHT-ra.SQUARE_SIZE))),a},f=e(),g=sa.itemGridAlignedMovement?ia.NONE:d[Math.floor(Math.random()*d.length)],h=$.extend({},ra.getItemOptionsForItemClass(b),{x:f.x,y:f.y,dir:g}),i=new Y(h);if(sa.blockMovingIntoWalls)for(var j=0,k=100;ra.willCollidableTouchWall(i,i.x,i.y)||ra.getDistance(ra.sprite[0].x+ra.sprite[0].width/2,ra.sprite[0].y+ra.sprite[0].height/2,i.x,i.y)<k;){var l=e();if(i.x=l.x,i.y=l.y,j++,j>100)break}i.createElement(document.getElementById("spriteLayer")),ra.items.push(i)},ra.getDistance=function(a,b,c,d){return Math.sqrt(Math.pow(c-a,2)+Math.pow(d-b,2))},ra.setItemActivity=function(a){if("string"!=typeof a.className)throw new TypeError("Incorrect parameter: "+a.className);var b=a.className.toLowerCase().trim();b===P.RANDOM_VALUE&&(b=ta.ItemClassNames[Math.floor(Math.random()*ta.ItemClassNames.length)]);var c=ta[b];if(!c)throw new RangeError("Incorrect parameter: "+a.className);("roam"===a.type||"chase"===a.type||"flee"===a.type||"none"===a.type)&&(ra.itemActivity[b]=a.type,ra.items.forEach(function(c){c.className===b&&(c.setActivity(a.type),ra.trackedBehavior.setActivityRecord||(ra.trackedBehavior.setActivityRecord=[]),ra.trackedBehavior.setActivityRecord[b]||(ra.trackedBehavior.setActivityRecord[b]=[]),ra.trackedBehavior.setActivityRecord[b][a.type]=!0)}))},ra.setItemSpeed=function(a){if("string"!=typeof a.className)throw new TypeError("Incorrect parameter: "+a.className);var b=a.className.toLowerCase().trim();b===P.RANDOM_VALUE&&(b=ta.ItemClassNames[Math.floor(Math.random()*ta.ItemClassNames.length)]);var c=ta[b];if(!c)throw new RangeError("Incorrect parameter: "+a.className);ra.itemSpeed[b]=a.speed,ra.items.forEach(function(c){c.className===b&&(c.speed=a.speed)})},ra.showDebugInfo=function(a){qa=a.value},ra.vanishActor=function(a){var b=document.getElementById("svgStudio"),c=document.getElementById("sprite"+a.spriteIndex),d=c&&"hidden"!==c.getAttribute("visibility"),e=document.getElementById("spriteWalk"+a.spriteIndex),f=e&&"hidden"!==e.getAttribute("visibility");if(d||f){var g=document.getElementById("explosion"+a.spriteIndex);g||(g=document.createElementNS(pa,"image"),g.setAttribute("id","explosion"+a.spriteIndex),g.setAttribute("visibility","hidden"),b.appendChild(g,c));var h=document.getElementById("spriteClipRect"+a.spriteIndex),i=ra.sprite[a.spriteIndex].width;g.setAttribute("height",ra.sprite[a.spriteIndex].height),g.setAttribute("x",h.getAttribute("x")),g.setAttribute("visibility","visible");var j=parseInt(h.getAttribute("x"),10),k=ta.explosionFrames;g.setAttribute("clip-path","url(#spriteClipPath"+a.spriteIndex+")"),g.setAttribute("width",k*i),ta.fadeExplosion||ra.setSprite({spriteIndex:a.spriteIndex,value:"hidden"}),ca.range(0,k).forEach(function(a){ra.perExecutionTimeouts.push(setTimeout(function(){g.setAttribute("x",j-a*i),0===a&&g.setAttribute("y",h.getAttribute("y")),ta.fadeExplosion&&c.setAttribute("opacity",(k-a)/k)},a*ta.timePerExplosionFrame))}),ra.perExecutionTimeouts.push(setTimeout(function(){g.setAttribute("visibility","hidden"),ta.fadeAnimation&&(ra.setSprite({spriteIndex:a.spriteIndex,value:"hidden"}),c.removeAttribute("opacity"))},ta.timePerExplosionFrame*(k+1))),g.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",ta.explosion+"?spriteIndex="+a.spriteIndex)}},ra.setSpriteEmotion=function(a){ra.sprite[a.spriteIndex].emotion=a.value},ra.setSpriteSpeed=function(a){var b=Math.min(Math.max(a.value,P.SpriteSpeed.SLOW),P.SpriteSpeed.VERY_FAST);ra.sprite[a.spriteIndex].speed=b};var rb={slow:P.SpriteSpeed.SLOW,normal:P.SpriteSpeed.NORMAL,fast:P.SpriteSpeed.VERY_FAST};ra.setBotSpeed=function(a){if("string"!=typeof a.value)throw new TypeError("Incorrect parameter: "+a.value);var b=a.value.toLowerCase().trim();b===P.RANDOM_VALUE&&(b=ba.randomKey(rb));var c=rb[b];if("undefined"==typeof c)throw new RangeError("Incorrect parameter: "+a.value);a.value=c,ra.setSpriteSpeed(a)},ra.setSpriteSize=function(a){ra.sprite[a.spriteIndex].size=a.value;var b=ra.sprite[a.spriteIndex].value;"hidden"!==b&&ra.setSprite({spriteIndex:a.spriteIndex,value:b})},ra.changeScore=function(a){if("number"!=typeof a.value&&("string"!=typeof a.value||isNaN(a.value)))throw new TypeError("Incorrect parameter: "+a.value);ra.adjustScore(Number(a.value))},ra.reduceScore=function(a){if("number"!=typeof a.value&&("string"!=typeof a.value||isNaN(a.value)))throw new TypeError("Incorrect parameter: "+a.value);ra.adjustScore(-Number(a.value))},ra.adjustScore=function(a){ra.playerScore+=a,ra.displayScore(),ra.displayFloatingScore(a),ra.playerScore-a<1e3&&ra.playerScore>=1e3&&h("whenScore1000")},ra.setScoreText=function(a){ra.scoreText=a.text,ra.displayScore()},ra.endGame=function(a){if("string"!=typeof a.value)throw new TypeError("Incorrect parameter: "+a.value);var b=a.value.toLowerCase().trim();if("win"==b)ra.trackedBehavior.hasWonGame=!0,ra.setScoreText({text:O.winMessage()});else{if("lose"!=b)throw new RangeError("Incorrect parameter: "+a.value);ra.trackedBehavior.hasLostGame=!0,ra.setScoreText({text:O.loseMessage()})}},ra.setBackground=function(a){if("string"!=typeof a.value)throw new TypeError("Incorrect parameter: "+a.value);var b=a.value.toLowerCase().trim();if(b===P.RANDOM_VALUE){var c=ta.backgroundChoicesK1[Math.floor(Math.random()*(ta.backgroundChoicesK1.length-1))][1];b=c.replace(/^"(.*)"$/,"$1")}var d=ta[b];if(!d)throw new RangeError("Incorrect parameter: "+a.value);if(b!==ra.background){ra.background=b;var e=document.getElementById("background");e.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",d.background),sa.wallMapCollisions&&ra.wallMapRequested&&ra.setMap({value:ra.wallMapRequested,forceRedraw:!0})}},ra.setMap=function(a){if("string"!=typeof a.value)throw new TypeError("Incorrect parameter: "+a.value);var b=a.value.toLowerCase().trim();if(b===P.RANDOM_VALUE){var c=ta.mapChoices[Math.floor(1+Math.random()*(ta.mapChoices.length-1))][1];b=c.replace(/^"(.*)"$/,"$1")}var d;if(d="default"===b?null:ta.getMap?ta.getMap(ra.background,b):b,null!==d&&!ta[d])throw new RangeError("Incorrect parameter: "+a.value);(a.forceRedraw||d!==ra.wallMap)&&(ra.wallMap=d,ra.wallMapRequested=a.value,$(".tileClip").remove(),$(".tile").remove(),ra.tiles=[],ra.drawMapTiles(),ra.fixSpriteLocation(),k())},ra.fixSpriteLocation=function(){if(sa.wallMapCollisions&&sa.blockMovingIntoWalls){var a=0;if(ra.sprite.length<=a)return;var b=ra.sprite[a],c=Za(a,!1,!1),d=Za(a,!0,!1);if(ra.willSpriteTouchWall(b,c,d)){var e=c+b.width/2,f=d+b.height/2;e+=ta.wallCollisionRectOffsetX+ta.wallCollisionRectWidth/2,f+=ta.wallCollisionRectOffsetY+ta.wallCollisionRectHeight/2;for(var g=Math.floor(e/ra.SQUARE_SIZE),h=Math.floor(f/ra.SQUARE_SIZE),i=Math.max(h-1,0),j=Math.min(h+1,ra.ROWS-1),k=Math.max(g-1,0),l=Math.min(g+1,ra.COLS-1),m=i;j>=m;m++)for(var n=k;l>=n;n++)if(!ra.getWallValue(m,n))return b.x=ra.HALF_SQUARE+ra.SQUARE_SIZE*n-b.width/2-ta.wallCollisionRectOffsetX,b.y=ra.HALF_SQUARE+ra.SQUARE_SIZE*m-b.height/2-ta.wallCollisionRectOffsetY,void(b.dir=ia.NONE)}}},ra.setSprite=function(a){var b=a.spriteIndex,c=ra.sprite[b];if("string"!=typeof a.value)throw new TypeError("Incorrect parameter: "+a.value);var d=a.value.toLowerCase().trim();d===P.RANDOM_VALUE&&(d=ta.avatarList[Math.floor(Math.random()*ta.avatarList.length)]);var e=document.getElementById("sprite"+b);if(e){var f=ta[d];if(!f&&"hidden"!==d&&"visible"!==d)throw new RangeError("Incorrect parameter: "+a.value);if(c.visible="hidden"!==d&&!a.forceHidden,e.setAttribute("visibility",c.visible?"visible":"hidden"),c.value=a.forceHidden?"hidden":a.value,"hidden"!==d&&"visible"!==d){var g=null;if(void 0!==d&&f.walk){if(g=document.getElementById("spriteWalk"+b),!g)return;g.setAttribute("visibility","hidden")}c.frameCounts=f.frameCounts,c.timePerFrame=f.timePerFrame,sa.gridAlignedMovement?(c.height=c.width=ra.SQUARE_SIZE,c.size=1,c.drawHeight=c.size*ta.spriteHeight,c.drawWidth=c.size*ta.spriteWidth):(c.drawHeight=c.height=c.size*ta.spriteHeight,c.drawWidth=c.width=c.size*ta.spriteWidth),ta.projectileSpriteHeight&&(c.projectileSpriteHeight=c.size*ta.projectileSpriteHeight),ta.projectileSpriteWidth&&(c.projectileSpriteWidth=c.size*ta.projectileSpriteWidth);var h=document.getElementById("spriteClipRect"+b);if(h.setAttribute("width",c.drawWidth),h.setAttribute("height",c.drawHeight),e.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",f.sprite),e.setAttribute("width",c.drawWidth*B(b)),e.setAttribute("height",c.drawHeight),g){var i=document.getElementById("spriteWalkClipRect"+b);i.setAttribute("width",c.drawWidth),i.setAttribute("height",c.drawHeight),g.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",f.walk),g.setAttribute("width",c.drawWidth*c.frameCounts.turns),g.setAttribute("height",c.drawHeight*c.frameCounts.walk)}ra.displaySprite(b)}}};var sb=function(a,b){return a+" "+b+" "},tb=15,ub=25,vb=10,wb=function(a,b,c,d,e,f,g){var h="M"+sb(a+e,b);return f||(h+=g?"L"+sb(a+e-vb,b-tb)+"L"+sb(a+e+ub,b):"L"+sb(a+c-e-ub,b)+"L"+sb(a+c-vb,b-tb)),h+="L"+sb(a+c-e,b),h+="Q"+sb(a+c,b)+sb(a+c,b+e),h+="L"+sb(a+c,b+d-e)+"Q"+sb(a+c,b+d)+sb(a+c-e,b+d),f&&(h+=g?"L"+sb(a+e+ub,b+d)+"L"+sb(a+e-vb,b+d+tb):"L"+sb(a+c-vb,b+d+tb)+"L"+sb(a+c-e-ub,b+d)),h+="L"+sb(a+e,b+d),h+="Q"+sb(a,b+d)+sb(a,b+d-e),h+="L"+sb(a,b+e)+"Q"+sb(a,b)+sb(a+e,b),h+="Z"},xb=function(a){a.complete||(a.waitCallback&&a.waitCallback(),a.complete=!0)};ra.wait=function(a){return a.started||(a.started=!0,"click"===a.value?a.waitForClick=!0:a.waitTimeout=window.setTimeout(Wa(this,xb,a),a.value)),a.complete},ra.hideTitleScreen=function(a){var b=document.getElementById("titleScreenTitle"),c=document.getElementById("titleScreenTextGroup");b.setAttribute("visibility","hidden"),c.setAttribute("visibility","hidden"),a.complete=!0},ra.showTitleScreen=function(a){if(!a.started){a.started=!0;var b=document.getElementById("titleScreenTitle"),c=document.getElementById("titleScreenTextGroup"),d=document.getElementById("titleScreenText"),e=document.getElementById("titleScreenTextRect");b.textContent=a.title;var f={svgText:d,text:a.text,width:Ha,lineHeight:Da,topMargin:Fa,sideMargin:Ca,maxLines:Ea,fullHeight:Ia},g=_a(f);e.setAttribute("height",g),b.setAttribute("visibility","visible"),c.setAttribute("visibility","visible"),a.waitForClick=!0,a.waitCallback=Wa(this,ra.hideTitleScreen,a),a.waitTimeout=window.setTimeout(Wa(this,xb,a),za)}return a.complete},ra.isCmdCurrentInQueue=function(a,b){var c=!1;return ra.eventHandlers.forEach(function(d){if(d.name===b){var e=d.cmdQueue[0];e&&e.name===a&&(c=!0)}}),c},ra.hideSpeechBubble=function(a){var b=document.getElementById("speechBubble"+a.spriteIndex);b.setAttribute("visibility","hidden"),b.removeAttribute("onTop"),b.removeAttribute("onRight"),b.removeAttribute("height"),a.complete=!0,delete ra.sprite[a.spriteIndex].bubbleTimeoutFunc,ra.sayComplete++},ra.saySprite=function(a){if(a.started)return a.complete;var b=a.spriteIndex,c=ra.sprite[b];if(c){if(a.started=!0,c.bubbleTimeoutFunc&&c.bubbleTimeoutFunc(),window.clearTimeout(c.bubbleTimeout),!c.visible)return a.complete=!0,a.complete;var d=document.getElementById("speechBubbleText"+b),e={svgText:d,text:a.text,width:Qa,lineHeight:Na,topMargin:Pa,sideMargin:Ma,maxLines:Oa,fullHeight:Ra},f=_a(e),g=document.getElementById("speechBubblePath"+b),h=document.getElementById("speechBubble"+b);return g.setAttribute("height",f),qb(g),ra.displaySprite(a.spriteIndex),h.setAttribute("visibility","visible"),c.bubbleTimeoutFunc=Wa(this,ra.hideSpeechBubble,a),c.bubbleTimeout=window.setTimeout(c.bubbleTimeoutFunc,1e3*a.seconds),a.complete}},ra.stop=function(a){if(Ya(a.spriteIndex,!0),Ya(a.spriteIndex,!1),!a.dontResetCollisions){var b=ra.sprite[a.spriteIndex];if(!b)return;b.clearCollisions();for(var c=0;c<ra.spriteCount;c++)c!==a.spriteIndex&&ra.sprite[c].endCollision(a.spriteIndex)}},ra.throwProjectile=function(a){if(a.started)return a.complete;a.started=!0,a.complete=!1,window.setTimeout(function(){a.complete=!0},Ta);var b=ra.sprite[a.spriteIndex];if(b.visible){var c=ta.preventProjectileLoop&&ta.preventProjectileLoop(a.className),d={frames:C(a.className,ta.specialProjectileProperties,ta.projectileFrames),className:a.className,dir:a.dir,image:ta[a.className],loop:!c,spriteX:b.x,spriteY:b.y,spriteHeight:b.projectileSpriteHeight||b.height,spriteWidth:b.projectileSpriteWidth||b.width},e=new X(d);e.createElement(document.getElementById("svgStudio")),ra.projectiles.push(e)}};var yb=function(a,b){if("bounce"===b)a.bounce();else{if("disappear"!==b)throw"unknown action in doMakeProjectile";a.removeElement();var c=ra.projectiles.indexOf(a);if(-1!==c)return ra.projectiles.splice(c,1),!0}return!1};ra.makeProjectile=function(a){if(a.eventObject)yb(a.eventObject,a.action);else for(var b=0;b<ra.projectiles.length;b++)ra.projectiles[b].className===a.className&&yb(ra.projectiles[b],a.action)&&b--};var zb=function(a,b){switch(b){case P.Position.OUTTOPOUTLEFT:case P.Position.TOPOUTLEFT:case P.Position.MIDDLEOUTLEFT:case P.Position.BOTTOMOUTLEFT:case P.Position.OUTBOTTOMOUTLEFT:return-a.width;case P.Position.OUTTOPLEFT:case P.Position.TOPLEFT:case P.Position.MIDDLELEFT:case P.Position.BOTTOMLEFT:case P.Position.OUTBOTTOMLEFT:return 0;case P.Position.OUTTOPCENTER:case P.Position.TOPCENTER:case P.Position.MIDDLECENTER:case P.Position.BOTTOMCENTER:case P.Position.OUTBOTTOMCENTER:return(ra.MAZE_WIDTH-a.width)/2;case P.Position.OUTTOPRIGHT:case P.Position.TOPRIGHT:case P.Position.MIDDLERIGHT:case P.Position.BOTTOMRIGHT:case P.Position.OUTBOTTOMRIGHT:return ra.MAZE_WIDTH-a.width;case P.Position.OUTTOPOUTRIGHT:case P.Position.TOPOUTRIGHT:case P.Position.MIDDLEOUTRIGHT:case P.Position.BOTTOMOUTRIGHT:case P.Position.OUTBOTTOMOUTRIGHT:return ra.MAZE_WIDTH}},Ab=function(a,b){switch(b){case P.Position.OUTTOPOUTLEFT:case P.Position.OUTTOPLEFT:case P.Position.OUTTOPCENTER:case P.Position.OUTTOPRIGHT:case P.Position.OUTTOPOUTRIGHT:return-a.height;case P.Position.TOPOUTLEFT:case P.Position.TOPLEFT:case P.Position.TOPCENTER:case P.Position.TOPRIGHT:case P.Position.TOPOUTRIGHT:return 0;case P.Position.MIDDLEOUTLEFT:case P.Position.MIDDLELEFT:case P.Position.MIDDLECENTER:case P.Position.MIDDLERIGHT:case P.Position.MIDDLEOUTRIGHT:return(ra.MAZE_HEIGHT-a.height)/2;case P.Position.BOTTOMOUTLEFT:case P.Position.BOTTOMLEFT:case P.Position.BOTTOMCENTER:case P.Position.BOTTOMRIGHT:case P.Position.BOTTOMOUTRIGHT:return ra.MAZE_HEIGHT-a.height;case P.Position.OUTBOTTOMOUTLEFT:
case P.Position.OUTBOTTOMLEFT:case P.Position.OUTBOTTOMCENTER:case P.Position.OUTBOTTOMRIGHT:case P.Position.OUTBOTTOMOUTRIGHT:return ra.MAZE_HEIGHT}};ra.collideItemWith=function(a,b,c){a.startCollision(b)&&I(a.className,b,c)},ra.collideSpriteWith=function(a,b,c){var d=ra.sprite[a];d.startCollision(b)&&H(a,b,c)},ra.setSpritePosition=function(a){var b=ra.sprite[a.spriteIndex];a.value&&(a.x=zb(b,a.value),a.y=Ab(b,a.value));var c=b.x===a.x&&b.y===a.y;ra.stop({spriteIndex:a.spriteIndex,dontResetCollisions:c}),b.displayX=b.x=a.x,b.displayY=b.y=a.y,b.dir=ia.NONE},ra.setSpriteXY=function(a){var b=ra.sprite[a.spriteIndex],c=a.x-b.width/2,d=a.y-b.height/2,e=b.x===c&&b.y===d;ra.stop({spriteIndex:a.spriteIndex,dontResetCollisions:e}),b.displayX=b.x=c,b.displayY=b.y=d,b.dir=ia.NONE},ra.getPlayspaceBoundaries=function(a){var b;return b=ta.wallCollisionRectWidth&&ta.wallCollisionRectHeight&&!sa.gridAlignedMovement?{top:0-(a.height-ta.wallCollisionRectHeight)/2-ta.wallCollisionRectOffsetY,right:ra.MAZE_WIDTH-ta.wallCollisionRectWidth-(a.width-ta.wallCollisionRectWidth)/2-ta.wallCollisionRectOffsetX,bottom:ra.MAZE_HEIGHT-ta.wallCollisionRectHeight-(a.height-ta.wallCollisionRectHeight)/2-ta.wallCollisionRectOffsetY,left:0-(a.width-ta.wallCollisionRectWidth)/2-ta.wallCollisionRectOffsetX}:{top:0,right:ra.MAZE_WIDTH-a.width,bottom:ra.MAZE_HEIGHT-a.height,left:0}},ra.getSkin=function(){return ta},ra.moveSingle=function(a){var b=ra.sprite[a.spriteIndex],c=b.lastMove;b.lastMove=ra.tickCount;var d=sa.gridAlignedMovement?ra.SQUARE_SIZE:b.speed,e=!1,f=!1,g=!1,h=0,i=0;switch(a.dir){case ia.NORTH:i=-d;break;case ia.EAST:h=d;break;case ia.SOUTH:i=d;break;case ia.WEST:h=-d}var j=b.x+h,k=b.y+i;if(sa.blockMovingIntoWalls&&ra.willSpriteTouchWall(b,j,k)&&(e=!0,ra.collideSpriteWith(a.spriteIndex,"wall"),b.endCollision("wall")),!sa.allowSpritesOutsidePlayspace&&ra.willSpriteLeavePlayspace(b,j,k)&&(f=!0),sa.gridAlignedMovement)e||f?b.addAction(new ha.GridMoveAndCancel(h,i,sa.slowJsExecutionFactor)):b.addAction(new ha.GridMove(h,i,sa.slowJsExecutionFactor)),ra.yieldThisTick=!0,ra.JSInterpreter&&ra.JSInterpreter["yield"](),g=!0;else if(!e){if(f){var l=ra.getPlayspaceBoundaries(b);j=Math.max(l.left,Math.min(l.right,j)),k=Math.max(l.top,Math.min(l.bottom,k))}b.x=j,b.y=k,(a.dir!==ra.lastMoveSingleDir&&c===1/0||ra.tickCount>c+1)&&(g=!0)}if(ra.lastMoveSingleDir=a.dir,g&&ta.moveSounds){var m=Math.floor(Math.random()*ta.moveSounds.length);M.playAudio(ta.moveSounds[m])}},ra.moveDistance=function(a){return a.started||(a.started=!0,sa.gridAlignedMovement&&(a.distance=Math.ceil(a.distance/ra.SQUARE_SIZE)*ra.SQUARE_SIZE),a.queuedDistance=a.distance),0===a.queuedDistance},ra.onEvent=function(a){fb(ra.eventHandlers,a.eventName,a.func)},ra.allWhenRunBlocksComplete=function(){for(var a=0;a<ra.eventHandlers.length;a++)if("whenGameStarts"===ra.eventHandlers[a].name&&0!==ra.eventHandlers[a].cmdQueue.length)return!1;return!0},ra.timedOut=function(){if(sa.timeoutAfterWhenRun){if(sa.editCode)return ra.JSInterpreter&&ra.JSInterpreter.startedHandlingEvents;if(0===ra.eventHandlers.length||1===ra.eventHandlers.length&&"whenGameStarts"===ra.eventHandlers[0].name&&ra.allWhenRunBlocksComplete())return!0}return ra.tickCount>ra.timeoutFailureTick},ra.allGoalsVisited=function(){var a,b,c=ra.sprite[ra.protagonistSpriteIndex],d=0;if(0===ra.spriteGoals_.length)return!1;if(ra.protagonistSpriteIndex&&!c)return!1;for(a=0;a<ra.spriteGoals_.length;a++){var e=ra.spriteGoals_[a];if(!e.finished){if(c){var f=e.finished;if(e.finished=L(c,e),!f&&e.finished){var g=!1,i="whenSpriteCollided-"+ra.protagonistSpriteIndex+"-";h(i+"anything",g)}}else{e.finished=!1;for(var j=0;j<ra.sprite.length;j++)if(L(ra.sprite[j],e)){e.finished=!0,ta.fadeOutGoal&&(e.startFadeTime=(new Date).getTime()),h("whenTouchGoal");break}}b=e.finished}if(e.finished&&(d++,b&&(d!==ra.spriteGoals_.length||ta.playFinalGoalSound)&&M.playAudio("flag"),ta.goalSuccess)){var k=ta.goalSuccess;sa.goalOverride&&sa.goalOverride.success&&(k=ta[sa.goalOverride.success]);var l=document.getElementById("spriteFinish"+a);l.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",k)}}var m=d===ra.spriteGoals_.length;return m&&!ra.touchAllGoalsEventFired&&(ra.touchAllGoalsEventFired=!0,h("whenTouchAllGoals")),m},ra.conditionSatisfied=function(a){for(var b=ra.trackedBehavior,c=Object.keys(a),d=0;d<c.length;d++){var e=c[d],f=a[e];if("timedOut"===e&&ra.timedOut()!=f)return!1;if("collectedItemsAtOrAbove"===e&&b.removedItemCount<f)return!1;if("collectedItemsBelow"===e&&b.removedItemCount>=f)return!1;if("touchedHazardsAtOrAbove"===e&&b.touchedHazardCount<f)return!1;if("currentPointsAtOrAbove"===e&&ra.playerScore<f)return!1;if("currentPointsBelow"===e&&ra.playerScore>=f)return!1;if("allGoalsVisited"===e&&ra.allGoalsVisited()!==f)return!1;if("setMap"===e&&b.hasSetMap!==f)return!1;if("setBotSpeed"===e&&b.hasSetBotSpeed!==f)return!1}return!0},ra.checkProgressConditions=function(){if(!sa.progressConditions)return null;for(var a=0;a<sa.progressConditions.length;a++){var b=sa.progressConditions[a];if(ra.conditionSatisfied(b.required))return b.result}return null};var Bb=function(){var a=0!==ra.spriteGoals_.length,b=ra.allGoalsVisited(),c=ra.checkProgressConditions(),d=sa.goal&&sa.goal.successCondition?!0:!1,e=!d||ba.valueOr(sa.goal.successCondition(),!0),f=d&&ba.valueOr(sa.goal.successCondition(),!1);return c?(ra.result=c.success?na.SUCCESS:na.FAILURE,ra.message=ba.valueOr(c.message,null),ra.pauseInterpreter=ba.valueOr(c.pauseInterpreter,!1),!0):a&&b&&e||a&&sa.completeOnSuccessConditionNotGoals&&f||!a&&f?(ra.result=na.SUCCESS,!0):sa.goal&&sa.goal.failureCondition&&sa.goal.failureCondition()?(ra.result=na.FAILURE,!0):ra.timedOut()?(ra.result=na.FAILURE,!0):!1}},{"../JSInterpreter":"/home/ubuntu/staging/apps/build/js/JSInterpreter.js","../StudioApp":"/home/ubuntu/staging/apps/build/js/StudioApp.js","../acemode/annotationList":"/home/ubuntu/staging/apps/build/js/acemode/annotationList.js","../canvg/StackBlur.js":"/home/ubuntu/staging/apps/build/js/canvg/StackBlur.js","../canvg/canvg.js":"/home/ubuntu/staging/apps/build/js/canvg/canvg.js","../canvg/rgbcolor.js":"/home/ubuntu/staging/apps/build/js/canvg/rgbcolor.js","../canvg/svg_todataurl":"/home/ubuntu/staging/apps/build/js/canvg/svg_todataurl.js","../codegen":"/home/ubuntu/staging/apps/build/js/codegen.js","../constants":"/home/ubuntu/staging/apps/build/js/constants.js","../dom":"/home/ubuntu/staging/apps/build/js/dom.js","../dropletUtils":"/home/ubuntu/staging/apps/build/js/dropletUtils.js","../locale":"/home/ubuntu/staging/apps/build/js/locale.js","../skins":"/home/ubuntu/staging/apps/build/js/skins.js","../templates/page.html.ejs":"/home/ubuntu/staging/apps/build/js/templates/page.html.ejs","../utils":"/home/ubuntu/staging/apps/build/js/utils.js","../xml":"/home/ubuntu/staging/apps/build/js/xml.js","./Item":"/home/ubuntu/staging/apps/build/js/studio/Item.js","./api":"/home/ubuntu/staging/apps/build/js/studio/api.js","./bigGameLogic":"/home/ubuntu/staging/apps/build/js/studio/bigGameLogic.js","./blocks":"/home/ubuntu/staging/apps/build/js/studio/blocks.js","./collidable":"/home/ubuntu/staging/apps/build/js/studio/collidable.js","./constants":"/home/ubuntu/staging/apps/build/js/studio/constants.js","./controls.html.ejs":"/home/ubuntu/staging/apps/build/js/studio/controls.html.ejs","./dropletConfig":"/home/ubuntu/staging/apps/build/js/studio/dropletConfig.js","./extraControlRows.html.ejs":"/home/ubuntu/staging/apps/build/js/studio/extraControlRows.html.ejs","./locale":"/home/ubuntu/staging/apps/build/js/studio/locale.js","./projectile":"/home/ubuntu/staging/apps/build/js/studio/projectile.js","./rocketHeightLogic":"/home/ubuntu/staging/apps/build/js/studio/rocketHeightLogic.js","./samBatLogic":"/home/ubuntu/staging/apps/build/js/studio/samBatLogic.js","./spriteActions":"/home/ubuntu/staging/apps/build/js/studio/spriteActions.js","./visualization.html.ejs":"/home/ubuntu/staging/apps/build/js/studio/visualization.html.ejs"}],"/home/ubuntu/staging/apps/build/js/studio/visualization.html.ejs":[function(require,module,exports){module.exports=function(){var t=function anonymous(locals,filters,escape){escape=escape||function(a){return String(a).replace(/&(?!\w+;)/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")};var buf=[];with(locals||{})!function(){buf.push('<svg xmlns="http://www.w3.org/2000/svg" version="1.1" id="svgStudio">\n</svg>\n<div id="capacityBubble">\n  <div id="capacity"></div>\n</div>\n')}();return buf.join("")};return function(a){return t(a,require("ejs").filters)}}()},{ejs:"/home/ubuntu/staging/apps/node_modules/ejs/lib/ejs.js"}],"/home/ubuntu/staging/apps/build/js/studio/samBatLogic.js":[function(a,b,c){var d=a("./customGameLogic"),e=a("./constants"),f=e.Direction,g=(e.Position,a("../constants").KeyCodes),h=(a("../codegen"),a("./api"),function(a){d.apply(this,arguments),this.samIndex=0,this.sam=null,this.stopped={left:!1,up:!1,right:!1,down:!1}});h.inherits(d),h.prototype.onTick=function(){this.sam=this.studio_.sprite[this.samIndex];for(var a in g)if(this.studio_.keyState[g[a]]&&"keydown"===this.studio_.keyState[g[a]])switch(g[a]){case g.LEFT:this.updateSam_(f.WEST);break;case g.UP:this.updateSam_(f.NORTH);break;case g.RIGHT:this.updateSam_(f.EAST);break;case g.DOWN:this.updateSam_(f.SOUTH)}for(var b in this.studio_.btnState)if(this.studio_.btnState[b])switch(b){case"leftButton":this.updateSam_(f.WEST);break;case"upButton":this.updateSam_(f.NORTH);break;case"rightButton":this.updateSam_(f.EAST);break;case"downButton":this.updateSam_(f.SOUTH)}var c=this.sam.x+this.sam.width/2,d=this.studio_.MAZE_HEIGHT-(this.sam.y+this.sam.height/2);this.studio_.scoreText="("+c+", "+d+")",this.studio_.displayScore()},h.prototype.updateSam_=function(a){var b=this.sam.x+this.sam.width/2,c=this.studio_.MAZE_HEIGHT-(this.sam.y+this.sam.height/2);switch(a){case f.WEST:this.onscreen(b-this.sam.speed,c)||(a=f.NONE,this.stopped.left=!0);break;case f.NORTH:this.onscreen(b,c+this.sam.speed)||(a=f.NONE,this.stopped.up=!0);break;case f.EAST:this.onscreen(b+this.sam.speed,c)||(a=f.NONE,this.stopped.right=!0);break;case f.SOUTH:this.onscreen(b,c-this.sam.speed)||(a=f.NONE,this.stopped.down=!0)}this.studio_.moveSingle({spriteIndex:this.samIndex,dir:a})},h.prototype.onscreen=function(a,b){return this.resolveCachedBlock_("VALUE")(a,b)},b.exports=h},{"../codegen":"/home/ubuntu/staging/apps/build/js/codegen.js","../constants":"/home/ubuntu/staging/apps/build/js/constants.js","./api":"/home/ubuntu/staging/apps/build/js/studio/api.js","./constants":"/home/ubuntu/staging/apps/build/js/studio/constants.js","./customGameLogic":"/home/ubuntu/staging/apps/build/js/studio/customGameLogic.js"}],"/home/ubuntu/staging/apps/build/js/studio/rocketHeightLogic.js":[function(a,b,c){var d=a("./customGameLogic"),e=a("./constants"),f=e.Direction,g=(a("../codegen"),a("./api"),function(a){d.apply(this,arguments),this.rocketIndex=0,this.last=Date.now(),this.seconds=0,this.rocket=null,this.height=0,this.SECONDS_TO_RUN=8});g.inherits(d),g.prototype.onTick=function(){1===this.studio_.tickCount&&(this.last=Date.now(),this.seconds=0,this.rocket=this.studio_.sprite[this.rocketIndex],this.height=0,this.studio_.setBackground({value:"space"})),Date.now()-this.last<1e3||(this.last=Date.now(),this.seconds++,this.height=this.rocket_height(this.seconds)||0,this.rocket.y=this.studio_.MAZE_HEIGHT-(this.height+this.rocket.height),this.rocket.dir=f.NONE,this.studio_.scoreText="Time: "+this.seconds+" | Height: "+this.height,this.studio_.displayScore())},g.prototype.rocket_height=function(a){return this.resolveCachedBlock_("VALUE")(a)},b.exports=g},{"../codegen":"/home/ubuntu/staging/apps/build/js/codegen.js","./api":"/home/ubuntu/staging/apps/build/js/studio/api.js","./constants":"/home/ubuntu/staging/apps/build/js/studio/constants.js","./customGameLogic":"/home/ubuntu/staging/apps/build/js/studio/customGameLogic.js"}],"/home/ubuntu/staging/apps/build/js/studio/projectile.js":[function(a,b,c){var d=a("./collidable"),e=a("./constants").Direction,f=a("./constants"),g=(a("../utils"),a("./StudioAnimation")),h=a("./StudioSpriteSheet"),i={};i[e.EAST]=0,i[e.SOUTH]=90,i[e.WEST]=180,i[e.NORTH]=270,i[e.NORTHEAST]=45,i[e.SOUTHEAST]=135,i[e.SOUTHWEST]=225,i[e.NORTHWEST]=315;var j={};j[e.NORTH]={x:.5,y:0},j[e.EAST]={x:1,y:.5},j[e.SOUTH]={x:.5,y:1},j[e.WEST]={x:0,y:.5},j[e.NORTHEAST]={x:1,y:0},j[e.SOUTHEAST]={x:1,y:1},j[e.SOUTHWEST]={x:0,y:1},j[e.NORTHWEST]={x:0,y:0};var k={};k[e.NORTH]={x:0,y:-25},k[e.EAST]={x:25,y:0},k[e.SOUTH]={x:0,y:25},k[e.WEST]={x:-25,y:0},k[e.NORTHEAST]={x:25,y:-25},k[e.SOUTHEAST]={x:25,y:25},k[e.SOUTHWEST]={x:-25,y:25},k[e.NORTHWEST]={x:-25,y:-25};var l=function(a){d.apply(this,arguments),this.height=a.height||50,this.width=a.width||50,this.speed=a.speed||f.DEFAULT_SPRITE_SPEED/2,this.x=a.spriteX+k[a.dir].x+a.spriteWidth*j[a.dir].x,this.y=a.spriteY+k[a.dir].y+a.spriteHeight*j[a.dir].y,this.spriteSheet_=new h($.extend({},a,{width:a.spriteWidth,height:a.spriteHeight,horizontalAnimation:!0,totalAnimations:1})),this.animation_=new g($.extend({},a,{spriteSheet:this.spriteSheet_}))};l.inherits(d),b.exports=l,l.prototype.getElement=function(){return this.animation_.getElement()},l.prototype.createElement=function(a){this.animation_.createElement(a)},l.prototype.removeElement=function(){this.animation_.removeElement()},l.prototype.display=function(){({x:this.x-this.width/2,y:this.y-this.height/2});this.animation_.redrawCenteredAt({x:this.x,y:this.y}),this.spriteSheet_.framesPerAnimation>1&&this.getElement().setAttribute("transform","rotate("+i[this.dir]+", "+this.x+", "+this.y+")")},l.prototype.getNextPosition=function(){var a=e.getUnitVector(this.dir);return{x:this.x+this.speed*a.x,y:this.y+this.speed*a.y}},l.prototype.moveToNextPosition=function(){var a=this.getNextPosition();this.x=a.x,this.y=a.y},l.prototype.setOpacity=function(a){this.animation_.setOpacity(a)}},{"../utils":"/home/ubuntu/staging/apps/build/js/utils.js","./StudioAnimation":"/home/ubuntu/staging/apps/build/js/studio/StudioAnimation.js","./StudioSpriteSheet":"/home/ubuntu/staging/apps/build/js/studio/StudioSpriteSheet.js","./collidable":"/home/ubuntu/staging/apps/build/js/studio/collidable.js","./constants":"/home/ubuntu/staging/apps/build/js/studio/constants.js"}],"/home/ubuntu/staging/apps/build/js/studio/skins.js":[function(a,b,c){function d(a,b){a.preloadAssets=!0,a.defaultBackground="leafy",a.projectileFrames=10,a.itemFrames=10,a.ProjectileClassNames=["projectile_hiro","projectile_anna","projectile_elsa","projectile_baymax","projectile_rapunzel","projectile_cherry","projectile_ice","projectile_duck"],a.specialProjectileProperties={projectile_cherry:{frames:13},projectile_ice:{frames:12},projectile_duck:{frames:12}},a.ItemClassNames=["item_hiro","item_anna","item_elsa","item_baymax","item_rapunzel","item_cherry","item_ice","item_duck"],a.specialItemProperties={item_cherry:{frames:13},item_ice:{frames:12},item_duck:{frames:12}},a.explosion=a.assetUrl("vanish.png"),a.explosionFrames=17,a.fadeExplosion=!0,a.timePerExplosionFrame=100,a.projectileSpriteWidth=70,a.projectileSpriteHeight=70,a.avatarList=["anna","elsa","hiro","baymax","rapunzel"],a.avatarList.forEach(function(b){a[b]={sprite:a.assetUrl("avatar_"+b+".png"),walk:a.assetUrl("walk_"+b+".png"),dropdownThumbnail:a.assetUrl("avatar_"+b+"_thumb.png"),frameCounts:{normal:19,animation:0,turns:8,emotions:0,walk:12},timePerFrame:100}}),a.preventProjectileLoop=function(a){return"projectile_hiro"===a},a.preventItemLoop=function(a){return"item_hiro"===a},a.projectile_hiro=a.assetUrl("projectile_hiro.png"),a.projectile_anna=a.assetUrl("projectile_anna.png"),a.projectile_elsa=a.assetUrl("projectile_elsa.png"),a.projectile_baymax=a.assetUrl("projectile_baymax.png"),a.projectile_rapunzel=a.assetUrl("projectile_rapunzel.png"),a.projectile_cherry=a.assetUrl("projectile_cherry.png"),a.projectile_ice=a.assetUrl("projectile_ice.png"),a.projectile_duck=a.assetUrl("projectile_duck.png"),a.item_hiro=a.assetUrl("projectile_hiro.png"),a.item_anna=a.assetUrl("projectile_anna.png"),a.item_elsa=a.assetUrl("projectile_elsa.png"),a.item_baymax=a.assetUrl("projectile_baymax.png"),a.item_rapunzel=a.assetUrl("projectile_rapunzel.png"),a.item_cherry=a.assetUrl("projectile_cherry.png"),a.item_ice=a.assetUrl("projectile_ice.png"),a.item_duck=a.assetUrl("projectile_duck.png"),a.leafy={background:a.assetUrl("background_leafy.jpg")},a.grassy={background:a.assetUrl("background_grassy.jpg")},a.flower={background:a.assetUrl("background_flower.jpg")},a.tile={background:a.assetUrl("background_tile.jpg")},a.icy={background:a.assetUrl("background_icy.jpg")},a.snowy={background:a.assetUrl("background_snowy.jpg")},a.backgroundChoices=[[i.setBackgroundRandom(),k],[i.setBackgroundLeafy(),'"leafy"'],[i.setBackgroundGrassy(),'"grassy"'],[i.setBackgroundFlower(),'"flower"'],[i.setBackgroundTile(),'"tile"'],[i.setBackgroundIcy(),'"icy"'],[i.setBackgroundSnowy(),'"snowy"']],a.backgroundChoicesK1=[[a.leafy.background,'"leafy"'],[a.grassy.background,'"grassy"'],[a.flower.background,'"flower"'],[a.tile.background,'"tile"'],[a.icy.background,'"icy"'],[a.snowy.background,'"snowy"'],[a.randomPurpleIcon,k]],a.spriteChoices=[[i.setSpriteHidden(),l],[i.setSpriteRandom(),k],[i.setSpriteAnna(),'"anna"'],[i.setSpriteElsa(),'"elsa"'],[i.setSpriteHiro(),'"hiro"'],[i.setSpriteBaymax(),'"baymax"'],[i.setSpriteRapunzel(),'"rapunzel"']],a.projectileChoices=[[i.projectileHiro(),'"projectile_hiro"'],[i.projectileAnna(),'"projectile_anna"'],[i.projectileElsa(),'"projectile_elsa"'],[i.projectileBaymax(),'"projectile_baymax"'],[i.projectileRapunzel(),'"projectile_rapunzel"'],[i.projectileCherry(),'"projectile_cherry"'],[i.projectileIce(),'"projectile_ice"'],[i.projectileDuck(),'"projectile_duck"'],[i.projectileRandom(),k]],a.itemChoices=[[i.itemHiro(),'"item_hiro"'],[i.itemAnna(),'"item_anna"'],[i.itemElsa(),'"item_elsa"'],[i.itemBaymax(),'"item_baymax"'],[i.itemRapunzel(),'"item_rapunzel"'],[i.itemCherry(),'"item_cherry"'],[i.itemIce(),'"item_ice"'],[i.itemDuck(),'"item_duck"'],[i.itemRandom(),k]]}function e(a,b){a.preloadAssets=!0,a.defaultBackground="forest",a.projectileFrames=10,a.itemFrames=10,a.ProjectileClassNames=[],a.ItemClassNames=["pig","man","roo","bird","spider","mouse","pilot"],a.AutohandlerTouchItems={whenTouchPig:"pig",whenTouchMan:"man",whenTouchRoo:"roo",whenTouchBird:"bird",whenTouchSpider:"spider",whenTouchMouse:"mouse",whenTouchPilot:"pilot",whenGetPig:"pig",whenGetMan:"man",whenGetRoo:"roo",whenGetBird:"bird",whenGetSpider:"spider",whenGetMouse:"mouse",whenGetPilot:"pilot"},a.AutohandlerTouchAllItems={whenTouchAllPigs:"pig",whenTouchAllMen:"man",whenTouchAllRoos:"roo",whenTouchAllBirds:"bird",whenTouchAllSpiders:"spider",whenTouchAllMice:"mouse",whenTouchAllPilots:"pilot",whenGetAllPigs:"pig",whenGetAllMen:"man",whenGetAllRoos:"roo",whenGetAllBirds:"bird",whenGetAllSpiders:"spider",whenGetAllMice:"mouse",whenGetAllPilots:"pilot"},a.specialItemProperties={pig:{frames:12,width:100,height:100,scale:1,renderOffset:{x:0,y:-25},activity:"roam",speed:j.SpriteSpeed.VERY_SLOW},man:{frames:12,width:100,height:100,scale:1,renderOffset:{x:0,y:-25},activity:"chase",speed:j.SpriteSpeed.VERY_SLOW},roo:{frames:15,width:100,height:100,scale:1.6,renderOffset:{x:0,y:-25},activity:"roam",speed:j.SpriteSpeed.SLOW},bird:{frames:8,width:100,height:100,scale:1.6,renderOffset:{x:0,y:-25},activity:"roam",speed:j.SpriteSpeed.SLOW},spider:{frames:12,width:100,height:100,scale:1.2,renderOffset:{x:0,y:-25},activity:"chase",speed:j.SpriteSpeed.LITTLE_SLOW},mouse:{frames:1,width:100,height:100,scale:.6,renderOffset:{x:0,y:-25},activity:"flee",speed:j.SpriteSpeed.LITTLE_SLOW},pilot:{frames:13,width:100,height:100,scale:1,renderOffset:{x:0,y:-25},activity:"flee",speed:j.SpriteSpeed.SLOW}},a.explosion=a.assetUrl("vanish.png"),a.explosionFrames=17,a.animatedGoal=a.assetUrl("goal_idle.png"),a.animatedGoalFrames=16,a.timePerGoalAnimationFrame=100,a.goalCollisionRectWidth=50,a.goalCollisionRectHeight=50,a.fadeOutGoal=!0,a.goalSuccess=null,a.goalRenderOffsetX=-25,a.goalRenderOffsetY=-45,a.projectileSpriteWidth=70,a.projectileSpriteHeight=70,a.itemCollisionRectWidth=50,a.itemCollisionRectHeight=50,a.spriteCollisionRectWidth=50,a.spriteCollisionRectHeight=50,a.wallCollisionRectOffsetX=0,a.wallCollisionRectOffsetY=24,a.wallCollisionRectWidth=30,a.wallCollisionRectHeight=20,a.gridSpriteRenderOffsetX=-30,a.gridSpriteRenderOffsetY=-40,a.avatarList=["bot1","bot2"],a.avatarList.forEach(function(b){a[b]={sprite:a.assetUrl("avatar_"+b+".png"),walk:a.assetUrl("walk_"+b+".png"),dropdownThumbnail:a.assetUrl("avatar_"+b+"_thumb.png"),frameCounts:{normal:"bot1"==b?14:16,animation:0,turns:8,emotions:0,walk:"bot1"==b?14:8},timePerFrame:100}}),a.preventProjectileLoop=function(a){return""===a},a.preventItemLoop=function(a){return"item_character1"===a},a.failureAvatar=null,a.pig=a.assetUrl("walk_item1.png"),a.man=a.assetUrl("walk_item2.png"),a.roo=a.assetUrl("walk_item3.png"),a.bird=a.assetUrl("walk_item4.png"),a.spider=a.assetUrl("walk_item5.png"),a.mouse=a.assetUrl("walk_item6.png"),a.pilot=a.assetUrl("walk_item7.png"),a.forest={background:a.assetUrl("background_background1.jpg"),tiles:a.assetUrl("tiles_background1.png"),jumboTiles:a.assetUrl("jumbotiles_background1.png"),jumboTilesAddOffset:-5,jumboTilesSize:60,jumboTilesRows:4,jumboTilesCols:4},a.snow={background:a.assetUrl("background_background2.jpg"),tiles:a.assetUrl("tiles_background2.png"),jumboTiles:a.assetUrl("jumbotiles_background2.png"),jumboTilesAddOffset:-5,jumboTilesSize:60,jumboTilesRows:4,jumboTilesCols:4},a.ship={background:a.assetUrl("background_background3.jpg"),tiles:a.assetUrl("tiles_background3.png"),jumboTiles:a.assetUrl("jumbotiles_background3.png"),jumboTilesAddOffset:-5,jumboTilesSize:60,jumboTilesRows:4,jumboTilesCols:4},a.enlargeWallTiles={minCol:0,maxCol:3,minRow:3,maxRow:5},a.getMap=function(a,b){return"snow"!=a||"circle"!=b&&"horizontal"!=b?b:b+"_nonjumbo"},a.blank=[[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0]],a.circle_nonjumbo=[[0,0,0,0,0,0,0,0],[0,17,2,3,0,68,69,0],[0,4,0,0,0,0,3,0],[0,20,0,289,289,0,5,0],[0,2,0,289,289,0,21,0],[0,3,0,0,0,0,2,0],[0,36,37,2,0,52,53,0],[0,0,0,0,0,0,0,0]],a.circle=[[0,0,0,0,0,0,0,0],[0,512,531,531,0,531,513,0],[0,530,0,0,0,0,530,0],[0,530,0,289,289,0,530,0],[0,530,0,289,289,0,530,0],[0,530,0,0,0,0,530,0],[0,514,531,531,0,531,515,0],[0,0,0,0,0,0,0,0]],a.horizontal_nonjumbo=[[0,0,0,0,0,0,0,0],[0,2,3,4,0,36,37,0],[0,0,0,0,0,0,0,0],[0,16,0,52,53,32,35,0],[0,0,0,0,0,0,0,0],[0,3,2,34,32,33,0,0],[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0]],a.horizontal=[[0,0,0,0,0,0,0,0],[0,531,531,531,0,531,531,0],[0,0,0,0,0,0,0,0],[0,16,0,531,531,531,531,0],[0,0,0,0,0,0,0,0],[0,531,531,531,531,531,0,0],[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0]],a.grid=[[0,0,0,0,0,0,0,0],[0,33,0,16,0,32,0,3],[0,0,0,0,0,0,0,0],[0,2,0,17,0,33,0,2],[0,0,0,0,0,0,0,0],[0,3,0,32,0,34,0,17],[0,0,0,0,0,0,0,0],[0,16,0,33,0,35,0,16]],a.blobs=[[0,0,0,0,0,0,0,0],[0,259,259,0,0,0,34,0],[0,259,259,0,0,272,272,0],[0,0,0,0,0,272,272,0],[0,0,258,258,0,0,0,0],[0,0,258,258,0,0,0,35],[0,0,3,0,0,0,289,289],[0,0,0,0,0,0,289,289]],a.sounds=["character1sound1","character1sound2","character1sound3","character1sound4","character1sound5","character1sound6","character1sound7","character1sound8","character2sound1","character2sound2","character2sound3","character2sound4","item1sound1","item1sound2","item1sound3","item1sound4","item3sound1","item3sound2","item3sound3","item3sound4","alert1","alert2","alert3","alert4","applause","start","win","failure","flag","move1","move2","move3"],a.playFinalGoalSound=!0,a.moveSounds=["move1","move2","move3"],a.mapChoices=[[i.setMapRandom(),k],[i.setMapBlank(),'"blank"'],[i.setMapCircle(),'"circle"'],[i.setMapHorizontal(),'"horizontal"'],[i.setMapGrid(),'"grid"'],[i.setMapBlobs(),'"blobs"']],a.backgroundChoices=[[i.setBackgroundRandom(),k],[i.setBackgroundForest(),'"forest"'],[i.setBackgroundSnow(),'"snow"'],[i.setBackgroundShip(),'"ship"']],a.backgroundChoicesK1=[[a.forest.background,'"forest"'],[a.snow.background,'"snow"'],[a.ship.background,'"ship"'],[a.randomPurpleIcon,k]],a.spriteChoices=[[i.setSpriteHidden(),l],[i.setSpriteRandom(),k],[i.setSpriteBot1(),'"bot1"'],[i.setSpriteBot2(),'"bot2"']],a.projectileChoices=[],a.itemChoices=[[i.itemMan(),'"man"'],[i.itemPilot(),'"pilot"'],[i.itemPig(),'"pig"'],[i.itemBird(),'"bird"'],[i.itemMouse(),'"mouse"'],[i.itemRoo(),'"roo"'],[i.itemSpider(),'"spider"'],[i.itemRandom(),k]]}function f(a,b){a.preloadAssets=!0,a.defaultBackground="main",a.projectileFrames=10,a.itemFrames=10,a.ProjectileClassNames=[],a.ItemClassNames=["hazard"],a.AutohandlerTouchItems={},a.AutohandlerTouchAllItems={},a.specialItemProperties={hazard:{frames:13,animationRate:5,width:100,height:100,renderOffset:{x:0,y:-25},activity:"watchActor",speed:j.SpriteSpeed.VERY_SLOW,isHazard:!0}},a.goal1=a.assetUrl("goal1.png"),a.goal2=a.assetUrl("goal2.png"),a.animatedGoalFrames=16,a.timePerGoalAnimationFrame=100,a.goalCollisionRectWidth=50,a.goalCollisionRectHeight=50,a.fadeOutGoal=!0,a.goalSuccess=null,a.goalRenderOffsetX=0,a.goalRenderOffsetY=0,a.projectileSpriteWidth=70,a.projectileSpriteHeight=70,a.itemCollisionRectWidth=50,a.itemCollisionRectHeight=50,a.spriteCollisionRectWidth=50,a.spriteCollisionRectHeight=50,a.wallCollisionRectOffsetX=0,a.wallCollisionRectOffsetY=24,a.wallCollisionRectWidth=30,a.wallCollisionRectHeight=20,a.gridSpriteRenderOffsetX=-20,a.gridSpriteRenderOffsetY=-40,a.avatarList=["bot1"],a.avatarList.forEach(function(b){a[b]={sprite:a.assetUrl("avatar_"+b+".png"),walk:a.assetUrl("walk_"+b+".png"),dropdownThumbnail:a.assetUrl("avatar_"+b+"_thumb.png"),frameCounts:{normal:8,animation:0,turns:8,emotions:0,walk:10},timePerFrame:100}}),a.preventProjectileLoop=function(a){return""===a},a.preventItemLoop=function(a){return"item_character1"===a},a.hazard=a.assetUrl("hazard_idle.png"),a.main={background:a.assetUrl("background_background1.jpg"),tiles:a.assetUrl("tiles_background1.png")},a.enlargeWallTiles={minCol:0,maxCol:3,minRow:3,maxRow:5},a.sounds=["character1sound1","character1sound2","character1sound3","character1sound4","character2sound1","character2sound2","character2sound3","character2sound4","item1sound1","item1sound2","item1sound3","item1sound4","item3sound1","item3sound2","item3sound3","item3sound4","alert1","alert2","alert3","alert4","applause","start","win","failure","flag","move1","move2","move3","move4"],a.playFinalGoalSound=!0,a.moveSounds=["move1","move2","move3","move4"],a.mapChoices=[],a.backgroundChoices=[],a.backgroundChoicesK1=[],a.spriteChoices=[[i.setSpriteHidden(),l],[i.setSpriteRandom(),k],[i.setSpriteBot1(),'"bot1"']],a.projectileChoices=[],a.itemChoices=[]}function g(a,b){a.defaultBackground="cave",a.projectileFrames=8,a.itemFrames=8,a.explosion=a.assetUrl("explosion.png"),a.explosionThumbnail=a.assetUrl("explosion_thumb.png"),a.explosionFrames=20,a.fadeExplosion=!1,a.timePerExplosionFrame=40,a.hardcourt={background:a.assetUrl("background.png")},a.black={background:a.assetUrl("retro_background.png")},a.cave={background:a.assetUrl("background_cave.png")},a.night={background:a.assetUrl("background_santa.png")},a.cloudy={background:a.assetUrl("background_scifi.png")},a.underwater={background:a.assetUrl("background_underwater.png")},a.city={background:a.assetUrl("background_city.png")},a.desert={background:a.assetUrl("background_desert.png")},a.rainbow={background:a.assetUrl("background_rainbow.png")},a.soccer={background:a.assetUrl("background_soccer.png")},a.space={background:a.assetUrl("background_space.png")},a.tennis={background:a.assetUrl("background_tennis.png")},a.winter={background:a.assetUrl("background_winter.png")},a.grid={background:a.assetUrl("background_grid.png")},a.avatarList=["dog","cat","penguin","dinosaur","octopus","witch","bat","bird","dragon","squirrel","wizard","alien","ghost","monster","robot","unicorn","zombie","knight","ninja","pirate","caveboy","cavegirl","princess","spacebot","soccergirl","soccerboy","tennisgirl","tennisboy"],a.avatarList.forEach(function(b){a[b]={sprite:a.assetUrl(b+"_spritesheet_200px.png"),dropdownThumbnail:a.assetUrl(b+"_thumb.png"),frameCounts:{normal:1,animation:1,turns:7,emotions:3}}}),a.backgroundChoices=[[i.setBackgroundRandom(),k],[i.setBackgroundCave(),'"cave"'],[i.setBackgroundNight(),'"night"'],[i.setBackgroundCloudy(),'"cloudy"'],[i.setBackgroundUnderwater(),'"underwater"'],[i.setBackgroundHardcourt(),'"hardcourt"'],[i.setBackgroundBlack(),'"black"'],[i.setBackgroundCity(),'"city"'],[i.setBackgroundDesert(),'"desert"'],[i.setBackgroundRainbow(),'"rainbow"'],[i.setBackgroundSoccer(),'"soccer"'],[i.setBackgroundSpace(),'"space"'],[i.setBackgroundTennis(),'"tennis"'],[i.setBackgroundWinter(),'"winter"']],a.backgroundChoicesK1=[[a.cave.background,'"cave"'],[a.night.background,'"night"'],[a.cloudy.background,'"cloudy"'],[a.underwater.background,'"underwater"'],[a.hardcourt.background,'"hardcourt"'],[a.black.background,'"black"'],[a.city.background,'"city"'],[a.desert.background,'"desert"'],[a.rainbow.background,'"rainbow"'],[a.soccer.background,'"soccer"'],[a.space.background,'"space"'],[a.tennis.background,'"tennis"'],[a.winter.background,'"winter"'],[a.randomPurpleIcon,k]],a.spriteChoices=[[i.setSpriteHidden(),l],[i.setSpriteRandom(),k],[i.setSpriteWitch(),'"witch"'],[i.setSpriteCat(),'"cat"'],[i.setSpriteDinosaur(),'"dinosaur"'],[i.setSpriteDog(),'"dog"'],[i.setSpriteOctopus(),'"octopus"'],[i.setSpritePenguin(),'"penguin"'],[i.setSpriteBat(),'"bat"'],[i.setSpriteBird(),'"bird"'],[i.setSpriteDragon(),'"dragon"'],[i.setSpriteSquirrel(),'"squirrel"'],[i.setSpriteWizard(),'"wizard"'],[i.setSpriteAlien(),'"alien"'],[i.setSpriteGhost(),'"ghost"'],[i.setSpriteMonster(),'"monster"'],[i.setSpriteRobot(),'"robot"'],[i.setSpriteUnicorn(),'"unicorn"'],[i.setSpriteZombie(),'"zombie"'],[i.setSpriteKnight(),'"knight"'],[i.setSpriteNinja(),'"ninja"'],[i.setSpritePirate(),'"pirate"'],[i.setSpriteCaveBoy(),'"caveboy"'],[i.setSpriteCaveGirl(),'"cavegirl"'],[i.setSpritePrincess(),'"princess"'],[i.setSpriteSpacebot(),'"spacebot"'],[i.setSpriteSoccerGirl(),'"soccergirl"'],[i.setSpriteSoccerBoy(),'"soccerboy"'],[i.setSpriteTennisGirl(),'"tennisgirl"'],[i.setSpriteTennisBoy(),'"tennisboy"']],a.projectileChoices=[[i.projectileBlueFireball(),'"blue_fireball"'],[i.projectilePurpleFireball(),'"purple_fireball"'],[i.projectileRedFireball(),'"red_fireball"'],[i.projectileYellowHearts(),'"yellow_hearts"'],[i.projectilePurpleHearts(),'"purple_hearts"'],[i.projectileRedHearts(),'"red_hearts"'],[i.projectileRandom(),k]],a.itemChoices=[[i.itemBlueFireball(),'"item_blue_fireball"'],[i.itemPurpleFireball(),'"item_purple_fireball"'],[i.itemRedFireball(),'"item_red_fireball"'],[i.itemYellowHearts(),'"item_yellow_hearts"'],[i.itemPurpleHearts(),'"item_purple_hearts"'],[i.itemRedHearts(),'"item_red_hearts"'],[i.itemRandom(),k]]}var h=a("../skins"),i=a("./locale"),j=a("./constants"),k=(a("../StudioApp").singleton,j.RANDOM_VALUE),l=j.HIDDEN_VALUE;j.CLICK_VALUE,j.VISIBLE_VALUE;c.load=function(a,b){var c=h.load(a,b);switch(c.ProjectileClassNames=["blue_fireball","purple_fireball","red_fireball","purple_hearts","red_hearts","yellow_hearts"],c.ItemClassNames=["item_blue_fireball","item_purple_fireball","item_red_fireball","item_purple_hearts","item_red_hearts","item_yellow_hearts"],c.yellow_hearts=c.assetUrl("yellow_hearts.gif"),c.purple_hearts=c.assetUrl("purple_hearts.gif"),c.red_hearts=c.assetUrl("red_hearts.gif"),c.blue_fireball=c.assetUrl("blue_fireball.png"),c.purple_fireball=c.assetUrl("purple_fireball.png"),c.red_fireball=c.assetUrl("red_fireball.png"),c.item_yellow_hearts=c.assetUrl("yellow_hearts.gif"),c.item_purple_hearts=c.assetUrl("purple_hearts.gif"),c.item_red_hearts=c.assetUrl("red_hearts.gif"),c.item_blue_fireball=c.assetUrl("blue_fireball.png"),c.item_purple_fireball=c.assetUrl("purple_fireball.png"),c.item_red_fireball=c.assetUrl("red_fireball.png"),c.whenUp=c.assetUrl("when-up.png"),
c.whenDown=c.assetUrl("when-down.png"),c.whenLeft=c.assetUrl("when-left.png"),c.whenRight=c.assetUrl("when-right.png"),c.collide=c.assetUrl("when-sprite-collide.png"),c.emotionAngry=c.assetUrl("emotion-angry.png"),c.emotionNormal=c.assetUrl("emotion-nothing.png"),c.emotionSad=c.assetUrl("emotion-sad.png"),c.emotionHappy=c.assetUrl("emotion-happy.png"),c.speechBubble=c.assetUrl("say-sprite.png"),c.goal=c.assetUrl("goal.png"),c.goalSuccess=c.assetUrl("goal_success.png"),c.sounds=["rubber","crunch","goal1","goal2","wood","retro","slap","hit","winpoint","winpoint2","losepoint","losepoint2","start","win","failure","flag"],c.background=c.assetUrl("background.png"),c.spriteHeight=100,c.spriteWidth=100,c.dropdownThumbnailWidth=50,c.dropdownThumbnailHeight=50,c.preloadAssets=!0,c.activityChoices=[[i.setActivityRandom(),k],[i.setActivityRoam(),'"roam"'],[i.setActivityChase(),'"chase"'],[i.setActivityFlee(),'"flee"'],[i.setActivityNone(),'"none"']],c.id){case"infinity":d(c,a);break;case"hoc2015":e(c,a);break;case"hoc2015x":f(c,a);break;case"studio":g(c,a)}return c}},{"../StudioApp":"/home/ubuntu/staging/apps/build/js/StudioApp.js","../skins":"/home/ubuntu/staging/apps/build/js/skins.js","./constants":"/home/ubuntu/staging/apps/build/js/studio/constants.js","./locale":"/home/ubuntu/staging/apps/build/js/studio/locale.js"}],"/home/ubuntu/staging/apps/build/js/studio/levels.js":[function(a,b,c){function d(a){var b={};return a.sprite&&(b.SPRITE=a.sprite),a.requiredText&&(b.TEXT=a.requiredText),a.notDefaultText&&(b.TEXT=j.helloWorld()),[{test:function(b){return"studio_saySprite"!==b.type?!1:a.sprite&&b.getTitleValue("SPRITE")!==a.sprite?!1:(a.notDefaultText||a.requiredText)&&b.getTitleValue("TEXT")===j.defaultSayText()?!1:!0},type:"studio_saySprite",titles:b}]}function e(a){var b={};return a.sprite&&(b.SPRITE=a.sprite),a.dir&&(b.DIR=a.dir),[{test:function(b){return"studio_move"!==b.type?!1:a.sprite&&b.getTitleValue("SPRITE")!==a.sprite?!1:a.dir&&b.getTitleValue("DIR")!==a.dir?!1:!0},type:"studio_move",titles:b}]}function f(){return e({dir:"1"})}function g(){return e({dir:"4"})}function h(){return e({dir:"2"})}function i(){return e({dir:"8"})}var j=a("./locale"),k=a("../utils"),l=a("../block_utils"),m=a("./constants"),n=(m.Direction,m.Emotions),o=l.createToolbox,p=l.blockOfType,q=l.createCategory,r='<block type="studio_move"><title name="DIR">1</title></block>   <block type="studio_move"><title name="DIR">4</title></block>   <block type="studio_move"><title name="DIR">8</title></block>   <block type="studio_move"><title name="DIR">2</title></block>',s='<block type="studio_move"><title name="DIR">1</title></block>   <block type="studio_move"><title name="DIR">4</title></block>',t='<block type="when_run"><next>   <block type="studio_move"><title name="DIR">2</title></block></next>   </block>',u='<block type="when_run"><next>   <block type="studio_move"><title name="DIR">4</title></block></next>   </block>',v='<block type="studio_whenUp" deletable="false" x="20" y="20"></block>   <block type="studio_whenDown" deletable="false" x="20" y="150"></block>',w='<block type="studio_whenUp" deletable="false" x="20" y="20"></block>   <block type="studio_whenDown" deletable="false" x="20" y="150"></block>   <block type="studio_whenLeft" deletable="false" x="20" y="280"></block>   <block type="studio_whenRight" deletable="false" x="20" y="410"></block>',x=p("studio_moveNorthDistance")+p("studio_moveEastDistance")+p("studio_moveSouthDistance")+p("studio_moveWestDistance"),y=(p("studio_moveNorth")+p("studio_moveEast")+p("studio_moveSouth")+p("studio_moveWest"),b.exports={});y.custom={ideal:1/0,requiredBlocks:[],scale:{snapRadius:2},startBlocks:""},y.dog_hello={ideal:2,requiredBlocks:[d({notDefaultText:!0})],scale:{snapRadius:2},map:[[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0],[0,0,0,16,0,0,0,0],[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0]],goal:{successCondition:function(){return Studio.sayComplete>0}},timeoutFailureTick:100,toolbox:o(p("studio_saySprite")),startBlocks:'<block type="when_run" deletable="false" x="20" y="20"></block>'},y.k1_1=k.extend(y.dog_hello,{isK1:!0,toolbox:o(p("studio_saySprite"))}),y.c2_1=k.extend(y.dog_hello),y.c3_story_1=k.extend(y.dog_hello),y.playlab_1=k.extend(y.dog_hello,{background:"winter",timeoutFailureTick:null,timeoutAfterWhenRun:!0,firstSpriteIndex:2,goal:{successCondition:function(){return Studio.allWhenRunBlocksComplete()&&Studio.sayComplete>0}},requiredBlocks:[d({requiredText:j.hello()})]}),y.dog_and_cat_hello={ideal:3,requiredBlocks:[d({sprite:"0",notDefaultText:!0}),d({sprite:"1",notDefaultText:!0})],scale:{snapRadius:2},map:[[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0],[0,0,16,0,0,16,0,0],[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0]],goal:{successCondition:function(){return Studio.sayComplete>1}},timeoutFailureTick:200,toolbox:o(p("studio_saySprite")),startBlocks:'<block type="when_run" deletable="false" x="20" y="20"></block>'},y.k1_2=k.extend(y.dog_and_cat_hello,{isK1:!0,toolbox:o(p("studio_saySprite"))}),y.c2_2=k.extend(y.dog_and_cat_hello,{}),y.c3_story_2=k.extend(y.dog_and_cat_hello,{}),y.playlab_2=k.extend(y.dog_and_cat_hello,{background:"desert",firstSpriteIndex:20,timeoutFailureTick:null,timeoutAfterWhenRun:!0,defaultEmotion:n.HAPPY,goal:{successCondition:function(){return Studio.allWhenRunBlocksComplete()&&Studio.sayComplete>1}},requiredBlocks:[d({sprite:"0",requiredText:j.hello()}),d({sprite:"1",requiredText:j.hello()})],map:[[0,0,0,0,0,0,0,0],[0,0,0,0,0,16,0,0],[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0],[0,16,0,0,0,0,0,0],[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0]]}),y.dog_move_cat={ideal:2,requiredBlocks:[[{test:"moveDistance",type:"studio_moveDistance",titles:{DIR:"2"}}]],scale:{snapRadius:2},map:[[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0],[0,0,16,0,0,16,0,0],[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0]],goal:{successCondition:function(){return Studio.sprite[0].isCollidingWith(1)}},timeoutFailureTick:100,toolbox:o('<block type="studio_moveDistance"><title name="DIR">2</title></block>'+p("studio_saySprite")),startBlocks:'<block type="when_run" deletable="false" x="20" y="20"></block>'},y.k1_3=k.extend(y.dog_move_cat,{isK1:!0,requiredBlocks:[[{test:function(a){return"studio_moveEastDistance"==a.type},type:"studio_moveEastDistance"}]],toolbox:o(x+p("studio_saySprite"))}),y.c2_3=k.extend(y.dog_move_cat,{}),y.c3_story_3=k.extend(y.dog_move_cat,{}),y.playlab_3={ideal:2,requiredBlocks:[[{test:"moveDistance",type:"studio_moveDistance",titles:{DIR:"2",DISTANCE:"200"}}]],timeoutFailureTick:null,timeoutAfterWhenRun:!0,scale:{snapRadius:2},background:"tennis",firstSpriteIndex:26,toolbox:o('<block type="studio_moveDistance"><title name="DIR">1</title><title name="DISTANCE">200</title></block><block type="studio_moveDistance"><title name="DIR">2</title><title name="DISTANCE">200</title></block><block type="studio_moveDistance"><title name="DIR">4</title><title name="DISTANCE">200</title></block><block type="studio_moveDistance"><title name="DIR">8</title><title name="DISTANCE">200</title></block>'),startBlocks:'<block type="when_run" deletable="false" x="20" y="20"></block>',map:[[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0],[0,16,0,0,0,1,0,0],[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0]]},y.dog_move_cat_hello={ideal:4,requiredBlocks:[[{test:"moveDistance",type:"studio_moveDistance",titles:{DIR:"2",DISTANCE:"100"}}],d({sprite:"1",requiredText:j.hello()})],scale:{snapRadius:2},map:[[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0],[0,0,16,0,0,16,0,0],[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0]],goal:{successCondition:function(){return Studio.sayComplete>0&&Studio.sprite[0].isCollidingWith(1)}},timeoutFailureTick:200,toolbox:o('<block type="studio_moveDistance"><title name="DIR">2</title></block>'+p("studio_saySprite")),startBlocks:'<block type="when_run" deletable="false" x="20" y="20"></block>     <block type="studio_whenSpriteCollided" deletable="false" x="20" y="120"></block>'},y.k1_4=k.extend(y.dog_move_cat_hello,{isK1:!0,requiredBlocks:[[{test:function(a){return"studio_moveEastDistance"==a.type},type:"studio_moveEastDistance"}],[{test:function(a){return"studio_saySprite"==a.type&&"1"===a.getTitleValue("SPRITE")&&a.getTitleValue("TEXT")!==j.defaultSayText()},type:"studio_saySprite",titles:{TEXT:j.hello(),SPRITE:"1"}}]],toolbox:o(x+p("studio_saySprite")),startBlocks:'<block type="when_run" deletable="false" x="20" y="20"></block>      <block type="studio_whenSpriteCollided" deletable="false" x="20" y="140"></block>'}),y.c2_4=k.extend(y.dog_move_cat_hello,{}),y.c3_story_4=k.extend(y.dog_move_cat_hello,{}),y.playlab_4={ideal:4,scale:{snapRadius:2},background:"tennis",avatarList:["tennisboy","tennisgirl"],defaultEmotion:n.SAD,requiredBlocks:[[{test:"moveDistance",type:"studio_moveDistance",titles:{DIR:"4",DISTANCE:"200"}}],[{test:"playSound",type:"studio_playSound",titles:{SOUND:"goal1"}}]],timeoutFailureTick:100,timeoutAfterWhenRun:!0,goal:{successCondition:function(){return Studio.playSoundCount>0&&Studio.sprite[0].isCollidingWith(1)}},toolbox:o('<block type="studio_moveDistance"><title name="DIR">1</title><title name="DISTANCE">200</title></block><block type="studio_moveDistance"><title name="DIR">2</title><title name="DISTANCE">200</title></block><block type="studio_moveDistance"><title name="DIR">4</title><title name="DISTANCE">200</title></block><block type="studio_moveDistance"><title name="DIR">8</title><title name="DISTANCE">200</title></block><block type="studio_playSound"><title name="SOUND">goal1</title></block>'),startBlocks:'<block type="when_run" deletable="false" x="20" y="20"></block><block type="studio_whenSpriteCollided" deletable="false" x="20" y="120"></block>',map:[[0,0,0,0,0,0,0,0],[0,0,0,16,0,0,0,0],[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0],[0,0,0,16,0,0,0,0],[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0]]},y.click_hello={ideal:3,requiredBlocks:[d({requiredText:j.hello()})],scale:{snapRadius:2},map:[[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0],[0,0,0,16,0,0,0,0],[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0]],firstSpriteIndex:4,goal:{successCondition:function(){return this.successState.seenCmd||(this.successState.seenCmd=Studio.isCmdCurrentInQueue("saySprite","whenSpriteClicked-0")),Studio.sayComplete>0&&this.successState.seenCmd}},timeoutFailureTick:300,toolbox:o('<block type="studio_moveDistance"><title name="DIR">2</title></block>'+p("studio_saySprite")),startBlocks:'<block type="when_run" deletable="false" x="20" y="20"></block>     <block type="studio_whenSpriteClicked" deletable="false" x="20" y="120"></block>'},y.c2_5=k.extend(y.click_hello,{}),y.c3_game_1=k.extend(y.click_hello,{}),y.playlab_5=k.extend(y.click_hello,{background:"space",firstSpriteIndex:23,timeoutAfterWhenRun:!0,defaultEmotion:n.HAPPY,toolbox:o(p("studio_saySprite")),startBlocks:'<block type="studio_whenSpriteClicked" deletable="false" x="20" y="20"></block>'}),y.octopus_happy={ideal:2,requiredBlocks:[[{test:"setSpriteEmotion",type:"studio_setSpriteEmotion"}]],scale:{snapRadius:2},map:[[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0],[0,0,0,16,0,0,0,0],[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0]],firstSpriteIndex:4,goal:{successCondition:function(){return Studio.sprite[0].emotion===n.HAPPY&&Studio.tickCount>=50}},timeoutFailureTick:100,toolbox:o('<block type="studio_moveDistance"><title name="DIR">2</title></block>'+p("studio_setSpriteEmotion")),startBlocks:'<block type="when_run" deletable="false" x="20" y="20"></block>'},y.k1_5=k.extend(y.octopus_happy,{isK1:!0,toolbox:o(x+p("studio_setSpriteEmotion"))}),y.c3_story_5=k.extend(y.octopus_happy,{}),y.c3_story_6={ideal:1/0,requiredBlocks:[],scale:{snapRadius:2},minWorkspaceHeight:1400,edgeCollisions:!0,projectileCollisions:!0,allowSpritesOutsidePlayspace:!1,spritesHiddenToStart:!0,freePlay:!0,map:[[0,16,0,0,0,16,0,0],[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0],[0,16,0,0,0,16,0,0],[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0],[0,16,0,0,0,16,0,0],[0,0,0,0,0,0,0,0]],toolbox:o(p("studio_setSprite")+p("studio_setBackground")+p("studio_whenSpriteCollided")+p("studio_repeatForever")+p("studio_showTitleScreen")+p("studio_move")+p("studio_moveDistance")+p("studio_stop")+p("studio_wait")+p("studio_playSound")+p("studio_changeScore")+p("studio_saySprite")+p("studio_setSpritePosition")+p("studio_setSpriteSpeed")+p("studio_setSpriteEmotion")),startBlocks:'<block type="when_run" deletable="false" x="20" y="20"></block>'},y.move_penguin={ideal:8,requiredBlocks:[[{test:"move",type:"studio_move"}]],scale:{snapRadius:2},softButtons:["leftButton","rightButton","downButton","upButton"],map:[[0,0,0,0,0,0,0,0],[1,0,0,0,0,1,0,0],[0,0,0,0,0,0,0,0],[0,0,16,0,0,0,0,0],[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0],[0,1,0,0,0,0,1,0],[0,0,0,0,0,0,0,0]],firstSpriteIndex:2,toolbox:o(p("studio_move")+p("studio_saySprite")),startBlocks:'<block type="studio_whenLeft" deletable="false" x="20" y="20"></block>     <block type="studio_whenRight" deletable="false" x="180" y="20"></block>     <block type="studio_whenUp" deletable="false" x="20" y="120"></block>     <block type="studio_whenDown" deletable="false" x="180" y="120"></block>'},y.c2_6=k.extend(y.move_penguin,{}),y.c3_game_2=k.extend(y.move_penguin,{}),y.playlab_6=k.extend(y.move_penguin,{background:"cave",firstSpriteIndex:5,goalOverride:{goal:"red_fireball",success:"blue_fireball",imageWidth:800},defaultEmotion:n.ANGRY,toolbox:o(p("studio_move",{DIR:8})+p("studio_move",{DIR:2})+p("studio_move",{DIR:1})+p("studio_move",{DIR:4})),map:[[1,0,0,0,0,0,1,0],[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0],[0,0,0,16,0,0,0,0],[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0],[1,0,0,0,0,0,1,0],[0,0,0,0,0,0,0,0]]}),y.dino_up_and_down={ideal:11,requiredBlocks:[[{test:"moveDistance",type:"studio_moveDistance",titles:{SPRITE:"1",DISTANCE:"400"}}]],scale:{snapRadius:2},softButtons:["leftButton","rightButton","downButton","upButton"],map:[[0,0,0,0,1,0,0,0],[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0],[16,0,0,0,16,0,0,0],[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0],[0,0,0,0,1,0,0,0],[0,0,0,0,0,0,0,0]],firstSpriteIndex:2,protagonistSpriteIndex:1,timeoutFailureTick:150,minWorkspaceHeight:800,toolbox:o('<block type="studio_moveDistance">          <title name="DISTANCE">400</title>          <title name="SPRITE">1</title></block><block type="studio_saySprite">          <title name="SPRITE">1</title></block>'),startBlocks:'<block type="studio_whenLeft" deletable="false" x="20" y="20">       <next><block type="studio_move">               <title name="DIR">8</title></block>       </next></block>     <block type="studio_whenRight" deletable="false" x="20" y="150">       <next><block type="studio_move">               <title name="DIR">2</title></block>       </next></block>     <block type="studio_whenUp" deletable="false" x="20" y="280">       <next><block type="studio_move">               <title name="DIR">1</title></block>       </next></block>     <block type="studio_whenDown" deletable="false" x="20" y="410">       <next><block type="studio_move">               <title name="DIR">4</title></block>       </next></block>     <block type="studio_repeatForever" deletable="false" x="20" y="540"></block>'},y.c2_7=k.extend(y.dino_up_and_down,{}),y.c3_game_3=k.extend(y.dino_up_and_down,{}),y.playlab_7={ideal:3,background:"rainbow",firstSpriteIndex:10,scale:{snapRadius:2},softButtons:["leftButton","rightButton","downButton","upButton"],defaultEmotion:n.HAPPY,map:[[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0],[16,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0]],goal:{successCondition:function(){return 252===Studio.tickCount}},timeoutFailureTick:253,minWorkspaceHeight:800,toolbox:o('<block type="studio_moveDistance"><title name="DIR">1</title><title name="DISTANCE">400</title></block><block type="studio_moveDistance"><title name="DIR">2</title><title name="DISTANCE">400</title></block><block type="studio_moveDistance"><title name="DIR">4</title><title name="DISTANCE">400</title></block><block type="studio_moveDistance"><title name="DIR">8</title><title name="DISTANCE">400</title></block>'),startBlocks:'<block type="studio_repeatForever" deletable="false" x="20" y="20"></block>',requiredBlocks:[[{test:function(a){return"studio_moveDistance"===a.type&&"2"===a.getTitleValue("DIR")},type:"studio_moveDistance",titles:{DIR:2,DISTANCE:"400"}}],[{test:function(a){return"studio_moveDistance"===a.type&&"8"===a.getTitleValue("DIR")},type:"studio_moveDistance",titles:{DIR:8,DISTANCE:"400"}}]]},y.penguin_ouch={ideal:14,requiredBlocks:[d({sprite:"0",requiredText:j.ouchExclamation()}),[{test:"playSound",type:"studio_playSound"}]],scale:{snapRadius:2},softButtons:["leftButton","rightButton","downButton","upButton"],map:[[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0],[16,0,0,0,16,0,0,0],[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0]],firstSpriteIndex:2,minWorkspaceHeight:900,goal:{successCondition:function(){return Studio.sprite[0].isCollidingWith(1)}},timeoutFailureTick:300,toolbox:o('<block type="studio_moveDistance">          <title name="DISTANCE">400</title>          <title name="SPRITE">1</title></block>'+p("studio_saySprite")+p("studio_playSound")),startBlocks:'<block type="studio_whenLeft" deletable="false" x="20" y="20">       <next><block type="studio_move">               <title name="DIR">8</title></block>       </next></block>     <block type="studio_whenRight" deletable="false" x="20" y="150">       <next><block type="studio_move">               <title name="DIR">2</title></block>       </next></block>     <block type="studio_whenUp" deletable="false" x="20" y="280">       <next><block type="studio_move">               <title name="DIR">1</title></block>       </next></block>     <block type="studio_whenDown" deletable="false" x="20" y="410">       <next><block type="studio_move">               <title name="DIR">4</title></block>       </next></block>     <block type="studio_repeatForever" deletable="false" x="20" y="540">       <statement name="DO"><block type="studio_moveDistance">               <title name="SPRITE">1</title>               <title name="DISTANCE">400</title>         <next><block type="studio_moveDistance">                 <title name="SPRITE">1</title>                 <title name="DISTANCE">400</title>                 <title name="DIR">4</title></block>         </next></block>     </statement></block>     <block type="studio_whenSpriteCollided" deletable="false" x="20" y="730"></block>'},y.c2_8=k.extend(y.penguin_ouch,{}),y.c3_game_4=k.extend(y.penguin_ouch,{}),y.penguin_touch_octopus={ideal:16,requiredBlocks:[[{test:"changeScore",type:"studio_changeScore"}]],scale:{snapRadius:2},softButtons:["leftButton","rightButton","downButton","upButton"],map:[[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0],[16,0,0,0,16,0,16,0],[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0]],firstSpriteIndex:2,minWorkspaceHeight:1050,goal:{successCondition:function(){return Studio.sprite[0].isCollidingWith(2)}},timeoutFailureTick:600,toolbox:o('<block type="studio_moveDistance">          <title name="DISTANCE">400</title>          <title name="SPRITE">1</title></block>'+p("studio_saySprite")+p("studio_playSound")+p("studio_changeScore")),startBlocks:'<block type="studio_whenLeft" deletable="false" x="20" y="20">       <next><block type="studio_move">               <title name="DIR">8</title></block>       </next></block>     <block type="studio_whenRight" deletable="false" x="20" y="150">       <next><block type="studio_move">               <title name="DIR">2</title></block>       </next></block>     <block type="studio_whenUp" deletable="false" x="20" y="280">       <next><block type="studio_move">               <title name="DIR">1</title></block>       </next></block>     <block type="studio_whenDown" deletable="false" x="20" y="410">       <next><block type="studio_move">               <title name="DIR">4</title></block>       </next></block>     <block type="studio_repeatForever" deletable="false" x="20" y="540">       <statement name="DO"><block type="studio_moveDistance">               <title name="SPRITE">1</title>               <title name="DISTANCE">400</title>         <next><block type="studio_moveDistance">                 <title name="SPRITE">1</title>                 <title name="DISTANCE">400</title>                 <title name="DIR">4</title></block>         </next></block>     </statement></block>     <block type="studio_whenSpriteCollided" deletable="false" x="20" y="730">       <next><block type="studio_playSound">       <next><block type="studio_saySprite">               <title name="TEXT">Ouch!</title></block>       </next></block>       </next></block>     <block type="studio_whenSpriteCollided" deletable="false" x="20" y="860">      <title name="SPRITE2">2</title></block>'},y.c2_9=k.extend(y.penguin_touch_octopus,{}),y.c3_game_5=k.extend(y.penguin_touch_octopus,{}),y.playlab_8={background:"rainbow",ideal:16,requiredBlocks:[[{test:"changeScore",type:"studio_changeScore"}],[{test:"playSound",type:"studio_playSound",titles:{SOUND:"winpoint"}}]],scale:{snapRadius:2},softButtons:["leftButton","rightButton","downButton","upButton"],map:[[0,0,0,0,0,0,0,0],[0,0,0,16,0,0,0,0],[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0],[16,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0]],avatarList:["unicorn","wizard"],defaultEmotion:n.HAPPY,goal:{successCondition:function(){return Studio.sprite[0].isCollidingWith(1)&&1===Studio.playerScore},failureCondition:function(){return Studio.sprite[0].isCollidingWith(1)&&1!==Studio.playerScore}},timeoutFailureTick:600,toolbox:o(p("studio_changeScore")+'<block type="studio_playSound"><title name="SOUND">winpoint</title></block>'),startBlocks:'<block type="studio_whenSpriteCollided" deletable="false" x="20" y="20"></block><block type="studio_repeatForever" deletable="false" x="20" y="150"><statement name="DO">'+l.blockWithNext("studio_moveDistance",{SPRITE:1,DIR:2,DISTANCE:400},p("studio_moveDistance",{SPRITE:1,DIR:8,DISTANCE:400}))+'</statement></block><block type="studio_whenLeft" deletable="false" x="20" y="300"><next>'+p("studio_move",{SPRITE:0,DIR:8})+'</next></block><block type="studio_whenRight" deletable="false" x="20" y="400"><next>'+p("studio_move",{SPRITE:0,DIR:2})+'</next></block><block type="studio_whenUp" deletable="false" x="20" y="500"><next>'+p("studio_move",{SPRITE:0,DIR:1})+'</next></block><block type="studio_whenDown" deletable="false" x="20" y="600"><next>'+p("studio_move",{SPRITE:0,DIR:4})+"</next></block>"},y.change_background_and_speed={ideal:19,requiredBlocks:[[{test:"setBackground",type:"studio_setBackground",titles:{VALUE:'"night"'}}],[{test:"setSpriteSpeed",type:"studio_setSpriteSpeed",titles:{VALUE:"Studio.SpriteSpeed.FAST"}}]],scale:{snapRadius:2},softButtons:["leftButton","rightButton","downButton","upButton"],map:[[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0],[16,0,0,0,16,0,16,0],[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0]],firstSpriteIndex:2,minWorkspaceHeight:1250,goal:{successCondition:function(){return Studio.sprite[0].isCollidingWith(2)}},timeoutFailureTick:600,toolbox:o(p("studio_setBackground",{VALUE:'"night"'})+p("studio_moveDistance",{DISTANCE:400,SPRITE:1})+p("studio_saySprite")+p("studio_playSound")+p("studio_changeScore")+p("studio_setSpriteSpeed",{VALUE:"Studio.SpriteSpeed.FAST"})),startBlocks:'<block type="when_run" deletable="false" x="20" y="20"></block><block type="studio_whenLeft" deletable="false" x="20" y="200"><next>'+p("studio_move",{DIR:8})+'</next></block><block type="studio_whenRight" deletable="false" x="20" y="330"><next>'+p("studio_move",{DIR:2})+'</next></block><block type="studio_whenUp" deletable="false" x="20" y="460"><next>'+p("studio_move",{DIR:1})+'</next></block><block type="studio_whenDown" deletable="false" x="20" y="590"><next>'+p("studio_move",{DIR:4})+'</next></block><block type="studio_repeatForever" deletable="false" x="20" y="720"><statement name="DO">'+l.blockWithNext("studio_moveDistance",{SPRITE:1,DIR:1,DISTANCE:400},p("studio_moveDistance",{SPRITE:1,DIR:4,DISTANCE:400}))+'</statement></block><block type="studio_whenSpriteCollided" deletable="false" x="20" y="880"><title name="SPRITE2">1</title><next>'+l.blockWithNext("studio_playSound",{},p("studio_saySprite",{TEXT:j.ouchExclamation()}))+'</next></block><block type="studio_whenSpriteCollided" deletable="false" x="20" y="1040"><title name="SPRITE2">2</title><next>'+p("studio_changeScore")+"</next></block>"},y.c2_10=k.extend(y.change_background_and_speed,{}),y.c3_game_6=k.extend(y.change_background_and_speed,{}),y.playlab_9={background:"black",requiredBlocks:[[{test:"setBackground",type:"studio_setBackground",titles:{VALUE:'"space"'}}],[{test:"setSpriteSpeed",type:"studio_setSpriteSpeed",titles:{VALUE:"Studio.SpriteSpeed.FAST"}}]],timeoutFailureTick:400,scale:{snapRadius:2},defaultEmotion:n.ANGRY,softButtons:["leftButton","rightButton","downButton","upButton"],avatarList:["spacebot","alien"],goal:{successCondition:function(){return Studio.sprite[0].isCollidingWith(1)}},map:[[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0],[16,0,0,0,0,0,16,0],[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0]],toolbox:o(p("studio_setSpriteSpeed",{VALUE:"Studio.SpriteSpeed.FAST"})+p("studio_setBackground",{VALUE:'"space"'})+p("studio_moveDistance",{DISTANCE:400,SPRITE:1})+p("studio_saySprite")+p("studio_playSound",{SOUND:"winpoint2"})+p("studio_changeScore")),minWorkspaceHeight:1250,startBlocks:'<block type="when_run" deletable="false" x="20" y="20"></block><block type="studio_repeatForever" deletable="false" x="20" y="150"><statement name="DO">'+l.blockWithNext("studio_moveDistance",{SPRITE:1,DIR:1,DISTANCE:400},p("studio_moveDistance",{SPRITE:1,DIR:4,DISTANCE:400}))+'</statement></block><block type="studio_whenSpriteCollided" deletable="false" x="20" y="290"><title name="SPRITE2">0</title><title name="SPRITE2">1</title><next>'+l.blockWithNext("studio_playSound",{SOUND:"winpoint2"},p("studio_saySprite",{TEXT:j.alienInvasion()}))+'</next></block><block type="studio_whenLeft" deletable="false" x="20" y="410"><next>'+p("studio_move",{DIR:8})+'</next></block><block type="studio_whenRight" deletable="false" x="20" y="510"><next>'+p("studio_move",{DIR:2})+'</next></block><block type="studio_whenUp" deletable="false" x="20" y="610"><next>'+p("studio_move",{DIR:1})+'</next></block><block type="studio_whenDown" deletable="false" x="20" y="710"><next>'+p("studio_move",{DIR:4})+"</next></block>"},y.sandbox={ideal:1/0,requiredBlocks:[],scale:{snapRadius:2},softButtons:["leftButton","rightButton","downButton","upButton"],minWorkspaceHeight:1400,edgeCollisions:!0,projectileCollisions:!0,allowSpritesOutsidePlayspace:!1,spritesHiddenToStart:!0,freePlay:!0,map:[[0,16,0,0,0,16,0,0],[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0],[0,16,0,0,0,16,0,0],[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0],[0,16,0,0,0,16,0,0],[0,0,0,0,0,0,0,0]],toolbox:o(p("studio_setSprite")+p("studio_setBackground")+p("studio_whenArrow")+p("studio_whenSpriteClicked")+p("studio_whenSpriteCollided")+p("studio_repeatForever")+p("studio_showTitleScreen")+p("studio_move")+p("studio_moveDistance")+p("studio_stop")+p("studio_wait")+p("studio_playSound")+p("studio_changeScore")+p("studio_saySprite")+p("studio_setSpritePosition")+p("studio_throw")+p("studio_makeProjectile")+p("studio_setSpriteSpeed")+p("studio_setSpriteEmotion")+p("studio_vanish")),startBlocks:'<block type="when_run" deletable="false" x="20" y="20"></block>'},y.c2_11=k.extend(y.sandbox,{}),y.c3_game_7=k.extend(y.sandbox,{}),y.playlab_10=k.extend(y.sandbox,{}),y.k1_6={ideal:1/0,requiredBlocks:[],scale:{snapRadius:2},minWorkspaceHeight:1500,spritesHiddenToStart:!0,freePlay:!0,map:[[16,0,16,0,16,0,16,0],[0,16,0,16,0,16,0,0],[16,0,16,0,16,0,16,0],[0,16,0,16,0,16,0,0],[16,0,16,0,16,0,16,0],[0,16,0,16,0,16,0,0],[16,16,16,16,16,16,16,0],[0,0,0,0,0,0,0,0]],isK1:!0,softButtons:[],toolbox:o(p("studio_setSprite")+p("studio_saySprite")+x+p("studio_whenSpriteCollided")+p("studio_setBackground")+p("studio_setSpriteSpeed")+p("studio_setSpriteEmotion")+p("studio_playSound")+p("studio_vanish")),startBlocks:'<block type="when_run" deletable="false" x="20" y="20">      <next><block type="studio_setSprite">         <title name="SPRITE">0</title></block>       </next></block>'},y.k1_block_test=k.extend(y[99],{toolbox:o(p("studio_setSprite")+p("studio_moveNorth")+p("studio_moveSouth")+p("studio_moveEast")+p("studio_moveWest")+p("studio_moveNorth_length")+p("studio_moveSouth_length")+p("studio_moveEast_length")+p("studio_moveWest_length")),isK1:!0}),y.full_sandbox={scrollbars:!0,requiredBlocks:[],scale:{snapRadius:2},softButtons:["leftButton","rightButton","downButton","upButton"],minWorkspaceHeight:1400,edgeCollisions:!0,projectileCollisions:!0,allowSpritesOutsidePlayspace:!0,spritesHiddenToStart:!0,freePlay:!0,map:[[0,16,0,0,0,16,0,0],[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0],[0,16,0,0,0,16,0,0],[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0],[0,16,0,0,0,16,0,0],[0,0,0,0,0,0,0,0]],toolbox:o(q(j.catActions(),p("studio_setSprite")+p("studio_setBackground")+'<block type="studio_showTitleScreenParams">                         <value name="TITLE"><block type="text"></block>                         </value>                         <value name="TEXT"><block type="text"></block>                         </value></block>'+p("studio_move")+'<block type="studio_moveDistanceParams" inline="true">                       <value name="DISTANCE"><block type="math_number">                               <title name="NUM">25</title></block>                       </value></block>'+p("studio_stop")+'<block type="studio_waitParams" inline="true">                         <value name="VALUE"><block type="math_number">                                 <title name="NUM">1</title></block>                         </value></block>'+p("studio_playSound")+'<block type="studio_setScoreText" inline="true">                         <value name="TEXT"><block type="text"></block>                         </value></block><block type="studio_saySpriteParams" inline="true">                         <value name="TEXT"><block type="text"></block>                         </value></block>'+p("studio_setSpritePosition")+p("studio_addCharacter")+p("studio_throw")+p("studio_makeProjectile")+p("studio_setSpriteSpeed")+p("studio_setSpriteEmotion")+p("studio_vanish")+p("studio_setSpriteSize")+p("studio_showCoordinates"))+q(j.catEvents(),p("studio_whenArrow")+p("studio_whenSpriteClicked")+p("studio_whenSpriteCollided"))+q(j.catControl(),p("studio_repeatForever")+'<block type="controls_repeat_ext">                           <value name="TIMES">                             <block type="math_number">                               <title name="NUM">10</title>                             </block>                           </value>                         </block>'+p("controls_whileUntil")+'<block type="controls_for">                           <value name="FROM">                             <block type="math_number">                               <title name="NUM">1</title>                             </block>                           </value>                           <value name="TO">                             <block type="math_number">                               <title name="NUM">10</title>                             </block>                           </value>                           <value name="BY">                             <block type="math_number">                               <title name="NUM">1</title>                             </block>                           </value>                         </block>'+p("controls_flow_statements"))+q(j.catLogic(),p("controls_if")+p("logic_compare")+p("logic_operation")+p("logic_negate")+p("logic_boolean"))+q(j.catMath(),p("math_number")+'<block type="math_change">                           <value name="DELTA">                             <block type="math_number">                               <title name="NUM">1</title>                             </block>                           </value>                         </block><block type="math_random_int">                           <value name="FROM">                             <block type="math_number">                               <title name="NUM">1</title>                             </block>                           </value>                           <value name="TO">                             <block type="math_number">                               <title name="NUM">100</title>                             </block>                           </value>                         </block>'+p("math_arithmetic"))+q(j.catText(),p("text")+p("text_join")+'<block type="text_append">                           <value name="TEXT">                             <block type="text"></block>                           </value>                         </block>')+q(j.catVariables(),"","VARIABLE")+q(j.catProcedures(),"","PROCEDURE")+q("Functional",p("functional_string")+p("functional_background_string_picker")+p("functional_math_number")+'<block type="functional_math_number_dropdown"><title name="NUM" config="2,3,4,5,6,7,8,9,10,11,12">???</title></block>')+q("Functional Start",p("functional_start_setSpeeds")+p("functional_start_setBackgroundAndSpeeds"))+q("Functional Logic",p("functional_greater_than")+p("functional_less_than")+p("functional_number_equals")+p("functional_string_equals")+p("functional_logical_and")+p("functional_logical_or")+p("functional_logical_not")+p("functional_boolean"))),
startBlocks:'<block type="when_run" deletable="false" x="20" y="20"></block>'},y.full_sandbox_infinity=k.extend(y.full_sandbox,{}),y.ec_sandbox=k.extend(y.sandbox,{editCode:!0,map:[[0,16,0,0,0,16,0,0],[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0],[0,16,0,0,0,16,0,0],[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0],[0,16,0,0,0,16,0,0],[0,0,0,0,0,0,0,0]],codeFunctions:{setSprite:{category:"Play Lab"},setBackground:{category:"Play Lab"},move:{category:"Play Lab"},playSound:{category:"Play Lab"},changeScore:{category:"Play Lab"},setSpritePosition:{category:"Play Lab"},setSpriteSpeed:{category:"Play Lab"},setSpriteEmotion:{category:"Play Lab"},throwProjectile:{category:"Play Lab"},vanish:{category:"Play Lab"},onEvent:{category:"Play Lab"},forLoop_i_0_4:null,ifBlock:null,ifElseBlock:null,whileBlock:null,addOperator:null,subtractOperator:null,multiplyOperator:null,divideOperator:null,equalityOperator:null,inequalityOperator:null,greaterThanOperator:null,lessThanOperator:null,andOperator:null,orOperator:null,notOperator:null,randomNumber_max:null,randomNumber_min_max:null,mathRound:null,mathAbs:null,mathMax:null,mathMin:null,declareAssign_x:null,assign_x:null,declareAssign_x_array_1_4:null,declareAssign_x_prompt:null,functionParams_none:null,functionParams_n:null,callMyFunction:null,callMyFunction_n:null},startBlocks:""}),y.js_hoc2015_move_right={editCode:!0,background:"main",codeFunctions:{moveRight:null,moveLeft:null,moveUp:null,moveDown:null},startBlocks:["moveRight();",""].join("\n"),sortDrawOrder:!0,wallMapCollisions:!0,blockMovingIntoWalls:!0,gridAlignedMovement:!0,itemGridAlignedMovement:!0,slowJsExecutionFactor:10,removeItemsWhenActorCollides:!1,delayCompletion:2e3,floatingScore:!0,map:[[16908288,16908288,0,0,0,0,0,0],[16908288,16908288,0,65536,131072,1048576,0,0],[0,0,0,0,0,0,0,0],[0,0,0,16,0,1,0,0],[0,0,0,0,0,0,0,0],[0,0,0,1048576,65536,1179648,0,0],[0,17956864,17956864,0,0,0,0,1048576],[0,17956864,17956864,0,0,0,0,0]],instructions:'"We need that scrap metal. BOTX, can you get it?"',ticksBeforeFaceSouth:9,timeoutFailureTick:100,timeoutAfterWhenRun:!0,goalOverride:{goalImage:"goal1",imageWidth:50,imageHeight:50},callouts:[{id:"playlab:js_hoc2015_move_right:runButton",element_id:"#runButton",hide_target_selector:"#runButton",qtip_config:{content:{text:j.calloutRunButton()},hide:{event:"mouseup touchend"},position:{my:"top left",at:"bottom center",adjust:{x:0,y:0}}}}],progressConditions:[{required:{allGoalsVisited:!0},result:{success:!0,message:j.successHasAllGoals()}},{required:{timedOut:!0,allGoalsVisited:!1},result:{success:!1,message:j.failedHasAllGoals()}}]},y.js_hoc2015_move_right_down={editCode:!0,background:"main",codeFunctions:{moveRight:null,moveLeft:null,moveUp:null,moveDown:null},startBlocks:["moveRight();",""].join("\n"),sortDrawOrder:!0,wallMapCollisions:!0,blockMovingIntoWalls:!0,gridAlignedMovement:!0,itemGridAlignedMovement:!0,slowJsExecutionFactor:10,removeItemsWhenActorCollides:!1,delayCompletion:2e3,floatingScore:!0,map:[[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0],[17825792,17825792,0,0,0,0,0,0],[17825792,17825792,0,16,0,1,0,0],[0,0,0,16842752,16842752,0,0,0],[0,0,0,16842752,16842752,1,0,0],[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0]],instructions:'"We need more scrap metal. Can you get all the metal on this planet?"',ticksBeforeFaceSouth:9,timeoutAfterWhenRun:!0,goalOverride:{goalImage:"goal2",imageWidth:50,imageHeight:50},progressConditions:[{required:{allGoalsVisited:!0},result:{success:!0,message:j.successHasAllGoals()}},{required:{timedOut:!0,allGoalsVisited:!1},result:{success:!1,message:j.failedHasAllGoals()}}]},y.js_hoc2015_move_diagonal={editCode:!0,textModeAtStart:!0,background:"main",codeFunctions:{moveRight:null,moveLeft:null,moveUp:null,moveDown:null},startBlocks:["moveDown();",""].join("\n"),sortDrawOrder:!0,wallMapCollisions:!0,blockMovingIntoWalls:!0,gridAlignedMovement:!0,itemGridAlignedMovement:!0,slowJsExecutionFactor:10,removeItemsWhenActorCollides:!1,delayCompletion:2e3,floatingScore:!0,map:[[0,0,0,0,0,0,0,0],[0,0,0,0,65536,16,0,0],[32,17825792,17825792,0,1,0,0,0],[0,17825792,17825792,1,2359296,2424832,0,0],[0,0,1,0,0,0,0,0],[0,0,0,0,0,0,0,0],[0,0,0,20185088,20185088,20250624,20250624,0],[0,0,0,20185088,20185088,20250624,20250624,0]],embed:"false",instructions:'"Watch out for the GUY!"',ticksBeforeFaceSouth:9,timeoutAfterWhenRun:!0,goalOverride:{goalImage:"goal1",imageWidth:50,imageHeight:50},progressConditions:[{required:{touchedHazardsAtOrAbove:1},result:{success:!1,message:j.failedAvoidHazard(),pauseInterpreter:!0}},{required:{allGoalsVisited:!0},result:{success:!0,message:j.successHasAllGoals()}},{required:{timedOut:!0,allGoalsVisited:!1},result:{success:!1,message:j.failedHasAllGoals()}}],callouts:[{id:"playlab:js_hoc2015_move_diagonal:placeCommandsHere",element_id:"#show-code-header",hide_target_selector:".droplet-drag-cover",qtip_config:{content:{text:j.calloutShowCodeToggle()},hide:{event:"mouseup touchend"},position:{my:"top right",at:"bottom left",adjust:{x:0,y:0}}}}]},y.js_hoc2015_move_backtrack={editCode:!0,background:"main",codeFunctions:{moveRight:null,moveLeft:null,moveUp:null,moveDown:null},startBlocks:["moveRight();",""].join("\n"),sortDrawOrder:!0,wallMapCollisions:!0,blockMovingIntoWalls:!0,gridAlignedMovement:!0,itemGridAlignedMovement:!0,slowJsExecutionFactor:10,removeItemsWhenActorCollides:!1,delayCompletion:2e3,floatingScore:!0,map:[[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0],[0,0,0,65536,1,131072,0,0],[0,0,0,16,0,1,0,0],[0,0,0,0,0,0,0,0],[32,17825792,17825792,0,0,0,0,0],[0,17825792,17825792,0,0,0,0,0],[0,0,0,0,0,0,0,0]],instructions:'"Go quickly, BOTX."',ticksBeforeFaceSouth:9,timeoutAfterWhenRun:!0,goalOverride:{goalImage:"goal1",imageWidth:50,imageHeight:50},progressConditions:[{required:{touchedHazardsAtOrAbove:1},result:{success:!1,message:j.failedAvoidHazard(),pauseInterpreter:!0}},{required:{allGoalsVisited:!0},result:{success:!0,message:j.successHasAllGoals()}},{required:{timedOut:!0,allGoalsVisited:!1},result:{success:!1,message:j.failedHasAllGoals()}}]},y.js_hoc2015_move_around={editCode:!0,background:"main",codeFunctions:{moveRight:null,moveLeft:null,moveUp:null,moveDown:null},startBlocks:["moveRight();",""].join("\n"),sortDrawOrder:!0,wallMapCollisions:!0,blockMovingIntoWalls:!0,gridAlignedMovement:!0,itemGridAlignedMovement:!0,slowJsExecutionFactor:10,removeItemsWhenActorCollides:!1,delayCompletion:2e3,floatingScore:!0,map:[[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0],[0,0,0,16,0,1,65536,0],[0,0,0,262144,131072,0,0,0],[0,0,32,1310720,0,1,0,0],[17956864,17956864,0,0,1,0,0,0],[17956864,17956864,0,0,0,0,0,0],[0,0,0,0,0,0,0,0]],embed:"false",instructions:'"It\'s up to you, BOTX!"',ticksBeforeFaceSouth:9,timeoutAfterWhenRun:!0,goalOverride:{goalImage:"goal2",imageWidth:50,imageHeight:50},progressConditions:[{required:{touchedHazardsAtOrAbove:1},result:{success:!1,message:j.failedAvoidHazard(),pauseInterpreter:!0}},{required:{allGoalsVisited:!0},result:{success:!0,message:j.successHasAllGoals()}},{required:{timedOut:!0,allGoalsVisited:!1},result:{success:!1,message:j.failedHasAllGoals()}}]},y.js_hoc2015_move_finale={editCode:!0,background:"main",codeFunctions:{moveRight:null,moveLeft:null,moveUp:null,moveDown:null},startBlocks:["moveDown();",""].join("\n"),sortDrawOrder:!0,wallMapCollisions:!0,blockMovingIntoWalls:!0,gridAlignedMovement:!0,itemGridAlignedMovement:!0,slowJsExecutionFactor:10,removeItemsWhenActorCollides:!1,delayCompletion:2e3,floatingScore:!0,map:[[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0],[0,0,16,131072,1,1048576,0,0],[0,0,0,1,0,1,0,0],[0,0,1,1179648,0,0,0,0],[0,0,0,32,0,0,16908288,16908288],[0,16842752,16842752,0,0,0,16908288,16908288],[0,16842752,16842752,0,0,0,0,0]],embed:"false",instructions:'"We need 4 more pieces of metal. Can you find them?"',ticksBeforeFaceSouth:9,timeoutAfterWhenRun:!0,goalOverride:{goalImage:"goal2",imageWidth:50,imageHeight:50},progressConditions:[{required:{touchedHazardsAtOrAbove:1},result:{success:!1,message:j.failedAvoidHazard(),pauseInterpreter:!0}},{required:{allGoalsVisited:!0},result:{success:!0,message:j.successHasAllGoals()}},{required:{timedOut:!0,allGoalsVisited:!1},result:{success:!1,message:j.failedHasAllGoals()}}]},y.js_hoc2015_event_two_items={editCode:!0,background:"snow",wallMap:"blank",softButtons:["downButton","upButton"],codeFunctions:{goUp:null,goDown:null,whenUp:null,whenDown:null},startBlocks:["function whenUp() {","  ","}","function whenDown() {","  ","}"].join("\n"),sortDrawOrder:!0,wallMapCollisions:!0,blockMovingIntoWalls:!0,removeItemsWhenActorCollides:!0,delayCompletion:2e3,floatingScore:!0,map:[[0,0,0,0,0,0,0,0],[0,0,0,1,0,0,0,0],[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0],[0,0,0,16,0,0,0,0],[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0],[0,0,0,1,0,0,0,0]],pinWorkspaceToBottom:"true",embed:"false",instructions:'"BOT1, I need you to get a critical message to the GOALs."',instructions2:"Make BOT1 move when you use the arrow keys.",timeoutFailureTick:600,showTimeoutRect:!0,goalOverride:{goalAnimation:"animatedGoal",imageWidth:100,imageHeight:100,goalRenderOffsetX:0},progressConditions:[{required:{allGoalsVisited:!0},result:{success:!0,message:j.successCharacter1()}},{required:{timedOut:!0},result:{success:!1,message:j.failedTwoItemsTimeout()}}],callouts:[{id:"playlab:js_hoc2015_event_two_items:placeCommandsHere",element_id:".droplet-gutter-line:nth-of-type(2)",hide_target_selector:".droplet-drag-cover",qtip_config:{content:{text:j.calloutShowPlaceGoUpHere()},hide:{event:"mouseup touchend"},position:{my:"top left",at:"bottom right",adjust:{x:30,y:-10}}}},{id:"arrowsCallout",element_id:"#upButton",hide_target_selector:"#soft-buttons",qtip_config:{content:{text:j.calloutUseArrowButtons()},hide:{event:"mouseup touchend"},position:{my:"top left",at:"bottom left",adjust:{x:30,y:0}}}}]},y.js_hoc2015_event_four_items={editCode:!0,background:"snow",wallMap:"blobs",softButtons:["leftButton","rightButton","downButton","upButton"],codeFunctions:{goRight:null,goLeft:null,goUp:null,goDown:null,whenLeft:null,whenRight:null,whenUp:null,whenDown:null},startBlocks:["function whenUp() {","  ","}","function whenDown() {","  ","}"].join("\n"),sortDrawOrder:!0,wallMapCollisions:!0,blockMovingIntoWalls:!0,removeItemsWhenActorCollides:!0,delayCompletion:2e3,floatingScore:!0,map:[[0,0,0,0,0,0,0,0],[0,0,0,1,0,0,0,0],[0,0,0,0,0,0,0,0],[1,0,0,0,0,0,0,0],[0,0,0,16,0,0,0,1],[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0],[0,0,0,0,1,0,0,0]],embed:"false",instructions:'"Get to all the GOALs as quickly as you can."',instructions2:"Move in all directions.",timeoutFailureTick:900,showTimeoutRect:!0,goalOverride:{goalAnimation:"animatedGoal",imageWidth:100,imageHeight:100},progressConditions:[{required:{allGoalsVisited:!0},result:{success:!0,message:j.successCharacter1()}},{required:{timedOut:!0},result:{success:!1,message:j.failedFourItemsTimeout()}}]},y.js_hoc2015_score={avatarList:["bot1"],editCode:!0,background:"snow",wallMap:"circle",softButtons:["leftButton","rightButton","downButton","upButton"],autohandlerOverrides:{whenGetPilot:"whenTouchGoal"},codeFunctions:{playSound:null,addPoints:{params:["100"]},whenGetPilot:null},startBlocks:["function whenGetPilot() {",'  playSound("character1sound1");',"}"].join("\n"),sortDrawOrder:!0,wallMapCollisions:!0,blockMovingIntoWalls:!0,itemGridAlignedMovement:!0,removeItemsWhenActorCollides:!0,delayCompletion:2e3,floatingScore:!0,edgeCollisions:"true",map:[[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0],[1,0,0,16,0,0,0,1],[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0],[0,0,0,1,0,0,0,0]],instructions:'"Reach the GOAL!"',instructions2:"Let's add points. Add 100 points when BOT1 gets the pilot.",autoArrowSteer:!0,timeoutFailureTick:600,showTimeoutRect:!0,goalOverride:{goalAnimation:"animatedGoal",imageWidth:100,imageHeight:100},goal:{successCondition:function(){return!1}},progressConditions:[{required:{timedOut:!0,allGoalsVisited:!1,currentPointsBelow:300},result:{success:!1,message:j.failedScoreTimeout()}},{required:{timedOut:!0,allGoalsVisited:!0,currentPointsBelow:300},result:{success:!1,message:j.failedScoreScore()}},{required:{timedOut:!0,allGoalsVisited:!1,currentPointsAtOrAbove:300},result:{success:!1,message:j.failedScoreGoals()}},{required:{allGoalsVisited:!0,currentPointsAtOrAbove:300},result:{success:!0,message:j.successCharacter1()}}],completeOnSuccessConditionNotGoals:!0,callouts:[{id:"playlab:js_hoc2015_score:placeCommandsAtTop",element_id:".droplet-gutter-line:nth-of-type(2)",hide_target_selector:".droplet-drag-cover",qtip_config:{content:{text:j.calloutShowPlaySound()},hide:{event:"mouseup touchend"},position:{my:"top left",at:"top left",adjust:{x:170,y:20}}}}]},y.js_hoc2015_win_lose={editCode:!0,background:"forest",wallMap:"blobs",softButtons:["leftButton","rightButton","downButton","upButton"],codeFunctions:{playSound:null,addPoints:{params:["100"]},removePoints:{params:["100"]},whenGetPilot:null,whenGetMan:null,whenGetBird:null},startBlocks:[].join("\n"),sortDrawOrder:!0,wallMapCollisions:!0,blockMovingIntoWalls:!0,itemGridAlignedMovement:!0,removeItemsWhenActorCollides:!0,delayCompletion:2e3,floatingScore:!0,map:[[0,0,0,0,0,0,0,0],[0,0,0,64,64,0,0,0],[2048,0,0,0,0,0,0,2048],[0,0,0,0,0,0,0,0],[0,0,0,16,0,0,0,0],[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0],[0,256,0,0,0,0,0,0]],embed:"false",instructions:'"Watch out for the MAN."',instructions2:"Add 100 points when BOT1 gets the pilot.  Remove 100 points when he gets a MAN.  Now, avoid the MEN!",autoArrowSteer:!0,timeoutFailureTick:900,showTimeoutRect:!0,callouts:[{id:"playlab:js_hoc2015_win_lose:instructions",element_id:"#prompt-table",hide_target_selector:"#prompt-table",qtip_config:{content:{text:j.calloutInstructions()},position:{my:"bottom left",at:"top right",adjust:{x:-40,y:0}}}}],progressConditions:[{required:{timedOut:!0,collectedItemsBelow:2,currentPointsBelow:200},result:{success:!1,message:j.failedWinLoseTimeout()}},{required:{timedOut:!0,collectedItemsAtOrAbove:2,currentPointsBelow:200},result:{success:!1,message:j.failedWinLoseScore()}},{required:{timedOut:!0,collectedItemsBelow:2,currentPointsAtOrAbove:200},result:{success:!1,message:j.failedWinLoseGoals()}},{required:{collectedItemsAtOrAbove:2,currentPointsAtOrAbove:200},result:{success:!0,message:j.successCharacter1()}}]},y.js_hoc2015_add_characters={editCode:!0,background:"forest",wallMap:"circle",softButtons:["leftButton","rightButton","downButton","upButton"],codeFunctions:{addCharacter:{params:['"pig"']},addPoints:{params:["1000"]},removePoints:{params:["1000"]},playSound:null,whenGetPig:null},startBlocks:['playSound("character1sound1");','addCharacter("pig");',"","function whenGetPig() {",'  playSound("item1sound1");',"  addPoints(1000);","}"].join("\n"),sortDrawOrder:!0,wallMapCollisions:!0,blockMovingIntoWalls:!0,itemGridAlignedMovement:!0,removeItemsWhenActorCollides:!0,delayCompletion:2e3,floatingScore:!0,map:[[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0],[0,0,0,16,0,0,0,0],[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0]],embed:"false",instructions:'"I\'m seeing signs of increased activity on this planet!"',instructions2:"Add 3 PIGs to the planet. Then, go get them.",autoArrowSteer:!0,timeoutFailureTick:900,showTimeoutRect:!0,callouts:[{id:"playlab:js_hoc2015_add_characters:calloutPutCommandsHereRunStart",element_id:".droplet-gutter-line:nth-of-type(2)",hide_target_selector:".droplet-drag-cover",qtip_config:{content:{text:j.calloutPutCommandsHereRunStart()},event:"mouseup touchend",position:{my:"top left",at:"center right"}}}],progressConditions:[{required:{collectedItemsAtOrAbove:3},result:{success:!0,message:j.successCharacter1()}},{required:{timedOut:!0,collectedItemsBelow:3},result:{success:!1,message:j.failedAddCharactersTimeout()}}]},y.js_hoc2015_chain_characters={editCode:!0,background:"ship",wallMap:"grid",softButtons:["leftButton","rightButton","downButton","upButton"],codeFunctions:{addCharacter:null,playSound:null,addPoints:null,removePoints:null,whenGetMouse:null},startBlocks:['addCharacter("mouse");','playSound("character1sound3");',"","function whenGetMouse() {",'  playSound("item3sound4");','  addCharacter("mouse");','  addCharacter("mouse");',"}"].join("\n"),sortDrawOrder:!0,wallMapCollisions:!0,blockMovingIntoWalls:!0,itemGridAlignedMovement:!0,removeItemsWhenActorCollides:!0,delayCompletion:2e3,floatingScore:!0,map:[[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0],[0,0,0,16,0,0,0,0],[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0]],embed:"false",instructions:'"They\'re multiplying!"',instructions2:"Add 100 points every time BOT1 gets a MOUSE. Can you get 800 points? ",autoArrowSteer:!0,timeoutFailureTick:1350,showTimeoutRect:!0,progressConditions:[{required:{timedOut:!0,collectedItemsBelow:8,currentPointsBelow:800},result:{success:!1,message:j.failedChainCharactersTimeout()}},{required:{timedOut:!0,collectedItemsAtOrAbove:8,currentPointsBelow:800},result:{success:!1,message:j.failedChainCharactersScore()}},{required:{timedOut:!0,collectedItemsBelow:8,currentPointsAtOrAbove:800},result:{success:!1,message:j.failedChainCharactersItems()}},{required:{collectedItemsAtOrAbove:8,currentPointsAtOrAbove:800},result:{success:!0,message:j.successCharacter1()}}]},y.js_hoc2015_chain_characters_2={editCode:!0,background:"ship",wallMap:"horizontal",softButtons:["leftButton","rightButton","downButton","upButton"],codeFunctions:{addCharacter:{params:['"mouse"']},addPoints:null,removePoints:null,playSound:null,whenGetRoo:null,whenGetMouse:null},startBlocks:['addCharacter("roo");','addCharacter("roo");',"","function whenGetRoo() {",'  playSound("character1sound2");',"  addPoints(50);",'  addCharacter("bird");','  addCharacter("bird");',"}","","function whenGetBird() {","","}","function whenGetMouse() {",'  playSound("character1sound3");',"  addPoints(100);","  ","}"].join("\n"),sortDrawOrder:!0,wallMapCollisions:!0,blockMovingIntoWalls:!0,itemGridAlignedMovement:!0,removeItemsWhenActorCollides:!0,delayCompletion:2e3,floatingScore:!0,map:[[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0],[0,0,0,16,0,0,0,0],[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0]],embed:"false",instructions:'"It\'s up to you, BOT1!"',instructions2:"When you get a ROO, two BIRDs appear. Can you make two MICE appear when you get a BIRD? Then, get them all.",autoArrowSteer:!0,timeoutFailureTick:1350,showTimeoutRect:!0,progressConditions:[{required:{timedOut:!0,collectedItemsBelow:14},result:{success:!1,message:j.failedChainCharacters2Timeout()}},{required:{collectedItemsAtOrAbove:14},result:{success:!0,message:j.successCharacter1()}}],callouts:[{id:"playlab:js_hoc2015_chain_characters_2:calloutPlaceTwo",element_id:".droplet-gutter-line:nth-of-type(12)",hide_target_selector:".droplet-drag-cover",qtip_config:{content:{text:j.calloutPlaceTwo()},event:"mouseup touchend",position:{my:"top left",at:"center right",adjust:{x:40,y:10}}}}]},y.js_hoc2015_change_setting={editCode:!0,background:"ship",wallMap:"blobs",softButtons:["leftButton","rightButton","downButton","upButton"],codeFunctions:{setBot:null,setBackground:null,setBotSpeed:null,setMap:null,playSound:null,addCharacter:null,addPoints:null,removePoints:null,whenScore1000:null,whenGetPilot:null},startBlocks:['addCharacter("pilot");','addCharacter("pilot");','addCharacter("pilot");','playSound("character1sound4");','setBot("bot1");',"","function whenGetPilot() {","  addPoints(400);",'  setBackground("random");',"  ","}",""].join("\n"),sortDrawOrder:!0,wallMapCollisions:!0,blockMovingIntoWalls:!0,itemGridAlignedMovement:!0,removeItemsWhenActorCollides:!0,delayCompletion:2e3,floatingScore:!0,map:[[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0],[0,0,0,16,0,0,0,0],[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0]],embed:"false",instructions:'"Time to visit another planet."',instructions2:"Use the new commands to change the background, map, BOT, and speed.",autoArrowSteer:!0,timeoutFailureTick:900,showTimeoutRect:!0,callouts:[{id:"playlab:js_hoc2015_change_setting:setMap",element_id:"#droplet_palette_block_setMap",hide_target_selector:"#droplet_palette_block_setMap",qtip_config:{content:{text:j.calloutSetMapAndSpeed()},position:{my:"center left",at:"center right"}}}],progressConditions:[{required:{setMap:!0,setBotSpeed:!0,collectedItemsAtOrAbove:3},result:{success:!0,message:j.successGenericCharacter()}},{required:{timedOut:!0,collectedItemsBelow:3},result:{success:!1,message:j.failedChangeSettingTimeout()}},{required:{setMap:!1,collectedItemsAtOrAbove:3},result:{success:!1,message:j.failedChangeSettingSettings()}},{required:{setBotSpeed:!1,collectedItemsAtOrAbove:3},result:{success:!1,message:j.failedChangeSettingSettings()}}]},y.js_hoc2015_event_free={editCode:!0,freePlay:!0,background:"forest",wallMap:"blank",softButtons:["leftButton","rightButton","downButton","upButton"],codeFunctions:{setBot:{category:"Commands"},setBackground:{category:"Commands"},setBotSpeed:{category:"Commands"},setMap:{category:"Commands"},playSound:{category:"Commands"},addCharacter:{category:"Commands"},moveSlow:{category:"Commands"},moveNormal:{category:"Commands"},moveFast:{category:"Commands"},addPoints:{category:"Commands"},removePoints:{category:"Commands"},whenTouchObstacle:{category:"Events"},whenGetMan:{category:"Events"},whenGetPilot:{category:"Events"},whenGetPig:{category:"Events"},whenGetBird:{category:"Events"},whenGetMouse:{category:"Events"},whenGetRoo:{category:"Events"},whenGetSpider:{category:"Events"},whenGetCharacter:{category:"Events"},whenGetAllMen:{category:"Events"},whenGetAllPilots:{category:"Events"},whenGetAllPigs:{category:"Events"},whenGetAllBirds:{category:"Events"},whenGetAllMice:{category:"Events"},whenGetAllRoos:{category:"Events"},whenGetAllSpiders:{category:"Events"},whenGetAllCharacters:{category:"Events"}},startBlocks:['setBackground("forest");','setMap("circle");','setBot("bot1");','setBotSpeed("normal");','playSound("character1sound5");',""].join("\n"),sortDrawOrder:!0,wallMapCollisions:!0,blockMovingIntoWalls:!0,itemGridAlignedMovement:!0,removeItemsWhenActorCollides:!0,delayCompletion:2e3,floatingScore:!0,map:[[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0],[0,0,0,0,16,0,0,0],[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0]],embed:"false",instructions:'"You\'re on your own now, BOT1."',autoArrowSteer:!0,callouts:[{id:"playlab:js_hoc2015_event_free:clickCategory",element_id:".droplet-palette-group-header.green",hide_target_selector:".droplet-palette-group-header.green",qtip_config:{content:{text:j.calloutClickEvents()},position:{my:"top center",at:"bottom center"}}}]},y.hoc2015_blockly_1=k.extend(y.js_hoc2015_move_right,{editCode:!1,startBlocks:t,toolbox:o(r),requiredBlocks:[h()]}),y.hoc2015_blockly_2=k.extend(y.js_hoc2015_move_right_down,{editCode:!1,startBlocks:t,toolbox:o(r),requiredBlocks:[h(),g()]}),y.hoc2015_blockly_3=k.extend(y.js_hoc2015_move_diagonal,{editCode:!1,startBlocks:u,toolbox:o(r),requiredBlocks:[g(),i()]}),y.hoc2015_blockly_4=k.extend(y.js_hoc2015_move_backtrack,{editCode:!1,startBlocks:t,toolbox:o(r),requiredBlocks:[h(),f(),g()]}),y.hoc2015_blockly_5=k.extend(y.js_hoc2015_move_around,{editCode:!1,startBlocks:t,toolbox:o(r),requiredBlocks:[h(),g(),i()]}),y.hoc2015_blockly_6=k.extend(y.js_hoc2015_move_finale,{editCode:!1,startBlocks:u,toolbox:o(r),requiredBlocks:[f(),g(),i()]}),y.hoc2015_blockly_7=k.extend(y.js_hoc2015_event_two_items,{editCode:!1,startBlocks:v,toolbox:o(s),requiredBlocks:[f(),g()]}),y.hoc2015_blockly_8=k.extend(y.js_hoc2015_event_four_items,{editCode:!1,startBlocks:w,toolbox:o(r),requiredBlocks:[f(),g(),h(),i()]}),y.hoc2015_blockly_9=k.extend(y.js_hoc2015_score,{editCode:!1}),y.hoc2015_blockly_10=k.extend(y.js_hoc2015_win_lose,{editCode:!1}),y.hoc2015_blockly_11=k.extend(y.js_hoc2015_add_characters,{editCode:!1}),y.hoc2015_blockly_12=k.extend(y.js_hoc2015_chain_characters,{editCode:!1}),y.hoc2015_blockly_13=k.extend(y.js_hoc2015_chain_characters_2,{editCode:!1}),y.hoc2015_blockly_14=k.extend(y.js_hoc2015_change_setting,{editCode:!1}),y.hoc2015_blockly_15=k.extend(y.js_hoc2015_event_free,{editCode:!1})},{"../block_utils":"/home/ubuntu/staging/apps/build/js/block_utils.js","../utils":"/home/ubuntu/staging/apps/build/js/utils.js","./constants":"/home/ubuntu/staging/apps/build/js/studio/constants.js","./locale":"/home/ubuntu/staging/apps/build/js/studio/locale.js"}],"/home/ubuntu/staging/apps/build/js/studio/extraControlRows.html.ejs":[function(require,module,exports){module.exports=function(){var t=function anonymous(locals,filters,escape){escape=escape||function(a){return String(a).replace(/&(?!\w+;)/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")};var buf=[];with(locals||{})!function(){buf.push("");var a=require("../locale");buf.push("\n\n"),finishButton&&buf.push('\n  <div id="share-cell" class="share-cell-none">\n    <button id="finishButton" class="share">\n      <img src="',escape(assetUrl("media/1x1.gif")),'">',escape(a.finish()),"\n    </button>\n  </div>\n"),buf.push("\n")}();return buf.join("")};return function(a){return t(a,require("ejs").filters)}}()},{"../locale":"/home/ubuntu/staging/apps/build/js/locale.js",ejs:"/home/ubuntu/staging/apps/node_modules/ejs/lib/ejs.js"}],"/home/ubuntu/staging/apps/build/js/studio/dropletConfig.js":[function(a,b,c){var d=(a("./locale"),a("./apiJavascript.js"));b.exports.blocks=[{func:"setBot",parent:d,category:"",params:['"bot1"'],dropdown:{0:['"random"','"bot1"','"bot2"']}},{func:"setBotSpeed",parent:d,category:"",params:['"fast"'],dropdown:{0:['"random"','"slow"','"normal"','"fast"']}},{func:"setBackground",parent:d,category:"",params:['"snow"'],dropdown:{0:['"random"','"forest"','"snow"','"ship"']}},{func:"setMap",parent:d,category:"",params:['"blank"'],dropdown:{0:['"random"','"blank"','"circle"','"horizontal"','"grid"','"blobs"']}},{func:"moveRight",parent:d,category:""},{func:"moveLeft",parent:d,category:""},{func:"moveUp",parent:d,category:""},{func:"moveDown",parent:d,category:""},{func:"goRight",parent:d,category:""},{func:"goLeft",parent:d,category:""},{func:"goUp",parent:d,category:""},{func:"goDown",parent:d,category:""},{func:"playSound",parent:d,category:"",params:['"character1sound1"'],dropdown:{0:['"random"','"character1sound1"','"character1sound2"','"character1sound3"','"character1sound4"','"character2sound1"','"character2sound2"','"character2sound3"','"character2sound4"','"item1sound1"','"item1sound2"','"item1sound3"','"item1sound4"','"item3sound1"','"item3sound2"','"item3sound3"','"item3sound4"','"alert1"','"alert2"','"alert3"','"alert4"','"applause"']}},{func:"endGame",parent:d,category:"",params:['"win"'],dropdown:{0:['"win"','"lose"']}},{func:"addPoints",parent:d,category:"",params:["100"]},{func:"removePoints",parent:d,category:"",params:["100"]},{func:"changeScore",parent:d,category:"",params:["1"]},{func:"addCharacter",parent:d,category:"",params:['"pig"'],dropdown:{0:['"random"','"man"','"pilot"','"pig"','"bird"','"mouse"','"roo"','"spider"']}},{func:"setToChase",parent:d,category:"",params:['"pig"'],dropdown:{0:['"random"','"man"','"pilot"','"pig"','"bird"','"mouse"','"roo"','"spider"']}},{func:"setToFlee",parent:d,category:"",params:['"pig"'],dropdown:{0:['"random"','"man"','"pilot"','"pig"','"bird"','"mouse"','"roo"','"spider"']}},{func:"setToRoam",parent:d,category:"",params:['"pig"'],dropdown:{0:['"random"','"man"','"pilot"','"pig"','"bird"','"mouse"','"roo"','"spider"']}},{func:"setToStop",parent:d,category:"",params:['"pig"'],dropdown:{0:['"random"','"man"','"pilot"','"pig"','"bird"','"mouse"','"roo"','"spider"']}},{func:"moveFast",parent:d,category:"",params:['"pig"'],dropdown:{0:['"random"','"man"','"pilot"','"pig"','"bird"','"mouse"','"roo"','"spider"']}},{func:"moveNormal",parent:d,category:"",params:['"pig"'],dropdown:{0:['"random"','"man"','"pilot"','"pig"','"bird"','"mouse"','"roo"','"spider"']}},{func:"moveSlow",parent:d,category:"",params:['"pig"'],dropdown:{0:['"random"','"man"','"pilot"','"pig"','"bird"','"mouse"','"roo"','"spider"']}},{func:"whenTouchGoal",block:"function whenTouchGoal() {}",expansion:"function whenTouchGoal() {\n  __;\n}",category:""},{func:"whenTouchAllGoals",block:"function whenTouchAllGoals() {}",expansion:"function whenTouchAllGoals() {\n  __;\n}",category:""},{func:"whenScore1000",block:"function whenScore1000() {}",expansion:"function whenScore1000() {\n  __;\n}",category:""},{func:"whenLeft",block:"function whenLeft() {}",expansion:"function whenLeft() {\n  __;\n}",category:""},{func:"whenRight",block:"function whenRight() {}",expansion:"function whenRight() {\n  __;\n}",category:""},{func:"whenUp",block:"function whenUp() {}",expansion:"function whenUp() {\n  __;\n}",category:""},{func:"whenDown",block:"function whenDown() {}",expansion:"function whenDown() {\n  __;\n}",category:""},{func:"whenTouchObstacle",block:"function whenTouchObstacle() {}",expansion:"function whenTouchObstacle() {\n  __;\n}",category:""},{func:"whenGetCharacter",block:"function whenGetCharacter() {}",expansion:"function whenGetCharacter() {\n  __;\n}",category:""},{func:"whenTouchCharacter",block:"function whenTouchCharacter() {}",expansion:"function whenTouchCharacter() {\n  __;\n}",category:""},{func:"whenGetMan",block:"function whenGetMan() {}",expansion:"function whenGetMan() {\n  __;\n}",category:""},{func:"whenGetPilot",block:"function whenGetPilot() {}",expansion:"function whenGetPilot() {\n  __;\n}",category:""},{func:"whenGetPig",block:"function whenGetPig() {}",expansion:"function whenGetPig() {\n  __;\n}",category:""},{func:"whenGetBird",block:"function whenGetBird() {}",expansion:"function whenGetBird() {\n  __;\n}",category:""},{func:"whenGetMouse",block:"function whenGetMouse() {}",expansion:"function whenGetMouse() {\n  __;\n}",category:""},{func:"whenGetRoo",block:"function whenGetRoo() {}",expansion:"function whenGetRoo() {\n  __;\n}",category:""},{func:"whenGetSpider",block:"function whenGetSpider() {}",expansion:"function whenGetSpider() {\n  __;\n}",category:""},{func:"whenTouchMan",block:"function whenTouchMan() {}",expansion:"function whenTouchMan() {\n  __;\n}",category:""},{func:"whenTouchPilot",block:"function whenTouchPilot() {}",expansion:"function whenTouchPilot() {\n  __;\n}",category:""},{func:"whenTouchPig",block:"function whenTouchPig() {}",expansion:"function whenTouchPig() {\n  __;\n}",category:""},{func:"whenTouchBird",block:"function whenTouchBird() {}",expansion:"function whenTouchBird() {\n  __;\n}",category:""},{func:"whenTouchMouse",block:"function whenTouchMouse() {}",expansion:"function whenTouchMouse() {\n  __;\n}",category:""},{func:"whenTouchRoo",block:"function whenTouchRoo() {}",expansion:"function whenTouchRoo() {\n  __;\n}",category:""},{func:"whenTouchSpider",block:"function whenTouchSpider() {}",expansion:"function whenTouchSpider() {\n  __;\n}",category:""},{func:"whenTouchAllCharacters",block:"function whenTouchAllCharacters() {}",expansion:"function whenTouchAllCharacters() {\n  __;\n}",category:""},{func:"whenGetAllCharacters",block:"function whenGetAllCharacters() {}",expansion:"function whenGetAllCharacters() {\n  __;\n}",category:""},{func:"whenGetAllMen",block:"function whenGetAllMen() {}",expansion:"function whenGetAllMen() {\n  __;\n}",category:""},{func:"whenGetAllPilots",block:"function whenGetAllPilots() {}",expansion:"function whenGetAllPilots() {\n  __;\n}",category:""},{func:"whenGetAllPigs",block:"function whenGetAllPigs() {}",expansion:"function whenGetAllPigs() {\n  __;\n}",category:""},{func:"whenGetAllBirds",block:"function whenGetAllBirds() {}",expansion:"function whenGetAllBirds() {\n  __;\n}",category:""},{func:"whenGetAllMice",block:"function whenGetAllMice() {}",expansion:"function whenGetAllMice() {\n  __;\n}",category:""},{func:"whenGetAllRoos",block:"function whenGetAllRoos() {}",expansion:"function whenGetAllRoos() {\n  __;\n}",category:""},{func:"whenGetAllSpiders",block:"function whenGetAllSpiders() {}",expansion:"function whenGetAllSpiders() {\n  __;\n}",category:""},{func:"whenTouchAllMen",
block:"function whenTouchAllMen() {}",expansion:"function whenTouchAllMen() {\n  __;\n}",category:""},{func:"whenTouchAllPilots",block:"function whenTouchAllPilots() {}",expansion:"function whenTouchAllPilots() {\n  __;\n}",category:""},{func:"whenTouchAllPigs",block:"function whenTouchAllPigs() {}",expansion:"function whenTouchAllPigs() {\n  __;\n}",category:""},{func:"whenTouchAllBirds",block:"function whenTouchAllBirds() {}",expansion:"function whenTouchAllBirds() {\n  __;\n}",category:""},{func:"whenTouchAllMice",block:"function whenTouchAllMice() {}",expansion:"function whenTouchAllMice() {\n  __;\n}",category:""},{func:"whenTouchAllRoos",block:"function whenTouchAllRoos() {}",expansion:"function whenTouchAllRoos() {\n  __;\n}",category:""},{func:"whenTouchAllSpiders",block:"function whenTouchAllSpiders() {}",expansion:"function whenTouchAllSpiders() {\n  __;\n}",category:""},{func:"setSprite",parent:d,category:"",params:["0",'"bot1"'],dropdown:{1:['"random"','"bot1"','"bot2"']}},{func:"setSpritePosition",parent:d,category:"",params:["0","7"],noAutocomplete:!0},{func:"setSpriteSpeed",parent:d,category:"",params:["0","8"],noAutocomplete:!0},{func:"setSpriteEmotion",parent:d,category:"",params:["0","1"],noAutocomplete:!0},{func:"throwProjectile",parent:d,category:"",params:["0","1",'"blue_fireball"'],noAutocomplete:!0},{func:"vanish",parent:d,category:"",params:["0"],noAutocomplete:!0},{func:"move",parent:d,category:"",params:["0","1"],noAutocomplete:!0},{func:"showDebugInfo",parent:d,category:"",params:["false"],noAutocomplete:!0},{func:"onEvent",parent:d,category:"",params:["'when-left'","function() {\n  \n}"],noAutocomplete:!0}],b.exports.categories={"":{color:"red",blocks:[]},"Play Lab":{color:"red",blocks:[]},Commands:{color:"red",blocks:[]},Events:{color:"green",blocks:[]}},b.exports.autocompleteFunctionsWithParens=!0,b.exports.showParamDropdowns=!0},{"./apiJavascript.js":"/home/ubuntu/staging/apps/build/js/studio/apiJavascript.js","./locale":"/home/ubuntu/staging/apps/build/js/studio/locale.js"}],"/home/ubuntu/staging/apps/build/js/studio/controls.html.ejs":[function(require,module,exports){module.exports=function(){var t=function anonymous(locals,filters,escape){escape=escape||function(a){return String(a).replace(/&(?!\w+;)/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")};var buf=[];with(locals||{})!function(){buf.push("");var a=require("../locale");buf.push('\n\n<div id="soft-buttons" class="soft-buttons-none">\n  <button id="leftButton" disabled=true class="arrow">\n    <img src="',escape(assetUrl("media/1x1.gif")),'" class="left-btn icon21">\n  </button>\n  <button id="rightButton" disabled=true class="arrow">\n    <img src="',escape(assetUrl("media/1x1.gif")),'" class="right-btn icon21">\n  </button>\n  <button id="upButton" disabled=true class="arrow">\n    <img src="',escape(assetUrl("media/1x1.gif")),'" class="up-btn icon21">\n  </button>\n  <button id="downButton" disabled=true class="arrow">\n    <img src="',escape(assetUrl("media/1x1.gif")),'" class="down-btn icon21">\n  </button>\n</div>\n\n'),finishButton&&buf.push('\n  <div id="share-cell" class="share-cell-none">\n    <button id="finishButton" class="share">\n      <img src="',escape(assetUrl("media/1x1.gif")),'">',escape(a.finish()),"\n    </button>\n  </div>\n"),buf.push("\n")}();return buf.join("")};return function(a){return t(a,require("ejs").filters)}}()},{"../locale":"/home/ubuntu/staging/apps/build/js/locale.js",ejs:"/home/ubuntu/staging/apps/node_modules/ejs/lib/ejs.js"}],"/home/ubuntu/staging/apps/build/js/studio/blocks.js":[function(a,b,c){"use strict";function d(a){var b=l.range(0,u);return l.map(b,function(b){return[a({spriteIndex:b+1}),b.toString()]})}function e(a,b,c,d,e){a.Blocks.studio_vanish={helpUrl:"",init:function(){this.setHSV(184,1,.74),e.isK1?this.appendDummyInput().appendTitle(g.vanish()).appendTitle(new a.FieldImage(e.skin.explosionThumbnail)).appendTitle(d(),"SPRITE"):this.appendDummyInput().appendTitle(c(g.vanishActorN),"SPRITE"),this.setPreviousStatement(!0),this.setInputsInline(!0),this.setNextStatement(!0),this.setTooltip(g.vanishTooltip())}},b.studio_vanish=function(){var a=this.getTitleValue("SPRITE");return"Studio.vanish('block_id_"+this.id+"', "+a+");\n"}}var f=a("../StudioApp").singleton,g=a("./locale"),h=a("../sharedFunctionalBlocks"),i=a("../locale"),j=(a("../codegen"),a("./constants")),k=a("../utils"),l=k.getLodash(),m=j.Direction,n=j.Position,o=j.Emotions,p=j.RANDOM_VALUE,q=j.HIDDEN_VALUE,r=j.CLICK_VALUE,s=j.VISIBLE_VALUE,t=function(a){var b=a.value||a.ctx.getTitleValue("VALUE");if(b===p){var c=l(a.ctx.VALUES).map(function(a){return a[1]}).without(p,q,r);b="Studio.random(["+c+"])"}return a.returnValue?b:"Studio."+a.name+"('block_id_"+a.ctx.id+"', "+(a.extraParams?a.extraParams+", ":"")+b+");\n"},u=6,v=!1,w=!1,x=!1,y=[],z=null;c.setSpriteCount=function(a,b){u=b},c.enableProjectileCollisions=function(a){v=!0},c.enableEdgeCollisions=function(a){w=!0},c.enableSpritesOutsidePlayspace=function(a){x=!0},c.setStartAvatars=function(a){y=a.slice(0)},c.registerCustomGameLogic=function(a){z=a},c.install=function(a,b){function c(b){return new a.FieldDropdown(d(b))}function j(){var b=l.range(0,u),c=l.map(b,function(a){var b=y[a];return[B[b].dropdownThumbnail,a.toString()]});return new a.FieldImageDropdown(c,B.dropdownThumbnailWidth,B.dropdownThumbnailHeight)}function r(a){var b=Blockly.JavaScript.valueToCode(a,"SPRITE",Blockly.JavaScript.ORDER_NONE)||"1";return b+"-1"}function A(a){a!==p&&f.playAudio(k.stripQuotes(a),{volume:1})}var B=b.skin,C=b.isK1,D=a.Generator.get("JavaScript");a.JavaScript=D,y=B.avatarList.slice(0),D.studio_eventHandlerPrologue=function(){return"\n"},e(a,D,c,j,b),D.studio_eventHandlerPrologue=function(){return"\n"},a.Blocks.studio_whenLeft={helpUrl:"",init:function(){this.setHSV(140,1,.74),C?this.appendDummyInput().appendTitle(i.when()).appendTitle(new Blockly.FieldImage(B.whenLeft)):this.appendDummyInput().appendTitle(g.whenLeft()),this.setPreviousStatement(!1),this.setNextStatement(!0),this.setTooltip(g.whenLeftTooltip())}},D.studio_whenLeft=D.studio_eventHandlerPrologue,a.Blocks.studio_whenRight={helpUrl:"",init:function(){this.setHSV(140,1,.74),C?this.appendDummyInput().appendTitle(i.when()).appendTitle(new Blockly.FieldImage(B.whenRight)):this.appendDummyInput().appendTitle(g.whenRight()),this.setPreviousStatement(!1),this.setNextStatement(!0),this.setTooltip(g.whenRightTooltip())}},D.studio_whenRight=D.studio_eventHandlerPrologue,a.Blocks.studio_whenUp={helpUrl:"",init:function(){this.setHSV(140,1,.74),C?this.appendDummyInput().appendTitle(i.when()).appendTitle(new Blockly.FieldImage(B.whenUp)):this.appendDummyInput().appendTitle(g.whenUp()),this.setPreviousStatement(!1),this.setNextStatement(!0),this.setTooltip(g.whenUpTooltip())}},D.studio_whenUp=D.studio_eventHandlerPrologue,a.Blocks.studio_whenDown={helpUrl:"",init:function(){this.setHSV(140,1,.74),C?this.appendDummyInput().appendTitle(i.when()).appendTitle(new Blockly.FieldImage(B.whenDown)):this.appendDummyInput().appendTitle(g.whenDown()),this.setPreviousStatement(!1),this.setNextStatement(!0),this.setTooltip(g.whenDownTooltip())}},D.studio_whenDown=D.studio_eventHandlerPrologue,a.Blocks.studio_whenArrow={helpUrl:"",init:function(){this.setHSV(140,1,.74),this.appendDummyInput().appendTitle(i.when()),C?this.appendDummyInput().appendTitle(new a.FieldImageDropdown(this.K1_VALUES),"VALUE"):this.appendDummyInput().appendTitle(new a.FieldDropdown(this.VALUES),"VALUE"),this.setPreviousStatement(!1),this.setInputsInline(!0),this.setNextStatement(!0),this.setTooltip(g.whenArrowTooltip())}},a.Blocks.studio_whenArrow.K1_VALUES=[[B.whenUp,"up"],[B.whenRight,"right"],[B.whenDown,"down"],[B.whenLeft,"left"]],a.Blocks.studio_whenArrow.VALUES=[[g.whenArrowUp(),"up"],[g.whenArrowDown(),"down"],[g.whenArrowLeft(),"left"],[g.whenArrowRight(),"right"]],D.studio_whenArrow=D.studio_eventHandlerPrologue,a.Blocks.studio_repeatForever={helpUrl:"",init:function(){this.setHSV(322,.9,.95),C?(this.appendDummyInput().appendTitle(i.repeat()),this.appendStatementInput("DO").appendTitle(new a.FieldImage(B.repeatImage))):(this.appendDummyInput().appendTitle(g.repeatForever()),this.appendStatementInput("DO").appendTitle(g.repeatDo())),this.setPreviousStatement(!1),this.setNextStatement(!1),this.setTooltip(g.repeatForeverTooltip())}},D.studio_repeatForever=function(){var a=Blockly.JavaScript.statementToCode(this,"DO");return D.studio_eventHandlerPrologue()+a},a.Blocks.studio_whenSpriteClicked={helpUrl:"",init:function(){this.setHSV(140,1,.74),u>1?this.appendDummyInput().appendTitle(c(g.whenSpriteClickedN),"SPRITE"):this.appendDummyInput().appendTitle(g.whenSpriteClicked()),this.setPreviousStatement(!1),this.setInputsInline(!0),this.setNextStatement(!0),this.setTooltip(g.whenSpriteClickedTooltip())}},D.studio_whenSpriteClicked=D.studio_eventHandlerPrologue,a.Blocks.studio_whenTouchItem={helpUrl:"",init:function(){this.setHSV(140,1,.74),this.appendDummyInput().appendTitle(g.whenTouchItem()),this.setPreviousStatement(!1),this.setNextStatement(!0),this.setTooltip(g.whenTouchItemTooltip())}},D.studio_whenTouchItem=D.studio_eventHandlerPrologue,a.Blocks.studio_whenTouchWall={helpUrl:"",init:function(){this.setHSV(140,1,.74),this.appendDummyInput().appendTitle(g.whenTouchWall()),this.setPreviousStatement(!1),this.setNextStatement(!0),this.setTooltip(g.whenTouchWallTooltip())}},D.studio_whenTouchWall=D.studio_eventHandlerPrologue,a.Blocks.studio_whenSpriteCollided={helpUrl:"",init:function(){var b,e;if(this.setHSV(140,1,.74),C)b=j(),e=j(),this.appendDummyInput().appendTitle(i.when()).appendTitle(new a.FieldImage(B.collide)).appendTitle(b,"SPRITE1"),this.appendDummyInput().appendTitle(i.and()).appendTitle(e,"SPRITE2");else{b=c(g.whenSpriteCollidedN);var f=[this.GROUPINGS[0]];f=f.concat(d(g.whenSpriteCollidedWithN)),f.unshift(this.GROUPINGS[1]),v&&(f=f.concat([this.GROUPINGS[2]]),f=f.concat(this.PROJECTILES)),w&&(f=f.concat([this.GROUPINGS[3]]),f=f.concat(this.EDGES)),e=new a.FieldDropdown(f),this.appendDummyInput().appendTitle(b,"SPRITE1"),this.appendDummyInput().appendTitle(e,"SPRITE2")}u>1&&e.setValue("1"),this.setPreviousStatement(!1),this.setInputsInline(!0),this.setNextStatement(!0),this.setTooltip(g.whenSpriteCollidedTooltip())}},a.Blocks.studio_whenSpriteCollided.GROUPINGS=[[g.whenSpriteCollidedWithAnything(),"anything"],[g.whenSpriteCollidedWithAnyActor(),"any_actor"],[g.whenSpriteCollidedWithAnyProjectile(),"any_projectile"],[g.whenSpriteCollidedWithAnyEdge(),"any_edge"]],a.Blocks.studio_whenSpriteCollided.PROJECTILES=[[g.whenSpriteCollidedWithBlueFireball(),"blue_fireball"],[g.whenSpriteCollidedWithPurpleFireball(),"purple_fireball"],[g.whenSpriteCollidedWithRedFireball(),"red_fireball"],[g.whenSpriteCollidedWithYellowHearts(),"yellow_hearts"],[g.whenSpriteCollidedWithPurpleHearts(),"purple_hearts"],[g.whenSpriteCollidedWithRedHearts(),"red_hearts"]],a.Blocks.studio_whenSpriteCollided.EDGES=[[g.whenSpriteCollidedWithTopEdge(),"top"],[g.whenSpriteCollidedWithLeftEdge(),"left"],[g.whenSpriteCollidedWithBottomEdge(),"bottom"],[g.whenSpriteCollidedWithRightEdge(),"right"]],D.studio_whenSpriteCollided=D.studio_eventHandlerPrologue,a.Blocks.studio_stop={helpUrl:"",init:function(){this.setHSV(184,1,.74),u>1?this.appendDummyInput().appendTitle(c(g.stopSpriteN),"SPRITE"):this.appendDummyInput().appendTitle(g.stopSprite()),this.setPreviousStatement(!0),this.setInputsInline(!0),this.setNextStatement(!0),this.setTooltip(g.stopTooltip())}},a.Blocks.studio_stopSprite={helpUrl:"",init:function(){this.setHSV(184,1,.74),this.appendValueInput("SPRITE").setCheck(a.BlockValueType.NUMBER).appendTitle(g.stopSpriteN({spriteIndex:""})),this.setPreviousStatement(!0),this.setInputsInline(!0),this.setNextStatement(!0),this.setTooltip(g.stopTooltip())}},D.studio_stop=function(){return"Studio.stop('block_id_"+this.id+"', "+(this.getTitleValue("SPRITE")||"0")+");\n"},D.studio_stopSprite=function(){var a=r(this);return"Studio.stop('block_id_"+this.id+"', "+a+");\n"},a.Blocks.studio_addCharacter={helpUrl:"",init:function(){this.setHSV(184,1,.74),this.appendDummyInput().appendTitle(g.addCharacter()),this.appendDummyInput().appendTitle(new a.FieldDropdown(B.itemChoices),"VALUE"),this.setPreviousStatement(!0),this.setInputsInline(!0),this.setNextStatement(!0),this.setTooltip(g.addCharacterTooltip())}},D.studio_addCharacter=function(){var a=B.itemChoices.slice(0,-1).map(function(a){return a[1]}),b=this.getTitleValue("VALUE");return"random"===b&&(b="Studio.random(["+a+"])"),"Studio.addItem('block_id_"+this.id+"', "+b+");\n"},a.Blocks.studio_setItemActivity={helpUrl:"",init:function(){this.setHSV(184,1,.74),this.appendDummyInput().appendTitle(new a.FieldDropdown(B.activityChoices),"TYPE"),this.appendDummyInput().appendTitle(new a.FieldDropdown(B.itemChoices),"VALUE"),this.setPreviousStatement(!0),this.setInputsInline(!0),this.setNextStatement(!0),this.setTooltip(g.setActivityTooltip())}},D.studio_setItemActivity=function(){var a=B.itemChoices.slice(0,-1).map(function(a){return a[1]}),b=this.getTitleValue("VALUE");"random"===b&&(b="Studio.random(["+a+"])");var c=B.activityChoices.slice(0,-1).map(function(a){return a[1]}),d=this.getTitleValue("TYPE");return"random"===d&&(d="Studio.random(["+c+"])"),"Studio.setItemActivity('block_id_"+this.id+"', "+b+", "+d+");\n"},a.Blocks.studio_setItemSpeed={helpUrl:"",init:function(){this.setHSV(184,1,.74),this.appendDummyInput().appendTitle(g.setItemSpeedSet()),this.appendDummyInput().appendTitle(new a.FieldDropdown(B.itemChoices),"CLASS");var b=new a.FieldDropdown(this.VALUES);b.setValue(this.VALUES[2][1]),this.appendDummyInput().appendTitle(b,"VALUE"),this.setInputsInline(!0),this.setPreviousStatement(!0),this.setNextStatement(!0),this.setTooltip(g.setItemSpeedTooltip())}},a.Blocks.studio_setItemSpeed.VALUES=[[g.setSpriteSpeedRandom(),p],[g.setSpriteSpeedVerySlow(),"Studio.SpriteSpeed.VERY_SLOW"],[g.setSpriteSpeedSlow(),"Studio.SpriteSpeed.SLOW"],[g.setSpriteSpeedNormal(),"Studio.SpriteSpeed.NORMAL"],[g.setSpriteSpeedFast(),"Studio.SpriteSpeed.FAST"],[g.setSpriteSpeedVeryFast(),"Studio.SpriteSpeed.VERY_FAST"]],D.studio_setItemSpeed=function(){return t({ctx:this,extraParams:this.getTitleValue("CLASS"),name:"setItemSpeed"})},a.Blocks.studio_throw={helpUrl:"",init:function(){this.setHSV(184,1,.74),u>1?this.appendDummyInput().appendTitle(c(g.throwSpriteN),"SPRITE"):this.appendDummyInput().appendTitle(g.throwSprite()),this.appendDummyInput().appendTitle(new a.FieldDropdown(B.projectileChoices),"VALUE"),this.appendDummyInput().appendTitle("	"),this.appendDummyInput().appendTitle(new a.FieldDropdown(this.DIR),"DIR"),this.setPreviousStatement(!0),this.setInputsInline(!0),this.setNextStatement(!0),this.setTooltip(g.throwTooltip())}},a.Blocks.studio_throw.DIR=[[g.moveDirectionUp(),m.NORTH.toString()],[g.moveDirectionDown(),m.SOUTH.toString()],[g.moveDirectionLeft(),m.WEST.toString()],[g.moveDirectionRight(),m.EAST.toString()],[g.moveDirectionRandom(),"random"]],D.studio_throw=function(){var a=this.DIR.slice(0,-1).map(function(a){return a[1]}),b=this.getTitleValue("DIR");"random"===b&&(b="Studio.random(["+a+"])");var c=B.projectileChoices.slice(0,-1).map(function(a){return a[1]}),d=this.getTitleValue("VALUE");return"random"===d&&(d="Studio.random(["+c+"])"),"Studio.throwProjectile('block_id_"+this.id+"', "+(this.getTitleValue("SPRITE")||"0")+", "+b+", "+d+");\n"},a.Blocks.studio_makeProjectile={helpUrl:"",init:function(){this.setHSV(184,1,.74),this.appendDummyInput().appendTitle(new a.FieldDropdown(this.VALUES),"VALUE"),this.appendDummyInput().appendTitle("	"),this.appendDummyInput().appendTitle(new a.FieldDropdown(this.ACTIONS),"ACTION"),this.setPreviousStatement(!0),this.setInputsInline(!0),this.setNextStatement(!0),this.setTooltip(g.makeProjectileTooltip())}},a.Blocks.studio_makeProjectile.VALUES=[[g.makeProjectileBlueFireball(),'"blue_fireball"'],[g.makeProjectilePurpleFireball(),'"purple_fireball"'],[g.makeProjectileRedFireball(),'"red_fireball"'],[g.makeProjectileYellowHearts(),'"yellow_hearts"'],[g.makeProjectilePurpleHearts(),'"purple_hearts"'],[g.makeProjectileRedHearts(),'"red_hearts"']],a.Blocks.studio_makeProjectile.ACTIONS=[[g.makeProjectileBounce(),'"bounce"'],[g.makeProjectileDisappear(),'"disappear"']],D.studio_makeProjectile=function(){return"Studio.makeProjectile('block_id_"+this.id+"', "+this.getTitleValue("VALUE")+", "+this.getTitleValue("ACTION")+");\n"},a.Blocks.studio_setSpritePosition={helpUrl:"",init:function(){var b;x?(b=new a.FieldDropdown(this.VALUES_EXTENDED),b.setValue(this.VALUES_EXTENDED[4][1])):(b=new a.FieldDropdown(this.VALUES),b.setValue(this.VALUES[1][1])),this.setHSV(184,1,.74),u>1?this.appendDummyInput().appendTitle(c(g.setSpriteN),"SPRITE"):this.appendDummyInput().appendTitle(g.setSprite()),this.appendDummyInput().appendTitle(b,"VALUE"),this.setPreviousStatement(!0),this.setInputsInline(!0),this.setNextStatement(!0),this.setTooltip(g.setSpritePositionTooltip())}},a.Blocks.studio_setSpritePosition.VALUES=[[g.positionRandom(),p],[g.positionTopLeft(),n.TOPLEFT.toString()],[g.positionTopCenter(),n.TOPCENTER.toString()],[g.positionTopRight(),n.TOPRIGHT.toString()],[g.positionMiddleLeft(),n.MIDDLELEFT.toString()],[g.positionMiddleCenter(),n.MIDDLECENTER.toString()],[g.positionMiddleRight(),n.MIDDLERIGHT.toString()],[g.positionBottomLeft(),n.BOTTOMLEFT.toString()],[g.positionBottomCenter(),n.BOTTOMCENTER.toString()],[g.positionBottomRight(),n.BOTTOMRIGHT.toString()]],a.Blocks.studio_setSpritePosition.VALUES_EXTENDED=[[g.positionRandom(),p],[g.positionOutTopLeft(),n.OUTTOPLEFT.toString()],[g.positionOutTopRight(),n.OUTTOPRIGHT.toString()],[g.positionTopOutLeft(),n.TOPOUTLEFT.toString()],[g.positionTopLeft(),n.TOPLEFT.toString()],[g.positionTopCenter(),n.TOPCENTER.toString()],[g.positionTopRight(),n.TOPRIGHT.toString()],[g.positionTopOutRight(),n.TOPOUTRIGHT.toString()],[g.positionMiddleLeft(),n.MIDDLELEFT.toString()],[g.positionMiddleCenter(),n.MIDDLECENTER.toString()],[g.positionMiddleRight(),n.MIDDLERIGHT.toString()],[g.positionBottomOutLeft(),n.BOTTOMOUTLEFT.toString()],[g.positionBottomLeft(),n.BOTTOMLEFT.toString()],[g.positionBottomCenter(),n.BOTTOMCENTER.toString()],[g.positionBottomRight(),n.BOTTOMRIGHT.toString()],[g.positionBottomOutRight(),n.BOTTOMOUTRIGHT.toString()],[g.positionOutBottomLeft(),n.OUTBOTTOMLEFT.toString()],[g.positionOutBottomRight(),n.OUTBOTTOMRIGHT.toString()]],D.studio_setSpritePosition=function(){return t({ctx:this,extraParams:this.getTitleValue("SPRITE")||"0",name:"setSpritePosition"})},a.Blocks.studio_setSpriteXY={helpUrl:"",init:function(){this.setHSV(184,1,.74),u>1?this.appendValueInput("SPRITE").setCheck(a.BlockValueType.NUMBER).appendTitle(g.moveSpriteN({spriteIndex:""})):this.appendDummyInput().appendTitle(g.setSprite()),this.appendDummyInput().appendTitle(g.toXY()),this.appendValueInput("XPOS").setCheck(a.BlockValueType.NUMBER),this.appendValueInput("YPOS").setCheck(a.BlockValueType.NUMBER),this.setPreviousStatement(!0),this.setInputsInline(!0),this.setNextStatement(!0)}},D.studio_setSpriteXY=function(){var a=r(this),b=Blockly.JavaScript.valueToCode(this,"XPOS",Blockly.JavaScript.ORDER_NONE)||"0",c=Blockly.JavaScript.valueToCode(this,"YPOS",Blockly.JavaScript.ORDER_NONE)||"0";return"Studio.setSpriteXY('block_id_"+this.id+"', "+a+", "+b+", "+c+");\n"};var E={DIRECTION_CONFIGS:{West:{letter:i.directionWestLetter(),image:B.leftArrow,studioValue:m.WEST.toString(),tooltip:g.moveLeftTooltip()},East:{letter:i.directionEastLetter(),image:B.rightArrow,studioValue:m.EAST.toString(),tooltip:g.moveRightTooltip()},North:{letter:i.directionNorthLetter(),image:B.upArrow,studioValue:m.NORTH.toString(),tooltip:g.moveUpTooltip()},South:{letter:i.directionSouthLetter(),image:B.downArrow,studioValue:m.SOUTH.toString(),tooltip:g.moveDownTooltip()}},DISTANCES:[[B.shortLine,"25"],[B.longLine,"400"]],DEFAULT_MOVE_DISTANCE:"100",generateBlocksForAllDirections:function(){E.generateBlocksForDirection("North"),E.generateBlocksForDirection("South"),E.generateBlocksForDirection("West"),E.generateBlocksForDirection("East")},generateBlocksForDirection:function(b){D["studio_move"+b]=E.generateCodeGenerator(b,!0),a.Blocks["studio_move"+b]=E.generateMoveBlock(b,!1),D["studio_move"+b+"Distance"]=E.generateCodeGenerator(b,!1),a.Blocks["studio_move"+b+"Distance"]=E.generateMoveBlock(b,!1),D["studio_move"+b+"_length"]=E.generateCodeGenerator(b,!1),a.Blocks["studio_move"+b+"_length"]=E.generateMoveBlock(b,!0)},generateMoveBlock:function(b,c){var d=E.DIRECTION_CONFIGS[b];return{helpUrl:"",init:function(){this.setHSV(184,1,.74),this.appendDummyInput().appendTitle(g.moveSprite()).appendTitle(new a.FieldImage(d.image)).appendTitle(d.letter),u>1&&this.appendDummyInput().appendTitle(j(),"SPRITE"),c&&this.appendDummyInput().appendTitle(new a.FieldImageDropdown(E.DISTANCES),"DISTANCE"),this.setPreviousStatement(!0),this.setInputsInline(!0),this.setNextStatement(!0),this.setTooltip(d.tooltip)}}},generateCodeGenerator:function(a,b){var c=E.DIRECTION_CONFIGS[a];return function(){var a=this.getTitleValue("SPRITE")||"0",d=c.studioValue,e=b?"move":"moveDistance",f=this.getTitleValue("DISTANCE")||E.DEFAULT_MOVE_DISTANCE;return"Studio."+e+"('block_id_"+this.id+"', "+a+", "+d+(b?"":", "+f)+");\n"}}};E.generateBlocksForAllDirections(),a.Blocks.studio_move={helpUrl:"",init:function(){this.setHSV(184,1,.74),u>1?(C?this.appendDummyInput().appendTitle(g.moveSprite()).appendTitle(j(),"SPRITE"):this.appendDummyInput().appendTitle(c(g.moveSpriteN),"SPRITE"),this.appendDummyInput().appendTitle("	")):this.appendDummyInput().appendTitle(g.moveSprite()),C?this.appendDummyInput().appendTitle(new a.FieldImageDropdown(this.K1_DIR),"DIR"):this.appendDummyInput().appendTitle(new a.FieldDropdown(this.DIR),"DIR"),this.setPreviousStatement(!0),this.setInputsInline(!0),this.setNextStatement(!0),this.setTooltip(g.moveTooltip())}},a.Blocks.studio_move.K1_DIR=[[B.upArrow,m.NORTH.toString()],[B.rightArrow,m.EAST.toString()],[B.downArrow,m.SOUTH.toString()],[B.leftArrow,m.WEST.toString()]],a.Blocks.studio_move.DIR=[[g.moveDirectionUp(),m.NORTH.toString()],[g.moveDirectionDown(),m.SOUTH.toString()],[g.moveDirectionLeft(),m.WEST.toString()],[g.moveDirectionRight(),m.EAST.toString()]],D.studio_move=function(){return"Studio.move('block_id_"+this.id+"', "+(this.getTitleValue("SPRITE")||"0")+", "+this.getTitleValue("DIR")+");\n"};var F=function(b){var d={};return d.helpUrl="",d.init=function(){this.setHSV(184,1,.74),b.sprite?this.appendValueInput("SPRITE").setCheck(a.BlockValueType.NUMBER).appendTitle(g.moveSpriteN({spriteIndex:""})):u>1?(C?this.appendDummyInput().appendTitle(g.moveSprite()).appendTitle(j(),"SPRITE"):this.appendDummyInput().appendTitle(c(g.moveSpriteN),"SPRITE"),this.appendDummyInput().appendTitle("	")):this.appendDummyInput().appendTitle(g.moveSprite()),C?this.appendDummyInput().appendTitle(new a.FieldImageDropdown(this.K1_DIR),"DIR"):this.appendDummyInput().appendTitle(new a.FieldDropdown(this.DIR),"DIR"),this.appendDummyInput().appendTitle("	"),b.params?(this.appendValueInput("DISTANCE").setCheck(a.BlockValueType.NUMBER),this.appendDummyInput().appendTitle(g.moveDistancePixels())):C?this.appendDummyInput().appendTitle(new a.FieldImageDropdown(this.K1_DISTANCE),"DISTANCE"):this.appendDummyInput().appendTitle(new a.FieldDropdown(this.DISTANCE),"DISTANCE"),this.setPreviousStatement(!0),this.setInputsInline(!0),this.setNextStatement(!0),this.setTooltip(g.moveDistanceTooltip())},d.K1_DIR=[[B.upArrow,m.NORTH.toString()],[B.rightArrow,m.EAST.toString()],[B.downArrow,m.SOUTH.toString()],[B.leftArrow,m.WEST.toString()]],d.DIR=[[g.moveDirectionUp(),m.NORTH.toString()],[g.moveDirectionDown(),m.SOUTH.toString()],[g.moveDirectionLeft(),m.WEST.toString()],[g.moveDirectionRight(),m.EAST.toString()],[g.moveDirectionRandom(),"random"]],b.params||(d.DISTANCE=[[g.moveDistance25(),"25"],[g.moveDistance50(),"50"],[g.moveDistance100(),"100"],[g.moveDistance200(),"200"],[g.moveDistance400(),"400"],[g.moveDistanceRandom(),"random"]],d.K1_DISTANCE=[[B.shortLine,"25"],[B.longLine,"400"]]),d};a.Blocks.studio_moveDistance=F({}),a.Blocks.studio_moveDistanceParams=F({params:!0}),a.Blocks.studio_moveDistanceParamsSprite=F({params:!0,sprite:!0}),D.studio_moveDistance=function(){var a=this.DISTANCE.slice(0,-1).map(function(a){return a[1]}),b=this.getTitleValue("DISTANCE");"random"===b&&(b="Studio.random(["+a+"])");var c=this.DIR.slice(0,-1).map(function(a){return a[1]}),d=this.getTitleValue("DIR");return"random"===d&&(d="Studio.random(["+c+"])"),"Studio.moveDistance('block_id_"+this.id+"', "+(this.getTitleValue("SPRITE")||"0")+", "+d+", "+b+");\n"},D.studio_moveDistanceParams=function(){var a=this.DIR.slice(0,-1).map(function(a){return a[1]}),b=this.getTitleValue("DIR");"random"===b&&(b="Studio.random(["+a+"])");var c=Blockly.JavaScript.valueToCode(this,"DISTANCE",Blockly.JavaScript.ORDER_NONE)||"0";return"Studio.moveDistance('block_id_"+this.id+"', "+(this.getTitleValue("SPRITE")||"0")+", "+b+", "+c+");\n"},D.studio_moveDistanceParamsSprite=function(){var a=r(this),b=this.DIR.slice(0,-1).map(function(a){return a[1]}),c=this.getTitleValue("DIR");"random"===c&&(c="Studio.random(["+b+"])");var d=Blockly.JavaScript.valueToCode(this,"DISTANCE",Blockly.JavaScript.ORDER_NONE)||"0";return"Studio.moveDistance('block_id_"+this.id+"', "+a+", "+c+", "+d+");\n"},a.Blocks.studio_playSound={helpUrl:"",init:function(){this.setHSV(184,1,.74),C?this.appendDummyInput().appendTitle(i.play()).appendTitle(new a.FieldImage(B.soundIcon)).appendTitle(new a.FieldDropdown(this.K1_SOUNDS,A),"SOUND"):this.appendDummyInput().appendTitle(new a.FieldDropdown(this.SOUNDS,A),"SOUND"),this.setPreviousStatement(!0),this.setNextStatement(!0),this.setTooltip(g.playSoundTooltip())}},a.Blocks.studio_playSound.K1_SOUNDS=[[g.soundHit(),"hit"],[g.soundWood(),"wood"],[g.soundRetro(),"retro"],[g.soundSlap(),"slap"],[g.soundRubber(),"rubber"],[g.soundCrunch(),"crunch"],[g.soundWinPoint(),"winpoint"],[g.soundWinPoint2(),"winpoint2"],[g.soundLosePoint(),"losepoint"],[g.soundLosePoint2(),"losepoint2"],[g.soundGoal1(),"goal1"],[g.soundGoal2(),"goal2"]],a.Blocks.studio_playSound.SOUNDS=[[g.playSoundHit(),"hit"],[g.playSoundWood(),"wood"],[g.playSoundRetro(),"retro"],[g.playSoundSlap(),"slap"],[g.playSoundRubber(),"rubber"],[g.playSoundCrunch(),"crunch"],[g.playSoundWinPoint(),"winpoint"],[g.playSoundWinPoint2(),"winpoint2"],[g.playSoundLosePoint(),"losepoint"],[g.playSoundLosePoint2(),"losepoint2"],[g.playSoundGoal1(),"goal1"],[g.playSoundGoal2(),"goal2"]],D.studio_playSound=function(){return"Studio.playSound('block_id_"+this.id+"', '"+this.getTitleValue("SOUND")+"');\n"},a.Blocks.studio_changeScore={helpUrl:"",init:function(){this.setHSV(184,1,.74),C?this.appendDummyInput().appendTitle(i.score()).appendTitle(new a.FieldImage(B.scoreCard)):this.appendDummyInput().appendTitle(new a.FieldDropdown(this.VALUES),"VALUE"),this.setPreviousStatement(!0),this.setNextStatement(!0),this.setTooltip(C?g.changeScoreTooltipK1():g.changeScoreTooltip())}},a.Blocks.studio_changeScore.VALUES=[[g.incrementPlayerScore(),"1"],[g.decrementPlayerScore(),"-1"]],D.studio_changeScore=function(){return"Studio.changeScore('block_id_"+this.id+"', '"+(this.getTitleValue("VALUE")||"1")+"');\n"},a.Blocks.studio_setScoreText={helpUrl:"",init:function(){this.setHSV(184,1,.74),this.appendValueInput("TEXT").appendTitle(g.setScoreText()),this.setInputsInline(!0),this.setPreviousStatement(!0),this.setNextStatement(!0),this.setTooltip(g.setScoreTextTooltip())}},D.studio_setScoreText=function(){var a=Blockly.JavaScript.valueToCode(this,"TEXT",Blockly.JavaScript.ORDER_NONE)||"";return"Studio.setScoreText('block_id_"+this.id+"', "+a+");\n"},a.Blocks.studio_showCoordinates={helpUrl:"",init:function(){this.setHSV(184,1,.74),this.appendDummyInput().appendTitle(g.showCoordinates()),this.setInputsInline(!0),this.setPreviousStatement(!0),this.setNextStatement(!0),this.setTooltip(g.showCoordinatesTooltip())}},D.studio_showCoordinates=function(){return"Studio.showCoordinates('block_id_"+this.id+"');\n"},a.Blocks.studio_setSpriteSpeed={helpUrl:"",init:function(){if(this.setHSV(184,1,.74),u>1?C?this.appendDummyInput().appendTitle(g.setSprite()).appendTitle(j(),"SPRITE"):this.appendDummyInput().appendTitle(c(g.setSpriteN),"SPRITE"):this.appendDummyInput().appendTitle(g.setSprite()),C){var b=new a.FieldImageDropdown(this.K1_VALUES);b.setValue(this.K1_VALUES[1][1]),this.appendDummyInput().appendTitle(g.speed()).appendTitle(b,"VALUE")}else{var d=new a.FieldDropdown(this.VALUES);d.setValue(this.VALUES[3][1]),this.appendDummyInput().appendTitle(d,"VALUE")}this.setInputsInline(!0),this.setPreviousStatement(!0),this.setNextStatement(!0),this.setTooltip(g.setSpriteSpeedTooltip())}},a.Blocks.studio_setSpriteSpeedParams={helpUrl:"",init:function(){this.setHSV(184,1,.74),this.appendValueInput("SPRITE").setCheck(a.BlockValueType.NUMBER).appendTitle(g.setSpriteN({spriteIndex:""})),this.appendValueInput("VALUE").setCheck(a.BlockValueType.NUMBER).appendTitle(g.speed()),this.setInputsInline(!0),this.setPreviousStatement(!0),this.setNextStatement(!0),this.setTooltip(g.setSpriteSpeedTooltip())}},a.Blocks.studio_setSpriteSpeed.K1_VALUES=[[B.speedSlow,"Studio.SpriteSpeed.SLOW"],[B.speedMedium,"Studio.SpriteSpeed.NORMAL"],[B.speedFast,"Studio.SpriteSpeed.FAST"]],a.Blocks.studio_setSpriteSpeed.VALUES=[[g.setSpriteSpeedRandom(),p],[g.setSpriteSpeedVerySlow(),"Studio.SpriteSpeed.VERY_SLOW"],[g.setSpriteSpeedSlow(),"Studio.SpriteSpeed.SLOW"],[g.setSpriteSpeedNormal(),"Studio.SpriteSpeed.NORMAL"],[g.setSpriteSpeedFast(),"Studio.SpriteSpeed.FAST"],[g.setSpriteSpeedVeryFast(),"Studio.SpriteSpeed.VERY_FAST"]],D.studio_setSpriteSpeed=function(){return t({ctx:this,extraParams:this.getTitleValue("SPRITE")||"0",name:"setSpriteSpeed"})},D.studio_setSpriteSpeedParams=function(){var a=r(this),b=Blockly.JavaScript.valueToCode(this,"VALUE",Blockly.JavaScript.ORDER_NONE)||"5";return"Studio.setSpriteSpeed('block_id_"+this.id+"', "+a+","+b+");\n"},a.Blocks.studio_setSpriteSize={helpUrl:"",init:function(){this.setHSV(184,1,.74),u>1?this.appendDummyInput().appendTitle(c(g.setSpriteN),"SPRITE"):this.appendDummyInput().appendTitle(g.setSprite());var b=new a.FieldDropdown(this.VALUES);b.setValue(this.VALUES[3][1]),this.appendDummyInput().appendTitle(b,"VALUE"),this.setInputsInline(!0),this.setPreviousStatement(!0),this.setNextStatement(!0),this.setTooltip(g.setSpriteSizeTooltip())}},a.Blocks.studio_setSpriteSizeParams={helpUrl:"",init:function(){this.setHSV(184,1,.74),this.appendValueInput("SPRITE").setCheck(a.BlockValueType.NUMBER).appendTitle(g.setSpriteN({spriteIndex:""})),this.appendValueInput("VALUE").setCheck(a.BlockValueType.NUMBER).appendTitle(g.size()),this.setInputsInline(!0),this.setPreviousStatement(!0),this.setNextStatement(!0),this.setTooltip(g.setSpriteSizeTooltip())}},a.Blocks.studio_setSpriteSize.VALUES=[[g.setSpriteSizeRandom(),p],[g.setSpriteSizeVerySmall(),"Studio.SpriteSize.VERY_SMALL"],[g.setSpriteSizeSmall(),"Studio.SpriteSize.SMALL"],[g.setSpriteSizeNormal(),"Studio.SpriteSize.NORMAL"],[g.setSpriteSizeLarge(),"Studio.SpriteSize.LARGE"],[g.setSpriteSizeVeryLarge(),"Studio.SpriteSize.VERY_LARGE"]],D.studio_setSpriteSize=function(){return t({ctx:this,extraParams:this.getTitleValue("SPRITE")||"0",name:"setSpriteSize"})},D.studio_setSpriteSizeParams=function(){var a=r(this),b=Blockly.JavaScript.valueToCode(this,"VALUE",Blockly.JavaScript.ORDER_NONE)||"5";return"Studio.setSpriteSize('block_id_"+this.id+"', "+a+","+b+");\n"},a.Blocks.studio_setBackground={helpUrl:"",init:function(){this.setHSV(312,.32,.62),this.VALUES=[];var b;C?(this.VALUES=B.backgroundChoicesK1,b=new a.FieldImageDropdown(B.backgroundChoicesK1,B.dropdownThumbnailWidth,B.dropdownThumbnailHeight),this.appendDummyInput().appendTitle(g.setBackground()).appendTitle(b,"VALUE")):(this.VALUES=B.backgroundChoices,b=new a.FieldDropdown(B.backgroundChoices),this.appendDummyInput().appendTitle(b,"VALUE")),b.setValue('"'+B.defaultBackground+'"'),
this.setInputsInline(!0),this.setPreviousStatement(!0),this.setNextStatement(!0),this.setTooltip(g.setBackgroundTooltip())}},a.Blocks.studio_setBackgroundParam={helpUrl:"",init:function(){this.setHSV(312,.32,.62),this.VALUES=B.backgroundChoices,this.appendDummyInput().appendTitle(g.setBackground()),this.appendValueInput("VALUE"),this.setInputsInline(!0),this.setPreviousStatement(!0),this.setNextStatement(!0),this.setTooltip(g.setBackgroundTooltip())}},D.studio_setBackground=function(){return t({ctx:this,name:"setBackground"})},D.studio_setBackgroundParam=function(){var b=a.JavaScript.valueToCode(this,"VALUE",Blockly.JavaScript.ORDER_NONE);return t({value:b,ctx:this,name:"setBackground"})},a.Blocks.studio_setMap={helpUrl:"",init:function(){this.setHSV(312,.32,.62),this.VALUES=B.mapChoices;var b=new a.FieldDropdown(B.mapChoices);this.appendDummyInput().appendTitle(b,"VALUE"),b.setValue('"'+B.defaultWallMap+'"'),this.setInputsInline(!0),this.setPreviousStatement(!0),this.setNextStatement(!0),this.setTooltip(g.setMapTooltip())}},D.studio_setMap=function(){return t({ctx:this,name:"setMap"})};var G=function(b){var c={};return c.helpUrl="",c.init=function(){this.setHSV(184,1,.74),this.appendDummyInput().appendTitle(g.showTitleScreen()),b.params?(this.appendValueInput("TITLE").setCheck(a.BlockValueType.STRING).setAlign(Blockly.ALIGN_RIGHT).appendTitle(g.showTitleScreenTitle()),this.appendValueInput("TEXT").setCheck(a.BlockValueType.STRING).setAlign(Blockly.ALIGN_RIGHT).appendTitle(g.showTitleScreenText())):(this.appendDummyInput().appendTitle(g.showTitleScreenTitle()).appendTitle(new Blockly.FieldImage(Blockly.assetUrl("media/quote0.png"),12,12)).appendTitle(new Blockly.FieldTextInput(g.showTSDefTitle()),"TITLE").appendTitle(new Blockly.FieldImage(Blockly.assetUrl("media/quote1.png"),12,12)),this.appendDummyInput().appendTitle(g.showTitleScreenText()).appendTitle(new Blockly.FieldImage(Blockly.assetUrl("media/quote0.png"),12,12)).appendTitle(new Blockly.FieldTextInput(g.showTSDefText()),"TEXT").appendTitle(new Blockly.FieldImage(Blockly.assetUrl("media/quote1.png"),12,12))),this.setPreviousStatement(!0),this.setNextStatement(!0),this.setTooltip(g.showTitleScreenTooltip())},c};a.Blocks.studio_showTitleScreen=G({}),a.Blocks.studio_showTitleScreenParams=G({params:!0}),D.studio_showTitleScreen=function(){return"Studio.showTitleScreen('block_id_"+this.id+"', "+a.JavaScript.quote_(this.getTitleValue("TITLE"))+", "+a.JavaScript.quote_(this.getTitleValue("TEXT"))+");\n"},D.studio_showTitleScreenParams=function(){var a=Blockly.JavaScript.valueToCode(this,"TITLE",Blockly.JavaScript.ORDER_NONE)||"",b=Blockly.JavaScript.valueToCode(this,"TEXT",Blockly.JavaScript.ORDER_NONE)||"";return"Studio.showTitleScreen('block_id_"+this.id+"', "+a+", "+b+");\n"},C?(a.Blocks.studio_setSprite={helpUrl:"",init:function(){this.setHSV(312,.32,.62);var b=new a.FieldDropdown(this.VALUES);b.setValue(s),this.appendDummyInput().appendTitle(b,"VALUE"),u>1&&this.appendDummyInput().appendTitle(j(),"SPRITE"),this.setInputsInline(!0),this.setPreviousStatement(!0),this.setNextStatement(!0),this.setTooltip(g.setSpriteK1Tooltip())}},a.Blocks.studio_setSprite.VALUES=[[g.setSpriteHideK1(),q],[g.setSpriteShowK1(),s]]):(a.Blocks.studio_setSprite={helpUrl:"",init:function(){this.VALUES=B.spriteChoices;var b=new a.FieldDropdown(B.spriteChoices);b.setValue(B.spriteChoices[2][1]),this.setHSV(312,.32,.62),u>1?this.appendDummyInput().appendTitle(c(g.setSpriteN),"SPRITE"):this.appendDummyInput().appendTitle(g.setSprite()),this.appendDummyInput().appendTitle(b,"VALUE"),this.setInputsInline(!0),this.setPreviousStatement(!0),this.setNextStatement(!0),this.setTooltip(g.setSpriteTooltip())}},a.Blocks.studio_setSpriteParams={helpUrl:"",init:function(){this.VALUES=B.spriteChoices;var b=new a.FieldDropdown(B.spriteChoices);b.setValue(B.spriteChoices[2][1]),this.setHSV(312,.32,.62),this.appendValueInput("SPRITE").setCheck(a.BlockValueType.NUMBER).appendTitle(g.setSpriteN({spriteIndex:""})),this.appendDummyInput().appendTitle(b,"VALUE"),this.setInputsInline(!0),this.setPreviousStatement(!0),this.setNextStatement(!0),this.setTooltip(g.setSpriteTooltip())}},a.Blocks.studio_setSpriteParamValue={helpUrl:"",init:function(){this.setHSV(312,.32,.62),u>1?this.appendDummyInput().appendTitle(c(g.setSpriteN),"SPRITE"):this.appendDummyInput().appendTitle(g.setSprite()),this.appendValueInput("VALUE"),this.setInputsInline(!0),this.setPreviousStatement(!0),this.setNextStatement(!0),this.setTooltip(g.setSpriteTooltip())}}),D.studio_setSprite=function(){var a=this.getTitleValue("SPRITE")||"0";return t({ctx:this,extraParams:a,name:"setSprite"})},D.studio_setSpriteParams=function(){var a=r(this);return t({ctx:this,extraParams:a,name:"setSprite"})},D.studio_setSpriteParamValue=function(){var b=this.getTitleValue("SPRITE")||"0",c=a.JavaScript.valueToCode(this,"VALUE",Blockly.JavaScript.ORDER_NONE);return t({value:c,ctx:this,extraParams:b,name:"setSprite"})},a.Blocks.studio_setSpriteEmotion={helpUrl:"",init:function(){if(this.setHSV(184,1,.74),u>1?C?this.appendDummyInput().appendTitle(g.setSprite()).appendTitle(j(),"SPRITE"):this.appendDummyInput().appendTitle(c(g.setSpriteN),"SPRITE"):this.appendDummyInput().appendTitle(g.setSprite()),C){var b=new a.FieldImageDropdown(this.K1_VALUES,34,34);b.setValue(this.K1_VALUES[0][1]),this.appendDummyInput().appendTitle(g.emotion()).appendTitle(b,"VALUE")}else{var d=new a.FieldDropdown(this.VALUES);d.setValue(this.VALUES[1][1]),this.appendDummyInput().appendTitle(d,"VALUE")}this.setInputsInline(!0),this.setPreviousStatement(!0),this.setNextStatement(!0),this.setTooltip(g.setSpriteEmotionTooltip())}},a.Blocks.studio_setSpriteEmotionParams={helpUrl:"",init:function(){this.setHSV(184,1,.74),this.appendValueInput("SPRITE").setCheck(a.BlockValueType.NUMBER).appendTitle(g.setSpriteN({spriteIndex:""}));var b=new a.FieldDropdown(this.VALUES);b.setValue(this.VALUES[1][1]),this.appendDummyInput().appendTitle(b,"VALUE"),this.setInputsInline(!0),this.setPreviousStatement(!0),this.setNextStatement(!0),this.setTooltip(g.setSpriteEmotionTooltip())}},a.Blocks.studio_setSpriteEmotion.VALUES=a.Blocks.studio_setSpriteEmotionParams.VALUES=[[g.setSpriteEmotionRandom(),p],[g.setSpriteEmotionNormal(),o.NORMAL.toString()],[g.setSpriteEmotionHappy(),o.HAPPY.toString()],[g.setSpriteEmotionAngry(),o.ANGRY.toString()],[g.setSpriteEmotionSad(),o.SAD.toString()]],a.Blocks.studio_setSpriteEmotion.K1_VALUES=[[B.emotionNormal,o.NORMAL.toString()],[B.emotionHappy,o.HAPPY.toString()],[B.emotionAngry,o.ANGRY.toString()],[B.emotionSad,o.SAD.toString()],[B.randomPurpleIcon,p]],D.studio_setSpriteEmotion=function(){return t({ctx:this,extraParams:this.getTitleValue("SPRITE")||"0",name:"setSpriteEmotion"})},D.studio_setSpriteEmotionParams=function(){var a=r(this);return t({ctx:this,extraParams:a,name:"setSpriteEmotion"})};var H=function(b){var d={};return d.helpUrl="",d.init=function(){if(this.setHSV(184,1,.74),b.time?(this.appendValueInput("SPRITE").setCheck(a.BlockValueType.NUMBER).appendTitle(g.actor()),this.appendDummyInput().appendTitle(g.saySprite())):u>1?C?this.appendDummyInput().appendTitle(g.saySprite()).appendTitle(j(),"SPRITE"):this.appendDummyInput().appendTitle(c(g.saySpriteN),"SPRITE"):this.appendDummyInput().appendTitle(g.saySprite()),b.restrictedDialog){for(var d=[],e=59,f=0;e>f;f++){var h=d[f]=[],i=g["saySpriteChoices_"+f]();h[0]=h[1]=i}var k=new a.FieldDropdown(d);this.appendDummyInput().appendTitle(k,"VALUE")}else if(b.params)this.appendValueInput("TEXT");else{var l=this.appendDummyInput();C&&l.appendTitle(new Blockly.FieldImage(B.speechBubble)),l.appendTitle(new Blockly.FieldImage(Blockly.assetUrl("media/quote0.png"),12,12)).appendTitle(new Blockly.FieldTextInput(g.defaultSayText()),"TEXT").appendTitle(new Blockly.FieldImage(Blockly.assetUrl("media/quote1.png"),12,12))}b.time&&(this.appendValueInput("TIME").setCheck(a.BlockValueType.NUMBER).appendTitle(g["for"]()),this.appendDummyInput().appendTitle(g.waitSeconds())),this.setInputsInline(!0),this.setPreviousStatement(!0),this.setNextStatement(!0),this.setTooltip(g.saySpriteTooltip())},d};a.Blocks.studio_saySprite=H({}),a.Blocks.studio_saySpriteChoices=H({restrictedDialog:!0}),a.Blocks.studio_saySpriteParams=H({params:!0}),a.Blocks.studio_saySpriteParamsTime=H({params:!0,time:!0}),D.studio_saySprite=function(){return"Studio.saySprite('block_id_"+this.id+"', "+(this.getTitleValue("SPRITE")||"0")+", "+a.JavaScript.quote_(this.getTitleValue("TEXT"))+");\n"},D.studio_saySpriteChoices=function(){return"Studio.saySprite('block_id_"+this.id+"', "+(this.getTitleValue("SPRITE")||"0")+", '"+(this.getTitleValue("VALUE")||" ")+"');\n"},D.studio_saySpriteParams=function(){var a=Blockly.JavaScript.valueToCode(this,"TEXT",Blockly.JavaScript.ORDER_NONE)||"";return"Studio.saySprite('block_id_"+this.id+"', "+(this.getTitleValue("SPRITE")||"0")+", "+a+");\n"},D.studio_saySpriteParamsTime=function(){var a=r(this),b=Blockly.JavaScript.valueToCode(this,"TEXT",Blockly.JavaScript.ORDER_NONE)||"",c=Blockly.JavaScript.valueToCode(this,"TIME",Blockly.JavaScript.ORDER_NONE)||1;return"Studio.saySprite('block_id_"+this.id+"', "+a+", "+b+","+c+");\n"};var I=function(b){var c={};return c.helpUrl="",c.init=function(){if(this.setHSV(184,1,.74),b.params)this.appendDummyInput().appendTitle(g.waitFor()),this.appendValueInput("VALUE").setCheck(a.BlockValueType.NUMBER),this.appendDummyInput().appendTitle(g.waitSeconds());else{var c=new a.FieldDropdown(this.VALUES);c.setValue(this.VALUES[2][1]),this.appendDummyInput().appendTitle(c,"VALUE")}this.setInputsInline(!0),this.setPreviousStatement(!0),this.setNextStatement(!0),this.setTooltip(b.params?g.waitParamsTooltip():g.waitTooltip())},b.params||(c.VALUES=[[g.waitForClick(),'"click"'],[g.waitForRandom(),"random"],[g.waitForHalfSecond(),"500"],[g.waitFor1Second(),"1000"],[g.waitFor2Seconds(),"2000"],[g.waitFor5Seconds(),"5000"],[g.waitFor10Seconds(),"10000"]]),c};a.Blocks.studio_wait=I({}),a.Blocks.studio_waitParams=I({params:!0}),D.studio_wait=function(){return t({ctx:this,name:"wait"})},D.studio_waitParams=function(){var a=Blockly.JavaScript.valueToCode(this,"VALUE",Blockly.JavaScript.ORDER_NONE)||"0";return"Studio.wait('block_id_"+this.id+"', ("+a+" * 1000));\n"},a.Blocks.functional_start_setValue={init:function(){var b=g.startSetValue(),c=a.BlockValueType.NONE,d=[{name:"VALUE",type:a.BlockValueType.FUNCTION}];a.FunctionalBlockUtils.initTitledFunctionalBlock(this,b,c,d)}},D.functional_start_setValue=function(){if(!z)throw new Error("must register custom game logic");z.cacheBlock("VALUE",this.getInputTargetBlock("VALUE"))},a.Blocks.functional_start_setVars={init:function(){var b=g.startSetVars(),c=a.BlockValueType.NONE,d=[{name:"title",type:a.BlockValueType.STRING},{name:"subtitle",type:a.BlockValueType.STRING},{name:"background",type:a.BlockValueType.IMAGE},{name:"player",type:a.BlockValueType.IMAGE},{name:"target",type:a.BlockValueType.IMAGE},{name:"danger",type:a.BlockValueType.IMAGE}];a.FunctionalBlockUtils.initTitledFunctionalBlock(this,b,c,d)}},D.functional_start_setVars=function(){},a.Blocks.functional_start_setFuncs={init:function(){this.blockArgs=[{name:"title",type:a.BlockValueType.STRING},{name:"subtitle",type:a.BlockValueType.STRING},{name:"background",type:a.BlockValueType.IMAGE},{name:"target",type:a.BlockValueType.IMAGE},{name:"danger",type:a.BlockValueType.IMAGE},{name:"player",type:a.BlockValueType.IMAGE},{name:"update-target",type:a.BlockValueType.FUNCTION},{name:"update-danger",type:a.BlockValueType.FUNCTION},{name:"update-player",type:a.BlockValueType.FUNCTION},{name:"collide?",type:a.BlockValueType.FUNCTION},{name:"on-screen?",type:a.BlockValueType.FUNCTION}],this.setFunctional(!0,{headerHeight:30}),this.setHSV.apply(this,a.FunctionalTypeColors[a.BlockValueType.NONE]);var b={fixedSize:{height:35}};this.appendDummyInput().appendTitle(new Blockly.FieldLabel("game_funcs",b)).setAlign(Blockly.ALIGN_LEFT);var c=["title, subtitle, background",[this.blockArgs[0],this.blockArgs[1],this.blockArgs[2]],"target, danger, player",[this.blockArgs[3],this.blockArgs[4],this.blockArgs[5]],"update-target, update-danger, update-player",[this.blockArgs[6],this.blockArgs[7],this.blockArgs[8]],"collide?, onscreen?",[this.blockArgs[9],this.blockArgs[10]]];c.forEach(function(b){"string"==typeof b?this.appendDummyInput().appendTitle(new Blockly.FieldLabel(b)):b.forEach(function(b,c){var d=this.appendFunctionalInput(b.name);0!==c&&d.setInline(!0),d.setHSV.apply(d,a.FunctionalTypeColors[b.type]),d.setCheck(b.type),d.setAlign(Blockly.ALIGN_LEFT)},this)},this),this.setFunctionalOutput(!1)}},D.functional_start_setFuncs=function(){if(!z)throw new Error("must register custom game logic");this.blockArgs.forEach(function(a){var b=this.getInputTargetBlock(a.name);b&&z.cacheBlock(a.name,b)},this)},a.Blocks.functional_start_setSpeeds={init:function(){var b="start (player-speed, enemy-speed)",c=a.BlockValueType.NONE,d=[{name:"PLAYER_SPEED",type:"Number"},{name:"ENEMY_SPEED",type:"Number"}];a.FunctionalBlockUtils.initTitledFunctionalBlock(this,b,c,d)}},D.functional_start_setSpeeds=function(){var a=7,b=Blockly.JavaScript.statementToCode(this,"PLAYER_SPEED",!1)||a,c=Blockly.JavaScript.statementToCode(this,"ENEMY_SPEED",!1)||a,d="0",e="1",f="Studio.setSpriteSpeed('block_id_"+this.id+"',"+d+","+b+");\n";return f+="Studio.setSpriteSpeed('block_id_"+this.id+"',"+e+","+c+");\n"},a.Blocks.functional_start_setBackgroundAndSpeeds={init:function(){var b="start (background, player-speed, enemy-speed)",c=a.BlockValueType.NONE,d=[{name:"BACKGROUND",type:a.BlockValueType.STRING},{name:"PLAYER_SPEED",type:"Number"},{name:"ENEMY_SPEED",type:"Number"}];a.FunctionalBlockUtils.initTitledFunctionalBlock(this,b,c,d)}},D.functional_start_setBackgroundAndSpeeds=function(){var a=Blockly.JavaScript.statementToCode(this,"BACKGROUND",!1)||"cave",b=7,c=Blockly.JavaScript.statementToCode(this,"PLAYER_SPEED",!1)||b,d=Blockly.JavaScript.statementToCode(this,"ENEMY_SPEED",!1)||b,e="Studio.setBackground('block_id_"+this.id+"',"+a+");\n";return e+="Studio.setSpriteSpeed('block_id_"+this.id+"',0,"+c+");\n",e+="Studio.setSpriteSpeed('block_id_"+this.id+"',1,"+d+");\n"},h.install(a,D);var J=B.backgroundChoices.slice(1);a.FunctionalBlockUtils.installStringPicker(a,D,{blockName:"functional_background_string_picker",values:J}),a.Blocks.studio_vanishSprite={helpUrl:"",init:function(){this.setHSV(184,1,.74),this.appendValueInput("SPRITE").setCheck(a.BlockValueType.NUMBER).appendTitle(g.vanishActorN({spriteIndex:""})),this.setPreviousStatement(!0),this.setInputsInline(!0),this.setNextStatement(!0),this.setTooltip(g.vanishTooltip())}},D.studio_vanishSprite=function(){var a=r(this);return"Studio.vanish('block_id_"+this.id+"', "+a+");\n"},a.Blocks.functional_sprite_dropdown={helpUrl:"",init:function(){this.setHSV.apply(this,a.FunctionalTypeColors[a.BlockValueType.IMAGE]),this.VALUES=B.spriteChoices;var b=l.map(y,function(a){return[B[a].dropdownThumbnail,a]}),c=new a.FieldImageDropdown(b,B.dropdownThumbnailWidth,B.dropdownThumbnailHeight);this.appendDummyInput().appendTitle(c,"SPRITE_INDEX"),this.setFunctionalOutput(!0)}},D.functional_sprite_dropdown=function(){return a.JavaScript.quote_(this.getTitleValue("SPRITE_INDEX"))},a.Blocks.functional_background_dropdown={helpUrl:"",init:function(){this.setHSV.apply(this,a.FunctionalTypeColors[a.BlockValueType.IMAGE]),this.VALUES=B.backgroundChoicesK1;var b=new a.FieldImageDropdown(B.backgroundChoicesK1,B.dropdownThumbnailWidth,B.dropdownThumbnailHeight);this.appendDummyInput().appendTitle(b,"BACKGROUND"),this.setFunctionalOutput(!0)}},D.functional_background_dropdown=function(){return t({value:this.getTitleValue("BACKGROUND"),ctx:this,returnValue:!0})},a.Blocks.functional_keydown={helpUrl:"",init:function(){a.FunctionalBlockUtils.initTitledFunctionalBlock(this,"keydown?",a.BlockValueType.BOOLEAN,[{name:"ARG1",type:"Number"}])}},D.functional_keydown=function(){var a=Blockly.JavaScript.statementToCode(this,"ARG1",!1)||-1;return"Studio.isKeyDown("+a+");"}}},{"../StudioApp":"/home/ubuntu/staging/apps/build/js/StudioApp.js","../codegen":"/home/ubuntu/staging/apps/build/js/codegen.js","../locale":"/home/ubuntu/staging/apps/build/js/locale.js","../sharedFunctionalBlocks":"/home/ubuntu/staging/apps/build/js/sharedFunctionalBlocks.js","../utils":"/home/ubuntu/staging/apps/build/js/utils.js","./constants":"/home/ubuntu/staging/apps/build/js/studio/constants.js","./locale":"/home/ubuntu/staging/apps/build/js/studio/locale.js"}],"/home/ubuntu/staging/apps/build/js/studio/bigGameLogic.js":[function(a,b,c){var d=a("./customGameLogic"),e=a("./constants"),f=e.Direction,g=e.Position,h=(a("../codegen"),a("./api"),a("../utils")),i=function(a,b){b=b||{},d.apply(this,arguments),this.playerSpriteIndex=0,this.targetSpriteIndex=1,this.dangerSpriteIndex=2,this.finished=!1,this.staticPlayer=h.valueOr(b.staticPlayer,!1)};i.inherits(d),i.prototype.onTick=function(){if(1===this.studio_.tickCount)return this.onFirstTick_(),void(this.studio_.playerScore=100);if(!this.finished){var a=document.getElementById("titleScreenTitle");if("visible"!==a.getAttribute("visibility")){var b=this.studio_.sprite[this.playerSpriteIndex],c=this.studio_.sprite[this.targetSpriteIndex],d=this.studio_.sprite[this.dangerSpriteIndex];this.updateSpriteX_(this.targetSpriteIndex,this.update_target.bind(this)),this.updateSpriteX_(this.dangerSpriteIndex,this.update_danger.bind(this));for(var e in this.studio_.keyState)"keydown"===this.studio_.keyState[e]&&this.handleUpdatePlayer_(e);for(var f in this.studio_.btnState)this.studio_.btnState[f]&&("leftButton"===f?this.handleUpdatePlayer_(37):"upButton"===f?this.handleUpdatePlayer_(38):"rightButton"===f?this.handleUpdatePlayer_(39):"downButton"===f&&this.handleUpdatePlayer_(40));if(b.visible&&d.visible&&this.collide(b.x,b.y,d.x,d.y)&&(this.studio_.vanishActor({spriteIndex:this.playerSpriteIndex}),setTimeout(function(){this.studio_.setSprite({spriteIndex:this.playerSpriteIndex,value:"visible"})}.bind(this),850),this.studio_.playerScore-=20,this.resetSprite_(d)),b.visible&&c.visible&&this.collide(b.x,b.y,c.x,c.y)&&(this.studio_.playerScore+=10,this.resetSprite_(c)),this.studio_.playerScore<=0){var g=document.getElementById("score");g.setAttribute("visibility","hidden"),this.studio_.showTitleScreen({title:"Game Over",text:"Click Reset to Play Again"});for(var h=0;h<this.studio_.spriteCount;h++)this.studio_.setSprite({spriteIndex:h,value:"hidden"});this.finished=!0}else this.studio_.displayScore()}}},i.prototype.reset=function(){this.finished=!1},i.prototype.onFirstTick_=function(){var a=function(a,b,c){b.setBackground(null,this.getVar_("background")),b.setSpritePosition(null,this.playerSpriteIndex,g.MIDDLECENTER),b.setSprite(null,this.playerSpriteIndex,this.getVar_("player")),b.setSpritePosition(null,this.targetSpriteIndex,g.TOPLEFT),b.setSprite(null,this.targetSpriteIndex,this.getVar_("target")),b.setSpritePosition(null,this.dangerSpriteIndex,g.BOTTOMRIGHT),b.setSprite(null,this.dangerSpriteIndex,this.getVar_("danger")),b.showTitleScreen(null,this.getVar_("title"),this.getVar_("subtitle"))}.bind(this);this.studio_.callApiCode("BigGame.onFirstTick",a)},i.prototype.updateSpriteX_=function(a,b){var c=this.studio_.sprite[a],d=c.x+c.width/2,e=b(d);c.x=e-c.width/2,this.onscreen(e)?c.visible||this.studio_.setSprite({spriteIndex:this.studio_.sprite.indexOf(c),value:"visible"}):c.visible&&this.resetSprite_(c)},i.prototype.handleUpdatePlayer_=function(a){var b=this.studio_.sprite[this.playerSpriteIndex];if(b.visible){var c=b.y+b.height/2,d=this.studio_.MAZE_HEIGHT-c,f=this.update_player(a,d);b.y=this.studio_.MAZE_HEIGHT-f-b.height/2,this.staticPlayer&&(b.dir=e.Direction.NONE)}},i.prototype.resetSprite_=function(a){a.dir===f.EAST?a.x=0-a.width:a.x=this.studio_.MAZE_WIDTH,a.y=Math.floor(Math.random()*(this.studio_.MAZE_HEIGHT-a.height)),this.studio_.setSprite({spriteIndex:this.studio_.sprite.indexOf(a),value:"hidden"})},i.prototype.update_target=function(a){return this.getFunc_("update-target")(a)},i.prototype.update_danger=function(a){return this.getFunc_("update-danger")(a)},i.prototype.update_player=function(a,b){return this.getFunc_("update-player")(a,b)},i.prototype.onscreen=function(a){return this.getFunc_("on-screen?")(a)},i.prototype.collide=function(a,b,c,d){return this.getFunc_("collide?")(a,b,c,d)},b.exports=i},{"../codegen":"/home/ubuntu/staging/apps/build/js/codegen.js","../utils":"/home/ubuntu/staging/apps/build/js/utils.js","./api":"/home/ubuntu/staging/apps/build/js/studio/api.js","./constants":"/home/ubuntu/staging/apps/build/js/studio/constants.js","./customGameLogic":"/home/ubuntu/staging/apps/build/js/studio/customGameLogic.js"}],"/home/ubuntu/staging/apps/build/js/studio/customGameLogic.js":[function(a,b,c){var d=a("./constants"),e=(d.Direction,d.Position,a("../codegen")),f=a("./api"),g=function(a){this.studio_=a,this.cached_={}};g.prototype.onTick=function(){throw new Error("should be overridden by child")},g.prototype.reset=function(){},g.prototype.cacheBlock=function(a,b){this.cached_[a]=b},g.prototype.resolveCachedBlock_=function(a){var b="",c=this.cached_[a];if(!c)return b;var d="return "+Blockly.JavaScript.blockToCode(c);return b=e.evalWith(d,{Studio:f,Globals:Studio.Globals})},g.prototype.getVar_=function(a){return this.resolveCachedBlock_(a)},g.prototype.getFunc_=function(a){return this.resolveCachedBlock_(a)||function(){}},b.exports=g},{"../codegen":"/home/ubuntu/staging/apps/build/js/codegen.js","./api":"/home/ubuntu/staging/apps/build/js/studio/api.js","./constants":"/home/ubuntu/staging/apps/build/js/studio/constants.js"}],"/home/ubuntu/staging/apps/build/js/studio/apiJavascript.js":[function(a,b,c){var d=a("./constants");c.endGame=function(a){Studio.queueCmd(null,"endGame",{value:a})},c.setBackground=function(a){Studio.queueCmd(null,"setBackground",{value:a})},c.setMap=function(a){Studio.queueCmd(null,"setMap",{value:a})},c.setSprite=function(a,b){Studio.queueCmd(null,"setSprite",{spriteIndex:a,value:b})},c.setSpriteEmotion=function(a,b){Studio.queueCmd(null,"setSpriteEmotion",{spriteIndex:a,value:b})},c.setSpriteSpeed=function(a,b){Studio.queueCmd(null,"setSpriteSpeed",{spriteIndex:a,value:b})},c.setBot=function(a){Studio.queueCmd(null,"setSprite",{spriteIndex:0,value:a})},c.setBotSpeed=function(a){Studio.queueCmd(null,"setBotSpeed",{spriteIndex:0,value:a})},c.setSpritePosition=function(a,b){Studio.queueCmd(null,"setSpritePosition",{spriteIndex:a,value:b})},c.playSound=function(a){Studio.queueCmd(null,"playSound",{soundName:a})},c.throwProjectile=function(a,b,c){Studio.queueCmd(null,"throwProjectile",{spriteIndex:a,dir:b,className:c})},c.move=function(a,b){Studio.queueCmd(null,"move",{spriteIndex:a,dir:b})},c.moveRight=function(){Studio.queueCmd(null,"moveRight")},c.moveLeft=function(){Studio.queueCmd(null,"moveLeft")},c.moveUp=function(){Studio.queueCmd(null,"moveUp")},c.moveDown=function(){Studio.queueCmd(null,"moveDown")},c.goRight=function(){Studio.queueCmd(null,"moveRight")},c.goLeft=function(){Studio.queueCmd(null,"moveLeft")},c.goUp=function(){Studio.queueCmd(null,"moveUp")},c.goDown=function(){Studio.queueCmd(null,"moveDown")},c.addPoints=function(a){Studio.queueCmd(null,"changeScore",{value:a})},c.removePoints=function(a){Studio.queueCmd(null,"reduceScore",{value:a})},c.changeScore=function(a){Studio.queueCmd(null,"changeScore",{value:a})},c.addCharacter=function(a){Studio.queueCmd(null,"addItem",{className:a})},c.setToChase=function(a){Studio.queueCmd(null,"setItemActivity",{className:a,type:"chase"})},c.setToFlee=function(a){Studio.queueCmd(null,"setItemActivity",{className:a,type:"flee"})},c.setToRoam=function(a){Studio.queueCmd(null,"setItemActivity",{className:a,type:"roam"})},c.setToStop=function(a){Studio.queueCmd(null,"setItemActivity",{className:a,type:"none"})},c.moveFast=function(a,b){Studio.queueCmd(null,"setItemSpeed",{className:a,speed:d.SpriteSpeed.FAST})},c.moveNormal=function(a,b){Studio.queueCmd(null,"setItemSpeed",{className:a,speed:d.SpriteSpeed.SLOW})},c.moveSlow=function(a,b){Studio.queueCmd(null,"setItemSpeed",{className:a,speed:d.SpriteSpeed.VERY_SLOW})},c.showDebugInfo=function(a){Studio.queueCmd(null,"showDebugInfo",{value:a})},c.vanish=function(a){Studio.queueCmd(null,"vanish",{spriteIndex:a})},c.onEvent=function(a,b){Studio.queueCmd(null,"onEvent",{eventName:a,func:b})}},{"./constants":"/home/ubuntu/staging/apps/build/js/studio/constants.js"}],"/home/ubuntu/staging/apps/build/js/studio/api.js":[function(a,b,c){var d=a("./constants");c.SpriteSpeed=d.SpriteSpeed,c.SpriteSize=d.SpriteSize;var e=3;c.random=function(a){var b=Math.floor(Math.random()*a.length);return a[b]},c.setBackground=function(a,b){Studio.queueCmd(a,"setBackground",{value:b})},c.setMap=function(a,b){Studio.queueCmd(a,"setMap",{value:b})},c.setSprite=function(a,b,c){Studio.queueCmd(a,"setSprite",{spriteIndex:b,value:c})},c.saySprite=function(a,b,c,d){void 0===d&&(d=e),Studio.queueCmd(a,"saySprite",{spriteIndex:b,text:c,seconds:d})},c.showTitleScreen=function(a,b,c){Studio.queueCmd(a,"showTitleScreen",{title:b,text:c})},c.setSpriteEmotion=function(a,b,c){Studio.queueCmd(a,"setSpriteEmotion",{spriteIndex:b,value:c})},c.setSpriteSpeed=function(a,b,c){Studio.queueCmd(a,"setSpriteSpeed",{spriteIndex:b,value:c})},c.setSpriteSize=function(a,b,c){Studio.queueCmd(a,"setSpriteSize",{spriteIndex:b,value:c})},c.setSpritePosition=function(a,b,c){Studio.queueCmd(a,"setSpritePosition",{spriteIndex:b,value:Number(c)})},c.setSpriteXY=function(a,b,c,d){Studio.queueCmd(a,"setSpriteXY",{spriteIndex:b,x:Number(c),y:Number(d)})},c.playSound=function(a,b){Studio.queueCmd(a,"playSound",{soundName:b})},c.stop=function(a,b){Studio.queueCmd(a,"stop",{spriteIndex:b})},c.throwProjectile=function(a,b,c,d){Studio.queueCmd(a,"throwProjectile",{spriteIndex:b,dir:Number(c),className:String(d)})},c.makeProjectile=function(a,b,c){Studio.queueCmd(a,"makeProjectile",{className:b,action:c})},c.move=function(a,b,c){Studio.queueCmd(a,"move",{spriteIndex:b,dir:Number(c)})},c.moveDistance=function(a,b,c,d){Studio.queueCmd(a,"moveDistance",{spriteIndex:b,dir:c,distance:d})},c.changeScore=function(a,b){Studio.queueCmd(a,"changeScore",{value:b})},c.addCharacter=function(a,b){Studio.queueCmd(a,"addItem",{className:b})},c.setItemActivity=function(a,b,c){Studio.queueCmd(a,"setItemActivity",{className:b,type:c})},c.setItemSpeed=function(a,b,c){Studio.queueCmd(a,"setItemSpeed",{className:b,speed:c})},c.moveFast=function(a,b){Studio.queueCmd(a,"setItemSpeed",{className:b,speed:d.SpriteSpeed.FAST})},c.moveNormal=function(a,b){Studio.queueCmd(a,"setItemSpeed",{className:b,speed:d.SpriteSpeed.SLOW})},c.moveSlow=function(a,b){Studio.queueCmd(a,"setItemSpeed",{className:b,speed:d.SpriteSpeed.VERY_SLOW})},c.showDebugInfo=function(a){Studio.queueCmd(null,"showDebugInfo",{value:a})},c.setScoreText=function(a,b){Studio.queueCmd(a,"setScoreText",{text:b})},c.showCoordinates=function(a){Studio.queueCmd(a,"showCoordinates",{})},c.wait=function(a,b){Studio.queueCmd(a,"wait",{value:b})},c.vanish=function(a,b){Studio.queueCmd(a,"vanish",{spriteIndex:b})},c.onEvent=function(a,b,c){Studio.queueCmd(a,"onEvent",{eventName:String(b),func:c})},c.isKeyDown=function(a){return"keydown"===Studio.keyState[a]}},{"./constants":"/home/ubuntu/staging/apps/build/js/studio/constants.js"}],"/home/ubuntu/staging/apps/build/js/studio/Item.js":[function(a,b,c){var d=a("./collidable"),e=a("./constants"),f=(a("./locale"),a("./spriteActions")),g=e.Direction,h=e.NextTurn,i=a("../utils"),j=i.getLodash(),k=a("./StudioAnimation"),l=a("./StudioSpriteSheet"),m=function(a){d.apply(this,arguments),this.height=a.height||50,this.width=a.width||50,this.renderOffset=a.renderOffset||{x:0,y:0},this.speed=a.speed||e.DEFAULT_ITEM_SPEED,this.displayDir=g.SOUTH,this.startFadeTime=null,this.fadeTime=e.ITEM_FADE_TIME,this.animation_=new k($.extend({},a,{spriteSheet:new l(a)}))};m.inherits(d),b.exports=m,m.prototype.getElement=function(){return this.animation_.getElement()},m.prototype.getDirectionFrame=function(){return this.dir!==this.displayDir&&void 0!==this.displayDir&&Studio.tickCount&&0===Studio.tickCount%2&&(this.displayDir=h[this.displayDir][this.dir]),e.frameDirTableWalkingWithIdle[this.displayDir]},m.prototype.createElement=function(a){this.animation_.createElement(a)},m.prototype.update=function(){void 0===this.gridX&&(this.gridX=Math.floor(this.x/Studio.SQUARE_SIZE),this.gridY=Math.floor(this.y/Studio.SQUARE_SIZE));var a=!1;if(Studio.drawDebugRect("itemCenter",this.x,this.y,3,3),"watchActor"!==this.activity){void 0!==this.destGridX&&Studio.drawDebugRect("roamGridDest",this.destGridX*Studio.SQUARE_SIZE+Studio.HALF_SQUARE,this.destGridY*Studio.SQUARE_SIZE+Studio.HALF_SQUARE,Studio.SQUARE_SIZE,Studio.SQUARE_SIZE);var b=i.valueOr(this.speed,0);if(void 0!==this.destGridX&&Math.abs(this.x-(this.destGridX*Studio.SQUARE_SIZE+Studio.HALF_SQUARE))<=b&&Math.abs(this.y-(this.destGridY*Studio.SQUARE_SIZE+Studio.HALF_SQUARE))<=b&&(this.gridX=this.destGridX,this.gridY=this.destGridY,a=!0),void 0===this.destGridX||a){if("none"===this.activity)return this.dir=g.NONE,this.destGridX=void 0,void(this.destGridY=void 0);for(var c=Studio.sprite[0],d=c.x+c.width/2,e=c.y+c.height/2,f=[],h=60,k=[{row:-1,col:0},{row:1,col:0},{row:0,col:-1},{row:0,col:1}],l=0;l<k.length;l++){var m=this.gridX+k[l].col,n=this.gridY+k[l].row;p={gridX:m,gridY:n},p.score=0,"roam"===this.activity?p.score++:"chase"===this.activity?(n==this.gridY-1&&e<this.y-h?p.score+=2:n==this.gridY+1&&e>this.y+h?p.score+=2:p.score+=1,m==this.gridX-1&&d<this.x-h?p.score++:m==this.gridX+1&&d>this.x+h&&p.score++):"flee"===this.activity&&(p.score=1,n==this.gridY-1&&e>this.y-h?p.score++:n==this.gridY+1&&e<this.y+h&&p.score++,m==this.gridX-1&&d>this.x-h?p.score++:m==this.gridX+1&&d<this.x+h&&p.score++),p.score>0&&Studio.drawDebugRect("roamGridPossibleDest",m*Studio.SQUARE_SIZE+Studio.HALF_SQUARE,n*Studio.SQUARE_SIZE+Studio.HALF_SQUARE,Studio.SQUARE_SIZE,Studio.SQUARE_SIZE),f.push(p)}for(var o=f.length-1;o>=0;o--){var p=f[o],q=p.gridX<0||p.gridX>=Studio.COLS||p.gridY<0||p.gridY>=Studio.ROWS,r=!q&&Studio.getWallValue(p.gridY,p.gridX);(q||r||0===p.score)&&f.splice(o,1)}f.length>0?(f=j.shuffle(f),f.sort(function(a,b){return b.score-a.score}),this.destGridX=f[0].gridX,this.destGridY=f[0].gridY,this.destGridX>this.gridX&&this.destGridY>this.gridY?this.dir=g.SOUTHEAST:this.destGridX>this.gridX&&this.destGridY<this.gridY?this.dir=g.NORTHEAST:this.destGridX<this.gridX&&this.destGridY>this.gridY?this.dir=g.SOUTHWEST:this.destGridX<this.gridX&&this.destGridY<this.gridY?this.dir=g.NORTHWEST:this.destGridX>this.gridX?this.dir=g.EAST:this.destGridX<this.gridX?this.dir=g.WEST:this.destGridY>this.gridY?this.dir=g.SOUTH:this.destGridY<this.gridY?this.dir=g.NORTH:this.dir=g.NONE):this.dir=g.NONE}}},m.prototype.turnToFaceActor=function(a){var b=Studio.sprite[a];if(b){var c=b.displayX+Studio.HALF_SQUARE,d=b.displayY+Studio.HALF_SQUARE,f=c-this.x,g=d-this.y,h=25;f*f+g*g>h&&(Studio.drawDebugLine("watchActor",this.x,this.y,c,d,"#ffff00"),this.dir=e.getClosestDirection(f,g))}},m.prototype.beginRemoveElement=function(){this.startFadeTime=(new Date).getTime()},m.prototype.removeElement=function(){this.animation_.removeElement(),Studio.trackedBehavior.removedItemCount++},m.prototype.isFading=function(){return!!this.startFadeTime},m.prototype.hasCompletedFade=function(){var a=(new Date).getTime();return this.startFadeTime&&a>this.startFadeTime+this.fadeTime},m.prototype.display=function(){var a=(new Date).getTime(),b=1;this.startFadeTime&&(b=1-(a-this.startFadeTime)/this.fadeTime,b=Math.max(b,0),this.animation_.setOpacity(b)),"watchActor"===this.activity&&this.turnToFaceActor(Studio.protagonistSpriteIndex||0),this.animation_.setCurrentAnimation(this.getDirectionFrame()),this.animation_.redrawCenteredAt({x:this.x+this.renderOffset.x,y:this.y+this.renderOffset.y})},m.prototype.getNextPosition=function(){var a=g.getUnitVector(this.dir),b=this.speed;return("none"===this.activity||"watchActor"===this.activity)&&(b=0),
{x:this.x+b*a.x,y:this.y+b*a.y}},m.prototype.moveToNextPosition=function(){var a=this.getNextPosition();this.x=a.x,this.y=a.y},m.prototype.startCollision=function(a){var b=m.superPrototype.startCollision.call(this,a);if(b&&this.isHazard&&a===(Studio.protagonistSpriteIndex||0)){Studio.trackedBehavior.touchedHazardCount++;var c=Studio.sprite[a];c&&(c.addAction(new f.FadeActor(e.TOUCH_HAZARD_FADE_TIME)),c.addAction(new f.ShakeActor(e.TOUCH_HAZARD_FADE_TIME)))}return b},m.prototype.setOpacity=function(a){this.animation_.setOpacity(a)}},{"../utils":"/home/ubuntu/staging/apps/build/js/utils.js","./StudioAnimation":"/home/ubuntu/staging/apps/build/js/studio/StudioAnimation.js","./StudioSpriteSheet":"/home/ubuntu/staging/apps/build/js/studio/StudioSpriteSheet.js","./collidable":"/home/ubuntu/staging/apps/build/js/studio/collidable.js","./constants":"/home/ubuntu/staging/apps/build/js/studio/constants.js","./locale":"/home/ubuntu/staging/apps/build/js/studio/locale.js","./spriteActions":"/home/ubuntu/staging/apps/build/js/studio/spriteActions.js"}],"/home/ubuntu/staging/apps/build/js/studio/spriteActions.js":[function(a,b,c){"use strict";function d(a,b){var c=g.NONE;return 0>a?c|=g.WEST:a>0&&(c|=g.EAST),0>b?c|=g.NORTH:b>0&&(c|=g.SOUTH),c}var e=a("../utils"),f=a("./constants"),g=f.Direction;c.GridMove=function(a,b,c){this.towardDeltaX_=a,this.towardDeltaY_=b,this.totalSteps_=c,this.elapsedSteps_=0,this.percentBeforeReverse_=.3},c.GridMove.prototype.update=function(a){0===this.elapsedSteps_&&(this.startX_=a.x,this.startY_=a.y,a.x+=this.towardDeltaX_,a.y+=this.towardDeltaY_);var b=(this.elapsedSteps_+1)/this.totalSteps_;a.displayX=this.startX_+this.towardDeltaX_*b,a.displayY=this.startY_+this.towardDeltaY_*b,a.dir=d(this.towardDeltaX_,this.towardDeltaY_),this.elapsedSteps_++},c.GridMove.prototype.isDone=function(){return this.elapsedSteps_>=this.totalSteps_},c.GridMoveAndCancel=function(a,b,c){this.towardDeltaX_=a,this.towardDeltaY_=b,this.totalSteps_=c,this.elapsedSteps_=0,this.percentBeforeReverse_=.3},c.GridMoveAndCancel.prototype.update=function(a){var b=(this.elapsedSteps_+1)/this.totalSteps_,c=2*this.percentBeforeReverse_*(.5>b?b:1-b);a.displayX=a.x+this.towardDeltaX_*c,a.displayY=a.y+this.towardDeltaY_*c,a.dir=d(this.towardDeltaX_,this.towardDeltaY_),this.elapsedSteps_++},c.GridMoveAndCancel.prototype.isDone=function(){return this.elapsedSteps_>=this.totalSteps_},c.FadeActor=function(a){this.startFadeTime_=null,this.fadeDurationMs_=e.valueOr(a,f.DEFAULT_ACTOR_FADE_TIME)},c.FadeActor.prototype.update=function(a){this.startFadeTime_||(this.startFadeTime_=(new Date).getTime());var b=(new Date).getTime(),c=1-(b-this.startFadeTime_)/this.fadeDurationMs_;c=Math.max(c,0),a.setOpacity(c)},c.FadeActor.prototype.isDone=function(){var a=(new Date).getTime();return this.startFadeTime_&&a>this.startFadeTime_+this.fadeDurationMs_},c.ShakeActor=function(a){this.startShakeTime_=null,this.shakeDurationMs_=e.valueOr(a,f.SHAKE_DEFAULT_DURATION),this.cycleCount_=f.SHAKE_DEFAULT_CYCLES,this.amplitude_=f.SHAKE_DEFAULT_DISTANCE,this.angularFrequency_=2*Math.PI*(this.cycleCount_/this.shakeDurationMs_)},c.ShakeActor.prototype.update=function(a){this.startShakeTime_||(this.startShakeTime_=(new Date).getTime());var b=(new Date).getTime()-this.startShakeTime_,c=this.amplitude_*Math.sin(this.angularFrequency_*b);a.displayX=a.x+c},c.ShakeActor.prototype.isDone=function(){var a=(new Date).getTime();return this.startShakeTime_&&a>this.startShakeTime_+this.shakeDurationMs_}},{"../utils":"/home/ubuntu/staging/apps/build/js/utils.js","./constants":"/home/ubuntu/staging/apps/build/js/studio/constants.js"}],"/home/ubuntu/staging/apps/build/js/studio/locale.js":[function(a,b,c){b.exports=window.blockly.studio_locale},{}],"/home/ubuntu/staging/apps/build/js/studio/collidable.js":[function(a,b,c){"use strict";var d=a("../StudioApp").singleton,e=a("./constants").Direction,f=a("./constants"),g=(f.SquareType,function(a){this.gridX=void 0,this.gridY=void 0,this.activity="none";for(var b in a)this[b]=a[b];this.visible=this.visible||!0,this.flags=0,this.collidingWith_={},this.frames=this.frames||1,this.actions_=[]});b.exports=g,g.prototype.clearCollisions=function(){this.collidingWith_={}},g.prototype.startCollision=function(a){return this.isCollidingWith(a)?!1:(this.collidingWith_[a]=!0,!0)},g.prototype.endCollision=function(a){this.collidingWith_[a]=!1},g.prototype.isCollidingWith=function(a){return this.collidingWith_[a]===!0},g.prototype.bounce=function(){switch(this.dir){case e.NORTH:this.dir=e.SOUTH;break;case e.WEST:this.dir=e.EAST;break;case e.SOUTH:this.dir=e.NORTH;break;case e.EAST:this.dir=e.WEST;break;case e.NORTHEAST:this.dir=e.SOUTHWEST;break;case e.SOUTHEAST:this.dir=e.NORTHWEST;break;case e.SOUTHWEST:this.dir=e.NORTHEAST;break;case e.NORTHWEST:this.dir=e.SOUTHEAST}},g.prototype.setActivity=function(a){this.activity=a},g.prototype.outOfBounds=function(){return this.x<-(this.width/2)||this.x>d.MAZE_WIDTH+this.width/2||this.y<-(this.height/2)||this.y>d.MAZE_HEIGHT+this.height/2},g.prototype.addAction=function(a){this.actions_.push(a)},g.prototype.hasActions=function(){return this.actions_.length>0},g.prototype.updateActions=function(){this.actions_.forEach(function(a){a.update(this)},this);for(var a=this.actions_.length-1;a>=0;a--)this.actions_[a].isDone()&&this.actions_.splice(a,1)},g.prototype.setOpacity=function(a){var b=Studio.sprite.indexOf(this);if(!(0>b)){var c=document.getElementById("sprite"+b),d=document.getElementById("spriteWalk"+b);c&&c.setAttribute("opacity",a),d&&d.setAttribute("opacity",a)}}},{"../StudioApp":"/home/ubuntu/staging/apps/build/js/StudioApp.js","./constants":"/home/ubuntu/staging/apps/build/js/studio/constants.js"}],"/home/ubuntu/staging/apps/build/js/studio/StudioSpriteSheet.js":[function(a,b,c){"use strict";var d=a("../utils"),e=b.exports=function(a){this.assetPath=a.image,this.frameWidth=d.valueOr(a.width,50),this.frameHeight=d.valueOr(a.height,50),this.totalAnimations=d.valueOr(a.totalAnimations,9),this.framesPerAnimation=d.valueOr(a.frames,1),this.horizontalAnimation=d.valueOr(a.horizontalAnimation,!1)};e.prototype.assetWidth=function(){return this.frameWidth*(this.horizontalAnimation?this.framesPerAnimation:this.totalAnimations)},e.prototype.assetHeight=function(){return this.frameHeight*(this.horizontalAnimation?this.totalAnimations:this.framesPerAnimation)},e.prototype.getFrame=function(a,b){var c=this.frameWidth*(this.horizontalAnimation?b:a),d=this.frameHeight*(this.horizontalAnimation?a:b);return{x:c,y:d,width:this.frameWidth,height:this.frameHeight,top:d,left:c,right:c+this.frameWidth,bottom:d+this.frameHeight}}},{"../utils":"/home/ubuntu/staging/apps/build/js/utils.js"}],"/home/ubuntu/staging/apps/build/js/studio/StudioAnimation.js":[function(a,b,c){"use strict";var d=a("./constants"),e=a("../utils"),f="http://www.w3.org/2000/svg",g=0,h=b.exports=function(a){this.spriteSheet_=a.spriteSheet,this.renderScale_=e.valueOr(a.renderScale,1),this.opacity_=e.valueOr(a.opacity,1),this.currentAnimation_=0,this.currentFrame_=0,this.loop_=e.valueOr(a.loop,!1),this.element_=null,this.clipPath_=null,this.setAnimationRate(e.valueOr(a.animationRate,d.DEFAULT_ANIMATION_RATE))};h.__resetIds=function(){g=0},h.prototype.getElement=function(){return this.element_},h.prototype.createElement=function(a){var b=g++;this.clipPath_=document.createElementNS(f,"clipPath");var c="studioanimation_clippath_"+b;this.clipPath_.setAttribute("id",c);var d=document.createElementNS(f,"rect");d.setAttribute("width",this.spriteSheet_.frameWidth*this.renderScale_),d.setAttribute("height",this.spriteSheet_.frameHeight*this.renderScale_),this.clipPath_.appendChild(d),a.appendChild(this.clipPath_);var e="studioanimation_"+b;this.element_=document.createElementNS(f,"image"),this.element_.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",this.spriteSheet_.assetPath),this.element_.setAttribute("id",e),this.element_.setAttribute("height",this.spriteSheet_.assetHeight()*this.renderScale_),this.element_.setAttribute("width",this.spriteSheet_.assetWidth()*this.renderScale_),a.appendChild(this.element_),this.element_.setAttribute("clip-path","url(#"+c+")")},h.prototype.removeElement=function(){this.element_&&(this.element_.parentNode.removeChild(this.element_),this.element_=null),this.clipPath_&&(this.clipPath_.parentNode.removeChild(this.clipPath_),this.clipPath_=null),this.animator_&&(window.clearInterval(this.animator_),this.animator_=null)},h.prototype.redrawCenteredAt=function(a){var b=this.spriteSheet_.getFrame(this.currentAnimation_,this.currentFrame_),c=this.renderScale_,d={x:a.x-b.width/2*c,y:a.y-b.height/2*(2*c-1)};this.element_.setAttribute("x",d.x-b.left*c),this.element_.setAttribute("y",d.y-b.top*c),this.element_.setAttribute("opacity",this.opacity_);var e=this.clipPath_.childNodes[0];e.setAttribute("x",d.x),e.setAttribute("y",d.y)},h.prototype.setCurrentAnimation=function(a){this.currentAnimation_=a},h.prototype.setAnimationRate=function(a){this.animator_&&window.clearInterval(this.animator_),this.animator_=window.setInterval(function(){(this.loop_||this.currentFrame_+1<this.spriteSheet_.framesPerAnimation)&&(this.currentFrame_=(this.currentFrame_+1)%this.spriteSheet_.framesPerAnimation)}.bind(this),Math.round(1e3/a))},h.prototype.setOpacity=function(a){this.opacity_=a}},{"../utils":"/home/ubuntu/staging/apps/build/js/utils.js","./constants":"/home/ubuntu/staging/apps/build/js/studio/constants.js"}],"/home/ubuntu/staging/apps/build/js/studio/constants.js":[function(a,b,c){"use strict";c.SpriteSpeed={VERY_SLOW:2,SLOW:3,LITTLE_SLOW:4,NORMAL:5,LITTLE_FAST:6,FAST:8,VERY_FAST:12},c.SpriteSize={VERY_SMALL:.5,SMALL:.75,NORMAL:1,LARGE:1.5,VERY_LARGE:2},c.Direction={NONE:0,NORTH:1,EAST:2,SOUTH:4,WEST:8,NORTHEAST:3,SOUTHEAST:6,SOUTHWEST:12,NORTHWEST:9};var d=c.Direction;c.ClockwiseDirectionsFromNorth=[d.NORTH,d.NORTHEAST,d.EAST,d.SOUTHEAST,d.SOUTH,d.SOUTHWEST,d.WEST,d.NORTHWEST],c.getClosestDirection=function(a,b){var d=Math.atan2(a,-b),e=Math.PI/4,f=(Math.round(d/e)+8)%8;return c.ClockwiseDirectionsFromNorth[f]};var e={};e[d.SOUTHEAST]=0,e[d.EAST]=1,e[d.NORTHEAST]=2,e[d.NORTH]=3,e[d.NORTHWEST]=4,e[d.WEST]=5,e[d.SOUTHWEST]=6,c.frameDirTable=e;var f={};f[d.NONE]=0,f[d.SOUTH]=0,f[d.SOUTHEAST]=1,f[d.EAST]=2,f[d.NORTHEAST]=3,f[d.NORTH]=4,f[d.NORTHWEST]=5,f[d.WEST]=6,f[d.SOUTHWEST]=7,c.frameDirTableWalking=f;var g={};g[d.NONE]=8,g[d.SOUTH]=0,g[d.SOUTHEAST]=7,g[d.EAST]=6,g[d.NORTHEAST]=5,g[d.NORTH]=4,g[d.NORTHWEST]=3,g[d.WEST]=2,g[d.SOUTHWEST]=1,c.frameDirTableWalkingWithIdle=g;var h={};h[d.NONE]={x:0,y:0},h[d.NORTH]={x:0,y:-1},h[d.EAST]={x:1,y:0},h[d.SOUTH]={x:0,y:1},h[d.WEST]={x:-1,y:0},h[d.NORTHEAST]={x:1,y:-1},h[d.SOUTHEAST]={x:1,y:1},h[d.SOUTHWEST]={x:-1,y:1},h[d.NORTHWEST]={x:-1,y:-1},c.Direction.getUnitVector=function(a){return h[a]},c.Position={OUTTOPOUTLEFT:1,OUTTOPLEFT:2,OUTTOPCENTER:3,OUTTOPRIGHT:4,OUTTOPOUTRIGHT:5,TOPOUTLEFT:6,TOPLEFT:7,TOPCENTER:8,TOPRIGHT:9,TOPOUTRIGHT:10,MIDDLEOUTLEFT:11,MIDDLELEFT:12,MIDDLECENTER:13,MIDDLERIGHT:14,MIDDLEOUTRIGHT:15,BOTTOMOUTLEFT:16,BOTTOMLEFT:17,BOTTOMCENTER:18,BOTTOMRIGHT:19,BOTTOMOUTRIGHT:20,OUTBOTTOMOUTLEFT:21,OUTBOTTOMLEFT:22,OUTBOTTOMCENTER:23,OUTBOTTOMRIGHT:24,OUTBOTTOMOUTRIGHT:25},c.NextTurn={},c.NextTurn[d.NORTH]={},c.NextTurn[d.NORTH][d.NORTH]=d.NORTH,c.NextTurn[d.NORTH][d.EAST]=d.NORTHEAST,c.NextTurn[d.NORTH][d.SOUTH]=d.NORTHEAST,c.NextTurn[d.NORTH][d.NONE]=d.NORTHEAST,c.NextTurn[d.NORTH][d.WEST]=d.NORTHWEST,c.NextTurn[d.NORTH][d.NORTHEAST]=d.NORTHEAST,c.NextTurn[d.NORTH][d.SOUTHEAST]=d.NORTHEAST,c.NextTurn[d.NORTH][d.SOUTHWEST]=d.NORTHWEST,c.NextTurn[d.NORTH][d.NORTHWEST]=d.NORTHWEST,c.NextTurn[d.EAST]={},c.NextTurn[d.EAST][d.NORTH]=d.NORTHEAST,c.NextTurn[d.EAST][d.EAST]=d.EAST,c.NextTurn[d.EAST][d.SOUTH]=d.SOUTHEAST,c.NextTurn[d.EAST][d.NONE]=d.SOUTHEAST,c.NextTurn[d.EAST][d.WEST]=d.SOUTHEAST,c.NextTurn[d.EAST][d.NORTHEAST]=d.NORTHEAST,c.NextTurn[d.EAST][d.SOUTHEAST]=d.SOUTHEAST,c.NextTurn[d.EAST][d.SOUTHWEST]=d.SOUTHEAST,c.NextTurn[d.EAST][d.NORTHWEST]=d.NORTHEAST,c.NextTurn[d.SOUTH]={},c.NextTurn[d.SOUTH][d.NORTH]=d.SOUTHEAST,c.NextTurn[d.SOUTH][d.EAST]=d.SOUTHEAST,c.NextTurn[d.SOUTH][d.SOUTH]=d.SOUTH,c.NextTurn[d.SOUTH][d.NONE]=d.NONE,c.NextTurn[d.SOUTH][d.WEST]=d.SOUTHWEST,c.NextTurn[d.SOUTH][d.NORTHEAST]=d.SOUTHEAST,c.NextTurn[d.SOUTH][d.SOUTHEAST]=d.SOUTHEAST,c.NextTurn[d.SOUTH][d.SOUTHWEST]=d.SOUTHWEST,c.NextTurn[d.SOUTH][d.NORTHWEST]=d.SOUTHWEST,c.NextTurn[d.WEST]={},c.NextTurn[d.WEST][d.NORTH]=d.NORTHWEST,c.NextTurn[d.WEST][d.EAST]=d.SOUTHWEST,c.NextTurn[d.WEST][d.SOUTH]=d.SOUTHWEST,c.NextTurn[d.WEST][d.NONE]=d.SOUTHWEST,c.NextTurn[d.WEST][d.WEST]=d.WEST,c.NextTurn[d.WEST][d.NORTHEAST]=d.NORTHWEST,c.NextTurn[d.WEST][d.SOUTHEAST]=d.SOUTHWEST,c.NextTurn[d.WEST][d.SOUTHWEST]=d.SOUTHWEST,c.NextTurn[d.WEST][d.NORTHWEST]=d.NORTHWEST,c.NextTurn[d.NORTHEAST]={},c.NextTurn[d.NORTHEAST][d.NORTH]=d.NORTH,c.NextTurn[d.NORTHEAST][d.EAST]=d.EAST,c.NextTurn[d.NORTHEAST][d.SOUTH]=d.EAST,c.NextTurn[d.NORTHEAST][d.NONE]=d.EAST,c.NextTurn[d.NORTHEAST][d.WEST]=d.NORTH,c.NextTurn[d.NORTHEAST][d.NORTHEAST]=d.NORTHEAST,c.NextTurn[d.NORTHEAST][d.SOUTHEAST]=d.EAST,c.NextTurn[d.NORTHEAST][d.SOUTHWEST]=d.EAST,c.NextTurn[d.NORTHEAST][d.NORTHWEST]=d.NORTH,c.NextTurn[d.SOUTHEAST]={},c.NextTurn[d.SOUTHEAST][d.NORTH]=d.EAST,c.NextTurn[d.SOUTHEAST][d.EAST]=d.EAST,c.NextTurn[d.SOUTHEAST][d.SOUTH]=d.SOUTH,c.NextTurn[d.SOUTHEAST][d.NONE]=d.SOUTH,c.NextTurn[d.SOUTHEAST][d.WEST]=d.SOUTH,c.NextTurn[d.SOUTHEAST][d.NORTHEAST]=d.EAST,c.NextTurn[d.SOUTHEAST][d.SOUTHEAST]=d.SOUTHEAST,c.NextTurn[d.SOUTHEAST][d.SOUTHWEST]=d.SOUTH,c.NextTurn[d.SOUTHEAST][d.NORTHWEST]=d.SOUTH,c.NextTurn[d.SOUTHWEST]={},c.NextTurn[d.SOUTHWEST][d.NORTH]=d.WEST,c.NextTurn[d.SOUTHWEST][d.EAST]=d.SOUTH,c.NextTurn[d.SOUTHWEST][d.SOUTH]=d.SOUTH,c.NextTurn[d.SOUTHWEST][d.NONE]=d.SOUTH,c.NextTurn[d.SOUTHWEST][d.WEST]=d.WEST,c.NextTurn[d.SOUTHWEST][d.NORTHEAST]=d.SOUTH,c.NextTurn[d.SOUTHWEST][d.SOUTHEAST]=d.SOUTH,c.NextTurn[d.SOUTHWEST][d.SOUTHWEST]=d.SOUTHWEST,c.NextTurn[d.SOUTHWEST][d.NORTHWEST]=d.WEST,c.NextTurn[d.NORTHWEST]={},c.NextTurn[d.NORTHWEST][d.NORTH]=d.NORTH,c.NextTurn[d.NORTHWEST][d.EAST]=d.NORTH,c.NextTurn[d.NORTHWEST][d.SOUTH]=d.WEST,c.NextTurn[d.NORTHWEST][d.NONE]=d.WEST,c.NextTurn[d.NORTHWEST][d.WEST]=d.WEST,c.NextTurn[d.NORTHWEST][d.NORTHEAST]=d.NORTH,c.NextTurn[d.NORTHWEST][d.SOUTHEAST]=d.WEST,c.NextTurn[d.NORTHWEST][d.SOUTHWEST]=d.WEST,c.NextTurn[d.NORTHWEST][d.NORTHWEST]=d.NORTHWEST,c.NextTurn[d.NONE]={},c.NextTurn[d.NONE][d.NORTH]=d.SOUTHEAST,c.NextTurn[d.NONE][d.EAST]=d.SOUTHEAST,c.NextTurn[d.NONE][d.SOUTH]=d.SOUTH,c.NextTurn[d.NONE][d.NONE]=d.NONE,c.NextTurn[d.NONE][d.WEST]=d.SOUTHWEST,c.NextTurn[d.NONE][d.NORTHEAST]=d.SOUTHEAST,c.NextTurn[d.NONE][d.SOUTHEAST]=d.SOUTHEAST,c.NextTurn[d.NONE][d.SOUTHWEST]=d.SOUTHWEST,c.NextTurn[d.NONE][d.NORTHWEST]=d.SOUTHWEST,c.Emotions={NORMAL:0,HAPPY:1,ANGRY:2,SAD:3},c.FINISH_COLLIDE_DISTANCE_SCALING=.75,c.SPRITE_COLLIDE_DISTANCE_SCALING=.9,c.DEFAULT_SPRITE_SPEED=c.SpriteSpeed.NORMAL,c.DEFAULT_SPRITE_SIZE=1,c.DEFAULT_ITEM_SPEED=c.SpriteSpeed.SLOW,c.SquareType={OPEN:0,SPRITEFINISH:1,NOT_USED_2:2,WALL:4,NOT_USED_8:8,SPRITESTART:16,ITEM_CLASS_0:32,ITEM_CLASS_1:64,ITEM_CLASS_2:128,ITEM_CLASS_3:256,ITEM_CLASS_4:512,ITEM_CLASS_5:1024,ITEM_CLASS_6:2048,ITEM_CLASS_7:4096,NOT_USED_8K:8192,NOT_USED_16K:16384,NOT_USED_32K:32768},c.SquareItemClassMask=c.SquareType.ITEM_CLASS_0|c.SquareType.ITEM_CLASS_1|c.SquareType.ITEM_CLASS_2|c.SquareType.ITEM_CLASS_3|c.SquareType.ITEM_CLASS_4|c.SquareType.ITEM_CLASS_5|c.SquareType.ITEM_CLASS_6|c.SquareType.ITEM_CLASS_7,c.SquareItemClassShift=5,c.squareHasItemClass=function(a,b){var d=(b&c.SquareItemClassMask)>>>c.SquareItemClassShift;return Math.pow(2,a)&d},c.WallType={NORMAL_SIZE:0,DOUBLE_SIZE:1,JUMBO_SIZE:2},c.WallTypeMask=251658240,c.WallCoordRowMask=15728640,c.WallCoordColMask=983040,c.WallCoordsMask=c.WallTypeMask|c.WallCoordRowMask|c.WallCoordColMask,c.WallCoordsShift=16,c.WallCoordColShift=c.WallCoordsShift,c.WallCoordRowShift=c.WallCoordsShift+4,c.WallTypeShift=c.WallCoordsShift+8,c.WallCoordMax=16,c.WallRandomCoordMax=2,c.WallAnyMask=c.WallCoordsMask|c.SquareType.WALL,c.floatingScoreChangeOpacity=-.025,c.floatingScoreChangeY=-1,c.RANDOM_VALUE="random",c.HIDDEN_VALUE='"hidden"',c.CLICK_VALUE='"click"',c.VISIBLE_VALUE='"visible"',c.DEFAULT_ANIMATION_RATE=20,c.GOAL_FADE_TIME=200,c.ITEM_FADE_TIME=200,c.DEFAULT_ACTOR_FADE_TIME=1e3,c.TOUCH_HAZARD_FADE_TIME=2e3,c.SHAKE_DEFAULT_DURATION=1e3,c.SHAKE_DEFAULT_CYCLES=8,c.SHAKE_DEFAULT_DISTANCE=5},{}]},{},["/home/ubuntu/staging/apps/build/js/studio/main.js"]);