require=function a(b,c,d){function e(g,h){if(!c[g]){if(!b[g]){var i="function"==typeof require&&require;if(!h&&i)return i(g,!0);if(f)return f(g,!0);var j=new Error("Cannot find module '"+g+"'");throw j.code="MODULE_NOT_FOUND",j}var k=c[g]={exports:{}};b[g][0].call(k.exports,function(a){var c=b[g][1][a];return e(c?c:a)},k,k.exports,a,b,c,d)}return c[g].exports}for(var f="function"==typeof require&&require,g=0;g<d.length;g++)e(d[g]);return e}({"/home/ubuntu/staging/apps/build/js/studio/main.js":[function(a,b,c){(function(b){"use strict";var c=a("../appMain");window.Studio=a("./studio"),"undefined"!=typeof b&&(b.Studio=window.Studio);var d=a("./blocks"),e=a("./levels"),f=a("./skins");window.studioMain=function(a){a.skinsModule=f,a.blocksModule=d,c(window.Studio,e,a)}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"../appMain":"/home/ubuntu/staging/apps/build/js/appMain.js","./blocks":"/home/ubuntu/staging/apps/build/js/studio/blocks.js","./levels":"/home/ubuntu/staging/apps/build/js/studio/levels.js","./skins":"/home/ubuntu/staging/apps/build/js/studio/skins.js","./studio":"/home/ubuntu/staging/apps/build/js/studio/studio.js"}],"/home/ubuntu/staging/apps/build/js/studio/studio.js":[function(a,b,c){"use strict";function d(){switch(ua.map=xa.map,ua.wallMap=null,ua.wallMapRequested=null,ua.timeoutFailureTick=xa.timeoutFailureTick||1/0,ua.slowExecutionFactor=xa.slowExecutionFactor||1,ua.gridAlignedExtraPauseSteps=xa.gridAlignedExtraPauseSteps||0,ua.ticksBeforeFaceSouth=ua.slowExecutionFactor+_.valueOr(xa.ticksBeforeFaceSouth,N.IDLE_TICKS_BEFORE_FACE_SOUTH),ua.minWorkspaceHeight=xa.minWorkspaceHeight,ua.softButtons_=xa.softButtons||{},ua.protagonistSpriteIndex=_.valueOr(xa.protagonistSpriteIndex,xa.protaganistSpriteIndex),xa.customGameType){case"Big Game":ua.customLogic=new X(ua);break;case"Rocket Height":ua.customLogic=new Y(ua);break;case"Sam the Bat":ua.customLogic=new Z(ua);break;case"Ninja Cat":ua.customLogic=new X(ua,{staticPlayer:!0})}R.registerCustomGameLogic(ua.customLogic),xa.avatarList?ua.startAvatars=xa.avatarList.slice():ua.startAvatars=e(ya.avatarList,xa.firstSpriteIndex);for(var a in xa.scale)ua.scale[a]=xa.scale[a];ua.ROWS=ua.map.length,ua.COLS=ua.map[0].length,ua.SQUARE_SIZE=50,ua.HALF_SQUARE=ua.SQUARE_SIZE/2,ua.MARKER_HEIGHT=xa.markerHeight||100,ua.MARKER_WIDTH=xa.markerWidth||100,ua.MAZE_WIDTH=ua.SQUARE_SIZE*ua.COLS,ua.MAZE_HEIGHT=ua.SQUARE_SIZE*ua.ROWS,K.MAZE_WIDTH=ua.MAZE_WIDTH,K.MAZE_HEIGHT=ua.MAZE_HEIGHT}function e(a,b){return b=b||0,aa.flatten([a.slice(b),a.slice(0,b)])}function f(a,b,c,d,e,f){return Math.abs(a-b)<=c&&Math.abs(d-e)<=f}function g(a,b,c,d,e,f){return Math.abs(a-b)<c&&Math.abs(d-e)<f}function h(a,b,c){if(xa.autoArrowSteer){var d;switch(a){case"when-up":d=la.NORTH;break;case"when-down":d=la.SOUTH;break;case"when-left":d=la.WEST;break;case"when-right":d=la.EAST}d&&ua.queueCmd(null,"move",{spriteIndex:ua.protagonistSpriteIndex||0,dir:d})}ua.eventHandlers.forEach(function(d){if(K.isUsingBlockly()){if(d.name===a&&(b||0===d.cmdQueue.length)){ua.currentCmdQueue=d.cmdQueue;try{d.func(K,Q,ua.Globals)}catch(e){}ua.currentCmdQueue=null}}else d.name===a&&d.func.apply(null,c)})}function i(a){for(var b=a.length-1;b>=0;b--)a[b].moveToNextPosition(),a[b].outOfBounds()&&(a[b].removeElement(),a.splice(b,1))}function j(a){for(var b=a.length-1;b>=0;b--)a[b].display()}function k(){if(xa.sortDrawOrder){for(var a,b=document.getElementById("spriteLayer"),c=[],d=0;d<ua.items.length;d++)a={element:ua.items[d].getElement(),y:ua.items[d].y+ua.items[d].height/2+ua.items[d].renderOffset.y},c.push(a),ua.drawDebugRect("itemLocation",ua.items[d].x,ua.items[d].y,4,4),ua.drawDebugRect("itemBottom",ua.items[d].x,a.y,4,4);for(d=0;d<ua.sprite.length;d++){var e=ua.sprite[d],f=e.displayY+e.height;a={element:document.getElementById("explosion"+d),y:f},a.element&&c.push(a),a={element:e.getElement(),y:f},a.element&&c.push(a),a={element:e.getLegacyElement(),y:f},a.element&&c.push(a),ua.drawDebugRect("spriteBottom",ua.sprite[d].x,e.y,4,4)}for(d=0;d<ua.tiles.length;d++)c.push({element:document.getElementById("tile_"+d),y:ua.tiles[d].bottomY});for(d=0;d<ua.spriteGoals_.length;d++){var g=ya.goalCollisionRectHeight||ua.MARKER_HEIGHT;c.push({element:document.getElementById("spriteFinish"+d),y:ua.spriteGoals_[d].y+g})}c=aa.sortBy(c,"y");var h;for(d=c.length-1;d>=0;d--)h?b.insertBefore(c[d].element,h):b.appendChild(c[d].element),h=c[d].element}}function l(a,b,c){var d=ya.spriteCollisionRectWidth||ua.sprite[a].width,e=ya.spriteCollisionRectHeight||ua.sprite[a].height,f=ya.spriteCollisionRectWidth||ua.sprite[b].width,g=ya.spriteCollisionRectHeight||ua.sprite[b].height,h=c?e:d,i=c?g:f;return N.SPRITE_COLLIDE_DISTANCE_SCALING*(h+i)/2}function m(a,b,c){var d=ya.spriteCollisionRectWidth||ua.sprite[a].width,e=ya.spriteCollisionRectHeight||ua.sprite[a].height,f=ya.itemCollisionRectWidth||b.width,g=ya.itemCollisionRectHeight||b.height,h=c?e:d,i=c?g:f;return N.SPRITE_COLLIDE_DISTANCE_SCALING*(h+i)/2}function n(a,b,c){var d,e=c?a.height:a.width;return d="left"===b||"right"===b?c?ua.MAZE_HEIGHT:0:c?0:ua.MAZE_WIDTH,(e+d)/2}function o(a,b,c,d,e){for(var g=d.length-1;g>=0;g--){var i=d[g],j=i.getNextPosition();if(!i.isFading||!i.isFading()){var k=N.SPRITE_COLLIDE_DISTANCE_SCALING;if(ua.drawDebugRect("itemCollision",j.x,j.y,k*(ya.itemCollisionRectWidth||i.width),k*(ya.itemCollisionRectHeight||i.height)),ua.drawDebugRect("spriteCollision",b,c,k*(ya.spriteCollisionRectWidth||ua.sprite[a].width),k*(ya.spriteCollisionRectHeight||ua.sprite[a].height)),f(b,j.x,m(a,i,!1),c,j.y,m(a,i,!0))){if(i.startCollision(a)&&(ua.currentEventParams={eventObject:i},F(a,i.className,!0),ua.currentEventParams=null,e)){if(d===ua.items){1===d.length&&(h("whenGetAllItems"),ua.trackedBehavior.gotAllItems=!0);for(var l=i.className,n=0,o=0;o<d.length;o++)l===d[o].className&&n++;1===n&&h("whenGetAll-"+l)}i.beginRemoveElement?i.beginRemoveElement():(i.removeElement(),d.splice(g,1))}}else i.endCollision(a)}}}function p(a,b,c,d){for(var e=0;e<Aa.length&&xa.edgeCollisions;e++){var g,h,i=Aa[e];switch(i){case"top":g=ua.MAZE_WIDTH/2,h=0;break;case"left":g=0,h=ua.MAZE_HEIGHT/2;break;case"bottom":g=ua.MAZE_WIDTH/2,h=ua.MAZE_HEIGHT;break;case"right":g=ua.MAZE_WIDTH,h=ua.MAZE_HEIGHT/2}f(b,g,n(a,i,!1),c,h,n(a,i,!0))?a.startCollision(i)&&d(i):a.endCollision(i)}}function q(a){return function(b){F(a,b)}}function r(){u();for(var a=0;a<ua.spriteCount;a++){var b=ua.sprite[a];if(b.visible){for(var c=b.width/2,d=b.height/2,e=eb(a,!1,!1),g=eb(a,!0,!1),h=e+c,i=g+d,j=0;j<ua.spriteCount;j++)if(a!=j&&ua.sprite[j].visible){var k=eb(j,!1,!1)+ua.sprite[j].width/2,m=eb(j,!0,!1)+ua.sprite[j].height/2;f(h,k,l(a,j,!1),i,m,l(a,j,!0))?ua.collideSpriteWith(a,j):b.endCollision(j),I(a,j)}for(o(a,h,i,ua.projectiles),o(a,h,i,ua.items,xa.removeItemsWhenActorCollides),p(b,h,i,q(a)),xa.wallMapCollisions&&(ua.willSpriteTouchWall(b,e,g)?xa.blockMovingIntoWalls?(db(a,!1),db(a,!0),ua.throttledCollideSpriteWithWallFunctions[a]()):ua.collideSpriteWith(a,"wall"):b.endCollision("wall")),I(a,"wall"),j=0;j<Aa.length;j++)I(a,Aa[j]);for(j=0;j<ya.ProjectileClassNames.length;j++)I(a,ya.ProjectileClassNames[j]);for(j=0;j<ya.ItemClassNames.length;j++)I(a,ya.ItemClassNames[j]),xa.removeItemsWhenActorCollides&&ua.executeQueue("whenGetAll-"+ya.ItemClassNames[j]);xa.removeItemsWhenActorCollides&&ua.executeQueue("whenGetAllItems")}}}function s(a){return function(b){ua.currentEventParams={eventObject:a},G(a.className,b,!0),ua.currentEventParams=null}}function t(){for(var a=ua.items.length-1;a>=0;a--){var b=ua.items[a];b.update(),b.hasCompletedFade()&&(b.removeElement(),ua.items.splice(a,1))}}function u(){for(var a=0;a<ua.items.length;a++){var b=ua.items[a],c=b.getNextPosition();if(!b.isFading||!b.isFading()){xa.wallMapCollisions&&(ua.willCollidableTouchWall(b,c.x,c.y)?(ua.currentEventParams={eventObject:b},ua.collideItemWith(b,"wall",!0),ua.currentEventParams=null):b.endCollision("wall")),xa.edgeCollisions&&p(b,c.x,c.y,s(b)),H(b.className,"wall");for(var d=0;d<Aa.length;d++)H(b.className,Aa[d])}}}function v(a){for(var b=0;b<a.length;b++)a[b].removeElement();a.length=0}function w(){return xa.coordinateGridBackground?"grid":xa.background||ya.defaultBackground}function x(){return xa.wallMapCollisions?xa.wallMap:void 0}function y(a,b,c){var d=b+": ";void 0!==c&&(d+="Line: "+c+": "),d+=a,$a&&$a.log(d),void 0!==c&&fa.addRuntimeAnnotation(b,c,a)}function z(a,b){y(String(a),sb.ERROR,b),ua.executionError={err:a,lineNumber:b},a instanceof SyntaxError?(ua.preExecutionFailure=!0,ua.testResults=ra.SYNTAX_ERROR_FAIL,ua.onPuzzleComplete()):xa.freePlay||ua.onPuzzleComplete()}function A(a,b,c){return/.gif$/.test(ya[a])?1:b&&b[a]&&b[a].frames?b[a].frames:c}function B(a){return/^\d*$/.test(a)}function C(a){return-1!==Aa.indexOf(a)}function D(a){return-1!==ya.ProjectileClassNames.indexOf(a)}function E(a){return-1!==ya.ItemClassNames.indexOf(a)}function F(a,b,c){var d="whenSpriteCollided-"+a+"-";h(d+b,c),h(d+"anything",c),B(b)?h(d+"any_actor",c):C(b)?h(d+"any_edge",c):D(b)?h(d+"any_projectile",c):E(b)&&h(d+"any_item",c)}function G(a,b,c){var d="whenItemCollided-"+a+"-";h(d+b,c),C(b)&&h(d+"any_edge",c)}function H(a,b){var c="whenItemCollided-"+a+"-";ua.executeQueue(c+b),C(b)&&ua.executeQueue(c+"any_edge")}function I(a,b){var c="whenSpriteCollided-"+a+"-";ua.executeQueue(c+b),ua.executeQueue(c+"any_actor"),ua.executeQueue(c+"anything"),C(b)?ua.executeQueue(c+"any_edge"):D(b)?ua.executeQueue(c+"any_projectile"):E(b)&&ua.executeQueue(c+"any_item")}function J(a,b){var c=_.valueOr(ya.goalSpriteWidth,ua.MARKER_WIDTH),d=_.valueOr(ya.goalSpriteHeight,ua.MARKER_HEIGHT),e=ya.goalCollisionRectWidth||ua.MARKER_WIDTH,g=ya.goalCollisionRectHeight||ua.MARKER_HEIGHT,h=ya.itemCollisionRectWidth||a.width,i=ya.itemCollisionRectHeight||a.height,j=a.x+a.width/2,k=a.y+a.height/2,l=b.x+c/2+_.valueOr(ya.goalRenderOffsetX,0),m=b.y+d/2+_.valueOr(ya.goalRenderOffsetY,0),n=_.valueOr(ya.finishCollideDistanceScaling,N.FINISH_COLLIDE_DISTANCE_SCALING);ua.drawDebugRect("goalCollisionSprite",j,k,n*h,n*i),ua.drawDebugRect("goalCollisionGoal",l,m,n*e,n*g);var o=function(a){var b=a?i:h,c=a?g:e;return n*(b+c)/2};return f(j,l,o(!1),k,m,o(!0))}var K=a("../StudioApp").singleton,L=a("../locale"),M=a("./locale"),N=(a("../skins"),a("./constants")),O=a("../constants"),P=a("../codegen"),Q=a("./api"),R=a("./blocks"),S=a("../templates/page.html.ejs"),T=a("../dom"),U=(a("./collidable"),a("./Sprite")),V=a("./projectile"),W=a("./Item"),X=a("./bigGameLogic"),Y=a("./rocketHeightLogic"),Z=a("./samBatLogic"),_=(a("../xml").parseElement,a("../utils")),aa=(a("../dropletUtils"),_.getLodash()),ba=a("./dropletConfig"),ca=_.getHammer(),da=a("../JSInterpreter"),ea=a("../JsInterpreterLogger"),fa=a("../acemode/annotationList"),ga=a("./spriteActions"),ha=a("./ImageFilterFactory"),ia=a("./ThreeSliceAudio"),ja=a("../MusicController"),ka=a("./paramLists.js");"undefined"!=typeof SVGElement&&(a("canvg"),a("../canvg/svg_todataurl"));var la=N.Direction,ma=N.NextTurn,na=N.SquareType,oa=N.Emotions,pa=O.KeyCodes,qa=K.ResultType,ra=K.TestResults,sa=O.SVG_NS,ta=!1,ua=b.exports;ua.keyState={},ua.gesturesObserved={},ua.btnState={};var va={UP:0,DOWN:1},wa={LEFT:"leftButton",UP:"upButton",RIGHT:"rightButton",DOWN:"downButton"};ua.GameStates={WAITING:0,ACTIVE:1,OVER:2};var xa,ya,za=25,Aa=["top","left","bottom","right"];K.setCheckForEmptyBlocks(!0);var Ba={whenRun:"whenGameStarts",whenDown:"when-down",whenUp:"when-up",whenLeft:"when-left",whenRight:"when-right",whenGetCharacter:"whenSpriteCollided-"+(ua.protagonistSpriteIndex||0)+"-any_item",whenTouchCharacter:"whenSpriteCollided-"+(ua.protagonistSpriteIndex||0)+"-any_item",whenTouchObstacle:"whenSpriteCollided-"+(ua.protagonistSpriteIndex||0)+"-wall",whenGetAllCharacters:"whenGetAllItems",whenTouchGoal:"whenTouchGoal",whenTouchAllGoals:"whenTouchAllGoals",whenScore1000:"whenScore1000"};ua.scale={snapRadius:1,stepSpeed:33};var Ca=5e3,Da=60,Ea=100,Fa=20,Ga=24,Ha=7,Ia=5,Ja=15,Ka=360,La=Ia+Ja+Ha*Ga,Ma=20,Na=50,Oa=5,Pa=10,Qa=20,Ra=4,Sa=5,Ta=180,Ua=20+Ra*Qa,Va=30,Wa=130,Xa=380,Ya=500,Za={text:M.shareStudioTwitter(),hashtag:"StudioCode"},$a=null,_a=function(){var a,b=document.getElementById("svgStudio");b.setAttribute("width",ua.MAZE_WIDTH),b.setAttribute("height",ua.MAZE_HEIGHT);var c=new ca(b);c.on("tap",ua.onSvgClicked),c.on("drag",ua.onSvgDrag);var d=document.getElementById("visualizationColumn");d.style.width=ua.MAZE_WIDTH+"px";var e=document.createElementNS(sa,"g");if(e.setAttribute("id","backgroundLayer"),b.appendChild(e),ua.background&&ya[ua.background].background){var f=document.createElementNS(sa,"image");f.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",ya[ua.background].background),f.setAttribute("id","background"),f.setAttribute("height",ua.MAZE_HEIGHT),f.setAttribute("width",ua.MAZE_WIDTH),f.setAttribute("x",0),f.setAttribute("y",0),e.appendChild(f)}xa.coordinateGridBackground&&K.createCoordinateGridBackground({svg:"backgroundLayer",origin:0,firstLabel:100,lastLabel:300,increment:100});var g=document.createElementNS(sa,"g");if(g.setAttribute("id","spriteLayer"),b.appendChild(g),xa.wallMapCollisions&&ua.drawMapTiles(),ua.spriteStart_)for(a=0;a<ua.spriteCount;a++){var h=document.createElementNS(sa,"g");h.setAttribute("id","speechBubble"+a),h.setAttribute("visibility","hidden");var i=document.createElementNS(sa,"path");i.setAttribute("id","speechBubblePath"+a),i.setAttribute("class","studio-speech-bubble-path");var j=document.createElementNS(sa,"text");j.setAttribute("id","speechBubbleText"+a),j.setAttribute("class","studio-speech-bubble"),h.appendChild(i),h.appendChild(j),b.appendChild(h)}var k=_.valueOr(xa.goalOverride,{}),l=1;k.goalAnimation&&ya.animatedGoalFrames&&(l=ya.animatedGoalFrames);var m=ya.goalSpriteWidth?ya.goalSpriteWidth*l:_.valueOr(k.imageWidth,ua.MARKER_WIDTH),n=ya.goalSpriteHeight?ya.goalSpriteHeight:_.valueOr(k.imageHeight,ua.MARKER_HEIGHT),o=_.valueOr(ya.goalSpriteWidth,ua.MARKER_WIDTH),p=_.valueOr(ya.goalSpriteHeight,ua.MARKER_HEIGHT);if(ua.spriteGoals_)for(a=0;a<ua.spriteGoals_.length;a++){var q=document.createElementNS(sa,"clipPath");q.setAttribute("id","finishClipPath"+a);var r=document.createElementNS(sa,"rect");r.setAttribute("id","finishClipRect"+a),r.setAttribute("width",o),r.setAttribute("height",p),q.appendChild(r),g.appendChild(q);var s=document.createElementNS(sa,"image");s.setAttribute("id","spriteFinish"+a),s.setAttribute("width",m),s.setAttribute("height",n),ya.disableClipRectOnGoals||s.setAttribute("clip-path","url(#finishClipPath"+a+")"),b.appendChild(s)}ua.applyGoalEffect();var t=document.createElementNS(sa,"g");for(t.setAttribute("id","cloudLayer"),a=0;a<N.MAX_NUM_CLOUDS;a++){var u=document.createElementNS(sa,"image");u.setAttribute("id","cloud"+a),t.appendChild(u)}b.appendChild(t);var v=document.createElementNS(sa,"g");v.setAttribute("id","gameTextGroup"),b.appendChild(v);var w=document.createElementNS(sa,"g");w.setAttribute("id","overlayGroup"),b.appendChild(w);var x=document.createElementNS(sa,"text");x.setAttribute("id","score"),x.setAttribute("class","studio-score"),x.setAttribute("x",ua.MAZE_WIDTH/2),x.setAttribute("y",Va),x.appendChild(document.createTextNode("")),x.setAttribute("visibility","hidden"),v.appendChild(x);var y=document.createElementNS(sa,"text");if(y.setAttribute("id","victoryText"),y.setAttribute("class","studio-victory-text"),y.setAttribute("x",ua.MAZE_WIDTH/2),y.setAttribute("y",Wa),y.appendChild(document.createTextNode("")),y.setAttribute("visibility","hidden"),v.appendChild(y),T.isMobile()||T.isWindowsTouch()){var z=document.createElementNS(sa,"rect");z.setAttribute("width",ua.MAZE_WIDTH),z.setAttribute("height",ua.MAZE_HEIGHT),z.setAttribute("fill","black"),z.setAttribute("opacity",.3),w.appendChild(z);var A=document.createElementNS(sa,"text");A.setAttribute("id","resetTextA"),A.setAttribute("class","studio-reset-text"),A.setAttribute("x",ua.MAZE_WIDTH/2),A.setAttribute("y",Xa-30),A.appendChild(document.createTextNode(M.tapToPlay())),A.setAttribute("visibility","visible"),w.appendChild(A);var B=document.createElementNS(sa,"text");B.setAttribute("id","resetTextB"),B.setAttribute("class","studio-reset-text"),B.setAttribute("x",ua.MAZE_WIDTH/2),B.setAttribute("y",Xa),B.appendChild(document.createTextNode(M.swipeToMove())),B.setAttribute("visibility","visible"),w.appendChild(B);var C=document.createElementNS(sa,"image");C.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",K.assetUrl("media/common_images/touch-drag.png"));var D=300;C.setAttribute("width",D),C.setAttribute("height",D),C.setAttribute("x",(ua.MAZE_WIDTH-D)/2),C.setAttribute("y",(ua.MAZE_HEIGHT-D)/2-25),w.appendChild(C)}else{var E=document.createElementNS(sa,"text");E.setAttribute("id","resetText"),E.setAttribute("class","studio-reset-text"),E.setAttribute("x",ua.MAZE_WIDTH/2),E.setAttribute("y",Xa),E.appendChild(document.createTextNode(M.tapOrClickToReset())),E.setAttribute("visibility","visible"),w.appendChild(E)}if(xa.floatingScore){var F=document.createElementNS(sa,"text");F.setAttribute("id","floatingScore"),F.setAttribute("class","studio-floating-score"),F.setAttribute("x",ua.MAZE_WIDTH/2),F.setAttribute("y",Va),F.appendChild(document.createTextNode("")),F.setAttribute("visibility","hidden"),b.appendChild(F)}var G=document.createElementNS(sa,"text");G.setAttribute("id","titleScreenTitle"),G.setAttribute("class","studio-ts-title"),G.setAttribute("x",ua.MAZE_WIDTH/2),G.setAttribute("y",Da),G.appendChild(document.createTextNode("")),G.setAttribute("visibility","hidden"),b.appendChild(G);var H=document.createElementNS(sa,"g"),I=(ua.MAZE_WIDTH-Ka)/2;H.setAttribute("id","titleScreenTextGroup"),H.setAttribute("x",I),H.setAttribute("y",Ea),H.setAttribute("transform","translate("+I+","+Ea+")"),H.setAttribute("visibility","hidden");var J=document.createElementNS(sa,"rect");J.setAttribute("id","titleScreenTextRect"),J.setAttribute("x",0),J.setAttribute("y",0),J.setAttribute("width",Ka),J.setAttribute("class","studio-ts-text-rect");var L=document.createElementNS(sa,"text");L.setAttribute("id","titleScreenText"),L.setAttribute("class","studio-ts-text"),L.setAttribute("x",Ka/2),L.setAttribute("y",0),L.appendChild(document.createTextNode("")),H.appendChild(J),H.appendChild(L),b.appendChild(H)},ab=null;ua.applyGoalEffect=function(){if(ua.spriteGoals_){if(!ab){var a=document.getElementById("svgStudio");ab=ha.makeFilterOfType(ya.goalEffect,a)}for(var b,c=0;c<ua.spriteGoals_.length;c++)b=document.getElementById("spriteFinish"+c),ab&&ab.applyTo(b)}},ua.removeGoalEffect=function(){if(ua.spriteGoals_&&ab)for(var a,b=0;b<ua.spriteGoals_.length;b++)a=document.getElementById("spriteFinish"+b),ab.removeFrom(a)};var bb=function(a,b,c){return function(){var d=Array.prototype.slice.apply(arguments).concat(c);b.apply(a,d)}},cb=function(a,b,c){var d=0;return ua.eventHandlers.forEach(function(e){var f=e.cmdQueue[0];if(f&&"moveDistance"===f.name&&f.opts.spriteIndex===a){var g,h=Math.min(f.opts.queuedDistance,ua.sprite[f.opts.spriteIndex].speed);switch(f.opts.dir){case la.NORTH:g=b?-1:0;break;case la.WEST:g=b?0:-1;break;case la.SOUTH:g=b?1:0;break;case la.EAST:g=b?0:1}c&&0!==g&&(f.opts.queuedDistance-=h,"0.00"===Math.abs(f.opts.queuedDistance).toFixed(2)&&(f.opts.queuedDistance=0)),d+=h*g}}),d},db=function(a,b){ua.eventHandlers.forEach(function(c){var d=c.cmdQueue[0];if(d&&"moveDistance"===d.name&&d.opts.spriteIndex===a){var e=d.opts.dir;!b||e!==la.NORTH&&e!==la.SOUTH?b||e!==la.EAST&&e!==la.WEST||(d.opts.queuedDistance=0):d.opts.queuedDistance=0}})},eb=function(a,b,c){var d=b?ua.sprite[a].y:ua.sprite[a].x;return d+cb(a,b,c)},fb=function(a){var b=ua.sprite[a],c=b.x,d=b.y,e=eb(a,!1,!0),f=eb(a,!0,!0);if(xa.allowSpritesOutsidePlayspace)b.x=e,b.y=f;else{var g=ua.getPlayspaceBoundaries(b),h=Math.min(g.right,Math.max(g.left,e));e!=h&&db(a,!1),b.x=h;var i=Math.min(g.bottom,Math.max(g.top,f));f!=i&&db(a,!0),b.y=i}(c!==b.x||d!==b.y)&&(b.lastMove=ua.tickCount)},gb=function(a){for(;a.svgText.firstChild;)a.svgText.removeChild(a.svgText.firstChild);var b=a.text.toString().split(" "),c=document.createElementNS("http://www.w3.org/2000/svg","tspan");c.setAttribute("x",a.width/2),c.setAttribute("dy",a.lineHeight+a.topMargin);var d=document.createTextNode(b[0]);c.appendChild(d),a.svgText.appendChild(c);for(var e=1,f=1;f<b.length;f++){var g=c.firstChild.data.length;if(c.firstChild.data+=" "+b[f],c.getComputedTextLength&&c.getComputedTextLength()>a.width-2*a.sideMargin){if(c.firstChild.data=c.firstChild.data.slice(0,g),a.maxLines===e)return a.fullHeight;c=document.createElementNS("http://www.w3.org/2000/svg","tspan"),c.setAttribute("x",a.width/2),c.setAttribute("dy",a.lineHeight),d=document.createTextNode(b[f]),c.appendChild(d),a.svgText.appendChild(c),e++}}var h=a.maxLines-Math.max(1,e);return a.fullHeight-h*a.lineHeight};ua.initAutoHandlers=function(a){for(var b in a){var c=ua.JSInterpreter.findGlobalFunction(b),d=P.createNativeFunctionFromInterpreterFunction(c);c&&mb(ua.eventHandlers,a[b],d)}},ua.callApiCode=function(a,b){mb(ua.eventHandlers,a,b),h(a),ua.executeQueue(a)},ua.onTick=function(){ua.tickCount++;var a;ua.clearDebugElements();var b=ua.pauseInterpreter||0!==(ua.tickCount-1)%ua.slowExecutionFactor;if(!b&&ua.yieldExecutionTicks>0&&ua.yieldExecutionTicks--,ua.customLogic&&ua.customLogic.onTick(),1===ua.tickCount&&h("whenGameStarts"),!b){for(ua.executeQueue("whenGameStarts"),h("repeatForever"),ua.executeQueue("repeatForever"),a=0;a<ua.spriteCount;a++)ua.executeQueue("whenSpriteClicked-"+a);for(var c in pa)if(ua.keyState[pa[c]]&&"keydown"===ua.keyState[pa[c]])switch(pa[c]){case pa.LEFT:h("when-left");break;case pa.UP:h("when-up");break;case pa.RIGHT:h("when-right");break;case pa.DOWN:h("when-down")}for(var d in wa)if(ua.btnState[wa[d]]&&ua.btnState[wa[d]]===va.DOWN)switch(wa[d]){case wa.LEFT:h("when-left");break;case wa.UP:h("when-up");break;case wa.RIGHT:h("when-right");break;case wa.DOWN:h("when-down")}for(var e in ua.gesturesObserved){switch(e){case"left":h("when-left");break;case"up":h("when-up");break;case"right":h("when-right");break;case"down":h("when-down")}0===ua.gesturesObserved[e]--&&delete ua.gesturesObserved[e]}ua.executeQueue("when-left"),ua.executeQueue("when-up"),ua.executeQueue("when-right"),ua.executeQueue("when-down"),t(),r()}ua.JSInterpreter&&!b&&0===ua.yieldExecutionTicks&&ua.JSInterpreter.executeInterpreter(1===ua.tickCount);var f=!1;for(a=0;a<ua.spriteCount;a++){b||fb(a);_.valueOr(xa.ticksBeforeFaceSouth,ua.ticksBeforeFaceSouth);ua.tickCount-ua.sprite[a].lastMove>ua.ticksBeforeFaceSouth&&(ua.sprite[a].setDirection(la.NONE),ua.movementAudioOff()),ua.displaySprite(a);var g=ua.sprite[a];g.hasActions()&&(f=!0),ua.drawDebugRect("spriteCenter",ua.sprite[a].x,ua.sprite[a].y,5,5)}ua.animateGoals(),ua.animateClouds(),b||(i(ua.projectiles),i(ua.items)),j(ua.sprite),j(ua.projectiles),j(ua.items),ua.updateFloatingScore(),ua.drawTimeoutRect(),k();var l=(new Date).getTime();!ua.succeededTime&&Fb()&&(ua.succeededTime=l),b||ua.executeQueue("whenTouchGoal"),ua.succeededTime&&!f&&(!xa.delayCompletion||l>ua.succeededTime+xa.delayCompletion)&&ua.onPuzzleComplete(),ua.allGoalsVisited()&&(ua.trackedBehavior.allGoalsVisited=!0),ua.timedOut()&&(ua.trackedBehavior.timedOut=!0)},ua.willSpriteTouchWall=function(a,b,c){var d=b+a.width/2,e=c+a.height/2;return ua.willCollidableTouchWall(a,d,e)},ua.willSpriteLeavePlayspace=function(a,b,c){var d=ua.getPlayspaceBoundaries(a);return b<d.left||b>d.right||c<d.top||c>d.bottom},ua.getWallValue=function(a,b){return 0>a||a>=ua.ROWS||0>b||b>=ua.COLS?0:ua.wallMap?ya[ua.wallMap]?ya[ua.wallMap][a][b]<<N.WallCoordsShift:0:ua.map[a][b]&N.WallAnyMask},ua.willCollidableTouchWall=function(a,b,c){var d=a.height,e=a.width;xa.gridAlignedMovement||(b+=ya.wallCollisionRectOffsetX,c+=ya.wallCollisionRectOffsetY,d=ya.wallCollisionRectHeight||d,e=ya.wallCollisionRectWidth||e),ua.drawDebugRect("avatarCollision",b,c,e,d);var f=Math.floor(b)+1,h=Math.floor(c)+1,i=Math.floor(b/ua.SQUARE_SIZE),j=Math.floor(c/ua.SQUARE_SIZE),k=null;if(ya.customObstacleZones&&ya.customObstacleZones[ua.background]&&ya.customObstacleZones[ua.background][ua.wallMapRequested]&&(k=ya.customObstacleZones[ua.background][ua.wallMapRequested]),k)for(var l=0;l<k.length;l++){var m=k[l],n=m.maxX-m.minX+1,o=m.maxY-m.minY+1,p=m.minX+n/2,q=m.minY+o/2;if(ua.drawDebugRect("avatarCollision",p,q,n,o),g(b,p,n/2+e/2,c,q,o/2+d/2))return!0}else for(var r=Math.max(0,i-f);r<Math.min(ua.COLS,i+f);r++)for(var s=Math.max(0,j-h);s<Math.min(ua.ROWS,j+h);s++)if(ua.getWallValue(s,r)&&(ua.drawDebugRect("avatarCollision",(r+.5)*ua.SQUARE_SIZE,(s+.5)*ua.SQUARE_SIZE,ua.SQUARE_SIZE,ua.SQUARE_SIZE),g(b,(r+.5)*ua.SQUARE_SIZE,ua.SQUARE_SIZE/2+e/2,c,(s+.5)*ua.SQUARE_SIZE,ua.SQUARE_SIZE/2+d/2)))return!0;return!1},ua.onSvgDrag=function(a){ua.tickCount>0&&(ua.gesturesObserved[a.gesture.direction]=Math.round(a.gesture.distance/za),a.gesture.preventDefault())},ua.onKey=function(a){ua.keyState[a.keyCode]=a.type,ua.tickCount>0&&a.keyCode>=pa.LEFT&&a.keyCode<=pa.DOWN&&a.preventDefault()},ua.onArrowButtonDown=function(a,b){ua.btnState[b]=va.DOWN,a.preventDefault()},ua.onSpriteClicked=function(a,b){ua.tickCount>0&&h("whenSpriteClicked-"+b),a.preventDefault()},ua.onSvgClicked=function(a){xa.tapSvgToRunAndReset&&ua.gameState===ua.GameStates.WAITING?ua.runButtonClick():xa.tapSvgToRunAndReset&&ua.gameState===ua.GameStates.OVER?K.resetButtonClick():ua.tickCount>0&&ua.eventHandlers.forEach(function(a){var b=a.cmdQueue[0];b&&b.opts.waitForClick&&!b.opts.complete&&(b.opts.waitCallback&&b.opts.waitCallback(),b.opts.complete=!0)}),a.preventDefault()},ua.onArrowButtonUp=function(a,b){ua.btnState[b]=va.UP},ua.onMouseUp=function(a){ua.btnState={}},ua.initSprites=function(){ua.spriteCount=0,ua.sprite=[],ua.startTime=null,ua.spriteGoals_=[];for(var a=0;a<ua.ROWS;a++)for(var b=0;b<ua.COLS;b++)ua.map[a][b]&na.SPRITEFINISH?ua.spriteGoals_.push({x:b*ua.SQUARE_SIZE,y:a*ua.SQUARE_SIZE,finished:!1}):ua.map[a][b]&na.SPRITESTART&&(0===ua.spriteCount&&(ua.spriteStart_=[]),ua.spriteStart_[ua.spriteCount]={x:b*ua.SQUARE_SIZE,y:a*ua.SQUARE_SIZE},ua.spriteCount++);K.isUsingBlockly()&&(R.setSpriteCount(Blockly,ua.spriteCount),R.setStartAvatars(ua.startAvatars),xa.projectileCollisions&&R.enableProjectileCollisions(Blockly),xa.edgeCollisions&&R.enableEdgeCollisions(Blockly),xa.allowSpritesOutsidePlayspace&&R.enableSpritesOutsidePlayspace(Blockly))},ua.initReadonly=function(a){ya=a.skin,xa=a.level,ka.initWithSkinAndLevel(ya,xa),d(),a.appMsg=M,ua.initSprites(),K.initReadonly(a)},ua.init=function(b){K.reset=this.reset.bind(this),K.runButtonClick=this.runButtonClick.bind(this),$(window).on("run_button_pressed",function(){document.getElementById("runButton").focus()}),ua.projectiles=[],ua.items=[],ua.itemSpeed={},ua.itemActivity={},ua.eventHandlers=[],ua.perExecutionTimeouts=[],ua.tickIntervalId=null,ua.tiles=[],ua.tilesDrawn=!1,ua.cloudStep=0,ua.clearEventHandlersKillTickLoop(),ya=b.skin,xa=b.level,$a=new ea(window.console);for(var c in xa.msgStringOverrides)M[c]=M[xa.msgStringOverrides[c]];ka.initWithSkinAndLevel(ya,xa);var e=!!xa.useContractEditor;b.grayOutUndeletableBlocks=e,d(),ua.background=w(),ua.customLogic&&(ya.staticAvatar=null,ya.smallStaticAvatar=null,ya.failureAvatar=null,ya.winAvatar=null),window.addEventListener("keydown",ua.onKey,!1),window.addEventListener("keyup",ua.onKey,!1);var f=!xa.isProjectLevel,g=aa.isEmpty(xa.softButtons),h=a("./controls.html.ejs")({assetUrl:K.assetUrl,finishButton:g&&f}),i=a("./extraControlRows.html.ejs")({assetUrl:K.assetUrl,finishButton:!g&&f});b.html=S({assetUrl:K.assetUrl,data:{localeDirection:K.localeDirection(),visualization:a("./visualization.html.ejs")(),controls:h,extraControlRows:i,blockUsed:void 0,idealBlockNumber:void 0,editCode:xa.editCode,blockCounterClass:"block-counter-default",inputOutputTable:xa.inputOutputTable,readonlyWorkspace:b.readonlyWorkspace}});var j=[];xa.music&&ya.musicMetadata&&(j=ya.musicMetadata.filter(function(a){return-1!==xa.music.indexOf(a.name)})),ua.makeThrottledPlaySound(),ua.musicController=new ja(K.cdoSounds,ya.assetUrl,j),ua.movementAudioEffects={},b.loadAudio=function(){var a=[];a.push.apply(a,ya.builtinSounds),a.push.apply(a,ya.sounds),a.push.apply(a,ua.getMovementSoundFileNames(ya)),a=aa.uniq(a),ya.soundFiles={},a.forEach(function(a){a=a.toLowerCase(),ya.soundFiles[a]=[ya.assetUrl(a+".mp3"),ya.assetUrl(a+".ogg")],K.loadAudio(ya.soundFiles[a],a)}),ua.musicController.preload()};var k=function n(){document.removeEventListener("instructionsShown",n),K.cdoSounds&&K.cdoSounds.whenAudioUnlocked(function(){ua.musicController.play()})};document.addEventListener("instructionsShown",k),b.afterInject=function(){for(var a in wa)T.addMouseUpTouchEvent(document.getElementById(wa[a]),bb(this,ua.onArrowButtonUp,wa[a])),T.addMouseDownTouchEvent(document.getElementById(wa[a]),bb(this,ua.onArrowButtonDown,wa[a]));document.addEventListener("mouseup",ua.onMouseUp,!1),K.isUsingBlockly()&&(Blockly.HSV_SATURATION=.6,Blockly.SNAP_RADIUS*=ua.scale.snapRadius,Blockly.contractEditor&&Blockly.contractEditor.registerTestHandler(ua.getStudioExampleFailure)),_a()},b.afterClearPuzzle=function(){K.resetButtonClick(),fa.clearRuntimeAnnotations()},b.polishCodeHook=function(a){if(K.isUsingBlockly()){var b=/Studio.move\('\S*', 0, 1\);/g;a=a.replace(b,"moveUp();");var c=/Studio.move\('\S*', 0, 2\);/g;a=a.replace(c,"moveRight();");var d=/Studio.move\('\S*', 0, 4\);/g;a=a.replace(d,"moveDown();");var e=/Studio.move\('\S*', 0, 8\);/g;a=a.replace(e,"moveLeft();")}return a},b.twitter=ya.twitterOptions||Za,b.makeYourOwn=b.share,b.makeString=M.makeYourOwn(),b.makeUrl="http://code.org/studio",b.makeImage=K.assetUrl("media/promo.png"),b.enableShowCode=K.editCode?!0:_.valueOr(xa.enableShowCode,!1),b.varsInGlobals=!0,b.dropletConfig=ba,b.dropIntoAceAtLineStart=!0,b.showDropdownInPalette=!0,b.unusedConfig=[];for(c in ya.AutohandlerTouchItems)Ba[c]="whenSpriteCollided-"+(ua.protagonistSpriteIndex||0)+"-"+ya.AutohandlerTouchItems[c];for(c in ya.AutohandlerGetAllItems)Ba[c]="whenGetAll-"+ya.AutohandlerGetAllItems[c];for(c in xa.autohandlerOverrides)Ba[c]=xa.autohandlerOverrides[c];for(var l in Ba)b.unusedConfig.push(l);b.appMsg=M,ua.initSprites(),ua.makeThrottledSpriteWallCollisionHelpers(),K.init(b);var m=document.getElementById("finishButton");m&&T.addClickTouchEvent(m,ua.onPuzzleComplete),b.skin.preloadAssets&&(kb(),jb(),ib())},ua.getMovementSoundFileNames=function(a){var b=a.avatarList||[];return b.map(function(b){var c=a[b].movementAudio||[];return c.reduce(function(a,b){return a.concat([b.begin,b.loop,b.end])},[])}).reduce(function(a,b){return a.concat(b)},[]).filter(function(a){return void 0!==a})};var hb=function(a){if(a){var b=new Image;b.src=a}},ib=function(){for(var a=ya.backgroundChoicesK1,b=0;b<a.length;b++)hb(a[b][0])},jb=function(){for(var a=0;a<ya.ProjectileClassNames.length;a++)hb(ya[ya.ProjectileClassNames[a]]);for(a=0;a<ya.ItemClassNames.length;a++)hb(ya[ya.ItemClassNames[a]])},kb=function(){for(var a=0;a<ya.avatarList.length;a++)hb(ya[ya.avatarList[a]].sprite),hb(ya[ya.avatarList[a]].walk)};ua.clearEventHandlersKillTickLoop=function(){ua.eventHandlers.forEach(function(a){var b=a.cmdQueue[0];b&&b.opts.waitTimeout&&!b.opts.complete&&window.clearTimeout(b.opts.waitTimeout)}),ua.eventHandlers=[],ua.perExecutionTimeouts.forEach(function(a){clearTimeout(a)}),clearInterval(ua.tickIntervalId),ua.perExecutionTimeouts=[],ua.tickCount=0;for(var a=0;a<ua.spriteCount;a++)ua.sprite[a]&&ua.sprite[a].bubbleTimeout&&window.clearTimeout(ua.sprite[a].bubbleTimeout)},ua.reset=function(a){var b;ua.clearEventHandlersKillTickLoop(),ua.gameState=ua.GameStates.WAITING,v(ua.projectiles),v(ua.items);var c=document.getElementById("svgStudio");ua.customLogic&&ua.customLogic.reset();var d=0;for(b=0;b<ua.softButtons_.length;b++)document.getElementById(ua.softButtons_[b]).style.display="inline",d++;if(d&&$("#soft-buttons").removeClass("soft-buttons-none").addClass("soft-buttons-"+d),ua.preExecutionFailure=!1,ua.message=null,ua.pauseInterpreter=!1,ua.progressConditionTestResult=!1,
ua.playerScore=0,ua.scoreText=null,ua.victoryText="",document.getElementById("score").setAttribute("visibility","hidden"),document.getElementById("victoryText").setAttribute("visibility","hidden"),T.isMobile()||T.isWindowsTouch()){var e=document.getElementById("resetTextA"),f=document.getElementById("resetTextB");xa.tapSvgToRunAndReset?(e.textContent=M.tapToPlay(),f.textContent=M.swipeToMove(),e.setAttribute("visibility","visible"),f.setAttribute("visibility","visible"),$("#overlayGroup *").attr("visibility","visible")):(e.setAttribute("visibility","hidden"),f.setAttribute("visibility","hidden"),$("#overlayGroup *").attr("visibility","hidden"))}else{var g=document.getElementById("resetText");xa.tapSvgToRunAndReset?(g.textContent=M.tapOrClickToPlay(),g.setAttribute("visibility","visible")):g.setAttribute("visibility","hidden")}xa.floatingScore&&document.getElementById("floatingScore").setAttribute("visibility","hidden"),document.getElementById("titleScreenTitle").setAttribute("visibility","hidden"),document.getElementById("titleScreenTextGroup").setAttribute("visibility","hidden"),ua.background=null,ua.wallMap=null,ua.wallMapRequested=null,ua.setBackground({value:w()}),ua.gesturesObserved={},ua.currentCmdQueue=null,ua.sayComplete=0,ua.playSoundCount=0,ua.trackedBehavior={removedItemCount:0,touchedHazardCount:0,setActivityRecord:null,hasSetSprite:!1,hasSetDroidSpeed:!1,hasSetBackground:!1,hasSetMap:!1,hasAddedItem:!1,hasWonGame:!1,hasLostGame:!1,allGoalsVisited:!1,timedOut:!1,gotAllItems:!1,removedItems:{},createdItems:{},hasSetEmotion:!1,hasThrownProjectile:!1},ua.lastMoveSingleDir=null,xa.goal&&(xa.goal.successState={}),ua.Globals={},$a&&$a.detach(),ua.yieldExecutionTicks=0,K.editCode&&(ua.executionError=null,ua.JSInterpreter&&(ua.JSInterpreter.deinitialize(),ua.JSInterpreter=null));var h={x:0,y:0};for(xa.gridAlignedMovement&&(h.x=ya.gridSpriteRenderOffsetX||0,h.y=ya.gridSpriteRenderOffsetY||0),b=0;b<ua.spriteCount;b++){ua.sprite[b]&&ua.sprite[b].removeElement(),ua.sprite[b]=new U({x:ua.spriteStart_[b].x,y:ua.spriteStart_[b].y,displayX:ua.spriteStart_[b].x,displayY:ua.spriteStart_[b].y,loop:!0,speed:N.DEFAULT_SPRITE_SPEED,size:N.DEFAULT_SPRITE_SIZE,dir:la.NONE,displayDir:la.SOUTH,emotion:xa.defaultEmotion||oa.NORMAL,renderOffset:h,lastMove:1/0,visible:!xa.spritesHiddenToStart});var i={spriteIndex:b,value:ua.startAvatars[b%ua.startAvatars.length],forceHidden:xa.spritesHiddenToStart};ua.setSprite(i),ua.displaySprite(b),document.getElementById("speechBubble"+b).setAttribute("visibility","hidden"),ua.sprite[b].setOpacity(1);var j=document.getElementById("explosion"+b);j&&j.setAttribute("visibility","hidden")}ua.itemSpeed={};for(var l in ya.specialItemProperties)ua.itemSpeed[l]=ya.specialItemProperties[l].speed;ua.itemActivity={};for(l in ya.specialItemProperties)ua.itemActivity[l]=ya.specialItemProperties[l].activity;ua.createLevelItems(c);var m=x();for(m&&ua.setMap({value:x()}),b=0;b<ua.spriteCount;b++)ua.displaySprite(b);this.resetGoalSprites(),k(),ua.levelRestarted=!0,ua.succeededTime=null,ua.movementAudioOff()},ua.resetGoalSprites=function(){ua.touchAllGoalsEventFired=!1;for(var a=0;a<ua.spriteGoals_.length;a++){ua.spriteGoals_[a].finished=!1,ua.spriteGoals_[a].startFadeTime=null;var b=_.valueOr(xa.goalOverride,{}),c=_.valueOr(b.goalRenderOffsetX,_.valueOr(ya.goalRenderOffsetX,0)),d=_.valueOr(b.goalRenderOffsetY,_.valueOr(ya.goalRenderOffsetY,0)),e=document.getElementById("spriteFinish"+a);e.setAttribute("x",ua.spriteGoals_[a].x+c),e.setAttribute("y",ua.spriteGoals_[a].y+d),e.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",ua.getGoalAssetFromSkin()),e.setAttribute("opacity",1);var f=document.getElementById("finishClipRect"+a);f.setAttribute("x",ua.spriteGoals_[a].x+c),f.setAttribute("y",ua.spriteGoals_[a].y+d)}},ua.getGoalAssetFromSkin=function(){var a=ya.goal;return xa.goalOverride&&(xa.goalOverride.goalAnimation?a=ya[xa.goalOverride.goalAnimation]:xa.goalOverride.goalImage&&(a=ya[xa.goalOverride.goalImage])),a},ua.getStudioExampleFailure=function(a){try{var b=a.getInputTargetBlock("ACTUAL"),c=a.getInputTargetBlock("EXPECTED");K.feedback_.throwOnInvalidExampleBlocks(b,c);var d=Blockly.Generator.blockSpaceToCode("JavaScript",["functional_definition"]),e=Blockly.Generator.blocksToCode("JavaScript",[a]);if(e){var f=P.evalWith(d+"; return"+e,{StudioApp:K,Studio:Q,Globals:ua.Globals});return f?null:"Does not match definition."}return"No example code."}catch(g){return"Execution error: "+g.message}},ua.runButtonClick=function(){var a=document.getElementById("runButton"),b=document.getElementById("resetButton");if(b.style.minWidth||(b.style.minWidth=a.offsetWidth+"px"),K.toggleRunReset("reset"),K.isUsingBlockly()&&Blockly.mainBlockSpace.traceOn(!0),ua.musicController.fadeOut(),ua.removeGoalEffect(),K.reset(!1),K.attempts++,ua.startTime=new Date,ua.execute(),ua.gameState=ua.GameStates.ACTIVE,xa.freePlay&&!xa.isProjectLevel&&(!K.hideSource||xa.showFinish)){var c=document.getElementById("share-cell");if("share-cell-enabled"!==c.className){c.className="share-cell-enabled",K.onResize();var d=document.createEvent("Event");d.initEvent("finishButtonShown",!0,!0),document.dispatchEvent(d)}}xa.showZeroScore&&ua.displayScore()};var lb=function(){var a;a=!xa.freePlay||ua.customLogic instanceof X?L.tryAgain():L.keepPlaying();var b=$.extend({continueText:xa.freePlay?L.nextPuzzle:function(){},reinfFeedbackMsg:M.reinfFeedbackMsg,sharingText:M.shareGame},xa.appStringsFunctions),c={continueText:b.continueText(),reinfFeedbackMsg:b.reinfFeedbackMsg({backButton:a}),sharingText:b.sharingText()};ua.waitingForReport||K.displayFeedback({app:"studio",skin:ya.id,feedbackType:ua.testResults,executionError:ua.executionError,tryAgainText:a,continueText:c.continueText,response:ua.response,level:xa,showingSharing:!xa.disableSharing&&xa.freePlay&&!ua.preExecutionFailure&&!xa.projectTemplateLevelName,feedbackImage:ua.feedbackImage,twitter:ya.twitterOptions||Za,saveToGalleryUrl:xa.freePlay&&ua.response&&ua.response.save_to_gallery_url,message:ua.message,appStrings:c,disablePrinting:xa.disablePrinting})};ua.onReportComplete=function(a){ua.response=a,ua.waitingForReport=!1,K.onReportComplete(a),lb()};var mb=function(a,b,c){a.push({name:b,func:c,cmdQueue:[]})},nb=function(a,b,c,d,e,f,g){for(var h=Blockly.mainBlockSpace.getTopBlocks(),i=0;h[i];i++){var j=h[i],k=j.getTitleValue(d)||"0",l=j.getTitleValue(f)||"0";if(!(j.type!==b||d&&e!==k||f&&g!==l)){var m=Blockly.Generator.blocksToCode("JavaScript",[j]);if(m){var n=P.functionFromCode(m,{StudioApp:K,Studio:Q,Globals:ua.Globals}),o=c;d&&(o+="-"+e),f&&(o+="-"+g),mb(a,o,n)}}}},ob=function(a,b,c,d){for(var e=0;e<ua.spriteCount;e++)nb(a,b,c,d,String(e))},pb=function(a,b,c,d,e){for(var f=0;f<e.length;f++)nb(a,b,c,d,e[f])},qb=function(a,b,c,d,e){var f,g=function(g){nb(a,b,c,d,String(f),e,g)};for(f=0;f<ua.spriteCount;f++){for(var h=0;h<ua.spriteCount;h++)f!==h&&nb(a,b,c,d,String(f),e,String(h));ya.ProjectileClassNames.forEach(g),ya.ItemClassNames.forEach(g),Aa.forEach(g),nb(a,b,c,d,String(f),e,"any_actor"),nb(a,b,c,d,String(f),e,"any_edge"),nb(a,b,c,d,String(f),e,"any_projectile"),nb(a,b,c,d,String(f),e,"anything")}},rb=function(a){var b=Blockly.Generator.blockSpaceToCode("JavaScript",a);try{P.evalWith(b,{StudioApp:K,Studio:Q,Globals:ua.Globals})}catch(c){}};ua.checkForBlocklyPreExecutionFailure=function(){if(K.hasUnfilledFunctionalBlock())return ua.result=!1,ua.testResults=ra.EMPTY_FUNCTIONAL_BLOCK,ua.message=K.getUnfilledFunctionalBlockError("functional_start_setValue"),ua.preExecutionFailure=!0,!0;if(K.hasExtraTopBlocks())return ua.result=!1,ua.testResults=ra.EXTRA_TOP_BLOCKS_FAIL,ua.preExecutionFailure=!0,!0;if(K.hasEmptyFunctionOrVariableName())return ua.result=!1,ua.testResults=ra.EMPTY_FUNCTION_NAME,ua.message=L.unnamedFunction(),ua.preExecutionFailure=!0,!0;var a=ua.checkExamples_();return void 0!==a.result?($.extend(ua,a),ua.preExecutionFailure=!0,!0):!1},ua.checkExamples_=function(){var a={};if(!xa.examplesRequired)return a;var b=K.getFunctionWithoutTwoExamples();if(b)return a.result=qa.FAILURE,a.testResults=ra.EXAMPLE_FAILED,a.message=L.emptyExampleBlockErrorMsg({functionName:b}),a;var c=K.getUnfilledFunctionalExample();if(c){a.result=qa.FAILURE,a.testResults=ra.EXAMPLE_FAILED;var d=c.getRootBlock().getInputTargetBlock("ACTUAL").getTitleValue("NAME");return a.message=L.emptyExampleBlockErrorMsg({functionName:d}),a}var e=K.checkForFailingExamples(ua.getStudioExampleFailure);return e&&(a.result=!1,a.testResults=ra.EXAMPLE_FAILED,a.message=L.exampleErrorMessage({functionName:e})),a},ua.checkForEditCodePreExecutionFailure=function(){var a=ua.hasUnexpectedFunction_();return a?(ua.result=!1,ua.testResults=ra.EXTRA_FUNCTION_FAIL,ua.message=M.extraFunction({funcName:a+"()"}),ua.preExecutionFailure=!0,!0):(a=ua.hasUnexpectedLocalFunction_(),a?(ua.result=!1,ua.testResults=ra.LOCAL_FUNCTION_FAIL,ua.message=M.localFunction({funcName:a+"()"}),ua.preExecutionFailure=!0,!0):!1)},ua.hasUnexpectedFunction_=function(){if(K.editCode&&xa.preventUserDefinedFunctions&&ua.JSInterpreter){var a=ua.JSInterpreter.getGlobalFunctionNames();for(var b in Ba){var c=a.indexOf(b);-1!=c&&a.splice(c,1)}if(a.length>0)return a[0]}},ua.hasUnexpectedLocalFunction_=function(){if(K.editCode&&ua.JSInterpreter){var a=ua.JSInterpreter.getLocalFunctionNames();for(var b in Ba){var c=a.indexOf(b);if(-1!=c)return b}}};var sb={WARNING:"WARNING",ERROR:"ERROR"};ua.execute=function(){ua.result=K.UNSET,ua.testResults=ra.NO_TESTS_RUN,ua.waitingForReport=!1,ua.response=null;var a=[];if(K.isUsingBlockly()){if(ua.checkForBlocklyPreExecutionFailure())return ua.onPuzzleComplete();nb(a,"when_run","whenGameStarts"),nb(a,"functional_start_setSpeeds","whenGameStarts"),nb(a,"functional_start_setBackgroundAndSpeeds","whenGameStarts"),nb(a,"functional_start_setFuncs","whenGameStarts"),nb(a,"functional_start_setValue","whenGameStarts"),nb(a,"studio_whenLeft","when-left"),nb(a,"studio_whenRight","when-right"),nb(a,"studio_whenUp","when-up"),nb(a,"studio_whenDown","when-down"),pb(a,"studio_whenArrow","when","VALUE",["left","right","up","down"]),nb(a,"studio_repeatForever","repeatForever"),nb(a,"studio_whenTouchCharacter","whenSpriteCollided-"+(ua.protagonistSpriteIndex||0)+"-any_item"),nb(a,"studio_whenGetAllCharacters","whenGetAllItems"),pb(a,"studio_whenGetAllCharacterClass","whenGetAll","VALUE",ya.ItemClassNames),pb(a,"studio_whenGetCharacter","whenSpriteCollided-"+(ua.protagonistSpriteIndex||0),"VALUE",["any_item"].concat(ya.ItemClassNames)),nb(a,"studio_whenTouchGoal","whenTouchGoal"),xa.wallMapCollisions&&nb(a,"studio_whenTouchObstacle","whenSpriteCollided-"+(ua.protagonistSpriteIndex||0)+"-wall"),ob(a,"studio_whenSpriteClicked","whenSpriteClicked","SPRITE"),qb(a,"studio_whenSpriteCollided","whenSpriteCollided","SPRITE1","SPRITE2")}if(_.valueOr(xa.playStartSound,!0)&&ua.playSound({soundName:"start"}),K.reset(!1),xa.editCode){var b=K.getCode();if(!K.hideSource){var c=K.editor.aceEditor.getSession();fa.attachToSession(c,K.editor),fa.clearRuntimeAnnotations()}if(ua.JSInterpreter=new da({studioApp:K}),ua.JSInterpreter.onExecutionError.register(z),$a&&$a.attachTo(ua.JSInterpreter),ua.JSInterpreter.parse({code:b,blocks:ba.blocks,blockFilter:xa.executePaletteApisOnly&&xa.codeFunctions,enableEvents:!0}),!ua.JSInterpreter.initialized())return;if(ua.checkForEditCodePreExecutionFailure())return ua.onPuzzleComplete();ua.initAutoHandlers(Ba)}else rb("procedures_defreturn"),rb("procedures_defnoreturn"),rb("functional_definition"),ua.eventHandlers=a;$("#resetText, #resetTextA, #resetTextB, #overlayGroup *").attr("visibility","hidden"),ua.perExecutionTimeouts=[],ua.tickIntervalId=window.setInterval(ua.onTick,ua.scale.stepSpeed)},ua.feedbackImage="",ua.encodedFeedbackImage="",ua.onPuzzleComplete=function(){ua.executionError?ua.result=qa.ERROR:xa.freePlay&&!ua.preExecutionFailure&&(ua.result=qa.SUCCESS),ua.clearEventHandlersKillTickLoop(),ua.movementAudioOff(),xa.gridAlignedMovement&&ua.JSInterpreter&&ua.JSInterpreter.selectCurrentCode();var a=ua.result===qa.SUCCESS;ua.preExecutionFailure||ua.progressConditionTestResult||(ua.testResults=xa.freePlay?ra.FREE_PLAY:K.getTestResults(a,{executionError:ua.executionError})),ua.testResults>=ra.TOO_MANY_BLOCKS_FAIL?ua.playSound({soundName:"win"}):ua.playSound({soundName:"failure"});var b;if(xa.editCode)b=K.getCode();else{var c=Blockly.Xml.blockSpaceToDom(Blockly.mainBlockSpace);b=Blockly.Xml.domToText(c)}ua.waitingForReport=!0;var d=function(){K.report({app:"studio",level:xa.id,result:ua.result===qa.SUCCESS,testResult:ua.testResults,program:encodeURIComponent(b),image:ua.encodedFeedbackImage,onComplete:ua.onReportComplete})};"undefined"==typeof document.getElementById("svgStudio").toDataURL?d():document.getElementById("svgStudio").toDataURL("image/jpeg",{callback:function(a){ua.feedbackImage=a,ua.encodedFeedbackImage=encodeURIComponent(ua.feedbackImage.split(",")[1]),d()}})},ua.drawDebugRect=function(a,b,c,d,e){if(ta){var f=document.getElementById("svgStudio"),g=document.createElementNS(sa,"g");g.setAttribute("class",a+" debugRect");var h=document.createElementNS(sa,"rect");h.setAttribute("width",d),h.setAttribute("height",e),h.setAttribute("x",b-d/2),h.setAttribute("y",c-e/2),h.setAttribute("fill","rgba(255, 255, 255, 0.5)"),h.setAttribute("stroke","#000000"),h.setAttribute("stroke-width",1),g.appendChild(h),f.appendChild(g)}},ua.drawDebugLine=function(a,b,c,d,e,f){if(ta){f=_.valueOr(f,"#000000");var g=document.getElementById("svgStudio"),h=document.createElementNS(sa,"g");h.setAttribute("class",a+" debugLine");var i=document.createElementNS(sa,"line");i.setAttribute("x1",b),i.setAttribute("y1",c),i.setAttribute("x2",d),i.setAttribute("y2",e),i.setAttribute("stroke",f),i.setAttribute("stroke-width",2),h.appendChild(i),g.appendChild(h)}},ua.drawTimeoutRect=function(){if(xa.showTimeoutRect&&ua.timeoutFailureTick!==1/0){$(".timeoutRect").remove();var a=.5,b=.4,c=ua.timeoutFailureTick-ua.tickCount,d=c/ua.timeoutFailureTick;if(a>=d){var e=b>d?1:1-(d-b)/(a-b),f=c*ua.MAZE_WIDTH/(ua.timeoutFailureTick*a),g=6;if(f>0){var h=document.getElementById("svgStudio"),i=document.createElementNS(sa,"g");i.setAttribute("class","timeoutRect");var j=document.createElementNS(sa,"rect");j.setAttribute("opacity",e),j.setAttribute("width",f),j.setAttribute("height",g),j.setAttribute("x",0),j.setAttribute("y",ua.MAZE_HEIGHT-g),j.setAttribute("fill",xa.showTimeoutRect),i.appendChild(j),h.appendChild(i)}}}},ua.clearDebugElements=function(){$(".debugRect").remove(),$(".debugLine").remove()},ua.drawWallTile=function(a,b,c,d){var e,f,g=ya.tiles,h=0,i=ua.SQUARE_SIZE,j=0,k=8,l=8,m=!1;b==na.WALL?(e=Math.floor(Math.random()*N.WallRandomCoordMax),f=e?Math.floor(Math.random()*N.WallRandomCoordMax):1+Math.floor(Math.random()*(N.WallRandomCoordMax-1))):(e=(b&N.WallCoordRowMask)>>N.WallCoordRowShift,f=(b&N.WallCoordColMask)>>N.WallCoordColShift,h=(b&N.WallTypeMask)>>N.WallTypeShift,h===N.WallType.JUMBO_SIZE?(m=!0,i=ya[ua.background].jumboTilesSize,k=ya[ua.background].jumboTilesRows,l=ya[ua.background].jumboTilesCols):h===N.WallType.DOUBLE_SIZE&&(i=2*ua.SQUARE_SIZE)),ua.background&&!m&&ya[ua.background].tiles?g=ya[ua.background].tiles:ua.background&&m&&ya[ua.background].jumboTiles&&(g=ya[ua.background].jumboTiles,j=ya[ua.background].jumboTilesAddOffset);var n=document.createElementNS(sa,"clipPath"),o="tile_clippath_"+ua.tiles.length;n.setAttribute("id",o),n.setAttribute("class","tile");var p=document.createElementNS(sa,"rect");p.setAttribute("width",i),p.setAttribute("height",i),p.setAttribute("x",d*ua.SQUARE_SIZE+j),p.setAttribute("y",c*ua.SQUARE_SIZE+j),n.appendChild(p),a.appendChild(n);var q=document.createElementNS(sa,"image"),r="tile_"+ua.tiles.length;q.setAttribute("id",r),q.setAttribute("class","tileClip"),q.setAttribute("width",l*i),q.setAttribute("height",k*i),q.setAttribute("x",d*ua.SQUARE_SIZE-f*i+j),q.setAttribute("y",c*ua.SQUARE_SIZE-e*i+j),q.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",g),a.appendChild(q),q.setAttribute("clip-path","url(#"+o+")");var s={};s.bottomY=c*ua.SQUARE_SIZE+j+i,ua.tiles.push(s)},ua.createLevelItems=function(a){for(var b=0;b<ua.ROWS;b++)for(var c=0;c<ua.COLS;c++)for(var d=ua.map[b][c],e=0;e<ya.ItemClassNames.length;e++)if(N.squareHasItemClass(e,d)){var f=ua.getItemOptionsForItemClass(ya.ItemClassNames[e]),g=$.extend({},f,{x:ua.HALF_SQUARE+ua.SQUARE_SIZE*c,y:ua.HALF_SQUARE+ua.SQUARE_SIZE*b}),h=new W(g);h.createElement(a),h.display(),ua.items.push(h)}},ua.drawMapTiles=function(a){if(ua.wallMap||!ua.tilesDrawn){ua.tilesDrawn=!0;var b,c,d=[];for(b=0;b<ua.ROWS;b++)for(d[b]=[],c=0;c<ua.COLS;c++)d[b][c]=!1;var e=document.getElementById("backgroundLayer");for(b=0;b<ua.ROWS;b++)for(c=0;c<ua.COLS;c++){var f=ua.getWallValue(b,c);if(f){if(d[b][c])continue;var g=(f&N.WallTypeMask)>>N.WallTypeShift;g===N.WallType.DOUBLE_SIZE&&(d[b][c]=!0,d[b][c+1]=!0,d[b+1][c]=!0,d[b+1][c+1]=!0),ua.drawWallTile(e,f,b,c)}}}};var tb=function(a){var b=+a.getAttribute("height"),c="true"===a.getAttribute("onTop"),d="true"===a.getAttribute("onRight");a.setAttribute("d",Ab(0,0,Ta,b,Ma,c,d))};ua.displaySprite=function(a){var b=ua.sprite[a];if("hidden"!==b.value){var c=0,d=0;if(xa.gridAlignedMovement&&(c=ya.gridSpriteRenderOffsetX||0,d=ya.gridSpriteRenderOffsetY||0),b.hasActions())b.updateActions();else{var e=la.NONE,f=b.lastDrawPosition;b.displayX=b.x,b.displayY=b.y;var g=b.getCurrentDrawPosition();(g.x!==f.x||g.y!==f.y)&&(g.x<f.x?e|=la.WEST:g.x>f.x&&(e|=la.EAST),g.y<f.y?e|=la.NORTH:g.y>f.y&&(e|=la.SOUTH)),(e!==la.NONE||b.lastMove===1/0)&&b.setDirection(e)}b.dir!==b.displayDir&&ua.tickCount&&0===ua.tickCount%2&&(b.displayDir=ma[b.displayDir][b.dir]),b.display();var h=document.getElementById("speechBubble"+a),i=document.getElementById("speechBubblePath"+a),j=+i.getAttribute("height"),k="true"===i.getAttribute("onTop"),l="true"===i.getAttribute("onRight"),m=!0,n=!0,o=b.y-(j+Oa);0>o&&(o=b.y+b.height+Oa,m=!1);var p=b.x+Na;p>ua.MAZE_WIDTH-Ta&&(p=b.x+b.width-(Ta+Na),n=!1),i.setAttribute("onTop",m),i.setAttribute("onRight",n),(k!==m||l!==n)&&tb(i),h.setAttribute("transform","translate("+p+","+o+")")}},ua.displayScore=function(){var a=document.getElementById("score");ua.scoreText?a.textContent=ua.scoreText:a.textContent=M.scoreText({playerScore:ua.playerScore}),a.setAttribute("visibility","visible")},ua.displayVictoryText=function(){var a=document.getElementById("victoryText");if(a.textContent=ua.victoryText,a.setAttribute("visibility","visible"),T.isMobile()||T.isWindowsTouch()){var b=document.getElementById("resetTextA"),c=document.getElementById("resetTextB");c.textContent=M.tapToReset(),b.setAttribute("visibility","hidden"),c.setAttribute("visibility","visible"),$("#overlayGroup image, #overlayGroup rect").attr("visibility","hidden")}else{var d=document.getElementById("resetText");d.textContent=M.tapOrClickToReset(),d.setAttribute("visibility","visible")}},ua.animateGoals=function(){var a,b,c,d,e=new Date,f=xa.goalOverride&&xa.goalOverride.goalAnimation,g=ya.fadeOutGoal;f&&(a=e-ua.startTime,b=ya.animatedGoalFrames,c=ya.timePerGoalAnimationFrame,d=ya.goalSpriteWidth);for(var h=7,i=0;i<ua.spriteGoals_.length;i++){var j=ua.spriteGoals_[i];if(!j.finished||j.startFadeTime){var k=document.getElementById("spriteFinish"+i),l=document.getElementById("finishClipRect"+i);if(f){var m=parseInt(l.getAttribute("x"),10),n=(i*h+Math.floor(a/c))%b;k.setAttribute("x",m-n*d)}if(g){var o=N.GOAL_FADE_TIME;if(j.startFadeTime){var p=1-(e-j.startFadeTime)/o;0>p&&(p=0,j.startFadeTime=null),k.setAttribute("opacity",p)}}}}},ua.loadClouds=function(){var a,b,c=ua.background&&ya[ua.background].clouds;if(c)for(b=0;b<ya[ua.background].clouds.length;b++){a=document.getElementById("cloud"+b),a.setAttribute("width",N.CLOUD_SIZE),a.setAttribute("height",N.CLOUD_SIZE),a.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",ya[ua.background].clouds[b]),a.setAttribute("opacity",N.CLOUD_OPACITY);var d=ua.getCloudLocation(b);a.setAttribute("x",d.x),a.setAttribute("y",d.y)}else for(b=0;b<N.MAX_NUM_CLOUDS;b++)a=document.getElementById("cloud"+b),a.setAttribute("x",-N.CLOUD_SIZE),a.setAttribute("y",-N.CLOUD_SIZE)},ua.animateClouds=function(){var a=ua.background&&ya[ua.background].clouds;if(a){ua.cloudStep++;for(var b=0;b<ya[ua.background].clouds.length;b++){var c=ua.getCloudLocation(b),d=document.getElementById("cloud"+b);d.setAttribute("x",Math.round(c.x)),d.setAttribute("y",Math.round(c.y))}}},ua.getCloudLocation=function(a){var b,c,d=[50,60],e=ua.MAZE_WIDTH+N.CLOUD_SIZE,f=30*ua.cloudStep,g=f/d[a]%e;return 0===a?(b=g-ua.MAZE_WIDTH/4,c=b-ua.MAZE_HEIGHT/2):(b=ua.MAZE_WIDTH-g,c=b+ua.MAZE_HEIGHT/2),{x:b,y:c}},ua.displayFloatingScore=function(a){if(xa.floatingScore){var b=ua.sprite[0],c=document.getElementById("floatingScore");c.textContent=a>0?"+"+a:a,c.setAttribute("x",b.x+b.width/2),c.setAttribute("y",b.y+b.height/2),c.setAttribute("opacity",1),c.setAttribute("visibility","visible")}},ua.updateFloatingScore=function(){if(xa.floatingScore){var a=document.getElementById("floatingScore"),b=parseInt(a.getAttribute("y")),c=parseFloat(a.getAttribute("opacity"));c>0&&(c+=N.floatingScoreChangeOpacity,a.setAttribute("opacity",c),b+=N.floatingScoreChangeY,a.setAttribute("y",b))}},ua.showCoordinates=function(){var a=ua.sprite[ua.protagonistSpriteIndex||0];if(a){var b=a.x+50,c=350-a.y;ua.setScoreText({text:"x: "+b+" y: "+c})}},ua.queueCmd=function(a,b,c){var d={id:a,name:b,opts:c};if(K.isUsingBlockly()&&ua.currentCmdQueue){if(ua.currentEventParams)for(var e in ua.currentEventParams)d.opts[e]=ua.currentEventParams[e];ua.currentCmdQueue.push(d)}else ua.callCmd(d)},ua.executeQueue=function(a,b){ua.eventHandlers.forEach(function(b){if(!(ua.yieldExecutionTicks>0)&&b.name===a&&b.cmdQueue.length)for(var c=b.cmdQueue[0];c&&ua.callCmd(c)&&(b.cmdQueue.shift(),!(ua.yieldExecutionTicks>0));c=b.cmdQueue[0]);})},ua.callCmd=function(a){switch(a.name){case"endGame":K.highlight(a.id),ua.endGame(a.opts);break;case"setBackground":K.highlight(a.id),ua.setBackground(a.opts),ua.trackedBehavior.hasSetBackground=!0;break;case"setMap":K.highlight(a.id),ua.setMap(a.opts),ua.trackedBehavior.hasSetMap=!0;break;case"setSprite":K.highlight(a.id),ua.setSprite(a.opts),ua.trackedBehavior.hasSetSprite=!0;break;case"saySprite":return a.opts.started||K.highlight(a.id),ua.saySprite(a.opts);case"setSpriteEmotion":K.highlight(a.id),ua.setSpriteEmotion(a.opts),ua.trackedBehavior.hasSetEmotion=!0;break;case"setSpriteSpeed":K.highlight(a.id),ua.setSpriteSpeed(a.opts);break;case"setDroidSpeed":K.highlight(a.id),ua.setDroidSpeed(a.opts),ua.trackedBehavior.hasSetDroidSpeed=!0;break;case"setSpriteSize":K.highlight(a.id),ua.setSpriteSize(a.opts);break;case"setSpritePosition":K.highlight(a.id),ua.setSpritePosition(a.opts);break;case"setSpriteXY":K.highlight(a.id),ua.setSpriteXY(a.opts);break;case"playSound":K.highlight(a.id),ua.playSound(a.opts);break;case"showTitleScreen":return a.opts.started||K.highlight(a.id),ua.showTitleScreen(a.opts);case"move":K.highlight(a.id),ua.moveSingle(a.opts);break;case"moveRight":K.highlight(a.id),ua.moveSingle({spriteIndex:ua.protagonistSpriteIndex||0,dir:la.EAST});break;case"moveLeft":K.highlight(a.id),ua.moveSingle({spriteIndex:ua.protagonistSpriteIndex||0,dir:la.WEST});break;case"moveUp":K.highlight(a.id),ua.moveSingle({spriteIndex:ua.protagonistSpriteIndex||0,dir:la.NORTH});break;case"moveDown":K.highlight(a.id),ua.moveSingle({spriteIndex:ua.protagonistSpriteIndex||0,dir:la.SOUTH});break;case"moveDistance":return a.opts.started||K.highlight(a.id),ua.moveDistance(a.opts);case"stop":K.highlight(a.id),ua.stop(a.opts);break;case"throwProjectile":return a.opts.started||K.highlight(a.id),ua.trackedBehavior.hasThrownProjectile=!0,ua.throwProjectile(a.opts);case"makeProjectile":K.highlight(a.id),ua.makeProjectile(a.opts);break;case"changeScore":K.highlight(a.id),ua.changeScore(a.opts);break;case"reduceScore":K.highlight(a.id),ua.reduceScore(a.opts);break;case"setScoreText":K.highlight(a.id),ua.setScoreText(a.opts);break;case"showCoordinates":K.highlight(a.id),ua.showCoordinates();break;case"wait":return a.opts.started||K.highlight(a.id),ua.wait(a.opts);case"vanish":K.highlight(a.id),ua.vanishActor(a.opts);break;case"addItem":K.highlight(a.id),ua.addItem(a.opts),ua.trackedBehavior.hasAddedItem=!0;break;case"setItemActivity":K.highlight(a.id),ua.setItemActivity(a.opts);break;case"setItemSpeed":K.highlight(a.id),ua.setItemSpeed(a.opts);break;case"showDebugInfo":K.highlight(a.id),ua.showDebugInfo(a.opts);break;case"onEvent":K.highlight(a.id),ua.onEvent(a.opts)}return!0},ua.makeThrottledPlaySound=function(){ua.throttledPlaySound=aa.throttle(K.playAudio.bind(K),N.SOUND_THROTTLE_TIME)},ua.makeThrottledSpriteWallCollisionHelpers=function(){ua.throttledCollideSpriteWithWallFunctions=[];for(var a=function(a){return function(){ua.collideSpriteWith(a,"wall"),ua.sprite[a].endCollision("wall")}},b=0;b<ua.spriteCount;b++)ua.throttledCollideSpriteWithWallFunctions[b]=aa.throttle(a(b),N.TOUCH_OBSTACLE_THROTTLE_TIME)},ua.playSound=function(a){if("string"!=typeof a.soundName)throw new TypeError("Incorrect parameter: "+a.soundName);var b=a.soundName.toLowerCase().trim(),c=ka.getPlaySoundValues(!1);if(b===N.RANDOM_VALUE)b=c[Math.floor(Math.random()*c.length)].toLowerCase();else{var d=function(a){return-1!=c.indexOf(a)};for(var e in ya.soundGroups){var f=ya.soundGroups[e];if(b===f.randomValue.toLowerCase()){for(var g=[],h=f.minSuffix;h<=f.maxSuffix;h++)g.push(e+h);g.filter(d),b=g[Math.floor(Math.random()*g.length)].toLowerCase();break}}}if(!ya.soundFiles[b])throw new RangeError("Incorrect parameter: "+a.soundName);var i=_.valueOr(ya.soundMetadata,[]),j=$.extend({volume:1},aa.find(i,function(a){return a.name.toLowerCase().trim()===b}));ua.throttledPlaySound(b,j),ua.playSoundCount++},ua.getItemOptionsForItemClass=function(a){var b=_.valueOr(ya.specialItemProperties[a],{});return{className:a,image:ya[a],frames:A(a,ya.specialItemProperties,ya.itemFrames),loop:!0,width:b.width,height:b.height,dir:la.NONE,speed:ua.itemSpeed[a],normalSpeed:b.speed,activity:_.valueOr(ua.itemActivity[a],"roam"),isHazard:b.isHazard,spritesCounterclockwise:b.spritesCounterclockwise,renderOffset:_.valueOr(b.renderOffset,{x:0,y:0}),renderScale:_.valueOr(b.scale,1),animationFrameDuration:b.animationFrameDuration}},ua.addItem=function(a){if("string"!=typeof a.className)throw new TypeError("Incorrect parameter: "+a.className);var b=a.className.toLowerCase().trim();b===N.RANDOM_VALUE&&(b=ya.ItemClassNames[Math.floor(Math.random()*ya.ItemClassNames.length)]);var c=ya[b];if(!c)throw new RangeError("Incorrect parameter: "+a.className);var d=[la.NORTH,la.EAST,la.SOUTH,la.WEST,la.NORTHEAST,la.SOUTHEAST,la.SOUTHWEST,la.NORTHWEST],e=function(){var a={};return xa.itemGridAlignedMovement?(a.x=ua.HALF_SQUARE+ua.SQUARE_SIZE*Math.floor(Math.random()*ua.COLS),a.y=ua.HALF_SQUARE+ua.SQUARE_SIZE*Math.floor(Math.random()*ua.ROWS)):(a.x=ua.HALF_SQUARE+Math.floor(Math.random()*(ua.MAZE_WIDTH-ua.SQUARE_SIZE)),a.y=ua.HALF_SQUARE+Math.floor(Math.random()*(ua.MAZE_HEIGHT-ua.SQUARE_SIZE))),a},f=e(),g=xa.itemGridAlignedMovement?la.NONE:d[Math.floor(Math.random()*d.length)],h=$.extend({},ua.getItemOptionsForItemClass(b),{x:f.x,y:f.y,dir:g}),i=new W(h);if(xa.blockMovingIntoWalls)for(var j=0,k=100;ua.willCollidableTouchWall(i,i.x,i.y)||ua.getDistance(ua.sprite[0].x+ua.sprite[0].width/2,ua.sprite[0].y+ua.sprite[0].height/2,i.x,i.y)<k;){var l=e();if(i.x=l.x,i.y=l.y,j++,j>100)break}i.createElement(document.getElementById("spriteLayer")),ua.items.push(i)},ua.getDistance=function(a,b,c,d){return Math.sqrt(Math.pow(c-a,2)+Math.pow(d-b,2))},ua.setItemActivity=function(a){if("string"!=typeof a.className)throw new TypeError("Incorrect parameter: "+a.className);var b=a.className.toLowerCase().trim();b===N.RANDOM_VALUE&&(b=ya.ItemClassNames[Math.floor(Math.random()*ya.ItemClassNames.length)]);var c=ya[b];if(!c)throw new RangeError("Incorrect parameter: "+a.className);("roam"===a.type||"chase"===a.type||"flee"===a.type||"none"===a.type)&&(ua.itemActivity[b]=a.type,ua.items.forEach(function(c){c.className===b&&(c.setActivity(a.type),ua.trackedBehavior.setActivityRecord||(ua.trackedBehavior.setActivityRecord=[]),ua.trackedBehavior.setActivityRecord[b]||(ua.trackedBehavior.setActivityRecord[b]=[]),ua.trackedBehavior.setActivityRecord[b][a.type]=!0)}))},ua.setItemSpeed=function(a){if("string"!=typeof a.className)throw new TypeError("Incorrect parameter: "+a.className);var b=a.className.toLowerCase().trim();b===N.RANDOM_VALUE&&(b=ya.ItemClassNames[Math.floor(Math.random()*ya.ItemClassNames.length)]);var c=ya[b];if(!c)throw new RangeError("Incorrect parameter: "+a.className);var d=_.valueOr(ya.specialItemProperties[b].speed,N.DEFAULT_ITEM_SPEED);"fast"===a.speed.toLowerCase()?d=Math.floor(2*d):"slow"===a.speed.toLowerCase()&&(d=Math.floor(d/2)),ua.itemSpeed[b]=d,ua.items.forEach(function(a){a.className===b&&a.setSpeed(d)})},ua.showDebugInfo=function(a){ta=a.value},ua.vanishActor=function(a){var b=document.getElementById("spriteLayer"),c=a.spriteIndex;if(0>c||c>=ua.spriteCount)throw new RangeError("Incorrect parameter: "+c);var d=ua.sprite[c],e=d.visible||d.isFading();if(e){var f,g=document.getElementById("explosion"+c);if(!g){var h=document.createElementNS(sa,"clipPath");h.setAttribute("id","explosionClipPath"+c),f=document.createElementNS(sa,"rect"),f.setAttribute("id","explosionClipRect"+c),f.setAttribute("width",d.height),f.setAttribute("height",d.width),h.appendChild(f),b.appendChild(h),g=document.createElementNS(sa,"image"),g.setAttribute("id","explosion"+c),g.setAttribute("visibility","hidden"),g.setAttribute("clip-path","url(#explosionClipPath"+c+")"),b.insertBefore(g,d.getElement()||d.getLegacyElement())}var i=d.width,j=ya.explosionFrames,k=d.getCurrentDrawPosition(),l={x:k.x-d.width/2,y:k.y-d.height/2};g.setAttribute("height",d.height),g.setAttribute("width",j*i),g.setAttribute("x",l.x),g.setAttribute("y",l.y),g.setAttribute("visibility","visible"),f=document.getElementById("explosionClipRect"+c),f.setAttribute("x",l.x),f.setAttribute("y",l.y),ya.fadeExplosion?d.startFade(ya.explosionFrames*ya.timePerExplosionFrame):ua.setSprite({spriteIndex:c,value:"hidden"}),aa.range(0,j).forEach(function(a){ua.perExecutionTimeouts.push(setTimeout(function(){g.setAttribute("x",l.x-a*i)},a*ya.timePerExplosionFrame))}),ua.perExecutionTimeouts.push(setTimeout(function(){g.setAttribute("visibility","hidden"),ya.fadeExplosion&&(ua.setSprite({spriteIndex:c,value:"hidden"}),d.setOpacity(1))},ya.timePerExplosionFrame*(j+1))),g.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",ya.explosion+"?spriteIndex="+c)}},ua.setSpriteEmotion=function(a){ua.sprite[a.spriteIndex].emotion=a.value},ua.setSpriteSpeed=function(a){var b=Math.min(Math.max(a.value,N.SpriteSpeed.SLOW),N.SpriteSpeed.VERY_FAST);ua.sprite[a.spriteIndex].setSpeed(b)};var ub={slow:N.SpriteSpeed.SLOW,normal:N.SpriteSpeed.NORMAL,fast:N.SpriteSpeed.VERY_FAST};ua.setDroidSpeed=function(a){if("string"!=typeof a.value)throw new TypeError("Incorrect parameter: "+a.value);var b=a.value.toLowerCase().trim();b===N.RANDOM_VALUE&&(b=_.randomKey(ub));var c=ub[b];if("undefined"==typeof c)throw new RangeError("Incorrect parameter: "+a.value);a.value=c,a.spriteIndex=ua.protaganistSpriteIndex||0,ua.setSpriteSpeed(a)},ua.setSpriteSize=function(a){if(ua.sprite[a.spriteIndex].size!==a.value){ua.sprite[a.spriteIndex].size=a.value;var b=ua.sprite[a.spriteIndex].value;"hidden"!==b&&(ua.sprite[a.spriteIndex].image=void 0,ua.sprite[a.spriteIndex].legacyImage=void 0,ua.setSprite({spriteIndex:a.spriteIndex,value:b}))}},ua.changeScore=function(a){if("number"!=typeof a.value&&("string"!=typeof a.value||isNaN(a.value)))throw new TypeError("Incorrect parameter: "+a.value);ua.adjustScore(Number(a.value))},ua.reduceScore=function(a){if("number"!=typeof a.value&&("string"!=typeof a.value||isNaN(a.value)))throw new TypeError("Incorrect parameter: "+a.value);ua.adjustScore(-Number(a.value))},ua.adjustScore=function(a){ua.playerScore+=a,ua.displayScore(),ua.displayFloatingScore(a),ua.playerScore-a<1e3&&ua.playerScore>=1e3&&h("whenScore1000");
},ua.setScoreText=function(a){ua.scoreText=a.text,ua.displayScore()},ua.setVictoryText=function(a){ua.victoryText=a.text,ua.displayVictoryText()},ua.endGame=function(a){if("string"!=typeof a.value)throw new TypeError("Incorrect parameter: "+a.value);var b=a.value.toLowerCase().trim();if("win"==b)ua.trackedBehavior.hasWonGame=!0,ua.setVictoryText({text:M.winMessage()});else{if("lose"!=b)throw new RangeError("Incorrect parameter: "+a.value);ua.trackedBehavior.hasLostGame=!0,ua.setVictoryText({text:M.loseMessage()})}ua.gameState=ua.GameStates.OVER},ua.setBackground=function(a){if("string"!=typeof a.value)throw new TypeError("Incorrect parameter: "+a.value);var b=a.value.toLowerCase().trim();if(b===N.RANDOM_VALUE){var c=ya.backgroundChoicesK1[Math.floor(Math.random()*(ya.backgroundChoicesK1.length-1))][1];b=c.replace(/^"(.*)"$/,"$1")}var d=ya[b];if(!d)throw new RangeError("Incorrect parameter: "+a.value);if(b!==ua.background){ua.background=b;var e=document.getElementById("background");e.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",d.background),xa.wallMapCollisions&&ua.wallMapRequested&&ua.setMap({value:ua.wallMapRequested,forceRedraw:!0}),ua.loadClouds()}},ua.setMap=function(a){if("string"!=typeof a.value)throw new TypeError("Incorrect parameter: "+a.value);var b=a.value.toLowerCase().trim();if(b===N.RANDOM_VALUE){var c=ya.mapChoices[Math.floor(1+Math.random()*(ya.mapChoices.length-1))][1];b=c.replace(/^"(.*)"$/,"$1")}var d;if(d="default"===b?null:ya.getMap?ya.getMap(ua.background,b):b,null!==d&&!ya[d])throw new RangeError("Incorrect parameter: "+a.value);(a.forceRedraw||d!==ua.wallMap)&&(ua.wallMap=d,ua.wallMapRequested=a.value,$(".tileClip").remove(),$(".tile").remove(),ua.tiles=[],ua.drawMapTiles(),ua.fixSpriteLocation(),k())},ua.fixSpriteLocation=function(){if(xa.wallMapCollisions&&xa.blockMovingIntoWalls){var a=0;if(ua.sprite.length<=a)return;var b=ua.sprite[a],c=eb(a,!1,!1),d=eb(a,!0,!1);if(ua.willSpriteTouchWall(b,c,d)){var e=c+b.width/2,f=d+b.height/2;e+=ya.wallCollisionRectOffsetX+ya.wallCollisionRectWidth/2,f+=ya.wallCollisionRectOffsetY+ya.wallCollisionRectHeight/2;for(var g=Math.floor(e/ua.SQUARE_SIZE),h=Math.floor(f/ua.SQUARE_SIZE),i=Math.max(h-1,0),j=Math.min(h+1,ua.ROWS-1),k=Math.max(g-1,0),l=Math.min(g+1,ua.COLS-1),m=i;j>=m;m++)for(var n=k;l>=n;n++)if(!ua.getWallValue(m,n))return b.x=ua.HALF_SQUARE+ua.SQUARE_SIZE*n-b.width/2-ya.wallCollisionRectOffsetX,b.y=ua.HALF_SQUARE+ua.SQUARE_SIZE*m-b.height/2-ya.wallCollisionRectOffsetY,void b.setDirection(la.NONE)}}},ua.setSprite=function(a){if("string"!=typeof a.value)throw new TypeError("Incorrect parameter: "+a.value);var b=a.value.toLowerCase().trim();b===N.RANDOM_VALUE&&(b=ya.avatarList[Math.floor(Math.random()*ya.avatarList.length)]);var c=ya[b];if(!c&&"hidden"!==b&&"visible"!==b)throw new RangeError("Incorrect parameter: "+a.value);var d=a.spriteIndex;if(0>d||d>=ua.spriteCount)throw new RangeError("Incorrect parameter: "+d);var e=ua.sprite[d];if(e.visible="hidden"!==b&&!a.forceHidden,e.value=a.forceHidden?"hidden":b,"hidden"!==b&&"visible"!==b){e.frameCounts=c.frameCounts,e.setNormalFrameDuration(c.animationFrameDuration),e.drawScale=_.valueOr(c.drawScale,1),xa.gridAlignedMovement?(e.height=e.width=ua.SQUARE_SIZE,e.size=e.width/ya.spriteWidth,e.drawHeight=e.drawScale*e.size*ya.spriteHeight,e.drawWidth=e.drawScale*e.size*ya.spriteWidth):(e.drawHeight=e.height=e.drawScale*e.size*ya.spriteHeight,e.drawWidth=e.width=e.drawScale*e.size*ya.spriteWidth),ya.projectileSpriteHeight&&(e.projectileSpriteHeight=e.size*ya.projectileSpriteHeight),ya.projectileSpriteWidth&&(e.projectileSpriteWidth=e.size*ya.projectileSpriteWidth),e.setImage(c.walk,e.frameCounts),e.setLegacyImage(c.sprite,e.frameCounts),e.createElement(document.getElementById("spriteLayer"));var f=e.getLegacyElement();if(f&&T.addMouseDownTouchEvent(e.getLegacyElement(),bb(this,ua.onSpriteClicked,d)),f=e.getElement(),f&&T.addMouseDownTouchEvent(e.getElement(),bb(this,ua.onSpriteClicked,d)),ua.movementAudioOff(),!ua.movementAudioEffects[b]&&ya.avatarList){var g=ya[b]||{},h=g.movementAudio||[];ua.movementAudioEffects[b]=[],K.cdoSounds&&(ua.movementAudioEffects[b]=h.map(function(a){return new ia(K.cdoSounds,a)}))}ua.currentSpriteMovementAudioEffects=ua.movementAudioEffects[b],ua.displaySprite(d)}};var vb=!1;ua.isMovementAudioOn=function(){return vb},ua.movementAudioOn=function(){ua.movementAudioOff(),ua.currentMovementAudio=ua.currentSpriteMovementAudioEffects[Math.floor(Math.random()*ua.currentSpriteMovementAudioEffects.length)],ua.currentMovementAudio&&ua.currentMovementAudio.on(),vb=!0},ua.movementAudioOff=function(){ua.currentMovementAudio&&ua.currentMovementAudio.off(),vb=!1};var wb=function(a,b){return a+" "+b+" "},xb=15,yb=25,zb=10,Ab=function(a,b,c,d,e,f,g){var h="M"+wb(a+e,b);return f||(h+=g?"L"+wb(a+e-zb,b-xb)+"L"+wb(a+e+yb,b):"L"+wb(a+c-e-yb,b)+"L"+wb(a+c-zb,b-xb)),h+="L"+wb(a+c-e,b),h+="Q"+wb(a+c,b)+wb(a+c,b+e),h+="L"+wb(a+c,b+d-e)+"Q"+wb(a+c,b+d)+wb(a+c-e,b+d),f&&(h+=g?"L"+wb(a+e+yb,b+d)+"L"+wb(a+e-zb,b+d+xb):"L"+wb(a+c-zb,b+d+xb)+"L"+wb(a+c-e-yb,b+d)),h+="L"+wb(a+e,b+d),h+="Q"+wb(a,b+d)+wb(a,b+d-e),h+="L"+wb(a,b+e)+"Q"+wb(a,b)+wb(a+e,b),h+="Z"},Bb=function(a){a.complete||(a.waitCallback&&a.waitCallback(),a.complete=!0)};ua.wait=function(a){return a.started||(a.started=!0,"click"===a.value?a.waitForClick=!0:a.waitTimeout=window.setTimeout(bb(this,Bb,a),a.value)),a.complete},ua.hideTitleScreen=function(a){var b=document.getElementById("titleScreenTitle"),c=document.getElementById("titleScreenTextGroup");b.setAttribute("visibility","hidden"),c.setAttribute("visibility","hidden"),a.complete=!0},ua.showTitleScreen=function(a){if(!a.started){a.started=!0;var b=document.getElementById("titleScreenTitle"),c=document.getElementById("titleScreenTextGroup"),d=document.getElementById("titleScreenText"),e=document.getElementById("titleScreenTextRect");b.textContent=a.title;var f={svgText:d,text:a.text,width:Ka,lineHeight:Ga,topMargin:Ia,sideMargin:Fa,maxLines:Ha,fullHeight:La},g=gb(f);e.setAttribute("height",g),b.setAttribute("visibility","visible"),c.setAttribute("visibility","visible"),a.waitForClick=!0,a.waitCallback=bb(this,ua.hideTitleScreen,a),a.waitTimeout=window.setTimeout(bb(this,Bb,a),Ca)}return a.complete},ua.isCmdCurrentInQueue=function(a,b){var c=!1;return ua.eventHandlers.forEach(function(d){if(d.name===b){var e=d.cmdQueue[0];e&&e.name===a&&(c=!0)}}),c},ua.hideSpeechBubble=function(a){var b=document.getElementById("speechBubble"+a.spriteIndex);b.setAttribute("visibility","hidden"),b.removeAttribute("onTop"),b.removeAttribute("onRight"),b.removeAttribute("height"),a.complete=!0,delete ua.sprite[a.spriteIndex].bubbleTimeoutFunc,ua.sayComplete++},ua.saySprite=function(a){if(a.started)return a.complete;var b=a.spriteIndex,c=ua.sprite[b];if(c){if(a.started=!0,c.bubbleTimeoutFunc&&c.bubbleTimeoutFunc(),window.clearTimeout(c.bubbleTimeout),!c.visible)return a.complete=!0,a.complete;var d=document.getElementById("speechBubbleText"+b),e={svgText:d,text:a.text,width:Ta,lineHeight:Qa,topMargin:Sa,sideMargin:Pa,maxLines:Ra,fullHeight:Ua},f=gb(e),g=document.getElementById("speechBubblePath"+b),h=document.getElementById("speechBubble"+b);return g.setAttribute("height",f),tb(g),ua.displaySprite(a.spriteIndex),h.setAttribute("visibility","visible"),c.bubbleTimeoutFunc=bb(this,ua.hideSpeechBubble,a),c.bubbleTimeout=window.setTimeout(c.bubbleTimeoutFunc,1e3*a.seconds),a.complete}},ua.stop=function(a){if(db(a.spriteIndex,!0),db(a.spriteIndex,!1),!a.dontResetCollisions){var b=ua.sprite[a.spriteIndex];if(!b)return;b.clearCollisions();for(var c=0;c<ua.spriteCount;c++)c!==a.spriteIndex&&ua.sprite[c].endCollision(a.spriteIndex)}},ua.throwProjectile=function(a){if(a.started)return a.complete;a.started=!0,a.complete=!1,window.setTimeout(function(){a.complete=!0},Ya);var b=ua.sprite[a.spriteIndex];if(b.visible){var c=ya.preventProjectileLoop&&ya.preventProjectileLoop(a.className),d={frames:A(a.className,ya.specialProjectileProperties,ya.projectileFrames),className:a.className,dir:a.dir,image:ya[a.className],loop:!c,spriteX:b.x,spriteY:b.y,spriteHeight:b.projectileSpriteHeight||b.height,spriteWidth:b.projectileSpriteWidth||b.width},e=new V(d);e.createElement(document.getElementById("svgStudio")),ua.projectiles.push(e)}};var Cb=function(a,b){if("bounce"===b)a.bounce();else{if("disappear"!==b)throw"unknown action in doMakeProjectile";a.removeElement();var c=ua.projectiles.indexOf(a);if(-1!==c)return ua.projectiles.splice(c,1),!0}return!1};ua.makeProjectile=function(a){if(a.eventObject)Cb(a.eventObject,a.action);else for(var b=0;b<ua.projectiles.length;b++)ua.projectiles[b].className===a.className&&Cb(ua.projectiles[b],a.action)&&b--};var Db=function(a,b){switch(b){case N.Position.OUTTOPOUTLEFT:case N.Position.TOPOUTLEFT:case N.Position.MIDDLEOUTLEFT:case N.Position.BOTTOMOUTLEFT:case N.Position.OUTBOTTOMOUTLEFT:return-a.width;case N.Position.OUTTOPLEFT:case N.Position.TOPLEFT:case N.Position.MIDDLELEFT:case N.Position.BOTTOMLEFT:case N.Position.OUTBOTTOMLEFT:return 0;case N.Position.OUTTOPCENTER:case N.Position.TOPCENTER:case N.Position.MIDDLECENTER:case N.Position.BOTTOMCENTER:case N.Position.OUTBOTTOMCENTER:return(ua.MAZE_WIDTH-a.width)/2;case N.Position.OUTTOPRIGHT:case N.Position.TOPRIGHT:case N.Position.MIDDLERIGHT:case N.Position.BOTTOMRIGHT:case N.Position.OUTBOTTOMRIGHT:return ua.MAZE_WIDTH-a.width;case N.Position.OUTTOPOUTRIGHT:case N.Position.TOPOUTRIGHT:case N.Position.MIDDLEOUTRIGHT:case N.Position.BOTTOMOUTRIGHT:case N.Position.OUTBOTTOMOUTRIGHT:return ua.MAZE_WIDTH}},Eb=function(a,b){switch(b){case N.Position.OUTTOPOUTLEFT:case N.Position.OUTTOPLEFT:case N.Position.OUTTOPCENTER:case N.Position.OUTTOPRIGHT:case N.Position.OUTTOPOUTRIGHT:return-a.height;case N.Position.TOPOUTLEFT:case N.Position.TOPLEFT:case N.Position.TOPCENTER:case N.Position.TOPRIGHT:case N.Position.TOPOUTRIGHT:return 0;case N.Position.MIDDLEOUTLEFT:case N.Position.MIDDLELEFT:case N.Position.MIDDLECENTER:case N.Position.MIDDLERIGHT:case N.Position.MIDDLEOUTRIGHT:return(ua.MAZE_HEIGHT-a.height)/2;case N.Position.BOTTOMOUTLEFT:case N.Position.BOTTOMLEFT:case N.Position.BOTTOMCENTER:case N.Position.BOTTOMRIGHT:case N.Position.BOTTOMOUTRIGHT:return ua.MAZE_HEIGHT-a.height;case N.Position.OUTBOTTOMOUTLEFT:case N.Position.OUTBOTTOMLEFT:case N.Position.OUTBOTTOMCENTER:case N.Position.OUTBOTTOMRIGHT:case N.Position.OUTBOTTOMOUTRIGHT:return ua.MAZE_HEIGHT}};ua.collideItemWith=function(a,b,c){a.startCollision(b)&&G(a.className,b,c)},ua.collideSpriteWith=function(a,b,c){var d=ua.sprite[a];d.startCollision(b)&&F(a,b,c)},ua.setSpritePosition=function(a){var b=ua.sprite[a.spriteIndex];a.value&&(a.x=Db(b,a.value),a.y=Eb(b,a.value));var c=b.x===a.x&&b.y===a.y;ua.stop({spriteIndex:a.spriteIndex,dontResetCollisions:c}),b.displayX=b.x=a.x,b.displayY=b.y=a.y,b.setDirection(la.NONE)},ua.setSpriteXY=function(a){var b=ua.sprite[a.spriteIndex],c=a.x-b.width/2,d=a.y-b.height/2,e=b.x===c&&b.y===d;ua.stop({spriteIndex:a.spriteIndex,dontResetCollisions:e}),b.displayX=b.x=c,b.displayY=b.y=d,b.setDirection(la.NONE)},ua.getPlayspaceBoundaries=function(a){var b;return b=ya.wallCollisionRectWidth&&ya.wallCollisionRectHeight&&!xa.gridAlignedMovement?{top:0-(a.height-ya.wallCollisionRectHeight)/2-ya.wallCollisionRectOffsetY,right:ua.MAZE_WIDTH-ya.wallCollisionRectWidth-(a.width-ya.wallCollisionRectWidth)/2-ya.wallCollisionRectOffsetX,bottom:ua.MAZE_HEIGHT-ya.wallCollisionRectHeight-(a.height-ya.wallCollisionRectHeight)/2-ya.wallCollisionRectOffsetY,left:0-(a.width-ya.wallCollisionRectWidth)/2-ya.wallCollisionRectOffsetX}:{top:0,right:ua.MAZE_WIDTH-a.width,bottom:ua.MAZE_HEIGHT-a.height,left:0}},ua.getSkin=function(){return ya},ua.moveSingle=function(a){var b=ua.sprite[a.spriteIndex];b.lastMove;b.lastMove=ua.tickCount;var c=xa.gridAlignedMovement?ua.SQUARE_SIZE:b.speed,d=!1,e=!1,f=0,g=0;switch(a.dir){case la.NORTH:g=-c;break;case la.EAST:f=c;break;case la.SOUTH:g=c;break;case la.WEST:f=-c}var h=b.x+f,i=b.y+g;if(xa.blockMovingIntoWalls&&ua.willSpriteTouchWall(b,h,i)&&(d=!0,ua.throttledCollideSpriteWithWallFunctions[a.spriteIndex]()),!xa.allowSpritesOutsidePlayspace&&ua.willSpriteLeavePlayspace(b,h,i)&&(e=!0),xa.gridAlignedMovement)d||e?b.addAction(new ga.GridMoveAndCancel(f,g,xa.slowExecutionFactor)):b.addAction(new ga.GridMove(f,g,xa.slowExecutionFactor)),ua.yieldExecutionTicks+=1+ua.gridAlignedExtraPauseSteps,ua.JSInterpreter&&(ua.JSInterpreter["yield"](),ua.JSInterpreter.selectCurrentCode()),ua.movementAudioOn();else{if(!d){if(e){var j=ua.getPlayspaceBoundaries(b);h=Math.max(j.left,Math.min(j.right,h)),i=Math.max(j.top,Math.min(j.bottom,i))}b.x=h,b.y=i}ua.isMovementAudioOn()||ua.movementAudioOn()}ua.lastMoveSingleDir=a.dir},ua.moveDistance=function(a){return a.started||(a.started=!0,xa.gridAlignedMovement&&(a.distance=Math.ceil(a.distance/ua.SQUARE_SIZE)*ua.SQUARE_SIZE),a.queuedDistance=a.distance),0===a.queuedDistance},ua.onEvent=function(a){mb(ua.eventHandlers,a.eventName,a.func)},ua.allWhenRunBlocksComplete=function(){for(var a=0;a<ua.eventHandlers.length;a++)if("whenGameStarts"===ua.eventHandlers[a].name&&0!==ua.eventHandlers[a].cmdQueue.length)return!1;return!0},ua.timedOut=function(){if(xa.timeoutAfterWhenRun){if(xa.editCode)return ua.JSInterpreter&&ua.JSInterpreter.startedHandlingEvents;if(0===ua.eventHandlers.length||1===ua.eventHandlers.length&&"whenGameStarts"===ua.eventHandlers[0].name&&ua.allWhenRunBlocksComplete())return!0}return ua.tickCount>ua.timeoutFailureTick},ua.allGoalsVisited=function(){var a,b,c=ua.sprite[ua.protagonistSpriteIndex],d=0;if(0===ua.spriteGoals_.length)return!1;if(ua.protagonistSpriteIndex&&!c)return!1;for(a=0;a<ua.spriteGoals_.length;a++){var e=ua.spriteGoals_[a];if(!e.finished){if(c){var f=e.finished;if(e.finished=J(c,e),!f&&e.finished){var g=!1,i="whenSpriteCollided-"+ua.protagonistSpriteIndex+"-";h(i+"anything",g)}}else{e.finished=!1;for(var j=0;j<ua.sprite.length;j++)if(J(ua.sprite[j],e)){e.finished=!0,ya.fadeOutGoal&&(e.startFadeTime=(new Date).getTime()),h("whenTouchGoal");break}}b=e.finished}if(e.finished&&(d++,b&&(d!==ua.spriteGoals_.length||ya.playFinalGoalSound)&&ua.playSound({soundName:"flag"}),ya.goalSuccess)){var k=ya.goalSuccess;xa.goalOverride&&xa.goalOverride.successImage&&(k=ya[xa.goalOverride.successImage]);var l=document.getElementById("spriteFinish"+a);l.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",k)}}var m=d===ua.spriteGoals_.length;return m&&!ua.touchAllGoalsEventFired&&(ua.touchAllGoalsEventFired=!0,h("whenTouchAllGoals")),m},ua.conditionSatisfied=function(a){for(var b=ua.trackedBehavior,c=Object.keys(a),d=0;d<c.length;d++){var e=c[d],f=a[e];if("timedOut"===e&&b.timedOut!=f)return!1;if("collectedItemsAtOrAbove"===e&&b.removedItemCount<f)return!1;if("collectedItemsBelow"===e&&b.removedItemCount>=f)return!1;if("collectedSpecificItemsAtOrAbove"===e&&(void 0===b.removedItems[f.className]||b.removedItems[f.className]<f.count))return!1;if("collectedSpecificItemsBelow"==e&&void 0!==b.removedItems[f.className]&&b.removedItems[f.className]>=f.count)return!1;if("createdSpecificItemsAtOrAbove"===e&&(void 0===b.createdItems[f.className]||b.createdItems[f.className]<f.count))return!1;if("createdSpecificItemsBelow"==e&&void 0!==b.createdItems[f.className]&&b.createdItems[f.className]>=f.count)return!1;if("gotAllItems"==e&&b.gotAllItems!==f)return!1;if("touchedHazardsAtOrAbove"===e&&b.touchedHazardCount<f)return!1;if("currentPointsAtOrAbove"===e&&ua.playerScore<f)return!1;if("currentPointsBelow"===e&&ua.playerScore>=f)return!1;if("allGoalsVisited"===e&&b.allGoalsVisited!==f)return!1;if("setMap"===e&&b.hasSetMap!==f)return!1;if("setSprite"===e&&b.hasSetSprite!==f)return!1;if("setDroidSpeed"===e&&b.hasSetDroidSpeed!==f)return!1;if("throwProjectile"===e&&b.hasThrownProjectile!==f)return!1;if("setEmotion"===e&&b.hasSetEmotion!==f)return!1}return!0},ua.checkProgressConditions=function(){if(!xa.progressConditions)return null;for(var a=0;a<xa.progressConditions.length;a++){var b=xa.progressConditions[a];if(ua.conditionSatisfied(b.required))return b.result}return null};var Fb=function(){var a=0!==ua.spriteGoals_.length,b=ua.allGoalsVisited(),c=ua.checkProgressConditions(),d=xa.goal&&xa.goal.successCondition?!0:!1,e=!d||_.valueOr(xa.goal.successCondition(),!0),f=d&&_.valueOr(xa.goal.successCondition(),!1);if(c){ua.result=c.success?qa.SUCCESS:qa.FAILURE,!c.success&&c.canPass&&(ua.testResults=ra.APP_SPECIFIC_ACCEPTABLE_FAIL,ua.progressConditionTestResult=!0);var g=c.message;return K.isUsingBlockly()&&(g=c.blocklyMessage||g),ua.message=_.valueOr(g,null),ua.pauseInterpreter=_.valueOr(c.pauseInterpreter,!1),!0}return a&&b&&e||a&&xa.completeOnSuccessConditionNotGoals&&f||!a&&f?(ua.result=qa.SUCCESS,!0):xa.goal&&xa.goal.failureCondition&&xa.goal.failureCondition()?(ua.result=qa.FAILURE,!0):!xa.progressConditions&&ua.timedOut()?(ua.result=qa.FAILURE,!0):!1}},{"../JSInterpreter":"/home/ubuntu/staging/apps/build/js/JSInterpreter.js","../JsInterpreterLogger":"/home/ubuntu/staging/apps/build/js/JsInterpreterLogger.js","../MusicController":"/home/ubuntu/staging/apps/build/js/MusicController.js","../StudioApp":"/home/ubuntu/staging/apps/build/js/StudioApp.js","../acemode/annotationList":"/home/ubuntu/staging/apps/build/js/acemode/annotationList.js","../canvg/svg_todataurl":"/home/ubuntu/staging/apps/build/js/canvg/svg_todataurl.js","../codegen":"/home/ubuntu/staging/apps/build/js/codegen.js","../constants":"/home/ubuntu/staging/apps/build/js/constants.js","../dom":"/home/ubuntu/staging/apps/build/js/dom.js","../dropletUtils":"/home/ubuntu/staging/apps/build/js/dropletUtils.js","../locale":"/home/ubuntu/staging/apps/build/js/locale.js","../skins":"/home/ubuntu/staging/apps/build/js/skins.js","../templates/page.html.ejs":"/home/ubuntu/staging/apps/build/js/templates/page.html.ejs","../utils":"/home/ubuntu/staging/apps/build/js/utils.js","../xml":"/home/ubuntu/staging/apps/build/js/xml.js","./ImageFilterFactory":"/home/ubuntu/staging/apps/build/js/studio/ImageFilterFactory.js","./Item":"/home/ubuntu/staging/apps/build/js/studio/Item.js","./Sprite":"/home/ubuntu/staging/apps/build/js/studio/Sprite.js","./ThreeSliceAudio":"/home/ubuntu/staging/apps/build/js/studio/ThreeSliceAudio.js","./api":"/home/ubuntu/staging/apps/build/js/studio/api.js","./bigGameLogic":"/home/ubuntu/staging/apps/build/js/studio/bigGameLogic.js","./blocks":"/home/ubuntu/staging/apps/build/js/studio/blocks.js","./collidable":"/home/ubuntu/staging/apps/build/js/studio/collidable.js","./constants":"/home/ubuntu/staging/apps/build/js/studio/constants.js","./controls.html.ejs":"/home/ubuntu/staging/apps/build/js/studio/controls.html.ejs","./dropletConfig":"/home/ubuntu/staging/apps/build/js/studio/dropletConfig.js","./extraControlRows.html.ejs":"/home/ubuntu/staging/apps/build/js/studio/extraControlRows.html.ejs","./locale":"/home/ubuntu/staging/apps/build/js/studio/locale.js","./paramLists.js":"/home/ubuntu/staging/apps/build/js/studio/paramLists.js","./projectile":"/home/ubuntu/staging/apps/build/js/studio/projectile.js","./rocketHeightLogic":"/home/ubuntu/staging/apps/build/js/studio/rocketHeightLogic.js","./samBatLogic":"/home/ubuntu/staging/apps/build/js/studio/samBatLogic.js","./spriteActions":"/home/ubuntu/staging/apps/build/js/studio/spriteActions.js","./visualization.html.ejs":"/home/ubuntu/staging/apps/build/js/studio/visualization.html.ejs",canvg:"/home/ubuntu/staging/apps/node_modules/canvg/canvg.js"}],"/home/ubuntu/staging/apps/build/js/studio/visualization.html.ejs":[function(require,module,exports){module.exports=function(){var t=function anonymous(locals,filters,escape){escape=escape||function(a){return String(a).replace(/&(?!\w+;)/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")};var buf=[];with(locals||{})!function(){buf.push('<svg xmlns="http://www.w3.org/2000/svg" version="1.1" id="svgStudio">\n</svg>\n<div id="capacityBubble">\n  <div id="capacity"></div>\n</div>\n')}();return buf.join("")};return function(a){return t(a,require("ejs").filters)}}()},{ejs:"/home/ubuntu/staging/apps/node_modules/ejs/lib/ejs.js"}],"/home/ubuntu/staging/apps/build/js/studio/samBatLogic.js":[function(a,b,c){"use strict";var d=a("./customGameLogic"),e=a("./constants"),f=e.Direction,g=(e.Position,a("../constants").KeyCodes),h=(a("../codegen"),a("./api"),function(a){d.apply(this,arguments),this.samIndex=0,this.sam=null,this.stopped={left:!1,up:!1,right:!1,down:!1}});h.inherits(d),h.prototype.onTick=function(){this.sam=this.studio_.sprite[this.samIndex];for(var a in g)if(this.studio_.keyState[g[a]]&&"keydown"===this.studio_.keyState[g[a]])switch(g[a]){case g.LEFT:this.updateSam_(f.WEST);break;case g.UP:this.updateSam_(f.NORTH);break;case g.RIGHT:this.updateSam_(f.EAST);break;case g.DOWN:this.updateSam_(f.SOUTH)}for(var b in this.studio_.btnState)if(this.studio_.btnState[b])switch(b){case"leftButton":this.updateSam_(f.WEST);break;case"upButton":this.updateSam_(f.NORTH);break;case"rightButton":this.updateSam_(f.EAST);break;case"downButton":this.updateSam_(f.SOUTH)}var c=this.sam.x+this.sam.width/2,d=this.studio_.MAZE_HEIGHT-(this.sam.y+this.sam.height/2);this.studio_.scoreText="("+c+", "+d+")",this.studio_.displayScore()},h.prototype.updateSam_=function(a){var b=this.sam.x+this.sam.width/2,c=this.studio_.MAZE_HEIGHT-(this.sam.y+this.sam.height/2);switch(a){case f.WEST:this.onscreen(b-this.sam.speed,c)||(a=f.NONE,this.stopped.left=!0);break;case f.NORTH:this.onscreen(b,c+this.sam.speed)||(a=f.NONE,this.stopped.up=!0);break;case f.EAST:this.onscreen(b+this.sam.speed,c)||(a=f.NONE,this.stopped.right=!0);break;case f.SOUTH:this.onscreen(b,c-this.sam.speed)||(a=f.NONE,this.stopped.down=!0)}this.studio_.moveSingle({spriteIndex:this.samIndex,dir:a})},h.prototype.onscreen=function(a,b){return this.resolveCachedBlock_("VALUE")(a,b)},b.exports=h},{"../codegen":"/home/ubuntu/staging/apps/build/js/codegen.js","../constants":"/home/ubuntu/staging/apps/build/js/constants.js","./api":"/home/ubuntu/staging/apps/build/js/studio/api.js","./constants":"/home/ubuntu/staging/apps/build/js/studio/constants.js","./customGameLogic":"/home/ubuntu/staging/apps/build/js/studio/customGameLogic.js"}],"/home/ubuntu/staging/apps/build/js/studio/rocketHeightLogic.js":[function(a,b,c){"use strict";var d=a("./customGameLogic"),e=a("./constants"),f=e.Direction,g=(a("../codegen"),a("./api"),function(a){d.apply(this,arguments),this.rocketIndex=0,this.last=Date.now(),this.seconds=0,this.rocket=null,this.height=0,this.SECONDS_TO_RUN=8});g.inherits(d),g.prototype.onTick=function(){1===this.studio_.tickCount&&(this.last=Date.now(),this.seconds=0,this.rocket=this.studio_.sprite[this.rocketIndex],this.height=0,this.studio_.setBackground({value:"space"})),Date.now()-this.last<1e3||(this.last=Date.now(),this.seconds++,this.height=this.rocket_height(this.seconds)||0,this.rocket.y=this.studio_.MAZE_HEIGHT-(this.height+this.rocket.height),this.rocket.dir=f.NONE,this.studio_.scoreText="Time: "+this.seconds+" | Height: "+this.height,this.studio_.displayScore())},g.prototype.rocket_height=function(a){return this.resolveCachedBlock_("VALUE")(a)},b.exports=g},{"../codegen":"/home/ubuntu/staging/apps/build/js/codegen.js","./api":"/home/ubuntu/staging/apps/build/js/studio/api.js","./constants":"/home/ubuntu/staging/apps/build/js/studio/constants.js","./customGameLogic":"/home/ubuntu/staging/apps/build/js/studio/customGameLogic.js"}],"/home/ubuntu/staging/apps/build/js/studio/projectile.js":[function(a,b,c){"use strict";var d=a("./collidable"),e=a("./constants").Direction,f=a("./constants"),g=(a("../utils"),a("./StudioAnimation")),h=a("./StudioSpriteSheet"),i={};i[e.EAST]=0,i[e.SOUTH]=90,i[e.WEST]=180,i[e.NORTH]=270,i[e.NORTHEAST]=45,i[e.SOUTHEAST]=135,i[e.SOUTHWEST]=225,i[e.NORTHWEST]=315;var j={};j[e.NORTH]={x:.5,y:0},j[e.EAST]={x:1,y:.5},j[e.SOUTH]={x:.5,y:1},j[e.WEST]={x:0,y:.5},j[e.NORTHEAST]={x:1,y:0},j[e.SOUTHEAST]={x:1,y:1},j[e.SOUTHWEST]={x:0,y:1},j[e.NORTHWEST]={x:0,y:0};var k={};k[e.NORTH]={x:0,y:-25},k[e.EAST]={x:25,y:0},k[e.SOUTH]={x:0,y:25},k[e.WEST]={x:-25,y:0},k[e.NORTHEAST]={x:25,y:-25},k[e.SOUTHEAST]={x:25,y:25},k[e.SOUTHWEST]={x:-25,y:25},k[e.NORTHWEST]={x:-25,y:-25};var l=function(a){d.apply(this,arguments),this.height=a.height||50,this.width=a.width||50,this.speed=a.speed||f.DEFAULT_PROJECTILE_SPEED,this.x=a.spriteX+k[a.dir].x+a.spriteWidth*j[a.dir].x,this.y=a.spriteY+k[a.dir].y+a.spriteHeight*j[a.dir].y,this.spriteSheet_=new h({frameWidth:a.spriteWidth,frameHeight:a.spriteHeight,defaultFramesPerAnimation:a.frames,assetPath:a.image,horizontalAnimation:!0,totalAnimations:1}),this.animation_=new g($.extend({},a,{spriteSheet:this.spriteSheet_,animationFrameDuration:this.getAnimationFrameDuration()}))};l.inherits(d),b.exports=l,l.prototype.getElement=function(){return this.animation_.getElement()},l.prototype.createElement=function(a){this.animation_.createElement(a)},l.prototype.getAnimationFrameDuration=function(){return f.DEFAULT_PROJECTILE_ANIMATION_FRAME_DURATION*f.DEFAULT_PROJECTILE_SPEED/this.speed},l.prototype.removeElement=function(){this.animation_.removeElement()},l.prototype.bounce=function(){switch(this.dir){case e.NORTH:this.dir=e.SOUTH;break;case e.WEST:this.dir=e.EAST;break;case e.SOUTH:this.dir=e.NORTH;break;case e.EAST:this.dir=e.WEST;break;case e.NORTHEAST:this.dir=e.SOUTHWEST;break;case e.SOUTHEAST:this.dir=e.NORTHWEST;break;case e.SOUTHWEST:this.dir=e.NORTHEAST;break;case e.NORTHWEST:this.dir=e.SOUTHEAST}},l.prototype.display=function(){({x:this.x-this.width/2,y:this.y-this.height/2});this.animation_.redrawCenteredAt({x:this.x,y:this.y},Studio.tickCount),this.spriteSheet_.defaultFramesPerAnimation>1&&this.getElement().setAttribute("transform","rotate("+i[this.dir]+", "+this.x+", "+this.y+")")},l.prototype.getNextPosition=function(){var a=e.getUnitVector(this.dir);return{x:this.x+this.speed*a.x,y:this.y+this.speed*a.y}},l.prototype.moveToNextPosition=function(){var a=this.getNextPosition();this.x=a.x,this.y=a.y},l.prototype.setOpacity=function(a){this.animation_.setOpacity(a)}},{"../utils":"/home/ubuntu/staging/apps/build/js/utils.js","./StudioAnimation":"/home/ubuntu/staging/apps/build/js/studio/StudioAnimation.js","./StudioSpriteSheet":"/home/ubuntu/staging/apps/build/js/studio/StudioSpriteSheet.js","./collidable":"/home/ubuntu/staging/apps/build/js/studio/collidable.js","./constants":"/home/ubuntu/staging/apps/build/js/studio/constants.js"}],"/home/ubuntu/staging/apps/build/js/studio/skins.js":[function(a,b,c){"use strict";function d(a,b){a.twitterOptions=p,a.defaultBackground="dots",a.projectileFrames=10,a.itemFrames=10,a.spriteHeight=110,a.spriteWidth=110,a.spriteCollisionRectWidth=60,a.spriteCollisionRectHeight=60,a.ProjectileClassNames=["projectile_banana","projectile_dodgeball","projectile_donkey","projectile_handbag","projectile_hotdog","projectile_pompom","projectile_toaster","projectile_waterball"],a.ItemClassNames=["item_projectile_banana","item_projectile_dodgeball","item_projectile_donkey","item_projectile_handbag","item_projectile_hotdog","item_projectile_pompom","item_projectile_toaster","item_projectile_waterball"],a.projectile_banana=a.assetUrl("projectile_banana.png"),a.projectile_dodgeball=a.assetUrl("projectile_dodgeball.png"),a.projectile_donkey=a.assetUrl("projectile_donkey.png"),a.projectile_handbag=a.assetUrl("projectile_handbag.png"),a.projectile_hotdog=a.assetUrl("projectile_hotdog.png"),a.projectile_pompom=a.assetUrl("projectile_pompom.png"),a.projectile_toaster=a.assetUrl("projectile_toaster.png"),a.projectile_waterball=a.assetUrl("projectile_waterball.png"),a.item_projectile_banana=a.assetUrl("projectile_banana.png"),a.item_projectile_dodgeball=a.assetUrl("projectile_dodgeball.png"),a.item_projectile_donkey=a.assetUrl("projectile_donkey.png"),a.item_projectile_handbag=a.assetUrl("projectile_handbag.png"),a.item_projectile_hotdog=a.assetUrl("projectile_hotdog.png"),a.item_projectile_pompom=a.assetUrl("projectile_pompom.png"),a.item_projectile_toaster=a.assetUrl("projectile_toaster.png"),a.item_projectile_waterball=a.assetUrl("projectile_waterball.png"),a.explosion=a.assetUrl("explosion.png"),a.explosionThumbnail=a.assetUrl("explosion_thumb.png"),a.explosionFrames=40,a.fadeExplosion=!1,a.timePerExplosionFrame=20,a.characters={background:a.assetUrl("background_characters.png")},a.checkers={background:a.assetUrl("background_checkers.png")},a.clouds={background:a.assetUrl("background_clouds.png")},a.cornered={background:a.assetUrl("background_cornered.png")},a.dots={background:a.assetUrl("background_dots.png")},a.graffiti={background:a.assetUrl("background_graffiti.png")},a.space={background:a.assetUrl("background_space.png")},a.squares={background:a.assetUrl("background_squares.png")},a.stripes={background:a.assetUrl("background_stripes.png")},a.wood={background:a.assetUrl("background_wood.png")},a.avatarList=["anais","anton","bananajoe","darwin","gumball","nicole","penny","richard"],a.walkValues=[8,8,8,12,12,8,10,12],a.avatarList.forEach(function(b,c){a[b]={sprite:a.assetUrl("idle_"+b+".png"),walk:a.assetUrl("walk_"+b+".png"),dropdownThumbnail:a.assetUrl("avatar_"+b+"_thumb.png"),frameCounts:{normal:19,turns:8,emotions:0,walk:a.walkValues[c],extraEmotions:3,walkingEmotions:3},animations:{turns:8,walkingEmotions:3},animationFrameDuration:3}}),a.backgroundChoices=[[k.setBackgroundRandom(),n],[k.setBackgroundCharacters(),'"characters"'],[k.setBackgroundCheckers(),'"checkers"'],[k.setBackgroundClouds(),'"clouds"'],[k.setBackgroundCornered(),'"cornered"'],[k.setBackgroundDots(),'"dots"'],[k.setBackgroundGraffiti(),'"graffiti"'],[k.setBackgroundSpace(),'"space"'],[k.setBackgroundSquares(),'"squares"'],[k.setBackgroundStripes(),'"stripes"'],[k.setBackgroundWood(),'"wood"']],a.backgroundChoicesK1=[[a.characters.background,'"characters"'],[a.checkers.background,'"checkers"'],[a.clouds.background,'"clouds"'],[a.cornered.background,'"cornered"'],[a.dots.background,'"dots"'],[a.graffiti.background,'"graffiti"'],[a.space.background,'"space"'],[a.squares.background,'"squares"'],[a.stripes.background,'"stripes"'],[a.wood.background,'"wood"'],[a.randomPurpleIcon,n]],a.spriteChoices=[[k.setSpriteHidden(),o],[k.setSpriteRandom(),n],[k.setSpriteAnais(),'"anais"'],[k.setSpriteAnton(),'"anton"'],[k.setSpriteBananajoe(),'"bananajoe"'],[k.setSpriteDarwin(),'"darwin"'],[k.setSpriteGumball(),'"gumball"'],[k.setSpriteNicole(),'"nicole"'],[k.setSpritePenny(),'"penny"'],[k.setSpriteRichard(),'"richard"']],a.projectileChoices=[[k.projectileBanana(),'"projectile_banana"'],[k.projectileDodgeball(),'"projectile_dodgeball"'],[k.projectileDonkey(),'"projectile_donkey"'],[k.projectileHandbag(),'"projectile_handbag"'],[k.projectileHotdog(),'"projectile_hotdog"'],[k.projectilePompom(),'"projectile_pompom"'],[k.projectileToaster(),'"projectile_toaster"'],[k.projectileWaterball(),'"projectile_waterball"'],[k.projectileRandom(),n]],a.makeProjectileChoices=[[k.makeProjectileBanana(),'"projectile_banana"'],[k.makeProjectileDodgeball(),'"projectile_dodgeball"'],[k.makeProjectileDonkey(),'"projectile_donkey"'],[k.makeProjectileHandbag(),'"projectile_handbag"'],[k.makeProjectileHotdog(),'"projectile_hotdog"'],[k.makeProjectilePompom(),'"projectile_pompom"'],[k.makeProjectileToaster(),'"projectile_toaster"'],[k.makeProjectileWaterball(),'"projectile_waterball"']],a.whenProjectileCollidedChoices=[[k.whenSpriteCollidedWithProjectileBanana(),"projectile_banana"],[k.whenSpriteCollidedWithProjectileDodgeball(),"projectile_dodgeball"],[k.whenSpriteCollidedWithProjectileDonkey(),"projectile_donkey"],[k.whenSpriteCollidedWithProjectileHandbag(),"projectile_handbag"],[k.whenSpriteCollidedWithProjectileHotdog(),"projectile_hotdog"],[k.whenSpriteCollidedWithProjectilePompom(),"projectile_pompom"],[k.whenSpriteCollidedWithProjectileToaster(),"projectile_toaster"],[k.whenSpriteCollidedWithProjectileWaterball(),"projectile_waterball"]],a.itemChoices=[[k.itemProjectileBanana(),'"item_projectile_banana"'],[k.itemProjectileDodgeball(),'"item_projectile_dodgeball"'],[k.itemProjectileDonkey(),'"item_projectile_donkey"'],[k.itemProjectileHandbag(),'"item_projectile_handbag"'],[k.itemProjectileHotdog(),'"item_projectile_hotdog"'],[k.itemProjectilePompom(),'"item_projectile_pompom"'],[k.itemProjectileToaster(),'"item_projectile_toaster"'],[k.itemProjectileWaterball(),'"item_projectile_waterball"'],[k.itemRandom(),n]];
}function e(a,b){a.twitterOptions=p,a.defaultBackground="icy1",a.projectileFrames=10,a.itemFrames=10,a.spriteHeight=130,a.spriteWidth=130,a.spriteCollisionRectWidth=60,a.spriteCollisionRectHeight=60,a.ProjectileClassNames=["ia_projectile_1","ia_projectile_2","ia_projectile_3","ia_projectile_4","ia_projectile_5"],a.ItemClassNames=["item_ia_projectile_1","item_ia_projectile_2","item_ia_projectile_3","item_ia_projectile_4","item_ia_projectile_5"],a.ia_projectile_1=a.assetUrl("ia_projectile_1.png"),a.ia_projectile_2=a.assetUrl("ia_projectile_2.png"),a.ia_projectile_3=a.assetUrl("ia_projectile_3.png"),a.ia_projectile_4=a.assetUrl("ia_projectile_4.png"),a.ia_projectile_5=a.assetUrl("ia_projectile_5.png"),a.item_ia_projectile_1=a.assetUrl("ia_projectile_1.png"),a.item_ia_projectile_2=a.assetUrl("ia_projectile_2.png"),a.item_ia_projectile_3=a.assetUrl("ia_projectile_3.png"),a.item_ia_projectile_4=a.assetUrl("ia_projectile_4.png"),a.item_ia_projectile_5=a.assetUrl("ia_projectile_5.png"),a.explosion=a.assetUrl("explosion.png"),a.explosionThumbnail=a.assetUrl("explosion_thumb.png"),a.explosionFrames=17,a.fadeExplosion=!1,a.timePerExplosionFrame=40,a.icy1={background:a.assetUrl("background_icy1.jpg")},a.icy2={background:a.assetUrl("background_icy2.jpg")},a.icy3={background:a.assetUrl("background_icy3.jpg")},a.icy4={background:a.assetUrl("background_icy4.jpg")},a.icy5={background:a.assetUrl("background_icy5.jpg")},a.ground={background:a.assetUrl("background_ground.jpg")},a.avatarList=["manny","sid","scrat","diego","granny"],a.avatarList.forEach(function(b){a[b]={sprite:a.assetUrl("avatar_"+b+".png"),walk:a.assetUrl("walk_"+b+".png"),dropdownThumbnail:a.assetUrl("avatar_"+b+"_thumb.png"),frameCounts:{normal:19,turns:8,emotions:0,walk:12,extraEmotions:3,walkingEmotions:3},animations:{turns:8,walkingEmotions:3},animationFrameDuration:3}}),a.backgroundChoices=[[k.setBackgroundRandom(),n],[k.setBackgroundIcy1(),'"icy1"'],[k.setBackgroundIcy2(),'"icy2"'],[k.setBackgroundIcy3(),'"icy3"'],[k.setBackgroundIcy4(),'"icy4"'],[k.setBackgroundIcy5(),'"icy5"'],[k.setBackgroundGround(),'"ground"']],a.backgroundChoicesK1=[[a.icy1.background,'"icy1"'],[a.icy2.background,'"icy2"'],[a.icy3.background,'"icy3"'],[a.icy4.background,'"icy4"'],[a.icy5.background,'"icy5"'],[a.ground.background,'"ground"'],[a.randomPurpleIcon,n]],a.spriteChoices=[[k.setSpriteHidden(),o],[k.setSpriteRandom(),n],[k.setSpriteManny(),'"manny"'],[k.setSpriteSid(),'"sid"'],[k.setSpriteScrat(),'"scrat"'],[k.setSpriteDiego(),'"diego"'],[k.setSpriteGranny(),'"granny"']],a.projectileChoices=[[k.projectileIAProjectile1(),'"ia_projectile_1"'],[k.projectileIAProjectile2(),'"ia_projectile_2"'],[k.projectileIAProjectile3(),'"ia_projectile_3"'],[k.projectileIAProjectile4(),'"ia_projectile_4"'],[k.projectileIAProjectile5(),'"ia_projectile_5"'],[k.projectileRandom(),n]],a.makeProjectileChoices=[[k.makeProjectileIAProjectile1(),'"ia_projectile_1"'],[k.makeProjectileIAProjectile2(),'"ia_projectile_2"'],[k.makeProjectileIAProjectile3(),'"ia_projectile_3"'],[k.makeProjectileIAProjectile4(),'"ia_projectile_4"'],[k.makeProjectileIAProjectile5(),'"ia_projectile_5"']],a.whenProjectileCollidedChoices=[[k.whenSpriteCollidedWithIAProjectile1(),"ia_projectile_1"],[k.whenSpriteCollidedWithIAProjectile2(),"ia_projectile_2"],[k.whenSpriteCollidedWithIAProjectile3(),"ia_projectile_3"],[k.whenSpriteCollidedWithIAProjectile4(),"ia_projectile_4"],[k.whenSpriteCollidedWithIAProjectile5(),"ia_projectile_5"]],a.itemChoices=[[k.itemIAProjectile1(),'"item_ia_projectile_1"'],[k.itemIAProjectile2(),'"item_ia_projectile_2"'],[k.itemIAProjectile3(),'"item_ia_projectile_3"'],[k.itemIAProjectile4(),'"item_ia_projectile_4"'],[k.itemIAProjectile5(),'"item_ia_projectile_5"'],[k.itemRandom(),n]]}function f(a,b){a.preloadAssets=!0,a.defaultBackground="leafy",a.projectileFrames=10,a.itemFrames=10,a.ProjectileClassNames=["projectile_hiro","projectile_anna","projectile_elsa","projectile_baymax","projectile_rapunzel","projectile_cherry","projectile_ice","projectile_duck"],a.specialProjectileProperties={projectile_cherry:{frames:13},projectile_ice:{frames:12},projectile_duck:{frames:12}},a.ItemClassNames=["item_hiro","item_anna","item_elsa","item_baymax","item_rapunzel","item_cherry","item_ice","item_duck"],a.specialItemProperties={item_cherry:{frames:13},item_ice:{frames:12},item_duck:{frames:12}},a.explosion=a.assetUrl("vanish.png"),a.explosionFrames=17,a.fadeExplosion=!0,a.timePerExplosionFrame=100,a.projectileSpriteWidth=70,a.projectileSpriteHeight=70,a.avatarList=["anna","elsa","hiro","baymax","rapunzel"],a.avatarList.forEach(function(b){a[b]={sprite:a.assetUrl("avatar_"+b+".png"),walk:a.assetUrl("walk_"+b+".png"),dropdownThumbnail:a.assetUrl("avatar_"+b+"_thumb.png"),frameCounts:{normal:19,turns:8,emotions:0,walk:12},animations:{turns:8},animationFrameDuration:3}}),a.preventProjectileLoop=function(a){return"projectile_hiro"===a},a.preventItemLoop=function(a){return"item_hiro"===a},a.projectile_hiro=a.assetUrl("projectile_hiro.png"),a.projectile_anna=a.assetUrl("projectile_anna.png"),a.projectile_elsa=a.assetUrl("projectile_elsa.png"),a.projectile_baymax=a.assetUrl("projectile_baymax.png"),a.projectile_rapunzel=a.assetUrl("projectile_rapunzel.png"),a.projectile_cherry=a.assetUrl("projectile_cherry.png"),a.projectile_ice=a.assetUrl("projectile_ice.png"),a.projectile_duck=a.assetUrl("projectile_duck.png"),a.item_hiro=a.assetUrl("projectile_hiro.png"),a.item_anna=a.assetUrl("projectile_anna.png"),a.item_elsa=a.assetUrl("projectile_elsa.png"),a.item_baymax=a.assetUrl("projectile_baymax.png"),a.item_rapunzel=a.assetUrl("projectile_rapunzel.png"),a.item_cherry=a.assetUrl("projectile_cherry.png"),a.item_ice=a.assetUrl("projectile_ice.png"),a.item_duck=a.assetUrl("projectile_duck.png"),a.leafy={background:a.assetUrl("background_leafy.jpg")},a.grassy={background:a.assetUrl("background_grassy.jpg")},a.flower={background:a.assetUrl("background_flower.jpg")},a.tile={background:a.assetUrl("background_tile.jpg")},a.icy={background:a.assetUrl("background_icy.jpg")},a.snowy={background:a.assetUrl("background_snowy.jpg")},a.backgroundChoices=[[k.setBackgroundRandom(),n],[k.setBackgroundLeafy(),'"leafy"'],[k.setBackgroundGrassy(),'"grassy"'],[k.setBackgroundFlower(),'"flower"'],[k.setBackgroundTile(),'"tile"'],[k.setBackgroundIcy(),'"icy"'],[k.setBackgroundSnowy(),'"snowy"']],a.backgroundChoicesK1=[[a.leafy.background,'"leafy"'],[a.grassy.background,'"grassy"'],[a.flower.background,'"flower"'],[a.tile.background,'"tile"'],[a.icy.background,'"icy"'],[a.snowy.background,'"snowy"'],[a.randomPurpleIcon,n]],a.spriteChoices=[[k.setSpriteHidden(),o],[k.setSpriteRandom(),n],[k.setSpriteAnna(),'"anna"'],[k.setSpriteElsa(),'"elsa"'],[k.setSpriteHiro(),'"hiro"'],[k.setSpriteBaymax(),'"baymax"'],[k.setSpriteRapunzel(),'"rapunzel"']],a.projectileChoices=[[k.projectileHiro(),'"projectile_hiro"'],[k.projectileAnna(),'"projectile_anna"'],[k.projectileElsa(),'"projectile_elsa"'],[k.projectileBaymax(),'"projectile_baymax"'],[k.projectileRapunzel(),'"projectile_rapunzel"'],[k.projectileCherry(),'"projectile_cherry"'],[k.projectileIce(),'"projectile_ice"'],[k.projectileDuck(),'"projectile_duck"'],[k.projectileRandom(),n]],a.itemChoices=[[k.itemHiro(),'"item_hiro"'],[k.itemAnna(),'"item_anna"'],[k.itemElsa(),'"item_elsa"'],[k.itemBaymax(),'"item_baymax"'],[k.itemRapunzel(),'"item_rapunzel"'],[k.itemCherry(),'"item_cherry"'],[k.itemIce(),'"item_ice"'],[k.itemDuck(),'"item_duck"'],[k.itemRandom(),n]]}function g(a,b){function c(){for(var a=[],b=0;4>b;b++)for(var c=0;4>c;c++){var d={minX:50+100*c+5,maxX:50+100*c+49-5,minY:50+100*b+15,maxY:50+100*b+49-5};a.push(d)}return a}a.twitterOptions=p,a.preloadAssets=!0,a.hideIconInClearPuzzle=!0,a.defaultBackground="endor",a.projectileFrames=10,a.itemFrames=10,a.instructions2ImageSubstitutions={pufferpig:a.assetUrl("instructions_pufferpig.png"),mynock:a.assetUrl("instructions_mynock.png"),rebelpilot:a.assetUrl("instructions_rebelpilot.png"),stormtrooper:a.assetUrl("instructions_stormtrooper.png"),mousedroid:a.assetUrl("instructions_mousedroid.png"),tauntaun:a.assetUrl("instructions_tauntaun.png"),probot:a.assetUrl("instructions_probot.png")},a.ProjectileClassNames=[],a.ItemClassNames=["pufferpig","stormtrooper","tauntaun","mynock","probot","mousedroid","rebelpilot"],a.AutohandlerTouchItems={whenTouchPufferPig:"pufferpig",whenTouchStormtrooper:"stormtrooper",whenTouchTauntaun:"tauntaun",whenTouchMynock:"mynock",whenTouchProbot:"probot",whenTouchMouseDroid:"mousedroid",whenTouchRebelPilot:"rebelpilot",whenGetPufferPig:"pufferpig",whenGetStormtrooper:"stormtrooper",whenGetTauntaun:"tauntaun",whenGetMynock:"mynock",whenGetProbot:"probot",whenGetMouseDroid:"mousedroid",whenGetRebelPilot:"rebelpilot"},a.AutohandlerGetAllItems={whenGetAllPufferPigs:"pufferpig",whenGetAllStormtroopers:"stormtrooper",whenGetAllTauntauns:"tauntaun",whenGetAllMynocks:"mynock",whenGetAllProbots:"probot",whenGetAllMouseDroids:"mousedroid",whenGetAllRebelPilots:"rebelpilot"},a.specialItemProperties={pufferpig:{frames:12,width:100,height:100,scale:1,renderOffset:{x:0,y:-15},activity:"roam",speed:m.SpriteSpeed.VERY_SLOW,spritesCounterclockwise:!0},stormtrooper:{frames:12,width:100,height:100,scale:1.1,renderOffset:{x:0,y:-15},activity:"chase",speed:m.SpriteSpeed.VERY_SLOW,spritesCounterclockwise:!0},tauntaun:{frames:15,width:100,height:100,scale:1.6,renderOffset:{x:0,y:20},activity:"roam",speed:m.SpriteSpeed.SLOW,spritesCounterclockwise:!0},mynock:{frames:8,width:100,height:100,scale:.9,renderOffset:{x:0,y:-20},activity:"roam",speed:m.SpriteSpeed.SLOW,spritesCounterclockwise:!0},probot:{frames:12,width:100,height:100,scale:1.2,renderOffset:{x:0,y:-10},activity:"chase",speed:m.SpriteSpeed.LITTLE_SLOW,spritesCounterclockwise:!0},mousedroid:{frames:1,width:100,height:100,scale:.5,renderOffset:{x:0,y:-20},activity:"flee",speed:m.SpriteSpeed.LITTLE_SLOW,spritesCounterclockwise:!0},rebelpilot:{frames:13,width:100,height:100,scale:1,renderOffset:{x:0,y:-20},activity:"flee",speed:m.SpriteSpeed.SLOW,spritesCounterclockwise:!0}},a.customObstacleZones={endor:{},hoth:{},starship:{}},a.customObstacleZones.endor.grid=a.customObstacleZones.hoth.grid=a.customObstacleZones.starship.grid=c(),a.customObstacleZones.endor.blobs=[{minX:346,maxX:413,minY:261,maxY:344},{minX:318,maxX:404,minY:342,maxY:397},{minX:308,maxX:348,minY:72,maxY:110},{minX:264,maxX:348,minY:112,maxY:197},{minX:96,maxX:149,minY:289,maxY:349},{minX:96,maxX:199,minY:238,maxY:288},{minX:83,maxX:125,minY:125,maxY:147},{minX:58,maxX:99,minY:72,maxY:91},{minX:57,maxX:149,minY:92,maxY:123}],a.customObstacleZones.endor.horizontal=[{minX:51,maxX:299,minY:269,maxY:293},{minX:150,maxX:348,minY:168,maxY:189},{minX:53,maxX:97,minY:159,maxY:199},{minX:50,maxX:198,minY:71,maxY:94},{minX:255,maxX:345,minY:71,maxY:94}],a.customObstacleZones.endor.circle=[{minX:251,maxX:317,minY:332,maxY:348},{minX:83,maxX:198,minY:332,maxY:348},{minX:250,maxX:317,minY:77,maxY:93},{minX:313,maxX:337,minY:77,maxY:348},{minX:163,maxX:236,minY:202,maxY:244},{minX:83,maxX:200,minY:77,maxY:93},{minX:62,maxX:85,minY:77,maxY:348}],a.customObstacleZones.hoth.blobs=[{minX:100,maxX:142,minY:283,maxY:342},{minX:100,maxX:187,minY:226,maxY:281},{minX:356,maxX:394,minY:264,maxY:311},{minX:311,maxX:393,minY:313,maxY:388},{minX:310,maxX:344,minY:61,maxY:106},{minX:258,maxX:344,minY:108,maxY:192},{minX:117,maxX:146,minY:120,maxY:132},{minX:57,maxX:117,minY:70,maxY:132}],a.customObstacleZones.hoth.horizontal=[{minX:54,maxX:299,minY:268,maxY:294},{minX:150,maxX:350,minY:171,maxY:198},{minX:53,maxX:99,minY:171,maxY:198},{minX:252,maxX:350,minY:66,maxY:92},{minX:54,maxX:195,minY:66,maxY:92}],a.customObstacleZones.hoth.circle=[{minX:250,maxX:298,minY:312,maxY:342},{minX:300,maxX:346,minY:65,maxY:342},{minX:252,maxX:302,minY:65,maxY:100},{minX:99,maxX:192,minY:311,maxY:342},{minX:101,maxX:196,minY:65,maxY:91},{minX:50,maxX:100,minY:65,maxY:342},{minX:163,maxX:242,minY:188,maxY:238}],a.customObstacleZones.starship.blobs=[{minX:301,maxX:344,minY:58,maxY:120},{minX:353,maxX:405,minY:260,maxY:308},{minX:306,maxX:405,minY:310,maxY:393},{minX:101,maxX:144,minY:300,maxY:350},{minX:101,maxX:197,minY:208,maxY:299},{minX:261,maxX:344,minY:120,maxY:192},{minX:55,maxX:133,minY:77,maxY:141}],a.customObstacleZones.starship.horizontal=[{minX:52,maxX:298,minY:267,maxY:300},{minX:151,maxX:351,minY:167,maxY:198},{minX:49,maxX:99,minY:165,maxY:201},{minX:51,maxX:199,minY:66,maxY:102},{minX:251,maxX:351,minY:68,maxY:104}],a.customObstacleZones.starship.circle=[{minX:251,maxX:316,minY:315,maxY:351},{minX:153,maxX:242,minY:165,maxY:251},{minX:252,maxX:314,minY:66,maxY:100},{minX:310,maxX:339,minY:66,maxY:351},{minX:80,maxX:200,minY:316,maxY:351},{minX:82,maxX:200,minY:66,maxY:100},{minX:63,maxX:86,minY:66,maxY:351}],a.explosion=a.assetUrl("vanish.png"),a.explosionFrames=17,a.animatedGoal=a.assetUrl("goal_idle.png"),a.goalSpriteWidth=100,a.goalSpriteHeight=100,a.animatedGoalFrames=16,a.timePerGoalAnimationFrame=100,a.finishCollideDistanceScaling=.8,a.goalCollisionRectWidth=50,a.goalCollisionRectHeight=75,a.fadeOutGoal=!0,a.goalSuccess=null,a.goalRenderOffsetX=-25,a.goalRenderOffsetY=-45,a.projectileSpriteWidth=70,a.projectileSpriteHeight=70,a.itemCollisionRectWidth=50,a.itemCollisionRectHeight=50,a.spriteCollisionRectWidth=50,a.spriteCollisionRectHeight=50,a.wallCollisionRectOffsetX=0,a.wallCollisionRectOffsetY=24,a.wallCollisionRectWidth=30,a.wallCollisionRectHeight=20,a.gridSpriteRenderOffsetX=-30,a.gridSpriteRenderOffsetY=-40,a.avatarList=["r2-d2","c-3po"],a.avatarList.forEach(function(b){a[b]={sprite:a.assetUrl("avatar_"+b+".png"),walk:a.assetUrl("walk_"+b+".png"),dropdownThumbnail:a.assetUrl("avatar_"+b+"_thumb.png"),frameCounts:{normal:"r2-d2"==b?14:16,turns:8,emotions:0,walk:"r2-d2"==b?14:8},animations:{turns:8},animationFrameDuration:3}}),a["r2-d2"].movementAudio=[{begin:"r2-d2_move1_start",loop:"r2-d2_move1_loop",end:"r2-d2_move1_end",volume:2.2},{begin:"r2-d2_move2_start",loop:"r2-d2_move2_loop",end:"r2-d2_move2_end",volume:2.2},{begin:"r2-d2_move3_start",loop:"r2-d2_move3_loop",end:"r2-d2_move3_end",volume:2.2}],a["c-3po"].movementAudio=[{loop:"c-3po_move_loop",end:"c-3po_move_end",volume:.6}],a.preventProjectileLoop=function(a){return""===a},a.preventItemLoop=function(a){return""===a},a.winAvatar=null,a.failureAvatar=null,a.pufferpig=a.assetUrl("walk_pufferpig.png"),a.stormtrooper=a.assetUrl("walk_stormtrooper.png"),a.tauntaun=a.assetUrl("walk_tauntaun.png"),a.mynock=a.assetUrl("walk_mynock.png"),a.probot=a.assetUrl("walk_probot.png"),a.mousedroid=a.assetUrl("walk_mousedroid.png"),a.rebelpilot=a.assetUrl("walk_rebelpilot.png"),a.endor={background:a.assetUrl("background_endor.jpg"),tiles:a.assetUrl("tiles_endor.png"),jumboTiles:a.assetUrl("jumbotiles_endor.png"),jumboTilesAddOffset:-5,jumboTilesSize:60,jumboTilesRows:4,jumboTilesCols:4,clouds:[a.assetUrl("cloud_light.png"),a.assetUrl("cloud_light2.png")]},a.hoth={background:a.assetUrl("background_hoth.jpg"),tiles:a.assetUrl("tiles_hoth.png"),jumboTiles:a.assetUrl("jumbotiles_hoth.png"),jumboTilesAddOffset:-5,jumboTilesSize:60,jumboTilesRows:4,jumboTilesCols:4,clouds:[a.assetUrl("cloud_dark.png"),a.assetUrl("cloud_dark2.png")]},a.starship={background:a.assetUrl("background_starship.jpg"),tiles:a.assetUrl("tiles_starship.png"),jumboTiles:a.assetUrl("jumbotiles_starship.png"),jumboTilesAddOffset:-5,jumboTilesSize:60,jumboTilesRows:4,jumboTilesCols:4},a.enlargeWallTiles={minCol:0,maxCol:3,minRow:3,maxRow:5},a.getMap=function(a,b){return"hoth"!=a||"circle"!=b&&"horizontal"!=b?b:b+"_nonjumbo"},a.blank=[[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0]],a.circle_nonjumbo=[[0,0,0,0,0,0,0,0],[0,17,2,3,0,68,69,0],[0,4,0,0,0,0,3,0],[0,20,0,289,289,0,5,0],[0,2,0,289,289,0,21,0],[0,3,0,0,0,0,2,0],[0,36,37,2,0,52,53,0],[0,0,0,0,0,0,0,0]],a.circle=[[0,0,0,0,0,0,0,0],[0,512,531,531,0,531,513,0],[0,530,0,0,0,0,530,0],[0,530,0,289,289,0,530,0],[0,530,0,289,289,0,530,0],[0,530,0,0,0,0,530,0],[0,514,531,531,0,531,515,0],[0,0,0,0,0,0,0,0]],a.horizontal_nonjumbo=[[0,0,0,0,0,0,0,0],[0,2,3,32,0,36,37,0],[0,0,0,0,0,0,0,0],[0,16,0,52,53,32,35,0],[0,0,0,0,0,0,0,0],[0,3,2,34,32,33,0,0],[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0]],a.horizontal=[[0,0,0,0,0,0,0,0],[0,531,531,531,0,531,531,0],[0,0,0,0,0,0,0,0],[0,48,0,531,531,531,531,0],[0,0,0,0,0,0,0,0],[0,531,531,531,531,531,0,0],[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0]],a.grid=[[0,0,0,0,0,0,0,0],[0,33,0,16,0,32,0,3],[0,0,0,0,0,0,0,0],[0,2,0,17,0,33,0,2],[0,0,0,0,0,0,0,0],[0,3,0,32,0,34,0,17],[0,0,0,0,0,0,0,0],[0,16,0,33,0,35,0,16]],a.blobs=[[0,0,0,0,0,0,0,0],[0,259,259,0,0,0,34,0],[0,259,259,0,0,272,272,0],[0,0,0,0,0,272,272,0],[0,0,306,306,0,0,0,0],[0,0,306,306,0,0,0,35],[0,0,49,0,0,0,289,289],[0,0,0,0,0,0,289,289]],a.sounds=["R2-D2sound1","R2-D2sound2","R2-D2sound3","R2-D2sound4","R2-D2sound5","R2-D2sound6","R2-D2sound7","R2-D2sound8","R2-D2sound9","C-3POsound1","C-3POsound2","C-3POsound3","C-3POsound4","PufferPigSound1","PufferPigSound2","PufferPigSound3","PufferPigSound4","TauntaunSound1","TauntaunSound2","TauntaunSound3","TauntaunSound4","MynockSound1","MynockSound2","MynockSound3","ProbotSound1","ProbotSound2","ProbotSound3","MouseDroidSound1","MouseDroidSound2","MouseDroidSound3","alert1","alert2","alert3","alert4","applause"],a.soundGroups={"R2-D2sound":{randomValue:"R2-D2random",minSuffix:1,maxSuffix:9},"C-3POsound":{randomValue:"C-3POrandom",minSuffix:1,maxSuffix:4},PufferPigSound:{randomValue:"PufferPigRandom",minSuffix:1,maxSuffix:4},TauntaunSound:{randomValue:"TauntaunRandom",minSuffix:1,maxSuffix:4},MynockSound:{randomValue:"MynockRandom",minSuffix:1,maxSuffix:3},ProbotSound:{randomValue:"ProbotSoundRandom",minSuffix:1,maxSuffix:3},MouseDroidSound:{randomValue:"MouseDroidSoundRandom",minSuffix:1,maxSuffix:3}},a.soundChoices=[[k.playSoundRandom(),n],[k.playSoundR2D2Random(),"R2-D2random"],[k.playSoundR2D2Sound1(),"R2-D2sound1"],[k.playSoundR2D2Sound2(),"R2-D2sound2"],[k.playSoundR2D2Sound3(),"R2-D2sound3"],[k.playSoundR2D2Sound4(),"R2-D2sound4"],[k.playSoundR2D2Sound5(),"R2-D2sound5"],[k.playSoundR2D2Sound6(),"R2-D2sound6"],[k.playSoundR2D2Sound7(),"R2-D2sound7"],[k.playSoundR2D2Sound8(),"R2-D2sound8"],[k.playSoundR2D2Sound9(),"R2-D2sound9"],[k.playSoundC3PORandom(),"C-3POrandom"],[k.playSoundC3POSound1(),"C-3POsound1"],[k.playSoundC3POSound2(),"C-3POsound2"],[k.playSoundC3POSound3(),"C-3POsound3"],[k.playSoundC3POSound4(),"C-3POsound4"],[k.playSoundPufferPigRandom(),"PufferPigRandom"],[k.playSoundPufferPigSound1(),"PufferPigSound1"],[k.playSoundPufferPigSound2(),"PufferPigSound2"],[k.playSoundPufferPigSound3(),"PufferPigSound3"],[k.playSoundPufferPigSound4(),"PufferPigSound4"],[k.playSoundTauntaunRandom(),"TauntaunRandom"],[k.playSoundTauntaunSound1(),"TauntaunSound1"],[k.playSoundTauntaunSound2(),"TauntaunSound2"],[k.playSoundTauntaunSound3(),"TauntaunSound3"],[k.playSoundTauntaunSound4(),"TauntaunSound4"],[k.playSoundMynockRandom(),"MynockRandom"],[k.playSoundMynockSound1(),"MynockSound1"],[k.playSoundMynockSound2(),"MynockSound2"],[k.playSoundMynockSound3(),"MynockSound3"],[k.playSoundProbotRandom(),"ProbotRandom"],[k.playSoundProbotSound1(),"ProbotSound1"],[k.playSoundProbotSound2(),"ProbotSound2"],[k.playSoundProbotSound3(),"ProbotSound3"],[k.playSoundMouseDroidRandom(),"MouseDroidRandom"],[k.playSoundMouseDroidSound1(),"MouseDroidSound1"],[k.playSoundMouseDroidSound2(),"MouseDroidSound2"],[k.playSoundMouseDroidSound3(),"MouseDroidSound3"],[k.playSoundAlert1(),"alert1"],[k.playSoundAlert2(),"alert2"],[k.playSoundAlert3(),"alert3"],[k.playSoundAlert4(),"alert4"],[k.playSoundApplause(),"applause"]],a.soundChoicesK1=[],a.soundMetadata=[{name:"start",volume:.2},{name:"win",volume:.2},{name:"failure",volume:.2},{name:"flag",volume:.2},{name:"R2-D2sound1",volume:.2},{name:"R2-D2sound2",volume:.2},{name:"R2-D2sound3",volume:.2},{name:"R2-D2sound4",volume:.2},{name:"R2-D2sound5",volume:.2},{name:"R2-D2sound6",volume:.2},{name:"R2-D2sound7",volume:.2},{name:"R2-D2sound8",volume:.2},{name:"R2-D2sound9",volume:.2},{name:"C-3POsound1",volume:.2},{name:"C-3POsound2",volume:.2},{name:"C-3POsound3",volume:.2},{name:"C-3POsound4",volume:.2},{name:"PufferPigSound1",volume:.2},{name:"PufferPigSound2",volume:.2},{name:"PufferPigSound3",volume:.2},{name:"PufferPigSound4",volume:.2},{name:"TauntaunSound1",volume:.2},{name:"TauntaunSound2",volume:.2},{name:"TauntaunSound3",volume:.2},{name:"TauntaunSound4",volume:.2},{name:"MynockSound1",volume:.2},{name:"MynockSound2",volume:.2},{name:"MynockSound3",volume:.2},{name:"ProbotSound1",volume:.2},{name:"ProbotSound2",volume:.2},{name:"ProbotSound3",volume:.2},{name:"MouseDroidSound1",volume:.2},{name:"MouseDroidSound2",volume:.2},{name:"MouseDroidSound3",volume:.2},{name:"alert1",volume:.2},{name:"alert2",volume:.2},{name:"alert3",volume:.2},{name:"alert4",volume:.2},{name:"applause",volume:.2}],a.musicMetadata=q,a.playFinalGoalSound=!0,a.mapChoices=[[k.setMapRandom(),n],[k.setMapBlank(),'"blank"'],[k.setMapCircle(),'"circle"'],[k.setMapHorizontal(),'"horizontal"'],[k.setMapGrid(),'"grid"'],[k.setMapBlobs(),'"blobs"']],a.backgroundChoices=[[k.setBackgroundRandom(),n],[k.setBackgroundEndor(),'"endor"'],[k.setBackgroundHoth(),'"hoth"'],[k.setBackgroundStarship(),'"starship"']],a.backgroundChoicesK1=[[a.endor.background,'"endor"'],[a.hoth.background,'"hoth"'],[a.starship.background,'"starship"'],[a.randomPurpleIcon,n]],a.spriteChoices=[[k.setDroidHidden(),o],[k.setDroidRandom(),n],[k.setDroidR2D2(),'"r2-d2"'],[k.setDroidC3PO(),'"c-3po"']],a.setSpritePrefix=k.setDroid(),a.projectileChoices=[],a.itemChoices=[[k.itemStormtrooper(),'"stormtrooper"'],[k.itemRebelPilot(),'"rebelpilot"'],[k.itemPufferPig(),'"pufferpig"'],[k.itemMynock(),'"mynock"'],[k.itemMouseDroid(),'"mousedroid"'],[k.itemTauntaun(),'"tauntaun"'],[k.itemProbot(),'"probot"'],[k.itemRandom(),n]]}function h(a,b){a.preloadAssets=!0,a.hideIconInClearPuzzle=!0,a.defaultBackground="main",a.projectileFrames=10,a.itemFrames=10,a.instructions2ImageSubstitutions={bb8:a.assetUrl("instructions_bb8.png"),hazard:a.assetUrl("instructions_hazard.png"),scrapmetal1:a.assetUrl("goal1.png"),scrapmetal2:a.assetUrl("goal2.png")},a.ProjectileClassNames=[],a.ItemClassNames=["hazard"],a.AutohandlerTouchItems={},a.AutohandlerGetAllItems={},a.specialItemProperties={hazard:{frames:13,animationFrameDuration:6,width:100,height:100,scale:1.3,renderOffset:{x:0,y:-25},activity:"watchActor",speed:m.SpriteSpeed.VERY_SLOW,isHazard:!0}},a.goal1=a.assetUrl("goal1.png"),a.goal2=a.assetUrl("goal2.png"),a.goalSpriteWidth=50,a.goalSpriteHeight=50,a.animatedGoalFrames=1,a.disableClipRectOnGoals=!0,a.goalEffect="glow",a.timePerGoalAnimationFrame=100,a.goalCollisionRectWidth=50,a.goalCollisionRectHeight=50,a.fadeOutGoal=!0,a.goalSuccess=null,a.goalRenderOffsetX=0,a.goalRenderOffsetY=0,a.projectileSpriteWidth=70,a.projectileSpriteHeight=70,a.itemCollisionRectWidth=50,a.itemCollisionRectHeight=50,a.spriteCollisionRectWidth=50,a.spriteCollisionRectHeight=50,a.wallCollisionRectOffsetX=0,a.wallCollisionRectOffsetY=24,a.wallCollisionRectWidth=30,a.wallCollisionRectHeight=20,a.gridSpriteRenderOffsetX=-20,a.gridSpriteRenderOffsetY=-40,a.avatarList=["bb-8"],a.avatarList.forEach(function(b){a[b]={sprite:a.assetUrl("avatar_"+b+".png"),walk:a.assetUrl("walk_"+b+".png"),dropdownThumbnail:a.assetUrl("avatar_"+b+"_thumb.png"),frameCounts:{normal:21,turns:8,emotions:0,walk:19},drawScale:2,animations:{turns:8},animationFrameDuration:3}}),a["bb-8"].movementAudio=[{begin:"move1",volume:.3},{begin:"move2",volume:.3},{begin:"move3",volume:.3},{begin:"move4",volume:.3}],a.preventProjectileLoop=function(a){return""===a},a.preventItemLoop=function(a){return""===a},a.winAvatar=null,a.hazard=a.assetUrl("hazard_idle.png"),a.main={background:a.assetUrl("background_background1.jpg"),tiles:a.assetUrl("tiles_background1.png"),clouds:[a.assetUrl("cloud_light.png"),a.assetUrl("cloud_light2.png")]},a.enlargeWallTiles={minCol:0,maxCol:3,minRow:3,maxRow:5},a.sounds=["move1","move2","move3","move4"],a.soundChoices=[],a.soundChoicesK1=[],a.musicMetadata=q,a.playFinalGoalSound=!0,a.mapChoices=[],a.backgroundChoices=[],a.backgroundChoicesK1=[],a.spriteChoices=[[k.setDroidHidden(),o],[k.setDroidRandom(),n],[k.setDroidBB8(),'"bb-8"']],a.setSpritePrefix=k.setDroid(),a.projectileChoices=[],a.itemChoices=[]}function i(a,b){a.defaultBackground="cave",a.projectileFrames=8,a.itemFrames=8,a.explosion=a.assetUrl("explosion.png"),a.explosionThumbnail=a.assetUrl("explosion_thumb.png"),a.explosionFrames=20,a.fadeExplosion=!1,a.timePerExplosionFrame=40,a.hardcourt={background:a.assetUrl("background.png")},a.black={background:a.assetUrl("retro_background.png")},a.cave={background:a.assetUrl("background_cave.png")},a.night={background:a.assetUrl("background_santa.png")},a.cloudy={background:a.assetUrl("background_scifi.png")},a.underwater={background:a.assetUrl("background_underwater.png")},a.city={background:a.assetUrl("background_city.png")},a.desert={background:a.assetUrl("background_desert.png")},a.rainbow={background:a.assetUrl("background_rainbow.png")},a.soccer={background:a.assetUrl("background_soccer.png")},a.space={background:a.assetUrl("background_space.png")},a.tennis={background:a.assetUrl("background_tennis.png")},a.winter={background:a.assetUrl("background_winter.png")},a.grid={background:a.assetUrl("background_grid.png")},a.avatarList=["dog","cat","penguin","dinosaur","octopus","witch","bat","bird","dragon","squirrel","wizard","alien","ghost","monster","robot","unicorn","zombie","knight","ninja","pirate","caveboy","cavegirl","princess","spacebot","soccergirl","soccerboy","tennisgirl","tennisboy"],a.avatarList.forEach(function(b){a[b]={sprite:a.assetUrl(b+"_spritesheet_200px.png"),dropdownThumbnail:a.assetUrl(b+"_thumb.png"),frameCounts:{normal:2,holdIdleFrame0Count:8,turns:7,emotions:3},animationFrameDuration:6}}),a.backgroundChoices=[[k.setBackgroundRandom(),n],[k.setBackgroundCave(),'"cave"'],[k.setBackgroundNight(),'"night"'],[k.setBackgroundCloudy(),'"cloudy"'],[k.setBackgroundUnderwater(),'"underwater"'],[k.setBackgroundHardcourt(),'"hardcourt"'],[k.setBackgroundBlack(),'"black"'],[k.setBackgroundCity(),'"city"'],[k.setBackgroundDesert(),'"desert"'],[k.setBackgroundRainbow(),'"rainbow"'],[k.setBackgroundSoccer(),'"soccer"'],[k.setBackgroundSpace(),'"space"'],[k.setBackgroundTennis(),'"tennis"'],[k.setBackgroundWinter(),'"winter"']],a.backgroundChoicesK1=[[a.cave.background,'"cave"'],[a.night.background,'"night"'],[a.cloudy.background,'"cloudy"'],[a.underwater.background,'"underwater"'],[a.hardcourt.background,'"hardcourt"'],[a.black.background,'"black"'],[a.city.background,'"city"'],[a.desert.background,'"desert"'],[a.rainbow.background,'"rainbow"'],[a.soccer.background,'"soccer"'],[a.space.background,'"space"'],[a.tennis.background,'"tennis"'],[a.winter.background,'"winter"'],[a.randomPurpleIcon,n]],a.spriteChoices=[[k.setSpriteHidden(),o],[k.setSpriteRandom(),n],[k.setSpriteWitch(),'"witch"'],[k.setSpriteCat(),'"cat"'],[k.setSpriteDinosaur(),'"dinosaur"'],[k.setSpriteDog(),'"dog"'],[k.setSpriteOctopus(),'"octopus"'],[k.setSpritePenguin(),'"penguin"'],[k.setSpriteBat(),'"bat"'],[k.setSpriteBird(),'"bird"'],[k.setSpriteDragon(),'"dragon"'],[k.setSpriteSquirrel(),'"squirrel"'],[k.setSpriteWizard(),'"wizard"'],[k.setSpriteAlien(),'"alien"'],[k.setSpriteGhost(),'"ghost"'],[k.setSpriteMonster(),'"monster"'],[k.setSpriteRobot(),'"robot"'],[k.setSpriteUnicorn(),'"unicorn"'],[k.setSpriteZombie(),'"zombie"'],[k.setSpriteKnight(),'"knight"'],[k.setSpriteNinja(),'"ninja"'],[k.setSpritePirate(),'"pirate"'],[k.setSpriteCaveBoy(),'"caveboy"'],[k.setSpriteCaveGirl(),'"cavegirl"'],[k.setSpritePrincess(),'"princess"'],[k.setSpriteSpacebot(),'"spacebot"'],[k.setSpriteSoccerGirl(),'"soccergirl"'],[k.setSpriteSoccerBoy(),'"soccerboy"'],[k.setSpriteTennisGirl(),'"tennisgirl"'],[k.setSpriteTennisBoy(),'"tennisboy"']],a.projectileChoices=[[k.projectileBlueFireball(),'"blue_fireball"'],[k.projectilePurpleFireball(),'"purple_fireball"'],[k.projectileRedFireball(),'"red_fireball"'],[k.projectileYellowHearts(),'"yellow_hearts"'],[k.projectilePurpleHearts(),'"purple_hearts"'],[k.projectileRedHearts(),'"red_hearts"'],[k.projectileRandom(),n]],a.makeProjectileChoices=[[k.makeProjectileBlueFireball(),'"blue_fireball"'],[k.makeProjectilePurpleFireball(),'"purple_fireball"'],[k.makeProjectileRedFireball(),'"red_fireball"'],[k.makeProjectileYellowHearts(),'"yellow_hearts"'],[k.makeProjectilePurpleHearts(),'"purple_hearts"'],[k.makeProjectileRedHearts(),'"red_hearts"']],a.whenProjectileCollidedChoices=[[k.whenSpriteCollidedWithBlueFireball(),"blue_fireball"],[k.whenSpriteCollidedWithPurpleFireball(),"purple_fireball"],[k.whenSpriteCollidedWithRedFireball(),"red_fireball"],[k.whenSpriteCollidedWithYellowHearts(),"yellow_hearts"],[k.whenSpriteCollidedWithPurpleHearts(),"purple_hearts"],[k.whenSpriteCollidedWithRedHearts(),"red_hearts"]],a.itemChoices=[[k.itemBlueFireball(),'"item_blue_fireball"'],[k.itemPurpleFireball(),'"item_purple_fireball"'],[k.itemRedFireball(),'"item_red_fireball"'],[k.itemYellowHearts(),'"item_yellow_hearts"'],[k.itemPurpleHearts(),'"item_purple_hearts"'],[k.itemRedHearts(),'"item_red_hearts"'],[k.itemRandom(),n]]}var j=a("../skins"),k=a("./locale"),l=a("../locale"),m=a("./constants"),n=(a("../StudioApp").singleton,m.RANDOM_VALUE),o=m.HIDDEN_VALUE,p=(m.CLICK_VALUE,m.VISIBLE_VALUE,{text:l.defaultTwitterText()+" @codeorg",hashtag:"HourOfCode"}),q=[{name:"song1",volume:.5},{name:"song2",volume:.5},{name:"song3",volume:.5},{name:"song4",volume:.4},{name:"song5",volume:.4},{name:"song6",volume:.5},{name:"song7",volume:.4},{name:"song8",volume:.4},{name:"song9",volume:.4},{name:"song10",volume:.5},{name:"song11",volume:.45},{name:"song12",volume:.4},{name:"song13",volume:.4},{name:"song14",volume:.5},{name:"song15",volume:.55}];c.load=function(a,b){var c=j.load(a,b);switch(c.ProjectileClassNames=["blue_fireball","purple_fireball","red_fireball","purple_hearts","red_hearts","yellow_hearts"],c.ItemClassNames=["item_blue_fireball","item_purple_fireball","item_red_fireball","item_purple_hearts","item_red_hearts","item_yellow_hearts"],c.yellow_hearts=c.assetUrl("yellow_hearts.gif"),c.purple_hearts=c.assetUrl("purple_hearts.gif"),c.red_hearts=c.assetUrl("red_hearts.gif"),c.blue_fireball=c.assetUrl("blue_fireball.png"),c.purple_fireball=c.assetUrl("purple_fireball.png"),c.red_fireball=c.assetUrl("red_fireball.png"),c.item_yellow_hearts=c.assetUrl("yellow_hearts.gif"),c.item_purple_hearts=c.assetUrl("purple_hearts.gif"),c.item_red_hearts=c.assetUrl("red_hearts.gif"),c.item_blue_fireball=c.assetUrl("blue_fireball.png"),c.item_purple_fireball=c.assetUrl("purple_fireball.png"),c.item_red_fireball=c.assetUrl("red_fireball.png"),c.whenUp=c.assetUrl("when-up.png"),c.whenDown=c.assetUrl("when-down.png"),c.whenLeft=c.assetUrl("when-left.png"),c.whenRight=c.assetUrl("when-right.png"),c.collide=c.assetUrl("when-sprite-collide.png"),c.emotionAngry=c.assetUrl("emotion-angry.png"),c.emotionNormal=c.assetUrl("emotion-nothing.png"),c.emotionSad=c.assetUrl("emotion-sad.png"),c.emotionHappy=c.assetUrl("emotion-happy.png"),c.speechBubble=c.assetUrl("say-sprite.png"),c.goal=c.assetUrl("goal.png"),c.goalSuccess=c.assetUrl("goal_success.png"),c.builtinSounds=["start","win","failure","flag"],c.sounds=["rubber","crunch","goal1","goal2","wood","retro","slap","hit","winpoint","winpoint2","losepoint","losepoint2"],c.soundChoices=[[k.playSoundRandom(),n],[k.playSoundHit(),"hit"],[k.playSoundWood(),"wood"],[k.playSoundRetro(),"retro"],[k.playSoundSlap(),"slap"],[k.playSoundRubber(),"rubber"],[k.playSoundCrunch(),"crunch"],[k.playSoundWinPoint(),"winpoint"],[k.playSoundWinPoint2(),"winpoint2"],[k.playSoundLosePoint(),"losepoint"],[k.playSoundLosePoint2(),"losepoint2"],[k.playSoundGoal1(),"goal1"],[k.playSoundGoal2(),"goal2"]],c.soundChoicesK1=[[k.soundRandom(),n],[k.soundHit(),"hit"],[k.soundWood(),"wood"],[k.soundRetro(),"retro"],[k.soundSlap(),"slap"],[k.soundRubber(),"rubber"],[k.soundCrunch(),"crunch"],[k.soundWinPoint(),"winpoint"],[k.soundWinPoint2(),"winpoint2"],[k.soundLosePoint(),"losepoint"],[k.soundLosePoint2(),"losepoint2"],[k.soundGoal1(),"goal1"],[k.soundGoal2(),"goal2"]],
c.background=c.assetUrl("background.png"),c.spriteHeight=100,c.spriteWidth=100,c.dropdownThumbnailWidth=50,c.dropdownThumbnailHeight=50,c.preloadAssets=!0,c.setSpritePrefix=k.setSprite(),c.activityChoices=[[k.setActivityRandom(),n],[k.setActivityRoam(),'"roam"'],[k.setActivityChase(),'"chase"'],[k.setActivityFlee(),'"flee"'],[k.setActivityNone(),'"none"']],c.id){case"gumball":d(c,a);break;case"iceage":e(c,a);break;case"infinity":f(c,a);break;case"hoc2015":g(c,a);break;case"hoc2015x":h(c,a);break;case"studio":i(c,a)}return c}},{"../StudioApp":"/home/ubuntu/staging/apps/build/js/StudioApp.js","../locale":"/home/ubuntu/staging/apps/build/js/locale.js","../skins":"/home/ubuntu/staging/apps/build/js/skins.js","./constants":"/home/ubuntu/staging/apps/build/js/studio/constants.js","./locale":"/home/ubuntu/staging/apps/build/js/studio/locale.js"}],"/home/ubuntu/staging/apps/build/js/studio/levels.js":[function(a,b,c){"use strict";function d(a){var b={};return a.sprite&&(b.SPRITE=a.sprite),a.requiredText&&(b.TEXT=a.requiredText),a.notDefaultText&&(b.TEXT=k.helloWorld()),[{test:function(b){return"studio_saySprite"!==b.type?!1:a.sprite&&b.getTitleValue("SPRITE")!==a.sprite?!1:(a.notDefaultText||a.requiredText)&&b.getTitleValue("TEXT")===k.defaultSayText()?!1:!0},type:"studio_saySprite",titles:b}]}function e(a){var b={};return a.sprite&&(b.SPRITE=a.sprite),a.dir&&(b.DIR=a.dir),[{test:function(b){return"studio_move"!==b.type?!1:a.sprite&&b.getTitleValue("SPRITE")!==a.sprite?!1:a.dir&&b.getTitleValue("DIR")!==a.dir?!1:!0},type:"studio_move",titles:b}]}function f(){return e({dir:"1"})}function g(){return e({dir:"4"})}function h(){return e({dir:"2"})}function i(){return e({dir:"8"})}function j(a,b){return'<block type="studio_whenUp" deletable="false" x="20" y="'+a.toString()+'"></block>     <block type="studio_whenDown" deletable="false" x="20" y="'+(b+a).toString()+'"></block>     <block type="studio_whenLeft" deletable="false" x="20" y="'+(2*b+a).toString()+'"></block>     <block type="studio_whenRight" deletable="false" x="20" y="'+(3*b+a).toString()+'"></block>'}var k=a("./locale"),l=a("../utils"),m=a("../block_utils"),n=a("./constants"),o=(n.Direction,n.Emotions),p=m.createToolbox,q=m.blockOfType,r=m.createCategory,s='<block type="studio_move"><title name="DIR">1</title></block>   <block type="studio_move"><title name="DIR">4</title></block>   <block type="studio_move"><title name="DIR">8</title></block>   <block type="studio_move"><title name="DIR">2</title></block>',t='<block type="studio_move"><title name="DIR">1</title></block>   <block type="studio_move"><title name="DIR">4</title></block>',u='<block type="when_run"><next>   <block type="studio_move"><title name="DIR">2</title></block></next>   </block>',v='<block type="when_run"><next>   <block type="studio_move"><title name="DIR">4</title></block></next>   </block>',w='<block type="studio_whenUp" deletable="false" x="20" y="20"></block>   <block type="studio_whenDown" deletable="false" x="20" y="150"></block>',x='<block type="studio_whenUp" deletable="false" x="20" y="20"></block>   <block type="studio_whenDown" deletable="false" x="20" y="150"></block>   <block type="studio_whenLeft" deletable="false" x="20" y="280"></block>   <block type="studio_whenRight" deletable="false" x="20" y="410"></block>',y=q("studio_moveNorthDistance")+q("studio_moveEastDistance")+q("studio_moveSouthDistance")+q("studio_moveWestDistance"),z=(q("studio_moveNorth")+q("studio_moveEast")+q("studio_moveSouth")+q("studio_moveWest"),b.exports={});z.custom={ideal:1/0,requiredBlocks:[],scale:{snapRadius:2},startBlocks:""},z.dog_hello={ideal:2,requiredBlocks:[d({notDefaultText:!0})],scale:{snapRadius:2},map:[[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0],[0,0,0,16,0,0,0,0],[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0]],goal:{successCondition:function(){return Studio.sayComplete>0}},timeoutFailureTick:100,toolbox:p(q("studio_saySprite")),startBlocks:'<block type="when_run" deletable="false" x="20" y="20"></block>'},z.k1_1=l.extend(z.dog_hello,{isK1:!0,toolbox:p(q("studio_saySprite"))}),z.c2_1=l.extend(z.dog_hello),z.c3_story_1=l.extend(z.dog_hello),z.playlab_1=l.extend(z.dog_hello,{background:"winter",timeoutFailureTick:null,timeoutAfterWhenRun:!0,firstSpriteIndex:2,goal:{successCondition:function(){return Studio.allWhenRunBlocksComplete()&&Studio.sayComplete>0}},requiredBlocks:[d({requiredText:k.hello()})]}),z.iceage_hello1=l.extend(z.playlab_1,{background:"icy5",firstSpriteIndex:1}),z.gumball_hello1=l.extend(z.playlab_1,{background:"dots",firstSpriteIndex:0}),z.dog_and_cat_hello={ideal:3,requiredBlocks:[d({sprite:"0",notDefaultText:!0}),d({sprite:"1",notDefaultText:!0})],scale:{snapRadius:2},map:[[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0],[0,0,16,0,0,16,0,0],[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0]],goal:{successCondition:function(){return Studio.sayComplete>1}},timeoutFailureTick:200,toolbox:p(q("studio_saySprite")),startBlocks:'<block type="when_run" deletable="false" x="20" y="20"></block>'},z.k1_2=l.extend(z.dog_and_cat_hello,{isK1:!0,toolbox:p(q("studio_saySprite"))}),z.c2_2=l.extend(z.dog_and_cat_hello,{}),z.c3_story_2=l.extend(z.dog_and_cat_hello,{}),z.playlab_2=l.extend(z.dog_and_cat_hello,{background:"desert",firstSpriteIndex:20,timeoutFailureTick:null,timeoutAfterWhenRun:!0,defaultEmotion:o.HAPPY,goal:{successCondition:function(){return Studio.allWhenRunBlocksComplete()&&Studio.sayComplete>1}},requiredBlocks:[d({sprite:"0",requiredText:k.hello()}),d({sprite:"1",requiredText:k.hello()})],map:[[0,0,0,0,0,0,0,0],[0,0,0,0,0,16,0,0],[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0],[0,16,0,0,0,0,0,0],[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0]]}),z.iceage_hello2=l.extend(z.playlab_2,{background:"icy1",firstSpriteIndex:0}),z.gumball_hello2=l.extend(z.playlab_2,{background:"dots",firstSpriteIndex:3,defaultEmotion:o.NORMAL}),z.dog_move_cat={ideal:2,requiredBlocks:[[{test:"moveDistance",type:"studio_moveDistance",titles:{DIR:"2"}}]],scale:{snapRadius:2},map:[[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0],[0,0,16,0,0,16,0,0],[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0]],goal:{successCondition:function(){return Studio.sprite[0].isCollidingWith(1)}},timeoutFailureTick:100,toolbox:p('<block type="studio_moveDistance"><title name="DIR">2</title></block>'+q("studio_saySprite")),startBlocks:'<block type="when_run" deletable="false" x="20" y="20"></block>'},z.k1_3=l.extend(z.dog_move_cat,{isK1:!0,requiredBlocks:[[{test:function(a){return"studio_moveEastDistance"==a.type},type:"studio_moveEastDistance"}]],toolbox:p(y+q("studio_saySprite"))}),z.c2_3=l.extend(z.dog_move_cat,{}),z.c3_story_3=l.extend(z.dog_move_cat,{}),z.playlab_3={ideal:2,requiredBlocks:[[{test:"moveDistance",type:"studio_moveDistance",titles:{DIR:"2",DISTANCE:"200"}}]],timeoutFailureTick:null,timeoutAfterWhenRun:!0,scale:{snapRadius:2},background:"tennis",firstSpriteIndex:26,toolbox:p('<block type="studio_moveDistance"><title name="DIR">1</title><title name="DISTANCE">200</title></block><block type="studio_moveDistance"><title name="DIR">2</title><title name="DISTANCE">200</title></block><block type="studio_moveDistance"><title name="DIR">4</title><title name="DISTANCE">200</title></block><block type="studio_moveDistance"><title name="DIR">8</title><title name="DISTANCE">200</title></block>'),startBlocks:'<block type="when_run" deletable="false" x="20" y="20"></block>',map:[[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0],[0,16,0,0,0,1,0,0],[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0]]},z.iceage_move_to_flag=l.extend(z.playlab_3,{background:"icy3",firstSpriteIndex:2}),z.gumball_move_to_flag=l.extend(z.playlab_3,{background:"clouds",firstSpriteIndex:2}),z.dog_move_cat_hello={ideal:4,requiredBlocks:[[{test:"moveDistance",type:"studio_moveDistance",titles:{DIR:"2",DISTANCE:"100"}}],d({sprite:"1",requiredText:k.hello()})],scale:{snapRadius:2},map:[[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0],[0,0,16,0,0,16,0,0],[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0]],goal:{successCondition:function(){return Studio.sayComplete>0&&Studio.sprite[0].isCollidingWith(1)}},timeoutFailureTick:200,toolbox:p('<block type="studio_moveDistance"><title name="DIR">2</title></block>'+q("studio_saySprite")),startBlocks:'<block type="when_run" deletable="false" x="20" y="20"></block>     <block type="studio_whenSpriteCollided" deletable="false" x="20" y="120"></block>'},z.k1_4=l.extend(z.dog_move_cat_hello,{isK1:!0,requiredBlocks:[[{test:function(a){return"studio_moveEastDistance"==a.type},type:"studio_moveEastDistance"}],[{test:function(a){return"studio_saySprite"==a.type&&"1"===a.getTitleValue("SPRITE")&&a.getTitleValue("TEXT")!==k.defaultSayText()},type:"studio_saySprite",titles:{TEXT:k.hello(),SPRITE:"1"}}]],toolbox:p(y+q("studio_saySprite")),startBlocks:'<block type="when_run" deletable="false" x="20" y="20"></block>      <block type="studio_whenSpriteCollided" deletable="false" x="20" y="140"></block>'}),z.c2_4=l.extend(z.dog_move_cat_hello,{}),z.c3_story_4=l.extend(z.dog_move_cat_hello,{}),z.playlab_4={ideal:4,scale:{snapRadius:2},background:"tennis",avatarList:["tennisboy","tennisgirl"],defaultEmotion:o.SAD,requiredBlocks:[[{test:"moveDistance",type:"studio_moveDistance",titles:{DIR:"4",DISTANCE:"200"}}],[{test:"playSound",type:"studio_playSound",titles:{SOUND:"goal1"}}]],timeoutFailureTick:100,timeoutAfterWhenRun:!0,goal:{successCondition:function(){return Studio.playSoundCount>0&&Studio.sprite[0].isCollidingWith(1)}},toolbox:p('<block type="studio_moveDistance"><title name="DIR">1</title><title name="DISTANCE">200</title></block><block type="studio_moveDistance"><title name="DIR">2</title><title name="DISTANCE">200</title></block><block type="studio_moveDistance"><title name="DIR">4</title><title name="DISTANCE">200</title></block><block type="studio_moveDistance"><title name="DIR">8</title><title name="DISTANCE">200</title></block><block type="studio_playSound"><title name="SOUND">goal1</title></block>'),startBlocks:'<block type="when_run" deletable="false" x="20" y="20"></block><block type="studio_whenSpriteCollided" deletable="false" x="20" y="120"></block>',map:[[0,0,0,0,0,0,0,0],[0,0,0,16,0,0,0,0],[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0],[0,0,0,16,0,0,0,0],[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0]]},z.iceage_move_to_actor=l.extend(z.playlab_4,{background:"icy3",avatarList:["diego","manny"]}),z.gumball_move_to_actor=l.extend(z.playlab_4,{background:"space",avatarList:["gumball","darwin"],defaultEmotion:o.NORMAL}),z.click_hello={ideal:3,requiredBlocks:[d({requiredText:k.hello()})],scale:{snapRadius:2},map:[[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0],[0,0,0,16,0,0,0,0],[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0]],firstSpriteIndex:4,goal:{successCondition:function(){return this.successState.seenCmd||(this.successState.seenCmd=Studio.isCmdCurrentInQueue("saySprite","whenSpriteClicked-0")),Studio.sayComplete>0&&this.successState.seenCmd}},callouts:[{id:"playlab:click_hello:instructions",element_id:"#prompt-table",qtip_config:{content:{text:k.calloutInstructions()},position:{my:"bottom left",at:"top right",adjust:{x:-40,y:0}}}}],timeoutFailureTick:300,toolbox:p('<block type="studio_moveDistance"><title name="DIR">2</title></block>'+q("studio_saySprite")),startBlocks:'<block type="when_run" deletable="false" x="20" y="20"></block>     <block type="studio_whenSpriteClicked" deletable="false" x="20" y="120"></block>'},z.c2_5=l.extend(z.click_hello,{}),z.c3_game_1=l.extend(z.click_hello,{}),z.playlab_5=l.extend(z.click_hello,{background:"space",firstSpriteIndex:23,timeoutAfterWhenRun:!0,defaultEmotion:o.HAPPY,toolbox:p(q("studio_saySprite")),startBlocks:'<block type="studio_whenSpriteClicked" deletable="false" x="20" y="20"></block>'}),z.iceage_click_hello=l.extend(z.playlab_5,{background:"icy4",firstSpriteIndex:1}),z.octopus_happy={ideal:2,requiredBlocks:[[{test:"setSpriteEmotion",type:"studio_setSpriteEmotion"}]],scale:{snapRadius:2},map:[[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0],[0,0,0,16,0,0,0,0],[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0]],firstSpriteIndex:4,goal:{successCondition:function(){return Studio.sprite[0].emotion===o.HAPPY&&Studio.tickCount>=50}},timeoutFailureTick:100,toolbox:p('<block type="studio_moveDistance"><title name="DIR">2</title></block>'+q("studio_setSpriteEmotion")),startBlocks:'<block type="when_run" deletable="false" x="20" y="20"></block>'},z.k1_5=l.extend(z.octopus_happy,{isK1:!0,toolbox:p(y+q("studio_setSpriteEmotion"))}),z.c3_story_5=l.extend(z.octopus_happy,{}),z.c3_story_6={ideal:1/0,requiredBlocks:[],scale:{snapRadius:2},minWorkspaceHeight:1400,edgeCollisions:!0,projectileCollisions:!0,allowSpritesOutsidePlayspace:!1,spritesHiddenToStart:!0,freePlay:!0,map:[[0,16,0,0,0,16,0,0],[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0],[0,16,0,0,0,16,0,0],[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0],[0,16,0,0,0,16,0,0],[0,0,0,0,0,0,0,0]],toolbox:p(q("studio_setSprite")+q("studio_setBackground")+q("studio_whenSpriteCollided")+q("studio_repeatForever")+q("studio_showTitleScreen")+q("studio_move")+q("studio_moveDistance")+q("studio_stop")+q("studio_wait")+q("studio_playSound")+q("studio_changeScore")+q("studio_saySprite")+q("studio_setSpritePosition")+q("studio_setSpriteSpeed")+q("studio_setSpriteEmotion")),startBlocks:'<block type="when_run" deletable="false" x="20" y="20"></block>'},z.move_penguin={ideal:8,requiredBlocks:[[{test:"move",type:"studio_move"}]],scale:{snapRadius:2},softButtons:["leftButton","rightButton","downButton","upButton"],map:[[0,0,0,0,0,0,0,0],[1,0,0,0,0,1,0,0],[0,0,0,0,0,0,0,0],[0,0,16,0,0,0,0,0],[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0],[0,1,0,0,0,0,1,0],[0,0,0,0,0,0,0,0]],firstSpriteIndex:2,toolbox:p(q("studio_move")+q("studio_saySprite")),startBlocks:'<block type="studio_whenLeft" deletable="false" x="20" y="20"></block>     <block type="studio_whenRight" deletable="false" x="180" y="20"></block>     <block type="studio_whenUp" deletable="false" x="20" y="120"></block>     <block type="studio_whenDown" deletable="false" x="180" y="120"></block>'},z.c2_6=l.extend(z.move_penguin,{}),z.c3_game_2=l.extend(z.move_penguin,{}),z.playlab_6=l.extend(z.move_penguin,{background:"cave",firstSpriteIndex:5,goalOverride:{goalImage:"red_fireball",successImage:"blue_fireball",imageWidth:800},defaultEmotion:o.ANGRY,toolbox:p(q("studio_move",{DIR:8})+q("studio_move",{DIR:2})+q("studio_move",{DIR:1})+q("studio_move",{DIR:4})),map:[[1,0,0,0,0,0,1,0],[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0],[0,0,0,16,0,0,0,0],[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0],[1,0,0,0,0,0,1,0],[0,0,0,0,0,0,0,0]]}),z.iceage_move_events=l.extend(z.playlab_6,{background:"icy5",firstSpriteIndex:2,goalOverride:{}}),z.gumball_click_hello=l.extend(z.playlab_5,{background:"characters",firstSpriteIndex:1}),z.gumball_move_events=l.extend(z.playlab_6,{background:"cornered",firstSpriteIndex:3,goalOverride:{},defaultEmotion:o.NORMAL}),z.dino_up_and_down={ideal:11,requiredBlocks:[[{test:"moveDistance",type:"studio_moveDistance",titles:{SPRITE:"1",DISTANCE:"400"}}]],scale:{snapRadius:2},softButtons:["leftButton","rightButton","downButton","upButton"],map:[[0,0,0,0,1,0,0,0],[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0],[16,0,0,0,16,0,0,0],[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0],[0,0,0,0,1,0,0,0],[0,0,0,0,0,0,0,0]],firstSpriteIndex:2,protagonistSpriteIndex:1,timeoutFailureTick:150,minWorkspaceHeight:800,toolbox:p('<block type="studio_moveDistance">          <title name="DISTANCE">400</title>          <title name="SPRITE">1</title></block><block type="studio_saySprite">          <title name="SPRITE">1</title></block>'),startBlocks:'<block type="studio_whenLeft" deletable="false" x="20" y="20">       <next><block type="studio_move">               <title name="DIR">8</title></block>       </next></block>     <block type="studio_whenRight" deletable="false" x="20" y="150">       <next><block type="studio_move">               <title name="DIR">2</title></block>       </next></block>     <block type="studio_whenUp" deletable="false" x="20" y="280">       <next><block type="studio_move">               <title name="DIR">1</title></block>       </next></block>     <block type="studio_whenDown" deletable="false" x="20" y="410">       <next><block type="studio_move">               <title name="DIR">4</title></block>       </next></block>     <block type="studio_repeatForever" deletable="false" x="20" y="540"></block>'},z.c2_7=l.extend(z.dino_up_and_down,{}),z.c3_game_3=l.extend(z.dino_up_and_down,{}),z.playlab_7={ideal:3,background:"rainbow",firstSpriteIndex:10,scale:{snapRadius:2},softButtons:["leftButton","rightButton","downButton","upButton"],defaultEmotion:o.HAPPY,map:[[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0],[16,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0]],goal:{successCondition:function(){return 252===Studio.tickCount}},timeoutFailureTick:253,minWorkspaceHeight:800,toolbox:p('<block type="studio_moveDistance"><title name="DIR">1</title><title name="DISTANCE">400</title></block><block type="studio_moveDistance"><title name="DIR">2</title><title name="DISTANCE">400</title></block><block type="studio_moveDistance"><title name="DIR">4</title><title name="DISTANCE">400</title></block><block type="studio_moveDistance"><title name="DIR">8</title><title name="DISTANCE">400</title></block>'),startBlocks:'<block type="studio_repeatForever" deletable="false" x="20" y="20"></block>',requiredBlocks:[[{test:function(a){return"studio_moveDistance"===a.type&&"2"===a.getTitleValue("DIR")},type:"studio_moveDistance",titles:{DIR:2,DISTANCE:"400"}}],[{test:function(a){return"studio_moveDistance"===a.type&&"8"===a.getTitleValue("DIR")},type:"studio_moveDistance",titles:{DIR:8,DISTANCE:"400"}}]]},z.iceage_repeat=l.extend(z.playlab_7,{background:"icy1",firstSpriteIndex:4,map:[[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0],[0,16,0,0,0,0,0,0],[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0]]}),z.gumball_repeat=l.extend(z.playlab_7,{background:"dots",firstSpriteIndex:4,defaultEmotion:o.NORMAL,map:[[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0],[0,16,0,0,0,0,0,0],[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0]]}),z.penguin_ouch={ideal:14,requiredBlocks:[d({sprite:"0",requiredText:k.ouchExclamation()}),[{test:"playSound",type:"studio_playSound"}]],scale:{snapRadius:2},softButtons:["leftButton","rightButton","downButton","upButton"],map:[[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0],[16,0,0,0,16,0,0,0],[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0]],firstSpriteIndex:2,minWorkspaceHeight:900,goal:{successCondition:function(){return Studio.sprite[0].isCollidingWith(1)}},timeoutFailureTick:300,toolbox:p('<block type="studio_moveDistance">          <title name="DISTANCE">400</title>          <title name="SPRITE">1</title></block>'+q("studio_saySprite")+q("studio_playSound")),startBlocks:'<block type="studio_whenLeft" deletable="false" x="20" y="20">       <next><block type="studio_move">               <title name="DIR">8</title></block>       </next></block>     <block type="studio_whenRight" deletable="false" x="20" y="150">       <next><block type="studio_move">               <title name="DIR">2</title></block>       </next></block>     <block type="studio_whenUp" deletable="false" x="20" y="280">       <next><block type="studio_move">               <title name="DIR">1</title></block>       </next></block>     <block type="studio_whenDown" deletable="false" x="20" y="410">       <next><block type="studio_move">               <title name="DIR">4</title></block>       </next></block>     <block type="studio_repeatForever" deletable="false" x="20" y="540">       <statement name="DO"><block type="studio_moveDistance">               <title name="SPRITE">1</title>               <title name="DISTANCE">400</title>         <next><block type="studio_moveDistance">                 <title name="SPRITE">1</title>                 <title name="DISTANCE">400</title>                 <title name="DIR">4</title></block>         </next></block>     </statement></block>     <block type="studio_whenSpriteCollided" deletable="false" x="20" y="730"></block>'},z.c2_8=l.extend(z.penguin_ouch,{}),z.c3_game_4=l.extend(z.penguin_ouch,{}),z.penguin_touch_octopus={ideal:16,requiredBlocks:[[{test:"changeScore",type:"studio_changeScore"}]],scale:{snapRadius:2},softButtons:["leftButton","rightButton","downButton","upButton"],map:[[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0],[16,0,0,0,16,0,16,0],[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0]],firstSpriteIndex:2,minWorkspaceHeight:1050,goal:{successCondition:function(){return Studio.sprite[0].isCollidingWith(2)}},timeoutFailureTick:600,toolbox:p('<block type="studio_moveDistance">          <title name="DISTANCE">400</title>          <title name="SPRITE">1</title></block>'+q("studio_saySprite")+q("studio_playSound")+q("studio_changeScore")),startBlocks:'<block type="studio_whenLeft" deletable="false" x="20" y="20">       <next><block type="studio_move">               <title name="DIR">8</title></block>       </next></block>     <block type="studio_whenRight" deletable="false" x="20" y="150">       <next><block type="studio_move">               <title name="DIR">2</title></block>       </next></block>     <block type="studio_whenUp" deletable="false" x="20" y="280">       <next><block type="studio_move">               <title name="DIR">1</title></block>       </next></block>     <block type="studio_whenDown" deletable="false" x="20" y="410">       <next><block type="studio_move">               <title name="DIR">4</title></block>       </next></block>     <block type="studio_repeatForever" deletable="false" x="20" y="540">       <statement name="DO"><block type="studio_moveDistance">               <title name="SPRITE">1</title>               <title name="DISTANCE">400</title>         <next><block type="studio_moveDistance">                 <title name="SPRITE">1</title>                 <title name="DISTANCE">400</title>                 <title name="DIR">4</title></block>         </next></block>     </statement></block>     <block type="studio_whenSpriteCollided" deletable="false" x="20" y="730">       <next><block type="studio_playSound">       <next><block type="studio_saySprite">               <title name="TEXT">Ouch!</title></block>       </next></block>       </next></block>     <block type="studio_whenSpriteCollided" deletable="false" x="20" y="860">      <title name="SPRITE2">2</title></block>'},z.c2_9=l.extend(z.penguin_touch_octopus,{}),z.c3_game_5=l.extend(z.penguin_touch_octopus,{}),z.playlab_8={background:"rainbow",ideal:16,requiredBlocks:[[{test:"changeScore",type:"studio_changeScore"}],[{test:"playSound",type:"studio_playSound",titles:{SOUND:"winpoint"}}]],scale:{snapRadius:2},softButtons:["leftButton","rightButton","downButton","upButton"],map:[[0,0,0,0,0,0,0,0],[0,0,0,16,0,0,0,0],[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0],[16,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0]],avatarList:["unicorn","wizard"],defaultEmotion:o.HAPPY,goal:{successCondition:function(){return Studio.sprite[0].isCollidingWith(1)&&1===Studio.playerScore},failureCondition:function(){return Studio.sprite[0].isCollidingWith(1)&&1!==Studio.playerScore}},timeoutFailureTick:600,toolbox:p(q("studio_changeScore")+'<block type="studio_playSound"><title name="SOUND">winpoint</title></block>'),startBlocks:'<block type="studio_whenSpriteCollided" deletable="false" x="20" y="20"></block><block type="studio_repeatForever" deletable="false" x="20" y="150"><statement name="DO">'+m.blockWithNext("studio_moveDistance",{SPRITE:1,DIR:2,DISTANCE:400},q("studio_moveDistance",{SPRITE:1,DIR:8,DISTANCE:400}))+'</statement></block><block type="studio_whenLeft" deletable="false" x="20" y="300"><next>'+q("studio_move",{SPRITE:0,DIR:8})+'</next></block><block type="studio_whenRight" deletable="false" x="20" y="400"><next>'+q("studio_move",{SPRITE:0,DIR:2})+'</next></block><block type="studio_whenUp" deletable="false" x="20" y="500"><next>'+q("studio_move",{SPRITE:0,DIR:1})+'</next></block><block type="studio_whenDown" deletable="false" x="20" y="600"><next>'+q("studio_move",{SPRITE:0,DIR:4})+"</next></block>"},z.iceage_sound_and_points=l.extend(z.playlab_8,{background:"icy2",avatarList:["sid","granny"]}),z.gumball_sound_and_points=l.extend(z.playlab_8,{background:"wood",avatarList:["bananajoe","anton"],delayCompletion:500,defaultEmotion:o.NORMAL}),z.change_background_and_speed={ideal:19,requiredBlocks:[[{test:"setBackground",type:"studio_setBackground",titles:{VALUE:'"night"'}}],[{test:"setSpriteSpeed",type:"studio_setSpriteSpeed",titles:{VALUE:"Studio.SpriteSpeed.FAST"}}]],scale:{snapRadius:2},softButtons:["leftButton","rightButton","downButton","upButton"],map:[[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0],[16,0,0,0,16,0,16,0],[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0]],firstSpriteIndex:2,minWorkspaceHeight:1250,goal:{successCondition:function(){return Studio.sprite[0].isCollidingWith(2)}},timeoutFailureTick:600,toolbox:p(q("studio_setBackground",{VALUE:'"night"'})+q("studio_moveDistance",{DISTANCE:400,SPRITE:1})+q("studio_saySprite")+q("studio_playSound")+q("studio_changeScore")+q("studio_setSpriteSpeed",{VALUE:"Studio.SpriteSpeed.FAST"})),startBlocks:'<block type="when_run" deletable="false" x="20" y="20"></block><block type="studio_whenLeft" deletable="false" x="20" y="200"><next>'+q("studio_move",{DIR:8})+'</next></block><block type="studio_whenRight" deletable="false" x="20" y="330"><next>'+q("studio_move",{DIR:2})+'</next></block><block type="studio_whenUp" deletable="false" x="20" y="460"><next>'+q("studio_move",{DIR:1})+'</next></block><block type="studio_whenDown" deletable="false" x="20" y="590"><next>'+q("studio_move",{DIR:4})+'</next></block><block type="studio_repeatForever" deletable="false" x="20" y="720"><statement name="DO">'+m.blockWithNext("studio_moveDistance",{SPRITE:1,DIR:1,DISTANCE:400},q("studio_moveDistance",{SPRITE:1,DIR:4,DISTANCE:400}))+'</statement></block><block type="studio_whenSpriteCollided" deletable="false" x="20" y="880"><title name="SPRITE2">1</title><next>'+m.blockWithNext("studio_playSound",{},q("studio_saySprite",{TEXT:k.ouchExclamation()}))+'</next></block><block type="studio_whenSpriteCollided" deletable="false" x="20" y="1040"><title name="SPRITE2">2</title><next>'+q("studio_changeScore")+"</next></block>"},z.c2_10=l.extend(z.change_background_and_speed,{}),z.c3_game_6=l.extend(z.change_background_and_speed,{}),z.playlab_9={background:"black",requiredBlocks:[[{test:"setBackground",type:"studio_setBackground",titles:{VALUE:'"space"'}}],[{test:"setSpriteSpeed",type:"studio_setSpriteSpeed",titles:{VALUE:"Studio.SpriteSpeed.FAST"}}]],timeoutFailureTick:400,scale:{snapRadius:2},defaultEmotion:o.ANGRY,softButtons:["leftButton","rightButton","downButton","upButton"],avatarList:["spacebot","alien"],goal:{successCondition:function(){return Studio.sprite[0].isCollidingWith(1)}},map:[[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0],[16,0,0,0,0,0,16,0],[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0]],toolbox:p(q("studio_setSpriteSpeed",{VALUE:"Studio.SpriteSpeed.FAST"})+q("studio_setBackground",{VALUE:'"space"'})+q("studio_moveDistance",{DISTANCE:400,SPRITE:1})+q("studio_saySprite")+q("studio_playSound",{SOUND:"winpoint2"})+q("studio_changeScore")),minWorkspaceHeight:1250,startBlocks:'<block type="when_run" deletable="false" x="20" y="20"></block><block type="studio_repeatForever" deletable="false" x="20" y="150"><statement name="DO">'+m.blockWithNext("studio_moveDistance",{SPRITE:1,DIR:1,DISTANCE:400},q("studio_moveDistance",{SPRITE:1,DIR:4,DISTANCE:400}))+'</statement></block><block type="studio_whenSpriteCollided" deletable="false" x="20" y="290"><title name="SPRITE2">0</title><title name="SPRITE2">1</title><next>'+m.blockWithNext("studio_playSound",{SOUND:"winpoint2"},q("studio_saySprite",{TEXT:k.alienInvasion()}))+'</next></block><block type="studio_whenLeft" deletable="false" x="20" y="410"><next>'+q("studio_move",{DIR:8})+'</next></block><block type="studio_whenRight" deletable="false" x="20" y="510"><next>'+q("studio_move",{DIR:2})+'</next></block><block type="studio_whenUp" deletable="false" x="20" y="610"><next>'+q("studio_move",{DIR:1})+'</next></block><block type="studio_whenDown" deletable="false" x="20" y="710"><next>'+q("studio_move",{DIR:4})+"</next></block>"},z.iceage_warn_ice_age=l.extend(z.playlab_9,{background:"ground",toolbox:p(q("studio_setSpriteSpeed",{VALUE:"Studio.SpriteSpeed.FAST"})+q("studio_setBackground",{VALUE:'"icy5"'})+q("studio_moveDistance",{DISTANCE:400,SPRITE:1})+q("studio_saySprite")+q("studio_playSound",{SOUND:"winpoint2"})+q("studio_changeScore")),requiredBlocks:[[{test:"setBackground",type:"studio_setBackground",titles:{VALUE:'"grassy"'}}],[{test:"setSpriteSpeed",type:"studio_setSpriteSpeed",titles:{VALUE:"Studio.SpriteSpeed.FAST"}}]],avatarList:["sid","diego"],startBlocks:'<block type="when_run" deletable="false" x="20" y="20"></block><block type="studio_repeatForever" deletable="false" x="20" y="150"><statement name="DO">'+m.blockWithNext("studio_moveDistance",{SPRITE:1,DIR:1,DISTANCE:400},q("studio_moveDistance",{SPRITE:1,DIR:4,DISTANCE:400}))+'</statement></block><block type="studio_whenSpriteCollided" deletable="false" x="20" y="290"><title name="SPRITE2">0</title><title name="SPRITE2">1</title><next>'+m.blockWithNext("studio_playSound",{SOUND:"winpoint2"},q("studio_saySprite",{TEXT:k.iceAge()}))+'</next></block><block type="studio_whenLeft" deletable="false" x="20" y="410"><next>'+q("studio_move",{DIR:8})+'</next></block><block type="studio_whenRight" deletable="false" x="20" y="510"><next>'+q("studio_move",{DIR:2})+'</next></block><block type="studio_whenUp" deletable="false" x="20" y="610"><next>'+q("studio_move",{DIR:1})+'</next></block><block type="studio_whenDown" deletable="false" x="20" y="710"><next>'+q("studio_move",{DIR:4})+"</next></block>"}),z.gumball_warn_food_fight=l.extend(z.playlab_9,{background:"dots",delayCompletion:500,defaultEmotion:o.NORMAL,toolbox:p(q("studio_setSpriteSpeed",{VALUE:"Studio.SpriteSpeed.FAST"})+q("studio_setBackground",{VALUE:'"characters"'})+q("studio_moveDistance",{DISTANCE:400,SPRITE:1})+q("studio_saySprite")+q("studio_playSound",{SOUND:"winpoint2"})+q("studio_changeScore")),requiredBlocks:[[{test:"setBackground",type:"studio_setBackground",titles:{VALUE:'"characters"'}}],[{test:"setSpriteSpeed",type:"studio_setSpriteSpeed",titles:{VALUE:"Studio.SpriteSpeed.FAST"}}]],avatarList:["darwin","penny"],startBlocks:'<block type="when_run" deletable="false" x="20" y="20"></block><block type="studio_repeatForever" deletable="false" x="20" y="150"><statement name="DO">'+m.blockWithNext("studio_moveDistance",{SPRITE:1,DIR:1,DISTANCE:400},q("studio_moveDistance",{SPRITE:1,DIR:4,DISTANCE:400}))+'</statement></block><block type="studio_whenSpriteCollided" deletable="false" x="20" y="290"><title name="SPRITE2">0</title><title name="SPRITE2">1</title><next>'+m.blockWithNext("studio_playSound",{SOUND:"winpoint2"},q("studio_saySprite",{TEXT:k.foodFight()}))+'</next></block><block type="studio_whenLeft" deletable="false" x="20" y="410"><next>'+q("studio_move",{DIR:8})+'</next></block><block type="studio_whenRight" deletable="false" x="20" y="510"><next>'+q("studio_move",{DIR:2})+'</next></block><block type="studio_whenUp" deletable="false" x="20" y="610"><next>'+q("studio_move",{DIR:1})+'</next></block><block type="studio_whenDown" deletable="false" x="20" y="710"><next>'+q("studio_move",{DIR:4})+"</next></block>"}),z.gumball_join_food_fight={background:"wood",delayCompletion:2e3,requiredBlocks:[[{test:"setSpriteEmotion",type:"studio_setSpriteEmotion"}],[{
test:"throw",type:"studio_throw"}]],timeoutFailureTick:300,scale:{snapRadius:2},defaultEmotion:o.NORMAL,avatarList:["bananajoe","anton"],map:[[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0],[16,0,0,0,0,16,0,0],[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0]],toolbox:p(q("studio_whenSpriteCollided",{SPRITE1:1,SPRITE2:"anything"})+q("studio_setSpriteEmotion",{SPRITE:1})+q("studio_throw",{SPRITE:0,DIR:2})+q("studio_playSound")+q("studio_saySprite")),startBlocks:'<block type="when_run" deletable="false" x="20" y="20"></block>',progressConditions:[{required:{setEmotion:!0,throwProjectile:!0},result:{success:!0}},{required:{timedOut:!0},result:{success:!1}}]},z.iceage_throw_hearts=l.extend(z.gumball_join_food_fight,{background:"icy3",avatarList:["sid","granny"]}),z.sandbox={ideal:1/0,requiredBlocks:[],scale:{snapRadius:2},softButtons:["leftButton","rightButton","downButton","upButton"],minWorkspaceHeight:1400,edgeCollisions:!0,projectileCollisions:!0,allowSpritesOutsidePlayspace:!1,spritesHiddenToStart:!0,freePlay:!0,map:[[0,16,0,0,0,16,0,0],[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0],[0,16,0,0,0,16,0,0],[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0],[0,16,0,0,0,16,0,0],[0,0,0,0,0,0,0,0]],toolbox:p(q("studio_setSprite")+q("studio_setBackground")+q("studio_whenArrow")+q("studio_whenSpriteClicked")+q("studio_whenSpriteCollided")+q("studio_repeatForever")+q("studio_showTitleScreen")+q("studio_move")+q("studio_moveDistance")+q("studio_stop")+q("studio_wait")+q("studio_playSound")+q("studio_changeScore")+q("studio_saySprite")+q("studio_setSpritePosition")+q("studio_throw")+q("studio_makeProjectile")+q("studio_setSpriteSpeed")+q("studio_setSpriteEmotion")+q("studio_vanish")),startBlocks:'<block type="when_run" deletable="false" x="20" y="20"></block>'},z.c2_11=l.extend(z.sandbox,{}),z.c3_game_7=l.extend(z.sandbox,{}),z.playlab_10=l.extend(z.sandbox,{appStringsFunctions:{continueText:k.playlab_lastLevel_continueText}}),z.iceage_free_play=l.extend(z.playlab_10,{appStringsFunctions:{continueText:k.playlab_lastLevel_continueText}}),z.gumball_free_play=l.extend(z.playlab_10,{appStringsFunctions:{continueText:k.playlab_lastLevel_continueText}}),z.k1_6={ideal:1/0,requiredBlocks:[],scale:{snapRadius:2},minWorkspaceHeight:1500,spritesHiddenToStart:!0,freePlay:!0,map:[[16,0,16,0,16,0,16,0],[0,16,0,16,0,16,0,0],[16,0,16,0,16,0,16,0],[0,16,0,16,0,16,0,0],[16,0,16,0,16,0,16,0],[0,16,0,16,0,16,0,0],[16,16,16,16,16,16,16,0],[0,0,0,0,0,0,0,0]],isK1:!0,softButtons:[],toolbox:p(q("studio_setSprite")+q("studio_saySprite")+y+q("studio_whenSpriteCollided")+q("studio_setBackground")+q("studio_setSpriteSpeed")+q("studio_setSpriteEmotion")+q("studio_playSound")+q("studio_vanish")),startBlocks:'<block type="when_run" deletable="false" x="20" y="20">      <next><block type="studio_setSprite">         <title name="SPRITE">0</title></block>       </next></block>'},z.k1_block_test=l.extend(z[99],{toolbox:p(q("studio_setSprite")+q("studio_moveNorth")+q("studio_moveSouth")+q("studio_moveEast")+q("studio_moveWest")+q("studio_moveNorth_length")+q("studio_moveSouth_length")+q("studio_moveEast_length")+q("studio_moveWest_length")),isK1:!0}),z.full_sandbox={scrollbars:!0,requiredBlocks:[],scale:{snapRadius:2},softButtons:["leftButton","rightButton","downButton","upButton"],minWorkspaceHeight:1400,edgeCollisions:!0,projectileCollisions:!0,allowSpritesOutsidePlayspace:!0,spritesHiddenToStart:!0,freePlay:!0,map:[[0,16,0,0,0,16,0,0],[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0],[0,16,0,0,0,16,0,0],[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0],[0,16,0,0,0,16,0,0],[0,0,0,0,0,0,0,0]],toolbox:p(r(k.catActions(),q("studio_setSprite")+q("studio_setBackground")+'<block type="studio_showTitleScreenParams">                         <value name="TITLE"><block type="text"></block>                         </value>                         <value name="TEXT"><block type="text"></block>                         </value></block>'+q("studio_move")+'<block type="studio_moveDistanceParams" inline="true">                       <value name="DISTANCE"><block type="math_number">                               <title name="NUM">25</title></block>                       </value></block>'+q("studio_stop")+'<block type="studio_waitParams" inline="true">                         <value name="VALUE"><block type="math_number">                                 <title name="NUM">1</title></block>                         </value></block>'+q("studio_playSound")+'<block type="studio_setScoreText" inline="true">                         <value name="TEXT"><block type="text"></block>                         </value></block><block type="studio_saySpriteParams" inline="true">                         <value name="TEXT"><block type="text"></block>                         </value></block>'+q("studio_setSpritePosition")+q("studio_addCharacter")+q("studio_throw")+q("studio_makeProjectile")+q("studio_setSpriteSpeed")+q("studio_setSpriteEmotion")+q("studio_vanish")+q("studio_setSpriteSize")+q("studio_showCoordinates"))+r(k.catEvents(),q("studio_whenArrow")+q("studio_whenSpriteClicked")+q("studio_whenSpriteCollided"))+r(k.catControl(),q("studio_repeatForever")+'<block type="controls_repeat_ext">                           <value name="TIMES">                             <block type="math_number">                               <title name="NUM">10</title>                             </block>                           </value>                         </block>'+q("controls_whileUntil")+'<block type="controls_for">                           <value name="FROM">                             <block type="math_number">                               <title name="NUM">1</title>                             </block>                           </value>                           <value name="TO">                             <block type="math_number">                               <title name="NUM">10</title>                             </block>                           </value>                           <value name="BY">                             <block type="math_number">                               <title name="NUM">1</title>                             </block>                           </value>                         </block>'+q("controls_flow_statements"))+r(k.catLogic(),q("controls_if")+q("logic_compare")+q("logic_operation")+q("logic_negate")+q("logic_boolean"))+r(k.catMath(),q("math_number")+'<block type="math_change">                           <value name="DELTA">                             <block type="math_number">                               <title name="NUM">1</title>                             </block>                           </value>                         </block><block type="math_random_int">                           <value name="FROM">                             <block type="math_number">                               <title name="NUM">1</title>                             </block>                           </value>                           <value name="TO">                             <block type="math_number">                               <title name="NUM">100</title>                             </block>                           </value>                         </block>'+q("math_arithmetic"))+r(k.catText(),q("text")+q("text_join")+'<block type="text_append">                           <value name="TEXT">                             <block type="text"></block>                           </value>                         </block>')+r(k.catVariables(),"","VARIABLE")+r(k.catProcedures(),"","PROCEDURE")+r("Functional",q("functional_string")+q("functional_background_string_picker")+q("functional_math_number")+'<block type="functional_math_number_dropdown"><title name="NUM" config="2,3,4,5,6,7,8,9,10,11,12">???</title></block>')+r("Functional Start",q("functional_start_setSpeeds")+q("functional_start_setBackgroundAndSpeeds"))+r("Functional Logic",q("functional_greater_than")+q("functional_less_than")+q("functional_number_equals")+q("functional_string_equals")+q("functional_logical_and")+q("functional_logical_or")+q("functional_logical_not")+q("functional_boolean"))),startBlocks:'<block type="when_run" deletable="false" x="20" y="20"></block>'},z.full_sandbox_infinity=l.extend(z.full_sandbox,{}),z.ec_sandbox=l.extend(z.sandbox,{editCode:!0,map:[[0,16,0,0,0,16,0,0],[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0],[0,16,0,0,0,16,0,0],[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0],[0,16,0,0,0,16,0,0],[0,0,0,0,0,0,0,0]],codeFunctions:{setSprite:{category:"Play Lab",noAutocomplete:!1},setBackground:{category:"Play Lab"},move:{category:"Play Lab",noAutocomplete:!1},playSound:{category:"Play Lab"},changeScore:{category:"Play Lab",noAutocomplete:!1},setSpritePosition:{category:"Play Lab",noAutocomplete:!1},setSpriteSpeed:{category:"Play Lab",noAutocomplete:!1},setSpriteEmotion:{category:"Play Lab",noAutocomplete:!1},setSpriteSize:{category:"Play Lab",noAutocomplete:!1},throwProjectile:{category:"Play Lab",noAutocomplete:!1},vanish:{category:"Play Lab",noAutocomplete:!1},onEvent:{category:"Play Lab",noAutocomplete:!1},forLoop_i_0_4:null,ifBlock:null,ifElseBlock:null,whileBlock:null,addOperator:null,subtractOperator:null,multiplyOperator:null,divideOperator:null,equalityOperator:null,inequalityOperator:null,greaterThanOperator:null,lessThanOperator:null,andOperator:null,orOperator:null,notOperator:null,randomNumber_max:null,randomNumber_min_max:null,mathRound:null,mathAbs:null,mathMax:null,mathMin:null,declareAssign_x:null,assign_x:null,declareAssign_x_array_1_4:null,declareAssign_x_prompt:null,functionParams_none:null,functionParams_n:null,callMyFunction:null,callMyFunction_n:null},startBlocks:""}),z.js_hoc2015_move_right={editCode:!0,autocompletePaletteApisOnly:!0,executePaletteApisOnly:!0,background:"main",music:["song1"],codeFunctions:{moveRight:null,moveLeft:null,moveUp:null,moveDown:null},startBlocks:["moveRight();",""].join("\n"),sortDrawOrder:!0,wallMapCollisions:!0,blockMovingIntoWalls:!0,gridAlignedMovement:!0,gridAlignedExtraPauseSteps:1,itemGridAlignedMovement:!0,slowExecutionFactor:10,removeItemsWhenActorCollides:!1,delayCompletion:2e3,floatingScore:!0,map:[[16908288,16908288,0,0,0,0,0,0],[16908288,16908288,0,65536,131072,1048576,0,0],[0,0,0,0,0,0,0,0],[0,0,0,16,0,1,0,0],[0,0,0,0,0,0,0,0],[0,0,0,1048576,65536,1179648,0,0],[0,17956864,17956864,0,0,0,0,1048576],[0,17956864,17956864,0,0,0,0,0]],instructions:k.hoc2015_move_right_instructions(),ticksBeforeFaceSouth:9,timeoutFailureTick:100,timeoutAfterWhenRun:!0,goalOverride:{goalImage:"goal1"},callouts:[{id:"playlab:js_hoc2015_move_right:runButton",element_id:"#runButton",qtip_config:{content:{text:k.calloutMoveRightRunButton()},position:{my:"bottom left",at:"top center",adjust:{x:0,y:0}}}}],progressConditions:[{required:{allGoalsVisited:!0},result:{success:!0,message:k.successHasAllGoals()}},{required:{timedOut:!0,allGoalsVisited:!1},result:{success:!1,message:k.failedHasAllGoals()}}]},z.js_hoc2015_move_right_down={editCode:!0,autocompletePaletteApisOnly:!0,executePaletteApisOnly:!0,background:"main",music:["song2"],codeFunctions:{moveRight:null,moveLeft:null,moveUp:null,moveDown:null},startBlocks:["moveRight();",""].join("\n"),sortDrawOrder:!0,wallMapCollisions:!0,blockMovingIntoWalls:!0,gridAlignedMovement:!0,gridAlignedExtraPauseSteps:1,itemGridAlignedMovement:!0,slowExecutionFactor:10,removeItemsWhenActorCollides:!1,delayCompletion:2e3,floatingScore:!0,map:[[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0],[17825792,17825792,0,0,0,0,0,0],[17825792,17825792,0,16,0,1,0,0],[0,0,0,16842752,16842752,0,0,0],[0,0,0,16842752,16842752,1,0,0],[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0]],instructions:k.hoc2015_move_right_down_instructions(),ticksBeforeFaceSouth:9,timeoutAfterWhenRun:!0,goalOverride:{goalImage:"goal2"},progressConditions:[{required:{allGoalsVisited:!0},result:{success:!0,message:k.successHasAllGoals()}},{required:{timedOut:!0,allGoalsVisited:!1},result:{success:!1,message:k.failedHasAllGoals()}}]},z.js_hoc2015_move_backtrack={editCode:!0,autocompletePaletteApisOnly:!0,executePaletteApisOnly:!0,background:"main",music:["song3"],codeFunctions:{moveRight:null,moveLeft:null,moveUp:null,moveDown:null},startBlocks:["moveRight();",""].join("\n"),sortDrawOrder:!0,wallMapCollisions:!0,blockMovingIntoWalls:!0,gridAlignedMovement:!0,gridAlignedExtraPauseSteps:1,itemGridAlignedMovement:!0,slowExecutionFactor:10,removeItemsWhenActorCollides:!1,delayCompletion:2e3,floatingScore:!0,map:[[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0],[0,0,0,65536,1,131072,0,0],[0,0,0,16,0,1,0,0],[0,0,0,0,0,0,0,0],[0,17825792,17825792,0,0,0,0,0],[0,17825792,17825792,0,0,0,0,0],[0,0,32,0,0,0,0,0]],instructions:k.hoc2015_move_backtrack_instructions(),ticksBeforeFaceSouth:9,timeoutAfterWhenRun:!0,goalOverride:{goalImage:"goal1"},progressConditions:[{required:{touchedHazardsAtOrAbove:1},result:{success:!1,message:k.failedAvoidHazard(),pauseInterpreter:!0}},{required:{allGoalsVisited:!0},result:{success:!0,message:k.successHasAllGoals()}},{required:{timedOut:!0,allGoalsVisited:!1},result:{success:!1,message:k.failedHasAllGoals()}}]},z.js_hoc2015_move_diagonal={editCode:!0,autocompletePaletteApisOnly:!0,executePaletteApisOnly:!0,textModeAtStart:!0,background:"main",music:["song4"],codeFunctions:{moveRight:null,moveLeft:null,moveUp:null,moveDown:null},startBlocks:["moveDown();",""].join("\n"),sortDrawOrder:!0,wallMapCollisions:!0,blockMovingIntoWalls:!0,gridAlignedMovement:!0,gridAlignedExtraPauseSteps:1,itemGridAlignedMovement:!0,slowExecutionFactor:10,removeItemsWhenActorCollides:!1,delayCompletion:2e3,floatingScore:!0,map:[[0,0,0,0,0,0,0,0],[0,0,0,0,65536,16,0,0],[0,17825792,17825792,0,1,0,0,0],[0,17825792,17825792,1,2359296,2424832,0,0],[0,32,1,0,0,0,0,0],[0,0,0,0,0,0,0,0],[0,0,0,20185088,20185088,20250624,20250624,0],[0,0,0,20185088,20185088,20250624,20250624,0]],embed:"false",instructions:k.hoc2015_move_diagonal_instructions(),ticksBeforeFaceSouth:9,timeoutAfterWhenRun:!0,goalOverride:{goalImage:"goal1"},progressConditions:[{required:{touchedHazardsAtOrAbove:1},result:{success:!1,message:k.failedAvoidHazard(),pauseInterpreter:!0}},{required:{allGoalsVisited:!0},result:{success:!0,message:k.successHasAllGoals()}},{required:{timedOut:!0,allGoalsVisited:!1},result:{success:!1,message:k.failedHasAllGoals()}}],callouts:[{id:"playlab:js_hoc2015_move_diagonal:showCodeToggle",element_id:"#show-code-header",qtip_config:{content:{text:k.calloutShowCodeToggle()},position:{my:"top right",at:"bottom left",adjust:{x:0,y:0}}}}]},z.js_hoc2015_move_around={editCode:!0,autocompletePaletteApisOnly:!0,executePaletteApisOnly:!0,textModeAtStart:!0,background:"main",music:["song9"],codeFunctions:{moveRight:null,moveLeft:null,moveUp:null,moveDown:null},startBlocks:["moveRight();",""].join("\n"),sortDrawOrder:!0,wallMapCollisions:!0,blockMovingIntoWalls:!0,gridAlignedMovement:!0,gridAlignedExtraPauseSteps:1,itemGridAlignedMovement:!0,slowExecutionFactor:10,removeItemsWhenActorCollides:!1,delayCompletion:2e3,floatingScore:!0,map:[[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0],[0,0,0,16,0,1,65536,0],[0,0,0,262144,131072,0,0,0],[0,0,32,1310720,0,1,0,32],[17956864,17956864,0,0,1,0,0,0],[17956864,17956864,0,0,0,0,0,0],[0,32,0,0,0,0,0,0]],embed:"false",instructions:k.hoc2015_move_around_instructions(),ticksBeforeFaceSouth:9,timeoutAfterWhenRun:!0,goalOverride:{goalImage:"goal2"},progressConditions:[{required:{touchedHazardsAtOrAbove:1},result:{success:!1,message:k.failedAvoidHazard(),pauseInterpreter:!0}},{required:{allGoalsVisited:!0},result:{success:!0,message:k.successHasAllGoals()}},{required:{timedOut:!0,allGoalsVisited:!1},result:{success:!1,message:k.failedHasAllGoals()}}]},z.js_hoc2015_move_finale={editCode:!0,autocompletePaletteApisOnly:!0,executePaletteApisOnly:!0,background:"main",music:["song8"],codeFunctions:{moveRight:null,moveLeft:null,moveUp:null,moveDown:null},startBlocks:["moveDown();",""].join("\n"),sortDrawOrder:!0,wallMapCollisions:!0,blockMovingIntoWalls:!0,gridAlignedMovement:!0,gridAlignedExtraPauseSteps:1,itemGridAlignedMovement:!0,slowExecutionFactor:10,removeItemsWhenActorCollides:!1,delayCompletion:2e3,floatingScore:!0,map:[[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0],[0,32,16,131072,1,1048576,0,0],[0,0,0,1,0,1,32,0],[0,0,1,1179648,0,0,0,0],[0,0,0,0,32,0,16908288,16908288],[0,16842752,16842752,0,0,0,16908288,16908288],[0,16842752,16842752,0,0,0,0,0]],embed:"false",instructions:k.hoc2015_move_finale_instructions(),ticksBeforeFaceSouth:9,timeoutAfterWhenRun:!0,goalOverride:{goalImage:"goal2"},progressConditions:[{required:{touchedHazardsAtOrAbove:1},result:{success:!1,message:k.failedAvoidHazard(),pauseInterpreter:!0}},{required:{allGoalsVisited:!0},result:{success:!0,message:k.successHasAllGoals()}},{required:{timedOut:!0,allGoalsVisited:!1},result:{success:!1,message:k.failedHasAllGoals()}}],callouts:[{id:"playlab:js_hoc2015_move_finale:showCodeToggle",element_id:"#show-code-header",qtip_config:{content:{text:k.calloutShowCodeCanToggle()},position:{my:"top right",at:"bottom left",adjust:{x:15,y:0}}}}]},z.js_hoc2015_event_two_items={editCode:!0,autocompletePaletteApisOnly:!0,executePaletteApisOnly:!0,preventUserDefinedFunctions:!0,background:"hoth",music:["song7"],wallMap:"blank",softButtons:["downButton","upButton"],codeFunctions:{goUp:null,goDown:null,whenUp:null,whenDown:null},startBlocks:["function whenUp() {","  ","}","function whenDown() {","  ","}"].join("\n"),sortDrawOrder:!0,wallMapCollisions:!0,blockMovingIntoWalls:!0,removeItemsWhenActorCollides:!0,delayCompletion:2e3,floatingScore:!0,map:[[0,0,0,0,0,0,0,0],[0,0,0,1,0,0,0,0],[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0],[0,0,0,16,0,0,0,0],[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0],[0,0,0,1,0,0,0,0]],pinWorkspaceToBottom:"true",embed:"false",instructions:k.hoc2015_event_two_items_instructions(),instructions2:k.hoc2015_event_two_items_instructions2(),timeoutFailureTick:600,showTimeoutRect:"rgba(0, 0, 0, 0.5)",goalOverride:{goalAnimation:"animatedGoal",goalRenderOffsetX:0},progressConditions:[{required:{allGoalsVisited:!0},result:{success:!0,message:k.successCharacter1()}},{required:{timedOut:!0},result:{success:!1,message:k.failedTwoItemsTimeout(),blocklyMessage:k.failedTwoItemsTimeoutBlockly()}}],callouts:[{id:"playlab:js_hoc2015_event_two_items:placeCommandsHere",element_id:".droplet-gutter-line:nth-of-type(2)",hide_target_selector:".droplet-drag-cover",qtip_config:{content:{text:k.calloutShowPlaceGoUpHere()},hide:{event:"mouseup touchend"},position:{my:"top left",at:"bottom right",adjust:{x:30,y:-10}}}},{id:"playlab:js_hoc2015_event_two_items:arrowsCallout",element_id:"#upButton",hide_target_selector:"#soft-buttons",qtip_config:{content:{text:k.calloutUseArrowButtons()},position:{my:"bottom left",at:"top center"}}}]},z.js_hoc2015_event_four_items={editCode:!0,autocompletePaletteApisOnly:!0,executePaletteApisOnly:!0,preventUserDefinedFunctions:!0,background:"hoth",music:["song5"],wallMap:"blobs",softButtons:["leftButton","rightButton","downButton","upButton"],codeFunctions:{goRight:null,goLeft:null,goUp:null,goDown:null,whenLeft:null,whenRight:null,whenUp:null,whenDown:null},startBlocks:["function whenUp() {","  ","}","function whenDown() {","  ","}"].join("\n"),sortDrawOrder:!0,wallMapCollisions:!0,blockMovingIntoWalls:!0,removeItemsWhenActorCollides:!0,delayCompletion:2e3,floatingScore:!0,map:[[0,0,0,0,0,0,0,0],[0,0,0,1,0,0,0,0],[0,0,0,0,0,0,0,0],[1,0,0,0,0,0,0,0],[0,0,0,16,0,0,0,1],[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0],[0,0,0,0,1,0,0,0]],embed:"false",instructions:k.hoc2015_event_four_items_instructions(),instructions2:k.hoc2015_event_four_items_instructions2(),timeoutFailureTick:1350,showTimeoutRect:"rgba(0, 0, 0, 0.5)",goalOverride:{goalAnimation:"animatedGoal"},progressConditions:[{required:{allGoalsVisited:!0},result:{success:!0,message:k.successCharacter1()}},{required:{timedOut:!0},result:{success:!1,message:k.failedFourItemsTimeout(),blocklyMessage:k.failedFourItemsTimeoutBlockly()}}]},z.js_hoc2015_score={avatarList:["R2-D2"],autocompletePaletteApisOnly:!0,executePaletteApisOnly:!0,preventUserDefinedFunctions:!0,editCode:!0,background:"hoth",music:["song6"],wallMap:"circle",softButtons:["leftButton","rightButton","downButton","upButton"],autohandlerOverrides:{whenGetRebelPilot:"whenTouchGoal"},codeFunctions:{playSound:null,addPoints:{params:["100"]},whenGetRebelPilot:null},startBlocks:["function whenGetRebelPilot() {",'  playSound("R2-D2random");',"}"].join("\n"),paramRestrictions:{playSound:{random:!0,"R2-D2random":!0,"R2-D2sound1":!0,"R2-D2sound2":!0,"R2-D2sound3":!0,"R2-D2sound4":!0}},sortDrawOrder:!0,wallMapCollisions:!0,blockMovingIntoWalls:!0,itemGridAlignedMovement:!0,removeItemsWhenActorCollides:!0,delayCompletion:2e3,floatingScore:!0,edgeCollisions:"true",map:[[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0],[1,0,0,16,0,0,0,1],[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0],[0,0,0,1,0,0,0,0]],instructions:k.hoc2015_score_instructions(),instructions2:k.hoc2015_score_instructions2(),autoArrowSteer:!0,timeoutFailureTick:1350,showTimeoutRect:"rgba(0, 0, 0, 0.5)",goalOverride:{goalAnimation:"animatedGoal"},goal:{successCondition:function(){return!1}},progressConditions:[{required:{allGoalsVisited:!0,currentPointsAtOrAbove:900},result:{success:!0,message:k.successCharacter1()}},{required:{timedOut:!0,allGoalsVisited:!1},result:{success:!1,message:k.failedScoreTimeout()}},{required:{allGoalsVisited:!0},result:{success:!1,message:k.failedScoreScore(),blocklyMessage:k.failedScoreScoreBlockly()}}],completeOnSuccessConditionNotGoals:!0,callouts:[{id:"playlab:js_hoc2015_score:arrowsAutoSteerCallout",element_id:"#upButton",hide_target_selector:"#soft-buttons",qtip_config:{content:{text:k.calloutUseArrowButtonsAutoSteer()},position:{my:"bottom left",at:"top center"}}},{id:"playlab:js_hoc2015_score:placeCommandsAtTop",element_id:".droplet-gutter-line:nth-of-type(2)",hide_target_selector:".droplet-drag-cover",qtip_config:{content:{text:k.calloutShowPlaySound()},hide:{event:"mouseup touchend"},position:{my:"top center",at:"bottom center",adjust:{x:170,y:0}}}}]},z.js_hoc2015_win_lose={editCode:!0,autocompletePaletteApisOnly:!0,executePaletteApisOnly:!0,preventUserDefinedFunctions:!0,background:"endor",music:["song9"],wallMap:"blobs",softButtons:["leftButton","rightButton","downButton","upButton"],codeFunctions:{playSound:null,addPoints:{params:["100"]},removePoints:{params:["100"]},whenGetRebelPilot:null,whenGetStormtrooper:null,whenGetMynock:null},startBlocks:[].join("\n"),paramRestrictions:{playSound:{random:!0,"R2-D2random":!0,"R2-D2sound1":!0,"R2-D2sound2":!0,"R2-D2sound3":!0,"R2-D2sound4":!0}},sortDrawOrder:!0,wallMapCollisions:!0,blockMovingIntoWalls:!0,itemGridAlignedMovement:!0,removeItemsWhenActorCollides:!0,delayCompletion:2e3,floatingScore:!0,map:[[0,0,0,0,0,0,0,0],[0,0,0,64,64,0,0,0],[2048,0,0,0,0,0,0,2048],[0,0,0,0,0,0,0,0],[0,0,0,16,0,0,0,0],[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0],[0,256,0,0,0,0,0,0]],embed:"false",instructions:k.hoc2015_win_lose_instructions(),instructions2:k.hoc2015_win_lose_instructions2(),autoArrowSteer:!0,timeoutFailureTick:1350,showTimeoutRect:"rgba(255, 255, 255, 0.5)",callouts:[{id:"playlab:js_hoc2015_win_lose:instructions",element_id:"#prompt-table",qtip_config:{content:{text:k.calloutInstructions()},position:{my:"bottom left",at:"top right",adjust:{x:-40,y:0}}}}],progressConditions:[{required:{gotAllItems:!0,currentPointsBelow:200},result:{message:k.failedWinLoseScore(),blocklyMessage:k.failedWinLoseScoreBlockly()}},{required:{timedOut:!0,collectedItemsBelow:2,currentPointsBelow:200},result:{success:!1,message:k.failedWinLoseTimeout()}},{required:{timedOut:!0,collectedItemsAtOrAbove:2,currentPointsBelow:200},result:{success:!1,message:k.failedWinLoseScore(),blocklyMessage:k.failedWinLoseScoreBlockly()}},{required:{timedOut:!0,collectedItemsBelow:2,currentPointsAtOrAbove:200},result:{success:!1,message:k.failedWinLoseGoals(),blocklyMessage:k.failedWinLoseGoalsBlockly()}},{required:{collectedItemsAtOrAbove:2,currentPointsAtOrAbove:200},result:{success:!0,message:k.successCharacter1()}}]},z.js_hoc2015_add_characters={editCode:!0,autocompletePaletteApisOnly:!0,executePaletteApisOnly:!0,preventUserDefinedFunctions:!0,background:"endor",music:["song11"],wallMap:"circle",softButtons:["leftButton","rightButton","downButton","upButton"],codeFunctions:{addCharacter:{params:['"PufferPig"']},addPoints:{params:["1000"]},removePoints:{params:["1000"]},playSound:null,whenGetPufferPig:null},startBlocks:['playSound("R2-D2sound1");','addCharacter("PufferPig");',"","function whenGetPufferPig() {",'  playSound("PufferPigRandom");',"  addPoints(1000);","}"].join("\n"),paramRestrictions:{playSound:{random:!0,"R2-D2random":!0,"R2-D2sound1":!0,"R2-D2sound2":!0,"R2-D2sound3":!0,"R2-D2sound4":!0,PufferPigRandom:!0,PufferPigSound1:!0,PufferPigSound2:!0,PufferPigSound3:!0}},sortDrawOrder:!0,wallMapCollisions:!0,blockMovingIntoWalls:!0,itemGridAlignedMovement:!0,removeItemsWhenActorCollides:!0,delayCompletion:2e3,floatingScore:!0,map:[[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0],[0,0,0,16,0,0,0,0],[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0]],embed:"false",instructions:k.hoc2015_add_characters_instructions(),instructions2:k.hoc2015_add_characters_instructions2(),autoArrowSteer:!0,timeoutFailureTick:1350,showTimeoutRect:"rgba(255, 255, 255, 0.5)",callouts:[{id:"playlab:js_hoc2015_add_characters:calloutPutCommandsHereRunStart",element_id:".droplet-gutter-line:nth-of-type(3)",hide_target_selector:".droplet-drag-cover",qtip_config:{content:{text:k.calloutPutCommandsHereRunStart()},hide:{event:"mouseup touchend"},position:{my:"top left",at:"center right"}}}],progressConditions:[{required:{createdSpecificItemsBelow:{className:"pufferpig",count:3}},result:{success:!1,message:k.failedAddCharactersTimeout(),blocklyMessage:k.failedAddCharactersTimeoutBlockly()}},{required:{collectedSpecificItemsAtOrAbove:{className:"pufferpig",count:3}},result:{success:!0,message:k.successCharacter1()}},{required:{timedOut:!0},result:{success:!1,message:k.failedAddCharactersTimeout(),blocklyMessage:k.failedAddCharactersTimeoutBlockly()}}]},z.js_hoc2015_chain_characters={editCode:!0,autocompletePaletteApisOnly:!0,executePaletteApisOnly:!0,preventUserDefinedFunctions:!0,background:"starship",music:["song13"],wallMap:"horizontal",softButtons:["leftButton","rightButton","downButton","upButton"],codeFunctions:{addCharacter:{params:['"Mynock"']},addPoints:null,removePoints:null,playSound:null,whenGetTauntaun:null,whenGetMynock:null},startBlocks:['addCharacter("Tauntaun");','addCharacter("Tauntaun");','addCharacter("Tauntaun");','addCharacter("Tauntaun");',"","function whenGetTauntaun() {",'  playSound("TauntaunRandom");',"  addPoints(50);","","}"].join("\n"),paramRestrictions:{playSound:{random:!0,"R2-D2random":!0,"R2-D2sound1":!0,"R2-D2sound2":!0,"R2-D2sound3":!0,"R2-D2sound4":!0,TauntaunRandom:!0,TauntaunSound1:!0,TauntaunSound2:!0,TauntaunSound3:!0,TauntaunSound4:!0,MynockRandom:!0,MynockSound1:!0,MynockSound2:!0,MynockSound3:!0}},sortDrawOrder:!0,wallMapCollisions:!0,blockMovingIntoWalls:!0,itemGridAlignedMovement:!0,removeItemsWhenActorCollides:!0,delayCompletion:2e3,floatingScore:!0,map:[[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0],[0,0,0,16,0,0,0,0],[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0]],embed:"false",instructions:k.hoc2015_chain_characters_instructions(),instructions2:k.hoc2015_chain_characters_instructions2(),autoArrowSteer:!0,timeoutFailureTick:1800,showTimeoutRect:"rgba(255, 255, 255, 0.5)",progressConditions:[{required:{collectedSpecificItemsAtOrAbove:{className:"mynock",count:8}},result:{success:!0,message:k.successCharacter1()}},{required:{timedOut:!0,collectedSpecificItemsAtOrAbove:{className:"mynock",count:5}},result:{success:!1,canPass:!0,message:k.failedChainCharactersTimeoutGotSome()}},{required:{collectedSpecificItemsAtOrAbove:{className:"tauntaun",count:4},createdSpecificItemsBelow:{className:"mynock",count:5}},result:{success:!1,message:k.failedChainCharactersTimeout()}},{required:{timedOut:!0},result:{success:!1,message:k.failedChainCharactersTimeout()}}],callouts:[{id:"playlab:js_hoc2015_chain_characters:calloutPlaceTwoWhenTauntaun",element_id:".droplet-gutter-line:nth-of-type(9)",hide_target_selector:".droplet-drag-cover",qtip_config:{content:{text:k.calloutPlaceTwoWhenTauntaun()},hide:{event:"mouseup touchend"},position:{my:"top left",at:"bottom center",adjust:{x:65,y:0}}}}]},z.js_hoc2015_multiply_characters={editCode:!0,autocompletePaletteApisOnly:!0,executePaletteApisOnly:!0,preventUserDefinedFunctions:!0,background:"starship",music:["song12"],wallMap:"grid",softButtons:["leftButton","rightButton","downButton","upButton"],codeFunctions:{addCharacter:{params:['"MouseDroid"']},playSound:null,addPoints:null,removePoints:null,whenGetMouseDroid:null},startBlocks:['addCharacter("MouseDroid");','playSound("R2-D2sound3");'].join("\n"),paramRestrictions:{playSound:{random:!0,"R2-D2random":!0,"R2-D2sound1":!0,"R2-D2sound2":!0,"R2-D2sound3":!0,"R2-D2sound4":!0,MouseDroidRandom:!0,MouseDroidSound1:!0,MouseDroidSound2:!0,MouseDroidSound3:!0}},sortDrawOrder:!0,wallMapCollisions:!0,blockMovingIntoWalls:!0,itemGridAlignedMovement:!0,removeItemsWhenActorCollides:!0,delayCompletion:2e3,floatingScore:!0,map:[[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0],[0,0,0,16,0,0,0,0],[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0]],embed:"false",instructions:k.hoc2015_multiply_characters_instructions(),instructions2:k.hoc2015_multiply_characters_instructions2(),autoArrowSteer:!0,timeoutFailureTick:2250,showTimeoutRect:"rgba(255, 255, 255, 0.5)",progressConditions:[{required:{collectedItemsAtOrAbove:20},result:{success:!0,message:k.successCharacter1()}},{required:{collectedSpecificItemsAtOrAbove:{className:"mousedroid",count:1},createdSpecificItemsBelow:{className:"mousedroid",count:2}},result:{success:!1,message:k.failedMultiplyCharactersTimeout()}},{required:{timedOut:!0,collectedItemsAtOrAbove:2},result:{success:!1,canPass:!0,message:k.failedMultiplyCharactersTimeoutGotSome()}},{required:{timedOut:!0},result:{success:!1,message:k.failedMultiplyCharactersTimeout(),blocklyMessage:k.failedMultiplyCharactersTimeoutBlockly()}}],callouts:[{id:"playlab:js_hoc2015_multiply_characters:calloutPlaceTwo",element_id:"#droplet_palette_block_whenGetMouseDroid",hide_target_selector:".droplet-drag-cover",qtip_config:{content:{text:k.calloutPlaceTwo()},hide:{event:"mouseup touchend"},position:{my:"top left",at:"bottom center"}}}]},z.js_hoc2015_change_setting={editCode:!0,autocompletePaletteApisOnly:!0,executePaletteApisOnly:!0,preventUserDefinedFunctions:!0,background:"starship",music:["song14"],wallMap:"blobs",softButtons:["leftButton","rightButton","downButton","upButton"],codeFunctions:{setDroid:{params:['"C-3PO"']},setBackground:null,setDroidSpeed:null,setMap:null,playSound:null,addCharacter:null,addPoints:null,removePoints:null,whenGetRebelPilot:null},startBlocks:['addCharacter("RebelPilot");','addCharacter("RebelPilot");','addCharacter("RebelPilot");',"",'setBackground("random");','setMap("random");',""].join("\n"),paramRestrictions:{playSound:{random:!0,"C-3POrandom":!0,"C-3POsound1":!0,"C-3POsound2":!0,"C-3POsound3":!0,"C-3POsound4":!0,"R2-D2random":!0,"R2-D2sound1":!0,"R2-D2sound2":!0,"R2-D2sound3":!0,"R2-D2sound4":!0,PufferPigRandom:!0,PufferPigSound1:!0,PufferPigSound2:!0,PufferPigSound3:!0,TauntaunRandom:!0,TauntaunSound1:!0,TauntaunSound2:!0,TauntaunSound3:!0,MouseDroidRandom:!0,MouseDroidSound1:!0,MouseDroidSound2:!0,MouseDroidSound3:!0,MynockRandom:!0,MynockSound1:!0,MynockSound2:!0,MynockSound3:!0,ProbotRandom:!0,ProbotSound1:!0,ProbotSound2:!0,ProbotSound3:!0}},sortDrawOrder:!0,wallMapCollisions:!0,blockMovingIntoWalls:!0,itemGridAlignedMovement:!0,removeItemsWhenActorCollides:!0,delayCompletion:2e3,floatingScore:!0,map:[[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0],[0,0,0,16,0,0,0,0],[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0]],embed:"false",instructions:k.hoc2015_change_setting_instructions(),
instructions2:k.hoc2015_change_setting_instructions2(),autoArrowSteer:!0,timeoutFailureTick:1350,showTimeoutRect:"rgba(255, 255, 255, 0.5)",callouts:[{id:"playlab:js_hoc2015_change_setting:setMap",element_id:"#droplet_palette_block_setDroid",qtip_config:{content:{text:k.calloutSetDroidAndSpeed()},position:{my:"center left",at:"center right"}}}],progressConditions:[{required:{setSprite:!0,setDroidSpeed:!0,collectedItemsAtOrAbove:3},result:{success:!0,message:k.successGenericCharacter()}},{required:{collectedItemsAtOrAbove:3},result:{success:!1,message:k.failedChangeSettingSettings()}},{required:{timedOut:!0},result:{success:!1,message:k.failedChangeSettingTimeout()}}]};var A=['<span class="character-text">'+k.hoc2015_event_free_instructions()+"</span>","",'<span class="instructions2">'+k.hoc2015_event_free_instructions2()+"</span>","",'<details class="hoc2015">',"<summary>Example project ideas</summary>","<p>**Example 1**","<br />Add five random characters in the scene, and play a different sound each time R2-D2 collides with one of them.</p>","","<p>**Example 2**","<br />Add ten Stormtroopers to chase C-3PO. See if you can outrun them by running at high speed.</p>","","<p>**Example 3**","<br />Make your droid move faster when he touches a Mouse Droid and slower when he touches a Stormtrooper.</p>","","</details>",'<details class="hoc2015">',"<summary>Extra credit project ideas</summary>","","<p>**Example 1**","<br />Add a Mouse Droid and a Stormtrooper. Every time R2-D2 catches a Mouse Droid, score some points and then add another Mouse Droid and another Stormtrooper.  End the game if a Stormtrooper catches R2-D2.</p>","","</details>",'<details class="hoc2015">',"<summary>For JavaScript programmers</summary>","<p>You can create more complex JavaScript programs if you program in text mode. Feel free to use `for` loops, `if` statements, variables, or other JavaScript commands to make much more complex games. And _please_: document and share the code you wrote for others to learn too!</p>","","</details>",'<details class="hoc2015">',"<summary>More about the characters</summary>","<p>Each character has a unique behavior:","<br/><br/>","[pufferpig] <b>Puffer Pigs</b> roam around slowly<br/>","[tauntaun] <b>Tauntauns</b> roam around at a normal speed<br/>","[mynock] <b>Mynocks</b> fly around at a normal speed<br/>","[stormtrooper] <b>Stormtroopers</b> chase your droid slowly<br/>","[probot] <b>Probots</b> chase your droid quickly<br/>","[rebelpilot] <b>Rebel Pilots</b> flee at a normal speed<br/>","[mousedroid] <b>Mouse Droids</b> flee quickly<br/>","<br/>","You can change the speed of any character with the moveFast, moveNormal, and moveSlow commands.","</p>","","</details>"].join("\r\n");z.js_hoc2015_event_free={editCode:!0,freePlay:!0,background:"endor",music:["song15"],wallMap:"blank",softButtons:["leftButton","rightButton","downButton","upButton"],codeFunctions:{setDroid:{category:"Commands"},setBackground:{category:"Commands"},setDroidSpeed:{category:"Commands"},setMap:{category:"Commands"},playSound:{category:"Commands"},addCharacter:{category:"Commands"},moveSlow:{category:"Commands"},moveNormal:{category:"Commands"},moveFast:{category:"Commands"},addPoints:{category:"Commands"},removePoints:{category:"Commands"},endGame:{category:"Commands"},goRight:{category:"Commands"},goLeft:{category:"Commands"},goUp:{category:"Commands"},goDown:{category:"Commands"},whenLeft:{category:"Events"},whenRight:{category:"Events"},whenUp:{category:"Events"},whenDown:{category:"Events"},whenTouchObstacle:{category:"Events"},whenGetStormtrooper:{category:"Events"},whenGetRebelPilot:{category:"Events"},whenGetPufferPig:{category:"Events"},whenGetMynock:{category:"Events"},whenGetMouseDroid:{category:"Events"},whenGetTauntaun:{category:"Events"},whenGetProbot:{category:"Events"},whenGetCharacter:{category:"Events"},whenGetAllStormtroopers:{category:"Events"},whenGetAllRebelPilots:{category:"Events"},whenGetAllPufferPigs:{category:"Events"},whenGetAllMynocks:{category:"Events"},whenGetAllMouseDroids:{category:"Events"},whenGetAllTauntauns:{category:"Events"},whenGetAllProbots:{category:"Events"},whenGetAllCharacters:{category:"Events"}},startBlocks:['setBackground("Endor");','setMap("circle");','setDroid("R2-D2");','setDroidSpeed("normal");','playSound("R2-D2random");',"function whenUp() {","  goUp();","}","function whenDown() {","  goDown();","}","function whenLeft() {","  goLeft();","}","function whenRight() {","  goRight();","}",""].join("\n"),sortDrawOrder:!0,wallMapCollisions:!0,blockMovingIntoWalls:!0,itemGridAlignedMovement:!0,removeItemsWhenActorCollides:!0,tapSvgToRunAndReset:!0,delayCompletion:2e3,floatingScore:!0,map:[[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0],[0,0,0,0,16,0,0,0],[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0]],embed:"false",instructions:k.hoc2015_event_free_instructions(),instructions2:k.hoc2015_event_free_instructions2(),markdownInstructions:A,markdownInstructionsWithClassicMargins:!0,callouts:[{id:"playlab:js_hoc2015_event_free:clickCategory",element_id:".droplet-palette-group-header.green",qtip_config:{content:{text:k.calloutClickEvents()},position:{my:"top center",at:"bottom center"}}},{id:"playlab:js_hoc2015_event_free:finishButton",element_id:"#finishButton",on:"finishButtonShown",qtip_config:{content:{text:k.calloutFinishButton()},position:{my:"center left",at:"center right"}}}],appStringsFunctions:{continueText:k.hoc2015_lastLevel_continueText,reinfFeedbackMsg:k.hoc2015_reinfFeedbackMsg,sharingText:k.hoc2015_shareGame},disablePrinting:!0,disableSaveToGallery:!0,playStartSound:!1},z.hoc2015_blockly_1=l.extend(z.js_hoc2015_move_right,{editCode:!1,enableShowCode:!0,startBlocks:u,toolbox:p(s),requiredBlocks:[h()],callouts:[{id:"playlab:blockly_hoc2015_move_right:runButton",element_id:"#runButton",qtip_config:{content:{text:k.calloutBlocklyMoveRightRunButton()},position:{my:"bottom left",at:"top center",adjust:{x:0,y:0}}}}]}),z.hoc2015_blockly_2=l.extend(z.js_hoc2015_move_right_down,{editCode:!1,enableShowCode:!0,startBlocks:u,toolbox:p(s),requiredBlocks:[h(),g()]}),z.hoc2015_blockly_3=l.extend(z.js_hoc2015_move_backtrack,{editCode:!1,enableShowCode:!0,startBlocks:u,toolbox:p(s),requiredBlocks:[h(),f()]}),z.hoc2015_blockly_4=l.extend(z.js_hoc2015_move_diagonal,{editCode:!1,enableShowCode:!0,callouts:null,startBlocks:v,toolbox:p(s),requiredBlocks:[g(),i()]}),z.hoc2015_blockly_5=l.extend(z.js_hoc2015_move_around,{editCode:!1,enableShowCode:!0,startBlocks:u,toolbox:p(s),requiredBlocks:[h(),g(),i()],callouts:[]}),z.hoc2015_blockly_6=l.extend(z.js_hoc2015_move_finale,{editCode:!1,enableShowCode:!0,startBlocks:v,toolbox:p(s),callouts:null,requiredBlocks:[f(),g(),h()]}),z.hoc2015_blockly_7=l.extend(z.js_hoc2015_event_two_items,{editCode:!1,msgStringOverrides:{moveSprite:"goSprite"},startBlocks:w,toolbox:p(t),requiredBlocks:[],callouts:[{id:"playlab:hoc2015_blockly_7:placeCommandsHere",element_id:'[block-id="3"]',hide_target_selector:".blocklyDraggable",qtip_config:{content:{text:k.calloutBlocklyPlaceGoUpHere()},position:{my:"top left",at:"bottom left",adjust:{x:22,y:0}}}},{id:"playlab:hoc2015_blockly_7:arrowsCallout",element_id:"#upButton",hide_target_selector:"#soft-buttons",qtip_config:{content:{text:k.calloutUseArrowButtons()},position:{my:"bottom left",at:"top center"}}}]}),z.hoc2015_blockly_8=l.extend(z.js_hoc2015_event_four_items,{editCode:!1,msgStringOverrides:{moveSprite:"goSprite"},startBlocks:x,toolbox:p(s),requiredBlocks:[]}),z.hoc2015_blockly_9=l.extend(z.js_hoc2015_score,{editCode:!1,msgStringOverrides:{whenTouchGoal:"whenGetCharacterRebelPilot"},startBlocks:'<block type="studio_whenTouchGoal" deletable="false">       <next><block type="studio_playSound"><title name="SOUND">R2-D2random</title></block>       </next></block>',toolbox:p('<block type="studio_playSound"></block>         <block type="studio_addPoints"><title name="VALUE">100</title></block>'),requiredBlocks:[],callouts:[{id:"playlab:hoc2015_blockly_9:arrowsAutoSteerCallout",element_id:"#upButton",hide_target_selector:"#soft-buttons",qtip_config:{content:{text:k.calloutUseArrowButtonsAutoSteer()},position:{my:"bottom left",at:"top center"}}},{id:"playlab:hoc2015_blockly_9:placeCommandsAtTop",element_id:'[block-id="4"]',hide_target_selector:".blocklyDraggable",qtip_config:{content:{text:k.calloutShowPlaySound()},position:{my:"top left",at:"bottom center"}}}]}),z.hoc2015_blockly_10=l.extend(z.js_hoc2015_win_lose,{editCode:!1,startBlocks:"",toolbox:p('<block type="studio_playSound"></block>         <block type="studio_addPoints"><title name="VALUE">100</title></block>         <block type="studio_removePoints"><title name="VALUE">100</title></block>         <block type="studio_whenGetCharacter"><title name="VALUE">rebelpilot</title></block>         <block type="studio_whenGetCharacter"><title name="VALUE">stormtrooper</title></block>         <block type="studio_whenGetCharacter"><title name="VALUE">mynock</title></block>'),requiredBlocks:[]}),z.hoc2015_blockly_11=l.extend(z.js_hoc2015_add_characters,{editCode:!1,startBlocks:'<block type="when_run" deletable="false" x="20" y="20">       <next>        <block type="studio_playSound"><title name="SOUND">R2-D2sound1</title>         <next>          <block type="studio_addCharacter"><title name="VALUE">"pufferpig"</title></block>         </next>        </block>       </next>      </block>      <block type="studio_whenGetCharacter" deletable="false" x="20" y="200">       <title name="VALUE">pufferpig</title>       <next>        <block type="studio_playSound"><title name="SOUND">PufferPigRandom</title>         <next>          <block type="studio_addPoints"><title name="VALUE">1000</title></block>         </next>        </block>       </next>      </block>',toolbox:p('<block type="studio_addCharacter"><title name="VALUE">"pufferpig"</title></block>         <block type="studio_addPoints"><title name="VALUE">100</title></block>         <block type="studio_removePoints"><title name="VALUE">100</title></block>         <block type="studio_playSound"></block>         <block type="studio_whenGetCharacter"><title name="VALUE">pufferpig</title></block>'),callouts:[{id:"playlab:hoc2015_blockly_11:calloutPutCommandsHereRunStart",element_id:'[block-id="8"]',hide_target_selector:".blocklyDraggable",qtip_config:{content:{text:k.calloutPutCommandsHereRunStart()},position:{my:"top left",at:"bottom left",adjust:{x:22,y:0}}}}],requiredBlocks:[]}),z.hoc2015_blockly_12=l.extend(z.js_hoc2015_chain_characters,{editCode:!1,startBlocks:'<block type="when_run" deletable="false" x="20" y="20">       <next>        <block type="studio_addCharacter"><title name="VALUE">"tauntaun"</title>         <next>          <block type="studio_addCharacter"><title name="VALUE">"tauntaun"</title>           <next>            <block type="studio_addCharacter"><title name="VALUE">"tauntaun"</title>             <next>              <block type="studio_addCharacter"><title name="VALUE">"tauntaun"</title></block>             </next>            </block>           </next>          </block>         </next>        </block>       </next>      </block>      <block type="studio_whenGetCharacter" deletable="false" x="20" y="180">       <title name="VALUE">tauntaun</title>       <next>        <block type="studio_playSound"><title name="SOUND">TauntaunRandom</title>         <next>          <block type="studio_addPoints"><title name="VALUE">50</title></block>         </next>        </block>       </next>      </block>',toolbox:p('<block type="studio_addCharacter"><title name="VALUE">"mynock"</title></block>         <block type="studio_addPoints"><title name="VALUE">100</title></block>         <block type="studio_removePoints"><title name="VALUE">100</title></block>         <block type="studio_playSound"></block>         <block type="studio_whenGetCharacter"><title name="VALUE">tauntaun</title></block>         <block type="studio_whenGetCharacter"><title name="VALUE">mynock</title></block>'),requiredBlocks:[],callouts:[{id:"playlab:hoc2015_blockly_12:calloutPlaceTwoWhenTauntaun",element_id:'[block-id="12"]',hide_target_selector:".blocklyDraggable",qtip_config:{content:{text:k.calloutPlaceTwoWhenTauntaun()},position:{my:"top left",at:"bottom center",adjust:{x:0,y:0}}}}]}),z.hoc2015_blockly_13=l.extend(z.js_hoc2015_multiply_characters,{editCode:!1,startBlocks:'<block type="when_run" deletable="false" x="20" y="20">       <next>        <block type="studio_addCharacter"><title name="VALUE">"mousedroid"</title>         <next>          <block type="studio_playSound"><title name="SOUND">R2-D2sound3</title></block>         </next>        </block>       </next>      </block>',toolbox:p('<block type="studio_addCharacter"><title name="VALUE">"mousedroid"</title></block>         <block type="studio_addPoints"><title name="VALUE">100</title></block>         <block type="studio_removePoints"><title name="VALUE">100</title></block>         <block type="studio_playSound"></block>         <block type="studio_whenGetCharacter"><title name="VALUE">mousedroid</title></block>'),requiredBlocks:[],callouts:[{id:"playlab:hoc2015_blockly_13:calloutPlaceTwo",element_id:'[block-id="5"]',hide_target_selector:".blocklyDraggable",qtip_config:{content:{text:k.calloutPlaceTwo()},position:{my:"top left",at:"bottom center"}}}]}),z.hoc2015_blockly_14=l.extend(z.js_hoc2015_change_setting,{editCode:!1,startBlocks:'<block type="when_run" deletable="false" x="20" y="20">       <next>        <block type="studio_addCharacter"><title name="VALUE">"rebelpilot"</title>         <next>          <block type="studio_addCharacter"><title name="VALUE">"rebelpilot"</title>           <next>            <block type="studio_addCharacter"><title name="VALUE">"rebelpilot"</title>             <next>              <block type="studio_setBackground"><title name="VALUE">random</title>               <next>                <block type="studio_setMap"><title name="VALUE">random</title></block>               </next>              </block>             </next>            </block>           </next>          </block>         </next>        </block>       </next>      </block>',toolbox:p('<block type="studio_setSprite"><title name="VALUE">"c-3po"</title></block>         <block type="studio_setDroidSpeed"><title name="VALUE">fast</title></block>         <block type="studio_setBackground"></block>         <block type="studio_setMap"></block>         <block type="studio_addCharacter"><title name="VALUE">"mousedroid"</title></block>         <block type="studio_addPoints"><title name="VALUE">100</title></block>         <block type="studio_removePoints"><title name="VALUE">100</title></block>         <block type="studio_playSound"></block>         <block type="studio_whenGetCharacter"><title name="VALUE">rebelpilot</title></block>'),requiredBlocks:[],callouts:[{id:"playlab:hoc2015_blockly_14:setMap",element_id:'[block-id="1"]',qtip_config:{content:{text:k.calloutSetDroidAndSpeed()},position:{my:"center left",at:"center right"}}}]}),z.hoc2015_blockly_15=l.extend(z.js_hoc2015_event_free,{editCode:!1,msgStringOverrides:{moveSprite:"goSprite"},markdownInstructions:null,markdownInstructionsWithClassicMargins:!1,startBlocks:'<block type="when_run" deletable="false" x="20" y="20">       <next>        <block type="studio_setBackground"><title name="VALUE">"endor"</title>         <next>          <block type="studio_setMap"><title name="VALUE">"circle"</title>           <next>            <block type="studio_setSprite"><title name="VALUE">"r2-d2"</title>             <next>              <block type="studio_setDroidSpeed"><title name="VALUE">normal</title>               <next>                <block type="studio_playSound"><title name="SOUND">R2-D2random</title></block>               </next>              </block>             </next>            </block>           </next>          </block>         </next>        </block>       </next>      </block>'+j(200,80),toolbox:p(r(k.catCommands(),s+q("studio_setSprite")+q("studio_setBackground")+q("studio_setDroidSpeed")+q("studio_setMap")+q("studio_playSound")+q("studio_addCharacter")+q("studio_setItemSpeed")+q("studio_addPoints")+q("studio_removePoints")+q("studio_endGame"))+r(k.catEvents(),q("when_run")+q("studio_whenUp")+q("studio_whenDown")+q("studio_whenLeft")+q("studio_whenRight")+q("studio_whenGetCharacter")+q("studio_whenGetAllCharacters")+q("studio_whenGetAllCharacterClass")+q("studio_whenTouchObstacle"))),callouts:[{id:"playlab:hoc2015_blockly_15:finishButton",element_id:"#finishButton",on:"finishButtonShown",qtip_config:{content:{text:k.calloutFinishButton()},position:{my:"center left",at:"center right"}}},{id:"playlab:hoc2015_blockly_15:categories",element_id:".blocklyTreeRoot:visible",qtip_config:{content:{text:k.calloutBlocklyCategories()},position:{my:"top left",at:"bottom right",adjust:{x:-10,y:0}}}}]})},{"../block_utils":"/home/ubuntu/staging/apps/build/js/block_utils.js","../utils":"/home/ubuntu/staging/apps/build/js/utils.js","./constants":"/home/ubuntu/staging/apps/build/js/studio/constants.js","./locale":"/home/ubuntu/staging/apps/build/js/studio/locale.js"}],"/home/ubuntu/staging/apps/build/js/studio/extraControlRows.html.ejs":[function(require,module,exports){module.exports=function(){var t=function anonymous(locals,filters,escape){escape=escape||function(a){return String(a).replace(/&(?!\w+;)/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")};var buf=[];with(locals||{})!function(){buf.push("");var a=require("../locale");buf.push("\n\n"),finishButton&&buf.push('\n  <div id="share-cell" class="share-cell-none">\n    <button id="finishButton" class="share">\n      <img src="',escape(assetUrl("media/1x1.gif")),'">',escape(a.finish()),"\n    </button>\n  </div>\n"),buf.push("\n")}();return buf.join("")};return function(a){return t(a,require("ejs").filters)}}()},{"../locale":"/home/ubuntu/staging/apps/build/js/locale.js",ejs:"/home/ubuntu/staging/apps/node_modules/ejs/lib/ejs.js"}],"/home/ubuntu/staging/apps/build/js/studio/dropletConfig.js":[function(a,b,c){"use strict";var d=(a("./locale"),a("./apiJavascript.js")),e=a("./paramLists.js");b.exports.blocks=[{func:"setDroid",parent:d,category:"",params:['"R2-D2"'],dropdown:{0:['"random"','"R2-D2"','"C-3PO"']}},{func:"setDroidSpeed",parent:d,category:"",params:['"fast"'],dropdown:{0:['"random"','"slow"','"normal"','"fast"']}},{func:"setBackground",parent:d,category:"",params:['"Hoth"'],dropdown:{0:['"random"','"Endor"','"Hoth"','"Starship"']}},{func:"setMap",parent:d,category:"",params:['"blank"'],dropdown:{0:['"random"','"blank"','"circle"','"horizontal"','"grid"','"blobs"']}},{func:"moveRight",parent:d,category:""},{func:"moveLeft",parent:d,category:""},{func:"moveUp",parent:d,category:""},{func:"moveDown",parent:d,category:""},{func:"goRight",parent:d,category:""},{func:"goLeft",parent:d,category:""},{func:"goUp",parent:d,category:""},{func:"goDown",parent:d,category:""},{func:"playSound",parent:d,category:"",params:['"R2-D2sound1"'],dropdown:{0:e.playSoundDropdown}},{func:"endGame",parent:d,category:"",params:['"win"'],dropdown:{0:['"win"','"lose"']}},{func:"addPoints",parent:d,category:"",params:["100"]},{func:"removePoints",parent:d,category:"",params:["100"]},{func:"addCharacter",parent:d,category:"",params:['"PufferPig"'],dropdown:{0:['"random"','"Stormtrooper"','"RebelPilot"','"PufferPig"','"Mynock"','"MouseDroid"','"Tauntaun"','"Probot"']}},{func:"moveFast",parent:d,category:"",params:['"PufferPig"'],dropdown:{0:['"random"','"Stormtrooper"','"RebelPilot"','"PufferPig"','"Mynock"','"MouseDroid"','"Tauntaun"','"Probot"']}},{func:"moveNormal",parent:d,category:"",params:['"PufferPig"'],dropdown:{0:['"random"','"Stormtrooper"','"RebelPilot"','"PufferPig"','"Mynock"','"MouseDroid"','"Tauntaun"','"Probot"']}},{func:"moveSlow",parent:d,category:"",params:['"PufferPig"'],dropdown:{0:['"random"','"Stormtrooper"','"RebelPilot"','"PufferPig"','"Mynock"','"MouseDroid"','"Tauntaun"','"Probot"']}},{func:"whenLeft",block:"function whenLeft() {}",expansion:"function whenLeft() {\n  __;\n}",category:""},{func:"whenRight",block:"function whenRight() {}",expansion:"function whenRight() {\n  __;\n}",category:""},{func:"whenUp",block:"function whenUp() {}",expansion:"function whenUp() {\n  __;\n}",category:""},{func:"whenDown",block:"function whenDown() {}",expansion:"function whenDown() {\n  __;\n}",category:""},{func:"whenTouchObstacle",block:"function whenTouchObstacle() {}",expansion:"function whenTouchObstacle() {\n  __;\n}",category:""},{func:"whenGetCharacter",block:"function whenGetCharacter() {}",expansion:"function whenGetCharacter() {\n  __;\n}",category:""},{func:"whenGetStormtrooper",block:"function whenGetStormtrooper() {}",expansion:"function whenGetStormtrooper() {\n  __;\n}",category:""},{func:"whenGetRebelPilot",block:"function whenGetRebelPilot() {}",expansion:"function whenGetRebelPilot() {\n  __;\n}",category:""},{func:"whenGetPufferPig",block:"function whenGetPufferPig() {}",expansion:"function whenGetPufferPig() {\n  __;\n}",category:""},{func:"whenGetMynock",block:"function whenGetMynock() {}",expansion:"function whenGetMynock() {\n  __;\n}",category:""},{func:"whenGetMouseDroid",block:"function whenGetMouseDroid() {}",expansion:"function whenGetMouseDroid() {\n  __;\n}",category:""},{func:"whenGetTauntaun",block:"function whenGetTauntaun() {}",expansion:"function whenGetTauntaun() {\n  __;\n}",category:""},{func:"whenGetProbot",block:"function whenGetProbot() {}",expansion:"function whenGetProbot() {\n  __;\n}",category:""},{func:"whenGetAllCharacters",block:"function whenGetAllCharacters() {}",expansion:"function whenGetAllCharacters() {\n  __;\n}",category:""},{func:"whenGetAllStormtroopers",block:"function whenGetAllStormtroopers() {}",expansion:"function whenGetAllStormtroopers() {\n  __;\n}",category:""},{func:"whenGetAllRebelPilots",block:"function whenGetAllRebelPilots() {}",expansion:"function whenGetAllRebelPilots() {\n  __;\n}",category:""},{func:"whenGetAllPufferPigs",block:"function whenGetAllPufferPigs() {}",expansion:"function whenGetAllPufferPigs() {\n  __;\n}",category:""},{func:"whenGetAllMynocks",block:"function whenGetAllMynocks() {}",expansion:"function whenGetAllMynocks() {\n  __;\n}",category:""},{func:"whenGetAllMouseDroids",block:"function whenGetAllMouseDroids() {}",expansion:"function whenGetAllMouseDroids() {\n  __;\n}",category:""},{func:"whenGetAllTauntauns",block:"function whenGetAllTauntauns() {}",expansion:"function whenGetAllTauntauns() {\n  __;\n}",category:""},{func:"whenGetAllProbots",block:"function whenGetAllProbots() {}",expansion:"function whenGetAllProbots() {\n  __;\n}",category:""},{func:"whenTouchStormtrooper",block:"function whenTouchStormtrooper() {}",expansion:"function whenTouchStormtrooper() {\n  __;\n}",category:"",noAutocomplete:!0},{func:"whenTouchRebelPilot",block:"function whenTouchRebelPilot() {}",expansion:"function whenTouchRebelPilot() {\n  __;\n}",category:"",noAutocomplete:!0},{func:"whenTouchPufferPig",block:"function whenTouchPufferPig() {}",expansion:"function whenTouchPufferPig() {\n  __;\n}",category:"",noAutocomplete:!0},{func:"whenTouchMynock",block:"function whenTouchMynock() {}",expansion:"function whenTouchMynock() {\n  __;\n}",category:"",noAutocomplete:!0},{func:"whenTouchMouseDroid",block:"function whenTouchMouseDroid() {}",expansion:"function whenTouchMouseDroid() {\n  __;\n}",category:"",noAutocomplete:!0},{func:"whenTouchTauntaun",block:"function whenTouchTauntaun() {}",expansion:"function whenTouchTauntaun() {\n  __;\n}",category:"",noAutocomplete:!0},{func:"whenTouchProbot",block:"function whenTouchProbot() {}",expansion:"function whenTouchProbot() {\n  __;\n}",category:"",noAutocomplete:!0},{func:"whenTouchCharacter",block:"function whenTouchCharacter() {}",expansion:"function whenTouchCharacter() {\n  __;\n}",category:"",noAutocomplete:!0},{func:"changeScore",parent:d,category:"",params:["1"],noAutocomplete:!0},{func:"whenTouchGoal",block:"function whenTouchGoal() {}",expansion:"function whenTouchGoal() {\n  __;\n}",category:"",noAutocomplete:!0},{func:"whenTouchAllGoals",block:"function whenTouchAllGoals() {}",expansion:"function whenTouchAllGoals() {\n  __;\n}",category:"",noAutocomplete:!0},{func:"whenScore1000",block:"function whenScore1000() {}",expansion:"function whenScore1000() {\n  __;\n}",category:"",noAutocomplete:!0},{func:"setToChase",parent:d,category:"",params:['"PufferPig"'],dropdown:{0:['"random"','"Stormtrooper"','"RebelPilot"','"PufferPig"','"Mynock"','"MouseDroid"','"Tauntaun"','"Probot"']},noAutocomplete:!0},{func:"setToFlee",parent:d,category:"",params:['"PufferPig"'],dropdown:{0:['"random"','"Stormtrooper"','"RebelPilot"','"PufferPig"','"Mynock"','"MouseDroid"','"Tauntaun"','"Probot"']},noAutocomplete:!0},{func:"setToRoam",parent:d,category:"",params:['"PufferPig"'],dropdown:{0:['"random"','"Stormtrooper"','"RebelPilot"','"PufferPig"','"Mynock"','"MouseDroid"','"Tauntaun"','"Probot"']},noAutocomplete:!0},{func:"setToStop",parent:d,category:"",params:['"PufferPig"'],dropdown:{0:['"random"','"Stormtrooper"','"RebelPilot"','"PufferPig"','"Mynock"','"MouseDroid"','"Tauntaun"','"Probot"']},noAutocomplete:!0},{func:"setSprite",parent:d,category:"",params:["0",'"R2-D2"'],dropdown:{1:['"random"','"R2-D2"','"C-3PO"']},noAutocomplete:!0},{func:"setSpritePosition",parent:d,category:"",params:["0","7"],noAutocomplete:!0},{func:"setSpriteSpeed",parent:d,category:"",params:["0","8"],noAutocomplete:!0},{func:"setSpriteEmotion",parent:d,category:"",params:["0","1"],noAutocomplete:!0},{func:"setSpriteSize",parent:d,category:"",params:["0","1.0"],noAutocomplete:!0},{func:"throwProjectile",parent:d,category:"",params:["0","1",'"blue_fireball"'],noAutocomplete:!0},{func:"vanish",parent:d,category:"",params:["0"],noAutocomplete:!0},{func:"move",parent:d,category:"",params:["0","1"],noAutocomplete:!0},{func:"showDebugInfo",parent:d,category:"",params:["false"],noAutocomplete:!0},{func:"onEvent",parent:d,category:"",params:["'when-left'","function() {\n  \n}"],noAutocomplete:!0}],b.exports.categories={"":{color:"red",blocks:[]},"Play Lab":{color:"red",blocks:[]},Commands:{color:"red",blocks:[]},Events:{color:"green",blocks:[]}},b.exports.autocompleteFunctionsWithParens=!0,b.exports.showParamDropdowns=!0},{"./apiJavascript.js":"/home/ubuntu/staging/apps/build/js/studio/apiJavascript.js","./locale":"/home/ubuntu/staging/apps/build/js/studio/locale.js","./paramLists.js":"/home/ubuntu/staging/apps/build/js/studio/paramLists.js"}],"/home/ubuntu/staging/apps/build/js/studio/controls.html.ejs":[function(require,module,exports){module.exports=function(){var t=function anonymous(locals,filters,escape){escape=escape||function(a){return String(a).replace(/&(?!\w+;)/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")};var buf=[];with(locals||{})!function(){buf.push("");var a=require("../locale");buf.push('\n\n<div id="soft-buttons" class="soft-buttons-none">\n  <button id="leftButton" disabled=true class="arrow">\n    <img src="',escape(assetUrl("media/1x1.gif")),'" class="left-btn icon21">\n  </button>\n  <button id="rightButton" disabled=true class="arrow">\n    <img src="',escape(assetUrl("media/1x1.gif")),'" class="right-btn icon21">\n  </button>\n  <button id="upButton" disabled=true class="arrow">\n    <img src="',escape(assetUrl("media/1x1.gif")),'" class="up-btn icon21">\n  </button>\n  <button id="downButton" disabled=true class="arrow">\n    <img src="',escape(assetUrl("media/1x1.gif")),'" class="down-btn icon21">\n  </button>\n</div>\n\n'),finishButton&&buf.push('\n  <div id="share-cell" class="share-cell-none">\n    <button id="finishButton" class="share">\n      <img src="',escape(assetUrl("media/1x1.gif")),'">',escape(a.finish()),"\n    </button>\n  </div>\n"),buf.push("\n")}();return buf.join("")};return function(a){return t(a,require("ejs").filters)}}()},{"../locale":"/home/ubuntu/staging/apps/build/js/locale.js",ejs:"/home/ubuntu/staging/apps/node_modules/ejs/lib/ejs.js"}],"/home/ubuntu/staging/apps/build/js/studio/blocks.js":[function(a,b,c){"use strict";function d(a){var b=l.range(0,v);return l.map(b,function(b){return[a({spriteIndex:b+1}),b.toString()]})}function e(a,b,c,d,e){a.Blocks.studio_vanish={helpUrl:"",init:function(){this.setHSV(184,1,.74),e.isK1?this.appendDummyInput().appendTitle(g.vanish()).appendTitle(new a.FieldImage(e.skin.explosionThumbnail)).appendTitle(d(),"SPRITE"):this.appendDummyInput().appendTitle(c(g.vanishActorN),"SPRITE"),this.setPreviousStatement(!0),this.setInputsInline(!0),this.setNextStatement(!0),this.setTooltip(g.vanishTooltip())}},b.studio_vanish=function(){var a=this.getTitleValue("SPRITE");return"Studio.vanish('block_id_"+this.id+"', "+a+");\n"}}var f=a("../StudioApp").singleton,g=a("./locale"),h=a("../sharedFunctionalBlocks"),i=a("../locale"),j=(a("../codegen"),a("./constants")),k=a("../utils"),l=k.getLodash(),m=a("./paramLists"),n=j.Direction,o=j.Position,p=j.Emotions,q=j.RANDOM_VALUE,r=j.HIDDEN_VALUE,s=j.CLICK_VALUE,t=j.VISIBLE_VALUE,u=function(a){var b=a.value||a.ctx.getTitleValue("VALUE");if(b===q){var c=l(a.ctx.VALUES).map(function(a){return a[1]}).without(q,r,s);b="Studio.random(["+c+"])"}return a.returnValue?b:"Studio."+a.name+"('block_id_"+a.ctx.id+"', "+(a.extraParams?a.extraParams+", ":"")+b+");\n"},v=6,w=!1,x=!1,y=!1,z=[],A=null;c.setSpriteCount=function(a,b){v=b},c.enableProjectileCollisions=function(a){w=!0},c.enableEdgeCollisions=function(a){x=!0},c.enableSpritesOutsidePlayspace=function(a){y=!0},c.setStartAvatars=function(a){z=a.slice(0)},c.registerCustomGameLogic=function(a){A=a},c.install=function(a,b){function c(b){return new a.FieldDropdown(d(b))}function j(){var b=l.range(0,v),c=l.map(b,function(a){var b=z[a];return[C[b].dropdownThumbnail,a.toString()]});return new a.FieldImageDropdown(c,C.dropdownThumbnailWidth,C.dropdownThumbnailHeight)}function s(a){var b=Blockly.JavaScript.valueToCode(a,"SPRITE",Blockly.JavaScript.ORDER_NONE)||"1";return b+"-1"}function B(a){var b=k.stripQuotes(a).toLowerCase().trim();if(b!==q){var c=k.valueOr(C.soundMetadata,[]),d=$.extend({volume:1},l.find(c,function(a){return a.name.toLowerCase().trim()===b}));f.playAudio(b,d)}}var C=b.skin,D=b.isK1,E=a.Generator.get("JavaScript");a.JavaScript=E,z=C.avatarList.slice(0),E.studio_eventHandlerPrologue=function(){return"\n"},e(a,E,c,j,b),E.studio_eventHandlerPrologue=function(){return"\n"},a.Blocks.studio_whenLeft={helpUrl:"",init:function(){this.setHSV(140,1,.74),D?this.appendDummyInput().appendTitle(i.when()).appendTitle(new Blockly.FieldImage(C.whenLeft)):this.appendDummyInput().appendTitle(g.whenLeft()),this.setPreviousStatement(!1),this.setNextStatement(!0),this.setTooltip(g.whenLeftTooltip())}},E.studio_whenLeft=E.studio_eventHandlerPrologue,a.Blocks.studio_whenRight={helpUrl:"",init:function(){this.setHSV(140,1,.74),D?this.appendDummyInput().appendTitle(i.when()).appendTitle(new Blockly.FieldImage(C.whenRight)):this.appendDummyInput().appendTitle(g.whenRight()),this.setPreviousStatement(!1),this.setNextStatement(!0),this.setTooltip(g.whenRightTooltip())}},E.studio_whenRight=E.studio_eventHandlerPrologue,a.Blocks.studio_whenUp={helpUrl:"",init:function(){this.setHSV(140,1,.74),D?this.appendDummyInput().appendTitle(i.when()).appendTitle(new Blockly.FieldImage(C.whenUp)):this.appendDummyInput().appendTitle(g.whenUp()),this.setPreviousStatement(!1),this.setNextStatement(!0),this.setTooltip(g.whenUpTooltip())}},E.studio_whenUp=E.studio_eventHandlerPrologue,a.Blocks.studio_whenDown={helpUrl:"",init:function(){this.setHSV(140,1,.74),D?this.appendDummyInput().appendTitle(i.when()).appendTitle(new Blockly.FieldImage(C.whenDown)):this.appendDummyInput().appendTitle(g.whenDown()),this.setPreviousStatement(!1),this.setNextStatement(!0),this.setTooltip(g.whenDownTooltip())}},E.studio_whenDown=E.studio_eventHandlerPrologue,a.Blocks.studio_whenArrow={helpUrl:"",init:function(){this.setHSV(140,1,.74),this.appendDummyInput().appendTitle(i.when()),
D?this.appendDummyInput().appendTitle(new a.FieldImageDropdown(this.K1_VALUES),"VALUE"):this.appendDummyInput().appendTitle(new a.FieldDropdown(this.VALUES),"VALUE"),this.setPreviousStatement(!1),this.setInputsInline(!0),this.setNextStatement(!0),this.setTooltip(g.whenArrowTooltip())}},a.Blocks.studio_whenArrow.K1_VALUES=[[C.whenUp,"up"],[C.whenRight,"right"],[C.whenDown,"down"],[C.whenLeft,"left"]],a.Blocks.studio_whenArrow.VALUES=[[g.whenArrowUp(),"up"],[g.whenArrowDown(),"down"],[g.whenArrowLeft(),"left"],[g.whenArrowRight(),"right"]],E.studio_whenArrow=E.studio_eventHandlerPrologue,a.Blocks.studio_repeatForever={helpUrl:"",init:function(){this.setHSV(322,.9,.95),D?(this.appendDummyInput().appendTitle(i.repeat()),this.appendStatementInput("DO").appendTitle(new a.FieldImage(C.repeatImage))):(this.appendDummyInput().appendTitle(g.repeatForever()),this.appendStatementInput("DO").appendTitle(g.repeatDo())),this.setPreviousStatement(!1),this.setNextStatement(!1),this.setTooltip(g.repeatForeverTooltip())}},E.studio_repeatForever=function(){var a=Blockly.JavaScript.statementToCode(this,"DO");return E.studio_eventHandlerPrologue()+a},a.Blocks.studio_whenSpriteClicked={helpUrl:"",init:function(){this.setHSV(140,1,.74),v>1?this.appendDummyInput().appendTitle(c(g.whenSpriteClickedN),"SPRITE"):this.appendDummyInput().appendTitle(g.whenSpriteClicked()),this.setPreviousStatement(!1),this.setInputsInline(!0),this.setNextStatement(!0),this.setTooltip(g.whenSpriteClickedTooltip())}},E.studio_whenSpriteClicked=E.studio_eventHandlerPrologue,a.Blocks.studio_whenTouchCharacter={helpUrl:"",init:function(){this.setHSV(140,1,.74),this.appendDummyInput().appendTitle(g.whenTouchCharacter()),this.setPreviousStatement(!1),this.setNextStatement(!0),this.setTooltip(g.whenTouchCharacterTooltip())}},E.studio_whenTouchCharacter=E.studio_eventHandlerPrologue,a.Blocks.studio_whenTouchObstacle={helpUrl:"",init:function(){this.setHSV(140,1,.74),this.appendDummyInput().appendTitle(g.whenTouchObstacle()),this.setPreviousStatement(!1),this.setNextStatement(!0),this.setTooltip(g.whenTouchObstacleTooltip())}},E.studio_whenTouchObstacle=E.studio_eventHandlerPrologue,a.Blocks.studio_whenTouchGoal={helpUrl:"",init:function(){this.setHSV(140,1,.74),this.appendDummyInput().appendTitle(g.whenTouchGoal()),this.setPreviousStatement(!1),this.setNextStatement(!0),this.setTooltip(g.whenTouchGoalTooltip())}},E.studio_whenTouchGoal=E.studio_eventHandlerPrologue,a.Blocks.studio_whenGetCharacter={helpUrl:"",init:function(){this.setHSV(140,1,.74),this.appendDummyInput().appendTitle(new a.FieldDropdown(this.VALUES),"VALUE"),this.setPreviousStatement(!1),this.setInputsInline(!0),this.setNextStatement(!0),this.setTooltip(g.whenGetCharacterTooltip())}},a.Blocks.studio_whenGetCharacter.VALUES=[[g.whenGetCharacterAnyItem(),"any_item"],[g.whenGetCharacterPufferPig(),"pufferpig"],[g.whenGetCharacterStormtrooper(),"stormtrooper"],[g.whenGetCharacterTauntaun(),"tauntaun"],[g.whenGetCharacterMynock(),"mynock"],[g.whenGetCharacterProbot(),"probot"],[g.whenGetCharacterMouseDroid(),"mousedroid"],[g.whenGetCharacterRebelPilot(),"rebelpilot"]],E.studio_whenGetCharacter=E.studio_eventHandlerPrologue,a.Blocks.studio_whenGetAllCharacters={helpUrl:"",init:function(){this.setHSV(140,1,.74),this.appendDummyInput().appendTitle(g.whenGetAllCharacters()),this.setPreviousStatement(!1),this.setInputsInline(!0),this.setNextStatement(!0),this.setTooltip(g.whenGetAllCharactersTooltip())}},E.studio_whenGetAllCharacters=E.studio_eventHandlerPrologue,a.Blocks.studio_whenGetAllCharacterClass={helpUrl:"",init:function(){this.setHSV(140,1,.74),this.appendDummyInput().appendTitle(new a.FieldDropdown(this.VALUES),"VALUE"),this.setPreviousStatement(!1),this.setInputsInline(!0),this.setNextStatement(!0),this.setTooltip(g.whenGetAllCharacterClassTooltip())}},a.Blocks.studio_whenGetAllCharacterClass.VALUES=[[g.whenGetAllCharacterPufferPig(),"pufferpig"],[g.whenGetAllCharacterStormtrooper(),"stormtrooper"],[g.whenGetAllCharacterTauntaun(),"tauntaun"],[g.whenGetAllCharacterMynock(),"mynock"],[g.whenGetAllCharacterProbot(),"probot"],[g.whenGetAllCharacterMouseDroid(),"mousedroid"],[g.whenGetAllCharacterRebelPilot(),"rebelpilot"]],E.studio_whenGetAllCharacterClass=E.studio_eventHandlerPrologue,a.Blocks.studio_whenSpriteCollided={helpUrl:"",init:function(){var b,e;if(this.setHSV(140,1,.74),D)b=j(),e=j(),this.appendDummyInput().appendTitle(i.when()).appendTitle(new a.FieldImage(C.collide)).appendTitle(b,"SPRITE1"),this.appendDummyInput().appendTitle(i.and()).appendTitle(e,"SPRITE2");else{b=c(g.whenSpriteCollidedN);var f=[this.GROUPINGS[0]];f=f.concat(d(g.whenSpriteCollidedWithN)),f.unshift(this.GROUPINGS[1]),w&&(f=f.concat([this.GROUPINGS[2]]),f=f.concat(this.PROJECTILES)),x&&(f=f.concat([this.GROUPINGS[3]]),f=f.concat(this.EDGES)),e=new a.FieldDropdown(f),this.appendDummyInput().appendTitle(b,"SPRITE1"),this.appendDummyInput().appendTitle(e,"SPRITE2")}v>1&&e.setValue("1"),this.setPreviousStatement(!1),this.setInputsInline(!0),this.setNextStatement(!0),this.setTooltip(g.whenSpriteCollidedTooltip())}},a.Blocks.studio_whenSpriteCollided.GROUPINGS=[[g.whenSpriteCollidedWithAnything(),"anything"],[g.whenSpriteCollidedWithAnyActor(),"any_actor"],[g.whenSpriteCollidedWithAnyProjectile(),"any_projectile"],[g.whenSpriteCollidedWithAnyEdge(),"any_edge"]],a.Blocks.studio_whenSpriteCollided.PROJECTILES=C.whenProjectileCollidedChoices,a.Blocks.studio_whenSpriteCollided.EDGES=[[g.whenSpriteCollidedWithTopEdge(),"top"],[g.whenSpriteCollidedWithLeftEdge(),"left"],[g.whenSpriteCollidedWithBottomEdge(),"bottom"],[g.whenSpriteCollidedWithRightEdge(),"right"]],E.studio_whenSpriteCollided=E.studio_eventHandlerPrologue,a.Blocks.studio_stop={helpUrl:"",init:function(){this.setHSV(184,1,.74),v>1?this.appendDummyInput().appendTitle(c(g.stopSpriteN),"SPRITE"):this.appendDummyInput().appendTitle(g.stopSprite()),this.setPreviousStatement(!0),this.setInputsInline(!0),this.setNextStatement(!0),this.setTooltip(g.stopTooltip())}},a.Blocks.studio_stopSprite={helpUrl:"",init:function(){this.setHSV(184,1,.74),this.appendValueInput("SPRITE").setCheck(a.BlockValueType.NUMBER).appendTitle(g.stopSpriteN({spriteIndex:""})),this.setPreviousStatement(!0),this.setInputsInline(!0),this.setNextStatement(!0),this.setTooltip(g.stopTooltip())}},E.studio_stop=function(){return"Studio.stop('block_id_"+this.id+"', "+(this.getTitleValue("SPRITE")||"0")+");\n"},E.studio_stopSprite=function(){var a=s(this);return"Studio.stop('block_id_"+this.id+"', "+a+");\n"},a.Blocks.studio_addCharacter={helpUrl:"",init:function(){this.setHSV(184,1,.74),this.appendDummyInput().appendTitle(g.addCharacter()),this.appendDummyInput().appendTitle(new a.FieldDropdown(C.itemChoices),"VALUE"),this.setPreviousStatement(!0),this.setInputsInline(!0),this.setNextStatement(!0),this.setTooltip(g.addCharacterTooltip())}},E.studio_addCharacter=function(){var a=C.itemChoices.slice(0,-1).map(function(a){return a[1]}),b=this.getTitleValue("VALUE");return"random"===b&&(b="Studio.random(["+a+"])"),"Studio.addCharacter('block_id_"+this.id+"', "+b+");\n"},a.Blocks.studio_setItemActivity={helpUrl:"",init:function(){this.setHSV(184,1,.74),this.appendDummyInput().appendTitle(new a.FieldDropdown(C.activityChoices),"TYPE"),this.appendDummyInput().appendTitle(new a.FieldDropdown(C.itemChoices),"VALUE"),this.setPreviousStatement(!0),this.setInputsInline(!0),this.setNextStatement(!0),this.setTooltip(g.setActivityTooltip())}},E.studio_setItemActivity=function(){var a=C.itemChoices.slice(0,-1).map(function(a){return a[1]}),b=this.getTitleValue("VALUE");"random"===b&&(b="Studio.random(["+a+"])");var c=C.activityChoices.slice(0,-1).map(function(a){return a[1]}),d=this.getTitleValue("TYPE");return"random"===d&&(d="Studio.random(["+c+"])"),"Studio.setItemActivity('block_id_"+this.id+"', "+b+", "+d+");\n"},a.Blocks.studio_setItemSpeed={helpUrl:"",init:function(){this.setHSV(184,1,.74),this.appendDummyInput().appendTitle(g.setItemSpeedSet()),this.appendDummyInput().appendTitle(new a.FieldDropdown(C.itemChoices),"CLASS");var b=new a.FieldDropdown(this.VALUES);b.setValue(this.VALUES[1][1]),this.appendDummyInput().appendTitle(b,"VALUE"),this.setInputsInline(!0),this.setPreviousStatement(!0),this.setNextStatement(!0),this.setTooltip(g.setItemSpeedTooltip())}},a.Blocks.studio_setItemSpeed.VALUES=[[g.setSpriteSpeedRandom(),q],[g.setSpriteSpeedSlow(),'"slow"'],[g.setSpriteSpeedNormal(),'"normal"'],[g.setSpriteSpeedFast(),'"fast"']],E.studio_setItemSpeed=function(){return u({ctx:this,extraParams:this.getTitleValue("CLASS"),name:"setItemSpeed"})},a.Blocks.studio_throw={helpUrl:"",init:function(){this.setHSV(184,1,.74),v>1?this.appendDummyInput().appendTitle(c(g.throwSpriteN),"SPRITE"):this.appendDummyInput().appendTitle(g.throwSprite()),this.appendDummyInput().appendTitle(new a.FieldDropdown(C.projectileChoices),"VALUE"),this.appendDummyInput().appendTitle("	"),this.appendDummyInput().appendTitle(new a.FieldDropdown(this.DIR),"DIR"),this.setPreviousStatement(!0),this.setInputsInline(!0),this.setNextStatement(!0),this.setTooltip(g.throwTooltip())}},a.Blocks.studio_throw.DIR=[[g.moveDirectionUp(),n.NORTH.toString()],[g.moveDirectionDown(),n.SOUTH.toString()],[g.moveDirectionLeft(),n.WEST.toString()],[g.moveDirectionRight(),n.EAST.toString()],[g.moveDirectionRandom(),"random"]],E.studio_throw=function(){var a=this.DIR.slice(0,-1).map(function(a){return a[1]}),b=this.getTitleValue("DIR");"random"===b&&(b="Studio.random(["+a+"])");var c=C.projectileChoices.slice(0,-1).map(function(a){return a[1]}),d=this.getTitleValue("VALUE");return"random"===d&&(d="Studio.random(["+c+"])"),"Studio.throwProjectile('block_id_"+this.id+"', "+(this.getTitleValue("SPRITE")||"0")+", "+b+", "+d+");\n"},a.Blocks.studio_makeProjectile={helpUrl:"",init:function(){this.setHSV(184,1,.74),this.appendDummyInput().appendTitle(new a.FieldDropdown(this.VALUES),"VALUE"),this.appendDummyInput().appendTitle("	"),this.appendDummyInput().appendTitle(new a.FieldDropdown(this.ACTIONS),"ACTION"),this.setPreviousStatement(!0),this.setInputsInline(!0),this.setNextStatement(!0),this.setTooltip(g.makeProjectileTooltip())}},a.Blocks.studio_makeProjectile.VALUES=C.makeProjectileChoices,a.Blocks.studio_makeProjectile.ACTIONS=[[g.makeProjectileBounce(),'"bounce"'],[g.makeProjectileDisappear(),'"disappear"']],E.studio_makeProjectile=function(){return"Studio.makeProjectile('block_id_"+this.id+"', "+this.getTitleValue("VALUE")+", "+this.getTitleValue("ACTION")+");\n"},a.Blocks.studio_setSpritePosition={helpUrl:"",init:function(){var b;y?(b=new a.FieldDropdown(this.VALUES_EXTENDED),b.setValue(this.VALUES_EXTENDED[4][1])):(b=new a.FieldDropdown(this.VALUES),b.setValue(this.VALUES[1][1])),this.setHSV(184,1,.74),v>1?this.appendDummyInput().appendTitle(c(g.setSpriteN),"SPRITE"):this.appendDummyInput().appendTitle(g.setSprite()),this.appendDummyInput().appendTitle(b,"VALUE"),this.setPreviousStatement(!0),this.setInputsInline(!0),this.setNextStatement(!0),this.setTooltip(g.setSpritePositionTooltip())}},a.Blocks.studio_setSpritePosition.VALUES=[[g.positionRandom(),q],[g.positionTopLeft(),o.TOPLEFT.toString()],[g.positionTopCenter(),o.TOPCENTER.toString()],[g.positionTopRight(),o.TOPRIGHT.toString()],[g.positionMiddleLeft(),o.MIDDLELEFT.toString()],[g.positionMiddleCenter(),o.MIDDLECENTER.toString()],[g.positionMiddleRight(),o.MIDDLERIGHT.toString()],[g.positionBottomLeft(),o.BOTTOMLEFT.toString()],[g.positionBottomCenter(),o.BOTTOMCENTER.toString()],[g.positionBottomRight(),o.BOTTOMRIGHT.toString()]],a.Blocks.studio_setSpritePosition.VALUES_EXTENDED=[[g.positionRandom(),q],[g.positionOutTopLeft(),o.OUTTOPLEFT.toString()],[g.positionOutTopRight(),o.OUTTOPRIGHT.toString()],[g.positionTopOutLeft(),o.TOPOUTLEFT.toString()],[g.positionTopLeft(),o.TOPLEFT.toString()],[g.positionTopCenter(),o.TOPCENTER.toString()],[g.positionTopRight(),o.TOPRIGHT.toString()],[g.positionTopOutRight(),o.TOPOUTRIGHT.toString()],[g.positionMiddleLeft(),o.MIDDLELEFT.toString()],[g.positionMiddleCenter(),o.MIDDLECENTER.toString()],[g.positionMiddleRight(),o.MIDDLERIGHT.toString()],[g.positionBottomOutLeft(),o.BOTTOMOUTLEFT.toString()],[g.positionBottomLeft(),o.BOTTOMLEFT.toString()],[g.positionBottomCenter(),o.BOTTOMCENTER.toString()],[g.positionBottomRight(),o.BOTTOMRIGHT.toString()],[g.positionBottomOutRight(),o.BOTTOMOUTRIGHT.toString()],[g.positionOutBottomLeft(),o.OUTBOTTOMLEFT.toString()],[g.positionOutBottomRight(),o.OUTBOTTOMRIGHT.toString()]],E.studio_setSpritePosition=function(){return u({ctx:this,extraParams:this.getTitleValue("SPRITE")||"0",name:"setSpritePosition"})},a.Blocks.studio_setSpriteXY={helpUrl:"",init:function(){this.setHSV(184,1,.74),v>1?this.appendValueInput("SPRITE").setCheck(a.BlockValueType.NUMBER).appendTitle(g.moveSpriteN({spriteIndex:""})):this.appendDummyInput().appendTitle(g.setSprite()),this.appendDummyInput().appendTitle(g.toXY()),this.appendValueInput("XPOS").setCheck(a.BlockValueType.NUMBER),this.appendValueInput("YPOS").setCheck(a.BlockValueType.NUMBER),this.setPreviousStatement(!0),this.setInputsInline(!0),this.setNextStatement(!0)}},E.studio_setSpriteXY=function(){var a=s(this),b=Blockly.JavaScript.valueToCode(this,"XPOS",Blockly.JavaScript.ORDER_NONE)||"0",c=Blockly.JavaScript.valueToCode(this,"YPOS",Blockly.JavaScript.ORDER_NONE)||"0";return"Studio.setSpriteXY('block_id_"+this.id+"', "+a+", "+b+", "+c+");\n"};var F={DIRECTION_CONFIGS:{West:{letter:i.directionWestLetter(),image:C.leftArrow,studioValue:n.WEST.toString(),tooltip:g.moveLeftTooltip()},East:{letter:i.directionEastLetter(),image:C.rightArrow,studioValue:n.EAST.toString(),tooltip:g.moveRightTooltip()},North:{letter:i.directionNorthLetter(),image:C.upArrow,studioValue:n.NORTH.toString(),tooltip:g.moveUpTooltip()},South:{letter:i.directionSouthLetter(),image:C.downArrow,studioValue:n.SOUTH.toString(),tooltip:g.moveDownTooltip()}},DISTANCES:[[C.shortLine,"25"],[C.longLine,"400"]],DEFAULT_MOVE_DISTANCE:"100",generateBlocksForAllDirections:function(){F.generateBlocksForDirection("North"),F.generateBlocksForDirection("South"),F.generateBlocksForDirection("West"),F.generateBlocksForDirection("East")},generateBlocksForDirection:function(b){E["studio_move"+b]=F.generateCodeGenerator(b,!0),a.Blocks["studio_move"+b]=F.generateMoveBlock(b,!1),E["studio_move"+b+"Distance"]=F.generateCodeGenerator(b,!1),a.Blocks["studio_move"+b+"Distance"]=F.generateMoveBlock(b,!1),E["studio_move"+b+"_length"]=F.generateCodeGenerator(b,!1),a.Blocks["studio_move"+b+"_length"]=F.generateMoveBlock(b,!0)},generateMoveBlock:function(b,c){var d=F.DIRECTION_CONFIGS[b];return{helpUrl:"",init:function(){this.setHSV(184,1,.74),this.appendDummyInput().appendTitle(g.moveSprite()).appendTitle(new a.FieldImage(d.image)).appendTitle(d.letter),v>1&&this.appendDummyInput().appendTitle(j(),"SPRITE"),c&&this.appendDummyInput().appendTitle(new a.FieldImageDropdown(F.DISTANCES),"DISTANCE"),this.setPreviousStatement(!0),this.setInputsInline(!0),this.setNextStatement(!0),this.setTooltip(d.tooltip)}}},generateCodeGenerator:function(a,b){var c=F.DIRECTION_CONFIGS[a];return function(){var a=this.getTitleValue("SPRITE")||"0",d=c.studioValue,e=b?"move":"moveDistance",f=this.getTitleValue("DISTANCE")||F.DEFAULT_MOVE_DISTANCE;return"Studio."+e+"('block_id_"+this.id+"', "+a+", "+d+(b?"":", "+f)+");\n"}}};F.generateBlocksForAllDirections(),a.Blocks.studio_move={helpUrl:"",init:function(){this.setHSV(184,1,.74),v>1?(D?this.appendDummyInput().appendTitle(g.moveSprite()).appendTitle(j(),"SPRITE"):this.appendDummyInput().appendTitle(c(g.moveSpriteN),"SPRITE"),this.appendDummyInput().appendTitle("	")):this.appendDummyInput().appendTitle(g.moveSprite()),D?this.appendDummyInput().appendTitle(new a.FieldImageDropdown(this.K1_DIR),"DIR"):this.appendDummyInput().appendTitle(new a.FieldDropdown(this.DIR),"DIR"),this.setPreviousStatement(!0),this.setInputsInline(!0),this.setNextStatement(!0),this.setTooltip(g.moveTooltip())}},a.Blocks.studio_move.K1_DIR=[[C.upArrow,n.NORTH.toString()],[C.rightArrow,n.EAST.toString()],[C.downArrow,n.SOUTH.toString()],[C.leftArrow,n.WEST.toString()]],a.Blocks.studio_move.DIR=[[g.moveDirectionUp(),n.NORTH.toString()],[g.moveDirectionDown(),n.SOUTH.toString()],[g.moveDirectionLeft(),n.WEST.toString()],[g.moveDirectionRight(),n.EAST.toString()]],E.studio_move=function(){return"Studio.move('block_id_"+this.id+"', "+(this.getTitleValue("SPRITE")||"0")+", "+this.getTitleValue("DIR")+");\n"};var G=function(b){var d={};return d.helpUrl="",d.init=function(){this.setHSV(184,1,.74),b.sprite?this.appendValueInput("SPRITE").setCheck(a.BlockValueType.NUMBER).appendTitle(g.moveSpriteN({spriteIndex:""})):v>1?(D?this.appendDummyInput().appendTitle(g.moveSprite()).appendTitle(j(),"SPRITE"):this.appendDummyInput().appendTitle(c(g.moveSpriteN),"SPRITE"),this.appendDummyInput().appendTitle("	")):this.appendDummyInput().appendTitle(g.moveSprite()),D?this.appendDummyInput().appendTitle(new a.FieldImageDropdown(this.K1_DIR),"DIR"):this.appendDummyInput().appendTitle(new a.FieldDropdown(this.DIR),"DIR"),this.appendDummyInput().appendTitle("	"),b.params?(this.appendValueInput("DISTANCE").setCheck(a.BlockValueType.NUMBER),this.appendDummyInput().appendTitle(g.moveDistancePixels())):D?this.appendDummyInput().appendTitle(new a.FieldImageDropdown(this.K1_DISTANCE),"DISTANCE"):this.appendDummyInput().appendTitle(new a.FieldDropdown(this.DISTANCE),"DISTANCE"),this.setPreviousStatement(!0),this.setInputsInline(!0),this.setNextStatement(!0),this.setTooltip(g.moveDistanceTooltip())},d.K1_DIR=[[C.upArrow,n.NORTH.toString()],[C.rightArrow,n.EAST.toString()],[C.downArrow,n.SOUTH.toString()],[C.leftArrow,n.WEST.toString()]],d.DIR=[[g.moveDirectionUp(),n.NORTH.toString()],[g.moveDirectionDown(),n.SOUTH.toString()],[g.moveDirectionLeft(),n.WEST.toString()],[g.moveDirectionRight(),n.EAST.toString()],[g.moveDirectionRandom(),"random"]],b.params||(d.DISTANCE=[[g.moveDistance25(),"25"],[g.moveDistance50(),"50"],[g.moveDistance100(),"100"],[g.moveDistance200(),"200"],[g.moveDistance400(),"400"],[g.moveDistanceRandom(),"random"]],d.K1_DISTANCE=[[C.shortLine,"25"],[C.longLine,"400"]]),d};a.Blocks.studio_moveDistance=G({}),a.Blocks.studio_moveDistanceParams=G({params:!0}),a.Blocks.studio_moveDistanceParamsSprite=G({params:!0,sprite:!0}),E.studio_moveDistance=function(){var a=this.DISTANCE.slice(0,-1).map(function(a){return a[1]}),b=this.getTitleValue("DISTANCE");"random"===b&&(b="Studio.random(["+a+"])");var c=this.DIR.slice(0,-1).map(function(a){return a[1]}),d=this.getTitleValue("DIR");return"random"===d&&(d="Studio.random(["+c+"])"),"Studio.moveDistance('block_id_"+this.id+"', "+(this.getTitleValue("SPRITE")||"0")+", "+d+", "+b+");\n"},E.studio_moveDistanceParams=function(){var a=this.DIR.slice(0,-1).map(function(a){return a[1]}),b=this.getTitleValue("DIR");"random"===b&&(b="Studio.random(["+a+"])");var c=Blockly.JavaScript.valueToCode(this,"DISTANCE",Blockly.JavaScript.ORDER_NONE)||"0";return"Studio.moveDistance('block_id_"+this.id+"', "+(this.getTitleValue("SPRITE")||"0")+", "+b+", "+c+");\n"},E.studio_moveDistanceParamsSprite=function(){var a=s(this),b=this.DIR.slice(0,-1).map(function(a){return a[1]}),c=this.getTitleValue("DIR");"random"===c&&(c="Studio.random(["+b+"])");var d=Blockly.JavaScript.valueToCode(this,"DISTANCE",Blockly.JavaScript.ORDER_NONE)||"0";return"Studio.moveDistance('block_id_"+this.id+"', "+a+", "+c+", "+d+");\n"},a.Blocks.studio_playSound={helpUrl:"",init:function(){this.setHSV(184,1,.74),D?this.appendDummyInput().appendTitle(i.play()).appendTitle(new a.FieldImage(C.soundIcon)).appendTitle(new a.FieldDropdown(this.soundChoices(),B),"SOUND"):this.appendDummyInput().appendTitle(new a.FieldDropdown(this.soundChoices(),B),"SOUND"),this.setPreviousStatement(!0),this.setNextStatement(!0),this.setTooltip(g.playSoundTooltip())}},a.Blocks.studio_playSound.soundChoices=function(){var a=D?C.soundChoicesK1:C.soundChoices,b=m.getPlaySoundValues(!0);return a.filter(function(a){for(var c=0;c<b.length;c++)if(a[1]===b[c])return!0;return!1})},E.studio_playSound=function(){return"Studio.playSound('block_id_"+this.id+"', '"+this.getTitleValue("SOUND")+"');\n"},a.Blocks.studio_changeScore={helpUrl:"",init:function(){this.setHSV(184,1,.74),D?this.appendDummyInput().appendTitle(i.score()).appendTitle(new a.FieldImage(C.scoreCard)):this.appendDummyInput().appendTitle(new a.FieldDropdown(this.VALUES),"VALUE"),this.setPreviousStatement(!0),this.setNextStatement(!0),this.setTooltip(D?g.changeScoreTooltipK1():g.changeScoreTooltip())}},a.Blocks.studio_changeScore.VALUES=[[g.incrementPlayerScore(),"1"],[g.decrementPlayerScore(),"-1"]],E.studio_changeScore=function(){return"Studio.changeScore('block_id_"+this.id+"', '"+(this.getTitleValue("VALUE")||"1")+"');\n"},a.Blocks.studio_addPoints={helpUrl:"",init:function(){this.setHSV(184,1,.74),this.appendDummyInput().appendTitle(new a.FieldDropdown(this.VALUES),"VALUE"),this.setPreviousStatement(!0),this.setNextStatement(!0),this.setTooltip(g.addPointsTooltip())}},a.Blocks.studio_addPoints.VALUES=[[g.addPoints10(),"10"],[g.addPoints50(),"50"],[g.addPoints100(),"100"],[g.addPoints300(),"300"],[g.addPoints1000(),"1000"]],E.studio_addPoints=function(){return"Studio.addPoints('block_id_"+this.id+"', '"+(this.getTitleValue("VALUE")||"1")+"');\n"},a.Blocks.studio_removePoints={helpUrl:"",init:function(){this.setHSV(184,1,.74),this.appendDummyInput().appendTitle(new a.FieldDropdown(this.VALUES),"VALUE"),this.setPreviousStatement(!0),this.setNextStatement(!0),this.setTooltip(g.removePointsTooltip())}},a.Blocks.studio_removePoints.VALUES=[[g.removePoints10(),"10"],[g.removePoints50(),"50"],[g.removePoints100(),"100"],[g.removePoints300(),"300"],[g.removePoints1000(),"1000"]],E.studio_removePoints=function(){return"Studio.removePoints('block_id_"+this.id+"', '"+(this.getTitleValue("VALUE")||"1")+"');\n"},a.Blocks.studio_setScoreText={helpUrl:"",init:function(){this.setHSV(184,1,.74),this.appendValueInput("TEXT").appendTitle(g.setScoreText()),this.setInputsInline(!0),this.setPreviousStatement(!0),this.setNextStatement(!0),this.setTooltip(g.setScoreTextTooltip())}},E.studio_setScoreText=function(){var a=Blockly.JavaScript.valueToCode(this,"TEXT",Blockly.JavaScript.ORDER_NONE)||"";return"Studio.setScoreText('block_id_"+this.id+"', "+a+");\n"},a.Blocks.studio_showCoordinates={helpUrl:"",init:function(){this.setHSV(184,1,.74),this.appendDummyInput().appendTitle(g.showCoordinates()),this.setInputsInline(!0),this.setPreviousStatement(!0),this.setNextStatement(!0),this.setTooltip(g.showCoordinatesTooltip())}},E.studio_showCoordinates=function(){return"Studio.showCoordinates('block_id_"+this.id+"');\n"},a.Blocks.studio_setDroidSpeed={helpUrl:"",init:function(){this.setHSV(184,1,.74);var b=new a.FieldDropdown(this.VALUES);b.setValue(this.VALUES[2][1]),this.appendDummyInput().appendTitle(b,"VALUE"),this.setInputsInline(!0),this.setPreviousStatement(!0),this.setNextStatement(!0),this.setTooltip(g.setDroidSpeedTooltip())}},a.Blocks.studio_setDroidSpeed.VALUES=[[g.setDroidSpeedRandom(),"random"],[g.setDroidSpeedSlow(),"slow"],[g.setDroidSpeedNormal(),"normal"],[g.setDroidSpeedFast(),"fast"]],E.studio_setDroidSpeed=function(){return"Studio.setDroidSpeed('block_id_"+this.id+"', \""+this.getTitleValue("VALUE")+'");\n'},a.Blocks.studio_setSpriteSpeed={helpUrl:"",init:function(){if(this.setHSV(184,1,.74),v>1?D?this.appendDummyInput().appendTitle(g.setSprite()).appendTitle(j(),"SPRITE"):this.appendDummyInput().appendTitle(c(g.setSpriteN),"SPRITE"):this.appendDummyInput().appendTitle(g.setSprite()),D){var b=new a.FieldImageDropdown(this.K1_VALUES);b.setValue(this.K1_VALUES[1][1]),this.appendDummyInput().appendTitle(g.speed()).appendTitle(b,"VALUE")}else{var d=new a.FieldDropdown(this.VALUES);d.setValue(this.VALUES[3][1]),this.appendDummyInput().appendTitle(d,"VALUE")}this.setInputsInline(!0),this.setPreviousStatement(!0),this.setNextStatement(!0),this.setTooltip(g.setSpriteSpeedTooltip())}},a.Blocks.studio_setSpriteSpeedParams={helpUrl:"",init:function(){this.setHSV(184,1,.74),this.appendValueInput("SPRITE").setCheck(a.BlockValueType.NUMBER).appendTitle(g.setSpriteN({spriteIndex:""})),this.appendValueInput("VALUE").setCheck(a.BlockValueType.NUMBER).appendTitle(g.speed()),this.setInputsInline(!0),this.setPreviousStatement(!0),this.setNextStatement(!0),this.setTooltip(g.setSpriteSpeedTooltip())}},a.Blocks.studio_setSpriteSpeed.K1_VALUES=[[C.speedSlow,"Studio.SpriteSpeed.SLOW"],[C.speedMedium,"Studio.SpriteSpeed.NORMAL"],[C.speedFast,"Studio.SpriteSpeed.FAST"]],a.Blocks.studio_setSpriteSpeed.VALUES=[[g.setSpriteSpeedRandom(),q],[g.setSpriteSpeedVerySlow(),"Studio.SpriteSpeed.VERY_SLOW"],[g.setSpriteSpeedSlow(),"Studio.SpriteSpeed.SLOW"],[g.setSpriteSpeedNormal(),"Studio.SpriteSpeed.NORMAL"],[g.setSpriteSpeedFast(),"Studio.SpriteSpeed.FAST"],[g.setSpriteSpeedVeryFast(),"Studio.SpriteSpeed.VERY_FAST"]],E.studio_setSpriteSpeed=function(){return u({ctx:this,extraParams:this.getTitleValue("SPRITE")||"0",name:"setSpriteSpeed"})},E.studio_setSpriteSpeedParams=function(){var a=s(this),b=Blockly.JavaScript.valueToCode(this,"VALUE",Blockly.JavaScript.ORDER_NONE)||"5";return"Studio.setSpriteSpeed('block_id_"+this.id+"', "+a+","+b+");\n"},a.Blocks.studio_setSpriteSize={helpUrl:"",init:function(){this.setHSV(184,1,.74),v>1?this.appendDummyInput().appendTitle(c(g.setSpriteN),"SPRITE"):this.appendDummyInput().appendTitle(g.setSprite());var b=new a.FieldDropdown(this.VALUES);b.setValue(this.VALUES[3][1]),this.appendDummyInput().appendTitle(b,"VALUE"),this.setInputsInline(!0),this.setPreviousStatement(!0),this.setNextStatement(!0),this.setTooltip(g.setSpriteSizeTooltip())}},a.Blocks.studio_setSpriteSizeParams={helpUrl:"",init:function(){this.setHSV(184,1,.74),this.appendValueInput("SPRITE").setCheck(a.BlockValueType.NUMBER).appendTitle(g.setSpriteN({spriteIndex:""})),this.appendValueInput("VALUE").setCheck(a.BlockValueType.NUMBER).appendTitle(g.size()),this.setInputsInline(!0),this.setPreviousStatement(!0),this.setNextStatement(!0),this.setTooltip(g.setSpriteSizeTooltip())}},a.Blocks.studio_setSpriteSize.VALUES=[[g.setSpriteSizeRandom(),q],[g.setSpriteSizeVerySmall(),"Studio.SpriteSize.VERY_SMALL"],[g.setSpriteSizeSmall(),"Studio.SpriteSize.SMALL"],[g.setSpriteSizeNormal(),"Studio.SpriteSize.NORMAL"],[g.setSpriteSizeLarge(),"Studio.SpriteSize.LARGE"],[g.setSpriteSizeVeryLarge(),"Studio.SpriteSize.VERY_LARGE"]],E.studio_setSpriteSize=function(){return u({ctx:this,extraParams:this.getTitleValue("SPRITE")||"0",name:"setSpriteSize"})},E.studio_setSpriteSizeParams=function(){var a=s(this),b=Blockly.JavaScript.valueToCode(this,"VALUE",Blockly.JavaScript.ORDER_NONE)||"5";return"Studio.setSpriteSize('block_id_"+this.id+"', "+a+","+b+");\n"},a.Blocks.studio_setBackground={helpUrl:"",init:function(){this.setHSV(312,.32,.62),this.VALUES=[];var b;D?(this.VALUES=C.backgroundChoicesK1,b=new a.FieldImageDropdown(C.backgroundChoicesK1,C.dropdownThumbnailWidth,C.dropdownThumbnailHeight),this.appendDummyInput().appendTitle(g.setBackground()).appendTitle(b,"VALUE")):(this.VALUES=C.backgroundChoices,b=new a.FieldDropdown(C.backgroundChoices),this.appendDummyInput().appendTitle(b,"VALUE")),b.setValue('"'+C.defaultBackground+'"'),this.setInputsInline(!0),this.setPreviousStatement(!0),this.setNextStatement(!0),this.setTooltip(g.setBackgroundTooltip())}},a.Blocks.studio_setBackgroundParam={helpUrl:"",init:function(){this.setHSV(312,.32,.62),this.VALUES=C.backgroundChoices,this.appendDummyInput().appendTitle(g.setBackground()),this.appendValueInput("VALUE"),this.setInputsInline(!0),this.setPreviousStatement(!0),this.setNextStatement(!0),this.setTooltip(g.setBackgroundTooltip())}},E.studio_setBackground=function(){return u({ctx:this,name:"setBackground"})},E.studio_setBackgroundParam=function(){var b=a.JavaScript.valueToCode(this,"VALUE",Blockly.JavaScript.ORDER_NONE);return u({value:b,ctx:this,name:"setBackground"})},a.Blocks.studio_setMap={helpUrl:"",init:function(){this.setHSV(312,.32,.62),this.VALUES=C.mapChoices;var b=new a.FieldDropdown(C.mapChoices);this.appendDummyInput().appendTitle(b,"VALUE"),b.setValue(C.mapChoices[1][1]),this.setInputsInline(!0),this.setPreviousStatement(!0),this.setNextStatement(!0),this.setTooltip(g.setMapTooltip())}},E.studio_setMap=function(){return u({ctx:this,name:"setMap"})};var H=function(b){var c={};return c.helpUrl="",c.init=function(){this.setHSV(184,1,.74),this.appendDummyInput().appendTitle(g.showTitleScreen()),b.params?(this.appendValueInput("TITLE").setCheck(a.BlockValueType.STRING).setAlign(Blockly.ALIGN_RIGHT).appendTitle(g.showTitleScreenTitle()),this.appendValueInput("TEXT").setCheck(a.BlockValueType.STRING).setAlign(Blockly.ALIGN_RIGHT).appendTitle(g.showTitleScreenText())):(this.appendDummyInput().appendTitle(g.showTitleScreenTitle()).appendTitle(new Blockly.FieldImage(Blockly.assetUrl("media/quote0.png"),12,12)).appendTitle(new Blockly.FieldTextInput(g.showTSDefTitle()),"TITLE").appendTitle(new Blockly.FieldImage(Blockly.assetUrl("media/quote1.png"),12,12)),this.appendDummyInput().appendTitle(g.showTitleScreenText()).appendTitle(new Blockly.FieldImage(Blockly.assetUrl("media/quote0.png"),12,12)).appendTitle(new Blockly.FieldTextInput(g.showTSDefText()),"TEXT").appendTitle(new Blockly.FieldImage(Blockly.assetUrl("media/quote1.png"),12,12))),this.setPreviousStatement(!0),this.setNextStatement(!0),this.setTooltip(g.showTitleScreenTooltip())},c};a.Blocks.studio_showTitleScreen=H({}),a.Blocks.studio_showTitleScreenParams=H({params:!0}),E.studio_showTitleScreen=function(){return"Studio.showTitleScreen('block_id_"+this.id+"', "+a.JavaScript.quote_(this.getTitleValue("TITLE"))+", "+a.JavaScript.quote_(this.getTitleValue("TEXT"))+");\n"},E.studio_showTitleScreenParams=function(){var a=Blockly.JavaScript.valueToCode(this,"TITLE",Blockly.JavaScript.ORDER_NONE)||"",b=Blockly.JavaScript.valueToCode(this,"TEXT",Blockly.JavaScript.ORDER_NONE)||"";return"Studio.showTitleScreen('block_id_"+this.id+"', "+a+", "+b+");\n"},D?(a.Blocks.studio_setSprite={helpUrl:"",init:function(){this.setHSV(312,.32,.62);var b=new a.FieldDropdown(this.VALUES);b.setValue(t),this.appendDummyInput().appendTitle(b,"VALUE"),v>1&&this.appendDummyInput().appendTitle(j(),"SPRITE"),this.setInputsInline(!0),this.setPreviousStatement(!0),this.setNextStatement(!0),this.setTooltip(g.setSpriteK1Tooltip())}},a.Blocks.studio_setSprite.VALUES=[[g.setSpriteHideK1(),r],[g.setSpriteShowK1(),t]]):(a.Blocks.studio_setSprite={helpUrl:"",init:function(){if(this.VALUES=[].concat(C.spriteChoices),this.setHSV(312,.32,.62),v>1)this.appendDummyInput().appendTitle(c(g.setSpriteN),"SPRITE");else for(var b=C.setSpritePrefix+" ",d=0;d<this.VALUES.length;d++)this.VALUES[d]=[].concat(C.spriteChoices[d]),this.VALUES[d][0]=b+this.VALUES[d][0];var e=new a.FieldDropdown(this.VALUES);e.setValue(C.spriteChoices[2][1]),this.appendDummyInput().appendTitle(e,"VALUE"),this.setInputsInline(!0),this.setPreviousStatement(!0),this.setNextStatement(!0),this.setTooltip(g.setSpriteTooltip())}},a.Blocks.studio_setSpriteParams={helpUrl:"",init:function(){this.VALUES=C.spriteChoices;var b=new a.FieldDropdown(C.spriteChoices);b.setValue(C.spriteChoices[2][1]),this.setHSV(312,.32,.62),this.appendValueInput("SPRITE").setCheck(a.BlockValueType.NUMBER).appendTitle(g.setSpriteN({spriteIndex:""})),this.appendDummyInput().appendTitle(b,"VALUE"),this.setInputsInline(!0),this.setPreviousStatement(!0),this.setNextStatement(!0),this.setTooltip(g.setSpriteTooltip())}},a.Blocks.studio_setSpriteParamValue={helpUrl:"",init:function(){this.setHSV(312,.32,.62),v>1?this.appendDummyInput().appendTitle(c(g.setSpriteN),"SPRITE"):this.appendDummyInput().appendTitle(g.setSprite()),this.appendValueInput("VALUE"),this.setInputsInline(!0),this.setPreviousStatement(!0),this.setNextStatement(!0),this.setTooltip(g.setSpriteTooltip())}}),E.studio_setSprite=function(){var a=this.getTitleValue("SPRITE")||"0";return u({ctx:this,extraParams:a,name:"setSprite"})},E.studio_setSpriteParams=function(){
var a=s(this);return u({ctx:this,extraParams:a,name:"setSprite"})},E.studio_setSpriteParamValue=function(){var b=this.getTitleValue("SPRITE")||"0",c=a.JavaScript.valueToCode(this,"VALUE",Blockly.JavaScript.ORDER_NONE);return u({value:c,ctx:this,extraParams:b,name:"setSprite"})},a.Blocks.studio_setSpriteEmotion={helpUrl:"",init:function(){if(this.setHSV(184,1,.74),v>1?D?this.appendDummyInput().appendTitle(g.setSprite()).appendTitle(j(),"SPRITE"):this.appendDummyInput().appendTitle(c(g.setSpriteN),"SPRITE"):this.appendDummyInput().appendTitle(g.setSprite()),D){var b=new a.FieldImageDropdown(this.K1_VALUES,34,34);b.setValue(this.K1_VALUES[0][1]),this.appendDummyInput().appendTitle(g.emotion()).appendTitle(b,"VALUE")}else{var d=new a.FieldDropdown(this.VALUES);d.setValue(this.VALUES[1][1]),this.appendDummyInput().appendTitle(d,"VALUE")}this.setInputsInline(!0),this.setPreviousStatement(!0),this.setNextStatement(!0),this.setTooltip(g.setSpriteEmotionTooltip())}},a.Blocks.studio_setSpriteEmotionParams={helpUrl:"",init:function(){this.setHSV(184,1,.74),this.appendValueInput("SPRITE").setCheck(a.BlockValueType.NUMBER).appendTitle(g.setSpriteN({spriteIndex:""}));var b=new a.FieldDropdown(this.VALUES);b.setValue(this.VALUES[1][1]),this.appendDummyInput().appendTitle(b,"VALUE"),this.setInputsInline(!0),this.setPreviousStatement(!0),this.setNextStatement(!0),this.setTooltip(g.setSpriteEmotionTooltip())}},a.Blocks.studio_setSpriteEmotion.VALUES=a.Blocks.studio_setSpriteEmotionParams.VALUES=[[g.setSpriteEmotionRandom(),q],[g.setSpriteEmotionNormal(),p.NORMAL.toString()],[g.setSpriteEmotionHappy(),p.HAPPY.toString()],[g.setSpriteEmotionAngry(),p.ANGRY.toString()],[g.setSpriteEmotionSad(),p.SAD.toString()]],a.Blocks.studio_setSpriteEmotion.K1_VALUES=[[C.emotionNormal,p.NORMAL.toString()],[C.emotionHappy,p.HAPPY.toString()],[C.emotionAngry,p.ANGRY.toString()],[C.emotionSad,p.SAD.toString()],[C.randomPurpleIcon,q]],E.studio_setSpriteEmotion=function(){return u({ctx:this,extraParams:this.getTitleValue("SPRITE")||"0",name:"setSpriteEmotion"})},E.studio_setSpriteEmotionParams=function(){var a=s(this);return u({ctx:this,extraParams:a,name:"setSpriteEmotion"})};var I=function(b){var d={};return d.helpUrl="",d.init=function(){if(this.setHSV(184,1,.74),b.time?(this.appendValueInput("SPRITE").setCheck(a.BlockValueType.NUMBER).appendTitle(g.actor()),this.appendDummyInput().appendTitle(g.saySprite())):v>1?D?this.appendDummyInput().appendTitle(g.saySprite()).appendTitle(j(),"SPRITE"):this.appendDummyInput().appendTitle(c(g.saySpriteN),"SPRITE"):this.appendDummyInput().appendTitle(g.saySprite()),b.restrictedDialog){for(var d=[],e=59,f=0;e>f;f++){var h=d[f]=[],i=g["saySpriteChoices_"+f]();h[0]=h[1]=i}var k=new a.FieldDropdown(d);this.appendDummyInput().appendTitle(k,"VALUE")}else if(b.params)this.appendValueInput("TEXT");else{var l=this.appendDummyInput();D&&l.appendTitle(new Blockly.FieldImage(C.speechBubble)),l.appendTitle(new Blockly.FieldImage(Blockly.assetUrl("media/quote0.png"),12,12)).appendTitle(new Blockly.FieldTextInput(g.defaultSayText()),"TEXT").appendTitle(new Blockly.FieldImage(Blockly.assetUrl("media/quote1.png"),12,12))}b.time&&(this.appendValueInput("TIME").setCheck(a.BlockValueType.NUMBER).appendTitle(g["for"]()),this.appendDummyInput().appendTitle(g.waitSeconds())),this.setInputsInline(!0),this.setPreviousStatement(!0),this.setNextStatement(!0),this.setTooltip(g.saySpriteTooltip())},d};a.Blocks.studio_saySprite=I({}),a.Blocks.studio_saySpriteChoices=I({restrictedDialog:!0}),a.Blocks.studio_saySpriteParams=I({params:!0}),a.Blocks.studio_saySpriteParamsTime=I({params:!0,time:!0}),E.studio_saySprite=function(){return"Studio.saySprite('block_id_"+this.id+"', "+(this.getTitleValue("SPRITE")||"0")+", "+a.JavaScript.quote_(this.getTitleValue("TEXT"))+");\n"},E.studio_saySpriteChoices=function(){return"Studio.saySprite('block_id_"+this.id+"', "+(this.getTitleValue("SPRITE")||"0")+", '"+(this.getTitleValue("VALUE")||" ")+"');\n"},E.studio_saySpriteParams=function(){var a=Blockly.JavaScript.valueToCode(this,"TEXT",Blockly.JavaScript.ORDER_NONE)||"";return"Studio.saySprite('block_id_"+this.id+"', "+(this.getTitleValue("SPRITE")||"0")+", "+a+");\n"},E.studio_saySpriteParamsTime=function(){var a=s(this),b=Blockly.JavaScript.valueToCode(this,"TEXT",Blockly.JavaScript.ORDER_NONE)||"",c=Blockly.JavaScript.valueToCode(this,"TIME",Blockly.JavaScript.ORDER_NONE)||1;return"Studio.saySprite('block_id_"+this.id+"', "+a+", "+b+","+c+");\n"};var J=function(b){var c={};return c.helpUrl="",c.init=function(){if(this.setHSV(184,1,.74),b.params)this.appendDummyInput().appendTitle(g.waitFor()),this.appendValueInput("VALUE").setCheck(a.BlockValueType.NUMBER),this.appendDummyInput().appendTitle(g.waitSeconds());else{var c=new a.FieldDropdown(this.VALUES);c.setValue(this.VALUES[2][1]),this.appendDummyInput().appendTitle(c,"VALUE")}this.setInputsInline(!0),this.setPreviousStatement(!0),this.setNextStatement(!0),this.setTooltip(b.params?g.waitParamsTooltip():g.waitTooltip())},b.params||(c.VALUES=[[g.waitForClick(),'"click"'],[g.waitForRandom(),"random"],[g.waitForHalfSecond(),"500"],[g.waitFor1Second(),"1000"],[g.waitFor2Seconds(),"2000"],[g.waitFor5Seconds(),"5000"],[g.waitFor10Seconds(),"10000"]]),c};a.Blocks.studio_wait=J({}),a.Blocks.studio_waitParams=J({params:!0}),E.studio_wait=function(){return u({ctx:this,name:"wait"})},E.studio_waitParams=function(){var a=Blockly.JavaScript.valueToCode(this,"VALUE",Blockly.JavaScript.ORDER_NONE)||"0";return"Studio.wait('block_id_"+this.id+"', ("+a+" * 1000));\n"},a.Blocks.studio_endGame={helpUrl:"",init:function(){this.setHSV(184,1,.74);var b=new a.FieldDropdown(this.VALUES);b.setValue(this.VALUES[0][1]),this.appendDummyInput().appendTitle(b,"VALUE"),this.setInputsInline(!0),this.setPreviousStatement(!0),this.setNextStatement(!0),this.setTooltip(g.endGameTooltip())}},a.Blocks.studio_endGame.VALUES=[[g.endGameWin(),"win"],[g.endGameLose(),"lose"]],E.studio_endGame=function(){return"Studio.endGame('block_id_"+this.id+"','"+this.getTitleValue("VALUE")+"');\n"},a.Blocks.functional_start_setValue={init:function(){var b=g.startSetValue(),c=a.BlockValueType.NONE,d=[{name:"VALUE",type:a.BlockValueType.FUNCTION}];a.FunctionalBlockUtils.initTitledFunctionalBlock(this,b,c,d)}},E.functional_start_setValue=function(){if(!A)throw new Error("must register custom game logic");A.cacheBlock("VALUE",this.getInputTargetBlock("VALUE"))},a.Blocks.functional_start_setVars={init:function(){var b=g.startSetVars(),c=a.BlockValueType.NONE,d=[{name:"title",type:a.BlockValueType.STRING},{name:"subtitle",type:a.BlockValueType.STRING},{name:"background",type:a.BlockValueType.IMAGE},{name:"player",type:a.BlockValueType.IMAGE},{name:"target",type:a.BlockValueType.IMAGE},{name:"danger",type:a.BlockValueType.IMAGE}];a.FunctionalBlockUtils.initTitledFunctionalBlock(this,b,c,d)}},E.functional_start_setVars=function(){},a.Blocks.functional_start_setFuncs={init:function(){this.blockArgs=[{name:"title",type:a.BlockValueType.STRING},{name:"subtitle",type:a.BlockValueType.STRING},{name:"background",type:a.BlockValueType.IMAGE},{name:"target",type:a.BlockValueType.IMAGE},{name:"danger",type:a.BlockValueType.IMAGE},{name:"player",type:a.BlockValueType.IMAGE},{name:"update-target",type:a.BlockValueType.FUNCTION},{name:"update-danger",type:a.BlockValueType.FUNCTION},{name:"update-player",type:a.BlockValueType.FUNCTION},{name:"collide?",type:a.BlockValueType.FUNCTION},{name:"on-screen?",type:a.BlockValueType.FUNCTION}],this.setFunctional(!0,{headerHeight:30}),this.setHSV.apply(this,a.FunctionalTypeColors[a.BlockValueType.NONE]);var b={fixedSize:{height:35}};this.appendDummyInput().appendTitle(new Blockly.FieldLabel("game_funcs",b)).setAlign(Blockly.ALIGN_LEFT);var c=["title, subtitle, background",[this.blockArgs[0],this.blockArgs[1],this.blockArgs[2]],"target, danger, player",[this.blockArgs[3],this.blockArgs[4],this.blockArgs[5]],"update-target, update-danger, update-player",[this.blockArgs[6],this.blockArgs[7],this.blockArgs[8]],"collide?, onscreen?",[this.blockArgs[9],this.blockArgs[10]]];c.forEach(function(b){"string"==typeof b?this.appendDummyInput().appendTitle(new Blockly.FieldLabel(b)):b.forEach(function(b,c){var d=this.appendFunctionalInput(b.name);0!==c&&d.setInline(!0),d.setHSV.apply(d,a.FunctionalTypeColors[b.type]),d.setCheck(b.type),d.setAlign(Blockly.ALIGN_LEFT)},this)},this),this.setFunctionalOutput(!1)}},E.functional_start_setFuncs=function(){if(!A)throw new Error("must register custom game logic");this.blockArgs.forEach(function(a){var b=this.getInputTargetBlock(a.name);b&&A.cacheBlock(a.name,b)},this)},a.Blocks.functional_start_setSpeeds={init:function(){var b="start (player-speed, enemy-speed)",c=a.BlockValueType.NONE,d=[{name:"PLAYER_SPEED",type:"Number"},{name:"ENEMY_SPEED",type:"Number"}];a.FunctionalBlockUtils.initTitledFunctionalBlock(this,b,c,d)}},E.functional_start_setSpeeds=function(){var a=7,b=Blockly.JavaScript.statementToCode(this,"PLAYER_SPEED",!1)||a,c=Blockly.JavaScript.statementToCode(this,"ENEMY_SPEED",!1)||a,d="0",e="1",f="Studio.setSpriteSpeed('block_id_"+this.id+"',"+d+","+b+");\n";return f+="Studio.setSpriteSpeed('block_id_"+this.id+"',"+e+","+c+");\n"},a.Blocks.functional_start_setBackgroundAndSpeeds={init:function(){var b="start (background, player-speed, enemy-speed)",c=a.BlockValueType.NONE,d=[{name:"BACKGROUND",type:a.BlockValueType.STRING},{name:"PLAYER_SPEED",type:"Number"},{name:"ENEMY_SPEED",type:"Number"}];a.FunctionalBlockUtils.initTitledFunctionalBlock(this,b,c,d)}},E.functional_start_setBackgroundAndSpeeds=function(){var a=Blockly.JavaScript.statementToCode(this,"BACKGROUND",!1)||"cave",b=7,c=Blockly.JavaScript.statementToCode(this,"PLAYER_SPEED",!1)||b,d=Blockly.JavaScript.statementToCode(this,"ENEMY_SPEED",!1)||b,e="Studio.setBackground('block_id_"+this.id+"',"+a+");\n";return e+="Studio.setSpriteSpeed('block_id_"+this.id+"',0,"+c+");\n",e+="Studio.setSpriteSpeed('block_id_"+this.id+"',1,"+d+");\n"},h.install(a,E);var K=C.backgroundChoices.slice(1);a.FunctionalBlockUtils.installStringPicker(a,E,{blockName:"functional_background_string_picker",values:K}),a.Blocks.studio_vanishSprite={helpUrl:"",init:function(){this.setHSV(184,1,.74),this.appendValueInput("SPRITE").setCheck(a.BlockValueType.NUMBER).appendTitle(g.vanishActorN({spriteIndex:""})),this.setPreviousStatement(!0),this.setInputsInline(!0),this.setNextStatement(!0),this.setTooltip(g.vanishTooltip())}},E.studio_vanishSprite=function(){var a=s(this);return"Studio.vanish('block_id_"+this.id+"', "+a+");\n"},a.Blocks.functional_sprite_dropdown={helpUrl:"",init:function(){this.setHSV.apply(this,a.FunctionalTypeColors[a.BlockValueType.IMAGE]),this.VALUES=C.spriteChoices;var b=l.map(z,function(a){return[C[a].dropdownThumbnail,a]}),c=new a.FieldImageDropdown(b,C.dropdownThumbnailWidth,C.dropdownThumbnailHeight);this.appendDummyInput().appendTitle(c,"SPRITE_INDEX"),this.setFunctionalOutput(!0)}},E.functional_sprite_dropdown=function(){return a.JavaScript.quote_(this.getTitleValue("SPRITE_INDEX"))},a.Blocks.functional_background_dropdown={helpUrl:"",init:function(){this.setHSV.apply(this,a.FunctionalTypeColors[a.BlockValueType.IMAGE]),this.VALUES=C.backgroundChoicesK1;var b=new a.FieldImageDropdown(C.backgroundChoicesK1,C.dropdownThumbnailWidth,C.dropdownThumbnailHeight);this.appendDummyInput().appendTitle(b,"BACKGROUND"),this.setFunctionalOutput(!0)}},E.functional_background_dropdown=function(){return u({value:this.getTitleValue("BACKGROUND"),ctx:this,returnValue:!0})},a.Blocks.functional_keydown={helpUrl:"",init:function(){a.FunctionalBlockUtils.initTitledFunctionalBlock(this,"keydown?",a.BlockValueType.BOOLEAN,[{name:"ARG1",type:"Number"}])}},E.functional_keydown=function(){var a=Blockly.JavaScript.statementToCode(this,"ARG1",!1)||-1;return"Studio.isKeyDown("+a+");"}}},{"../StudioApp":"/home/ubuntu/staging/apps/build/js/StudioApp.js","../codegen":"/home/ubuntu/staging/apps/build/js/codegen.js","../locale":"/home/ubuntu/staging/apps/build/js/locale.js","../sharedFunctionalBlocks":"/home/ubuntu/staging/apps/build/js/sharedFunctionalBlocks.js","../utils":"/home/ubuntu/staging/apps/build/js/utils.js","./constants":"/home/ubuntu/staging/apps/build/js/studio/constants.js","./locale":"/home/ubuntu/staging/apps/build/js/studio/locale.js","./paramLists":"/home/ubuntu/staging/apps/build/js/studio/paramLists.js"}],"/home/ubuntu/staging/apps/build/js/studio/paramLists.js":[function(a,b,c){"use strict";var d,e,f=a("../StudioApp").singleton,g=a("../utils"),h=g.getLodash();c.initWithSkinAndLevel=function(a,b){d=a,e=b},c.getPlaySoundValues=function(a){var b;if(b=a?["random"]:[],b=b.concat(d.sounds),a)for(var c in d.soundGroups){var f=b.indexOf(c+d.soundGroups[c].minSuffix);-1!=f&&b.splice(f,0,d.soundGroups[c].randomValue)}var g=e.paramRestrictions&&e.paramRestrictions.playSound;return g&&(b=b.filter(function(a){return g[a]})),b},c.playSoundDropdown=function(){var a=g.valueOr(d.soundMetadata,[]);return c.getPlaySoundValues(!0).map(function(b){var c=b.toLowerCase().trim(),d=function(d){var e=$.extend({volume:1},h.find(a,function(a){return a.name.toLowerCase().trim()===c}));f.playAudio(c,e),d(g.quote(b))};return{text:g.quote(b),display:g.quote(b),click:d}})}},{"../StudioApp":"/home/ubuntu/staging/apps/build/js/StudioApp.js","../utils":"/home/ubuntu/staging/apps/build/js/utils.js"}],"/home/ubuntu/staging/apps/build/js/studio/bigGameLogic.js":[function(a,b,c){"use strict";var d=a("./customGameLogic"),e=a("./constants"),f=e.Direction,g=e.Position,h=(a("../codegen"),a("./api"),a("../utils")),i=function(a,b){b=b||{},d.apply(this,arguments),this.playerSpriteIndex=0,this.targetSpriteIndex=1,this.dangerSpriteIndex=2,this.finished=!1,this.staticPlayer=h.valueOr(b.staticPlayer,!1)};i.inherits(d),i.prototype.onTick=function(){if(1===this.studio_.tickCount)return this.onFirstTick_(),void(this.studio_.playerScore=100);if(!this.finished){var a=document.getElementById("titleScreenTitle");if("visible"!==a.getAttribute("visibility")){var b=this.studio_.sprite[this.playerSpriteIndex],c=this.studio_.sprite[this.targetSpriteIndex],d=this.studio_.sprite[this.dangerSpriteIndex];this.updateSpriteX_(this.targetSpriteIndex,this.update_target.bind(this)),this.updateSpriteX_(this.dangerSpriteIndex,this.update_danger.bind(this));for(var e in this.studio_.keyState)"keydown"===this.studio_.keyState[e]&&this.handleUpdatePlayer_(e);for(var f in this.studio_.btnState)this.studio_.btnState[f]&&("leftButton"===f?this.handleUpdatePlayer_(37):"upButton"===f?this.handleUpdatePlayer_(38):"rightButton"===f?this.handleUpdatePlayer_(39):"downButton"===f&&this.handleUpdatePlayer_(40));if(b.visible&&d.visible&&this.collide(b.x,b.y,d.x,d.y)&&(this.studio_.vanishActor({spriteIndex:this.playerSpriteIndex}),setTimeout(function(){this.studio_.setSprite({spriteIndex:this.playerSpriteIndex,value:"visible"})}.bind(this),850),this.studio_.playerScore-=20,this.resetSprite_(d)),b.visible&&c.visible&&this.collide(b.x,b.y,c.x,c.y)&&(this.studio_.playerScore+=10,this.resetSprite_(c)),this.studio_.playerScore<=0){var g=document.getElementById("score");g.setAttribute("visibility","hidden"),this.studio_.showTitleScreen({title:"Game Over",text:"Click Reset to Play Again"});for(var h=0;h<this.studio_.spriteCount;h++)this.studio_.setSprite({spriteIndex:h,value:"hidden"});this.finished=!0}else this.studio_.displayScore()}}},i.prototype.reset=function(){this.finished=!1},i.prototype.onFirstTick_=function(){var a=function(a,b,c){b.setBackground(null,this.getVar_("background")),b.setSpritePosition(null,this.playerSpriteIndex,g.MIDDLECENTER),b.setSprite(null,this.playerSpriteIndex,this.getVar_("player")),b.setSpritePosition(null,this.targetSpriteIndex,g.TOPLEFT),b.setSprite(null,this.targetSpriteIndex,this.getVar_("target")),b.setSpritePosition(null,this.dangerSpriteIndex,g.BOTTOMRIGHT),b.setSprite(null,this.dangerSpriteIndex,this.getVar_("danger")),b.showTitleScreen(null,this.getVar_("title"),this.getVar_("subtitle"))}.bind(this);this.studio_.callApiCode("BigGame.onFirstTick",a)},i.prototype.updateSpriteX_=function(a,b){var c=this.studio_.sprite[a],d=c.x+c.width/2,e=b(d);c.x=e-c.width/2,this.onscreen(e)?c.visible||this.studio_.setSprite({spriteIndex:this.studio_.sprite.indexOf(c),value:"visible"}):c.visible&&this.resetSprite_(c)},i.prototype.handleUpdatePlayer_=function(a){var b=this.studio_.sprite[this.playerSpriteIndex];if(b.visible){var c=b.y+b.height/2,d=this.studio_.MAZE_HEIGHT-c,f=this.update_player(a,d);b.y=this.studio_.MAZE_HEIGHT-f-b.height/2,this.staticPlayer&&(b.dir=e.Direction.NONE)}},i.prototype.resetSprite_=function(a){a.dir===f.EAST?a.x=0-a.width:a.x=this.studio_.MAZE_WIDTH,a.y=Math.floor(Math.random()*(this.studio_.MAZE_HEIGHT-a.height)),this.studio_.setSprite({spriteIndex:this.studio_.sprite.indexOf(a),value:"hidden"})},i.prototype.update_target=function(a){return this.getFunc_("update-target")(a)},i.prototype.update_danger=function(a){return this.getFunc_("update-danger")(a)},i.prototype.update_player=function(a,b){return this.getFunc_("update-player")(a,b)},i.prototype.onscreen=function(a){return this.getFunc_("on-screen?")(a)},i.prototype.collide=function(a,b,c,d){return this.getFunc_("collide?")(a,b,c,d)},b.exports=i},{"../codegen":"/home/ubuntu/staging/apps/build/js/codegen.js","../utils":"/home/ubuntu/staging/apps/build/js/utils.js","./api":"/home/ubuntu/staging/apps/build/js/studio/api.js","./constants":"/home/ubuntu/staging/apps/build/js/studio/constants.js","./customGameLogic":"/home/ubuntu/staging/apps/build/js/studio/customGameLogic.js"}],"/home/ubuntu/staging/apps/build/js/studio/customGameLogic.js":[function(a,b,c){"use strict";var d=a("./constants"),e=(d.Direction,d.Position,a("../codegen")),f=a("./api"),g=function(a){this.studio_=a,this.cached_={}};g.prototype.onTick=function(){throw new Error("should be overridden by child")},g.prototype.reset=function(){},g.prototype.cacheBlock=function(a,b){this.cached_[a]=b},g.prototype.resolveCachedBlock_=function(a){var b="",c=this.cached_[a];if(!c)return b;var d="return "+Blockly.JavaScript.blockToCode(c);return b=e.evalWith(d,{Studio:f,Globals:Studio.Globals})},g.prototype.getVar_=function(a){return this.resolveCachedBlock_(a)},g.prototype.getFunc_=function(a){return this.resolveCachedBlock_(a)||function(){}},b.exports=g},{"../codegen":"/home/ubuntu/staging/apps/build/js/codegen.js","./api":"/home/ubuntu/staging/apps/build/js/studio/api.js","./constants":"/home/ubuntu/staging/apps/build/js/studio/constants.js"}],"/home/ubuntu/staging/apps/build/js/studio/apiJavascript.js":[function(a,b,c){"use strict";a("./constants");c.endGame=function(a){Studio.queueCmd(null,"endGame",{value:a})},c.setBackground=function(a){Studio.queueCmd(null,"setBackground",{value:a})},c.setMap=function(a){Studio.queueCmd(null,"setMap",{value:a})},c.setSprite=function(a,b){Studio.queueCmd(null,"setSprite",{spriteIndex:a,value:b})},c.setSpriteEmotion=function(a,b){Studio.queueCmd(null,"setSpriteEmotion",{spriteIndex:a,value:b})},c.setSpriteSpeed=function(a,b){Studio.queueCmd(null,"setSpriteSpeed",{spriteIndex:a,value:b})},c.setDroid=function(a){Studio.queueCmd(null,"setSprite",{spriteIndex:0,value:a})},c.setDroidSpeed=function(a){Studio.queueCmd(null,"setDroidSpeed",{value:a})},c.setSpriteSize=function(a,b){Studio.queueCmd(null,"setSpriteSize",{spriteIndex:a,value:b})},c.setSpritePosition=function(a,b){Studio.queueCmd(null,"setSpritePosition",{spriteIndex:a,value:b})},c.playSound=function(a){Studio.queueCmd(null,"playSound",{soundName:a})},c.throwProjectile=function(a,b,c){Studio.queueCmd(null,"throwProjectile",{spriteIndex:a,dir:b,className:c})},c.move=function(a,b){Studio.queueCmd(null,"move",{spriteIndex:a,dir:b})},c.moveRight=function(){Studio.queueCmd(null,"moveRight")},c.moveLeft=function(){Studio.queueCmd(null,"moveLeft")},c.moveUp=function(){Studio.queueCmd(null,"moveUp")},c.moveDown=function(){Studio.queueCmd(null,"moveDown")},c.goRight=function(){Studio.queueCmd(null,"moveRight")},c.goLeft=function(){Studio.queueCmd(null,"moveLeft")},c.goUp=function(){Studio.queueCmd(null,"moveUp")},c.goDown=function(){Studio.queueCmd(null,"moveDown")},c.addPoints=function(a){Studio.queueCmd(null,"changeScore",{value:a})},c.removePoints=function(a){Studio.queueCmd(null,"reduceScore",{value:a})},c.changeScore=function(a){Studio.queueCmd(null,"changeScore",{value:a})},c.addCharacter=function(a){Studio.queueCmd(null,"addItem",{className:a})},c.setToChase=function(a){Studio.queueCmd(null,"setItemActivity",{className:a,type:"chase"})},c.setToFlee=function(a){Studio.queueCmd(null,"setItemActivity",{className:a,type:"flee"})},c.setToRoam=function(a){Studio.queueCmd(null,"setItemActivity",{className:a,type:"roam"})},c.setToStop=function(a){Studio.queueCmd(null,"setItemActivity",{className:a,type:"none"})},c.moveFast=function(a,b){Studio.queueCmd(null,"setItemSpeed",{className:a,speed:"fast"})},c.moveNormal=function(a,b){Studio.queueCmd(null,"setItemSpeed",{className:a,speed:"normal"})},c.moveSlow=function(a,b){Studio.queueCmd(null,"setItemSpeed",{className:a,speed:"slow"})},c.showDebugInfo=function(a){Studio.queueCmd(null,"showDebugInfo",{value:a})},c.vanish=function(a){Studio.queueCmd(null,"vanish",{spriteIndex:a})},c.onEvent=function(a,b){Studio.queueCmd(null,"onEvent",{eventName:a,func:b})}},{"./constants":"/home/ubuntu/staging/apps/build/js/studio/constants.js"}],"/home/ubuntu/staging/apps/build/js/studio/api.js":[function(a,b,c){"use strict";var d=a("./constants");c.SpriteSpeed=d.SpriteSpeed,c.SpriteSize=d.SpriteSize;var e=3;c.random=function(a){var b=Math.floor(Math.random()*a.length);return a[b]},c.endGame=function(a,b){Studio.queueCmd(a,"endGame",{value:b})},c.setBackground=function(a,b){Studio.queueCmd(a,"setBackground",{value:b})},c.setMap=function(a,b){Studio.queueCmd(a,"setMap",{value:b})},c.setSprite=function(a,b,c){Studio.queueCmd(a,"setSprite",{spriteIndex:b,value:c})},c.saySprite=function(a,b,c,d){void 0===d&&(d=e),Studio.queueCmd(a,"saySprite",{spriteIndex:b,text:c,seconds:d})},c.showTitleScreen=function(a,b,c){Studio.queueCmd(a,"showTitleScreen",{title:b,text:c})},c.setSpriteEmotion=function(a,b,c){Studio.queueCmd(a,"setSpriteEmotion",{spriteIndex:b,value:c})},c.setSpriteSpeed=function(a,b,c){Studio.queueCmd(a,"setSpriteSpeed",{spriteIndex:b,value:c})},c.setDroid=function(a,b){Studio.queueCmd(a,"setSprite",{spriteIndex:0,value:b})},c.setDroidSpeed=function(a,b){Studio.queueCmd(a,"setDroidSpeed",{value:b})},c.setSpriteSize=function(a,b,c){Studio.queueCmd(a,"setSpriteSize",{spriteIndex:b,value:c})},c.setSpritePosition=function(a,b,c){Studio.queueCmd(a,"setSpritePosition",{spriteIndex:b,value:Number(c)})},c.setSpriteXY=function(a,b,c,d){Studio.queueCmd(a,"setSpriteXY",{spriteIndex:b,x:Number(c),y:Number(d)})},c.playSound=function(a,b){Studio.queueCmd(a,"playSound",{soundName:b})},c.stop=function(a,b){Studio.queueCmd(a,"stop",{spriteIndex:b})},c.throwProjectile=function(a,b,c,d){Studio.queueCmd(a,"throwProjectile",{spriteIndex:b,dir:Number(c),className:String(d)})},c.makeProjectile=function(a,b,c){Studio.queueCmd(a,"makeProjectile",{className:b,action:c})},c.move=function(a,b,c){Studio.queueCmd(a,"move",{spriteIndex:b,dir:Number(c)})},c.moveDistance=function(a,b,c,d){Studio.queueCmd(a,"moveDistance",{spriteIndex:b,dir:c,distance:d})},c.addPoints=function(a,b){Studio.queueCmd(a,"changeScore",{value:b})},c.removePoints=function(a,b){Studio.queueCmd(a,"reduceScore",{value:b})},c.changeScore=function(a,b){Studio.queueCmd(a,"changeScore",{value:b})},c.addCharacter=function(a,b){Studio.queueCmd(a,"addItem",{className:b})},c.setItemActivity=function(a,b,c){Studio.queueCmd(a,"setItemActivity",{className:b,type:c})},c.setItemSpeed=function(a,b,c){Studio.queueCmd(a,"setItemSpeed",{className:b,speed:c})},c.moveFast=function(a,b){Studio.queueCmd(a,"setItemSpeed",{className:b,speed:d.SpriteSpeed.FAST})},c.moveNormal=function(a,b){Studio.queueCmd(a,"setItemSpeed",{className:b,speed:d.SpriteSpeed.SLOW})},c.moveSlow=function(a,b){Studio.queueCmd(a,"setItemSpeed",{className:b,speed:d.SpriteSpeed.VERY_SLOW})},c.showDebugInfo=function(a){Studio.queueCmd(null,"showDebugInfo",{value:a})},c.setScoreText=function(a,b){Studio.queueCmd(a,"setScoreText",{text:b})},c.showCoordinates=function(a){Studio.queueCmd(a,"showCoordinates",{})},c.wait=function(a,b){Studio.queueCmd(a,"wait",{value:b})},c.vanish=function(a,b){Studio.queueCmd(a,"vanish",{spriteIndex:b})},c.onEvent=function(a,b,c){Studio.queueCmd(a,"onEvent",{eventName:String(b),func:c})},c.isKeyDown=function(a){return"keydown"===Studio.keyState[a]}},{"./constants":"/home/ubuntu/staging/apps/build/js/studio/constants.js"}],"/home/ubuntu/staging/apps/build/js/studio/ThreeSliceAudio.js":[function(a,b,c){"use strict";function d(a){f&&console&&console.info&&console.info("Audio: "+a)}var e=a("../utils"),f=!1,g={NONE:"none",BEGIN:"begin",LOOP:"loop",END:"end"},h=function(a,b){b=e.valueOr(b,{}),this.state_=g.NONE,this.audioPlayer_=a,this.beginClipName_=b.begin,this.loopClipName_=b.loop,this.endClipName_=b.end,this.volume_=e.valueOr(b.volume,1)};b.exports=h,h.prototype.on=function(){(this.state_===g.NONE||this.state_===g.END)&&(d("on"),this.enterState_(g.BEGIN))},h.prototype.off=function(){d("off"),(this.state_===g.BEGIN||this.state_===g.LOOP)&&this.enterState_(g.END)},h.prototype.enterState_=function(a){this.exitState_(this.state_),d(this.state_+" -> "+a),this.state_=a;var b=this.whenSoundStopped_.bind(this,a);a===g.BEGIN?this.beginClipName_?this.audioPlayer_.play(this.beginClipName_,{volume:this.volume_,onEnded:b}):this.enterState_(g.LOOP):a===g.LOOP?this.loopClipName_?this.audioPlayer_.play(this.loopClipName_,{volume:this.volume_,loop:!0,onEnded:b}):this.enterState_(g.END):a===g.END&&(this.endClipName_?this.audioPlayer_.play(this.endClipName_,{volume:this.volume_,onEnded:b}):this.enterState_(g.NONE))},h.prototype.exitState_=function(a){a===g.BEGIN&&this.beginClipName_?this.audioPlayer_.stopLoopingAudio(this.beginClipName_):a===g.LOOP&&this.loopClipName_?this.audioPlayer_.stopLoopingAudio(this.loopClipName_):a===g.END&&this.endClipName_&&this.audioPlayer_.stopLoopingAudio(this.endClipName_)},h.prototype.whenSoundStopped_=function(a){d("soundStopped ("+a+")"),a===g.BEGIN&&this.state_===g.BEGIN?this.enterState_(g.LOOP):a===g.END&&this.state_===g.END&&this.enterState_(g.NONE)}},{"../utils":"/home/ubuntu/staging/apps/build/js/utils.js"}],"/home/ubuntu/staging/apps/build/js/studio/Sprite.js":[function(a,b,c){"use strict";var d=a("./collidable"),e=a("./constants"),f=(a("./locale"),a("./spriteActions"),e.Direction),g=e.Emotions,h=(e.NextTurn,a("../utils")),i=(h.getLodash(),a("./StudioAnimation")),j=a("./StudioSpriteSheet"),k=function(a){d.apply(this,arguments),this.renderOffset=a.renderOffset||{x:0,y:0},this.speed=a.speed||e.DEFAULT_SPRITE_SPEED,this.setNormalFrameDuration(a.animationFrameDuration),this.displayDir=f.NONE,this.startFadeTime=null,this.fadeTime=0,this.image=null,this.legacyImage=null,this.animation_=null,this.legacyAnimation_=null,this.useLegacyIdleEmotionAnimations=!1,this.lastDrawPosition={x:0,y:0}};k.inherits(d),b.exports=k,k.prototype.setImage=function(a,b){if(a!==this.image){this.image=a;var c={renderScale:this.renderScale,opacity:this.opacity,loop:this.loop,animationFrameDuration:this.animationFrameDuration,frameWidth:this.drawWidth,frameHeight:this.drawHeight,assetPath:this.image,animations:[{type:"direction",count:b.turns||0,frames:b.walkFrames||b.walk},{type:"idle",count:(b.idleNormal||0)+(b.idleEmotions||0),frames:b.idleFrames||b.walk},{type:"walkingEmotions",count:b.walkingEmotions||0,frames:b.walkFrames||b.walk}],packedSheetFrameCount:b.packedSheetFrameCount,defaultFramesPerAnimation:b.walk,skewAnimations:!0};return this.animation_&&this.animation_.removeElement(),this.image?void(this.animation_=new i($.extend({},c,{spriteSheet:new j(c),animationFrameDuration:this.getAnimationFrameDuration()}))):void(this.animation_=null)}},k.prototype.setLegacyImage=function(a,b){if(a!==this.legacyImage){this.legacyImage=a;var c=1+h.valueOr(b.extraEmotions,0),d=b.normal+b.turns+b.emotions,e={renderScale:this.renderScale,opacity:this.opacity,loop:this.loop,animationFrameDuration:this.animationFrameDuration,frameWidth:this.drawWidth,frameHeight:this.drawHeight,assetPath:this.legacyImage,animations:[{type:"legacyEmotionRow",count:c,frames:d}],defaultFramesPerAnimation:d,horizontalAnimation:!0,skewAnimations:!0};if(this.legacyAnimation_&&this.legacyAnimation_.removeElement(),!this.legacyImage)return void(this.legacyAnimation_=null);this.legacyAnimation_=new i($.extend({},e,{spriteSheet:new j(e),animationFrameDuration:this.getAnimationFrameDuration()}));for(var f,g,k=h.valueOr(b.turns,0),l=h.valueOr(b.holdIdleFrame0Count,1),m=0;c>m;m++){for(g=[],f=0;l>f;f++)g.push({type:"legacyEmotionRow",index:m,frame:0});for(f=1;f<b.normal;f++)g.push({type:"legacyEmotionRow",index:m,frame:f});if(this.legacyAnimation_.createSpecialAnimation("idle",m,g),k>=7){var n=0,o=0;for(7===k&&(this.legacyAnimation_.createSpecialAnimation("direction",n,[{type:"legacyEmotionRow",index:m,frame:0}]),n++);8>n;n++,o++)this.legacyAnimation_.createSpecialAnimation("direction",n,[{type:"legacyEmotionRow",index:m,frame:this.frameCounts.normal+o}])}}if(1===c)for(f=0;f<b.emotions;f++){g=[];for(var p=0;l>p;p++)g.push({type:"legacyEmotionRow",index:0,frame:b.normal+b.turns+f});for(var q=1;q<b.normal;q++)g.push({type:"legacyEmotionRow",index:0,frame:q});this.legacyAnimation_.createSpecialAnimation("idle",f+1,g),this.useLegacyIdleEmotionAnimations=!0}}},k.prototype.getElement=function(){return this.animation_?this.animation_.getElement():null},k.prototype.getLegacyElement=function(){return this.legacyAnimation_?this.legacyAnimation_.getElement():null},k.prototype.getDirectionFrame=function(){var a=this.frameCounts.counterClockwise?e.frameDirTableWalkingWithIdleCounterclockwise:e.frameDirTableWalkingWithIdleClockwise;return a[this.displayDir]},k.prototype.createElement=function(a){this.animation_&&(this.animation_.getElement()||this.animation_.createElement(a),this.visible||this.animation_.hide()),this.legacyAnimation_&&(this.legacyAnimation_.getElement()||this.legacyAnimation_.createElement(a),this.visible||this.legacyAnimation_.hide())},k.prototype.update=function(){Studio.drawDebugRect("spriteCenter",this.x,this.y,3,3)},k.prototype.startFade=function(a){this.startFadeTime=(new Date).getTime(),this.fadeTime=h.valueOr(a,e.DEFAULT_ACTOR_FADE_TIME)},k.prototype.removeElement=function(){this.animation_&&this.animation_.removeElement(),this.legacyAnimation_&&this.legacyAnimation_.removeElement()},k.prototype.getAnimationFrameDuration=function(){return this.dir===f.NONE?this.normalFrameDuration:this.normalFrameDuration*e.DEFAULT_SPRITE_SPEED/this.speed},k.prototype.isFading=function(){return!!this.startFadeTime},k.prototype.hasCompletedFade=function(){var a=(new Date).getTime();return this.startFadeTime&&a>this.startFadeTime+this.fadeTime},k.prototype.display=function(){var a=(new Date).getTime(),b=1;this.startFadeTime&&(b=1-(a-this.startFadeTime)/this.fadeTime,b=Math.max(b,0),this.setOpacity(b),this.hasCompletedFade()&&(this.startFadeTime=null));var c,d,e=!1,h=this.displayDir===f.NONE,i=this.displayDir===f.SOUTH&&this.emotion!==g.NORMAL;h||!this.animation_&&i?(d=this.emotion,c="idle",h&&this.frameCounts.normal?e=!0:this.animation_&&!this.frameCounts.idleNormal&&(d-=1)):i&&this.animation_&&this.animation_.hasType("walkingEmotions")?(d=this.emotion-1,c="walkingEmotions"):(d=this.getDirectionFrame(),c="direction"),this.animation_||(e=!0);var j=this.getCurrentDrawPosition();e?(this.animation_&&this.animation_.hide(),this.legacyAnimation_&&(this.legacyAnimation_.setCurrentAnimation(c,d),this.legacyAnimation_.redrawCenteredAt(j,Studio.tickCount),this.visible?this.legacyAnimation_.show():this.legacyAnimation_.hide())):(this.animation_.setCurrentAnimation(c,d),this.animation_.redrawCenteredAt(j,Studio.tickCount),this.visible?this.animation_.show():this.animation_.hide(),this.legacyAnimation_&&this.legacyAnimation_.hide()),
this.lastDrawPosition=j},k.prototype.getNextPosition=function(){var a=f.getUnitVector(this.dir),b=this.speed;return{x:this.x+b*a.x,y:this.y+b*a.y}},k.prototype.moveToNextPosition=function(){var a=this.getNextPosition();this.x=a.x,this.y=a.y},k.prototype.getCurrentDrawPosition=function(){return{x:this.displayX+this.drawWidth/2+this.renderOffset.x,y:this.displayY+this.drawHeight/2+this.renderOffset.y}},k.prototype.updateAnimationFrameDuration_=function(){this.animation_&&this.animation_.setAnimationFrameDuration(this.getAnimationFrameDuration()),this.legacyAnimation_&&this.legacyAnimation_.setAnimationFrameDuration(this.getAnimationFrameDuration())},k.prototype.setSpeed=function(a){this.speed=a,this.updateAnimationFrameDuration_()},k.prototype.setDirection=function(a){this.dir=a,this.updateAnimationFrameDuration_()},k.prototype.setNormalFrameDuration=function(a){this.normalFrameDuration=a||e.DEFAULT_SPRITE_ANIMATION_FRAME_DURATION,this.updateAnimationFrameDuration_()},k.prototype.setOpacity=function(a){this.animation_&&this.animation_.setOpacity(a),this.legacyAnimation_&&this.legacyAnimation_.setOpacity(a)}},{"../utils":"/home/ubuntu/staging/apps/build/js/utils.js","./StudioAnimation":"/home/ubuntu/staging/apps/build/js/studio/StudioAnimation.js","./StudioSpriteSheet":"/home/ubuntu/staging/apps/build/js/studio/StudioSpriteSheet.js","./collidable":"/home/ubuntu/staging/apps/build/js/studio/collidable.js","./constants":"/home/ubuntu/staging/apps/build/js/studio/constants.js","./locale":"/home/ubuntu/staging/apps/build/js/studio/locale.js","./spriteActions":"/home/ubuntu/staging/apps/build/js/studio/spriteActions.js"}],"/home/ubuntu/staging/apps/build/js/studio/Item.js":[function(a,b,c){"use strict";var d=a("./collidable"),e=a("./constants"),f=(a("./locale"),a("./spriteActions")),g=e.Direction,h=e.NextTurn,i=a("../utils"),j=i.getLodash(),k=a("./StudioAnimation"),l=a("./StudioSpriteSheet"),m=function(a){d.apply(this,arguments),this.height=a.height||50,this.width=a.width||50,this.className=a.className,void 0===Studio.trackedBehavior.createdItems[this.className]&&(Studio.trackedBehavior.createdItems[this.className]=0),Studio.trackedBehavior.createdItems[this.className]++,this.renderOffset=a.renderOffset||{x:0,y:0},this.speed=a.speed||e.DEFAULT_ITEM_SPEED,this.normalSpeed=a.normalSpeed||e.DEFAULT_ITEM_SPEED,this.normalFrameDuration=a.animationFrameDuration||e.DEFAULT_ITEM_ANIMATION_FRAME_DURATION,this.displayDir=g.SOUTH,this.startFadeTime=null,this.fadeTime=e.ITEM_FADE_TIME,this.animation_=new k($.extend({},a,{spriteSheet:new l({assetPath:a.image,defaultFramesPerAnimation:a.frames,frameWidth:this.width,frameHeight:this.height,animations:[{type:"direction",count:8},{type:"idle",count:1}]}),animationFrameDuration:this.getAnimationFrameDuration()}))};m.inherits(d),b.exports=m,m.prototype.getElement=function(){return this.animation_.getElement()},m.prototype.getDirectionFrame=function(){this.dir!==this.displayDir&&void 0!==this.displayDir&&Studio.tickCount&&0===Studio.tickCount%2&&(this.displayDir=h[this.displayDir][this.dir]);var a=this.spritesCounterclockwise?e.frameDirTableWalkingWithIdleCounterclockwise:e.frameDirTableWalkingWithIdleClockwise;return a[this.displayDir]},m.prototype.createElement=function(a){this.animation_.createElement(a)},m.prototype.update=function(){void 0===this.gridX&&(this.gridX=Math.floor(this.x/Studio.SQUARE_SIZE),this.gridY=Math.floor(this.y/Studio.SQUARE_SIZE));var a=!1;if(Studio.drawDebugRect("itemCenter",this.x,this.y,3,3),"watchActor"!==this.activity){if("none"===this.activity)return this.setDirection(g.NONE),this.destGridX=void 0,void(this.destGridY=void 0);void 0!==this.destGridX&&Studio.drawDebugRect("roamGridDest",this.destGridX*Studio.SQUARE_SIZE+Studio.HALF_SQUARE,this.destGridY*Studio.SQUARE_SIZE+Studio.HALF_SQUARE,Studio.SQUARE_SIZE,Studio.SQUARE_SIZE);var b=i.valueOr(this.speed,0);if(void 0!==this.destGridX&&Math.abs(this.x-(this.destGridX*Studio.SQUARE_SIZE+Studio.HALF_SQUARE))<=b&&Math.abs(this.y-(this.destGridY*Studio.SQUARE_SIZE+Studio.HALF_SQUARE))<=b&&(this.gridX=this.destGridX,this.gridY=this.destGridY,a=!0),void 0===this.destGridX||a){for(var c=Studio.sprite[0],d=c.x+c.width/2,e=c.y+c.height/2,f=[],h=60,k=[{row:-1,col:0},{row:1,col:0},{row:0,col:-1},{row:0,col:1}],l=0;l<k.length;l++){var m=this.gridX+k[l].col,n=this.gridY+k[l].row;p={gridX:m,gridY:n},p.score=0,"roam"===this.activity?p.score++:"chase"===this.activity?(n==this.gridY-1&&e<this.y-h?p.score+=2:n==this.gridY+1&&e>this.y+h?p.score+=2:p.score+=1,m==this.gridX-1&&d<this.x-h?p.score++:m==this.gridX+1&&d>this.x+h&&p.score++):"flee"===this.activity&&(p.score=1,n==this.gridY-1&&e>this.y-h?p.score++:n==this.gridY+1&&e<this.y+h&&p.score++,m==this.gridX-1&&d>this.x-h?p.score++:m==this.gridX+1&&d<this.x+h&&p.score++),p.score>0&&Studio.drawDebugRect("roamGridPossibleDest",m*Studio.SQUARE_SIZE+Studio.HALF_SQUARE,n*Studio.SQUARE_SIZE+Studio.HALF_SQUARE,Studio.SQUARE_SIZE,Studio.SQUARE_SIZE),f.push(p)}for(var o=f.length-1;o>=0;o--){var p=f[o],q=p.gridX<0||p.gridX>=Studio.COLS||p.gridY<0||p.gridY>=Studio.ROWS,r=!q&&Studio.getWallValue(p.gridY,p.gridX);(q||r||0===p.score)&&f.splice(o,1)}var s=g.NONE;f.length>0&&(f=j.shuffle(f),f.sort(function(a,b){return b.score-a.score}),this.destGridX=f[0].gridX,this.destGridY=f[0].gridY,this.destGridX>this.gridX&&this.destGridY>this.gridY?s=g.SOUTHEAST:this.destGridX>this.gridX&&this.destGridY<this.gridY?s=g.NORTHEAST:this.destGridX<this.gridX&&this.destGridY>this.gridY?s=g.SOUTHWEST:this.destGridX<this.gridX&&this.destGridY<this.gridY?s=g.NORTHWEST:this.destGridX>this.gridX?s=g.EAST:this.destGridX<this.gridX?s=g.WEST:this.destGridY>this.gridY?s=g.SOUTH:this.destGridY<this.gridY&&(s=g.NORTH)),this.setDirection(s)}}},m.prototype.turnToFaceActor=function(a){var b=Studio.sprite[a];if(b){var c=b.displayX+Studio.HALF_SQUARE,d=b.displayY+Studio.HALF_SQUARE,f=c-this.x,g=d-this.y,h=25;f*f+g*g>h&&(Studio.drawDebugLine("watchActor",this.x,this.y,c,d,"#ffff00"),this.setDirection(e.getClosestDirection(f,g)))}},m.prototype.setActivity=function(a){this.activity=a},m.prototype.beginRemoveElement=function(){this.startFadeTime=(new Date).getTime()},m.prototype.removeElement=function(){this.animation_.removeElement(),Studio.trackedBehavior.removedItemCount++,void 0===Studio.trackedBehavior.removedItems[this.className]&&(Studio.trackedBehavior.removedItems[this.className]=0),Studio.trackedBehavior.removedItems[this.className]++},m.prototype.getAnimationFrameDuration=function(){return this.dir===g.NONE?this.normalFrameDuration:this.normalFrameDuration*this.normalSpeed/this.speed},m.prototype.isFading=function(){return!!this.startFadeTime},m.prototype.hasCompletedFade=function(){var a=(new Date).getTime();return this.startFadeTime&&a>this.startFadeTime+this.fadeTime},m.prototype.display=function(){var a=(new Date).getTime(),b=1;this.startFadeTime&&(b=1-(a-this.startFadeTime)/this.fadeTime,b=Math.max(b,0),this.animation_.setOpacity(b)),"watchActor"===this.activity&&this.turnToFaceActor(Studio.protagonistSpriteIndex||0),this.animation_.setCurrentAnimation("direction",this.getDirectionFrame()),this.animation_.redrawCenteredAt({x:this.x+this.renderOffset.x,y:this.y+this.renderOffset.y},Studio.tickCount)},m.prototype.getNextPosition=function(){var a=g.getUnitVector(this.dir),b=this.speed;return("none"===this.activity||"watchActor"===this.activity)&&(b=0),{x:this.x+b*a.x,y:this.y+b*a.y}},m.prototype.moveToNextPosition=function(){var a=this.getNextPosition();this.x=a.x,this.y=a.y},m.prototype.setSpeed=function(a){this.speed=a,this.animation_.setAnimationFrameDuration(this.getAnimationFrameDuration())},m.prototype.setDirection=function(a){this.dir=a,this.animation_.setAnimationFrameDuration(this.getAnimationFrameDuration())},m.prototype.startCollision=function(a){var b=m.superPrototype.startCollision.call(this,a);if(b&&this.isHazard&&a===(Studio.protagonistSpriteIndex||0)){Studio.trackedBehavior.touchedHazardCount++;var c=Studio.sprite[a];c&&c.addAction(new f.ShakeActor(e.TOUCH_HAZARD_EFFECT_TIME))}return b},m.prototype.setOpacity=function(a){this.animation_.setOpacity(a)}},{"../utils":"/home/ubuntu/staging/apps/build/js/utils.js","./StudioAnimation":"/home/ubuntu/staging/apps/build/js/studio/StudioAnimation.js","./StudioSpriteSheet":"/home/ubuntu/staging/apps/build/js/studio/StudioSpriteSheet.js","./collidable":"/home/ubuntu/staging/apps/build/js/studio/collidable.js","./constants":"/home/ubuntu/staging/apps/build/js/studio/constants.js","./locale":"/home/ubuntu/staging/apps/build/js/studio/locale.js","./spriteActions":"/home/ubuntu/staging/apps/build/js/studio/spriteActions.js"}],"/home/ubuntu/staging/apps/build/js/studio/spriteActions.js":[function(a,b,c){"use strict";function d(a,b){var c=g.NONE;return 0>a?c|=g.WEST:a>0&&(c|=g.EAST),0>b?c|=g.NORTH:b>0&&(c|=g.SOUTH),c}var e=a("../utils"),f=a("./constants"),g=f.Direction;c.GridMove=function(a,b,c){this.towardDeltaX_=a,this.towardDeltaY_=b,this.totalSteps_=c,this.elapsedSteps_=0,this.percentBeforeReverse_=.3},c.GridMove.prototype.update=function(a){0===this.elapsedSteps_&&(this.startX_=a.x,this.startY_=a.y,a.x+=this.towardDeltaX_,a.y+=this.towardDeltaY_);var b=(this.elapsedSteps_+1)/this.totalSteps_;a.displayX=this.startX_+this.towardDeltaX_*b,a.displayY=this.startY_+this.towardDeltaY_*b,a.setDirection(d(this.towardDeltaX_,this.towardDeltaY_)),this.elapsedSteps_++},c.GridMove.prototype.isDone=function(){return this.elapsedSteps_>=this.totalSteps_},c.GridMoveAndCancel=function(a,b,c){this.towardDeltaX_=a,this.towardDeltaY_=b,this.totalSteps_=c,this.elapsedSteps_=0,this.percentBeforeReverse_=.3},c.GridMoveAndCancel.prototype.update=function(a){var b=(this.elapsedSteps_+1)/this.totalSteps_,c=2*this.percentBeforeReverse_*(.5>b?b:1-b);a.displayX=a.x+this.towardDeltaX_*c,a.displayY=a.y+this.towardDeltaY_*c,a.setDirection(d(this.towardDeltaX_,this.towardDeltaY_)),this.elapsedSteps_++},c.GridMoveAndCancel.prototype.isDone=function(){return this.elapsedSteps_>=this.totalSteps_},c.FadeActor=function(a){this.startFadeTime_=null,this.fadeDurationMs_=e.valueOr(a,f.DEFAULT_ACTOR_FADE_TIME)},c.FadeActor.prototype.update=function(a){this.startFadeTime_||(this.startFadeTime_=(new Date).getTime());var b=(new Date).getTime(),c=1-(b-this.startFadeTime_)/this.fadeDurationMs_;c=Math.max(c,0),a.setOpacity(c)},c.FadeActor.prototype.isDone=function(){var a=(new Date).getTime();return this.startFadeTime_&&a>this.startFadeTime_+this.fadeDurationMs_},c.ShakeActor=function(a){this.startShakeTime_=null,this.shakeDurationMs_=e.valueOr(a,f.SHAKE_DEFAULT_DURATION),this.cycleCount_=f.SHAKE_DEFAULT_CYCLES,this.amplitude_=f.SHAKE_DEFAULT_DISTANCE,this.angularFrequency_=2*Math.PI*(this.cycleCount_/this.shakeDurationMs_)},c.ShakeActor.prototype.update=function(a){this.startShakeTime_||(this.startShakeTime_=(new Date).getTime());var b=(new Date).getTime()-this.startShakeTime_,c=this.amplitude_*Math.sin(this.angularFrequency_*b);a.displayX=a.x+c},c.ShakeActor.prototype.isDone=function(){var a=(new Date).getTime();return this.startShakeTime_&&a>this.startShakeTime_+this.shakeDurationMs_}},{"../utils":"/home/ubuntu/staging/apps/build/js/utils.js","./constants":"/home/ubuntu/staging/apps/build/js/studio/constants.js"}],"/home/ubuntu/staging/apps/build/js/studio/locale.js":[function(a,b,c){"use strict";b.exports=window.blockly.studio_locale},{}],"/home/ubuntu/staging/apps/build/js/studio/collidable.js":[function(a,b,c){"use strict";var d=a("../StudioApp").singleton,e=(a("./constants").Direction,a("./constants")),f=(e.SquareType,function(a){this.gridX=void 0,this.gridY=void 0,this.activity="none";for(var b in a)this[b]=a[b];this.visible=this.visible||!0,this.flags=0,this.collidingWith_={},this.frames=this.frames||1,this.actions_=[]});b.exports=f,f.prototype.clearCollisions=function(){this.collidingWith_={}},f.prototype.startCollision=function(a){return this.isCollidingWith(a)?!1:(this.collidingWith_[a]=!0,!0)},f.prototype.endCollision=function(a){this.collidingWith_[a]=!1},f.prototype.isCollidingWith=function(a){return this.collidingWith_[a]===!0},f.prototype.outOfBounds=function(){return this.x<-(this.width/2)||this.x>d.MAZE_WIDTH+this.width/2||this.y<-(this.height/2)||this.y>d.MAZE_HEIGHT+this.height/2},f.prototype.addAction=function(a){this.actions_.push(a)},f.prototype.hasActions=function(){return this.actions_.length>0},f.prototype.updateActions=function(){this.actions_.forEach(function(a){a.update(this)},this);for(var a=this.actions_.length-1;a>=0;a--)this.actions_[a].isDone()&&this.actions_.splice(a,1)}},{"../StudioApp":"/home/ubuntu/staging/apps/build/js/StudioApp.js","./constants":"/home/ubuntu/staging/apps/build/js/studio/constants.js"}],"/home/ubuntu/staging/apps/build/js/studio/constants.js":[function(a,b,c){"use strict";c.SpriteSpeed={VERY_SLOW:2,SLOW:3,LITTLE_SLOW:4,NORMAL:5,LITTLE_FAST:6,FAST:8,VERY_FAST:12},c.SpriteSize={VERY_SMALL:.5,SMALL:.75,NORMAL:1,LARGE:1.5,VERY_LARGE:2},c.Direction={NONE:0,NORTH:1,EAST:2,SOUTH:4,WEST:8,NORTHEAST:3,SOUTHEAST:6,SOUTHWEST:12,NORTHWEST:9};var d=c.Direction;c.ClockwiseDirectionsFromNorth=[d.NORTH,d.NORTHEAST,d.EAST,d.SOUTHEAST,d.SOUTH,d.SOUTHWEST,d.WEST,d.NORTHWEST],c.getClosestDirection=function(a,b){var d=Math.atan2(a,-b),e=Math.PI/4,f=(Math.round(d/e)+8)%8;return c.ClockwiseDirectionsFromNorth[f]};var e={};e[d.SOUTHEAST]=0,e[d.EAST]=1,e[d.NORTHEAST]=2,e[d.NORTH]=3,e[d.NORTHWEST]=4,e[d.WEST]=5,e[d.SOUTHWEST]=6,c.frameDirTable=e;var f={};f[d.NONE]=0,f[d.SOUTH]=0,f[d.SOUTHEAST]=1,f[d.EAST]=2,f[d.NORTHEAST]=3,f[d.NORTH]=4,f[d.NORTHWEST]=5,f[d.WEST]=6,f[d.SOUTHWEST]=7,c.frameDirTableWalking=f;var g={};g[d.NONE]=8,g[d.SOUTH]=0,g[d.SOUTHEAST]=1,g[d.EAST]=2,g[d.NORTHEAST]=3,g[d.NORTH]=4,g[d.NORTHWEST]=5,g[d.WEST]=6,g[d.SOUTHWEST]=7,c.frameDirTableWalkingWithIdleClockwise=g;var h={};h[d.NONE]=8,h[d.SOUTH]=0,h[d.SOUTHEAST]=7,h[d.EAST]=6,h[d.NORTHEAST]=5,h[d.NORTH]=4,h[d.NORTHWEST]=3,h[d.WEST]=2,h[d.SOUTHWEST]=1,c.frameDirTableWalkingWithIdleCounterclockwise=h;var i={};i[d.NONE]={x:0,y:0},i[d.NORTH]={x:0,y:-1},i[d.EAST]={x:1,y:0},i[d.SOUTH]={x:0,y:1},i[d.WEST]={x:-1,y:0},i[d.NORTHEAST]={x:1,y:-1},i[d.SOUTHEAST]={x:1,y:1},i[d.SOUTHWEST]={x:-1,y:1},i[d.NORTHWEST]={x:-1,y:-1},c.Direction.getUnitVector=function(a){return i[a]},c.Position={OUTTOPOUTLEFT:1,OUTTOPLEFT:2,OUTTOPCENTER:3,OUTTOPRIGHT:4,OUTTOPOUTRIGHT:5,TOPOUTLEFT:6,TOPLEFT:7,TOPCENTER:8,TOPRIGHT:9,TOPOUTRIGHT:10,MIDDLEOUTLEFT:11,MIDDLELEFT:12,MIDDLECENTER:13,MIDDLERIGHT:14,MIDDLEOUTRIGHT:15,BOTTOMOUTLEFT:16,BOTTOMLEFT:17,BOTTOMCENTER:18,BOTTOMRIGHT:19,BOTTOMOUTRIGHT:20,OUTBOTTOMOUTLEFT:21,OUTBOTTOMLEFT:22,OUTBOTTOMCENTER:23,OUTBOTTOMRIGHT:24,OUTBOTTOMOUTRIGHT:25},c.NextTurn={},c.NextTurn[d.NORTH]={},c.NextTurn[d.NORTH][d.NORTH]=d.NORTH,c.NextTurn[d.NORTH][d.EAST]=d.NORTHEAST,c.NextTurn[d.NORTH][d.SOUTH]=d.NORTHEAST,c.NextTurn[d.NORTH][d.NONE]=d.NORTHEAST,c.NextTurn[d.NORTH][d.WEST]=d.NORTHWEST,c.NextTurn[d.NORTH][d.NORTHEAST]=d.NORTHEAST,c.NextTurn[d.NORTH][d.SOUTHEAST]=d.NORTHEAST,c.NextTurn[d.NORTH][d.SOUTHWEST]=d.NORTHWEST,c.NextTurn[d.NORTH][d.NORTHWEST]=d.NORTHWEST,c.NextTurn[d.EAST]={},c.NextTurn[d.EAST][d.NORTH]=d.NORTHEAST,c.NextTurn[d.EAST][d.EAST]=d.EAST,c.NextTurn[d.EAST][d.SOUTH]=d.SOUTHEAST,c.NextTurn[d.EAST][d.NONE]=d.SOUTHEAST,c.NextTurn[d.EAST][d.WEST]=d.SOUTHEAST,c.NextTurn[d.EAST][d.NORTHEAST]=d.NORTHEAST,c.NextTurn[d.EAST][d.SOUTHEAST]=d.SOUTHEAST,c.NextTurn[d.EAST][d.SOUTHWEST]=d.SOUTHEAST,c.NextTurn[d.EAST][d.NORTHWEST]=d.NORTHEAST,c.NextTurn[d.SOUTH]={},c.NextTurn[d.SOUTH][d.NORTH]=d.SOUTHEAST,c.NextTurn[d.SOUTH][d.EAST]=d.SOUTHEAST,c.NextTurn[d.SOUTH][d.SOUTH]=d.SOUTH,c.NextTurn[d.SOUTH][d.NONE]=d.NONE,c.NextTurn[d.SOUTH][d.WEST]=d.SOUTHWEST,c.NextTurn[d.SOUTH][d.NORTHEAST]=d.SOUTHEAST,c.NextTurn[d.SOUTH][d.SOUTHEAST]=d.SOUTHEAST,c.NextTurn[d.SOUTH][d.SOUTHWEST]=d.SOUTHWEST,c.NextTurn[d.SOUTH][d.NORTHWEST]=d.SOUTHWEST,c.NextTurn[d.WEST]={},c.NextTurn[d.WEST][d.NORTH]=d.NORTHWEST,c.NextTurn[d.WEST][d.EAST]=d.SOUTHWEST,c.NextTurn[d.WEST][d.SOUTH]=d.SOUTHWEST,c.NextTurn[d.WEST][d.NONE]=d.SOUTHWEST,c.NextTurn[d.WEST][d.WEST]=d.WEST,c.NextTurn[d.WEST][d.NORTHEAST]=d.NORTHWEST,c.NextTurn[d.WEST][d.SOUTHEAST]=d.SOUTHWEST,c.NextTurn[d.WEST][d.SOUTHWEST]=d.SOUTHWEST,c.NextTurn[d.WEST][d.NORTHWEST]=d.NORTHWEST,c.NextTurn[d.NORTHEAST]={},c.NextTurn[d.NORTHEAST][d.NORTH]=d.NORTH,c.NextTurn[d.NORTHEAST][d.EAST]=d.EAST,c.NextTurn[d.NORTHEAST][d.SOUTH]=d.EAST,c.NextTurn[d.NORTHEAST][d.NONE]=d.EAST,c.NextTurn[d.NORTHEAST][d.WEST]=d.NORTH,c.NextTurn[d.NORTHEAST][d.NORTHEAST]=d.NORTHEAST,c.NextTurn[d.NORTHEAST][d.SOUTHEAST]=d.EAST,c.NextTurn[d.NORTHEAST][d.SOUTHWEST]=d.EAST,c.NextTurn[d.NORTHEAST][d.NORTHWEST]=d.NORTH,c.NextTurn[d.SOUTHEAST]={},c.NextTurn[d.SOUTHEAST][d.NORTH]=d.EAST,c.NextTurn[d.SOUTHEAST][d.EAST]=d.EAST,c.NextTurn[d.SOUTHEAST][d.SOUTH]=d.SOUTH,c.NextTurn[d.SOUTHEAST][d.NONE]=d.SOUTH,c.NextTurn[d.SOUTHEAST][d.WEST]=d.SOUTH,c.NextTurn[d.SOUTHEAST][d.NORTHEAST]=d.EAST,c.NextTurn[d.SOUTHEAST][d.SOUTHEAST]=d.SOUTHEAST,c.NextTurn[d.SOUTHEAST][d.SOUTHWEST]=d.SOUTH,c.NextTurn[d.SOUTHEAST][d.NORTHWEST]=d.SOUTH,c.NextTurn[d.SOUTHWEST]={},c.NextTurn[d.SOUTHWEST][d.NORTH]=d.WEST,c.NextTurn[d.SOUTHWEST][d.EAST]=d.SOUTH,c.NextTurn[d.SOUTHWEST][d.SOUTH]=d.SOUTH,c.NextTurn[d.SOUTHWEST][d.NONE]=d.SOUTH,c.NextTurn[d.SOUTHWEST][d.WEST]=d.WEST,c.NextTurn[d.SOUTHWEST][d.NORTHEAST]=d.SOUTH,c.NextTurn[d.SOUTHWEST][d.SOUTHEAST]=d.SOUTH,c.NextTurn[d.SOUTHWEST][d.SOUTHWEST]=d.SOUTHWEST,c.NextTurn[d.SOUTHWEST][d.NORTHWEST]=d.WEST,c.NextTurn[d.NORTHWEST]={},c.NextTurn[d.NORTHWEST][d.NORTH]=d.NORTH,c.NextTurn[d.NORTHWEST][d.EAST]=d.NORTH,c.NextTurn[d.NORTHWEST][d.SOUTH]=d.WEST,c.NextTurn[d.NORTHWEST][d.NONE]=d.WEST,c.NextTurn[d.NORTHWEST][d.WEST]=d.WEST,c.NextTurn[d.NORTHWEST][d.NORTHEAST]=d.NORTH,c.NextTurn[d.NORTHWEST][d.SOUTHEAST]=d.WEST,c.NextTurn[d.NORTHWEST][d.SOUTHWEST]=d.WEST,c.NextTurn[d.NORTHWEST][d.NORTHWEST]=d.NORTHWEST,c.NextTurn[d.NONE]={},c.NextTurn[d.NONE][d.NORTH]=d.SOUTHEAST,c.NextTurn[d.NONE][d.EAST]=d.SOUTHEAST,c.NextTurn[d.NONE][d.SOUTH]=d.SOUTH,c.NextTurn[d.NONE][d.NONE]=d.NONE,c.NextTurn[d.NONE][d.WEST]=d.SOUTHWEST,c.NextTurn[d.NONE][d.NORTHEAST]=d.SOUTHEAST,c.NextTurn[d.NONE][d.SOUTHEAST]=d.SOUTHEAST,c.NextTurn[d.NONE][d.SOUTHWEST]=d.SOUTHWEST,c.NextTurn[d.NONE][d.NORTHWEST]=d.SOUTHWEST,c.Emotions={NORMAL:0,HAPPY:1,ANGRY:2,SAD:3},c.FINISH_COLLIDE_DISTANCE_SCALING=.75,c.SPRITE_COLLIDE_DISTANCE_SCALING=.9,c.DEFAULT_SPRITE_SPEED=c.SpriteSpeed.NORMAL,c.DEFAULT_SPRITE_SIZE=1,c.DEFAULT_SPRITE_ANIMATION_FRAME_DURATION=6,c.DEFAULT_PROJECTILE_SPEED=c.SpriteSpeed.SLOW,c.DEFAULT_PROJECTILE_ANIMATION_FRAME_DURATION=1.5,c.DEFAULT_ITEM_SPEED=c.SpriteSpeed.SLOW,c.DEFAULT_ITEM_ANIMATION_FRAME_DURATION=1.5,c.SquareType={OPEN:0,SPRITEFINISH:1,NOT_USED_2:2,WALL:4,NOT_USED_8:8,SPRITESTART:16,ITEM_CLASS_0:32,ITEM_CLASS_1:64,ITEM_CLASS_2:128,ITEM_CLASS_3:256,ITEM_CLASS_4:512,ITEM_CLASS_5:1024,ITEM_CLASS_6:2048,ITEM_CLASS_7:4096,NOT_USED_8K:8192,NOT_USED_16K:16384,NOT_USED_32K:32768},c.SquareItemClassMask=c.SquareType.ITEM_CLASS_0|c.SquareType.ITEM_CLASS_1|c.SquareType.ITEM_CLASS_2|c.SquareType.ITEM_CLASS_3|c.SquareType.ITEM_CLASS_4|c.SquareType.ITEM_CLASS_5|c.SquareType.ITEM_CLASS_6|c.SquareType.ITEM_CLASS_7,c.SquareItemClassShift=5,c.squareHasItemClass=function(a,b){var d=(b&c.SquareItemClassMask)>>>c.SquareItemClassShift;return Math.pow(2,a)&d},c.WallType={NORMAL_SIZE:0,DOUBLE_SIZE:1,JUMBO_SIZE:2},c.WallTypeMask=251658240,c.WallCoordRowMask=15728640,c.WallCoordColMask=983040,c.WallCoordsMask=c.WallTypeMask|c.WallCoordRowMask|c.WallCoordColMask,c.WallCoordsShift=16,c.WallCoordColShift=c.WallCoordsShift,c.WallCoordRowShift=c.WallCoordsShift+4,c.WallTypeShift=c.WallCoordsShift+8,c.WallCoordMax=16,c.WallRandomCoordMax=2,c.WallAnyMask=c.WallCoordsMask|c.SquareType.WALL,c.floatingScoreChangeOpacity=-.025,c.floatingScoreChangeY=-1,c.RANDOM_VALUE="random",c.HIDDEN_VALUE='"hidden"',c.CLICK_VALUE='"click"',c.VISIBLE_VALUE='"visible"',c.IDLE_TICKS_BEFORE_FACE_SOUTH=4,c.DEFAULT_ANIMATION_RATE=20,c.GOAL_FADE_TIME=200,c.ITEM_FADE_TIME=200,c.DEFAULT_ACTOR_FADE_TIME=1e3,c.TOUCH_HAZARD_EFFECT_TIME=1500,c.SHAKE_DEFAULT_DURATION=1e3,c.SHAKE_DEFAULT_CYCLES=6,c.SHAKE_DEFAULT_DISTANCE=5,c.MAX_NUM_CLOUDS=2,c.CLOUD_SIZE=300,c.CLOUD_OPACITY=.7,c.SOUND_THROTTLE_TIME=200,c.TOUCH_OBSTACLE_THROTTLE_TIME=330},{}],"/home/ubuntu/staging/apps/build/js/studio/StudioSpriteSheet.js":[function(a,b,c){"use strict";var d=a("../utils"),e=b.exports=function(a){this.animations=a.animations||[],this.frameWidth=a.frameWidth,this.frameHeight=a.frameHeight,this.assetPath=a.assetPath,this.defaultFramesPerAnimation=a.defaultFramesPerAnimation||1,this.packedSheetFrameCount=a.packedSheetFrameCount,this.animationOffsets={},this.animationFrameCounts={};for(var b=0,c=0,e=0;e<this.animations.length;e++){this.animationOffsets[this.animations[e].type]=this.packedSheetFrameCount?b:c,c+=this.animations[e].count;var f=d.valueOr(this.animations[e].frames,this.defaultFramesPerAnimation);this.animationFrameCounts[this.animations[e].type]=f,b+=f*this.animations[e].count}if(this.totalAnimations=d.valueOr(a.totalAnimations,c),this.totalFrames=b||this.totalAnimations*this.defaultFramesPerAnimation,this.horizontalAnimation=d.valueOr(a.horizontalAnimation,!1),this.packedSheetFrameCount){var g=Math.ceil(this.totalFrames/this.packedSheetFrameCount),h=Math.ceil(this.totalFrames/g);this.columnCount=this.horizontalAnimation?h:g,this.rowCount=this.horizontalAnimation?g:h}else this.rowCount=this.horizontalAnimation?this.totalAnimations:this.defaultFramesPerAnimation,this.columnCount=this.horizontalAnimation?this.defaultFramesPerAnimation:this.totalAnimations};e.prototype.assetWidth=function(){return this.frameWidth*this.columnCount},e.prototype.assetHeight=function(){return this.frameHeight*this.rowCount},e.prototype.getAnimationFrameCount=function(a){return d.valueOr(this.animationFrameCounts[a],this.defaultFramesPerAnimation)},e.prototype.getFrame=function(a,b,c){var d,e;if(this.packedSheetFrameCount){var f=this.animationOffsets[a]+this.animationFrameCounts[a]*b;f+=c,this.horizontalAnimation?(d=this.frameWidth*(f%this.columnCount),e=this.frameHeight*Math.floor(f/this.columnCount)):(d=this.frameWidth*Math.floor(f/this.rowCount),e=this.frameHeight*(f%this.rowCount))}else a&&(b+=this.animationOffsets[a]),d=this.frameWidth*(this.horizontalAnimation?c:b),e=this.frameHeight*(this.horizontalAnimation?b:c);return{x:d,y:e,width:this.frameWidth,height:this.frameHeight,top:e,left:d,right:d+this.frameWidth,bottom:e+this.frameHeight}}},{"../utils":"/home/ubuntu/staging/apps/build/js/utils.js"}],"/home/ubuntu/staging/apps/build/js/studio/StudioAnimation.js":[function(a,b,c){"use strict";var d=a("../utils"),e=a("../constants").SVG_NS,f=0,g=b.exports=function(a){this.spriteSheet_=a.spriteSheet,this.renderScale_=d.valueOr(a.renderScale,1),this.opacity_=d.valueOr(a.opacity,1),this.currentAnimationType_=0,this.specialAnimations_={},this.currentAnimationIndex_=0,this.loop_=d.valueOr(a.loop,!1),this.skewAnimations_=d.valueOr(a.skewAnimations,!1),this.element_=null,this.clipPath_=null,this.animationFrameDuration_=a.animationFrameDuration||1};g.__resetIds=function(){f=0},g.prototype.getElement=function(){return this.element_},g.prototype.createElement=function(a){this.animId=f++,this.clipPath_=document.createElementNS(e,"clipPath");var b="studioanimation_clippath_"+this.animId;this.clipPath_.setAttribute("id",b);var c=document.createElementNS(e,"rect");c.setAttribute("width",this.spriteSheet_.frameWidth*this.renderScale_),c.setAttribute("height",this.spriteSheet_.frameHeight*this.renderScale_),this.clipPath_.appendChild(c),a.appendChild(this.clipPath_);var d="studioanimation_"+this.animId;this.element_=document.createElementNS(e,"image"),this.element_.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",this.spriteSheet_.assetPath),this.element_.setAttribute("id",d),this.element_.setAttribute("height",this.spriteSheet_.assetHeight()*this.renderScale_),this.element_.setAttribute("width",this.spriteSheet_.assetWidth()*this.renderScale_),a.appendChild(this.element_),this.element_.setAttribute("clip-path","url(#"+b+")")},g.prototype.removeElement=function(){this.element_&&(this.element_.parentNode.removeChild(this.element_),this.element_=null),this.clipPath_&&(this.clipPath_.parentNode.removeChild(this.clipPath_),this.clipPath_=null)},g.prototype.hasType=function(a){return!!this.specialAnimations_[a]||!!this.spriteSheet_.animationFrameCounts[a]},g.prototype.getAnimationFrameCount=function(){var a=this.specialAnimations_[this.currentAnimationType_];return a?a[this.currentAnimationIndex_].length:this.spriteSheet_.getAnimationFrameCount(this.currentAnimationType_)},g.prototype.getFrame=function(a){var b=this.specialAnimations_[this.currentAnimationType_];return b?b[this.currentAnimationIndex_][a]:this.spriteSheet_.getFrame(this.currentAnimationType_,this.currentAnimationIndex_,a)},g.prototype.redrawCenteredAt=function(a,b){var c=b;this.skewAnimations_&&(c=b+this.animId*(this.animationFrameDuration_+1));var d=Math.floor(c/this.animationFrameDuration_),e=this.getAnimationFrameCount();this.loop_?d%=e:d=Math.min(d,e-1);var f=this.getFrame(d),g=this.renderScale_,h={x:a.x-f.width/2*g,y:a.y-f.height/2*(2*g-1)};this.element_.setAttribute("x",h.x-f.left*g),this.element_.setAttribute("y",h.y-f.top*g),this.element_.setAttribute("opacity",this.opacity_);var i=this.clipPath_.childNodes[0];i.setAttribute("x",h.x),i.setAttribute("y",h.y)},g.prototype.setCurrentAnimation=function(a,b){this.currentAnimationType_=a,this.currentAnimationIndex_=b},g.prototype.createSpecialAnimation=function(a,b,c){this.specialAnimations_[a]||(this.specialAnimations_[a]=[]);for(var d=[],e=0;e<c.length;e++)d.push(this.spriteSheet_.getFrame(c[e].type,c[e].index,c[e].frame));this.specialAnimations_[a][b]=d},g.prototype.setAnimationFrameDuration=function(a){this.animationFrameDuration_=a},g.prototype.setOpacity=function(a){this.opacity_=a},g.prototype.hide=function(){this.element_.setAttribute("visibility","hidden")},g.prototype.show=function(){this.element_.setAttribute("visibility","visible")}},{"../constants":"/home/ubuntu/staging/apps/build/js/constants.js","../utils":"/home/ubuntu/staging/apps/build/js/utils.js"}],"/home/ubuntu/staging/apps/build/js/studio/ImageFilterFactory.js":[function(a,b,c){"use strict";var d=a("./GlowFilter"),e=a("./PulseFilter"),f=a("./ShineFilter");c.makeFilterOfType=function(a,b){return"pulse"===a?new e(b):"shine"===a?new f(b):"glow"===a?new d(b):null}},{"./GlowFilter":"/home/ubuntu/staging/apps/build/js/studio/GlowFilter.js","./PulseFilter":"/home/ubuntu/staging/apps/build/js/studio/PulseFilter.js","./ShineFilter":"/home/ubuntu/staging/apps/build/js/studio/ShineFilter.js"}],"/home/ubuntu/staging/apps/build/js/studio/ShineFilter.js":[function(a,b,c){"use strict";a("../utils");var d=a("../constants").SVG_NS,e=a("./ImageFilter"),f=200,g=function(a){e.call(this,a),this.fePointLight_=null,this.curve_=e.makeRepeatingOneThirdLinearInterpolation(2e3,-f,Studio.MAZE_WIDTH+f)};g.inherits(e),b.exports=g,g.prototype.createFilterSteps_=function(){var a=document.createElementNS(d,"feGaussianBlur"),b=this.id_+"-blur";a.setAttribute("stdDeviation",6),a.setAttribute("result",b);var c=document.createElementNS(d,"feSpecularLighting"),e=this.id_+"-specular";c.setAttribute("in",b),c.setAttribute("specularExponent",60),c.setAttribute("lighting-color","white"),c.setAttribute("result",e),this.fePointLight_=document.createElementNS(d,"fePointLight"),this.fePointLight_.setAttribute("x",0),this.fePointLight_.setAttribute("y",0),this.fePointLight_.setAttribute("z",f),c.appendChild(this.fePointLight_);var g=document.createElementNS(d,"feComposite"),h=e+"-masked";g.setAttribute("in",e),g.setAttribute("operator","in"),g.setAttribute("in2","SourceAlpha"),g.setAttribute("result",h);var i=document.createElementNS(d,"feComposite");return i.setAttribute("in",h),i.setAttribute("operator","over"),i.setAttribute("in2","SourceGraphic"),[a,c,g,i]},g.prototype.update=function(a){if(this.fePointLight_){var b=this.curve_(a);this.fePointLight_.setAttribute("x",b),this.fePointLight_.setAttribute("y",b)}}},{"../constants":"/home/ubuntu/staging/apps/build/js/constants.js","../utils":"/home/ubuntu/staging/apps/build/js/utils.js","./ImageFilter":"/home/ubuntu/staging/apps/build/js/studio/ImageFilter.js"}],"/home/ubuntu/staging/apps/build/js/studio/PulseFilter.js":[function(a,b,c){"use strict";a("../utils");var d=a("../constants").SVG_NS,e=a("./ImageFilter"),f=function(a){e.call(this,a),this.feFuncR_=null,this.feFuncG_=null,this.feFuncB_=null,this.curve_=e.makeBellCurveOscillation(2e3,2,0,.5)};f.inherits(e),b.exports=f,f.prototype.createFilterSteps_=function(){var a=document.createElementNS(d,"feComponentTransfer");return this.feFuncR_=document.createElementNS(d,"feFuncR"),this.feFuncG_=document.createElementNS(d,"feFuncG"),this.feFuncB_=document.createElementNS(d,"feFuncB"),[this.feFuncR_,this.feFuncG_,this.feFuncB_].forEach(function(b){b.setAttribute("type","linear"),b.setAttribute("slope","1"),b.setAttribute("intercept","0"),a.appendChild(b)}),[a]},f.prototype.update=function(a){var b=this.curve_(a);[this.feFuncR_,this.feFuncG_,this.feFuncB_].forEach(function(a){a&&a.setAttribute("intercept",b)})}},{"../constants":"/home/ubuntu/staging/apps/build/js/constants.js","../utils":"/home/ubuntu/staging/apps/build/js/utils.js","./ImageFilter":"/home/ubuntu/staging/apps/build/js/studio/ImageFilter.js"}],"/home/ubuntu/staging/apps/build/js/studio/GlowFilter.js":[function(a,b,c){"use strict";a("../utils");var d=a("../constants").SVG_NS,e=a("./ImageFilter"),f=function(a){e.call(this,a),this.feCompositeLayers_=null,this.curve_=e.makeBellCurveOscillation(3e3,3,.1,1)};f.inherits(e),b.exports=f,f.prototype.createFilterSteps_=function(){var a=document.createElementNS(d,"feFlood"),b=this.id_+"-flood-white";a.setAttribute("flood-color","white"),a.setAttribute("result",b);var c=document.createElementNS(d,"feMorphology"),e=this.id_+"-morphology";c.setAttribute("in","SourceAlpha"),c.setAttribute("operator","dilate"),c.setAttribute("radius",2),c.setAttribute("result",e);var f=document.createElementNS(d,"feComposite"),g=this.id_+"-silhouette";f.setAttribute("in",b),f.setAttribute("operator","in"),f.setAttribute("in2",e),f.setAttribute("result",g);var h=document.createElementNS(d,"feGaussianBlur"),i=this.id_+"-blur";h.setAttribute("in",g),h.setAttribute("stdDeviation",1),h.setAttribute("result",i);var j=document.createElementNS(d,"feComposite"),k=this.id_+"-masked-glow";j.setAttribute("in",i),j.setAttribute("operator","out"),j.setAttribute("in2","SourceAlpha"),j.setAttribute("result",k);var l=document.createElementNS(d,"feComposite");return l.setAttribute("in","SourceGraphic"),l.setAttribute("operator","arithmetic"),l.setAttribute("in2",k),l.setAttribute("k1",0),l.setAttribute("k2",1),l.setAttribute("k3",0),l.setAttribute("k4",0),this.feCompositeLayers_=l,[a,c,f,h,j,l]},f.prototype.update=function(a){this.feCompositeLayers_&&this.feCompositeLayers_.setAttribute("k3",this.curve_(a))}},{"../constants":"/home/ubuntu/staging/apps/build/js/constants.js","../utils":"/home/ubuntu/staging/apps/build/js/utils.js","./ImageFilter":"/home/ubuntu/staging/apps/build/js/studio/ImageFilter.js"}],"/home/ubuntu/staging/apps/build/js/studio/ImageFilter.js":[function(a,b,c){"use strict";var d=a("../constants").SVG_NS,e=a("../utils"),f=0,g=function(a){this.svg_=a,this.id_="image-filter-"+f++,this.applyCount_=0,this.intervalId_=null};b.exports=g,g.prototype.applyTo=function(a){this.checkBrowserSupport_()&&(0===this.applyCount_&&this.createInDom_(),a.setAttribute("filter",'url("#'+this.id_+'")'),this.applyCount_++)},g.prototype.removeFrom=function(a){var b=new RegExp("url\\([\"']?#"+this.id_+"[\"']?\\)","i");b.test(a.getAttribute("filter"))&&(a.removeAttribute("filter"),this.applyCount_--),0===this.applyCount_&&this.removeFromDom_()},g.prototype.update=function(a){},g.prototype.createInDom_=function(){var a=document.getElementById(this.id_);if(!a){a=document.createElementNS(d,"filter"),
a.setAttribute("id",this.id_);var b=this.createFilterSteps_();b.forEach(function(b){a.appendChild(b)});var c=this.getDefsNode_();c.appendChild(a),this.intervalId_||(this.intervalId_=window.setInterval(function(){this.update((new Date).getTime())}.bind(this),1e3/30))}},g.prototype.removeFromDom_=function(){this.intervalId_&&(window.clearInterval(this.intervalId_),this.intervalId_=null);var a=document.getElementById(this.id_);a&&a.parentNode.removeChild(a)},g.prototype.createFilterSteps_=function(){return[]},g.prototype.getDefsNode_=function(){var a=this.svg_.querySelector("defs");return a||(a=document.createElementNS(d,"defs"),this.svg_.appendChild(a)),a},g.prototype.checkBrowserSupport_=function(){return-1!==navigator.userAgent.indexOf("Safari")&&-1===navigator.userAgent.indexOf("Chrome")?!1:"undefined"!=typeof window.SVGFEColorMatrixElement&&2===SVGFEColorMatrixElement.SVG_FECOLORMATRIX_TYPE_SATURATE},g.makeBellCurveOscillation=function(a,b,c,d){b=e.valueOr(b,2),c=e.valueOr(c,0),d=e.valueOr(d,1);var f=d-c,g=f*Math.pow(2/a,b),h=a/2;return function(d){return c+g*Math.abs(Math.pow(d%a-h,b))}},g.makeRepeatingOneThirdLinearInterpolation=function(a,b,c){b=e.valueOr(b,0),c=e.valueOr(c,1);var d=3*(c-b)/a,f=2*b-c;return function(e){return Math.min(c,Math.max(b,d*(e%a)+f))}}},{"../constants":"/home/ubuntu/staging/apps/build/js/constants.js","../utils":"/home/ubuntu/staging/apps/build/js/utils.js"}]},{},["/home/ubuntu/staging/apps/build/js/studio/main.js"]);