require=function a(b,c,d){function e(g,h){if(!c[g]){if(!b[g]){var i="function"==typeof require&&require;if(!h&&i)return i(g,!0);if(f)return f(g,!0);var j=new Error("Cannot find module '"+g+"'");throw j.code="MODULE_NOT_FOUND",j}var k=c[g]={exports:{}};b[g][0].call(k.exports,function(a){var c=b[g][1][a];return e(c?c:a)},k,k.exports,a,b,c,d)}return c[g].exports}for(var f="function"==typeof require&&require,g=0;g<d.length;g++)e(d[g]);return e}({138:[function(a){(function(b){var c=a("../appMain");window.Flappy=a("./flappy"),"undefined"!=typeof b&&(b.Flappy=window.Flappy);var d=a("./blocks"),e=a("./levels"),f=a("./skins");window.flappyMain=function(a){a.skinsModule=f,a.blocksModule=d,c(window.Flappy,e,a)}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"../appMain":9,"./blocks":132,"./flappy":135,"./levels":136,"./skins":139}],139:[function(a,b,c){var d=a("../skins"),e={flappy:{}};c.load=function(a,b){var c=d.load(a,b),f=e[c.id];return c.scifi={background:c.assetUrl("background_scifi.png"),avatar:c.assetUrl("avatar_scifi.png"),obstacle_bottom:c.assetUrl("obstacle_bottom_scifi.png"),obstacle_bottom_thumb:c.assetUrl("obstacle_bottom_scifi_thumb.png"),obstacle_top:c.assetUrl("obstacle_top_scifi.png"),ground:c.assetUrl("ground_scifi.png"),ground_thumb:c.assetUrl("ground_scifi_thumb.png")},c.underwater={background:c.assetUrl("background_underwater.png"),avatar:c.assetUrl("avatar_underwater.png"),obstacle_bottom:c.assetUrl("obstacle_bottom_underwater.png"),obstacle_bottom_thumb:c.assetUrl("obstacle_bottom_underwater_thumb.png"),obstacle_top:c.assetUrl("obstacle_top_underwater.png"),ground:c.assetUrl("ground_underwater.png"),ground_thumb:c.assetUrl("ground_underwater_thumb.png")},c.cave={background:c.assetUrl("background_cave.png"),avatar:c.assetUrl("avatar_cave.png"),obstacle_bottom:c.assetUrl("obstacle_bottom_cave.png"),obstacle_bottom_thumb:c.assetUrl("obstacle_bottom_cave_thumb.png"),obstacle_top:c.assetUrl("obstacle_top_cave.png"),ground:c.assetUrl("ground_cave.png"),ground_thumb:c.assetUrl("ground_cave_thumb.png")},c.santa={background:c.assetUrl("background_santa.png"),avatar:c.assetUrl("santa.png"),obstacle_bottom:c.assetUrl("obstacle_bottom_santa.png"),obstacle_bottom_thumb:c.assetUrl("obstacle_bottom_santa_thumb.png"),obstacle_top:c.assetUrl("obstacle_top_santa.png"),ground:c.assetUrl("ground_santa.png"),ground_thumb:c.assetUrl("ground_santa_thumb.png")},c.night={background:c.assetUrl("background_night.png")},c.redbird={avatar:c.assetUrl("avatar_redbird.png")},c.laser={obstacle_bottom:c.assetUrl("obstacle_bottom_laser.png"),obstacle_bottom_thumb:c.assetUrl("obstacle_bottom_laser_thumb.png"),obstacle_top:c.assetUrl("obstacle_top_laser.png")},c.lava={ground:c.assetUrl("ground_lava.png"),ground_thumb:c.assetUrl("ground_lava_thumb.png")},c.shark={avatar:c.assetUrl("shark.png")},c.easter={avatar:c.assetUrl("easterbunny.png")},c.batman={avatar:c.assetUrl("batman.png")},c.submarine={avatar:c.assetUrl("submarine.png")},c.unicorn={avatar:c.assetUrl("unicorn.png")},c.fairy={avatar:c.assetUrl("fairy.png")},c.superman={avatar:c.assetUrl("superman.png")},c.turkey={avatar:c.assetUrl("turkey.png")},c.ground=c.assetUrl("ground.png"),c.ground_thumb=c.assetUrl("ground_thumb.png"),c.obstacle_top=c.assetUrl("obstacle_top.png"),c.obstacle_bottom=c.assetUrl("obstacle_bottom.png"),c.obstacle_bottom_thumb=c.assetUrl("obstacle_bottom_thumb.png"),c.instructions=c.assetUrl("instructions.png"),c.clickrun=c.assetUrl("clickrun.png"),c.getready=c.assetUrl("getready.png"),c.gameover=c.assetUrl("gameover.png"),c.flapIcon=c.assetUrl("flap-bird.png"),c.crashIcon=c.assetUrl("when-crash.png"),c.collideObstacleIcon=c.assetUrl("when-obstacle.png"),c.collideGroundIcon=c.assetUrl("when-crash.png"),c.enterObstacleIcon=c.assetUrl("when-pass.png"),c.tiles=c.assetUrl("tiles.png"),c.goal=c.assetUrl("goal.png"),c.goalSuccess=c.assetUrl("goal_success.png"),c.obstacle=c.assetUrl("obstacle.png"),c.obstacleScale=f.obstacleScale||1,c.largerObstacleAnimationTiles=c.assetUrl(f.largerObstacleAnimationTiles),c.hittingWallAnimation=c.assetUrl(f.hittingWallAnimation),c.approachingGoalAnimation=c.assetUrl(f.approachingGoalAnimation),c.obstacleSound=[c.assetUrl("obstacle.mp3"),c.assetUrl("obstacle.ogg")],c.wallSound=[c.assetUrl("wall.mp3"),c.assetUrl("wall.ogg")],c.winGoalSound=[c.assetUrl("win_goal.mp3"),c.assetUrl("win_goal.ogg")],c.wall0Sound=[c.assetUrl("wall0.mp3"),c.assetUrl("wall0.ogg")],c.dieSound=[c.assetUrl("sfx_die.mp3"),c.assetUrl("sfx_die.ogg")],c.hitSound=[c.assetUrl("sfx_hit.mp3"),c.assetUrl("sfx_hit.ogg")],c.pointSound=[c.assetUrl("sfx_point.mp3"),c.assetUrl("sfx_point.ogg")],c.swooshingSound=[c.assetUrl("sfx_swooshing.mp3"),c.assetUrl("sfx_swooshing.ogg")],c.wingSound=[c.assetUrl("sfx_wing.mp3"),c.assetUrl("sfx_wing.ogg")],c.jetSound=[c.assetUrl("jet.mp3"),c.assetUrl("jet.ogg")],c.crashSound=[c.assetUrl("crash.mp3"),c.assetUrl("crash.ogg")],c.jingleSound=[c.assetUrl("jingle.mp3"),c.assetUrl("jingle.ogg")],c.laserSound=[c.assetUrl("laser.mp3"),c.assetUrl("laser.ogg")],c.splashSound=[c.assetUrl("splash.mp3"),c.assetUrl("splash.ogg")],c.graph=f.graph,c.background=c.assetUrl("background.png"),c}},{"../skins":268}],136:[function(a,b){var c=a("./constants"),d=a("./locale"),e=a("../block_utils").createToolbox,f=a("../utils"),g='<block type="flappy_flap"></block>',h='<block type="flappy_flap_height"></block>',i='<block type="flappy_endGame"></block>',j='<block type="flappy_playSound"></block>',k='<block type="flappy_incrementPlayerScore"></block>',l='<block type="flappy_setSpeed"></block>',m='<block type="flappy_setBackground"></block>',n='<block type="flappy_setGapHeight"></block>',o='<block type="flappy_setPlayer"></block>',p='<block type="flappy_setObstacle"></block>',q='<block type="flappy_setGround"></block>',r='<block type="flappy_setGravity"></block>',s='<block type="flappy_setScore"></block>',t=c.AVATAR_HEIGHT,u=c.AVATAR_WIDTH,v=(c.AVATAR_Y_OFFSET,function(a,b){return'<block type="'+a+'" deletable="false">'+(b?"<next>"+b+"</next>":"")+"</block>"}),w=function(a,b){return'<block type="'+a+'" deletable="false" movable="false">'+(b?"<next>"+b+"</next>":"")+"</block>"};b.exports={1:{requiredBlocks:[[{test:"flap",type:"flappy_flap"}]],obstacles:!1,ground:!1,score:!1,freePlay:!1,goal:{startX:100,startY:0,successCondition:function(){return Flappy.avatarY<=40},failureCondition:function(){return Flappy.avatarY>Flappy.MAZE_HEIGHT}},scale:{snapRadius:2},toolbox:e(g+j),startBlocks:v("flappy_whenClick"),appSpecificFailError:d.flappySpecificFail()},2:{requiredBlocks:[[{test:"endGame",type:"flappy_endGame"}]],obstacles:!1,ground:!0,score:!1,freePlay:!1,goal:{startX:100,startY:324,successCondition:function(){return 322===Flappy.avatarY&&110===Flappy.avatarX},failureCondition:function(){var a=Flappy.avatarY+t,b=Flappy.MAZE_HEIGHT-Flappy.GROUND_HEIGHT;return a>=b&&Flappy.gameState===Flappy.GameStates.ACTIVE}},scale:{snapRadius:2},toolbox:e(g+i+j),startBlocks:v("flappy_whenClick",g)+v("flappy_whenCollideGround")},3:{requiredBlocks:[[{test:"setSpeed",type:"flappy_setSpeed"}]],obstacles:!1,ground:!0,score:!1,freePlay:!1,goal:{startX:345,startY:0,moving:!0,successCondition:function(){var a={x:(Flappy.avatarX+u)/2,y:(Flappy.avatarY+t)/2},b={x:(Flappy.goalX+Flappy.GOAL_SIZE)/2,y:(Flappy.goalY+Flappy.GOAL_SIZE)/2},c={x:Math.abs(a.x-b.x),y:Math.abs(a.y-b.y)};return c.x<15&&c.y<15},failureCondition:function(){return Flappy.activeTicks()>=120&&0===Flappy.SPEED}},scale:{snapRadius:2},toolbox:e(g+j+l),startBlocks:v("flappy_whenClick",g)+v("when_run")},4:{requiredBlocks:[[{test:"endGame",type:"flappy_endGame"}]],obstacles:!0,ground:!0,score:!1,freePlay:!1,goal:{startX:572,startY:324,moving:!0,successCondition:function(){return Flappy.obstacles[0].hitAvatar&&Flappy.gameState===Flappy.GameStates.OVER},failureCondition:function(){var a=Flappy.obstacles[0].x+Flappy.OBSTACLE_WIDTH;return a<Flappy.avatarX}},scale:{snapRadius:2},toolbox:e(g+i+j+l),startBlocks:v("flappy_whenClick",g)+v("when_run",l)+v("flappy_whenCollideObstacle")},5:{requiredBlocks:[[{test:"incrementPlayerScore",type:"flappy_incrementPlayerScore"}]],defaultFlap:"SMALL",obstacles:!0,ground:!0,score:!0,freePlay:!1,goal:{successCondition:function(){var a=!1;return Flappy.obstacles.forEach(function(b){!b.hitAvatar&&b.containsAvatar()&&(a=!0)}),a&&Flappy.playerScore>0},failureCondition:function(){var a=!1;return Flappy.obstacles.forEach(function(b){!b.hitAvatar&&b.containsAvatar()&&(a=!0)}),a&&0===Flappy.playerScore}},scale:{snapRadius:2},toolbox:e(g+i+k+j+l),startBlocks:v("flappy_whenClick",g)+v("flappy_whenEnterObstacle")+v("when_run",l)},6:{requiredBlocks:[[{test:"flap",type:"flappy_flap_height"}]],obstacles:!0,ground:!0,score:!0,freePlay:!1,goal:{successCondition:function(){var a=!1;return Flappy.obstacles.forEach(function(b){b.containsAvatar()&&(a=!0)}),a&&Flappy.playerScore>0},failureCondition:function(){var a=!1;return Flappy.obstacles.forEach(function(b){b.containsAvatar()&&(a=!0)}),a&&0===Flappy.playerScore}},scale:{snapRadius:2},toolbox:e(h+i+k+j+l),startBlocks:v("flappy_whenClick")+v("flappy_whenEnterObstacle",k)+v("when_run",l)},7:{requiredBlocks:[[{test:"setBackground",type:"flappy_setBackground"}]],obstacles:!0,ground:!0,score:!0,freePlay:!1,goal:{successCondition:function(){return Flappy.gameState===Flappy.GameStates.OVER}},scale:{snapRadius:2},toolbox:e(h+i+k+j+l+m),startBlocks:v("flappy_whenClick",h)+v("flappy_whenCollideGround",i)+v("flappy_whenCollideObstacle",i)+v("flappy_whenEnterObstacle",k)+v("when_run",l)},8:{requiredBlocks:[[{test:function(a){return("flappy_setBackground"===a.type||"flappy_setPlayer"===a.type)&&"random"===a.getTitleValue("VALUE")},type:"flappy_setBackground",titles:{VALUE:"random"}}]],obstacles:!0,ground:!0,score:!0,freePlay:!1,goal:{successCondition:function(){return Flappy.gameState===Flappy.GameStates.OVER}},scale:{snapRadius:2},toolbox:e(h+i+k+j+l+m+o),startBlocks:v("flappy_whenClick",h)+v("flappy_whenCollideGround",i)+v("flappy_whenCollideObstacle",i)+v("flappy_whenEnterObstacle",k)+v("when_run",l)},9:{requiredBlocks:[[{test:function(a){return"flappy_setScore"===a.type},type:"flappy_setScore"}]],obstacles:!0,ground:!0,score:!0,freePlay:!1,goal:{successCondition:function(){return Flappy.gameState===Flappy.GameStates.OVER}},scale:{snapRadius:2},toolbox:e(h+i+k+j+l+m+o+s),startBlocks:v("flappy_whenClick",h)+v("flappy_whenCollideGround",i)+v("flappy_whenCollideObstacle")+v("flappy_whenEnterObstacle",k)+v("when_run",l)},11:{shareable:!0,requiredBlocks:[],obstacles:!0,ground:!0,score:!0,freePlay:!0,scale:{snapRadius:2},toolbox:e(h+j+k+i+l+m+o+p+q+n+r+s),startBlocks:v("flappy_whenClick")+v("flappy_whenCollideGround")+v("flappy_whenCollideObstacle")+v("flappy_whenEnterObstacle")+v("when_run")},k1:{requiredBlocks:[],obstacles:!0,ground:!0,score:!0,freePlay:!0,isK1:!0,scale:{snapRadius:2},toolbox:e(g+i+m+o+p+q+j+h+l+k+n+r+s),startBlocks:v("flappy_whenClick")+v("flappy_whenCollideGround")+v("flappy_whenCollideObstacle")+v("flappy_whenEnterObstacle")+v("when_run")}},b.exports.k1_1={isK1:!0,grayOutUndeletableBlocks:!0,requiredBlocks:[],obstacles:!0,ground:!0,score:!0,freePlay:!0,scale:{snapRadius:2},toolbox:"",startBlocks:w("flappy_whenClick",w("flappy_flap"))+w("flappy_whenCollideGround",w("flappy_endGame"))+w("flappy_whenCollideObstacle",w("flappy_endGame"))+w("flappy_whenEnterObstacle",w("flappy_incrementPlayerScore"))+w("when_run",w("flappy_setSpeed"))},b.exports.k1_2=f.extend(b.exports[1],{isK1:!0}),b.exports.k1_3=f.extend(b.exports[2],{isK1:!0}),b.exports.k1_4=f.extend(b.exports[3],{isK1:!0}),b.exports.k1_5=f.extend(b.exports[4],{isK1:!0}),b.exports.k1_6=f.extend(b.exports[5],{isK1:!0}),b.exports.k1_7={isK1:!0,requiredBlocks:[[{test:"incrementPlayerScore",type:"flappy_incrementPlayerScore"}]],defaultFlap:"SMALL",obstacles:!0,ground:!0,score:!0,freePlay:!1,goal:{successCondition:function(){var a=!1;return Flappy.obstacles.forEach(function(b){!b.hitAvatar&&b.containsAvatar()&&(a=!0)}),a&&Flappy.playerScore>1},failureCondition:function(){var a=!1;return Flappy.obstacles.forEach(function(b){!b.hitAvatar&&b.containsAvatar()&&(a=!0)}),a&&Flappy.playerScore<=1}},scale:{snapRadius:2},toolbox:e(g+i+k+j+l),startBlocks:v("flappy_whenClick",g)+v("flappy_whenEnterObstacle")+v("when_run",l)},b.exports.k1_8=f.extend(b.exports[7],{isK1:!0,toolbox:e(g+i+k+j+l+m),startBlocks:v("flappy_whenClick",g)+v("flappy_whenCollideGround",i)+v("flappy_whenCollideObstacle",i)+v("flappy_whenEnterObstacle",k)+v("when_run",l)}),b.exports.k1_9={isK1:!0,requiredBlocks:[[{test:"setPlayer",type:"flappy_setPlayer"}]],obstacles:!0,ground:!0,score:!0,freePlay:!1,goal:{successCondition:function(){return Flappy.gameState===Flappy.GameStates.OVER}},scale:{snapRadius:2},toolbox:e(g+i+k+j+l+m+o),startBlocks:v("flappy_whenClick",g)+v("flappy_whenCollideGround",i)+v("flappy_whenCollideObstacle",i)+v("flappy_whenEnterObstacle",k)+v("when_run",l)}},{"../block_utils":77,"../utils":318,"./constants":133,"./locale":137}],135:[function(a,b){"use strict";var c=a("../StudioApp").singleton,d=a("../locale"),e=a("./locale"),f=(a("../skins"),a("../codegen")),g=a("./api"),h=a("../templates/page.html.ejs"),i=a("../dom"),j=a("./constants"),k=a("../utils"),l=a("../dropletUtils"),m=c.ResultType,n=c.TestResults,o=b.exports;o.GameStates={WAITING:0,ACTIVE:1,ENDING:2,OVER:3},o.gameState=o.GameStates.WAITING,o.clickPending=!1,o.avatarVelocity=0;var p,q;o.obstacles=[];var r;c.setCheckForEmptyBlocks(!0);var s=function(){var a=o.MIN_OBSTACLE_HEIGHT,b=o.MAZE_HEIGHT-o.GROUND_HEIGHT-o.MIN_OBSTACLE_HEIGHT-o.GAP_SIZE;return Math.floor(Math.random()*(b-a)+a)};o.scale={snapRadius:1,stepSpeed:33};var t={text:e.shareFlappyTwitter(),hashtag:"FlappyCode"},u=j.AVATAR_HEIGHT,v=j.AVATAR_WIDTH,w=(j.AVATAR_Y_OFFSET,function(){r=k.valueOr(p.infoText,!0),r||(o.gameState=o.GameStates.ACTIVE);for(var a in p.scale)o.scale[a]=p.scale[a];o.MARKER_HEIGHT=43,o.MARKER_WIDTH=50,o.MAZE_WIDTH=400,o.MAZE_HEIGHT=400,o.GROUND_WIDTH=400,o.GROUND_HEIGHT=48,o.GOAL_SIZE=55,o.OBSTACLE_WIDTH=52,o.OBSTACLE_HEIGHT=320,o.MIN_OBSTACLE_HEIGHT=48,o.setGapHeight(g.GapHeight.NORMAL),o.OBSTACLE_SPACING=250;var b=2*o.MAZE_WIDTH/o.OBSTACLE_SPACING;p.obstacles||(b=0);for(var c=function(a){this.x=a,this.gapStart=s(),this.hitAvatar=!1},d=function(){var a=o.avatarX+v,b=o.avatarY+u,c=this.x+o.OBSTACLE_WIDTH,d=this.gapStart+o.GAP_SIZE;return a>this.x&&c>a&&o.avatarY>this.gapStart&&d>b},e=0;b>e;e++)o.obstacles.push({x:1.5*o.MAZE_WIDTH+e*o.OBSTACLE_SPACING,gapStart:s(),hitAvatar:!1,reset:c,containsAvatar:d})}),x=function(){var a,b,c=document.getElementById("svgFlappy");c.setAttribute("width",o.MAZE_WIDTH),c.setAttribute("height",o.MAZE_HEIGHT);var d=document.getElementById("visualizationColumn");if(d.style.width=o.MAZE_WIDTH+"px",q.background&&(b=document.createElementNS(Blockly.SVG_NS,"image"),b.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",q.background),b.setAttribute("id","background"),b.setAttribute("height",o.MAZE_HEIGHT),b.setAttribute("width",o.MAZE_WIDTH),b.setAttribute("x",0),b.setAttribute("y",0),c.appendChild(b)),o.obstacles.forEach(function(a,b){var d=document.createElementNS(Blockly.SVG_NS,"image");d.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",q.obstacle_top),d.setAttribute("id","obstacle_top"+b),d.setAttribute("height",o.OBSTACLE_HEIGHT),d.setAttribute("width",o.OBSTACLE_WIDTH),c.appendChild(d);var e=document.createElementNS(Blockly.SVG_NS,"image");e.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",q.obstacle_bottom),e.setAttribute("id","obstacle_bottom"+b),e.setAttribute("height",o.OBSTACLE_HEIGHT),e.setAttribute("width",o.OBSTACLE_WIDTH),c.appendChild(e)}),p.ground)for(a=0;a<o.MAZE_WIDTH/o.GROUND_WIDTH+1;a++){var e=document.createElementNS(Blockly.SVG_NS,"image");e.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",q.ground),e.setAttribute("id","ground"+a),e.setAttribute("height",o.GROUND_HEIGHT),e.setAttribute("width",o.GROUND_WIDTH),e.setAttribute("x",0),e.setAttribute("y",o.MAZE_HEIGHT-o.GROUND_HEIGHT),c.appendChild(e)}if(p.goal&&p.goal.startX){var f=document.createElementNS(Blockly.SVG_NS,"image");f.setAttribute("id","goal"),f.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",q.goal),f.setAttribute("height",o.GOAL_SIZE),f.setAttribute("width",o.GOAL_SIZE),f.setAttribute("x",p.goal.startX),f.setAttribute("y",p.goal.startY),c.appendChild(f)}var g=document.createElementNS(Blockly.SVG_NS,"clipPath");g.setAttribute("id","avatArclipPath");var h=document.createElementNS(Blockly.SVG_NS,"rect");h.setAttribute("id","avatArclipRect"),h.setAttribute("width",o.MAZE_WIDTH),h.setAttribute("height",o.MAZE_HEIGHT-o.GROUND_HEIGHT),g.appendChild(h),c.appendChild(g);var i=document.createElementNS(Blockly.SVG_NS,"image");i.setAttribute("id","avatar"),i.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",q.avatar),i.setAttribute("height",u),i.setAttribute("width",v),p.ground&&i.setAttribute("clip-path","url(#avatArclipPath)"),c.appendChild(i);var j=document.createElementNS(Blockly.SVG_NS,"image");j.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",q.instructions),j.setAttribute("id","instructions"),j.setAttribute("height",50),j.setAttribute("width",159),j.setAttribute("x",110),j.setAttribute("y",170),j.setAttribute("visibility","hidden"),c.appendChild(j);var k=document.createElementNS(Blockly.SVG_NS,"image");k.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",q.getready),k.setAttribute("id","getready"),k.setAttribute("height",50),k.setAttribute("width",183),k.setAttribute("x",108),k.setAttribute("y",80),k.setAttribute("visibility","hidden"),c.appendChild(k);var l=document.createElementNS(Blockly.SVG_NS,"image");l.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",q.clickrun),l.setAttribute("id","clickrun"),l.setAttribute("height",41),l.setAttribute("width",273),l.setAttribute("x",64),l.setAttribute("y",200),l.setAttribute("visibility","visibile"),c.appendChild(l);var m=document.createElementNS(Blockly.SVG_NS,"image");m.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",q.gameover),m.setAttribute("id","gameover"),m.setAttribute("height",41),m.setAttribute("width",192),m.setAttribute("x",104),m.setAttribute("y",80),m.setAttribute("visibility","hidden"),c.appendChild(m);var n=document.createElementNS(Blockly.SVG_NS,"text");n.setAttribute("id","score"),n.setAttribute("class","flappy-score"),n.setAttribute("x",o.MAZE_WIDTH/2),n.setAttribute("y",60),n.appendChild(document.createTextNode("0")),n.setAttribute("visibility","hidden"),c.appendChild(n);var r=document.createElementNS(Blockly.SVG_NS,"rect");r.setAttribute("width",o.MAZE_WIDTH),r.setAttribute("height",o.MAZE_HEIGHT),r.setAttribute("fill-opacity",0),r.addEventListener("touchstart",function(a){o.onMouseDown(a),a.preventDefault()}),r.addEventListener("mousedown",function(a){o.onMouseDown(a)}),c.appendChild(r)};o.calcDistance=function(a,b){return Math.sqrt(a*a+b*b)};var y=function(a){var b=o.avatarX+v>=a.x&&o.avatarX<=a.x+o.OBSTACLE_WIDTH;return b&&(o.avatarY<=a.gapStart||o.avatarY+u>=a.gapStart+o.GAP_SIZE)?!0:!1};o.activeTicks=function(){return o.firstActiveTick<0?0:o.tickCount-o.firstActiveTick},o.callUserGeneratedCode=function(a){try{a.call(o,c,g)}catch(b){console&&console.log(b)}},o.onTick=function(){var a,b;if(o.firstActiveTick<0&&o.gameState===o.GameStates.ACTIVE&&(o.firstActiveTick=o.tickCount),o.tickCount++,1===o.tickCount&&o.callUserGeneratedCode(o.whenRunButton),o.clickPending&&o.gameState<=o.GameStates.ACTIVE&&(o.callUserGeneratedCode(o.whenClick),o.clickPending=!1),a=o.avatarY+u<o.MAZE_HEIGHT-o.GROUND_HEIGHT,o.gameState===o.GameStates.ACTIVE){o.avatarVelocity+=o.gravity,o.avatarY=o.avatarY+o.avatarVelocity;var d=p.ground?o.MAZE_HEIGHT-o.GROUND_HEIGHT-u+1:1.5*o.MAZE_HEIGHT;o.avatarY=Math.min(o.avatarY,d),o.avatarY=Math.max(o.avatarY,o.MAZE_HEIGHT*-.5),o.obstacles.forEach(function(a,b){var d=a.x>o.avatarX+v;a.x-=o.SPEED;var e=a.x>o.avatarX+v;if(d&&!e&&o.avatarY>a.gapStart&&o.avatarY+u<a.gapStart+o.GAP_SIZE&&o.callUserGeneratedCode(o.whenEnterObstacle),!a.hitAvatar&&y(a)){a.hitAvatar=!0;try{o.whenCollideObstacle(c,g)}catch(f){}}var h=o.obstacles.length,i=(b-1+h)%h;a.x+o.OBSTACLE_WIDTH<0&&a.reset(o.obstacles[i].x+o.OBSTACLE_SPACING)}),b=o.avatarY+u<o.MAZE_HEIGHT-o.GROUND_HEIGHT,a&&!b&&o.callUserGeneratedCode(o.whenCollideGround),p.goal&&p.goal.moving&&(o.goalX-=o.SPEED,o.goalX+o.GOAL_SIZE<0&&(o.goalX=o.MAZE_WIDTH+o.GOAL_SIZE))}if(o.gameState===o.GameStates.ENDING){o.avatarY+=10;var e=o.MAZE_HEIGHT-o.GROUND_HEIGHT-v+4;o.avatarY>=e&&(o.avatarY=e,o.gameState=o.GameStates.OVER,o.gameOverTick=o.tickCount),document.getElementById("avatar").setAttribute("transform","translate("+v+", 0) rotate(90, "+o.avatarX+", "+o.avatarY+")"),r&&document.getElementById("gameover").setAttribute("visibility","visibile")}o.displayAvatar(o.avatarX,o.avatarY),o.displayObstacles(),o.gameState<=o.GameStates.ACTIVE&&(o.displayGround(o.tickCount),o.displayGoal()),B()&&o.onPuzzleComplete()},o.onMouseDown=function(){if(o.intervalId){if(o.clickPending=!0,o.gameState===o.GameStates.WAITING)o.gameState=o.GameStates.ACTIVE;else if(o.gameState===o.GameStates.OVER&&o.gameOverTick+10<o.tickCount){var a=document.getElementById("resetButton");a&&a.click()}document.getElementById("instructions").setAttribute("visibility","hidden"),document.getElementById("getready").setAttribute("visibility","hidden")}else o.gameState===o.GameStates.WAITING&&o.runButtonClick()},o.init=function(b){c.reset=this.reset.bind(this),c.runButtonClick=this.runButtonClick.bind(this),o.clearEventHandlersKillTickLoop(),q=b.skin,p=b.level,b.grayOutUndeletableBlocks=p.grayOutUndeletableBlocks,b.pinWorkspaceToBottom=!1,b.hasVerticalScrollbars=!1,w(),b.html=h({assetUrl:c.assetUrl,data:{localeDirection:c.localeDirection(),visualization:a("./visualization.html.ejs")(),controls:a("./controls.html.ejs")({assetUrl:c.assetUrl,shareable:p.shareable}),blockUsed:void 0,idealBlockNumber:void 0,editCode:p.editCode,blockCounterClass:"block-counter-default",readonlyWorkspace:b.readonlyWorkspace}}),b.loadAudio=function(){c.loadAudio(q.winSound,"win"),c.loadAudio(q.startSound,"start"),c.loadAudio(q.failureSound,"failure"),c.loadAudio(q.obstacleSound,"obstacle"),c.loadAudio(q.dieSound,"sfx_die"),c.loadAudio(q.hitSound,"sfx_hit"),c.loadAudio(q.pointSound,"sfx_point"),c.loadAudio(q.swooshingSound,"sfx_swooshing"),c.loadAudio(q.wingSound,"sfx_wing"),c.loadAudio(q.winGoalSound,"winGoal"),c.loadAudio(q.jetSound,"jet"),c.loadAudio(q.jingleSound,"jingle"),c.loadAudio(q.crashSound,"crash"),c.loadAudio(q.laserSound,"laser"),c.loadAudio(q.splashSound,"splash"),c.loadAudio(q.wallSound,"wall"),c.loadAudio(q.wall0Sound,"wall0")},b.afterInject=function(){Blockly.HSV_SATURATION=.6,Blockly.SNAP_RADIUS*=o.scale.snapRadius,x()},b.trashcan=!1,b.twitter=t,b.makeYourOwn=b.share,b.makeString=d.makeYourOwnFlappy(),b.makeUrl="http://code.org/flappy",b.makeImage=c.assetUrl("media/flappy_promo.png"),b.enableShowCode=!1,b.enableShowBlockCount=!1,p.isK1&&(j.WORKSPACE_ROW_HEIGHT*=1.5);var e=j.WORKSPACE_BUFFER,f=e+j.WORKSPACE_COL_WIDTH,g=j.WORKSPACE_BUFFER,k=g+j.WORKSPACE_ROW_HEIGHT,l=k+j.WORKSPACE_ROW_HEIGHT;b.blockArrangement={flappy_whenClick:{x:e,y:g},when_run:{x:e,y:g},flappy_whenCollideGround:{x:f,y:g},flappy_whenCollideObstacle:{x:f,y:k},flappy_whenEnterObstacle:{x:f,y:l}},-1===p.startBlocks.indexOf("whenCollide")&&(b.blockArrangement.flappy_whenEnterObstacle={x:f,y:g}),-1!==p.startBlocks.indexOf("when_run")&&(b.blockArrangement.flappy_whenClick.y=k),c.init(b);var m=document.getElementById("rightButton");i.addClickTouchEvent(m,o.onPuzzleComplete)},o.clearEventHandlersKillTickLoop=function(){o.whenClick=null,o.whenCollideGround=null,o.whenCollideObstacle=null,o.whenEnterObstacle=null,o.whenRunButton=null,o.intervalId&&window.clearInterval(o.intervalId),o.intervalId=0},o.reset=function(){o.clearEventHandlersKillTickLoop(),o.gameState=o.GameStates.WAITING,o.playerScore=0,o.avatarVelocity=0,o.obstacles.forEach(function(a,b){a.reset(1.5*o.MAZE_WIDTH+b*o.OBSTACLE_SPACING)}),o.SPEED=0,o.FLAP_VELOCITY=-11,o.setBackground("flappy"),o.setObstacle("flappy"),o.setPlayer("flappy"),o.setGround("flappy"),o.setGapHeight(g.GapHeight.NORMAL),o.gravity=g.Gravity.NORMAL,o.avatarX=110,o.avatarY=150,p.goal&&p.goal.startX&&(o.goalX=p.goal.startX,o.goalY=p.goal.startY),document.getElementById("avatar").setAttribute("transform",""),document.getElementById("score").setAttribute("visibility","hidden"),document.getElementById("instructions").setAttribute("visibility","hidden"),document.getElementById("clickrun").setAttribute("visibility","visible"),document.getElementById("getready").setAttribute("visibility","hidden"),document.getElementById("gameover").setAttribute("visibility","hidden"),o.displayAvatar(o.avatarX,o.avatarY),o.displayObstacles(),o.displayGround(0),o.displayGoal();document.getElementById("svgFlappy")},o.runButtonClick=function(){var a=document.getElementById("runButton"),b=document.getElementById("resetButton");if(b.style.minWidth||(b.style.minWidth=a.offsetWidth+"px"),document.getElementById("clickrun").setAttribute("visibility","hidden"),document.getElementById("instructions").setAttribute("visibility","visible"),document.getElementById("getready").setAttribute("visibility","visible"),c.toggleRunReset("reset"),Blockly.mainBlockSpace.traceOn(!0),c.attempts++,o.execute(),p.freePlay){var d=document.getElementById("right-button-cell");d.className="right-button-cell-enabled"}p.score&&(document.getElementById("score").setAttribute("visibility","visible"),o.displayScore())};var z=function(){o.waitingForReport||c.displayFeedback({app:"flappy",skin:q.id,feedbackType:o.testResults,response:o.response,level:p,showingSharing:p.freePlay&&p.shareable,twitter:t,appStrings:{reinfFeedbackMsg:e.reinfFeedbackMsg(),sharingText:e.shareGame()}})};o.onReportComplete=function(a){o.response=a,o.waitingForReport=!1,z()},o.execute=function(){var a;o.result=m.UNSET,o.testResults=n.NO_TESTS_RUN,o.waitingForReport=!1,o.response=null,p.editCode&&(a=l.generateCodeAliases(null,"Flappy"),a+=c.editor.getValue());var b=Blockly.Generator.blockSpaceToCode("JavaScript","flappy_whenClick"),d=f.functionFromCode(b,{StudioApp:c,Flappy:g}),e=Blockly.Generator.blockSpaceToCode("JavaScript","flappy_whenCollideGround"),h=f.functionFromCode(e,{StudioApp:c,Flappy:g}),i=Blockly.Generator.blockSpaceToCode("JavaScript","flappy_whenEnterObstacle"),j=f.functionFromCode(i,{StudioApp:c,Flappy:g}),k=Blockly.Generator.blockSpaceToCode("JavaScript","flappy_whenCollideObstacle"),q=f.functionFromCode(k,{StudioApp:c,Flappy:g}),r=Blockly.Generator.blockSpaceToCode("JavaScript","when_run"),s=f.functionFromCode(r,{StudioApp:c,Flappy:g});c.playAudio("start"),o.whenClick=d,o.whenCollideGround=h,o.whenEnterObstacle=j,o.whenCollideObstacle=q,o.whenRunButton=s,o.tickCount=0,o.firstActiveTick=-1,o.gameOverTick=0,o.intervalId&&window.clearInterval(o.intervalId),o.intervalId=window.setInterval(o.onTick,o.scale.stepSpeed)},o.onPuzzleComplete=function(){p.freePlay&&(o.result=m.SUCCESS),o.clearEventHandlersKillTickLoop();var a=o.result==m.SUCCESS;o.testResults=p.freePlay?n.FREE_PLAY:c.getTestResults(a),"1"!==p.id||o.testResults!==n.TOO_FEW_BLOCKS_FAIL&&o.testResults!==n.LEVEL_INCOMPLETE_FAIL||(o.testResults=n.APP_SPECIFIC_FAIL),c.playAudio(o.testResults>=n.FREE_PLAY?"win":"failure"),p.editCode&&(o.testResults=a?n.ALL_PASS:n.TOO_FEW_BLOCKS_FAIL);var b=Blockly.Xml.blockSpaceToDom(Blockly.mainBlockSpace),d=Blockly.Xml.domToText(b);o.waitingForReport=!0,c.report({app:"flappy",level:p.id,result:o.result===m.SUCCESS,testResult:o.testResults,program:encodeURIComponent(d),onComplete:o.onReportComplete})},o.displayAvatar=function(a,b){var c=document.getElementById("avatar");c.setAttribute("x",a),c.setAttribute("y",b)},o.displayGoal=function(){if(o.goalX){var a=document.getElementById("goal");a.setAttribute("x",o.goalX),a.setAttribute("y",o.goalY)}},o.displayGround=function(a){if(p.ground){var b=a*o.SPEED;b%=o.GROUND_WIDTH;for(var c=0;c<o.MAZE_WIDTH/o.GROUND_WIDTH+1;c++){var d=document.getElementById("ground"+c);d.setAttribute("x",-b+c*o.GROUND_WIDTH),d.setAttribute("y",o.MAZE_HEIGHT-o.GROUND_HEIGHT)}}},o.displayObstacles=function(){for(var a=0;a<o.obstacles.length;a++){var b=o.obstacles[a],c=document.getElementById("obstacle_top"+a);c.setAttribute("x",b.x),c.setAttribute("y",b.gapStart-o.OBSTACLE_HEIGHT);var d=document.getElementById("obstacle_bottom"+a);d.setAttribute("x",b.x),d.setAttribute("y",b.gapStart+o.GAP_SIZE)}},o.displayScore=function(){var a=document.getElementById("score");a.textContent=o.playerScore},o.flap=function(a){var b=p.defaultFlap||"NORMAL";o.avatarVelocity=a||g.FlapHeight[b]},o.setGapHeight=function(a){var b=o.MAZE_HEIGHT-o.MIN_OBSTACLE_HEIGHT-o.OBSTACLE_HEIGHT;b>a&&(a=b),o.GAP_SIZE=a};var A=function(a){return"flappy"===a?q:q[a]};o.setBackground=function(a){var b=document.getElementById("background");b.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",A(a).background)},o.setPlayer=function(a){var b=document.getElementById("avatar");b.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",A(a).avatar)},o.setObstacle=function(a){var b;o.obstacles.forEach(function(c,d){b=document.getElementById("obstacle_top"+d),b.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",A(a).obstacle_top),b=document.getElementById("obstacle_bottom"+d),b.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",A(a).obstacle_bottom)})},o.setGround=function(a){if(p.ground){var b,c;for(c=0;c<o.MAZE_WIDTH/o.GROUND_WIDTH+1;c++)b=document.getElementById("ground"+c),b.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",A(a).ground)}};var B=function(){return p.goal&&p.goal.successCondition&&p.goal.successCondition()?(o.result=m.SUCCESS,!0):p.goal&&p.goal.failureCondition&&p.goal.failureCondition()?(o.result=m.FAILURE,!0):!1}},{"../StudioApp":5,"../codegen":106,"../dom":108,"../dropletUtils":109,"../locale":150,"../skins":268,"../templates/page.html.ejs":296,"../utils":318,"./api":131,"./constants":133,"./controls.html.ejs":134,"./locale":137,"./visualization.html.ejs":140}],140:[function(require,module,exports){module.exports=function(){var t=function anonymous(locals,filters,escape){escape=escape||function(a){return String(a).replace(/&(?!\w+;)/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")};var buf=[];with(locals||{})!function(){buf.push('<svg xmlns="http://www.w3.org/2000/svg" version="1.1" id="svgFlappy">\n</svg>\n<div id="capacityBubble">\n  <div id="capacity"></div>\n</div>\n')}();return buf.join("")};return function(a){return t(a,require("ejs").filters)}}()},{ejs:491}],134:[function(require,module,exports){module.exports=function(){var t=function anonymous(locals,filters,escape){escape=escape||function(a){return String(a).replace(/&(?!\w+;)/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")};var buf=[];with(locals||{})!function(){buf.push("");var a=require("../locale");buf.push('\n\n<div id="right-button-cell">\n  <button id="rightButton" class="share">\n    <img src="',escape(assetUrl("media/1x1.gif")),'">',escape(a.finish()),"\n  </button>\n</div>\n")}();return buf.join("")};return function(a){return t(a,require("ejs").filters)}}()},{"../locale":150,ejs:491}],133:[function(a,b){b.exports={WORKSPACE_BUFFER:20,WORKSPACE_COL_WIDTH:210,WORKSPACE_ROW_HEIGHT:120,AVATAR_HEIGHT:24,AVATAR_WIDTH:34,AVATAR_Y_OFFSET:0}},{}],132:[function(a,b,c){"use strict";var d=a("./locale"),e=a("../locale"),f=(a("../block_utils"),a("../utils")),g=f.getLodash(),h=a("../StudioApp").singleton,i='"flappy"',j="random",k=function(a,b){var c=a.getTitleValue("VALUE");if(c===j){var d=g(a.VALUES).map(function(a){return a[1]}).reject(function(a){return a===j});c="Flappy.random(["+d+"])"}return"Flappy."+b+"('block_id_"+a.id+"', "+c+");\n"};c.install=function(a,b){function c(a){a!==j&&h.playAudio(f.stripQuotes(a))}var g=b.skin,l=b.isK1,m=a.Generator.get("JavaScript");a.JavaScript=m,a.Blocks.flappy_whenClick={helpUrl:"",init:function(){this.setHSV(140,1,.74),l?this.appendDummyInput().appendTitle(e.when()).appendTitle(new a.FieldImage(g.clickIcon)):this.appendDummyInput().appendTitle(d.whenClick()),this.setPreviousStatement(!1),this.setNextStatement(!0),this.setTooltip(d.whenClickTooltip())
}},m.flappy_whenClick=function(){return"\n"},a.Blocks.flappy_whenCollideGround={helpUrl:"",init:function(){this.setHSV(140,1,.74),l?this.appendDummyInput().appendTitle(e.when()).appendTitle(new a.FieldImage(g.collideGroundIcon)):this.appendDummyInput().appendTitle(d.whenCollideGround()),this.setPreviousStatement(!1),this.setNextStatement(!0),this.setTooltip(d.whenCollideGroundTooltip())}},m.flappy_whenCollideGround=function(){return"\n"},a.Blocks.flappy_whenCollideObstacle={helpUrl:"",init:function(){this.setHSV(140,1,.74),l?this.appendDummyInput().appendTitle(e.when()).appendTitle(new a.FieldImage(g.collideObstacleIcon)):this.appendDummyInput().appendTitle(d.whenCollideObstacle()),this.setPreviousStatement(!1),this.setNextStatement(!0),this.setTooltip(d.whenCollideObstacleTooltip())}},m.flappy_whenCollideObstacle=function(){return"\n"},a.Blocks.flappy_whenEnterObstacle={helpUrl:"",init:function(){this.setHSV(140,1,.74),l?this.appendDummyInput().appendTitle(e.when()).appendTitle(new a.FieldImage(g.enterObstacleIcon)):this.appendDummyInput().appendTitle(d.whenEnterObstacle()),this.setPreviousStatement(!1),this.setNextStatement(!0),this.setTooltip(d.whenEnterObstacleTooltip())}},m.flappy_whenEnterObstacle=function(){return"\n"},a.Blocks.flappy_flap={helpUrl:"",init:function(){this.setHSV(184,1,.74),l?this.appendDummyInput().appendTitle(d.flap()).appendTitle(new a.FieldImage(g.flapIcon)):this.appendDummyInput().appendTitle(d.flap()),this.setPreviousStatement(!0),this.setNextStatement(!0),this.setTooltip(d.flapTooltip())}},m.flappy_flap=function(){return"Flappy.flap('block_id_"+this.id+"');\n"},a.Blocks.flappy_flap_height={helpUrl:"",init:function(){var b=new a.FieldDropdown(this.VALUES);b.setValue(this.VALUES[3][1]),this.setHSV(184,1,.74),this.appendDummyInput().appendTitle(b,"VALUE"),this.setPreviousStatement(!0),this.setNextStatement(!0),this.setTooltip(d.flapTooltip())}},a.Blocks.flappy_flap_height.VALUES=[[d.flapRandom(),j],[d.flapVerySmall(),"Flappy.FlapHeight.VERY_SMALL"],[d.flapSmall(),"Flappy.FlapHeight.SMALL"],[d.flapNormal(),"Flappy.FlapHeight.NORMAL"],[d.flapLarge(),"Flappy.FlapHeight.LARGE"],[d.flapVeryLarge(),"Flappy.FlapHeight.VERY_LARGE"]],m.flappy_flap_height=function(){return k(this,"flap")},a.Blocks.flappy_playSound={WING_FLAP_SOUND:'"sfx_wing"',helpUrl:"",init:function(){this.VALUES=l?this.k1SoundChoices:this.soundChoices;var b=new a.FieldDropdown(this.VALUES,c);b.setValue(this.WING_FLAP_SOUND),l?this.appendDummyInput().appendTitle(e.play()).appendTitle(new a.FieldImage(g.soundIcon)).appendTitle(b,"VALUE"):this.appendDummyInput().appendTitle(b,"VALUE"),this.setHSV(184,1,.74),this.setPreviousStatement(!0),this.setNextStatement(!0),this.setTooltip(d.playSoundTooltip())},get k1SoundChoices(){return[[d.soundRandom(),j],[d.soundBounce(),'"wall"'],[d.soundCrunch(),'"wall0"'],[d.soundDie(),'"sfx_die"'],[d.soundHit(),'"sfx_hit"'],[d.soundPoint(),'"sfx_point"'],[d.soundSwoosh(),'"sfx_swooshing"'],[d.soundWing(),this.WING_FLAP_SOUND],[d.soundJet(),'"jet"'],[d.soundCrash(),'"crash"'],[d.soundJingle(),'"jingle"'],[d.soundSplash(),'"splash"'],[d.soundLaser(),'"laser"']]},get soundChoices(){return[[d.playSoundRandom(),j],[d.playSoundBounce(),'"wall"'],[d.playSoundCrunch(),'"wall0"'],[d.playSoundDie(),'"sfx_die"'],[d.playSoundHit(),'"sfx_hit"'],[d.playSoundPoint(),'"sfx_point"'],[d.playSoundSwoosh(),'"sfx_swooshing"'],[d.playSoundWing(),this.WING_FLAP_SOUND],[d.playSoundJet(),'"jet"'],[d.playSoundCrash(),'"crash"'],[d.playSoundJingle(),'"jingle"'],[d.playSoundSplash(),'"splash"'],[d.playSoundLaser(),'"laser"']]}},m.flappy_playSound=function(){return k(this,"playSound")},a.Blocks.flappy_incrementPlayerScore={helpUrl:"",init:function(){this.setHSV(184,1,.74),l?this.appendDummyInput().appendTitle(e.score()).appendTitle(new a.FieldImage(g.scoreCard)):this.appendDummyInput().appendTitle(d.incrementPlayerScore()),this.setPreviousStatement(!0),this.setNextStatement(!0),this.setTooltip(d.incrementPlayerScoreTooltip())}},m.flappy_incrementPlayerScore=function(){return"Flappy.incrementPlayerScore('block_id_"+this.id+"');\n"},a.Blocks.flappy_endGame={helpUrl:"",init:function(){this.setHSV(184,1,.74),l?this.appendDummyInput().appendTitle(e.end()).appendTitle(new a.FieldImage(g.endIcon)):this.appendDummyInput().appendTitle(d.endGame()),this.setPreviousStatement(!0),this.setNextStatement(!0),this.setTooltip(d.endGameTooltip())}},m.flappy_endGame=function(){return"Flappy.endGame('block_id_"+this.id+"');\n"},a.Blocks.flappy_setSpeed={helpUrl:"",init:function(){if(this.setHSV(312,.32,.62),l){var b=new a.FieldImageDropdown(this.K1_VALUES,63,33);b.setValue(this.K1_VALUES[1][1]),this.appendDummyInput().appendTitle(d.setSpeed()).appendTitle(b,"VALUE")}else{var c=new a.FieldDropdown(this.VALUES);c.setValue(this.VALUES[3][1]),this.appendDummyInput().appendTitle(c,"VALUE")}this.setInputsInline(!0),this.setPreviousStatement(!0),this.setNextStatement(!0),this.setTooltip(d.setSpeedTooltip())}},a.Blocks.flappy_setSpeed.K1_VALUES=[[g.speedSlow,"Flappy.LevelSpeed.SLOW"],[g.speedMedium,"Flappy.LevelSpeed.NORMAL"],[g.speedFast,"Flappy.LevelSpeed.FAST"]],a.Blocks.flappy_setSpeed.VALUES=[[d.speedRandom(),j],[d.speedVerySlow(),"Flappy.LevelSpeed.VERY_SLOW"],[d.speedSlow(),"Flappy.LevelSpeed.SLOW"],[d.speedNormal(),"Flappy.LevelSpeed.NORMAL"],[d.speedFast(),"Flappy.LevelSpeed.FAST"],[d.speedVeryFast(),"Flappy.LevelSpeed.VERY_FAST"]],m.flappy_setSpeed=function(){return k(this,"setSpeed")},a.Blocks.flappy_setGapHeight={helpUrl:"",init:function(){var b=new a.FieldDropdown(this.VALUES);b.setValue(this.VALUES[3][1]),this.setHSV(312,.32,.62),this.appendDummyInput().appendTitle(b,"VALUE"),this.setInputsInline(!0),this.setPreviousStatement(!0),this.setNextStatement(!0),this.setTooltip(d.setGapHeightTooltip())}},a.Blocks.flappy_setGapHeight.VALUES=[[d.setGapRandom(),j],[d.setGapVerySmall(),"Flappy.GapHeight.VERY_SMALL"],[d.setGapSmall(),"Flappy.GapHeight.SMALL"],[d.setGapNormal(),"Flappy.GapHeight.NORMAL"],[d.setGapLarge(),"Flappy.GapHeight.LARGE"],[d.setGapVeryLarge(),"Flappy.GapHeight.VERY_LARGE"]],m.flappy_setGapHeight=function(){return k(this,"setGapHeight")},a.Blocks.flappy_setBackground={helpUrl:"",init:function(){this.setHSV(312,.32,.62);var b,c=this.appendDummyInput();l?(c.appendTitle(d.setBackground()),b=new a.FieldImageDropdown(this.K1_CHOICES,50,30),b.setValue(i)):(b=new a.FieldDropdown(this.VALUES),b.setValue(i)),c.appendTitle(b,"VALUE"),this.setInputsInline(!0),this.setPreviousStatement(!0),this.setNextStatement(!0),this.setTooltip(d.setBackgroundTooltip())}},a.Blocks.flappy_setBackground.VALUES=[[d.setBackgroundRandom(),j],[d.setBackgroundFlappy(),i],[d.setBackgroundNight(),'"night"'],[d.setBackgroundSciFi(),'"scifi"'],[d.setBackgroundUnderwater(),'"underwater"'],[d.setBackgroundCave(),'"cave"'],[d.setBackgroundSanta(),'"santa"']],a.Blocks.flappy_setBackground.K1_CHOICES=[[g.background,i],[g.night.background,'"night"'],[g.scifi.background,'"scifi"'],[g.underwater.background,'"underwater"'],[g.cave.background,'"cave"'],[g.santa.background,'"santa"'],[g.randomPurpleIcon,j]],m.flappy_setBackground=function(){return k(this,"setBackground")},a.Blocks.flappy_setPlayer={helpUrl:"",init:function(){this.setHSV(312,.32,.62);var b,c=this.appendDummyInput();l?(c.appendTitle(d.setPlayer()),b=new a.FieldImageDropdown(this.K1_CHOICES,34,24),b.setValue(i)):(b=new a.FieldDropdown(this.VALUES),b.setValue(i)),c.appendTitle(b,"VALUE"),this.setInputsInline(!0),this.setPreviousStatement(!0),this.setNextStatement(!0),this.setTooltip(d.setPlayerTooltip())}},a.Blocks.flappy_setPlayer.VALUES=[[d.setPlayerRandom(),j],[d.setPlayerFlappy(),i],[d.setPlayerRedBird(),'"redbird"'],[d.setPlayerSciFi(),'"scifi"'],[d.setPlayerUnderwater(),'"underwater"'],[d.setPlayerSanta(),'"santa"'],[d.setPlayerCave(),'"cave"'],[d.setPlayerShark(),'"shark"'],[d.setPlayerEaster(),'"easter"'],[d.setPlayerBatman(),'"batman"'],[d.setPlayerSubmarine(),'"submarine"'],[d.setPlayerUnicorn(),'"unicorn"'],[d.setPlayerFairy(),'"fairy"'],[d.setPlayerSuperman(),'"superman"'],[d.setPlayerTurkey(),'"turkey"']],a.Blocks.flappy_setPlayer.K1_CHOICES=[[g.avatar,i],[g.redbird.avatar,'"redbird"'],[g.scifi.avatar,'"scifi"'],[g.underwater.avatar,'"underwater"'],[g.santa.avatar,'"santa"'],[g.cave.avatar,'"cave"'],[g.shark.avatar,'"shark"'],[g.easter.avatar,'"easter"'],[g.batman.avatar,'"batman"'],[g.submarine.avatar,'"submarine"'],[g.unicorn.avatar,'"unicorn"'],[g.fairy.avatar,'"fairy"'],[g.superman.avatar,'"superman"'],[g.turkey.avatar,'"turkey"'],[g.randomPurpleIcon,j]],m.flappy_setPlayer=function(){return k(this,"setPlayer")},a.Blocks.flappy_setObstacle={helpUrl:"",init:function(){this.setHSV(312,.32,.62);var b,c=this.appendDummyInput();l?(c.appendTitle(d.setObstacle()),b=new a.FieldImageDropdown(this.K1_CHOICES,50,30),b.setValue(i)):(b=new a.FieldDropdown(this.VALUES),b.setValue(i)),c.appendTitle(b,"VALUE"),this.setInputsInline(!0),this.setPreviousStatement(!0),this.setNextStatement(!0),this.setTooltip(d.setObstacleTooltip())}},a.Blocks.flappy_setObstacle.VALUES=[[d.setObstacleRandom(),j],[d.setObstacleFlappy(),i],[d.setObstacleSciFi(),'"scifi"'],[d.setObstacleUnderwater(),'"underwater"'],[d.setObstacleCave(),'"cave"'],[d.setObstacleSanta(),'"santa"'],[d.setObstacleLaser(),'"laser"']],a.Blocks.flappy_setObstacle.K1_CHOICES=[[g.obstacle_bottom_thumb,i],[g.scifi.obstacle_bottom_thumb,'"scifi"'],[g.underwater.obstacle_bottom_thumb,'"underwater"'],[g.cave.obstacle_bottom_thumb,'"cave"'],[g.santa.obstacle_bottom_thumb,'"santa"'],[g.laser.obstacle_bottom_thumb,'"laser"'],[g.randomPurpleIcon,j]],m.flappy_setObstacle=function(){return k(this,"setObstacle")},a.Blocks.flappy_setGround={helpUrl:"",init:function(){this.setHSV(312,.32,.62);var b,c=this.appendDummyInput();l?(c.appendTitle(d.setGround()),b=new a.FieldImageDropdown(this.K1_CHOICES,50,30),b.setValue(i)):(b=new a.FieldDropdown(this.VALUES),b.setValue(i)),c.appendTitle(b,"VALUE"),this.setInputsInline(!0),this.setPreviousStatement(!0),this.setNextStatement(!0),this.setTooltip(d.setGroundTooltip())}},a.Blocks.flappy_setGround.VALUES=[[d.setGroundRandom(),j],[d.setGroundFlappy(),i],[d.setGroundSciFi(),'"scifi"'],[d.setGroundUnderwater(),'"underwater"'],[d.setGroundCave(),'"cave"'],[d.setGroundSanta(),'"santa"'],[d.setGroundLava(),'"lava"']],a.Blocks.flappy_setGround.K1_CHOICES=[[g.ground_thumb,i],[g.scifi.ground_thumb,'"scifi"'],[g.underwater.ground_thumb,'"underwater"'],[g.cave.ground_thumb,'"cave"'],[g.santa.ground_thumb,'"santa"'],[g.lava.ground_thumb,'"lava"'],[g.randomPurpleIcon,j]],m.flappy_setGround=function(){return k(this,"setGround")},a.Blocks.flappy_setGravity={helpUrl:"",init:function(){var b=new a.FieldDropdown(this.VALUES);b.setValue(this.VALUES[3][1]),this.setHSV(312,.32,.62),this.appendDummyInput().appendTitle(b,"VALUE"),this.setInputsInline(!0),this.setPreviousStatement(!0),this.setNextStatement(!0),this.setTooltip(d.setGravityTooltip())}},a.Blocks.flappy_setGravity.VALUES=[[d.setGravityRandom(),j],[d.setGravityVeryLow(),"Flappy.Gravity.VERY_LOW"],[d.setGravityLow(),"Flappy.Gravity.LOW"],[d.setGravityNormal(),"Flappy.Gravity.NORMAL"],[d.setGravityHigh(),"Flappy.Gravity.HIGH"],[d.setGravityVeryHigh(),"Flappy.Gravity.VERY_HIGH"]],m.flappy_setGravity=function(){return k(this,"setGravity")},a.Blocks.flappy_setScore={init:function(){this.setHSV(312,.32,.62),this.appendDummyInput().appendTitle(d.setScore()).appendTitle(new a.FieldTextInput("0",a.FieldTextInput.numberValidator),"VALUE"),this.setInputsInline(!0),this.setPreviousStatement(!0),this.setNextStatement(!0),this.setTooltip(d.setScoreTooltip())}},m.flappy_setScore=function(){var a=window.parseInt(this.getTitleValue("VALUE"),10);return"Flappy.setScore('block_id_"+this.id+"', "+a+");\n"},delete a.Blocks.procedures_defreturn,delete a.Blocks.procedures_ifreturn}},{"../StudioApp":5,"../block_utils":77,"../locale":150,"../utils":318,"./locale":137}],137:[function(a,b){b.exports=window.blockly.flappy_locale},{}],131:[function(a,b,c){var d=a("../StudioApp").singleton;c.FlapHeight={VERY_SMALL:-6,SMALL:-8,NORMAL:-11,LARGE:-13,VERY_LARGE:-15},c.LevelSpeed={VERY_SLOW:1,SLOW:3,NORMAL:4,FAST:6,VERY_FAST:8},c.GapHeight={VERY_SMALL:65,SMALL:75,NORMAL:100,LARGE:125,VERY_LARGE:150},c.Gravity={VERY_LOW:.5,LOW:.75,NORMAL:1,HIGH:1.25,VERY_HIGH:1.5},c.random=function(a){var b=Math.floor(Math.random()*a.length);return a[b]},c.setScore=function(a,b){d.highlight(a),Flappy.playerScore=b,Flappy.displayScore()},c.setGravity=function(a,b){d.highlight(a),Flappy.gravity=b},c.setGround=function(a,b){d.highlight(a),Flappy.setGround(b)},c.setObstacle=function(a,b){d.highlight(a),Flappy.setObstacle(b)},c.setPlayer=function(a,b){d.highlight(a),Flappy.setPlayer(b)},c.setGapHeight=function(a,b){d.highlight(a),Flappy.setGapHeight(b)},c.setBackground=function(a,b){d.highlight(a),Flappy.setBackground(b)},c.setSpeed=function(a,b){d.highlight(a),Flappy.SPEED=b},c.playSound=function(a,b){d.highlight(a),d.playAudio(b)},c.flap=function(a,b){d.highlight(a),Flappy.flap(b)},c.endGame=function(a){d.highlight(a),Flappy.gameState=Flappy.GameStates.ENDING},c.incrementPlayerScore=function(a){d.highlight(a),Flappy.playerScore++,Flappy.displayScore()}},{"../StudioApp":5}]},{},[138]);