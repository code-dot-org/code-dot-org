require=function a(b,c,d){function e(g,h){if(!c[g]){if(!b[g]){var i="function"==typeof require&&require;if(!h&&i)return i(g,!0);if(f)return f(g,!0);var j=new Error("Cannot find module '"+g+"'");throw j.code="MODULE_NOT_FOUND",j}var k=c[g]={exports:{}};b[g][0].call(k.exports,function(a){var c=b[g][1][a];return e(c?c:a)},k,k.exports,a,b,c,d)}return c[g].exports}for(var f="function"==typeof require&&require,g=0;g<d.length;g++)e(d[g]);return e}({39:[function(a){(function(b){var c=a("../appMain");window.Bounce=a("./bounce"),"undefined"!=typeof b&&(b.Bounce=window.Bounce);var d=a("./blocks"),e=a("./levels"),f=a("./skins");window.bounceMain=function(a){a.skinsModule=f,a.blocksModule=d,c(window.Bounce,e,a)}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"../appMain":5,"./blocks":35,"./bounce":36,"./levels":38,"./skins":40}],40:[function(a,b,c){var d=a("../skins"),e={bounce:{nonDisappearingPegmanHittingObstacle:!0,ballYOffset:10}};c.load=function(a,b){var c=d.load(a,b),f=e[c.id];if(c.retro={background:c.assetUrl("retro_background.png"),tiles:c.assetUrl("retro_tiles_wall.png"),goalTiles:c.assetUrl("retro_tiles_goal.png"),paddle:c.assetUrl("retro_paddle.png"),ball:c.assetUrl("retro_ball.png")},c.tiles=c.assetUrl("tiles_wall.png"),c.goalTiles=c.assetUrl("tiles_goal.png"),c.goal=c.assetUrl("goal.png"),c.goalSuccess=c.assetUrl("goal_success.png"),c.ball=c.assetUrl("ball.png"),c.paddle=c.assetUrl("paddle.png"),c.obstacle=c.assetUrl("obstacle.png"),c.nonDisappearingPegmanHittingObstacle=f.nonDisappearingPegmanHittingObstacle?!0:!1,c.obstacleScale=f.obstacleScale||1,c.largerObstacleAnimationTiles=c.assetUrl(f.largerObstacleAnimationTiles),c.hittingWallAnimation=c.assetUrl(f.hittingWallAnimation),c.approachingGoalAnimation=c.assetUrl(f.approachingGoalAnimation),c.rubberSound=[c.assetUrl("wall.mp3"),c.assetUrl("wall.ogg")],c.flagSound=[c.assetUrl("win_goal.mp3"),c.assetUrl("win_goal.ogg")],c.crunchSound=[c.assetUrl("wall0.mp3"),c.assetUrl("wall0.ogg")],c.ballStartSound=[c.assetUrl("ball_start.mp3"),c.assetUrl("ball_start.ogg")],c.winPointSound=[c.assetUrl("1_we_win.mp3"),c.assetUrl("1_we_win.ogg")],c.winPoint2Sound=[c.assetUrl("2_we_win.mp3"),c.assetUrl("2_we_win.ogg")],c.losePointSound=[c.assetUrl("1_we_lose.mp3"),c.assetUrl("1_we_lose.ogg")],c.losePoint2Sound=[c.assetUrl("2_we_lose.mp3"),c.assetUrl("2_we_lose.ogg")],c.goal1Sound=[c.assetUrl("1_goal.mp3"),c.assetUrl("1_goal.ogg")],c.goal2Sound=[c.assetUrl("2_goal.mp3"),c.assetUrl("2_goal.ogg")],c.woodSound=[c.assetUrl("1_paddle_bounce.mp3"),c.assetUrl("1_paddle_bounce.ogg")],c.retroSound=[c.assetUrl("2_paddle_bounce.mp3"),c.assetUrl("2_paddle_bounce.ogg")],c.slapSound=[c.assetUrl("1_wall_bounce.mp3"),c.assetUrl("1_wall_bounce.ogg")],c.hitSound=[c.assetUrl("2_wall_bounce.mp3"),c.assetUrl("2_wall_bounce.ogg")],void 0!==f.background){var g=Math.floor(Math.random()*f.background);c.background=c.assetUrl("background"+g+".png")}else c.background=c.assetUrl("background.png");return c.pegmanHeight=f.pegmanHeight||52,c.pegmanWidth=f.pegmanWidth||49,c.ballYOffset=f.ballYOffset||0,c.paddleYOffset=f.paddleYOffset||0,c}},{"../skins":212}],38:[function(a,b){var c=(a("./tiles").Direction,a("../block_utils").createToolbox);b.exports={1:{requiredBlocks:[[{test:"moveLeft",type:"bounce_moveLeft"}]],scale:{snapRadius:2},softButtons:["leftButton"],map:[[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0],[8,0,0,16,0,0,0,0],[0,0,0,0,0,0,0,0]],toolbox:c('<block type="bounce_moveLeft"></block>           <block type="bounce_moveRight"></block>'),startBlocks:'<block type="bounce_whenLeft" deletable="false" x="20" y="20"></block>'},2:{ideal:5,requiredBlocks:[[{test:"moveRight",type:"bounce_moveRight"}],[{test:"moveLeft",type:"bounce_moveLeft"}]],scale:{snapRadius:2},softButtons:["leftButton","rightButton"],map:[[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0],[8,0,0,16,0,0,0,8],[0,0,0,0,0,0,0,0]],toolbox:c('<block type="bounce_moveLeft"></block>           <block type="bounce_moveRight"></block>'),startBlocks:'<block type="bounce_whenLeft" deletable="false" x="20" y="20"></block>       <block type="bounce_whenRight" deletable="false" x="180" y="20"></block>'},3:{requiredBlocks:[[{test:"moveUp",type:"bounce_moveUp"}]],scale:{snapRadius:2},softButtons:["upButton"],map:[[0,0,0,8,0,0,0,0],[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0],[0,0,0,16,0,0,0,0],[0,0,0,0,0,0,0,0]],toolbox:c('<block type="bounce_moveLeft"></block>           <block type="bounce_moveRight"></block>           <block type="bounce_moveUp"></block>           <block type="bounce_moveDown"></block>'),startBlocks:'<block type="bounce_whenUp" deletable="false" x="20" y="20"></block>'},4:{requiredBlocks:[[{test:"moveRight",type:"bounce_moveRight"}],[{test:"moveLeft",type:"bounce_moveLeft"}],[{test:"moveUp",type:"bounce_moveUp"}],[{test:"moveDown",type:"bounce_moveDown"}]],scale:{snapRadius:2},softButtons:["leftButton","rightButton","downButton","upButton"],map:[[0,0,8,0,0,0,0,0],[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,8],[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0],[8,0,0,0,0,0,0,0],[0,0,0,16,0,0,0,0],[0,0,0,0,0,8,0,0]],toolbox:c('<block type="bounce_moveLeft"></block>           <block type="bounce_moveRight"></block>           <block type="bounce_moveUp"></block>           <block type="bounce_moveDown"></block>'),startBlocks:'<block type="bounce_whenLeft" deletable="false" x="20" y="20"></block>       <block type="bounce_whenRight" deletable="false" x="180" y="20"></block>       <block type="bounce_whenUp" deletable="false" x="20" y="120"></block>       <block type="bounce_whenDown" deletable="false" x="180" y="120"></block>'},5:{timeoutFailureTick:100,requiredBlocks:[[{test:"bounceBall",type:"bounce_bounceBall"}]],scale:{snapRadius:2},ballDirection:1.285*Math.PI,map:[[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0],[32,0,0,0,0,0,0,0],[0,0,0,0,0,0,4,0],[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0],[0,0,0,16,0,0,0,0]],toolbox:c('<block type="bounce_bounceBall"></block>           <block type="bounce_playSound"></block>'),startBlocks:'<block type="bounce_whenPaddleCollided" deletable="false" x="20" y="20"></block>'},6:{timeoutFailureTick:140,requiredBlocks:[[{test:"bounceBall",type:"bounce_bounceBall"}]],scale:{snapRadius:2},ballDirection:1.285*Math.PI,map:[[1,1,33,1,1,1,1,1],[1,0,0,0,0,0,0,1],[1,0,0,0,0,0,0,1],[1,0,0,0,0,0,0,1],[1,0,0,0,0,0,4,1],[1,0,0,0,0,0,0,1],[1,0,0,0,0,0,0,1],[1,0,0,16,0,0,0,1]],toolbox:c('<block type="bounce_bounceBall"></block>           <block type="bounce_playSound"></block>'),startBlocks:'<block type="bounce_whenPaddleCollided" deletable="false" x="20" y="20"></block>       <block type="bounce_whenWallCollided" deletable="false" x="20" y="120"></block>'},7:{timeoutFailureTick:900,requiredBlocks:[[{test:"moveLeft",type:"bounce_moveLeft"}],[{test:"moveRight",type:"bounce_moveRight"}],[{test:"bounceBall",type:"bounce_bounceBall"}]],scale:{snapRadius:2},softButtons:["leftButton","rightButton"],failOnBallExit:!0,map:[[1,1,1,1,1,1,1,1],[1,0,0,0,0,32,0,1],[1,0,0,0,0,0,0,1],[1,0,0,0,0,0,0,1],[1,0,0,0,0,0,4,1],[1,0,0,0,0,0,0,1],[1,0,0,0,0,0,0,1],[1,0,16,0,0,0,0,1]],toolbox:c('<block type="bounce_moveLeft"></block>           <block type="bounce_moveRight"></block>           <block type="bounce_bounceBall"></block>           <block type="bounce_playSound"></block>'),startBlocks:'<block type="bounce_whenLeft" deletable="false" x="20" y="20"></block>       <block type="bounce_whenRight" deletable="false" x="180" y="20"></block>       <block type="bounce_whenPaddleCollided" deletable="false" x="20" y="120"></block>       <block type="bounce_whenWallCollided" deletable="false" x="20" y="220"></block>'},10:{requiredBlocks:[[{test:"moveLeft",type:"bounce_moveLeft"}],[{test:"moveRight",type:"bounce_moveRight"}],[{test:"bounceBall",type:"bounce_bounceBall"}],[{test:"incrementPlayerScore",type:"bounce_incrementPlayerScore"}],[{test:"incrementOpponentScore",type:"bounce_incrementOpponentScore"}]],scale:{snapRadius:2},softButtons:["leftButton","rightButton"],goal:{successCondition:function(){return Bounce.opponentScore>=2}},respawnBalls:!0,map:[[1,1,2,2,2,2,1,1],[1,0,0,0,0,0,0,1],[1,0,0,0,0,0,4,1],[1,0,0,0,0,0,0,1],[1,0,0,0,0,0,0,1],[1,0,0,0,0,0,0,1],[1,0,0,0,0,0,0,1],[1,0,16,0,0,0,0,1]],toolbox:c('<block type="bounce_moveLeft"></block>           <block type="bounce_moveRight"></block>           <block type="bounce_bounceBall"></block>           <block type="bounce_playSound"></block>           <block type="bounce_incrementPlayerScore"></block>           <block type="bounce_incrementOpponentScore"></block>'),startBlocks:'<block type="bounce_whenLeft" deletable="false" x="20" y="20"></block>       <block type="bounce_whenRight" deletable="false" x="180" y="20"></block>       <block type="bounce_whenPaddleCollided" deletable="false" x="20" y="100"></block>       <block type="bounce_whenWallCollided" deletable="false" x="20" y="180"></block>       <block type="bounce_whenBallInGoal" deletable="false" x="20" y="260"></block>       <block type="bounce_whenBallMissesPaddle" deletable="false" x="20" y="340"></block>'},11:{requiredBlocks:[[{test:"moveLeft",type:"bounce_moveLeft"}],[{test:"moveRight",type:"bounce_moveRight"}],[{test:"bounceBall",type:"bounce_bounceBall"}],[{test:"incrementPlayerScore",type:"bounce_incrementPlayerScore"}],[{test:"incrementOpponentScore",type:"bounce_incrementOpponentScore"}],[{test:"launchBall",type:"bounce_launchBall"}]],scale:{snapRadius:2},softButtons:["leftButton","rightButton"],minWorkspaceHeight:750,goal:{successCondition:function(){return Bounce.opponentScore>=2}},map:[[1,1,2,2,2,2,1,1],[1,0,0,0,0,0,0,1],[1,0,0,0,0,0,0,1],[1,0,0,0,0,0,0,1],[1,0,0,0,0,0,0,1],[1,0,0,0,0,0,0,1],[1,0,0,0,0,0,0,1],[1,0,16,0,0,0,0,1]],toolbox:c('<block type="bounce_moveLeft"></block>           <block type="bounce_moveRight"></block>           <block type="bounce_bounceBall"></block>           <block type="bounce_playSound"></block>           <block type="bounce_incrementPlayerScore"></block>           <block type="bounce_incrementOpponentScore"></block>           <block type="bounce_launchBall"></block>           <block type="bounce_setPaddleSpeed"></block>           <block type="bounce_setBallSpeed"></block>           <block type="bounce_setBackground"></block>           <block type="bounce_setBall"></block>           <block type="bounce_setPaddle"></block>'),startBlocks:'<block type="when_run" deletable="false" x="20" y="20"></block>       <block type="bounce_whenLeft" deletable="false" x="20" y="180"></block>       <block type="bounce_whenRight" deletable="false" x="180" y="180"></block>       <block type="bounce_whenPaddleCollided" deletable="false" x="20" y="270"></block>       <block type="bounce_whenWallCollided" deletable="false" x="20" y="370"></block>       <block type="bounce_whenBallInGoal" deletable="false" x="20" y="470"></block>       <block type="bounce_whenBallMissesPaddle" deletable="false" x="20" y="590"></block>'},12:{requiredBlocks:[],scale:{snapRadius:2},softButtons:["leftButton","rightButton"],minWorkspaceHeight:800,freePlay:!0,map:[[1,1,2,2,2,2,1,1],[1,0,0,0,0,0,0,1],[1,0,0,0,0,0,0,1],[1,0,0,0,0,0,0,1],[1,0,0,0,0,0,0,1],[1,0,0,0,0,0,0,1],[1,0,0,0,0,0,0,1],[1,0,16,0,0,0,0,1]],toolbox:c('<block type="bounce_moveLeft"></block>           <block type="bounce_moveRight"></block>           <block type="bounce_bounceBall"></block>           <block type="bounce_playSound"></block>           <block type="bounce_incrementPlayerScore"></block>           <block type="bounce_incrementOpponentScore"></block>           <block type="bounce_launchBall"></block>           <block type="bounce_setPaddleSpeed"></block>           <block type="bounce_setBallSpeed"></block>           <block type="bounce_setBackground"></block>           <block type="bounce_setBall"></block>           <block type="bounce_setPaddle"></block>'),startBlocks:'<block type="when_run" deletable="false" x="20" y="20"></block>       <block type="bounce_whenLeft" deletable="false" x="20" y="220"></block>       <block type="bounce_whenRight" deletable="false" x="180" y="220"></block>       <block type="bounce_whenPaddleCollided" deletable="false" x="20" y="310"></block>       <block type="bounce_whenWallCollided" deletable="false" x="20" y="410"></block>       <block type="bounce_whenBallInGoal" deletable="false" x="20" y="510"></block>       <block type="bounce_whenBallMissesPaddle" deletable="false" x="20" y="630"></block>'}}},{"../block_utils":32,"./tiles":41}],36:[function(a,b){"use strict";var c=a("../StudioApp").singleton,d=(a("../../locale/current/common"),a("../../locale/current/bounce")),e=(a("../skins"),a("./tiles")),f=a("../codegen"),g=a("./api"),h=a("../templates/page.html.ejs"),i=a("../dom"),j=a("../hammer"),k=(a("../utils"),a("../dropletUtils")),l=a("../constants"),m=l.KeyCodes,n=(e.Direction,e.SquareType),o=c.ResultType,p=c.TestResults,q=b.exports;q.keyState={},q.gesturesObserved={},q.btnState={};var r={UP:0,DOWN:1};q.BallFlags={MISSED_PADDLE:1,IN_GOAL:2,LAUNCHING:4};var s,t,u={LEFT:"leftButton",UP:"upButton",RIGHT:"rightButton",DOWN:"downButton"},v=25;c.setCheckForEmptyBlocks(!0);q.scale={snapRadius:1,stepSpeed:33};var w={text:d.shareBounceTwitter(),hashtag:"BounceCode"},x=function(){q.map=s.map,q.timeoutFailureTick=s.timeoutFailureTick||1/0,q.minWorkspaceHeight=s.minWorkspaceHeight,q.softButtons_=s.softButtons||[],q.respawnBalls=s.respawnBalls||!1,q.failOnBallExit=s.failOnBallExit||!1;for(var a in s.scale)q.scale[a]=s.scale[a];q.ROWS=q.map.length,q.COLS=q.map[0].length,y(),q.SQUARE_SIZE=50,q.PEGMAN_HEIGHT=t.pegmanHeight,q.PEGMAN_WIDTH=t.pegmanWidth,q.BALL_Y_OFFSET=t.ballYOffset,q.PADDLE_Y_OFFSET=t.paddleYOffset,q.MARKER_HEIGHT=43,q.MARKER_WIDTH=50,q.MAZE_WIDTH=q.SQUARE_SIZE*q.COLS,q.MAZE_HEIGHT=q.SQUARE_SIZE*q.ROWS,q.PATH_WIDTH=q.SQUARE_SIZE/3},y=function(){q.wallMap=new Array(q.ROWS);for(var a=0;a<q.ROWS;a++)q.wallMap[a]=new Array(q.COLS)},z=a("../timeoutList"),A={"1X101":[1,0],"11X10":[2,1],"11XX0":[2,1],"1XX11":[2,0],"1X001":[1,0],"1X100":[1,0],"1101X":[0,1],"110XX":[0,1],"1X11X":[0,0],null0:[1,1]},B={"1X101":[2,3],"1XX11":[3,3],"1X001":[3,3],"1X11X":[0,2],"1X100":[0,2],null0:[1,1]},C=function(a,b){return void 0===q.map[b]||void 0===q.map[b][a]?"X":q.map[b][a]&n.WALL?"1":"0"},D=function(a,b){return void 0===q.map[b]||void 0===q.map[b][a]?"X":q.map[b][a]&n.GOAL?"1":"0"};q.createBallElements=function(a){var b=document.getElementById("svgBounce"),c=document.createElementNS(Blockly.SVG_NS,"clipPath");c.setAttribute("id","ballClipPath"+a);var d=document.createElementNS(Blockly.SVG_NS,"rect");d.setAttribute("id","ballClipRect"+a),d.setAttribute("width",q.PEGMAN_WIDTH),d.setAttribute("height",q.PEGMAN_HEIGHT),c.appendChild(d),b.appendChild(c);var e=document.createElementNS(Blockly.SVG_NS,"image");e.setAttribute("id","ball"+a),e.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",q.ballImage),e.setAttribute("height",q.PEGMAN_HEIGHT),e.setAttribute("width",q.PEGMAN_WIDTH),e.setAttribute("clip-path","url(#ballClipPath"+a+")"),b.appendChild(e)},q.deleteBallElements=function(a){var b=document.getElementById("ballClipPath"+a);b.parentNode.removeChild(b);var c=document.getElementById("ball"+a);c.parentNode.removeChild(c)};var E=function(){var a,b,c,d,e=document.getElementById("svgBounce");e.setAttribute("width",q.MAZE_WIDTH),e.setAttribute("height",q.MAZE_HEIGHT);var f=new j(e);f.on("drag",q.onSvgDrag);var g=document.getElementById("visualizationColumn");g.style.width=q.MAZE_WIDTH+"px",t.background&&(d=document.createElementNS(Blockly.SVG_NS,"image"),d.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",t.background),d.setAttribute("id","background"),d.setAttribute("height",q.MAZE_HEIGHT),d.setAttribute("width",q.MAZE_WIDTH),d.setAttribute("x",0),d.setAttribute("y",0),e.appendChild(d));var h=0;for(c=0;c<q.ROWS;c++)for(b=0;b<q.COLS;b++){var i,k,l;if(d=C(b,c)+C(b,c-1)+C(b+1,c)+C(b,c+1)+C(b-1,c),A[d]?(i=A[d][0],k=A[d][1],l=t.tiles):(d=D(b,c)+D(b,c-1)+D(b+1,c)+D(b,c+1)+D(b-1,c),B[d]||(d="null0"),i=B[d][0],k=B[d][1],l=t.goalTiles),"null0"!=d){var m=document.createElementNS(Blockly.SVG_NS,"clipPath");m.setAttribute("id","tileClipPath"+h);var o=document.createElementNS(Blockly.SVG_NS,"rect");o.setAttribute("width",q.SQUARE_SIZE),o.setAttribute("height",q.SQUARE_SIZE),o.setAttribute("x",b*q.SQUARE_SIZE),o.setAttribute("y",c*q.SQUARE_SIZE),m.appendChild(o),e.appendChild(m);var p=document.createElementNS(Blockly.SVG_NS,"image");p.setAttribute("id","tileElement"+h),p.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",l),p.setAttribute("height",4*q.SQUARE_SIZE),p.setAttribute("width",5*q.SQUARE_SIZE),p.setAttribute("clip-path","url(#tileClipPath"+h+")"),p.setAttribute("x",(b-i)*q.SQUARE_SIZE),p.setAttribute("y",(c-k)*q.SQUARE_SIZE),e.appendChild(p);var r=document.createElementNS(Blockly.SVG_NS,"animate");r.setAttribute("id","tileAnimation"+h),r.setAttribute("attributeType","CSS"),r.setAttribute("attributeName","opacity"),r.setAttribute("from",1),r.setAttribute("to",0),r.setAttribute("dur","1s"),r.setAttribute("begin","indefinite"),p.appendChild(r)}h++}for(q.ballImage=t.ball,a=0;a<q.ballCount;a++)q.createBallElements(a);if(q.paddleStart_){var s=document.createElementNS(Blockly.SVG_NS,"clipPath");s.setAttribute("id","paddleClipPath");var u=document.createElementNS(Blockly.SVG_NS,"rect");u.setAttribute("id","paddleClipRect"),u.setAttribute("width",q.PEGMAN_WIDTH),u.setAttribute("height",q.PEGMAN_HEIGHT),s.appendChild(u),e.appendChild(s);var v=document.createElementNS(Blockly.SVG_NS,"image");v.setAttribute("id","paddle"),v.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",t.paddle),v.setAttribute("height",q.PEGMAN_HEIGHT),v.setAttribute("width",q.PEGMAN_WIDTH),v.setAttribute("clip-path","url(#paddleClipPath)"),e.appendChild(v)}if(q.paddleFinish_)for(a=0;a<q.paddleFinishCount;a++){var w=document.createElementNS(Blockly.SVG_NS,"image");w.setAttribute("id","paddlefinish"+a),w.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",t.goal),w.setAttribute("height",q.MARKER_HEIGHT),w.setAttribute("width",q.MARKER_WIDTH),e.appendChild(w)}if(q.ballFinish_){var x=document.createElementNS(Blockly.SVG_NS,"image");x.setAttribute("id","ballfinish"),x.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",t.goal),x.setAttribute("height",q.MARKER_HEIGHT),x.setAttribute("width",q.MARKER_WIDTH),e.appendChild(x)}var y=document.createElementNS(Blockly.SVG_NS,"text");if(y.setAttribute("id","score"),y.setAttribute("class","bounce-score"),y.setAttribute("x",q.MAZE_WIDTH/2),y.setAttribute("y",60),y.appendChild(document.createTextNode("0")),y.setAttribute("visibility","hidden"),e.appendChild(y),t.hittingWallAnimation){var z=document.createElementNS(Blockly.SVG_NS,"image");z.setAttribute("id","wallAnimation"),z.setAttribute("height",q.SQUARE_SIZE),z.setAttribute("width",q.SQUARE_SIZE),z.setAttribute("visibility","hidden"),e.appendChild(z)}var E=0;for(c=0;c<q.ROWS;c++)for(b=0;b<q.COLS;b++){if(q.map[c][b]==n.OBSTACLE){var F=document.createElementNS(Blockly.SVG_NS,"image");F.setAttribute("id","obstacle"+E),F.setAttribute("height",q.MARKER_HEIGHT*t.obstacleScale),F.setAttribute("width",q.MARKER_WIDTH*t.obstacleScale),F.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",t.obstacle),F.setAttribute("x",q.SQUARE_SIZE*(b+.5)-F.getAttribute("width")/2),F.setAttribute("y",q.SQUARE_SIZE*(c+.9)-F.getAttribute("height")),e.appendChild(F)}++E}};q.calcDistance=function(a,b){return Math.sqrt(a*a+b*b)};var F=function(a,b,c){var d=c||.01;return Math.abs(a-b)<d};q.isBallOutOfBounds=function(a){return q.ballX[a]<0?!0:q.ballX[a]>q.COLS-1?!0:q.ballY[a]<e.Y_TOP_BOUNDARY?!0:q.ballY[a]>q.ROWS-1?!0:!1};var G=function(a,b,c){return function(){var d=Array.prototype.slice.apply(arguments).concat(c);b.apply(a,d)}};q.callUserGeneratedCode=function(a){try{a.call(q,c,g)}catch(b){console&&console.log(b)}},q.onTick=function(){q.tickCount++,1===q.tickCount&&q.callUserGeneratedCode(q.whenGameStarts);for(var a in m)if(q.keyState[m[a]]&&"keydown"==q.keyState[m[a]])switch(m[a]){case m.LEFT:q.callUserGeneratedCode(q.whenLeft);break;case m.UP:q.callUserGeneratedCode(q.whenUp);break;case m.RIGHT:q.callUserGeneratedCode(q.whenRight);break;case m.DOWN:q.callUserGeneratedCode(q.whenDown)}for(var b in u)if(q.btnState[u[b]]&&q.btnState[u[b]]==r.DOWN)switch(u[b]){case u.LEFT:q.callUserGeneratedCode(q.whenLeft);break;case u.UP:q.callUserGeneratedCode(q.whenUp);break;case u.RIGHT:q.callUserGeneratedCode(q.whenRight);break;case u.DOWN:q.callUserGeneratedCode(q.whenDown)}for(var c in q.gesturesObserved){switch(c){case"left":q.callUserGeneratedCode(q.whenLeft);break;case"up":q.callUserGeneratedCode(q.whenUp);break;case"right":q.callUserGeneratedCode(q.whenRight);break;case"down":q.callUserGeneratedCode(q.whenDown)}0===q.gesturesObserved[c]--&&delete q.gesturesObserved[c]}for(var d=0;d<q.ballCount;d++){var f=q.ballSpeed[d]*Math.sin(q.ballDir[d]),g=-q.ballSpeed[d]*Math.cos(q.ballDir[d]),h=q.ballX[d]>=0&&q.ballX[d]<=q.COLS-1,i=q.ballY[d]>=e.Y_TOP_BOUNDARY,j=q.ballY[d]<=q.ROWS-1;if(q.ballX[d]+=f,q.ballY[d]+=g,0===(q.ballFlags[d]&(q.BallFlags.MISSED_PADDLE|q.BallFlags.IN_GOAL))){var k=q.ballX[d]>=0&&q.ballX[d]<=q.COLS-1,l=q.ballY[d]>=e.Y_TOP_BOUNDARY,p=q.ballY[d]<=q.ROWS-1;i&&h&&!k&&q.callUserGeneratedCode(q.whenWallCollided),h&&i&&!l&&(q.map[0][Math.round(q.ballX[d])]&n.GOAL?(q.callUserGeneratedCode(q.whenBallInGoal),q.ballFlags[d]|=q.BallFlags.IN_GOAL,z.setTimeout(G(this,q.moveBallOffscreen,d),1e3),q.respawnBalls&&q.launchBall(d)):q.callUserGeneratedCode(q.whenWallCollided));var s=q.ballX[d]-q.paddleX,t=q.ballY[d]-q.paddleY,v=q.calcDistance(s,t);v<e.PADDLE_BALL_COLLIDE_DISTANCE?q.callUserGeneratedCode(q.whenPaddleCollided):j&&!p&&(q.callUserGeneratedCode(q.whenBallMissesPaddle),q.ballFlags[d]|=q.BallFlags.MISSED_PADDLE,z.setTimeout(G(this,q.moveBallOffscreen,d),1e3),q.respawnBalls?q.launchBall(d):q.failOnBallExit&&(q.result=o.FAILURE,q.onPuzzleComplete()))}q.displayBall(d,q.ballX[d],q.ballY[d])}q.displayPaddle(q.paddleX,q.paddleY),J()&&q.onPuzzleComplete()},q.onSvgDrag=function(a){q.intervalId&&(q.gesturesObserved[a.gesture.direction]=Math.round(a.gesture.distance/v),a.gesture.preventDefault())},q.onKey=function(a){q.keyState[a.keyCode]=a.type,q.intervalId&&a.keyCode>=m.LEFT&&a.keyCode<=m.DOWN&&a.preventDefault()},q.onArrowButtonDown=function(a,b){q.btnState[b]=r.DOWN,a.preventDefault()},q.onArrowButtonUp=function(a,b){q.btnState[b]=r.UP},q.onMouseUp=function(){q.btnState={}},q.init=function(b){q.clearEventHandlersKillTickLoop(),t=b.skin,s=b.level,x(),window.addEventListener("keydown",q.onKey,!1),window.addEventListener("keyup",q.onKey,!1),b.html=h({assetUrl:c.assetUrl,data:{localeDirection:c.localeDirection(),visualization:a("./visualization.html.ejs")(),controls:a("./controls.html.ejs")({assetUrl:c.assetUrl}),blockUsed:void 0,idealBlockNumber:void 0,editCode:s.editCode,blockCounterClass:"block-counter-default"}}),b.loadAudio=function(){c.loadAudio(t.winSound,"win"),c.loadAudio(t.startSound,"start"),c.loadAudio(t.ballStartSound,"ballstart"),c.loadAudio(t.failureSound,"failure"),c.loadAudio(t.rubberSound,"rubber"),c.loadAudio(t.crunchSound,"crunch"),c.loadAudio(t.flagSound,"flag"),c.loadAudio(t.winPointSound,"winpoint"),c.loadAudio(t.winPoint2Sound,"winpoint2"),c.loadAudio(t.losePointSound,"losepoint"),c.loadAudio(t.losePoint2Sound,"losepoint2"),c.loadAudio(t.goal1Sound,"goal1"),c.loadAudio(t.goal2Sound,"goal2"),c.loadAudio(t.woodSound,"wood"),c.loadAudio(t.retroSound,"retro"),c.loadAudio(t.slapSound,"slap"),c.loadAudio(t.hitSound,"hit")},b.afterInject=function(){for(var a in u)i.addClickTouchEvent(document.getElementById(u[a]),G(this,q.onArrowButtonUp,u[a])),i.addMouseDownTouchEvent(document.getElementById(u[a]),G(this,q.onArrowButtonDown,u[a]));document.addEventListener("mouseup",q.onMouseUp,!1),Blockly.HSV_SATURATION=.6,Blockly.SNAP_RADIUS*=q.scale.snapRadius,q.ballStart_=[],q.ballX=[],q.ballY=[],q.ballDir=[],q.ballSpeed=[],q.ballFlags=[],q.ballCount=0,q.originalBallCount=0,q.paddleFinishCount=0,q.defaultBallSpeed=s.ballSpeed||e.DEFAULT_BALL_SPEED,q.defaultBallDir=s.ballDirection||e.DEFAULT_BALL_DIRECTION;for(var b=0;b<q.ROWS;b++)for(var c=0;c<q.COLS;c++)q.map[b][c]&n.PADDLEFINISH?(0===q.paddleFinishCount&&(q.paddleFinish_=[]),q.paddleFinish_[q.paddleFinishCount]={x:c,y:b},q.paddleFinishCount++):q.map[b][c]&n.BALLSTART?(q.ballStart_[q.ballCount]={x:c,y:b},q.ballCount++):q.map[b][c]&n.PADDLESTART?q.paddleStart_={x:c,y:b}:q.map[b][c]&n.BALLFINISH?q.ballFinish_={x:c,y:b}:q.map[b][c]&n.GOAL&&(q.goalLocated_=!0);q.originalBallCount=q.ballCount,E()},b.blockArrangement={when_run:{x:20,y:20},bounce_whenLeft:{x:20,y:220},bounce_whenRight:{x:180,y:220},bounce_whenPaddleCollided:{x:20,y:310},bounce_whenWallCollided:{x:20,y:410},bounce_whenBallInGoal:{x:20,y:510},bounce_whenBallMissesPaddle:{x:20,y:630}},b.twitter=w,b.makeYourOwn=b.share,b.makeString=d.makeYourOwn(),b.makeUrl="http://code.org/bounce",b.makeImage=c.assetUrl("media/promo.png"),b.enableShowCode=!1,b.enableShowBlockCount=!1,c.init(b);var f=document.getElementById("finishButton");i.addClickTouchEvent(f,q.onPuzzleComplete)},q.clearEventHandlersKillTickLoop=function(){q.whenWallCollided=null,q.whenBallInGoal=null,q.whenBallMissesPaddle=null,q.whenPaddleCollided=null,q.whenDown=null,q.whenLeft=null,q.whenRight=null,q.whenUp=null,q.whenGameStarts=null,q.intervalId&&window.clearInterval(q.intervalId),q.intervalId=0,z.clearTimeouts()},q.moveBallOffscreen=function(a){q.ballX[a]=100,q.ballY[a]=100,q.ballDir[a]=0,q.ballSpeed[a]=0},q.playSoundAndResetBall=function(a){q.resetBall(a,{randomPosition:!0}),c.playAudio("ballstart")},q.launchBall=function(a){q.ballFlags[a]|=q.BallFlags.LAUNCHING,z.setTimeout(G(this,q.playSoundAndResetBall,a),3e3)},q.resetBall=function(a,b){var c=b.randomPosition||"undefined"==typeof q.ballStart_[a];q.ballX[a]=c?Math.floor(Math.random()*q.COLS):q.ballStart_[a].x,q.ballY[a]=c?e.DEFAULT_BALL_START_Y:q.ballStart_[a].y,q.ballDir[a]=c?Math.random()*Math.PI/2+.75*Math.PI:q.defaultBallDir,q.ballSpeed[a]=q.currentBallSpeed,q.ballFlags[a]=0,q.displayBall(a,q.ballX[a],q.ballY[a])},c.reset=function(){var a;q.clearEventHandlersKillTickLoop();var b=0;for(a=0;a<q.softButtons_.length;a++)document.getElementById(q.softButtons_[a]).style.display="inline",b++;if(b){var c=document.getElementById("soft-buttons");c.className="soft-buttons-"+b}for(q.gesturesObserved={},q.playerScore=0,q.opponentScore=0,document.getElementById("score").setAttribute("visibility","hidden"),q.setBackground("hardcourt"),q.setBall("hardcourt"),q.setPaddle("hardcourt"),q.currentBallSpeed=q.defaultBallSpeed,a=q.originalBallCount;a<q.ballCount;a++)q.deleteBallElements(a);for(q.ballCount=q.originalBallCount,a=0;a<q.ballCount;a++)q.resetBall(a,{});q.paddleX=q.paddleStart_.x,q.paddleY=q.paddleStart_.y,q.paddleSpeed=e.DEFAULT_PADDLE_SPEED,q.displayPaddle(q.paddleX,q.paddleY);document.getElementById("svgBounce");if(q.paddleFinish_)for(a=0;a<q.paddleFinishCount;a++){q.paddleFinish_[a].finished=!1;var d=document.getElementById("paddlefinish"+a);d.setAttribute("x",q.SQUARE_SIZE*(q.paddleFinish_[a].x+.5)-d.getAttribute("width")/2),d.setAttribute("y",q.SQUARE_SIZE*(q.paddleFinish_[a].y+.9)-d.getAttribute("height")),d.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",t.goal)}if(q.ballFinish_){var f=document.getElementById("ballfinish");f.setAttribute("x",q.SQUARE_SIZE*(q.ballFinish_.x+.5)-f.getAttribute("width")/2),f.setAttribute("y",q.SQUARE_SIZE*(q.ballFinish_.y+.9)-f.getAttribute("height")),f.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",t.goal)}var g,h,i=0;for(h=0;h<q.ROWS;h++)for(g=0;g<q.COLS;g++){var j=document.getElementById("obstacle"+i);j&&j.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",t.obstacle),++i}var k=0;for(h=0;h<q.ROWS;h++)for(g=0;g<q.COLS;g++){var l=document.getElementById("tileClipPath"+k);l&&l.setAttribute("visibility","visible");var m=document.getElementById("tileElement"+k);m&&m.setAttribute("opacity",1),k++}},c.runButtonClick=function(){var a=document.getElementById("runButton"),b=document.getElementById("resetButton");if(b.style.minWidth||(b.style.minWidth=a.offsetWidth+"px"),c.toggleRunReset("reset"),Blockly.mainBlockSpace.traceOn(!0),c.reset(!1),c.attempts++,q.execute(),s.freePlay&&!c.hideSource){var d=document.getElementById("share-cell");d.className="share-cell-enabled"}q.goalLocated_&&(document.getElementById("score").setAttribute("visibility","visible"),q.displayScore())};var H=function(){q.waitingForReport||c.displayFeedback({app:"bounce",skin:t.id,feedbackType:q.testResults,response:q.response,level:s,showingSharing:s.freePlay,twitter:w,appStrings:{reinfFeedbackMsg:d.reinfFeedbackMsg(),sharingText:d.shareGame()}})};q.onReportComplete=function(a){q.response=a,q.waitingForReport=!1,H()},q.execute=function(){var a=Blockly.Generator.blockSpaceToCode("JavaScript","bounce_whenRun");q.result=o.UNSET,q.testResults=p.NO_TESTS_RUN,q.waitingForReport=!1,q.response=null,s.editCode&&(a=k.generateCodeAliases(null,"Bounce"),a+=c.editor.getValue());var b=Blockly.Generator.blockSpaceToCode("JavaScript","bounce_whenWallCollided"),d=f.functionFromCode(b,{StudioApp:c,Bounce:g}),e=Blockly.Generator.blockSpaceToCode("JavaScript","bounce_whenBallInGoal"),h=f.functionFromCode(e,{StudioApp:c,Bounce:g}),i=Blockly.Generator.blockSpaceToCode("JavaScript","bounce_whenBallMissesPaddle"),j=f.functionFromCode(i,{StudioApp:c,Bounce:g}),l=Blockly.Generator.blockSpaceToCode("JavaScript","bounce_whenPaddleCollided"),m=f.functionFromCode(l,{StudioApp:c,Bounce:g}),n=Blockly.Generator.blockSpaceToCode("JavaScript","bounce_whenLeft"),r=f.functionFromCode(n,{StudioApp:c,Bounce:g}),t=Blockly.Generator.blockSpaceToCode("JavaScript","bounce_whenRight"),u=f.functionFromCode(t,{StudioApp:c,Bounce:g}),v=Blockly.Generator.blockSpaceToCode("JavaScript","bounce_whenUp"),w=f.functionFromCode(v,{StudioApp:c,Bounce:g}),x=Blockly.Generator.blockSpaceToCode("JavaScript","bounce_whenDown"),y=f.functionFromCode(x,{StudioApp:c,Bounce:g}),z=Blockly.Generator.blockSpaceToCode("JavaScript","when_run"),A=f.functionFromCode(z,{StudioApp:c,Bounce:g});c.playAudio(q.ballCount>0?"ballstart":"start"),c.reset(!1),q.whenWallCollided=d,q.whenBallInGoal=h,q.whenBallMissesPaddle=j,q.whenPaddleCollided=m,q.whenLeft=r,q.whenRight=u,q.whenUp=w,q.whenDown=y,q.whenGameStarts=A,q.tickCount=0,q.intervalId=window.setInterval(q.onTick,q.scale.stepSpeed)},q.onPuzzleComplete=function(){s.freePlay&&(q.result=o.SUCCESS),q.clearEventHandlersKillTickLoop();var a=q.result==o.SUCCESS;q.testResults=s.freePlay?p.FREE_PLAY:c.getTestResults(a),c.playAudio(q.testResults>=p.FREE_PLAY?"win":"failure"),s.editCode&&(q.testResults=a?p.ALL_PASS:p.TOO_FEW_BLOCKS_FAIL);var b=Blockly.Xml.blockSpaceToDom(Blockly.mainBlockSpace),d=Blockly.Xml.domToText(b);q.waitingForReport=!0,c.report({app:"bounce",level:s.id,result:q.result===o.SUCCESS,testResult:q.testResults,program:encodeURIComponent(d),onComplete:q.onReportComplete})},q.setTileTransparent=function(){for(var a=0,b=0;b<q.ROWS;b++)for(var c=0;c<q.COLS;c++){var d=document.getElementById("tileElement"+a),e=document.getElementById("tileAnimation"+a);d&&d.setAttribute("opacity",0),e&&e.beginElement(),a++}},q.displayBall=function(a,b,c){var d=document.getElementById("ball"+a);d.setAttribute("x",b*q.SQUARE_SIZE),d.setAttribute("y",c*q.SQUARE_SIZE+q.BALL_Y_OFFSET);var e=document.getElementById("ballClipRect"+a);e.setAttribute("x",b*q.SQUARE_SIZE),e.setAttribute("y",d.getAttribute("y"))},q.displayPaddle=function(a,b){var c=document.getElementById("paddle");c.setAttribute("x",a*q.SQUARE_SIZE),c.setAttribute("y",b*q.SQUARE_SIZE+q.PADDLE_Y_OFFSET);var d=document.getElementById("paddleClipRect");d.setAttribute("x",a*q.SQUARE_SIZE),d.setAttribute("y",c.getAttribute("y"))},q.displayScore=function(){var a=document.getElementById("score");a.textContent=d.scoreText({playerScore:q.playerScore,opponentScore:q.opponentScore})
};var I=function(a){return"hardcourt"===a?t:t[a]};q.setBackground=function(a){var b=document.getElementById("background");b.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",I(a).background);for(var c=0,d=0;d<q.ROWS;d++)for(var e=0;e<q.COLS;e++){var f,g=!1,h=C(e,d)+C(e,d-1)+C(e+1,d)+C(e,d+1)+C(e-1,d);A[h]?f=I(a).tiles:(h=D(e,d)+D(e,d-1)+D(e+1,d)+D(e,d+1)+D(e-1,d),B[h]||(g=!0),f=I(a).goalTiles),g||(b=document.getElementById("tileElement"+c),b.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",f)),c++}},q.setBall=function(a){q.ballImage=I(a).ball;for(var b=0;b<q.ballCount;b++){var c=document.getElementById("ball"+b);c.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",q.ballImage)}},q.setPaddle=function(a){var b=document.getElementById("paddle");b.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",I(a).paddle)},q.timedOut=function(){return q.tickCount>q.timeoutFailureTick},q.allFinishesComplete=function(){var a;if(q.paddleFinish_){var b,d;for(a=0,b=0;a<q.paddleFinishCount;a++)if(q.paddleFinish_[a].finished)b++;else if(F(q.paddleX,q.paddleFinish_[a].x,e.FINISH_COLLIDE_DISTANCE)&&F(q.paddleY,q.paddleFinish_[a].y,e.FINISH_COLLIDE_DISTANCE)){q.paddleFinish_[a].finished=!0,b++,d=!0;var f=document.getElementById("paddlefinish"+a);f.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",t.goalSuccess)}return d&&b!=q.paddleFinishCount&&c.playAudio("flag"),b==q.paddleFinishCount}if(q.ballFinish_)for(a=0;a<q.ballCount;a++)if(F(q.ballX[a],q.ballFinish_.x,e.FINISH_COLLIDE_DISTANCE)&&F(q.ballY[a],q.ballFinish_.y,e.FINISH_COLLIDE_DISTANCE)){var g=document.getElementById("ballfinish");return g.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",t.goalSuccess),!0}return!1};var J=function(){return s.goal&&s.goal.successCondition&&s.goal.successCondition()?(q.result=o.SUCCESS,!0):s.goal&&s.goal.failureCondition&&s.goal.failureCondition()?(q.result=o.FAILURE,!0):q.allFinishesComplete()?(q.result=o.SUCCESS,!0):q.timedOut()?(q.result=o.FAILURE,!0):!1}},{"../../locale/current/bounce":261,"../../locale/current/common":263,"../StudioApp":4,"../codegen":60,"../constants":62,"../dom":63,"../dropletUtils":64,"../hammer":94,"../skins":212,"../templates/page.html.ejs":237,"../timeoutList":243,"../utils":258,"./api":34,"./controls.html.ejs":37,"./tiles":41,"./visualization.html.ejs":42}],42:[function(require,module,exports){module.exports=function(){var t=function anonymous(locals,filters,escape){escape=escape||function(a){return String(a).replace(/&(?!\w+;)/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")};var buf=[];with(locals||{})!function(){buf.push('<svg xmlns="http://www.w3.org/2000/svg" version="1.1" id="svgBounce">\n</svg>\n<div id="capacityBubble">\n  <div id="capacity"></div>\n</div>\n')}();return buf.join("")};return function(a){return t(a,require("ejs").filters)}}()},{ejs:279}],37:[function(require,module,exports){module.exports=function(){var t=function anonymous(locals,filters,escape){escape=escape||function(a){return String(a).replace(/&(?!\w+;)/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")};var buf=[];with(locals||{})!function(){buf.push("");var a=(require("../../locale/current/bounce"),require("../../locale/current/common"));buf.push('\n\n<div id="soft-buttons" class="soft-buttons-none">\n  <button id="leftButton" class="arrow">\n    <img src="',escape(assetUrl("media/1x1.gif")),'" class="left-btn icon21">\n  </button>\n  <button id="rightButton" class="arrow">\n    <img src="',escape(assetUrl("media/1x1.gif")),'" class="right-btn icon21">\n  </button>\n  <button id="upButton" class="arrow">\n    <img src="',escape(assetUrl("media/1x1.gif")),'" class="up-btn icon21">\n  </button>\n  <button id="downButton" class="arrow">\n    <img src="',escape(assetUrl("media/1x1.gif")),'" class="down-btn icon21">\n  </button>\n</div>\n<div id="share-cell-wrapper">\n  <div id="share-cell" class="share-cell-none">\n    <button id="finishButton" class="share">\n      <img src="',escape(assetUrl("media/1x1.gif")),'">',escape(a.finish()),"\n    </button>\n  </div>\n</div>\n")}();return buf.join("")};return function(a){return t(a,require("ejs").filters)}}()},{"../../locale/current/bounce":261,"../../locale/current/common":263,ejs:279}],35:[function(a,b,c){"use strict";var d=a("../../locale/current/bounce"),e=(a("../codegen"),function(a,b){var c=a.getTitleValue("VALUE");if("random"===c){var d=a.VALUES.slice(1).map(function(a){return a[1]});c="Bounce.random(["+d+"])"}return"Bounce."+b+"('block_id_"+a.id+"', "+c+");\n"});c.install=function(a){var b=a.Generator.get("JavaScript");a.JavaScript=b,a.Blocks.bounce_whenLeft={helpUrl:"",init:function(){this.setHSV(140,1,.74),this.appendDummyInput().appendTitle(d.whenLeft()),this.setPreviousStatement(!1),this.setNextStatement(!0),this.setTooltip(d.whenLeftTooltip())}},b.bounce_whenLeft=function(){return"\n"},a.Blocks.bounce_whenRight={helpUrl:"",init:function(){this.setHSV(140,1,.74),this.appendDummyInput().appendTitle(d.whenRight()),this.setPreviousStatement(!1),this.setNextStatement(!0),this.setTooltip(d.whenRightTooltip())}},b.bounce_whenRight=function(){return"\n"},a.Blocks.bounce_whenUp={helpUrl:"",init:function(){this.setHSV(140,1,.74),this.appendDummyInput().appendTitle(d.whenUp()),this.setPreviousStatement(!1),this.setNextStatement(!0),this.setTooltip(d.whenUpTooltip())}},b.bounce_whenUp=function(){return"\n"},a.Blocks.bounce_whenDown={helpUrl:"",init:function(){this.setHSV(140,1,.74),this.appendDummyInput().appendTitle(d.whenDown()),this.setPreviousStatement(!1),this.setNextStatement(!0),this.setTooltip(d.whenDownTooltip())}},b.bounce_whenDown=function(){return"\n"},a.Blocks.bounce_whenWallCollided={helpUrl:"",init:function(){this.setHSV(140,1,.74),this.appendDummyInput().appendTitle(d.whenWallCollided()),this.setPreviousStatement(!1),this.setNextStatement(!0),this.setTooltip(d.whenWallCollidedTooltip())}},b.bounce_whenWallCollided=function(){return"\n"},a.Blocks.bounce_whenBallInGoal={helpUrl:"",init:function(){this.setHSV(140,1,.74),this.appendDummyInput().appendTitle(d.whenBallInGoal()),this.setPreviousStatement(!1),this.setNextStatement(!0),this.setTooltip(d.whenBallInGoalTooltip())}},b.bounce_whenBallInGoal=function(){return"\n"},a.Blocks.bounce_whenBallMissesPaddle={helpUrl:"",init:function(){this.setHSV(140,1,.74),this.appendDummyInput().appendTitle(d.whenBallMissesPaddle()),this.setPreviousStatement(!1),this.setNextStatement(!0),this.setTooltip(d.whenBallMissesPaddleTooltip())}},b.bounce_whenBallMissesPaddle=function(){return"\n"},a.Blocks.bounce_whenPaddleCollided={helpUrl:"",init:function(){this.setHSV(140,1,.74),this.appendDummyInput().appendTitle(d.whenPaddleCollided()),this.setPreviousStatement(!1),this.setNextStatement(!0),this.setTooltip(d.whenPaddleCollidedTooltip())}},b.bounce_whenPaddleCollided=function(){return"\n"},a.Blocks.bounce_moveLeft={helpUrl:"",init:function(){this.setHSV(184,1,.74),this.appendDummyInput().appendTitle(d.moveLeft()),this.setPreviousStatement(!0),this.setNextStatement(!0),this.setTooltip(d.moveLeftTooltip())}},b.bounce_moveLeft=function(){return"Bounce.moveLeft('block_id_"+this.id+"');\n"},a.Blocks.bounce_moveRight={helpUrl:"",init:function(){this.setHSV(184,1,.74),this.appendDummyInput().appendTitle(d.moveRight()),this.setPreviousStatement(!0),this.setNextStatement(!0),this.setTooltip(d.moveRightTooltip())}},b.bounce_moveRight=function(){return"Bounce.moveRight('block_id_"+this.id+"');\n"},a.Blocks.bounce_moveUp={helpUrl:"",init:function(){this.setHSV(184,1,.74),this.appendDummyInput().appendTitle(d.moveUp()),this.setPreviousStatement(!0),this.setNextStatement(!0),this.setTooltip(d.moveUpTooltip())}},b.bounce_moveUp=function(){return"Bounce.moveUp('block_id_"+this.id+"');\n"},a.Blocks.bounce_moveDown={helpUrl:"",init:function(){this.setHSV(184,1,.74),this.appendDummyInput().appendTitle(d.moveDown()),this.setPreviousStatement(!0),this.setNextStatement(!0),this.setTooltip(d.moveDownTooltip())}},b.bounce_moveDown=function(){return"Bounce.moveDown('block_id_"+this.id+"');\n"},a.Blocks.bounce_playSound={helpUrl:"",init:function(){this.setHSV(184,1,.74),this.appendDummyInput().appendTitle(new a.FieldDropdown(this.SOUNDS),"SOUND"),this.setPreviousStatement(!0),this.setNextStatement(!0),this.setTooltip(d.playSoundTooltip())}},a.Blocks.bounce_playSound.SOUNDS=[[d.playSoundHit(),"hit"],[d.playSoundWood(),"wood"],[d.playSoundRetro(),"retro"],[d.playSoundSlap(),"slap"],[d.playSoundRubber(),"rubber"],[d.playSoundCrunch(),"crunch"],[d.playSoundWinPoint(),"winpoint"],[d.playSoundWinPoint2(),"winpoint2"],[d.playSoundLosePoint(),"losepoint"],[d.playSoundLosePoint2(),"losepoint2"],[d.playSoundGoal1(),"goal1"],[d.playSoundGoal2(),"goal2"]],b.bounce_playSound=function(){return"Bounce.playSound('block_id_"+this.id+"', '"+this.getTitleValue("SOUND")+"');\n"},a.Blocks.bounce_incrementPlayerScore={helpUrl:"",init:function(){this.setHSV(184,1,.74),this.appendDummyInput().appendTitle(d.incrementPlayerScore()),this.setPreviousStatement(!0),this.setNextStatement(!0),this.setTooltip(d.incrementPlayerScoreTooltip())}},b.bounce_incrementPlayerScore=function(){return"Bounce.incrementPlayerScore('block_id_"+this.id+"');\n"},a.Blocks.bounce_incrementOpponentScore={helpUrl:"",init:function(){this.setHSV(184,1,.74),this.appendDummyInput().appendTitle(d.incrementOpponentScore()),this.setPreviousStatement(!0),this.setNextStatement(!0),this.setTooltip(d.incrementOpponentScoreTooltip())}},b.bounce_incrementOpponentScore=function(){return"Bounce.incrementOpponentScore('block_id_"+this.id+"');\n"},a.Blocks.bounce_bounceBall={helpUrl:"",init:function(){this.setHSV(184,1,.74),this.appendDummyInput().appendTitle(d.bounceBall()),this.setPreviousStatement(!0),this.setNextStatement(!0),this.setTooltip(d.bounceBallTooltip())}},b.bounce_bounceBall=function(){return"Bounce.bounceBall('block_id_"+this.id+"');\n"},a.Blocks.bounce_launchBall={helpUrl:"",init:function(){this.setHSV(184,1,.74),this.appendDummyInput().appendTitle(d.launchBall()),this.setPreviousStatement(!0),this.setNextStatement(!0),this.setTooltip(d.launchBallTooltip())}},b.bounce_launchBall=function(){return"Bounce.launchBall('block_id_"+this.id+"');\n"},a.Blocks.bounce_setBallSpeed={helpUrl:"",init:function(){var b=new a.FieldDropdown(this.VALUES);b.setValue(this.VALUES[3][1]),this.setHSV(184,1,.74),this.appendDummyInput().appendTitle(b,"VALUE"),this.setPreviousStatement(!0),this.setNextStatement(!0),this.setTooltip(d.setBallSpeedTooltip())}},a.Blocks.bounce_setBallSpeed.VALUES=[[d.setBallSpeedRandom(),"random"],[d.setBallSpeedVerySlow(),"Bounce.BallSpeed.VERY_SLOW"],[d.setBallSpeedSlow(),"Bounce.BallSpeed.SLOW"],[d.setBallSpeedNormal(),"Bounce.BallSpeed.NORMAL"],[d.setBallSpeedFast(),"Bounce.BallSpeed.FAST"],[d.setBallSpeedVeryFast(),"Bounce.BallSpeed.VERY_FAST"]],b.bounce_setBallSpeed=function(){return e(this,"setBallSpeed")},a.Blocks.bounce_setPaddleSpeed={helpUrl:"",init:function(){var b=new a.FieldDropdown(this.VALUES);b.setValue(this.VALUES[3][1]),this.setHSV(184,1,.74),this.appendDummyInput().appendTitle(b,"VALUE"),this.setPreviousStatement(!0),this.setNextStatement(!0),this.setTooltip(d.setPaddleSpeedTooltip())}},a.Blocks.bounce_setPaddleSpeed.VALUES=[[d.setPaddleSpeedRandom(),"random"],[d.setPaddleSpeedVerySlow(),"Bounce.PaddleSpeed.VERY_SLOW"],[d.setPaddleSpeedSlow(),"Bounce.PaddleSpeed.SLOW"],[d.setPaddleSpeedNormal(),"Bounce.PaddleSpeed.NORMAL"],[d.setPaddleSpeedFast(),"Bounce.PaddleSpeed.FAST"],[d.setPaddleSpeedVeryFast(),"Bounce.PaddleSpeed.VERY_FAST"]],b.bounce_setPaddleSpeed=function(){return e(this,"setPaddleSpeed")},a.Blocks.bounce_setBackground={helpUrl:"",init:function(){var b=new a.FieldDropdown(this.VALUES);b.setValue(this.VALUES[1][1]),this.setHSV(312,.32,.62),this.appendDummyInput().appendTitle(b,"VALUE"),this.setInputsInline(!0),this.setPreviousStatement(!0),this.setNextStatement(!0),this.setTooltip(d.setBackgroundTooltip())}},a.Blocks.bounce_setBackground.VALUES=[[d.setBackgroundRandom(),"random"],[d.setBackgroundHardcourt(),'"hardcourt"'],[d.setBackgroundRetro(),'"retro"']],b.bounce_setBackground=function(){return e(this,"setBackground")},a.Blocks.bounce_setBall={helpUrl:"",init:function(){var b=new a.FieldDropdown(this.VALUES);b.setValue(this.VALUES[1][1]),this.setHSV(312,.32,.62),this.appendDummyInput().appendTitle(b,"VALUE"),this.setInputsInline(!0),this.setPreviousStatement(!0),this.setNextStatement(!0),this.setTooltip(d.setBallTooltip())}},a.Blocks.bounce_setBall.VALUES=[[d.setBallRandom(),"random"],[d.setBallHardcourt(),'"hardcourt"'],[d.setBallRetro(),'"retro"']],b.bounce_setBall=function(){return e(this,"setBall")},a.Blocks.bounce_setPaddle={helpUrl:"",init:function(){var b=new a.FieldDropdown(this.VALUES);b.setValue(this.VALUES[1][1]),this.setHSV(312,.32,.62),this.appendDummyInput().appendTitle(b,"VALUE"),this.setInputsInline(!0),this.setPreviousStatement(!0),this.setNextStatement(!0),this.setTooltip(d.setPaddleTooltip())}},a.Blocks.bounce_setPaddle.VALUES=[[d.setPaddleRandom(),"random"],[d.setPaddleHardcourt(),'"hardcourt"'],[d.setPaddleRetro(),'"retro"']],b.bounce_setPaddle=function(){return e(this,"setPaddle")},delete a.Blocks.procedures_defreturn,delete a.Blocks.procedures_ifreturn}},{"../../locale/current/bounce":261,"../codegen":60}],261:[function(a,b){b.exports=window.blockly.appLocale},{}],34:[function(a,b,c){var d=a("./tiles"),e=(d.Direction,d.SquareType,a("../StudioApp").singleton);c.PaddleSpeed={VERY_SLOW:.04,SLOW:.06,NORMAL:.1,FAST:.15,VERY_FAST:.23},c.BallSpeed={VERY_SLOW:.04,SLOW:.06,NORMAL:.1,FAST:.15,VERY_FAST:.23},c.random=function(a){var b=Math.floor(Math.random()*a.length);return a[b]},c.setBallSpeed=function(a,b){e.highlight(a),Bounce.currentBallSpeed=b;for(var c=0;c<Bounce.ballCount;c++)Bounce.ballSpeed[c]=b},c.setBackground=function(a,b){e.highlight(a),Bounce.setBackground(b)},c.setBall=function(a,b){e.highlight(a),Bounce.setBall(b)},c.setPaddle=function(a,b){e.highlight(a),Bounce.setPaddle(b)},c.setBackground=function(a,b){e.highlight(a),Bounce.setBackground(b)},c.setPaddleSpeed=function(a,b){e.highlight(a),Bounce.paddleSpeed=b},c.playSound=function(a,b){e.highlight(a),e.playAudio(b)},c.moveLeft=function(a){e.highlight(a),Bounce.paddleX-=Bounce.paddleSpeed,Bounce.paddleX<0&&(Bounce.paddleX=0)},c.moveRight=function(a){e.highlight(a),Bounce.paddleX+=Bounce.paddleSpeed,Bounce.paddleX>Bounce.COLS-1&&(Bounce.paddleX=Bounce.COLS-1)},c.moveUp=function(a){e.highlight(a),Bounce.paddleY-=Bounce.paddleSpeed,Bounce.paddleY<0&&(Bounce.paddleY=0)},c.moveDown=function(a){e.highlight(a),Bounce.paddleY+=Bounce.paddleSpeed,Bounce.paddleY>Bounce.ROWS-1&&(Bounce.paddleY=Bounce.ROWS-1)},c.incrementOpponentScore=function(a){e.highlight(a),Bounce.opponentScore++,Bounce.displayScore()},c.incrementPlayerScore=function(a){e.highlight(a),Bounce.playerScore++,Bounce.displayScore()},c.launchBall=function(a){e.highlight(a);for(var b=0;b<Bounce.ballCount;b++)if(Bounce.isBallOutOfBounds(b)&&0===(Bounce.ballFlags[b]&Bounce.BallFlags.LAUNCHING))return void Bounce.launchBall(b);b=Bounce.ballCount,Bounce.ballCount++,Bounce.createBallElements(b),Bounce.playSoundAndResetBall(b)},c.bounceBall=function(a){e.highlight(a);var b;for(b=0;b<Bounce.ballCount;b++)if(0===(Bounce.ballFlags[b]&(Bounce.BallFlags.MISSED_PADDLE|Bounce.BallFlags.IN_GOAL))){Bounce.ballX[b]<0?(Bounce.ballX[b]=0,Bounce.ballDir[b]=2*Math.PI-Bounce.ballDir[b]):Bounce.ballX[b]>Bounce.COLS-1&&(Bounce.ballX[b]=Bounce.COLS-1,Bounce.ballDir[b]=2*Math.PI-Bounce.ballDir[b]),Bounce.ballY[b]<d.Y_TOP_BOUNDARY&&(Bounce.ballY[b]=d.Y_TOP_BOUNDARY,Bounce.ballDir[b]=Math.PI-Bounce.ballDir[b]);var c=Bounce.ballX[b]-Bounce.paddleX,f=Bounce.ballY[b]-Bounce.paddleY,g=Bounce.calcDistance(c,f);if(g<d.PADDLE_BALL_COLLIDE_DISTANCE&&Math.cos(Bounce.ballDir[b])<0){var h=3*Math.PI/8*(c/d.PADDLE_BALL_COLLIDE_DISTANCE);Bounce.ballDir[b]=(5*Math.PI+h-Bounce.ballDir[b])%(2*Math.PI),Bounce.ballDir[b]=Bounce.ballDir[b]<Math.PI?Math.min(Math.PI/2-.2,Bounce.ballDir[b]):Math.max(3*Math.PI/2+.2,Bounce.ballDir[b])}}}},{"../StudioApp":4,"./tiles":41}],41:[function(a,b,c){"use strict";c.Direction={NORTH:0,EAST:1,SOUTH:2,WEST:3},c.PADDLE_BALL_COLLIDE_DISTANCE=.7,c.FINISH_COLLIDE_DISTANCE=.5,c.DEFAULT_BALL_SPEED=.1,c.DEFAULT_BALL_DIRECTION=1.25*Math.PI,c.DEFAULT_PADDLE_SPEED=.1,c.DEFAULT_BALL_START_Y=2,c.Y_TOP_BOUNDARY=-.2,c.SquareType={OPEN:0,WALL:1,GOAL:2,BALLSTART:4,PADDLEFINISH:8,PADDLESTART:16,BALLFINISH:32,OBSTACLE:64}},{}]},{},[39]);