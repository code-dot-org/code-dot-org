require=function a(b,c,d){function e(g,h){if(!c[g]){if(!b[g]){var i="function"==typeof require&&require;if(!h&&i)return i(g,!0);if(f)return f(g,!0);var j=new Error("Cannot find module '"+g+"'");throw j.code="MODULE_NOT_FOUND",j}var k=c[g]={exports:{}};b[g][0].call(k.exports,function(a){var c=b[g][1][a];return e(c?c:a)},k,k.exports,a,b,c,d)}return c[g].exports}for(var f="function"==typeof require&&require,g=0;g<d.length;g++)e(d[g]);return e}({"/home/ubuntu/staging/apps/build/js/bounce/main.js":[function(a,b,c){(function(b){"use strict";var c=a("../appMain");window.Bounce=a("./bounce"),"undefined"!=typeof b&&(b.Bounce=window.Bounce);var d=a("./blocks"),e=a("./levels"),f=a("./skins");window.bounceMain=function(a){a.skinsModule=f,a.blocksModule=d,c(window.Bounce,e,a)}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"../appMain":"/home/ubuntu/staging/apps/build/js/appMain.js","./blocks":"/home/ubuntu/staging/apps/build/js/bounce/blocks.js","./bounce":"/home/ubuntu/staging/apps/build/js/bounce/bounce.js","./levels":"/home/ubuntu/staging/apps/build/js/bounce/levels.js","./skins":"/home/ubuntu/staging/apps/build/js/bounce/skins.js"}],"/home/ubuntu/staging/apps/build/js/bounce/skins.js":[function(a,b,c){"use strict";var d=a("../skins"),e={bounce:{nonDisappearingPegmanHittingObstacle:!0,ballYOffset:10}};c.load=function(a,b){var c=d.load(a,b),f=e[c.id];if(c.retro={background:c.assetUrl("retro_background.png"),tiles:c.assetUrl("retro_tiles_wall.png"),goalTiles:c.assetUrl("retro_tiles_goal.png"),paddle:c.assetUrl("retro_paddle.png"),ball:c.assetUrl("retro_ball.png")},c.tiles=c.assetUrl("tiles_wall.png"),c.goalTiles=c.assetUrl("tiles_goal.png"),c.goal=c.assetUrl("goal.png"),c.goalSuccess=c.assetUrl("goal_success.png"),c.ball=c.assetUrl("ball.png"),c.paddle=c.assetUrl("paddle.png"),c.obstacle=c.assetUrl("obstacle.png"),f.nonDisappearingPegmanHittingObstacle?c.nonDisappearingPegmanHittingObstacle=!0:c.nonDisappearingPegmanHittingObstacle=!1,c.obstacleScale=f.obstacleScale||1,c.largerObstacleAnimationTiles=c.assetUrl(f.largerObstacleAnimationTiles),c.hittingWallAnimation=c.assetUrl(f.hittingWallAnimation),c.approachingGoalAnimation=c.assetUrl(f.approachingGoalAnimation),c.rubberSound=[c.assetUrl("wall.mp3"),c.assetUrl("wall.ogg")],c.flagSound=[c.assetUrl("win_goal.mp3"),c.assetUrl("win_goal.ogg")],c.crunchSound=[c.assetUrl("wall0.mp3"),c.assetUrl("wall0.ogg")],c.ballStartSound=[c.assetUrl("ball_start.mp3"),c.assetUrl("ball_start.ogg")],c.winPointSound=[c.assetUrl("1_we_win.mp3"),c.assetUrl("1_we_win.ogg")],c.winPoint2Sound=[c.assetUrl("2_we_win.mp3"),c.assetUrl("2_we_win.ogg")],c.losePointSound=[c.assetUrl("1_we_lose.mp3"),c.assetUrl("1_we_lose.ogg")],c.losePoint2Sound=[c.assetUrl("2_we_lose.mp3"),c.assetUrl("2_we_lose.ogg")],c.goal1Sound=[c.assetUrl("1_goal.mp3"),c.assetUrl("1_goal.ogg")],c.goal2Sound=[c.assetUrl("2_goal.mp3"),c.assetUrl("2_goal.ogg")],c.woodSound=[c.assetUrl("1_paddle_bounce.mp3"),c.assetUrl("1_paddle_bounce.ogg")],c.retroSound=[c.assetUrl("2_paddle_bounce.mp3"),c.assetUrl("2_paddle_bounce.ogg")],c.slapSound=[c.assetUrl("1_wall_bounce.mp3"),c.assetUrl("1_wall_bounce.ogg")],c.hitSound=[c.assetUrl("2_wall_bounce.mp3"),c.assetUrl("2_wall_bounce.ogg")],void 0!==f.background){var g=Math.floor(Math.random()*f.background);c.background=c.assetUrl("background"+g+".png")}else c.background=c.assetUrl("background.png");return c.pegmanHeight=f.pegmanHeight||52,c.pegmanWidth=f.pegmanWidth||49,c.ballYOffset=f.ballYOffset||0,c.paddleYOffset=f.paddleYOffset||0,c}},{"../skins":"/home/ubuntu/staging/apps/build/js/skins.js"}],"/home/ubuntu/staging/apps/build/js/bounce/levels.js":[function(a,b,c){"use strict";var d=(a("./tiles").Direction,a("../block_utils").createToolbox);b.exports={1:{requiredBlocks:[[{test:"moveLeft",type:"bounce_moveLeft"}]],scale:{snapRadius:2},softButtons:["leftButton"],map:[[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0],[8,0,0,16,0,0,0,0],[0,0,0,0,0,0,0,0]],toolbox:d('<block type="bounce_moveLeft"></block>           <block type="bounce_moveRight"></block>'),startBlocks:'<block type="bounce_whenLeft" deletable="false" x="20" y="20"></block>'},2:{ideal:5,requiredBlocks:[[{test:"moveRight",type:"bounce_moveRight"}],[{test:"moveLeft",type:"bounce_moveLeft"}]],scale:{snapRadius:2},softButtons:["leftButton","rightButton"],map:[[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0],[8,0,0,16,0,0,0,8],[0,0,0,0,0,0,0,0]],toolbox:d('<block type="bounce_moveLeft"></block>           <block type="bounce_moveRight"></block>'),startBlocks:'<block type="bounce_whenLeft" deletable="false" x="20" y="20"></block>       <block type="bounce_whenRight" deletable="false" x="180" y="20"></block>'},3:{requiredBlocks:[[{test:"moveUp",type:"bounce_moveUp"}]],scale:{snapRadius:2},softButtons:["upButton"],map:[[0,0,0,8,0,0,0,0],[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0],[0,0,0,16,0,0,0,0],[0,0,0,0,0,0,0,0]],toolbox:d('<block type="bounce_moveLeft"></block>           <block type="bounce_moveRight"></block>           <block type="bounce_moveUp"></block>           <block type="bounce_moveDown"></block>'),startBlocks:'<block type="bounce_whenUp" deletable="false" x="20" y="20"></block>'},4:{requiredBlocks:[[{test:"moveRight",type:"bounce_moveRight"}],[{test:"moveLeft",type:"bounce_moveLeft"}],[{test:"moveUp",type:"bounce_moveUp"}],[{test:"moveDown",type:"bounce_moveDown"}]],scale:{snapRadius:2},softButtons:["leftButton","rightButton","downButton","upButton"],map:[[0,0,8,0,0,0,0,0],[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,8],[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0],[8,0,0,0,0,0,0,0],[0,0,0,16,0,0,0,0],[0,0,0,0,0,8,0,0]],toolbox:d('<block type="bounce_moveLeft"></block>           <block type="bounce_moveRight"></block>           <block type="bounce_moveUp"></block>           <block type="bounce_moveDown"></block>'),startBlocks:'<block type="bounce_whenLeft" deletable="false" x="20" y="20"></block>       <block type="bounce_whenRight" deletable="false" x="180" y="20"></block>       <block type="bounce_whenUp" deletable="false" x="20" y="120"></block>       <block type="bounce_whenDown" deletable="false" x="180" y="120"></block>'},5:{timeoutFailureTick:100,requiredBlocks:[[{test:"bounceBall",type:"bounce_bounceBall"}]],scale:{snapRadius:2},ballDirection:1.285*Math.PI,map:[[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0],[32,0,0,0,0,0,0,0],[0,0,0,0,0,0,4,0],[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0],[0,0,0,16,0,0,0,0]],toolbox:d('<block type="bounce_bounceBall"></block>           <block type="bounce_playSound"></block>'),startBlocks:'<block type="bounce_whenPaddleCollided" deletable="false" x="20" y="20"></block>'},6:{timeoutFailureTick:140,requiredBlocks:[[{test:"bounceBall",type:"bounce_bounceBall"}]],scale:{snapRadius:2},ballDirection:1.285*Math.PI,map:[[1,1,33,1,1,1,1,1],[1,0,0,0,0,0,0,1],[1,0,0,0,0,0,0,1],[1,0,0,0,0,0,0,1],[1,0,0,0,0,0,4,1],[1,0,0,0,0,0,0,1],[1,0,0,0,0,0,0,1],[1,0,0,16,0,0,0,1]],toolbox:d('<block type="bounce_bounceBall"></block>           <block type="bounce_playSound"></block>'),startBlocks:'<block type="bounce_whenPaddleCollided" deletable="false" x="20" y="20"></block>       <block type="bounce_whenWallCollided" deletable="false" x="20" y="120"></block>'},7:{timeoutFailureTick:900,requiredBlocks:[[{test:"moveLeft",type:"bounce_moveLeft"}],[{test:"moveRight",type:"bounce_moveRight"}],[{test:"bounceBall",type:"bounce_bounceBall"}]],scale:{snapRadius:2},softButtons:["leftButton","rightButton"],failOnBallExit:!0,map:[[1,1,1,1,1,1,1,1],[1,0,0,0,0,32,0,1],[1,0,0,0,0,0,0,1],[1,0,0,0,0,0,0,1],[1,0,0,0,0,0,4,1],[1,0,0,0,0,0,0,1],[1,0,0,0,0,0,0,1],[1,0,16,0,0,0,0,1]],toolbox:d('<block type="bounce_moveLeft"></block>           <block type="bounce_moveRight"></block>           <block type="bounce_bounceBall"></block>           <block type="bounce_playSound"></block>'),startBlocks:'<block type="bounce_whenLeft" deletable="false" x="20" y="20"></block>       <block type="bounce_whenRight" deletable="false" x="180" y="20"></block>       <block type="bounce_whenPaddleCollided" deletable="false" x="20" y="120"></block>       <block type="bounce_whenWallCollided" deletable="false" x="20" y="220"></block>'},10:{requiredBlocks:[[{test:"moveLeft",type:"bounce_moveLeft"}],[{test:"moveRight",type:"bounce_moveRight"}],[{test:"bounceBall",type:"bounce_bounceBall"}],[{test:"incrementPlayerScore",type:"bounce_incrementPlayerScore"}],[{test:"incrementOpponentScore",type:"bounce_incrementOpponentScore"}]],scale:{snapRadius:2},softButtons:["leftButton","rightButton"],goal:{successCondition:function(){return Bounce.opponentScore>=2}},respawnBalls:!0,map:[[1,1,2,2,2,2,1,1],[1,0,0,0,0,0,0,1],[1,0,0,0,0,0,4,1],[1,0,0,0,0,0,0,1],[1,0,0,0,0,0,0,1],[1,0,0,0,0,0,0,1],[1,0,0,0,0,0,0,1],[1,0,16,0,0,0,0,1]],toolbox:d('<block type="bounce_moveLeft"></block>           <block type="bounce_moveRight"></block>           <block type="bounce_bounceBall"></block>           <block type="bounce_playSound"></block>           <block type="bounce_incrementPlayerScore"></block>           <block type="bounce_incrementOpponentScore"></block>'),startBlocks:'<block type="bounce_whenLeft" deletable="false" x="20" y="20"></block>       <block type="bounce_whenRight" deletable="false" x="180" y="20"></block>       <block type="bounce_whenPaddleCollided" deletable="false" x="20" y="100"></block>       <block type="bounce_whenWallCollided" deletable="false" x="20" y="180"></block>       <block type="bounce_whenBallInGoal" deletable="false" x="20" y="260"></block>       <block type="bounce_whenBallMissesPaddle" deletable="false" x="20" y="340"></block>'},11:{requiredBlocks:[[{test:"moveLeft",type:"bounce_moveLeft"}],[{test:"moveRight",type:"bounce_moveRight"}],[{test:"bounceBall",type:"bounce_bounceBall"}],[{test:"incrementPlayerScore",type:"bounce_incrementPlayerScore"}],[{test:"incrementOpponentScore",type:"bounce_incrementOpponentScore"}],[{test:"launchBall",type:"bounce_launchBall"}]],scale:{snapRadius:2},softButtons:["leftButton","rightButton"],minWorkspaceHeight:750,goal:{successCondition:function(){return Bounce.opponentScore>=2}},map:[[1,1,2,2,2,2,1,1],[1,0,0,0,0,0,0,1],[1,0,0,0,0,0,0,1],[1,0,0,0,0,0,0,1],[1,0,0,0,0,0,0,1],[1,0,0,0,0,0,0,1],[1,0,0,0,0,0,0,1],[1,0,16,0,0,0,0,1]],toolbox:d('<block type="bounce_moveLeft"></block>           <block type="bounce_moveRight"></block>           <block type="bounce_bounceBall"></block>           <block type="bounce_playSound"></block>           <block type="bounce_incrementPlayerScore"></block>           <block type="bounce_incrementOpponentScore"></block>           <block type="bounce_launchBall"></block>           <block type="bounce_setPaddleSpeed"></block>           <block type="bounce_setBallSpeed"></block>           <block type="bounce_setBackground"></block>           <block type="bounce_setBall"></block>           <block type="bounce_setPaddle"></block>'),startBlocks:'<block type="when_run" deletable="false" x="20" y="20"></block>       <block type="bounce_whenLeft" deletable="false" x="20" y="180"></block>       <block type="bounce_whenRight" deletable="false" x="180" y="180"></block>       <block type="bounce_whenPaddleCollided" deletable="false" x="20" y="270"></block>       <block type="bounce_whenWallCollided" deletable="false" x="20" y="370"></block>       <block type="bounce_whenBallInGoal" deletable="false" x="20" y="470"></block>       <block type="bounce_whenBallMissesPaddle" deletable="false" x="20" y="590"></block>'},12:{requiredBlocks:[],scale:{snapRadius:2},softButtons:["leftButton","rightButton"],minWorkspaceHeight:800,freePlay:!0,map:[[1,1,2,2,2,2,1,1],[1,0,0,0,0,0,0,1],[1,0,0,0,0,0,0,1],[1,0,0,0,0,0,0,1],[1,0,0,0,0,0,0,1],[1,0,0,0,0,0,0,1],[1,0,0,0,0,0,0,1],[1,0,16,0,0,0,0,1]],toolbox:d('<block type="bounce_moveLeft"></block>           <block type="bounce_moveRight"></block>           <block type="bounce_bounceBall"></block>           <block type="bounce_playSound"></block>           <block type="bounce_incrementPlayerScore"></block>           <block type="bounce_incrementOpponentScore"></block>           <block type="bounce_launchBall"></block>           <block type="bounce_setPaddleSpeed"></block>           <block type="bounce_setBallSpeed"></block>           <block type="bounce_setBackground"></block>           <block type="bounce_setBall"></block>           <block type="bounce_setPaddle"></block>'),startBlocks:'<block type="when_run" deletable="false" x="20" y="20"></block>       <block type="bounce_whenLeft" deletable="false" x="20" y="220"></block>       <block type="bounce_whenRight" deletable="false" x="180" y="220"></block>       <block type="bounce_whenPaddleCollided" deletable="false" x="20" y="310"></block>       <block type="bounce_whenWallCollided" deletable="false" x="20" y="410"></block>       <block type="bounce_whenBallInGoal" deletable="false" x="20" y="510"></block>       <block type="bounce_whenBallMissesPaddle" deletable="false" x="20" y="630"></block>'}}},{"../block_utils":"/home/ubuntu/staging/apps/build/js/block_utils.js","./tiles":"/home/ubuntu/staging/apps/build/js/bounce/tiles.js"}],"/home/ubuntu/staging/apps/build/js/bounce/bounce.js":[function(a,b,c){"use strict";var d=a("../StudioApp").singleton,e=(a("../locale"),a("./locale")),f=(a("../skins"),a("./tiles")),g=a("../codegen"),h=a("./api"),i=a("../templates/page.html.ejs"),j=a("../dom"),k=a("../hammer"),l=(a("../utils"),a("../dropletUtils")),m=a("../constants"),n=m.KeyCodes,o=(f.Direction,f.SquareType),p=d.ResultType,q=d.TestResults,r=b.exports;r.keyState={},r.gesturesObserved={},r.btnState={};var s={UP:0,DOWN:1};r.BallFlags={MISSED_PADDLE:1,IN_GOAL:2,LAUNCHING:4};var t,u,v={LEFT:"leftButton",UP:"upButton",RIGHT:"rightButton",DOWN:"downButton"},w=25;d.setCheckForEmptyBlocks(!0);r.scale={snapRadius:1,stepSpeed:33};var x={text:e.shareBounceTwitter(),hashtag:"BounceCode"},y=function(){r.map=t.map,r.timeoutFailureTick=t.timeoutFailureTick||1/0,r.minWorkspaceHeight=t.minWorkspaceHeight,r.softButtons_=t.softButtons||[],r.respawnBalls=t.respawnBalls||!1,r.failOnBallExit=t.failOnBallExit||!1;for(var a in t.scale)r.scale[a]=t.scale[a];r.ROWS=r.map.length,r.COLS=r.map[0].length,z(),r.SQUARE_SIZE=50,r.PEGMAN_HEIGHT=u.pegmanHeight,r.PEGMAN_WIDTH=u.pegmanWidth,r.BALL_Y_OFFSET=u.ballYOffset,r.PADDLE_Y_OFFSET=u.paddleYOffset,r.MARKER_HEIGHT=43,r.MARKER_WIDTH=50,r.MAZE_WIDTH=r.SQUARE_SIZE*r.COLS,r.MAZE_HEIGHT=r.SQUARE_SIZE*r.ROWS,r.PATH_WIDTH=r.SQUARE_SIZE/3},z=function(){r.wallMap=new Array(r.ROWS);for(var a=0;a<r.ROWS;a++)r.wallMap[a]=new Array(r.COLS)},A=a("../timeoutList"),B={"1X101":[1,0],"11X10":[2,1],"11XX0":[2,1],"1XX11":[2,0],"1X001":[1,0],"1X100":[1,0],"1101X":[0,1],"110XX":[0,1],"1X11X":[0,0],null0:[1,1]},C={"1X101":[2,3],"1XX11":[3,3],"1X001":[3,3],"1X11X":[0,2],"1X100":[0,2],null0:[1,1]},D=function(a,b){return void 0===r.map[b]||void 0===r.map[b][a]?"X":r.map[b][a]&o.WALL?"1":"0"},E=function(a,b){return void 0===r.map[b]||void 0===r.map[b][a]?"X":r.map[b][a]&o.GOAL?"1":"0"};r.createBallElements=function(a){var b=document.getElementById("svgBounce"),c=document.createElementNS(Blockly.SVG_NS,"clipPath");c.setAttribute("id","ballClipPath"+a);var d=document.createElementNS(Blockly.SVG_NS,"rect");d.setAttribute("id","ballClipRect"+a),d.setAttribute("width",r.PEGMAN_WIDTH),d.setAttribute("height",r.PEGMAN_HEIGHT),c.appendChild(d),b.appendChild(c);var e=document.createElementNS(Blockly.SVG_NS,"image");e.setAttribute("id","ball"+a),e.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",r.ballImage),e.setAttribute("height",r.PEGMAN_HEIGHT),e.setAttribute("width",r.PEGMAN_WIDTH),e.setAttribute("clip-path","url(#ballClipPath"+a+")"),b.appendChild(e)},r.deleteBallElements=function(a){var b=document.getElementById("ballClipPath"+a);b.parentNode.removeChild(b);var c=document.getElementById("ball"+a);c.parentNode.removeChild(c)};var F=function(){var a,b,c,d,e=document.getElementById("svgBounce");e.setAttribute("width",r.MAZE_WIDTH),e.setAttribute("height",r.MAZE_HEIGHT);var f=new k(e);f.on("drag",r.onSvgDrag);var g=document.getElementById("visualizationColumn");g.style.width=r.MAZE_WIDTH+"px",u.background&&(d=document.createElementNS(Blockly.SVG_NS,"image"),d.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",u.background),d.setAttribute("id","background"),d.setAttribute("height",r.MAZE_HEIGHT),d.setAttribute("width",r.MAZE_WIDTH),d.setAttribute("x",0),d.setAttribute("y",0),e.appendChild(d));var h=0;for(c=0;c<r.ROWS;c++)for(b=0;b<r.COLS;b++){var i,j,l;if(d=D(b,c)+D(b,c-1)+D(b+1,c)+D(b,c+1)+D(b-1,c),B[d]?(i=B[d][0],j=B[d][1],l=u.tiles):(d=E(b,c)+E(b,c-1)+E(b+1,c)+E(b,c+1)+E(b-1,c),C[d]||(d="null0"),i=C[d][0],j=C[d][1],l=u.goalTiles),"null0"!=d){var m=document.createElementNS(Blockly.SVG_NS,"clipPath");m.setAttribute("id","tileClipPath"+h);var n=document.createElementNS(Blockly.SVG_NS,"rect");n.setAttribute("width",r.SQUARE_SIZE),n.setAttribute("height",r.SQUARE_SIZE),n.setAttribute("x",b*r.SQUARE_SIZE),n.setAttribute("y",c*r.SQUARE_SIZE),m.appendChild(n),e.appendChild(m);var p=document.createElementNS(Blockly.SVG_NS,"image");p.setAttribute("id","tileElement"+h),p.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",l),p.setAttribute("height",4*r.SQUARE_SIZE),p.setAttribute("width",5*r.SQUARE_SIZE),p.setAttribute("clip-path","url(#tileClipPath"+h+")"),p.setAttribute("x",(b-i)*r.SQUARE_SIZE),p.setAttribute("y",(c-j)*r.SQUARE_SIZE),e.appendChild(p);var q=document.createElementNS(Blockly.SVG_NS,"animate");q.setAttribute("id","tileAnimation"+h),q.setAttribute("attributeType","CSS"),q.setAttribute("attributeName","opacity"),q.setAttribute("from",1),q.setAttribute("to",0),q.setAttribute("dur","1s"),q.setAttribute("begin","indefinite"),p.appendChild(q)}h++}for(r.ballImage=u.ball,a=0;a<r.ballCount;a++)r.createBallElements(a);if(r.paddleStart_){var s=document.createElementNS(Blockly.SVG_NS,"clipPath");s.setAttribute("id","paddleClipPath");var t=document.createElementNS(Blockly.SVG_NS,"rect");t.setAttribute("id","paddleClipRect"),t.setAttribute("width",r.PEGMAN_WIDTH),t.setAttribute("height",r.PEGMAN_HEIGHT),s.appendChild(t),e.appendChild(s);var v=document.createElementNS(Blockly.SVG_NS,"image");v.setAttribute("id","paddle"),v.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",u.paddle),v.setAttribute("height",r.PEGMAN_HEIGHT),v.setAttribute("width",r.PEGMAN_WIDTH),v.setAttribute("clip-path","url(#paddleClipPath)"),e.appendChild(v)}if(r.paddleFinish_)for(a=0;a<r.paddleFinishCount;a++){var w=document.createElementNS(Blockly.SVG_NS,"image");w.setAttribute("id","paddlefinish"+a),w.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",u.goal),w.setAttribute("height",r.MARKER_HEIGHT),w.setAttribute("width",r.MARKER_WIDTH),e.appendChild(w)}if(r.ballFinish_){var x=document.createElementNS(Blockly.SVG_NS,"image");x.setAttribute("id","ballfinish"),x.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",u.goal),x.setAttribute("height",r.MARKER_HEIGHT),x.setAttribute("width",r.MARKER_WIDTH),e.appendChild(x)}var y=document.createElementNS(Blockly.SVG_NS,"text");if(y.setAttribute("id","score"),y.setAttribute("class","bounce-score"),y.setAttribute("x",r.MAZE_WIDTH/2),y.setAttribute("y",60),y.appendChild(document.createTextNode("0")),y.setAttribute("visibility","hidden"),e.appendChild(y),u.hittingWallAnimation){var z=document.createElementNS(Blockly.SVG_NS,"image");z.setAttribute("id","wallAnimation"),z.setAttribute("height",r.SQUARE_SIZE),z.setAttribute("width",r.SQUARE_SIZE),z.setAttribute("visibility","hidden"),e.appendChild(z)}var A=0;for(c=0;c<r.ROWS;c++)for(b=0;b<r.COLS;b++){if(r.map[c][b]==o.OBSTACLE){var F=document.createElementNS(Blockly.SVG_NS,"image");F.setAttribute("id","obstacle"+A),F.setAttribute("height",r.MARKER_HEIGHT*u.obstacleScale),F.setAttribute("width",r.MARKER_WIDTH*u.obstacleScale),F.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",u.obstacle),F.setAttribute("x",r.SQUARE_SIZE*(b+.5)-F.getAttribute("width")/2),F.setAttribute("y",r.SQUARE_SIZE*(c+.9)-F.getAttribute("height")),e.appendChild(F)}++A}};r.calcDistance=function(a,b){return Math.sqrt(a*a+b*b)};var G=function(a,b,c){var d=c||.01;return Math.abs(a-b)<d};r.isBallOutOfBounds=function(a){return r.ballX[a]<0?!0:r.ballX[a]>r.COLS-1?!0:r.ballY[a]<f.Y_TOP_BOUNDARY?!0:r.ballY[a]>r.ROWS-1?!0:!1};var H=function(a,b,c){return function(){var d=Array.prototype.slice.apply(arguments).concat(c);b.apply(a,d)}};r.callUserGeneratedCode=function(a){try{a.call(r,d,h)}catch(b){console&&console.log(b)}},r.onTick=function(){r.tickCount++,1===r.tickCount&&r.callUserGeneratedCode(r.whenGameStarts);for(var a in n)if(r.keyState[n[a]]&&"keydown"==r.keyState[n[a]])switch(n[a]){case n.LEFT:r.callUserGeneratedCode(r.whenLeft);break;case n.UP:r.callUserGeneratedCode(r.whenUp);break;case n.RIGHT:r.callUserGeneratedCode(r.whenRight);break;case n.DOWN:r.callUserGeneratedCode(r.whenDown)}for(var b in v)if(r.btnState[v[b]]&&r.btnState[v[b]]==s.DOWN)switch(v[b]){case v.LEFT:r.callUserGeneratedCode(r.whenLeft);break;case v.UP:r.callUserGeneratedCode(r.whenUp);break;case v.RIGHT:r.callUserGeneratedCode(r.whenRight);break;case v.DOWN:r.callUserGeneratedCode(r.whenDown)}for(var c in r.gesturesObserved){switch(c){case"left":r.callUserGeneratedCode(r.whenLeft);break;case"up":r.callUserGeneratedCode(r.whenUp);break;case"right":r.callUserGeneratedCode(r.whenRight);break;case"down":r.callUserGeneratedCode(r.whenDown)}0===r.gesturesObserved[c]--&&delete r.gesturesObserved[c]}for(var d=0;d<r.ballCount;d++){var e=r.ballSpeed[d]*Math.sin(r.ballDir[d]),g=-r.ballSpeed[d]*Math.cos(r.ballDir[d]),h=r.ballX[d]>=0&&r.ballX[d]<=r.COLS-1,i=r.ballY[d]>=f.Y_TOP_BOUNDARY,j=r.ballY[d]<=r.ROWS-1;if(r.ballX[d]+=e,r.ballY[d]+=g,0===(r.ballFlags[d]&(r.BallFlags.MISSED_PADDLE|r.BallFlags.IN_GOAL))){var k=r.ballX[d]>=0&&r.ballX[d]<=r.COLS-1,l=r.ballY[d]>=f.Y_TOP_BOUNDARY,m=r.ballY[d]<=r.ROWS-1;i&&h&&!k&&r.callUserGeneratedCode(r.whenWallCollided),h&&i&&!l&&(r.map[0][Math.round(r.ballX[d])]&o.GOAL?(r.callUserGeneratedCode(r.whenBallInGoal),r.ballFlags[d]|=r.BallFlags.IN_GOAL,A.setTimeout(H(this,r.moveBallOffscreen,d),1e3),r.respawnBalls&&r.launchBall(d)):r.callUserGeneratedCode(r.whenWallCollided));var q=r.ballX[d]-r.paddleX,t=r.ballY[d]-r.paddleY,u=r.calcDistance(q,t);u<f.PADDLE_BALL_COLLIDE_DISTANCE?r.callUserGeneratedCode(r.whenPaddleCollided):j&&!m&&(r.callUserGeneratedCode(r.whenBallMissesPaddle),r.ballFlags[d]|=r.BallFlags.MISSED_PADDLE,A.setTimeout(H(this,r.moveBallOffscreen,d),1e3),r.respawnBalls?r.launchBall(d):r.failOnBallExit&&(r.result=p.FAILURE,r.onPuzzleComplete()))}r.displayBall(d,r.ballX[d],r.ballY[d])}r.displayPaddle(r.paddleX,r.paddleY),K()&&r.onPuzzleComplete()},r.onSvgDrag=function(a){r.intervalId&&(r.gesturesObserved[a.gesture.direction]=Math.round(a.gesture.distance/w),a.gesture.preventDefault())},r.onKey=function(a){r.keyState[a.keyCode]=a.type,r.intervalId&&a.keyCode>=n.LEFT&&a.keyCode<=n.DOWN&&a.preventDefault()},r.onArrowButtonDown=function(a,b){r.btnState[b]=s.DOWN,a.preventDefault()},r.onArrowButtonUp=function(a,b){r.btnState[b]=s.UP},r.onMouseUp=function(a){r.btnState={}},r.init=function(b){d.reset=this.reset.bind(this),d.runButtonClick=this.runButtonClick.bind(this),r.clearEventHandlersKillTickLoop(),u=b.skin,t=b.level,y(),window.addEventListener("keydown",r.onKey,!1),window.addEventListener("keyup",r.onKey,!1),b.html=i({assetUrl:d.assetUrl,data:{localeDirection:d.localeDirection(),visualization:a("./visualization.html.ejs")(),controls:a("./controls.html.ejs")({assetUrl:d.assetUrl}),blockUsed:void 0,idealBlockNumber:void 0,editCode:t.editCode,blockCounterClass:"block-counter-default",readonlyWorkspace:b.readonlyWorkspace}}),b.loadAudio=function(){d.loadAudio(u.winSound,"win"),d.loadAudio(u.startSound,"start"),d.loadAudio(u.ballStartSound,"ballstart"),d.loadAudio(u.failureSound,"failure"),d.loadAudio(u.rubberSound,"rubber"),d.loadAudio(u.crunchSound,"crunch"),d.loadAudio(u.flagSound,"flag"),d.loadAudio(u.winPointSound,"winpoint"),d.loadAudio(u.winPoint2Sound,"winpoint2"),d.loadAudio(u.losePointSound,"losepoint"),d.loadAudio(u.losePoint2Sound,"losepoint2"),d.loadAudio(u.goal1Sound,"goal1"),d.loadAudio(u.goal2Sound,"goal2"),d.loadAudio(u.woodSound,"wood"),d.loadAudio(u.retroSound,"retro"),d.loadAudio(u.slapSound,"slap"),d.loadAudio(u.hitSound,"hit")},b.afterInject=function(){for(var a in v)j.addMouseUpTouchEvent(document.getElementById(v[a]),H(this,r.onArrowButtonUp,v[a])),j.addMouseDownTouchEvent(document.getElementById(v[a]),H(this,r.onArrowButtonDown,v[a]));document.addEventListener("mouseup",r.onMouseUp,!1),Blockly.HSV_SATURATION=.6,Blockly.SNAP_RADIUS*=r.scale.snapRadius,r.ballStart_=[],r.ballX=[],r.ballY=[],r.ballDir=[],r.ballSpeed=[],r.ballFlags=[],r.ballCount=0,r.originalBallCount=0,r.paddleFinishCount=0,r.defaultBallSpeed=t.ballSpeed||f.DEFAULT_BALL_SPEED,r.defaultBallDir=t.ballDirection||f.DEFAULT_BALL_DIRECTION;for(var b=0;b<r.ROWS;b++)for(var c=0;c<r.COLS;c++)r.map[b][c]&o.PADDLEFINISH?(0===r.paddleFinishCount&&(r.paddleFinish_=[]),r.paddleFinish_[r.paddleFinishCount]={x:c,y:b},r.paddleFinishCount++):r.map[b][c]&o.BALLSTART?(r.ballStart_[r.ballCount]={x:c,y:b},r.ballCount++):r.map[b][c]&o.PADDLESTART?r.paddleStart_={x:c,y:b}:r.map[b][c]&o.BALLFINISH?r.ballFinish_={x:c,y:b}:r.map[b][c]&o.GOAL&&(r.goalLocated_=!0);r.originalBallCount=r.ballCount,F()},b.blockArrangement={when_run:{x:20,y:20},bounce_whenLeft:{x:20,y:220},bounce_whenRight:{x:180,y:220},bounce_whenPaddleCollided:{x:20,y:310},bounce_whenWallCollided:{x:20,y:410},bounce_whenBallInGoal:{x:20,y:510},bounce_whenBallMissesPaddle:{x:20,y:630}},b.twitter=x,b.makeYourOwn=b.share,b.makeString=e.makeYourOwn(),b.makeUrl="http://code.org/bounce",b.makeImage=d.assetUrl("media/promo.png"),b.enableShowCode=!1,b.enableShowBlockCount=!1,d.init(b);var c=document.getElementById("finishButton");j.addClickTouchEvent(c,r.onPuzzleComplete)},r.clearEventHandlersKillTickLoop=function(){r.whenWallCollided=null,r.whenBallInGoal=null,r.whenBallMissesPaddle=null,r.whenPaddleCollided=null,r.whenDown=null,r.whenLeft=null,r.whenRight=null,r.whenUp=null,r.whenGameStarts=null,r.intervalId&&window.clearInterval(r.intervalId),r.intervalId=0,A.clearTimeouts()},r.moveBallOffscreen=function(a){r.ballX[a]=100,r.ballY[a]=100,r.ballDir[a]=0,r.ballSpeed[a]=0},r.playSoundAndResetBall=function(a){r.resetBall(a,{randomPosition:!0}),d.playAudio("ballstart")},r.launchBall=function(a){r.ballFlags[a]|=r.BallFlags.LAUNCHING,A.setTimeout(H(this,r.playSoundAndResetBall,a),3e3)},r.resetBall=function(a,b){var c=b.randomPosition||"undefined"==typeof r.ballStart_[a];r.ballX[a]=c?Math.floor(Math.random()*r.COLS):r.ballStart_[a].x,r.ballY[a]=c?f.DEFAULT_BALL_START_Y:r.ballStart_[a].y,r.ballDir[a]=c?Math.random()*Math.PI/2+.75*Math.PI:r.defaultBallDir,r.ballSpeed[a]=r.currentBallSpeed,r.ballFlags[a]=0,r.displayBall(a,r.ballX[a],r.ballY[a])},r.reset=function(a){var b;r.clearEventHandlersKillTickLoop();var c=0;for(b=0;b<r.softButtons_.length;b++)document.getElementById(r.softButtons_[b]).style.display="inline",c++;if(c){var d=document.getElementById("soft-buttons");d.className="soft-buttons-"+c}for(r.gesturesObserved={},r.playerScore=0,r.opponentScore=0,document.getElementById("score").setAttribute("visibility","hidden"),r.setBackground("hardcourt"),r.setBall("hardcourt"),r.setPaddle("hardcourt"),r.currentBallSpeed=r.defaultBallSpeed,b=r.originalBallCount;b<r.ballCount;b++)r.deleteBallElements(b);for(r.ballCount=r.originalBallCount,b=0;b<r.ballCount;b++)r.resetBall(b,{});r.paddleX=r.paddleStart_.x,r.paddleY=r.paddleStart_.y,r.paddleSpeed=f.DEFAULT_PADDLE_SPEED,r.displayPaddle(r.paddleX,r.paddleY);document.getElementById("svgBounce");if(r.paddleFinish_)for(b=0;b<r.paddleFinishCount;b++){r.paddleFinish_[b].finished=!1;var e=document.getElementById("paddlefinish"+b);e.setAttribute("x",r.SQUARE_SIZE*(r.paddleFinish_[b].x+.5)-e.getAttribute("width")/2),e.setAttribute("y",r.SQUARE_SIZE*(r.paddleFinish_[b].y+.9)-e.getAttribute("height")),e.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",u.goal)}if(r.ballFinish_){var g=document.getElementById("ballfinish");g.setAttribute("x",r.SQUARE_SIZE*(r.ballFinish_.x+.5)-g.getAttribute("width")/2),g.setAttribute("y",r.SQUARE_SIZE*(r.ballFinish_.y+.9)-g.getAttribute("height")),g.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",u.goal)}var h,i,j=0;for(i=0;i<r.ROWS;i++)for(h=0;h<r.COLS;h++){var k=document.getElementById("obstacle"+j);k&&k.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",u.obstacle),++j}var l=0;for(i=0;i<r.ROWS;i++)for(h=0;h<r.COLS;h++){var m=document.getElementById("tileClipPath"+l);m&&m.setAttribute("visibility","visible");var n=document.getElementById("tileElement"+l);n&&n.setAttribute("opacity",1),l++}},r.runButtonClick=function(){var a=document.getElementById("runButton"),b=document.getElementById("resetButton");if(b.style.minWidth||(b.style.minWidth=a.offsetWidth+"px"),d.toggleRunReset("reset"),Blockly.mainBlockSpace.traceOn(!0),d.reset(!1),d.attempts++,r.execute(),t.freePlay&&!d.hideSource){var c=document.getElementById("share-cell");c.className="share-cell-enabled"}r.goalLocated_&&(document.getElementById("score").setAttribute("visibility","visible"),r.displayScore())};var I=function(){r.waitingForReport||d.displayFeedback({app:"bounce",skin:u.id,feedbackType:r.testResults,response:r.response,level:t,showingSharing:t.freePlay,twitter:x,appStrings:{reinfFeedbackMsg:e.reinfFeedbackMsg(),sharingText:e.shareGame()}})};r.onReportComplete=function(a){r.response=a,r.waitingForReport=!1,I()},r.execute=function(){var a=Blockly.Generator.blockSpaceToCode("JavaScript","bounce_whenRun");r.result=p.UNSET,r.testResults=q.NO_TESTS_RUN,r.waitingForReport=!1,r.response=null,t.editCode&&(a=l.generateCodeAliases(null,"Bounce"),a+=d.editor.getValue());var b=Blockly.Generator.blockSpaceToCode("JavaScript","bounce_whenWallCollided"),c=g.functionFromCode(b,{StudioApp:d,Bounce:h}),e=Blockly.Generator.blockSpaceToCode("JavaScript","bounce_whenBallInGoal"),f=g.functionFromCode(e,{StudioApp:d,Bounce:h}),i=Blockly.Generator.blockSpaceToCode("JavaScript","bounce_whenBallMissesPaddle"),j=g.functionFromCode(i,{StudioApp:d,Bounce:h}),k=Blockly.Generator.blockSpaceToCode("JavaScript","bounce_whenPaddleCollided"),m=g.functionFromCode(k,{StudioApp:d,Bounce:h}),n=Blockly.Generator.blockSpaceToCode("JavaScript","bounce_whenLeft"),o=g.functionFromCode(n,{StudioApp:d,Bounce:h}),s=Blockly.Generator.blockSpaceToCode("JavaScript","bounce_whenRight"),u=g.functionFromCode(s,{StudioApp:d,Bounce:h}),v=Blockly.Generator.blockSpaceToCode("JavaScript","bounce_whenUp"),w=g.functionFromCode(v,{StudioApp:d,Bounce:h}),x=Blockly.Generator.blockSpaceToCode("JavaScript","bounce_whenDown"),y=g.functionFromCode(x,{StudioApp:d,Bounce:h}),z=Blockly.Generator.blockSpaceToCode("JavaScript","when_run"),A=g.functionFromCode(z,{StudioApp:d,Bounce:h});d.playAudio(r.ballCount>0?"ballstart":"start"),d.reset(!1),r.whenWallCollided=c,r.whenBallInGoal=f,r.whenBallMissesPaddle=j,r.whenPaddleCollided=m,r.whenLeft=o,r.whenRight=u,r.whenUp=w,r.whenDown=y,r.whenGameStarts=A,r.tickCount=0,r.intervalId=window.setInterval(r.onTick,r.scale.stepSpeed)},r.onPuzzleComplete=function(){t.freePlay&&(r.result=p.SUCCESS),r.clearEventHandlersKillTickLoop();var a=r.result==p.SUCCESS;t.freePlay?r.testResults=q.FREE_PLAY:r.testResults=d.getTestResults(a),r.testResults>=q.FREE_PLAY?d.playAudio("win"):d.playAudio("failure"),t.editCode&&(r.testResults=a?q.ALL_PASS:q.TOO_FEW_BLOCKS_FAIL);var b=Blockly.Xml.blockSpaceToDom(Blockly.mainBlockSpace),c=Blockly.Xml.domToText(b);r.waitingForReport=!0,d.report({app:"bounce",level:t.id,result:r.result===p.SUCCESS,testResult:r.testResults,program:encodeURIComponent(c),onComplete:r.onReportComplete})},r.setTileTransparent=function(){for(var a=0,b=0;b<r.ROWS;b++)for(var c=0;c<r.COLS;c++){var d=document.getElementById("tileElement"+a),e=document.getElementById("tileAnimation"+a);
d&&d.setAttribute("opacity",0),e&&e.beginElement(),a++}},r.displayBall=function(a,b,c){var d=document.getElementById("ball"+a);d.setAttribute("x",b*r.SQUARE_SIZE),d.setAttribute("y",c*r.SQUARE_SIZE+r.BALL_Y_OFFSET);var e=document.getElementById("ballClipRect"+a);e.setAttribute("x",b*r.SQUARE_SIZE),e.setAttribute("y",d.getAttribute("y"))},r.displayPaddle=function(a,b){var c=document.getElementById("paddle");c.setAttribute("x",a*r.SQUARE_SIZE),c.setAttribute("y",b*r.SQUARE_SIZE+r.PADDLE_Y_OFFSET);var d=document.getElementById("paddleClipRect");d.setAttribute("x",a*r.SQUARE_SIZE),d.setAttribute("y",c.getAttribute("y"))},r.displayScore=function(){var a=document.getElementById("score");a.textContent=e.scoreText({playerScore:r.playerScore,opponentScore:r.opponentScore})};var J=function(a){return"hardcourt"===a?u:u[a]};r.setBackground=function(a){var b=document.getElementById("background");b.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",J(a).background);for(var c=0,d=0;d<r.ROWS;d++)for(var e=0;e<r.COLS;e++){var f,g=!1,h=D(e,d)+D(e,d-1)+D(e+1,d)+D(e,d+1)+D(e-1,d);B[h]?f=J(a).tiles:(h=E(e,d)+E(e,d-1)+E(e+1,d)+E(e,d+1)+E(e-1,d),C[h]||(g=!0),f=J(a).goalTiles),g||(b=document.getElementById("tileElement"+c),b.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",f)),c++}},r.setBall=function(a){r.ballImage=J(a).ball;for(var b=0;b<r.ballCount;b++){var c=document.getElementById("ball"+b);c.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",r.ballImage)}},r.setPaddle=function(a){var b=document.getElementById("paddle");b.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",J(a).paddle)},r.timedOut=function(){return r.tickCount>r.timeoutFailureTick},r.allFinishesComplete=function(){var a;if(r.paddleFinish_){var b,c;for(a=0,b=0;a<r.paddleFinishCount;a++)if(r.paddleFinish_[a].finished)b++;else if(G(r.paddleX,r.paddleFinish_[a].x,f.FINISH_COLLIDE_DISTANCE)&&G(r.paddleY,r.paddleFinish_[a].y,f.FINISH_COLLIDE_DISTANCE)){r.paddleFinish_[a].finished=!0,b++,c=!0;var e=document.getElementById("paddlefinish"+a);e.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",u.goalSuccess)}return c&&b!=r.paddleFinishCount&&d.playAudio("flag"),b==r.paddleFinishCount}if(r.ballFinish_)for(a=0;a<r.ballCount;a++)if(G(r.ballX[a],r.ballFinish_.x,f.FINISH_COLLIDE_DISTANCE)&&G(r.ballY[a],r.ballFinish_.y,f.FINISH_COLLIDE_DISTANCE)){var g=document.getElementById("ballfinish");return g.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",u.goalSuccess),!0}return!1};var K=function(){return t.goal&&t.goal.successCondition&&t.goal.successCondition()?(r.result=p.SUCCESS,!0):t.goal&&t.goal.failureCondition&&t.goal.failureCondition()?(r.result=p.FAILURE,!0):r.allFinishesComplete()?(r.result=p.SUCCESS,!0):r.timedOut()?(r.result=p.FAILURE,!0):!1}},{"../StudioApp":"/home/ubuntu/staging/apps/build/js/StudioApp.js","../codegen":"/home/ubuntu/staging/apps/build/js/codegen.js","../constants":"/home/ubuntu/staging/apps/build/js/constants.js","../dom":"/home/ubuntu/staging/apps/build/js/dom.js","../dropletUtils":"/home/ubuntu/staging/apps/build/js/dropletUtils.js","../hammer":"/home/ubuntu/staging/apps/build/js/hammer.js","../locale":"/home/ubuntu/staging/apps/build/js/locale.js","../skins":"/home/ubuntu/staging/apps/build/js/skins.js","../templates/page.html.ejs":"/home/ubuntu/staging/apps/build/js/templates/page.html.ejs","../timeoutList":"/home/ubuntu/staging/apps/build/js/timeoutList.js","../utils":"/home/ubuntu/staging/apps/build/js/utils.js","./api":"/home/ubuntu/staging/apps/build/js/bounce/api.js","./controls.html.ejs":"/home/ubuntu/staging/apps/build/js/bounce/controls.html.ejs","./locale":"/home/ubuntu/staging/apps/build/js/bounce/locale.js","./tiles":"/home/ubuntu/staging/apps/build/js/bounce/tiles.js","./visualization.html.ejs":"/home/ubuntu/staging/apps/build/js/bounce/visualization.html.ejs"}],"/home/ubuntu/staging/apps/build/js/bounce/visualization.html.ejs":[function(require,module,exports){module.exports=function(){var t=function anonymous(locals,filters,escape){escape=escape||function(a){return String(a).replace(/&(?!\w+;)/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")};var buf=[];with(locals||{})!function(){buf.push('<svg xmlns="http://www.w3.org/2000/svg" version="1.1" id="svgBounce">\n</svg>\n<div id="capacityBubble">\n  <div id="capacity"></div>\n</div>\n')}();return buf.join("")};return function(a){return t(a,require("ejs").filters)}}()},{ejs:"/home/ubuntu/staging/apps/node_modules/ejs/lib/ejs.js"}],"/home/ubuntu/staging/apps/build/js/bounce/controls.html.ejs":[function(require,module,exports){module.exports=function(){var t=function anonymous(locals,filters,escape){escape=escape||function(a){return String(a).replace(/&(?!\w+;)/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")};var buf=[];with(locals||{})!function(){buf.push("");var a=(require("./locale"),require("../locale"));buf.push('\n\n<div id="soft-buttons" class="soft-buttons-none">\n  <button id="leftButton" disabled=true class="arrow">\n    <img src="',escape(assetUrl("media/1x1.gif")),'" class="left-btn icon21">\n  </button>\n  <button id="rightButton" disabled=true class="arrow">\n    <img src="',escape(assetUrl("media/1x1.gif")),'" class="right-btn icon21">\n  </button>\n  <button id="upButton" disabled=true class="arrow">\n    <img src="',escape(assetUrl("media/1x1.gif")),'" class="up-btn icon21">\n  </button>\n  <button id="downButton" disabled=true class="arrow">\n    <img src="',escape(assetUrl("media/1x1.gif")),'" class="down-btn icon21">\n  </button>\n</div>\n<div id="share-cell-wrapper">\n  <div id="share-cell" class="share-cell-none">\n    <button id="finishButton" class="share">\n      <img src="',escape(assetUrl("media/1x1.gif")),'">',escape(a.finish()),"\n    </button>\n  </div>\n</div>\n")}();return buf.join("")};return function(a){return t(a,require("ejs").filters)}}()},{"../locale":"/home/ubuntu/staging/apps/build/js/locale.js","./locale":"/home/ubuntu/staging/apps/build/js/bounce/locale.js",ejs:"/home/ubuntu/staging/apps/node_modules/ejs/lib/ejs.js"}],"/home/ubuntu/staging/apps/build/js/bounce/blocks.js":[function(a,b,c){"use strict";var d=a("./locale"),e=(a("../codegen"),function(a,b){var c=a.getTitleValue("VALUE");if("random"===c){var d=a.VALUES.slice(1).map(function(a){return a[1]});c="Bounce.random(["+d+"])"}return"Bounce."+b+"('block_id_"+a.id+"', "+c+");\n"});c.install=function(a,b){var c=a.Generator.get("JavaScript");a.JavaScript=c,a.Blocks.bounce_whenLeft={helpUrl:"",init:function(){this.setHSV(140,1,.74),this.appendDummyInput().appendTitle(d.whenLeft()),this.setPreviousStatement(!1),this.setNextStatement(!0),this.setTooltip(d.whenLeftTooltip())}},c.bounce_whenLeft=function(){return"\n"},a.Blocks.bounce_whenRight={helpUrl:"",init:function(){this.setHSV(140,1,.74),this.appendDummyInput().appendTitle(d.whenRight()),this.setPreviousStatement(!1),this.setNextStatement(!0),this.setTooltip(d.whenRightTooltip())}},c.bounce_whenRight=function(){return"\n"},a.Blocks.bounce_whenUp={helpUrl:"",init:function(){this.setHSV(140,1,.74),this.appendDummyInput().appendTitle(d.whenUp()),this.setPreviousStatement(!1),this.setNextStatement(!0),this.setTooltip(d.whenUpTooltip())}},c.bounce_whenUp=function(){return"\n"},a.Blocks.bounce_whenDown={helpUrl:"",init:function(){this.setHSV(140,1,.74),this.appendDummyInput().appendTitle(d.whenDown()),this.setPreviousStatement(!1),this.setNextStatement(!0),this.setTooltip(d.whenDownTooltip())}},c.bounce_whenDown=function(){return"\n"},a.Blocks.bounce_whenWallCollided={helpUrl:"",init:function(){this.setHSV(140,1,.74),this.appendDummyInput().appendTitle(d.whenWallCollided()),this.setPreviousStatement(!1),this.setNextStatement(!0),this.setTooltip(d.whenWallCollidedTooltip())}},c.bounce_whenWallCollided=function(){return"\n"},a.Blocks.bounce_whenBallInGoal={helpUrl:"",init:function(){this.setHSV(140,1,.74),this.appendDummyInput().appendTitle(d.whenBallInGoal()),this.setPreviousStatement(!1),this.setNextStatement(!0),this.setTooltip(d.whenBallInGoalTooltip())}},c.bounce_whenBallInGoal=function(){return"\n"},a.Blocks.bounce_whenBallMissesPaddle={helpUrl:"",init:function(){this.setHSV(140,1,.74),this.appendDummyInput().appendTitle(d.whenBallMissesPaddle()),this.setPreviousStatement(!1),this.setNextStatement(!0),this.setTooltip(d.whenBallMissesPaddleTooltip())}},c.bounce_whenBallMissesPaddle=function(){return"\n"},a.Blocks.bounce_whenPaddleCollided={helpUrl:"",init:function(){this.setHSV(140,1,.74),this.appendDummyInput().appendTitle(d.whenPaddleCollided()),this.setPreviousStatement(!1),this.setNextStatement(!0),this.setTooltip(d.whenPaddleCollidedTooltip())}},c.bounce_whenPaddleCollided=function(){return"\n"},a.Blocks.bounce_moveLeft={helpUrl:"",init:function(){this.setHSV(184,1,.74),this.appendDummyInput().appendTitle(d.moveLeft()),this.setPreviousStatement(!0),this.setNextStatement(!0),this.setTooltip(d.moveLeftTooltip())}},c.bounce_moveLeft=function(){return"Bounce.moveLeft('block_id_"+this.id+"');\n"},a.Blocks.bounce_moveRight={helpUrl:"",init:function(){this.setHSV(184,1,.74),this.appendDummyInput().appendTitle(d.moveRight()),this.setPreviousStatement(!0),this.setNextStatement(!0),this.setTooltip(d.moveRightTooltip())}},c.bounce_moveRight=function(){return"Bounce.moveRight('block_id_"+this.id+"');\n"},a.Blocks.bounce_moveUp={helpUrl:"",init:function(){this.setHSV(184,1,.74),this.appendDummyInput().appendTitle(d.moveUp()),this.setPreviousStatement(!0),this.setNextStatement(!0),this.setTooltip(d.moveUpTooltip())}},c.bounce_moveUp=function(){return"Bounce.moveUp('block_id_"+this.id+"');\n"},a.Blocks.bounce_moveDown={helpUrl:"",init:function(){this.setHSV(184,1,.74),this.appendDummyInput().appendTitle(d.moveDown()),this.setPreviousStatement(!0),this.setNextStatement(!0),this.setTooltip(d.moveDownTooltip())}},c.bounce_moveDown=function(){return"Bounce.moveDown('block_id_"+this.id+"');\n"},a.Blocks.bounce_playSound={helpUrl:"",init:function(){this.setHSV(184,1,.74),this.appendDummyInput().appendTitle(new a.FieldDropdown(this.SOUNDS),"SOUND"),this.setPreviousStatement(!0),this.setNextStatement(!0),this.setTooltip(d.playSoundTooltip())}},a.Blocks.bounce_playSound.SOUNDS=[[d.playSoundHit(),"hit"],[d.playSoundWood(),"wood"],[d.playSoundRetro(),"retro"],[d.playSoundSlap(),"slap"],[d.playSoundRubber(),"rubber"],[d.playSoundCrunch(),"crunch"],[d.playSoundWinPoint(),"winpoint"],[d.playSoundWinPoint2(),"winpoint2"],[d.playSoundLosePoint(),"losepoint"],[d.playSoundLosePoint2(),"losepoint2"],[d.playSoundGoal1(),"goal1"],[d.playSoundGoal2(),"goal2"]],c.bounce_playSound=function(){return"Bounce.playSound('block_id_"+this.id+"', '"+this.getTitleValue("SOUND")+"');\n"},a.Blocks.bounce_incrementPlayerScore={helpUrl:"",init:function(){this.setHSV(184,1,.74),this.appendDummyInput().appendTitle(d.incrementPlayerScore()),this.setPreviousStatement(!0),this.setNextStatement(!0),this.setTooltip(d.incrementPlayerScoreTooltip())}},c.bounce_incrementPlayerScore=function(){return"Bounce.incrementPlayerScore('block_id_"+this.id+"');\n"},a.Blocks.bounce_incrementOpponentScore={helpUrl:"",init:function(){this.setHSV(184,1,.74),this.appendDummyInput().appendTitle(d.incrementOpponentScore()),this.setPreviousStatement(!0),this.setNextStatement(!0),this.setTooltip(d.incrementOpponentScoreTooltip())}},c.bounce_incrementOpponentScore=function(){return"Bounce.incrementOpponentScore('block_id_"+this.id+"');\n"},a.Blocks.bounce_bounceBall={helpUrl:"",init:function(){this.setHSV(184,1,.74),this.appendDummyInput().appendTitle(d.bounceBall()),this.setPreviousStatement(!0),this.setNextStatement(!0),this.setTooltip(d.bounceBallTooltip())}},c.bounce_bounceBall=function(){return"Bounce.bounceBall('block_id_"+this.id+"');\n"},a.Blocks.bounce_launchBall={helpUrl:"",init:function(){this.setHSV(184,1,.74),this.appendDummyInput().appendTitle(d.launchBall()),this.setPreviousStatement(!0),this.setNextStatement(!0),this.setTooltip(d.launchBallTooltip())}},c.bounce_launchBall=function(){return"Bounce.launchBall('block_id_"+this.id+"');\n"},a.Blocks.bounce_setBallSpeed={helpUrl:"",init:function(){var b=new a.FieldDropdown(this.VALUES);b.setValue(this.VALUES[3][1]),this.setHSV(184,1,.74),this.appendDummyInput().appendTitle(b,"VALUE"),this.setPreviousStatement(!0),this.setNextStatement(!0),this.setTooltip(d.setBallSpeedTooltip())}},a.Blocks.bounce_setBallSpeed.VALUES=[[d.setBallSpeedRandom(),"random"],[d.setBallSpeedVerySlow(),"Bounce.BallSpeed.VERY_SLOW"],[d.setBallSpeedSlow(),"Bounce.BallSpeed.SLOW"],[d.setBallSpeedNormal(),"Bounce.BallSpeed.NORMAL"],[d.setBallSpeedFast(),"Bounce.BallSpeed.FAST"],[d.setBallSpeedVeryFast(),"Bounce.BallSpeed.VERY_FAST"]],c.bounce_setBallSpeed=function(a){return e(this,"setBallSpeed")},a.Blocks.bounce_setPaddleSpeed={helpUrl:"",init:function(){var b=new a.FieldDropdown(this.VALUES);b.setValue(this.VALUES[3][1]),this.setHSV(184,1,.74),this.appendDummyInput().appendTitle(b,"VALUE"),this.setPreviousStatement(!0),this.setNextStatement(!0),this.setTooltip(d.setPaddleSpeedTooltip())}},a.Blocks.bounce_setPaddleSpeed.VALUES=[[d.setPaddleSpeedRandom(),"random"],[d.setPaddleSpeedVerySlow(),"Bounce.PaddleSpeed.VERY_SLOW"],[d.setPaddleSpeedSlow(),"Bounce.PaddleSpeed.SLOW"],[d.setPaddleSpeedNormal(),"Bounce.PaddleSpeed.NORMAL"],[d.setPaddleSpeedFast(),"Bounce.PaddleSpeed.FAST"],[d.setPaddleSpeedVeryFast(),"Bounce.PaddleSpeed.VERY_FAST"]],c.bounce_setPaddleSpeed=function(a){return e(this,"setPaddleSpeed")},a.Blocks.bounce_setBackground={helpUrl:"",init:function(){var b=new a.FieldDropdown(this.VALUES);b.setValue(this.VALUES[1][1]),this.setHSV(312,.32,.62),this.appendDummyInput().appendTitle(b,"VALUE"),this.setInputsInline(!0),this.setPreviousStatement(!0),this.setNextStatement(!0),this.setTooltip(d.setBackgroundTooltip())}},a.Blocks.bounce_setBackground.VALUES=[[d.setBackgroundRandom(),"random"],[d.setBackgroundHardcourt(),'"hardcourt"'],[d.setBackgroundRetro(),'"retro"']],c.bounce_setBackground=function(){return e(this,"setBackground")},a.Blocks.bounce_setBall={helpUrl:"",init:function(){var b=new a.FieldDropdown(this.VALUES);b.setValue(this.VALUES[1][1]),this.setHSV(312,.32,.62),this.appendDummyInput().appendTitle(b,"VALUE"),this.setInputsInline(!0),this.setPreviousStatement(!0),this.setNextStatement(!0),this.setTooltip(d.setBallTooltip())}},a.Blocks.bounce_setBall.VALUES=[[d.setBallRandom(),"random"],[d.setBallHardcourt(),'"hardcourt"'],[d.setBallRetro(),'"retro"']],c.bounce_setBall=function(){return e(this,"setBall")},a.Blocks.bounce_setPaddle={helpUrl:"",init:function(){var b=new a.FieldDropdown(this.VALUES);b.setValue(this.VALUES[1][1]),this.setHSV(312,.32,.62),this.appendDummyInput().appendTitle(b,"VALUE"),this.setInputsInline(!0),this.setPreviousStatement(!0),this.setNextStatement(!0),this.setTooltip(d.setPaddleTooltip())}},a.Blocks.bounce_setPaddle.VALUES=[[d.setPaddleRandom(),"random"],[d.setPaddleHardcourt(),'"hardcourt"'],[d.setPaddleRetro(),'"retro"']],c.bounce_setPaddle=function(){return e(this,"setPaddle")},delete a.Blocks.procedures_defreturn,delete a.Blocks.procedures_ifreturn}},{"../codegen":"/home/ubuntu/staging/apps/build/js/codegen.js","./locale":"/home/ubuntu/staging/apps/build/js/bounce/locale.js"}],"/home/ubuntu/staging/apps/build/js/bounce/locale.js":[function(a,b,c){"use strict";b.exports=window.blockly.bounce_locale},{}],"/home/ubuntu/staging/apps/build/js/bounce/api.js":[function(a,b,c){"use strict";var d=a("./tiles"),e=(d.Direction,d.SquareType,a("../StudioApp").singleton);c.PaddleSpeed={VERY_SLOW:.04,SLOW:.06,NORMAL:.1,FAST:.15,VERY_FAST:.23},c.BallSpeed={VERY_SLOW:.04,SLOW:.06,NORMAL:.1,FAST:.15,VERY_FAST:.23},c.random=function(a){var b=Math.floor(Math.random()*a.length);return a[b]},c.setBallSpeed=function(a,b){e.highlight(a),Bounce.currentBallSpeed=b;for(var c=0;c<Bounce.ballCount;c++)Bounce.ballSpeed[c]=b},c.setBackground=function(a,b){e.highlight(a),Bounce.setBackground(b)},c.setBall=function(a,b){e.highlight(a),Bounce.setBall(b)},c.setPaddle=function(a,b){e.highlight(a),Bounce.setPaddle(b)},c.setBackground=function(a,b){e.highlight(a),Bounce.setBackground(b)},c.setPaddleSpeed=function(a,b){e.highlight(a),Bounce.paddleSpeed=b},c.playSound=function(a,b){e.highlight(a),e.playAudio(b)},c.moveLeft=function(a){e.highlight(a),Bounce.paddleX-=Bounce.paddleSpeed,Bounce.paddleX<0&&(Bounce.paddleX=0)},c.moveRight=function(a){e.highlight(a),Bounce.paddleX+=Bounce.paddleSpeed,Bounce.paddleX>Bounce.COLS-1&&(Bounce.paddleX=Bounce.COLS-1)},c.moveUp=function(a){e.highlight(a),Bounce.paddleY-=Bounce.paddleSpeed,Bounce.paddleY<0&&(Bounce.paddleY=0)},c.moveDown=function(a){e.highlight(a),Bounce.paddleY+=Bounce.paddleSpeed,Bounce.paddleY>Bounce.ROWS-1&&(Bounce.paddleY=Bounce.ROWS-1)},c.incrementOpponentScore=function(a){e.highlight(a),Bounce.opponentScore++,Bounce.displayScore()},c.incrementPlayerScore=function(a){e.highlight(a),Bounce.playerScore++,Bounce.displayScore()},c.launchBall=function(a){e.highlight(a);for(var b=0;b<Bounce.ballCount;b++)if(Bounce.isBallOutOfBounds(b)&&0===(Bounce.ballFlags[b]&Bounce.BallFlags.LAUNCHING))return void Bounce.launchBall(b);b=Bounce.ballCount,Bounce.ballCount++,Bounce.createBallElements(b),Bounce.playSoundAndResetBall(b)},c.bounceBall=function(a){e.highlight(a);var b;for(b=0;b<Bounce.ballCount;b++)if(0===(Bounce.ballFlags[b]&(Bounce.BallFlags.MISSED_PADDLE|Bounce.BallFlags.IN_GOAL))){Bounce.ballX[b]<0?(Bounce.ballX[b]=0,Bounce.ballDir[b]=2*Math.PI-Bounce.ballDir[b]):Bounce.ballX[b]>Bounce.COLS-1&&(Bounce.ballX[b]=Bounce.COLS-1,Bounce.ballDir[b]=2*Math.PI-Bounce.ballDir[b]),Bounce.ballY[b]<d.Y_TOP_BOUNDARY&&(Bounce.ballY[b]=d.Y_TOP_BOUNDARY,Bounce.ballDir[b]=Math.PI-Bounce.ballDir[b]);var c=Bounce.ballX[b]-Bounce.paddleX,f=Bounce.ballY[b]-Bounce.paddleY,g=Bounce.calcDistance(c,f);if(g<d.PADDLE_BALL_COLLIDE_DISTANCE&&Math.cos(Bounce.ballDir[b])<0){var h=3*Math.PI/8*(c/d.PADDLE_BALL_COLLIDE_DISTANCE);Bounce.ballDir[b]=(5*Math.PI+h-Bounce.ballDir[b])%(2*Math.PI),Bounce.ballDir[b]=Bounce.ballDir[b]<Math.PI?Math.min(Math.PI/2-.2,Bounce.ballDir[b]):Math.max(3*Math.PI/2+.2,Bounce.ballDir[b])}}}},{"../StudioApp":"/home/ubuntu/staging/apps/build/js/StudioApp.js","./tiles":"/home/ubuntu/staging/apps/build/js/bounce/tiles.js"}],"/home/ubuntu/staging/apps/build/js/bounce/tiles.js":[function(a,b,c){"use strict";c.Direction={NORTH:0,EAST:1,SOUTH:2,WEST:3},c.PADDLE_BALL_COLLIDE_DISTANCE=.7,c.FINISH_COLLIDE_DISTANCE=.5,c.DEFAULT_BALL_SPEED=.1,c.DEFAULT_BALL_DIRECTION=1.25*Math.PI,c.DEFAULT_PADDLE_SPEED=.1,c.DEFAULT_BALL_START_Y=2,c.Y_TOP_BOUNDARY=-.2,c.SquareType={OPEN:0,WALL:1,GOAL:2,BALLSTART:4,PADDLEFINISH:8,PADDLESTART:16,BALLFINISH:32,OBSTACLE:64}},{}]},{},["/home/ubuntu/staging/apps/build/js/bounce/main.js"]);