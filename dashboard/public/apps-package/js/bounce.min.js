require=function a(b,c,d){function e(g,h){if(!c[g]){if(!b[g]){var i="function"==typeof require&&require;if(!h&&i)return i(g,!0);if(f)return f(g,!0);var j=new Error("Cannot find module '"+g+"'");throw j.code="MODULE_NOT_FOUND",j}var k=c[g]={exports:{}};b[g][0].call(k.exports,function(a){var c=b[g][1][a];return e(c?c:a)},k,k.exports,a,b,c,d)}return c[g].exports}for(var f="function"==typeof require&&require,g=0;g<d.length;g++)e(d[g]);return e}({"/home/ubuntu/staging/apps/build/js/bounce/main.js":[function(a,b,c){(function(b){"use strict";var c=a("../appMain");window.Bounce=a("./bounce"),"undefined"!=typeof b&&(b.Bounce=window.Bounce);var d=a("./blocks"),e=a("./levels"),f=a("./skins");window.bounceMain=function(a){a.skinsModule=f,a.blocksModule=d,c(window.Bounce,e,a)}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"../appMain":"/home/ubuntu/staging/apps/build/js/appMain.js","./blocks":"/home/ubuntu/staging/apps/build/js/bounce/blocks.js","./bounce":"/home/ubuntu/staging/apps/build/js/bounce/bounce.js","./levels":"/home/ubuntu/staging/apps/build/js/bounce/levels.js","./skins":"/home/ubuntu/staging/apps/build/js/bounce/skins.js"}],"/home/ubuntu/staging/apps/build/js/bounce/skins.js":[function(a,b,c){"use strict";var d=a("../skins"),e={bounce:{nonDisappearingPegmanHittingObstacle:!0,ballYOffset:10}};c.load=function(a,b){var c=d.load(a,b),f=e[c.id];if(c.retro={background:c.assetUrl("retro_background.png"),tiles:c.assetUrl("retro_tiles_wall.png"),goalTiles:c.assetUrl("retro_tiles_goal.png"),paddle:c.assetUrl("retro_paddle.png"),ball:c.assetUrl("retro_ball.png")},c.tiles=c.assetUrl("tiles_wall.png"),c.goalTiles=c.assetUrl("tiles_goal.png"),c.goal=c.assetUrl("goal.png"),c.goalSuccess=c.assetUrl("goal_success.png"),c.ball=c.assetUrl("ball.png"),c.paddle=c.assetUrl("paddle.png"),c.obstacle=c.assetUrl("obstacle.png"),f.nonDisappearingPegmanHittingObstacle?c.nonDisappearingPegmanHittingObstacle=!0:c.nonDisappearingPegmanHittingObstacle=!1,c.obstacleScale=f.obstacleScale||1,c.largerObstacleAnimationTiles=c.assetUrl(f.largerObstacleAnimationTiles),c.hittingWallAnimation=c.assetUrl(f.hittingWallAnimation),c.approachingGoalAnimation=c.assetUrl(f.approachingGoalAnimation),c.rubberSound=[c.assetUrl("wall.mp3"),c.assetUrl("wall.ogg")],c.flagSound=[c.assetUrl("win_goal.mp3"),c.assetUrl("win_goal.ogg")],c.crunchSound=[c.assetUrl("wall0.mp3"),c.assetUrl("wall0.ogg")],c.ballStartSound=[c.assetUrl("ball_start.mp3"),c.assetUrl("ball_start.ogg")],c.winPointSound=[c.assetUrl("1_we_win.mp3"),c.assetUrl("1_we_win.ogg")],c.winPoint2Sound=[c.assetUrl("2_we_win.mp3"),c.assetUrl("2_we_win.ogg")],c.losePointSound=[c.assetUrl("1_we_lose.mp3"),c.assetUrl("1_we_lose.ogg")],c.losePoint2Sound=[c.assetUrl("2_we_lose.mp3"),c.assetUrl("2_we_lose.ogg")],c.goal1Sound=[c.assetUrl("1_goal.mp3"),c.assetUrl("1_goal.ogg")],c.goal2Sound=[c.assetUrl("2_goal.mp3"),c.assetUrl("2_goal.ogg")],c.woodSound=[c.assetUrl("1_paddle_bounce.mp3"),c.assetUrl("1_paddle_bounce.ogg")],c.retroSound=[c.assetUrl("2_paddle_bounce.mp3"),c.assetUrl("2_paddle_bounce.ogg")],c.slapSound=[c.assetUrl("1_wall_bounce.mp3"),c.assetUrl("1_wall_bounce.ogg")],c.hitSound=[c.assetUrl("2_wall_bounce.mp3"),c.assetUrl("2_wall_bounce.ogg")],void 0!==f.background){var g=Math.floor(Math.random()*f.background);c.background=c.assetUrl("background"+g+".png")}else c.background=c.assetUrl("background.png");return c.pegmanHeight=f.pegmanHeight||52,c.pegmanWidth=f.pegmanWidth||49,c.ballYOffset=f.ballYOffset||0,c.paddleYOffset=f.paddleYOffset||0,c}},{"../skins":"/home/ubuntu/staging/apps/build/js/skins.js"}],"/home/ubuntu/staging/apps/build/js/bounce/levels.js":[function(a,b,c){"use strict";var d=(a("./tiles").Direction,a("../block_utils").createToolbox);b.exports={1:{requiredBlocks:[[{test:"moveLeft",type:"bounce_moveLeft"}]],scale:{snapRadius:2},softButtons:["leftButton"],map:[[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0],[8,0,0,16,0,0,0,0],[0,0,0,0,0,0,0,0]],toolbox:d('<block type="bounce_moveLeft"></block>           <block type="bounce_moveRight"></block>'),startBlocks:'<block type="bounce_whenLeft" deletable="false" x="20" y="20"></block>'},2:{ideal:5,requiredBlocks:[[{test:"moveRight",type:"bounce_moveRight"}],[{test:"moveLeft",type:"bounce_moveLeft"}]],scale:{snapRadius:2},softButtons:["leftButton","rightButton"],map:[[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0],[8,0,0,16,0,0,0,8],[0,0,0,0,0,0,0,0]],toolbox:d('<block type="bounce_moveLeft"></block>           <block type="bounce_moveRight"></block>'),startBlocks:'<block type="bounce_whenLeft" deletable="false" x="20" y="20"></block>       <block type="bounce_whenRight" deletable="false" x="180" y="20"></block>'},3:{requiredBlocks:[[{test:"moveUp",type:"bounce_moveUp"}]],scale:{snapRadius:2},softButtons:["upButton"],map:[[0,0,0,8,0,0,0,0],[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0],[0,0,0,16,0,0,0,0],[0,0,0,0,0,0,0,0]],toolbox:d('<block type="bounce_moveLeft"></block>           <block type="bounce_moveRight"></block>           <block type="bounce_moveUp"></block>           <block type="bounce_moveDown"></block>'),startBlocks:'<block type="bounce_whenUp" deletable="false" x="20" y="20"></block>'},4:{requiredBlocks:[[{test:"moveRight",type:"bounce_moveRight"}],[{test:"moveLeft",type:"bounce_moveLeft"}],[{test:"moveUp",type:"bounce_moveUp"}],[{test:"moveDown",type:"bounce_moveDown"}]],scale:{snapRadius:2},softButtons:["leftButton","rightButton","downButton","upButton"],map:[[0,0,8,0,0,0,0,0],[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,8],[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0],[8,0,0,0,0,0,0,0],[0,0,0,16,0,0,0,0],[0,0,0,0,0,8,0,0]],toolbox:d('<block type="bounce_moveLeft"></block>           <block type="bounce_moveRight"></block>           <block type="bounce_moveUp"></block>           <block type="bounce_moveDown"></block>'),startBlocks:'<block type="bounce_whenLeft" deletable="false" x="20" y="20"></block>       <block type="bounce_whenRight" deletable="false" x="180" y="20"></block>       <block type="bounce_whenUp" deletable="false" x="20" y="120"></block>       <block type="bounce_whenDown" deletable="false" x="180" y="120"></block>'},5:{timeoutFailureTick:100,requiredBlocks:[[{test:"bounceBall",type:"bounce_bounceBall"}]],scale:{snapRadius:2},ballDirection:1.285*Math.PI,map:[[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0],[32,0,0,0,0,0,0,0],[0,0,0,0,0,0,4,0],[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0],[0,0,0,16,0,0,0,0]],toolbox:d('<block type="bounce_bounceBall"></block>           <block type="bounce_playSound"></block>'),startBlocks:'<block type="bounce_whenPaddleCollided" deletable="false" x="20" y="20"></block>'},6:{timeoutFailureTick:140,requiredBlocks:[[{test:"bounceBall",type:"bounce_bounceBall"}]],scale:{snapRadius:2},ballDirection:1.285*Math.PI,map:[[1,1,33,1,1,1,1,1],[1,0,0,0,0,0,0,1],[1,0,0,0,0,0,0,1],[1,0,0,0,0,0,0,1],[1,0,0,0,0,0,4,1],[1,0,0,0,0,0,0,1],[1,0,0,0,0,0,0,1],[1,0,0,16,0,0,0,1]],toolbox:d('<block type="bounce_bounceBall"></block>           <block type="bounce_playSound"></block>'),startBlocks:'<block type="bounce_whenPaddleCollided" deletable="false" x="20" y="20"></block>       <block type="bounce_whenWallCollided" deletable="false" x="20" y="120"></block>'},7:{timeoutFailureTick:900,requiredBlocks:[[{test:"moveLeft",type:"bounce_moveLeft"}],[{test:"moveRight",type:"bounce_moveRight"}],[{test:"bounceBall",type:"bounce_bounceBall"}]],scale:{snapRadius:2},softButtons:["leftButton","rightButton"],failOnBallExit:!0,map:[[1,1,1,1,1,1,1,1],[1,0,0,0,0,32,0,1],[1,0,0,0,0,0,0,1],[1,0,0,0,0,0,0,1],[1,0,0,0,0,0,4,1],[1,0,0,0,0,0,0,1],[1,0,0,0,0,0,0,1],[1,0,16,0,0,0,0,1]],toolbox:d('<block type="bounce_moveLeft"></block>           <block type="bounce_moveRight"></block>           <block type="bounce_bounceBall"></block>           <block type="bounce_playSound"></block>'),startBlocks:'<block type="bounce_whenLeft" deletable="false" x="20" y="20"></block>       <block type="bounce_whenRight" deletable="false" x="180" y="20"></block>       <block type="bounce_whenPaddleCollided" deletable="false" x="20" y="120"></block>       <block type="bounce_whenWallCollided" deletable="false" x="20" y="220"></block>'},10:{requiredBlocks:[[{test:"moveLeft",type:"bounce_moveLeft"}],[{test:"moveRight",type:"bounce_moveRight"}],[{test:"bounceBall",type:"bounce_bounceBall"}],[{test:"incrementPlayerScore",type:"bounce_incrementPlayerScore"}],[{test:"incrementOpponentScore",type:"bounce_incrementOpponentScore"}]],scale:{snapRadius:2},softButtons:["leftButton","rightButton"],goal:{successCondition:function(){return Bounce.opponentScore>=2}},respawnBalls:!0,map:[[1,1,2,2,2,2,1,1],[1,0,0,0,0,0,0,1],[1,0,0,0,0,0,4,1],[1,0,0,0,0,0,0,1],[1,0,0,0,0,0,0,1],[1,0,0,0,0,0,0,1],[1,0,0,0,0,0,0,1],[1,0,16,0,0,0,0,1]],toolbox:d('<block type="bounce_moveLeft"></block>           <block type="bounce_moveRight"></block>           <block type="bounce_bounceBall"></block>           <block type="bounce_playSound"></block>           <block type="bounce_incrementPlayerScore"></block>           <block type="bounce_incrementOpponentScore"></block>'),startBlocks:'<block type="bounce_whenLeft" deletable="false" x="20" y="20"></block>       <block type="bounce_whenRight" deletable="false" x="180" y="20"></block>       <block type="bounce_whenPaddleCollided" deletable="false" x="20" y="100"></block>       <block type="bounce_whenWallCollided" deletable="false" x="20" y="180"></block>       <block type="bounce_whenBallInGoal" deletable="false" x="20" y="260"></block>       <block type="bounce_whenBallMissesPaddle" deletable="false" x="20" y="340"></block>'},11:{requiredBlocks:[[{test:"moveLeft",type:"bounce_moveLeft"}],[{test:"moveRight",type:"bounce_moveRight"}],[{test:"bounceBall",type:"bounce_bounceBall"}],[{test:"incrementPlayerScore",type:"bounce_incrementPlayerScore"}],[{test:"incrementOpponentScore",type:"bounce_incrementOpponentScore"}],[{test:"launchBall",type:"bounce_launchBall"}]],scale:{snapRadius:2},softButtons:["leftButton","rightButton"],minWorkspaceHeight:750,goal:{successCondition:function(){return Bounce.opponentScore>=2}},map:[[1,1,2,2,2,2,1,1],[1,0,0,0,0,0,0,1],[1,0,0,0,0,0,0,1],[1,0,0,0,0,0,0,1],[1,0,0,0,0,0,0,1],[1,0,0,0,0,0,0,1],[1,0,0,0,0,0,0,1],[1,0,16,0,0,0,0,1]],toolbox:d('<block type="bounce_moveLeft"></block>           <block type="bounce_moveRight"></block>           <block type="bounce_bounceBall"></block>           <block type="bounce_playSound"></block>           <block type="bounce_incrementPlayerScore"></block>           <block type="bounce_incrementOpponentScore"></block>           <block type="bounce_launchBall"></block>           <block type="bounce_setPaddleSpeed"></block>           <block type="bounce_setBallSpeed"></block>           <block type="bounce_setBackground"></block>           <block type="bounce_setBall"></block>           <block type="bounce_setPaddle"></block>'),startBlocks:'<block type="when_run" deletable="false" x="20" y="20"></block>       <block type="bounce_whenLeft" deletable="false" x="20" y="180"></block>       <block type="bounce_whenRight" deletable="false" x="180" y="180"></block>       <block type="bounce_whenPaddleCollided" deletable="false" x="20" y="270"></block>       <block type="bounce_whenWallCollided" deletable="false" x="20" y="370"></block>       <block type="bounce_whenBallInGoal" deletable="false" x="20" y="470"></block>       <block type="bounce_whenBallMissesPaddle" deletable="false" x="20" y="590"></block>'},12:{requiredBlocks:[],scale:{snapRadius:2},softButtons:["leftButton","rightButton"],minWorkspaceHeight:800,freePlay:!0,map:[[1,1,2,2,2,2,1,1],[1,0,0,0,0,0,0,1],[1,0,0,0,0,0,0,1],[1,0,0,0,0,0,0,1],[1,0,0,0,0,0,0,1],[1,0,0,0,0,0,0,1],[1,0,0,0,0,0,0,1],[1,0,16,0,0,0,0,1]],toolbox:d('<block type="bounce_moveLeft"></block>           <block type="bounce_moveRight"></block>           <block type="bounce_bounceBall"></block>           <block type="bounce_playSound"></block>           <block type="bounce_incrementPlayerScore"></block>           <block type="bounce_incrementOpponentScore"></block>           <block type="bounce_launchBall"></block>           <block type="bounce_setPaddleSpeed"></block>           <block type="bounce_setBallSpeed"></block>           <block type="bounce_setBackground"></block>           <block type="bounce_setBall"></block>           <block type="bounce_setPaddle"></block>'),startBlocks:'<block type="when_run" deletable="false" x="20" y="20"></block>       <block type="bounce_whenLeft" deletable="false" x="20" y="220"></block>       <block type="bounce_whenRight" deletable="false" x="180" y="220"></block>       <block type="bounce_whenPaddleCollided" deletable="false" x="20" y="310"></block>       <block type="bounce_whenWallCollided" deletable="false" x="20" y="410"></block>       <block type="bounce_whenBallInGoal" deletable="false" x="20" y="510"></block>       <block type="bounce_whenBallMissesPaddle" deletable="false" x="20" y="630"></block>'}}},{"../block_utils":"/home/ubuntu/staging/apps/build/js/block_utils.js","./tiles":"/home/ubuntu/staging/apps/build/js/bounce/tiles.js"}],"/home/ubuntu/staging/apps/build/js/bounce/bounce.js":[function(a,b,c){"use strict";var d=a("../StudioApp").singleton,e=(a("../locale"),a("./locale")),f=(a("../skins"),a("./tiles")),g=a("../codegen"),h=a("./api"),i=a("../templates/AppView.jsx"),j=a("../templates/page.html.ejs"),k=a("../dom"),l=a("../hammer"),m=(a("../utils"),a("../dropletUtils")),n=a("../constants"),o=n.KeyCodes,p=(f.Direction,f.SquareType),q=d.ResultType,r=d.TestResults,s=b.exports;s.keyState={},s.gesturesObserved={},s.btnState={};var t={UP:0,DOWN:1};s.BallFlags={MISSED_PADDLE:1,IN_GOAL:2,LAUNCHING:4};var u,v,w={LEFT:"leftButton",UP:"upButton",RIGHT:"rightButton",DOWN:"downButton"},x=25;d.setCheckForEmptyBlocks(!0);s.scale={snapRadius:1,stepSpeed:33};var y={text:e.shareBounceTwitter(),hashtag:"BounceCode"},z=function(){s.map=u.map,s.timeoutFailureTick=u.timeoutFailureTick||1/0,s.minWorkspaceHeight=u.minWorkspaceHeight,s.softButtons_=u.softButtons||[],s.respawnBalls=u.respawnBalls||!1,s.failOnBallExit=u.failOnBallExit||!1;for(var a in u.scale)s.scale[a]=u.scale[a];s.ROWS=s.map.length,s.COLS=s.map[0].length,A(),s.SQUARE_SIZE=50,s.PEGMAN_HEIGHT=v.pegmanHeight,s.PEGMAN_WIDTH=v.pegmanWidth,s.BALL_Y_OFFSET=v.ballYOffset,s.PADDLE_Y_OFFSET=v.paddleYOffset,s.MARKER_HEIGHT=43,s.MARKER_WIDTH=50,s.MAZE_WIDTH=s.SQUARE_SIZE*s.COLS,s.MAZE_HEIGHT=s.SQUARE_SIZE*s.ROWS,s.PATH_WIDTH=s.SQUARE_SIZE/3},A=function(){s.wallMap=new Array(s.ROWS);for(var a=0;a<s.ROWS;a++)s.wallMap[a]=new Array(s.COLS)},B=a("../timeoutList"),C={"1X101":[1,0],"11X10":[2,1],"11XX0":[2,1],"1XX11":[2,0],"1X001":[1,0],"1X100":[1,0],"1101X":[0,1],"110XX":[0,1],"1X11X":[0,0],null0:[1,1]},D={"1X101":[2,3],"1XX11":[3,3],"1X001":[3,3],"1X11X":[0,2],"1X100":[0,2],null0:[1,1]},E=function(a,b){return void 0===s.map[b]||void 0===s.map[b][a]?"X":s.map[b][a]&p.WALL?"1":"0"},F=function(a,b){return void 0===s.map[b]||void 0===s.map[b][a]?"X":s.map[b][a]&p.GOAL?"1":"0"};s.createBallElements=function(a){var b=document.getElementById("svgBounce"),c=document.createElementNS(Blockly.SVG_NS,"clipPath");c.setAttribute("id","ballClipPath"+a);var d=document.createElementNS(Blockly.SVG_NS,"rect");d.setAttribute("id","ballClipRect"+a),d.setAttribute("width",s.PEGMAN_WIDTH),d.setAttribute("height",s.PEGMAN_HEIGHT),c.appendChild(d),b.appendChild(c);var e=document.createElementNS(Blockly.SVG_NS,"image");e.setAttribute("id","ball"+a),e.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",s.ballImage),e.setAttribute("height",s.PEGMAN_HEIGHT),e.setAttribute("width",s.PEGMAN_WIDTH),e.setAttribute("clip-path","url(#ballClipPath"+a+")"),b.appendChild(e)},s.deleteBallElements=function(a){var b=document.getElementById("ballClipPath"+a);b.parentNode.removeChild(b);var c=document.getElementById("ball"+a);c.parentNode.removeChild(c)};var G=function(){var a,b,c,d,e=document.getElementById("svgBounce");e.setAttribute("width",s.MAZE_WIDTH),e.setAttribute("height",s.MAZE_HEIGHT);var f=new l(e);f.on("drag",s.onSvgDrag);var g=document.getElementById("visualizationColumn");g.style.width=s.MAZE_WIDTH+"px",v.background&&(d=document.createElementNS(Blockly.SVG_NS,"image"),d.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",v.background),d.setAttribute("id","background"),d.setAttribute("height",s.MAZE_HEIGHT),d.setAttribute("width",s.MAZE_WIDTH),d.setAttribute("x",0),d.setAttribute("y",0),e.appendChild(d));var h=0;for(c=0;c<s.ROWS;c++)for(b=0;b<s.COLS;b++){var i,j,k;if(d=E(b,c)+E(b,c-1)+E(b+1,c)+E(b,c+1)+E(b-1,c),C[d]?(i=C[d][0],j=C[d][1],k=v.tiles):(d=F(b,c)+F(b,c-1)+F(b+1,c)+F(b,c+1)+F(b-1,c),D[d]||(d="null0"),i=D[d][0],j=D[d][1],k=v.goalTiles),"null0"!=d){var m=document.createElementNS(Blockly.SVG_NS,"clipPath");m.setAttribute("id","tileClipPath"+h);var n=document.createElementNS(Blockly.SVG_NS,"rect");n.setAttribute("width",s.SQUARE_SIZE),n.setAttribute("height",s.SQUARE_SIZE),n.setAttribute("x",b*s.SQUARE_SIZE),n.setAttribute("y",c*s.SQUARE_SIZE),m.appendChild(n),e.appendChild(m);var o=document.createElementNS(Blockly.SVG_NS,"image");o.setAttribute("id","tileElement"+h),o.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",k),o.setAttribute("height",4*s.SQUARE_SIZE),o.setAttribute("width",5*s.SQUARE_SIZE),o.setAttribute("clip-path","url(#tileClipPath"+h+")"),o.setAttribute("x",(b-i)*s.SQUARE_SIZE),o.setAttribute("y",(c-j)*s.SQUARE_SIZE),e.appendChild(o);var q=document.createElementNS(Blockly.SVG_NS,"animate");q.setAttribute("id","tileAnimation"+h),q.setAttribute("attributeType","CSS"),q.setAttribute("attributeName","opacity"),q.setAttribute("from",1),q.setAttribute("to",0),q.setAttribute("dur","1s"),q.setAttribute("begin","indefinite"),o.appendChild(q)}h++}for(s.ballImage=v.ball,a=0;a<s.ballCount;a++)s.createBallElements(a);if(s.paddleStart_){var r=document.createElementNS(Blockly.SVG_NS,"clipPath");r.setAttribute("id","paddleClipPath");var t=document.createElementNS(Blockly.SVG_NS,"rect");t.setAttribute("id","paddleClipRect"),t.setAttribute("width",s.PEGMAN_WIDTH),t.setAttribute("height",s.PEGMAN_HEIGHT),r.appendChild(t),e.appendChild(r);var u=document.createElementNS(Blockly.SVG_NS,"image");u.setAttribute("id","paddle"),u.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",v.paddle),u.setAttribute("height",s.PEGMAN_HEIGHT),u.setAttribute("width",s.PEGMAN_WIDTH),u.setAttribute("clip-path","url(#paddleClipPath)"),e.appendChild(u)}if(s.paddleFinish_)for(a=0;a<s.paddleFinishCount;a++){var w=document.createElementNS(Blockly.SVG_NS,"image");w.setAttribute("id","paddlefinish"+a),w.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",v.goal),w.setAttribute("height",s.MARKER_HEIGHT),w.setAttribute("width",s.MARKER_WIDTH),e.appendChild(w)}if(s.ballFinish_){var x=document.createElementNS(Blockly.SVG_NS,"image");x.setAttribute("id","ballfinish"),x.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",v.goal),x.setAttribute("height",s.MARKER_HEIGHT),x.setAttribute("width",s.MARKER_WIDTH),e.appendChild(x)}var y=document.createElementNS(Blockly.SVG_NS,"text");if(y.setAttribute("id","score"),y.setAttribute("class","bounce-score"),y.setAttribute("x",s.MAZE_WIDTH/2),y.setAttribute("y",60),y.appendChild(document.createTextNode("0")),y.setAttribute("visibility","hidden"),e.appendChild(y),v.hittingWallAnimation){var z=document.createElementNS(Blockly.SVG_NS,"image");z.setAttribute("id","wallAnimation"),z.setAttribute("height",s.SQUARE_SIZE),z.setAttribute("width",s.SQUARE_SIZE),z.setAttribute("visibility","hidden"),e.appendChild(z)}var A=0;for(c=0;c<s.ROWS;c++)for(b=0;b<s.COLS;b++){if(s.map[c][b]==p.OBSTACLE){var B=document.createElementNS(Blockly.SVG_NS,"image");B.setAttribute("id","obstacle"+A),B.setAttribute("height",s.MARKER_HEIGHT*v.obstacleScale),B.setAttribute("width",s.MARKER_WIDTH*v.obstacleScale),B.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",v.obstacle),B.setAttribute("x",s.SQUARE_SIZE*(b+.5)-B.getAttribute("width")/2),B.setAttribute("y",s.SQUARE_SIZE*(c+.9)-B.getAttribute("height")),e.appendChild(B)}++A}};s.calcDistance=function(a,b){return Math.sqrt(a*a+b*b)};var H=function(a,b,c){var d=c||.01;return Math.abs(a-b)<d};s.isBallOutOfBounds=function(a){return s.ballX[a]<0?!0:s.ballX[a]>s.COLS-1?!0:s.ballY[a]<f.Y_TOP_BOUNDARY?!0:s.ballY[a]>s.ROWS-1?!0:!1};var I=function(a,b,c){return function(){var d=Array.prototype.slice.apply(arguments).concat(c);b.apply(a,d)}};s.callUserGeneratedCode=function(a){try{a.call(s,d,h)}catch(b){console&&console.log(b)}},s.onTick=function(){s.tickCount++,1===s.tickCount&&s.callUserGeneratedCode(s.whenGameStarts);for(var a in o)if(s.keyState[o[a]]&&"keydown"==s.keyState[o[a]])switch(o[a]){case o.LEFT:s.callUserGeneratedCode(s.whenLeft);break;case o.UP:s.callUserGeneratedCode(s.whenUp);break;case o.RIGHT:s.callUserGeneratedCode(s.whenRight);break;case o.DOWN:s.callUserGeneratedCode(s.whenDown)}for(var b in w)if(s.btnState[w[b]]&&s.btnState[w[b]]==t.DOWN)switch(w[b]){case w.LEFT:s.callUserGeneratedCode(s.whenLeft);break;case w.UP:s.callUserGeneratedCode(s.whenUp);break;case w.RIGHT:s.callUserGeneratedCode(s.whenRight);break;case w.DOWN:s.callUserGeneratedCode(s.whenDown)}for(var c in s.gesturesObserved){switch(c){case"left":s.callUserGeneratedCode(s.whenLeft);break;case"up":s.callUserGeneratedCode(s.whenUp);break;case"right":s.callUserGeneratedCode(s.whenRight);break;case"down":s.callUserGeneratedCode(s.whenDown)}0===s.gesturesObserved[c]--&&delete s.gesturesObserved[c]}for(var d=0;d<s.ballCount;d++){var e=s.ballSpeed[d]*Math.sin(s.ballDir[d]),g=-s.ballSpeed[d]*Math.cos(s.ballDir[d]),h=s.ballX[d]>=0&&s.ballX[d]<=s.COLS-1,i=s.ballY[d]>=f.Y_TOP_BOUNDARY,j=s.ballY[d]<=s.ROWS-1;if(s.ballX[d]+=e,s.ballY[d]+=g,0===(s.ballFlags[d]&(s.BallFlags.MISSED_PADDLE|s.BallFlags.IN_GOAL))){var k=s.ballX[d]>=0&&s.ballX[d]<=s.COLS-1,l=s.ballY[d]>=f.Y_TOP_BOUNDARY,m=s.ballY[d]<=s.ROWS-1;i&&h&&!k&&s.callUserGeneratedCode(s.whenWallCollided),h&&i&&!l&&(s.map[0][Math.round(s.ballX[d])]&p.GOAL?(s.callUserGeneratedCode(s.whenBallInGoal),s.ballFlags[d]|=s.BallFlags.IN_GOAL,B.setTimeout(I(this,s.moveBallOffscreen,d),1e3),s.respawnBalls&&s.launchBall(d)):s.callUserGeneratedCode(s.whenWallCollided));var n=s.ballX[d]-s.paddleX,r=s.ballY[d]-s.paddleY,u=s.calcDistance(n,r);u<f.PADDLE_BALL_COLLIDE_DISTANCE?s.callUserGeneratedCode(s.whenPaddleCollided):j&&!m&&(s.callUserGeneratedCode(s.whenBallMissesPaddle),s.ballFlags[d]|=s.BallFlags.MISSED_PADDLE,B.setTimeout(I(this,s.moveBallOffscreen,d),1e3),s.respawnBalls?s.launchBall(d):s.failOnBallExit&&(s.result=q.FAILURE,s.onPuzzleComplete()))}s.displayBall(d,s.ballX[d],s.ballY[d])}s.displayPaddle(s.paddleX,s.paddleY),L()&&s.onPuzzleComplete()},s.onSvgDrag=function(a){s.intervalId&&(s.gesturesObserved[a.gesture.direction]=Math.round(a.gesture.distance/x),a.gesture.preventDefault())},s.onKey=function(a){s.keyState[a.keyCode]=a.type,s.intervalId&&a.keyCode>=o.LEFT&&a.keyCode<=o.DOWN&&a.preventDefault()},s.onArrowButtonDown=function(a,b){s.btnState[b]=t.DOWN,a.preventDefault()},s.onArrowButtonUp=function(a,b){s.btnState[b]=t.UP},s.onMouseUp=function(a){s.btnState={}},s.init=function(b){d.reset=this.reset.bind(this),d.runButtonClick=this.runButtonClick.bind(this),s.clearEventHandlersKillTickLoop(),v=b.skin,u=b.level,z(),window.addEventListener("keydown",s.onKey,!1),window.addEventListener("keyup",s.onKey,!1),b.loadAudio=function(){d.loadAudio(v.winSound,"win"),d.loadAudio(v.startSound,"start"),d.loadAudio(v.ballStartSound,"ballstart"),d.loadAudio(v.failureSound,"failure"),d.loadAudio(v.rubberSound,"rubber"),d.loadAudio(v.crunchSound,"crunch"),d.loadAudio(v.flagSound,"flag"),d.loadAudio(v.winPointSound,"winpoint"),d.loadAudio(v.winPoint2Sound,"winpoint2"),d.loadAudio(v.losePointSound,"losepoint"),d.loadAudio(v.losePoint2Sound,"losepoint2"),d.loadAudio(v.goal1Sound,"goal1"),d.loadAudio(v.goal2Sound,"goal2"),d.loadAudio(v.woodSound,"wood"),d.loadAudio(v.retroSound,"retro"),d.loadAudio(v.slapSound,"slap"),d.loadAudio(v.hitSound,"hit")},b.afterInject=function(){for(var a in w)k.addMouseUpTouchEvent(document.getElementById(w[a]),I(this,s.onArrowButtonUp,w[a])),k.addMouseDownTouchEvent(document.getElementById(w[a]),I(this,s.onArrowButtonDown,w[a]));document.addEventListener("mouseup",s.onMouseUp,!1),Blockly.HSV_SATURATION=.6,Blockly.SNAP_RADIUS*=s.scale.snapRadius,s.ballStart_=[],s.ballX=[],s.ballY=[],s.ballDir=[],s.ballSpeed=[],s.ballFlags=[],s.ballCount=0,s.originalBallCount=0,s.paddleFinishCount=0,s.defaultBallSpeed=u.ballSpeed||f.DEFAULT_BALL_SPEED,s.defaultBallDir=u.ballDirection||f.DEFAULT_BALL_DIRECTION;for(var b=0;b<s.ROWS;b++)for(var c=0;c<s.COLS;c++)s.map[b][c]&p.PADDLEFINISH?(0===s.paddleFinishCount&&(s.paddleFinish_=[]),s.paddleFinish_[s.paddleFinishCount]={x:c,y:b},s.paddleFinishCount++):s.map[b][c]&p.BALLSTART?(s.ballStart_[s.ballCount]={x:c,y:b},s.ballCount++):s.map[b][c]&p.PADDLESTART?s.paddleStart_={x:c,y:b}:s.map[b][c]&p.BALLFINISH?s.ballFinish_={x:c,y:b}:s.map[b][c]&p.GOAL&&(s.goalLocated_=!0);s.originalBallCount=s.ballCount,G()},b.blockArrangement={when_run:{x:20,y:20},bounce_whenLeft:{x:20,y:220},bounce_whenRight:{x:180,y:220},bounce_whenPaddleCollided:{x:20,y:310},bounce_whenWallCollided:{x:20,y:410},bounce_whenBallInGoal:{x:20,y:510},bounce_whenBallMissesPaddle:{x:20,y:630}},b.twitter=y,b.makeYourOwn=b.share,b.makeString=e.makeYourOwn(),b.makeUrl="http://code.org/bounce",b.makeImage=d.assetUrl("media/promo.png"),b.enableShowCode=!1,b.enableShowBlockCount=!1,React.render(React.createElement(i,{renderCodeApp:function(){return j({assetUrl:d.assetUrl,data:{localeDirection:d.localeDirection(),visualization:a("./visualization.html.ejs")(),controls:a("./controls.html.ejs")({assetUrl:d.assetUrl}),blockUsed:void 0,idealBlockNumber:void 0,editCode:u.editCode,blockCounterClass:"block-counter-default",readonlyWorkspace:b.readonlyWorkspace}})},onMount:function(){d.init(b);var a=document.getElementById("finishButton");k.addClickTouchEvent(a,s.onPuzzleComplete)}}),document.getElementById(b.containerId))},s.clearEventHandlersKillTickLoop=function(){s.whenWallCollided=null,s.whenBallInGoal=null,s.whenBallMissesPaddle=null,s.whenPaddleCollided=null,s.whenDown=null,s.whenLeft=null,s.whenRight=null,s.whenUp=null,s.whenGameStarts=null,s.intervalId&&window.clearInterval(s.intervalId),s.intervalId=0,B.clearTimeouts()},s.moveBallOffscreen=function(a){s.ballX[a]=100,s.ballY[a]=100,s.ballDir[a]=0,s.ballSpeed[a]=0},s.playSoundAndResetBall=function(a){s.resetBall(a,{randomPosition:!0}),d.playAudio("ballstart")},s.launchBall=function(a){s.ballFlags[a]|=s.BallFlags.LAUNCHING,B.setTimeout(I(this,s.playSoundAndResetBall,a),3e3)},s.resetBall=function(a,b){var c=b.randomPosition||"undefined"==typeof s.ballStart_[a];s.ballX[a]=c?Math.floor(Math.random()*s.COLS):s.ballStart_[a].x,s.ballY[a]=c?f.DEFAULT_BALL_START_Y:s.ballStart_[a].y,s.ballDir[a]=c?Math.random()*Math.PI/2+.75*Math.PI:s.defaultBallDir,s.ballSpeed[a]=s.currentBallSpeed,s.ballFlags[a]=0,s.displayBall(a,s.ballX[a],s.ballY[a])},s.reset=function(a){var b;s.clearEventHandlersKillTickLoop();var c=0;for(b=0;b<s.softButtons_.length;b++)document.getElementById(s.softButtons_[b]).style.display="inline",c++;if(c){var d=document.getElementById("soft-buttons");d.className="soft-buttons-"+c}for(s.gesturesObserved={},s.playerScore=0,s.opponentScore=0,document.getElementById("score").setAttribute("visibility","hidden"),s.setBackground("hardcourt"),s.setBall("hardcourt"),s.setPaddle("hardcourt"),s.currentBallSpeed=s.defaultBallSpeed,b=s.originalBallCount;b<s.ballCount;b++)s.deleteBallElements(b);for(s.ballCount=s.originalBallCount,b=0;b<s.ballCount;b++)s.resetBall(b,{});s.paddleX=s.paddleStart_.x,s.paddleY=s.paddleStart_.y,s.paddleSpeed=f.DEFAULT_PADDLE_SPEED,s.displayPaddle(s.paddleX,s.paddleY);document.getElementById("svgBounce");if(s.paddleFinish_)for(b=0;b<s.paddleFinishCount;b++){s.paddleFinish_[b].finished=!1;var e=document.getElementById("paddlefinish"+b);e.setAttribute("x",s.SQUARE_SIZE*(s.paddleFinish_[b].x+.5)-e.getAttribute("width")/2),e.setAttribute("y",s.SQUARE_SIZE*(s.paddleFinish_[b].y+.9)-e.getAttribute("height")),e.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",v.goal)}if(s.ballFinish_){var g=document.getElementById("ballfinish");g.setAttribute("x",s.SQUARE_SIZE*(s.ballFinish_.x+.5)-g.getAttribute("width")/2),g.setAttribute("y",s.SQUARE_SIZE*(s.ballFinish_.y+.9)-g.getAttribute("height")),g.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",v.goal)}var h,i,j=0;for(i=0;i<s.ROWS;i++)for(h=0;h<s.COLS;h++){var k=document.getElementById("obstacle"+j);k&&k.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",v.obstacle),++j}var l=0;for(i=0;i<s.ROWS;i++)for(h=0;h<s.COLS;h++){var m=document.getElementById("tileClipPath"+l);m&&m.setAttribute("visibility","visible");var n=document.getElementById("tileElement"+l);n&&n.setAttribute("opacity",1),l++}},s.runButtonClick=function(){var a=document.getElementById("runButton"),b=document.getElementById("resetButton");if(b.style.minWidth||(b.style.minWidth=a.offsetWidth+"px"),d.toggleRunReset("reset"),Blockly.mainBlockSpace.traceOn(!0),d.reset(!1),d.attempts++,s.execute(),u.freePlay&&!d.hideSource){var c=document.getElementById("share-cell");c.className="share-cell-enabled"}s.goalLocated_&&(document.getElementById("score").setAttribute("visibility","visible"),s.displayScore())};var J=function(){s.waitingForReport||d.displayFeedback({app:"bounce",skin:v.id,feedbackType:s.testResults,response:s.response,level:u,showingSharing:u.freePlay,twitter:y,appStrings:{reinfFeedbackMsg:e.reinfFeedbackMsg(),sharingText:e.shareGame()}})};s.onReportComplete=function(a){s.response=a,s.waitingForReport=!1,d.onReportComplete(a),J()},s.execute=function(){var a=Blockly.Generator.blockSpaceToCode("JavaScript","bounce_whenRun");s.result=q.UNSET,s.testResults=r.NO_TESTS_RUN,s.waitingForReport=!1,s.response=null,u.editCode&&(a=m.generateCodeAliases(null,"Bounce"),a+=d.editor.getValue());var b=Blockly.Generator.blockSpaceToCode("JavaScript","bounce_whenWallCollided"),c=g.functionFromCode(b,{StudioApp:d,Bounce:h}),e=Blockly.Generator.blockSpaceToCode("JavaScript","bounce_whenBallInGoal"),f=g.functionFromCode(e,{StudioApp:d,Bounce:h}),i=Blockly.Generator.blockSpaceToCode("JavaScript","bounce_whenBallMissesPaddle"),j=g.functionFromCode(i,{StudioApp:d,Bounce:h}),k=Blockly.Generator.blockSpaceToCode("JavaScript","bounce_whenPaddleCollided"),l=g.functionFromCode(k,{StudioApp:d,Bounce:h}),n=Blockly.Generator.blockSpaceToCode("JavaScript","bounce_whenLeft"),o=g.functionFromCode(n,{StudioApp:d,Bounce:h}),p=Blockly.Generator.blockSpaceToCode("JavaScript","bounce_whenRight"),t=g.functionFromCode(p,{StudioApp:d,Bounce:h}),v=Blockly.Generator.blockSpaceToCode("JavaScript","bounce_whenUp"),w=g.functionFromCode(v,{StudioApp:d,Bounce:h}),x=Blockly.Generator.blockSpaceToCode("JavaScript","bounce_whenDown"),y=g.functionFromCode(x,{StudioApp:d,Bounce:h}),z=Blockly.Generator.blockSpaceToCode("JavaScript","when_run"),A=g.functionFromCode(z,{StudioApp:d,Bounce:h});d.playAudio(s.ballCount>0?"ballstart":"start"),d.reset(!1),s.whenWallCollided=c,s.whenBallInGoal=f,s.whenBallMissesPaddle=j,s.whenPaddleCollided=l,s.whenLeft=o,s.whenRight=t,s.whenUp=w,s.whenDown=y,s.whenGameStarts=A,s.tickCount=0,s.intervalId=window.setInterval(s.onTick,s.scale.stepSpeed)},s.onPuzzleComplete=function(){u.freePlay&&(s.result=q.SUCCESS),s.clearEventHandlersKillTickLoop();var a=s.result==q.SUCCESS;u.freePlay?s.testResults=r.FREE_PLAY:s.testResults=d.getTestResults(a),s.testResults>=r.FREE_PLAY?d.playAudio("win"):d.playAudio("failure"),u.editCode&&(s.testResults=a?r.ALL_PASS:r.TOO_FEW_BLOCKS_FAIL);var b=Blockly.Xml.blockSpaceToDom(Blockly.mainBlockSpace),c=Blockly.Xml.domToText(b);s.waitingForReport=!0,d.report({app:"bounce",level:u.id,result:s.result===q.SUCCESS,testResult:s.testResults,
program:encodeURIComponent(c),onComplete:s.onReportComplete})},s.setTileTransparent=function(){for(var a=0,b=0;b<s.ROWS;b++)for(var c=0;c<s.COLS;c++){var d=document.getElementById("tileElement"+a),e=document.getElementById("tileAnimation"+a);d&&d.setAttribute("opacity",0),e&&e.beginElement(),a++}},s.displayBall=function(a,b,c){var d=document.getElementById("ball"+a);d.setAttribute("x",b*s.SQUARE_SIZE),d.setAttribute("y",c*s.SQUARE_SIZE+s.BALL_Y_OFFSET);var e=document.getElementById("ballClipRect"+a);e.setAttribute("x",b*s.SQUARE_SIZE),e.setAttribute("y",d.getAttribute("y"))},s.displayPaddle=function(a,b){var c=document.getElementById("paddle");c.setAttribute("x",a*s.SQUARE_SIZE),c.setAttribute("y",b*s.SQUARE_SIZE+s.PADDLE_Y_OFFSET);var d=document.getElementById("paddleClipRect");d.setAttribute("x",a*s.SQUARE_SIZE),d.setAttribute("y",c.getAttribute("y"))},s.displayScore=function(){var a=document.getElementById("score");a.textContent=e.scoreText({playerScore:s.playerScore,opponentScore:s.opponentScore})};var K=function(a){return"hardcourt"===a?v:v[a]};s.setBackground=function(a){var b=document.getElementById("background");b.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",K(a).background);for(var c=0,d=0;d<s.ROWS;d++)for(var e=0;e<s.COLS;e++){var f,g=!1,h=E(e,d)+E(e,d-1)+E(e+1,d)+E(e,d+1)+E(e-1,d);C[h]?f=K(a).tiles:(h=F(e,d)+F(e,d-1)+F(e+1,d)+F(e,d+1)+F(e-1,d),D[h]||(g=!0),f=K(a).goalTiles),g||(b=document.getElementById("tileElement"+c),b.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",f)),c++}},s.setBall=function(a){s.ballImage=K(a).ball;for(var b=0;b<s.ballCount;b++){var c=document.getElementById("ball"+b);c.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",s.ballImage)}},s.setPaddle=function(a){var b=document.getElementById("paddle");b.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",K(a).paddle)},s.timedOut=function(){return s.tickCount>s.timeoutFailureTick},s.allFinishesComplete=function(){var a;if(s.paddleFinish_){var b,c;for(a=0,b=0;a<s.paddleFinishCount;a++)if(s.paddleFinish_[a].finished)b++;else if(H(s.paddleX,s.paddleFinish_[a].x,f.FINISH_COLLIDE_DISTANCE)&&H(s.paddleY,s.paddleFinish_[a].y,f.FINISH_COLLIDE_DISTANCE)){s.paddleFinish_[a].finished=!0,b++,c=!0;var e=document.getElementById("paddlefinish"+a);e.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",v.goalSuccess)}return c&&b!=s.paddleFinishCount&&d.playAudio("flag"),b==s.paddleFinishCount}if(s.ballFinish_)for(a=0;a<s.ballCount;a++)if(H(s.ballX[a],s.ballFinish_.x,f.FINISH_COLLIDE_DISTANCE)&&H(s.ballY[a],s.ballFinish_.y,f.FINISH_COLLIDE_DISTANCE)){var g=document.getElementById("ballfinish");return g.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",v.goalSuccess),!0}return!1};var L=function(){return u.goal&&u.goal.successCondition&&u.goal.successCondition()?(s.result=q.SUCCESS,!0):u.goal&&u.goal.failureCondition&&u.goal.failureCondition()?(s.result=q.FAILURE,!0):s.allFinishesComplete()?(s.result=q.SUCCESS,!0):s.timedOut()?(s.result=q.FAILURE,!0):!1}},{"../StudioApp":"/home/ubuntu/staging/apps/build/js/StudioApp.js","../codegen":"/home/ubuntu/staging/apps/build/js/codegen.js","../constants":"/home/ubuntu/staging/apps/build/js/constants.js","../dom":"/home/ubuntu/staging/apps/build/js/dom.js","../dropletUtils":"/home/ubuntu/staging/apps/build/js/dropletUtils.js","../hammer":"/home/ubuntu/staging/apps/build/js/hammer.js","../locale":"/home/ubuntu/staging/apps/build/js/locale.js","../skins":"/home/ubuntu/staging/apps/build/js/skins.js","../templates/AppView.jsx":"/home/ubuntu/staging/apps/build/js/templates/AppView.jsx","../templates/page.html.ejs":"/home/ubuntu/staging/apps/build/js/templates/page.html.ejs","../timeoutList":"/home/ubuntu/staging/apps/build/js/timeoutList.js","../utils":"/home/ubuntu/staging/apps/build/js/utils.js","./api":"/home/ubuntu/staging/apps/build/js/bounce/api.js","./controls.html.ejs":"/home/ubuntu/staging/apps/build/js/bounce/controls.html.ejs","./locale":"/home/ubuntu/staging/apps/build/js/bounce/locale.js","./tiles":"/home/ubuntu/staging/apps/build/js/bounce/tiles.js","./visualization.html.ejs":"/home/ubuntu/staging/apps/build/js/bounce/visualization.html.ejs"}],"/home/ubuntu/staging/apps/build/js/bounce/visualization.html.ejs":[function(require,module,exports){module.exports=function(){var t=function anonymous(locals,filters,escape){escape=escape||function(a){return String(a).replace(/&(?!\w+;)/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")};var buf=[];with(locals||{})!function(){buf.push('<svg xmlns="http://www.w3.org/2000/svg" version="1.1" id="svgBounce">\n</svg>\n<div id="capacityBubble">\n  <div id="capacity"></div>\n</div>\n')}();return buf.join("")};return function(a){return t(a,require("ejs").filters)}}()},{ejs:"/home/ubuntu/staging/apps/node_modules/ejs/lib/ejs.js"}],"/home/ubuntu/staging/apps/build/js/bounce/controls.html.ejs":[function(require,module,exports){module.exports=function(){var t=function anonymous(locals,filters,escape){escape=escape||function(a){return String(a).replace(/&(?!\w+;)/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")};var buf=[];with(locals||{})!function(){buf.push("");var a=(require("./locale"),require("../locale"));buf.push('\n\n<div id="soft-buttons" class="soft-buttons-none">\n  <button id="leftButton" disabled=true class="arrow">\n    <img src="',escape(assetUrl("media/1x1.gif")),'" class="left-btn icon21">\n  </button>\n  <button id="rightButton" disabled=true class="arrow">\n    <img src="',escape(assetUrl("media/1x1.gif")),'" class="right-btn icon21">\n  </button>\n  <button id="upButton" disabled=true class="arrow">\n    <img src="',escape(assetUrl("media/1x1.gif")),'" class="up-btn icon21">\n  </button>\n  <button id="downButton" disabled=true class="arrow">\n    <img src="',escape(assetUrl("media/1x1.gif")),'" class="down-btn icon21">\n  </button>\n</div>\n<div id="share-cell-wrapper">\n  <div id="share-cell" class="share-cell-none">\n    <button id="finishButton" class="share">\n      <img src="',escape(assetUrl("media/1x1.gif")),'">',escape(a.finish()),"\n    </button>\n  </div>\n</div>\n")}();return buf.join("")};return function(a){return t(a,require("ejs").filters)}}()},{"../locale":"/home/ubuntu/staging/apps/build/js/locale.js","./locale":"/home/ubuntu/staging/apps/build/js/bounce/locale.js",ejs:"/home/ubuntu/staging/apps/node_modules/ejs/lib/ejs.js"}],"/home/ubuntu/staging/apps/build/js/bounce/blocks.js":[function(a,b,c){"use strict";var d=a("./locale"),e=(a("../codegen"),function(a,b){var c=a.getTitleValue("VALUE");if("random"===c){var d=a.VALUES.slice(1).map(function(a){return a[1]});c="Bounce.random(["+d+"])"}return"Bounce."+b+"('block_id_"+a.id+"', "+c+");\n"});c.install=function(a,b){var c=a.Generator.get("JavaScript");a.JavaScript=c,a.Blocks.bounce_whenLeft={helpUrl:"",init:function(){this.setHSV(140,1,.74),this.appendDummyInput().appendTitle(d.whenLeft()),this.setPreviousStatement(!1),this.setNextStatement(!0),this.setTooltip(d.whenLeftTooltip())}},c.bounce_whenLeft=function(){return"\n"},a.Blocks.bounce_whenRight={helpUrl:"",init:function(){this.setHSV(140,1,.74),this.appendDummyInput().appendTitle(d.whenRight()),this.setPreviousStatement(!1),this.setNextStatement(!0),this.setTooltip(d.whenRightTooltip())}},c.bounce_whenRight=function(){return"\n"},a.Blocks.bounce_whenUp={helpUrl:"",init:function(){this.setHSV(140,1,.74),this.appendDummyInput().appendTitle(d.whenUp()),this.setPreviousStatement(!1),this.setNextStatement(!0),this.setTooltip(d.whenUpTooltip())}},c.bounce_whenUp=function(){return"\n"},a.Blocks.bounce_whenDown={helpUrl:"",init:function(){this.setHSV(140,1,.74),this.appendDummyInput().appendTitle(d.whenDown()),this.setPreviousStatement(!1),this.setNextStatement(!0),this.setTooltip(d.whenDownTooltip())}},c.bounce_whenDown=function(){return"\n"},a.Blocks.bounce_whenWallCollided={helpUrl:"",init:function(){this.setHSV(140,1,.74),this.appendDummyInput().appendTitle(d.whenWallCollided()),this.setPreviousStatement(!1),this.setNextStatement(!0),this.setTooltip(d.whenWallCollidedTooltip())}},c.bounce_whenWallCollided=function(){return"\n"},a.Blocks.bounce_whenBallInGoal={helpUrl:"",init:function(){this.setHSV(140,1,.74),this.appendDummyInput().appendTitle(d.whenBallInGoal()),this.setPreviousStatement(!1),this.setNextStatement(!0),this.setTooltip(d.whenBallInGoalTooltip())}},c.bounce_whenBallInGoal=function(){return"\n"},a.Blocks.bounce_whenBallMissesPaddle={helpUrl:"",init:function(){this.setHSV(140,1,.74),this.appendDummyInput().appendTitle(d.whenBallMissesPaddle()),this.setPreviousStatement(!1),this.setNextStatement(!0),this.setTooltip(d.whenBallMissesPaddleTooltip())}},c.bounce_whenBallMissesPaddle=function(){return"\n"},a.Blocks.bounce_whenPaddleCollided={helpUrl:"",init:function(){this.setHSV(140,1,.74),this.appendDummyInput().appendTitle(d.whenPaddleCollided()),this.setPreviousStatement(!1),this.setNextStatement(!0),this.setTooltip(d.whenPaddleCollidedTooltip())}},c.bounce_whenPaddleCollided=function(){return"\n"},a.Blocks.bounce_moveLeft={helpUrl:"",init:function(){this.setHSV(184,1,.74),this.appendDummyInput().appendTitle(d.moveLeft()),this.setPreviousStatement(!0),this.setNextStatement(!0),this.setTooltip(d.moveLeftTooltip())}},c.bounce_moveLeft=function(){return"Bounce.moveLeft('block_id_"+this.id+"');\n"},a.Blocks.bounce_moveRight={helpUrl:"",init:function(){this.setHSV(184,1,.74),this.appendDummyInput().appendTitle(d.moveRight()),this.setPreviousStatement(!0),this.setNextStatement(!0),this.setTooltip(d.moveRightTooltip())}},c.bounce_moveRight=function(){return"Bounce.moveRight('block_id_"+this.id+"');\n"},a.Blocks.bounce_moveUp={helpUrl:"",init:function(){this.setHSV(184,1,.74),this.appendDummyInput().appendTitle(d.moveUp()),this.setPreviousStatement(!0),this.setNextStatement(!0),this.setTooltip(d.moveUpTooltip())}},c.bounce_moveUp=function(){return"Bounce.moveUp('block_id_"+this.id+"');\n"},a.Blocks.bounce_moveDown={helpUrl:"",init:function(){this.setHSV(184,1,.74),this.appendDummyInput().appendTitle(d.moveDown()),this.setPreviousStatement(!0),this.setNextStatement(!0),this.setTooltip(d.moveDownTooltip())}},c.bounce_moveDown=function(){return"Bounce.moveDown('block_id_"+this.id+"');\n"},a.Blocks.bounce_playSound={helpUrl:"",init:function(){this.setHSV(184,1,.74),this.appendDummyInput().appendTitle(new a.FieldDropdown(this.SOUNDS),"SOUND"),this.setPreviousStatement(!0),this.setNextStatement(!0),this.setTooltip(d.playSoundTooltip())}},a.Blocks.bounce_playSound.SOUNDS=[[d.playSoundHit(),"hit"],[d.playSoundWood(),"wood"],[d.playSoundRetro(),"retro"],[d.playSoundSlap(),"slap"],[d.playSoundRubber(),"rubber"],[d.playSoundCrunch(),"crunch"],[d.playSoundWinPoint(),"winpoint"],[d.playSoundWinPoint2(),"winpoint2"],[d.playSoundLosePoint(),"losepoint"],[d.playSoundLosePoint2(),"losepoint2"],[d.playSoundGoal1(),"goal1"],[d.playSoundGoal2(),"goal2"]],c.bounce_playSound=function(){return"Bounce.playSound('block_id_"+this.id+"', '"+this.getTitleValue("SOUND")+"');\n"},a.Blocks.bounce_incrementPlayerScore={helpUrl:"",init:function(){this.setHSV(184,1,.74),this.appendDummyInput().appendTitle(d.incrementPlayerScore()),this.setPreviousStatement(!0),this.setNextStatement(!0),this.setTooltip(d.incrementPlayerScoreTooltip())}},c.bounce_incrementPlayerScore=function(){return"Bounce.incrementPlayerScore('block_id_"+this.id+"');\n"},a.Blocks.bounce_incrementOpponentScore={helpUrl:"",init:function(){this.setHSV(184,1,.74),this.appendDummyInput().appendTitle(d.incrementOpponentScore()),this.setPreviousStatement(!0),this.setNextStatement(!0),this.setTooltip(d.incrementOpponentScoreTooltip())}},c.bounce_incrementOpponentScore=function(){return"Bounce.incrementOpponentScore('block_id_"+this.id+"');\n"},a.Blocks.bounce_bounceBall={helpUrl:"",init:function(){this.setHSV(184,1,.74),this.appendDummyInput().appendTitle(d.bounceBall()),this.setPreviousStatement(!0),this.setNextStatement(!0),this.setTooltip(d.bounceBallTooltip())}},c.bounce_bounceBall=function(){return"Bounce.bounceBall('block_id_"+this.id+"');\n"},a.Blocks.bounce_launchBall={helpUrl:"",init:function(){this.setHSV(184,1,.74),this.appendDummyInput().appendTitle(d.launchBall()),this.setPreviousStatement(!0),this.setNextStatement(!0),this.setTooltip(d.launchBallTooltip())}},c.bounce_launchBall=function(){return"Bounce.launchBall('block_id_"+this.id+"');\n"},a.Blocks.bounce_setBallSpeed={helpUrl:"",init:function(){var b=new a.FieldDropdown(this.VALUES);b.setValue(this.VALUES[3][1]),this.setHSV(184,1,.74),this.appendDummyInput().appendTitle(b,"VALUE"),this.setPreviousStatement(!0),this.setNextStatement(!0),this.setTooltip(d.setBallSpeedTooltip())}},a.Blocks.bounce_setBallSpeed.VALUES=[[d.setBallSpeedRandom(),"random"],[d.setBallSpeedVerySlow(),"Bounce.BallSpeed.VERY_SLOW"],[d.setBallSpeedSlow(),"Bounce.BallSpeed.SLOW"],[d.setBallSpeedNormal(),"Bounce.BallSpeed.NORMAL"],[d.setBallSpeedFast(),"Bounce.BallSpeed.FAST"],[d.setBallSpeedVeryFast(),"Bounce.BallSpeed.VERY_FAST"]],c.bounce_setBallSpeed=function(a){return e(this,"setBallSpeed")},a.Blocks.bounce_setPaddleSpeed={helpUrl:"",init:function(){var b=new a.FieldDropdown(this.VALUES);b.setValue(this.VALUES[3][1]),this.setHSV(184,1,.74),this.appendDummyInput().appendTitle(b,"VALUE"),this.setPreviousStatement(!0),this.setNextStatement(!0),this.setTooltip(d.setPaddleSpeedTooltip())}},a.Blocks.bounce_setPaddleSpeed.VALUES=[[d.setPaddleSpeedRandom(),"random"],[d.setPaddleSpeedVerySlow(),"Bounce.PaddleSpeed.VERY_SLOW"],[d.setPaddleSpeedSlow(),"Bounce.PaddleSpeed.SLOW"],[d.setPaddleSpeedNormal(),"Bounce.PaddleSpeed.NORMAL"],[d.setPaddleSpeedFast(),"Bounce.PaddleSpeed.FAST"],[d.setPaddleSpeedVeryFast(),"Bounce.PaddleSpeed.VERY_FAST"]],c.bounce_setPaddleSpeed=function(a){return e(this,"setPaddleSpeed")},a.Blocks.bounce_setBackground={helpUrl:"",init:function(){var b=new a.FieldDropdown(this.VALUES);b.setValue(this.VALUES[1][1]),this.setHSV(312,.32,.62),this.appendDummyInput().appendTitle(b,"VALUE"),this.setInputsInline(!0),this.setPreviousStatement(!0),this.setNextStatement(!0),this.setTooltip(d.setBackgroundTooltip())}},a.Blocks.bounce_setBackground.VALUES=[[d.setBackgroundRandom(),"random"],[d.setBackgroundHardcourt(),'"hardcourt"'],[d.setBackgroundRetro(),'"retro"']],c.bounce_setBackground=function(){return e(this,"setBackground")},a.Blocks.bounce_setBall={helpUrl:"",init:function(){var b=new a.FieldDropdown(this.VALUES);b.setValue(this.VALUES[1][1]),this.setHSV(312,.32,.62),this.appendDummyInput().appendTitle(b,"VALUE"),this.setInputsInline(!0),this.setPreviousStatement(!0),this.setNextStatement(!0),this.setTooltip(d.setBallTooltip())}},a.Blocks.bounce_setBall.VALUES=[[d.setBallRandom(),"random"],[d.setBallHardcourt(),'"hardcourt"'],[d.setBallRetro(),'"retro"']],c.bounce_setBall=function(){return e(this,"setBall")},a.Blocks.bounce_setPaddle={helpUrl:"",init:function(){var b=new a.FieldDropdown(this.VALUES);b.setValue(this.VALUES[1][1]),this.setHSV(312,.32,.62),this.appendDummyInput().appendTitle(b,"VALUE"),this.setInputsInline(!0),this.setPreviousStatement(!0),this.setNextStatement(!0),this.setTooltip(d.setPaddleTooltip())}},a.Blocks.bounce_setPaddle.VALUES=[[d.setPaddleRandom(),"random"],[d.setPaddleHardcourt(),'"hardcourt"'],[d.setPaddleRetro(),'"retro"']],c.bounce_setPaddle=function(){return e(this,"setPaddle")},delete a.Blocks.procedures_defreturn,delete a.Blocks.procedures_ifreturn}},{"../codegen":"/home/ubuntu/staging/apps/build/js/codegen.js","./locale":"/home/ubuntu/staging/apps/build/js/bounce/locale.js"}],"/home/ubuntu/staging/apps/build/js/bounce/locale.js":[function(a,b,c){"use strict";b.exports=window.blockly.bounce_locale},{}],"/home/ubuntu/staging/apps/build/js/bounce/api.js":[function(a,b,c){"use strict";var d=a("./tiles"),e=(d.Direction,d.SquareType,a("../StudioApp").singleton);c.PaddleSpeed={VERY_SLOW:.04,SLOW:.06,NORMAL:.1,FAST:.15,VERY_FAST:.23},c.BallSpeed={VERY_SLOW:.04,SLOW:.06,NORMAL:.1,FAST:.15,VERY_FAST:.23},c.random=function(a){var b=Math.floor(Math.random()*a.length);return a[b]},c.setBallSpeed=function(a,b){e.highlight(a),Bounce.currentBallSpeed=b;for(var c=0;c<Bounce.ballCount;c++)Bounce.ballSpeed[c]=b},c.setBackground=function(a,b){e.highlight(a),Bounce.setBackground(b)},c.setBall=function(a,b){e.highlight(a),Bounce.setBall(b)},c.setPaddle=function(a,b){e.highlight(a),Bounce.setPaddle(b)},c.setBackground=function(a,b){e.highlight(a),Bounce.setBackground(b)},c.setPaddleSpeed=function(a,b){e.highlight(a),Bounce.paddleSpeed=b},c.playSound=function(a,b){e.highlight(a),e.playAudio(b)},c.moveLeft=function(a){e.highlight(a),Bounce.paddleX-=Bounce.paddleSpeed,Bounce.paddleX<0&&(Bounce.paddleX=0)},c.moveRight=function(a){e.highlight(a),Bounce.paddleX+=Bounce.paddleSpeed,Bounce.paddleX>Bounce.COLS-1&&(Bounce.paddleX=Bounce.COLS-1)},c.moveUp=function(a){e.highlight(a),Bounce.paddleY-=Bounce.paddleSpeed,Bounce.paddleY<0&&(Bounce.paddleY=0)},c.moveDown=function(a){e.highlight(a),Bounce.paddleY+=Bounce.paddleSpeed,Bounce.paddleY>Bounce.ROWS-1&&(Bounce.paddleY=Bounce.ROWS-1)},c.incrementOpponentScore=function(a){e.highlight(a),Bounce.opponentScore++,Bounce.displayScore()},c.incrementPlayerScore=function(a){e.highlight(a),Bounce.playerScore++,Bounce.displayScore()},c.launchBall=function(a){e.highlight(a);for(var b=0;b<Bounce.ballCount;b++)if(Bounce.isBallOutOfBounds(b)&&0===(Bounce.ballFlags[b]&Bounce.BallFlags.LAUNCHING))return void Bounce.launchBall(b);b=Bounce.ballCount,Bounce.ballCount++,Bounce.createBallElements(b),Bounce.playSoundAndResetBall(b)},c.bounceBall=function(a){e.highlight(a);var b;for(b=0;b<Bounce.ballCount;b++)if(0===(Bounce.ballFlags[b]&(Bounce.BallFlags.MISSED_PADDLE|Bounce.BallFlags.IN_GOAL))){Bounce.ballX[b]<0?(Bounce.ballX[b]=0,Bounce.ballDir[b]=2*Math.PI-Bounce.ballDir[b]):Bounce.ballX[b]>Bounce.COLS-1&&(Bounce.ballX[b]=Bounce.COLS-1,Bounce.ballDir[b]=2*Math.PI-Bounce.ballDir[b]),Bounce.ballY[b]<d.Y_TOP_BOUNDARY&&(Bounce.ballY[b]=d.Y_TOP_BOUNDARY,Bounce.ballDir[b]=Math.PI-Bounce.ballDir[b]);var c=Bounce.ballX[b]-Bounce.paddleX,f=Bounce.ballY[b]-Bounce.paddleY,g=Bounce.calcDistance(c,f);if(g<d.PADDLE_BALL_COLLIDE_DISTANCE&&Math.cos(Bounce.ballDir[b])<0){var h=3*Math.PI/8*(c/d.PADDLE_BALL_COLLIDE_DISTANCE);Bounce.ballDir[b]=(5*Math.PI+h-Bounce.ballDir[b])%(2*Math.PI),Bounce.ballDir[b]=Bounce.ballDir[b]<Math.PI?Math.min(Math.PI/2-.2,Bounce.ballDir[b]):Math.max(3*Math.PI/2+.2,Bounce.ballDir[b])}}}},{"../StudioApp":"/home/ubuntu/staging/apps/build/js/StudioApp.js","./tiles":"/home/ubuntu/staging/apps/build/js/bounce/tiles.js"}],"/home/ubuntu/staging/apps/build/js/bounce/tiles.js":[function(a,b,c){"use strict";c.Direction={NORTH:0,EAST:1,SOUTH:2,WEST:3},c.PADDLE_BALL_COLLIDE_DISTANCE=.7,c.FINISH_COLLIDE_DISTANCE=.5,c.DEFAULT_BALL_SPEED=.1,c.DEFAULT_BALL_DIRECTION=1.25*Math.PI,c.DEFAULT_PADDLE_SPEED=.1,c.DEFAULT_BALL_START_Y=2,c.Y_TOP_BOUNDARY=-.2,c.SquareType={OPEN:0,WALL:1,GOAL:2,BALLSTART:4,PADDLEFINISH:8,PADDLESTART:16,BALLFINISH:32,OBSTACLE:64}},{}]},{},["/home/ubuntu/staging/apps/build/js/bounce/main.js"]);