require=function a(b,c,d){function e(g,h){if(!c[g]){if(!b[g]){var i="function"==typeof require&&require;if(!h&&i)return i(g,!0);if(f)return f(g,!0);var j=new Error("Cannot find module '"+g+"'");throw j.code="MODULE_NOT_FOUND",j}var k=c[g]={exports:{}};b[g][0].call(k.exports,function(a){var c=b[g][1][a];return e(c?c:a)},k,k.exports,a,b,c,d)}return c[g].exports}for(var f="function"==typeof require&&require,g=0;g<d.length;g++)e(d[g]);return e}({265:[function(a,b,c){var d=a("../appMain"),e=a("../StudioApp").singleton,f=a("./netsim"),g=a("./levels"),h=a("./skins");window.netsimMain=function(a){a.skinsModule=h,a.isEditorless=!0;var b=new f;b.injectStudioApp(e),d(b,g,a)}},{"../StudioApp":5,"../appMain":9,"./levels":263,"./netsim":266,"./skins":268}],268:[function(a,b,c){var d=a("../skins");c.load=function(a,b){var c=d.load(a,b);return c}},{"../skins":272}],266:[function(a,b,c){"use strict";function d(){var a=document.querySelector("#netsim-leftcol.pin_bottom");if(a){var b=document.querySelector("#page-small-footer .small-footer-base"),c=0;if(b){var d=$("#codeApp");c+=$(b).outerHeight(!0),c-=parseInt(d.css("bottom"),10)}a.style.bottom=c+"px"}}function e(){var a=document.querySelector("#netsim-leftcol.pin_bottom"),b=document.querySelector(".instructions"),c=document.querySelector("#page-small-footer .small-footer-base");c&&(a&&$(a).is(":visible")?c.style.maxWidth=a.getBoundingClientRect().right+"px":b&&$(b).is(":visible")&&(c.style.maxWidth=b.getBoundingClientRect().right+"px"))}var f=a("../utils"),g=f.getLodash(),h=a("./locale"),i=a("../ObservableEvent"),j=a("../RunLoop"),k=a("./page.html.ejs"),l=a("./NetSimAlert"),m=a("./NetSimConstants"),n=a("./NetSimUtils"),o=a("./DashboardUser"),p=a("./NetSimBitLogPanel"),q=a("./NetSimLobby"),r=a("./NetSimLocalClientNode"),s=a("./NetSimLogger"),t=a("./NetSimLogPanel"),u=a("./NetSimRouterLogModal"),v=a("./NetSimRouterNode"),w=a("./NetSimSendPanel"),x=a("./NetSimShard"),y=a("./NetSimStatusPanel"),z=a("./NetSimTabsComponent"),A=a("./NetSimVisualization"),B=m.DnsMode,C=m.MessageGranularity,D=s.getSingleton(),E=a("./NetSimGlobals"),F=b.exports=function(){this.skin=null,this.level={},this.heading=0,this.currentUser_=o.getCurrentUser(),this.shard_=null,this.myNode=null,this.runLoop_=new j,this.chunkSize_=8,this.myDeviceBitRate_=1/0,this.enabledEncodings_=[],this.dnsMode_=B.NONE,this.receivedMessageLog_=null,this.sentMessageLog_=null,this.shardChange=new i,this.shardChange.register(this.onShardChange_.bind(this)),this.eventKeys={}};F.prototype.injectStudioApp=function(a){this.studioApp_=a},F.prototype.init=function(b){if(!this.studioApp_)throw new Error("NetSim requires a StudioApp");E.setRootControllers(this.studioApp_,this),b.skin.staticAvatar=null,b.skin.smallStaticAvatar=null,b.skin.failureAvatar=null,b.skin.winAvatar=null,this.skin=b.skin,this.level=n.scrubLevelConfiguration_(b.level),this.environment=b.rackEnv,this.usePusher=b.usePusher,this.pusherApplicationKey=b.pusherApplicationKey,this.reportingInfo_=b.report,b.html=k({assetUrl:this.studioApp_.assetUrl,data:{visualization:"",localeDirection:this.studioApp_.localeDirection(),controls:a("./controls.html.ejs")({assetUrl:this.studioApp_.assetUrl})},hideRunButton:!0}),b.enableShowCode=!1,b.pinWorkspaceToBottom=!0,b.loadAudio=this.loadAudio_.bind(this),this.studioApp_.configureDom=F.configureDomOverride_.bind(this.studioApp_),this.studioApp_.onResize=F.onResizeOverride_.bind(this.studioApp_),this.studioApp_.init(b),this.currentUser_.whenReady(function(){this.initWithUserName_(this.currentUser_)}.bind(this)),this.runLoop_.tick.register(this.tick.bind(this)),this.runLoop_.begin()},F.prototype.tick=function(a){this.isConnectedToShard()&&(this.myNode.tick(a),this.shard_.tick(a))},F.prototype.getUniqueLevelKey=function(){return location.pathname.substr(1).replace(/\W/g,"-")},F.prototype.getOverrideShardID=function(){var a=location.search.split("?");if(1===a.length)return void 0;var b;return a[1].split("&").forEach(function(a){var c=a.split("=");c.length>1&&"s"===c[0]&&(b=c[1])}),b},F.prototype.shouldShowAnyTabs=function(){return this.level.showTabs.length>0},F.prototype.initWithUserName_=function(a){this.mainContainer_=$("#netsim"),this.level.messageGranularity===C.PACKETS?(this.receivedMessageLog_=new t($("#netsim-received"),{logTitle:h.receivedMessageLog(),isMinimized:!1,hasUnreadMessages:!0,packetSpec:this.level.clientInitialPacketHeader}),this.sentMessageLog_=new t($("#netsim-sent"),{logTitle:h.sentMessageLog(),isMinimized:!0,hasUnreadMessages:!1,packetSpec:this.level.clientInitialPacketHeader})):this.level.messageGranularity===C.BITS&&(this.receivedMessageLog_=new p($("#netsim-received"),{logTitle:h.receiveBits(),isMinimized:!1,netsim:this,showReadWireButton:!0}),this.sentMessageLog_=new p($("#netsim-sent"),{logTitle:h.sentBitsLog(),isMinimized:!1,netsim:this})),this.statusPanel_=new y($("#netsim-status"),{disconnectCallback:this.disconnectFromRemote.bind(this,function(){})}),this.routerLogModal_=new u($("#router-log-modal")),this.visualization_=new A($("#netsim-visualization"),this.runLoop_),this.lobby_=new q($(".lobby-panel"),this,{user:a,levelKey:this.getUniqueLevelKey(),sharedShardSeed:this.getOverrideShardID()}),this.shouldShowAnyTabs()&&(this.tabs_=new z($("#netsim-tabs"),this.runLoop_,{chunkSizeSliderChangeCallback:this.setChunkSize.bind(this),myDeviceBitRateChangeCallback:this.setMyDeviceBitRate.bind(this),encodingChangeCallback:this.changeEncodings.bind(this),routerBandwidthSliderChangeCallback:this.setRouterBandwidth.bind(this),routerBandwidthSliderStopCallback:this.changeRemoteRouterBandwidth.bind(this),routerMemorySliderChangeCallback:this.setRouterMemory.bind(this),routerMemorySliderStopCallback:this.changeRemoteRouterMemory.bind(this),dnsModeChangeCallback:this.changeRemoteDnsMode.bind(this),becomeDnsCallback:this.becomeDnsNode.bind(this)}),this.tabs_.attachToRunLoop(this.runLoop_)),this.sendPanel_=new w($("#netsim-send"),this.level,this),this.changeEncodings(this.level.defaultEnabledEncodings),this.setChunkSize(this.level.defaultChunkSizeBits),this.setMyDeviceBitRate(this.level.defaultBitRateBitsPerSecond),this.setRouterBandwidth(this.level.defaultRouterBandwidth),this.setRouterMemory(this.level.defaultRouterMemory),this.setDnsMode(this.level.defaultDnsMode),this.render(),window.addEventListener("beforeunload",this.onBeforeUnload_.bind(this)),window.addEventListener("unload",this.onUnload_.bind(this)),window.addEventListener("resize",g.debounce(this.updateLayout.bind(this),250))},F.prototype.onBeforeUnload_=function(a){return window.__TestInterface&&window.__TestInterface.ignoreOnBeforeUnload?void 0:this.isConnectedToRemote()?(a.returnValue=h.onBeforeUnloadWarning(),h.onBeforeUnloadWarning()):void 0},F.prototype.onUnload_=function(){this.isConnectedToShard()&&this.synchronousDisconnectFromShard_()},F.prototype.isConnectedToShard=function(){return null!==this.myNode},F.prototype.isConnectedToShardID=function(a){return this.isConnectedToShard()&&this.shard_.id===a},F.prototype.connectToShard=function(a,b){return this.isConnectedToShard()?(D.warn("Auto-closing previous connection..."),void this.disconnectFromShard(this.connectToShard.bind(this,a,b))):(this.shard_=new x(a,E.getPubSubConfig()),void this.createMyClientNode_(b,function(a,b){this.myNode=b,this.shardChange.notifyObservers(this.shard_,this.myNode)}.bind(this)))},F.prototype.createMyClientNode_=function(a,b){r.create(this.shard_,a,function(a,c){return a?(D.error("Failed to create client node; "+a.message),l.error(h.createMyClientNodeError()),void b(a,null)):(c.setLostConnectionCallback(function(){l.warn(h.alertConnectionReset()),this.disconnectFromShard()}.bind(this)),c.initializeSimulation(this.sentMessageLog_,this.receivedMessageLog_),void b(a,c))}.bind(this))},F.prototype.synchronousDisconnectFromShard_=function(){this.myNode.stopSimulation(),this.myNode.synchronousDestroy(),this.myNode=null},F.prototype.disconnectFromShard=function(a){return a=a||function(){},this.isConnectedToShard()?this.isConnectedToRemote()?void this.disconnectFromRemote(this.disconnectFromShard.bind(this,a)):(this.myNode.stopSimulation(),void this.myNode.destroy(function(b,c){b&&D.warn("Error destroying node:"+b.message),this.myNode=null,this.shardChange.notifyObservers(null,null),a(b,c)}.bind(this))):(D.warn("Redundant disconnect call."),void a(null,null))},F.prototype.isConnectedToRemote=function(){return this.isConnectedToClient()||this.isConnectedToRouter()},F.prototype.getConnectedRemoteNode=function(){var a=this.getConnectedClient(),b=this.getConnectedRouter();return a?a:b},F.prototype.isConnectedToClient=function(){return!!this.getConnectedClient()},F.prototype.getConnectedClient=function(){return this.isConnectedToShard()?this.myNode.myRemoteClient:null},F.prototype.isConnectedToRouter=function(){return!!this.getConnectedRouter()},F.prototype.getConnectedRouter=function(){return this.isConnectedToShard()?this.myNode.getMyRouter():null},F.prototype.connectToRouter=function(a){if(this.isConnectedToRemote())return D.warn("Auto-disconnecting from previous router."),void this.disconnectFromRemote(this.connectToRouter.bind(this,a));var b=this;v.get(a,this.shard_,function(c,d){return c?void D.warn("Failed to find router with ID "+a+"; "+c.message):void b.myNode.connectToRouter(d,function(a){a&&D.warn("Failed to connect to "+d.getDisplayName()+"; "+a.message)})})},F.prototype.disconnectFromRemote=function(a){a=f.valueOr(a,function(){}),this.myNode.disconnectRemote(a)},F.prototype.receiveBit=function(a){this.myNode.getLatestMessageOnSimplexWire(a)},F.prototype.changeEncodings=function(a){this.enabledEncodings_=a,this.tabs_&&this.tabs_.setEncodings(a),this.receivedMessageLog_.setEncodings(a),this.sentMessageLog_.setEncodings(a),this.sendPanel_.setEncodings(a),this.visualization_.setEncodings(a),this.updateLayout()},F.prototype.getEncodings=function(){return this.enabledEncodings_},F.prototype.setChunkSize=function(a){this.chunkSize_=a,this.tabs_&&this.tabs_.setChunkSize(a),this.receivedMessageLog_.setChunkSize(a),this.sentMessageLog_.setChunkSize(a),this.sendPanel_.setChunkSize(a)},F.prototype.setMyDeviceBitRate=function(a){this.myDeviceBitRate_=a,this.tabs_&&this.tabs_.setMyDeviceBitRate(a),this.sendPanel_.setBitRate(a)},F.prototype.setRouterCreationTime=function(a){this.tabs_&&this.tabs_.setRouterCreationTime(a)},F.prototype.setRouterBandwidth=function(a){this.tabs_&&this.tabs_.setRouterBandwidth(a)},F.prototype.changeRemoteRouterBandwidth=function(a){this.setRouterBandwidth(a),this.isConnectedToRouter()&&this.getConnectedRouter().setBandwidth(a)},F.prototype.setRouterMemory=function(a){this.tabs_&&this.tabs_.setRouterMemory(a)},F.prototype.changeRemoteRouterMemory=function(a){this.setRouterMemory(a),this.isConnectedToRouter()&&this.getConnectedRouter().setMemory(a)},F.prototype.setDnsMode=function(a){this.dnsMode_=a,this.tabs_&&this.tabs_.setDnsMode(a),this.visualization_.setDnsMode(a)},F.prototype.getDnsMode=function(){return this.dnsMode_},F.prototype.changeRemoteDnsMode=function(a){this.setDnsMode(a),this.isConnectedToRouter()&&this.getConnectedRouter().setDnsMode(a)},F.prototype.setIsDnsNode=function(a){this.tabs_&&this.tabs_.setIsDnsNode(a),this.isConnectedToRouter()&&this.setDnsTableContents(this.getConnectedRouter().getAddressTable())},F.prototype.setDnsNodeID=function(a){this.visualization_.setDnsNodeID(a)},F.prototype.becomeDnsNode=function(){if(this.setIsDnsNode(!0),this.myNode&&this.myNode.getMyRouter()){var a=this.myNode,b=a.getMyRouter();b.dnsNodeID=a.entityID,b.update()}},F.prototype.setDnsTableContents=function(a){this.tabs_&&this.tabs_.setDnsTableContents(a)},F.prototype.setRouterLogData=function(a){this.tabs_&&this.tabs_.setRouterLogData(a)},F.prototype.setRouterQueuedPacketCount_=function(a){this.tabs_&&this.tabs_.setRouterQueuedPacketCount(a)},F.prototype.setRouterMemoryInUse_=function(a){this.tabs_&&this.tabs_.setRouterMemoryInUse(a)},F.prototype.setRouterDataRate_=function(a){this.tabs_&&this.tabs_.setRouterDataRate(a)},F.prototype.loadAudio_=function(){},F.configureDomOverride_=function(a){var b=document.getElementById(a.containerId);b.innerHTML=a.html;var c=this.MIN_WORKSPACE_HEIGHT,d=document.getElementById("netsim-leftcol");a.pinWorkspaceToBottom?(document.body.style.overflow="hidden",b.className=b.className+" pin_bottom",d.className=d.className+" pin_bottom"):(d.style.minHeight=c+"px",b.style.minHeight=c+"px")};var G=g.debounce(function(){e(),d()},10);F.onResizeOverride_=function(){var a=document.getElementById("appcontainer"),b=a.parentNode,c=window.getComputedStyle(b),d=parseInt(c.width,10);a.style.top=b.offsetTop+"px",a.style.width=d+"px",G()},F.prototype.debouncedResizeFooter=function(){G()},F.prototype.render=function(){var a,b,c,d,e,f;a=!1,b=h.disconnected(),this.myNode&&(b="In Lobby",c=this.myNode.getHostname(),this.myNode.myWire&&(d=this.myNode.myWire.localAddress)),this.isConnectedToRemote()&&(a=!0,b=h.connected(),e=this.getConnectedRemoteNode().getDisplayName()),f=this.lobby_.getShareLink(),this.isConnectedToRemote()?(this.mainContainer_.find("#netsim-disconnected").hide(),this.mainContainer_.find("#netsim-connected").show(),this.sendPanel_.setFromAddress(d),this.statusPanel_&&this.statusPanel_.render({isConnected:a,statusString:b,myHostname:c,myAddress:d,remoteNodeName:e,shareLink:f})):(this.mainContainer_.find("#netsim-disconnected").show(),this.mainContainer_.find("#netsim-connected").hide(),this.lobby_.render()),this.routerLogModal_&&this.routerLogModal_.render(),this.updateLayout()},F.prototype.onShardChange_=function(a,b){this.eventKeys.registeredWithLocalNode&&(this.eventKeys.registeredWithLocalNode.remoteChange.unregister(this.eventKeys.remoteChange),this.eventKeys.registeredWithLocalNode=null),b&&(this.eventKeys.remoteChange=b.remoteChange.register(this.onRemoteChange_.bind(this)),this.eventKeys.registeredWithLocalNode=b),this.routerLogModal_&&this.routerLogModal_.setShard(a),this.visualization_.setShard(a),this.visualization_.setLocalNode(b),this.render()},F.prototype.onRemoteChange_=function(a,b){var c=b&&b instanceof v,d=!b&&this.eventKeys.registeredWithRouter;this.eventKeys.registeredWithRouter&&(this.eventKeys.registeredWithRouter.stateChange.unregister(this.eventKeys.routerStateChange),this.eventKeys.registeredWithRouter.statsChange.unregister(this.eventKeys.routerStatsChange),this.eventKeys.registeredWithRouter.wiresChange.unregister(this.eventKeys.routerWiresChange),this.eventKeys.registeredWithRouter.logChange.unregister(this.eventKeys.routerLogChange),this.eventKeys.registeredWithRouter=null),c&&(this.eventKeys.routerStateChange=b.stateChange.register(this.onRouterStateChange_.bind(this)),this.eventKeys.routerStatsChange=b.statsChange.register(this.onRouterStatsChange_.bind(this)),this.eventKeys.routerWiresChange=b.wiresChange.register(this.onRouterWiresChange_.bind(this)),this.eventKeys.routerLogChange=b.logChange.register(this.onRouterLogChange_.bind(this)),this.eventKeys.registeredWithRouter=b),this.render(),c?this.onRouterConnect_(b):d&&this.onRouterDisconnect_()},F.prototype.onRouterConnect_=function(a){this.onRouterStateChange_(a),this.onRouterStatsChange_(a),this.setRouterLogData(a.getLog()),this.routerLogModal_.setRouter(a)},F.prototype.onRouterDisconnect_=function(){this.setRouterCreationTime(0),this.setRouterQueuedPacketCount_(0),this.setRouterMemoryInUse_(0),this.setRouterDataRate_(0),this.setRouterLogData([]),this.routerLogModal_.setRouter(null)},F.prototype.onRouterStateChange_=function(a){var b={};this.myNode&&(b=this.myNode),this.setRouterCreationTime(a.creationTime),this.setRouterBandwidth(a.bandwidth),this.setRouterMemory(a.memory),this.setDnsMode(a.dnsMode),this.setDnsNodeID(a.dnsMode===B.NONE?void 0:a.dnsNodeID),this.setIsDnsNode(a.dnsMode===B.MANUAL&&a.dnsNodeID===b.entityID)},F.prototype.onRouterStatsChange_=function(a){this.setRouterQueuedPacketCount_(a.getQueuedPacketCount()),this.setRouterMemoryInUse_(a.getMemoryInUse()),this.setRouterDataRate_(a.getCurrentDataRate())},F.prototype.onRouterWiresChange_=function(){this.isConnectedToRouter()&&this.setDnsTableContents(this.getConnectedRouter().getAddressTable())},F.prototype.onRouterLogChange_=function(){this.isConnectedToRouter()&&this.setRouterLogData(this.getConnectedRouter().getLog())},F.prototype.animateSetWireState=function(a){this.visualization_.animateSetWireState(a)},F.prototype.animateReadWireState=function(a){this.visualization_.animateReadWireState(a)},F.prototype.updateLayout=function(){var a=$("#netsim-rightcol"),b=$("#netsim-send"),c=$("#netsim-logs");if(G(),this.lobby_&&this.lobby_.updateLayout(),a.is(":visible")){var d=a.height(),e=b.height(),f=d-e,g=!this.sentMessageLog_.isMinimized(),h=!this.receivedMessageLog_.isMinimized();if(h&&g){var i=Math.floor(f/2);this.receivedMessageLog_.setHeight(i),this.sentMessageLog_.setHeight(i)}else h?this.receivedMessageLog_.setHeight(Math.floor(f-this.sentMessageLog_.getHeight())):g&&this.sentMessageLog_.setHeight(Math.floor(f-this.receivedMessageLog_.getHeight()));c.css("height",d-e)}},F.prototype.completeLevelAndContinue=function(){$(".submitButton").attr("disabled",!0),sendReport({fallbackResponse:this.reportingInfo_.fallback_response,callback:this.reportingInfo_.callback,app:"netsim",level:this.level.id,result:!0,testResult:100,onComplete:function(a){$(".submitButton").attr("disabled",!1),a.redirect&&(this.isConnectedToRemote()?this.disconnectFromRemote(function(){window.location.href=a.redirect}):window.location.href=a.redirect)}.bind(this)})},F.prototype.resetShard=function(){this.shard_&&confirm(h.shardResetConfirmation())&&this.shard_.resetEverything(function(a){return a?(D.error(a),void l.error(h.shardResetError())):void 0}.bind(this))}},{"../ObservableEvent":2,"../RunLoop":4,"../utils":324,"./DashboardUser":183,"./NetSimAlert":186,"./NetSimBitLogPanel":190,"./NetSimConstants":194,"./NetSimGlobals":206,"./NetSimLobby":207,"./NetSimLocalClientNode":208,"./NetSimLogPanel":212,"./NetSimLogger":213,"./NetSimRouterLogModal":231,"./NetSimRouterNode":232,"./NetSimSendPanel":238,"./NetSimShard":239,"./NetSimStatusPanel":245,"./NetSimTabsComponent":248,"./NetSimUtils":249,"./NetSimVisualization":251,"./controls.html.ejs":262,"./locale":264,"./page.html.ejs":267}],267:[function(require,module,exports){module.exports=function(){var t=function anonymous(locals,filters,escape){escape=escape||function(a){return String(a).replace(/&(?!\w+;)/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")};var buf=[];with(locals||{})!function(){buf.push("");var a=require("../locale");buf.push('\n\n<div id="rotateContainer" style="background-image: url(',escape(assetUrl("media/turnphone_horizontal.png")),')">\n  <div id="rotateText">\n    <p>',escape(a.rotateText()),"<br>",escape(a.orientationLock()),"</p>\n  </div>\n</div>\n\n");var b=function(){buf.push('  <div id="bubble" class="clearfix">\n    <table id="prompt-table">\n      <tr>\n        <td id="prompt-icon-cell">\n          <img id="prompt-icon"/>\n        </td>\n        <td id="prompt-cell">\n          <p id="prompt">\n          </p>\n        </td>\n      </tr>\n    </table>\n    <div id="ani-gif-preview-wrapper">\n      <div id="ani-gif-preview">\n      </div>\n    </div>\n  </div>\n')};buf.push('\n<div id="appcontainer">\n  <!-- Should disable spell-check on all netsim elements -->\n  <div id="netsim" autocapitalize="false" autocorrect="false" autocomplete="false" spellcheck="false">\n\n    <div id="netsim-disconnected">\n      <div class="lobby-panel"></div>\n    </div>\n\n\n    <div id="netsim-connected">\n      <div id="netsim-leftcol">\n        <div class="column-width-limiter">\n\n          <div id="netsim-status"></div>\n\n          <div id="netsim-visualization"></div>\n\n          <div id="netsim-tabs"></div>\n\n        </div>\n      </div>\n\n      <div id="netsim-rightcol">\n        <div id="netsim-logs">\n          <div id="netsim-received"></div>\n          <div id="netsim-sent"></div>\n        </div>\n        <div id="netsim-send"></div>\n      </div>\n    </div>\n\n    <div id="router-log-modal" class="modal fade"></div>\n\n  </div>\n  <div id="footers" dir="',escape(data.localeDirection),'">\n  </div>\n  <div class="hidden">\n    '),b(),buf.push('\n  </div>\n</div>\n\n<div class="clear"></div>\n')}();return buf.join("")};return function(a){return t(a,require("ejs").filters)}}()},{"../locale":151,ejs:500}],263:[function(a,b,c){var d=a("./NetSimConstants"),e=(a("./Packet"),d.BITS_PER_NIBBLE,d.MessageGranularity),f=d.DnsMode,g=(d.EncodingType,d.NetSimTabType,b.exports={});g.custom={showClientsInLobby:!1,showRoutersInLobby:!1,canConnectToClients:!1,canConnectToRouters:!1,showAddRouterButton:!1,showLogBrowserButton:!1,messageGranularity:e.BITS,automaticReceive:!1,broadcastMode:!1,connectedRouters:!1,minimumExtraHops:0,maximumExtraHops:0,addressFormat:"4",packetCountBitWidth:4,routerExpectsPacketHeader:[],clientInitialPacketHeader:[],showHostnameInGraph:!1,showAddPacketButton:!1,showPacketSizeControl:!1,defaultPacketSizeLimit:8192,showTabs:[],defaultTabIndex:0,showPulseRateSlider:!1,showMetronome:!1,showEncodingControls:[],defaultEnabledEncodings:[],showBitRateControl:!1,lockBitRateControl:!1,defaultBitRateBitsPerSecond:1/0,showChunkSizeControl:!1,lockChunkSizeControl:!1,defaultChunkSizeBits:8,showRouterBandwidthControl:!1,defaultRouterBandwidth:1/0,showRouterMemoryControl:!1,defaultRouterMemory:1/0,defaultRandomDropChance:0,showDnsModeControl:!1,defaultDnsMode:f.NONE},g.playground={showClientsInLobby:!1,showRoutersInLobby:!0,canConnectToClients:!1,canConnectToRouters:!0,showAddRouterButton:!0,showLogBrowserButton:!0,messageGranularity:e.PACKETS,automaticReceive:!0,broadcastMode:!1,connectedRouters:!1,minimumExtraHops:0,maximumExtraHops:0,addressFormat:"4",packetCountBitWidth:4,routerExpectsPacketHeader:["toAddress","fromAddress"],clientInitialPacketHeader:["toAddress","fromAddress"],showHostnameInGraph:!1,showAddPacketButton:!1,showPacketSizeControl:!1,defaultPacketSizeLimit:8192,showTabs:["instructions","my_device","router","dns"],defaultTabIndex:0,showPulseRateSlider:!1,showMetronome:!1,showEncodingControls:["a_and_b","binary","hexadecimal","decimal","ascii"],defaultEnabledEncodings:["a_and_b","binary","hexadecimal","decimal","ascii"],showBitRateControl:!0,lockBitRateControl:!1,defaultBitRateBitsPerSecond:1/0,showChunkSizeControl:!0,lockChunkSizeControl:!1,defaultChunkSizeBits:8,showRouterBandwidthControl:!0,defaultRouterBandwidth:1/0,showRouterMemoryControl:!0,defaultRouterMemory:1/0,defaultRandomDropChance:0,showDnsModeControl:!0,defaultDnsMode:f.NONE}},{"./NetSimConstants":194,"./Packet":259}],262:[function(require,module,exports){module.exports=function(){var t=function anonymous(locals,filters,escape){escape=escape||function(a){return String(a).replace(/&(?!\w+;)/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")};var buf=[];with(locals||{})!function(){buf.push('<div id="slider-cell">\n  <img id="spinner" style="visibility: hidden;" src="',escape(assetUrl("media/netsim/loading.gif")),'" height=15 width=15>\n</div>\n')}();return buf.join("")};return function(a){return t(a,require("ejs").filters)}}()},{ejs:500}],251:[function(a,b,c){"use strict";var d=a("../utils"),e=d.getLodash(),f=a("./NetSimVisualization.html.ejs"),g=a("./NetSimNodeFactory"),h=a("./NetSimWire"),i=a("./NetSimVizAutoDnsNode"),j=a("./NetSimVizNode"),k=a("./NetSimVizSimulationNode"),l=a("./NetSimVizSimulationWire"),m=a("./NetSimVizWire"),n=a("./NetSimGlobals"),o=a("./tweens"),p=a("./NetSimConstants"),q=p.DnsMode,r=p.NodeType,s=!1,t=b.exports=function(a,b){this.rootDiv_=a,this.rootDiv_.html(f({showBackground:s})),this.svgRoot_=this.rootDiv_.find("svg"),this.backgroundGroup_=this.svgRoot_.find("#background-group"),this.foregroundGroup_=this.svgRoot_.find("#foreground-group"),this.shard_=null,this.elements_=[],this.localNode=null,this.visualizationWidth=300,this.visualizationHeight=300,this.dnsMode_=null,this.autoDnsNode_=null,this.autoDnsWire_=null,this.eventKeys={},this.encodings_=[],b.tick.register(this.tick.bind(this)),b.render.register(this.render.bind(this))};t.prototype.tick=function(a){this.elements_.forEach(function(b){b.tick(a)}),this.elements_=this.elements_.filter(function(a){return a.isDead()?(a.getRoot().remove(),!1):!0})},t.prototype.render=function(a){this.elements_.forEach(function(b){b.render(a)})},t.prototype.setShard=function(a){this.shard_=a,this.eventKeys.registeredWithShard&&(this.eventKeys.registeredWithShard.nodeTable.tableChange.unregister(this.eventKeys.nodeTable),this.eventKeys.registeredWithShard.wireTable.tableChange.unregister(this.eventKeys.wireTable),this.eventKeys.registeredWithShard=null),a&&(this.eventKeys.nodeTable=a.nodeTable.tableChange.register(this.onNodeTableChange_.bind(this)),this.eventKeys.wireTable=a.wireTable.tableChange.register(this.onWireTableChange_.bind(this)),this.eventKeys.registeredWithShard=a)},t.prototype.setLocalNode=function(a){this.eventKeys.registeredWithLocalNode&&(this.eventKeys.registeredWithLocalNode.remoteChange.unregister(this.eventKeys.remoteChange),this.eventKeys.registeredWithLocalNode=null),a&&(this.eventKeys.remoteChange=a.remoteChange.register(this.onRemoteChange_.bind(this)),this.eventKeys.registeredWithLocalNode=a),a?(this.localNode?this.localNode.configureFrom(a):(this.localNode=new k(a,s),this.elements_.push(this.localNode),this.backgroundGroup_.append(this.localNode.getRoot())),this.localNode.setIsLocalNode()):this.localNode&&(this.localNode.kill(),this.localNode=null),this.pullElementsToForeground()},t.prototype.onRemoteChange_=function(){this.pullElementsToForeground(),this.distributeForegroundNodes()},t.prototype.getElementByEntityID=function(a,b){return e.find(this.elements_,function(c){return c instanceof a&&c.getCorrespondingEntityID&&c.getCorrespondingEntityID()===b})},t.prototype.getReciprocatedWiresAttachedToNode=function(a){if(a.isRouter)return this.getWiresAttachedToNode(a);var b=this.getLocalWiresAttachedToNode(a);return b.filter(function(b){return b.remoteVizNode.isRouter?!0:this.getWiresAttachedToNode(b.remoteVizNode).some(function(b){return b.remoteVizNode===a})},this)},t.prototype.getLocalWiresAttachedToNode=function(a){return this.elements_.filter(function(b){return b instanceof m&&b.localVizNode===a})},t.prototype.getWiresAttachedToNode=function(a){return this.elements_.filter(function(b){return b instanceof m&&(b.localVizNode===a||b.remoteVizNode===a)})},t.prototype.onNodeTableChange_=function(){var a=g.nodesFromRows(this.shard_,this.shard_.nodeTable.readAll());this.updateVizEntitiesOfType_(k,a,function(a){var b=new k(a,s);return b.setDnsMode(this.dnsMode_),b.snapToPosition(Math.random()*this.visualizationWidth-this.visualizationWidth/2,Math.random()*this.visualizationHeight-this.visualizationHeight/2),b}.bind(this))},t.prototype.onWireTableChange_=function(){var a=this.shard_.wireTable.readAll().map(function(a){return new h(this.shard_,a)},this);this.updateVizEntitiesOfType_(l,a,function(a){var b=new l(a,this.getElementByEntityID.bind(this));return b.setEncodings(this.encodings_),b}.bind(this)),n.getLevelConfig().broadcastMode&&this.updateBroadcastModeWires_(),this.pullElementsToForeground(),this.distributeForegroundNodes()},t.prototype.updateBroadcastModeWires_=function(){this.elements_.forEach(function(a){a instanceof m&&!(a instanceof l)&&a.kill()},this);var a=this.generateBroadcastModeConnections_();a.forEach(function(a){var b=new m(a.nodeA,a.nodeB);this.addVizElement_(b)},this)},t.prototype.generateBroadcastModeConnections_=function(){for(var a=this.shard_.nodeTable.readAll(),b=this.shard_.wireTable.readAll(),c=a.length,d={},e=0;c>e;e++)d[a[e].id]=e;for(var f=new Array(c),g=0;c>g;g++){f[g]=new Array(c);for(var h=0;c>h;h++)f[g][h]=!1}b.forEach(function(a){var b=d[a.localNodeID],c=d[a.remoteNodeID];void 0!==b&&void 0!==c&&(f[b][c]=!0,f[c][b]=!0)});for(var i=0;c>i;i++)for(var j=0;c>j;j++)for(var l=0;c>l;l++)f[j][i]&&f[i][l]&&(f[j][l]=!0);for(var m=[],n=0;c-1>n;n++)for(var o=n+1;c>o;o++){var p=a[n].type===r.CLIENT&&a[o].type===r.CLIENT,q=f[n][o];p&&q&&m.push({nodeA:this.getElementByEntityID(k,a[n].id),nodeB:this.getElementByEntityID(k,a[o].id)})}return m},t.prototype.updateVizEntitiesOfType_=function(a,b,c){this.killVizEntitiesOfTypeMissingMatch_(a,b),b.forEach(function(b){var d=this.getElementByEntityID(a,b.entityID);d?d.configureFrom(b):this.addVizElement_(c(b))},this)},t.prototype.killVizEntitiesOfTypeMissingMatch_=function(a,b){this.elements_.forEach(function(c){var d=c instanceof a,e=b.some(function(a){return c.getCorrespondingEntityID&&a.entityID===c.getCorrespondingEntityID()});d&&!e&&c.kill()})},t.prototype.addVizElement_=function(a){this.elements_.push(a),this.backgroundGroup_.prepend(a.getRoot())};var u=function(a,b){a.getRoot().detach(),a instanceof m?a.getRoot().prependTo(b):a.getRoot().appendTo(b)};t.prototype.pullElementsToForeground=function(){this.elements_.forEach(function(a){a.visited=!1});var a=[];this.localNode&&a.push(this.localNode);for(var b;a.length>0;)b=a.pop(),b.visited=!0,a=a.concat(this.getUnvisitedNeighborsOf_(b));var c=this.foregroundGroup_,d=this.backgroundGroup_;this.elements_.forEach(function(a){var b=$.contains(c[0],a.getRoot()[0]);a.visited&&!b?(u(a,c),a.onDepthChange(!0)):!a.visited&&b&&(u(a,d),a.onDepthChange(!1))},this),this.updateAutoDnsNode()},t.prototype.getUnvisitedNeighborsOf_=function(a){var b=[];return a instanceof k?(b=n.getLevelConfig().broadcastMode?this.getWiresAttachedToNode(a):this.getReciprocatedWiresAttachedToNode(a),a.isRouter&&this.autoDnsNode_&&(b.push(this.autoDnsNode_),b.push(this.autoDnsWire_))):a instanceof m&&(a.localVizNode&&b.push(a.localVizNode),a.remoteVizNode&&b.push(a.remoteVizNode)),b.filter(function(a){return!a.visited})},t.prototype.distributeForegroundNodes=function(){if(n.getLevelConfig().broadcastMode)return void this.distributeForegroundNodesForBroadcast_();var a=this.elements_.filter(function(a){return a instanceof j&&a.isForeground});if(0!==a.length){if(1===a.length)return void a[0].tweenToPosition(0,0,600,o.easeOutQuad);var b;if(2===a.length){b=this.localNode;var c=e.find(a,function(a){return a!==b});return b.tweenToPosition(-75,0,400,o.easeOutQuad),void c.tweenToPosition(75,0,600,o.easeOutQuad)}b=this.localNode;var d=e.find(a,function(a){return a.isRouter}),f=a.filter(function(a){return a!==b&&a!==d});b.tweenToPosition(-100,0,400,o.easeOutQuad),d.tweenToPosition(0,0,500,o.easeOutQuad);for(var g=2*Math.PI/(f.length+1),h=0;h<f.length;h++){var i=100,k=Math.PI+(h+1)*g,l=Math.cos(k)*i,m=Math.sin(k)*i;f[h].tweenToPosition(l,m,600,o.easeOutQuad)}}},t.prototype.distributeForegroundNodesForBroadcast_=function(){var a=this.elements_.filter(function(a){return a instanceof k&&a.isForeground&&!a.isRouter});if(0!==a.length){if(1===a.length)return void a[0].tweenToPosition(0,0,600,o.easeOutQuad);var b;if(2===a.length){b=this.localNode;var c=e.find(a,function(a){return a!==b});return b.tweenToPosition(-75,0,400,o.easeOutQuad),void c.tweenToPosition(75,0,600,o.easeOutQuad)}b=this.localNode;var d=a.filter(function(a){return a!==b});b.tweenToPosition(-100,0,400,o.easeOutQuad);for(var f=2*Math.PI/(d.length+1),g=0;g<d.length;g++){var h=100,i=Math.PI+(g+1)*f,j=Math.cos(i)*h,l=Math.sin(i)*h;d[g].tweenToPosition(j,l,600,o.easeOutQuad)}}},t.prototype.setDnsMode=function(a){this.dnsMode_=a,a===q.AUTOMATIC?this.makeAutoDnsNode():this.destroyAutoDnsNode(),this.elements_.forEach(function(b){b instanceof k&&b.setDnsMode(a)}),this.pullElementsToForeground(),this.distributeForegroundNodes()},t.prototype.makeAutoDnsNode=function(){this.autoDnsNode_||(this.autoDnsNode_=new i(s),this.addVizElement_(this.autoDnsNode_),this.autoDnsWire_=new m(this.autoDnsNode_,null),this.addVizElement_(this.autoDnsWire_))},t.prototype.updateAutoDnsNode=function(){if(this.autoDnsNode_){var a=e.find(this.elements_,function(a){return a instanceof k&&a.isRouter&&a.isForeground});a&&this.autoDnsNode_.setAddress(a.autoDnsAddress),this.autoDnsWire_.localVizNode=this.autoDnsNode_,this.autoDnsWire_.remoteVizNode=a;
}},t.prototype.destroyAutoDnsNode=function(){this.autoDnsNode_&&(this.autoDnsNode_.kill(),this.autoDnsNode_=null),this.autoDnsWire_&&(this.autoDnsWire_.kill(),this.autoDnsWire_=null)},t.prototype.setDnsNodeID=function(a){this.elements_.forEach(function(b){b instanceof k&&b.setIsDnsNode(b.getCorrespondingEntityID()===a)})},t.prototype.setEncodings=function(a){this.encodings_=a,this.elements_.forEach(function(b){b instanceof l&&b.setEncodings(a)})},t.prototype.animateSetWireState=function(a){var b=this.getVizWireToRemote(),c=this.getVizWireFromRemote();b&&c&&(c.hide(),b.animateSetState(a))},t.prototype.animateReadWireState=function(a){var b=this.getVizWireToRemote(),c=this.getVizWireFromRemote();b&&c&&(c.hide(),b.animateReadState(a))},t.prototype.getVizWireToRemote=function(){if(!this.localNode)return null;var a=this.elements_.filter(function(a){return a instanceof l&&a.localVizNode===this.localNode},this);return 0===a.length?null:a[0]},t.prototype.getVizWireFromRemote=function(){if(!this.localNode)return null;var a=this.elements_.filter(function(a){return a instanceof l&&a.remoteVizNode===this.localNode},this);return 0===a.length?null:a[0]}},{"../utils":324,"./NetSimConstants":194,"./NetSimGlobals":206,"./NetSimNodeFactory":221,"./NetSimVisualization.html.ejs":250,"./NetSimVizAutoDnsNode":252,"./NetSimVizNode":254,"./NetSimVizSimulationNode":255,"./NetSimVizSimulationWire":256,"./NetSimVizWire":257,"./NetSimWire":258,"./tweens":269}],256:[function(a,b,c){"use strict";a("../utils");var d=a("./NetSimGlobals"),e=a("./NetSimVizNode"),f=a("./NetSimVizWire"),g=b.exports=function(a,b){var c=b(e,a.localNodeID),d=b(e,a.remoteNodeID);f.call(this,c,d),this.correspondingWireID_=a.entityID,this.getElementByEntityID_=b,this.configureFrom(a),this.render()};g.inherits(f),g.prototype.configureFrom=function(a){this.localVizNode=this.getElementByEntityID_(e,a.localNodeID),this.remoteVizNode=this.getElementByEntityID_(e,a.remoteNodeID),this.localVizNode&&this.localVizNode.setAddress(a.localAddress),this.remoteVizNode&&this.remoteVizNode.setAddress(a.remoteAddress),d.getLevelConfig().broadcastMode&&this.getRoot().css("display","none")},g.prototype.getCorrespondingEntityID=function(){return this.correspondingWireID_},g.prototype.kill=function(){g.superPrototype.kill.call(this),this.correspondingWireID_=void 0}},{"../utils":324,"./NetSimGlobals":206,"./NetSimVizNode":254,"./NetSimVizWire":257}],257:[function(a,b,c){"use strict";a("../utils");var d=a("./NetSimUtils").jQuerySvgElement,e=a("./NetSimVizElement"),f=a("./tweens"),g=a("./DataConverters"),h=a("./NetSimConstants"),i=h.EncodingType,j=g.binaryToAB,k=-10,l=b.exports=function(a,b){e.call(this);var c=this.getRoot();c.addClass("viz-wire"),this.line_=d("path").appendTo(c),this.questionMark_=d("text").text("?").addClass("question-mark").appendTo(c),this.text_=d("text").addClass("state-label").appendTo(c),this.textPosX_=0,this.textPosY_=0,this.forceTextPosRender_=!1,this.pathData_="",this.wireCenter_={x:0,y:0},this.encodings_=[],this.localVizNode=a,this.remoteVizNode=b,this.render()};l.inherits(e),l.prototype.render=function(a){var b=this.textPosX_,c=this.textPosY_,d=this.pathData_,e=this.wireCenter_;l.superPrototype.render.call(this,a),this.localVizNode&&this.remoteVizNode&&(this.pathData_=["M",this.localVizNode.posX,this.localVizNode.posY,"L",this.remoteVizNode.posX,this.remoteVizNode.posY].join(" "),this.wireCenter_=this.getWireCenterPosition()),(this.forceTextPosRender_||b!==this.textPosX_||c!==this.textPosY_)&&(this.text_.attr("x",this.textPosX_).attr("y",this.textPosY_),this.forceTextPosRender_=!1),d!==this.pathData_&&this.line_.attr("d",this.pathData_),(e.x!==this.wireCenter_.x||e.y!==this.wireCenter_.y)&&this.questionMark_.attr("x",this.wireCenter_.x).attr("y",this.wireCenter_.y)},l.prototype.hide=function(){this.getRoot().addClass("hidden-wire")},l.prototype.kill=function(){l.superPrototype.kill.call(this),this.localVizNode=null,this.remoteVizNode=null},l.prototype.setEncodings=function(a){this.encodings_=a},l.prototype.animateSetState=function(a){if(this.localVizNode&&this.remoteVizNode){var b=300,c=300;this.stopAllAnimation(),this.setWireClasses_(a),this.text_.text(this.getDisplayBit_(a)),this.snapTextToPosition(this.getLocalNodePosition()),this.tweenTextToPosition(this.getWireCenterPosition(),b,f.easeOutQuad),this.doAfterDelay(b+c,function(){this.setWireClasses_("unknown")}.bind(this))}},l.prototype.animateReadState=function(a){if(this.localVizNode&&this.remoteVizNode){var b=300,c=300;this.stopAllAnimation(),this.setWireClasses_(a),this.text_.text(this.getDisplayBit_(a)),this.snapTextToPosition(this.getWireCenterPosition()),this.doAfterDelay(b,function(){this.tweenTextToPosition(this.getLocalNodePosition(),c,f.easeOutQuad),this.setWireClasses_("unknown")}.bind(this))}},l.prototype.setWireClasses_=function(a){var b="0"===a,c=!b&&"1"===a,d=!b&&!c;this.getRoot().toggleClass("state-on",c),this.getRoot().toggleClass("state-off",b),this.getRoot().toggleClass("state-unknown",d)},l.prototype.getDisplayBit_=function(a){return this.isEncodingEnabled_(i.A_AND_B)&&!this.isEncodingEnabled_(i.BINARY)&&(a=j(a)),a},l.prototype.isEncodingEnabled_=function(a){return this.encodings_.some(function(b){return b===a})},l.prototype.tweenTextToPosition=function(a,b,c){b>0?(this.tweens_.push(new f.TweenValueTo(this,"textPosX_",a.x,b,c)),this.tweens_.push(new f.TweenValueTo(this,"textPosY_",a.y,b,c))):(this.textPosX_=a.x,this.textPosY_=a.y,this.forceTextPosRender_=!0)},l.prototype.snapTextToPosition=function(a){this.tweenTextToPosition(a,0)},l.prototype.getLocalNodePosition=function(){return{x:this.localVizNode.posX,y:this.localVizNode.posY}},l.prototype.getWireCenterPosition=function(){return{x:(this.remoteVizNode.posX-this.localVizNode.posX)/2+this.localVizNode.posX,y:(this.remoteVizNode.posY-this.remoteVizNode.posY)/2+this.localVizNode.posY+k}}},{"../utils":324,"./DataConverters":184,"./NetSimConstants":194,"./NetSimUtils":249,"./NetSimVizElement":253,"./tweens":269}],255:[function(a,b,c){"use strict";a("../utils");var d=a("./NetSimConstants"),e=a("./NetSimVizNode"),f=d.NodeType,g=a("./NetSimGlobals"),h=b.exports=function(a,b){e.call(this,b),this.correspondingNodeID_=a.entityID,this.autoDnsAddress=void 0,this.configureFrom(a),this.render()};h.inherits(e),h.prototype.configureFrom=function(a){this.correspondingNodeID_=a.entityID;var b=g.getLevelConfig();b.showHostnameInGraph?this.setName(a.getHostname()):this.setName(a.getShortDisplayName()),a.getNodeType()===f.ROUTER&&(this.isRouter=!0,this.getRoot().addClass("router-node"),this.autoDnsAddress=a.getAutoDnsAddress(),b.broadcastMode&&this.getRoot().css("display","none"))},h.prototype.getCorrespondingEntityID=function(){return this.correspondingNodeID_},h.prototype.kill=function(){h.superPrototype.kill.call(this),this.correspondingNodeID_=void 0}},{"../utils":324,"./NetSimConstants":194,"./NetSimGlobals":206,"./NetSimVizNode":254}],252:[function(a,b,c){"use strict";a("../utils");var d=a("./NetSimGlobals"),e=a("./NetSimVizNode"),f=b.exports=function(a){e.call(this,a),this.getRoot().addClass("auto-dns-node");var b=d.getLevelConfig();b.showHostnameInGraph?this.setName("dns"):this.setName("DNS"),this.setIsDnsNode(!0),this.render()};f.inherits(e)},{"../utils":324,"./NetSimGlobals":206,"./NetSimVizNode":254}],254:[function(a,b,c){"use strict";a("../utils");var d=a("./NetSimConstants"),e=a("./NetSimUtils").jQuerySvgElement,f=a("./NetSimVizElement"),g=a("./tweens"),h=d.DnsMode,i=a("./NetSimGlobals"),j=30,k=20,l=10,m=b.exports=function(a){f.call(this),this.address_=void 0,this.dnsMode_=void 0,this.useBackgroundAnimation_=a,this.isRouter=!1,this.isLocalNode=!1,this.isDnsNode=!1;var b=this.getRoot();b.addClass("viz-node");var c=37,d=4;e("circle").attr("cx",0).attr("cy",0).attr("r",c).appendTo(b),this.nameGroup_=e("g").attr("transform","translate(0,0)").appendTo(b),this.displayName_=e("text").attr("x",0).attr("y",d),this.nameBox_=e("rect").addClass("name-box"),this.nameGroup_.append(this.nameBox_).append(this.displayName_),this.addressGroup_=e("g").attr("transform","translate(0,30)").hide().appendTo(b),this.addressBox_=e("rect").addClass("address-box").appendTo(this.addressGroup_),this.addressText_=e("text").addClass("address-box").attr("x",0).attr("y",d).text("?").appendTo(this.addressGroup_),this.useBackgroundAnimation_?(this.snapToScale(0),this.tweenToScale(.5,800,g.easeOutElastic)):this.snapToScale(.5)};m.inherits(f),m.prototype.setIsLocalNode=function(){this.isLocalNode=!0,this.getRoot().addClass("local-node")},m.prototype.setName=function(a){this.displayName_.text(a),this.resizeNameBox_()},m.prototype.resizeNameBox_=function(){this.resizeRectToText_(this.nameBox_,this.displayName_)},m.prototype.resizeAddressBox_=function(){this.resizeRectToText_(this.addressBox_,this.addressText_)},m.prototype.resizeRectToText_=function(a,b){try{var c=b[0].getBBox(),d=Math.max(j,c.width+k),e=c.height+l,f=d/2,g=e/2;a.attr("x",-f).attr("y",-g).attr("rx",g).attr("ry",g).attr("width",d).attr("height",e)}catch(h){}},m.prototype.kill=function(){m.superPrototype.kill.call(this),this.stopAllAnimation(),this.tweenToScale(0,200,g.easeInQuad)},m.prototype.tick=function(a){if(m.superPrototype.tick.call(this,a),this.useBackgroundAnimation_&&!this.isForeground&&0===this.tweens_.length){var b=300*Math.random()-150,c=300*Math.random()-150;this.tweenToPosition(b,c,2e4,g.easeInOutQuad)}},m.prototype.render=function(a){m.superPrototype.render.call(this,a),this.isForeground&&this.tweens_.length>0&&(this.resizeNameBox_(),this.resizeAddressBox_())},m.prototype.onDepthChange=function(a){m.superPrototype.onDepthChange.call(this,a),this.isDying()||this.isDead()||(this.tweens_.length=0,a?this.tweenToScale(1,600,g.easeOutElastic):this.useBackgroundAnimation_?this.tweenToScale(.5,600,g.easeOutElastic):this.snapToScale(.5))},m.prototype.setAddress=function(a){this.address_=a,this.updateAddressDisplay()},m.prototype.setDnsMode=function(a){this.dnsMode_=a,this.updateAddressDisplay()},m.prototype.setIsDnsNode=function(a){this.isDnsNode=a,this.updateAddressDisplay()},m.prototype.updateAddressDisplay=function(){var a=i.getLevelConfig();return void 0===this.address_||a.broadcastMode||this.isRouter?void this.addressGroup_.hide():(this.addressGroup_.show(),this.dnsMode_===h.NONE?this.addressText_.text(void 0!==this.address_?this.address_:"?"):this.addressText_.text(this.isLocalNode||this.isDnsNode?this.address_:"?"),void this.resizeAddressBox_())}},{"../utils":324,"./NetSimConstants":194,"./NetSimGlobals":206,"./NetSimUtils":249,"./NetSimVizElement":253,"./tweens":269}],253:[function(a,b,c){"use strict";var d=a("./NetSimUtils").jQuerySvgElement,e=a("./tweens"),f=b.exports=function(){this.posX=0,this.posY=0,this.scale=1,this.isForeground=!1,this.rootGroup_=d("g"),this.tweens_=[],this.isDead_=!1};f.prototype.getRoot=function(){return this.rootGroup_},f.prototype.kill=function(){this.isDead_=!0},f.prototype.isDead=function(){return this.isDead_&&0===this.tweens_.length},f.prototype.isDying=function(){return this.isDead_&&this.tweens_.length>0},f.prototype.tick=function(){},f.prototype.render=function(a){if(a){var b=this.posX,c=this.posY,d=this.scale;if(this.tweens_.forEach(function(b){b.tick(a)}),this.tweens_=this.tweens_.filter(function(a){return!a.isFinished}),b!==this.posX||c!==this.posY||d!==this.scale){var e="translate("+this.posX+" "+this.posY+") scale("+this.scale+")";this.rootGroup_.attr("transform",e)}}},f.prototype.onDepthChange=function(a){this.isForeground=a},f.prototype.stopAllAnimation=function(){this.tweens_.length=0},f.prototype.tweenToPosition=function(a,b,c,d){this.isDying()||this.isDead()||(this.removeAllTweensOnProperties(["posX","posY"]),c>0?(this.tweens_.push(new e.TweenValueTo(this,"posX",a,c,d)),this.tweens_.push(new e.TweenValueTo(this,"posY",b,c,d))):(this.posX=a,this.posY=b))},f.prototype.snapToPosition=function(a,b){this.tweenToPosition(a,b,0)},f.prototype.tweenToScale=function(a,b,c){this.removeAllTweensOnProperty("scale"),b>0?this.tweens_.push(new e.TweenValueTo(this,"scale",a,b,c)):this.scale=a},f.prototype.doAfterDelay=function(a,b){a>0?this.tweens_.push(new e.DoAfterDelay(this,a,b)):b()},f.prototype.removeAllTweensOnProperty=function(a){this.removeAllTweensOnProperties([a])},f.prototype.removeAllTweensOnProperties=function(a){this.tweens_=this.tweens_.filter(function(b){var c=b.target===this,d=a.some(function(a){return b.propertyName===a});return!(c&&d)},this)},f.prototype.snapToScale=function(a){this.tweenToScale(a,0)}},{"./NetSimUtils":249,"./tweens":269}],269:[function(a,b,c){"use strict";var d=a("../utils").valueOr,e=600;c.easeOutElastic=function(a,b,c,d){var e,f,g;return e=1.70158,f=0,g=c,0===a?b:1==(a/=d)?b+c:(f||(f=.3*d),g<Math.abs(c)?(g=c,e=f/4):e=f/(2*Math.PI)*Math.asin(c/g),g*Math.pow(2,-10*a)*Math.sin((a*d-e)*(2*Math.PI)/f)+c+b)},c.easeInQuad=function(a,b,c,d){return c*(a/=d)*a+b},c.easeOutQuad=function(a,b,c,d){return-c*(a/=d)*(a-2)+b},c.easeInOutQuad=function(a,b,c,d){return(a/=d/2)<1?c/2*a*a+b:-c/2*(--a*(a-2)-1)+b},c.linear=function(a,b,c,d){return c*(a/d)+b},c.TweenValueTo=function(a,b,f,g,h){this.isFinished=!1,this.startTime_=void 0,this.target=a,this.propertyName=b,this.tweenFunction_=d(h,c.linear),this.startValue_=a[b],this.deltaValue_=f-this.startValue_,this.duration_=d(g,e)},c.TweenValueTo.prototype.tick=function(a){void 0===this.startTime_&&(this.startTime_=a.time);var b=a.time-this.startTime_;0!==this.deltaValue_&&(this.target[this.propertyName]=this.tweenFunction_(b,this.startValue_,this.deltaValue_,this.duration_)),b>=this.duration_&&(this.target[this.propertyName]=this.startValue_+this.deltaValue_,this.isFinished=!0)},c.DoAfterDelay=function(a,b,c){this.isFinished=!1,this.startTime_=void 0,this.target=a,this.propertyName=null,this.duration_=b,this.callback_=c},c.DoAfterDelay.prototype.tick=function(a){void 0===this.startTime_&&(this.startTime_=a.time);var b=a.time-this.startTime_;b>=this.duration_&&(this.callback_(),this.isFinished=!0)}},{"../utils":324}],250:[function(require,module,exports){module.exports=function(){var t=function anonymous(locals,filters,escape){escape=escape||function(a){return String(a).replace(/&(?!\w+;)/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")};var buf=[];with(locals||{})!function(){buf.push(""),buf.push('\n<svg version="1.1" width="298" height="298" xmlns="http://www.w3.org/2000/svg">\n\n  '),showBackground&&buf.push('\n    <filter id="backgroundBlur">\n      <feGaussianBlur in="SourceGraphic" stdDeviation="5" />\n      <feComponentTransfer>\n        <feFuncA slope="0.5" type="linear"></feFuncA>\n      </feComponentTransfer>\n    </filter>\n  '),buf.push('\n\n  <g id="centered-group" transform="translate(150,150)">\n    <g id="background-group"\n       '),showBackground?buf.push('\n         filter="url(#backgroundBlur)"\n       '):buf.push('\n         visibility="hidden"\n       '),buf.push('\n        ></g>\n\n    <g id="foreground-group"></g>\n  </g>\n</svg>\n')}();return buf.join("")};return function(a){return t(a,require("ejs").filters)}}()},{ejs:500}],248:[function(a,b,c){"use strict";var d=a("./NetSimTabsComponent.html.ejs"),e=a("./NetSimRouterTab"),f=a("./NetSimMyDeviceTab"),g=a("./NetSimDnsTab"),h=a("./NetSimConstants").NetSimTabType,i=a("./NetSimUtils").shouldShowTab,j=a("./NetSimGlobals"),k=b.exports=function(a,b,c){this.rootDiv_=a,this.runLoop_=b,this.chunkSizeSliderChangeCallback_=c.chunkSizeSliderChangeCallback,this.myDeviceBitRateChangeCallback_=c.myDeviceBitRateChangeCallback,this.encodingChangeCallback_=c.encodingChangeCallback,this.routerBandwidthSliderChangeCallback_=c.routerBandwidthSliderChangeCallback,this.routerBandwidthSliderStopCallback_=c.routerBandwidthSliderStopCallback,this.routerMemorySliderChangeCallback_=c.routerMemorySliderChangeCallback,this.routerMemorySliderStopCallback_=c.routerMemorySliderStopCallback,this.dnsModeChangeCallback_=c.dnsModeChangeCallback,this.becomeDnsCallback_=c.becomeDnsCallback,this.routerTab_=null,this.myDeviceTab_=null,this.dnsTab_=null,this.render()};k.prototype.attachToRunLoop=function(a){this.routerTab_&&this.routerTab_.attachToRunLoop(a)},k.prototype.render=function(){var a=j.getLevelConfig(),b=$("#reference_area").first().clone(!0),c=$("#bubble").first().detach(),k=d({level:a}),l=$(k);if(this.rootDiv_.html(l),this.rootDiv_.find(".netsim-tabs").tabs({active:a.defaultTabIndex}),i(a,h.INSTRUCTIONS)&&b){var m=this.rootDiv_.find("#tab_instructions button").first();c.insertBefore(m),b.insertBefore(m),this.rootDiv_.find(".submitButton").click(function(a){$(a.target).is(":disabled")||j.completeLevelAndContinue()})}i(a,h.MY_DEVICE)&&(this.myDeviceTab_=new f(this.rootDiv_.find("#tab_my_device"),this.runLoop_,{chunkSizeChangeCallback:this.chunkSizeSliderChangeCallback_,bitRateChangeCallback:this.myDeviceBitRateChangeCallback_,encodingChangeCallback:this.encodingChangeCallback_})),i(a,h.ROUTER)&&(this.routerTab_=new e(this.rootDiv_.find("#tab_router"),{bandwidthSliderChangeCallback:this.routerBandwidthSliderChangeCallback_,bandwidthSliderStopCallback:this.routerBandwidthSliderStopCallback_,memorySliderChangeCallback:this.routerMemorySliderChangeCallback_,memorySliderStopCallback:this.routerMemorySliderStopCallback_})),i(a,h.DNS)&&(this.dnsTab_=new g(this.rootDiv_.find("#tab_dns"),this.dnsModeChangeCallback_,this.becomeDnsCallback_))},k.prototype.setChunkSize=function(a){this.myDeviceTab_&&this.myDeviceTab_.setChunkSize(a)},k.prototype.setMyDeviceBitRate=function(a){this.myDeviceTab_&&this.myDeviceTab_.setBitRate(a)},k.prototype.setEncodings=function(a){this.myDeviceTab_&&this.myDeviceTab_.setEncodings(a)},k.prototype.setRouterCreationTime=function(a){this.routerTab_&&this.routerTab_.setRouterCreationTime(a)},k.prototype.setRouterBandwidth=function(a){this.routerTab_&&this.routerTab_.setBandwidth(a)},k.prototype.setRouterMemory=function(a){this.routerTab_&&this.routerTab_.setMemory(a)},k.prototype.setRouterQueuedPacketCount=function(a){this.routerTab_&&this.routerTab_.setRouterQueuedPacketCount(a)},k.prototype.setRouterMemoryInUse=function(a){this.routerTab_&&this.routerTab_.setMemoryInUse(a)},k.prototype.setRouterDataRate=function(a){this.routerTab_&&this.routerTab_.setDataRate(a)},k.prototype.setDnsMode=function(a){this.dnsTab_&&this.dnsTab_.setDnsMode(a)},k.prototype.setIsDnsNode=function(a){this.dnsTab_&&this.dnsTab_.setIsDnsNode(a)},k.prototype.setDnsTableContents=function(a){this.dnsTab_&&this.dnsTab_.setDnsTableContents(a)},k.prototype.setRouterLogData=function(a){this.routerTab_&&this.routerTab_.setRouterLogData(a)}},{"./NetSimConstants":194,"./NetSimDnsTab":200,"./NetSimGlobals":206,"./NetSimMyDeviceTab":219,"./NetSimRouterTab":236,"./NetSimTabsComponent.html.ejs":247,"./NetSimUtils":249}],247:[function(require,module,exports){module.exports=function(){var t=function anonymous(locals,filters,escape){escape=escape||function(a){return String(a).replace(/&(?!\w+;)/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")};var buf=[];with(locals||{})!function(){buf.push("");var a=require("./locale"),b=require("./NetSimUtils").shouldShowTab,c=require("./NetSimConstants").NetSimTabType,d=b(level,c.INSTRUCTIONS),e=b(level,c.MY_DEVICE),f=b(level,c.ROUTER),g=b(level,c.DNS);buf.push('\n<div class="netsim-tabs">\n  <ul>\n    '),d&&buf.push('\n    <li><a href="#tab_instructions">',escape(a.instructions()),"</a></li>\n    "),buf.push("\n    "),e&&buf.push('\n      <li><a href="#tab_my_device">',escape(a.myDevice()),"</a></li>\n    "),buf.push("\n    "),f&&buf.push('\n      <li><a href="#tab_router">',escape(a.router()),"</a></li>\n    "),buf.push("\n    "),g&&buf.push('\n      <li><a href="#tab_dns">',escape(a.dns()),"</a></li>\n    "),buf.push("\n  </ul>\n  "),d&&buf.push('\n    <div id="tab_instructions">\n      <button id="finished" class="btn btn-primary submitButton">',escape(a.continueButton()),"</button>\n    </div>\n  "),buf.push("\n  "),e&&buf.push('\n    <div id="tab_my_device"></div>\n  '),buf.push("\n  "),f&&buf.push('\n    <div id="tab_router"></div>\n  '),buf.push("\n  "),g&&buf.push('\n    <div id="tab_dns"></div>\n  '),buf.push("\n</div>")}();return buf.join("")};return function(a){return t(a,require("ejs").filters)}}()},{"./NetSimConstants":194,"./NetSimUtils":249,"./locale":264,ejs:500}],245:[function(a,b,c){"use strict";a("../utils");var d=a("./NetSimStatusPanel.html.ejs"),e=a("./NetSimPanel.js"),f=b.exports=function(a,b){this.disconnectCallback_=b.disconnectCallback,e.call(this,a,{className:"netsim_status_panel",panelTitle:"Status",userToggleable:!1,beginMinimized:!0})};f.inherits(e),f.prototype.render=function(a){a=a||{},this.setPanelTitle(a.statusString),f.superPrototype.render.call(this);var b=$(d({remoteNodeName:a.remoteNodeName,myHostname:a.myHostname,myAddress:a.myAddress,shareLink:a.shareLink}));this.getBody().html(b),a.isConnected&&this.addButton("Disconnect",this.disconnectCallback_)}},{"../utils":324,"./NetSimPanel.js":226,"./NetSimStatusPanel.html.ejs":244}],244:[function(require,module,exports){module.exports=function(){var t=function anonymous(locals,filters,escape){escape=escape||function(a){return String(a).replace(/&(?!\w+;)/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")};var buf=[];with(locals||{})!function(){buf.push("");var a=require("./locale");buf.push('\n<div class="content-wrap">\n  '),remoteNodeName&&buf.push("\n  <p>Connected to ",escape(remoteNodeName),"</p>\n  "),buf.push("\n\n  "),myHostname&&buf.push("\n  <p>My hostname: ",escape(myHostname),"</p>\n  "),buf.push("\n\n  "),myAddress&&buf.push("\n  <p>My address: ",escape(myAddress),"</p>\n  "),buf.push("\n\n  "),shareLink&&buf.push('\n  <p><a href="',escape(shareLink),'">',escape(a.shareThisNetwork()),"</a></p>\n  "),buf.push("\n</div>\n")}();return buf.join("")};return function(a){return t(a,require("ejs").filters)}}()},{"./locale":264,ejs:500}],239:[function(a,b,c){"use strict";var d=a("./NetSimTable"),e=a("./PubSubService"),f=b.exports=function(a,b){this.id=a,this.pubSub=e.create(b);var c=this.pubSub.subscribe(a);c.subscribe("all_tables",f.prototype.onPubSubEvent_.bind(this)),this.nodeTable=new d(c,a,"n"),this.wireTable=new d(c,a,"w"),this.messageTable=new d(c,a,"m"),this.logTable=new d(c,a,"l",{useIncrementalRefresh:!0}),this.logTable.unsubscribe()};f.prototype.tick=function(a){this.nodeTable.tick(a),this.wireTable.tick(a),this.messageTable.tick(a),this.logTable.tick(a)},f.prototype.resetEverything=function(a){$.ajax({url:"/v3/netsim/"+this.id,type:"delete",contentType:"application/json; charset=utf-8",dataType:"json"}).done(function(){a(null,!0)}).fail(function(b,c,d){var e=new Error("status: "+c+"; error: "+d);a(e,!1)})},f.prototype.onPubSubEvent_=function(){this.nodeTable.refresh()}},{"./NetSimTable":246,"./PubSubService":261}],261:[function(a,b,c){"use strict";var d=a("./PubSubChannel"),e=c;e.create=function(a){return a.usePusher?new e.PusherService(a.pusherApplicationKey):new e.NullService},e.NullService=function(){},e.NullService.prototype.subscribe=function(a){return new d.NullChannel},e.NullService.prototype.unsubscribe=function(a){},e.PusherService=function(a){this.api_=new Pusher(a,{encrypted:!0})},e.PusherService.prototype.subscribe=function(a){return new d.PusherChannel(this.api_.subscribe(a))},e.PusherService.prototype.unsubscribe=function(a){this.api_.unsubscribe(a)}},{"./PubSubChannel":260}],260:[function(a,b,c){"use strict";var d=c;d.NullChannel=function(){},d.NullChannel.prototype.subscribe=function(a,b){},d.NullChannel.prototype.unsubscribe=function(a,b){},d.PusherChannel=function(a){this.pusherChannel_=a},d.PusherChannel.prototype.subscribe=function(a,b){this.pusherChannel_.bind(a,b)},d.PusherChannel.prototype.unsubscribe=function(a,b){this.pusherChannel_.unbind(a,b)}},{}],246:[function(a,b,c){"use strict";var d=a("../utils").getLodash(),e=a("../ObservableEvent"),f=a("./NetSimApi"),g=a("./NetSimGlobals"),h=a("./ArgumentUtils"),i=1e4,j=250,k=200,l=2500,m=b.exports=function(a,b,c,d){h.validateRequired(a,"channel"),h.validateRequired(b,"shardID",h.isString),h.validateRequired(c,"tableName",h.isString),d=h.extendOptionsObject(d),this.tableName_=c,this.channel_=a,this.subscribe(),this.channelCallback_=void 0,this.api_=f.makeTableApi(b,c),this.tableChange=new e,this.cache_={},this.latestRowID_=0,this.lastRefreshTime_=0,this.useIncrementalRefresh_=d.get("useIncrementalRefresh",h.isBoolean,!1),this.minimumDelayBeforeRefresh_=d.get("minimumDelayBeforeRefresh",h.isPositiveNoninfiniteNumber,j),this.maximumJitterDelay_=d.get("maximumJitterDelay",h.isPositiveNoninfiniteNumber,k),this.minimumDelayBetweenRefreshes_=d.get("minimumDelayBetweenRefreshes",h.isPositiveNoninfiniteNumber,l),this.pollingInterval_=i,this.refreshTable_=this.makeThrottledRefresh_()};m.prototype.getTableName=function(){return this.tableName_},m.prototype.subscribe=function(){this.channelCallback_=m.prototype.onPubSubEvent_.bind(this),this.channel_.subscribe(this.tableName_,this.channelCallback_)},m.prototype.unsubscribe=function(){this.channel_.unsubscribe(this.tableName_,this.channelCallback_),this.channelCallback=void 0},m.prototype.refresh=function(a){a=a||function(){};var b=$.Deferred(),c=this.useIncrementalRefresh_?this.api_.allRowsFromID.bind(this.api_,this.latestRowID_+1):this.api_.allRows.bind(this.api_),d=this.useIncrementalRefresh_?this.incrementalCacheUpdate_.bind(this):this.fullCacheUpdate_.bind(this),e=function(c,e){c?(a(c,e),b.reject(c)):(d(e),a(c,e),b.resolve())};if(0===this.maximumJitterDelay_)c(e);else{var f=g.randomIntInRange(0,this.maximumJitterDelay_);setTimeout(c.bind(this,e),f)}return b.promise()},m.prototype.makeThrottledRefresh_=function(){var a=d.throttle(this.refresh.bind(this),this.minimumDelayBetweenRefreshes_);return d.debounce(a,this.minimumDelayBeforeRefresh_,{maxWait:this.minimumDelayBeforeRefresh_})},m.prototype.readAll=function(){return this.arrayFromCache_()},m.prototype.readAllFromID=function(a){return this.arrayFromCache_(function(b){return b>=a})},m.prototype.read=function(a,b){this.api_.fetchRow(a,function(c,d){null===c&&this.updateCacheRow_(a,d),b(c,d)}.bind(this))},m.prototype.create=function(a,b){this.api_.createRow(a,function(a,c){null===a&&this.addRowToCache_(c),b(a,c)}.bind(this))},m.prototype.multiCreate=function(a,b){this.api_.createRow(a,function(a,c){null===a&&c.forEach(function(a){this.addRowToCache_(a)},this),b(a,c)}.bind(this))},m.prototype.update=function(a,b,c){this.api_.updateRow(a,b,function(d,e){null===d&&this.updateCacheRow_(a,b),c(d,e)}.bind(this))},m.prototype["delete"]=function(a,b){this.deleteMany([a],b)},m.prototype.deleteMany=function(a,b){this.api_.deleteRows(a,function(c,d){null===c&&this.removeRowsFromCache_(a),b(c,d)}.bind(this))},m.prototype.synchronousDelete=function(a){var b=!1;this.api_.deleteRows([a],function(b){if(b)throw b;this.removeRowsFromCache_([a])}.bind(this),b)},m.prototype.fullCacheUpdate_=function(a){var b=0,c=a.reduce(function(a,c){return a[c.id]=c,c.id>b&&(b=c.id),a},{});d.isEqual(this.cache_,c)||(this.cache_=c,this.latestRowID_=b,this.tableChange.notifyObservers()),this.lastRefreshTime_=Date.now()},m.prototype.incrementalCacheUpdate_=function(a){if(a.length>0){var b=0;a.forEach(function(a){this.cache_[a.id]=a,b=Math.max(b,a.id)},this),this.latestRowID_=b,this.tableChange.notifyObservers()}this.lastRefreshTime_=Date.now()},m.prototype.addRowToCache_=function(a){this.cache_[a.id]=a,this.tableChange.notifyObservers()},m.prototype.removeRowsFromCache_=function(a){var b=!1;a.forEach(function(a){void 0!==this.cache_[a]&&(delete this.cache_[a],b=!0)},this),b&&this.tableChange.notifyObservers()},m.prototype.updateCacheRow_=function(a,b){var c=this.cache_[a],e=b;e.id=a,e.uuid=c.uuid,d.isEqual(c,e)||(this.cache_[a]=e,this.tableChange.notifyObservers())},m.prototype.arrayFromCache_=function(a){a=a||function(){return!0};var b=[];for(var c in this.cache_)this.cache_.hasOwnProperty(c)&&a(c,this.cache_[c])&&b.push(this.cache_[c]);return b},m.prototype.setPollingInterval=function(a){this.pollingInterval_=a},m.prototype.setMinimumDelayBetweenRefreshes=function(a){this.minimumDelayBetweenRefreshes_=a,this.refreshTable_=this.makeThrottledRefresh_()},m.prototype.setMinimumDelayBeforeRefresh=function(a){this.minimumDelayBeforeRefresh_=a,this.refreshTable_=this.makeThrottledRefresh_()},m.prototype.setMaximumJitterDelay=function(a){this.maximumJitterDelay_=a},m.prototype.tick=function(){var a=Date.now();a-this.lastRefreshTime_>=this.pollingInterval_&&(this.lastRefreshTime_=a,this.refreshTable_())},m.prototype.onPubSubEvent_=function(){this.refreshTable_()}},{"../ObservableEvent":2,"../utils":324,"./ArgumentUtils":182,"./NetSimApi":187,"./NetSimGlobals":206}],238:[function(a,b,c){"use strict";var d=a("../utils"),e=a("./locale"),f=a("./NetSimSendPanel.html.ejs"),g=a("./NetSimPanel"),h=a("./NetSimPacketEditor"),i=a("./NetSimPacketSizeControl"),j=a("./Packet"),k=a("./DataConverters"),l=a("./NetSimConstants"),m=a("./NetSimGlobals"),n=l.EncodingType,o=l.MessageGranularity,p=l.BITS_PER_BYTE,q=k.binaryToAB,r=a("./NetSimLogger").getSingleton(),s=b.exports=function(a,b,c){this.levelConfig_=b,this.packetSpec_=b.clientInitialPacketHeader,this.netsim_=c,this.packets_=[],this.lastPacketToAddress_="0",this.fromAddress_=0,this.maxPacketSize_=b.defaultPacketSizeLimit,this.chunkSize_=p,this.bitRate_=1/0,this.enabledEncodings_=b.defaultEnabledEncodings,this.packetsDiv_=null,this.packetSizeControl_=null,this.isPlayingSendAnimation_=!1;var d=b.messageGranularity===o.PACKETS?e.sendAMessage():e.sendBits();this.netsim_.runLoop_.tick.register(this.tick.bind(this)),g.call(this,a,{className:"netsim-send-panel",panelTitle:d})};s.inherits(g),s.prototype.beginSendingPackets_=function(){this.isPlayingSendAnimation_=!0,this.disableEverything()},s.prototype.stopSendingPackets_=function(){this.resetPackets_(),this.enableEverything(),this.isPlayingSendAnimation_=!1},s.prototype.tick=function(a){if(this.isPlayingSendAnimation_){if(0===this.packets_.length)return void this.stopSendingPackets_();var b=this.packets_[0];b.isSending()?b.tick(a):(this.lastPacketToAddress_=b.toAddress,b.beginSending(this.netsim_.myNode))}},s.prototype.render=function(){s.superPrototype.render.call(this);var a=$(f({level:this.levelConfig_}));if(this.getBody().html(a),this.levelConfig_.showPacketSizeControl){var b=m.getLevelConfig(),c=new j.Encoder(b.addressFormat,b.packetCountBitWidth,this.packetSpec_);this.packetSizeControl_=new i(this.rootDiv_.find(".packet-size"),this.packetSizeChangeCallback_.bind(this),{minimumPacketSize:c.getHeaderLength(),sliderStepValue:1}),this.packetSizeControl_.setValue(this.maxPacketSize_)}this.packetsDiv_=this.getBody().find(".send-panel-packets"),this.getBody().find("#add-packet-button").click(this.onAddPacketButtonPress_.bind(this)),this.getBody().find("#send-button").click(this.onSendEventTriggered_.bind(this)),this.getBody().find("#set-wire-button").click(this.onSetWireButtonPress_.bind(this)),this.resetPackets_()},s.prototype.addPacket_=function(){var a=this.packets_.length+1;this.packets_.forEach(function(b){b.setPacketCount(a)});var b;b=this.packets_.length>0?this.packets_[this.packets_.length-1].toAddress:this.lastPacketToAddress_;var c=new h({messageGranularity:this.levelConfig_.messageGranularity,packetSpec:this.packetSpec_,toAddress:b,fromAddress:this.fromAddress_,packetIndex:a,packetCount:a,maxPacketSize:this.maxPacketSize_,chunkSize:this.chunkSize_,bitRate:this.bitRate_,enabledEncodings:this.enabledEncodings_,removePacketCallback:this.removePacket_.bind(this),contentChangeCallback:this.onContentChange_.bind(this),enterKeyPressedCallback:this.onSendEventTriggered_.bind(this)}),d=this.netsim_.updateLayout.bind(this.netsim_);c.getRoot().appendTo(this.packetsDiv_),c.getRoot().hide().slideDown("fast",function(){c.getFirstVisibleMessageBox().focus(),d()}),this.packets_.push(c)},s.prototype.removePacket_=function(a){var b=this.netsim_.updateLayout.bind(this.netsim_);if(a.getRoot().slideUp("fast",function(){$(this).remove(),b()}),this.packets_=this.packets_.filter(function(b){
return b!==a}),!this.isPlayingSendAnimation_)for(var c,d=this.packets_.length,e=0;d>e;e++)c=e+1,this.packets_[e].setPacketIndex(c),this.packets_[e].setPacketCount(d)},s.prototype.resetPackets_=function(){this.packetsDiv_.empty(),this.packets_.length=0,this.addPacket_()},s.prototype.onContentChange_=function(){var a=this.getNextBit_();void 0===a?(this.getSetWireButton().text(e.setWire()),this.conditionallyToggleSetWireButton()):(this.isEncodingEnabled_(n.A_AND_B)&&!this.isEncodingEnabled_(n.BINARY)&&(a=q(a)),this.getSetWireButton().text(e.setWireToValue({value:a})),this.conditionallyToggleSetWireButton())},s.prototype.isEncodingEnabled_=function(a){return this.enabledEncodings_.some(function(b){return b===a})},s.prototype.setFromAddress=function(a){this.fromAddress_=d.valueOr(a,0),this.packets_.forEach(function(a){a.setFromAddress(this.fromAddress_)}.bind(this))},s.prototype.onAddPacketButtonPress_=function(a){var b=$(a.target);if(!b.is("[disabled]")){this.addPacket_();var c=this.getBody().find(".send-panel-packets");c.animate({scrollTop:c[0].scrollHeight},"fast")}},s.prototype.onSendEventTriggered_=function(a){var b=$(a.target);b.is("[disabled]")||this.beginSendingPackets_()},s.prototype.onSetWireButtonPress_=function(a){var b=$(a.target);if(!b.is("[disabled]")){var c=this.netsim_.myNode;if(!c)throw new Error("Tried to set wire state when no connection is established.");var d=this.getNextBit_();if(void 0===d)throw new Error("Tried to set wire state when no bit is queued.");this.disableEverything(),this.netsim_.animateSetWireState(d),c.setSimplexWireState(d,function(a){return a?void r.warn(a.message):(this.consumeFirstBit(),this.enableEverything(),void this.conditionallyToggleSetWireButton())}.bind(this))}},s.prototype.getNextBit_=function(){return this.packets_.length>0?this.packets_[0].getFirstBit():void 0},s.prototype.disableEverything=function(){this.getBody().find("input, textarea").prop("disabled",!0),this.getBody().find(".netsim-button").attr("disabled","disabled"),this.packetSizeControl_&&this.packetSizeControl_.disable()},s.prototype.getSetWireButton=function(){return this.getBody().find("#set-wire-button")},s.prototype.conditionallyToggleSetWireButton=function(){var a=this.getSetWireButton();return void 0===this.getNextBit_()?a.attr("disabled","disabled"):a.removeAttr("disabled"),a},s.prototype.enableEverything=function(){this.getBody().find("input, textarea").prop("disabled",!1),this.getBody().find(".netsim-button").removeAttr("disabled"),this.packetSizeControl_&&this.packetSizeControl_.enable()},s.prototype.consumeFirstBit=function(){this.packets_.length>0&&(this.packets_[0].consumeFirstBit(),""===this.packets_[0].getPacketBinary()&&this.packets_.length>1&&this.removePacket_(this.packets_[0]))},s.prototype.setEncodings=function(a){this.enabledEncodings_=a,this.packets_.forEach(function(b){b.setEncodings(a)}),this.onContentChange_()},s.prototype.setChunkSize=function(a){this.chunkSize_=a,this.packets_.forEach(function(b){b.setChunkSize(a)})},s.prototype.setBitRate=function(a){this.bitRate_=a,this.packets_.forEach(function(b){b.setBitRate(a)})},s.prototype.packetSizeChangeCallback_=function(a){this.maxPacketSize_=a,this.packets_.forEach(function(b){b.setMaxPacketSize(a)})},s.prototype.onMinimizerClick_=function(){s.superPrototype.onMinimizerClick_.call(this),this.netsim_.updateLayout()}},{"../utils":324,"./DataConverters":184,"./NetSimConstants":194,"./NetSimGlobals":206,"./NetSimLogger":213,"./NetSimPacketEditor":223,"./NetSimPacketSizeControl":224,"./NetSimPanel":226,"./NetSimSendPanel.html.ejs":237,"./Packet":259,"./locale":264}],237:[function(require,module,exports){module.exports=function(){var t=function anonymous(locals,filters,escape){escape=escape||function(a){return String(a).replace(/&(?!\w+;)/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")};var buf=[];with(locals||{})!function(){buf.push("");var a=require("./locale"),b=require("./NetSimConstants").MessageGranularity;buf.push('\n<div class="send-panel-packets"></div>\n<div class="panel-footer">\n  <div class="right-side-controls">\n    '),level.showAddPacketButton&&buf.push('\n      <span class="netsim-button secondary large-button" id="add-packet-button">',escape(a.addPacket()),"</span>\n    "),buf.push("\n    "),level.messageGranularity===b.PACKETS?buf.push('\n      <span class="netsim-button large-button" id="send-button">',escape(a.send()),"</span>\n    "):level.messageGranularity===b.BITS&&buf.push('\n      <span class="netsim-button large-button" id="set-wire-button">',escape(a.setWire()),"</span>\n    "),buf.push('\n  </div>\n  <div class="packet-size"></div>\n</div>\n')}();return buf.join("")};return function(a){return t(a,require("ejs").filters)}}()},{"./NetSimConstants":194,"./locale":264,ejs:500}],236:[function(a,b,c){"use strict";var d=a("./NetSimRouterTab.html.ejs"),e=a("./NetSimBandwidthControl"),f=a("./NetSimMemoryControl"),g=a("./NetSimRouterStatsTable"),h=a("./NetSimGlobals"),i=b.exports=function(a,b){this.rootDiv_=a,this.bandwidthSliderChangeCallback_=b.bandwidthSliderChangeCallback,this.bandwidthSliderStopCallback_=b.bandwidthSliderStopCallback,this.memorySliderChangeCallback_=b.memorySliderChangeCallback,this.memorySliderStopCallback_=b.memorySliderStopCallback,this.routerStatsTable_=null,this.bandwidthControl_=null,this.memoryControl_=null,this.render()};i.prototype.attachToRunLoop=function(a){this.routerStatsTable_&&this.routerStatsTable_.attachToRunLoop(a)},i.prototype.render=function(){var a=h.getLevelConfig(),b=$(d({level:a}));this.rootDiv_.html(b),this.routerStatsTable_=new g(this.rootDiv_.find(".router-stats")),a.showRouterBandwidthControl&&(this.bandwidthControl_=new e(this.rootDiv_.find(".bandwidth-control"),this.bandwidthSliderChangeCallback_,this.bandwidthSliderStopCallback_)),a.showRouterMemoryControl&&(this.memoryControl_=new f(this.rootDiv_.find(".memory-control"),this.memorySliderChangeCallback_,this.memorySliderStopCallback_))},i.prototype.setRouterLogData=function(a){this.routerStatsTable_&&this.routerStatsTable_.setRouterLogData(a)},i.prototype.setRouterCreationTime=function(a){this.routerStatsTable_&&this.routerStatsTable_.setRouterCreationTime(a)},i.prototype.setBandwidth=function(a){this.bandwidthControl_&&this.bandwidthControl_.setValue(a),this.routerStatsTable_&&this.routerStatsTable_.setBandwidth(a)},i.prototype.setMemory=function(a){this.memoryControl_&&this.memoryControl_.setValue(a),this.routerStatsTable_&&this.routerStatsTable_.setTotalMemory(a)},i.prototype.setRouterQueuedPacketCount=function(a){this.routerStatsTable_&&this.routerStatsTable_.setRouterQueuedPacketCount(a)},i.prototype.setMemoryInUse=function(a){this.routerStatsTable_&&this.routerStatsTable_.setMemoryInUse(a)},i.prototype.setDataRate=function(a){this.routerStatsTable_&&this.routerStatsTable_.setDataRate(a)}},{"./NetSimBandwidthControl":188,"./NetSimGlobals":206,"./NetSimMemoryControl":214,"./NetSimRouterStatsTable":234,"./NetSimRouterTab.html.ejs":235}],235:[function(require,module,exports){module.exports=function(){var t=function anonymous(locals,filters,escape){escape=escape||function(a){return String(a).replace(/&(?!\w+;)/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")};var buf=[];with(locals||{})!function(){buf.push("");var a=require("./locale");buf.push('\n<div class="netsim-router-tab">\n  <h1>',escape(a.routerTab_stats()),'</h1>\n  <div class="router-stats"></div>\n  '),level.showRouterBandwidthControl&&buf.push("\n    <h1>",escape(a.routerTab_bandwidth()),'</h1>\n    <div class="bandwidth-control"></div>\n  '),buf.push("\n  "),level.showRouterMemoryControl&&buf.push("\n    <h1>",escape(a.routerTab_memory()),'</h1>\n    <div class="memory-control"></div>\n  '),buf.push("\n  <h1>",escape(a.routerTab_logs()),'</h1>\n  <span class="secondary netsim-button large-button" id="show-router-log-modal-two" data-toggle="modal" data-target="#router-log-modal">',escape(a.logBrowserButton()),"</span>\n</div>\n")}();return buf.join("")};return function(a){return t(a,require("ejs").filters)}}()},{"./locale":264,ejs:500}],234:[function(a,b,c){"use strict";var d=a("./NetSimRouterStatsTable.html.ejs"),e=a("./NetSimUtils"),f=a("./NetSimLogEntry"),g=500,h=1e3,i=60,j=h*i,k=60,l=j*k,m=b.exports=function(a){this.rootDiv_=a,this.lastRenderTime_=null,this.routerCreationTime_=0,this.totalPackets_=0,this.successfulPackets_=0,this.totalData_=0,this.successfulData_=0,this.bandwidthLimit_=0,this.dataRate_=0,this.totalMemory_=0,this.queuedPackets_=0,this.usedMemory_=0,this.render({})};m.prototype.attachToRunLoop=function(a){a.render.register(this.render.bind(this))},m.prototype.render=function(a){if(this.needsRender(a)){var b=$(d({uptime:this.getLocalizedUptime(),queuedPackets:this.queuedPackets_,totalPackets:this.totalPackets_,successfulPackets:this.successfulPackets_,totalData:this.totalData_,successfulData:this.successfulData_,bandwidthLimit:this.bandwidthLimit_,dataRate:this.dataRate_,totalMemory:this.totalMemory_,usedMemory:this.usedMemory_}));this.rootDiv_.html(b),this.lastRenderTime_=a.time}},m.prototype.needsRender=function(a){return!this.lastRenderTime_||a.time-this.lastRenderTime_>g},m.prototype.setNeedsRender=function(){this.lastRenderTime_=null},m.prototype.getLocalizedUptime=function(){var a=0,b=0,c=0;if(this.routerCreationTime_>0){var d=Date.now()-this.routerCreationTime_;a=Math.floor(d/l),d-=a*l,b=Math.floor(d/j),d-=b*j,c=Math.floor(d/h)}return a.toString()+":"+e.zeroPadLeft(b,2)+":"+e.zeroPadLeft(c,2)};var n=function(a){return a.reduce(function(a,b){return a+b.binary.length},0)};m.prototype.setRouterLogData=function(a){var b=a.filter(function(a){return a.status===f.LogStatus.SUCCESS});this.totalPackets_=a.length,this.successfulPackets_=b.length,this.totalData_=n(a),this.successfulData_=n(b),this.setNeedsRender()},m.prototype.setRouterCreationTime=function(a){this.routerCreationTime_=a,this.setNeedsRender()},m.prototype.setBandwidth=function(a){this.bandwidthLimit_=a,this.setNeedsRender()},m.prototype.setTotalMemory=function(a){this.totalMemory_=a,this.setNeedsRender()},m.prototype.setRouterQueuedPacketCount=function(a){this.queuedPackets_=a,this.setNeedsRender()},m.prototype.setMemoryInUse=function(a){this.usedMemory_=a,this.setNeedsRender()},m.prototype.setDataRate=function(a){this.dataRate_=a,this.setNeedsRender()}},{"./NetSimLogEntry":209,"./NetSimRouterStatsTable.html.ejs":233,"./NetSimUtils":249}],233:[function(require,module,exports){module.exports=function(){var t=function anonymous(locals,filters,escape){escape=escape||function(a){return String(a).replace(/&(?!\w+;)/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")};var buf=[];with(locals||{})!function(){buf.push("");var a=require("../utils"),b=require("./NetSimUtils"),c=function(a,b){buf.push("\n      <tr>\n        <th nowrap>",escape(a),"</th>\n        <td>",escape(b),"</td>\n      </tr>\n    ")},d=function(b,d,e,f){f=a.valueOr(f,function(a){return a});var g=f(d)+" / "+f(e);e>0&&1/0>e&&(g+=" ("+Math.round(100*d/e)+"%)"),c(b,g)};buf.push("\n<table>\n  <tbody>\n    "),c("Uptime",uptime),buf.push("\n    "),c("Queued Packets",queuedPackets),buf.push("\n    "),d("Memory Use",usedMemory,totalMemory,b.bitsToLocalizedRoundedBytesize),buf.push("\n    "),d("Throughput",dataRate,bandwidthLimit,b.bitrateToLocalizedRoundedBitrate),buf.push("\n    "),d("Routed Packets",successfulPackets,totalPackets),buf.push("\n    "),d("Routed Data",successfulData,totalData,b.bitsToLocalizedRoundedBytesize),buf.push("\n  </tbody>\n</table>\n")}();return buf.join("")};return function(a){return t(a,require("ejs").filters)}}()},{"../utils":324,"./NetSimUtils":249,ejs:500}],231:[function(a,b,c){"use strict";function d(a,b){var c=a.eq(b);return{index:b,tableRow:c,logEntry:c.length>0?c.data(k):{}}}function e(a){var b=document.createElement("td");return b.style.whiteSpace="nowrap",b.innerText=a,b}var f=a("./locale"),g=a("./NetSimLogEntry"),h=a("./Packet"),i=a("./NetSimRouterLogModal.html.ejs"),j=a("./NetSimGlobals"),k="LogEntry",l=500,m=b.exports=function(a){this.rootDiv_=a,this.isVisible_=!1,this.rootDiv_.on("shown.bs.modal",this.onShow_.bind(this)),this.rootDiv_.on("hidden.bs.modal",this.onHide_.bind(this)),this.shard_=null,this.router_=null,this.logEntries_=[],this.latestRowID_=0,this.eventKeys_={},this.sortBy_="timestamp",this.sortDescending_=!0,this.isAllRouterLogMode_=this.canLogAllRouters_(),this.render()};m.prototype.getSortComparator_=function(){var a=m.sortKeyToSortValueGetterMap[this.sortBy_],b=this.sortDescending_?-1:1;return function(c,d){var e=a(c),f=a(d);return(f>e?-1:e>f?1:0)*b}},m.sortKeyToSortValueGetterMap={timestamp:function(a){return a.timestamp},"logged-by":function(a){var b=a.getOriginNode();return b?b.getDisplayName():a.nodeID.toString(10)},status:function(a){return a.getLocalizedStatus()},"from-address":function(a){return a.getHeaderField(h.HeaderType.FROM_ADDRESS)},"to-address":function(a){return a.getHeaderField(h.HeaderType.TO_ADDRESS)},"packet-info":function(a){return a.getLocalizedPacketInfo()},message:function(a){return a.getMessageAscii()}},m.prototype.onShow_=function(){this.shard_&&this.shard_.logTable.subscribe(),this.isVisible_=!0,this.render()},m.prototype.onHide_=function(){this.shard_&&this.shard_.logTable.unsubscribe(),this.isVisible_=!1},m.prototype.isVisible=function(){return this.isVisible_},m.prototype.render=function(){if(this.isVisible()){var a=$(i({isAllRouterLogMode:this.isAllRouterLogMode_,canToggleRouterLogMode:this.canToggleRouterLogMode_(),sortBy:this.sortBy_,sortDescending:this.sortDescending_}));this.rootDiv_.html(a),this.getRouterLogToggleButton().one("click",function(){this.toggleRouterLogMode_(),this.render()}.bind(this)),this.rootDiv_.find("th").click(function(a){this.onSortHeaderClick_($(a.target).attr("data-sort-key"))}.bind(this));var b=this.getSortedFilteredLogEntries(this.logEntries_).slice(0,l).map(this.makeTableRow_.bind(this));if(this.rootDiv_.find("tbody").append(b),b.length===l){var c=document.createElement("div");c.className="log-browser-limit-message",c.innerText=f.showingFirstXLogEntries({x:l}),this.rootDiv_.find("table").after(c)}}},m.prototype.renderNewLogEntries_=function(a){if(this.isVisible()&&0!==a.length){var b=this.rootDiv_.find("tbody"),c=b.find("tr");a=this.getSortedFilteredLogEntries(a);for(var e=$(a.map(this.makeTableRow_.bind(this))),f=d(c,0),g=d(e,0),h=this.getSortComparator_();g.index<e.length&&f.index<c.length;)h(g.logEntry,f.logEntry)<=0?(g.tableRow.insertBefore(f.tableRow),g=d(e,g.index+1)):f=d(c,f.index+1);b.append(e.slice(g.index))}},m.prototype.getSortedFilteredLogEntries=function(a){var b=this.isAllRouterLogMode_?a:a.filter(function(a){return a.nodeID===this.router_.entityID},this);return b.sort(this.getSortComparator_())},m.prototype.makeTableRow_=function(a){var b=j.getLevelConfig().routerExpectsPacketHeader,c=b.indexOf(h.HeaderType.TO_ADDRESS)>-1,d=b.indexOf(h.HeaderType.FROM_ADDRESS)>-1,f=b.indexOf(h.HeaderType.PACKET_INDEX)>-1&&b.indexOf(h.HeaderType.PACKET_COUNT)>-1,g=a.getOriginNode(),i=document.createElement("tr");$(i).data(k,a),i.appendChild(e(a.getTimeString())),i.appendChild(e(g?g.getDisplayName():a.nodeID)),i.appendChild(e(a.getLocalizedStatus())),d&&i.appendChild(e(a.getHeaderField(h.HeaderType.FROM_ADDRESS))),c&&i.appendChild(e(a.getHeaderField(h.HeaderType.TO_ADDRESS))),f&&i.appendChild(e(a.getLocalizedPacketInfo()));var l=e(a.getMessageAscii());return l.className="message",i.appendChild(l),i},m.prototype.onSortHeaderClick_=function(a){a&&(this.sortBy_===a?this.sortDescending_=!this.sortDescending_:(this.sortBy_=a,this.sortDescending_=!1),this.render())},m.prototype.setRouter=function(a){this.router_=a,this.isAllRouterLogMode_=this.canLogAllRouters_(),this.render()},m.prototype.canLogAllRouters_=function(){return j.getLevelConfig().connectedRouters||!this.hasLocalRouter_()},m.prototype.hasLocalRouter_=function(){return!!this.router_},m.prototype.canToggleRouterLogMode_=function(){return this.isAllRouterLogMode_?this.hasLocalRouter_():this.canLogAllRouters_()},m.prototype.toggleRouterLogMode_=function(){this.isAllRouterLogMode_=!this.isAllRouterLogMode_},m.prototype.getRouterLogToggleButton=function(){return this.rootDiv_.find("button#routerlog-toggle")},m.prototype.setShard=function(a){this.eventKeys_.registeredWithShard&&(this.eventKeys_.registeredWithShard.logTable.tableChange.unregister(this.eventKeys_.logTableChange),this.eventKeys_.registeredWithShard=null),a&&(this.eventKeys_.logTableChange=a.logTable.tableChange.register(this.onLogTableChange_.bind(this)),this.eventKeys_.registeredWithShard=a),this.logEntries_.length=0,this.latestRowID_=0,this.shard_=a},m.prototype.onLogTableChange_=function(){var a=j.getLevelConfig().routerExpectsPacketHeader,b=this.shard_.logTable.readAllFromID(this.latestRowID_+1),c=b.map(function(b){return this.latestRowID_=Math.max(b.id,this.latestRowID_),new g(this.shard_,b,a)},this);Array.prototype.push.apply(this.logEntries_,c),this.renderNewLogEntries_(c)}},{"./NetSimGlobals":206,"./NetSimLogEntry":209,"./NetSimRouterLogModal.html.ejs":230,"./Packet":259,"./locale":264}],230:[function(require,module,exports){module.exports=function(){var t=function anonymous(locals,filters,escape){escape=escape||function(a){return String(a).replace(/&(?!\w+;)/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")};var buf=[];with(locals||{})!function(){function a(a){return a===sortBy?sortDescending?'<i class="fa fa-sort-desc"></i>':'<i class="fa fa-sort-asc"></i>':""}buf.push("");var b=require("./Packet"),c=require("./locale"),d=require("./NetSimGlobals"),e=d.getLevelConfig().routerExpectsPacketHeader,f=e.indexOf(b.HeaderType.TO_ADDRESS)>-1,g=e.indexOf(b.HeaderType.FROM_ADDRESS)>-1,h=e.indexOf(b.HeaderType.PACKET_INDEX)>-1&&e.indexOf(b.HeaderType.PACKET_COUNT)>-1;buf.push('\n<div class="modal-dialog modal-lg">\n    <div class="modal-header">\n      <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>\n\n      '),canToggleRouterLogMode&&buf.push('\n        <button type="button" id="routerlog-toggle" class="pull-right btn btn-primary btn-mini">',escape(isAllRouterLogMode?c.logBrowserHeader_toggleMine():c.logBrowserHeader_toggleAll()),"</button>\n      "),buf.push("\n\n      "),isAllRouterLogMode?buf.push('\n        <h4 class="modal-title">',escape(c.logBrowserHeader_all()),"</h4>\n      "):buf.push('\n        <h4 class="modal-title">',escape(c.logBrowserHeader_mine()),"</h4>\n      "),buf.push('\n    </div>\n    <div class="modal-body">\n      <table>\n        <thead>\n          <tr>\n            <th nowrap data-sort-key="timestamp">',escape(c.time())," ",a("timestamp"),'</th>\n            <th nowrap data-sort-key="logged-by">',escape(c.loggedByNode())," ",a("logged-by"),'</th>\n            <th nowrap data-sort-key="status">',escape(c.status())," ",a("status"),"</th>\n            "),g&&buf.push('\n              <th nowrap data-sort-key="from-address">',escape(c.from())," ",a("from-address"),"</th>\n            "),buf.push("\n            "),f&&buf.push('\n              <th nowrap data-sort-key="to-address">',escape(c.to())," ",a("to-address"),"</th>\n            "),buf.push("\n            "),h&&buf.push('\n              <th nowrap data-sort-key="packet-info">',escape(c.packet())," ",a("packet-info"),"</th>\n            "),buf.push('\n            <th nowrap data-sort-key="message">',escape(c.message())," ",a("message"),'</th>\n          </tr>\n        </thead>\n        <tbody>\n        </tbody>\n      </table>\n    </div>\n    <div class="modal-footer">\n      <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>\n    </div>\n</div>\n')}();return buf.join("")};return function(a){return t(a,require("ejs").filters)}}()},{"./NetSimGlobals":206,"./Packet":259,"./locale":264,ejs:500}],224:[function(a,b,c){"use strict";var d=a("./locale"),e=a("./NetSimSlider"),f=b.exports=function(a,b,c){e.call(this,a,{onChange:b,min:c.minimumPacketSize,max:8192,upperBoundInfinite:!1}),this.render()};f.inherits(e),f.prototype.getPacketSizeText=function(a){return d.numBitsPerPacket({numBits:a})},f.prototype.valueToLabel=function(a){return a===1/0?d.unlimited():d.numBitsPerPacket({numBits:a})},f.prototype.valueToShortLabel=function(a){return a===1/0?d.unlimited():a}},{"./NetSimSlider":243,"./locale":264}],223:[function(a,b,c){"use strict";a("../utils");var d=a("./locale"),e=a("./NetSimPacketEditor.html.ejs"),f=a("../constants").KeyCodes,g=a("./NetSimEncodingControl"),h=a("./NetSimLogPanel"),i=a("./Packet"),j=a("./DataConverters"),k=a("./NetSimConstants"),l=a("./NetSimGlobals"),m=k.EncodingType,n=k.BITS_PER_BYTE,o=j.minifyBinary,p=j.formatAB,q=j.formatBinary,r=j.formatHex,s=j.alignDecimal,t=j.abToBinary,u=j.abToInt,v=j.binaryToAB,w=j.binaryToHex,x=j.binaryToInt,y=j.binaryToDecimal,z=j.binaryToAscii,A=j.hexToBinary,B=j.intToAB,C=j.intToBinary,D=j.intToHex,E=j.decimalToBinary,F=j.asciiToBinary,G=b.exports=function(a){var b=l.getLevelConfig();this.ROW_TYPES=[{typeName:m.A_AND_B,addressFieldAllowedCharacters:/[AB\s]/i,addressFieldConversion:function(a){return j.binaryToAddressString(j.abToBinary(a),b.addressFormat)},shortNumberAllowedCharacters:/[AB]/i,shortNumberConversion:L,messageAllowedCharacters:/[AB\s]/i,messageConversion:t},{typeName:m.BINARY,addressFieldAllowedCharacters:/[01\s]/i,addressFieldConversion:function(a){return j.binaryToAddressString(a,b.addressFormat)},shortNumberAllowedCharacters:/[01]/,shortNumberConversion:K,messageAllowedCharacters:/[01\s]/,messageConversion:o},{typeName:m.HEXADECIMAL,addressFieldAllowedCharacters:/[0-9a-f\s]/i,addressFieldConversion:function(a){return j.binaryToAddressString(j.hexToBinary(a),b.addressFormat)},shortNumberAllowedCharacters:/[0-9a-f]/i,shortNumberConversion:M,messageAllowedCharacters:/[0-9a-f\s]/i,messageConversion:A},{typeName:m.DECIMAL,addressFieldAllowedCharacters:/[0-9.\s]/i,addressFieldConversion:O,shortNumberAllowedCharacters:/[0-9]/,shortNumberConversion:N,messageAllowedCharacters:/[0-9\s]/,messageConversion:function(a){return E(a,this.currentChunkSize_)}.bind(this)},{typeName:m.ASCII,addressFieldAllowedCharacters:/[0-9.\s]/i,addressFieldConversion:O,shortNumberAllowedCharacters:/[0-9]/,shortNumberConversion:N,messageAllowedCharacters:/./,messageConversion:function(a){return F(a,this.currentChunkSize_)}.bind(this)}],this.rootDiv_=$("<div>").addClass("netsim-packet"),this.messageGranularity_=a.messageGranularity,this.packetSpec_=a.packetSpec,this.toAddress=a.toAddress||j.binaryToAddressString("0",b.addressFormat),this.fromAddress=a.fromAddress||j.binaryToAddressString("0",b.addressFormat),this.packetIndex=void 0!==a.packetIndex?a.packetIndex:1,this.packetCount=void 0!==a.packetCount?a.packetCount:1,this.message=a.message||"",this.maxPacketSize_=a.maxPacketSize||8192,this.currentChunkSize_=a.chunkSize||n,this.bitRate_=a.bitRate||1/0;var c=a.enabledEncodings||[];this.enabledEncodingsHash_=g.encodingsAsHash(c),this.removePacketCallback_=a.removePacketCallback,this.contentChangeCallback_=a.contentChangeCallback,this.enterKeyPressedCallback_=a.enterKeyPressedCallback,this.removePacketButton_=null,this.bitCounter_=null,this.isPlayingSendAnimation_=!1,this.isSendingPacketToRemote_=!1,this.myNode_=null,this.originalBinary_="",this.remainingBinary_="",this.lastBitSentTime_=void 0,this.render()};G.prototype.getRoot=function(){return this.rootDiv_},G.prototype.getFirstVisibleMessageBox=function(){return this.getRoot().find("textarea.message:visible").first()},G.prototype.render=function(){var a=$(e({messageGranularity:this.messageGranularity_,packetSpec:this.packetSpec_,enabledEncodingsHash:this.enabledEncodingsHash_}));this.rootDiv_.html(a),this.bindElements_(),this.updateFields_(),this.updateRemoveButtonVisibility_(),h.adjustHeaderColumnWidths(this.rootDiv_),g.hideRowsByEncoding(this.rootDiv_,Object.keys(this.enabledEncodingsHash_))},G.prototype.beginSending=function(a){this.isPlayingSendAnimation_=!0,this.originalBinary_=this.getPacketBinary().substr(0,this.maxPacketSize_),this.remainingBinary_=this.originalBinary_,this.myNode_=a,0===this.remainingBinary_.length&&this.finishSending()},G.prototype.finishSending=function(){this.isPlayingSendAnimation_=!1,this.isSendingPacketToRemote_=!0,this.myNode_.sendMessage(this.originalBinary_,function(){this.isSendingPacketToRemote_=!1,this.removePacketCallback_(this)}.bind(this))},G.prototype.isSending=function(){return this.isPlayingSendAnimation_||this.isSendingPacketToRemote_},G.prototype.tick=function(a){if(this.isPlayingSendAnimation_&&!this.isSendingPacketToRemote_){this.lastBitSentTime_||(this.lastBitSentTime_=a.time);var b=a.time-this.lastBitSentTime_,c=1e3*(1/this.bitRate_),d=Math.floor(b/c);d>0&&(this.lastBitSentTime_=a.time,this.remainingBinary_=this.remainingBinary_.substr(d),this.setPacketBinary(this.remainingBinary_),0===this.remainingBinary_.length&&this.finishSending())}};var H=function(a){var b=$(a.target);b.hasClass("watermark")&&(b.val(""),b.removeClass("watermark"))},I=function(a){return 13==a.keyCode&&!(a.ctrlKey||a.shiftKey)},J=function(a){return function(b){if(b.metaKey||b.ctrlKey)return!0;if(b.which<f.SPACE||b.which>=f.DELETE)return!0;var c=String.fromCharCode(b.which);return a.test(c)?void 0:(b.preventDefault(),!1)}};G.prototype.makeKeyupHandler=function(a,b,c){return function(d){var e=b(d.target.value,c);"string"!=typeof e&&isNaN(e)||(this[a]=e,this.updateFields_(d.target))}.bind(this)},G.prototype.makeBlurHandler=function(a,b,c){return function(d){var e=b(d.target.value,c);"number"==typeof e&&isNaN(e)&&(e=b("0")),this[a]=e,this.updateFields_()}.bind(this)};var K=function(a,b){return x(a.substr(-b))},L=function(a,b){return u(a.substr(-b))},M=function(a,b){return K(A(a),b)},N=function(a,b){return K(C(parseInt(a,10)),b)},O=function(a){var b=l.getLevelConfig(),c=j.addressStringToBinary(a,b.addressFormat);return j.binaryToAddressString(c,b.addressFormat)};G.prototype.getEnabledRowTypes_=function(){return this.ROW_TYPES.filter(function(a){return this.isEncodingEnabled_(a.typeName)},this)},G.prototype.bindElements_=function(){var a=l.getLevelConfig(),b=new i.Encoder(a.addressFormat,a.packetCountBitWidth,this.packetSpec_),c=this.rootDiv_;this.getEnabledRowTypes_().forEach(function(a){var d=c.find("tr."+a.typeName),e=a.typeName+"UI";this[e]={};var f=this[e];this.packetSpec_.forEach(function(c){var e,g,h=c,j=b.getFieldBitWidth(h);i.isAddressField(h)?(e=a.addressFieldAllowedCharacters,g=a.addressFieldConversion):(e=a.shortNumberAllowedCharacters,g=a.shortNumberConversion),f[h]=d.find("input."+h),f[h].keypress(J(e)),f[h].keyup(this.makeKeyupHandler(h,g,j)),f[h].blur(this.makeBlurHandler(h,g,j))},this),f.message=d.find("textarea.message"),f.message.focus(H),f.message.keypress(J(a.messageAllowedCharacters)),f.message.keydown(function(a){I(a)&&this.enterKeyPressedCallback_(a)}.bind(this)),f.message.keyup(this.makeKeyupHandler("message",a.messageConversion)),f.message.blur(this.makeBlurHandler("message",a.messageConversion))},this),this.removePacketButton_=c.find(".remove-packet-button"),this.removePacketButton_.click(this.onRemovePacketButtonClick_.bind(this)),this.bitCounter_=c.find(".bit-counter")},G.prototype.updateFields_=function(a){var b=this.currentChunkSize_,c=[],e=l.getLevelConfig(),f=new i.Encoder(e.addressFormat,e.packetCountBitWidth,this.packetSpec_);this.packetSpec_.forEach(function(a){var b,d,g,h,k,l=a,n=f.getFieldBitWidth(l);i.isAddressField(l)?(b=function(a){return j.binaryToAB(j.addressStringToBinary(a,e.addressFormat))},d=function(a){return j.formatBinaryForAddressHeader(j.addressStringToBinary(a,e.addressFormat),e.addressFormat)},g=function(a){return j.binaryToHex(j.addressStringToBinary(a,e.addressFormat))},h=O,k=O):(b=B,d=C,g=D,h=function(a){return a.toString(10)},k=h),this.isEncodingEnabled_(m.A_AND_B)&&c.push({inputElement:this.a_and_bUI[l],newValue:b(this[l],n)}),this.isEncodingEnabled_(m.BINARY)&&c.push({inputElement:this.binaryUI[l],newValue:d(this[l],n)}),this.isEncodingEnabled_(m.HEXADECIMAL)&&c.push({inputElement:this.hexadecimalUI[l],newValue:g(this[l],Math.ceil(n/4))}),this.isEncodingEnabled_(m.DECIMAL)&&c.push({inputElement:this.decimalUI[l],newValue:h(this[l],n)}),this.isEncodingEnabled_(m.ASCII)&&c.push({inputElement:this.asciiUI[l],newValue:k(this[l],n)})},this),this.isEncodingEnabled_(m.A_AND_B)&&c.push({inputElement:this.a_and_bUI.message,newValue:p(v(this.message),b),watermark:d.a_and_b()}),this.isEncodingEnabled_(m.BINARY)&&c.push({inputElement:this.binaryUI.message,newValue:q(this.message,b),watermark:d.binary()}),this.isEncodingEnabled_(m.HEXADECIMAL)&&c.push({inputElement:this.hexadecimalUI.message,newValue:r(w(this.message),b),watermark:d.hexadecimal()}),this.isEncodingEnabled_(m.DECIMAL)&&c.push({inputElement:this.decimalUI.message,newValue:s(y(this.message,b)),watermark:d.decimal()}),this.isEncodingEnabled_(m.ASCII)&&c.push({inputElement:this.asciiUI.message,newValue:z(this.message,b),watermark:d.ascii()}),c.forEach(function(b){b.inputElement[0]!==a&&(b.watermark&&""===b.newValue?(b.inputElement.val(b.watermark),b.inputElement.addClass("watermark")):(b.inputElement.val(b.newValue),b.inputElement.removeClass("watermark")))}),this.updateBitCounter(),this.contentChangeCallback_()},G.prototype.updateRemoveButtonVisibility_=function(){this.removePacketButton_.css("display",1===this.packetCount?"none":"")},G.prototype.getPacketBinary=function(){var a=l.getLevelConfig(),b=new i.Encoder(a.addressFormat,a.packetCountBitWidth,this.packetSpec_);return b.concatenateBinary(b.makeBinaryHeaders({toAddress:this.toAddress,fromAddress:this.fromAddress,packetIndex:this.packetIndex,packetCount:this.packetCount}),this.message)},G.prototype.setPacketBinary=function(a){var b=new i(this.packetSpec_,a);this.specContainsHeader_(i.HeaderType.TO_ADDRESS)&&(this.toAddress=b.getHeaderAsAddressString(i.HeaderType.TO_ADDRESS)),this.specContainsHeader_(i.HeaderType.FROM_ADDRESS)&&(this.fromAddress=b.getHeaderAsAddressString(i.HeaderType.FROM_ADDRESS)),this.specContainsHeader_(i.HeaderType.PACKET_INDEX)&&(this.packetIndex=b.getHeaderAsInt(i.HeaderType.PACKET_INDEX)),this.specContainsHeader_(i.HeaderType.PACKET_COUNT)&&(this.packetCount=b.getHeaderAsInt(i.HeaderType.PACKET_COUNT)),this.message=b.getBodyAsBinary(),this.updateFields_()},G.prototype.specContainsHeader_=function(a){return this.packetSpec_.some(function(b){return b===a})},G.prototype.getFirstBit=function(){var a=this.getPacketBinary();return a.length>0?a.substr(0,1):void 0},G.prototype.setFromAddress=function(a){this.fromAddress=a,this.updateFields_()},G.prototype.setPacketIndex=function(a){this.packetIndex=a,this.updateFields_()},G.prototype.setPacketCount=function(a){this.packetCount=a,this.updateFields_(),this.updateRemoveButtonVisibility_()},G.prototype.setMaxPacketSize=function(a){this.maxPacketSize_=a,this.updateBitCounter()},G.prototype.setEncodings=function(a){this.enabledEncodingsHash_=g.encodingsAsHash(a),g.hideRowsByEncoding(this.rootDiv_,a),this.render()},G.prototype.isEncodingEnabled_=function(a){return this.enabledEncodingsHash_[a]===!0},G.prototype.setChunkSize=function(a){this.currentChunkSize_=a,this.updateFields_()},G.prototype.setBitRate=function(a){this.bitRate_=a},G.prototype.updateBitCounter=function(){var a=this.getPacketBinary().length,b=this.maxPacketSize_;this.bitCounter_.html(d.bitCounter({x:a,y:b})),this.bitCounter_.toggleClass("oversized",a>this.maxPacketSize_)},G.prototype.onRemovePacketButtonClick_=function(a){var b=$(a.target);b.is("[disabled]")||b.parents().is("[disabled]")||this.removePacketCallback_(this)},G.prototype.consumeFirstBit=function(){this.setPacketBinary(this.getPacketBinary().substr(1))}},{"../constants":108,"../utils":324,"./DataConverters":184,"./NetSimConstants":194,"./NetSimEncodingControl":204,"./NetSimGlobals":206,"./NetSimLogPanel":212,"./NetSimPacketEditor.html.ejs":222,"./Packet":259,"./locale":264}],222:[function(require,module,exports){module.exports=function(){
var t=function anonymous(locals,filters,escape){escape=escape||function(a){return String(a).replace(/&(?!\w+;)/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")};var buf=[];with(locals||{})!function(){function a(a){return enabledEncodingsHash[a]===!0}function b(){buf.push('\n      <thead>\n        <tr>\n          <th nowrap class="',escape(j.ENCODING_LABEL),'"></th>\n          '),n&&buf.push('\n          <th nowrap class="',escape(j.TO_ADDRESS),'">',escape(d.to()),"</th>\n          "),buf.push("\n          "),o&&buf.push('\n          <th nowrap class="',escape(j.FROM_ADDRESS),'">',escape(d.from()),"</th>\n          "),buf.push("\n          "),p&&buf.push('\n          <th nowrap class="',escape(j.PACKET_INFO),'">',escape(d.packet()),"</th>\n          "),buf.push('\n          <th class="',escape(j.MESSAGE),'">\n            ',escape(d.message()),'\n            <div class="packet-controls">\n              <span class="netsim-button secondary remove-packet-button" title="',escape(d.removePacket()),'"><i class="fa fa-times"></i></span>\n            </div>\n          </th>\n        </tr>\n      </thead>\n    ')}function c(a){buf.push('\n      <tr class="',escape(a),'">\n        <th nowrap class="',escape(j.ENCODING_LABEL),'">',escape(k(a)),"</th>\n        "),n&&buf.push('\n        <td nowrap class="',escape(j.TO_ADDRESS),'"><input type="text" class="',escape(g.HeaderType.TO_ADDRESS),'" /></td>\n        '),buf.push("\n        "),o&&buf.push('\n        <td nowrap class="',escape(j.FROM_ADDRESS),'"><input type="text" readonly class="',escape(g.HeaderType.FROM_ADDRESS),'" /></td>\n        '),buf.push("\n        "),p&&buf.push('\n        <td nowrap class="',escape(j.PACKET_INFO),'"><input type="text" readonly class="',escape(g.HeaderType.PACKET_INDEX),'" />',escape(d._of_()),'<input type="text" readonly class="',escape(g.HeaderType.PACKET_COUNT),'" /></td>\n        '),buf.push('\n        <td class="',escape(j.MESSAGE),'"><div><textarea class="message"></textarea></div></td>\n      </tr>\n    ')}buf.push("");var d=require("./locale"),e=require("./NetSimConstants"),f=require("./NetSimUtils"),g=require("./Packet"),h=e.EncodingType,i=e.MessageGranularity,j=e.PacketUIColumnType,k=f.getEncodingLabel,l=f.forEachEnumValue,m=packetSpec,n=m.indexOf(g.HeaderType.TO_ADDRESS)>-1,o=m.indexOf(g.HeaderType.FROM_ADDRESS)>-1,p=m.indexOf(g.HeaderType.PACKET_INDEX)>-1&&m.indexOf(g.HeaderType.PACKET_COUNT)>-1,q=messageGranularity===i.PACKETS;buf.push("\n<table>\n  "),q&&b(),buf.push("\n  <tbody>\n    "),l(h,function(b){a(b)&&c(b)}),buf.push("\n  </tbody>\n</table>\n\n"),q&&buf.push('\n  <div class="bit-counter"></div>\n'),buf.push("\n")}();return buf.join("")};return function(a){return t(a,require("ejs").filters)}}()},{"./NetSimConstants":194,"./NetSimUtils":249,"./Packet":259,"./locale":264,ejs:500}],219:[function(a,b,c){"use strict";var d=a("./NetSimMyDeviceTab.html.ejs"),e=a("./NetSimBitRateControl"),f=a("./NetSimPulseRateControl"),g=a("./NetSimChunkSizeControl"),h=a("./NetSimEncodingControl"),i=a("./NetSimMetronome"),j=a("./NetSimGlobals"),k=b.exports=function(a,b,c){this.rootDiv_=a,this.runLoop_=b,this.bitsPerSecond_=1,this.chunkSizeSliderChangeCallback_=c.chunkSizeChangeCallback,this.bitRateChangeCallback_=c.bitRateChangeCallback,this.encodingChangeCallback_=c.encodingChangeCallback,this.metronome_=null,this.pulseRateControl_=null,this.bitRateControl_=null,this.chunkSizeControl_=null,this.encodingControl_=null,this.render()};k.prototype.render=function(){var a=j.getLevelConfig(),b=$(d({level:a}));this.rootDiv_.html(b),a.showMetronome&&(this.metronome_=new i(this.rootDiv_.find(".metronome"),this.runLoop_),this.metronome_.setFrequency(this.bitsPerSecond_)),a.showPulseRateSlider&&(this.pulseRateControl_=new f(this.rootDiv_.find(".pulse-rate"),1/this.bitsPerSecond_,function(a){this.bitRateChangeCallback_(1/a)}.bind(this))),a.showBitRateControl&&(this.bitRateControl_=new e(this.rootDiv_.find(".bitrate"),this.bitsPerSecond_,this.bitRateChangeCallback_),a.lockBitRateControl&&this.bitRateControl_.disable()),a.showChunkSizeControl&&(this.chunkSizeControl_=new g(this.rootDiv_.find(".chunk-size"),this.chunkSizeSliderChangeCallback_),a.lockChunkSizeControl&&this.chunkSizeControl_.disable()),a.showEncodingControls.length>0&&(this.encodingControl_=new h(this.rootDiv_.find(".encoding"),a,this.encodingChangeCallback_))},k.prototype.pulseRateSliderChange_=function(a){this.setBitRate(1/a)},k.prototype.setBitRate=function(a){this.bitsPerSecond_=a,this.metronome_&&this.metronome_.setFrequency(a),this.bitRateControl_&&this.bitRateControl_.setValue(a),this.pulseRateControl_&&1/0>a&&this.pulseRateControl_.setValue(1/a)},k.prototype.setChunkSize=function(a){this.chunkSizeControl_&&this.chunkSizeControl_.setValue(a)},k.prototype.setEncodings=function(a){this.encodingControl_&&this.encodingControl_.setEncodings(a)}},{"./NetSimBitRateControl":191,"./NetSimChunkSizeControl":192,"./NetSimEncodingControl":204,"./NetSimGlobals":206,"./NetSimMetronome":217,"./NetSimMyDeviceTab.html.ejs":218,"./NetSimPulseRateControl":227}],227:[function(a,b,c){"use strict";a("../utils");var d=a("./locale"),e=a("./NetSimSlider"),f=b.exports=function(a,b,c){e.DecimalPrecisionSlider.call(this,a,{onChange:c,value:b,min:.5,max:5,step:-.25}),this.render()};f.inherits(e.DecimalPrecisionSlider),f.prototype.valueToLabel=function(a){var b=Math.floor(100*a)/100;return 1===b?d.xSecondPerPulse({x:b}):d.xSecondsPerPulse({x:b})},f.prototype.valueToShortLabel=function(a){return a}},{"../utils":324,"./NetSimSlider":243,"./locale":264}],218:[function(require,module,exports){module.exports=function(){var t=function anonymous(locals,filters,escape){escape=escape||function(a){return String(a).replace(/&(?!\w+;)/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")};var buf=[];with(locals||{})!function(){buf.push('<div class="netsim-my-device-tab">\n\n  '),level.showMetronome&&buf.push('\n    <div class="metronome"></div>\n  '),buf.push("\n\n  "),level.showPulseRateSlider&&buf.push('\n    <h1>Pulse rate</h1>\n    <div class="pulse-rate"></div>\n  '),buf.push("\n\n  "),level.showBitRateControl&&buf.push('\n    <h1>Bitrate</h1>\n    <div class="bitrate"></div>\n  '),buf.push("\n\n  "),level.showChunkSizeControl&&buf.push('\n    <h1>Chunk size</h1>\n    <div class="chunk-size"></div>\n  '),buf.push("\n\n  "),level.showEncodingControls.length>0&&buf.push('\n    <div class="encoding"></div>\n  '),buf.push("\n\n</div>\n")}();return buf.join("")};return function(a){return t(a,require("ejs").filters)}}()},{ejs:500}],217:[function(a,b,c){"use strict";var d=a("./NetSimMetronome.html.ejs"),e=b.exports=function(a,b){this.rootDiv_=a,this.lastPulseTime_=void 0,this.pulseIntervalMillis_=0,this.progress_=0,this.pulseAge_=0,b.render.register(this.render.bind(this))};e.prototype.render=function(a){if(this.lastPulseTime_||(this.lastPulseTime_=a.time),this.pulseIntervalMillis_===1/0)this.progress_=0,this.pulseAge_=1/0;else if(this.pulseAge_=a.time-this.lastPulseTime_,this.progress_=Math.min(this.pulseAge_/this.pulseIntervalMillis_,1),this.pulseAge_>=this.pulseIntervalMillis_)for(var b=a.time-this.pulseIntervalMillis_;this.lastPulseTime_<b;)this.lastPulseTime_+=this.pulseIntervalMillis_;var c=$(d({progress:this.progress_,pulseAge:this.pulseAge_}));this.rootDiv_.html(c)},e.prototype.setFrequency=function(a){return 0===a||a===1/0?void(this.pulseIntervalMillis_=1/0):void(this.pulseIntervalMillis_=1e3/a)}},{"./NetSimMetronome.html.ejs":216}],216:[function(require,module,exports){module.exports=function(){var t=function anonymous(locals,filters,escape){escape=escape||function(a){return String(a).replace(/&(?!\w+;)/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")};var buf=[];with(locals||{})!function(){function a(a,b){return"M"+a+" "+b}function b(a,b){return"L "+a+" "+b}function c(a,b,c,d,e,f,g){return"A "+a+" "+b+", "+c+", "+d+", "+e+", "+f+" "+g}function d(){return"Z"}function e(e){var h=2*Math.PI*e,i=e>=.5?1:0,j=Math.sin(h),k=Math.cos(h),l=f*k,m=f*j,n=g*k,o=g*j;return[a(f,0),c(f,f,0,i,1,l,m),b(n,o),c(g,g,0,i,0,g,0),d()].join(" ")}buf.push("");var f=45,g=30,h=500,i=Math.min(pulseAge/h,1),j=g*(1-i);buf.push('\n<div class="netsim-metronome">\n  <svg version="1.1" width="100" height="100" xmlns="http://www.w3.org/2000/svg">\n    <g id="centered-group" transform="translate(50,50)">\n      <circle r="48" cx="0" cy="0" fill="darkgray"></circle>\n      <circle r="48" cx="-1" cy="1" fill="lightgray"></circle>\n      <circle r="46" cx="0" cy="0" fill="#f5f5f5"></circle>\n      <circle class="pulse-dot" r="',escape(j),'" cx="0" cy="0"></circle>\n      <g transform="rotate(-90)">\n        <path class="progress-meter" d="',escape(e(progress)),'"></path>\n      </g>\n    </g>\n  </svg>\n</div>\n')}();return buf.join("")};return function(a){return t(a,require("ejs").filters)}}()},{ejs:500}],214:[function(a,b,c){"use strict";a("../utils");var d=a("./NetSimConstants"),e=a("./NetSimUtils"),f=a("./NetSimSlider"),g=b.exports=function(a,b,c){f.LogarithmicSlider.call(this,a,{onChange:b,onStop:c,value:1/0,min:d.BITS_PER_BYTE,max:d.BITS_PER_MEGABYTE,upperBoundInfinite:!0}),this.render()};g.inherits(f.LogarithmicSlider),g.prototype.valueToLabel=function(a){return e.bitsToLocalizedRoundedBytesize(a)}},{"../utils":324,"./NetSimConstants":194,"./NetSimSlider":243,"./NetSimUtils":249}],212:[function(a,b,c){"use strict";var d=a("../utils"),e=a("./locale"),f=a("./NetSimLogPanel.html.ejs"),g=a("./Packet"),h=a("./NetSimLogPacket.html.ejs"),i=a("./NetSimPanel"),j=a("./NetSimEncodingControl"),k=a("./NetSimGlobals"),l=400,m=50,n=b.exports=function(a,b){this.packetSpec_=b.packetSpec,this.packets_=[],this.currentEncodings_=[],this.currentChunkSize_=8,this.logTitle_=b.logTitle,this.hasUnreadMessages_=!!b.hasUnreadMessages,this.maximumLogPackets_=d.valueOr(b.maximumLogPackets,m),i.call(this,a,{className:"netsim-log-panel",panelTitle:b.logTitle,beginMinimized:b.isMinimized})};n.inherits(i),n.prototype.render=function(){n.superPrototype.render.call(this);var a=$(f({}));this.getBody().html(a),this.addButton(e.clear(),this.onClearButtonPress_.bind(this)),this.scrollArea_=this.getBody().find(".scroll-area"),this.updateUnreadCount()},n.prototype.onClearButtonPress_=function(){this.scrollArea_.empty(),this.packets_.length=0,this.updateUnreadCount()},n.prototype.log=function(a,b){var c=this.packets_.some(function(a){return a.packetID==b});if(!c){this.packets_.splice(this.maximumLogPackets_-1,this.packets_.length).forEach(function(a){a.getRoot().remove()});var d=new o(a,b,{packetSpec:this.packetSpec_,encodings:this.currentEncodings_,chunkSize:this.currentChunkSize_,isUnread:this.hasUnreadMessages_,markAsReadCallback:this.updateUnreadCount.bind(this)});d.getRoot().hide(),d.getRoot().prependTo(this.scrollArea_),d.getRoot().slideDown(l),this.packets_.unshift(d),this.updateUnreadCount()}},n.prototype.updateUnreadCount=function(){var a=this.packets_.reduce(function(a,b){return a+(b.isUnread?1:0)},0);a>0?this.setPanelTitle(e.appendCountToTitle({title:this.logTitle_,count:a})):this.setPanelTitle(this.logTitle_)},n.prototype.setEncodings=function(a){this.currentEncodings_=a,this.packets_.forEach(function(b){b.setEncodings(a)})},n.prototype.setChunkSize=function(a){this.currentChunkSize_=a,this.packets_.forEach(function(b){b.setChunkSize(a)})};var o=function(a,b,c){this.packetID=b,this.packetBinary_=a,this.packetSpec_=c.packetSpec,this.encodings_=c.encodings,this.chunkSize_=c.chunkSize,this.isUnread=c.isUnread,this.isMinimized=!1,this.markAsReadCallback_=c.markAsReadCallback,this.rootDiv_=$("<div>").addClass("packet"),this.rootDiv_.click(this.markAsRead.bind(this)),this.render()};o.prototype.render=function(){var a=j.encodingsAsHash(this.encodings_),b=h({packetBinary:this.packetBinary_,packetSpec:this.packetSpec_,enabledEncodingsHash:a,chunkSize:this.chunkSize_,isMinimized:this.isMinimized}),c=$(b);n.adjustHeaderColumnWidths(c),j.hideRowsByEncoding(c,this.encodings_),this.rootDiv_.html(c),this.rootDiv_.find(".expander").click(this.toggleMinimized.bind(this)),this.rootDiv_.toggleClass("unread",this.isUnread)},o.prototype.getRoot=function(){return this.rootDiv_},n.adjustHeaderColumnWidths=function(a){var b=k.getLevelConfig(),c=new g.Encoder(b.addressFormat,b.packetCountBitWidth,b.clientInitialPacketHeader),d=c.getFieldBitWidth(g.HeaderType.TO_ADDRESS),e=c.getFieldBitWidth(g.HeaderType.PACKET_COUNT),f=12.5,h=f*d;a.find("td.toAddress, th.toAddress, td.fromAddress, th.fromAddress").css("width",h+"px");var i=.75,j=i*d;a.find("td.toAddress input, td.fromAddress input").css("width",j+"em");var l=2*f*e+21;a.find("td.packetInfo, th.packetInfo").css("width",l+"px");var m=i*e;a.find("td.packetInfo input").css("width",m+"em")},o.prototype.setEncodings=function(a){this.encodings_=a,this.render()},o.prototype.setChunkSize=function(a){this.chunkSize_=a,this.render()},o.prototype.markAsRead=function(){this.isUnread&&(this.isUnread=!1,this.render(),this.markAsReadCallback_())},o.prototype.toggleMinimized=function(){this.isMinimized=!this.isMinimized,this.render()},n.prototype.setHeight=function(a){var b=this.getRoot().find(".netsim-panel"),c=b.find("h1"),d=b.find(".panel-body"),e=parseFloat(b.css("margin-top"))+parseFloat(b.css("margin-bottom")),f=c.outerHeight(!0),g=parseFloat(d.css("border-top-width"))+parseFloat(d.css("border-bottom-width")),h=parseFloat(this.scrollArea_.css("margin-top"))+parseFloat(this.scrollArea_.css("margin-bottom")),i=a-(e+f+g+h);this.scrollArea_.height(Math.floor(i))},n.prototype.getHeight=function(){return this.getRoot().find(".netsim-panel").outerHeight(!0)},n.prototype.onMinimizerClick_=function(){n.superPrototype.onMinimizerClick_.call(this),k.updateLayout()}},{"../utils":324,"./NetSimEncodingControl":204,"./NetSimGlobals":206,"./NetSimLogPacket.html.ejs":210,"./NetSimLogPanel.html.ejs":211,"./NetSimPanel":226,"./Packet":259,"./locale":264}],211:[function(require,module,exports){module.exports=function(){var t=function anonymous(locals,filters,escape){escape=escape||function(a){return String(a).replace(/&(?!\w+;)/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")};var buf=[];with(locals||{})!function(){buf.push('<div class="scroll-area">\n</div>\n')}();return buf.join("")};return function(a){return t(a,require("ejs").filters)}}()},{ejs:500}],210:[function(require,module,exports){module.exports=function(){var t=function anonymous(locals,filters,escape){escape=escape||function(a){return String(a).replace(/&(?!\w+;)/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")};var buf=[];with(locals||{})!function(){function a(a){return enabledEncodingsHash[a]===!0}function b(){var b=x.getBodyAsBinary();return a(k.ASCII)?u(b,chunkSize):a(k.DECIMAL)?p(t(b,chunkSize)):a(k.HEXADECIMAL)?o(s(b),chunkSize):a(k.BINARY)?n(b,chunkSize):a(k.A_AND_B)?m(q(b),chunkSize):b}function c(b,c,d,e,f){a(b)&&(buf.push('\n        <tr class="',escape(b),'">\n          <th nowrap class="',escape(l.ENCODING_LABEL),'">',escape(h(b)),"</th>\n          "),z&&buf.push('\n            <td nowrap class="',escape(l.TO_ADDRESS),'">',escape(c),"</td>\n          "),buf.push("\n          "),A&&buf.push('\n            <td nowrap class="',escape(l.FROM_ADDRESS),'">',escape(d),"</td>\n          "),buf.push("\n          "),B&&buf.push('\n            <td nowrap class="',escape(l.PACKET_INFO),'">',escape(e),"</td>\n          "),buf.push('\n          <td class="',escape(l.MESSAGE),'">',escape(f),"</td>\n        </tr>\n    "))}buf.push("");var d=require("./NetSimConstants"),e=require("./NetSimGlobals"),f=require("./DataConverters"),g=require("./locale"),h=require("./NetSimUtils").getEncodingLabel,i=require("./Packet"),j=e.getLevelConfig(),k=d.EncodingType,l=d.PacketUIColumnType,m=f.formatAB,n=f.formatBinary,o=f.formatHex,p=f.alignDecimal,q=f.binaryToAB,r=f.binaryToInt,s=f.binaryToHex,t=f.binaryToDecimal,u=f.binaryToAscii,v=function(a){return f.binaryToAddressString(a,j.addressFormat)},w=function(a){return f.formatBinaryForAddressHeader(a,j.addressFormat)},x=new i(packetSpec,packetBinary),y=packetSpec,z=y.indexOf(i.HeaderType.TO_ADDRESS)>-1,A=y.indexOf(i.HeaderType.FROM_ADDRESS)>-1,B=y.indexOf(i.HeaderType.PACKET_INDEX)>-1&&y.indexOf(i.HeaderType.PACKET_COUNT)>-1;buf.push("\n  ");var C=z?x.getHeaderAsBinary(i.HeaderType.TO_ADDRESS):"",D=A?x.getHeaderAsBinary(i.HeaderType.FROM_ADDRESS):"",E=B?x.getHeaderAsBinary(i.HeaderType.PACKET_INDEX):"",F=B?x.getHeaderAsBinary(i.HeaderType.PACKET_COUNT):"",G=x.getBodyAsBinary();buf.push("\n  "),isMinimized?buf.push('\n      <div class="minimized-packet single-line-with-ellipsis user-data">\n        <i class="fa fa-plus-square expander"></i>\n        ',escape(b()),"\n      </div>\n  "):(buf.push('\n    <table class="maximized-packet">\n      <thead>\n        <tr>\n          <th nowrap class="',escape(l.ENCODING_LABEL),'">\n            <i class="fa fa-minus-square expander"></i>\n          </th>\n          '),z&&buf.push('\n            <th nowrap class="',escape(l.TO_ADDRESS),'">',escape(g.to()),"</th>\n          "),buf.push("\n          "),A&&buf.push('\n            <th nowrap class="',escape(l.FROM_ADDRESS),'">',escape(g.from()),"</th>\n          "),buf.push("\n          "),B&&buf.push('\n            <th nowrap class="',escape(l.PACKET_INFO),'">',escape(g.packet()),"</th>\n          "),buf.push('\n          <th class="',escape(l.MESSAGE),'">\n            ',escape(g.message()),"\n          </th>\n        </tr>\n      </thead>\n      <tbody>\n      "),c(k.ASCII,v(C),v(D),g.xOfYPackets({x:r(E),y:r(F)}),u(G,chunkSize)),c(k.DECIMAL,v(C),v(D),g.xOfYPackets({x:r(E),y:r(F)}),p(t(G,chunkSize))),c(k.HEXADECIMAL,s(C),s(D),g.xOfYPackets({x:s(E),y:s(F)}),o(s(G),chunkSize)),c(k.BINARY,w(C,4),w(D,4),n(E+F,j.packetCountBitWidth),n(G,chunkSize)),c(k.A_AND_B,q(C),q(D),m(q(E+F),j.packetCountBitWidth),m(q(G),chunkSize)),buf.push("\n      </tbody>\n    </table>\n  ")),buf.push("\n")}();return buf.join("")};return function(a){return t(a,require("ejs").filters)}}()},{"./DataConverters":184,"./NetSimConstants":194,"./NetSimGlobals":206,"./NetSimUtils":249,"./Packet":259,"./locale":264,ejs:500}],208:[function(a,b,c){"use strict";var d=a("../utils"),e=d.getLodash(),f=a("./locale"),g=a("./NetSimClientNode"),h=a("./NetSimEntity"),i=a("./NetSimAlert"),j=a("./NetSimMessage"),k=a("./NetSimLogger"),l=a("./NetSimRouterNode"),m=a("../ObservableEvent"),n=k.getSingleton(),o=a("./NetSimConstants"),p=a("./NetSimGlobals"),q=o.MessageGranularity,r=b.exports=function(a,b){g.call(this,a,b),this.myWire=null,this.myRemoteClient=null,this.myRouterID_=void 0,this.routers_=[],this.sentLog_=null,this.receivedLog_=null,this.remoteChange=new m,this.onNodeLostConnection_=function(){},this.eventKeys={}};r.inherits(g),r.create=function(a,b,c){var d=new r(a);d.displayName_=b,d.getTable().create(d.buildRow(),function(b,d){if(b)return void c(b,null);var e=new r(a,d);c(null,e)})},r.prototype.setDisplayName=function(a){this.displayName_=a},r.prototype.initializeSimulation=function(a,b){this.sentLog_=a,this.receivedLog_=b,this.eventKeys.nodeTable=this.shard_.nodeTable.tableChange.register(this.onNodeTableChange_.bind(this)),this.eventKeys.wireTable=this.shard_.wireTable.tableChange.register(this.onWireTableChange_.bind(this)),this.eventKeys.messageTable=this.shard_.messageTable.tableChange.register(this.onMessageTableChange_.bind(this)),this.eventKeys.registeredOnShard=this.shard_,this.onNodeTableChange_()},r.prototype.stopSimulation=function(){this.eventKeys.registeredOnShard&&(this.eventKeys.registeredOnShard.nodeTable.tableChange.unregister(this.eventKeys.nodeTable),this.eventKeys.registeredOnShard.wireTable.tableChange.unregister(this.eventKeys.wireTable),this.eventKeys.registeredOnShard.messageTable.tableChange.unregister(this.eventKeys.messageTable),this.eventKeys.registeredOnShard=null)},r.prototype.tick=function(a){this.routers_.forEach(function(b){b.tick(a)})},r.prototype.setLostConnectionCallback=function(a){this.onNodeLostConnection_=a},r.prototype.update=function(a){a=a||function(){};var b=this;r.superPrototype.update.call(this,function(c,d){c&&(n.error("Local node update failed: "+c.message),b.onNodeLostConnection_()),a(c,d)})},r.prototype.connectToNode=function(a,b){r.superPrototype.connectToNode.call(this,a,function(a,c){a?b(a,null):(this.myWire=c,b(a,c))}.bind(this))},r.prototype.connectToClient=function(a,b){this.connectToNode(a,function(a,c){this.shard_.wireTable.refresh().always(function(){this.onWireTableChange_(this.shard_.wireTable.readAll()),b(a,c)}.bind(this))}.bind(this))},r.prototype.connectToRouter=function(a,b){b=b||function(){},n.info(this.getDisplayName()+": Connecting to "+a.getDisplayName()),this.connectToNode(a,function(c,d){if(c)return void b(c);this.myRouterID_=a.entityID;var e=this.getMyRouter();e.requestAddress(d,this.getHostname(),function(a){return a?void this.disconnectRemote(b):(this.remoteChange.notifyObservers(this.myWire,e),void b(null))}.bind(this))}.bind(this))},r.prototype.getMyRouter=function(){return void 0===this.myRouterID_?null:e.find(this.routers_,function(a){return a.entityID===this.myRouterID_}.bind(this))},r.prototype.disconnectRemote=function(a){a=a||function(){};var b=this.myWire;this.cleanUpBeforeDestroyingWire_(),b.destroy(function(b){b&&n.info("Error while disconnecting: "+b.message),a(null)}.bind(this))},r.prototype.cleanUpBeforeDestroyingWire_=function(){this.myWire=null,this.myRemoteClient=null,this.myRouterID_=void 0,this.remoteChange.notifyObservers(null,null)},r.prototype.sendMessage=function(a,b){if(!this.myWire)return void b(new Error("Cannot send message; not connected."));var c=this.myWire.localNodeID,d=this.myWire.remoteNodeID,e=this.selectSimulatingNode_(c,d),g=p.getLevelConfig(),h=g.minimumExtraHops;g.minimumExtraHops!==g.maximumExtraHops&&(h=p.randomIntInRange(g.minimumExtraHops,g.maximumExtraHops+1));var k=this;j.send(this.shard_,{fromNodeID:c,toNodeID:d,simulatedBy:e,payload:a,extraHopsRemaining:h},function(g,j){return g?(n.error("Failed to send message: "+g.message+"\n"+JSON.stringify(a)),i.error(f.sendMessageError()),void b(g)):(n.info(this.getDisplayName()+": Sent message:\nfrom: "+c+"\nto  : "+d+"\nsim : "+e+"\nhops: "+h),k.sentLog_&&k.sentLog_.log(a,j.id),void b(null))}.bind(this))},r.prototype.selectSimulatingNode_=function(a,b){return p.getLevelConfig().messageGranularity===q.BITS?a:void 0!==this.myRouterID_&&this.myRouterID_===b?a:b},r.prototype.sendMessages=function(a,b){return 0===a.length?void b(null):void this.sendMessage(a[0],function(c,d){return c?void b(c,d):void this.sendMessages(a.slice(1),b)}.bind(this))},r.prototype.onNodeTableChange_=function(){var a=this.shard_.nodeTable.readAll();return this.canFindOwnRowIn(a)?(this.routers_=this.routers_.filter(function(b){var c=a.some(function(a){return a.id===b.entityID});return c?!0:(b.stopSimulation(),!1)}),void a.filter(function(a){return a.type===o.NodeType.ROUTER}).forEach(function(a){var b=this.routers_.some(function(b){return a.id===b.entityID});if(!b){var c=new l(this.shard_,a);c.initializeSimulation(this.entityID),this.routers_.push(c)}},this)):void this.onNodeLostConnection_()},r.prototype.canFindOwnRowIn=function(a){return a.some(function(a){return a.id===this.entityID&&a.uuid===this.uuid},this)},r.prototype.onWireTableChange_=function(){if(this.myWire){var a,b,c=this.shard_.wireTable.readAll(),d=e.find(c,function(a){return a.remoteNodeID===this.myWire.localNodeID&&a.localNodeID===this.myWire.remoteNodeID}.bind(this));d&&!this.myRemoteClient?g.get(d.localNodeID,this.shard_,function(a,b){this.myRemoteClient=b,this.remoteChange.notifyObservers(this.myWire,this.myRemoteClient)}.bind(this)):!d&&this.myRemoteClient?(i.info(f.alertPartnerDisconnected()),this.disconnectRemote()):d||this.myRemoteClient||(a=e.find(c,function(a){return a.localNodeID===this.myWire.remoteNodeID&&a.remoteNodeID!==this.myWire.localNodeID}.bind(this)),b=a?c.some(function(b){return b.remoteNodeID==a.localNodeID&&b.localNodeID==a.remoteNodeID}):void 0,a&&b&&(i.info(f.alertConnectionRefused()),this.disconnectRemote()))}},r.prototype.onMessageTableChange_=function(){if(p.getLevelConfig().automaticReceive&&!this.isProcessingMessages_){var a=this.shard_.messageTable.readAll().map(function(a){return new j(this.shard_,a)}.bind(this)).filter(function(a){return a.toNodeID===this.entityID&&a.simulatedBy===this.entityID}.bind(this));0!==a.length&&(n.info("Local node received "+a.length+" messages"),this.isProcessingMessages_=!0,h.destroyEntities(a,function(b){return b?(n.error("Error pulling message off the wire: "+b.message),void(this.isProcessingMessages_=!1)):(a.forEach(function(a){this.handleMessage_(a)},this),n.info("Local node finished processing "+a.length+" messages"),void(this.isProcessingMessages_=!1))}.bind(this)))}},r.prototype.handleMessage_=function(a){n.info(this.getDisplayName()+": Handling incoming message"),this.receivedLog_&&this.receivedLog_.log(a.payload,a.entityID)},r.prototype.getLatestMessageOnSimplexWire=function(a){if(!this.myWire)return void a(new Error("Unable to retrieve message; not connected."));var b=this.shard_.messageTable;b.refresh().fail(a).done(function(){var c=b.readAll().filter(function(a){return this.myWire.isMessageRowOnSimplexWire(a)}.bind(this));if(0===c.length)return void a(null,null);var d=c[c.length-1];a(null,new j(this.shard_,d))}.bind(this))},r.prototype.setSimplexWireState=function(a,b){this.sendMessage(a,function(a){return a?(n.warn(a.message),void b(new Error("Failed to set wire state."))):void this.removeMyOldMessagesFromWire_(b)}.bind(this))},r.prototype.removeMyOldMessagesFromWire_=function(a){if(!this.myWire)return void a(new Error("Unable to retrieve message; not connected."));var b=this.shard_.messageTable;b.refresh().fail(a).done(function(){var c=b.readAll().filter(function(a){return this.myWire.isMessageRowOnSimplexWire(a)},this),d=c.slice(0,-1),e=d.filter(function(a){return a.simulatedBy===this.entityID},this),f=e.map(function(a){return new j(this.shard_,a)},this);h.destroyEntities(f,a)}.bind(this))}},{"../ObservableEvent":2,"../utils":324,"./NetSimAlert":186,"./NetSimClientNode":193,"./NetSimConstants":194,"./NetSimEntity":205,"./NetSimGlobals":206,"./NetSimLogger":213,"./NetSimMessage":215,"./NetSimRouterNode":232,"./locale":264}],207:[function(a,b,c){"use strict";var d=a("../utils"),e=d.getLodash(),f=a("./locale"),g=a("./NetSimNodeFactory"),h=a("./NetSimClientNode"),i=a("./NetSimAlert"),j=a("./NetSimRouterNode"),k=a("./NetSimShardSelectionPanel"),l=a("./NetSimRemoteNodeSelectionPanel"),m=a("./NetSimLogger").getSingleton(),n=a("./NetSimGlobals"),o=b.exports=function(a,b,c){this.rootDiv_=a,this.netsim_=b,this.levelKey_=c.levelKey,this.shardSelectionPanel_=null,this.nodeSelectionPanel_=null,this.shard_=null,this.myNode_=null,this.eventKeys={},this.user_=c.user,this.displayName_=c.user.isSignedIn?c.user.name:"",this.shardChoices_=[],this.selectedShardID_=void 0,this.nodesOnShard_=[],this.incomingConnectionNodes_=[],this.remoteNode_=null,c.user.isSignedIn?this.getUserSections_(function(a){this.buildShardChoiceList_(a,c.sharedShardSeed),this.render()}.bind(this)):this.buildShardChoiceList_([],c.sharedShardSeed),this.render(),this.netsim_.shardChange.register(this.onShardChange_.bind(this))};o.prototype.render=function(){var a=null!==this.shard_;a?this.nodeSelectionPanel_=new l(this.rootDiv_,{user:this.user_,shardID:this.shard_.id,nodesOnShard:this.nodesOnShard_,incomingConnectionNodes:this.incomingConnectionNodes_,remoteNode:this.remoteNode_,myNodeID:this.myNode_.entityID},{addRouterCallback:this.addRouterToLobby.bind(this),cancelButtonCallback:this.onCancelButtonClick_.bind(this),joinButtonCallback:this.onJoinButtonClick_.bind(this),resetShardCallback:this.onResetShardButtonClick_.bind(this)}):this.shardSelectionPanel_=new k(this.rootDiv_,{displayName:this.displayName_,shardChoices:this.shardChoices_,selectedShardID:this.selectedShardID_},{setNameCallback:this.setDisplayName.bind(this),setShardCallback:this.setShardID.bind(this)}),this.netsim_.debouncedResizeFooter()},o.prototype.updateLayout=function(){this.nodeSelectionPanel_&&this.nodeSelectionPanel_.updateLayout()},o.prototype.setDisplayName=function(a){this.displayName_=a,this.render(),this.selectedShardID_&&this.displayName_&&!this.netsim_.isConnectedToShardID(this.selectedShardID_)&&this.netsim_.connectToShard(this.selectedShardID_,this.displayName_)},o.prototype.setShardID=function(a){this.selectedShardID_=a,this.render(),this.selectedShardID_&&this.displayName_&&!this.netsim_.isConnectedToShardID(this.selectedShardID_)&&this.netsim_.connectToShard(this.selectedShardID_,this.displayName_)},o.prototype.onShardChange_=function(a,b){this.eventKeys.registeredShard&&(this.eventKeys.registeredShard.nodeTable.tableChange.unregister(this.eventKeys.nodeTable),this.eventKeys.registeredShard.wireTable.tableChange.unregister(this.eventKeys.wireTable),this.registeredShard=void 0),this.shard_=a,this.myNode_=b,this.shard_?(this.eventKeys.nodeTable=this.shard_.nodeTable.tableChange.register(this.onNodeTableChange_.bind(this)),this.eventKeys.wireTable=this.shard_.wireTable.tableChange.register(this.onWireTableChange_.bind(this)),this.eventKeys.registeredShard=this.shard_,this.fetchInitialLobbyData_()):(this.selectedShardID_=void 0,this.nodesOnShard_.length=0,this.incomingConnectionNodes_.length=0,this.render(),1===this.shardChoices_.length&&this.setShardID(this.shardChoices_[0].shardID))},o.prototype.fetchInitialLobbyData_=function(){$.when(this.shard_.nodeTable.refresh(),this.shard_.wireTable.refresh()).fail(function(a,b){a?m.warn("Node table refresh failed: "+a):b&&m.warn("Wire table refresh failed: "+b)}.bind(this)).done(function(){this.onNodeTableChange_(),this.onWireTableChange_(),n.getLevelConfig().canConnectToRouters&&!this.doesShardContainRouter()&&this.addRouterToLobby()}.bind(this))},o.prototype.doesShardContainRouter=function(){return void 0!==e.find(this.nodesOnShard_,function(a){return a instanceof j})},o.prototype.addRouterToLobby=function(){j.create(this.shard_,function(a){a&&(m.error("Unable to create router: "+a.message),i.error(f.addRouterToLobbyError()))}.bind(this))},o.prototype.onJoinButtonClick_=function(a){a instanceof j?this.netsim_.connectToRouter(a.entityID):a instanceof h&&this.myNode_.connectToClient(a,function(){})},o.prototype.onCancelButtonClick_=function(){this.netsim_.disconnectFromRemote()},o.prototype.onResetShardButtonClick_=function(){this.netsim_.resetShard()},o.prototype.onNodeTableChange_=function(){this.nodesOnShard_=g.nodesFromRows(this.shard_,this.shard_.nodeTable.readAll()),this.render()},o.prototype.onWireTableChange_=function(){var a=this.shard_.wireTable.readAll();this.incomingConnectionNodes_=a.filter(function(a){return a.remoteNodeID===this.myNode_.entityID},this).map(function(a){return e.find(this.nodesOnShard_,function(b){return b.entityID===a.localNodeID})},this).filter(function(a){return void 0!==a});var b=e.find(a,function(a){return a.localNodeID===this.myNode_.entityID}.bind(this));this.remoteNode_=b?e.find(this.nodesOnShard_,function(a){return a.entityID===b.remoteNodeID}):null,this.render()},o.prototype.getUserSections_=function(a){var b=$.ajax({dataType:"json",url:"/v2/sections/membership"}),c=$.ajax({dataType:"json",url:"/v2/sections"});$.when(b,c).done(function(b,c){var d=b[0],e=c[0];a(d.concat(e))})},o.prototype.buildShardChoiceList_=function(a,b){if(this.shardChoices_.length=0,b){var c=this.makeShardIDFromSeed_(b);this.shardChoices_.push({shardSeed:b,shardID:c,displayName:b})}if(this.shardChoices_=this.shardChoices_.concat(a.map(function(a){return{shardSeed:a.id,shardID:this.makeShardIDFromSeed_(a.id),displayName:a.name}}.bind(this))),0===this.shardChoices_.length){var e=d.createUuid(),g=this.makeShardIDFromSeed_(e);this.shardChoices_.push({shardSeed:e,shardID:g,displayName:f.myPrivateNetwork()})}1!==this.shardChoices_.length||this.selectedShardID_||this.setShardID(this.shardChoices_[0].shardID)},o.prototype.makeShardIDFromSeed_=function(a){
return("ns_"+this.levelKey_+"_"+a).substr(0,48)},o.prototype.getShareLink=function(){if(!this.displayName_)return"";var a=e.find(this.shardChoices_,function(a){return a.shardID===this.selectedShardID_}.bind(this));if(a){var b=document.location.protocol+"//"+document.location.host+document.location.pathname;return b+"?s="+a.shardSeed}return""}},{"../utils":324,"./NetSimAlert":186,"./NetSimClientNode":193,"./NetSimGlobals":206,"./NetSimLogger":213,"./NetSimNodeFactory":221,"./NetSimRemoteNodeSelectionPanel":229,"./NetSimRouterNode":232,"./NetSimShardSelectionPanel":241,"./locale":264}],241:[function(a,b,c){"use strict";var d=a("../utils"),e=a("./locale"),f=a("./NetSimShardSelectionPanel.html.ejs"),g=a("./NetSimPanel"),h=a("../constants").KeyCodes,i="",j=b.exports=function(a,b,c){this.displayName_=b.displayName,this.shardChoices_=d.valueOr(b.shardChoices,[]),this.selectedShardID_=d.valueOr(b.selectedShardID,i),this.setNameCallback_=c.setNameCallback,this.setShardCallback_=c.setShardCallback,g.call(this,a,{className:"netsim-shard-selection-panel",panelTitle:e.pickASection(),userToggleable:!1})};j.inherits(g),j.prototype.render=function(){j.superPrototype.render.call(this);var a=$(f({displayName:this.displayName_,selectedShardID:this.selectedShardID_,shardChoices:this.shardChoices_,SELECTOR_NONE_VALUE:i}));this.getBody().html(a);var b=this.getBody().find("#netsim-lobby-name");b.keyup(this.onNameKeyUp_.bind(this));var c=this.getBody().find("#netsim-lobby-set-name-button");c.click(this.setNameButtonClick_.bind(this));var d=this.getBody().find("#netsim-shard-select");d.change(this.onShardSelectChange_.bind(this)),d.keyup(this.onShardSelectKeyUp_.bind(this));var e=this.getBody().find("#netsim-shard-confirm-button");e.click(this.setShardButtonClick_.bind(this)),0===this.displayName_.length?b.focus():this.selectedShardID_===i&&d.focus()},j.prototype.onNameKeyUp_=function(a){var b=a.target.value,c=this.getBody().find("#netsim-lobby-set-name-button");c.attr("disabled",0===b.length),b.length>0&&a.which===h.ENTER&&this.setNameButtonClick_()},j.prototype.setNameButtonClick_=function(){this.setNameCallback_(this.getBody().find("#netsim-lobby-name").val())},j.prototype.onShardSelectChange_=function(a){var b=a.target.value,c=this.getBody().find("#netsim-shard-confirm-button");c.attr("disabled",!b||b===i)},j.prototype.onShardSelectKeyUp_=function(a){var b=a.target.value;b&&b!==i&&a.which===h.ENTER&&this.setShardButtonClick_()},j.prototype.setShardButtonClick_=function(){this.setShardCallback_(this.getBody().find("#netsim-shard-select").val())}},{"../constants":108,"../utils":324,"./NetSimPanel":226,"./NetSimShardSelectionPanel.html.ejs":240,"./locale":264}],240:[function(require,module,exports){module.exports=function(){var t=function anonymous(locals,filters,escape){escape=escape||function(a){return String(a).replace(/&(?!\w+;)/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")};var buf=[];with(locals||{})!function(){buf.push("");var a=require("./locale");if(buf.push('\n<div class="content-wrap">\n  <div class="field-box display-name-control">\n    <label for="netsim-lobby-name">',escape(a.myName()),'</label>\n    <input id="netsim-lobby-name" type="text" value="',escape(displayName),'" '),displayName.length>0&&buf.push("disabled"),buf.push(" />\n    "),0===displayName.length&&buf.push('\n      <input id="netsim-lobby-set-name-button" type="button" value="',escape(a.setName()),'" disabled />\n    '),buf.push("\n  </div>\n  "),displayName.length>0){buf.push('\n    <div class="field-box shard-control">\n      <label for="netsim-shard-select">',escape(a.mySection()),'</label>\n      <select id="netsim-shard-select" '),selectedShardID&&buf.push("disabled"),buf.push('>\n        <option value="',escape(SELECTOR_NONE_VALUE),'">',escape(a.dropdownPickOne()),"</option>\n        ");var b=!1;shardChoices.forEach(function(a){var c="";a.shardID===selectedShardID&&(c="selected",b=!0),buf.push('\n              <option value="',escape(a.shardID),'" ',escape(c),">",escape(a.displayName),"</option>\n            ")}),buf.push("\n      </select>\n      "),selectedShardID||(buf.push('\n        <input id="netsim-shard-confirm-button" type="button" value="',escape(a.joinSection()),'" '),b||buf.push("disabled"),buf.push(" />\n      ")),buf.push("\n    </div>\n  ")}buf.push('\n  <div class="clearfix"></div>\n</div>\n')}();return buf.join("")};return function(a){return t(a,require("ejs").filters)}}()},{"./locale":264,ejs:500}],229:[function(a,b,c){"use strict";var d=a("../utils"),e=d.getLodash(),f=a("./locale"),g=a("./NetSimPanel"),h=a("./NetSimRemoteNodeSelectionPanel.html.ejs"),i=a("./NetSimConstants").NodeType,j=a("./NetSimGlobals"),k=b.exports=function(a,b,c){this.user_=b.user,this.shardID_=b.shardID,this.nodesOnShard_=b.nodesOnShard,this.incomingConnectionNodes_=b.incomingConnectionNodes,this.remoteNode_=b.remoteNode,this.myNodeID_=b.myNodeID,this.addRouterCallback_=c.addRouterCallback,this.cancelButtonCallback_=c.cancelButtonCallback,this.joinButtonCallback_=c.joinButtonCallback,this.resetShardCallback_=c.resetShardCallback,g.call(this,a,{className:"netsim-lobby-panel",panelTitle:this.getLocalizedPanelTitle(),userToggleable:!1})};k.inherits(g),k.prototype.render=function(){var a=$("#reference_area").first().clone(!0);k.superPrototype.render.call(this);var b=$(h({controller:this,nodesOnShard:this.nodesOnShard_,incomingConnectionNodes:this.incomingConnectionNodes_,remoteNode:this.remoteNode_}));this.getBody().html(b),this.updateLayout(),this.getBody().find(".instructions").append(a),this.canCurrentUserResetShard()&&this.addButton(f.shardResetButton(),this.resetShardCallback_),this.addRouterButton_=this.getBody().find("#netsim-lobby-add-router"),this.addRouterButton_.click(this.addRouterCallback_),this.getBody().find(".join-button").click(this.onJoinClick_.bind(this)),this.getBody().find(".accept-button").click(this.onJoinClick_.bind(this)),this.getBody().find(".cancel-button").click(this.cancelButtonCallback_)},k.prototype.updateLayout=function(){var a=this.getBody().find("#netsim-scrolling-lobby"),b=this.getBody().closest("#netsim-disconnected");if(a.is(":visible")){a.height("none");var c=b.prop("scrollHeight")-b.prop("clientHeight");if(c>0){var d=a.height()-c,e=a.find("tr").first().outerHeight(!0);a.height(Math.max(d,e))}}},k.prototype.getLocalizedPanelTitle=function(){var a=j.getLevelConfig();return a.canConnectToClients&&a.canConnectToRouters?f.connectToANode():a.canConnectToClients?f.connectToAPeer():a.canConnectToRouters?a.broadcastMode?f.connectToARoom():f.connectToARouter():f.connectToANode()},k.prototype.getLocalizedLobbyInstructions=function(){var a=j.getLevelConfig();return a.canConnectToClients&&a.canConnectToRouters?f.lobbyInstructionsGeneral():a.canConnectToClients?f.lobbyInstructionsForPeers():a.canConnectToRouters?a.broadcastMode?f.lobbyInstructionsForRooms():f.lobbyInstructionsForRouters():f.lobbyInstructionsGeneral()},k.prototype.onJoinClick_=function(a){var b=$(a.target);if(!b.is("[disabled]")){var c=b.data("nodeId"),d=e.find(this.nodesOnShard_,function(a){return a.entityID===c});this.joinButtonCallback_(d)}},k.prototype.isMyNode=function(a){return this.myNodeID_===a.entityID},k.prototype.canConnectToNode=function(a){if(this.isMyNode(a))return!1;var b=a.getNodeType()===i.CLIENT,c=a.getNodeType()===i.ROUTER;if(a.isFull())return!1;var d=j.getLevelConfig(),e=d.canConnectToClients,f=d.canConnectToRouters;return b&&e||c&&f},k.prototype.hasOutgoingRequest=function(){return!!this.remoteNode_},k.prototype.shouldShowNode=function(a){var b=j.getLevelConfig(),c=a.getNodeType()===i.CLIENT,d=a.getNodeType()===i.ROUTER,e=b.showClientsInLobby,f=b.showRoutersInLobby;return c&&e||d&&f},k.prototype.canCurrentUserResetShard=function(){if(!this.user_)return!1;var a=/_(\d+)$/.exec(this.shardID_);if(a){var b=parseInt(a[1],10);return this.user_.isAdmin||this.user_.ownsSection(b)}}},{"../utils":324,"./NetSimConstants":194,"./NetSimGlobals":206,"./NetSimPanel":226,"./NetSimRemoteNodeSelectionPanel.html.ejs":228,"./locale":264}],228:[function(require,module,exports){module.exports=function(){var t=function anonymous(locals,filters,escape){escape=escape||function(a){return String(a).replace(/&(?!\w+;)/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")};var buf=[];with(locals||{})!function(){function a(a,b,c,d){var e=i.valueOr(c,[]);e.push("netsim-button"),e.push("large-button"),d=i.valueOr(d,{});var f='<span class="'+e.join(" ")+'" ';b&&(f+='id="'+b+'" ');for(var g in d)d.hasOwnProperty(g)&&(f+=g+'="'+d[g]+'" ');return f+=">"+a+"</span>"}function b(a){a?buf.push('<table class="',escape(a),'">'):buf.push("<table>")}function c(){buf.push("</table>")}function d(){buf.push("<tbody>")}function e(){buf.push("</tbody>")}function f(a){buf.push('\n    <thead>\n      <tr>\n        <th colspan="3">',escape(a),"</th>\n      </tr>\n    </thead>\n  ")}function g(a){a=i.valueOr(a,""),buf.push('\n    <tr>\n      <td colspan="3" class="empty-row">',a,"</td>\n    </tr>\n  ")}function h(b,c,d,e){var f;"join-button"===d?f=a(k.buttonJoin(),void 0,[d,e],{"data-node-id":b.nodeID}):"accept-button"===d?f=a(k.buttonAccept(),void 0,[d,e],{"data-node-id":b.nodeID}):"cancel-button"===d?f=a(k.buttonCancel(),void 0,[d,e,"secondary"],{"data-node-id":b.nodeID}):"full-button"===d&&(f=a(k.buttonFull(),void 0,[d,e],{disabled:"disabled"})),buf.push("\n    <tr>\n      <td nowrap>",escape(b.displayName)," <small>(",escape(b.hostname),")</small></td>\n      "),f?buf.push("\n        <td>",c,'</td>\n        <td class="button-column">\n          ',f,"\n        </td>\n      "):buf.push('\n        <td colspan="2">',c,"</td>\n      "),buf.push("\n    </tr>\n  ")}buf.push("");var i=require("../utils"),j=i.getLodash(),k=require("./locale"),l=require("./NetSimGlobals"),m=require("./NetSimConstants").NodeType,n=l.getAssetUrlFunction(),o=l.getLevelConfig(),p=function(a){return void 0===j.find(incomingConnectionNodes,function(b){return b.entityID===a.entityID})},q=function(a){return!remoteNode||remoteNode.entityID!==a.entityID},r=function(a){var b=a.getNodeType()===m.ROUTER?["router-row"]:["user-row"];return controller.isMyNode(a)&&b.push("own-row"),{nodeID:a.entityID,classAttr:b.join(" "),displayName:a.getDisplayName(),hostname:a.getHostname(),status:a.getStatus(),isFull:a.isFull(),canConnectToNode:controller.canConnectToNode(a)}},s=function(a,b){return a.displayName>b.displayName?1:-1},t=nodesOnShard.filter(controller.shouldShowNode.bind(controller)).filter(p).filter(q).map(r).sort(s),u=incomingConnectionNodes.filter(controller.shouldShowNode.bind(controller)).filter(q).map(r).sort(s),v=(remoteNode?[remoteNode]:[]).filter(controller.shouldShowNode.bind(controller)).map(r);buf.push('\n<div class="content-wrap">\n  <div class="instructions">',escape(controller.getLocalizedLobbyInstructions()),'</div>\n  <div class="controls">\n\n    '),v.length>0&&(b(),f(k.outgoingConnectionRequests()),d(),v.forEach(function(a){var b=k.lobbyStatusWaitingForOther({spinner:'<img src="'+n("media/netsim/loading.gif")+'" />',otherName:a.displayName,otherStatus:a.status});h(a,b,"cancel-button",a.classAttr)}),e(),c()),u.length>0&&(b(),f(k.incomingConnectionRequests()),d(),u.forEach(function(a){var b;!controller.hasOutgoingRequest()&&a.canConnectToNode&&(b="accept-button");var c=k.lobbyStatusWaitingForYou();h(a,c,b,a.classAttr)}),e(),c()),buf.push("\n\n    "),b("nomargin"),f(k.lobby()),c(),buf.push('\n    <div id="netsim-scrolling-lobby">\n    '),b(),d(),t.forEach(function(a){var b;controller.hasOutgoingRequest()||(a.isFull?b="full-button":a.canConnectToNode&&(b="join-button")),h(a,a.status,b,a.classAttr)});var w=[];if(!controller.hasOutgoingRequest()&&o.showAddRouterButton){var x=o.broadcastMode?k.addRoom():k.addRouter();w.push(a(x,"netsim-lobby-add-router",["secondary"]))}o.showLogBrowserButton&&w.push(a(k.logBrowserButton(),"show-router-log-modal",["secondary"],{"data-toggle":"modal","data-target":"#router-log-modal"})),w.length>0?g(w.join(" ")):0===t.length&&g(k.lobbyIsEmpty()),e(),c(),buf.push('\n    </div>\n\n  </div>\n  <div class="clear"></div>\n</div>\n')}();return buf.join("")};return function(a){return t(a,require("ejs").filters)}}()},{"../utils":324,"./NetSimConstants":194,"./NetSimGlobals":206,"./locale":264,ejs:500}],221:[function(a,b,c){"use strict";var d=a("./NetSimConstants"),e=d.NodeType,f=b.exports;f.nodesFromRows=function(a,b){return b.map(f.nodeFromRow.bind(this,a))},f.nodeFromRow=function(b,c){if(c.type===e.CLIENT){var d=a("./NetSimClientNode");return new d(b,c)}if(c.type===e.ROUTER){var f=a("./NetSimRouterNode");return new f(b,c)}throw new Error("Unable to map row to node.")}},{"./NetSimClientNode":193,"./NetSimConstants":194,"./NetSimRouterNode":232}],232:[function(a,b,c){"use strict";var d=a("../utils"),e=a("./locale"),f=a("./NetSimConstants"),g=a("./NetSimUtils"),h=a("./NetSimNode"),i=a("./NetSimEntity"),j=a("./NetSimLogEntry"),k=a("./NetSimLogger"),l=a("./NetSimWire"),m=a("./NetSimMessage"),n=a("../ObservableEvent"),o=a("./Packet"),p=a("./DataConverters"),q=a("./NetSimNodeFactory"),r=d.getLodash(),s=g.serializeNumber,t=g.deserializeNumber,u=p.asciiToBinary,v=f.DnsMode,w=f.NodeType,x=f.BITS_PER_BYTE,y=k.getSingleton(),z=a("./NetSimGlobals"),A=6,B=0,C=15,D="dns",E="NOT_FOUND",F=6e5,G=4096,H=b.exports=function(a,b){b=void 0!==b?b:{},h.call(this,a,b);var c=z.getLevelConfig();this.creationTime=d.valueOr(b.creationTime,Date.now()),this.dnsMode=d.valueOr(b.dnsMode,c.defaultDnsMode),this.dnsNodeID=b.dnsNodeID,this.bandwidth=d.valueOr(t(b.bandwidth),c.defaultRouterBandwidth),this.memory=d.valueOr(t(b.memory),c.defaultRouterMemory),this.randomDropChance=d.valueOr(b.randomDropChance,c.defaultRandomDropChance),this.simulateForSender_=void 0,this.simulationTime_=0,this.packetSpec_=[],this.stateCache_={},this.stateChange=new n,this.statsChange=new n,this.myWireRowCache_=[],this.wiresChange=new n,this.myLogRowCache_=[],this.logChange=new n,this.isRouterProcessing_=!1,this.routerQueueCache_=[],this.localRoutingSchedule_=[],this.isAutoDnsProcessing_=!1,this.autoDnsQueue_=[]};H.inherits(h),H.create=function(a,b){i.create(H,a,b)},H.get=function(a,b,c){i.get(H,a,b,c)},H.prototype.buildRow=function(){return d.extend(H.superPrototype.buildRow.call(this),{creationTime:this.creationTime,bandwidth:s(this.bandwidth),memory:s(this.memory),dnsMode:this.dnsMode,dnsNodeID:this.dnsNodeID,randomDropChance:this.randomDropChance})},H.prototype.onMyStateChange_=function(a){this.creationTime=a.creationTime,this.bandwidth=t(a.bandwidth),this.memory=t(a.memory),this.dnsMode=a.dnsMode,this.dnsNodeID=a.dnsNodeID,this.randomDropChance=a.randomDropChance,this.stateChange.notifyObservers(this)},H.prototype.tick=function(a){this.simulationTime_=a.time,this.routeOverdueMessages_(a),this.dnsMode===v.AUTOMATIC&&this.tickAutoDns_(a)},H.prototype.routeOverdueMessages_=function(a){if(!this.isRouterProcessing_){var b=[],c=[];this.localRoutingSchedule_.forEach(function(d){a.time>=d.completionTime?(d.beingRouted=!0,b.push(d.message)):a.time>=d.expirationTime&&(d.beingRouted=!0,c.push(d.message))}),b.length+c.length!==0&&(this.isRouterProcessing_=!0,i.destroyEntities(c,function(){this.routeMessages_(b,function(){this.localRoutingSchedule_=this.localRoutingSchedule_.filter(function(a){return!a.beingRouted}),this.isRouterProcessing_=!1}.bind(this))}.bind(this)))}},H.prototype.recalculateSchedule=function(){for(var a,b,c=0,d=this.simulationTime_,e=0;e<this.routerQueueCache_.length;e++)a=this.routerQueueCache_[e],c+=a.payload.length,b=this.calculateProcessingDurationForMessage_(a),d+=b,this.localSimulationOwnsMessage_(a)&&c<=this.memory&&this.scheduleRoutingForMessage(a,d)},H.prototype.scheduleRoutingForMessage=function(a,b){var c=r.find(this.localRoutingSchedule_,function(b){return b.message.entityID===a.entityID});c?b<c.completionTime&&(c.completionTime=b):this.addMessageToSchedule_(a,b)},H.prototype.addMessageToSchedule_=function(a,b){this.localRoutingSchedule_.push({message:a,completionTime:b,expirationTime:this.simulationTime_+F,beingRouted:!1})},H.prototype.removeMessageFromSchedule_=function(a){for(var b,c=0;c<this.localRoutingSchedule_.length;c++)this.localRoutingSchedule_[c].message.entityID===a.entityID&&(b=c);void 0!==b&&this.localRoutingSchedule_.splice(b,1)},H.prototype.tickAutoDns_=function(){if(!this.isAutoDnsProcessing_){var a=this.autoDnsQueue_.filter(this.localSimulationOwnsMessage_.bind(this));0!==a.length&&(this.isAutoDnsProcessing_=!0,this.processAutoDnsRequests_(a,function(){this.isAutoDnsProcessing_=!1}.bind(this)))}},H.prototype.getDisplayName=function(){return z.getLevelConfig().broadcastMode?e.roomNumberX({x:this.getRouterNumber()}):e.routerNumberX({x:this.getRouterNumber()})},H.prototype.getRouterNumber=function(){var a=z.getLevelConfig().addressFormat,b=a.split(/\D+/).filter(function(a){return a.length>0}).map(function(a){return parseInt(a,10)}).reverse();if(b.length>=2){var c=Math.pow(2,b[1]);return this.entityID%c}return this.entityID},H.prototype.getAddress=function(){return this.makeLocalNetworkAddress_(B)},H.prototype.getAutoDnsAddress=function(){return this.makeLocalNetworkAddress_(C)},H.prototype.getHostname=function(){return this.getDisplayName().replace(/[^\w\d]/g,"").toLowerCase()},H.prototype.getNodeType=function(){return w.ROUTER},H.prototype.getStatus=function(){var a=z.getLevelConfig(),b=this.shard_.wireTable.readAll(),c=b.filter(function(a){return a.remoteNodeID===this.entityID},this);if(0===c.length)return a.broadcastMode?e.roomStatusNoConnections({maximumClients:A}):e.routerStatusNoConnections({maximumClients:A});var d=this.shard_.nodeTable.readAll(),f=c.map(function(a){var b=r.find(d,function(b){return b.id===a.localNodeID});return b?b.name:e.unknownNode()}).join(", ");return c.length>=A?a.broadcastMode?e.roomStatusFull({connectedClients:f}):e.routerStatusFull({connectedClients:f}):a.broadcastMode?e.roomStatus({connectedClients:f,remainingSpace:A-c.length}):e.routerStatus({connectedClients:f,remainingSpace:A-c.length})},H.prototype.isFull=function(){var a=this.shard_.wireTable.readAll(),b=a.filter(function(a){return a.remoteNodeID===this.entityID},this);return b.length>=A},H.prototype.validatePacketSpec_=function(a){z.getLevelConfig().broadcastMode||(a.some(function(a){return a===o.HeaderType.TO_ADDRESS})||y.warn("Packet specification does not have a toAddress field."),a.some(function(a){return a===o.HeaderType.FROM_ADDRESS})||y.warn("Packet specification does not have a fromAddress field."))},H.prototype.initializeSimulation=function(a){if(this.simulateForSender_=a,this.packetSpec_=z.getLevelConfig().routerExpectsPacketHeader,this.validatePacketSpec_(this.packetSpec_),void 0!==a){var b=this.shard_.nodeTable.tableChange,c=this.onNodeTableChange_.bind(this);this.nodeChangeKey_=b.register(c);var d=this.shard_.wireTable.tableChange,e=this.onWireTableChange_.bind(this);this.wireChangeKey_=d.register(e);var f=this.shard_.logTable.tableChange,g=this.onLogTableChange_.bind(this);this.logChangeKey_=f.register(g);var h=this.shard_.messageTable.tableChange,i=this.onMessageTableChange_.bind(this);this.newMessageEventKey_=h.register(i),this.onWireTableChange_(),this.onLogTableChange_()}},H.prototype.stopSimulation=function(){if(void 0!==this.nodeChangeKey_){var a=this.shard_.nodeTable.tableChange;a.unregister(this.nodeChangeKey_),this.nodeChangeKey_=void 0}if(void 0!==this.wireChangeKey_){var b=this.shard_.wireTable.tableChange;b.unregister(this.wireChangeKey_),this.wireChangeKey_=void 0}if(void 0!==this.logChangeKey_){var c=this.shard_.logTable.tableChange;c.unregister(this.logChangeKey_),this.logChangeKey_=void 0}if(void 0!==this.newMessageEventKey_){var d=this.shard_.messageTable.tableChange;d.unregister(this.newMessageEventKey_),this.newMessageEventKey_=void 0}},H.prototype.setDnsMode=function(a){this.dnsMode!==a&&(this.dnsMode===v.NONE?this.dnsNodeID=void 0:this.dnsMode===v.AUTOMATIC&&(this.dnsNodeID=C),this.dnsMode=a,this.update())},H.prototype.setBandwidth=function(a){this.bandwidth!==a&&(this.bandwidth=a,this.recalculateSchedule(),this.update())},H.prototype.setMemory=function(a){this.memory!==a&&(this.memory=a,this.enforceMemoryLimit_(),this.update())},H.prototype.getConnections=function(a){a=a||function(){};var b=this.shard_,c=b.wireTable,d=this.entityID;c.refresh().fail(function(b){a(b,[])}).done(function(){var e=c.readAll().map(function(a){return new l(b,a)}).filter(function(a){return a.remoteNodeID===d});a(null,e)}.bind(this))},H.prototype.countConnections=function(a){a=a||function(){},this.getConnections(function(b,c){a(b,c.length)})},H.prototype.log=function(a,b){j.create(this.shard_,this.entityID,a,b,function(){})};var I=function(a,b){return a.some(function(a){return a===b})};H.prototype.acceptConnection=function(a,b){var c=this;this.countConnections(function(a,d){return a?void b(a,!1):d>A?void b(new Error("Too many connections"),!1):void c.update(function(a){b(a,null===a)})})},H.prototype.requestAddress=function(a,b,c){c=c||function(){};var d=this;this.getConnections(function(e,f){if(e)return void c(e);for(var g,h=f.filter(function(a){return void 0!==a.localAddress}).map(function(a){return a.localAddress}),i=z.getLevelConfig().addressFormat,j=i.split(/\D+/).filter(function(a){return a.length>0}).map(function(a){return parseInt(a,10)}).reverse(),k=Math.min(Math.pow(2,j[0]),G),l=[],m=0;k>m;m++)g=this.makeLocalNetworkAddress_(m),g===this.getAddress()||g===this.getAutoDnsAddress()||I(h,g)||l.push(g);var n=z.randomIntInRange(0,l.length);a.localAddress=l[n],a.localHostname=b,a.remoteAddress=d.getAddress(),a.remoteHostname=d.getHostname(),a.update(c),y.info(this.getDisplayName()+": Assigned address "+a.localAddress+" to host "+a.localHostname)}.bind(this))},H.prototype.makeLocalNetworkAddress_=function(a){var b=z.getLevelConfig().addressFormat,c=!1,d=!1;return b.split(/(\D+)/).reverse().map(function(b){var e=parseInt(b,10);return isNaN(e)?b:c?d?"0":(d=!0,this.getRouterNumber().toString()):(c=!0,a.toString())}.bind(this)).reverse().join("")},H.prototype.getAddressTable=function(){var a=this.myWireRowCache_.map(function(a){return{hostname:a.localHostname,address:a.localAddress,isLocal:a.localNodeID===this.simulateForSender_,isDnsNode:a.localNodeID===this.dnsNodeID}}.bind(this));return this.dnsMode===v.AUTOMATIC&&a.push({hostname:D,address:this.getAutoDnsAddress(),isLocal:!1,isDnsNode:!0}),a},H.prototype.getAddressForNodeID_=function(a){var b=r.find(this.myWireRowCache_,function(b){return b.localNodeID===a});return void 0!==b?b.localAddress:void 0},H.prototype.getAddressForHostname_=function(a){if(a===this.getHostname())return this.getAddress();if(this.dnsMode===v.AUTOMATIC&&a===D)return this.getAutoDnsAddress();var b=r.find(this.myWireRowCache_,function(b){return b.localHostname===a});if(void 0!==b)return b.localAddress;if(!z.getLevelConfig().connectedRouters)return void 0;var c=q.nodesFromRows(this.shard_,this.shard_.nodeTable.readAll()),d=r.find(c,function(b){return b.getHostname()===a});return d?d.getAddress():void 0},H.prototype.getNodeIDForAddress_=function(a){if(a===this.getAddress())return this.entityID;if(this.dnsMode===v.AUTOMATIC&&a===this.getAutoDnsAddress())return this.entityID;var b=r.find(this.myWireRowCache_,function(b){return b.localAddress===a});return void 0!==b?b.localNodeID:void 0},H.prototype.getNextNodeTowardAddress_=function(a,b,c){if(a===this.getAddress())return this;if(this.dnsMode===v.AUTOMATIC&&a===this.getAutoDnsAddress())return this;var e=q.nodesFromRows(this.shard_,this.shard_.nodeTable.readAll()),f=r.find(this.myWireRowCache_,function(b){return b.localAddress===a});if(void 0!==f){var g=r.find(e,function(a){return a.entityID===f.localNodeID});if(void 0!==g)return g}var h=z.getLevelConfig();if(!h.connectedRouters)return null;var i=r.find(e,function(b){return a===b.getAddress()||b.dnsMode===v.AUTOMATIC&&b.getNodeType()===w.ROUTER&&a===b.getAutoDnsAddress()});if(!i)return null;var j=null;if(i.getNodeType()===w.ROUTER)j=i;else{var k=i.getOutgoingWire();k&&(j=d.valueOr(r.find(e,function(a){return a.entityID===k.remoteNodeID}),null))}if(!j)return null;if(b>0){var l=e.filter(function(a){return a.getNodeType()===w.ROUTER&&a.entityID!==j.entityID&&a.entityID!==this.entityID&&!c.some(function(b){return a.entityID===b})},this);if(l.length>0)return z.randomPickOne(l)}return j},H.prototype.onNodeTableChange_=function(){var a=r.find(this.shard_.nodeTable.readAll(),function(a){return a.id===this.entityID}.bind(this));void 0!==a&&(r.isEqual(this.stateCache_,a)||(this.stateCache_=a,this.onMyStateChange_(a)))},H.prototype.onWireTableChange_=function(){var a=this.shard_.wireTable.readAll().filter(function(a){return a.remoteNodeID===this.entityID}.bind(this));r.isEqual(this.myWireRowCache_,a)||(this.myWireRowCache_=a,this.wiresChange.notifyObservers())},H.prototype.onLogTableChange_=function(){var a=this.shard_.logTable.readAll().filter(function(a){return a.nodeID===this.entityID}.bind(this));r.isEqual(this.myLogRowCache_,a)||(this.myLogRowCache_=a,this.logChange.notifyObservers())},H.prototype.getLog=function(){return this.myLogRowCache_.map(function(a){return new j(this.shard_,a,this.packetSpec_)}.bind(this))},H.prototype.getQueuedPacketCount=function(){return this.routerQueueCache_.length},H.prototype.getMemoryInUse=function(){return this.routerQueueCache_.reduce(function(a,b){return a+b.payload.length},0)},H.prototype.getCurrentDataRate=function(){return Math.min(this.getMemoryInUse(),this.bandwidth)},H.prototype.onMessageTableChange_=function(){if(!this.simulateForSender_)throw new Error("Non-simulating router got message table change notifiction");var a=this.shard_.messageTable.readAll().map(function(a){return new m(this.shard_,a)}.bind(this));this.updateRouterQueue_(a),this.dnsMode===v.AUTOMATIC&&this.updateAutoDnsQueue_(a)},H.prototype.updateRouterQueue_=function(a){var b=a.filter(m.isValid).filter(this.isMessageToRouter_.bind(this));r.isEqual(this.routerQueueCache_,b)||(y.info(this.getDisplayName()+": Message queue updated (size "+b.length+")"),this.routerQueueCache_=b,this.recalculateSchedule(),this.enforceMemoryLimit_(),this.statsChange.notifyObservers(this))},H.prototype.enforceMemoryLimit_=function(){var a=this.findFirstLocallySimulatedPacketOverMemoryLimit();a&&(this.removeMessageFromSchedule_(a),a.destroy(function(b){b||this.log(a.payload,j.LogStatus.DROPPED)}.bind(this)))},H.prototype.findFirstLocallySimulatedPacketOverMemoryLimit=function(){for(var a,b=0,c=0;c<this.routerQueueCache_.length;c++)if(a=this.routerQueueCache_[c],b+=a.payload.length,b>this.memory&&this.localSimulationOwnsMessage_(a))return a;return null},H.prototype.isMessageToRouter_=function(a){return this.dnsMode===v.AUTOMATIC&&this.isMessageToAutoDns_(a)?!1:a.toNodeID===this.entityID},H.prototype.routeMessages_=function(a,b){return 0===a.length?void b(null):void this.routeMessage_(a[0],function(c,d){return c?void b(c,d):void this.routeMessages_(a.slice(1),b)}.bind(this))},H.prototype.routeMessage_=function(a,b){a.destroy(function(c,d){if(c)return void b(c,d);if(this.randomDropChance>0&&z.random()<=this.randomDropChance)return this.log(a.payload,j.LogStatus.DROPPED),void b(null);var e=z.getLevelConfig();e.broadcastMode?this.forwardMessageToAll_(a,b):this.forwardMessageToRecipient_(a,b)}.bind(this))},H.prototype.forwardMessageToAll_=function(a,b){var c=this.myWireRowCache_.map(function(a){return a.localNodeID});this.forwardMessageToNodeIDs_(a,c,function(c,d){c?this.log(a.payload,j.LogStatus.DROPPED):this.log(a.payload,j.LogStatus.SUCCESS),b(c,d)}.bind(this))},H.prototype.forwardMessageToNodeIDs_=function(a,b,c){var d=b.map(function(b){return{fromNodeID:this.entityID,toNodeID:b,simulatedBy:b,payload:a.payload}},this);m.sendMany(this.shard_,d,c)},H.prototype.forwardMessageToRecipient_=function(a,b){var c,d=this.entityID;try{var e=new o(this.packetSpec_,a.payload);c=e.getHeaderAsAddressString(o.HeaderType.TO_ADDRESS)}catch(f){return y.warn("Packet not readable by router"),this.log(a.payload,j.LogStatus.DROPPED),void b(null)}var g=this.getNextNodeTowardAddress_(c,a.extraHopsRemaining,a.visitedNodeIDs);if(null===g)return y.warn("Destination address not reachable"),this.log(a.payload,j.LogStatus.DROPPED),void b(null);if(g===this&&c===this.getAddress())return y.warn("Packet stopped at router."),this.log(a.payload,j.LogStatus.SUCCESS),void b(null);var h=a.simulatedBy;g.getNodeType()===w.CLIENT&&(h=g.entityID),m.send(this.shard_,{fromNodeID:d,toNodeID:g.entityID,simulatedBy:h,payload:a.payload,extraHopsRemaining:Math.max(0,a.extraHopsRemaining-1),visitedNodeIDs:a.visitedNodeIDs.concat(this.entityID)},function(c,d){this.log(a.payload,j.LogStatus.SUCCESS),b(c,d)}.bind(this))},H.prototype.localSimulationOwnsMessage_=function(a){return this.simulateForSender_&&a.simulatedBy===this.simulateForSender_},H.prototype.calculateProcessingDurationForMessage_=function(a){return this.bandwidth===1/0?0:1e3*a.payload.length/this.bandwidth},H.prototype.updateAutoDnsQueue_=function(a){var b=a.filter(this.isMessageToAutoDns_.bind(this));r.isEqual(this.autoDnsQueue_,b)||(this.autoDnsQueue_=b)},H.prototype.isMessageToAutoDns_=function(a){var b,c;try{b=new o(this.packetSpec_,a.payload),c=b.getHeaderAsAddressString(o.HeaderType.TO_ADDRESS)}catch(d){return y.warn("Packet not readable by auto-DNS: "+d),!1}return a.toNodeID===this.entityID&&a.fromNodeID===this.entityID&&c===this.getAutoDnsAddress()},H.prototype.processAutoDnsRequests_=function(a,b){i.destroyEntities(a,function(c,d){return c?void b(c,d):void this.generateDnsResponses_(a,b)}.bind(this))},H.prototype.generateDnsResponses_=function(a,b){return 0===a.length?void b(null):void this.generateDnsResponse_(a[0],function(c,d){return c?void b(c,d):void this.generateDnsResponses_(a.slice(1),b)}.bind(this))},H.prototype.generateDnsResponse_=function(a,b){var c,f,g,h,i,j,k=this.entityID,l=this.entityID;try{c=new o(this.packetSpec_,a.payload),f=c.getHeaderAsAddressString(o.HeaderType.FROM_ADDRESS),g=c.getBodyAsAscii(x)}catch(n){return void b(n)}var p=g.match(/GET\s+(\S.*)/);if(null!==p){var q=p[1].split(/\s+/).map(function(a){var b=this.getAddressForHostname_(a);return a+":"+d.valueOr(b,E)}.bind(this));i=q.join(" ")}else i=e.autoDnsUsageMessage();h={fromAddress:this.getAutoDnsAddress(),toAddress:f,packetIndex:1,packetCount:1},j=c.encoder.concatenateBinary(c.encoder.makeBinaryHeaders(h),u(i,x)),m.send(this.shard_,{fromNodeID:l,toNodeID:k,simulatedBy:a.simulatedBy,payload:j},b)}},{"../ObservableEvent":2,"../utils":324,"./DataConverters":184,"./NetSimConstants":194,"./NetSimEntity":205,"./NetSimGlobals":206,"./NetSimLogEntry":209,"./NetSimLogger":213,"./NetSimMessage":215,"./NetSimNode":220,"./NetSimNodeFactory":221,"./NetSimUtils":249,"./NetSimWire":258,"./Packet":259,"./locale":264}],215:[function(a,b,c){"use strict";var d=a("../utils"),e=a("./NetSimEntity"),f=a("./DataConverters"),g=f.base64ToBinary,h=f.binaryToBase64,i=a("./NetSimLogger"),j=i.getSingleton(),k=b.exports=function(a,b){if(b=void 0!==b?b:{},e.call(this,a,b),this.fromNodeID=b.fromNodeID,this.toNodeID=b.toNodeID,this.simulatedBy=b.simulatedBy,this.payload="",b.base64Payload)try{this.payload=g(b.base64Payload.string,b.base64Payload.len)}catch(c){j.error(c.message)}this.extraHopsRemaining=d.valueOr(b.extraHopsRemaining,0),this.visitedNodeIDs=d.valueOr(b.visitedNodeIDs,[])};k.inherits(e),k.buildRowFromData=function(a){return{fromNodeID:a.fromNodeID,toNodeID:a.toNodeID,simulatedBy:a.simulatedBy,base64Payload:h(a.payload),extraHopsRemaining:d.valueOr(a.extraHopsRemaining,0),visitedNodeIDs:d.valueOr(a.visitedNodeIDs,[])}},k.send=function(a,b,c){try{var d=k.buildRowFromData(b);a.messageTable.create(d,c)}catch(e){c(e,null)}},k.sendMany=function(a,b,c){try{var d=b.map(k.buildRowFromData);a.messageTable.multiCreate(d,c)}catch(e){c(e,null)}},k.isValid=function(a){return/^[01]*$/.test(a.payload)},k.prototype.getTable=function(){return this.shard_.messageTable},k.prototype.buildRow=function(){return k.buildRowFromData(this)}},{"../utils":324,"./DataConverters":184,"./NetSimEntity":205,"./NetSimLogger":213
}],209:[function(a,b,c){"use strict";var d=a("moment"),e=a("../utils"),f=e.getLodash(),g=a("./locale"),h=a("./NetSimEntity"),i=a("./Packet"),j=a("./NetSimNodeFactory"),k=a("./DataConverters"),l=k.formatBinary,m=k.base64ToBinary,n=k.binaryToBase64,o=a("./NetSimLogger"),p=a("./NetSimConstants").BITS_PER_BYTE,q=o.getSingleton(),r=b.exports=function(a,b,c){if(b=void 0!==b?b:{},h.call(this,a,b),this.nodeID=b.nodeID,this.binary="",b.base64Binary)try{this.binary=m(b.base64Binary.string,b.base64Binary.len)}catch(d){q.error(d.message)}this.status=e.valueOr(b.status,r.LogStatus.SUCCESS),this.packet_=new i(e.valueOr(c,[]),this.binary),this.timestamp=void 0!==b.timestamp?b.timestamp:Date.now()};r.inherits(h),r.LogStatus={SUCCESS:"success",DROPPED:"dropped"},r.prototype.getTable=function(){return this.shard_.logTable},r.prototype.buildRow=function(){return{nodeID:this.nodeID,base64Binary:n(this.binary),status:this.status,timestamp:this.timestamp}},r.create=function(a,b,c,d,e){var f=new r(a);f.nodeID=b,f.binary=c,f.status=d,f.timestamp=Date.now(),f.getTable().create(f.buildRow(),function(b,c){return b?void e(b,null):void e(b,new r(a,c))})},r.prototype.getHeaderField=function(a){try{return i.isAddressField(a)?this.packet_.getHeaderAsAddressString(a):this.packet_.getHeaderAsInt(a).toString()}catch(b){return""}},r.prototype.getMessageBinary=function(){return l(this.packet_.getBodyAsBinary(),p)},r.prototype.getMessageAscii=function(){return this.packet_.getBodyAsAscii(p)},r.prototype.getLocalizedStatus=function(){return this.status===r.LogStatus.SUCCESS?g.logStatus_success():this.status===r.LogStatus.DROPPED?g.logStatus_dropped():""},r.prototype.getLocalizedPacketInfo=function(){return g.xOfYPackets({x:this.getHeaderField(i.HeaderType.PACKET_INDEX),y:this.getHeaderField(i.HeaderType.PACKET_COUNT)})},r.prototype.getTimeString=function(){return d(this.timestamp).format("h:mm:ss.SSS A")},r.prototype.getOriginNode=function(){var a=this.shard_.nodeTable.readAll(),b=f.find(a,function(a){return a.id===this.nodeID}.bind(this));return b?j.nodeFromRow(this.shard_,b):null}},{"../utils":324,"./DataConverters":184,"./NetSimConstants":194,"./NetSimEntity":205,"./NetSimLogger":213,"./NetSimNodeFactory":221,"./Packet":259,"./locale":264,moment:504}],504:[function(a,b,c){!function(a,d){"object"==typeof c&&"undefined"!=typeof b?b.exports=d():"function"==typeof define&&define.amd?define(d):a.moment=d()}(this,function(){"use strict";function c(){return Jc.apply(null,arguments)}function d(a){Jc=a}function e(a){return"[object Array]"===Object.prototype.toString.call(a)}function f(a){return a instanceof Date||"[object Date]"===Object.prototype.toString.call(a)}function g(a,b){var c,d=[];for(c=0;c<a.length;++c)d.push(b(a[c],c));return d}function h(a,b){return Object.prototype.hasOwnProperty.call(a,b)}function i(a,b){for(var c in b)h(b,c)&&(a[c]=b[c]);return h(b,"toString")&&(a.toString=b.toString),h(b,"valueOf")&&(a.valueOf=b.valueOf),a}function j(a,b,c,d){return Ea(a,b,c,d,!0).utc()}function k(){return{empty:!1,unusedTokens:[],unusedInput:[],overflow:-2,charsLeftOver:0,nullInput:!1,invalidMonth:null,invalidFormat:!1,userInvalidated:!1,iso:!1}}function l(a){return null==a._pf&&(a._pf=k()),a._pf}function m(a){if(null==a._isValid){var b=l(a);a._isValid=!(isNaN(a._d.getTime())||!(b.overflow<0)||b.empty||b.invalidMonth||b.invalidWeekday||b.nullInput||b.invalidFormat||b.userInvalidated),a._strict&&(a._isValid=a._isValid&&0===b.charsLeftOver&&0===b.unusedTokens.length&&void 0===b.bigHour)}return a._isValid}function n(a){var b=j(NaN);return null!=a?i(l(b),a):l(b).userInvalidated=!0,b}function o(a,b){var c,d,e;if("undefined"!=typeof b._isAMomentObject&&(a._isAMomentObject=b._isAMomentObject),"undefined"!=typeof b._i&&(a._i=b._i),"undefined"!=typeof b._f&&(a._f=b._f),"undefined"!=typeof b._l&&(a._l=b._l),"undefined"!=typeof b._strict&&(a._strict=b._strict),"undefined"!=typeof b._tzm&&(a._tzm=b._tzm),"undefined"!=typeof b._isUTC&&(a._isUTC=b._isUTC),"undefined"!=typeof b._offset&&(a._offset=b._offset),"undefined"!=typeof b._pf&&(a._pf=l(b)),"undefined"!=typeof b._locale&&(a._locale=b._locale),Lc.length>0)for(c in Lc)d=Lc[c],e=b[d],"undefined"!=typeof e&&(a[d]=e);return a}function p(a){o(this,a),this._d=new Date(null!=a._d?a._d.getTime():NaN),Mc===!1&&(Mc=!0,c.updateOffset(this),Mc=!1)}function q(a){return a instanceof p||null!=a&&null!=a._isAMomentObject}function r(a){return 0>a?Math.ceil(a):Math.floor(a)}function s(a){var b=+a,c=0;return 0!==b&&isFinite(b)&&(c=r(b)),c}function t(a,b,c){var d,e=Math.min(a.length,b.length),f=Math.abs(a.length-b.length),g=0;for(d=0;e>d;d++)(c&&a[d]!==b[d]||!c&&s(a[d])!==s(b[d]))&&g++;return g+f}function u(){}function v(a){return a?a.toLowerCase().replace("_","-"):a}function w(a){for(var b,c,d,e,f=0;f<a.length;){for(e=v(a[f]).split("-"),b=e.length,c=v(a[f+1]),c=c?c.split("-"):null;b>0;){if(d=x(e.slice(0,b).join("-")))return d;if(c&&c.length>=b&&t(e,c,!0)>=b-1)break;b--}f++}return null}function x(c){var d=null;if(!Nc[c]&&"undefined"!=typeof b&&b&&b.exports)try{d=Kc._abbr,a("./locale/"+c),y(d)}catch(e){}return Nc[c]}function y(a,b){var c;return a&&(c="undefined"==typeof b?A(a):z(a,b),c&&(Kc=c)),Kc._abbr}function z(a,b){return null!==b?(b.abbr=a,Nc[a]=Nc[a]||new u,Nc[a].set(b),y(a),Nc[a]):(delete Nc[a],null)}function A(a){var b;if(a&&a._locale&&a._locale._abbr&&(a=a._locale._abbr),!a)return Kc;if(!e(a)){if(b=x(a))return b;a=[a]}return w(a)}function B(a,b){var c=a.toLowerCase();Oc[c]=Oc[c+"s"]=Oc[b]=a}function C(a){return"string"==typeof a?Oc[a]||Oc[a.toLowerCase()]:void 0}function D(a){var b,c,d={};for(c in a)h(a,c)&&(b=C(c),b&&(d[b]=a[c]));return d}function E(a,b){return function(d){return null!=d?(G(this,a,d),c.updateOffset(this,b),this):F(this,a)}}function F(a,b){return a._d["get"+(a._isUTC?"UTC":"")+b]()}function G(a,b,c){return a._d["set"+(a._isUTC?"UTC":"")+b](c)}function H(a,b){var c;if("object"==typeof a)for(c in a)this.set(c,a[c]);else if(a=C(a),"function"==typeof this[a])return this[a](b);return this}function I(a,b,c){var d=""+Math.abs(a),e=b-d.length,f=a>=0;return(f?c?"+":"":"-")+Math.pow(10,Math.max(0,e)).toString().substr(1)+d}function J(a,b,c,d){var e=d;"string"==typeof d&&(e=function(){return this[d]()}),a&&(Sc[a]=e),b&&(Sc[b[0]]=function(){return I(e.apply(this,arguments),b[1],b[2])}),c&&(Sc[c]=function(){return this.localeData().ordinal(e.apply(this,arguments),a)})}function K(a){return a.match(/\[[\s\S]/)?a.replace(/^\[|\]$/g,""):a.replace(/\\/g,"")}function L(a){var b,c,d=a.match(Pc);for(b=0,c=d.length;c>b;b++)Sc[d[b]]?d[b]=Sc[d[b]]:d[b]=K(d[b]);return function(e){var f="";for(b=0;c>b;b++)f+=d[b]instanceof Function?d[b].call(e,a):d[b];return f}}function M(a,b){return a.isValid()?(b=N(b,a.localeData()),Rc[b]=Rc[b]||L(b),Rc[b](a)):a.localeData().invalidDate()}function N(a,b){function c(a){return b.longDateFormat(a)||a}var d=5;for(Qc.lastIndex=0;d>=0&&Qc.test(a);)a=a.replace(Qc,c),Qc.lastIndex=0,d-=1;return a}function O(a){return"function"==typeof a&&"[object Function]"===Object.prototype.toString.call(a)}function P(a,b,c){fd[a]=O(b)?b:function(a){return a&&c?c:b}}function Q(a,b){return h(fd,a)?fd[a](b._strict,b._locale):new RegExp(R(a))}function R(a){return a.replace("\\","").replace(/\\(\[)|\\(\])|\[([^\]\[]*)\]|\\(.)/g,function(a,b,c,d,e){return b||c||d||e}).replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&")}function S(a,b){var c,d=b;for("string"==typeof a&&(a=[a]),"number"==typeof b&&(d=function(a,c){c[b]=s(a)}),c=0;c<a.length;c++)gd[a[c]]=d}function T(a,b){S(a,function(a,c,d,e){d._w=d._w||{},b(a,d._w,d,e)})}function U(a,b,c){null!=b&&h(gd,a)&&gd[a](b,c._a,c,a)}function V(a,b){return new Date(Date.UTC(a,b+1,0)).getUTCDate()}function W(a){return this._months[a.month()]}function X(a){return this._monthsShort[a.month()]}function Y(a,b,c){var d,e,f;for(this._monthsParse||(this._monthsParse=[],this._longMonthsParse=[],this._shortMonthsParse=[]),d=0;12>d;d++){if(e=j([2e3,d]),c&&!this._longMonthsParse[d]&&(this._longMonthsParse[d]=new RegExp("^"+this.months(e,"").replace(".","")+"$","i"),this._shortMonthsParse[d]=new RegExp("^"+this.monthsShort(e,"").replace(".","")+"$","i")),c||this._monthsParse[d]||(f="^"+this.months(e,"")+"|^"+this.monthsShort(e,""),this._monthsParse[d]=new RegExp(f.replace(".",""),"i")),c&&"MMMM"===b&&this._longMonthsParse[d].test(a))return d;if(c&&"MMM"===b&&this._shortMonthsParse[d].test(a))return d;if(!c&&this._monthsParse[d].test(a))return d}}function Z(a,b){var c;return"string"==typeof b&&(b=a.localeData().monthsParse(b),"number"!=typeof b)?a:(c=Math.min(a.date(),V(a.year(),b)),a._d["set"+(a._isUTC?"UTC":"")+"Month"](b,c),a)}function $(a){return null!=a?(Z(this,a),c.updateOffset(this,!0),this):F(this,"Month")}function _(){return V(this.year(),this.month())}function aa(a){var b,c=a._a;return c&&-2===l(a).overflow&&(b=c[id]<0||c[id]>11?id:c[jd]<1||c[jd]>V(c[hd],c[id])?jd:c[kd]<0||c[kd]>24||24===c[kd]&&(0!==c[ld]||0!==c[md]||0!==c[nd])?kd:c[ld]<0||c[ld]>59?ld:c[md]<0||c[md]>59?md:c[nd]<0||c[nd]>999?nd:-1,l(a)._overflowDayOfYear&&(hd>b||b>jd)&&(b=jd),l(a).overflow=b),a}function ba(a){c.suppressDeprecationWarnings===!1&&"undefined"!=typeof console&&console.warn&&console.warn("Deprecation warning: "+a)}function ca(a,b){var c=!0;return i(function(){return c&&(ba(a+"\n"+(new Error).stack),c=!1),b.apply(this,arguments)},b)}function da(a,b){qd[a]||(ba(b),qd[a]=!0)}function ea(a){var b,c,d=a._i,e=rd.exec(d);if(e){for(l(a).iso=!0,b=0,c=sd.length;c>b;b++)if(sd[b][1].exec(d)){a._f=sd[b][0];break}for(b=0,c=td.length;c>b;b++)if(td[b][1].exec(d)){a._f+=(e[6]||" ")+td[b][0];break}d.match(cd)&&(a._f+="Z"),xa(a)}else a._isValid=!1}function fa(a){var b=ud.exec(a._i);return null!==b?void(a._d=new Date(+b[1])):(ea(a),void(a._isValid===!1&&(delete a._isValid,c.createFromInputFallback(a))))}function ga(a,b,c,d,e,f,g){var h=new Date(a,b,c,d,e,f,g);return 1970>a&&h.setFullYear(a),h}function ha(a){var b=new Date(Date.UTC.apply(null,arguments));return 1970>a&&b.setUTCFullYear(a),b}function ia(a){return ja(a)?366:365}function ja(a){return a%4===0&&a%100!==0||a%400===0}function ka(){return ja(this.year())}function la(a,b,c){var d,e=c-b,f=c-a.day();return f>e&&(f-=7),e-7>f&&(f+=7),d=Fa(a).add(f,"d"),{week:Math.ceil(d.dayOfYear()/7),year:d.year()}}function ma(a){return la(a,this._week.dow,this._week.doy).week}function na(){return this._week.dow}function oa(){return this._week.doy}function pa(a){var b=this.localeData().week(this);return null==a?b:this.add(7*(a-b),"d")}function qa(a){var b=la(this,1,4).week;return null==a?b:this.add(7*(a-b),"d")}function ra(a,b,c,d,e){var f,g=6+e-d,h=ha(a,0,1+g),i=h.getUTCDay();return e>i&&(i+=7),c=null!=c?1*c:e,f=1+g+7*(b-1)-i+c,{year:f>0?a:a-1,dayOfYear:f>0?f:ia(a-1)+f}}function sa(a){var b=Math.round((this.clone().startOf("day")-this.clone().startOf("year"))/864e5)+1;return null==a?b:this.add(a-b,"d")}function ta(a,b,c){return null!=a?a:null!=b?b:c}function ua(a){var b=new Date;return a._useUTC?[b.getUTCFullYear(),b.getUTCMonth(),b.getUTCDate()]:[b.getFullYear(),b.getMonth(),b.getDate()]}function va(a){var b,c,d,e,f=[];if(!a._d){for(d=ua(a),a._w&&null==a._a[jd]&&null==a._a[id]&&wa(a),a._dayOfYear&&(e=ta(a._a[hd],d[hd]),a._dayOfYear>ia(e)&&(l(a)._overflowDayOfYear=!0),c=ha(e,0,a._dayOfYear),a._a[id]=c.getUTCMonth(),a._a[jd]=c.getUTCDate()),b=0;3>b&&null==a._a[b];++b)a._a[b]=f[b]=d[b];for(;7>b;b++)a._a[b]=f[b]=null==a._a[b]?2===b?1:0:a._a[b];24===a._a[kd]&&0===a._a[ld]&&0===a._a[md]&&0===a._a[nd]&&(a._nextDay=!0,a._a[kd]=0),a._d=(a._useUTC?ha:ga).apply(null,f),null!=a._tzm&&a._d.setUTCMinutes(a._d.getUTCMinutes()-a._tzm),a._nextDay&&(a._a[kd]=24)}}function wa(a){var b,c,d,e,f,g,h;b=a._w,null!=b.GG||null!=b.W||null!=b.E?(f=1,g=4,c=ta(b.GG,a._a[hd],la(Fa(),1,4).year),d=ta(b.W,1),e=ta(b.E,1)):(f=a._locale._week.dow,g=a._locale._week.doy,c=ta(b.gg,a._a[hd],la(Fa(),f,g).year),d=ta(b.w,1),null!=b.d?(e=b.d,f>e&&++d):e=null!=b.e?b.e+f:f),h=ra(c,d,e,g,f),a._a[hd]=h.year,a._dayOfYear=h.dayOfYear}function xa(a){if(a._f===c.ISO_8601)return void ea(a);a._a=[],l(a).empty=!0;var b,d,e,f,g,h=""+a._i,i=h.length,j=0;for(e=N(a._f,a._locale).match(Pc)||[],b=0;b<e.length;b++)f=e[b],d=(h.match(Q(f,a))||[])[0],d&&(g=h.substr(0,h.indexOf(d)),g.length>0&&l(a).unusedInput.push(g),h=h.slice(h.indexOf(d)+d.length),j+=d.length),Sc[f]?(d?l(a).empty=!1:l(a).unusedTokens.push(f),U(f,d,a)):a._strict&&!d&&l(a).unusedTokens.push(f);l(a).charsLeftOver=i-j,h.length>0&&l(a).unusedInput.push(h),l(a).bigHour===!0&&a._a[kd]<=12&&a._a[kd]>0&&(l(a).bigHour=void 0),a._a[kd]=ya(a._locale,a._a[kd],a._meridiem),va(a),aa(a)}function ya(a,b,c){var d;return null==c?b:null!=a.meridiemHour?a.meridiemHour(b,c):null!=a.isPM?(d=a.isPM(c),d&&12>b&&(b+=12),d||12!==b||(b=0),b):b}function za(a){var b,c,d,e,f;if(0===a._f.length)return l(a).invalidFormat=!0,void(a._d=new Date(NaN));for(e=0;e<a._f.length;e++)f=0,b=o({},a),null!=a._useUTC&&(b._useUTC=a._useUTC),b._f=a._f[e],xa(b),m(b)&&(f+=l(b).charsLeftOver,f+=10*l(b).unusedTokens.length,l(b).score=f,(null==d||d>f)&&(d=f,c=b));i(a,c||b)}function Aa(a){if(!a._d){var b=D(a._i);a._a=[b.year,b.month,b.day||b.date,b.hour,b.minute,b.second,b.millisecond],va(a)}}function Ba(a){var b=new p(aa(Ca(a)));return b._nextDay&&(b.add(1,"d"),b._nextDay=void 0),b}function Ca(a){var b=a._i,c=a._f;return a._locale=a._locale||A(a._l),null===b||void 0===c&&""===b?n({nullInput:!0}):("string"==typeof b&&(a._i=b=a._locale.preparse(b)),q(b)?new p(aa(b)):(e(c)?za(a):c?xa(a):f(b)?a._d=b:Da(a),a))}function Da(a){var b=a._i;void 0===b?a._d=new Date:f(b)?a._d=new Date(+b):"string"==typeof b?fa(a):e(b)?(a._a=g(b.slice(0),function(a){return parseInt(a,10)}),va(a)):"object"==typeof b?Aa(a):"number"==typeof b?a._d=new Date(b):c.createFromInputFallback(a)}function Ea(a,b,c,d,e){var f={};return"boolean"==typeof c&&(d=c,c=void 0),f._isAMomentObject=!0,f._useUTC=f._isUTC=e,f._l=c,f._i=a,f._f=b,f._strict=d,Ba(f)}function Fa(a,b,c,d){return Ea(a,b,c,d,!1)}function Ga(a,b){var c,d;if(1===b.length&&e(b[0])&&(b=b[0]),!b.length)return Fa();for(c=b[0],d=1;d<b.length;++d)(!b[d].isValid()||b[d][a](c))&&(c=b[d]);return c}function Ha(){var a=[].slice.call(arguments,0);return Ga("isBefore",a)}function Ia(){var a=[].slice.call(arguments,0);return Ga("isAfter",a)}function Ja(a){var b=D(a),c=b.year||0,d=b.quarter||0,e=b.month||0,f=b.week||0,g=b.day||0,h=b.hour||0,i=b.minute||0,j=b.second||0,k=b.millisecond||0;this._milliseconds=+k+1e3*j+6e4*i+36e5*h,this._days=+g+7*f,this._months=+e+3*d+12*c,this._data={},this._locale=A(),this._bubble()}function Ka(a){return a instanceof Ja}function La(a,b){J(a,0,0,function(){var a=this.utcOffset(),c="+";return 0>a&&(a=-a,c="-"),c+I(~~(a/60),2)+b+I(~~a%60,2)})}function Ma(a){var b=(a||"").match(cd)||[],c=b[b.length-1]||[],d=(c+"").match(zd)||["-",0,0],e=+(60*d[1])+s(d[2]);return"+"===d[0]?e:-e}function Na(a,b){var d,e;return b._isUTC?(d=b.clone(),e=(q(a)||f(a)?+a:+Fa(a))-+d,d._d.setTime(+d._d+e),c.updateOffset(d,!1),d):Fa(a).local()}function Oa(a){return 15*-Math.round(a._d.getTimezoneOffset()/15)}function Pa(a,b){var d,e=this._offset||0;return null!=a?("string"==typeof a&&(a=Ma(a)),Math.abs(a)<16&&(a=60*a),!this._isUTC&&b&&(d=Oa(this)),this._offset=a,this._isUTC=!0,null!=d&&this.add(d,"m"),e!==a&&(!b||this._changeInProgress?db(this,$a(a-e,"m"),1,!1):this._changeInProgress||(this._changeInProgress=!0,c.updateOffset(this,!0),this._changeInProgress=null)),this):this._isUTC?e:Oa(this)}function Qa(a,b){return null!=a?("string"!=typeof a&&(a=-a),this.utcOffset(a,b),this):-this.utcOffset()}function Ra(a){return this.utcOffset(0,a)}function Sa(a){return this._isUTC&&(this.utcOffset(0,a),this._isUTC=!1,a&&this.subtract(Oa(this),"m")),this}function Ta(){return this._tzm?this.utcOffset(this._tzm):"string"==typeof this._i&&this.utcOffset(Ma(this._i)),this}function Ua(a){return a=a?Fa(a).utcOffset():0,(this.utcOffset()-a)%60===0}function Va(){return this.utcOffset()>this.clone().month(0).utcOffset()||this.utcOffset()>this.clone().month(5).utcOffset()}function Wa(){if("undefined"!=typeof this._isDSTShifted)return this._isDSTShifted;var a={};if(o(a,this),a=Ca(a),a._a){var b=a._isUTC?j(a._a):Fa(a._a);this._isDSTShifted=this.isValid()&&t(a._a,b.toArray())>0}else this._isDSTShifted=!1;return this._isDSTShifted}function Xa(){return!this._isUTC}function Ya(){return this._isUTC}function Za(){return this._isUTC&&0===this._offset}function $a(a,b){var c,d,e,f=a,g=null;return Ka(a)?f={ms:a._milliseconds,d:a._days,M:a._months}:"number"==typeof a?(f={},b?f[b]=a:f.milliseconds=a):(g=Ad.exec(a))?(c="-"===g[1]?-1:1,f={y:0,d:s(g[jd])*c,h:s(g[kd])*c,m:s(g[ld])*c,s:s(g[md])*c,ms:s(g[nd])*c}):(g=Bd.exec(a))?(c="-"===g[1]?-1:1,f={y:_a(g[2],c),M:_a(g[3],c),d:_a(g[4],c),h:_a(g[5],c),m:_a(g[6],c),s:_a(g[7],c),w:_a(g[8],c)}):null==f?f={}:"object"==typeof f&&("from"in f||"to"in f)&&(e=bb(Fa(f.from),Fa(f.to)),f={},f.ms=e.milliseconds,f.M=e.months),d=new Ja(f),Ka(a)&&h(a,"_locale")&&(d._locale=a._locale),d}function _a(a,b){var c=a&&parseFloat(a.replace(",","."));return(isNaN(c)?0:c)*b}function ab(a,b){var c={milliseconds:0,months:0};return c.months=b.month()-a.month()+12*(b.year()-a.year()),a.clone().add(c.months,"M").isAfter(b)&&--c.months,c.milliseconds=+b-+a.clone().add(c.months,"M"),c}function bb(a,b){var c;return b=Na(b,a),a.isBefore(b)?c=ab(a,b):(c=ab(b,a),c.milliseconds=-c.milliseconds,c.months=-c.months),c}function cb(a,b){return function(c,d){var e,f;return null===d||isNaN(+d)||(da(b,"moment()."+b+"(period, number) is deprecated. Please use moment()."+b+"(number, period)."),f=c,c=d,d=f),c="string"==typeof c?+c:c,e=$a(c,d),db(this,e,a),this}}function db(a,b,d,e){var f=b._milliseconds,g=b._days,h=b._months;e=null==e?!0:e,f&&a._d.setTime(+a._d+f*d),g&&G(a,"Date",F(a,"Date")+g*d),h&&Z(a,F(a,"Month")+h*d),e&&c.updateOffset(a,g||h)}function eb(a,b){var c=a||Fa(),d=Na(c,this).startOf("day"),e=this.diff(d,"days",!0),f=-6>e?"sameElse":-1>e?"lastWeek":0>e?"lastDay":1>e?"sameDay":2>e?"nextDay":7>e?"nextWeek":"sameElse";return this.format(b&&b[f]||this.localeData().calendar(f,this,Fa(c)))}function fb(){return new p(this)}function gb(a,b){var c;return b=C("undefined"!=typeof b?b:"millisecond"),"millisecond"===b?(a=q(a)?a:Fa(a),+this>+a):(c=q(a)?+a:+Fa(a),c<+this.clone().startOf(b))}function hb(a,b){var c;return b=C("undefined"!=typeof b?b:"millisecond"),"millisecond"===b?(a=q(a)?a:Fa(a),+a>+this):(c=q(a)?+a:+Fa(a),+this.clone().endOf(b)<c)}function ib(a,b,c){return this.isAfter(a,c)&&this.isBefore(b,c)}function jb(a,b){var c;return b=C(b||"millisecond"),"millisecond"===b?(a=q(a)?a:Fa(a),+this===+a):(c=+Fa(a),+this.clone().startOf(b)<=c&&c<=+this.clone().endOf(b))}function kb(a,b,c){var d,e,f=Na(a,this),g=6e4*(f.utcOffset()-this.utcOffset());return b=C(b),"year"===b||"month"===b||"quarter"===b?(e=lb(this,f),"quarter"===b?e/=3:"year"===b&&(e/=12)):(d=this-f,e="second"===b?d/1e3:"minute"===b?d/6e4:"hour"===b?d/36e5:"day"===b?(d-g)/864e5:"week"===b?(d-g)/6048e5:d),c?e:r(e)}function lb(a,b){var c,d,e=12*(b.year()-a.year())+(b.month()-a.month()),f=a.clone().add(e,"months");return 0>b-f?(c=a.clone().add(e-1,"months"),d=(b-f)/(f-c)):(c=a.clone().add(e+1,"months"),d=(b-f)/(c-f)),-(e+d)}function mb(){return this.clone().locale("en").format("ddd MMM DD YYYY HH:mm:ss [GMT]ZZ")}function nb(){var a=this.clone().utc();return 0<a.year()&&a.year()<=9999?"function"==typeof Date.prototype.toISOString?this.toDate().toISOString():M(a,"YYYY-MM-DD[T]HH:mm:ss.SSS[Z]"):M(a,"YYYYYY-MM-DD[T]HH:mm:ss.SSS[Z]")}function ob(a){var b=M(this,a||c.defaultFormat);return this.localeData().postformat(b)}function pb(a,b){return this.isValid()?$a({to:this,from:a}).locale(this.locale()).humanize(!b):this.localeData().invalidDate()}function qb(a){return this.from(Fa(),a)}function rb(a,b){return this.isValid()?$a({from:this,to:a}).locale(this.locale()).humanize(!b):this.localeData().invalidDate()}function sb(a){return this.to(Fa(),a)}function tb(a){var b;return void 0===a?this._locale._abbr:(b=A(a),null!=b&&(this._locale=b),this)}function ub(){return this._locale}function vb(a){switch(a=C(a)){case"year":this.month(0);case"quarter":case"month":this.date(1);case"week":case"isoWeek":case"day":this.hours(0);case"hour":this.minutes(0);case"minute":this.seconds(0);case"second":this.milliseconds(0)}return"week"===a&&this.weekday(0),"isoWeek"===a&&this.isoWeekday(1),"quarter"===a&&this.month(3*Math.floor(this.month()/3)),this}function wb(a){return a=C(a),void 0===a||"millisecond"===a?this:this.startOf(a).add(1,"isoWeek"===a?"week":a).subtract(1,"ms")}function xb(){return+this._d-6e4*(this._offset||0)}function yb(){return Math.floor(+this/1e3)}function zb(){return this._offset?new Date(+this):this._d}function Ab(){var a=this;return[a.year(),a.month(),a.date(),a.hour(),a.minute(),a.second(),a.millisecond()]}function Bb(){var a=this;return{years:a.year(),months:a.month(),date:a.date(),hours:a.hours(),minutes:a.minutes(),seconds:a.seconds(),milliseconds:a.milliseconds()}}function Cb(){return m(this)}function Db(){return i({},l(this))}function Eb(){return l(this).overflow}function Fb(a,b){J(0,[a,a.length],0,b)}function Gb(a,b,c){return la(Fa([a,11,31+b-c]),b,c).week}function Hb(a){var b=la(this,this.localeData()._week.dow,this.localeData()._week.doy).year;return null==a?b:this.add(a-b,"y")}function Ib(a){var b=la(this,1,4).year;return null==a?b:this.add(a-b,"y")}function Jb(){return Gb(this.year(),1,4)}function Kb(){var a=this.localeData()._week;return Gb(this.year(),a.dow,a.doy)}function Lb(a){return null==a?Math.ceil((this.month()+1)/3):this.month(3*(a-1)+this.month()%3)}function Mb(a,b){return"string"!=typeof a?a:isNaN(a)?(a=b.weekdaysParse(a),"number"==typeof a?a:null):parseInt(a,10)}function Nb(a){return this._weekdays[a.day()]}function Ob(a){return this._weekdaysShort[a.day()]}function Pb(a){return this._weekdaysMin[a.day()]}function Qb(a){var b,c,d;for(this._weekdaysParse=this._weekdaysParse||[],b=0;7>b;b++)if(this._weekdaysParse[b]||(c=Fa([2e3,1]).day(b),d="^"+this.weekdays(c,"")+"|^"+this.weekdaysShort(c,"")+"|^"+this.weekdaysMin(c,""),this._weekdaysParse[b]=new RegExp(d.replace(".",""),"i")),this._weekdaysParse[b].test(a))return b}function Rb(a){var b=this._isUTC?this._d.getUTCDay():this._d.getDay();return null!=a?(a=Mb(a,this.localeData()),this.add(a-b,"d")):b}function Sb(a){var b=(this.day()+7-this.localeData()._week.dow)%7;return null==a?b:this.add(a-b,"d")}function Tb(a){return null==a?this.day()||7:this.day(this.day()%7?a:a-7)}function Ub(a,b){J(a,0,0,function(){return this.localeData().meridiem(this.hours(),this.minutes(),b)})}function Vb(a,b){return b._meridiemParse}function Wb(a){return"p"===(a+"").toLowerCase().charAt(0)}function Xb(a,b,c){return a>11?c?"pm":"PM":c?"am":"AM"}function Yb(a,b){b[nd]=s(1e3*("0."+a))}function Zb(){return this._isUTC?"UTC":""}function $b(){return this._isUTC?"Coordinated Universal Time":""}function _b(a){return Fa(1e3*a)}function ac(){return Fa.apply(null,arguments).parseZone()}function bc(a,b,c){var d=this._calendar[a];return"function"==typeof d?d.call(b,c):d}function cc(a){var b=this._longDateFormat[a],c=this._longDateFormat[a.toUpperCase()];return b||!c?b:(this._longDateFormat[a]=c.replace(/MMMM|MM|DD|dddd/g,function(a){return a.slice(1)}),this._longDateFormat[a])}function dc(){return this._invalidDate}function ec(a){return this._ordinal.replace("%d",a)}function fc(a){return a}function gc(a,b,c,d){var e=this._relativeTime[c];return"function"==typeof e?e(a,b,c,d):e.replace(/%d/i,a)}function hc(a,b){var c=this._relativeTime[a>0?"future":"past"];return"function"==typeof c?c(b):c.replace(/%s/i,b)}function ic(a){var b,c;for(c in a)b=a[c],"function"==typeof b?this[c]=b:this["_"+c]=b;this._ordinalParseLenient=new RegExp(this._ordinalParse.source+"|"+/\d{1,2}/.source)}function jc(a,b,c,d){var e=A(),f=j().set(d,b);return e[c](f,a)}function kc(a,b,c,d,e){if("number"==typeof a&&(b=a,a=void 0),a=a||"",null!=b)return jc(a,b,c,e);var f,g=[];for(f=0;d>f;f++)g[f]=jc(a,f,c,e);return g}function lc(a,b){return kc(a,b,"months",12,"month")}function mc(a,b){return kc(a,b,"monthsShort",12,"month")}function nc(a,b){return kc(a,b,"weekdays",7,"day")}function oc(a,b){return kc(a,b,"weekdaysShort",7,"day")}function pc(a,b){return kc(a,b,"weekdaysMin",7,"day")}function qc(){var a=this._data;return this._milliseconds=Yd(this._milliseconds),this._days=Yd(this._days),this._months=Yd(this._months),a.milliseconds=Yd(a.milliseconds),a.seconds=Yd(a.seconds),a.minutes=Yd(a.minutes),a.hours=Yd(a.hours),a.months=Yd(a.months),a.years=Yd(a.years),this}function rc(a,b,c,d){var e=$a(b,c);return a._milliseconds+=d*e._milliseconds,a._days+=d*e._days,a._months+=d*e._months,a._bubble()}function sc(a,b){return rc(this,a,b,1)}function tc(a,b){return rc(this,a,b,-1)}function uc(a){return 0>a?Math.floor(a):Math.ceil(a)}function vc(){var a,b,c,d,e,f=this._milliseconds,g=this._days,h=this._months,i=this._data;return f>=0&&g>=0&&h>=0||0>=f&&0>=g&&0>=h||(f+=864e5*uc(xc(h)+g),g=0,h=0),i.milliseconds=f%1e3,a=r(f/1e3),i.seconds=a%60,b=r(a/60),i.minutes=b%60,c=r(b/60),i.hours=c%24,g+=r(c/24),e=r(wc(g)),h+=e,g-=uc(xc(e)),d=r(h/12),h%=12,i.days=g,i.months=h,i.years=d,this}function wc(a){return 4800*a/146097}function xc(a){return 146097*a/4800}function yc(a){var b,c,d=this._milliseconds;if(a=C(a),"month"===a||"year"===a)return b=this._days+d/864e5,c=this._months+wc(b),"month"===a?c:c/12;switch(b=this._days+Math.round(xc(this._months)),a){case"week":return b/7+d/6048e5;case"day":return b+d/864e5;case"hour":return 24*b+d/36e5;case"minute":return 1440*b+d/6e4;case"second":return 86400*b+d/1e3;case"millisecond":return Math.floor(864e5*b)+d;default:throw new Error("Unknown unit "+a)}}function zc(){return this._milliseconds+864e5*this._days+this._months%12*2592e6+31536e6*s(this._months/12)}function Ac(a){return function(){return this.as(a)}}function Bc(a){return a=C(a),this[a+"s"]()}function Cc(a){return function(){return this._data[a]}}function Dc(){return r(this.days()/7)}function Ec(a,b,c,d,e){return e.relativeTime(b||1,!!c,a,d)}function Fc(a,b,c){var d=$a(a).abs(),e=me(d.as("s")),f=me(d.as("m")),g=me(d.as("h")),h=me(d.as("d")),i=me(d.as("M")),j=me(d.as("y")),k=e<ne.s&&["s",e]||1===f&&["m"]||f<ne.m&&["mm",f]||1===g&&["h"]||g<ne.h&&["hh",g]||1===h&&["d"]||h<ne.d&&["dd",h]||1===i&&["M"]||i<ne.M&&["MM",i]||1===j&&["y"]||["yy",j];return k[2]=b,k[3]=+a>0,k[4]=c,Ec.apply(null,k)}function Gc(a,b){return void 0===ne[a]?!1:void 0===b?ne[a]:(ne[a]=b,!0)}function Hc(a){var b=this.localeData(),c=Fc(this,!a,b);return a&&(c=b.pastFuture(+this,c)),b.postformat(c)}function Ic(){var a,b,c,d=oe(this._milliseconds)/1e3,e=oe(this._days),f=oe(this._months);a=r(d/60),b=r(a/60),d%=60,a%=60,c=r(f/12),f%=12;var g=c,h=f,i=e,j=b,k=a,l=d,m=this.asSeconds();return m?(0>m?"-":"")+"P"+(g?g+"Y":"")+(h?h+"M":"")+(i?i+"D":"")+(j||k||l?"T":"")+(j?j+"H":"")+(k?k+"M":"")+(l?l+"S":""):"P0D"}var Jc,Kc,Lc=c.momentProperties=[],Mc=!1,Nc={},Oc={},Pc=/(\[[^\[]*\])|(\\)?(Mo|MM?M?M?|Do|DDDo|DD?D?D?|ddd?d?|do?|w[o|w]?|W[o|W]?|Q|YYYYYY|YYYYY|YYYY|YY|gg(ggg?)?|GG(GGG?)?|e|E|a|A|hh?|HH?|mm?|ss?|S{1,9}|x|X|zz?|ZZ?|.)/g,Qc=/(\[[^\[]*\])|(\\)?(LTS|LT|LL?L?L?|l{1,4})/g,Rc={},Sc={},Tc=/\d/,Uc=/\d\d/,Vc=/\d{3}/,Wc=/\d{4}/,Xc=/[+-]?\d{6}/,Yc=/\d\d?/,Zc=/\d{1,3}/,$c=/\d{1,4}/,_c=/[+-]?\d{1,6}/,ad=/\d+/,bd=/[+-]?\d+/,cd=/Z|[+-]\d\d:?\d\d/gi,dd=/[+-]?\d+(\.\d{1,3})?/,ed=/[0-9]*['a-z\u00A0-\u05FF\u0700-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]+|[\u0600-\u06FF\/]+(\s*?[\u0600-\u06FF]+){1,2}/i,fd={},gd={},hd=0,id=1,jd=2,kd=3,ld=4,md=5,nd=6;J("M",["MM",2],"Mo",function(){return this.month()+1}),J("MMM",0,0,function(a){return this.localeData().monthsShort(this,a)}),J("MMMM",0,0,function(a){return this.localeData().months(this,a)}),B("month","M"),P("M",Yc),P("MM",Yc,Uc),P("MMM",ed),P("MMMM",ed),S(["M","MM"],function(a,b){b[id]=s(a)-1}),S(["MMM","MMMM"],function(a,b,c,d){var e=c._locale.monthsParse(a,d,c._strict);null!=e?b[id]=e:l(c).invalidMonth=a});var od="January_February_March_April_May_June_July_August_September_October_November_December".split("_"),pd="Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sep_Oct_Nov_Dec".split("_"),qd={};c.suppressDeprecationWarnings=!1;var rd=/^\s*(?:[+-]\d{6}|\d{4})-(?:(\d\d-\d\d)|(W\d\d$)|(W\d\d-\d)|(\d\d\d))((T| )(\d\d(:\d\d(:\d\d(\.\d+)?)?)?)?([\+\-]\d\d(?::?\d\d)?|\s*Z)?)?$/,sd=[["YYYYYY-MM-DD",/[+-]\d{6}-\d{2}-\d{2}/],["YYYY-MM-DD",/\d{4}-\d{2}-\d{2}/],["GGGG-[W]WW-E",/\d{4}-W\d{2}-\d/],["GGGG-[W]WW",/\d{4}-W\d{2}/],["YYYY-DDD",/\d{4}-\d{3}/]],td=[["HH:mm:ss.SSSS",/(T| )\d\d:\d\d:\d\d\.\d+/],["HH:mm:ss",/(T| )\d\d:\d\d:\d\d/],["HH:mm",/(T| )\d\d:\d\d/],["HH",/(T| )\d\d/]],ud=/^\/?Date\((\-?\d+)/i;c.createFromInputFallback=ca("moment construction falls back to js Date. This is discouraged and will be removed in upcoming major release. Please refer to https://github.com/moment/moment/issues/1407 for more info.",function(a){a._d=new Date(a._i+(a._useUTC?" UTC":""))}),J(0,["YY",2],0,function(){return this.year()%100}),J(0,["YYYY",4],0,"year"),J(0,["YYYYY",5],0,"year"),J(0,["YYYYYY",6,!0],0,"year"),B("year","y"),P("Y",bd),P("YY",Yc,Uc),P("YYYY",$c,Wc),P("YYYYY",_c,Xc),P("YYYYYY",_c,Xc),S(["YYYYY","YYYYYY"],hd),S("YYYY",function(a,b){b[hd]=2===a.length?c.parseTwoDigitYear(a):s(a)}),S("YY",function(a,b){b[hd]=c.parseTwoDigitYear(a)}),c.parseTwoDigitYear=function(a){return s(a)+(s(a)>68?1900:2e3)};var vd=E("FullYear",!1);J("w",["ww",2],"wo","week"),J("W",["WW",2],"Wo","isoWeek"),B("week","w"),B("isoWeek","W"),P("w",Yc),P("ww",Yc,Uc),P("W",Yc),P("WW",Yc,Uc),T(["w","ww","W","WW"],function(a,b,c,d){b[d.substr(0,1)]=s(a)});var wd={dow:0,doy:6};J("DDD",["DDDD",3],"DDDo","dayOfYear"),B("dayOfYear","DDD"),P("DDD",Zc),P("DDDD",Vc),S(["DDD","DDDD"],function(a,b,c){c._dayOfYear=s(a)}),c.ISO_8601=function(){};var xd=ca("moment().min is deprecated, use moment.min instead. https://github.com/moment/moment/issues/1548",function(){var a=Fa.apply(null,arguments);return this>a?this:a}),yd=ca("moment().max is deprecated, use moment.max instead. https://github.com/moment/moment/issues/1548",function(){var a=Fa.apply(null,arguments);return a>this?this:a});La("Z",":"),La("ZZ",""),P("Z",cd),P("ZZ",cd),S(["Z","ZZ"],function(a,b,c){c._useUTC=!0,c._tzm=Ma(a)});var zd=/([\+\-]|\d\d)/gi;c.updateOffset=function(){};var Ad=/(\-)?(?:(\d*)\.)?(\d+)\:(\d+)(?:\:(\d+)\.?(\d{3})?)?/,Bd=/^(-)?P(?:(?:([0-9,.]*)Y)?(?:([0-9,.]*)M)?(?:([0-9,.]*)D)?(?:T(?:([0-9,.]*)H)?(?:([0-9,.]*)M)?(?:([0-9,.]*)S)?)?|([0-9,.]*)W)$/;$a.fn=Ja.prototype;var Cd=cb(1,"add"),Dd=cb(-1,"subtract");c.defaultFormat="YYYY-MM-DDTHH:mm:ssZ";var Ed=ca("moment().lang() is deprecated. Instead, use moment().localeData() to get the language configuration. Use moment().locale() to change languages.",function(a){return void 0===a?this.localeData():this.locale(a)});J(0,["gg",2],0,function(){return this.weekYear()%100}),J(0,["GG",2],0,function(){return this.isoWeekYear()%100}),Fb("gggg","weekYear"),Fb("ggggg","weekYear"),Fb("GGGG","isoWeekYear"),Fb("GGGGG","isoWeekYear"),B("weekYear","gg"),B("isoWeekYear","GG"),P("G",bd),P("g",bd),P("GG",Yc,Uc),P("gg",Yc,Uc),P("GGGG",$c,Wc),P("gggg",$c,Wc),P("GGGGG",_c,Xc),P("ggggg",_c,Xc),T(["gggg","ggggg","GGGG","GGGGG"],function(a,b,c,d){b[d.substr(0,2)]=s(a)}),T(["gg","GG"],function(a,b,d,e){b[e]=c.parseTwoDigitYear(a)}),J("Q",0,0,"quarter"),B("quarter","Q"),P("Q",Tc),S("Q",function(a,b){b[id]=3*(s(a)-1)}),J("D",["DD",2],"Do","date"),B("date","D"),P("D",Yc),P("DD",Yc,Uc),P("Do",function(a,b){return a?b._ordinalParse:b._ordinalParseLenient}),S(["D","DD"],jd),S("Do",function(a,b){b[jd]=s(a.match(Yc)[0],10)});var Fd=E("Date",!0);J("d",0,"do","day"),J("dd",0,0,function(a){return this.localeData().weekdaysMin(this,a)}),J("ddd",0,0,function(a){return this.localeData().weekdaysShort(this,a)}),J("dddd",0,0,function(a){return this.localeData().weekdays(this,a)}),J("e",0,0,"weekday"),J("E",0,0,"isoWeekday"),B("day","d"),B("weekday","e"),B("isoWeekday","E"),P("d",Yc),P("e",Yc),P("E",Yc),P("dd",ed),P("ddd",ed),P("dddd",ed),T(["dd","ddd","dddd"],function(a,b,c){var d=c._locale.weekdaysParse(a);null!=d?b.d=d:l(c).invalidWeekday=a}),T(["d","e","E"],function(a,b,c,d){b[d]=s(a)});var Gd="Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),Hd="Sun_Mon_Tue_Wed_Thu_Fri_Sat".split("_"),Id="Su_Mo_Tu_We_Th_Fr_Sa".split("_");
J("H",["HH",2],0,"hour"),J("h",["hh",2],0,function(){return this.hours()%12||12}),Ub("a",!0),Ub("A",!1),B("hour","h"),P("a",Vb),P("A",Vb),P("H",Yc),P("h",Yc),P("HH",Yc,Uc),P("hh",Yc,Uc),S(["H","HH"],kd),S(["a","A"],function(a,b,c){c._isPm=c._locale.isPM(a),c._meridiem=a}),S(["h","hh"],function(a,b,c){b[kd]=s(a),l(c).bigHour=!0});var Jd=/[ap]\.?m?\.?/i,Kd=E("Hours",!0);J("m",["mm",2],0,"minute"),B("minute","m"),P("m",Yc),P("mm",Yc,Uc),S(["m","mm"],ld);var Ld=E("Minutes",!1);J("s",["ss",2],0,"second"),B("second","s"),P("s",Yc),P("ss",Yc,Uc),S(["s","ss"],md);var Md=E("Seconds",!1);J("S",0,0,function(){return~~(this.millisecond()/100)}),J(0,["SS",2],0,function(){return~~(this.millisecond()/10)}),J(0,["SSS",3],0,"millisecond"),J(0,["SSSS",4],0,function(){return 10*this.millisecond()}),J(0,["SSSSS",5],0,function(){return 100*this.millisecond()}),J(0,["SSSSSS",6],0,function(){return 1e3*this.millisecond()}),J(0,["SSSSSSS",7],0,function(){return 1e4*this.millisecond()}),J(0,["SSSSSSSS",8],0,function(){return 1e5*this.millisecond()}),J(0,["SSSSSSSSS",9],0,function(){return 1e6*this.millisecond()}),B("millisecond","ms"),P("S",Zc,Tc),P("SS",Zc,Uc),P("SSS",Zc,Vc);var Nd;for(Nd="SSSS";Nd.length<=9;Nd+="S")P(Nd,ad);for(Nd="S";Nd.length<=9;Nd+="S")S(Nd,Yb);var Od=E("Milliseconds",!1);J("z",0,0,"zoneAbbr"),J("zz",0,0,"zoneName");var Pd=p.prototype;Pd.add=Cd,Pd.calendar=eb,Pd.clone=fb,Pd.diff=kb,Pd.endOf=wb,Pd.format=ob,Pd.from=pb,Pd.fromNow=qb,Pd.to=rb,Pd.toNow=sb,Pd.get=H,Pd.invalidAt=Eb,Pd.isAfter=gb,Pd.isBefore=hb,Pd.isBetween=ib,Pd.isSame=jb,Pd.isValid=Cb,Pd.lang=Ed,Pd.locale=tb,Pd.localeData=ub,Pd.max=yd,Pd.min=xd,Pd.parsingFlags=Db,Pd.set=H,Pd.startOf=vb,Pd.subtract=Dd,Pd.toArray=Ab,Pd.toObject=Bb,Pd.toDate=zb,Pd.toISOString=nb,Pd.toJSON=nb,Pd.toString=mb,Pd.unix=yb,Pd.valueOf=xb,Pd.year=vd,Pd.isLeapYear=ka,Pd.weekYear=Hb,Pd.isoWeekYear=Ib,Pd.quarter=Pd.quarters=Lb,Pd.month=$,Pd.daysInMonth=_,Pd.week=Pd.weeks=pa,Pd.isoWeek=Pd.isoWeeks=qa,Pd.weeksInYear=Kb,Pd.isoWeeksInYear=Jb,Pd.date=Fd,Pd.day=Pd.days=Rb,Pd.weekday=Sb,Pd.isoWeekday=Tb,Pd.dayOfYear=sa,Pd.hour=Pd.hours=Kd,Pd.minute=Pd.minutes=Ld,Pd.second=Pd.seconds=Md,Pd.millisecond=Pd.milliseconds=Od,Pd.utcOffset=Pa,Pd.utc=Ra,Pd.local=Sa,Pd.parseZone=Ta,Pd.hasAlignedHourOffset=Ua,Pd.isDST=Va,Pd.isDSTShifted=Wa,Pd.isLocal=Xa,Pd.isUtcOffset=Ya,Pd.isUtc=Za,Pd.isUTC=Za,Pd.zoneAbbr=Zb,Pd.zoneName=$b,Pd.dates=ca("dates accessor is deprecated. Use date instead.",Fd),Pd.months=ca("months accessor is deprecated. Use month instead",$),Pd.years=ca("years accessor is deprecated. Use year instead",vd),Pd.zone=ca("moment().zone is deprecated, use moment().utcOffset instead. https://github.com/moment/moment/issues/1779",Qa);var Qd=Pd,Rd={sameDay:"[Today at] LT",nextDay:"[Tomorrow at] LT",nextWeek:"dddd [at] LT",lastDay:"[Yesterday at] LT",lastWeek:"[Last] dddd [at] LT",sameElse:"L"},Sd={LTS:"h:mm:ss A",LT:"h:mm A",L:"MM/DD/YYYY",LL:"MMMM D, YYYY",LLL:"MMMM D, YYYY h:mm A",LLLL:"dddd, MMMM D, YYYY h:mm A"},Td="Invalid date",Ud="%d",Vd=/\d{1,2}/,Wd={future:"in %s",past:"%s ago",s:"a few seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",M:"a month",MM:"%d months",y:"a year",yy:"%d years"},Xd=u.prototype;Xd._calendar=Rd,Xd.calendar=bc,Xd._longDateFormat=Sd,Xd.longDateFormat=cc,Xd._invalidDate=Td,Xd.invalidDate=dc,Xd._ordinal=Ud,Xd.ordinal=ec,Xd._ordinalParse=Vd,Xd.preparse=fc,Xd.postformat=fc,Xd._relativeTime=Wd,Xd.relativeTime=gc,Xd.pastFuture=hc,Xd.set=ic,Xd.months=W,Xd._months=od,Xd.monthsShort=X,Xd._monthsShort=pd,Xd.monthsParse=Y,Xd.week=ma,Xd._week=wd,Xd.firstDayOfYear=oa,Xd.firstDayOfWeek=na,Xd.weekdays=Nb,Xd._weekdays=Gd,Xd.weekdaysMin=Pb,Xd._weekdaysMin=Id,Xd.weekdaysShort=Ob,Xd._weekdaysShort=Hd,Xd.weekdaysParse=Qb,Xd.isPM=Wb,Xd._meridiemParse=Jd,Xd.meridiem=Xb,y("en",{ordinalParse:/\d{1,2}(th|st|nd|rd)/,ordinal:function(a){var b=a%10,c=1===s(a%100/10)?"th":1===b?"st":2===b?"nd":3===b?"rd":"th";return a+c}}),c.lang=ca("moment.lang is deprecated. Use moment.locale instead.",y),c.langData=ca("moment.langData is deprecated. Use moment.localeData instead.",A);var Yd=Math.abs,Zd=Ac("ms"),$d=Ac("s"),_d=Ac("m"),ae=Ac("h"),be=Ac("d"),ce=Ac("w"),de=Ac("M"),ee=Ac("y"),fe=Cc("milliseconds"),ge=Cc("seconds"),he=Cc("minutes"),ie=Cc("hours"),je=Cc("days"),ke=Cc("months"),le=Cc("years"),me=Math.round,ne={s:45,m:45,h:22,d:26,M:11},oe=Math.abs,pe=Ja.prototype;pe.abs=qc,pe.add=sc,pe.subtract=tc,pe.as=yc,pe.asMilliseconds=Zd,pe.asSeconds=$d,pe.asMinutes=_d,pe.asHours=ae,pe.asDays=be,pe.asWeeks=ce,pe.asMonths=de,pe.asYears=ee,pe.valueOf=zc,pe._bubble=vc,pe.get=Bc,pe.milliseconds=fe,pe.seconds=ge,pe.minutes=he,pe.hours=ie,pe.days=je,pe.weeks=Dc,pe.months=ke,pe.years=le,pe.humanize=Hc,pe.toISOString=Ic,pe.toString=Ic,pe.toJSON=Ic,pe.locale=tb,pe.localeData=ub,pe.toIsoString=ca("toIsoString() is deprecated. Please use toISOString() instead (notice the capitals)",Ic),pe.lang=Ed,J("X",0,0,"unix"),J("x",0,0,"valueOf"),P("x",bd),P("X",dd),S("X",function(a,b,c){c._d=new Date(1e3*parseFloat(a,10))}),S("x",function(a,b,c){c._d=new Date(s(a))}),c.version="2.10.6",d(Fa),c.fn=Qd,c.min=Ha,c.max=Ia,c.utc=j,c.unix=_b,c.months=lc,c.isDate=f,c.locale=y,c.invalid=n,c.duration=$a,c.isMoment=q,c.weekdays=nc,c.parseZone=ac,c.localeData=A,c.isDuration=Ka,c.monthsShort=mc,c.weekdaysMin=pc,c.defineLocale=z,c.weekdaysShort=oc,c.normalizeUnits=C,c.relativeTimeThreshold=Gc;var qe=c;return qe})},{}],259:[function(a,b,c){"use strict";var d=a("./NetSimUtils"),e=a("./DataConverters"),f=a("./NetSimGlobals"),g=b.exports=function(a,b){var c=f.getLevelConfig();this.encoder=new g.Encoder(c.addressFormat,c.packetCountBitWidth,a),this.binary=b};g.HeaderType={TO_ADDRESS:"toAddress",FROM_ADDRESS:"fromAddress",PACKET_INDEX:"packetIndex",PACKET_COUNT:"packetCount"},g.isAddressField=function(a){return a===g.HeaderType.TO_ADDRESS||a===g.HeaderType.FROM_ADDRESS},g.isPacketField=function(a){return a===g.HeaderType.PACKET_INDEX||a===g.HeaderType.PACKET_COUNT},g.prototype.getHeaderAsBinary=function(a){return this.encoder.getHeader(a,this.binary)},g.prototype.getHeaderAsInt=function(a){return this.encoder.getHeaderAsInt(a,this.binary)},g.prototype.getHeaderAsAddressString=function(a){return this.encoder.getHeaderAsAddressString(a,this.binary)},g.prototype.getBodyAsBinary=function(){return this.encoder.getBody(this.binary)},g.prototype.getBodyAsAscii=function(a){return this.encoder.getBodyAsAscii(this.binary,a)},g.Encoder=function(a,b,c){this.addressFormat_=a,this.addressBitWidth_=this.calculateBitWidth(this.addressFormat_),this.packetCountBitWidth_=b,this.headerSpec_=c,this.validateSpec()},g.Encoder.prototype.calculateBitWidth=function(a){return a.split(/\D+/).reduce(function(a,b){return a+(parseInt(b,10)||0)},0)},g.Encoder.prototype.validateSpec=function(){for(var a={},b=0;b<this.headerSpec_.length;b++){var c=g.isAddressField(this.headerSpec_[b]),d=g.isPacketField(this.headerSpec_[b]);if(c&&0===this.addressBitWidth_)throw new Error("Invalid packet format: Includes an address field but  address format is invalid.");if(d&&0===this.packetCountBitWidth_)throw new Error("Invalid packet format: Includes a packet count field  but packet field bit width is zero");if(!c&&!d)throw new Error("Invalid packet format: Unrecognized packet header field "+this.headerSpec_[b]);if(a.hasOwnProperty(this.headerSpec_[b]))throw new Error("Invalid packet format: Field keys must be unique.");a[this.headerSpec_[b]]="used"}},g.Encoder.prototype.getHeader=function(a,b){var c=0,d=0;for(b=e.minifyBinary(b);this.headerSpec_[c]!==a;)if(d+=this.getFieldBitWidth(this.headerSpec_[c]),c++,c>=this.headerSpec_.length)throw new Error('Key "'+a+'" not found in packet spec.');var f=this.getFieldBitWidth(this.headerSpec_[c]),g=b.slice(d,d+f);if(f!==1/0)for(;g.length<f;)g+="0";return g},g.Encoder.prototype.getHeaderAsInt=function(a,b){return e.binaryToInt(this.getHeader(a,b))},g.Encoder.prototype.getHeaderAsAddressString=function(a,b){return e.binaryToAddressString(this.getHeader(a,b),this.addressFormat_)},g.Encoder.prototype.getBody=function(a){return e.minifyBinary(a).slice(this.getHeaderLength())},g.Encoder.prototype.getHeaderLength=function(){return this.headerSpec_.reduce(function(a,b){return a+this.getFieldBitWidth(b)}.bind(this),0)},g.Encoder.prototype.getBodyAsAscii=function(a,b){return e.binaryToAscii(this.getBody(a),b)},g.Encoder.prototype.getFieldBitWidth=function(a){if(g.isAddressField(a))return this.addressBitWidth_;if(g.isPacketField(a))return this.packetCountBitWidth_;throw new Error("Unable to select a bit-width for field "+a)},g.Encoder.prototype.makeBinaryHeaders=function(a){var b={};return this.headerSpec_.forEach(function(c){a.hasOwnProperty(c)&&(g.isAddressField(c)?b[c]=this.addressStringToBinary(a[c]):b[c]=e.intToBinary(a[c],this.getFieldBitWidth(c)))},this),b},g.Encoder.prototype.addressStringToBinary=function(a){return e.addressStringToBinary(a,this.addressFormat_)},g.Encoder.prototype.concatenateBinary=function(a,b){var c=[];return this.headerSpec_.forEach(function(b){var e=this.getFieldBitWidth(b),f=a.hasOwnProperty(b)?a[b]:"";f=f.slice(0,e),f=d.zeroPadLeft(f,e),c.push(f)},this),c.push(b),c.join("")}},{"./DataConverters":184,"./NetSimGlobals":206,"./NetSimUtils":249}],200:[function(a,b,c){"use strict";var d=a("./NetSimDnsTab.html.ejs"),e=a("./NetSimConstants").DnsMode,f=a("./NetSimDnsModeControl"),g=a("./NetSimDnsManualControl"),h=a("./NetSimDnsTable"),i=a("./NetSimGlobals"),j=b.exports=function(a,b,c){this.rootDiv_=a,this.dnsModeChangeCallback_=b,this.becomeDnsCallback_=c,this.dnsModeControl_=null,this.dnsManualControl_=null,this.dnsTable_=null,this.render()};j.prototype.render=function(){var a=i.getLevelConfig(),b=$(d({level:a}));this.rootDiv_.html(b),a.showDnsModeControl&&(this.dnsModeControl_=new f(this.rootDiv_.find(".dns_mode"),this.dnsModeChangeCallback_)),this.dnsManualControl_=new g(this.rootDiv_.find(".dns_manual_control"),this.becomeDnsCallback_),this.dnsTable_=new h(this.rootDiv_.find(".dns_table"))},j.prototype.setDnsMode=function(a){this.dnsModeControl_&&this.dnsModeControl_.setDnsMode(a),this.dnsTable_.setDnsMode(a),this.rootDiv_.find(".dns_manual_control").toggle(a===e.MANUAL),this.rootDiv_.find(".dns-notes").toggle(a!==e.NONE)},j.prototype.setIsDnsNode=function(a){this.dnsManualControl_.setIsDnsNode(a)},j.prototype.setDnsTableContents=function(a){this.dnsTable_.setDnsTableContents(a)}},{"./NetSimConstants":194,"./NetSimDnsManualControl":196,"./NetSimDnsModeControl":198,"./NetSimDnsTab.html.ejs":199,"./NetSimDnsTable":202,"./NetSimGlobals":206}],202:[function(a,b,c){"use strict";var d=a("./NetSimDnsTable.html.ejs"),e=a("./NetSimConstants").DnsMode,f=b.exports=function(a){this.rootDiv_=a,this.dnsMode_=e.NONE,this.addressTableData_=[],this.render()};f.prototype.render=function(){var a=$(d({dnsMode:this.dnsMode_,tableData:this.addressTableData_}));this.rootDiv_.html(a)},f.prototype.setDnsMode=function(a){this.dnsMode_=a,this.render()},f.prototype.setDnsTableContents=function(a){this.addressTableData_=a,this.render()}},{"./NetSimConstants":194,"./NetSimDnsTable.html.ejs":201}],201:[function(require,module,exports){module.exports=function(){var t=function anonymous(locals,filters,escape){escape=escape||function(a){return String(a).replace(/&(?!\w+;)/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")};var buf=[];with(locals||{})!function(){buf.push("");var a=require("./NetSimConstants").DnsMode;buf.push('\n<div class="netsim-dns-table">\n  <h1>My Network</h1>\n  <table>\n    <thead>\n    <tr>\n      <th>Hostname</th>\n      <th>Address</th>\n    </tr>\n    </thead>\n    <tbody>\n    '),tableData.forEach(function(b){var c=b.hostname,d="",e=[];(dnsMode===a.NONE||b.isDnsNode||b.isLocal)&&(d=b.address),b.isLocal&&(c+=" (Me)",e.push("local-node")),b.isDnsNode&&dnsMode!==a.NONE&&(c+=" (DNS)",e.push("dns-node")),buf.push('\n        <tr class="',escape(e.join(" ")),'">\n          <td>',escape(c),"</td>\n          <td>",escape(d),"</td>\n        </tr>\n      ")}),buf.push("\n    </tbody>\n  </table>\n</div>")}();return buf.join("")};return function(a){return t(a,require("ejs").filters)}}()},{"./NetSimConstants":194,ejs:500}],199:[function(require,module,exports){module.exports=function(){var t=function anonymous(locals,filters,escape){escape=escape||function(a){return String(a).replace(/&(?!\w+;)/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")};var buf=[];with(locals||{})!function(){buf.push('<div class="netsim-dns-tab">\n  '),level.showDnsModeControl&&buf.push('\n  <div class="dns_mode"></div>\n  '),buf.push('\n  <div class="dns_manual_control"></div>\n  <div class="dns_table"></div>\n  <div class="dns-notes">\n    <h1>Notes</h1>\n    <div>\n      <textarea></textarea>\n    </div>\n  </div>\n</div>\n')}();return buf.join("")};return function(a){return t(a,require("ejs").filters)}}()},{ejs:500}],198:[function(a,b,c){"use strict";var d=a("./NetSimDnsModeControl.html.ejs"),e=a("./NetSimConstants").DnsMode,f=b.exports=function(a,b){this.rootDiv_=a,this.dnsModeChangeCallback_=b,this.dnsModeRadios_=null,this.currentDnsMode_=e.NONE,this.render()};f.prototype.render=function(){var a=$(d({}));this.rootDiv_.html(a),this.dnsModeRadios_=this.rootDiv_.find('input[type="radio"][name="dns_mode"]'),this.dnsModeRadios_.change(this.onDnsModeChange_.bind(this)),this.setDnsMode(this.currentDnsMode_)},f.prototype.onDnsModeChange_=function(){var a=this.dnsModeRadios_.filter(":checked").val();this.dnsModeChangeCallback_(a)},f.prototype.setDnsMode=function(a){this.currentDnsMode_=a,this.dnsModeRadios_.filter('[value="'+a+'"]').prop("checked",!0)}},{"./NetSimConstants":194,"./NetSimDnsModeControl.html.ejs":197}],197:[function(require,module,exports){module.exports=function(){var t=function anonymous(locals,filters,escape){escape=escape||function(a){return String(a).replace(/&(?!\w+;)/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")};var buf=[];with(locals||{})!function(){function a(a,b){buf.push('\n    <div class="dns_mode_',escape(a),'">\n      <input id="dns_mode_',escape(a),'"\n                   type="radio"\n                   name="dns_mode"\n                   value="',escape(a),'" />\n      <label for="dns_mode_',escape(a),'">',escape(b),"</label>\n    </div>\n    ")}buf.push("");var b=require("./NetSimConstants").DnsMode,c=require("./locale");buf.push('\n<div class="dns-mode-control">\n  <h1>',escape(c.dnsMode()),"</h1>\n  "),a(b.NONE,c.dnsMode_NONE()),buf.push("\n  "),a(b.MANUAL,c.dnsMode_MANUAL()),buf.push("\n  "),a(b.AUTOMATIC,c.dnsMode_AUTOMATIC()),buf.push("\n</div>\n")}();return buf.join("")};return function(a){return t(a,require("ejs").filters)}}()},{"./NetSimConstants":194,"./locale":264,ejs:500}],196:[function(a,b,c){"use strict";var d=a("./NetSimDnsManualControl.html.ejs"),e=b.exports=function(a,b){this.rootDiv_=a,this.becomeDnsCallback_=b,this.render()};e.prototype.render=function(){var a=$(d({}));this.rootDiv_.html(a),this.rootDiv_.find('input[type="button"]').click(this.onBecomeDnsButtonClick_.bind(this))},e.prototype.onBecomeDnsButtonClick_=function(){this.becomeDnsCallback_()},e.prototype.setIsDnsNode=function(a){this.rootDiv_.find('input[type="button"]').attr("disabled",a)}},{"./NetSimDnsManualControl.html.ejs":195}],195:[function(require,module,exports){module.exports=function(){var t=function anonymous(locals,filters,escape){escape=escape||function(a){return String(a).replace(/&(?!\w+;)/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")};var buf=[];with(locals||{})!function(){buf.push('<div class="netsim_dns_manual_control">\n  <h1>Manual Control</h1>\n  <input id="become_dns_button" type="button" value="Take over as DNS" />\n</div>')}();return buf.join("")};return function(a){return t(a,require("ejs").filters)}}()},{ejs:500}],193:[function(a,b,c){"use strict";var d=a("../utils"),e=d.getLodash(),f=a("./locale"),g=a("./NetSimConstants").NodeType,h=a("./NetSimEntity"),i=a("./NetSimNode"),j=a("./NetSimWire"),k=b.exports=function(a,b){i.call(this,a,b)};k.inherits(i),k.prototype.getNodeType=function(){return g.CLIENT},k.prototype.getStatus=function(){var a=this.getOutgoingWire();if(!a)return f.notConnected();var b=this.shard_.nodeTable.readAll(),c=e.find(b,function(b){return b.id===a.remoteNodeID}),d=f.unknownNode();c&&(d=c.name);var h;if(c&&c.type===g.ROUTER)h=!0;else{var i=this.shard_.wireTable.readAll();h=i.some(function(b){return b.localNodeID===a.remoteNodeID&&b.remoteNodeID===a.localNodeID})}return h?f.connectedToNodeName({nodeName:d}):f.connectingToNodeName({nodeName:d})},k.prototype.isFull=function(){var a=this.getOutgoingWire();if(!a)return!1;var b=this.shard_.wireTable.readAll();return b.some(function(b){return b.localNodeID===a.remoteNodeID&&b.remoteNodeID===a.localNodeID})},k.prototype.getAddress=function(){var a=this.getOutgoingWire();return a?a.localAddress:void 0},k.prototype.getOutgoingWire=function(){var a=this.shard_.wireTable.readAll(),b=e.find(a,function(a){return a.localNodeID===this.entityID},this);return b?new j(this.shard_,b):null},k.get=function(a,b,c){h.get(k,a,b,c)}},{"../utils":324,"./NetSimConstants":194,"./NetSimEntity":205,"./NetSimNode":220,"./NetSimWire":258,"./locale":264}],220:[function(a,b,c){"use strict";a("../utils");var d=a("./locale"),e=a("./NetSimEntity"),f=a("./NetSimWire"),g=b.exports=function(a,b){b=void 0!==b?b:{},e.call(this,a,b),this.displayName_=b.name};g.inherits(e),g.prototype.getTable=function(){return this.shard_.nodeTable},g.prototype.buildRow=function(){return{type:this.getNodeType(),name:this.getDisplayName()}},g.prototype.getDisplayName=function(){return this.displayName_?this.displayName_:d.defaultNodeName()},g.prototype.getShortDisplayName=function(){var a=this.getDisplayName();return a.length>10&&(a=a.split(/\s/)[0]),a},g.prototype.getHostname=function(){return this.getShortDisplayName().replace(/[^\w\d]/g,"").toLowerCase()+this.entityID},g.prototype.getNodeType=function(){throw new Error("getNodeType method is not implemented")},g.prototype.getStatus=function(){throw new Error("getStatus method is not implemented")},g.prototype.isFull=function(){throw new Error("isFull method is not implemented")},g.prototype.connectToNode=function(a,b){b=b||function(){};var c=this;f.create(this.shard_,this.entityID,a.entityID,function(d,e){return d?void b(d,null):void a.acceptConnection(c,function(a,c){return a||!c?void e.destroy(function(){b(new Error("Connection rejected."),null)}):void b(null,e)})})},g.prototype.acceptConnection=function(a,b){b(null,!0)}},{"../utils":324,"./NetSimEntity":205,"./NetSimWire":258,"./locale":264}],258:[function(a,b,c){"use strict";a("../utils");var d=a("./NetSimEntity"),e=b.exports=function(a,b){b=void 0!==b?b:{},d.call(this,a,b),this.localNodeID=b.localNodeID,this.remoteNodeID=b.remoteNodeID,this.localAddress=b.localAddress,this.remoteAddress=b.remoteAddress,this.localHostname=b.localHostname,this.remoteHostname=b.remoteHostname};e.inherits(d),e.create=function(a,b,c,d){var f=new e(a);f.localNodeID=b,f.remoteNodeID=c,f.getTable().create(f.buildRow(),function(b,c){return b?void d(b,null):void d(null,new e(a,c))})},e.prototype.getTable=function(){return this.shard_.wireTable},e.prototype.buildRow=function(){return{localNodeID:this.localNodeID,remoteNodeID:this.remoteNodeID,localAddress:this.localAddress,remoteAddress:this.remoteAddress,localHostname:this.localHostname,remoteHostname:this.remoteHostname}},e.prototype.isMessageRowOnDuplexWire=function(a){return this.localNodeID===a.fromNodeID&&this.remoteNodeID===a.toNodeID},e.prototype.isMessageRowOnSimplexWire=function(a){var b=this.isMessageRowOnDuplexWire(a),c=this.localNodeID===a.toNodeID&&this.remoteNodeID===a.fromNodeID;return b||c}},{"../utils":324,"./NetSimEntity":205}],205:[function(a,b,c){"use strict";var d=b.exports=function(a,b){void 0===b&&(b={}),this.shard_=a,this.entityID=b.id,this.uuid=b.uuid};d.create=function(a,b,c){var d=new a(b);d.getTable().create(d.buildRow(),function(d,e){d?c(d,null):c(null,new a(b,e))})},d.get=function(a,b,c,d){var e=new a(c);e.getTable().read(b,function(b,e){b?d(b,null):d(b,new a(c,e))})},d.prototype.update=function(a){a=a||function(){},this.getTable().update(this.entityID,this.buildRow(),a)},d.prototype.destroy=function(a){a=a||function(){},this.getTable()["delete"](this.entityID,a)},d.prototype.synchronousDestroy=function(){return this.getTable().synchronousDelete(this.entityID)},d.prototype.getTable=function(){throw new Error("Method getTable is not implemented.")},d.prototype.buildRow=function(){return{}},d.destroyEntities=function(a,b){if(0===a.length)return void b(null,!0);var c=a[0].getTable(),d=a.map(function(a){if(a.getTable()!==c)throw new Error("destroyEntities requires all entities to be in the same table");return a.entityID});c.deleteMany(d,b)}},{}],192:[function(a,b,c){"use strict";var d=a("./locale"),e=a("./NetSimSlider"),f=b.exports=function(a,b){e.call(this,a,{onChange:b,min:1,max:32}),this.render()};f.inherits(e),f.prototype.valueToLabel=function(a){return d.numBitsPerChunk({numBits:a})},f.prototype.valueToShortLabel=function(a){return a.toString()}},{"./NetSimSlider":243,"./locale":264}],191:[function(a,b,c){"use strict";a("../utils");var d=a("./NetSimUtils"),e=a("./NetSimSlider"),f=b.exports=function(a,b,c){e.call(this,a,{onChange:c,value:b,min:1,max:20,upperBoundInfinite:!0}),this.render()};f.inherits(e),f.prototype.valueToLabel=function(a){return d.bitrateToLocalizedRoundedBitrate(a)}},{"../utils":324,"./NetSimSlider":243,"./NetSimUtils":249}],190:[function(a,b,c){"use strict";a("../utils");var d=a("./locale"),e=a("./NetSimBitLogPanel.html.ejs"),f=a("./NetSimPanel"),g=a("./NetSimEncodingControl"),h=a("./NetSimGlobals"),i=a("./NetSimLogger").getSingleton(),j=b.exports=function(a,b){this.binary_="",this.encodings_=[],this.chunkSize_=8,this.logTitle_=b.logTitle,this.netsim_=b.netsim,this.showReadWireButton_=b.showReadWireButton,this.openHeight_=0,f.call(this,a,{className:"netsim-log-panel",panelTitle:b.logTitle,beginMinimized:b.isMinimized})};j.inherits(f),j.prototype.render=function(){j.superPrototype.render.call(this);var a=$(e({binary:this.binary_,enabledEncodings:this.encodings_,chunkSize:this.chunkSize_,showReadWireButton:this.showReadWireButton_}));this.getBody().html(a),g.hideRowsByEncoding(this.getBody(),this.encodings_),this.getBody().find("#read-wire-button").click(this.onReceiveButtonPress_.bind(this)),this.addButton(d.clear(),this.onClearButtonPress_.bind(this)),this.sizeToOpenHeight_()},j.prototype.onClearButtonPress_=function(){this.binary_="",this.render()},j.prototype.onReceiveButtonPress_=function(a){var b=$(a.target);b.is("[disabled]")||(b.attr("disabled","disabled"),this.netsim_.receiveBit(function(a,c){if(a)return i.warn("Error reading wire state: "+a.message),void b.removeAttr("disabled");var d="0";c&&(d=c.payload),this.log(d),this.netsim_.animateReadWireState(d),b.removeAttr("disabled")}.bind(this)))},j.prototype.log=function(a){this.binary_+=a.toString(),this.render()},j.prototype.setEncodings=function(a){this.encodings_=a,this.render()},j.prototype.setChunkSize=function(a){this.chunkSize_=a,this.render()},j.prototype.setHeight=function(a){this.openHeight_=a,this.sizeToOpenHeight_()},j.prototype.sizeToOpenHeight_=function(){var a=this.getRoot().find(".netsim-panel"),b=a.find("h1"),c=a.find(".panel-body"),d=a.find(".scroll-area"),e=parseFloat(a.css("margin-top"))+parseFloat(a.css("margin-bottom")),f=b.outerHeight(!0),g=parseFloat(c.css("border-top-width"))+parseFloat(c.css("border-bottom-width")),h=parseFloat(d.css("margin-top"))+parseFloat(d.css("margin-bottom")),i=this.openHeight_-(e+f+g+h);d.height(Math.floor(i))},j.prototype.getHeight=function(){return this.getRoot().find(".netsim-panel").outerHeight(!0)},j.prototype.onMinimizerClick_=function(){j.superPrototype.onMinimizerClick_.call(this),h.updateLayout()}},{"../utils":324,"./NetSimBitLogPanel.html.ejs":189,"./NetSimEncodingControl":204,"./NetSimGlobals":206,"./NetSimLogger":213,"./NetSimPanel":226,"./locale":264}],226:[function(a,b,c){"use strict";var d=a("../utils"),e=a("./NetSimPanel.html.ejs"),f=b.exports=function(a,b){this.instanceID_=f.uniqueIDCounter,f.uniqueIDCounter++,this.rootDiv_=a,this.className_=d.valueOr(b.className,""),this.panelTitle_=d.valueOr(b.panelTitle,""),this.userToggleable_=d.valueOr(b.userToggleable,!0),this.isMinimized_=d.valueOr(b.beginMinimized,!1),this.render()};f.uniqueIDCounter=0,f.prototype.render=function(){var a=$(e({instanceID:this.instanceID_,className:this.className_,panelTitle:this.panelTitle_,userToggleable:this.userToggleable_}));this.rootDiv_.html(a),this.userToggleable_&&this.rootDiv_.find(".minimizer").click(this.onMinimizerClick_.bind(this)),this.setMinimized(this.isMinimized_)},f.prototype.getRoot=function(){return this.rootDiv_},f.prototype.setPanelTitle=function(a){this.panelTitle_=a,this.rootDiv_.find(".title-text").text(a)},f.prototype.onMinimizerClick_=function(){this.setMinimized(!this.isMinimized_)},f.prototype.setMinimized=function(a){var b=this.rootDiv_.find(".netsim-panel"),c=b.find(".minimizer");a?(b.addClass("minimized"),c.find(".fa").addClass("fa-plus-square").removeClass("fa-minus-square")):(b.removeClass("minimized"),c.find(".fa").addClass("fa-minus-square").removeClass("fa-plus-square")),this.isMinimized_=a},f.prototype.isMinimized=function(){return this.isMinimized_},f.prototype.addButton=function(a,b){$("<span>").addClass("netsim-button").addClass("secondary").html(a).click(b).appendTo(this.rootDiv_.find(".panel-controls"))},f.prototype.getBody=function(){return this.rootDiv_.find(".panel-body")}},{"../utils":324,"./NetSimPanel.html.ejs":225}],225:[function(require,module,exports){module.exports=function(){var t=function anonymous(locals,filters,escape){escape=escape||function(a){return String(a).replace(/&(?!\w+;)/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")};var buf=[];with(locals||{})!function(){buf.push('<div id="netsim-panel-',escape(instanceID),'"\n     class="netsim-panel ',escape(className),'">\n  <h1>\n    <div class="panel-controls"></div>\n    <div class="single-line-with-ellipsis'),userToggleable&&buf.push(" minimizer"),buf.push('">\n      '),userToggleable&&buf.push('\n        <i class="fa fa-minus-square"></i>\n      '),buf.push('\n      <span class="title-text">',escape(panelTitle),'</span>\n    </div>\n  </h1>\n  <div class="panel-body">\n  </div>\n</div>\n')}();return buf.join("")};return function(a){return t(a,require("ejs").filters)}}()},{ejs:500}],206:[function(a,b,c){"use strict";var d=a("seedrandom"),e=null,f=null,g=Math.random,h=function(a,b){return Math.floor(g()*(b-a))+a};b.exports={setRootControllers:function(a,b){e=a,f=b},getLevelConfig:function(){return f.level},getPubSubConfig:function(){return{usePusher:f.usePusher,pusherApplicationKey:f.pusherApplicationKey}},getAssetUrlFunction:function(){return e.assetUrl},updateLayout:function(){f.updateLayout()},completeLevelAndContinue:function(){f.completeLevelAndContinue()},setRandomSeed:function(a){g=d(a)},random:function(){return g()},randomIntInRange:h,randomPickOne:function(a){var b=a.length;return 0===b?void 0:a[h(0,b)]}}},{seedrandom:660}],660:[function(a,b,c){var d=a("./lib/alea"),e=a("./lib/xor128"),f=a("./lib/xorwow"),g=a("./lib/xorshift7"),h=a("./lib/xor4096"),i=a("./lib/tychei"),j=a("./seedrandom");j.alea=d,j.xor128=e,j.xorwow=f,j.xorshift7=g,j.xor4096=h,j.tychei=i,b.exports=j},{"./lib/alea":661,"./lib/tychei":662,"./lib/xor128":663,"./lib/xor4096":664,"./lib/xorshift7":665,"./lib/xorwow":666,"./seedrandom":667}],667:[function(a,b,c){!function(c,d){function e(a,b,e){var l=[];b=1==b?{entropy:!0}:b||{};var m=i(h(b.entropy?[a,k(c)]:null==a?j():a,3),l),p=new f(l),u=function(){for(var a=p.g(o),b=r,c=0;s>a;)a=(a+c)*n,b*=n,c=p.g(1);for(;a>=t;)a/=2,b/=2,c>>>=1;return(a+c)/b};return u.int32=function(){return 0|p.g(4)},u.quick=function(){return p.g(4)/4294967296},u["double"]=u,i(k(p.S),c),(b.pass||e||function(a,b,c,e){return e&&(e.S&&g(e,p),a.state=function(){return g(p,{})}),c?(d[q]=a,b):a})(u,m,"global"in b?b.global:this==d,b.state)}function f(a){var b,c=a.length,d=this,e=0,f=d.i=d.j=0,g=d.S=[];for(c||(a=[c++]);n>e;)g[e]=e++;for(e=0;n>e;e++)g[e]=g[f=u&f+a[e%c]+(b=g[e])],g[f]=b;(d.g=function(a){for(var b,c=0,e=d.i,f=d.j,g=d.S;a--;)b=g[e=u&e+1],c=c*n+g[u&(g[e]=g[f=u&f+b])+(g[f]=b)];return d.i=e,d.j=f,c})(n)}function g(a,b){return b.i=a.i,b.j=a.j,b.S=a.S.slice(),b}function h(a,b){var c,d=[],e=typeof a;if(b&&"object"==e)for(c in a)try{d.push(h(a[c],b-1))}catch(f){}return d.length?d:"string"==e?a:a+"\x00"}function i(a,b){for(var c,d=a+"",e=0;e<d.length;)b[u&e]=u&(c^=19*b[u&e])+d.charCodeAt(e++);return k(b)}function j(){try{if(l)return k(l.randomBytes(n));var a=new Uint8Array(n);return(m.crypto||m.msCrypto).getRandomValues(a),k(a)}catch(b){var d=m.navigator,e=d&&d.plugins;return[+new Date,m,e,m.screen,k(c)]}}function k(a){return String.fromCharCode.apply(0,a)}var l,m=this,n=256,o=6,p=52,q="random",r=d.pow(n,o),s=d.pow(2,p),t=2*s,u=n-1;if(d["seed"+q]=e,i(d.random(),c),"object"==typeof b&&b.exports){b.exports=e;try{l=a("crypto")}catch(v){}}else"function"==typeof define&&define.amd&&define(function(){return e})}([],Math)},{crypto:333}],333:[function(a,b,c){"use strict";c.randomBytes=c.rng=c.pseudoRandomBytes=c.prng=a("randombytes"),c.createHash=c.Hash=a("create-hash"),c.createHmac=c.Hmac=a("create-hmac");var d=["sha1","sha224","sha256","sha384","sha512","md5","rmd160"].concat(Object.keys(a("browserify-sign/algos")));c.getHashes=function(){return d};var e=a("pbkdf2");c.pbkdf2=e.pbkdf2,c.pbkdf2Sync=e.pbkdf2Sync;var f=a("browserify-aes");["Cipher","createCipher","Cipheriv","createCipheriv","Decipher","createDecipher","Decipheriv","createDecipheriv","getCiphers","listCiphers"].forEach(function(a){c[a]=f[a]});var g=a("diffie-hellman");["DiffieHellmanGroup","createDiffieHellmanGroup","getDiffieHellman","createDiffieHellman","DiffieHellman"].forEach(function(a){c[a]=g[a]});var h=a("browserify-sign");["createSign","Sign","createVerify","Verify"].forEach(function(a){c[a]=h[a]}),c.createECDH=a("create-ecdh");var i=a("public-encrypt");["publicEncrypt","privateEncrypt","publicDecrypt","privateDecrypt"].forEach(function(a){c[a]=i[a]}),["createCredentials"].forEach(function(a){c[a]=function(){throw new Error(["sorry, "+a+" is not implemented yet","we accept pull requests","https://github.com/crypto-browserify/crypto-browserify"].join("\n"))}})},{"browserify-aes":337,"browserify-sign":353,"browserify-sign/algos":352,"create-ecdh":401,"create-hash":424,"create-hmac":436,"diffie-hellman":437,pbkdf2:445,"public-encrypt":446,randombytes:474}],446:[function(a,b,c){c.publicEncrypt=a("./publicEncrypt"),c.privateDecrypt=a("./privateDecrypt"),c.privateEncrypt=function(a,b){return c.publicEncrypt(a,b,!0)},c.publicDecrypt=function(a,b){return c.privateDecrypt(a,b,!0)}},{"./privateDecrypt":470,"./publicEncrypt":471}],471:[function(a,b,c){(function(c){function d(a,b){var d=a.modulus.byteLength(),e=b.length,f=i("sha1").update(new c("")).digest(),g=f.length,m=2*g;if(e>d-m-2)throw new Error("message too long");var n=new c(d-e-m-2);n.fill(0);var o=d-g-1,p=h(g),q=k(c.concat([f,n,new c([1]),b],o),j(p,o)),r=k(p,j(q,g));return new l(c.concat([new c([0]),r,q],d))}function e(a,b,d){var e=b.length,g=a.modulus.byteLength();if(e>g-11)throw new Error("message too long");var h;return d?(h=new c(g-e-3),h.fill(255)):h=f(g-e-3),new l(c.concat([new c([0,d?1:2]),h,new c([0]),b],g))}function f(a,b){for(var d,e=new c(a),f=0,g=h(2*a),i=0;a>f;)i===g.length&&(g=h(2*a),i=0),d=g[i++],d&&(e[f++]=d);return e}var g=a("parse-asn1"),h=a("randombytes"),i=a("create-hash"),j=a("./mgf"),k=a("./xor"),l=a("bn.js"),m=a("./withPublic"),n=a("browserify-rsa");b.exports=function(a,b,c){var f;f=a.padding?a.padding:c?1:4;var h,i=g(a);if(4===f)h=d(i,b);else if(1===f)h=e(i,b,c);else{if(3!==f)throw new Error("unknown padding");if(h=new l(b),h.cmp(i.modulus)>=0)throw new Error("data too long for modulus")}return c?n(h,i):m(h,i)}}).call(this,a("buffer").Buffer);
},{"./mgf":447,"./withPublic":472,"./xor":473,"bn.js":448,"browserify-rsa":449,buffer:329,"create-hash":424,"parse-asn1":454,randombytes:474}],470:[function(a,b,c){(function(c){function d(a,b){var d=(a.modulus,a.modulus.byteLength()),e=(b.length,l("sha1").update(new c("")).digest()),g=e.length;if(0!==b[0])throw new Error("decryption error");var j=b.slice(1,g+1),k=b.slice(g+1),m=i(j,h(k,g)),n=i(k,h(m,d-g-1));if(f(e,n.slice(0,g)))throw new Error("decryption error");for(var o=g;0===n[o];)o++;if(1!==n[o++])throw new Error("decryption error");return n.slice(o)}function e(a,b,c){for(var d=b.slice(0,2),e=2,f=0;0!==b[e++];)if(e>=b.length){f++;break}var g=b.slice(2,e-1);b.slice(e-1,e);if(("0002"!==d.toString("hex")&&!c||"0001"!==d.toString("hex")&&c)&&f++,g.length<8&&f++,f)throw new Error("decryption error");return b.slice(e)}function f(a,b){a=new c(a),b=new c(b);var d=0,e=a.length;a.length!==b.length&&(d++,e=Math.min(a.length,b.length));for(var f=-1;++f<e;)d+=a[f]^b[f];return d}var g=a("parse-asn1"),h=a("./mgf"),i=a("./xor"),j=a("bn.js"),k=a("browserify-rsa"),l=a("create-hash"),m=a("./withPublic");b.exports=function(a,b,f){var h;h=a.padding?a.padding:f?1:4;var i=g(a),l=i.modulus.byteLength();if(b.length>l||new j(b).cmp(i.modulus)>=0)throw new Error("decryption error");var n;n=f?m(new j(b),i):k(b,i);var o=new c(l-n.length);if(o.fill(0),n=c.concat([o,n],l),4===h)return d(i,n);if(1===h)return e(i,n,f);if(3===h)return n;throw new Error("unknown padding")}}).call(this,a("buffer").Buffer)},{"./mgf":447,"./withPublic":472,"./xor":473,"bn.js":448,"browserify-rsa":449,buffer:329,"create-hash":424,"parse-asn1":454}],473:[function(a,b,c){b.exports=function(a,b){for(var c=a.length,d=-1;++d<c;)a[d]^=b[d];return a}},{}],472:[function(a,b,c){(function(c){function d(a,b){return new c(a.toRed(e.mont(b.modulus)).redPow(new e(b.publicExponent)).fromRed().toArray())}var e=a("bn.js");b.exports=d}).call(this,a("buffer").Buffer)},{"bn.js":448,buffer:329}],454:[function(a,b,c){arguments[4][382][0].apply(c,arguments)},{"./aesid.json":451,"./asn1":452,"./fixProc":453,"browserify-aes":337,buffer:329,dup:382,pbkdf2:445}],453:[function(a,b,c){arguments[4][381][0].apply(c,arguments)},{"./EVP_BytesToKey":450,"browserify-aes":337,buffer:329,dup:381}],450:[function(a,b,c){arguments[4][378][0].apply(c,arguments)},{buffer:329,"create-hash":424,dup:378}],452:[function(a,b,c){arguments[4][380][0].apply(c,arguments)},{"asn1.js":455,dup:380}],455:[function(a,b,c){arguments[4][383][0].apply(c,arguments)},{"./asn1/api":456,"./asn1/base":458,"./asn1/constants":462,"./asn1/decoders":464,"./asn1/encoders":467,"bn.js":448,dup:383}],467:[function(a,b,c){arguments[4][395][0].apply(c,arguments)},{"./der":466,"./pem":468,dup:395}],468:[function(a,b,c){arguments[4][396][0].apply(c,arguments)},{"../../asn1":455,"./der":466,buffer:329,dup:396,inherits:476}],466:[function(a,b,c){arguments[4][394][0].apply(c,arguments)},{"../../asn1":455,buffer:329,dup:394,inherits:476}],464:[function(a,b,c){arguments[4][392][0].apply(c,arguments)},{"./der":463,"./pem":465,dup:392}],465:[function(a,b,c){arguments[4][393][0].apply(c,arguments)},{"../../asn1":455,"./der":463,buffer:329,dup:393,inherits:476}],463:[function(a,b,c){arguments[4][391][0].apply(c,arguments)},{"../../asn1":455,dup:391,inherits:476}],462:[function(a,b,c){arguments[4][390][0].apply(c,arguments)},{"./der":461,dup:390}],461:[function(a,b,c){arguments[4][389][0].apply(c,arguments)},{"../constants":462,dup:389}],458:[function(a,b,c){arguments[4][386][0].apply(c,arguments)},{"./buffer":457,"./node":459,"./reporter":460,dup:386}],460:[function(a,b,c){arguments[4][388][0].apply(c,arguments)},{dup:388,inherits:476}],459:[function(a,b,c){arguments[4][387][0].apply(c,arguments)},{"../base":458,dup:387,"minimalistic-assert":469}],469:[function(a,b,c){arguments[4][397][0].apply(c,arguments)},{dup:397}],457:[function(a,b,c){arguments[4][385][0].apply(c,arguments)},{"../base":458,buffer:329,dup:385,inherits:476}],456:[function(a,b,c){arguments[4][384][0].apply(c,arguments)},{"../asn1":455,dup:384,inherits:476,vm:498}],451:[function(a,b,c){arguments[4][379][0].apply(c,arguments)},{dup:379}],449:[function(a,b,c){arguments[4][356][0].apply(c,arguments)},{"bn.js":448,buffer:329,dup:356,randombytes:474}],448:[function(a,b,c){arguments[4][355][0].apply(c,arguments)},{dup:355}],447:[function(a,b,c){(function(c){function d(a){var b=new c(4);return b.writeUInt32BE(a,0),b}var e=a("create-hash");b.exports=function(a,b){for(var f,g=new c(""),h=0;g.length<b;)f=d(h++),g=c.concat([g,e("sha1").update(a).update(f).digest()]);return g.slice(0,b)}}).call(this,a("buffer").Buffer)},{buffer:329,"create-hash":424}],437:[function(a,b,c){(function(b){function d(a){var c=new b(g[a].prime,"hex"),d=new b(g[a].gen,"hex");return new h(c,d)}function e(a,c,d,e){return(b.isBuffer(c)||"string"==typeof c&&-1===["hex","binary","base64"].indexOf(c))&&(e=d,d=c,c=void 0),c=c||"binary",e=e||"binary",d=d||new b([2]),b.isBuffer(d)||(d=new b(d,e)),"number"==typeof a?new h(f(a,d),d,!0):(b.isBuffer(a)||(a=new b(a,c)),new h(a,d,!0))}var f=a("./lib/generatePrime"),g=a("./lib/primes"),h=a("./lib/dh");c.DiffieHellmanGroup=c.createDiffieHellmanGroup=c.getDiffieHellman=d,c.createDiffieHellman=c.DiffieHellman=e}).call(this,a("buffer").Buffer)},{"./lib/dh":438,"./lib/generatePrime":439,"./lib/primes":440,buffer:329}],440:[function(a,b,c){b.exports={modp1:{gen:"02",prime:"ffffffffffffffffc90fdaa22168c234c4c6628b80dc1cd129024e088a67cc74020bbea63b139b22514a08798e3404ddef9519b3cd3a431b302b0a6df25f14374fe1356d6d51c245e485b576625e7ec6f44c42e9a63a3620ffffffffffffffff"},modp2:{gen:"02",prime:"ffffffffffffffffc90fdaa22168c234c4c6628b80dc1cd129024e088a67cc74020bbea63b139b22514a08798e3404ddef9519b3cd3a431b302b0a6df25f14374fe1356d6d51c245e485b576625e7ec6f44c42e9a637ed6b0bff5cb6f406b7edee386bfb5a899fa5ae9f24117c4b1fe649286651ece65381ffffffffffffffff"},modp5:{gen:"02",prime:"ffffffffffffffffc90fdaa22168c234c4c6628b80dc1cd129024e088a67cc74020bbea63b139b22514a08798e3404ddef9519b3cd3a431b302b0a6df25f14374fe1356d6d51c245e485b576625e7ec6f44c42e9a637ed6b0bff5cb6f406b7edee386bfb5a899fa5ae9f24117c4b1fe649286651ece45b3dc2007cb8a163bf0598da48361c55d39a69163fa8fd24cf5f83655d23dca3ad961c62f356208552bb9ed529077096966d670c354e4abc9804f1746c08ca237327ffffffffffffffff"},modp14:{gen:"02",prime:"ffffffffffffffffc90fdaa22168c234c4c6628b80dc1cd129024e088a67cc74020bbea63b139b22514a08798e3404ddef9519b3cd3a431b302b0a6df25f14374fe1356d6d51c245e485b576625e7ec6f44c42e9a637ed6b0bff5cb6f406b7edee386bfb5a899fa5ae9f24117c4b1fe649286651ece45b3dc2007cb8a163bf0598da48361c55d39a69163fa8fd24cf5f83655d23dca3ad961c62f356208552bb9ed529077096966d670c354e4abc9804f1746c08ca18217c32905e462e36ce3be39e772c180e86039b2783a2ec07a28fb5c55df06f4c52c9de2bcbf6955817183995497cea956ae515d2261898fa051015728e5a8aacaa68ffffffffffffffff"},modp15:{gen:"02",prime:"ffffffffffffffffc90fdaa22168c234c4c6628b80dc1cd129024e088a67cc74020bbea63b139b22514a08798e3404ddef9519b3cd3a431b302b0a6df25f14374fe1356d6d51c245e485b576625e7ec6f44c42e9a637ed6b0bff5cb6f406b7edee386bfb5a899fa5ae9f24117c4b1fe649286651ece45b3dc2007cb8a163bf0598da48361c55d39a69163fa8fd24cf5f83655d23dca3ad961c62f356208552bb9ed529077096966d670c354e4abc9804f1746c08ca18217c32905e462e36ce3be39e772c180e86039b2783a2ec07a28fb5c55df06f4c52c9de2bcbf6955817183995497cea956ae515d2261898fa051015728e5a8aaac42dad33170d04507a33a85521abdf1cba64ecfb850458dbef0a8aea71575d060c7db3970f85a6e1e4c7abf5ae8cdb0933d71e8c94e04a25619dcee3d2261ad2ee6bf12ffa06d98a0864d87602733ec86a64521f2b18177b200cbbe117577a615d6c770988c0bad946e208e24fa074e5ab3143db5bfce0fd108e4b82d120a93ad2caffffffffffffffff"},modp16:{gen:"02",prime:"ffffffffffffffffc90fdaa22168c234c4c6628b80dc1cd129024e088a67cc74020bbea63b139b22514a08798e3404ddef9519b3cd3a431b302b0a6df25f14374fe1356d6d51c245e485b576625e7ec6f44c42e9a637ed6b0bff5cb6f406b7edee386bfb5a899fa5ae9f24117c4b1fe649286651ece45b3dc2007cb8a163bf0598da48361c55d39a69163fa8fd24cf5f83655d23dca3ad961c62f356208552bb9ed529077096966d670c354e4abc9804f1746c08ca18217c32905e462e36ce3be39e772c180e86039b2783a2ec07a28fb5c55df06f4c52c9de2bcbf6955817183995497cea956ae515d2261898fa051015728e5a8aaac42dad33170d04507a33a85521abdf1cba64ecfb850458dbef0a8aea71575d060c7db3970f85a6e1e4c7abf5ae8cdb0933d71e8c94e04a25619dcee3d2261ad2ee6bf12ffa06d98a0864d87602733ec86a64521f2b18177b200cbbe117577a615d6c770988c0bad946e208e24fa074e5ab3143db5bfce0fd108e4b82d120a92108011a723c12a787e6d788719a10bdba5b2699c327186af4e23c1a946834b6150bda2583e9ca2ad44ce8dbbbc2db04de8ef92e8efc141fbecaa6287c59474e6bc05d99b2964fa090c3a2233ba186515be7ed1f612970cee2d7afb81bdd762170481cd0069127d5b05aa993b4ea988d8fddc186ffb7dc90a6c08f4df435c934063199ffffffffffffffff"},modp17:{gen:"02",prime:"ffffffffffffffffc90fdaa22168c234c4c6628b80dc1cd129024e088a67cc74020bbea63b139b22514a08798e3404ddef9519b3cd3a431b302b0a6df25f14374fe1356d6d51c245e485b576625e7ec6f44c42e9a637ed6b0bff5cb6f406b7edee386bfb5a899fa5ae9f24117c4b1fe649286651ece45b3dc2007cb8a163bf0598da48361c55d39a69163fa8fd24cf5f83655d23dca3ad961c62f356208552bb9ed529077096966d670c354e4abc9804f1746c08ca18217c32905e462e36ce3be39e772c180e86039b2783a2ec07a28fb5c55df06f4c52c9de2bcbf6955817183995497cea956ae515d2261898fa051015728e5a8aaac42dad33170d04507a33a85521abdf1cba64ecfb850458dbef0a8aea71575d060c7db3970f85a6e1e4c7abf5ae8cdb0933d71e8c94e04a25619dcee3d2261ad2ee6bf12ffa06d98a0864d87602733ec86a64521f2b18177b200cbbe117577a615d6c770988c0bad946e208e24fa074e5ab3143db5bfce0fd108e4b82d120a92108011a723c12a787e6d788719a10bdba5b2699c327186af4e23c1a946834b6150bda2583e9ca2ad44ce8dbbbc2db04de8ef92e8efc141fbecaa6287c59474e6bc05d99b2964fa090c3a2233ba186515be7ed1f612970cee2d7afb81bdd762170481cd0069127d5b05aa993b4ea988d8fddc186ffb7dc90a6c08f4df435c93402849236c3fab4d27c7026c1d4dcb2602646dec9751e763dba37bdf8ff9406ad9e530ee5db382f413001aeb06a53ed9027d831179727b0865a8918da3edbebcf9b14ed44ce6cbaced4bb1bdb7f1447e6cc254b332051512bd7af426fb8f401378cd2bf5983ca01c64b92ecf032ea15d1721d03f482d7ce6e74fef6d55e702f46980c82b5a84031900b1c9e59e7c97fbec7e8f323a97a7e36cc88be0f1d45b7ff585ac54bd407b22b4154aacc8f6d7ebf48e1d814cc5ed20f8037e0a79715eef29be32806a1d58bb7c5da76f550aa3d8a1fbff0eb19ccb1a313d55cda56c9ec2ef29632387fe8d76e3c0468043e8f663f4860ee12bf2d5b0b7474d6e694f91e6dcc4024ffffffffffffffff"},modp18:{gen:"02",prime:"ffffffffffffffffc90fdaa22168c234c4c6628b80dc1cd129024e088a67cc74020bbea63b139b22514a08798e3404ddef9519b3cd3a431b302b0a6df25f14374fe1356d6d51c245e485b576625e7ec6f44c42e9a637ed6b0bff5cb6f406b7edee386bfb5a899fa5ae9f24117c4b1fe649286651ece45b3dc2007cb8a163bf0598da48361c55d39a69163fa8fd24cf5f83655d23dca3ad961c62f356208552bb9ed529077096966d670c354e4abc9804f1746c08ca18217c32905e462e36ce3be39e772c180e86039b2783a2ec07a28fb5c55df06f4c52c9de2bcbf6955817183995497cea956ae515d2261898fa051015728e5a8aaac42dad33170d04507a33a85521abdf1cba64ecfb850458dbef0a8aea71575d060c7db3970f85a6e1e4c7abf5ae8cdb0933d71e8c94e04a25619dcee3d2261ad2ee6bf12ffa06d98a0864d87602733ec86a64521f2b18177b200cbbe117577a615d6c770988c0bad946e208e24fa074e5ab3143db5bfce0fd108e4b82d120a92108011a723c12a787e6d788719a10bdba5b2699c327186af4e23c1a946834b6150bda2583e9ca2ad44ce8dbbbc2db04de8ef92e8efc141fbecaa6287c59474e6bc05d99b2964fa090c3a2233ba186515be7ed1f612970cee2d7afb81bdd762170481cd0069127d5b05aa993b4ea988d8fddc186ffb7dc90a6c08f4df435c93402849236c3fab4d27c7026c1d4dcb2602646dec9751e763dba37bdf8ff9406ad9e530ee5db382f413001aeb06a53ed9027d831179727b0865a8918da3edbebcf9b14ed44ce6cbaced4bb1bdb7f1447e6cc254b332051512bd7af426fb8f401378cd2bf5983ca01c64b92ecf032ea15d1721d03f482d7ce6e74fef6d55e702f46980c82b5a84031900b1c9e59e7c97fbec7e8f323a97a7e36cc88be0f1d45b7ff585ac54bd407b22b4154aacc8f6d7ebf48e1d814cc5ed20f8037e0a79715eef29be32806a1d58bb7c5da76f550aa3d8a1fbff0eb19ccb1a313d55cda56c9ec2ef29632387fe8d76e3c0468043e8f663f4860ee12bf2d5b0b7474d6e694f91e6dbe115974a3926f12fee5e438777cb6a932df8cd8bec4d073b931ba3bc832b68d9dd300741fa7bf8afc47ed2576f6936ba424663aab639c5ae4f5683423b4742bf1c978238f16cbe39d652de3fdb8befc848ad922222e04a4037c0713eb57a81a23f0c73473fc646cea306b4bcbc8862f8385ddfa9d4b7fa2c087e879683303ed5bdd3a062b3cf5b3a278a66d2a13f83f44f82ddf310ee074ab6a364597e899a0255dc164f31cc50846851df9ab48195ded7ea1b1d510bd7ee74d73faf36bc31ecfa268359046f4eb879f924009438b481c6cd7889a002ed5ee382bc9190da6fc026e479558e4475677e9aa9e3050e2765694dfc81f56e880b96e7160c980dd98edd3dfffffffffffffffff"}}},{}],438:[function(a,b,c){(function(c){function d(a,b){return b=b||"utf8",c.isBuffer(a)||(a=new c(a,b)),this._pub=new j(a),this}function e(a,b){return b=b||"utf8",c.isBuffer(a)||(a=new c(a,b)),this._priv=new j(a),this}function f(a,b){var c=b.toString("hex"),d=[c,a.toString(16)].join("_");if(d in t)return t[d];var e=0;if(a.isEven()||!r.simpleSieve||!r.fermatTest(a)||!l.test(a))return e+=1,e+="02"===c||"05"===c?8:4,t[d]=e,e;l.test(a.shrn(1))||(e+=2);var f;switch(c){case"02":a.mod(m).cmp(n)&&(e+=8);break;case"05":f=a.mod(o),f.cmp(p)&&f.cmp(q)&&(e+=8);break;default:e+=4}return t[d]=e,e}function g(a,b){try{Object.defineProperty(a,"verifyError",{enumerable:!0,value:b,writable:!1})}catch(c){a.verifyError=b}}function h(a,b,c){this.setGenerator(b),this.__prime=new j(a),this._prime=j.mont(this.__prime),this._primeLen=a.length,this._pub=void 0,this._priv=void 0,c?(this.setPublicKey=d,this.setPrivateKey=e,g(this,f(this.__prime,b))):g(this,8)}function i(a,b){var d=new c(a.toArray());return b?d.toString(b):d}var j=a("bn.js"),k=a("miller-rabin"),l=new k,m=new j(24),n=new j(11),o=new j(10),p=new j(3),q=new j(7),r=a("./generatePrime"),s=a("randombytes");b.exports=h;var t={};h.prototype.generateKeys=function(){return this._priv||(this._priv=new j(s(this._primeLen))),this._pub=this._gen.toRed(this._prime).redPow(this._priv).fromRed(),this.getPublicKey()},h.prototype.computeSecret=function(a){a=new j(a),a=a.toRed(this._prime);var b=a.redPow(this._priv).fromRed(),d=new c(b.toArray()),e=this.getPrime();if(d.length<e.length){var f=new c(e.length-d.length);f.fill(0),d=c.concat([f,d])}return d},h.prototype.getPublicKey=function(a){return i(this._pub,a)},h.prototype.getPrivateKey=function(a){return i(this._priv,a)},h.prototype.getPrime=function(a){return i(this.__prime,a)},h.prototype.getGenerator=function(a){return i(this._gen,a)},h.prototype.setGenerator=function(a,b){return b=b||"utf8",c.isBuffer(a)||(a=new c(a,b)),this._gen=new j(a),this}}).call(this,a("buffer").Buffer)},{"./generatePrime":439,"bn.js":441,buffer:329,"miller-rabin":442,randombytes:474}],439:[function(a,b,c){function d(){if(null!==w)return w;var a=1048576,b=[];b[0]=2;for(var c=1,d=3;a>d;d+=2){for(var e=Math.ceil(Math.sqrt(d)),f=0;c>f&&b[f]<=e&&d%b[f]!==0;f++);c!==f&&b[f]<=e||(b[c++]=d)}return w=b,b}function e(a){for(var b=d(),c=0;c<b.length;c++)if(0===a.modn(b[c]))return 0===a.cmpn(b[c])?!0:!1;return!0}function f(a){var b=i.mont(a);return 0===n.toRed(b).redPow(a.subn(1)).fromRed().cmpn(1)}function g(a,b){function c(a){d=-1;for(var c=new i(h(Math.ceil(a/8)));c.bitLength()>a;)c.ishrn(1);if(c.isEven()&&c.iadd(m),c.testn(1)||c.iadd(n),b.cmp(n))if(b.cmp(o))g={major:[u],minor:[n]};else{for(rem=c.mod(r);rem.cmp(s);)c.iadd(u),rem=c.mod(r);g={major:[u,p],minor:[n,q]}}else{for(;c.mod(j).cmp(t);)c.iadd(u);g={major:[j],minor:[v]}}return c}if(16>a)return new i(2===b||5===b?[140,123]:[140,39]);b=new i(b);for(var d,g,k=c(a),w=k.shrn(1);;){for(;k.bitLength()>a;)k=c(a),w=k.shrn(1);if(d++,e(w)&&e(k)&&f(w)&&f(k)&&l.test(w)&&l.test(k))return k;k.iadd(g.major[d%g.major.length]),w.iadd(g.minor[d%g.minor.length])}}var h=a("randombytes");b.exports=g,g.simpleSieve=e,g.fermatTest=f;var i=a("bn.js"),j=new i(24),k=a("miller-rabin"),l=new k,m=new i(1),n=new i(2),o=new i(5),p=new i(16),q=new i(8),r=new i(10),s=new i(3),t=(new i(7),new i(11)),u=new i(4),v=new i(12),w=null},{"bn.js":441,"miller-rabin":442,randombytes:474}],442:[function(a,b,c){function d(a){this.rand=a||new f.Rand}var e=a("bn.js"),f=a("brorand");b.exports=d,d.create=function(a){return new d(a)},d.prototype._rand=function(a){var b=a.bitLength(),c=this.rand.generate(Math.ceil(b/8));c[0]|=3;var d=7&b;return 0!==d&&(c[c.length-1]>>=7-d),new e(c)},d.prototype.test=function(a,b,c){var d=a.bitLength(),f=e.mont(a),g=new e(1).toRed(f);b||(b=Math.max(1,d/48|0));for(var h=a.subn(1),i=h.subn(1),j=0;!h.testn(j);j++);for(var k=a.shrn(j),l=h.toRed(f),m=!0;b>0;b--){var n=this._rand(i);c&&c(n);var o=n.toRed(f).redPow(k);if(0!==o.cmp(g)&&0!==o.cmp(l)){for(var p=1;j>p;p++){if(o=o.redSqr(),0===o.cmp(g))return!1;if(0===o.cmp(l))break}if(p===j)return!1}}return m},d.prototype.getDivisor=function(a,b){var c=a.bitLength(),d=e.mont(a),f=new e(1).toRed(d);b||(b=Math.max(1,c/48|0));for(var g=a.subn(1),h=g.subn(1),i=0;!g.testn(i);i++);for(var j=a.shrn(i),k=g.toRed(d);b>0;b--){var l=this._rand(h),m=a.gcd(l);if(0!==m.cmpn(1))return m;var n=l.toRed(d).redPow(j);if(0!==n.cmp(f)&&0!==n.cmp(k)){for(var o=1;i>o;o++){if(n=n.redSqr(),0===n.cmp(f))return n.fromRed().subn(1).gcd(a);if(0===n.cmp(k))break}if(o===i)return n=n.redSqr(),n.fromRed().subn(1).gcd(a)}}return!1}},{"bn.js":443,brorand:444}],444:[function(a,b,c){arguments[4][370][0].apply(c,arguments)},{dup:370}],443:[function(a,b,c){!function(a,b){"use strict";function c(a,b){if(!a)throw new Error(b||"Assertion failed")}function d(a,b){a.super_=b;var c=function(){};c.prototype=b.prototype,a.prototype=new c,a.prototype.constructor=a}function e(a,b,c){return null!==a&&"object"==typeof a&&Array.isArray(a.words)?a:(this.sign=!1,this.words=null,this.length=0,this.red=null,("le"===b||"be"===b)&&(c=b,b=10),void(null!==a&&this._init(a||0,b||10,c||"be")))}function f(a,b,c){for(var d=0,e=Math.min(a.length,c),f=b;e>f;f++){var g=a.charCodeAt(f)-48;d<<=4,d|=g>=49&&54>=g?g-49+10:g>=17&&22>=g?g-17+10:15&g}return d}function g(a,b,c,d){for(var e=0,f=Math.min(a.length,c),g=b;f>g;g++){var h=a.charCodeAt(g)-48;e*=d,e+=h>=49?h-49+10:h>=17?h-17+10:h}return e}function h(a,b){this.name=a,this.p=new e(b,16),this.n=this.p.bitLength(),this.k=new e(1).iushln(this.n).isub(this.p),this.tmp=this._tmp()}function i(){h.call(this,"k256","ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f")}function j(){h.call(this,"p224","ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001")}function k(){h.call(this,"p192","ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff")}function l(){h.call(this,"25519","7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed")}function m(a){if("string"==typeof a){var b=e._prime(a);this.m=b.p,this.prime=b}else this.m=a,this.prime=null}function n(a){m.call(this,a),this.shift=this.m.bitLength(),this.shift%26!==0&&(this.shift+=26-this.shift%26),this.r=new e(1).iushln(this.shift),this.r2=this.imod(this.r.sqr()),this.rinv=this.r._invmp(this.m),this.minv=this.rinv.mul(this.r).isubn(1).div(this.m),this.minv=this.minv.umod(this.r),this.minv=this.r.sub(this.minv)}"object"==typeof a?a.exports=e:b.BN=e,e.BN=e,e.wordSize=26,e.prototype._init=function(a,b,d){if("number"==typeof a)return this._initNumber(a,b,d);if("object"==typeof a)return this._initArray(a,b,d);"hex"===b&&(b=16),c(b===(0|b)&&b>=2&&36>=b),a=a.toString().replace(/\s+/g,"");var e=0;"-"===a[0]&&e++,16===b?this._parseHex(a,e):this._parseBase(a,b,e),"-"===a[0]&&(this.sign=!0),this.strip(),"le"===d&&this._initArray(this.toArray(),b,d)},e.prototype._initNumber=function(a,b,d){0>a&&(this.sign=!0,a=-a),67108864>a?(this.words=[67108863&a],this.length=1):4503599627370496>a?(this.words=[67108863&a,a/67108864&67108863],this.length=2):(c(9007199254740992>a),this.words=[67108863&a,a/67108864&67108863,1],this.length=3),"le"===d&&this._initArray(this.toArray(),b,d)},e.prototype._initArray=function(a,b,d){if(c("number"==typeof a.length),a.length<=0)return this.words=[0],this.length=1,this;this.length=Math.ceil(a.length/3),this.words=new Array(this.length);for(var e=0;e<this.length;e++)this.words[e]=0;var f=0;if("be"===d)for(var e=a.length-1,g=0;e>=0;e-=3){var h=a[e]|a[e-1]<<8|a[e-2]<<16;this.words[g]|=h<<f&67108863,this.words[g+1]=h>>>26-f&67108863,f+=24,f>=26&&(f-=26,g++)}else if("le"===d)for(var e=0,g=0;e<a.length;e+=3){var h=a[e]|a[e+1]<<8|a[e+2]<<16;this.words[g]|=h<<f&67108863,this.words[g+1]=h>>>26-f&67108863,f+=24,f>=26&&(f-=26,g++)}return this.strip()},e.prototype._parseHex=function(a,b){this.length=Math.ceil((a.length-b)/6),this.words=new Array(this.length);for(var c=0;c<this.length;c++)this.words[c]=0;for(var d=0,c=a.length-6,e=0;c>=b;c-=6){var g=f(a,c,c+6);this.words[e]|=g<<d&67108863,this.words[e+1]|=g>>>26-d&4194303,d+=24,d>=26&&(d-=26,e++)}if(c+6!==b){var g=f(a,b,c+6);this.words[e]|=g<<d&67108863,this.words[e+1]|=g>>>26-d&4194303}this.strip()},e.prototype._parseBase=function(a,b,c){this.words=[0],this.length=1;for(var d=0,e=1;67108863>=e;e*=b)d++;d--,e=e/b|0;for(var f=a.length-c,h=f%d,i=Math.min(f,f-h)+c,j=0,k=c;i>k;k+=d)j=g(a,k,k+d,b),this.imuln(e),this.words[0]+j<67108864?this.words[0]+=j:this._iaddn(j);if(0!==h){for(var l=1,j=g(a,k,a.length,b),k=0;h>k;k++)l*=b;this.imuln(l),this.words[0]+j<67108864?this.words[0]+=j:this._iaddn(j)}},e.prototype.copy=function(a){a.words=new Array(this.length);for(var b=0;b<this.length;b++)a.words[b]=this.words[b];a.length=this.length,a.sign=this.sign,a.red=this.red},e.prototype.clone=function(){var a=new e(null);return this.copy(a),a},e.prototype.strip=function(){for(;this.length>1&&0===this.words[this.length-1];)this.length--;return this._normSign()},e.prototype._normSign=function(){return 1===this.length&&0===this.words[0]&&(this.sign=!1),this},e.prototype.inspect=function(){return(this.red?"<BN-R: ":"<BN: ")+this.toString(16)+">"};var o=["","0","00","000","0000","00000","000000","0000000","00000000","000000000","0000000000","00000000000","000000000000","0000000000000","00000000000000","000000000000000","0000000000000000","00000000000000000","000000000000000000","0000000000000000000","00000000000000000000","000000000000000000000","0000000000000000000000","00000000000000000000000","000000000000000000000000","0000000000000000000000000"],p=[0,0,25,16,12,11,10,9,8,8,7,7,7,7,6,6,6,6,6,6,6,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5],q=[0,0,33554432,43046721,16777216,48828125,60466176,40353607,16777216,43046721,1e7,19487171,35831808,62748517,7529536,11390625,16777216,24137569,34012224,47045881,64e6,4084101,5153632,6436343,7962624,9765625,11881376,14348907,17210368,20511149,243e5,28629151,33554432,39135393,45435424,52521875,60466176];e.prototype.toString=function(a,b){if(a=a||10,16===a||"hex"===a){for(var d="",e=0,b=0|b||1,f=0,g=0;g<this.length;g++){var h=this.words[g],i=(16777215&(h<<e|f)).toString(16);f=h>>>24-e&16777215,d=0!==f||g!==this.length-1?o[6-i.length]+i+d:i+d,e+=2,e>=26&&(e-=26,g--)}for(0!==f&&(d=f.toString(16)+d);d.length%b!==0;)d="0"+d;return this.sign&&(d="-"+d),d}if(a===(0|a)&&a>=2&&36>=a){var j=p[a],k=q[a],d="",l=this.clone();for(l.sign=!1;0!==l.cmpn(0);){var m=l.modn(k).toString(a);l=l.idivn(k),d=0!==l.cmpn(0)?o[j-m.length]+m+d:m+d}return 0===this.cmpn(0)&&(d="0"+d),this.sign&&(d="-"+d),d}c(!1,"Base should be between 2 and 36")},e.prototype.toJSON=function(){return this.toString(16)},e.prototype.toArray=function(a,b){this.strip();var d="le"===a,e=new Array(this.byteLength());e[0]=0;var f=this.clone();if(d)for(var g=0;0!==f.cmpn(0);g++){var h=f.andln(255);f.iushrn(8),e[g]=h}else for(var g=0;0!==f.cmpn(0);g++){var h=f.andln(255);f.iushrn(8),e[e.length-g-1]=h}if(b)for(c(e.length<=b,"byte array longer than desired length");e.length<b;)d?e.push(0):e.unshift(0);return e},Math.clz32?e.prototype._countBits=function(a){return 32-Math.clz32(a)}:e.prototype._countBits=function(a){var b=a,c=0;return b>=4096&&(c+=13,b>>>=13),b>=64&&(c+=7,b>>>=7),b>=8&&(c+=4,b>>>=4),b>=2&&(c+=2,b>>>=2),c+b},e.prototype._zeroBits=function(a){if(0===a)return 26;var b=a,c=0;return 0===(8191&b)&&(c+=13,b>>>=13),0===(127&b)&&(c+=7,b>>>=7),0===(15&b)&&(c+=4,b>>>=4),0===(3&b)&&(c+=2,b>>>=2),0===(1&b)&&c++,c},e.prototype.bitLength=function(){var a=0,b=this.words[this.length-1],a=this._countBits(b);return 26*(this.length-1)+a},e.prototype.zeroBits=function(){if(0===this.cmpn(0))return 0;for(var a=0,b=0;b<this.length;b++){var c=this._zeroBits(this.words[b]);if(a+=c,26!==c)break}return a},e.prototype.byteLength=function(){return Math.ceil(this.bitLength()/8)},e.prototype.neg=function(){if(0===this.cmpn(0))return this.clone();var a=this.clone();return a.sign=!this.sign,a},e.prototype.iuor=function(a){for(;this.length<a.length;)this.words[this.length++]=0;for(var b=0;b<a.length;b++)this.words[b]=this.words[b]|a.words[b];return this.strip()},e.prototype.ior=function(a){return c(!this.sign&&!a.sign),this.iuor(a)},e.prototype.or=function(a){return this.length>a.length?this.clone().ior(a):a.clone().ior(this)},e.prototype.uor=function(a){return this.length>a.length?this.clone().iuor(a):a.clone().iuor(this)},e.prototype.iuand=function(a){var b;b=this.length>a.length?a:this;for(var c=0;c<b.length;c++)this.words[c]=this.words[c]&a.words[c];return this.length=b.length,this.strip()},e.prototype.iand=function(a){return c(!this.sign&&!a.sign),this.iuand(a)},e.prototype.and=function(a){return this.length>a.length?this.clone().iand(a):a.clone().iand(this)},e.prototype.uand=function(a){return this.length>a.length?this.clone().iuand(a):a.clone().iuand(this)},e.prototype.iuxor=function(a){var b,c;this.length>a.length?(b=this,c=a):(b=a,c=this);for(var d=0;d<c.length;d++)this.words[d]=b.words[d]^c.words[d];if(this!==b)for(;d<b.length;d++)this.words[d]=b.words[d];return this.length=b.length,this.strip()},e.prototype.ixor=function(a){return c(!this.sign&&!a.sign),this.iuxor(a)},e.prototype.xor=function(a){return this.length>a.length?this.clone().ixor(a):a.clone().ixor(this)},e.prototype.uxor=function(a){return this.length>a.length?this.clone().iuxor(a):a.clone().iuxor(this)},e.prototype.setn=function(a,b){c("number"==typeof a&&a>=0);for(var d=a/26|0,e=a%26;this.length<=d;)this.words[this.length++]=0;return b?this.words[d]=this.words[d]|1<<e:this.words[d]=this.words[d]&~(1<<e),this.strip()},e.prototype.iadd=function(a){if(this.sign&&!a.sign){this.sign=!1;var b=this.isub(a);return this.sign=!this.sign,this._normSign()}if(!this.sign&&a.sign){a.sign=!1;var b=this.isub(a);return a.sign=!0,b._normSign()}var c,d;this.length>a.length?(c=this,d=a):(c=a,d=this);for(var e=0,f=0;f<d.length;f++){var b=c.words[f]+d.words[f]+e;this.words[f]=67108863&b,e=b>>>26}for(;0!==e&&f<c.length;f++){var b=c.words[f]+e;this.words[f]=67108863&b,e=b>>>26}if(this.length=c.length,0!==e)this.words[this.length]=e,this.length++;else if(c!==this)for(;f<c.length;f++)this.words[f]=c.words[f];return this},e.prototype.add=function(a){if(a.sign&&!this.sign){a.sign=!1;var b=this.sub(a);return a.sign=!0,b}if(!a.sign&&this.sign){this.sign=!1;var b=a.sub(this);return this.sign=!0,b}return this.length>a.length?this.clone().iadd(a):a.clone().iadd(this)},e.prototype.isub=function(a){if(a.sign){a.sign=!1;var b=this.iadd(a);return a.sign=!0,b._normSign()}if(this.sign)return this.sign=!1,this.iadd(a),this.sign=!0,this._normSign();var c=this.cmp(a);if(0===c)return this.sign=!1,this.length=1,this.words[0]=0,this;var d,e;c>0?(d=this,e=a):(d=a,e=this);for(var f=0,g=0;g<e.length;g++){var b=d.words[g]-e.words[g]+f;f=b>>26,this.words[g]=67108863&b}for(;0!==f&&g<d.length;g++){var b=d.words[g]+f;f=b>>26,this.words[g]=67108863&b}if(0===f&&g<d.length&&d!==this)for(;g<d.length;g++)this.words[g]=d.words[g];return this.length=Math.max(this.length,g),d!==this&&(this.sign=!0),this.strip()},e.prototype.sub=function(a){return this.clone().isub(a)},e.prototype._smallMulTo=function(a,b){b.sign=a.sign!==this.sign,b.length=this.length+a.length;for(var c=0,d=0;d<b.length-1;d++){for(var e=c>>>26,f=67108863&c,g=Math.min(d,a.length-1),h=Math.max(0,d-this.length+1);g>=h;h++){var i=d-h,j=0|this.words[i],k=0|a.words[h],l=j*k,m=67108863&l;e=e+(l/67108864|0)|0,m=m+f|0,f=67108863&m,e=e+(m>>>26)|0}b.words[d]=f,c=e}return 0!==c?b.words[d]=c:b.length--,b.strip()},e.prototype._bigMulTo=function(a,b){b.sign=a.sign!==this.sign,b.length=this.length+a.length;for(var c=0,d=0,e=0;e<b.length-1;e++){var f=d;d=0;for(var g=67108863&c,h=Math.min(e,a.length-1),i=Math.max(0,e-this.length+1);h>=i;i++){var j=e-i,k=0|this.words[j],l=0|a.words[i],m=k*l,n=67108863&m;f=f+(m/67108864|0)|0,n=n+g|0,g=67108863&n,f=f+(n>>>26)|0,d+=f>>>26,f&=67108863}b.words[e]=g,c=f,f=d}return 0!==c?b.words[e]=c:b.length--,b.strip()},e.prototype.mulTo=function(a,b){var c;return c=this.length+a.length<63?this._smallMulTo(a,b):this._bigMulTo(a,b)},e.prototype.mul=function(a){var b=new e(null);return b.words=new Array(this.length+a.length),this.mulTo(a,b)},e.prototype.imul=function(a){if(0===this.cmpn(0)||0===a.cmpn(0))return this.words[0]=0,this.length=1,this;var b=this.length,c=a.length;this.sign=a.sign!==this.sign,this.length=this.length+a.length,this.words[this.length-1]=0;for(var d=this.length-2;d>=0;d--){for(var e=0,f=0,g=Math.min(d,c-1),h=Math.max(0,d-b+1);g>=h;h++){var i=d-h,j=this.words[i],k=a.words[h],l=j*k,m=67108863&l;e+=l/67108864|0,m+=f,f=67108863&m,e+=m>>>26}this.words[d]=f,this.words[d+1]+=e,e=0}for(var e=0,i=1;i<this.length;i++){var n=this.words[i]+e;this.words[i]=67108863&n,e=n>>>26}return this.strip()},e.prototype.imuln=function(a){c("number"==typeof a);for(var b=0,d=0;d<this.length;d++){var e=this.words[d]*a,f=(67108863&e)+(67108863&b);b>>=26,b+=e/67108864|0,b+=f>>>26,this.words[d]=67108863&f}return 0!==b&&(this.words[d]=b,this.length++),this},e.prototype.muln=function(a){return this.clone().imuln(a)},e.prototype.sqr=function(){return this.mul(this)},e.prototype.isqr=function(){return this.mul(this)},e.prototype.iushln=function(a){c("number"==typeof a&&a>=0);var b=a%26,d=(a-b)/26,e=67108863>>>26-b<<26-b;if(0!==b){for(var f=0,g=0;g<this.length;g++){var h=this.words[g]&e,i=this.words[g]-h<<b;this.words[g]=i|f,f=h>>>26-b}f&&(this.words[g]=f,this.length++)}if(0!==d){for(var g=this.length-1;g>=0;g--)this.words[g+d]=this.words[g];for(var g=0;d>g;g++)this.words[g]=0;this.length+=d}return this.strip()},e.prototype.ishln=function(a){return c(!this.sign),this.iushln(a)},e.prototype.iushrn=function(a,b,d){c("number"==typeof a&&a>=0);var e;e=b?(b-b%26)/26:0;var f=a%26,g=Math.min((a-f)/26,this.length),h=67108863^67108863>>>f<<f,i=d;if(e-=g,e=Math.max(0,e),i){for(var j=0;g>j;j++)i.words[j]=this.words[j];i.length=g}if(0===g);else if(this.length>g){this.length-=g;for(var j=0;j<this.length;j++)this.words[j]=this.words[j+g]}else this.words[0]=0,this.length=1;for(var k=0,j=this.length-1;j>=0&&(0!==k||j>=e);j--){var l=this.words[j];this.words[j]=k<<26-f|l>>>f,k=l&h}return i&&0!==k&&(i.words[i.length++]=k),0===this.length&&(this.words[0]=0,this.length=1),this.strip(),this},e.prototype.ishrn=function(a,b,d){return c(!this.sign),this.iushrn(a,b,d)},e.prototype.shln=function(a){return this.clone().ishln(a)},e.prototype.ushln=function(a){return this.clone().iushln(a)},e.prototype.shrn=function(a){return this.clone().ishrn(a)},e.prototype.ushrn=function(a){return this.clone().iushrn(a)},e.prototype.testn=function(a){c("number"==typeof a&&a>=0);var b=a%26,d=(a-b)/26,e=1<<b;if(this.length<=d)return!1;var f=this.words[d];return!!(f&e)},e.prototype.imaskn=function(a){c("number"==typeof a&&a>=0);var b=a%26,d=(a-b)/26;if(c(!this.sign,"imaskn works only with positive numbers"),0!==b&&d++,this.length=Math.min(d,this.length),0!==b){var e=67108863^67108863>>>b<<b;this.words[this.length-1]&=e}return this.strip()},e.prototype.maskn=function(a){return this.clone().imaskn(a)},e.prototype.iaddn=function(a){return c("number"==typeof a),0>a?this.isubn(-a):this.sign?1===this.length&&this.words[0]<a?(this.words[0]=a-this.words[0],this.sign=!1,this):(this.sign=!1,this.isubn(a),this.sign=!0,this):this._iaddn(a)},e.prototype._iaddn=function(a){this.words[0]+=a;for(var b=0;b<this.length&&this.words[b]>=67108864;b++)this.words[b]-=67108864,b===this.length-1?this.words[b+1]=1:this.words[b+1]++;return this.length=Math.max(this.length,b+1),this},e.prototype.isubn=function(a){if(c("number"==typeof a),0>a)return this.iaddn(-a);if(this.sign)return this.sign=!1,this.iaddn(a),this.sign=!0,this;this.words[0]-=a;for(var b=0;b<this.length&&this.words[b]<0;b++)this.words[b]+=67108864,this.words[b+1]-=1;return this.strip()},e.prototype.addn=function(a){
return this.clone().iaddn(a)},e.prototype.subn=function(a){return this.clone().isubn(a)},e.prototype.iabs=function(){return this.sign=!1,this},e.prototype.abs=function(){return this.clone().iabs()},e.prototype._ishlnsubmul=function(a,b,d){var e,f=a.length+d;if(this.words.length<f){for(var g=new Array(f),e=0;e<this.length;e++)g[e]=this.words[e];this.words=g}else e=this.length;for(this.length=Math.max(this.length,f);e<this.length;e++)this.words[e]=0;for(var h=0,e=0;e<a.length;e++){var i=this.words[e+d]+h,j=a.words[e]*b;i-=67108863&j,h=(i>>26)-(j/67108864|0),this.words[e+d]=67108863&i}for(;e<this.length-d;e++){var i=this.words[e+d]+h;h=i>>26,this.words[e+d]=67108863&i}if(0===h)return this.strip();c(-1===h),h=0;for(var e=0;e<this.length;e++){var i=-this.words[e]+h;h=i>>26,this.words[e]=67108863&i}return this.sign=!0,this.strip()},e.prototype._wordDiv=function(a,b){var c=this.length-a.length,d=this.clone(),f=a,g=f.words[f.length-1],h=this._countBits(g);c=26-h,0!==c&&(f=f.ushln(c),d.iushln(c),g=f.words[f.length-1]);var i,j=d.length-f.length;if("mod"!==b){i=new e(null),i.length=j+1,i.words=new Array(i.length);for(var k=0;k<i.length;k++)i.words[k]=0}var l=d.clone()._ishlnsubmul(f,1,j);l.sign||(d=l,i&&(i.words[j]=1));for(var m=j-1;m>=0;m--){var n=67108864*d.words[f.length+m]+d.words[f.length+m-1];for(n=Math.min(n/g|0,67108863),d._ishlnsubmul(f,n,m);d.sign;)n--,d.sign=!1,d._ishlnsubmul(f,1,m),0!==d.cmpn(0)&&(d.sign=!d.sign);i&&(i.words[m]=n)}return i&&i.strip(),d.strip(),"div"!==b&&0!==c&&d.iushrn(c),{div:i?i:null,mod:d}},e.prototype.divmod=function(a,b,d){if(c(0!==a.cmpn(0)),this.sign&&!a.sign){var f,g,h=this.neg().divmod(a,b);return"mod"!==b&&(f=h.div.neg()),"div"!==b&&(g=h.mod.neg(),d&&g.neg&&(g=g.add(a))),{div:f,mod:g}}if(!this.sign&&a.sign){var f,h=this.divmod(a.neg(),b);return"mod"!==b&&(f=h.div.neg()),{div:f,mod:h.mod}}if(this.sign&&a.sign){var g,h=this.neg().divmod(a.neg(),b);return"div"!==b&&(g=h.mod.neg(),d&&g.neg&&(g=g.isub(a))),{div:h.div,mod:g}}return a.length>this.length||this.cmp(a)<0?{div:new e(0),mod:this}:1===a.length?"div"===b?{div:this.divn(a.words[0]),mod:null}:"mod"===b?{div:null,mod:new e(this.modn(a.words[0]))}:{div:this.divn(a.words[0]),mod:new e(this.modn(a.words[0]))}:this._wordDiv(a,b)},e.prototype.div=function(a){return this.divmod(a,"div",!1).div},e.prototype.mod=function(a){return this.divmod(a,"mod",!1).mod},e.prototype.umod=function(a){return this.divmod(a,"mod",!0).mod},e.prototype.divRound=function(a){var b=this.divmod(a);if(0===b.mod.cmpn(0))return b.div;var c=b.div.sign?b.mod.isub(a):b.mod,d=a.ushrn(1),e=a.andln(1),f=c.cmp(d);return 0>f||1===e&&0===f?b.div:b.div.sign?b.div.isubn(1):b.div.iaddn(1)},e.prototype.modn=function(a){c(67108863>=a);for(var b=(1<<26)%a,d=0,e=this.length-1;e>=0;e--)d=(b*d+this.words[e])%a;return d},e.prototype.idivn=function(a){c(67108863>=a);for(var b=0,d=this.length-1;d>=0;d--){var e=this.words[d]+67108864*b;this.words[d]=e/a|0,b=e%a}return this.strip()},e.prototype.divn=function(a){return this.clone().idivn(a)},e.prototype.egcd=function(a){c(!a.sign),c(0!==a.cmpn(0));var b=this,d=a.clone();b=b.sign?b.umod(a):b.clone();for(var f=new e(1),g=new e(0),h=new e(0),i=new e(1),j=0;b.isEven()&&d.isEven();)b.iushrn(1),d.iushrn(1),++j;for(var k=d.clone(),l=b.clone();0!==b.cmpn(0);){for(;b.isEven();)b.iushrn(1),f.isEven()&&g.isEven()?(f.iushrn(1),g.iushrn(1)):(f.iadd(k).iushrn(1),g.isub(l).iushrn(1));for(;d.isEven();)d.iushrn(1),h.isEven()&&i.isEven()?(h.iushrn(1),i.iushrn(1)):(h.iadd(k).iushrn(1),i.isub(l).iushrn(1));b.cmp(d)>=0?(b.isub(d),f.isub(h),g.isub(i)):(d.isub(b),h.isub(f),i.isub(g))}return{a:h,b:i,gcd:d.iushln(j)}},e.prototype._invmp=function(a){c(!a.sign),c(0!==a.cmpn(0));var b=this,d=a.clone();b=b.sign?b.umod(a):b.clone();for(var f=new e(1),g=new e(0),h=d.clone();b.cmpn(1)>0&&d.cmpn(1)>0;){for(;b.isEven();)b.iushrn(1),f.isEven()?f.iushrn(1):f.iadd(h).iushrn(1);for(;d.isEven();)d.iushrn(1),g.isEven()?g.iushrn(1):g.iadd(h).iushrn(1);b.cmp(d)>=0?(b.isub(d),f.isub(g)):(d.isub(b),g.isub(f))}var i;return i=0===b.cmpn(1)?f:g,i.cmpn(0)<0&&i.iadd(a),i},e.prototype.gcd=function(a){if(0===this.cmpn(0))return a.clone();if(0===a.cmpn(0))return this.clone();var b=this.clone(),c=a.clone();b.sign=!1,c.sign=!1;for(var d=0;b.isEven()&&c.isEven();d++)b.iushrn(1),c.iushrn(1);for(;;){for(;b.isEven();)b.iushrn(1);for(;c.isEven();)c.iushrn(1);var e=b.cmp(c);if(0>e){var f=b;b=c,c=f}else if(0===e||0===c.cmpn(1))break;b.isub(c)}return c.iushln(d)},e.prototype.invm=function(a){return this.egcd(a).a.umod(a)},e.prototype.isEven=function(){return 0===(1&this.words[0])},e.prototype.isOdd=function(){return 1===(1&this.words[0])},e.prototype.andln=function(a){return this.words[0]&a},e.prototype.bincn=function(a){c("number"==typeof a);var b=a%26,d=(a-b)/26,e=1<<b;if(this.length<=d){for(var f=this.length;d+1>f;f++)this.words[f]=0;return this.words[d]|=e,this.length=d+1,this}for(var g=e,f=d;0!==g&&f<this.length;f++){var h=this.words[f];h+=g,g=h>>>26,h&=67108863,this.words[f]=h}return 0!==g&&(this.words[f]=g,this.length++),this},e.prototype.cmpn=function(a){var b=0>a;if(b&&(a=-a),this.sign&&!b)return-1;if(!this.sign&&b)return 1;a&=67108863,this.strip();var c;if(this.length>1)c=1;else{var d=this.words[0];c=d===a?0:a>d?-1:1}return this.sign&&(c=-c),c},e.prototype.cmp=function(a){if(this.sign&&!a.sign)return-1;if(!this.sign&&a.sign)return 1;var b=this.ucmp(a);return this.sign?-b:b},e.prototype.ucmp=function(a){if(this.length>a.length)return 1;if(this.length<a.length)return-1;for(var b=0,c=this.length-1;c>=0;c--){var d=this.words[c],e=a.words[c];if(d!==e){e>d?b=-1:d>e&&(b=1);break}}return b},e.red=function(a){return new m(a)},e.prototype.toRed=function(a){return c(!this.red,"Already a number in reduction context"),c(!this.sign,"red works only with positives"),a.convertTo(this)._forceRed(a)},e.prototype.fromRed=function(){return c(this.red,"fromRed works only with numbers in reduction context"),this.red.convertFrom(this)},e.prototype._forceRed=function(a){return this.red=a,this},e.prototype.forceRed=function(a){return c(!this.red,"Already a number in reduction context"),this._forceRed(a)},e.prototype.redAdd=function(a){return c(this.red,"redAdd works only with red numbers"),this.red.add(this,a)},e.prototype.redIAdd=function(a){return c(this.red,"redIAdd works only with red numbers"),this.red.iadd(this,a)},e.prototype.redSub=function(a){return c(this.red,"redSub works only with red numbers"),this.red.sub(this,a)},e.prototype.redISub=function(a){return c(this.red,"redISub works only with red numbers"),this.red.isub(this,a)},e.prototype.redShl=function(a){return c(this.red,"redShl works only with red numbers"),this.red.ushl(this,a)},e.prototype.redMul=function(a){return c(this.red,"redMul works only with red numbers"),this.red._verify2(this,a),this.red.mul(this,a)},e.prototype.redIMul=function(a){return c(this.red,"redMul works only with red numbers"),this.red._verify2(this,a),this.red.imul(this,a)},e.prototype.redSqr=function(){return c(this.red,"redSqr works only with red numbers"),this.red._verify1(this),this.red.sqr(this)},e.prototype.redISqr=function(){return c(this.red,"redISqr works only with red numbers"),this.red._verify1(this),this.red.isqr(this)},e.prototype.redSqrt=function(){return c(this.red,"redSqrt works only with red numbers"),this.red._verify1(this),this.red.sqrt(this)},e.prototype.redInvm=function(){return c(this.red,"redInvm works only with red numbers"),this.red._verify1(this),this.red.invm(this)},e.prototype.redNeg=function(){return c(this.red,"redNeg works only with red numbers"),this.red._verify1(this),this.red.neg(this)},e.prototype.redPow=function(a){return c(this.red&&!a.red,"redPow(normalNum)"),this.red._verify1(this),this.red.pow(this,a)};var r={k256:null,p224:null,p192:null,p25519:null};h.prototype._tmp=function(){var a=new e(null);return a.words=new Array(Math.ceil(this.n/13)),a},h.prototype.ireduce=function(a){var b,c=a;do this.split(c,this.tmp),c=this.imulK(c),c=c.iadd(this.tmp),b=c.bitLength();while(b>this.n);var d=b<this.n?-1:c.ucmp(this.p);return 0===d?(c.words[0]=0,c.length=1):d>0?c.isub(this.p):c.strip(),c},h.prototype.split=function(a,b){a.iushrn(this.n,0,b)},h.prototype.imulK=function(a){return a.imul(this.k)},d(i,h),i.prototype.split=function(a,b){for(var c=4194303,d=Math.min(a.length,9),e=0;d>e;e++)b.words[e]=a.words[e];if(b.length=d,a.length<=9)return a.words[0]=0,void(a.length=1);var f=a.words[9];b.words[b.length++]=f&c;for(var e=10;e<a.length;e++){var g=a.words[e];a.words[e-10]=(g&c)<<4|f>>>22,f=g}a.words[e-10]=f>>>22,a.length-=9},i.prototype.imulK=function(a){a.words[a.length]=0,a.words[a.length+1]=0,a.length+=2;for(var b,c=0,d=0;d<a.length;d++){var e=a.words[d];b=64*e,c+=977*e,b+=c/67108864|0,c&=67108863,a.words[d]=c,c=b}return 0===a.words[a.length-1]&&(a.length--,0===a.words[a.length-1]&&a.length--),a},d(j,h),d(k,h),d(l,h),l.prototype.imulK=function(a){for(var b=0,c=0;c<a.length;c++){var d=19*a.words[c]+b,e=67108863&d;d>>>=26,a.words[c]=e,b=d}return 0!==b&&(a.words[a.length++]=b),a},e._prime=function s(a){if(r[a])return r[a];var s;if("k256"===a)s=new i;else if("p224"===a)s=new j;else if("p192"===a)s=new k;else{if("p25519"!==a)throw new Error("Unknown prime "+a);s=new l}return r[a]=s,s},m.prototype._verify1=function(a){c(!a.sign,"red works only with positives"),c(a.red,"red works only with red numbers")},m.prototype._verify2=function(a,b){c(!a.sign&&!b.sign,"red works only with positives"),c(a.red&&a.red===b.red,"red works only with red numbers")},m.prototype.imod=function(a){return this.prime?this.prime.ireduce(a)._forceRed(this):a.umod(this.m)._forceRed(this)},m.prototype.neg=function(a){var b=a.clone();return b.sign=!b.sign,b.iadd(this.m)._forceRed(this)},m.prototype.add=function(a,b){this._verify2(a,b);var c=a.add(b);return c.cmp(this.m)>=0&&c.isub(this.m),c._forceRed(this)},m.prototype.iadd=function(a,b){this._verify2(a,b);var c=a.iadd(b);return c.cmp(this.m)>=0&&c.isub(this.m),c},m.prototype.sub=function(a,b){this._verify2(a,b);var c=a.sub(b);return c.cmpn(0)<0&&c.iadd(this.m),c._forceRed(this)},m.prototype.isub=function(a,b){this._verify2(a,b);var c=a.isub(b);return c.cmpn(0)<0&&c.iadd(this.m),c},m.prototype.shl=function(a,b){return this._verify1(a),this.imod(a.ushln(b))},m.prototype.imul=function(a,b){return this._verify2(a,b),this.imod(a.imul(b))},m.prototype.mul=function(a,b){return this._verify2(a,b),this.imod(a.mul(b))},m.prototype.isqr=function(a){return this.imul(a,a)},m.prototype.sqr=function(a){return this.mul(a,a)},m.prototype.sqrt=function(a){if(0===a.cmpn(0))return a.clone();var b=this.m.andln(3);if(c(b%2===1),3===b){var d=this.m.add(new e(1)).iushrn(2),f=this.pow(a,d);return f}for(var g=this.m.subn(1),h=0;0!==g.cmpn(0)&&0===g.andln(1);)h++,g.iushrn(1);c(0!==g.cmpn(0));var i=new e(1).toRed(this),j=i.redNeg(),k=this.m.subn(1).iushrn(1),l=this.m.bitLength();for(l=new e(2*l*l).toRed(this);0!==this.pow(l,k).cmp(j);)l.redIAdd(j);for(var m=this.pow(l,g),f=this.pow(a,g.addn(1).iushrn(1)),n=this.pow(a,g),o=h;0!==n.cmp(i);){for(var p=n,q=0;0!==p.cmp(i);q++)p=p.redSqr();c(o>q);var r=this.pow(m,new e(1).iushln(o-q-1));f=f.redMul(r),m=r.redSqr(),n=n.redMul(m),o=q}return f},m.prototype.invm=function(a){var b=a._invmp(this.m);return b.sign?(b.sign=!1,this.imod(b).redNeg()):this.imod(b)},m.prototype.pow=function(a,b){var c=[];if(0===b.cmpn(0))return new e(1);for(var d=b.clone();0!==d.cmpn(0);)c.push(d.andln(1)),d.iushrn(1);for(var f=a,g=0;g<c.length&&0===c[g];g++,f=this.sqr(f));if(++g<c.length)for(var d=this.sqr(f);g<c.length;g++,d=this.sqr(d))0!==c[g]&&(f=this.mul(f,d));return f},m.prototype.convertTo=function(a){var b=a.umod(this.m);return b===a?b.clone():b},m.prototype.convertFrom=function(a){var b=a.clone();return b.red=null,b},e.mont=function(a){return new n(a)},d(n,m),n.prototype.convertTo=function(a){return this.imod(a.ushln(this.shift))},n.prototype.convertFrom=function(a){var b=this.imod(a.mul(this.rinv));return b.red=null,b},n.prototype.imul=function(a,b){if(0===a.cmpn(0)||0===b.cmpn(0))return a.words[0]=0,a.length=1,a;var c=a.imul(b),d=c.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),e=c.isub(d).iushrn(this.shift),f=e;return e.cmp(this.m)>=0?f=e.isub(this.m):e.cmpn(0)<0&&(f=e.iadd(this.m)),f._forceRed(this)},n.prototype.mul=function(a,b){if(0===a.cmpn(0)||0===b.cmpn(0))return new e(0)._forceRed(this);var c=a.mul(b),d=c.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),f=c.isub(d).iushrn(this.shift),g=f;return f.cmp(this.m)>=0?g=f.isub(this.m):f.cmpn(0)<0&&(g=f.iadd(this.m)),g._forceRed(this)},n.prototype.invm=function(a){var b=this.imod(a._invmp(this.m).mul(this.r2));return b._forceRed(this)}}("undefined"==typeof b||b,this)},{}],441:[function(a,b,c){arguments[4][355][0].apply(c,arguments)},{dup:355}],401:[function(a,b,c){var d=a("crypto").createECDH;b.exports=d||a("./browser")},{"./browser":400,crypto:333}],400:[function(a,b,c){(function(c){function d(a){this.curveType=h[a],this.curveType||(this.curveType={name:a}),this.curve=new f.ec(this.curveType.name),this.keys=void 0}function e(a,b,d){Array.isArray(a)||(a=a.toArray());var e=new c(a);if(d&&e.length<d){var f=new c(d-e.length);f.fill(0),e=c.concat([f,e])}return b?e.toString(b):e}var f=a("elliptic"),g=a("bn.js");b.exports=function(a){return new d(a)};var h={secp256k1:{name:"secp256k1",byteLength:32},secp224r1:{name:"p224",byteLength:28},prime256v1:{name:"p256",byteLength:32},prime192v1:{name:"p192",byteLength:24},ed25519:{name:"ed25519",byteLength:32}};h.p224=h.secp224r1,h.p256=h.secp256r1=h.prime256v1,h.p192=h.secp192r1=h.prime192v1,d.prototype.generateKeys=function(a,b){return this.keys=this.curve.genKeyPair(),this.getPublicKey(a,b)},d.prototype.computeSecret=function(a,b,d){b=b||"utf8",c.isBuffer(a)||(a=new c(a,b));var f=this.curve.keyFromPublic(a).getPublic(),g=f.mul(this.keys.getPrivate()).getX();return e(g,d,this.curveType.byteLength)},d.prototype.getPublicKey=function(a,b){var c=this.keys.getPublic("compressed"===b,!0);return"hybrid"===b&&(c[c.length-1]%2?c[0]=7:c[0]=6),e(c,a)},d.prototype.getPrivateKey=function(a){return e(this.keys.getPrivate(),a)},d.prototype.setPublicKey=function(a,b){return b=b||"utf8",c.isBuffer(a)||(a=new c(a,b)),this.keys._importPublic(a),this},d.prototype.setPrivateKey=function(a,b){b=b||"utf8",c.isBuffer(a)||(a=new c(a,b));var d=new g(a);return d=d.toString(16),this.keys._importPrivate(d),this}}).call(this,a("buffer").Buffer)},{"bn.js":402,buffer:329,elliptic:403}],403:[function(a,b,c){arguments[4][357][0].apply(c,arguments)},{"../package.json":423,"./elliptic/curve":406,"./elliptic/curves":409,"./elliptic/ec":410,"./elliptic/hmac-drbg":413,"./elliptic/utils":415,brorand:416,dup:357}],423:[function(a,b,c){arguments[4][377][0].apply(c,arguments)},{dup:377}],416:[function(a,b,c){arguments[4][370][0].apply(c,arguments)},{dup:370}],415:[function(a,b,c){arguments[4][369][0].apply(c,arguments)},{dup:369}],413:[function(a,b,c){arguments[4][367][0].apply(c,arguments)},{"../elliptic":403,dup:367,"hash.js":417}],410:[function(a,b,c){arguments[4][364][0].apply(c,arguments)},{"../../elliptic":403,"./key":411,"./signature":412,"bn.js":402,dup:364}],412:[function(a,b,c){arguments[4][366][0].apply(c,arguments)},{"../../elliptic":403,"bn.js":402,dup:366}],411:[function(a,b,c){arguments[4][365][0].apply(c,arguments)},{"../../elliptic":403,"bn.js":402,dup:365}],409:[function(a,b,c){arguments[4][363][0].apply(c,arguments)},{"../elliptic":403,"./precomputed/secp256k1":414,dup:363,"hash.js":417}],417:[function(a,b,c){arguments[4][371][0].apply(c,arguments)},{"./hash/common":418,"./hash/hmac":419,"./hash/ripemd":420,"./hash/sha":421,"./hash/utils":422,dup:371}],422:[function(a,b,c){arguments[4][376][0].apply(c,arguments)},{dup:376,inherits:476}],421:[function(a,b,c){arguments[4][375][0].apply(c,arguments)},{"../hash":417,dup:375}],420:[function(a,b,c){arguments[4][374][0].apply(c,arguments)},{"../hash":417,dup:374}],419:[function(a,b,c){arguments[4][373][0].apply(c,arguments)},{"../hash":417,dup:373}],418:[function(a,b,c){arguments[4][372][0].apply(c,arguments)},{"../hash":417,dup:372}],414:[function(a,b,c){arguments[4][368][0].apply(c,arguments)},{dup:368}],406:[function(a,b,c){arguments[4][360][0].apply(c,arguments)},{"./base":404,"./edwards":405,"./mont":407,"./short":408,dup:360}],408:[function(a,b,c){arguments[4][362][0].apply(c,arguments)},{"../../elliptic":403,"../curve":406,"bn.js":402,dup:362,inherits:476}],407:[function(a,b,c){arguments[4][361][0].apply(c,arguments)},{"../curve":406,"bn.js":402,dup:361,inherits:476}],405:[function(a,b,c){arguments[4][359][0].apply(c,arguments)},{"../../elliptic":403,"../curve":406,"bn.js":402,dup:359,inherits:476}],404:[function(a,b,c){arguments[4][358][0].apply(c,arguments)},{"../../elliptic":403,"bn.js":402,dup:358}],402:[function(a,b,c){arguments[4][355][0].apply(c,arguments)},{dup:355}],353:[function(a,b,c){(function(b){"use strict";function d(a){return new f(a)}function e(a){return new g(a)}function f(a){j.Writable.call(this);var b=n[a];if(!b)throw new Error("Unknown message digest");this._hashType=b.hash,this._hash=m(b.hash),this._tag=b.id,this._signType=b.sign}function g(a){j.Writable.call(this);var b=n[a];if(!b)throw new Error("Unknown message digest");this._hash=m(b.hash),this._tag=b.id,this._signType=b.sign}var h=a("./sign"),i=a("./verify"),j=a("stream"),k=a("inherits"),l=a("./algos"),m=a("create-hash"),n={};Object.keys(l).forEach(function(a){n[a]=n[a.toLowerCase()]=l[a]}),c.createSign=c.Sign=d,c.createVerify=c.Verify=e,k(f,j.Writable),f.prototype._write=function(a,b,c){this._hash.update(a),c()},f.prototype.update=function(a,c){return"string"==typeof a&&(a=new b(a,c)),this._hash.update(a),this},f.prototype.sign=function(a,c){this.end();var d=this._hash.digest(),e=h(b.concat([this._tag,d]),a,this._hashType,this._signType);return c&&(e=e.toString(c)),e},k(g,j.Writable),g.prototype._write=function(a,b,c){this._hash.update(a),c()},g.prototype.update=function(a,c){return"string"==typeof a&&(a=new b(a,c)),this._hash.update(a),this},g.prototype.verify=function(a,c,d){this.end();var e=this._hash.digest();return"string"==typeof c&&(c=new b(c,d)),i(c,b.concat([this._tag,e]),a,this._signType)}}).call(this,a("buffer").Buffer)},{"./algos":352,"./sign":398,"./verify":399,buffer:329,"create-hash":424,inherits:476,stream:495}],399:[function(a,b,c){(function(c){"use strict";function d(a,b,d,g){var i=h(d);if("ec"===i.type){if("ecdsa"!==g)throw new Error("wrong public key type");return e(a,b,i)}if("dsa"===i.type){if("dsa"!==g)throw new Error("wrong public key type");return f(a,b,i)}if("rsa"!==g)throw new Error("wrong public key type");for(var j=i.modulus.byteLength(),l=[1],m=0;b.length+l.length+2<j;)l.push(255),m++;l.push(0);for(var n=-1;++n<b.length;)l.push(b[n]);l=new c(l);var o=k.mont(i.modulus);a=new k(a).toRed(o),a=a.redPow(new k(i.publicExponent)),a=new c(a.fromRed().toArray());var p=0;for(8>m&&(p=1),j=Math.min(a.length,l.length),a.length!==l.length&&(p=1),n=-1;++n<j;)p|=a[n]^l[n];return 0===p}function e(a,b,c){var d=j[c.data.algorithm.curve.join(".")];if(!d)throw new Error("unknown curve "+c.data.algorithm.curve.join("."));var e=new i.ec(d),f=c.data.subjectPrivateKey.data;return e.verify(b,a,f)}function f(a,b,c){var d=c.data.p,e=c.data.q,f=c.data.g,i=c.data.pub_key,j=h.signature.decode(a,"der"),l=j.s,m=j.r;g(l,e),g(m,e);var n=(k.mont(e),k.mont(d)),o=l.invm(e),p=f.toRed(n).redPow(new k(b).mul(o).mod(e)).fromRed().mul(i.toRed(n).redPow(m.mul(o).mod(e)).fromRed()).mod(d).mod(e);return!p.cmp(m)}function g(a,b){if(a.cmpn(0)<=0)throw new Error("invalid sig");if(a.cmp(b)>=b)throw new Error("invalid sig")}var h=a("parse-asn1"),i=a("elliptic"),j=a("./curves"),k=a("bn.js");b.exports=d}).call(this,a("buffer").Buffer)},{"./curves":354,"bn.js":355,buffer:329,elliptic:357,"parse-asn1":382}],398:[function(a,b,c){(function(c){function d(a,b,c,d){var g=m(b);if(g.curve){if("ecdsa"!==d)throw new Error("wrong private key type");return e(a,g)}if("dsa"===g.type)return f(a,g,c);if("rsa"!==d)throw new Error("wrong private key type");for(var h=g.modulus.byteLength(),i=[0,1];a.length+i.length+1<h;)i.push(255);i.push(0);for(var j=-1;++j<a.length;)i.push(a[j]);var k=p(i,g);return k}function e(a,b){var d=r[b.curve.join(".")];if(!d)throw new Error("unknown curve "+b.curve.join("."));var e=new o.ec(d),f=e.genKeyPair();f._importPrivate(b.privateKey);var g=f.sign(a);return new c(g.toDER())}function f(a,b,c){for(var d,e=b.params.priv_key,f=b.params.p,j=b.params.q,m=(n.mont(j),b.params.g),o=new n(0),p=i(a,j).mod(j),q=!1,r=h(e,j,a,c);q===!1;)d=k(j,r,c),o=l(m,d,f,j),q=d.invm(j).imul(p.add(e.mul(o))).mod(j),q.cmpn(0)||(q=!1,o=new n(0));return g(o,q)}function g(a,b){a=a.toArray(),b=b.toArray(),128&a[0]&&(a=[0].concat(a)),128&b[0]&&(b=[0].concat(b));var d=a.length+b.length+4,e=[48,d,2,a.length];return e=e.concat(a,[2,b.length],b),new c(e)}function h(a,b,d,e){if(a=new c(a.toArray()),a.length<b.byteLength()){var f=new c(b.byteLength()-a.length);f.fill(0),a=c.concat([f,a])}var g=d.length,h=j(d,b),i=new c(g);i.fill(1);var k=new c(g);return k.fill(0),k=q(e,k).update(i).update(new c([0])).update(a).update(h).digest(),i=q(e,k).update(i).digest(),k=q(e,k).update(i).update(new c([1])).update(a).update(h).digest(),i=q(e,k).update(i).digest(),{k:k,v:i}}function i(a,b){var c=new n(a),d=(a.length<<3)-b.bitLength();return d>0&&c.ishrn(d),c}function j(a,b){a=i(a,b),a=a.mod(b);var d=new c(a.toArray());if(d.length<b.byteLength()){var e=new c(b.byteLength()-d.length);e.fill(0),d=c.concat([e,d])}return d}function k(a,b,d){for(var e,f;;){for(e=new c("");8*e.length<a.bitLength();)b.v=q(d,b.k).update(b.v).digest(),e=c.concat([e,b.v]);if(f=i(e,a),b.k=q(d,b.k).update(b.v).update(new c([0])).digest(),b.v=q(d,b.k).update(b.v).digest(),-1===f.cmp(a))return f}}function l(a,b,c,d){return a.toRed(n.mont(c)).redPow(b).fromRed().mod(d)}var m=a("parse-asn1"),n=a("bn.js"),o=a("elliptic"),p=a("browserify-rsa"),q=a("create-hmac"),r=a("./curves");b.exports=d,b.exports.getKey=h,b.exports.makeKey=k}).call(this,a("buffer").Buffer)},{"./curves":354,"bn.js":355,"browserify-rsa":356,buffer:329,"create-hmac":436,elliptic:357,"parse-asn1":382}],382:[function(a,b,c){(function(c){function d(a){var b;"object"!=typeof a||c.isBuffer(a)||(b=a.passphrase,a=a.key),"string"==typeof a&&(a=new c(a));var d,g,i=h(a,b),j=i.tag,k=i.data;switch(j){case"PUBLIC KEY":switch(g=f.PublicKey.decode(k,"der"),d=g.algorithm.algorithm.join(".")){case"1.2.840.113549.1.1.1":return f.RSAPublicKey.decode(g.subjectPublicKey.data,"der");case"1.2.840.10045.2.1":return g.subjectPrivateKey=g.subjectPublicKey,{type:"ec",data:g};case"1.2.840.10040.4.1":return g.algorithm.params.pub_key=f.DSAparam.decode(g.subjectPublicKey.data,"der"),{type:"dsa",data:g.algorithm.params};default:throw new Error("unknown key id "+d)}throw new Error("unknown key type "+j);case"ENCRYPTED PRIVATE KEY":k=f.EncryptedPrivateKey.decode(k,"der"),k=e(k,b);case"PRIVATE KEY":switch(g=f.PrivateKey.decode(k,"der"),d=g.algorithm.algorithm.join(".")){case"1.2.840.113549.1.1.1":return f.RSAPrivateKey.decode(g.subjectPrivateKey,"der");case"1.2.840.10045.2.1":return{curve:g.algorithm.curve,privateKey:f.ECPrivateKey.decode(g.subjectPrivateKey,"der").privateKey};case"1.2.840.10040.4.1":return g.algorithm.params.priv_key=f.DSAparam.decode(g.subjectPrivateKey,"der"),{type:"dsa",params:g.algorithm.params};default:throw new Error("unknown key id "+d)}throw new Error("unknown key type "+j);case"RSA PUBLIC KEY":return f.RSAPublicKey.decode(k,"der");case"RSA PRIVATE KEY":return f.RSAPrivateKey.decode(k,"der");case"DSA PRIVATE KEY":return{type:"dsa",params:f.DSAPrivateKey.decode(k,"der")};case"EC PRIVATE KEY":return k=f.ECPrivateKey.decode(k,"der"),{curve:k.parameters.value,privateKey:k.privateKey};default:throw new Error("unknown key type "+j)}}function e(a,b){var d=a.algorithm.decrypt.kde.kdeparams.salt,e=parseInt(a.algorithm.decrypt.kde.kdeparams.iters.toString(),10),f=g[a.algorithm.decrypt.cipher.algo.join(".")],h=a.algorithm.decrypt.cipher.iv,k=a.subjectPrivateKey,l=parseInt(f.split("-")[1],10)/8,m=j.pbkdf2Sync(b,d,e,l),n=i.createDecipheriv(f,m,h),o=[];return o.push(n.update(k)),o.push(n["final"]()),c.concat(o)}var f=a("./asn1"),g=a("./aesid.json"),h=a("./fixProc"),i=a("browserify-aes"),j=a("pbkdf2");b.exports=d,d.signature=f.signature}).call(this,a("buffer").Buffer)},{"./aesid.json":379,"./asn1":380,"./fixProc":381,"browserify-aes":337,buffer:329,pbkdf2:445}],445:[function(a,b,c){(function(b){function d(a,b,c,d,f,g){if("function"==typeof f&&(g=f,f=void 0),"function"!=typeof g)throw new Error("No callback provided to pbkdf2");var h=e(a,b,c,d,f);setTimeout(function(){g(void 0,h)})}function e(a,c,d,e,h){if("number"!=typeof d)throw new TypeError("Iterations not a number");if(0>d)throw new TypeError("Bad iterations");if("number"!=typeof e)throw new TypeError("Key length not a number");if(0>e||e>g)throw new TypeError("Bad key length");h=h||"sha1",b.isBuffer(a)||(a=new b(a,"binary")),b.isBuffer(c)||(c=new b(c,"binary"));var i,j=1,k=new b(e),l=new b(c.length+4);c.copy(l,0,0,c.length);for(var m,n,o=1;j>=o;o++){l.writeUInt32BE(o,c.length);var p=f(h,a).update(l).digest();i||(i=p.length,n=new b(i),j=Math.ceil(e/i),m=e-(j-1)*i),p.copy(n,0,0,i);for(var q=1;d>q;q++){p=f(h,a).update(p).digest();for(var r=0;i>r;r++)n[r]^=p[r]}var s=(o-1)*i,t=o===j?m:i;n.copy(k,s,0,t)}return k}var f=a("create-hmac"),g=Math.pow(2,30)-1;c.pbkdf2=d,c.pbkdf2Sync=e}).call(this,a("buffer").Buffer)},{buffer:329,"create-hmac":436}],436:[function(a,b,c){(function(c){"use strict";function d(a,b){g.call(this),"string"==typeof b&&(b=new c(b));var d="sha512"===a||"sha384"===a?128:64;this._alg=a,this._key=b,b.length>d?b=e(a).update(b).digest():b.length<d&&(b=c.concat([b,h],d));for(var f=this._ipad=new c(d),i=this._opad=new c(d),j=0;d>j;j++)f[j]=54^b[j],i[j]=92^b[j];this._hash=e(a).update(f)}var e=a("create-hash/browser"),f=a("inherits"),g=a("stream").Transform,h=new c(128);h.fill(0),f(d,g),d.prototype.update=function(a,b){return this._hash.update(a,b),this},d.prototype._transform=function(a,b,c){this._hash.update(a),c()},d.prototype._flush=function(a){this.push(this.digest()),a()},d.prototype.digest=function(a){var b=this._hash.digest();return e(this._alg).update(this._opad).update(b).digest(a)},b.exports=function(a,b){return new d(a,b)}}).call(this,a("buffer").Buffer)},{buffer:329,"create-hash/browser":424,inherits:476,stream:495}],381:[function(a,b,c){(function(c){var d=/Proc-Type: 4,ENCRYPTED\r?\nDEK-Info: AES-((?:128)|(?:192)|(?:256))-CBC,([0-9A-H]+)\r?\n\r?\n([0-9A-z\n\r\+\/\=]+)\r?\n/m,e=/^-----BEGIN (.*) KEY-----\r?\n/m,f=/^-----BEGIN (.*) KEY-----\r?\n([0-9A-z\n\r\+\/\=]+)\r?\n-----END \1 KEY-----$/m,g=a("./EVP_BytesToKey"),h=a("browserify-aes");b.exports=function(a,b){var i,j=a.toString(),k=j.match(d);if(k){var l="aes"+k[1],m=new c(k[2],"hex"),n=new c(k[3].replace(/\r?\n/g,""),"base64"),o=g(b,m.slice(0,8),parseInt(k[1])),p=[],q=h.createDecipheriv(l,o,m);p.push(q.update(n)),p.push(q["final"]()),i=c.concat(p)}else{var r=j.match(f);i=new c(r[2].replace(/\r?\n/g,""),"base64")}var s=j.match(e)[1]+" KEY";return{tag:s,data:i}}}).call(this,a("buffer").Buffer)},{"./EVP_BytesToKey":378,"browserify-aes":337,buffer:329}],378:[function(a,b,c){(function(c){var d=a("create-hash");b.exports=function(a,b,e){e/=8;for(var f,g,h,i=0,j=new c(e),k=0;;){if(f=d("md5"),k++>0&&f.update(g),f.update(a),f.update(b),g=f.digest(),h=0,e>0)for(;;){if(0===e)break;if(h===g.length)break;j[i++]=g[h++],e--}if(0===e)break}for(h=0;h<g.length;h++)g[h]=0;return j}}).call(this,a("buffer").Buffer)},{buffer:329,"create-hash":424}],424:[function(a,b,c){(function(c){"use strict";function d(a){j.call(this),this._hash=a,this.buffers=[]}function e(a){j.call(this),this._hash=a}var f=a("inherits"),g=a("./md5"),h=a("ripemd160"),i=a("sha.js"),j=a("stream").Transform;f(d,j),d.prototype._transform=function(a,b,c){this.buffers.push(a),c()},d.prototype._flush=function(a){this.push(this.digest()),a()},d.prototype.update=function(a,b){return"string"==typeof a&&(a=new c(a,b)),this.buffers.push(a),this},d.prototype.digest=function(a){var b=c.concat(this.buffers),d=this._hash(b);return this.buffers=null,a?d.toString(a):d},f(e,j),e.prototype._transform=function(a,b,d){b&&(a=new c(a,b)),this._hash.update(a),d()},e.prototype._flush=function(a){this.push(this._hash.digest()),this._hash=null,a()},e.prototype.update=function(a,b){return"string"==typeof a&&(a=new c(a,b)),this._hash.update(a),this},e.prototype.digest=function(a){var b=this._hash.digest();return a?b.toString(a):b},b.exports=function(a){return"md5"===a?new d(g):"rmd160"===a?new d(h):new e(i(a))}}).call(this,a("buffer").Buffer)},{"./md5":426,buffer:329,inherits:476,ripemd160:427,"sha.js":429,stream:495}],429:[function(a,b,c){var c=b.exports=function(a){a=a.toLowerCase();var b=c[a];if(!b)throw new Error(a+" is not supported (we accept pull requests)");return new b};c.sha=a("./sha"),c.sha1=a("./sha1"),c.sha224=a("./sha224"),c.sha256=a("./sha256"),c.sha384=a("./sha384"),c.sha512=a("./sha512")},{"./sha":430,"./sha1":431,"./sha224":432,"./sha256":433,"./sha384":434,"./sha512":435}],434:[function(a,b,c){(function(c){function d(){this.init(),this._w=h,g.call(this,128,112)}var e=a("inherits"),f=a("./sha512"),g=a("./hash"),h=new Array(160);e(d,f),d.prototype.init=function(){return this._a=-876896931,this._b=1654270250,this._c=-1856437926,this._d=355462360,this._e=1731405415,this._f=-1900787065,this._g=-619958771,this._h=1203062813,this._al=-1056596264,this._bl=914150663,this._cl=812702999,this._dl=-150054599,this._el=-4191439,this._fl=1750603025,this._gl=1694076839,this._hl=-1090891868,this},d.prototype._hash=function(){function a(a,c,d){b.writeInt32BE(a,d),b.writeInt32BE(c,d+4)}var b=new c(48);return a(this._a,this._al,0),a(this._b,this._bl,8),a(this._c,this._cl,16),a(this._d,this._dl,24),a(this._e,this._el,32),a(this._f,this._fl,40),b},b.exports=d}).call(this,a("buffer").Buffer)},{"./hash":428,"./sha512":435,buffer:329,inherits:476}],435:[function(a,b,c){(function(c){function d(){this.init(),this._w=k,i.call(this,128,112)}function e(a,b,c){return a>>>c|b<<32-c}function f(a,b,c){return a&b^~a&c}function g(a,b,c){return a&b^a&c^b&c}var h=a("inherits"),i=a("./hash"),j=[1116352408,3609767458,1899447441,602891725,3049323471,3964484399,3921009573,2173295548,961987163,4081628472,1508970993,3053834265,2453635748,2937671579,2870763221,3664609560,3624381080,2734883394,310598401,1164996542,607225278,1323610764,1426881987,3590304994,1925078388,4068182383,2162078206,991336113,2614888103,633803317,3248222580,3479774868,3835390401,2666613458,4022224774,944711139,264347078,2341262773,604807628,2007800933,770255983,1495990901,1249150122,1856431235,1555081692,3175218132,1996064986,2198950837,2554220882,3999719339,2821834349,766784016,2952996808,2566594879,3210313671,3203337956,3336571891,1034457026,3584528711,2466948901,113926993,3758326383,338241895,168717936,666307205,1188179964,773529912,1546045734,1294757372,1522805485,1396182291,2643833823,1695183700,2343527390,1986661051,1014477480,2177026350,1206759142,2456956037,344077627,2730485921,1290863460,2820302411,3158454273,3259730800,3505952657,3345764771,106217008,3516065817,3606008344,3600352804,1432725776,4094571909,1467031594,275423344,851169720,430227734,3100823752,506948616,1363258195,659060556,3750685593,883997877,3785050280,958139571,3318307427,1322822218,3812723403,1537002063,2003034995,1747873779,3602036899,1955562222,1575990012,2024104815,1125592928,2227730452,2716904306,2361852424,442776044,2428436474,593698344,2756734187,3733110249,3204031479,2999351573,3329325298,3815920427,3391569614,3928383900,3515267271,566280711,3940187606,3454069534,4118630271,4000239992,116418474,1914138554,174292421,2731055270,289380356,3203993006,460393269,320620315,685471733,587496836,852142971,1086792851,1017036298,365543100,1126000580,2618297676,1288033470,3409855158,1501505948,4234509866,1607167915,987167468,1816402316,1246189591],k=new Array(160);h(d,i),d.prototype.init=function(){return this._a=1779033703,this._b=-1150833019,this._c=1013904242,this._d=-1521486534,
this._e=1359893119,this._f=-1694144372,this._g=528734635,this._h=1541459225,this._al=-205731576,this._bl=-2067093701,this._cl=-23791573,this._dl=1595750129,this._el=-1377402159,this._fl=725511199,this._gl=-79577749,this._hl=327033209,this},d.prototype._update=function(a){function b(){var a=i[B-30],b=i[B-30+1],c=e(a,b,1)^e(a,b,8)^a>>>7,f=e(b,a,1)^e(b,a,8)^e(b,a,7);a=i[B-4],b=i[B-4+1];var g=e(a,b,19)^e(b,a,29)^a>>>6,j=e(b,a,19)^e(a,b,29)^e(b,a,6),k=i[B-14],l=i[B-14+1],m=i[B-32],n=i[B-32+1];h=f+l,d=c+k+(f>>>0>h>>>0?1:0),h+=j,d=d+g+(j>>>0>h>>>0?1:0),h+=n,d=d+m+(n>>>0>h>>>0?1:0)}function c(){i[B]=d,i[B+1]=h;var a=g(k,l,m),b=g(s,t,u),c=e(k,s,28)^e(s,k,2)^e(s,k,7),C=e(s,k,28)^e(k,s,2)^e(k,s,7),D=e(o,w,14)^e(o,w,18)^e(w,o,9),E=e(w,o,14)^e(w,o,18)^e(o,w,9),F=j[B],G=j[B+1],H=f(o,p,q),I=f(w,x,y),J=z+E,K=r+D+(z>>>0>J>>>0?1:0);J+=I,K=K+H+(I>>>0>J>>>0?1:0),J+=G,K=K+F+(G>>>0>J>>>0?1:0),J+=h,K=K+d+(h>>>0>J>>>0?1:0);var L=C+b,M=c+a+(C>>>0>L>>>0?1:0);r=q,z=y,q=p,y=x,p=o,x=w,w=v+J|0,o=n+K+(v>>>0>w>>>0?1:0)|0,n=m,v=u,m=l,u=t,l=k,t=s,s=J+L|0,k=K+M+(J>>>0>s>>>0?1:0)|0,A++,B+=2}for(var d,h,i=this._w,k=0|this._a,l=0|this._b,m=0|this._c,n=0|this._d,o=0|this._e,p=0|this._f,q=0|this._g,r=0|this._h,s=0|this._al,t=0|this._bl,u=0|this._cl,v=0|this._dl,w=0|this._el,x=0|this._fl,y=0|this._gl,z=0|this._hl,A=0,B=0;16>A;)d=a.readInt32BE(4*B),h=a.readInt32BE(4*B+4),c();for(;80>A;)b(),c();this._al=this._al+s|0,this._bl=this._bl+t|0,this._cl=this._cl+u|0,this._dl=this._dl+v|0,this._el=this._el+w|0,this._fl=this._fl+x|0,this._gl=this._gl+y|0,this._hl=this._hl+z|0,this._a=this._a+k+(this._al>>>0<s>>>0?1:0)|0,this._b=this._b+l+(this._bl>>>0<t>>>0?1:0)|0,this._c=this._c+m+(this._cl>>>0<u>>>0?1:0)|0,this._d=this._d+n+(this._dl>>>0<v>>>0?1:0)|0,this._e=this._e+o+(this._el>>>0<w>>>0?1:0)|0,this._f=this._f+p+(this._fl>>>0<x>>>0?1:0)|0,this._g=this._g+q+(this._gl>>>0<y>>>0?1:0)|0,this._h=this._h+r+(this._hl>>>0<z>>>0?1:0)|0},d.prototype._hash=function(){function a(a,c,d){b.writeInt32BE(a,d),b.writeInt32BE(c,d+4)}var b=new c(64);return a(this._a,this._al,0),a(this._b,this._bl,8),a(this._c,this._cl,16),a(this._d,this._dl,24),a(this._e,this._el,32),a(this._f,this._fl,40),a(this._g,this._gl,48),a(this._h,this._hl,56),b},b.exports=d}).call(this,a("buffer").Buffer)},{"./hash":428,buffer:329,inherits:476}],432:[function(a,b,c){(function(c){function d(){this.init(),this._w=h,g.call(this,64,56)}var e=a("inherits"),f=a("./sha256"),g=a("./hash"),h=new Array(64);e(d,f),d.prototype.init=function(){return this._a=-1056596264,this._b=914150663,this._c=812702999,this._d=-150054599,this._e=-4191439,this._f=1750603025,this._g=1694076839,this._h=-1090891868,this},d.prototype._hash=function(){var a=new c(28);return a.writeInt32BE(this._a,0),a.writeInt32BE(this._b,4),a.writeInt32BE(this._c,8),a.writeInt32BE(this._d,12),a.writeInt32BE(this._e,16),a.writeInt32BE(this._f,20),a.writeInt32BE(this._g,24),a},b.exports=d}).call(this,a("buffer").Buffer)},{"./hash":428,"./sha256":433,buffer:329,inherits:476}],433:[function(a,b,c){(function(c){function d(){this.init(),this._w=p,n.call(this,64,56)}function e(a,b){return a>>>b|a<<32-b}function f(a,b){return a>>>b}function g(a,b,c){return a&b^~a&c}function h(a,b,c){return a&b^a&c^b&c}function i(a){return e(a,2)^e(a,13)^e(a,22)}function j(a){return e(a,6)^e(a,11)^e(a,25)}function k(a){return e(a,7)^e(a,18)^f(a,3)}function l(a){return e(a,17)^e(a,19)^f(a,10)}var m=a("inherits"),n=a("./hash"),o=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298],p=new Array(64);m(d,n),d.prototype.init=function(){return this._a=1779033703,this._b=-1150833019,this._c=1013904242,this._d=-1521486534,this._e=1359893119,this._f=-1694144372,this._g=528734635,this._h=1541459225,this},d.prototype._update=function(a){function b(){return l(d[t-2])+d[t-7]+k(d[t-15])+d[t-16]}function c(a){d[t]=a;var b=s+j(p)+g(p,q,r)+o[t]+a,c=i(e)+h(e,f,m);s=r,r=q,q=p,p=n+b,n=m,m=f,f=e,e=b+c,t++}for(var d=this._w,e=0|this._a,f=0|this._b,m=0|this._c,n=0|this._d,p=0|this._e,q=0|this._f,r=0|this._g,s=0|this._h,t=0;16>t;)c(a.readInt32BE(4*t));for(;64>t;)c(b());this._a=e+this._a|0,this._b=f+this._b|0,this._c=m+this._c|0,this._d=n+this._d|0,this._e=p+this._e|0,this._f=q+this._f|0,this._g=r+this._g|0,this._h=s+this._h|0},d.prototype._hash=function(){var a=new c(32);return a.writeInt32BE(this._a,0),a.writeInt32BE(this._b,4),a.writeInt32BE(this._c,8),a.writeInt32BE(this._d,12),a.writeInt32BE(this._e,16),a.writeInt32BE(this._f,20),a.writeInt32BE(this._g,24),a.writeInt32BE(this._h,28),a},b.exports=d}).call(this,a("buffer").Buffer)},{"./hash":428,buffer:329,inherits:476}],431:[function(a,b,c){(function(c){function d(){this.init(),this._w=h,g.call(this,64,56)}function e(a,b){return a<<b|a>>>32-b}var f=a("inherits"),g=a("./hash"),h=new Array(80);f(d,g),d.prototype.init=function(){return this._a=1732584193,this._b=-271733879,this._c=-1732584194,this._d=271733878,this._e=-1009589776,this},d.prototype._update=function(a){function b(){return e(f[l-3]^f[l-8]^f[l-14]^f[l-16],1)}function c(a,b){f[l]=a;var c=e(g,5)+b+k+a+d;k=j,j=i,i=e(h,30),h=g,g=c,l++}var d,f=this._w,g=this._a,h=this._b,i=this._c,j=this._d,k=this._e,l=0;for(d=1518500249;16>l;)c(a.readInt32BE(4*l),h&i|~h&j);for(;20>l;)c(b(),h&i|~h&j);for(d=1859775393;40>l;)c(b(),h^i^j);for(d=-1894007588;60>l;)c(b(),h&i|h&j|i&j);for(d=-899497514;80>l;)c(b(),h^i^j);this._a=g+this._a|0,this._b=h+this._b|0,this._c=i+this._c|0,this._d=j+this._d|0,this._e=k+this._e|0},d.prototype._hash=function(){var a=new c(20);return a.writeInt32BE(0|this._a,0),a.writeInt32BE(0|this._b,4),a.writeInt32BE(0|this._c,8),a.writeInt32BE(0|this._d,12),a.writeInt32BE(0|this._e,16),a},b.exports=d}).call(this,a("buffer").Buffer)},{"./hash":428,buffer:329,inherits:476}],430:[function(a,b,c){(function(c){function d(){this.init(),this._w=h,g.call(this,64,56)}function e(a,b){return a<<b|a>>>32-b}var f=a("inherits"),g=a("./hash"),h=new Array(80);f(d,g),d.prototype.init=function(){return this._a=1732584193,this._b=-271733879,this._c=-1732584194,this._d=271733878,this._e=-1009589776,this},d.prototype._update=function(a){function b(){return f[l-3]^f[l-8]^f[l-14]^f[l-16]}function c(a,b){f[l]=a;var c=e(g,5)+b+k+a+d;k=j,j=i,i=e(h,30),h=g,g=c,l++}var d,f=this._w,g=this._a,h=this._b,i=this._c,j=this._d,k=this._e,l=0;for(d=1518500249;16>l;)c(a.readInt32BE(4*l),h&i|~h&j);for(;20>l;)c(b(),h&i|~h&j);for(d=1859775393;40>l;)c(b(),h^i^j);for(d=-1894007588;60>l;)c(b(),h&i|h&j|i&j);for(d=-899497514;80>l;)c(b(),h^i^j);this._a=g+this._a|0,this._b=h+this._b|0,this._c=i+this._c|0,this._d=j+this._d|0,this._e=k+this._e|0},d.prototype._hash=function(){var a=new c(20);return a.writeInt32BE(0|this._a,0),a.writeInt32BE(0|this._b,4),a.writeInt32BE(0|this._c,8),a.writeInt32BE(0|this._d,12),a.writeInt32BE(0|this._e,16),a},b.exports=d}).call(this,a("buffer").Buffer)},{"./hash":428,buffer:329,inherits:476}],428:[function(a,b,c){(function(a){function c(b,c){this._block=new a(b),this._finalSize=c,this._blockSize=b,this._len=0,this._s=0}c.prototype.update=function(b,c){"string"==typeof b&&(c=c||"utf8",b=new a(b,c));for(var d=this._len+=b.length,e=this._s||0,f=0,g=this._block;d>e;){for(var h=Math.min(b.length,f+this._blockSize-e%this._blockSize),i=h-f,j=0;i>j;j++)g[e%this._blockSize+j]=b[j+f];e+=i,f+=i,e%this._blockSize===0&&this._update(g)}return this._s=e,this},c.prototype.digest=function(a){var b=8*this._len;this._block[this._len%this._blockSize]=128,this._block.fill(0,this._len%this._blockSize+1),b%(8*this._blockSize)>=8*this._finalSize&&(this._update(this._block),this._block.fill(0)),this._block.writeInt32BE(b,this._blockSize-4);var c=this._update(this._block)||this._hash();return a?c.toString(a):c},c.prototype._update=function(){throw new Error("_update must be implemented by subclass")},b.exports=c}).call(this,a("buffer").Buffer)},{buffer:329}],427:[function(a,b,c){(function(a){function c(a){for(var b=[],c=0,d=0;c<a.length;c++,d+=8)b[d>>>5]|=a[c]<<24-d%32;return b}function d(a){for(var b=[],c=0;c<32*a.length;c+=8)b.push(a[c>>>5]>>>24-c%32&255);return b}function e(a,b,c){for(var d=0;16>d;d++){var e=c+d,l=b[e];b[e]=16711935&(l<<8|l>>>24)|4278255360&(l<<24|l>>>8)}var s,t,u,v,w,x,y,z,A,B;x=s=a[0],y=t=a[1],z=u=a[2],A=v=a[3],B=w=a[4];var C;for(d=0;80>d;d+=1)C=s+b[c+m[d]]|0,C+=16>d?f(t,u,v)+q[0]:32>d?g(t,u,v)+q[1]:48>d?h(t,u,v)+q[2]:64>d?i(t,u,v)+q[3]:j(t,u,v)+q[4],C=0|C,C=k(C,o[d]),C=C+w|0,s=w,w=v,v=k(u,10),u=t,t=C,C=x+b[c+n[d]]|0,C+=16>d?j(y,z,A)+r[0]:32>d?i(y,z,A)+r[1]:48>d?h(y,z,A)+r[2]:64>d?g(y,z,A)+r[3]:f(y,z,A)+r[4],C=0|C,C=k(C,p[d]),C=C+B|0,x=B,B=A,A=k(z,10),z=y,y=C;C=a[1]+u+A|0,a[1]=a[2]+v+B|0,a[2]=a[3]+w+x|0,a[3]=a[4]+s+y|0,a[4]=a[0]+t+z|0,a[0]=C}function f(a,b,c){return a^b^c}function g(a,b,c){return a&b|~a&c}function h(a,b,c){return(a|~b)^c}function i(a,b,c){return a&c|b&~c}function j(a,b,c){return a^(b|~c)}function k(a,b){return a<<b|a>>>32-b}function l(b){var f=[1732584193,4023233417,2562383102,271733878,3285377520];"string"==typeof b&&(b=new a(b,"utf8"));var g=c(b),h=8*b.length,i=8*b.length;g[h>>>5]|=128<<24-h%32,g[(h+64>>>9<<4)+14]=16711935&(i<<8|i>>>24)|4278255360&(i<<24|i>>>8);for(var j=0;j<g.length;j+=16)e(f,g,j);for(j=0;5>j;j++){var k=f[j];f[j]=16711935&(k<<8|k>>>24)|4278255360&(k<<24|k>>>8)}var l=d(f);return new a(l)}var m=[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,7,4,13,1,10,6,15,3,12,0,9,5,2,14,11,8,3,10,14,4,9,15,8,1,2,7,0,6,13,11,5,12,1,9,11,10,0,8,12,4,13,3,7,15,14,5,6,2,4,0,5,9,7,12,2,10,14,1,3,8,11,6,15,13],n=[5,14,7,0,9,2,11,4,13,6,15,8,1,10,3,12,6,11,3,7,0,13,5,10,14,15,8,12,4,9,1,2,15,5,1,3,7,14,6,9,11,8,12,2,10,0,4,13,8,6,4,1,3,11,15,0,5,12,2,13,9,7,10,14,12,15,10,4,1,5,8,7,6,2,13,14,0,3,9,11],o=[11,14,15,12,5,8,7,9,11,13,14,15,6,7,9,8,7,6,8,13,11,9,7,15,7,12,15,9,11,7,13,12,11,13,6,7,14,9,13,15,14,8,13,6,5,12,7,5,11,12,14,15,14,15,9,8,9,14,5,6,8,6,5,12,9,15,5,11,6,8,13,12,5,12,13,14,11,8,5,6],p=[8,9,9,11,13,15,15,5,7,7,8,11,14,14,12,6,9,13,15,7,12,8,9,11,7,7,12,7,6,15,13,11,9,7,15,11,8,6,6,14,12,13,5,14,13,13,7,5,15,5,8,11,14,14,6,14,6,9,12,9,12,5,15,8,8,5,12,9,12,5,14,6,8,13,6,5,15,13,11,11],q=[0,1518500249,1859775393,2400959708,2840853838],r=[1352829926,1548603684,1836072691,2053994217,0];b.exports=l}).call(this,a("buffer").Buffer)},{buffer:329}],380:[function(a,b,c){var d=a("asn1.js"),e=d.define("RSAPrivateKey",function(){this.seq().obj(this.key("version")["int"](),this.key("modulus")["int"](),this.key("publicExponent")["int"](),this.key("privateExponent")["int"](),this.key("prime1")["int"](),this.key("prime2")["int"](),this.key("exponent1")["int"](),this.key("exponent2")["int"](),this.key("coefficient")["int"]())});c.RSAPrivateKey=e;var f=d.define("RSAPublicKey",function(){this.seq().obj(this.key("modulus")["int"](),this.key("publicExponent")["int"]())});c.RSAPublicKey=f;var g=d.define("SubjectPublicKeyInfo",function(){this.seq().obj(this.key("algorithm").use(h),this.key("subjectPublicKey").bitstr())});c.PublicKey=g;var h=d.define("AlgorithmIdentifier",function(){this.seq().obj(this.key("algorithm").objid(),this.key("none").null_().optional(),this.key("curve").objid().optional(),this.key("params").seq().obj(this.key("p")["int"](),this.key("q")["int"](),this.key("g")["int"]()).optional())}),i=d.define("PrivateKeyInfo",function(){this.seq().obj(this.key("version")["int"](),this.key("algorithm").use(h),this.key("subjectPrivateKey").octstr())});c.PrivateKey=i;var j=d.define("EncryptedPrivateKeyInfo",function(){this.seq().obj(this.key("algorithm").seq().obj(this.key("id").objid(),this.key("decrypt").seq().obj(this.key("kde").seq().obj(this.key("id").objid(),this.key("kdeparams").seq().obj(this.key("salt").octstr(),this.key("iters")["int"]())),this.key("cipher").seq().obj(this.key("algo").objid(),this.key("iv").octstr()))),this.key("subjectPrivateKey").octstr())});c.EncryptedPrivateKey=j;var k=d.define("DSAPrivateKey",function(){this.seq().obj(this.key("version")["int"](),this.key("p")["int"](),this.key("q")["int"](),this.key("g")["int"](),this.key("pub_key")["int"](),this.key("priv_key")["int"]())});c.DSAPrivateKey=k,c.DSAparam=d.define("DSAparam",function(){this["int"]()});var l=d.define("ECPrivateKey",function(){this.seq().obj(this.key("version")["int"](),this.key("privateKey").octstr(),this.key("parameters").optional().explicit(0).use(m),this.key("publicKey").optional().explicit(1).bitstr())});c.ECPrivateKey=l;var m=d.define("ECParameters",function(){this.choice({namedCurve:this.objid()})});c.signature=d.define("signature",function(){this.seq().obj(this.key("r")["int"](),this.key("s")["int"]())})},{"asn1.js":383}],383:[function(a,b,c){var d=c;d.bignum=a("bn.js"),d.define=a("./asn1/api").define,d.base=a("./asn1/base"),d.constants=a("./asn1/constants"),d.decoders=a("./asn1/decoders"),d.encoders=a("./asn1/encoders")},{"./asn1/api":384,"./asn1/base":386,"./asn1/constants":390,"./asn1/decoders":392,"./asn1/encoders":395,"bn.js":355}],395:[function(a,b,c){var d=c;d.der=a("./der"),d.pem=a("./pem")},{"./der":394,"./pem":396}],396:[function(a,b,c){function d(a){f.call(this,a),this.enc="pem"}var e=a("inherits"),f=(a("buffer").Buffer,a("../../asn1"),a("./der"));e(d,f),b.exports=d,d.prototype.encode=function(a,b){for(var c=f.prototype.encode.call(this,a),d=c.toString("base64"),e=["-----BEGIN "+b.label+"-----"],g=0;g<d.length;g+=64)e.push(d.slice(g,g+64));return e.push("-----END "+b.label+"-----"),e.join("\n")}},{"../../asn1":383,"./der":394,buffer:329,inherits:476}],394:[function(a,b,c){function d(a){this.enc="der",this.name=a.name,this.entity=a,this.tree=new e,this.tree._init(a.body)}function e(a){k.Node.call(this,"der",a)}function f(a){return 10>a?"0"+a:a}function g(a,b,c,d){var e;if("seqof"===a?a="seq":"setof"===a&&(a="set"),l.tagByName.hasOwnProperty(a))e=l.tagByName[a];else{if("number"!=typeof a||(0|a)!==a)return d.error("Unknown tag: "+a);e=a}return e>=31?d.error("Multi-octet tag encoding unsupported"):(b||(e|=32),e|=l.tagClassByName[c||"universal"]<<6)}var h=a("inherits"),i=a("buffer").Buffer,j=a("../../asn1"),k=j.base,l=(j.bignum,j.constants.der);b.exports=d,d.prototype.encode=function(a,b){return this.tree._encode(a,b).join()},h(e,k.Node),e.prototype._encodeComposite=function(a,b,c,d){var e=g(a,b,c,this.reporter);if(d.length<128){var f=new i(2);return f[0]=e,f[1]=d.length,this._createEncoderBuffer([f,d])}for(var h=1,j=d.length;j>=256;j>>=8)h++;var f=new i(2+h);f[0]=e,f[1]=128|h;for(var j=1+h,k=d.length;k>0;j--,k>>=8)f[j]=255&k;return this._createEncoderBuffer([f,d])},e.prototype._encodeStr=function(a,b){return"octstr"===b?this._createEncoderBuffer(a):"bitstr"===b?this._createEncoderBuffer([0|a.unused,a.data]):"ia5str"===b?this._createEncoderBuffer(a):this.reporter.error("Encoding of string type: "+b+" unsupported")},e.prototype._encodeObjid=function(a,b,c){if("string"==typeof a){if(!b)return this.reporter.error("string objid given, but no values map found");if(!b.hasOwnProperty(a))return this.reporter.error("objid not found in values map");a=b[a].split(/[\s\.]+/g);for(var d=0;d<a.length;d++)a[d]|=0}else if(Array.isArray(a)){a=a.slice();for(var d=0;d<a.length;d++)a[d]|=0}if(!Array.isArray(a))return this.reporter.error("objid() should be either array or string, got: "+JSON.stringify(a));if(!c){if(a[1]>=40)return this.reporter.error("Second objid identifier OOB");a.splice(0,2,40*a[0]+a[1])}for(var e=0,d=0;d<a.length;d++){var f=a[d];for(e++;f>=128;f>>=7)e++}for(var g=new i(e),h=g.length-1,d=a.length-1;d>=0;d--){var f=a[d];for(g[h--]=127&f;(f>>=7)>0;)g[h--]=128|127&f}return this._createEncoderBuffer(g)},e.prototype._encodeTime=function(a,b){var c,d=new Date(a);return"gentime"===b?c=[f(d.getFullYear()),f(d.getUTCMonth()+1),f(d.getUTCDate()),f(d.getUTCHours()),f(d.getUTCMinutes()),f(d.getUTCSeconds()),"Z"].join(""):"utctime"===b?c=[f(d.getFullYear()%100),f(d.getUTCMonth()+1),f(d.getUTCDate()),f(d.getUTCHours()),f(d.getUTCMinutes()),f(d.getUTCSeconds()),"Z"].join(""):this.reporter.error("Encoding "+b+" time is not supported yet"),this._encodeStr(c,"octstr")},e.prototype._encodeNull=function(){return this._createEncoderBuffer("")},e.prototype._encodeInt=function(a,b){if("string"==typeof a){if(!b)return this.reporter.error("String int or enum given, but no values map");if(!b.hasOwnProperty(a))return this.reporter.error("Values map doesn't contain: "+JSON.stringify(a));a=b[a]}if("number"!=typeof a&&!i.isBuffer(a)){var c=a.toArray();a.sign===!1&&128&c[0]&&c.unshift(0),a=new i(c)}if(i.isBuffer(a)){var d=a.length;0===a.length&&d++;var e=new i(d);return a.copy(e),0===a.length&&(e[0]=0),this._createEncoderBuffer(e)}if(128>a)return this._createEncoderBuffer(a);if(256>a)return this._createEncoderBuffer([0,a]);for(var d=1,f=a;f>=256;f>>=8)d++;for(var e=new Array(d),f=e.length-1;f>=0;f--)e[f]=255&a,a>>=8;return 128&e[0]&&e.unshift(0),this._createEncoderBuffer(new i(e))},e.prototype._encodeBool=function(a){return this._createEncoderBuffer(a?255:0)},e.prototype._use=function(a,b){return"function"==typeof a&&(a=a(b)),a._getEncoder("der").tree},e.prototype._skipDefault=function(a,b,c){var d,e=this._baseState;if(null===e["default"])return!1;var f=a.join();if(void 0===e.defaultBuffer&&(e.defaultBuffer=this._encodeValue(e["default"],b,c).join()),f.length!==e.defaultBuffer.length)return!1;for(d=0;d<f.length;d++)if(f[d]!==e.defaultBuffer[d])return!1;return!0}},{"../../asn1":383,buffer:329,inherits:476}],392:[function(a,b,c){var d=c;d.der=a("./der"),d.pem=a("./pem")},{"./der":391,"./pem":393}],393:[function(a,b,c){function d(a){g.call(this,a),this.enc="pem"}var e=a("inherits"),f=a("buffer").Buffer,g=(a("../../asn1"),a("./der"));e(d,g),b.exports=d,d.prototype.decode=function(a,b){for(var c=a.toString().split(/[\r\n]+/g),d=b.label.toUpperCase(),e=/^-----(BEGIN|END) ([^-]+)-----$/,h=-1,i=-1,j=0;j<c.length;j++){var k=c[j].match(e);if(null!==k&&k[2]===d){if(-1!==h){if("END"!==k[1])break;i=j;break}if("BEGIN"!==k[1])break;h=j}}if(-1===h||-1===i)throw new Error("PEM section not found for: "+d);var l=c.slice(h+1,i).join("");l.replace(/[^a-z0-9\+\/=]+/gi,"");var m=new f(l,"base64");return g.prototype.decode.call(this,m,b)}},{"../../asn1":383,"./der":391,buffer:329,inherits:476}],391:[function(a,b,c){function d(a){this.enc="der",this.name=a.name,this.entity=a,this.tree=new e,this.tree._init(a.body)}function e(a){j.Node.call(this,"der",a)}function f(a,b){var c=a.readUInt8(b);if(a.isError(c))return c;var d=l.tagClass[c>>6],e=0===(32&c);if(31===(31&c)){var f=c;for(c=0;128===(128&f);){if(f=a.readUInt8(b),a.isError(f))return f;c<<=7,c|=127&f}}else c&=31;var g=l.tag[c];return{cls:d,primitive:e,tag:c,tagStr:g}}function g(a,b,c){var d=a.readUInt8(c);if(a.isError(d))return d;if(!b&&128===d)return null;if(0===(128&d))return d;var e=127&d;if(e>=4)return a.error("length octect is too long");d=0;for(var f=0;e>f;f++){d<<=8;var g=a.readUInt8(c);if(a.isError(g))return g;d|=g}return d}var h=a("inherits"),i=a("../../asn1"),j=i.base,k=i.bignum,l=i.constants.der;b.exports=d,d.prototype.decode=function(a,b){return a instanceof j.DecoderBuffer||(a=new j.DecoderBuffer(a,b)),this.tree._decode(a,b)},h(e,j.Node),e.prototype._peekTag=function(a,b,c){if(a.isEmpty())return!1;var d=a.save(),e=f(a,'Failed to peek tag: "'+b+'"');return a.isError(e)?e:(a.restore(d),e.tag===b||e.tagStr===b||c)},e.prototype._decodeTag=function(a,b,c){var d=f(a,'Failed to decode tag of "'+b+'"');if(a.isError(d))return d;var e=g(a,d.primitive,'Failed to get length of "'+b+'"');if(a.isError(e))return e;if(!c&&d.tag!==b&&d.tagStr!==b&&d.tagStr+"of"!==b)return a.error('Failed to match tag: "'+b+'"');if(d.primitive||null!==e)return a.skip(e,'Failed to match body of: "'+b+'"');var h=a.start(),i=this._skipUntilEnd(a,'Failed to skip indefinite length body: "'+this.tag+'"');return a.isError(i)?i:a.cut(h)},e.prototype._skipUntilEnd=function(a,b){for(;;){var c=f(a,b);if(a.isError(c))return c;var d=g(a,c.primitive,b);if(a.isError(d))return d;var e;if(e=c.primitive||null!==d?a.skip(d):this._skipUntilEnd(a,b),a.isError(e))return e;if("end"===c.tagStr)break}},e.prototype._decodeList=function(a,b,c){for(var d=[];!a.isEmpty();){var e=this._peekTag(a,"end");if(a.isError(e))return e;var f=c.decode(a,"der");if(a.isError(f)&&e)break;d.push(f)}return d},e.prototype._decodeStr=function(a,b){if("octstr"===b)return a.raw();if("bitstr"===b){var c=a.readUInt8();return a.isError(c)?c:{unused:c,data:a.raw()}}return"ia5str"===b?a.raw().toString():this.error("Decoding of string type: "+b+" unsupported")},e.prototype._decodeObjid=function(a,b,c){for(var d=[],e=0;!a.isEmpty();){var f=a.readUInt8();e<<=7,e|=127&f,0===(128&f)&&(d.push(e),e=0)}128&f&&d.push(e);var g=d[0]/40|0,h=d[0]%40;return c?result=d:result=[g,h].concat(d.slice(1)),b&&(result=b[result.join(" ")]),result},e.prototype._decodeTime=function(a,b){var c=a.raw().toString();if("gentime"===b)var d=0|c.slice(0,4),e=0|c.slice(4,6),f=0|c.slice(6,8),g=0|c.slice(8,10),h=0|c.slice(10,12),i=0|c.slice(12,14);else{if("utctime"!==b)return this.error("Decoding "+b+" time is not supported yet");var d=0|c.slice(0,2),e=0|c.slice(2,4),f=0|c.slice(4,6),g=0|c.slice(6,8),h=0|c.slice(8,10),i=0|c.slice(10,12);d=70>d?2e3+d:1900+d}return Date.UTC(d,e-1,f,g,h,i,0)},e.prototype._decodeNull=function(a){return null},e.prototype._decodeBool=function(a){var b=a.readUInt8();return a.isError(b)?b:0!==b},e.prototype._decodeInt=function(a,b){var c=a.raw(),d=new k(c);return b&&(d=b[d.toString(10)]||d),d},e.prototype._use=function(a,b){return"function"==typeof a&&(a=a(b)),a._getDecoder("der").tree}},{"../../asn1":383,inherits:476}],390:[function(a,b,c){var d=c;d._reverse=function(a){var b={};return Object.keys(a).forEach(function(c){(0|c)==c&&(c=0|c);var d=a[c];b[d]=c}),b},d.der=a("./der")},{"./der":389}],389:[function(a,b,c){var d=a("../constants");c.tagClass={0:"universal",1:"application",2:"context",3:"private"},c.tagClassByName=d._reverse(c.tagClass),c.tag={0:"end",1:"bool",2:"int",3:"bitstr",4:"octstr",5:"null_",6:"objid",7:"objDesc",8:"external",9:"real",10:"enum",11:"embed",12:"utf8str",13:"relativeOid",16:"seq",17:"set",18:"numstr",19:"printstr",20:"t61str",21:"videostr",22:"ia5str",23:"utctime",24:"gentime",25:"graphstr",26:"iso646str",27:"genstr",28:"unistr",29:"charstr",30:"bmpstr"},c.tagByName=d._reverse(c.tag)},{"../constants":390}],386:[function(a,b,c){var d=c;d.Reporter=a("./reporter").Reporter,d.DecoderBuffer=a("./buffer").DecoderBuffer,d.EncoderBuffer=a("./buffer").EncoderBuffer,d.Node=a("./node")},{"./buffer":385,"./node":387,"./reporter":388}],388:[function(a,b,c){function d(a){this._reporterState={obj:null,path:[],options:a||{},errors:[]}}function e(a,b){this.path=a,this.rethrow(b)}var f=a("inherits");c.Reporter=d,d.prototype.isError=function(a){return a instanceof e},d.prototype.save=function(){var a=this._reporterState;return{obj:a.obj,pathLen:a.path.length}},d.prototype.restore=function(a){var b=this._reporterState;b.obj=a.obj,b.path=b.path.slice(0,a.pathLen)},d.prototype.enterKey=function(a){return this._reporterState.path.push(a)},d.prototype.leaveKey=function(a,b,c){var d=this._reporterState;d.path=d.path.slice(0,a-1),null!==d.obj&&(d.obj[b]=c)},d.prototype.enterObject=function(){var a=this._reporterState,b=a.obj;return a.obj={},b},d.prototype.leaveObject=function(a){var b=this._reporterState,c=b.obj;return b.obj=a,c},d.prototype.error=function(a){var b,c=this._reporterState,d=a instanceof e;if(b=d?a:new e(c.path.map(function(a){return"["+JSON.stringify(a)+"]"}).join(""),a.message||a,a.stack),!c.options.partial)throw b;return d||c.errors.push(b),b},d.prototype.wrapResult=function(a){var b=this._reporterState;return b.options.partial?{result:this.isError(a)?null:a,errors:b.errors}:a},f(e,Error),e.prototype.rethrow=function(a){return this.message=a+" at: "+(this.path||"(shallow)"),Error.captureStackTrace(this,e),this}},{inherits:476}],387:[function(a,b,c){function d(a,b){var c={};this._baseState=c,c.enc=a,c.parent=b||null,c.children=null,c.tag=null,c.args=null,c.reverseArgs=null,c.choice=null,c.optional=!1,c.any=!1,c.obj=!1,c.use=null,c.useDecoder=null,c.key=null,c["default"]=null,c.explicit=null,c.implicit=null,c.parent||(c.children=[],this._wrap())}var e=a("../base").Reporter,f=a("../base").EncoderBuffer,g=a("minimalistic-assert"),h=["seq","seqof","set","setof","octstr","bitstr","objid","bool","gentime","utctime","null_","enum","int","ia5str"],i=["key","obj","use","optional","explicit","implicit","def","choice","any"].concat(h),j=["_peekTag","_decodeTag","_use","_decodeStr","_decodeObjid","_decodeTime","_decodeNull","_decodeInt","_decodeBool","_decodeList","_encodeComposite","_encodeStr","_encodeObjid","_encodeTime","_encodeNull","_encodeInt","_encodeBool"];b.exports=d;var k=["enc","parent","children","tag","args","reverseArgs","choice","optional","any","obj","use","alteredUse","key","default","explicit","implicit"];d.prototype.clone=function(){var a=this._baseState,b={};k.forEach(function(c){b[c]=a[c]});var c=new this.constructor(b.parent);return c._baseState=b,c},d.prototype._wrap=function(){var a=this._baseState;i.forEach(function(b){this[b]=function(){var c=new this.constructor(this);return a.children.push(c),c[b].apply(c,arguments)}},this)},d.prototype._init=function(a){var b=this._baseState;g(null===b.parent),a.call(this),b.children=b.children.filter(function(a){return a._baseState.parent===this},this),g.equal(b.children.length,1,"Root node can have only one child")},d.prototype._useArgs=function(a){var b=this._baseState,c=a.filter(function(a){return a instanceof this.constructor},this);a=a.filter(function(a){return!(a instanceof this.constructor)},this),0!==c.length&&(g(null===b.children),b.children=c,c.forEach(function(a){a._baseState.parent=this},this)),0!==a.length&&(g(null===b.args),b.args=a,b.reverseArgs=a.map(function(a){if("object"!=typeof a||a.constructor!==Object)return a;var b={};return Object.keys(a).forEach(function(c){c==(0|c)&&(c|=0);var d=a[c];b[d]=c}),b}))},j.forEach(function(a){d.prototype[a]=function(){var b=this._baseState;throw new Error(a+" not implemented for encoding: "+b.enc)}}),h.forEach(function(a){d.prototype[a]=function(){var b=this._baseState,c=Array.prototype.slice.call(arguments);return g(null===b.tag),b.tag=a,this._useArgs(c),this}}),d.prototype.use=function(a){var b=this._baseState;return g(null===b.use),b.use=a,this},d.prototype.optional=function(){var a=this._baseState;return a.optional=!0,this},d.prototype.def=function(a){var b=this._baseState;return g(null===b["default"]),b["default"]=a,b.optional=!0,this},d.prototype.explicit=function(a){var b=this._baseState;return g(null===b.explicit&&null===b.implicit),b.explicit=a,this},d.prototype.implicit=function(a){var b=this._baseState;return g(null===b.explicit&&null===b.implicit),b.implicit=a,this},d.prototype.obj=function(){var a=this._baseState,b=Array.prototype.slice.call(arguments);return a.obj=!0,0!==b.length&&this._useArgs(b),this},d.prototype.key=function(a){var b=this._baseState;return g(null===b.key),b.key=a,this},d.prototype.any=function(){var a=this._baseState;return a.any=!0,this},d.prototype.choice=function(a){var b=this._baseState;return g(null===b.choice),b.choice=a,this._useArgs(Object.keys(a).map(function(b){return a[b]})),this},d.prototype._decode=function(a){var b=this._baseState;if(null===b.parent)return a.wrapResult(b.children[0]._decode(a));var c,d=b["default"],e=!0;if(null!==b.key&&(c=a.enterKey(b.key)),b.optional){var f=null;if(null!==b.explicit?f=b.explicit:null!==b.implicit?f=b.implicit:null!==b.tag&&(f=b.tag),null!==f||b.any){if(e=this._peekTag(a,f,b.any),a.isError(e))return e}else{var g=a.save();try{null===b.choice?this._decodeGeneric(b.tag,a):this._decodeChoice(a),e=!0}catch(h){e=!1}a.restore(g)}}var i;if(b.obj&&e&&(i=a.enterObject()),e){if(null!==b.explicit){var j=this._decodeTag(a,b.explicit);if(a.isError(j))return j;a=j}if(null===b.use&&null===b.choice){if(b.any)var g=a.save();var k=this._decodeTag(a,null!==b.implicit?b.implicit:b.tag,b.any);if(a.isError(k))return k;b.any?d=a.raw(g):a=k}if(d=b.any?d:null===b.choice?this._decodeGeneric(b.tag,a):this._decodeChoice(a),a.isError(d))return d;if(!b.any&&null===b.choice&&null!==b.children){var l=b.children.some(function(b){b._decode(a)});if(l)return err}}return b.obj&&e&&(d=a.leaveObject(i)),null===b.key||null===d&&e!==!0||a.leaveKey(c,b.key,d),d},d.prototype._decodeGeneric=function(a,b){var c=this._baseState;return"seq"===a||"set"===a?null:"seqof"===a||"setof"===a?this._decodeList(b,a,c.args[0]):"octstr"===a||"bitstr"===a||"ia5str"===a?this._decodeStr(b,a):"objid"===a&&c.args?this._decodeObjid(b,c.args[0],c.args[1]):"objid"===a?this._decodeObjid(b,null,null):"gentime"===a||"utctime"===a?this._decodeTime(b,a):"null_"===a?this._decodeNull(b):"bool"===a?this._decodeBool(b):"int"===a||"enum"===a?this._decodeInt(b,c.args&&c.args[0]):null!==c.use?this._getUse(c.use,b._reporterState.obj)._decode(b):b.error("unknown tag: "+a)},d.prototype._getUse=function(a,b){var c=this._baseState;return c.useDecoder=this._use(a,b),g(null===c.useDecoder._baseState.parent),c.useDecoder=c.useDecoder._baseState.children[0],c.implicit!==c.useDecoder._baseState.implicit&&(c.useDecoder=c.useDecoder.clone(),c.useDecoder._baseState.implicit=c.implicit),c.useDecoder},d.prototype._decodeChoice=function(a){var b=this._baseState,c=null,d=!1;return Object.keys(b.choice).some(function(e){var f=a.save(),g=b.choice[e];try{var h=g._decode(a);if(a.isError(h))return!1;c={type:e,value:h},d=!0}catch(i){return a.restore(f),!1}return!0},this),d?c:a.error("Choice not matched")},d.prototype._createEncoderBuffer=function(a){return new f(a,this.reporter)},d.prototype._encode=function(a,b,c){var d=this._baseState;if(null===d["default"]||d["default"]!==a){var e=this._encodeValue(a,b,c);if(void 0!==e&&!this._skipDefault(e,b,c))return e}},d.prototype._encodeValue=function(a,b,c){var d=this._baseState;if(null===d.parent)return d.children[0]._encode(a,b||new e);var f=null;if(this.reporter=b,d.optional&&void 0===a){if(null===d["default"])return;a=d["default"]}var g=null,h=!1;if(d.any)f=this._createEncoderBuffer(a);else if(d.choice)f=this._encodeChoice(a,b);else if(d.children)g=d.children.map(function(c){if("null_"===c._baseState.tag)return c._encode(null,b,a);if(null===c._baseState.key)return b.error("Child should have a key");var d=b.enterKey(c._baseState.key);if("object"!=typeof a)return b.error("Child expected, but input is not object");var e=c._encode(a[c._baseState.key],b,a);return b.leaveKey(d),e},this).filter(function(a){return a}),g=this._createEncoderBuffer(g);else if("seqof"===d.tag||"setof"===d.tag){if(!d.args||1!==d.args.length)return b.error("Too many args for : "+d.tag);if(!Array.isArray(a))return b.error("seqof/setof, but data is not Array");var i=this.clone();i._baseState.implicit=null,g=this._createEncoderBuffer(a.map(function(c){var d=this._baseState;return this._getUse(d.args[0],a)._encode(c,b)},i))}else null!==d.use?f=this._getUse(d.use,c)._encode(a,b):(g=this._encodePrimitive(d.tag,a),h=!0);var f;if(!d.any&&null===d.choice){var j=null!==d.implicit?d.implicit:d.tag,k=null===d.implicit?"universal":"context";null===j?null===d.use&&b.error("Tag could be ommited only for .use()"):null===d.use&&(f=this._encodeComposite(j,h,k,g))}return null!==d.explicit&&(f=this._encodeComposite(d.explicit,!1,"context",f)),f},d.prototype._encodeChoice=function(a,b){var c=this._baseState,d=c.choice[a.type];return d||g(!1,a.type+" not found in "+JSON.stringify(Object.keys(c.choice))),d._encode(a.value,b)},d.prototype._encodePrimitive=function(a,b){var c=this._baseState;if("octstr"===a||"bitstr"===a||"ia5str"===a)return this._encodeStr(b,a);
if("objid"===a&&c.args)return this._encodeObjid(b,c.reverseArgs[0],c.args[1]);if("objid"===a)return this._encodeObjid(b,null,null);if("gentime"===a||"utctime"===a)return this._encodeTime(b,a);if("null_"===a)return this._encodeNull();if("int"===a||"enum"===a)return this._encodeInt(b,c.args&&c.reverseArgs[0]);if("bool"===a)return this._encodeBool(b);throw new Error("Unsupported tag: "+a)}},{"../base":386,"minimalistic-assert":397}],397:[function(a,b,c){function d(a,b){if(!a)throw new Error(b||"Assertion failed")}b.exports=d,d.equal=function(a,b,c){if(a!=b)throw new Error(c||"Assertion failed: "+a+" != "+b)}},{}],385:[function(a,b,c){function d(a,b){return g.call(this,b),h.isBuffer(a)?(this.base=a,this.offset=0,void(this.length=a.length)):void this.error("Input not Buffer")}function e(a,b){if(Array.isArray(a))this.length=0,this.value=a.map(function(a){return a instanceof e||(a=new e(a,b)),this.length+=a.length,a},this);else if("number"==typeof a){if(!(a>=0&&255>=a))return b.error("non-byte EncoderBuffer value");this.value=a,this.length=1}else if("string"==typeof a)this.value=a,this.length=h.byteLength(a);else{if(!h.isBuffer(a))return b.error("Unsupported type: "+typeof a);this.value=a,this.length=a.length}}var f=a("inherits"),g=a("../base").Reporter,h=a("buffer").Buffer;f(d,g),c.DecoderBuffer=d,d.prototype.save=function(){return{offset:this.offset,reporter:g.prototype.save.call(this)}},d.prototype.restore=function(a){var b=new d(this.base);return b.offset=a.offset,b.length=this.offset,this.offset=a.offset,g.prototype.restore.call(this,a.reporter),b},d.prototype.isEmpty=function(){return this.offset===this.length},d.prototype.readUInt8=function(a){return this.offset+1<=this.length?this.base.readUInt8(this.offset++,!0):this.error(a||"DecoderBuffer overrun")},d.prototype.skip=function(a,b){if(!(this.offset+a<=this.length))return this.error(b||"DecoderBuffer overrun");var c=new d(this.base);return c._reporterState=this._reporterState,c.offset=this.offset,c.length=this.offset+a,this.offset+=a,c},d.prototype.raw=function(a){return this.base.slice(a?a.offset:this.offset,this.length)},c.EncoderBuffer=e,e.prototype.join=function(a,b){return a||(a=new h(this.length)),b||(b=0),0===this.length?a:(Array.isArray(this.value)?this.value.forEach(function(c){c.join(a,b),b+=c.length}):("number"==typeof this.value?a[b]=this.value:"string"==typeof this.value?a.write(this.value,b):h.isBuffer(this.value)&&this.value.copy(a,b),b+=this.length),a)}},{"../base":386,buffer:329,inherits:476}],384:[function(a,b,c){function d(a,b){this.name=a,this.body=b,this.decoders={},this.encoders={}}var e=a("../asn1"),f=a("inherits"),g=c;g.define=function(a,b){return new d(a,b)},d.prototype._createNamed=function(b){var c;try{c=a("vm").runInThisContext("(function "+this.name+"(entity) {\n  this._initNamed(entity);\n})")}catch(d){c=function(a){this._initNamed(a)}}return f(c,b),c.prototype._initNamed=function(a){b.call(this,a)},new c(this)},d.prototype._getDecoder=function(a){return this.decoders.hasOwnProperty(a)||(this.decoders[a]=this._createNamed(e.decoders[a])),this.decoders[a]},d.prototype.decode=function(a,b,c){return this._getDecoder(b).decode(a,c)},d.prototype._getEncoder=function(a){return this.encoders.hasOwnProperty(a)||(this.encoders[a]=this._createNamed(e.encoders[a])),this.encoders[a]},d.prototype.encode=function(a,b,c){return this._getEncoder(b).encode(a,c)}},{"../asn1":383,inherits:476,vm:498}],498:[function(require,module,exports){function Context(){}var indexOf=require("indexof"),Object_keys=function(a){if(Object.keys)return Object.keys(a);var b=[];for(var c in a)b.push(c);return b},forEach=function(a,b){if(a.forEach)return a.forEach(b);for(var c=0;c<a.length;c++)b(a[c],c,a)},defineProp=function(){try{return Object.defineProperty({},"_",{}),function(a,b,c){Object.defineProperty(a,b,{writable:!0,enumerable:!1,configurable:!0,value:c})}}catch(a){return function(a,b,c){a[b]=c}}}(),globals=["Array","Boolean","Date","Error","EvalError","Function","Infinity","JSON","Math","NaN","Number","Object","RangeError","ReferenceError","RegExp","String","SyntaxError","TypeError","URIError","decodeURI","decodeURIComponent","encodeURI","encodeURIComponent","escape","eval","isFinite","isNaN","parseFloat","parseInt","undefined","unescape"];Context.prototype={};var Script=exports.Script=function(a){return this instanceof Script?void(this.code=a):new Script(a)};Script.prototype.runInContext=function(a){if(!(a instanceof Context))throw new TypeError("needs a 'context' argument.");var b=document.createElement("iframe");b.style||(b.style={}),b.style.display="none",document.body.appendChild(b);var c=b.contentWindow,d=c.eval,e=c.execScript;!d&&e&&(e.call(c,"null"),d=c.eval),forEach(Object_keys(a),function(b){c[b]=a[b]}),forEach(globals,function(b){a[b]&&(c[b]=a[b])});var f=Object_keys(c),g=d.call(c,this.code);return forEach(Object_keys(c),function(b){(b in a||-1===indexOf(f,b))&&(a[b]=c[b])}),forEach(globals,function(b){b in a||defineProp(a,b,c[b])}),document.body.removeChild(b),g},Script.prototype.runInThisContext=function(){return eval(this.code)},Script.prototype.runInNewContext=function(a){var b=Script.createContext(a),c=this.runInContext(b);return forEach(Object_keys(b),function(c){a[c]=b[c]}),c},forEach(Object_keys(Script.prototype),function(a){exports[a]=Script[a]=function(b){var c=Script(b);return c[a].apply(c,[].slice.call(arguments,1))}}),exports.createScript=function(a){return exports.Script(a)},exports.createContext=Script.createContext=function(a){var b=new Context;return"object"==typeof a&&forEach(Object_keys(a),function(c){b[c]=a[c]}),b}},{indexof:499}],499:[function(a,b,c){var d=[].indexOf;b.exports=function(a,b){if(d)return a.indexOf(b);for(var c=0;c<a.length;++c)if(a[c]===b)return c;return-1}},{}],379:[function(a,b,c){b.exports={"2.16.840.1.101.3.4.1.1":"aes-128-ecb","2.16.840.1.101.3.4.1.2":"aes-128-cbc","2.16.840.1.101.3.4.1.3":"aes-128-ofb","2.16.840.1.101.3.4.1.4":"aes-128-cfb","2.16.840.1.101.3.4.1.21":"aes-192-ecb","2.16.840.1.101.3.4.1.22":"aes-192-cbc","2.16.840.1.101.3.4.1.23":"aes-192-ofb","2.16.840.1.101.3.4.1.24":"aes-192-cfb","2.16.840.1.101.3.4.1.41":"aes-256-ecb","2.16.840.1.101.3.4.1.42":"aes-256-cbc","2.16.840.1.101.3.4.1.43":"aes-256-ofb","2.16.840.1.101.3.4.1.44":"aes-256-cfb"}},{}],357:[function(a,b,c){"use strict";var d=c;d.version=a("../package.json").version,d.utils=a("./elliptic/utils"),d.rand=a("brorand"),d.hmacDRBG=a("./elliptic/hmac-drbg"),d.curve=a("./elliptic/curve"),d.curves=a("./elliptic/curves"),d.ec=a("./elliptic/ec")},{"../package.json":377,"./elliptic/curve":360,"./elliptic/curves":363,"./elliptic/ec":364,"./elliptic/hmac-drbg":367,"./elliptic/utils":369,brorand:370}],377:[function(a,b,c){b.exports={name:"elliptic",version:"3.1.0",description:"EC cryptography",main:"lib/elliptic.js",scripts:{test:"make lint && mocha --reporter=spec test/*-test.js"},repository:{type:"git",url:"git+ssh://git@github.com/indutny/elliptic.git"},keywords:["EC","Elliptic","curve","Cryptography"],author:{name:"Fedor Indutny",email:"fedor@indutny.com"},license:"MIT",bugs:{url:"https://github.com/indutny/elliptic/issues"},homepage:"https://github.com/indutny/elliptic",devDependencies:{browserify:"^3.44.2",jscs:"^1.11.3",jshint:"^2.6.0",mocha:"^2.1.0","uglify-js":"^2.4.13"},dependencies:{"bn.js":"^2.0.3",brorand:"^1.0.1","hash.js":"^1.0.0",inherits:"^2.0.1"},gitHead:"d86cd2a8178f7e7cecbd6dd92eea084e2ab44c13",_id:"elliptic@3.1.0",_shasum:"c21682ef762769b56a74201609105da11d5f60cc",_from:"elliptic@>=3.0.0 <4.0.0",_npmVersion:"2.11.0",_nodeVersion:"2.2.1",_npmUser:{name:"indutny",email:"fedor@indutny.com"},maintainers:[{name:"indutny",email:"fedor@indutny.com"}],dist:{shasum:"c21682ef762769b56a74201609105da11d5f60cc",tarball:"http://registry.npmjs.org/elliptic/-/elliptic-3.1.0.tgz"},directories:{},_resolved:"https://registry.npmjs.org/elliptic/-/elliptic-3.1.0.tgz",readme:"ERROR: No README data found!"}},{}],370:[function(a,b,c){function d(a){this.rand=a}var e;if(b.exports=function(a){return e||(e=new d(null)),e.generate(a)},b.exports.Rand=d,d.prototype.generate=function(a){return this._rand(a)},"object"==typeof window)window.crypto&&window.crypto.getRandomValues?d.prototype._rand=function(a){var b=new Uint8Array(a);return window.crypto.getRandomValues(b),b}:window.msCrypto&&window.msCrypto.getRandomValues?d.prototype._rand=function(a){var b=new Uint8Array(a);return window.msCrypto.getRandomValues(b),b}:d.prototype._rand=function(){throw new Error("Not implemented yet")};else try{var f=a("crypto");d.prototype._rand=function(a){return f.randomBytes(a)}}catch(g){d.prototype._rand=function(a){for(var b=new Uint8Array(a),c=0;c<b.length;c++)b[c]=this.rand.getByte();return b}}},{}],369:[function(a,b,c){"use strict";function d(a,b){if(Array.isArray(a))return a.slice();if(!a)return[];var c=[];if("string"!=typeof a){for(var d=0;d<a.length;d++)c[d]=0|a[d];return c}if(b){if("hex"===b){a=a.replace(/[^a-z0-9]+/gi,""),a.length%2!==0&&(a="0"+a);for(var d=0;d<a.length;d+=2)c.push(parseInt(a[d]+a[d+1],16))}}else for(var d=0;d<a.length;d++){var e=a.charCodeAt(d),f=e>>8,g=255&e;f?c.push(f,g):c.push(g)}return c}function e(a){return 1===a.length?"0"+a:a}function f(a){for(var b="",c=0;c<a.length;c++)b+=e(a[c].toString(16));return b}function g(a,b){for(var c=[],d=1<<b+1,e=a.clone();e.cmpn(1)>=0;){var f;if(e.isOdd()){var g=e.andln(d-1);f=g>(d>>1)-1?(d>>1)-g:g,e.isubn(f)}else f=0;c.push(f);for(var h=0!==e.cmpn(0)&&0===e.andln(d-1)?b+1:1,i=1;h>i;i++)c.push(0);e.ishrn(h)}return c}function h(a,b){var c=[[],[]];a=a.clone(),b=b.clone();for(var d=0,e=0;a.cmpn(-d)>0||b.cmpn(-e)>0;){var f=a.andln(3)+d&3,g=b.andln(3)+e&3;3===f&&(f=-1),3===g&&(g=-1);var h;if(0===(1&f))h=0;else{var i=a.andln(7)+d&7;h=3!==i&&5!==i||2!==g?f:-f}c[0].push(h);var j;if(0===(1&g))j=0;else{var i=b.andln(7)+e&7;j=3!==i&&5!==i||2!==f?g:-g}c[1].push(j),2*d===h+1&&(d=1-d),2*e===j+1&&(e=1-e),a.ishrn(1),b.ishrn(1)}return c}var i=c;i.assert=function(a,b){if(!a)throw new Error(b||"Assertion failed")},i.toArray=d,i.zero2=e,i.toHex=f,i.encode=function(a,b){return"hex"===b?f(a):a},i.getNAF=g,i.getJSF=h},{}],367:[function(a,b,c){"use strict";function d(a){if(!(this instanceof d))return new d(a);this.hash=a.hash,this.predResist=!!a.predResist,this.outLen=this.hash.outSize,this.minEntropy=a.minEntropy||this.hash.hmacStrength,this.reseed=null,this.reseedInterval=null,this.K=null,this.V=null;var b=g.toArray(a.entropy,a.entropyEnc),c=g.toArray(a.nonce,a.nonceEnc),e=g.toArray(a.pers,a.persEnc);h(b.length>=this.minEntropy/8,"Not enough entropy. Minimum is: "+this.minEntropy+" bits"),this._init(b,c,e)}var e=a("hash.js"),f=a("../elliptic"),g=f.utils,h=g.assert;b.exports=d,d.prototype._init=function(a,b,c){var d=a.concat(b).concat(c);this.K=new Array(this.outLen/8),this.V=new Array(this.outLen/8);for(var e=0;e<this.V.length;e++)this.K[e]=0,this.V[e]=1;this._update(d),this.reseed=1,this.reseedInterval=281474976710656},d.prototype._hmac=function(){return new e.hmac(this.hash,this.K)},d.prototype._update=function(a){var b=this._hmac().update(this.V).update([0]);a&&(b=b.update(a)),this.K=b.digest(),this.V=this._hmac().update(this.V).digest(),a&&(this.K=this._hmac().update(this.V).update([1]).update(a).digest(),this.V=this._hmac().update(this.V).digest())},d.prototype.reseed=function(a,b,c,d){"string"!=typeof b&&(d=c,c=b,b=null),a=g.toBuffer(a,b),c=g.toBuffer(c,d),h(a.length>=this.minEntropy/8,"Not enough entropy. Minimum is: "+this.minEntropy+" bits"),this._update(a.concat(c||[])),this.reseed=1},d.prototype.generate=function(a,b,c,d){if(this.reseed>this.reseedInterval)throw new Error("Reseed is required");"string"!=typeof b&&(d=c,c=b,b=null),c&&(c=g.toArray(c,d),this._update(c));for(var e=[];e.length<a;)this.V=this._hmac().update(this.V).digest(),e=e.concat(this.V);var f=e.slice(0,a);return this._update(c),this.reseed++,g.encode(f,b)}},{"../elliptic":357,"hash.js":371}],364:[function(a,b,c){"use strict";function d(a){return this instanceof d?("string"==typeof a&&(h(f.curves.hasOwnProperty(a),"Unknown curve "+a),a=f.curves[a]),a instanceof f.curves.PresetCurve&&(a={curve:a}),this.curve=a.curve.curve,this.n=this.curve.n,this.nh=this.n.shrn(1),this.g=this.curve.g,this.g=a.curve.g,this.g.precompute(a.curve.n.bitLength()+1),void(this.hash=a.hash||a.curve.hash)):new d(a)}var e=a("bn.js"),f=a("../../elliptic"),g=f.utils,h=g.assert,i=a("./key"),j=a("./signature");b.exports=d,d.prototype.keyPair=function(a){return new i(this,a)},d.prototype.keyFromPrivate=function(a,b){return i.fromPrivate(this,a,b)},d.prototype.keyFromPublic=function(a,b){return i.fromPublic(this,a,b)},d.prototype.genKeyPair=function(a){a||(a={});for(var b=new f.hmacDRBG({hash:this.hash,pers:a.pers,entropy:a.entropy||f.rand(this.hash.hmacStrength),nonce:this.n.toArray()}),c=this.n.byteLength(),d=this.n.sub(new e(2));;){var g=new e(b.generate(c));if(!(g.cmp(d)>0))return g.iaddn(1),this.keyFromPrivate(g)}},d.prototype._truncateToN=function(a,b){var c=8*a.byteLength()-this.n.bitLength();return c>0&&(a=a.shrn(c)),!b&&a.cmp(this.n)>=0?a.sub(this.n):a},d.prototype.sign=function(a,b,c,d){"object"==typeof c&&(d=c,c=null),d||(d={}),b=this.keyFromPrivate(b,c),a=this._truncateToN(new e(a,16));for(var g=this.n.byteLength(),h=b.getPrivate().toArray(),i=h.length;21>i;i++)h.unshift(0);for(var k=a.toArray(),i=k.length;g>i;i++)k.unshift(0);for(var l=new f.hmacDRBG({hash:this.hash,entropy:h,nonce:k}),m=this.n.sub(new e(1));;){var n=new e(l.generate(this.n.byteLength()));if(n=this._truncateToN(n,!0),!(n.cmpn(1)<=0||n.cmp(m)>=0)){var o=this.g.mul(n);if(!o.isInfinity()){var p=o.getX(),q=p.mod(this.n);if(0!==q.cmpn(0)){var r=n.invm(this.n).mul(q.mul(b.getPrivate()).iadd(a)).mod(this.n);if(0!==r.cmpn(0)){d.canonical&&r.cmp(this.nh)>0&&(r=this.n.sub(r));var s=(o.getY().isOdd()?1:0)|(0!==p.cmp(q)?2:0);return new j({r:q,s:r,recoveryParam:s})}}}}}},d.prototype.verify=function(a,b,c,d){a=this._truncateToN(new e(a,16)),c=this.keyFromPublic(c,d),b=new j(b,"hex");var f=b.r,g=b.s;if(f.cmpn(1)<0||f.cmp(this.n)>=0)return!1;if(g.cmpn(1)<0||g.cmp(this.n)>=0)return!1;var h=g.invm(this.n),i=h.mul(a).mod(this.n),k=h.mul(f).mod(this.n),l=this.g.mulAdd(i,c.getPublic(),k);return l.isInfinity()?!1:0===l.getX().mod(this.n).cmp(f)},d.prototype.recoverPubKey=function(a,b,c,d){h((3&c)===c,"The recovery param is more than two bits"),b=new j(b,d);var f=this.n,g=new e(a),i=b.r,k=b.s,l=1&c,m=c>>1;if(i.cmp(this.curve.p.mod(this.curve.n))>=0&&m)throw new Error("Unable to find sencond key candinate");i=this.curve.pointFromX(l,i);var n=g.neg().mod(f),o=b.r.invm(f);return i.mul(k).add(this.g.mul(n)).mul(o)},d.prototype.getKeyRecoveryParam=function(a,b,c,d){if(b=new j(b,d),null!==b.recoveryParam)return b.recoveryParam;for(var e=0;4>e;e++){var f=this.recoverPubKey(a,b,e);if(f.eq(c))return e}throw new Error("Unable to find valid recovery factor")}},{"../../elliptic":357,"./key":365,"./signature":366,"bn.js":355}],366:[function(a,b,c){"use strict";function d(a,b){return a instanceof d?a:void(this._importDER(a,b)||(h(a.r&&a.s,"Signature without r or s"),this.r=new e(a.r,16),this.s=new e(a.s,16),null!==a.recoveryParam?this.recoveryParam=a.recoveryParam:this.recoveryParam=null))}var e=a("bn.js"),f=a("../../elliptic"),g=f.utils,h=g.assert;b.exports=d,d.prototype._importDER=function(a,b){if(a=g.toArray(a,b),a.length<6||48!==a[0]||2!==a[2])return!1;var c=a[1];if(1+c>a.length)return!1;var d=a[3];if(d>=128)return!1;if(4+d+2>=a.length)return!1;if(2!==a[4+d])return!1;var f=a[5+d];return f>=128?!1:4+d+2+f>a.length?!1:(this.r=new e(a.slice(4,4+d)),this.s=new e(a.slice(4+d+2,4+d+2+f)),this.recoveryParam=null,!0)},d.prototype.toDER=function(a){var b=this.r.toArray(),c=this.s.toArray();128&b[0]&&(b=[0].concat(b)),128&c[0]&&(c=[0].concat(c));var d=b.length+c.length+4,e=[48,d,2,b.length];return e=e.concat(b,[2,c.length],c),g.encode(e,a)}},{"../../elliptic":357,"bn.js":355}],365:[function(a,b,c){"use strict";function d(a,b){this.ec=a,this.priv=null,this.pub=null,b.priv&&this._importPrivate(b.priv,b.privEnc),b.pub&&this._importPublic(b.pub,b.pubEnc)}var e=a("bn.js"),f=a("../../elliptic"),g=f.utils;b.exports=d,d.fromPublic=function(a,b,c){return b instanceof d?b:new d(a,{pub:b,pubEnc:c})},d.fromPrivate=function(a,b,c){return b instanceof d?b:new d(a,{priv:b,privEnc:c})},d.prototype.validate=function(){var a=this.getPublic();return a.isInfinity()?{result:!1,reason:"Invalid public key"}:a.validate()?a.mul(this.ec.curve.n).isInfinity()?{result:!0,reason:null}:{result:!1,reason:"Public key * N != O"}:{result:!1,reason:"Public key is not a point"}},d.prototype.getPublic=function(a,b){if(this.pub||(this.pub=this.ec.g.mul(this.priv)),"string"==typeof a&&(b=a,a=null),!b)return this.pub;for(var c=this.ec.curve.p.byteLength(),d=this.pub.getX().toArray(),e=d.length;c>e;e++)d.unshift(0);var f;if("mont"!==this.ec.curve.type)if(a)f=[this.pub.getY().isEven()?2:3].concat(d);else{for(var h=this.pub.getY().toArray(),e=h.length;c>e;e++)h.unshift(0);var f=[4].concat(d,h)}else f=d;return g.encode(f,b)},d.prototype.getPrivate=function(a){return"hex"===a?this.priv.toString(16,2):this.priv},d.prototype._importPrivate=function(a,b){this.priv=new e(a,b||16),this.priv=this.priv.mod(this.ec.curve.n)},d.prototype._importPublic=function(a,b){return a.x||a.y?void(this.pub=this.ec.curve.point(a.x,a.y)):(a=g.toArray(a,b),"mont"!==this.ec.curve.type?this._importPublicShort(a):this._importPublicMont(a))},d.prototype._importPublicShort=function(a){var b=this.ec.curve.p.byteLength();4===a[0]&&a.length-1===2*b?this.pub=this.ec.curve.point(a.slice(1,1+b),a.slice(1+b,1+2*b)):2!==a[0]&&3!==a[0]||a.length-1!==b||(this.pub=this.ec.curve.pointFromX(3===a[0],a.slice(1,1+b)))},d.prototype._importPublicMont=function(a){this.pub=this.ec.curve.point(a,1)},d.prototype.derive=function(a){return a.mul(this.priv).getX()},d.prototype.sign=function(a){return this.ec.sign(a,this)},d.prototype.verify=function(a,b){return this.ec.verify(a,b,this)},d.prototype.inspect=function(){return"<Key priv: "+(this.priv&&this.priv.toString(16,2))+" pub: "+(this.pub&&this.pub.inspect())+" >"}},{"../../elliptic":357,"bn.js":355}],363:[function(a,b,c){"use strict";function d(a){"short"===a.type?this.curve=new h.curve["short"](a):"edwards"===a.type?this.curve=new h.curve.edwards(a):this.curve=new h.curve.mont(a),this.g=this.curve.g,this.n=this.curve.n,this.hash=a.hash,i(this.g.validate(),"Invalid curve"),i(this.g.mul(this.n).isInfinity(),"Invalid curve, G*N != O")}function e(a,b){Object.defineProperty(f,a,{configurable:!0,enumerable:!0,get:function(){var c=new d(b);return Object.defineProperty(f,a,{configurable:!0,enumerable:!0,value:c}),c}})}var f=c,g=a("hash.js"),h=a("../elliptic"),i=h.utils.assert;f.PresetCurve=d,e("p192",{type:"short",prime:"p192",p:"ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff",a:"ffffffff ffffffff ffffffff fffffffe ffffffff fffffffc",b:"64210519 e59c80e7 0fa7e9ab 72243049 feb8deec c146b9b1",n:"ffffffff ffffffff ffffffff 99def836 146bc9b1 b4d22831",hash:g.sha256,gRed:!1,g:["188da80e b03090f6 7cbf20eb 43a18800 f4ff0afd 82ff1012","07192b95 ffc8da78 631011ed 6b24cdd5 73f977a1 1e794811"]}),e("p224",{type:"short",prime:"p224",p:"ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001",a:"ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff fffffffe",b:"b4050a85 0c04b3ab f5413256 5044b0b7 d7bfd8ba 270b3943 2355ffb4",n:"ffffffff ffffffff ffffffff ffff16a2 e0b8f03e 13dd2945 5c5c2a3d",hash:g.sha256,gRed:!1,g:["b70e0cbd 6bb4bf7f 321390b9 4a03c1d3 56c21122 343280d6 115c1d21","bd376388 b5f723fb 4c22dfe6 cd4375a0 5a074764 44d58199 85007e34"]}),e("p256",{type:"short",prime:null,p:"ffffffff 00000001 00000000 00000000 00000000 ffffffff ffffffff ffffffff",a:"ffffffff 00000001 00000000 00000000 00000000 ffffffff ffffffff fffffffc",b:"5ac635d8 aa3a93e7 b3ebbd55 769886bc 651d06b0 cc53b0f6 3bce3c3e 27d2604b",n:"ffffffff 00000000 ffffffff ffffffff bce6faad a7179e84 f3b9cac2 fc632551",hash:g.sha256,gRed:!1,g:["6b17d1f2 e12c4247 f8bce6e5 63a440f2 77037d81 2deb33a0 f4a13945 d898c296","4fe342e2 fe1a7f9b 8ee7eb4a 7c0f9e16 2bce3357 6b315ece cbb64068 37bf51f5"]}),e("curve25519",{type:"mont",prime:"p25519",p:"7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed",a:"76d06",b:"0",n:"1000000000000000 0000000000000000 14def9dea2f79cd6 5812631a5cf5d3ed",hash:g.sha256,gRed:!1,g:["9"]}),e("ed25519",{type:"edwards",prime:"p25519",p:"7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed",a:"-1",c:"1",d:"52036cee2b6ffe73 8cc740797779e898 00700a4d4141d8ab 75eb4dca135978a3",n:"1000000000000000 0000000000000000 14def9dea2f79cd6 5812631a5cf5d3ed",hash:g.sha256,gRed:!1,g:["216936d3cd6e53fec0a4e231fdd6dc5c692cc7609525a7b2c9562d608f25d51a","6666666666666666666666666666666666666666666666666666666666666658"]});var j;try{j=a("./precomputed/secp256k1")}catch(k){j=void 0}e("secp256k1",{type:"short",prime:"k256",p:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f",a:"0",b:"7",n:"ffffffff ffffffff ffffffff fffffffe baaedce6 af48a03b bfd25e8c d0364141",h:"1",hash:g.sha256,beta:"7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee",lambda:"5363ad4cc05c30e0a5261c028812645a122e22ea20816678df02967c1b23bd72",basis:[{a:"3086d221a7d46bcde86c90e49284eb15",b:"-e4437ed6010e88286f547fa90abfe4c3"},{a:"114ca50f7a8e2f3f657c1108d9d44cfd8",b:"3086d221a7d46bcde86c90e49284eb15"}],gRed:!1,g:["79be667ef9dcbbac55a06295ce870b07029bfcdb2dce28d959f2815b16f81798","483ada7726a3c4655da4fbfc0e1108a8fd17b448a68554199c47d08ffb10d4b8",j]})},{"../elliptic":357,"./precomputed/secp256k1":368,"hash.js":371}],371:[function(a,b,c){var d=c;d.utils=a("./hash/utils"),d.common=a("./hash/common"),d.sha=a("./hash/sha"),d.ripemd=a("./hash/ripemd"),d.hmac=a("./hash/hmac"),d.sha1=d.sha.sha1,d.sha256=d.sha.sha256,d.sha224=d.sha.sha224,d.sha384=d.sha.sha384,d.sha512=d.sha.sha512,d.ripemd160=d.ripemd.ripemd160},{"./hash/common":372,"./hash/hmac":373,"./hash/ripemd":374,"./hash/sha":375,"./hash/utils":376}],376:[function(a,b,c){function d(a,b){if(Array.isArray(a))return a.slice();if(!a)return[];var c=[];if("string"==typeof a)if(b){if("hex"===b){a=a.replace(/[^a-z0-9]+/gi,""),a.length%2!==0&&(a="0"+a);for(var d=0;d<a.length;d+=2)c.push(parseInt(a[d]+a[d+1],16))}}else for(var d=0;d<a.length;d++){var e=a.charCodeAt(d),f=e>>8,g=255&e;f?c.push(f,g):c.push(g)}else for(var d=0;d<a.length;d++)c[d]=0|a[d];return c}function e(a){for(var b="",c=0;c<a.length;c++)b+=h(a[c].toString(16));return b}function f(a){var b=a>>>24|a>>>8&65280|a<<8&16711680|(255&a)<<24;return b>>>0}function g(a,b){for(var c="",d=0;d<a.length;d++){var e=a[d];"little"===b&&(e=f(e)),c+=i(e.toString(16))}return c}function h(a){return 1===a.length?"0"+a:a}function i(a){return 7===a.length?"0"+a:6===a.length?"00"+a:5===a.length?"000"+a:4===a.length?"0000"+a:3===a.length?"00000"+a:2===a.length?"000000"+a:1===a.length?"0000000"+a:a}function j(a,b,c,d){var e=c-b;r(e%4===0);for(var f=new Array(e/4),g=0,h=b;g<f.length;g++,h+=4){var i;i="big"===d?a[h]<<24|a[h+1]<<16|a[h+2]<<8|a[h+3]:a[h+3]<<24|a[h+2]<<16|a[h+1]<<8|a[h],f[g]=i>>>0}return f}function k(a,b){for(var c=new Array(4*a.length),d=0,e=0;d<a.length;d++,e+=4){var f=a[d];"big"===b?(c[e]=f>>>24,c[e+1]=f>>>16&255,c[e+2]=f>>>8&255,c[e+3]=255&f):(c[e+3]=f>>>24,c[e+2]=f>>>16&255,c[e+1]=f>>>8&255,c[e]=255&f)}return c}function l(a,b){return a>>>b|a<<32-b}function m(a,b){return a<<b|a>>>32-b}function n(a,b){return a+b>>>0}function o(a,b,c){return a+b+c>>>0}function p(a,b,c,d){return a+b+c+d>>>0}function q(a,b,c,d,e){return a+b+c+d+e>>>0}function r(a,b){if(!a)throw new Error(b||"Assertion failed")}function s(a,b,c,d){var e=a[b],f=a[b+1],g=d+f>>>0,h=(d>g?1:0)+c+e;a[b]=h>>>0,a[b+1]=g}function t(a,b,c,d){var e=b+d>>>0,f=(b>e?1:0)+a+c;return f>>>0}function u(a,b,c,d){var e=b+d;return e>>>0}function v(a,b,c,d,e,f,g,h){var i=0,j=b;j=j+d>>>0,i+=b>j?1:0,j=j+f>>>0,i+=f>j?1:0,j=j+h>>>0,i+=h>j?1:0;var k=a+c+e+g+i;return k>>>0}function w(a,b,c,d,e,f,g,h){var i=b+d+f+h;return i>>>0}function x(a,b,c,d,e,f,g,h,i,j){var k=0,l=b;l=l+d>>>0,k+=b>l?1:0,l=l+f>>>0,k+=f>l?1:0,l=l+h>>>0,k+=h>l?1:0,l=l+j>>>0,k+=j>l?1:0;var m=a+c+e+g+i+k;return m>>>0}function y(a,b,c,d,e,f,g,h,i,j){var k=b+d+f+h+j;return k>>>0}function z(a,b,c){var d=b<<32-c|a>>>c;return d>>>0}function A(a,b,c){var d=a<<32-c|b>>>c;return d>>>0}function B(a,b,c){return a>>>c}function C(a,b,c){var d=a<<32-c|b>>>c;return d>>>0}var D=c,E=a("inherits");D.toArray=d,D.toHex=e,D.htonl=f,D.toHex32=g,D.zero2=h,D.zero8=i,D.join32=j,D.split32=k,D.rotr32=l,D.rotl32=m,D.sum32=n,D.sum32_3=o,D.sum32_4=p,D.sum32_5=q,D.assert=r,D.inherits=E,c.sum64=s,c.sum64_hi=t,c.sum64_lo=u,c.sum64_4_hi=v,c.sum64_4_lo=w,c.sum64_5_hi=x,c.sum64_5_lo=y,c.rotr64_hi=z,c.rotr64_lo=A,c.shr64_hi=B,c.shr64_lo=C},{inherits:476}],375:[function(a,b,c){function d(){return this instanceof d?(V.call(this),this.h=[1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225],this.k=W,void(this.W=new Array(64))):new d}function e(){return this instanceof e?(d.call(this),void(this.h=[3238371032,914150663,812702999,4144912697,4290775857,1750603025,1694076839,3204075428])):new e}function f(){return this instanceof f?(V.call(this),this.h=[1779033703,4089235720,3144134277,2227873595,1013904242,4271175723,2773480762,1595750129,1359893119,2917565137,2600822924,725511199,528734635,4215389547,1541459225,327033209],this.k=X,void(this.W=new Array(160))):new f}function g(){return this instanceof g?(f.call(this),void(this.h=[3418070365,3238371032,1654270250,914150663,2438529370,812702999,355462360,4144912697,1731405415,4290775857,2394180231,1750603025,3675008525,1694076839,1203062813,3204075428])):new g}function h(){return this instanceof h?(V.call(this),this.h=[1732584193,4023233417,2562383102,271733878,3285377520],void(this.W=new Array(80))):new h}function i(a,b,c){return a&b^~a&c}function j(a,b,c){return a&b^a&c^b&c}function k(a,b,c){return a^b^c}function l(a){return F(a,2)^F(a,13)^F(a,22)}function m(a){return F(a,6)^F(a,11)^F(a,25)}function n(a){return F(a,7)^F(a,18)^a>>>3}function o(a){return F(a,17)^F(a,19)^a>>>10}function p(a,b,c,d){return 0===a?i(b,c,d):1===a||3===a?k(b,c,d):2===a?j(b,c,d):void 0}function q(a,b,c,d,e,f){var g=a&c^~a&e;return 0>g&&(g+=4294967296),g}function r(a,b,c,d,e,f){var g=b&d^~b&f;return 0>g&&(g+=4294967296),g}function s(a,b,c,d,e,f){var g=a&c^a&e^c&e;return 0>g&&(g+=4294967296),g}function t(a,b,c,d,e,f){var g=b&d^b&f^d&f;return 0>g&&(g+=4294967296),g}function u(a,b){var c=K(a,b,28),d=K(b,a,2),e=K(b,a,7),f=c^d^e;return 0>f&&(f+=4294967296),f}function v(a,b){var c=L(a,b,28),d=L(b,a,2),e=L(b,a,7),f=c^d^e;return 0>f&&(f+=4294967296),f}function w(a,b){var c=K(a,b,14),d=K(a,b,18),e=K(b,a,9),f=c^d^e;return 0>f&&(f+=4294967296),f}function x(a,b){var c=L(a,b,14),d=L(a,b,18),e=L(b,a,9),f=c^d^e;return 0>f&&(f+=4294967296),f}function y(a,b){var c=K(a,b,1),d=K(a,b,8),e=M(a,b,7),f=c^d^e;return 0>f&&(f+=4294967296),f}function z(a,b){var c=L(a,b,1),d=L(a,b,8),e=N(a,b,7),f=c^d^e;return 0>f&&(f+=4294967296),f}function A(a,b){var c=K(a,b,19),d=K(b,a,29),e=M(a,b,6),f=c^d^e;return 0>f&&(f+=4294967296),f}function B(a,b){var c=L(a,b,19),d=L(b,a,29),e=N(a,b,6),f=c^d^e;return 0>f&&(f+=4294967296),f}var C=a("../hash"),D=C.utils,E=D.assert,F=D.rotr32,G=D.rotl32,H=D.sum32,I=D.sum32_4,J=D.sum32_5,K=D.rotr64_hi,L=D.rotr64_lo,M=D.shr64_hi,N=D.shr64_lo,O=D.sum64,P=D.sum64_hi,Q=D.sum64_lo,R=D.sum64_4_hi,S=D.sum64_4_lo,T=D.sum64_5_hi,U=D.sum64_5_lo,V=C.common.BlockHash,W=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298],X=[1116352408,3609767458,1899447441,602891725,3049323471,3964484399,3921009573,2173295548,961987163,4081628472,1508970993,3053834265,2453635748,2937671579,2870763221,3664609560,3624381080,2734883394,310598401,1164996542,607225278,1323610764,1426881987,3590304994,1925078388,4068182383,2162078206,991336113,2614888103,633803317,3248222580,3479774868,3835390401,2666613458,4022224774,944711139,264347078,2341262773,604807628,2007800933,770255983,1495990901,1249150122,1856431235,1555081692,3175218132,1996064986,2198950837,2554220882,3999719339,2821834349,766784016,2952996808,2566594879,3210313671,3203337956,3336571891,1034457026,3584528711,2466948901,113926993,3758326383,338241895,168717936,666307205,1188179964,773529912,1546045734,1294757372,1522805485,1396182291,2643833823,1695183700,2343527390,1986661051,1014477480,2177026350,1206759142,2456956037,344077627,2730485921,1290863460,2820302411,3158454273,3259730800,3505952657,3345764771,106217008,3516065817,3606008344,3600352804,1432725776,4094571909,1467031594,275423344,851169720,430227734,3100823752,506948616,1363258195,659060556,3750685593,883997877,3785050280,958139571,3318307427,1322822218,3812723403,1537002063,2003034995,1747873779,3602036899,1955562222,1575990012,2024104815,1125592928,2227730452,2716904306,2361852424,442776044,2428436474,593698344,2756734187,3733110249,3204031479,2999351573,3329325298,3815920427,3391569614,3928383900,3515267271,566280711,3940187606,3454069534,4118630271,4000239992,116418474,1914138554,174292421,2731055270,289380356,3203993006,460393269,320620315,685471733,587496836,852142971,1086792851,1017036298,365543100,1126000580,2618297676,1288033470,3409855158,1501505948,4234509866,1607167915,987167468,1816402316,1246189591],Y=[1518500249,1859775393,2400959708,3395469782];D.inherits(d,V),c.sha256=d,d.blockSize=512,d.outSize=256,d.hmacStrength=192,d.padLength=64,d.prototype._update=function(a,b){for(var c=this.W,d=0;16>d;d++)c[d]=a[b+d];for(;d<c.length;d++)c[d]=I(o(c[d-2]),c[d-7],n(c[d-15]),c[d-16]);var e=this.h[0],f=this.h[1],g=this.h[2],h=this.h[3],k=this.h[4],p=this.h[5],q=this.h[6],r=this.h[7];E(this.k.length===c.length);for(var d=0;d<c.length;d++){var s=J(r,m(k),i(k,p,q),this.k[d],c[d]),t=H(l(e),j(e,f,g));r=q,q=p,p=k,k=H(h,s),h=g,g=f,f=e,e=H(s,t)}this.h[0]=H(this.h[0],e),this.h[1]=H(this.h[1],f),this.h[2]=H(this.h[2],g),this.h[3]=H(this.h[3],h),this.h[4]=H(this.h[4],k),this.h[5]=H(this.h[5],p),this.h[6]=H(this.h[6],q),this.h[7]=H(this.h[7],r)},d.prototype._digest=function(a){return"hex"===a?D.toHex32(this.h,"big"):D.split32(this.h,"big")},D.inherits(e,d),c.sha224=e,e.blockSize=512,e.outSize=224,e.hmacStrength=192,e.padLength=64,e.prototype._digest=function(a){return"hex"===a?D.toHex32(this.h.slice(0,7),"big"):D.split32(this.h.slice(0,7),"big")},D.inherits(f,V),c.sha512=f,f.blockSize=1024,f.outSize=512,f.hmacStrength=192,f.padLength=128,f.prototype._prepareBlock=function(a,b){for(var c=this.W,d=0;32>d;d++)c[d]=a[b+d];for(;d<c.length;d+=2){var e=A(c[d-4],c[d-3]),f=B(c[d-4],c[d-3]),g=c[d-14],h=c[d-13],i=y(c[d-30],c[d-29]),j=z(c[d-30],c[d-29]),k=c[d-32],l=c[d-31];c[d]=R(e,f,g,h,i,j,k,l),c[d+1]=S(e,f,g,h,i,j,k,l)}},f.prototype._update=function(a,b){this._prepareBlock(a,b);var c=this.W,d=this.h[0],e=this.h[1],f=this.h[2],g=this.h[3],h=this.h[4],i=this.h[5],j=this.h[6],k=this.h[7],l=this.h[8],m=this.h[9],n=this.h[10],o=this.h[11],p=this.h[12],y=this.h[13],z=this.h[14],A=this.h[15];E(this.k.length===c.length);for(var B=0;B<c.length;B+=2){var C=z,D=A,F=w(l,m),G=x(l,m),H=q(l,m,n,o,p,y),I=r(l,m,n,o,p,y),J=this.k[B],K=this.k[B+1],L=c[B],M=c[B+1],N=T(C,D,F,G,H,I,J,K,L,M),R=U(C,D,F,G,H,I,J,K,L,M),C=u(d,e),D=v(d,e),F=s(d,e,f,g,h,i),G=t(d,e,f,g,h,i),S=P(C,D,F,G),V=Q(C,D,F,G);z=p,A=y,p=n,y=o,n=l,o=m,l=P(j,k,N,R),m=Q(k,k,N,R),j=h,k=i,h=f,i=g,f=d,g=e,d=P(N,R,S,V),e=Q(N,R,S,V)}O(this.h,0,d,e),O(this.h,2,f,g),O(this.h,4,h,i),O(this.h,6,j,k),O(this.h,8,l,m),O(this.h,10,n,o),O(this.h,12,p,y),O(this.h,14,z,A);
},f.prototype._digest=function(a){return"hex"===a?D.toHex32(this.h,"big"):D.split32(this.h,"big")},D.inherits(g,f),c.sha384=g,g.blockSize=1024,g.outSize=384,g.hmacStrength=192,g.padLength=128,g.prototype._digest=function(a){return"hex"===a?D.toHex32(this.h.slice(0,12),"big"):D.split32(this.h.slice(0,12),"big")},D.inherits(h,V),c.sha1=h,h.blockSize=512,h.outSize=160,h.hmacStrength=80,h.padLength=64,h.prototype._update=function(a,b){for(var c=this.W,d=0;16>d;d++)c[d]=a[b+d];for(;d<c.length;d++)c[d]=G(c[d-3]^c[d-8]^c[d-14]^c[d-16],1);for(var e=this.h[0],f=this.h[1],g=this.h[2],h=this.h[3],i=this.h[4],d=0;d<c.length;d++){var j=~~(d/20),k=J(G(e,5),p(j,f,g,h),i,c[d],Y[j]);i=h,h=g,g=G(f,30),f=e,e=k}this.h[0]=H(this.h[0],e),this.h[1]=H(this.h[1],f),this.h[2]=H(this.h[2],g),this.h[3]=H(this.h[3],h),this.h[4]=H(this.h[4],i)},h.prototype._digest=function(a){return"hex"===a?D.toHex32(this.h,"big"):D.split32(this.h,"big")}},{"../hash":371}],374:[function(a,b,c){function d(){return this instanceof d?(n.call(this),this.h=[1732584193,4023233417,2562383102,271733878,3285377520],void(this.endian="little")):new d}function e(a,b,c,d){return 15>=a?b^c^d:31>=a?b&c|~b&d:47>=a?(b|~c)^d:63>=a?b&d|c&~d:b^(c|~d)}function f(a){return 15>=a?0:31>=a?1518500249:47>=a?1859775393:63>=a?2400959708:2840853838}function g(a){return 15>=a?1352829926:31>=a?1548603684:47>=a?1836072691:63>=a?2053994217:0}var h=a("../hash"),i=h.utils,j=i.rotl32,k=i.sum32,l=i.sum32_3,m=i.sum32_4,n=h.common.BlockHash;i.inherits(d,n),c.ripemd160=d,d.blockSize=512,d.outSize=160,d.hmacStrength=192,d.padLength=64,d.prototype._update=function(a,b){for(var c=this.h[0],d=this.h[1],h=this.h[2],i=this.h[3],n=this.h[4],s=c,t=d,u=h,v=i,w=n,x=0;80>x;x++){var y=k(j(m(c,e(x,d,h,i),a[o[x]+b],f(x)),q[x]),n);c=n,n=i,i=j(h,10),h=d,d=y,y=k(j(m(s,e(79-x,t,u,v),a[p[x]+b],g(x)),r[x]),w),s=w,w=v,v=j(u,10),u=t,t=y}y=l(this.h[1],h,v),this.h[1]=l(this.h[2],i,w),this.h[2]=l(this.h[3],n,s),this.h[3]=l(this.h[4],c,t),this.h[4]=l(this.h[0],d,u),this.h[0]=y},d.prototype._digest=function(a){return"hex"===a?i.toHex32(this.h,"little"):i.split32(this.h,"little")};var o=[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,7,4,13,1,10,6,15,3,12,0,9,5,2,14,11,8,3,10,14,4,9,15,8,1,2,7,0,6,13,11,5,12,1,9,11,10,0,8,12,4,13,3,7,15,14,5,6,2,4,0,5,9,7,12,2,10,14,1,3,8,11,6,15,13],p=[5,14,7,0,9,2,11,4,13,6,15,8,1,10,3,12,6,11,3,7,0,13,5,10,14,15,8,12,4,9,1,2,15,5,1,3,7,14,6,9,11,8,12,2,10,0,4,13,8,6,4,1,3,11,15,0,5,12,2,13,9,7,10,14,12,15,10,4,1,5,8,7,6,2,13,14,0,3,9,11],q=[11,14,15,12,5,8,7,9,11,13,14,15,6,7,9,8,7,6,8,13,11,9,7,15,7,12,15,9,11,7,13,12,11,13,6,7,14,9,13,15,14,8,13,6,5,12,7,5,11,12,14,15,14,15,9,8,9,14,5,6,8,6,5,12,9,15,5,11,6,8,13,12,5,12,13,14,11,8,5,6],r=[8,9,9,11,13,15,15,5,7,7,8,11,14,14,12,6,9,13,15,7,12,8,9,11,7,7,12,7,6,15,13,11,9,7,15,11,8,6,6,14,12,13,5,14,13,13,7,5,15,5,8,11,14,14,6,14,6,9,12,9,12,5,15,8,8,5,12,9,12,5,14,6,8,13,6,5,15,13,11,11]},{"../hash":371}],373:[function(a,b,c){function d(a,b,c){return this instanceof d?(this.Hash=a,this.blockSize=a.blockSize/8,this.outSize=a.outSize/8,this.inner=null,this.outer=null,void this._init(f.toArray(b,c))):new d(a,b,c)}var e=a("../hash"),f=e.utils,g=f.assert;b.exports=d,d.prototype._init=function(a){a.length>this.blockSize&&(a=(new this.Hash).update(a).digest()),g(a.length<=this.blockSize);for(var b=a.length;b<this.blockSize;b++)a.push(0);for(var b=0;b<a.length;b++)a[b]^=54;this.inner=(new this.Hash).update(a);for(var b=0;b<a.length;b++)a[b]^=106;this.outer=(new this.Hash).update(a)},d.prototype.update=function(a,b){return this.inner.update(a,b),this},d.prototype.digest=function(a){return this.outer.update(this.inner.digest()),this.outer.digest(a)}},{"../hash":371}],372:[function(a,b,c){function d(){this.pending=null,this.pendingTotal=0,this.blockSize=this.constructor.blockSize,this.outSize=this.constructor.outSize,this.hmacStrength=this.constructor.hmacStrength,this.padLength=this.constructor.padLength/8,this.endian="big",this._delta8=this.blockSize/8,this._delta32=this.blockSize/32}var e=a("../hash"),f=e.utils,g=f.assert;c.BlockHash=d,d.prototype.update=function(a,b){if(a=f.toArray(a,b),this.pending?this.pending=this.pending.concat(a):this.pending=a,this.pendingTotal+=a.length,this.pending.length>=this._delta8){a=this.pending;var c=a.length%this._delta8;this.pending=a.slice(a.length-c,a.length),0===this.pending.length&&(this.pending=null),a=f.join32(a,0,a.length-c,this.endian);for(var d=0;d<a.length;d+=this._delta32)this._update(a,d,d+this._delta32)}return this},d.prototype.digest=function(a){return this.update(this._pad()),g(null===this.pending),this._digest(a)},d.prototype._pad=function(){var a=this.pendingTotal,b=this._delta8,c=b-(a+this.padLength)%b,d=new Array(c+this.padLength);d[0]=128;for(var e=1;c>e;e++)d[e]=0;if(a<<=3,"big"===this.endian){for(var f=8;f<this.padLength;f++)d[e++]=0;d[e++]=0,d[e++]=0,d[e++]=0,d[e++]=0,d[e++]=a>>>24&255,d[e++]=a>>>16&255,d[e++]=a>>>8&255,d[e++]=255&a}else{d[e++]=255&a,d[e++]=a>>>8&255,d[e++]=a>>>16&255,d[e++]=a>>>24&255,d[e++]=0,d[e++]=0,d[e++]=0,d[e++]=0;for(var f=8;f<this.padLength;f++)d[e++]=0}return d}},{"../hash":371}],368:[function(a,b,c){b.exports={doubles:{step:4,points:[["e60fce93b59e9ec53011aabc21c23e97b2a31369b87a5ae9c44ee89e2a6dec0a","f7e3507399e595929db99f34f57937101296891e44d23f0be1f32cce69616821"],["8282263212c609d9ea2a6e3e172de238d8c39cabd5ac1ca10646e23fd5f51508","11f8a8098557dfe45e8256e830b60ace62d613ac2f7b17bed31b6eaff6e26caf"],["175e159f728b865a72f99cc6c6fc846de0b93833fd2222ed73fce5b551e5b739","d3506e0d9e3c79eba4ef97a51ff71f5eacb5955add24345c6efa6ffee9fed695"],["363d90d447b00c9c99ceac05b6262ee053441c7e55552ffe526bad8f83ff4640","4e273adfc732221953b445397f3363145b9a89008199ecb62003c7f3bee9de9"],["8b4b5f165df3c2be8c6244b5b745638843e4a781a15bcd1b69f79a55dffdf80c","4aad0a6f68d308b4b3fbd7813ab0da04f9e336546162ee56b3eff0c65fd4fd36"],["723cbaa6e5db996d6bf771c00bd548c7b700dbffa6c0e77bcb6115925232fcda","96e867b5595cc498a921137488824d6e2660a0653779494801dc069d9eb39f5f"],["eebfa4d493bebf98ba5feec812c2d3b50947961237a919839a533eca0e7dd7fa","5d9a8ca3970ef0f269ee7edaf178089d9ae4cdc3a711f712ddfd4fdae1de8999"],["100f44da696e71672791d0a09b7bde459f1215a29b3c03bfefd7835b39a48db0","cdd9e13192a00b772ec8f3300c090666b7ff4a18ff5195ac0fbd5cd62bc65a09"],["e1031be262c7ed1b1dc9227a4a04c017a77f8d4464f3b3852c8acde6e534fd2d","9d7061928940405e6bb6a4176597535af292dd419e1ced79a44f18f29456a00d"],["feea6cae46d55b530ac2839f143bd7ec5cf8b266a41d6af52d5e688d9094696d","e57c6b6c97dce1bab06e4e12bf3ecd5c981c8957cc41442d3155debf18090088"],["da67a91d91049cdcb367be4be6ffca3cfeed657d808583de33fa978bc1ec6cb1","9bacaa35481642bc41f463f7ec9780e5dec7adc508f740a17e9ea8e27a68be1d"],["53904faa0b334cdda6e000935ef22151ec08d0f7bb11069f57545ccc1a37b7c0","5bc087d0bc80106d88c9eccac20d3c1c13999981e14434699dcb096b022771c8"],["8e7bcd0bd35983a7719cca7764ca906779b53a043a9b8bcaeff959f43ad86047","10b7770b2a3da4b3940310420ca9514579e88e2e47fd68b3ea10047e8460372a"],["385eed34c1cdff21e6d0818689b81bde71a7f4f18397e6690a841e1599c43862","283bebc3e8ea23f56701de19e9ebf4576b304eec2086dc8cc0458fe5542e5453"],["6f9d9b803ecf191637c73a4413dfa180fddf84a5947fbc9c606ed86c3fac3a7","7c80c68e603059ba69b8e2a30e45c4d47ea4dd2f5c281002d86890603a842160"],["3322d401243c4e2582a2147c104d6ecbf774d163db0f5e5313b7e0e742d0e6bd","56e70797e9664ef5bfb019bc4ddaf9b72805f63ea2873af624f3a2e96c28b2a0"],["85672c7d2de0b7da2bd1770d89665868741b3f9af7643397721d74d28134ab83","7c481b9b5b43b2eb6374049bfa62c2e5e77f17fcc5298f44c8e3094f790313a6"],["948bf809b1988a46b06c9f1919413b10f9226c60f668832ffd959af60c82a0a","53a562856dcb6646dc6b74c5d1c3418c6d4dff08c97cd2bed4cb7f88d8c8e589"],["6260ce7f461801c34f067ce0f02873a8f1b0e44dfc69752accecd819f38fd8e8","bc2da82b6fa5b571a7f09049776a1ef7ecd292238051c198c1a84e95b2b4ae17"],["e5037de0afc1d8d43d8348414bbf4103043ec8f575bfdc432953cc8d2037fa2d","4571534baa94d3b5f9f98d09fb990bddbd5f5b03ec481f10e0e5dc841d755bda"],["e06372b0f4a207adf5ea905e8f1771b4e7e8dbd1c6a6c5b725866a0ae4fce725","7a908974bce18cfe12a27bb2ad5a488cd7484a7787104870b27034f94eee31dd"],["213c7a715cd5d45358d0bbf9dc0ce02204b10bdde2a3f58540ad6908d0559754","4b6dad0b5ae462507013ad06245ba190bb4850f5f36a7eeddff2c27534b458f2"],["4e7c272a7af4b34e8dbb9352a5419a87e2838c70adc62cddf0cc3a3b08fbd53c","17749c766c9d0b18e16fd09f6def681b530b9614bff7dd33e0b3941817dcaae6"],["fea74e3dbe778b1b10f238ad61686aa5c76e3db2be43057632427e2840fb27b6","6e0568db9b0b13297cf674deccb6af93126b596b973f7b77701d3db7f23cb96f"],["76e64113f677cf0e10a2570d599968d31544e179b760432952c02a4417bdde39","c90ddf8dee4e95cf577066d70681f0d35e2a33d2b56d2032b4b1752d1901ac01"],["c738c56b03b2abe1e8281baa743f8f9a8f7cc643df26cbee3ab150242bcbb891","893fb578951ad2537f718f2eacbfbbbb82314eef7880cfe917e735d9699a84c3"],["d895626548b65b81e264c7637c972877d1d72e5f3a925014372e9f6588f6c14b","febfaa38f2bc7eae728ec60818c340eb03428d632bb067e179363ed75d7d991f"],["b8da94032a957518eb0f6433571e8761ceffc73693e84edd49150a564f676e03","2804dfa44805a1e4d7c99cc9762808b092cc584d95ff3b511488e4e74efdf6e7"],["e80fea14441fb33a7d8adab9475d7fab2019effb5156a792f1a11778e3c0df5d","eed1de7f638e00771e89768ca3ca94472d155e80af322ea9fcb4291b6ac9ec78"],["a301697bdfcd704313ba48e51d567543f2a182031efd6915ddc07bbcc4e16070","7370f91cfb67e4f5081809fa25d40f9b1735dbf7c0a11a130c0d1a041e177ea1"],["90ad85b389d6b936463f9d0512678de208cc330b11307fffab7ac63e3fb04ed4","e507a3620a38261affdcbd9427222b839aefabe1582894d991d4d48cb6ef150"],["8f68b9d2f63b5f339239c1ad981f162ee88c5678723ea3351b7b444c9ec4c0da","662a9f2dba063986de1d90c2b6be215dbbea2cfe95510bfdf23cbf79501fff82"],["e4f3fb0176af85d65ff99ff9198c36091f48e86503681e3e6686fd5053231e11","1e63633ad0ef4f1c1661a6d0ea02b7286cc7e74ec951d1c9822c38576feb73bc"],["8c00fa9b18ebf331eb961537a45a4266c7034f2f0d4e1d0716fb6eae20eae29e","efa47267fea521a1a9dc343a3736c974c2fadafa81e36c54e7d2a4c66702414b"],["e7a26ce69dd4829f3e10cec0a9e98ed3143d084f308b92c0997fddfc60cb3e41","2a758e300fa7984b471b006a1aafbb18d0a6b2c0420e83e20e8a9421cf2cfd51"],["b6459e0ee3662ec8d23540c223bcbdc571cbcb967d79424f3cf29eb3de6b80ef","67c876d06f3e06de1dadf16e5661db3c4b3ae6d48e35b2ff30bf0b61a71ba45"],["d68a80c8280bb840793234aa118f06231d6f1fc67e73c5a5deda0f5b496943e8","db8ba9fff4b586d00c4b1f9177b0e28b5b0e7b8f7845295a294c84266b133120"],["324aed7df65c804252dc0270907a30b09612aeb973449cea4095980fc28d3d5d","648a365774b61f2ff130c0c35aec1f4f19213b0c7e332843967224af96ab7c84"],["4df9c14919cde61f6d51dfdbe5fee5dceec4143ba8d1ca888e8bd373fd054c96","35ec51092d8728050974c23a1d85d4b5d506cdc288490192ebac06cad10d5d"],["9c3919a84a474870faed8a9c1cc66021523489054d7f0308cbfc99c8ac1f98cd","ddb84f0f4a4ddd57584f044bf260e641905326f76c64c8e6be7e5e03d4fc599d"],["6057170b1dd12fdf8de05f281d8e06bb91e1493a8b91d4cc5a21382120a959e5","9a1af0b26a6a4807add9a2daf71df262465152bc3ee24c65e899be932385a2a8"],["a576df8e23a08411421439a4518da31880cef0fba7d4df12b1a6973eecb94266","40a6bf20e76640b2c92b97afe58cd82c432e10a7f514d9f3ee8be11ae1b28ec8"],["7778a78c28dec3e30a05fe9629de8c38bb30d1f5cf9a3a208f763889be58ad71","34626d9ab5a5b22ff7098e12f2ff580087b38411ff24ac563b513fc1fd9f43ac"],["928955ee637a84463729fd30e7afd2ed5f96274e5ad7e5cb09eda9c06d903ac","c25621003d3f42a827b78a13093a95eeac3d26efa8a8d83fc5180e935bcd091f"],["85d0fef3ec6db109399064f3a0e3b2855645b4a907ad354527aae75163d82751","1f03648413a38c0be29d496e582cf5663e8751e96877331582c237a24eb1f962"],["ff2b0dce97eece97c1c9b6041798b85dfdfb6d8882da20308f5404824526087e","493d13fef524ba188af4c4dc54d07936c7b7ed6fb90e2ceb2c951e01f0c29907"],["827fbbe4b1e880ea9ed2b2e6301b212b57f1ee148cd6dd28780e5e2cf856e241","c60f9c923c727b0b71bef2c67d1d12687ff7a63186903166d605b68baec293ec"],["eaa649f21f51bdbae7be4ae34ce6e5217a58fdce7f47f9aa7f3b58fa2120e2b3","be3279ed5bbbb03ac69a80f89879aa5a01a6b965f13f7e59d47a5305ba5ad93d"],["e4a42d43c5cf169d9391df6decf42ee541b6d8f0c9a137401e23632dda34d24f","4d9f92e716d1c73526fc99ccfb8ad34ce886eedfa8d8e4f13a7f7131deba9414"],["1ec80fef360cbdd954160fadab352b6b92b53576a88fea4947173b9d4300bf19","aeefe93756b5340d2f3a4958a7abbf5e0146e77f6295a07b671cdc1cc107cefd"],["146a778c04670c2f91b00af4680dfa8bce3490717d58ba889ddb5928366642be","b318e0ec3354028add669827f9d4b2870aaa971d2f7e5ed1d0b297483d83efd0"],["fa50c0f61d22e5f07e3acebb1aa07b128d0012209a28b9776d76a8793180eef9","6b84c6922397eba9b72cd2872281a68a5e683293a57a213b38cd8d7d3f4f2811"],["da1d61d0ca721a11b1a5bf6b7d88e8421a288ab5d5bba5220e53d32b5f067ec2","8157f55a7c99306c79c0766161c91e2966a73899d279b48a655fba0f1ad836f1"],["a8e282ff0c9706907215ff98e8fd416615311de0446f1e062a73b0610d064e13","7f97355b8db81c09abfb7f3c5b2515888b679a3e50dd6bd6cef7c73111f4cc0c"],["174a53b9c9a285872d39e56e6913cab15d59b1fa512508c022f382de8319497c","ccc9dc37abfc9c1657b4155f2c47f9e6646b3a1d8cb9854383da13ac079afa73"],["959396981943785c3d3e57edf5018cdbe039e730e4918b3d884fdff09475b7ba","2e7e552888c331dd8ba0386a4b9cd6849c653f64c8709385e9b8abf87524f2fd"],["d2a63a50ae401e56d645a1153b109a8fcca0a43d561fba2dbb51340c9d82b151","e82d86fb6443fcb7565aee58b2948220a70f750af484ca52d4142174dcf89405"],["64587e2335471eb890ee7896d7cfdc866bacbdbd3839317b3436f9b45617e073","d99fcdd5bf6902e2ae96dd6447c299a185b90a39133aeab358299e5e9faf6589"],["8481bde0e4e4d885b3a546d3e549de042f0aa6cea250e7fd358d6c86dd45e458","38ee7b8cba5404dd84a25bf39cecb2ca900a79c42b262e556d64b1b59779057e"],["13464a57a78102aa62b6979ae817f4637ffcfed3c4b1ce30bcd6303f6caf666b","69be159004614580ef7e433453ccb0ca48f300a81d0942e13f495a907f6ecc27"],["bc4a9df5b713fe2e9aef430bcc1dc97a0cd9ccede2f28588cada3a0d2d83f366","d3a81ca6e785c06383937adf4b798caa6e8a9fbfa547b16d758d666581f33c1"],["8c28a97bf8298bc0d23d8c749452a32e694b65e30a9472a3954ab30fe5324caa","40a30463a3305193378fedf31f7cc0eb7ae784f0451cb9459e71dc73cbef9482"],["8ea9666139527a8c1dd94ce4f071fd23c8b350c5a4bb33748c4ba111faccae0","620efabbc8ee2782e24e7c0cfb95c5d735b783be9cf0f8e955af34a30e62b945"],["dd3625faef5ba06074669716bbd3788d89bdde815959968092f76cc4eb9a9787","7a188fa3520e30d461da2501045731ca941461982883395937f68d00c644a573"],["f710d79d9eb962297e4f6232b40e8f7feb2bc63814614d692c12de752408221e","ea98e67232d3b3295d3b535532115ccac8612c721851617526ae47a9c77bfc82"]]},naf:{wnd:7,points:[["f9308a019258c31049344f85f89d5229b531c845836f99b08601f113bce036f9","388f7b0f632de8140fe337e62a37f3566500a99934c2231b6cb9fd7584b8e672"],["2f8bde4d1a07209355b4a7250a5c5128e88b84bddc619ab7cba8d569b240efe4","d8ac222636e5e3d6d4dba9dda6c9c426f788271bab0d6840dca87d3aa6ac62d6"],["5cbdf0646e5db4eaa398f365f2ea7a0e3d419b7e0330e39ce92bddedcac4f9bc","6aebca40ba255960a3178d6d861a54dba813d0b813fde7b5a5082628087264da"],["acd484e2f0c7f65309ad178a9f559abde09796974c57e714c35f110dfc27ccbe","cc338921b0a7d9fd64380971763b61e9add888a4375f8e0f05cc262ac64f9c37"],["774ae7f858a9411e5ef4246b70c65aac5649980be5c17891bbec17895da008cb","d984a032eb6b5e190243dd56d7b7b365372db1e2dff9d6a8301d74c9c953c61b"],["f28773c2d975288bc7d1d205c3748651b075fbc6610e58cddeeddf8f19405aa8","ab0902e8d880a89758212eb65cdaf473a1a06da521fa91f29b5cb52db03ed81"],["d7924d4f7d43ea965a465ae3095ff41131e5946f3c85f79e44adbcf8e27e080e","581e2872a86c72a683842ec228cc6defea40af2bd896d3a5c504dc9ff6a26b58"],["defdea4cdb677750a420fee807eacf21eb9898ae79b9768766e4faa04a2d4a34","4211ab0694635168e997b0ead2a93daeced1f4a04a95c0f6cfb199f69e56eb77"],["2b4ea0a797a443d293ef5cff444f4979f06acfebd7e86d277475656138385b6c","85e89bc037945d93b343083b5a1c86131a01f60c50269763b570c854e5c09b7a"],["352bbf4a4cdd12564f93fa332ce333301d9ad40271f8107181340aef25be59d5","321eb4075348f534d59c18259dda3e1f4a1b3b2e71b1039c67bd3d8bcf81998c"],["2fa2104d6b38d11b0230010559879124e42ab8dfeff5ff29dc9cdadd4ecacc3f","2de1068295dd865b64569335bd5dd80181d70ecfc882648423ba76b532b7d67"],["9248279b09b4d68dab21a9b066edda83263c3d84e09572e269ca0cd7f5453714","73016f7bf234aade5d1aa71bdea2b1ff3fc0de2a887912ffe54a32ce97cb3402"],["daed4f2be3a8bf278e70132fb0beb7522f570e144bf615c07e996d443dee8729","a69dce4a7d6c98e8d4a1aca87ef8d7003f83c230f3afa726ab40e52290be1c55"],["c44d12c7065d812e8acf28d7cbb19f9011ecd9e9fdf281b0e6a3b5e87d22e7db","2119a460ce326cdc76c45926c982fdac0e106e861edf61c5a039063f0e0e6482"],["6a245bf6dc698504c89a20cfded60853152b695336c28063b61c65cbd269e6b4","e022cf42c2bd4a708b3f5126f16a24ad8b33ba48d0423b6efd5e6348100d8a82"],["1697ffa6fd9de627c077e3d2fe541084ce13300b0bec1146f95ae57f0d0bd6a5","b9c398f186806f5d27561506e4557433a2cf15009e498ae7adee9d63d01b2396"],["605bdb019981718b986d0f07e834cb0d9deb8360ffb7f61df982345ef27a7479","2972d2de4f8d20681a78d93ec96fe23c26bfae84fb14db43b01e1e9056b8c49"],["62d14dab4150bf497402fdc45a215e10dcb01c354959b10cfe31c7e9d87ff33d","80fc06bd8cc5b01098088a1950eed0db01aa132967ab472235f5642483b25eaf"],["80c60ad0040f27dade5b4b06c408e56b2c50e9f56b9b8b425e555c2f86308b6f","1c38303f1cc5c30f26e66bad7fe72f70a65eed4cbe7024eb1aa01f56430bd57a"],["7a9375ad6167ad54aa74c6348cc54d344cc5dc9487d847049d5eabb0fa03c8fb","d0e3fa9eca8726909559e0d79269046bdc59ea10c70ce2b02d499ec224dc7f7"],["d528ecd9b696b54c907a9ed045447a79bb408ec39b68df504bb51f459bc3ffc9","eecf41253136e5f99966f21881fd656ebc4345405c520dbc063465b521409933"],["49370a4b5f43412ea25f514e8ecdad05266115e4a7ecb1387231808f8b45963","758f3f41afd6ed428b3081b0512fd62a54c3f3afbb5b6764b653052a12949c9a"],["77f230936ee88cbbd73df930d64702ef881d811e0e1498e2f1c13eb1fc345d74","958ef42a7886b6400a08266e9ba1b37896c95330d97077cbbe8eb3c7671c60d6"],["f2dac991cc4ce4b9ea44887e5c7c0bce58c80074ab9d4dbaeb28531b7739f530","e0dedc9b3b2f8dad4da1f32dec2531df9eb5fbeb0598e4fd1a117dba703a3c37"],["463b3d9f662621fb1b4be8fbbe2520125a216cdfc9dae3debcba4850c690d45b","5ed430d78c296c3543114306dd8622d7c622e27c970a1de31cb377b01af7307e"],["f16f804244e46e2a09232d4aff3b59976b98fac14328a2d1a32496b49998f247","cedabd9b82203f7e13d206fcdf4e33d92a6c53c26e5cce26d6579962c4e31df6"],["caf754272dc84563b0352b7a14311af55d245315ace27c65369e15f7151d41d1","cb474660ef35f5f2a41b643fa5e460575f4fa9b7962232a5c32f908318a04476"],["2600ca4b282cb986f85d0f1709979d8b44a09c07cb86d7c124497bc86f082120","4119b88753c15bd6a693b03fcddbb45d5ac6be74ab5f0ef44b0be9475a7e4b40"],["7635ca72d7e8432c338ec53cd12220bc01c48685e24f7dc8c602a7746998e435","91b649609489d613d1d5e590f78e6d74ecfc061d57048bad9e76f302c5b9c61"],["754e3239f325570cdbbf4a87deee8a66b7f2b33479d468fbc1a50743bf56cc18","673fb86e5bda30fb3cd0ed304ea49a023ee33d0197a695d0c5d98093c536683"],["e3e6bd1071a1e96aff57859c82d570f0330800661d1c952f9fe2694691d9b9e8","59c9e0bba394e76f40c0aa58379a3cb6a5a2283993e90c4167002af4920e37f5"],["186b483d056a033826ae73d88f732985c4ccb1f32ba35f4b4cc47fdcf04aa6eb","3b952d32c67cf77e2e17446e204180ab21fb8090895138b4a4a797f86e80888b"],["df9d70a6b9876ce544c98561f4be4f725442e6d2b737d9c91a8321724ce0963f","55eb2dafd84d6ccd5f862b785dc39d4ab157222720ef9da217b8c45cf2ba2417"],["5edd5cc23c51e87a497ca815d5dce0f8ab52554f849ed8995de64c5f34ce7143","efae9c8dbc14130661e8cec030c89ad0c13c66c0d17a2905cdc706ab7399a868"],["290798c2b6476830da12fe02287e9e777aa3fba1c355b17a722d362f84614fba","e38da76dcd440621988d00bcf79af25d5b29c094db2a23146d003afd41943e7a"],["af3c423a95d9f5b3054754efa150ac39cd29552fe360257362dfdecef4053b45","f98a3fd831eb2b749a93b0e6f35cfb40c8cd5aa667a15581bc2feded498fd9c6"],["766dbb24d134e745cccaa28c99bf274906bb66b26dcf98df8d2fed50d884249a","744b1152eacbe5e38dcc887980da38b897584a65fa06cedd2c924f97cbac5996"],["59dbf46f8c94759ba21277c33784f41645f7b44f6c596a58ce92e666191abe3e","c534ad44175fbc300f4ea6ce648309a042ce739a7919798cd85e216c4a307f6e"],["f13ada95103c4537305e691e74e9a4a8dd647e711a95e73cb62dc6018cfd87b8","e13817b44ee14de663bf4bc808341f326949e21a6a75c2570778419bdaf5733d"],["7754b4fa0e8aced06d4167a2c59cca4cda1869c06ebadfb6488550015a88522c","30e93e864e669d82224b967c3020b8fa8d1e4e350b6cbcc537a48b57841163a2"],["948dcadf5990e048aa3874d46abef9d701858f95de8041d2a6828c99e2262519","e491a42537f6e597d5d28a3224b1bc25df9154efbd2ef1d2cbba2cae5347d57e"],["7962414450c76c1689c7b48f8202ec37fb224cf5ac0bfa1570328a8a3d7c77ab","100b610ec4ffb4760d5c1fc133ef6f6b12507a051f04ac5760afa5b29db83437"],["3514087834964b54b15b160644d915485a16977225b8847bb0dd085137ec47ca","ef0afbb2056205448e1652c48e8127fc6039e77c15c2378b7e7d15a0de293311"],["d3cc30ad6b483e4bc79ce2c9dd8bc54993e947eb8df787b442943d3f7b527eaf","8b378a22d827278d89c5e9be8f9508ae3c2ad46290358630afb34db04eede0a4"],["1624d84780732860ce1c78fcbfefe08b2b29823db913f6493975ba0ff4847610","68651cf9b6da903e0914448c6cd9d4ca896878f5282be4c8cc06e2a404078575"],["733ce80da955a8a26902c95633e62a985192474b5af207da6df7b4fd5fc61cd4","f5435a2bd2badf7d485a4d8b8db9fcce3e1ef8e0201e4578c54673bc1dc5ea1d"],["15d9441254945064cf1a1c33bbd3b49f8966c5092171e699ef258dfab81c045c","d56eb30b69463e7234f5137b73b84177434800bacebfc685fc37bbe9efe4070d"],["a1d0fcf2ec9de675b612136e5ce70d271c21417c9d2b8aaaac138599d0717940","edd77f50bcb5a3cab2e90737309667f2641462a54070f3d519212d39c197a629"],["e22fbe15c0af8ccc5780c0735f84dbe9a790badee8245c06c7ca37331cb36980","a855babad5cd60c88b430a69f53a1a7a38289154964799be43d06d77d31da06"],["311091dd9860e8e20ee13473c1155f5f69635e394704eaa74009452246cfa9b3","66db656f87d1f04fffd1f04788c06830871ec5a64feee685bd80f0b1286d8374"],["34c1fd04d301be89b31c0442d3e6ac24883928b45a9340781867d4232ec2dbdf","9414685e97b1b5954bd46f730174136d57f1ceeb487443dc5321857ba73abee"],["f219ea5d6b54701c1c14de5b557eb42a8d13f3abbcd08affcc2a5e6b049b8d63","4cb95957e83d40b0f73af4544cccf6b1f4b08d3c07b27fb8d8c2962a400766d1"],["d7b8740f74a8fbaab1f683db8f45de26543a5490bca627087236912469a0b448","fa77968128d9c92ee1010f337ad4717eff15db5ed3c049b3411e0315eaa4593b"],["32d31c222f8f6f0ef86f7c98d3a3335ead5bcd32abdd94289fe4d3091aa824bf","5f3032f5892156e39ccd3d7915b9e1da2e6dac9e6f26e961118d14b8462e1661"],["7461f371914ab32671045a155d9831ea8793d77cd59592c4340f86cbc18347b5","8ec0ba238b96bec0cbdddcae0aa442542eee1ff50c986ea6b39847b3cc092ff6"],["ee079adb1df1860074356a25aa38206a6d716b2c3e67453d287698bad7b2b2d6","8dc2412aafe3be5c4c5f37e0ecc5f9f6a446989af04c4e25ebaac479ec1c8c1e"],["16ec93e447ec83f0467b18302ee620f7e65de331874c9dc72bfd8616ba9da6b5","5e4631150e62fb40d0e8c2a7ca5804a39d58186a50e497139626778e25b0674d"],["eaa5f980c245f6f038978290afa70b6bd8855897f98b6aa485b96065d537bd99","f65f5d3e292c2e0819a528391c994624d784869d7e6ea67fb18041024edc07dc"],["78c9407544ac132692ee1910a02439958ae04877151342ea96c4b6b35a49f51","f3e0319169eb9b85d5404795539a5e68fa1fbd583c064d2462b675f194a3ddb4"],["494f4be219a1a77016dcd838431aea0001cdc8ae7a6fc688726578d9702857a5","42242a969283a5f339ba7f075e36ba2af925ce30d767ed6e55f4b031880d562c"],["a598a8030da6d86c6bc7f2f5144ea549d28211ea58faa70ebf4c1e665c1fe9b5","204b5d6f84822c307e4b4a7140737aec23fc63b65b35f86a10026dbd2d864e6b"],["c41916365abb2b5d09192f5f2dbeafec208f020f12570a184dbadc3e58595997","4f14351d0087efa49d245b328984989d5caf9450f34bfc0ed16e96b58fa9913"],["841d6063a586fa475a724604da03bc5b92a2e0d2e0a36acfe4c73a5514742881","73867f59c0659e81904f9a1c7543698e62562d6744c169ce7a36de01a8d6154"],["5e95bb399a6971d376026947f89bde2f282b33810928be4ded112ac4d70e20d5","39f23f366809085beebfc71181313775a99c9aed7d8ba38b161384c746012865"],["36e4641a53948fd476c39f8a99fd974e5ec07564b5315d8bf99471bca0ef2f66","d2424b1b1abe4eb8164227b085c9aa9456ea13493fd563e06fd51cf5694c78fc"],["336581ea7bfbbb290c191a2f507a41cf5643842170e914faeab27c2c579f726","ead12168595fe1be99252129b6e56b3391f7ab1410cd1e0ef3dcdcabd2fda224"],["8ab89816dadfd6b6a1f2634fcf00ec8403781025ed6890c4849742706bd43ede","6fdcef09f2f6d0a044e654aef624136f503d459c3e89845858a47a9129cdd24e"],["1e33f1a746c9c5778133344d9299fcaa20b0938e8acff2544bb40284b8c5fb94","60660257dd11b3aa9c8ed618d24edff2306d320f1d03010e33a7d2057f3b3b6"],["85b7c1dcb3cec1b7ee7f30ded79dd20a0ed1f4cc18cbcfcfa410361fd8f08f31","3d98a9cdd026dd43f39048f25a8847f4fcafad1895d7a633c6fed3c35e999511"],["29df9fbd8d9e46509275f4b125d6d45d7fbe9a3b878a7af872a2800661ac5f51","b4c4fe99c775a606e2d8862179139ffda61dc861c019e55cd2876eb2a27d84b"],["a0b1cae06b0a847a3fea6e671aaf8adfdfe58ca2f768105c8082b2e449fce252","ae434102edde0958ec4b19d917a6a28e6b72da1834aff0e650f049503a296cf2"],["4e8ceafb9b3e9a136dc7ff67e840295b499dfb3b2133e4ba113f2e4c0e121e5","cf2174118c8b6d7a4b48f6d534ce5c79422c086a63460502b827ce62a326683c"],["d24a44e047e19b6f5afb81c7ca2f69080a5076689a010919f42725c2b789a33b","6fb8d5591b466f8fc63db50f1c0f1c69013f996887b8244d2cdec417afea8fa3"],["ea01606a7a6c9cdd249fdfcfacb99584001edd28abbab77b5104e98e8e3b35d4","322af4908c7312b0cfbfe369f7a7b3cdb7d4494bc2823700cfd652188a3ea98d"],["af8addbf2b661c8a6c6328655eb96651252007d8c5ea31be4ad196de8ce2131f","6749e67c029b85f52a034eafd096836b2520818680e26ac8f3dfbcdb71749700"],["e3ae1974566ca06cc516d47e0fb165a674a3dabcfca15e722f0e3450f45889","2aeabe7e4531510116217f07bf4d07300de97e4874f81f533420a72eeb0bd6a4"],["591ee355313d99721cf6993ffed1e3e301993ff3ed258802075ea8ced397e246","b0ea558a113c30bea60fc4775460c7901ff0b053d25ca2bdeee98f1a4be5d196"],["11396d55fda54c49f19aa97318d8da61fa8584e47b084945077cf03255b52984","998c74a8cd45ac01289d5833a7beb4744ff536b01b257be4c5767bea93ea57a4"],["3c5d2a1ba39c5a1790000738c9e0c40b8dcdfd5468754b6405540157e017aa7a","b2284279995a34e2f9d4de7396fc18b80f9b8b9fdd270f6661f79ca4c81bd257"],["cc8704b8a60a0defa3a99a7299f2e9c3fbc395afb04ac078425ef8a1793cc030","bdd46039feed17881d1e0862db347f8cf395b74fc4bcdc4e940b74e3ac1f1b13"],["c533e4f7ea8555aacd9777ac5cad29b97dd4defccc53ee7ea204119b2889b197","6f0a256bc5efdf429a2fb6242f1a43a2d9b925bb4a4b3a26bb8e0f45eb596096"],["c14f8f2ccb27d6f109f6d08d03cc96a69ba8c34eec07bbcf566d48e33da6593","c359d6923bb398f7fd4473e16fe1c28475b740dd098075e6c0e8649113dc3a38"],["a6cbc3046bc6a450bac24789fa17115a4c9739ed75f8f21ce441f72e0b90e6ef","21ae7f4680e889bb130619e2c0f95a360ceb573c70603139862afd617fa9b9f"],["347d6d9a02c48927ebfb86c1359b1caf130a3c0267d11ce6344b39f99d43cc38","60ea7f61a353524d1c987f6ecec92f086d565ab687870cb12689ff1e31c74448"],["da6545d2181db8d983f7dcb375ef5866d47c67b1bf31c8cf855ef7437b72656a","49b96715ab6878a79e78f07ce5680c5d6673051b4935bd897fea824b77dc208a"],["c40747cc9d012cb1a13b8148309c6de7ec25d6945d657146b9d5994b8feb1111","5ca560753be2a12fc6de6caf2cb489565db936156b9514e1bb5e83037e0fa2d4"],["4e42c8ec82c99798ccf3a610be870e78338c7f713348bd34c8203ef4037f3502","7571d74ee5e0fb92a7a8b33a07783341a5492144cc54bcc40a94473693606437"],["3775ab7089bc6af823aba2e1af70b236d251cadb0c86743287522a1b3b0dedea","be52d107bcfa09d8bcb9736a828cfa7fac8db17bf7a76a2c42ad961409018cf7"],["cee31cbf7e34ec379d94fb814d3d775ad954595d1314ba8846959e3e82f74e26","8fd64a14c06b589c26b947ae2bcf6bfa0149ef0be14ed4d80f448a01c43b1c6d"],["b4f9eaea09b6917619f6ea6a4eb5464efddb58fd45b1ebefcdc1a01d08b47986","39e5c9925b5a54b07433a4f18c61726f8bb131c012ca542eb24a8ac07200682a"],["d4263dfc3d2df923a0179a48966d30ce84e2515afc3dccc1b77907792ebcc60e","62dfaf07a0f78feb30e30d6295853ce189e127760ad6cf7fae164e122a208d54"],["48457524820fa65a4f8d35eb6930857c0032acc0a4a2de422233eeda897612c4","25a748ab367979d98733c38a1fa1c2e7dc6cc07db2d60a9ae7a76aaa49bd0f77"],["dfeeef1881101f2cb11644f3a2afdfc2045e19919152923f367a1767c11cceda","ecfb7056cf1de042f9420bab396793c0c390bde74b4bbdff16a83ae09a9a7517"],["6d7ef6b17543f8373c573f44e1f389835d89bcbc6062ced36c82df83b8fae859","cd450ec335438986dfefa10c57fea9bcc521a0959b2d80bbf74b190dca712d10"],["e75605d59102a5a2684500d3b991f2e3f3c88b93225547035af25af66e04541f","f5c54754a8f71ee540b9b48728473e314f729ac5308b06938360990e2bfad125"],["eb98660f4c4dfaa06a2be453d5020bc99a0c2e60abe388457dd43fefb1ed620c","6cb9a8876d9cb8520609af3add26cd20a0a7cd8a9411131ce85f44100099223e"],["13e87b027d8514d35939f2e6892b19922154596941888336dc3563e3b8dba942","fef5a3c68059a6dec5d624114bf1e91aac2b9da568d6abeb2570d55646b8adf1"],["ee163026e9fd6fe017c38f06a5be6fc125424b371ce2708e7bf4491691e5764a","1acb250f255dd61c43d94ccc670d0f58f49ae3fa15b96623e5430da0ad6c62b2"],["b268f5ef9ad51e4d78de3a750c2dc89b1e626d43505867999932e5db33af3d80","5f310d4b3c99b9ebb19f77d41c1dee018cf0d34fd4191614003e945a1216e423"],["ff07f3118a9df035e9fad85eb6c7bfe42b02f01ca99ceea3bf7ffdba93c4750d","438136d603e858a3a5c440c38eccbaddc1d2942114e2eddd4740d098ced1f0d8"],["8d8b9855c7c052a34146fd20ffb658bea4b9f69e0d825ebec16e8c3ce2b526a1","cdb559eedc2d79f926baf44fb84ea4d44bcf50fee51d7ceb30e2e7f463036758"],["52db0b5384dfbf05bfa9d472d7ae26dfe4b851ceca91b1eba54263180da32b63","c3b997d050ee5d423ebaf66a6db9f57b3180c902875679de924b69d84a7b375"],["e62f9490d3d51da6395efd24e80919cc7d0f29c3f3fa48c6fff543becbd43352","6d89ad7ba4876b0b22c2ca280c682862f342c8591f1daf5170e07bfd9ccafa7d"],["7f30ea2476b399b4957509c88f77d0191afa2ff5cb7b14fd6d8e7d65aaab1193","ca5ef7d4b231c94c3b15389a5f6311e9daff7bb67b103e9880ef4bff637acaec"],["5098ff1e1d9f14fb46a210fada6c903fef0fb7b4a1dd1d9ac60a0361800b7a00","9731141d81fc8f8084d37c6e7542006b3ee1b40d60dfe5362a5b132fd17ddc0"],["32b78c7de9ee512a72895be6b9cbefa6e2f3c4ccce445c96b9f2c81e2778ad58","ee1849f513df71e32efc3896ee28260c73bb80547ae2275ba497237794c8753c"],["e2cb74fddc8e9fbcd076eef2a7c72b0ce37d50f08269dfc074b581550547a4f7","d3aa2ed71c9dd2247a62df062736eb0baddea9e36122d2be8641abcb005cc4a4"],["8438447566d4d7bedadc299496ab357426009a35f235cb141be0d99cd10ae3a8","c4e1020916980a4da5d01ac5e6ad330734ef0d7906631c4f2390426b2edd791f"],["4162d488b89402039b584c6fc6c308870587d9c46f660b878ab65c82c711d67e","67163e903236289f776f22c25fb8a3afc1732f2b84b4e95dbda47ae5a0852649"],["3fad3fa84caf0f34f0f89bfd2dcf54fc175d767aec3e50684f3ba4a4bf5f683d","cd1bc7cb6cc407bb2f0ca647c718a730cf71872e7d0d2a53fa20efcdfe61826"],["674f2600a3007a00568c1a7ce05d0816c1fb84bf1370798f1c69532faeb1a86b","299d21f9413f33b3edf43b257004580b70db57da0b182259e09eecc69e0d38a5"],["d32f4da54ade74abb81b815ad1fb3b263d82d6c692714bcff87d29bd5ee9f08f","f9429e738b8e53b968e99016c059707782e14f4535359d582fc416910b3eea87"],["30e4e670435385556e593657135845d36fbb6931f72b08cb1ed954f1e3ce3ff6","462f9bce619898638499350113bbc9b10a878d35da70740dc695a559eb88db7b"],["be2062003c51cc3004682904330e4dee7f3dcd10b01e580bf1971b04d4cad297","62188bc49d61e5428573d48a74e1c655b1c61090905682a0d5558ed72dccb9bc"],["93144423ace3451ed29e0fb9ac2af211cb6e84a601df5993c419859fff5df04a","7c10dfb164c3425f5c71a3f9d7992038f1065224f72bb9d1d902a6d13037b47c"],["b015f8044f5fcbdcf21ca26d6c34fb8197829205c7b7d2a7cb66418c157b112c","ab8c1e086d04e813744a655b2df8d5f83b3cdc6faa3088c1d3aea1454e3a1d5f"],["d5e9e1da649d97d89e4868117a465a3a4f8a18de57a140d36b3f2af341a21b52","4cb04437f391ed73111a13cc1d4dd0db1693465c2240480d8955e8592f27447a"],["d3ae41047dd7ca065dbf8ed77b992439983005cd72e16d6f996a5316d36966bb","bd1aeb21ad22ebb22a10f0303417c6d964f8cdd7df0aca614b10dc14d125ac46"],["463e2763d885f958fc66cdd22800f0a487197d0a82e377b49f80af87c897b065","bfefacdb0e5d0fd7df3a311a94de062b26b80c61fbc97508b79992671ef7ca7f"],["7985fdfd127c0567c6f53ec1bb63ec3158e597c40bfe747c83cddfc910641917","603c12daf3d9862ef2b25fe1de289aed24ed291e0ec6708703a5bd567f32ed03"],["74a1ad6b5f76e39db2dd249410eac7f99e74c59cb83d2d0ed5ff1543da7703e9","cc6157ef18c9c63cd6193d83631bbea0093e0968942e8c33d5737fd790e0db08"],["30682a50703375f602d416664ba19b7fc9bab42c72747463a71d0896b22f6da3","553e04f6b018b4fa6c8f39e7f311d3176290d0e0f19ca73f17714d9977a22ff8"],["9e2158f0d7c0d5f26c3791efefa79597654e7a2b2464f52b1ee6c1347769ef57","712fcdd1b9053f09003a3481fa7762e9ffd7c8ef35a38509e2fbf2629008373"],["176e26989a43c9cfeba4029c202538c28172e566e3c4fce7322857f3be327d66","ed8cc9d04b29eb877d270b4878dc43c19aefd31f4eee09ee7b47834c1fa4b1c3"],["75d46efea3771e6e68abb89a13ad747ecf1892393dfc4f1b7004788c50374da8","9852390a99507679fd0b86fd2b39a868d7efc22151346e1a3ca4726586a6bed8"],["809a20c67d64900ffb698c4c825f6d5f2310fb0451c869345b7319f645605721","9e994980d9917e22b76b061927fa04143d096ccc54963e6a5ebfa5f3f8e286c1"],["1b38903a43f7f114ed4500b4eac7083fdefece1cf29c63528d563446f972c180","4036edc931a60ae889353f77fd53de4a2708b26b6f5da72ad3394119daf408f9"]]}}},{}],360:[function(a,b,c){"use strict";var d=c;d.base=a("./base"),d["short"]=a("./short"),d.mont=a("./mont"),d.edwards=a("./edwards")},{"./base":358,"./edwards":359,"./mont":361,"./short":362}],362:[function(a,b,c){"use strict";function d(a){k.call(this,"short",a),this.a=new i(a.a,16).toRed(this.red),this.b=new i(a.b,16).toRed(this.red),this.tinv=this.two.redInvm(),this.zeroA=0===this.a.fromRed().cmpn(0),this.threeA=0===this.a.fromRed().sub(this.p).cmpn(-3),this.endo=this._getEndomorphism(a),this._endoWnafT1=new Array(4),this._endoWnafT2=new Array(4)}function e(a,b,c,d){k.BasePoint.call(this,a,"affine"),null===b&&null===c?(this.x=null,this.y=null,this.inf=!0):(this.x=new i(b,16),this.y=new i(c,16),d&&(this.x.forceRed(this.curve.red),
this.y.forceRed(this.curve.red)),this.x.red||(this.x=this.x.toRed(this.curve.red)),this.y.red||(this.y=this.y.toRed(this.curve.red)),this.inf=!1)}function f(a,b,c,d){k.BasePoint.call(this,a,"jacobian"),null===b&&null===c&&null===d?(this.x=this.curve.one,this.y=this.curve.one,this.z=new i(0)):(this.x=new i(b,16),this.y=new i(c,16),this.z=new i(d,16)),this.x.red||(this.x=this.x.toRed(this.curve.red)),this.y.red||(this.y=this.y.toRed(this.curve.red)),this.z.red||(this.z=this.z.toRed(this.curve.red)),this.zOne=this.z===this.curve.one}var g=a("../curve"),h=a("../../elliptic"),i=a("bn.js"),j=a("inherits"),k=g.base,l=h.utils.assert;j(d,k),b.exports=d,d.prototype._getEndomorphism=function(a){if(this.zeroA&&this.g&&this.n&&1===this.p.modn(3)){var b,c;if(a.beta)b=new i(a.beta,16).toRed(this.red);else{var d=this._getEndoRoots(this.p);b=d[0].cmp(d[1])<0?d[0]:d[1],b=b.toRed(this.red)}if(a.lambda)c=new i(a.lambda,16);else{var e=this._getEndoRoots(this.n);0===this.g.mul(e[0]).x.cmp(this.g.x.redMul(b))?c=e[0]:(c=e[1],l(0===this.g.mul(c).x.cmp(this.g.x.redMul(b))))}var f;return f=a.basis?a.basis.map(function(a){return{a:new i(a.a,16),b:new i(a.b,16)}}):this._getEndoBasis(c),{beta:b,lambda:c,basis:f}}},d.prototype._getEndoRoots=function(a){var b=a===this.p?this.red:i.mont(a),c=new i(2).toRed(b).redInvm(),d=c.redNeg(),e=new i(3).toRed(b).redNeg().redSqrt().redMul(c),f=d.redAdd(e).fromRed(),g=d.redSub(e).fromRed();return[f,g]},d.prototype._getEndoBasis=function(a){for(var b,c,d,e,f,g,h,j,k,l=this.n.shrn(Math.floor(this.n.bitLength()/2)),m=a,n=this.n.clone(),o=new i(1),p=new i(0),q=new i(0),r=new i(1),s=0;0!==m.cmpn(0);){var t=n.div(m);j=n.sub(t.mul(m)),k=q.sub(t.mul(o));var u=r.sub(t.mul(p));if(!d&&j.cmp(l)<0)b=h.neg(),c=o,d=j.neg(),e=k;else if(d&&2===++s)break;h=j,n=m,m=j,q=o,o=k,r=p,p=u}f=j.neg(),g=k;var v=d.sqr().add(e.sqr()),w=f.sqr().add(g.sqr());return w.cmp(v)>=0&&(f=b,g=c),d.sign&&(d=d.neg(),e=e.neg()),f.sign&&(f=f.neg(),g=g.neg()),[{a:d,b:e},{a:f,b:g}]},d.prototype._endoSplit=function(a){var b=this.endo.basis,c=b[0],d=b[1],e=d.b.mul(a).divRound(this.n),f=c.b.neg().mul(a).divRound(this.n),g=e.mul(c.a),h=f.mul(d.a),i=e.mul(c.b),j=f.mul(d.b),k=a.sub(g).sub(h),l=i.add(j).neg();return{k1:k,k2:l}},d.prototype.pointFromX=function(a,b){b=new i(b,16),b.red||(b=b.toRed(this.red));var c=b.redSqr().redMul(b).redIAdd(b.redMul(this.a)).redIAdd(this.b),d=c.redSqrt(),e=d.fromRed().isOdd();return(a&&!e||!a&&e)&&(d=d.redNeg()),this.point(b,d)},d.prototype.validate=function(a){if(a.inf)return!0;var b=a.x,c=a.y,d=this.a.redMul(b),e=b.redSqr().redMul(b).redIAdd(d).redIAdd(this.b);return 0===c.redSqr().redISub(e).cmpn(0)},d.prototype._endoWnafMulAdd=function(a,b){for(var c=this._endoWnafT1,d=this._endoWnafT2,e=0;e<a.length;e++){var f=this._endoSplit(b[e]),g=a[e],h=g._getBeta();f.k1.sign&&(f.k1.sign=!f.k1.sign,g=g.neg(!0)),f.k2.sign&&(f.k2.sign=!f.k2.sign,h=h.neg(!0)),c[2*e]=g,c[2*e+1]=h,d[2*e]=f.k1,d[2*e+1]=f.k2}for(var i=this._wnafMulAdd(1,c,d,2*e),j=0;2*e>j;j++)c[j]=null,d[j]=null;return i},j(e,k.BasePoint),d.prototype.point=function(a,b,c){return new e(this,a,b,c)},d.prototype.pointFromJSON=function(a,b){return e.fromJSON(this,a,b)},e.prototype._getBeta=function(){if(this.curve.endo){var a=this.precomputed;if(a&&a.beta)return a.beta;var b=this.curve.point(this.x.redMul(this.curve.endo.beta),this.y);if(a){var c=this.curve,d=function(a){return c.point(a.x.redMul(c.endo.beta),a.y)};a.beta=b,b.precomputed={beta:null,naf:a.naf&&{wnd:a.naf.wnd,points:a.naf.points.map(d)},doubles:a.doubles&&{step:a.doubles.step,points:a.doubles.points.map(d)}}}return b}},e.prototype.toJSON=function(){return this.precomputed?[this.x,this.y,this.precomputed&&{doubles:this.precomputed.doubles&&{step:this.precomputed.doubles.step,points:this.precomputed.doubles.points.slice(1)},naf:this.precomputed.naf&&{wnd:this.precomputed.naf.wnd,points:this.precomputed.naf.points.slice(1)}}]:[this.x,this.y]},e.fromJSON=function(a,b,c){function d(b){return a.point(b[0],b[1],c)}"string"==typeof b&&(b=JSON.parse(b));var e=a.point(b[0],b[1],c);if(!b[2])return e;var f=b[2];return e.precomputed={beta:null,doubles:f.doubles&&{step:f.doubles.step,points:[e].concat(f.doubles.points.map(d))},naf:f.naf&&{wnd:f.naf.wnd,points:[e].concat(f.naf.points.map(d))}},e},e.prototype.inspect=function(){return this.isInfinity()?"<EC Point Infinity>":"<EC Point x: "+this.x.fromRed().toString(16,2)+" y: "+this.y.fromRed().toString(16,2)+">"},e.prototype.isInfinity=function(){return this.inf},e.prototype.add=function(a){if(this.inf)return a;if(a.inf)return this;if(this.eq(a))return this.dbl();if(this.neg().eq(a))return this.curve.point(null,null);if(0===this.x.cmp(a.x))return this.curve.point(null,null);var b=this.y.redSub(a.y);0!==b.cmpn(0)&&(b=b.redMul(this.x.redSub(a.x).redInvm()));var c=b.redSqr().redISub(this.x).redISub(a.x),d=b.redMul(this.x.redSub(c)).redISub(this.y);return this.curve.point(c,d)},e.prototype.dbl=function(){if(this.inf)return this;var a=this.y.redAdd(this.y);if(0===a.cmpn(0))return this.curve.point(null,null);var b=this.curve.a,c=this.x.redSqr(),d=a.redInvm(),e=c.redAdd(c).redIAdd(c).redIAdd(b).redMul(d),f=e.redSqr().redISub(this.x.redAdd(this.x)),g=e.redMul(this.x.redSub(f)).redISub(this.y);return this.curve.point(f,g)},e.prototype.getX=function(){return this.x.fromRed()},e.prototype.getY=function(){return this.y.fromRed()},e.prototype.mul=function(a){return a=new i(a,16),this._hasDoubles(a)?this.curve._fixedNafMul(this,a):this.curve.endo?this.curve._endoWnafMulAdd([this],[a]):this.curve._wnafMul(this,a)},e.prototype.mulAdd=function(a,b,c){var d=[this,b],e=[a,c];return this.curve.endo?this.curve._endoWnafMulAdd(d,e):this.curve._wnafMulAdd(1,d,e,2)},e.prototype.eq=function(a){return this===a||this.inf===a.inf&&(this.inf||0===this.x.cmp(a.x)&&0===this.y.cmp(a.y))},e.prototype.neg=function(a){if(this.inf)return this;var b=this.curve.point(this.x,this.y.redNeg());if(a&&this.precomputed){var c=this.precomputed,d=function(a){return a.neg()};b.precomputed={naf:c.naf&&{wnd:c.naf.wnd,points:c.naf.points.map(d)},doubles:c.doubles&&{step:c.doubles.step,points:c.doubles.points.map(d)}}}return b},e.prototype.toJ=function(){if(this.inf)return this.curve.jpoint(null,null,null);var a=this.curve.jpoint(this.x,this.y,this.curve.one);return a},j(f,k.BasePoint),d.prototype.jpoint=function(a,b,c){return new f(this,a,b,c)},f.prototype.toP=function(){if(this.isInfinity())return this.curve.point(null,null);var a=this.z.redInvm(),b=a.redSqr(),c=this.x.redMul(b),d=this.y.redMul(b).redMul(a);return this.curve.point(c,d)},f.prototype.neg=function(){return this.curve.jpoint(this.x,this.y.redNeg(),this.z)},f.prototype.add=function(a){if(this.isInfinity())return a;if(a.isInfinity())return this;var b=a.z.redSqr(),c=this.z.redSqr(),d=this.x.redMul(b),e=a.x.redMul(c),f=this.y.redMul(b.redMul(a.z)),g=a.y.redMul(c.redMul(this.z)),h=d.redSub(e),i=f.redSub(g);if(0===h.cmpn(0))return 0!==i.cmpn(0)?this.curve.jpoint(null,null,null):this.dbl();var j=h.redSqr(),k=j.redMul(h),l=d.redMul(j),m=i.redSqr().redIAdd(k).redISub(l).redISub(l),n=i.redMul(l.redISub(m)).redISub(f.redMul(k)),o=this.z.redMul(a.z).redMul(h);return this.curve.jpoint(m,n,o)},f.prototype.mixedAdd=function(a){if(this.isInfinity())return a.toJ();if(a.isInfinity())return this;var b=this.z.redSqr(),c=this.x,d=a.x.redMul(b),e=this.y,f=a.y.redMul(b).redMul(this.z),g=c.redSub(d),h=e.redSub(f);if(0===g.cmpn(0))return 0!==h.cmpn(0)?this.curve.jpoint(null,null,null):this.dbl();var i=g.redSqr(),j=i.redMul(g),k=c.redMul(i),l=h.redSqr().redIAdd(j).redISub(k).redISub(k),m=h.redMul(k.redISub(l)).redISub(e.redMul(j)),n=this.z.redMul(g);return this.curve.jpoint(l,m,n)},f.prototype.dblp=function(a){if(0===a)return this;if(this.isInfinity())return this;if(!a)return this.dbl();if(this.curve.zeroA||this.curve.threeA){for(var b=this,c=0;a>c;c++)b=b.dbl();return b}for(var d=this.curve.a,e=this.curve.tinv,f=this.x,g=this.y,h=this.z,i=h.redSqr().redSqr(),j=g.redAdd(g),c=0;a>c;c++){var k=f.redSqr(),l=j.redSqr(),m=l.redSqr(),n=k.redAdd(k).redIAdd(k).redIAdd(d.redMul(i)),o=f.redMul(l),p=n.redSqr().redISub(o.redAdd(o)),q=o.redISub(p),r=n.redMul(q);r=r.redIAdd(r).redISub(m);var s=j.redMul(h);a>c+1&&(i=i.redMul(m)),f=p,h=s,j=r}return this.curve.jpoint(f,j.redMul(e),h)},f.prototype.dbl=function(){return this.isInfinity()?this:this.curve.zeroA?this._zeroDbl():this.curve.threeA?this._threeDbl():this._dbl()},f.prototype._zeroDbl=function(){var a,b,c;if(this.zOne){var d=this.x.redSqr(),e=this.y.redSqr(),f=e.redSqr(),g=this.x.redAdd(e).redSqr().redISub(d).redISub(f);g=g.redIAdd(g);var h=d.redAdd(d).redIAdd(d),i=h.redSqr().redISub(g).redISub(g),j=f.redIAdd(f);j=j.redIAdd(j),j=j.redIAdd(j),a=i,b=h.redMul(g.redISub(i)).redISub(j),c=this.y.redAdd(this.y)}else{var k=this.x.redSqr(),l=this.y.redSqr(),m=l.redSqr(),n=this.x.redAdd(l).redSqr().redISub(k).redISub(m);n=n.redIAdd(n);var o=k.redAdd(k).redIAdd(k),p=o.redSqr(),q=m.redIAdd(m);q=q.redIAdd(q),q=q.redIAdd(q),a=p.redISub(n).redISub(n),b=o.redMul(n.redISub(a)).redISub(q),c=this.y.redMul(this.z),c=c.redIAdd(c)}return this.curve.jpoint(a,b,c)},f.prototype._threeDbl=function(){var a,b,c;if(this.zOne){var d=this.x.redSqr(),e=this.y.redSqr(),f=e.redSqr(),g=this.x.redAdd(e).redSqr().redISub(d).redISub(f);g=g.redIAdd(g);var h=d.redAdd(d).redIAdd(d).redIAdd(this.curve.a),i=h.redSqr().redISub(g).redISub(g);a=i;var j=f.redIAdd(f);j=j.redIAdd(j),j=j.redIAdd(j),b=h.redMul(g.redISub(i)).redISub(j),c=this.y.redAdd(this.y)}else{var k=this.z.redSqr(),l=this.y.redSqr(),m=this.x.redMul(l),n=this.x.redSub(k).redMul(this.x.redAdd(k));n=n.redAdd(n).redIAdd(n);var o=m.redIAdd(m);o=o.redIAdd(o);var p=o.redAdd(o);a=n.redSqr().redISub(p),c=this.y.redAdd(this.z).redSqr().redISub(l).redISub(k);var q=l.redSqr();q=q.redIAdd(q),q=q.redIAdd(q),q=q.redIAdd(q),b=n.redMul(o.redISub(a)).redISub(q)}return this.curve.jpoint(a,b,c)},f.prototype._dbl=function(){var a=this.curve.a,b=this.x,c=this.y,d=this.z,e=d.redSqr().redSqr(),f=b.redSqr(),g=c.redSqr(),h=f.redAdd(f).redIAdd(f).redIAdd(a.redMul(e)),i=b.redAdd(b);i=i.redIAdd(i);var j=i.redMul(g),k=h.redSqr().redISub(j.redAdd(j)),l=j.redISub(k),m=g.redSqr();m=m.redIAdd(m),m=m.redIAdd(m),m=m.redIAdd(m);var n=h.redMul(l).redISub(m),o=c.redAdd(c).redMul(d);return this.curve.jpoint(k,n,o)},f.prototype.trpl=function(){if(!this.curve.zeroA)return this.dbl().add(this);var a=this.x.redSqr(),b=this.y.redSqr(),c=this.z.redSqr(),d=b.redSqr(),e=a.redAdd(a).redIAdd(a),f=e.redSqr(),g=this.x.redAdd(b).redSqr().redISub(a).redISub(d);g=g.redIAdd(g),g=g.redAdd(g).redIAdd(g),g=g.redISub(f);var h=g.redSqr(),i=d.redIAdd(d);i=i.redIAdd(i),i=i.redIAdd(i),i=i.redIAdd(i);var j=e.redIAdd(g).redSqr().redISub(f).redISub(h).redISub(i),k=b.redMul(j);k=k.redIAdd(k),k=k.redIAdd(k);var l=this.x.redMul(h).redISub(k);l=l.redIAdd(l),l=l.redIAdd(l);var m=this.y.redMul(j.redMul(i.redISub(j)).redISub(g.redMul(h)));m=m.redIAdd(m),m=m.redIAdd(m),m=m.redIAdd(m);var n=this.z.redAdd(g).redSqr().redISub(c).redISub(h);return this.curve.jpoint(l,m,n)},f.prototype.mul=function(a,b){return a=new i(a,b),this.curve._wnafMul(this,a)},f.prototype.eq=function(a){if("affine"===a.type)return this.eq(a.toJ());if(this===a)return!0;var b=this.z.redSqr(),c=a.z.redSqr();if(0!==this.x.redMul(c).redISub(a.x.redMul(b)).cmpn(0))return!1;var d=b.redMul(this.z),e=c.redMul(a.z);return 0===this.y.redMul(e).redISub(a.y.redMul(d)).cmpn(0)},f.prototype.inspect=function(){return this.isInfinity()?"<EC JPoint Infinity>":"<EC JPoint x: "+this.x.toString(16,2)+" y: "+this.y.toString(16,2)+" z: "+this.z.toString(16,2)+">"},f.prototype.isInfinity=function(){return 0===this.z.cmpn(0)}},{"../../elliptic":357,"../curve":360,"bn.js":355,inherits:476}],361:[function(a,b,c){"use strict";function d(a){i.call(this,"mont",a),this.a=new g(a.a,16).toRed(this.red),this.b=new g(a.b,16).toRed(this.red),this.i4=new g(4).toRed(this.red).redInvm(),this.two=new g(2).toRed(this.red),this.a24=this.i4.redMul(this.a.redAdd(this.two))}function e(a,b,c){i.BasePoint.call(this,a,"projective"),null===b&&null===c?(this.x=this.curve.one,this.z=this.curve.zero):(this.x=new g(b,16),this.z=new g(c,16),this.x.red||(this.x=this.x.toRed(this.curve.red)),this.z.red||(this.z=this.z.toRed(this.curve.red)))}var f=a("../curve"),g=a("bn.js"),h=a("inherits"),i=f.base;h(d,i),b.exports=d,d.prototype.validate=function(a){var b=a.normalize().x,c=b.redSqr(),d=c.redMul(b).redAdd(c.redMul(this.a)).redAdd(b),e=d.redSqrt();return 0===e.redSqr().cmp(d)},h(e,i.BasePoint),d.prototype.point=function(a,b){return new e(this,a,b)},d.prototype.pointFromJSON=function(a){return e.fromJSON(this,a)},e.prototype.precompute=function(){},e.fromJSON=function(a,b){return new e(a,b[0],b[1]||a.one)},e.prototype.inspect=function(){return this.isInfinity()?"<EC Point Infinity>":"<EC Point x: "+this.x.fromRed().toString(16,2)+" z: "+this.z.fromRed().toString(16,2)+">"},e.prototype.isInfinity=function(){return 0===this.z.cmpn(0)},e.prototype.dbl=function(){var a=this.x.redAdd(this.z),b=a.redSqr(),c=this.x.redSub(this.z),d=c.redSqr(),e=b.redSub(d),f=b.redMul(d),g=e.redMul(d.redAdd(this.curve.a24.redMul(e)));return this.curve.point(f,g)},e.prototype.add=function(){throw new Error("Not supported on Montgomery curve")},e.prototype.diffAdd=function(a,b){var c=this.x.redAdd(this.z),d=this.x.redSub(this.z),e=a.x.redAdd(a.z),f=a.x.redSub(a.z),g=f.redMul(c),h=e.redMul(d),i=b.z.redMul(g.redAdd(h).redSqr()),j=b.x.redMul(g.redISub(h).redSqr());return this.curve.point(i,j)},e.prototype.mul=function(a){for(var b=a.clone(),c=this,d=this.curve.point(null,null),e=this,f=[];0!==b.cmpn(0);b.ishrn(1))f.push(b.andln(1));for(var g=f.length-1;g>=0;g--)0===f[g]?(c=c.diffAdd(d,e),d=d.dbl()):(d=c.diffAdd(d,e),c=c.dbl());return d},e.prototype.mulAdd=function(){throw new Error("Not supported on Montgomery curve")},e.prototype.normalize=function(){return this.x=this.x.redMul(this.z.redInvm()),this.z=this.curve.one,this},e.prototype.getX=function(){return this.normalize(),this.x.fromRed()}},{"../curve":360,"bn.js":355,inherits:476}],359:[function(a,b,c){"use strict";function d(a){this.twisted=1!==(0|a.a),this.mOneA=this.twisted&&-1===(0|a.a),this.extended=this.mOneA,j.call(this,"edwards",a),this.a=new h(a.a,16).mod(this.red.m).toRed(this.red),this.c=new h(a.c,16).toRed(this.red),this.c2=this.c.redSqr(),this.d=new h(a.d,16).toRed(this.red),this.dd=this.d.redAdd(this.d),k(!this.twisted||0===this.c.fromRed().cmpn(1)),this.oneC=1===(0|a.c)}function e(a,b,c,d,e){j.BasePoint.call(this,a,"projective"),null===b&&null===c&&null===d?(this.x=this.curve.zero,this.y=this.curve.one,this.z=this.curve.one,this.t=this.curve.zero,this.zOne=!0):(this.x=new h(b,16),this.y=new h(c,16),this.z=d?new h(d,16):this.curve.one,this.t=e&&new h(e,16),this.x.red||(this.x=this.x.toRed(this.curve.red)),this.y.red||(this.y=this.y.toRed(this.curve.red)),this.z.red||(this.z=this.z.toRed(this.curve.red)),this.t&&!this.t.red&&(this.t=this.t.toRed(this.curve.red)),this.zOne=this.z===this.curve.one,this.curve.extended&&!this.t&&(this.t=this.x.redMul(this.y),this.zOne||(this.t=this.t.redMul(this.z.redInvm()))))}var f=a("../curve"),g=a("../../elliptic"),h=a("bn.js"),i=a("inherits"),j=f.base,k=g.utils.assert;i(d,j),b.exports=d,d.prototype._mulA=function(a){return this.mOneA?a.redNeg():this.a.redMul(a)},d.prototype._mulC=function(a){return this.oneC?a:this.c.redMul(a)},d.prototype.jpoint=function(a,b,c,d){return this.point(a,b,c,d)},d.prototype.pointFromX=function(a,b){b=new h(b,16),b.red||(b=b.toRed(this.red));var c=b.redSqr(),d=this.c2.redSub(this.a.redMul(c)),e=this.one.redSub(this.c2.redMul(this.d).redMul(c)),g=d.redMul(e.redInvm()).redSqrt(),i=g.fromRed().isOdd();return(a&&!i||!a&&i)&&(g=g.redNeg()),this.point(b,g,f.one)},d.prototype.validate=function(a){if(a.isInfinity())return!0;a.normalize();var b=a.x.redSqr(),c=a.y.redSqr(),d=b.redMul(this.a).redAdd(c),e=this.c2.redMul(this.one.redAdd(this.d.redMul(b).redMul(c)));return 0===d.cmp(e)},i(e,j.BasePoint),d.prototype.pointFromJSON=function(a){return e.fromJSON(this,a)},d.prototype.point=function(a,b,c,d){return new e(this,a,b,c,d)},e.fromJSON=function(a,b){return new e(a,b[0],b[1],b[2])},e.prototype.inspect=function(){return this.isInfinity()?"<EC Point Infinity>":"<EC Point x: "+this.x.fromRed().toString(16,2)+" y: "+this.y.fromRed().toString(16,2)+" z: "+this.z.fromRed().toString(16,2)+">"},e.prototype.isInfinity=function(){return 0===this.x.cmpn(0)&&0===this.y.cmp(this.z)},e.prototype._extDbl=function(){var a=this.x.redSqr(),b=this.y.redSqr(),c=this.z.redSqr();c=c.redIAdd(c);var d=this.curve._mulA(a),e=this.x.redAdd(this.y).redSqr().redISub(a).redISub(b),f=d.redAdd(b),g=f.redSub(c),h=d.redSub(b),i=e.redMul(g),j=f.redMul(h),k=e.redMul(h),l=g.redMul(f);return this.curve.point(i,j,l,k)},e.prototype._projDbl=function(){var a,b,c,d=this.x.redAdd(this.y).redSqr(),e=this.x.redSqr(),f=this.y.redSqr();if(this.curve.twisted){var g=this.curve._mulA(e),h=g.redAdd(f);if(this.zOne)a=d.redSub(e).redSub(f).redMul(h.redSub(this.curve.two)),b=h.redMul(g.redSub(f)),c=h.redSqr().redSub(h).redSub(h);else{var i=this.z.redSqr(),j=h.redSub(i).redISub(i);a=d.redSub(e).redISub(f).redMul(j),b=h.redMul(g.redSub(f)),c=h.redMul(j)}}else{var g=e.redAdd(f),i=this.curve._mulC(this.c.redMul(this.z)).redSqr(),j=g.redSub(i).redSub(i);a=this.curve._mulC(d.redISub(g)).redMul(j),b=this.curve._mulC(g).redMul(e.redISub(f)),c=g.redMul(j)}return this.curve.point(a,b,c)},e.prototype.dbl=function(){return this.isInfinity()?this:this.curve.extended?this._extDbl():this._projDbl()},e.prototype._extAdd=function(a){var b=this.y.redSub(this.x).redMul(a.y.redSub(a.x)),c=this.y.redAdd(this.x).redMul(a.y.redAdd(a.x)),d=this.t.redMul(this.curve.dd).redMul(a.t),e=this.z.redMul(a.z.redAdd(a.z)),f=c.redSub(b),g=e.redSub(d),h=e.redAdd(d),i=c.redAdd(b),j=f.redMul(g),k=h.redMul(i),l=f.redMul(i),m=g.redMul(h);return this.curve.point(j,k,m,l)},e.prototype._projAdd=function(a){var b,c,d=this.z.redMul(a.z),e=d.redSqr(),f=this.x.redMul(a.x),g=this.y.redMul(a.y),h=this.curve.d.redMul(f).redMul(g),i=e.redSub(h),j=e.redAdd(h),k=this.x.redAdd(this.y).redMul(a.x.redAdd(a.y)).redISub(f).redISub(g),l=d.redMul(i).redMul(k);return this.curve.twisted?(b=d.redMul(j).redMul(g.redSub(this.curve._mulA(f))),c=i.redMul(j)):(b=d.redMul(j).redMul(g.redSub(f)),c=this.curve._mulC(i).redMul(j)),this.curve.point(l,b,c)},e.prototype.add=function(a){return this.isInfinity()?a:a.isInfinity()?this:this.curve.extended?this._extAdd(a):this._projAdd(a)},e.prototype.mul=function(a){return this._hasDoubles(a)?this.curve._fixedNafMul(this,a):this.curve._wnafMul(this,a)},e.prototype.mulAdd=function(a,b,c){return this.curve._wnafMulAdd(1,[this,b],[a,c],2)},e.prototype.normalize=function(){if(this.zOne)return this;var a=this.z.redInvm();return this.x=this.x.redMul(a),this.y=this.y.redMul(a),this.t&&(this.t=this.t.redMul(a)),this.z=this.curve.one,this.zOne=!0,this},e.prototype.neg=function(){return this.curve.point(this.x.redNeg(),this.y,this.z,this.t&&this.t.redNeg())},e.prototype.getX=function(){return this.normalize(),this.x.fromRed()},e.prototype.getY=function(){return this.normalize(),this.y.fromRed()},e.prototype.toP=e.prototype.normalize,e.prototype.mixedAdd=e.prototype.add},{"../../elliptic":357,"../curve":360,"bn.js":355,inherits:476}],358:[function(a,b,c){"use strict";function d(a,b){this.type=a,this.p=new f(b.p,16),this.red=b.prime?f.red(b.prime):f.mont(this.p),this.zero=new f(0).toRed(this.red),this.one=new f(1).toRed(this.red),this.two=new f(2).toRed(this.red),this.n=b.n&&new f(b.n,16),this.g=b.g&&this.pointFromJSON(b.g,b.gRed),this._wnafT1=new Array(4),this._wnafT2=new Array(4),this._wnafT3=new Array(4),this._wnafT4=new Array(4)}function e(a,b){this.curve=a,this.type=b,this.precomputed=null}var f=a("bn.js"),g=a("../../elliptic"),h=g.utils.getNAF,i=g.utils.getJSF,j=g.utils.assert;b.exports=d,d.prototype.point=function(){throw new Error("Not implemented")},d.prototype.validate=function(){throw new Error("Not implemented")},d.prototype._fixedNafMul=function(a,b){j(a.precomputed);var c=a._getDoubles(),d=h(b,1),e=(1<<c.step+1)-(c.step%2===0?2:1);e/=3;for(var f=[],g=0;g<d.length;g+=c.step){for(var i=0,b=g+c.step-1;b>=g;b--)i=(i<<1)+d[b];f.push(i)}for(var k=this.jpoint(null,null,null),l=this.jpoint(null,null,null),m=e;m>0;m--){for(var g=0;g<f.length;g++){var i=f[g];i===m?l=l.mixedAdd(c.points[g]):i===-m&&(l=l.mixedAdd(c.points[g].neg()))}k=k.add(l)}return k.toP()},d.prototype._wnafMul=function(a,b){var c=4,d=a._getNAFPoints(c);c=d.wnd;for(var e=d.points,f=h(b,c),g=this.jpoint(null,null,null),i=f.length-1;i>=0;i--){for(var b=0;i>=0&&0===f[i];i--)b++;if(i>=0&&b++,g=g.dblp(b),0>i)break;var k=f[i];j(0!==k),g="affine"===a.type?k>0?g.mixedAdd(e[k-1>>1]):g.mixedAdd(e[-k-1>>1].neg()):k>0?g.add(e[k-1>>1]):g.add(e[-k-1>>1].neg())}return"affine"===a.type?g.toP():g},d.prototype._wnafMulAdd=function(a,b,c,d){for(var e=this._wnafT1,f=this._wnafT2,g=this._wnafT3,j=0,k=0;d>k;k++){var l=b[k],m=l._getNAFPoints(a);e[k]=m.wnd,f[k]=m.points}for(var k=d-1;k>=1;k-=2){var n=k-1,o=k;if(1===e[n]&&1===e[o]){var p=[b[n],null,null,b[o]];0===b[n].y.cmp(b[o].y)?(p[1]=b[n].add(b[o]),p[2]=b[n].toJ().mixedAdd(b[o].neg())):0===b[n].y.cmp(b[o].y.redNeg())?(p[1]=b[n].toJ().mixedAdd(b[o]),p[2]=b[n].add(b[o].neg())):(p[1]=b[n].toJ().mixedAdd(b[o]),p[2]=b[n].toJ().mixedAdd(b[o].neg()));var q=[-3,-1,-5,-7,0,7,5,1,3],r=i(c[n],c[o]);j=Math.max(r[0].length,j),g[n]=new Array(j),g[o]=new Array(j);for(var s=0;j>s;s++){var t=0|r[0][s],u=0|r[1][s];g[n][s]=q[3*(t+1)+(u+1)],g[o][s]=0,f[n]=p}}else g[n]=h(c[n],e[n]),g[o]=h(c[o],e[o]),j=Math.max(g[n].length,j),j=Math.max(g[o].length,j)}for(var v=this.jpoint(null,null,null),w=this._wnafT4,k=j;k>=0;k--){for(var x=0;k>=0;){for(var y=!0,s=0;d>s;s++)w[s]=0|g[s][k],0!==w[s]&&(y=!1);if(!y)break;x++,k--}if(k>=0&&x++,v=v.dblp(x),0>k)break;for(var s=0;d>s;s++){var l,z=w[s];0!==z&&(z>0?l=f[s][z-1>>1]:0>z&&(l=f[s][-z-1>>1].neg()),v="affine"===l.type?v.mixedAdd(l):v.add(l))}}for(var k=0;d>k;k++)f[k]=null;return v.toP()},d.BasePoint=e,e.prototype.validate=function(){return this.curve.validate(this)},e.prototype.precompute=function(a){if(this.precomputed)return this;var b={doubles:null,naf:null,beta:null};return b.naf=this._getNAFPoints(8),b.doubles=this._getDoubles(4,a),b.beta=this._getBeta(),this.precomputed=b,this},e.prototype._hasDoubles=function(a){if(!this.precomputed)return!1;var b=this.precomputed.doubles;return b?b.points.length>=Math.ceil((a.bitLength()+1)/b.step):!1},e.prototype._getDoubles=function(a,b){if(this.precomputed&&this.precomputed.doubles)return this.precomputed.doubles;for(var c=[this],d=this,e=0;b>e;e+=a){for(var f=0;a>f;f++)d=d.dbl();c.push(d)}return{step:a,points:c}},e.prototype._getNAFPoints=function(a){if(this.precomputed&&this.precomputed.naf)return this.precomputed.naf;for(var b=[this],c=(1<<a)-1,d=1===c?null:this.dbl(),e=1;c>e;e++)b[e]=b[e-1].add(d);return{wnd:a,points:b}},e.prototype._getBeta=function(){return null},e.prototype.dblp=function(a){for(var b=this,c=0;a>c;c++)b=b.dbl();return b}},{"../../elliptic":357,"bn.js":355}],356:[function(a,b,c){(function(c){function d(a){var b=f(a),c=b.toRed(g.mont(a.modulus)).redPow(new g(a.publicExponent)).fromRed();return{blinder:c,unblinder:b.invm(a.modulus)}}function e(a,b){var e=d(b),f=b.modulus.byteLength(),h=(g.mont(b.modulus),new g(a).mul(e.blinder).mod(b.modulus)),i=h.toRed(g.mont(b.prime1)),j=h.toRed(g.mont(b.prime2)),k=b.coefficient,l=b.prime1,m=b.prime2,n=i.redPow(b.exponent1),o=j.redPow(b.exponent2);n=n.fromRed(),o=o.fromRed();var p=n.isub(o).imul(k).mod(l);p.imul(m),o.iadd(p);var q=new c(o.imul(e.unblinder).mod(b.modulus).toArray());if(q.length<f){var r=new c(f-q.length);r.fill(0),q=c.concat([r,q],f)}return q}function f(a){for(var b=a.modulus.byteLength(),c=new g(h(b));c.cmp(a.modulus)>=0||!c.mod(a.prime1)||!c.mod(a.prime2);)c=new g(h(b));return c}var g=a("bn.js"),h=a("randombytes");b.exports=e,e.getr=f}).call(this,a("buffer").Buffer)},{"bn.js":355,buffer:329,randombytes:474}],474:[function(a,b,c){(function(a,c,d){"use strict";function e(b,c){var e=new d(b);return g.getRandomValues(e),"function"==typeof c?a.nextTick(function(){c(null,e)}):e}function f(){throw new Error("secure random number generation not supported by this browser\nuse chrome, FireFox or Internet Explorer 11")}var g=c.crypto||c.msCrypto;g&&g.getRandomValues?b.exports=e:b.exports=f}).call(this,a("_process"),"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{},a("buffer").Buffer)},{_process:479,buffer:329}],355:[function(a,b,c){!function(a,b){"use strict";function c(a,b){if(!a)throw new Error(b||"Assertion failed")}function d(a,b){a.super_=b;var c=function(){};c.prototype=b.prototype,a.prototype=new c,a.prototype.constructor=a}function e(a,b,c){return null!==a&&"object"==typeof a&&Array.isArray(a.words)?a:(this.sign=!1,this.words=null,this.length=0,this.red=null,("le"===b||"be"===b)&&(c=b,b=10),void(null!==a&&this._init(a||0,b||10,c||"be")))}function f(a,b,c){for(var d=0,e=Math.min(a.length,c),f=b;e>f;f++){var g=a.charCodeAt(f)-48;d<<=4,d|=g>=49&&54>=g?g-49+10:g>=17&&22>=g?g-17+10:15&g}return d}function g(a,b,c,d){for(var e=0,f=Math.min(a.length,c),g=b;f>g;g++){var h=a.charCodeAt(g)-48;e*=d,e+=h>=49?h-49+10:h>=17?h-17+10:h}return e}function h(a,b){this.name=a,this.p=new e(b,16),this.n=this.p.bitLength(),this.k=new e(1).ishln(this.n).isub(this.p),this.tmp=this._tmp()}function i(){h.call(this,"k256","ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f")}function j(){h.call(this,"p224","ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001")}function k(){h.call(this,"p192","ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff")}function l(){h.call(this,"25519","7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed")}function m(a){if("string"==typeof a){var b=e._prime(a);this.m=b.p,this.prime=b}else this.m=a,this.prime=null}function n(a){m.call(this,a),this.shift=this.m.bitLength(),this.shift%26!==0&&(this.shift+=26-this.shift%26),this.r=new e(1).ishln(this.shift),this.r2=this.imod(this.r.sqr()),this.rinv=this.r._invmp(this.m),this.minv=this.rinv.mul(this.r).isubn(1).div(this.m),this.minv.sign=!0,this.minv=this.minv.mod(this.r)}"object"==typeof a?a.exports=e:b.BN=e,e.BN=e,e.wordSize=26,e.prototype._init=function(a,b,d){if("number"==typeof a)return this._initNumber(a,b,d);if("object"==typeof a)return this._initArray(a,b,d);"hex"===b&&(b=16),c(b===(0|b)&&b>=2&&36>=b),a=a.toString().replace(/\s+/g,"");var e=0;"-"===a[0]&&e++,16===b?this._parseHex(a,e):this._parseBase(a,b,e),"-"===a[0]&&(this.sign=!0),this.strip(),"le"===d&&this._initArray(this.toArray(),b,d)},e.prototype._initNumber=function(a,b,d){0>a&&(this.sign=!0,a=-a),67108864>a?(this.words=[67108863&a],this.length=1):4503599627370496>a?(this.words=[67108863&a,a/67108864&67108863],this.length=2):(c(9007199254740992>a),this.words=[67108863&a,a/67108864&67108863,1],this.length=3),"le"===d&&this._initArray(this.toArray(),b,d)},e.prototype._initArray=function(a,b,d){if(c("number"==typeof a.length),a.length<=0)return this.words=[0],this.length=1,this;this.length=Math.ceil(a.length/3),this.words=new Array(this.length);for(var e=0;e<this.length;e++)this.words[e]=0;var f=0;if("be"===d)for(var e=a.length-1,g=0;e>=0;e-=3){var h=a[e]|a[e-1]<<8|a[e-2]<<16;this.words[g]|=h<<f&67108863,this.words[g+1]=h>>>26-f&67108863,f+=24,f>=26&&(f-=26,g++)}else if("le"===d)for(var e=0,g=0;e<a.length;e+=3){var h=a[e]|a[e+1]<<8|a[e+2]<<16;this.words[g]|=h<<f&67108863,this.words[g+1]=h>>>26-f&67108863,f+=24,f>=26&&(f-=26,g++)}return this.strip()},e.prototype._parseHex=function(a,b){this.length=Math.ceil((a.length-b)/6),this.words=new Array(this.length);for(var c=0;c<this.length;c++)this.words[c]=0;for(var d=0,c=a.length-6,e=0;c>=b;c-=6){var g=f(a,c,c+6);this.words[e]|=g<<d&67108863,this.words[e+1]|=g>>>26-d&4194303,d+=24,d>=26&&(d-=26,e++)}if(c+6!==b){var g=f(a,b,c+6);this.words[e]|=g<<d&67108863,this.words[e+1]|=g>>>26-d&4194303}this.strip()},e.prototype._parseBase=function(a,b,c){this.words=[0],this.length=1;for(var d=0,e=1;67108863>=e;e*=b)d++;d--,e=e/b|0;for(var f=a.length-c,h=f%d,i=Math.min(f,f-h)+c,j=0,k=c;i>k;k+=d)j=g(a,k,k+d,b),this.imuln(e),this.words[0]+j<67108864?this.words[0]+=j:this._iaddn(j);if(0!==h){for(var l=1,j=g(a,k,a.length,b),k=0;h>k;k++)l*=b;this.imuln(l),this.words[0]+j<67108864?this.words[0]+=j:this._iaddn(j)}},e.prototype.copy=function(a){a.words=new Array(this.length);for(var b=0;b<this.length;b++)a.words[b]=this.words[b];a.length=this.length,a.sign=this.sign,a.red=this.red},e.prototype.clone=function(){var a=new e(null);return this.copy(a),a},e.prototype.strip=function(){for(;this.length>1&&0===this.words[this.length-1];)this.length--;return this._normSign()},e.prototype._normSign=function(){return 1===this.length&&0===this.words[0]&&(this.sign=!1),this},e.prototype.inspect=function(){return(this.red?"<BN-R: ":"<BN: ")+this.toString(16)+">"};var o=["","0","00","000","0000","00000","000000","0000000","00000000","000000000","0000000000","00000000000","000000000000","0000000000000","00000000000000","000000000000000","0000000000000000","00000000000000000","000000000000000000","0000000000000000000","00000000000000000000","000000000000000000000","0000000000000000000000","00000000000000000000000","000000000000000000000000","0000000000000000000000000"],p=[0,0,25,16,12,11,10,9,8,8,7,7,7,7,6,6,6,6,6,6,6,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5],q=[0,0,33554432,43046721,16777216,48828125,60466176,40353607,16777216,43046721,1e7,19487171,35831808,62748517,7529536,11390625,16777216,24137569,34012224,47045881,64e6,4084101,5153632,6436343,7962624,9765625,11881376,14348907,17210368,20511149,243e5,28629151,33554432,39135393,45435424,52521875,60466176];e.prototype.toString=function(a,b){if(a=a||10,16===a||"hex"===a){for(var d="",e=0,b=0|b||1,f=0,g=0;g<this.length;g++){var h=this.words[g],i=(16777215&(h<<e|f)).toString(16);f=h>>>24-e&16777215,d=0!==f||g!==this.length-1?o[6-i.length]+i+d:i+d,e+=2,e>=26&&(e-=26,g--)}for(0!==f&&(d=f.toString(16)+d);d.length%b!==0;)d="0"+d;return this.sign&&(d="-"+d),d}if(a===(0|a)&&a>=2&&36>=a){var j=p[a],k=q[a],d="",l=this.clone();for(l.sign=!1;0!==l.cmpn(0);){var m=l.modn(k).toString(a);l=l.idivn(k),d=0!==l.cmpn(0)?o[j-m.length]+m+d:m+d}return 0===this.cmpn(0)&&(d="0"+d),this.sign&&(d="-"+d),d}c(!1,"Base should be between 2 and 36")},e.prototype.toJSON=function(){return this.toString(16)},e.prototype.toArray=function(a){this.strip();var b=new Array(this.byteLength());b[0]=0;var c=this.clone();if("le"!==a)for(var d=0;0!==c.cmpn(0);d++){var e=c.andln(255);c.ishrn(8),b[b.length-d-1]=e}else for(var d=0;0!==c.cmpn(0);d++){var e=c.andln(255);c.ishrn(8),b[d]=e}return b},Math.clz32?e.prototype._countBits=function(a){return 32-Math.clz32(a)}:e.prototype._countBits=function(a){var b=a,c=0;return b>=4096&&(c+=13,b>>>=13),b>=64&&(c+=7,b>>>=7),b>=8&&(c+=4,b>>>=4),b>=2&&(c+=2,b>>>=2),c+b},e.prototype._zeroBits=function(a){if(0===a)return 26;var b=a,c=0;return 0===(8191&b)&&(c+=13,b>>>=13),0===(127&b)&&(c+=7,b>>>=7),0===(15&b)&&(c+=4,b>>>=4),0===(3&b)&&(c+=2,b>>>=2),0===(1&b)&&c++,c},e.prototype.bitLength=function(){var a=0,b=this.words[this.length-1],a=this._countBits(b);return 26*(this.length-1)+a},e.prototype.zeroBits=function(){if(0===this.cmpn(0))return 0;for(var a=0,b=0;b<this.length;b++){var c=this._zeroBits(this.words[b]);if(a+=c,26!==c)break}return a},e.prototype.byteLength=function(){return Math.ceil(this.bitLength()/8)},e.prototype.neg=function(){if(0===this.cmpn(0))return this.clone();var a=this.clone();return a.sign=!this.sign,a},e.prototype.ior=function(a){for(this.sign=this.sign||a.sign;this.length<a.length;)this.words[this.length++]=0;for(var b=0;b<a.length;b++)this.words[b]=this.words[b]|a.words[b];return this.strip()},e.prototype.or=function(a){return this.length>a.length?this.clone().ior(a):a.clone().ior(this)},e.prototype.iand=function(a){this.sign=this.sign&&a.sign;var b;b=this.length>a.length?a:this;for(var c=0;c<b.length;c++)this.words[c]=this.words[c]&a.words[c];return this.length=b.length,
this.strip()},e.prototype.and=function(a){return this.length>a.length?this.clone().iand(a):a.clone().iand(this)},e.prototype.ixor=function(a){this.sign=this.sign||a.sign;var b,c;this.length>a.length?(b=this,c=a):(b=a,c=this);for(var d=0;d<c.length;d++)this.words[d]=b.words[d]^c.words[d];if(this!==b)for(;d<b.length;d++)this.words[d]=b.words[d];return this.length=b.length,this.strip()},e.prototype.xor=function(a){return this.length>a.length?this.clone().ixor(a):a.clone().ixor(this)},e.prototype.setn=function(a,b){c("number"==typeof a&&a>=0);for(var d=a/26|0,e=a%26;this.length<=d;)this.words[this.length++]=0;return b?this.words[d]=this.words[d]|1<<e:this.words[d]=this.words[d]&~(1<<e),this.strip()},e.prototype.iadd=function(a){if(this.sign&&!a.sign){this.sign=!1;var b=this.isub(a);return this.sign=!this.sign,this._normSign()}if(!this.sign&&a.sign){a.sign=!1;var b=this.isub(a);return a.sign=!0,b._normSign()}var c,d;this.length>a.length?(c=this,d=a):(c=a,d=this);for(var e=0,f=0;f<d.length;f++){var b=c.words[f]+d.words[f]+e;this.words[f]=67108863&b,e=b>>>26}for(;0!==e&&f<c.length;f++){var b=c.words[f]+e;this.words[f]=67108863&b,e=b>>>26}if(this.length=c.length,0!==e)this.words[this.length]=e,this.length++;else if(c!==this)for(;f<c.length;f++)this.words[f]=c.words[f];return this},e.prototype.add=function(a){if(a.sign&&!this.sign){a.sign=!1;var b=this.sub(a);return a.sign=!0,b}if(!a.sign&&this.sign){this.sign=!1;var b=a.sub(this);return this.sign=!0,b}return this.length>a.length?this.clone().iadd(a):a.clone().iadd(this)},e.prototype.isub=function(a){if(a.sign){a.sign=!1;var b=this.iadd(a);return a.sign=!0,b._normSign()}if(this.sign)return this.sign=!1,this.iadd(a),this.sign=!0,this._normSign();var c=this.cmp(a);if(0===c)return this.sign=!1,this.length=1,this.words[0]=0,this;var d,e;c>0?(d=this,e=a):(d=a,e=this);for(var f=0,g=0;g<e.length;g++){var b=d.words[g]-e.words[g]+f;f=b>>26,this.words[g]=67108863&b}for(;0!==f&&g<d.length;g++){var b=d.words[g]+f;f=b>>26,this.words[g]=67108863&b}if(0===f&&g<d.length&&d!==this)for(;g<d.length;g++)this.words[g]=d.words[g];return this.length=Math.max(this.length,g),d!==this&&(this.sign=!0),this.strip()},e.prototype.sub=function(a){return this.clone().isub(a)},e.prototype._smallMulTo=function(a,b){b.sign=a.sign!==this.sign,b.length=this.length+a.length;for(var c=0,d=0;d<b.length-1;d++){for(var e=c>>>26,f=67108863&c,g=Math.min(d,a.length-1),h=Math.max(0,d-this.length+1);g>=h;h++){var i=d-h,j=0|this.words[i],k=0|a.words[h],l=j*k,m=67108863&l;e=e+(l/67108864|0)|0,m=m+f|0,f=67108863&m,e=e+(m>>>26)|0}b.words[d]=f,c=e}return 0!==c?b.words[d]=c:b.length--,b.strip()},e.prototype._bigMulTo=function(a,b){b.sign=a.sign!==this.sign,b.length=this.length+a.length;for(var c=0,d=0,e=0;e<b.length-1;e++){var f=d;d=0;for(var g=67108863&c,h=Math.min(e,a.length-1),i=Math.max(0,e-this.length+1);h>=i;i++){var j=e-i,k=0|this.words[j],l=0|a.words[i],m=k*l,n=67108863&m;f=f+(m/67108864|0)|0,n=n+g|0,g=67108863&n,f=f+(n>>>26)|0,d+=f>>>26,f&=67108863}b.words[e]=g,c=f,f=d}return 0!==c?b.words[e]=c:b.length--,b.strip()},e.prototype.mulTo=function(a,b){var c;return c=this.length+a.length<63?this._smallMulTo(a,b):this._bigMulTo(a,b)},e.prototype.mul=function(a){var b=new e(null);return b.words=new Array(this.length+a.length),this.mulTo(a,b)},e.prototype.imul=function(a){if(0===this.cmpn(0)||0===a.cmpn(0))return this.words[0]=0,this.length=1,this;var b=this.length,c=a.length;this.sign=a.sign!==this.sign,this.length=this.length+a.length,this.words[this.length-1]=0;for(var d=this.length-2;d>=0;d--){for(var e=0,f=0,g=Math.min(d,c-1),h=Math.max(0,d-b+1);g>=h;h++){var i=d-h,j=this.words[i],k=a.words[h],l=j*k,m=67108863&l;e+=l/67108864|0,m+=f,f=67108863&m,e+=m>>>26}this.words[d]=f,this.words[d+1]+=e,e=0}for(var e=0,i=1;i<this.length;i++){var n=this.words[i]+e;this.words[i]=67108863&n,e=n>>>26}return this.strip()},e.prototype.imuln=function(a){c("number"==typeof a);for(var b=0,d=0;d<this.length;d++){var e=this.words[d]*a,f=(67108863&e)+(67108863&b);b>>=26,b+=e/67108864|0,b+=f>>>26,this.words[d]=67108863&f}return 0!==b&&(this.words[d]=b,this.length++),this},e.prototype.muln=function(a){return this.clone().imuln(a)},e.prototype.sqr=function(){return this.mul(this)},e.prototype.isqr=function(){return this.mul(this)},e.prototype.ishln=function(a){c("number"==typeof a&&a>=0);var b=a%26,d=(a-b)/26,e=67108863>>>26-b<<26-b;if(0!==b){for(var f=0,g=0;g<this.length;g++){var h=this.words[g]&e,i=this.words[g]-h<<b;this.words[g]=i|f,f=h>>>26-b}f&&(this.words[g]=f,this.length++)}if(0!==d){for(var g=this.length-1;g>=0;g--)this.words[g+d]=this.words[g];for(var g=0;d>g;g++)this.words[g]=0;this.length+=d}return this.strip()},e.prototype.ishrn=function(a,b,d){c("number"==typeof a&&a>=0);var e;e=b?(b-b%26)/26:0;var f=a%26,g=Math.min((a-f)/26,this.length),h=67108863^67108863>>>f<<f,i=d;if(e-=g,e=Math.max(0,e),i){for(var j=0;g>j;j++)i.words[j]=this.words[j];i.length=g}if(0===g);else if(this.length>g){this.length-=g;for(var j=0;j<this.length;j++)this.words[j]=this.words[j+g]}else this.words[0]=0,this.length=1;for(var k=0,j=this.length-1;j>=0&&(0!==k||j>=e);j--){var l=this.words[j];this.words[j]=k<<26-f|l>>>f,k=l&h}return i&&0!==k&&(i.words[i.length++]=k),0===this.length&&(this.words[0]=0,this.length=1),this.strip(),this},e.prototype.shln=function(a){return this.clone().ishln(a)},e.prototype.shrn=function(a){return this.clone().ishrn(a)},e.prototype.testn=function(a){c("number"==typeof a&&a>=0);var b=a%26,d=(a-b)/26,e=1<<b;if(this.length<=d)return!1;var f=this.words[d];return!!(f&e)},e.prototype.imaskn=function(a){c("number"==typeof a&&a>=0);var b=a%26,d=(a-b)/26;if(c(!this.sign,"imaskn works only with positive numbers"),0!==b&&d++,this.length=Math.min(d,this.length),0!==b){var e=67108863^67108863>>>b<<b;this.words[this.length-1]&=e}return this.strip()},e.prototype.maskn=function(a){return this.clone().imaskn(a)},e.prototype.iaddn=function(a){return c("number"==typeof a),0>a?this.isubn(-a):this.sign?1===this.length&&this.words[0]<a?(this.words[0]=a-this.words[0],this.sign=!1,this):(this.sign=!1,this.isubn(a),this.sign=!0,this):this._iaddn(a)},e.prototype._iaddn=function(a){this.words[0]+=a;for(var b=0;b<this.length&&this.words[b]>=67108864;b++)this.words[b]-=67108864,b===this.length-1?this.words[b+1]=1:this.words[b+1]++;return this.length=Math.max(this.length,b+1),this},e.prototype.isubn=function(a){if(c("number"==typeof a),0>a)return this.iaddn(-a);if(this.sign)return this.sign=!1,this.iaddn(a),this.sign=!0,this;this.words[0]-=a;for(var b=0;b<this.length&&this.words[b]<0;b++)this.words[b]+=67108864,this.words[b+1]-=1;return this.strip()},e.prototype.addn=function(a){return this.clone().iaddn(a)},e.prototype.subn=function(a){return this.clone().isubn(a)},e.prototype.iabs=function(){return this.sign=!1,this},e.prototype.abs=function(){return this.clone().iabs()},e.prototype._ishlnsubmul=function(a,b,d){var e,f=a.length+d;if(this.words.length<f){for(var g=new Array(f),e=0;e<this.length;e++)g[e]=this.words[e];this.words=g}else e=this.length;for(this.length=Math.max(this.length,f);e<this.length;e++)this.words[e]=0;for(var h=0,e=0;e<a.length;e++){var i=this.words[e+d]+h,j=a.words[e]*b;i-=67108863&j,h=(i>>26)-(j/67108864|0),this.words[e+d]=67108863&i}for(;e<this.length-d;e++){var i=this.words[e+d]+h;h=i>>26,this.words[e+d]=67108863&i}if(0===h)return this.strip();c(-1===h),h=0;for(var e=0;e<this.length;e++){var i=-this.words[e]+h;h=i>>26,this.words[e]=67108863&i}return this.sign=!0,this.strip()},e.prototype._wordDiv=function(a,b){var c=this.length-a.length,d=this.clone(),f=a,g=f.words[f.length-1],h=this._countBits(g);c=26-h,0!==c&&(f=f.shln(c),d.ishln(c),g=f.words[f.length-1]);var i,j=d.length-f.length;if("mod"!==b){i=new e(null),i.length=j+1,i.words=new Array(i.length);for(var k=0;k<i.length;k++)i.words[k]=0}var l=d.clone()._ishlnsubmul(f,1,j);l.sign||(d=l,i&&(i.words[j]=1));for(var m=j-1;m>=0;m--){var n=67108864*d.words[f.length+m]+d.words[f.length+m-1];for(n=Math.min(n/g|0,67108863),d._ishlnsubmul(f,n,m);d.sign;)n--,d.sign=!1,d._ishlnsubmul(f,1,m),0!==d.cmpn(0)&&(d.sign=!d.sign);i&&(i.words[m]=n)}return i&&i.strip(),d.strip(),"div"!==b&&0!==c&&d.ishrn(c),{div:i?i:null,mod:d}},e.prototype.divmod=function(a,b){if(c(0!==a.cmpn(0)),this.sign&&!a.sign){var d,f,g=this.neg().divmod(a,b);return"mod"!==b&&(d=g.div.neg()),"div"!==b&&(f=0===g.mod.cmpn(0)?g.mod:a.sub(g.mod)),{div:d,mod:f}}if(!this.sign&&a.sign){var d,g=this.divmod(a.neg(),b);return"mod"!==b&&(d=g.div.neg()),{div:d,mod:g.mod}}return this.sign&&a.sign?this.neg().divmod(a.neg(),b):a.length>this.length||this.cmp(a)<0?{div:new e(0),mod:this}:1===a.length?"div"===b?{div:this.divn(a.words[0]),mod:null}:"mod"===b?{div:null,mod:new e(this.modn(a.words[0]))}:{div:this.divn(a.words[0]),mod:new e(this.modn(a.words[0]))}:this._wordDiv(a,b)},e.prototype.div=function(a){return this.divmod(a,"div").div},e.prototype.mod=function(a){return this.divmod(a,"mod").mod},e.prototype.divRound=function(a){var b=this.divmod(a);if(0===b.mod.cmpn(0))return b.div;var c=b.div.sign?b.mod.isub(a):b.mod,d=a.shrn(1),e=a.andln(1),f=c.cmp(d);return 0>f||1===e&&0===f?b.div:b.div.sign?b.div.isubn(1):b.div.iaddn(1)},e.prototype.modn=function(a){c(67108863>=a);for(var b=(1<<26)%a,d=0,e=this.length-1;e>=0;e--)d=(b*d+this.words[e])%a;return d},e.prototype.idivn=function(a){c(67108863>=a);for(var b=0,d=this.length-1;d>=0;d--){var e=this.words[d]+67108864*b;this.words[d]=e/a|0,b=e%a}return this.strip()},e.prototype.divn=function(a){return this.clone().idivn(a)},e.prototype.egcd=function(a){c(!a.sign),c(0!==a.cmpn(0));var b=this,d=a.clone();b=b.sign?b.mod(a):b.clone();for(var f=new e(1),g=new e(0),h=new e(0),i=new e(1),j=0;b.isEven()&&d.isEven();)b.ishrn(1),d.ishrn(1),++j;for(var k=d.clone(),l=b.clone();0!==b.cmpn(0);){for(;b.isEven();)b.ishrn(1),f.isEven()&&g.isEven()?(f.ishrn(1),g.ishrn(1)):(f.iadd(k).ishrn(1),g.isub(l).ishrn(1));for(;d.isEven();)d.ishrn(1),h.isEven()&&i.isEven()?(h.ishrn(1),i.ishrn(1)):(h.iadd(k).ishrn(1),i.isub(l).ishrn(1));b.cmp(d)>=0?(b.isub(d),f.isub(h),g.isub(i)):(d.isub(b),h.isub(f),i.isub(g))}return{a:h,b:i,gcd:d.ishln(j)}},e.prototype._invmp=function(a){c(!a.sign),c(0!==a.cmpn(0));var b=this,d=a.clone();b=b.sign?b.mod(a):b.clone();for(var f=new e(1),g=new e(0),h=d.clone();b.cmpn(1)>0&&d.cmpn(1)>0;){for(;b.isEven();)b.ishrn(1),f.isEven()?f.ishrn(1):f.iadd(h).ishrn(1);for(;d.isEven();)d.ishrn(1),g.isEven()?g.ishrn(1):g.iadd(h).ishrn(1);b.cmp(d)>=0?(b.isub(d),f.isub(g)):(d.isub(b),g.isub(f))}return 0===b.cmpn(1)?f:g},e.prototype.gcd=function(a){if(0===this.cmpn(0))return a.clone();if(0===a.cmpn(0))return this.clone();var b=this.clone(),c=a.clone();b.sign=!1,c.sign=!1;for(var d=0;b.isEven()&&c.isEven();d++)b.ishrn(1),c.ishrn(1);for(;;){for(;b.isEven();)b.ishrn(1);for(;c.isEven();)c.ishrn(1);var e=b.cmp(c);if(0>e){var f=b;b=c,c=f}else if(0===e||0===c.cmpn(1))break;b.isub(c)}return c.ishln(d)},e.prototype.invm=function(a){return this.egcd(a).a.mod(a)},e.prototype.isEven=function(){return 0===(1&this.words[0])},e.prototype.isOdd=function(){return 1===(1&this.words[0])},e.prototype.andln=function(a){return this.words[0]&a},e.prototype.bincn=function(a){c("number"==typeof a);var b=a%26,d=(a-b)/26,e=1<<b;if(this.length<=d){for(var f=this.length;d+1>f;f++)this.words[f]=0;return this.words[d]|=e,this.length=d+1,this}for(var g=e,f=d;0!==g&&f<this.length;f++){var h=this.words[f];h+=g,g=h>>>26,h&=67108863,this.words[f]=h}return 0!==g&&(this.words[f]=g,this.length++),this},e.prototype.cmpn=function(a){var b=0>a;if(b&&(a=-a),this.sign&&!b)return-1;if(!this.sign&&b)return 1;a&=67108863,this.strip();var c;if(this.length>1)c=1;else{var d=this.words[0];c=d===a?0:a>d?-1:1}return this.sign&&(c=-c),c},e.prototype.cmp=function(a){if(this.sign&&!a.sign)return-1;if(!this.sign&&a.sign)return 1;var b=this.ucmp(a);return this.sign?-b:b},e.prototype.ucmp=function(a){if(this.length>a.length)return 1;if(this.length<a.length)return-1;for(var b=0,c=this.length-1;c>=0;c--){var d=this.words[c],e=a.words[c];if(d!==e){e>d?b=-1:d>e&&(b=1);break}}return b},e.red=function(a){return new m(a)},e.prototype.toRed=function(a){return c(!this.red,"Already a number in reduction context"),c(!this.sign,"red works only with positives"),a.convertTo(this)._forceRed(a)},e.prototype.fromRed=function(){return c(this.red,"fromRed works only with numbers in reduction context"),this.red.convertFrom(this)},e.prototype._forceRed=function(a){return this.red=a,this},e.prototype.forceRed=function(a){return c(!this.red,"Already a number in reduction context"),this._forceRed(a)},e.prototype.redAdd=function(a){return c(this.red,"redAdd works only with red numbers"),this.red.add(this,a)},e.prototype.redIAdd=function(a){return c(this.red,"redIAdd works only with red numbers"),this.red.iadd(this,a)},e.prototype.redSub=function(a){return c(this.red,"redSub works only with red numbers"),this.red.sub(this,a)},e.prototype.redISub=function(a){return c(this.red,"redISub works only with red numbers"),this.red.isub(this,a)},e.prototype.redShl=function(a){return c(this.red,"redShl works only with red numbers"),this.red.shl(this,a)},e.prototype.redMul=function(a){return c(this.red,"redMul works only with red numbers"),this.red._verify2(this,a),this.red.mul(this,a)},e.prototype.redIMul=function(a){return c(this.red,"redMul works only with red numbers"),this.red._verify2(this,a),this.red.imul(this,a)},e.prototype.redSqr=function(){return c(this.red,"redSqr works only with red numbers"),this.red._verify1(this),this.red.sqr(this)},e.prototype.redISqr=function(){return c(this.red,"redISqr works only with red numbers"),this.red._verify1(this),this.red.isqr(this)},e.prototype.redSqrt=function(){return c(this.red,"redSqrt works only with red numbers"),this.red._verify1(this),this.red.sqrt(this)},e.prototype.redInvm=function(){return c(this.red,"redInvm works only with red numbers"),this.red._verify1(this),this.red.invm(this)},e.prototype.redNeg=function(){return c(this.red,"redNeg works only with red numbers"),this.red._verify1(this),this.red.neg(this)},e.prototype.redPow=function(a){return c(this.red&&!a.red,"redPow(normalNum)"),this.red._verify1(this),this.red.pow(this,a)};var r={k256:null,p224:null,p192:null,p25519:null};h.prototype._tmp=function(){var a=new e(null);return a.words=new Array(Math.ceil(this.n/13)),a},h.prototype.ireduce=function(a){var b,c=a;do this.split(c,this.tmp),c=this.imulK(c),c=c.iadd(this.tmp),b=c.bitLength();while(b>this.n);var d=b<this.n?-1:c.ucmp(this.p);return 0===d?(c.words[0]=0,c.length=1):d>0?c.isub(this.p):c.strip(),c},h.prototype.split=function(a,b){a.ishrn(this.n,0,b)},h.prototype.imulK=function(a){return a.imul(this.k)},d(i,h),i.prototype.split=function(a,b){for(var c=4194303,d=Math.min(a.length,9),e=0;d>e;e++)b.words[e]=a.words[e];if(b.length=d,a.length<=9)return a.words[0]=0,void(a.length=1);var f=a.words[9];b.words[b.length++]=f&c;for(var e=10;e<a.length;e++){var g=a.words[e];a.words[e-10]=(g&c)<<4|f>>>22,f=g}a.words[e-10]=f>>>22,a.length-=9},i.prototype.imulK=function(a){a.words[a.length]=0,a.words[a.length+1]=0,a.length+=2;for(var b,c=0,d=0;d<a.length;d++){var e=a.words[d];b=64*e,c+=977*e,b+=c/67108864|0,c&=67108863,a.words[d]=c,c=b}return 0===a.words[a.length-1]&&(a.length--,0===a.words[a.length-1]&&a.length--),a},d(j,h),d(k,h),d(l,h),l.prototype.imulK=function(a){for(var b=0,c=0;c<a.length;c++){var d=19*a.words[c]+b,e=67108863&d;d>>>=26,a.words[c]=e,b=d}return 0!==b&&(a.words[a.length++]=b),a},e._prime=function s(a){if(r[a])return r[a];var s;if("k256"===a)s=new i;else if("p224"===a)s=new j;else if("p192"===a)s=new k;else{if("p25519"!==a)throw new Error("Unknown prime "+a);s=new l}return r[a]=s,s},m.prototype._verify1=function(a){c(!a.sign,"red works only with positives"),c(a.red,"red works only with red numbers")},m.prototype._verify2=function(a,b){c(!a.sign&&!b.sign,"red works only with positives"),c(a.red&&a.red===b.red,"red works only with red numbers")},m.prototype.imod=function(a){return this.prime?this.prime.ireduce(a)._forceRed(this):a.mod(this.m)._forceRed(this)},m.prototype.neg=function(a){var b=a.clone();return b.sign=!b.sign,b.iadd(this.m)._forceRed(this)},m.prototype.add=function(a,b){this._verify2(a,b);var c=a.add(b);return c.cmp(this.m)>=0&&c.isub(this.m),c._forceRed(this)},m.prototype.iadd=function(a,b){this._verify2(a,b);var c=a.iadd(b);return c.cmp(this.m)>=0&&c.isub(this.m),c},m.prototype.sub=function(a,b){this._verify2(a,b);var c=a.sub(b);return c.cmpn(0)<0&&c.iadd(this.m),c._forceRed(this)},m.prototype.isub=function(a,b){this._verify2(a,b);var c=a.isub(b);return c.cmpn(0)<0&&c.iadd(this.m),c},m.prototype.shl=function(a,b){return this._verify1(a),this.imod(a.shln(b))},m.prototype.imul=function(a,b){return this._verify2(a,b),this.imod(a.imul(b))},m.prototype.mul=function(a,b){return this._verify2(a,b),this.imod(a.mul(b))},m.prototype.isqr=function(a){return this.imul(a,a)},m.prototype.sqr=function(a){return this.mul(a,a)},m.prototype.sqrt=function(a){if(0===a.cmpn(0))return a.clone();var b=this.m.andln(3);if(c(b%2===1),3===b){var d=this.m.add(new e(1)).ishrn(2),f=this.pow(a,d);return f}for(var g=this.m.subn(1),h=0;0!==g.cmpn(0)&&0===g.andln(1);)h++,g.ishrn(1);c(0!==g.cmpn(0));var i=new e(1).toRed(this),j=i.redNeg(),k=this.m.subn(1).ishrn(1),l=this.m.bitLength();for(l=new e(2*l*l).toRed(this);0!==this.pow(l,k).cmp(j);)l.redIAdd(j);for(var m=this.pow(l,g),f=this.pow(a,g.addn(1).ishrn(1)),n=this.pow(a,g),o=h;0!==n.cmp(i);){for(var p=n,q=0;0!==p.cmp(i);q++)p=p.redSqr();c(o>q);var r=this.pow(m,new e(1).ishln(o-q-1));f=f.redMul(r),m=r.redSqr(),n=n.redMul(m),o=q}return f},m.prototype.invm=function(a){var b=a._invmp(this.m);return b.sign?(b.sign=!1,this.imod(b).redNeg()):this.imod(b)},m.prototype.pow=function(a,b){var c=[];if(0===b.cmpn(0))return new e(1);for(var d=b.clone();0!==d.cmpn(0);)c.push(d.andln(1)),d.ishrn(1);for(var f=a,g=0;g<c.length&&0===c[g];g++,f=this.sqr(f));if(++g<c.length)for(var d=this.sqr(f);g<c.length;g++,d=this.sqr(d))0!==c[g]&&(f=this.mul(f,d));return f},m.prototype.convertTo=function(a){var b=a.mod(this.m);return b===a?b.clone():b},m.prototype.convertFrom=function(a){var b=a.clone();return b.red=null,b},e.mont=function(a){return new n(a)},d(n,m),n.prototype.convertTo=function(a){return this.imod(a.shln(this.shift))},n.prototype.convertFrom=function(a){var b=this.imod(a.mul(this.rinv));return b.red=null,b},n.prototype.imul=function(a,b){if(0===a.cmpn(0)||0===b.cmpn(0))return a.words[0]=0,a.length=1,a;var c=a.imul(b),d=c.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),e=c.isub(d).ishrn(this.shift),f=e;return e.cmp(this.m)>=0?f=e.isub(this.m):e.cmpn(0)<0&&(f=e.iadd(this.m)),f._forceRed(this)},n.prototype.mul=function(a,b){if(0===a.cmpn(0)||0===b.cmpn(0))return new e(0)._forceRed(this);var c=a.mul(b),d=c.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),f=c.isub(d).ishrn(this.shift),g=f;return f.cmp(this.m)>=0?g=f.isub(this.m):f.cmpn(0)<0&&(g=f.iadd(this.m)),g._forceRed(this)},n.prototype.invm=function(a){var b=this.imod(a._invmp(this.m).mul(this.r2));return b._forceRed(this)}}("undefined"==typeof b||b,this)},{}],354:[function(a,b,c){"use strict";c["1.3.132.0.10"]="secp256k1",c["1.3.132.0.33"]="p224",c["1.2.840.10045.3.1.1"]="p192",c["1.2.840.10045.3.1.7"]="p256"},{}],352:[function(a,b,c){(function(a){"use strict";c["RSA-SHA224"]=c.sha224WithRSAEncryption={sign:"rsa",hash:"sha224",id:new a("302d300d06096086480165030402040500041c","hex")},c["RSA-SHA256"]=c.sha256WithRSAEncryption={sign:"rsa",hash:"sha256",id:new a("3031300d060960864801650304020105000420","hex")},c["RSA-SHA384"]=c.sha384WithRSAEncryption={sign:"rsa",hash:"sha384",id:new a("3041300d060960864801650304020205000430","hex")},c["RSA-SHA512"]=c.sha512WithRSAEncryption={sign:"rsa",hash:"sha512",id:new a("3051300d060960864801650304020305000440","hex")},c["RSA-SHA1"]={sign:"rsa",hash:"sha1",id:new a("3021300906052b0e03021a05000414","hex")},c["ecdsa-with-SHA1"]={sign:"ecdsa",hash:"sha1",id:new a("","hex")},c.DSA=c["DSA-SHA1"]=c["DSA-SHA"]={sign:"dsa",hash:"sha1",id:new a("","hex")},c["DSA-SHA224"]=c["DSA-WITH-SHA224"]={sign:"dsa",hash:"sha224",id:new a("","hex")},c["DSA-SHA256"]=c["DSA-WITH-SHA256"]={sign:"dsa",hash:"sha256",id:new a("","hex")},c["DSA-SHA384"]=c["DSA-WITH-SHA384"]={sign:"dsa",hash:"sha384",id:new a("","hex")},c["DSA-SHA512"]=c["DSA-WITH-SHA512"]={sign:"dsa",hash:"sha512",id:new a("","hex")},c["DSA-RIPEMD160"]={sign:"dsa",hash:"rmd160",id:new a("","hex")},c["RSA-RIPEMD160"]=c.ripemd160WithRSA={sign:"rsa",hash:"rmd160",id:new a("3021300906052b2403020105000414","hex")},c["RSA-MD5"]=c.md5WithRSAEncryption={sign:"rsa",hash:"md5",id:new a("3020300c06082a864886f70d020505000410","hex")}}).call(this,a("buffer").Buffer)},{buffer:329}],337:[function(a,b,c){function d(){return Object.keys(g)}var e=a("./encrypter");c.createCipher=c.Cipher=e.createCipher,c.createCipheriv=c.Cipheriv=e.createCipheriv;var f=a("./decrypter");c.createDecipher=c.Decipher=f.createDecipher,c.createDecipheriv=c.Decipheriv=f.createDecipheriv;var g=a("./modes");c.listCiphers=c.getCiphers=d},{"./decrypter":339,"./encrypter":340,"./modes":342}],340:[function(a,b,c){(function(b){function d(a,c,f){return this instanceof d?(i.call(this),this._cache=new e,this._cipher=new h.AES(c),this._prev=new b(f.length),f.copy(this._prev),this._mode=a,void(this._autopadding=!0)):new d(a,c,f)}function e(){return this instanceof e?void(this.cache=new b("")):new e}function f(a,c,e){var f=k[a.toLowerCase()];if(!f)throw new TypeError("invalid suite type");if("string"==typeof e&&(e=new b(e)),"string"==typeof c&&(c=new b(c)),c.length!==f.key/8)throw new TypeError("invalid key length "+c.length);if(e.length!==f.iv)throw new TypeError("invalid iv length "+e.length);return"stream"===f.type?new m(o[f.mode],c,e):"auth"===f.type?new n(o[f.mode],c,e):new d(o[f.mode],c,e)}function g(a,b){var c=k[a.toLowerCase()];if(!c)throw new TypeError("invalid suite type");var d=l(b,c.key,c.iv);return f(a,d.key,d.iv)}var h=a("./aes"),i=a("./cipherBase"),j=a("inherits"),k=a("./modes"),l=a("./EVP_BytesToKey"),m=a("./streamCipher"),n=a("./authCipher");j(d,i),d.prototype._update=function(a){this._cache.add(a);for(var c,d,e=[];c=this._cache.get();)d=this._mode.encrypt(this,c),e.push(d);return b.concat(e)},d.prototype._final=function(){var a=this._cache.flush();if(this._autopadding)return a=this._mode.encrypt(this,a),this._cipher.scrub(),a;if("10101010101010101010101010101010"!==a.toString("hex"))throw this._cipher.scrub(),new Error("data not multiple of block length")},d.prototype.setAutoPadding=function(a){this._autopadding=!!a},e.prototype.add=function(a){this.cache=b.concat([this.cache,a])},e.prototype.get=function(){if(this.cache.length>15){var a=this.cache.slice(0,16);return this.cache=this.cache.slice(16),a}return null},e.prototype.flush=function(){for(var a=16-this.cache.length,c=new b(a),d=-1;++d<a;)c.writeUInt8(a,d);var e=b.concat([this.cache,c]);return e};var o={ECB:a("./modes/ecb"),CBC:a("./modes/cbc"),CFB:a("./modes/cfb"),CFB8:a("./modes/cfb8"),CFB1:a("./modes/cfb1"),OFB:a("./modes/ofb"),CTR:a("./modes/ctr"),GCM:a("./modes/ctr")};c.createCipheriv=f,c.createCipher=g}).call(this,a("buffer").Buffer)},{"./EVP_BytesToKey":334,"./aes":335,"./authCipher":336,"./cipherBase":338,"./modes":342,"./modes/cbc":343,"./modes/cfb":344,"./modes/cfb1":345,"./modes/cfb8":346,"./modes/ctr":347,"./modes/ecb":348,"./modes/ofb":349,"./streamCipher":351,buffer:329,inherits:476}],339:[function(a,b,c){(function(b){function d(a,c,f){return this instanceof d?(j.call(this),this._cache=new e,this._last=void 0,this._cipher=new i.AES(c),this._prev=new b(f.length),f.copy(this._prev),this._mode=a,void(this._autopadding=!0)):new d(a,c,f)}function e(){return this instanceof e?void(this.cache=new b("")):new e}function f(a){for(var b=a[15],c=-1;++c<b;)if(a[c+(16-b)]!==b)throw new Error("unable to decrypt data");return 16!==b?a.slice(0,16-b):void 0}function g(a,c,e){var f=l[a.toLowerCase()];if(!f)throw new TypeError("invalid suite type");if("string"==typeof e&&(e=new b(e)),"string"==typeof c&&(c=new b(c)),c.length!==f.key/8)throw new TypeError("invalid key length "+c.length);if(e.length!==f.iv)throw new TypeError("invalid iv length "+e.length);return"stream"===f.type?new m(p[f.mode],c,e,!0):"auth"===f.type?new n(p[f.mode],c,e,!0):new d(p[f.mode],c,e)}function h(a,b){var c=l[a.toLowerCase()];if(!c)throw new TypeError("invalid suite type");var d=o(b,c.key,c.iv);return g(a,d.key,d.iv)}var i=a("./aes"),j=a("./cipherBase"),k=a("inherits"),l=a("./modes"),m=a("./streamCipher"),n=a("./authCipher"),o=a("./EVP_BytesToKey");k(d,j),d.prototype._update=function(a){this._cache.add(a);for(var c,d,e=[];c=this._cache.get(this._autopadding);)d=this._mode.decrypt(this,c),e.push(d);return b.concat(e)},d.prototype._final=function(){var a=this._cache.flush();if(this._autopadding)return f(this._mode.decrypt(this,a));if(a)throw new Error("data not multiple of block length")},d.prototype.setAutoPadding=function(a){this._autopadding=!!a},e.prototype.add=function(a){this.cache=b.concat([this.cache,a])},e.prototype.get=function(a){var b;if(a){if(this.cache.length>16)return b=this.cache.slice(0,16),this.cache=this.cache.slice(16),b}else if(this.cache.length>=16)return b=this.cache.slice(0,16),this.cache=this.cache.slice(16),b;return null},e.prototype.flush=function(){return this.cache.length?this.cache:void 0};var p={ECB:a("./modes/ecb"),CBC:a("./modes/cbc"),CFB:a("./modes/cfb"),CFB8:a("./modes/cfb8"),CFB1:a("./modes/cfb1"),OFB:a("./modes/ofb"),CTR:a("./modes/ctr"),GCM:a("./modes/ctr")};c.createDecipher=h,c.createDecipheriv=g}).call(this,a("buffer").Buffer)},{"./EVP_BytesToKey":334,"./aes":335,"./authCipher":336,"./cipherBase":338,"./modes":342,"./modes/cbc":343,"./modes/cfb":344,"./modes/cfb1":345,"./modes/cfb8":346,"./modes/ctr":347,"./modes/ecb":348,"./modes/ofb":349,"./streamCipher":351,buffer:329,inherits:476}],351:[function(a,b,c){(function(c){function d(a,b,g,h){return this instanceof d?(f.call(this),this._cipher=new e.AES(b),this._prev=new c(g.length),this._cache=new c(""),this._secCache=new c(""),this._decrypt=h,g.copy(this._prev),void(this._mode=a)):new d(a,b,g)}var e=a("./aes"),f=a("./cipherBase"),g=a("inherits");g(d,f),b.exports=d,d.prototype._update=function(a){return this._mode.encrypt(this,a,this._decrypt)},d.prototype._final=function(){this._cipher.scrub()}}).call(this,a("buffer").Buffer)},{"./aes":335,"./cipherBase":338,buffer:329,inherits:476}],349:[function(a,b,c){(function(b){function d(a){return a._prev=a._cipher.encryptBlock(a._prev),a._prev}var e=a("buffer-xor");c.encrypt=function(a,c){for(;a._cache.length<c.length;)a._cache=b.concat([a._cache,d(a)]);var f=a._cache.slice(0,c.length);return a._cache=a._cache.slice(c.length),e(c,f)}}).call(this,a("buffer").Buffer)},{buffer:329,"buffer-xor":350}],348:[function(a,b,c){c.encrypt=function(a,b){return a._cipher.encryptBlock(b)},c.decrypt=function(a,b){return a._cipher.decryptBlock(b)}},{}],347:[function(a,b,c){(function(b){function d(a){for(var b,c=a.length;c--;){if(b=a.readUInt8(c),255!==b){b++,a.writeUInt8(b,c);break}a.writeUInt8(0,c)}}function e(a){var b=a._cipher.encryptBlock(a._prev);return d(a._prev),b}var f=a("buffer-xor");c.encrypt=function(a,c){for(;a._cache.length<c.length;)a._cache=b.concat([a._cache,e(a)]);var d=a._cache.slice(0,c.length);return a._cache=a._cache.slice(c.length),f(c,d)}}).call(this,a("buffer").Buffer)},{buffer:329,"buffer-xor":350}],346:[function(a,b,c){(function(a){function b(b,c,d){var e=b._cipher.encryptBlock(b._prev),f=e[0]^c;return b._prev=a.concat([b._prev.slice(1),new a([d?c:f])]),f}c.encrypt=function(c,d,e){for(var f=d.length,g=new a(f),h=-1;++h<f;)g[h]=b(c,d[h],e);return g}}).call(this,a("buffer").Buffer)},{buffer:329}],345:[function(a,b,c){(function(a){function b(a,b,c){for(var e,f,g,h=-1,i=8,j=0;++h<i;)e=a._cipher.encryptBlock(a._prev),f=b&1<<7-h?128:0,g=e[0]^f,j+=(128&g)>>h%8,a._prev=d(a._prev,c?f:g);return j}function d(b,c){var d=b.length,e=-1,f=new a(b.length);for(b=a.concat([b,new a([c])]);++e<d;)f[e]=b[e]<<1|b[e+1]>>7;return f}c.encrypt=function(c,d,e){for(var f=d.length,g=new a(f),h=-1;++h<f;)g[h]=b(c,d[h],e);return g}}).call(this,a("buffer").Buffer)},{buffer:329}],344:[function(a,b,c){(function(b){function d(a,c,d){var f=c.length,g=e(c,a._cache);return a._cache=a._cache.slice(f),a._prev=b.concat([a._prev,d?c:g]),g}var e=a("buffer-xor");c.encrypt=function(a,c,e){for(var f,g=new b("");c.length;){if(0===a._cache.length&&(a._cache=a._cipher.encryptBlock(a._prev),a._prev=new b("")),!(a._cache.length<=c.length)){g=b.concat([g,d(a,c,e)]);break}f=a._cache.length,g=b.concat([g,d(a,c.slice(0,f),e)]),c=c.slice(f)}return g}}).call(this,a("buffer").Buffer)},{buffer:329,"buffer-xor":350}],343:[function(a,b,c){var d=a("buffer-xor");c.encrypt=function(a,b){var c=d(b,a._prev);return a._prev=a._cipher.encryptBlock(c),a._prev},c.decrypt=function(a,b){var c=a._prev;a._prev=b;var e=a._cipher.decryptBlock(b);return d(e,c)}},{"buffer-xor":350}],342:[function(a,b,c){c["aes-128-ecb"]={cipher:"AES",key:128,iv:0,mode:"ECB",type:"block"},c["aes-192-ecb"]={cipher:"AES",key:192,iv:0,mode:"ECB",type:"block"},c["aes-256-ecb"]={cipher:"AES",key:256,iv:0,mode:"ECB",type:"block"},c["aes-128-cbc"]={cipher:"AES",key:128,iv:16,mode:"CBC",type:"block"},c["aes-192-cbc"]={cipher:"AES",key:192,iv:16,mode:"CBC",type:"block"},c["aes-256-cbc"]={cipher:"AES",key:256,iv:16,mode:"CBC",type:"block"},c.aes128=c["aes-128-cbc"],c.aes192=c["aes-192-cbc"],c.aes256=c["aes-256-cbc"],c["aes-128-cfb"]={cipher:"AES",key:128,iv:16,mode:"CFB",type:"stream"},c["aes-192-cfb"]={cipher:"AES",key:192,iv:16,mode:"CFB",type:"stream"},c["aes-256-cfb"]={cipher:"AES",key:256,iv:16,mode:"CFB",type:"stream"},c["aes-128-cfb8"]={cipher:"AES",key:128,iv:16,mode:"CFB8",type:"stream"},c["aes-192-cfb8"]={cipher:"AES",key:192,iv:16,mode:"CFB8",type:"stream"},c["aes-256-cfb8"]={cipher:"AES",key:256,iv:16,mode:"CFB8",type:"stream"},c["aes-128-cfb1"]={cipher:"AES",key:128,iv:16,mode:"CFB1",type:"stream"},c["aes-192-cfb1"]={cipher:"AES",key:192,iv:16,mode:"CFB1",type:"stream"},c["aes-256-cfb1"]={cipher:"AES",key:256,iv:16,mode:"CFB1",type:"stream"},c["aes-128-ofb"]={cipher:"AES",key:128,iv:16,mode:"OFB",type:"stream"},c["aes-192-ofb"]={cipher:"AES",key:192,iv:16,mode:"OFB",type:"stream"},c["aes-256-ofb"]={cipher:"AES",key:256,iv:16,mode:"OFB",type:"stream"},c["aes-128-ctr"]={cipher:"AES",key:128,iv:16,mode:"CTR",type:"stream"},c["aes-192-ctr"]={cipher:"AES",key:192,iv:16,mode:"CTR",type:"stream"},c["aes-256-ctr"]={cipher:"AES",key:256,iv:16,mode:"CTR",type:"stream"},c["aes-128-gcm"]={cipher:"AES",key:128,iv:12,mode:"GCM",type:"auth"},c["aes-192-gcm"]={cipher:"AES",key:192,iv:12,mode:"GCM",type:"auth"},c["aes-256-gcm"]={cipher:"AES",key:256,iv:12,mode:"GCM",type:"auth"}},{}],336:[function(a,b,c){(function(c){function d(a,b,e,h){if(!(this instanceof d))return new d(a,b,e);g.call(this),this._finID=c.concat([e,new c([0,0,0,1])]),e=c.concat([e,new c([0,0,0,2])]),this._cipher=new f.AES(b),this._prev=new c(e.length),this._cache=new c(""),this._secCache=new c(""),this._decrypt=h,this._alen=0,this._len=0,e.copy(this._prev),this._mode=a;var j=new c(4);j.fill(0),this._ghash=new i(this._cipher.encryptBlock(j)),this._authTag=null,this._called=!1}function e(a,b){var c=0;a.length!==b.length&&c++;for(var d=Math.min(a.length,b.length),e=-1;++e<d;)c+=a[e]^b[e];return c}var f=a("./aes"),g=a("./cipherBase"),h=a("inherits"),i=a("./ghash"),j=a("buffer-xor");h(d,g),b.exports=d,d.prototype._update=function(a){if(!this._called&&this._alen){var b=16-this._alen%16;16>b&&(b=new c(b),b.fill(0),this._ghash.update(b))}this._called=!0;var d=this._mode.encrypt(this,a);return this._decrypt?this._ghash.update(a):this._ghash.update(d),this._len+=a.length,d},d.prototype._final=function(){if(this._decrypt&&!this._authTag)throw new Error("Unsupported state or unable to authenticate data");var a=j(this._ghash["final"](8*this._alen,8*this._len),this._cipher.encryptBlock(this._finID));if(this._decrypt){if(e(a,this._authTag))throw new Error("Unsupported state or unable to authenticate data");
}else this._authTag=a;this._cipher.scrub()},d.prototype.getAuthTag=function(){if(!this._decrypt&&c.isBuffer(this._authTag))return this._authTag;throw new Error("Attempting to get auth tag in unsupported state")},d.prototype.setAuthTag=function(a){if(!this._decrypt)throw new Error("Attempting to set auth tag in unsupported state");this._authTag=a},d.prototype.setAAD=function(a){if(this._called)throw new Error("Attempting to set AAD in unsupported state");this._ghash.update(a),this._alen+=a.length}}).call(this,a("buffer").Buffer)},{"./aes":335,"./cipherBase":338,"./ghash":341,buffer:329,"buffer-xor":350,inherits:476}],350:[function(a,b,c){(function(a){b.exports=function(b,c){for(var d=Math.min(b.length,c.length),e=new a(d),f=0;d>f;++f)e[f]=b[f]^c[f];return e}}).call(this,a("buffer").Buffer)},{buffer:329}],341:[function(a,b,c){(function(a){function c(b){this.h=b,this.state=new a(16),this.state.fill(0),this.cache=new a("")}function d(a){return[a.readUInt32BE(0),a.readUInt32BE(4),a.readUInt32BE(8),a.readUInt32BE(12)]}function e(b){b=b.map(f);var c=new a(16);return c.writeUInt32BE(b[0],0),c.writeUInt32BE(b[1],4),c.writeUInt32BE(b[2],8),c.writeUInt32BE(b[3],12),c}function f(a){var b,c;return b=a>i||0>a?(c=Math.abs(a)%i,0>a?i-c:c):a}function g(a,b){return[a[0]^b[0],a[1]^b[1],a[2]^b[2],a[3]^b[3]]}var h=new a(16);h.fill(0),b.exports=c,c.prototype.ghash=function(a){for(var b=-1;++b<a.length;)this.state[b]^=a[b];this._multiply()},c.prototype._multiply=function(){for(var a,b,c,f=d(this.h),h=[0,0,0,0],i=-1;++i<128;){for(b=0!==(this.state[~~(i/8)]&1<<7-i%8),b&&(h=g(h,f)),c=0!==(1&f[3]),a=3;a>0;a--)f[a]=f[a]>>>1|(1&f[a-1])<<31;f[0]=f[0]>>>1,c&&(f[0]=f[0]^225<<24)}this.state=e(h)},c.prototype.update=function(b){this.cache=a.concat([this.cache,b]);for(var c;this.cache.length>=16;)c=this.cache.slice(0,16),this.cache=this.cache.slice(16),this.ghash(c)},c.prototype["final"]=function(b,c){return this.cache.length&&this.ghash(a.concat([this.cache,h],16)),this.ghash(e([0,b,0,c])),this.state};var i=Math.pow(2,32)}).call(this,a("buffer").Buffer)},{buffer:329}],338:[function(a,b,c){(function(c){function d(){e.call(this),this._base64Cache=new c("")}var e=a("stream").Transform,f=a("inherits");b.exports=d,f(d,e),d.prototype.update=function(a,b,d){"string"==typeof a&&(a=new c(a,b));var e=this._update(a);return d&&(e=this._toString(e,d)),e},d.prototype._transform=function(a,b,c){this.push(this._update(a)),c()},d.prototype._flush=function(a){try{this.push(this._final())}catch(b){return a(b)}a()},d.prototype["final"]=function(a){var b=this._final()||new c("");return a&&(b=this._toString(b,a,!0)),b},d.prototype._toString=function(a,b,d){if("base64"!==b)return a.toString(b);this._base64Cache=c.concat([this._base64Cache,a]);var e;if(d)return e=this._base64Cache,this._base64Cache=null,e.toString("base64");var f=this._base64Cache.length,g=f%3;if(!g)return e=this._base64Cache,this._base64Cache=new c(""),e.toString("base64");var h=f-g;return h?(e=this._base64Cache.slice(0,h),this._base64Cache=this._base64Cache.slice(-g),e.toString("base64")):""}}).call(this,a("buffer").Buffer)},{buffer:329,inherits:476,stream:495}],495:[function(a,b,c){function d(){e.call(this)}b.exports=d;var e=a("events").EventEmitter,f=a("inherits");f(d,e),d.Readable=a("readable-stream/readable.js"),d.Writable=a("readable-stream/writable.js"),d.Duplex=a("readable-stream/duplex.js"),d.Transform=a("readable-stream/transform.js"),d.PassThrough=a("readable-stream/passthrough.js"),d.Stream=d,d.prototype.pipe=function(a,b){function c(b){a.writable&&!1===a.write(b)&&j.pause&&j.pause()}function d(){j.readable&&j.resume&&j.resume()}function f(){k||(k=!0,a.end())}function g(){k||(k=!0,"function"==typeof a.destroy&&a.destroy())}function h(a){if(i(),0===e.listenerCount(this,"error"))throw a}function i(){j.removeListener("data",c),a.removeListener("drain",d),j.removeListener("end",f),j.removeListener("close",g),j.removeListener("error",h),a.removeListener("error",h),j.removeListener("end",i),j.removeListener("close",i),a.removeListener("close",i)}var j=this;j.on("data",c),a.on("drain",d),a._isStdio||b&&b.end===!1||(j.on("end",f),j.on("close",g));var k=!1;return j.on("error",h),a.on("error",h),j.on("end",i),j.on("close",i),a.on("close",i),a.emit("pipe",j),a}},{events:475,inherits:476,"readable-stream/duplex.js":484,"readable-stream/passthrough.js":491,"readable-stream/readable.js":492,"readable-stream/transform.js":493,"readable-stream/writable.js":494}],494:[function(a,b,c){b.exports=a("./lib/_stream_writable.js")},{"./lib/_stream_writable.js":489}],493:[function(a,b,c){b.exports=a("./lib/_stream_transform.js")},{"./lib/_stream_transform.js":488}],492:[function(a,b,c){c=b.exports=a("./lib/_stream_readable.js"),c.Stream=a("stream"),c.Readable=c,c.Writable=a("./lib/_stream_writable.js"),c.Duplex=a("./lib/_stream_duplex.js"),c.Transform=a("./lib/_stream_transform.js"),c.PassThrough=a("./lib/_stream_passthrough.js")},{"./lib/_stream_duplex.js":485,"./lib/_stream_passthrough.js":486,"./lib/_stream_readable.js":487,"./lib/_stream_transform.js":488,"./lib/_stream_writable.js":489,stream:495}],491:[function(a,b,c){b.exports=a("./lib/_stream_passthrough.js")},{"./lib/_stream_passthrough.js":486}],486:[function(a,b,c){function d(a){return this instanceof d?void e.call(this,a):new d(a)}b.exports=d;var e=a("./_stream_transform"),f=a("core-util-is");f.inherits=a("inherits"),f.inherits(d,e),d.prototype._transform=function(a,b,c){c(null,a)}},{"./_stream_transform":488,"core-util-is":490,inherits:476}],488:[function(a,b,c){function d(a,b){this.afterTransform=function(a,c){return e(b,a,c)},this.needTransform=!1,this.transforming=!1,this.writecb=null,this.writechunk=null}function e(a,b,c){var d=a._transformState;d.transforming=!1;var e=d.writecb;if(!e)return a.emit("error",new Error("no writecb in Transform class"));d.writechunk=null,d.writecb=null,i.isNullOrUndefined(c)||a.push(c),e&&e(b);var f=a._readableState;f.reading=!1,(f.needReadable||f.length<f.highWaterMark)&&a._read(f.highWaterMark)}function f(a){if(!(this instanceof f))return new f(a);h.call(this,a),this._transformState=new d(a,this);var b=this;this._readableState.needReadable=!0,this._readableState.sync=!1,this.once("prefinish",function(){i.isFunction(this._flush)?this._flush(function(a){g(b,a)}):g(b)})}function g(a,b){if(b)return a.emit("error",b);var c=a._writableState,d=a._transformState;if(c.length)throw new Error("calling transform done when ws.length != 0");if(d.transforming)throw new Error("calling transform done when still transforming");return a.push(null)}b.exports=f;var h=a("./_stream_duplex"),i=a("core-util-is");i.inherits=a("inherits"),i.inherits(f,h),f.prototype.push=function(a,b){return this._transformState.needTransform=!1,h.prototype.push.call(this,a,b)},f.prototype._transform=function(a,b,c){throw new Error("not implemented")},f.prototype._write=function(a,b,c){var d=this._transformState;if(d.writecb=c,d.writechunk=a,d.writeencoding=b,!d.transforming){var e=this._readableState;(d.needTransform||e.needReadable||e.length<e.highWaterMark)&&this._read(e.highWaterMark)}},f.prototype._read=function(a){var b=this._transformState;i.isNull(b.writechunk)||!b.writecb||b.transforming?b.needTransform=!0:(b.transforming=!0,this._transform(b.writechunk,b.writeencoding,b.afterTransform))}},{"./_stream_duplex":485,"core-util-is":490,inherits:476}],484:[function(a,b,c){b.exports=a("./lib/_stream_duplex.js")},{"./lib/_stream_duplex.js":485}],485:[function(a,b,c){(function(c){function d(a){return this instanceof d?(i.call(this,a),j.call(this,a),a&&a.readable===!1&&(this.readable=!1),a&&a.writable===!1&&(this.writable=!1),this.allowHalfOpen=!0,a&&a.allowHalfOpen===!1&&(this.allowHalfOpen=!1),void this.once("end",e)):new d(a)}function e(){this.allowHalfOpen||this._writableState.ended||c.nextTick(this.end.bind(this))}function f(a,b){for(var c=0,d=a.length;d>c;c++)b(a[c],c)}b.exports=d;var g=Object.keys||function(a){var b=[];for(var c in a)b.push(c);return b},h=a("core-util-is");h.inherits=a("inherits");var i=a("./_stream_readable"),j=a("./_stream_writable");h.inherits(d,i),f(g(j.prototype),function(a){d.prototype[a]||(d.prototype[a]=j.prototype[a])})}).call(this,a("_process"))},{"./_stream_readable":487,"./_stream_writable":489,_process:479,"core-util-is":490,inherits:476}],489:[function(a,b,c){(function(c){function d(a,b,c){this.chunk=a,this.encoding=b,this.callback=c}function e(b,c){var d=a("./_stream_duplex");b=b||{};var e=b.highWaterMark,f=b.objectMode?16:16384;this.highWaterMark=e||0===e?e:f,this.objectMode=!!b.objectMode,c instanceof d&&(this.objectMode=this.objectMode||!!b.writableObjectMode),this.highWaterMark=~~this.highWaterMark,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1;var g=b.decodeStrings===!1;this.decodeStrings=!g,this.defaultEncoding=b.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(a){n(c,a)},this.writecb=null,this.writelen=0,this.buffer=[],this.pendingcb=0,this.prefinished=!1,this.errorEmitted=!1}function f(b){var c=a("./_stream_duplex");return this instanceof f||this instanceof c?(this._writableState=new e(b,this),this.writable=!0,void x.call(this)):new f(b)}function g(a,b,d){var e=new Error("write after end");a.emit("error",e),c.nextTick(function(){d(e)})}function h(a,b,d,e){var f=!0;if(!(w.isBuffer(d)||w.isString(d)||w.isNullOrUndefined(d)||b.objectMode)){var g=new TypeError("Invalid non-string/buffer chunk");a.emit("error",g),c.nextTick(function(){e(g)}),f=!1}return f}function i(a,b,c){return!a.objectMode&&a.decodeStrings!==!1&&w.isString(b)&&(b=new v(b,c)),b}function j(a,b,c,e,f){c=i(b,c,e),w.isBuffer(c)&&(e="buffer");var g=b.objectMode?1:c.length;b.length+=g;var h=b.length<b.highWaterMark;return h||(b.needDrain=!0),b.writing||b.corked?b.buffer.push(new d(c,e,f)):k(a,b,!1,g,c,e,f),h}function k(a,b,c,d,e,f,g){b.writelen=d,b.writecb=g,b.writing=!0,b.sync=!0,c?a._writev(e,b.onwrite):a._write(e,f,b.onwrite),b.sync=!1}function l(a,b,d,e,f){d?c.nextTick(function(){b.pendingcb--,f(e)}):(b.pendingcb--,f(e)),a._writableState.errorEmitted=!0,a.emit("error",e)}function m(a){a.writing=!1,a.writecb=null,a.length-=a.writelen,a.writelen=0}function n(a,b){var d=a._writableState,e=d.sync,f=d.writecb;if(m(d),b)l(a,d,e,b,f);else{var g=r(a,d);g||d.corked||d.bufferProcessing||!d.buffer.length||q(a,d),e?c.nextTick(function(){o(a,d,g,f)}):o(a,d,g,f)}}function o(a,b,c,d){c||p(a,b),b.pendingcb--,d(),t(a,b)}function p(a,b){0===b.length&&b.needDrain&&(b.needDrain=!1,a.emit("drain"))}function q(a,b){if(b.bufferProcessing=!0,a._writev&&b.buffer.length>1){for(var c=[],d=0;d<b.buffer.length;d++)c.push(b.buffer[d].callback);b.pendingcb++,k(a,b,!0,b.length,b.buffer,"",function(a){for(var d=0;d<c.length;d++)b.pendingcb--,c[d](a)}),b.buffer=[]}else{for(var d=0;d<b.buffer.length;d++){var e=b.buffer[d],f=e.chunk,g=e.encoding,h=e.callback,i=b.objectMode?1:f.length;if(k(a,b,!1,i,f,g,h),b.writing){d++;break}}d<b.buffer.length?b.buffer=b.buffer.slice(d):b.buffer.length=0}b.bufferProcessing=!1}function r(a,b){return b.ending&&0===b.length&&!b.finished&&!b.writing}function s(a,b){b.prefinished||(b.prefinished=!0,a.emit("prefinish"))}function t(a,b){var c=r(a,b);return c&&(0===b.pendingcb?(s(a,b),b.finished=!0,a.emit("finish")):s(a,b)),c}function u(a,b,d){b.ending=!0,t(a,b),d&&(b.finished?c.nextTick(d):a.once("finish",d)),b.ended=!0}b.exports=f;var v=a("buffer").Buffer;f.WritableState=e;var w=a("core-util-is");w.inherits=a("inherits");var x=a("stream");w.inherits(f,x),f.prototype.pipe=function(){this.emit("error",new Error("Cannot pipe. Not readable."))},f.prototype.write=function(a,b,c){var d=this._writableState,e=!1;return w.isFunction(b)&&(c=b,b=null),w.isBuffer(a)?b="buffer":b||(b=d.defaultEncoding),w.isFunction(c)||(c=function(){}),d.ended?g(this,d,c):h(this,d,a,c)&&(d.pendingcb++,e=j(this,d,a,b,c)),e},f.prototype.cork=function(){var a=this._writableState;a.corked++},f.prototype.uncork=function(){var a=this._writableState;a.corked&&(a.corked--,a.writing||a.corked||a.finished||a.bufferProcessing||!a.buffer.length||q(this,a))},f.prototype._write=function(a,b,c){c(new Error("not implemented"))},f.prototype._writev=null,f.prototype.end=function(a,b,c){var d=this._writableState;w.isFunction(a)?(c=a,a=null,b=null):w.isFunction(b)&&(c=b,b=null),w.isNullOrUndefined(a)||this.write(a,b),d.corked&&(d.corked=1,this.uncork()),d.ending||d.finished||u(this,d,c)}}).call(this,a("_process"))},{"./_stream_duplex":485,_process:479,buffer:329,"core-util-is":490,inherits:476,stream:495}],487:[function(a,b,c){(function(c){function d(b,c){var d=a("./_stream_duplex");b=b||{};var e=b.highWaterMark,f=b.objectMode?16:16384;this.highWaterMark=e||0===e?e:f,this.highWaterMark=~~this.highWaterMark,this.buffer=[],this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.objectMode=!!b.objectMode,c instanceof d&&(this.objectMode=this.objectMode||!!b.readableObjectMode),this.defaultEncoding=b.defaultEncoding||"utf8",this.ranOut=!1,this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,b.encoding&&(C||(C=a("string_decoder/").StringDecoder),this.decoder=new C(b.encoding),this.encoding=b.encoding)}function e(b){a("./_stream_duplex");return this instanceof e?(this._readableState=new d(b,this),this.readable=!0,void A.call(this)):new e(b)}function f(a,b,c,d,e){var f=j(b,c);if(f)a.emit("error",f);else if(B.isNullOrUndefined(c))b.reading=!1,b.ended||k(a,b);else if(b.objectMode||c&&c.length>0)if(b.ended&&!e){var h=new Error("stream.push() after EOF");a.emit("error",h)}else if(b.endEmitted&&e){var h=new Error("stream.unshift() after end event");a.emit("error",h)}else!b.decoder||e||d||(c=b.decoder.write(c)),e||(b.reading=!1),b.flowing&&0===b.length&&!b.sync?(a.emit("data",c),a.read(0)):(b.length+=b.objectMode?1:c.length,e?b.buffer.unshift(c):b.buffer.push(c),b.needReadable&&l(a)),n(a,b);else e||(b.reading=!1);return g(b)}function g(a){return!a.ended&&(a.needReadable||a.length<a.highWaterMark||0===a.length)}function h(a){if(a>=E)a=E;else{a--;for(var b=1;32>b;b<<=1)a|=a>>b;a++}return a}function i(a,b){return 0===b.length&&b.ended?0:b.objectMode?0===a?0:1:isNaN(a)||B.isNull(a)?b.flowing&&b.buffer.length?b.buffer[0].length:b.length:0>=a?0:(a>b.highWaterMark&&(b.highWaterMark=h(a)),a>b.length?b.ended?b.length:(b.needReadable=!0,0):a)}function j(a,b){var c=null;return B.isBuffer(b)||B.isString(b)||B.isNullOrUndefined(b)||a.objectMode||(c=new TypeError("Invalid non-string/buffer chunk")),c}function k(a,b){if(b.decoder&&!b.ended){var c=b.decoder.end();c&&c.length&&(b.buffer.push(c),b.length+=b.objectMode?1:c.length)}b.ended=!0,l(a)}function l(a){var b=a._readableState;b.needReadable=!1,b.emittedReadable||(D("emitReadable",b.flowing),b.emittedReadable=!0,b.sync?c.nextTick(function(){m(a)}):m(a))}function m(a){D("emit readable"),a.emit("readable"),s(a)}function n(a,b){b.readingMore||(b.readingMore=!0,c.nextTick(function(){o(a,b)}))}function o(a,b){for(var c=b.length;!b.reading&&!b.flowing&&!b.ended&&b.length<b.highWaterMark&&(D("maybeReadMore read 0"),a.read(0),c!==b.length);)c=b.length;b.readingMore=!1}function p(a){return function(){var b=a._readableState;D("pipeOnDrain",b.awaitDrain),b.awaitDrain&&b.awaitDrain--,0===b.awaitDrain&&z.listenerCount(a,"data")&&(b.flowing=!0,s(a))}}function q(a,b){b.resumeScheduled||(b.resumeScheduled=!0,c.nextTick(function(){r(a,b)}))}function r(a,b){b.resumeScheduled=!1,a.emit("resume"),s(a),b.flowing&&!b.reading&&a.read(0)}function s(a){var b=a._readableState;if(D("flow",b.flowing),b.flowing)do var c=a.read();while(null!==c&&b.flowing)}function t(a,b){var c,d=b.buffer,e=b.length,f=!!b.decoder,g=!!b.objectMode;if(0===d.length)return null;if(0===e)c=null;else if(g)c=d.shift();else if(!a||a>=e)c=f?d.join(""):y.concat(d,e),d.length=0;else if(a<d[0].length){var h=d[0];c=h.slice(0,a),d[0]=h.slice(a)}else if(a===d[0].length)c=d.shift();else{c=f?"":new y(a);for(var i=0,j=0,k=d.length;k>j&&a>i;j++){var h=d[0],l=Math.min(a-i,h.length);f?c+=h.slice(0,l):h.copy(c,i,0,l),l<h.length?d[0]=h.slice(l):d.shift(),i+=l}}return c}function u(a){var b=a._readableState;if(b.length>0)throw new Error("endReadable called on non-empty stream");b.endEmitted||(b.ended=!0,c.nextTick(function(){b.endEmitted||0!==b.length||(b.endEmitted=!0,a.readable=!1,a.emit("end"))}))}function v(a,b){for(var c=0,d=a.length;d>c;c++)b(a[c],c)}function w(a,b){for(var c=0,d=a.length;d>c;c++)if(a[c]===b)return c;return-1}b.exports=e;var x=a("isarray"),y=a("buffer").Buffer;e.ReadableState=d;var z=a("events").EventEmitter;z.listenerCount||(z.listenerCount=function(a,b){return a.listeners(b).length});var A=a("stream"),B=a("core-util-is");B.inherits=a("inherits");var C,D=a("util");D=D&&D.debuglog?D.debuglog("stream"):function(){},B.inherits(e,A),e.prototype.push=function(a,b){var c=this._readableState;return B.isString(a)&&!c.objectMode&&(b=b||c.defaultEncoding,b!==c.encoding&&(a=new y(a,b),b="")),f(this,c,a,b,!1)},e.prototype.unshift=function(a){var b=this._readableState;return f(this,b,a,"",!0)},e.prototype.setEncoding=function(b){return C||(C=a("string_decoder/").StringDecoder),this._readableState.decoder=new C(b),this._readableState.encoding=b,this};var E=8388608;e.prototype.read=function(a){D("read",a);var b=this._readableState,c=a;if((!B.isNumber(a)||a>0)&&(b.emittedReadable=!1),0===a&&b.needReadable&&(b.length>=b.highWaterMark||b.ended))return D("read: emitReadable",b.length,b.ended),0===b.length&&b.ended?u(this):l(this),null;if(a=i(a,b),0===a&&b.ended)return 0===b.length&&u(this),null;var d=b.needReadable;D("need readable",d),(0===b.length||b.length-a<b.highWaterMark)&&(d=!0,D("length less than watermark",d)),(b.ended||b.reading)&&(d=!1,D("reading or ended",d)),d&&(D("do read"),b.reading=!0,b.sync=!0,0===b.length&&(b.needReadable=!0),this._read(b.highWaterMark),b.sync=!1),d&&!b.reading&&(a=i(c,b));var e;return e=a>0?t(a,b):null,B.isNull(e)&&(b.needReadable=!0,a=0),b.length-=a,0!==b.length||b.ended||(b.needReadable=!0),c!==a&&b.ended&&0===b.length&&u(this),B.isNull(e)||this.emit("data",e),e},e.prototype._read=function(a){this.emit("error",new Error("not implemented"))},e.prototype.pipe=function(a,b){function d(a){D("onunpipe"),a===l&&f()}function e(){D("onend"),a.end()}function f(){D("cleanup"),a.removeListener("close",i),a.removeListener("finish",j),a.removeListener("drain",q),a.removeListener("error",h),a.removeListener("unpipe",d),l.removeListener("end",e),l.removeListener("end",f),l.removeListener("data",g),!m.awaitDrain||a._writableState&&!a._writableState.needDrain||q()}function g(b){D("ondata");var c=a.write(b);!1===c&&(D("false write response, pause",l._readableState.awaitDrain),l._readableState.awaitDrain++,l.pause())}function h(b){D("onerror",b),k(),a.removeListener("error",h),0===z.listenerCount(a,"error")&&a.emit("error",b)}function i(){a.removeListener("finish",j),k()}function j(){D("onfinish"),a.removeListener("close",i),k()}function k(){D("unpipe"),l.unpipe(a)}var l=this,m=this._readableState;switch(m.pipesCount){case 0:m.pipes=a;break;case 1:m.pipes=[m.pipes,a];break;default:m.pipes.push(a)}m.pipesCount+=1,D("pipe count=%d opts=%j",m.pipesCount,b);var n=(!b||b.end!==!1)&&a!==c.stdout&&a!==c.stderr,o=n?e:f;m.endEmitted?c.nextTick(o):l.once("end",o),a.on("unpipe",d);var q=p(l);return a.on("drain",q),l.on("data",g),a._events&&a._events.error?x(a._events.error)?a._events.error.unshift(h):a._events.error=[h,a._events.error]:a.on("error",h),a.once("close",i),a.once("finish",j),a.emit("pipe",l),m.flowing||(D("pipe resume"),l.resume()),a},e.prototype.unpipe=function(a){var b=this._readableState;if(0===b.pipesCount)return this;if(1===b.pipesCount)return a&&a!==b.pipes?this:(a||(a=b.pipes),b.pipes=null,b.pipesCount=0,b.flowing=!1,a&&a.emit("unpipe",this),this);if(!a){var c=b.pipes,d=b.pipesCount;b.pipes=null,b.pipesCount=0,b.flowing=!1;for(var e=0;d>e;e++)c[e].emit("unpipe",this);return this}var e=w(b.pipes,a);return-1===e?this:(b.pipes.splice(e,1),b.pipesCount-=1,1===b.pipesCount&&(b.pipes=b.pipes[0]),a.emit("unpipe",this),this)},e.prototype.on=function(a,b){var d=A.prototype.on.call(this,a,b);if("data"===a&&!1!==this._readableState.flowing&&this.resume(),"readable"===a&&this.readable){var e=this._readableState;if(!e.readableListening)if(e.readableListening=!0,e.emittedReadable=!1,e.needReadable=!0,e.reading)e.length&&l(this,e);else{var f=this;c.nextTick(function(){D("readable nexttick read 0"),f.read(0)})}}return d},e.prototype.addListener=e.prototype.on,e.prototype.resume=function(){var a=this._readableState;return a.flowing||(D("resume"),a.flowing=!0,a.reading||(D("resume read 0"),this.read(0)),q(this,a)),this},e.prototype.pause=function(){return D("call pause flowing=%j",this._readableState.flowing),!1!==this._readableState.flowing&&(D("pause"),this._readableState.flowing=!1,this.emit("pause")),this},e.prototype.wrap=function(a){var b=this._readableState,c=!1,d=this;a.on("end",function(){if(D("wrapped end"),b.decoder&&!b.ended){var a=b.decoder.end();a&&a.length&&d.push(a)}d.push(null)}),a.on("data",function(e){if(D("wrapped data"),b.decoder&&(e=b.decoder.write(e)),e&&(b.objectMode||e.length)){var f=d.push(e);f||(c=!0,a.pause())}});for(var e in a)B.isFunction(a[e])&&B.isUndefined(this[e])&&(this[e]=function(b){return function(){return a[b].apply(a,arguments)}}(e));var f=["error","close","destroy","pause","resume"];return v(f,function(b){a.on(b,d.emit.bind(d,b))}),d._read=function(b){D("wrapped _read",b),c&&(c=!1,a.resume())},d},e._fromList=t}).call(this,a("_process"))},{"./_stream_duplex":485,_process:479,buffer:329,"core-util-is":490,events:475,inherits:476,isarray:477,stream:495,"string_decoder/":496,util:328}],496:[function(a,b,c){function d(a){if(a&&!i(a))throw new Error("Unknown encoding: "+a)}function e(a){return a.toString(this.encoding)}function f(a){this.charReceived=a.length%2,this.charLength=this.charReceived?2:0}function g(a){this.charReceived=a.length%3,this.charLength=this.charReceived?3:0}var h=a("buffer").Buffer,i=h.isEncoding||function(a){switch(a&&a.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}},j=c.StringDecoder=function(a){switch(this.encoding=(a||"utf8").toLowerCase().replace(/[-_]/,""),d(a),this.encoding){case"utf8":this.surrogateSize=3;break;case"ucs2":case"utf16le":this.surrogateSize=2,this.detectIncompleteChar=f;break;case"base64":this.surrogateSize=3,this.detectIncompleteChar=g;break;default:return void(this.write=e)}this.charBuffer=new h(6),this.charReceived=0,this.charLength=0};j.prototype.write=function(a){for(var b="";this.charLength;){var c=a.length>=this.charLength-this.charReceived?this.charLength-this.charReceived:a.length;if(a.copy(this.charBuffer,this.charReceived,0,c),this.charReceived+=c,this.charReceived<this.charLength)return"";a=a.slice(c,a.length),b=this.charBuffer.slice(0,this.charLength).toString(this.encoding);var d=b.charCodeAt(b.length-1);if(!(d>=55296&&56319>=d)){if(this.charReceived=this.charLength=0,0===a.length)return b;break}this.charLength+=this.surrogateSize,b=""}this.detectIncompleteChar(a);var e=a.length;this.charLength&&(a.copy(this.charBuffer,0,a.length-this.charReceived,e),e-=this.charReceived),b+=a.toString(this.encoding,0,e);var e=b.length-1,d=b.charCodeAt(e);if(d>=55296&&56319>=d){var f=this.surrogateSize;return this.charLength+=f,this.charReceived+=f,this.charBuffer.copy(this.charBuffer,f,0,f),a.copy(this.charBuffer,0,0,f),b.substring(0,e)}return b},j.prototype.detectIncompleteChar=function(a){for(var b=a.length>=3?3:a.length;b>0;b--){var c=a[a.length-b];if(1==b&&c>>5==6){this.charLength=2;break}if(2>=b&&c>>4==14){this.charLength=3;break}if(3>=b&&c>>3==30){this.charLength=4;break}}this.charReceived=b},j.prototype.end=function(a){var b="";if(a&&a.length&&(b=this.write(a)),this.charReceived){var c=this.charReceived,d=this.charBuffer,e=this.encoding;b+=d.slice(0,c).toString(e)}return b}},{buffer:329}],490:[function(a,b,c){(function(a){function b(a){return Array.isArray(a)}function d(a){return"boolean"==typeof a}function e(a){return null===a}function f(a){return null==a}function g(a){return"number"==typeof a}function h(a){return"string"==typeof a}function i(a){return"symbol"==typeof a}function j(a){return void 0===a}function k(a){return l(a)&&"[object RegExp]"===r(a)}function l(a){return"object"==typeof a&&null!==a}function m(a){return l(a)&&"[object Date]"===r(a)}function n(a){return l(a)&&("[object Error]"===r(a)||a instanceof Error)}function o(a){return"function"==typeof a}function p(a){return null===a||"boolean"==typeof a||"number"==typeof a||"string"==typeof a||"symbol"==typeof a||"undefined"==typeof a}function q(b){return a.isBuffer(b)}function r(a){return Object.prototype.toString.call(a)}c.isArray=b,c.isBoolean=d,c.isNull=e,c.isNullOrUndefined=f,c.isNumber=g,c.isString=h,c.isSymbol=i,c.isUndefined=j,c.isRegExp=k,c.isObject=l,c.isDate=m,c.isError=n,c.isFunction=o,c.isPrimitive=p,c.isBuffer=q}).call(this,a("buffer").Buffer)},{buffer:329}],477:[function(a,b,c){b.exports=Array.isArray||function(a){return"[object Array]"==Object.prototype.toString.call(a)}},{}],328:[function(a,b,c){arguments[4][327][0].apply(c,arguments)},{dup:327}],475:[function(a,b,c){function d(){this._events=this._events||{},this._maxListeners=this._maxListeners||void 0}function e(a){return"function"==typeof a}function f(a){return"number"==typeof a}function g(a){return"object"==typeof a&&null!==a}function h(a){return void 0===a}b.exports=d,d.EventEmitter=d,d.prototype._events=void 0,d.prototype._maxListeners=void 0,d.defaultMaxListeners=10,d.prototype.setMaxListeners=function(a){if(!f(a)||0>a||isNaN(a))throw TypeError("n must be a positive number");return this._maxListeners=a,this},d.prototype.emit=function(a){var b,c,d,f,i,j;if(this._events||(this._events={}),"error"===a&&(!this._events.error||g(this._events.error)&&!this._events.error.length)){if(b=arguments[1],b instanceof Error)throw b;throw TypeError('Uncaught, unspecified "error" event.')}if(c=this._events[a],h(c))return!1;if(e(c))switch(arguments.length){case 1:c.call(this);break;case 2:c.call(this,arguments[1]);break;case 3:c.call(this,arguments[1],arguments[2]);break;default:for(d=arguments.length,f=new Array(d-1),i=1;d>i;i++)f[i-1]=arguments[i];c.apply(this,f)}else if(g(c)){for(d=arguments.length,f=new Array(d-1),i=1;d>i;i++)f[i-1]=arguments[i];for(j=c.slice(),d=j.length,i=0;d>i;i++)j[i].apply(this,f)}return!0},d.prototype.addListener=function(a,b){var c;if(!e(b))throw TypeError("listener must be a function");if(this._events||(this._events={}),this._events.newListener&&this.emit("newListener",a,e(b.listener)?b.listener:b),this._events[a]?g(this._events[a])?this._events[a].push(b):this._events[a]=[this._events[a],b]:this._events[a]=b,g(this._events[a])&&!this._events[a].warned){var c;c=h(this._maxListeners)?d.defaultMaxListeners:this._maxListeners,c&&c>0&&this._events[a].length>c&&(this._events[a].warned=!0,console.error("(node) warning: possible EventEmitter memory leak detected. %d listeners added. Use emitter.setMaxListeners() to increase limit.",this._events[a].length),"function"==typeof console.trace&&console.trace())}return this},d.prototype.on=d.prototype.addListener,d.prototype.once=function(a,b){function c(){this.removeListener(a,c),d||(d=!0,b.apply(this,arguments))}if(!e(b))throw TypeError("listener must be a function");var d=!1;return c.listener=b,this.on(a,c),this},d.prototype.removeListener=function(a,b){var c,d,f,h;if(!e(b))throw TypeError("listener must be a function");if(!this._events||!this._events[a])return this;if(c=this._events[a],f=c.length,d=-1,c===b||e(c.listener)&&c.listener===b)delete this._events[a],this._events.removeListener&&this.emit("removeListener",a,b);else if(g(c)){for(h=f;h-->0;)if(c[h]===b||c[h].listener&&c[h].listener===b){d=h;break}if(0>d)return this;1===c.length?(c.length=0,delete this._events[a]):c.splice(d,1),this._events.removeListener&&this.emit("removeListener",a,b)}return this},d.prototype.removeAllListeners=function(a){var b,c;if(!this._events)return this;if(!this._events.removeListener)return 0===arguments.length?this._events={}:this._events[a]&&delete this._events[a],this;if(0===arguments.length){for(b in this._events)"removeListener"!==b&&this.removeAllListeners(b);return this.removeAllListeners("removeListener"),this._events={},this}if(c=this._events[a],e(c))this.removeListener(a,c);else for(;c.length;)this.removeListener(a,c[c.length-1]);return delete this._events[a],this},d.prototype.listeners=function(a){var b;return b=this._events&&this._events[a]?e(this._events[a])?[this._events[a]]:this._events[a].slice():[]},d.listenerCount=function(a,b){var c;return c=a._events&&a._events[b]?e(a._events[b])?1:a._events[b].length:0}},{}],476:[function(a,b,c){"function"==typeof Object.create?b.exports=function(a,b){a.super_=b,a.prototype=Object.create(b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}})}:b.exports=function(a,b){a.super_=b;var c=function(){};c.prototype=b.prototype,a.prototype=new c,a.prototype.constructor=a}},{}],335:[function(a,b,c){(function(a){function b(a){var b,c;return b=a>h||0>a?(c=Math.abs(a)%h,0>a?h-c:c):a}function d(a){for(var b=0;b<a.length;a++)a[b]=0;return!1}function e(){this.SBOX=[],this.INV_SBOX=[],this.SUB_MIX=[[],[],[],[]],this.INV_SUB_MIX=[[],[],[],[]],this.init(),this.RCON=[0,1,2,4,8,16,32,64,128,27,54]}function f(a){for(var b=a.length/4,c=new Array(b),d=-1;++d<b;)c[d]=a.readUInt32BE(4*d);return c}function g(a){this._key=f(a),this._doReset()}var h=Math.pow(2,32);e.prototype.init=function(){var a,b,c,d,e,f,g,h,i,j;for(a=function(){var a,c;for(c=[],b=a=0;256>a;b=++a)128>b?c.push(b<<1):c.push(b<<1^283);return c}(),e=0,i=0,b=j=0;256>j;b=++j)c=i^i<<1^i<<2^i<<3^i<<4,c=c>>>8^255&c^99,this.SBOX[e]=c,this.INV_SBOX[c]=e,f=a[e],g=a[f],h=a[g],d=257*a[c]^16843008*c,this.SUB_MIX[0][e]=d<<24|d>>>8,this.SUB_MIX[1][e]=d<<16|d>>>16,this.SUB_MIX[2][e]=d<<8|d>>>24,this.SUB_MIX[3][e]=d,d=16843009*h^65537*g^257*f^16843008*e,this.INV_SUB_MIX[0][c]=d<<24|d>>>8,this.INV_SUB_MIX[1][c]=d<<16|d>>>16,this.INV_SUB_MIX[2][c]=d<<8|d>>>24,this.INV_SUB_MIX[3][c]=d,0===e?e=i=1:(e=f^a[a[a[h^f]]],i^=a[a[i]]);return!0};var i=new e;g.blockSize=16,g.prototype.blockSize=g.blockSize,g.keySize=32,g.prototype.keySize=g.keySize,g.prototype._doReset=function(){var a,b,c,d,e,f;for(c=this._key,b=c.length,this._nRounds=b+6,e=4*(this._nRounds+1),this._keySchedule=[],d=0;e>d;d++)this._keySchedule[d]=b>d?c[d]:(f=this._keySchedule[d-1],d%b===0?(f=f<<8|f>>>24,f=i.SBOX[f>>>24]<<24|i.SBOX[f>>>16&255]<<16|i.SBOX[f>>>8&255]<<8|i.SBOX[255&f],f^=i.RCON[d/b|0]<<24):b>6&&d%b===4?f=i.SBOX[f>>>24]<<24|i.SBOX[f>>>16&255]<<16|i.SBOX[f>>>8&255]<<8|i.SBOX[255&f]:void 0,this._keySchedule[d-b]^f);for(this._invKeySchedule=[],a=0;e>a;a++)d=e-a,f=this._keySchedule[d-(a%4?0:4)],this._invKeySchedule[a]=4>a||4>=d?f:i.INV_SUB_MIX[0][i.SBOX[f>>>24]]^i.INV_SUB_MIX[1][i.SBOX[f>>>16&255]]^i.INV_SUB_MIX[2][i.SBOX[f>>>8&255]]^i.INV_SUB_MIX[3][i.SBOX[255&f]];return!0},g.prototype.encryptBlock=function(b){b=f(new a(b));var c=this._doCryptBlock(b,this._keySchedule,i.SUB_MIX,i.SBOX),d=new a(16);return d.writeUInt32BE(c[0],0),d.writeUInt32BE(c[1],4),d.writeUInt32BE(c[2],8),d.writeUInt32BE(c[3],12),d},g.prototype.decryptBlock=function(b){b=f(new a(b));var c=[b[3],b[1]];b[1]=c[0],b[3]=c[1];var d=this._doCryptBlock(b,this._invKeySchedule,i.INV_SUB_MIX,i.INV_SBOX),e=new a(16);return e.writeUInt32BE(d[0],0),e.writeUInt32BE(d[3],4),e.writeUInt32BE(d[2],8),e.writeUInt32BE(d[1],12),e},g.prototype.scrub=function(){d(this._keySchedule),d(this._invKeySchedule),d(this._key)},g.prototype._doCryptBlock=function(a,c,d,e){var f,g,h,i,j,k,l,m,n;g=a[0]^c[0],h=a[1]^c[1],i=a[2]^c[2],j=a[3]^c[3],f=4;for(var o=1;o<this._nRounds;o++)k=d[0][g>>>24]^d[1][h>>>16&255]^d[2][i>>>8&255]^d[3][255&j]^c[f++],l=d[0][h>>>24]^d[1][i>>>16&255]^d[2][j>>>8&255]^d[3][255&g]^c[f++],
m=d[0][i>>>24]^d[1][j>>>16&255]^d[2][g>>>8&255]^d[3][255&h]^c[f++],n=d[0][j>>>24]^d[1][g>>>16&255]^d[2][h>>>8&255]^d[3][255&i]^c[f++],g=k,h=l,i=m,j=n;return k=(e[g>>>24]<<24|e[h>>>16&255]<<16|e[i>>>8&255]<<8|e[255&j])^c[f++],l=(e[h>>>24]<<24|e[i>>>16&255]<<16|e[j>>>8&255]<<8|e[255&g])^c[f++],m=(e[i>>>24]<<24|e[j>>>16&255]<<16|e[g>>>8&255]<<8|e[255&h])^c[f++],n=(e[j>>>24]<<24|e[g>>>16&255]<<16|e[h>>>8&255]<<8|e[255&i])^c[f++],[b(k),b(l),b(m),b(n)]},c.AES=g}).call(this,a("buffer").Buffer)},{buffer:329}],334:[function(a,b,c){(function(c){function d(a,b,d){c.isBuffer(a)||(a=new c(a,"binary")),b/=8,d=d||0;for(var f,g,h=0,i=0,j=new c(b),k=new c(d),l=0,m=[];;){if(l++>0&&m.push(f),m.push(a),f=e(c.concat(m)),m=[],g=0,b>0)for(;;){if(0===b)break;if(g===f.length)break;j[h++]=f[g],b--,g++}if(d>0&&g!==f.length)for(;;){if(0===d)break;if(g===f.length)break;k[i++]=f[g],d--,g++}if(0===b&&0===d)break}for(g=0;g<f.length;g++)f[g]=0;return{key:j,iv:k}}var e=a("create-hash/md5");b.exports=d}).call(this,a("buffer").Buffer)},{buffer:329,"create-hash/md5":426}],426:[function(a,b,c){"use strict";function d(a,b){a[b>>5]|=128<<b%32,a[(b+64>>>9<<4)+14]=b;for(var c=1732584193,d=-271733879,e=-1732584194,k=271733878,l=0;l<a.length;l+=16){var m=c,n=d,o=e,p=k;c=f(c,d,e,k,a[l+0],7,-680876936),k=f(k,c,d,e,a[l+1],12,-389564586),e=f(e,k,c,d,a[l+2],17,606105819),d=f(d,e,k,c,a[l+3],22,-1044525330),c=f(c,d,e,k,a[l+4],7,-176418897),k=f(k,c,d,e,a[l+5],12,1200080426),e=f(e,k,c,d,a[l+6],17,-1473231341),d=f(d,e,k,c,a[l+7],22,-45705983),c=f(c,d,e,k,a[l+8],7,1770035416),k=f(k,c,d,e,a[l+9],12,-1958414417),e=f(e,k,c,d,a[l+10],17,-42063),d=f(d,e,k,c,a[l+11],22,-1990404162),c=f(c,d,e,k,a[l+12],7,1804603682),k=f(k,c,d,e,a[l+13],12,-40341101),e=f(e,k,c,d,a[l+14],17,-1502002290),d=f(d,e,k,c,a[l+15],22,1236535329),c=g(c,d,e,k,a[l+1],5,-165796510),k=g(k,c,d,e,a[l+6],9,-1069501632),e=g(e,k,c,d,a[l+11],14,643717713),d=g(d,e,k,c,a[l+0],20,-373897302),c=g(c,d,e,k,a[l+5],5,-701558691),k=g(k,c,d,e,a[l+10],9,38016083),e=g(e,k,c,d,a[l+15],14,-660478335),d=g(d,e,k,c,a[l+4],20,-405537848),c=g(c,d,e,k,a[l+9],5,568446438),k=g(k,c,d,e,a[l+14],9,-1019803690),e=g(e,k,c,d,a[l+3],14,-187363961),d=g(d,e,k,c,a[l+8],20,1163531501),c=g(c,d,e,k,a[l+13],5,-1444681467),k=g(k,c,d,e,a[l+2],9,-51403784),e=g(e,k,c,d,a[l+7],14,1735328473),d=g(d,e,k,c,a[l+12],20,-1926607734),c=h(c,d,e,k,a[l+5],4,-378558),k=h(k,c,d,e,a[l+8],11,-2022574463),e=h(e,k,c,d,a[l+11],16,1839030562),d=h(d,e,k,c,a[l+14],23,-35309556),c=h(c,d,e,k,a[l+1],4,-1530992060),k=h(k,c,d,e,a[l+4],11,1272893353),e=h(e,k,c,d,a[l+7],16,-155497632),d=h(d,e,k,c,a[l+10],23,-1094730640),c=h(c,d,e,k,a[l+13],4,681279174),k=h(k,c,d,e,a[l+0],11,-358537222),e=h(e,k,c,d,a[l+3],16,-722521979),d=h(d,e,k,c,a[l+6],23,76029189),c=h(c,d,e,k,a[l+9],4,-640364487),k=h(k,c,d,e,a[l+12],11,-421815835),e=h(e,k,c,d,a[l+15],16,530742520),d=h(d,e,k,c,a[l+2],23,-995338651),c=i(c,d,e,k,a[l+0],6,-198630844),k=i(k,c,d,e,a[l+7],10,1126891415),e=i(e,k,c,d,a[l+14],15,-1416354905),d=i(d,e,k,c,a[l+5],21,-57434055),c=i(c,d,e,k,a[l+12],6,1700485571),k=i(k,c,d,e,a[l+3],10,-1894986606),e=i(e,k,c,d,a[l+10],15,-1051523),d=i(d,e,k,c,a[l+1],21,-2054922799),c=i(c,d,e,k,a[l+8],6,1873313359),k=i(k,c,d,e,a[l+15],10,-30611744),e=i(e,k,c,d,a[l+6],15,-1560198380),d=i(d,e,k,c,a[l+13],21,1309151649),c=i(c,d,e,k,a[l+4],6,-145523070),k=i(k,c,d,e,a[l+11],10,-1120210379),e=i(e,k,c,d,a[l+2],15,718787259),d=i(d,e,k,c,a[l+9],21,-343485551),c=j(c,m),d=j(d,n),e=j(e,o),k=j(k,p)}return Array(c,d,e,k)}function e(a,b,c,d,e,f){return j(k(j(j(b,a),j(d,f)),e),c)}function f(a,b,c,d,f,g,h){return e(b&c|~b&d,a,b,f,g,h)}function g(a,b,c,d,f,g,h){return e(b&d|c&~d,a,b,f,g,h)}function h(a,b,c,d,f,g,h){return e(b^c^d,a,b,f,g,h)}function i(a,b,c,d,f,g,h){return e(c^(b|~d),a,b,f,g,h)}function j(a,b){var c=(65535&a)+(65535&b),d=(a>>16)+(b>>16)+(c>>16);return d<<16|65535&c}function k(a,b){return a<<b|a>>>32-b}var l=a("./helpers");b.exports=function(a){return l.hash(a,d,16)}},{"./helpers":425}],425:[function(a,b,c){(function(a){"use strict";function b(b,c){if(b.length%f!==0){var d=b.length+(f-b.length%f);b=a.concat([b,g],d)}for(var e=[],h=c?b.readInt32BE:b.readInt32LE,i=0;i<b.length;i+=f)e.push(h.call(b,i));return e}function d(b,c,d){for(var e=new a(c),f=d?e.writeInt32BE:e.writeInt32LE,g=0;g<b.length;g++)f.call(e,b[g],4*g,!0);return e}function e(c,e,f,g){a.isBuffer(c)||(c=new a(c));var i=e(b(c,g),c.length*h);return d(i,f,g)}var f=4,g=new a(f);g.fill(0);var h=8;c.hash=e}).call(this,a("buffer").Buffer)},{buffer:329}],329:[function(a,b,c){function d(){return e.TYPED_ARRAY_SUPPORT?2147483647:1073741823}function e(a){return this instanceof e?(this.length=0,this.parent=void 0,"number"==typeof a?f(this,a):"string"==typeof a?g(this,a,arguments.length>1?arguments[1]:"utf8"):h(this,a)):arguments.length>1?new e(a,arguments[1]):new e(a)}function f(a,b){if(a=o(a,0>b?0:0|p(b)),!e.TYPED_ARRAY_SUPPORT)for(var c=0;b>c;c++)a[c]=0;return a}function g(a,b,c){("string"!=typeof c||""===c)&&(c="utf8");var d=0|r(b,c);return a=o(a,d),a.write(b,c),a}function h(a,b){if(e.isBuffer(b))return i(a,b);if(X(b))return j(a,b);if(null==b)throw new TypeError("must start with number, buffer, array or string");if("undefined"!=typeof ArrayBuffer){if(b.buffer instanceof ArrayBuffer)return k(a,b);if(b instanceof ArrayBuffer)return l(a,b)}return b.length?m(a,b):n(a,b)}function i(a,b){var c=0|p(b.length);return a=o(a,c),b.copy(a,0,0,c),a}function j(a,b){var c=0|p(b.length);a=o(a,c);for(var d=0;c>d;d+=1)a[d]=255&b[d];return a}function k(a,b){var c=0|p(b.length);a=o(a,c);for(var d=0;c>d;d+=1)a[d]=255&b[d];return a}function l(a,b){return e.TYPED_ARRAY_SUPPORT?(b.byteLength,a=e._augment(new Uint8Array(b))):a=k(a,new Uint8Array(b)),a}function m(a,b){var c=0|p(b.length);a=o(a,c);for(var d=0;c>d;d+=1)a[d]=255&b[d];return a}function n(a,b){var c,d=0;"Buffer"===b.type&&X(b.data)&&(c=b.data,d=0|p(c.length)),a=o(a,d);for(var e=0;d>e;e+=1)a[e]=255&c[e];return a}function o(a,b){e.TYPED_ARRAY_SUPPORT?a=e._augment(new Uint8Array(b)):(a.length=b,a._isBuffer=!0);var c=0!==b&&b<=e.poolSize>>>1;return c&&(a.parent=Y),a}function p(a){if(a>=d())throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+d().toString(16)+" bytes");return 0|a}function q(a,b){if(!(this instanceof q))return new q(a,b);var c=new e(a,b);return delete c.parent,c}function r(a,b){"string"!=typeof a&&(a=""+a);var c=a.length;if(0===c)return 0;for(var d=!1;;)switch(b){case"ascii":case"binary":case"raw":case"raws":return c;case"utf8":case"utf-8":return P(a).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*c;case"hex":return c>>>1;case"base64":return S(a).length;default:if(d)return P(a).length;b=(""+b).toLowerCase(),d=!0}}function s(a,b,c){var d=!1;if(b=0|b,c=void 0===c||c===1/0?this.length:0|c,a||(a="utf8"),0>b&&(b=0),c>this.length&&(c=this.length),b>=c)return"";for(;;)switch(a){case"hex":return D(this,b,c);case"utf8":case"utf-8":return A(this,b,c);case"ascii":return B(this,b,c);case"binary":return C(this,b,c);case"base64":return z(this,b,c);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return E(this,b,c);default:if(d)throw new TypeError("Unknown encoding: "+a);a=(a+"").toLowerCase(),d=!0}}function t(a,b,c,d){c=Number(c)||0;var e=a.length-c;d?(d=Number(d),d>e&&(d=e)):d=e;var f=b.length;if(f%2!==0)throw new Error("Invalid hex string");d>f/2&&(d=f/2);for(var g=0;d>g;g++){var h=parseInt(b.substr(2*g,2),16);if(isNaN(h))throw new Error("Invalid hex string");a[c+g]=h}return g}function u(a,b,c,d){return T(P(b,a.length-c),a,c,d)}function v(a,b,c,d){return T(Q(b),a,c,d)}function w(a,b,c,d){return v(a,b,c,d)}function x(a,b,c,d){return T(S(b),a,c,d)}function y(a,b,c,d){return T(R(b,a.length-c),a,c,d)}function z(a,b,c){return 0===b&&c===a.length?V.fromByteArray(a):V.fromByteArray(a.slice(b,c))}function A(a,b,c){var d="",e="";c=Math.min(a.length,c);for(var f=b;c>f;f++)a[f]<=127?(d+=U(e)+String.fromCharCode(a[f]),e=""):e+="%"+a[f].toString(16);return d+U(e)}function B(a,b,c){var d="";c=Math.min(a.length,c);for(var e=b;c>e;e++)d+=String.fromCharCode(127&a[e]);return d}function C(a,b,c){var d="";c=Math.min(a.length,c);for(var e=b;c>e;e++)d+=String.fromCharCode(a[e]);return d}function D(a,b,c){var d=a.length;(!b||0>b)&&(b=0),(!c||0>c||c>d)&&(c=d);for(var e="",f=b;c>f;f++)e+=O(a[f]);return e}function E(a,b,c){for(var d=a.slice(b,c),e="",f=0;f<d.length;f+=2)e+=String.fromCharCode(d[f]+256*d[f+1]);return e}function F(a,b,c){if(a%1!==0||0>a)throw new RangeError("offset is not uint");if(a+b>c)throw new RangeError("Trying to access beyond buffer length")}function G(a,b,c,d,f,g){if(!e.isBuffer(a))throw new TypeError("buffer must be a Buffer instance");if(b>f||g>b)throw new RangeError("value is out of bounds");if(c+d>a.length)throw new RangeError("index out of range")}function H(a,b,c,d){0>b&&(b=65535+b+1);for(var e=0,f=Math.min(a.length-c,2);f>e;e++)a[c+e]=(b&255<<8*(d?e:1-e))>>>8*(d?e:1-e)}function I(a,b,c,d){0>b&&(b=4294967295+b+1);for(var e=0,f=Math.min(a.length-c,4);f>e;e++)a[c+e]=b>>>8*(d?e:3-e)&255}function J(a,b,c,d,e,f){if(b>e||f>b)throw new RangeError("value is out of bounds");if(c+d>a.length)throw new RangeError("index out of range");if(0>c)throw new RangeError("index out of range")}function K(a,b,c,d,e){return e||J(a,b,c,4,3.4028234663852886e38,-3.4028234663852886e38),W.write(a,b,c,d,23,4),c+4}function L(a,b,c,d,e){return e||J(a,b,c,8,1.7976931348623157e308,-1.7976931348623157e308),W.write(a,b,c,d,52,8),c+8}function M(a){if(a=N(a).replace($,""),a.length<2)return"";for(;a.length%4!==0;)a+="=";return a}function N(a){return a.trim?a.trim():a.replace(/^\s+|\s+$/g,"")}function O(a){return 16>a?"0"+a.toString(16):a.toString(16)}function P(a,b){b=b||1/0;for(var c,d=a.length,e=null,f=[],g=0;d>g;g++){if(c=a.charCodeAt(g),c>55295&&57344>c){if(!e){if(c>56319){(b-=3)>-1&&f.push(239,191,189);continue}if(g+1===d){(b-=3)>-1&&f.push(239,191,189);continue}e=c;continue}if(56320>c){(b-=3)>-1&&f.push(239,191,189),e=c;continue}c=e-55296<<10|c-56320|65536,e=null}else e&&((b-=3)>-1&&f.push(239,191,189),e=null);if(128>c){if((b-=1)<0)break;f.push(c)}else if(2048>c){if((b-=2)<0)break;f.push(c>>6|192,63&c|128)}else if(65536>c){if((b-=3)<0)break;f.push(c>>12|224,c>>6&63|128,63&c|128)}else{if(!(2097152>c))throw new Error("Invalid code point");if((b-=4)<0)break;f.push(c>>18|240,c>>12&63|128,c>>6&63|128,63&c|128)}}return f}function Q(a){for(var b=[],c=0;c<a.length;c++)b.push(255&a.charCodeAt(c));return b}function R(a,b){for(var c,d,e,f=[],g=0;g<a.length&&!((b-=2)<0);g++)c=a.charCodeAt(g),d=c>>8,e=c%256,f.push(e),f.push(d);return f}function S(a){return V.toByteArray(M(a))}function T(a,b,c,d){for(var e=0;d>e&&!(e+c>=b.length||e>=a.length);e++)b[e+c]=a[e];return e}function U(a){try{return decodeURIComponent(a)}catch(b){return String.fromCharCode(65533)}}var V=a("base64-js"),W=a("ieee754"),X=a("is-array");c.Buffer=e,c.SlowBuffer=q,c.INSPECT_MAX_BYTES=50,e.poolSize=8192;var Y={};e.TYPED_ARRAY_SUPPORT=function(){function a(){}try{var b=new Uint8Array(1);return b.foo=function(){return 42},b.constructor=a,42===b.foo()&&b.constructor===a&&"function"==typeof b.subarray&&0===b.subarray(1,1).byteLength}catch(c){return!1}}(),e.isBuffer=function(a){return!(null==a||!a._isBuffer)},e.compare=function(a,b){if(!e.isBuffer(a)||!e.isBuffer(b))throw new TypeError("Arguments must be Buffers");if(a===b)return 0;for(var c=a.length,d=b.length,f=0,g=Math.min(c,d);g>f&&a[f]===b[f];)++f;return f!==g&&(c=a[f],d=b[f]),d>c?-1:c>d?1:0},e.isEncoding=function(a){switch(String(a).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"raw":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},e.concat=function(a,b){if(!X(a))throw new TypeError("list argument must be an Array of Buffers.");if(0===a.length)return new e(0);var c;if(void 0===b)for(b=0,c=0;c<a.length;c++)b+=a[c].length;var d=new e(b),f=0;for(c=0;c<a.length;c++){var g=a[c];g.copy(d,f),f+=g.length}return d},e.byteLength=r,e.prototype.length=void 0,e.prototype.parent=void 0,e.prototype.toString=function(){var a=0|this.length;return 0===a?"":0===arguments.length?A(this,0,a):s.apply(this,arguments)},e.prototype.equals=function(a){if(!e.isBuffer(a))throw new TypeError("Argument must be a Buffer");return this===a?!0:0===e.compare(this,a)},e.prototype.inspect=function(){var a="",b=c.INSPECT_MAX_BYTES;return this.length>0&&(a=this.toString("hex",0,b).match(/.{2}/g).join(" "),this.length>b&&(a+=" ... ")),"<Buffer "+a+">"},e.prototype.compare=function(a){if(!e.isBuffer(a))throw new TypeError("Argument must be a Buffer");return this===a?0:e.compare(this,a)},e.prototype.indexOf=function(a,b){function c(a,b,c){for(var d=-1,e=0;c+e<a.length;e++)if(a[c+e]===b[-1===d?0:e-d]){if(-1===d&&(d=e),e-d+1===b.length)return c+d}else d=-1;return-1}if(b>2147483647?b=2147483647:-2147483648>b&&(b=-2147483648),b>>=0,0===this.length)return-1;if(b>=this.length)return-1;if(0>b&&(b=Math.max(this.length+b,0)),"string"==typeof a)return 0===a.length?-1:String.prototype.indexOf.call(this,a,b);if(e.isBuffer(a))return c(this,a,b);if("number"==typeof a)return e.TYPED_ARRAY_SUPPORT&&"function"===Uint8Array.prototype.indexOf?Uint8Array.prototype.indexOf.call(this,a,b):c(this,[a],b);throw new TypeError("val must be string, number or Buffer")},e.prototype.get=function(a){return console.log(".get() is deprecated. Access using array indexes instead."),this.readUInt8(a)},e.prototype.set=function(a,b){return console.log(".set() is deprecated. Access using array indexes instead."),this.writeUInt8(a,b)},e.prototype.write=function(a,b,c,d){if(void 0===b)d="utf8",c=this.length,b=0;else if(void 0===c&&"string"==typeof b)d=b,c=this.length,b=0;else if(isFinite(b))b=0|b,isFinite(c)?(c=0|c,void 0===d&&(d="utf8")):(d=c,c=void 0);else{var e=d;d=b,b=0|c,c=e}var f=this.length-b;if((void 0===c||c>f)&&(c=f),a.length>0&&(0>c||0>b)||b>this.length)throw new RangeError("attempt to write outside buffer bounds");d||(d="utf8");for(var g=!1;;)switch(d){case"hex":return t(this,a,b,c);case"utf8":case"utf-8":return u(this,a,b,c);case"ascii":return v(this,a,b,c);case"binary":return w(this,a,b,c);case"base64":return x(this,a,b,c);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return y(this,a,b,c);default:if(g)throw new TypeError("Unknown encoding: "+d);d=(""+d).toLowerCase(),g=!0}},e.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}},e.prototype.slice=function(a,b){var c=this.length;a=~~a,b=void 0===b?c:~~b,0>a?(a+=c,0>a&&(a=0)):a>c&&(a=c),0>b?(b+=c,0>b&&(b=0)):b>c&&(b=c),a>b&&(b=a);var d;if(e.TYPED_ARRAY_SUPPORT)d=e._augment(this.subarray(a,b));else{var f=b-a;d=new e(f,void 0);for(var g=0;f>g;g++)d[g]=this[g+a]}return d.length&&(d.parent=this.parent||this),d},e.prototype.readUIntLE=function(a,b,c){a=0|a,b=0|b,c||F(a,b,this.length);for(var d=this[a],e=1,f=0;++f<b&&(e*=256);)d+=this[a+f]*e;return d},e.prototype.readUIntBE=function(a,b,c){a=0|a,b=0|b,c||F(a,b,this.length);for(var d=this[a+--b],e=1;b>0&&(e*=256);)d+=this[a+--b]*e;return d},e.prototype.readUInt8=function(a,b){return b||F(a,1,this.length),this[a]},e.prototype.readUInt16LE=function(a,b){return b||F(a,2,this.length),this[a]|this[a+1]<<8},e.prototype.readUInt16BE=function(a,b){return b||F(a,2,this.length),this[a]<<8|this[a+1]},e.prototype.readUInt32LE=function(a,b){return b||F(a,4,this.length),(this[a]|this[a+1]<<8|this[a+2]<<16)+16777216*this[a+3]},e.prototype.readUInt32BE=function(a,b){return b||F(a,4,this.length),16777216*this[a]+(this[a+1]<<16|this[a+2]<<8|this[a+3])},e.prototype.readIntLE=function(a,b,c){a=0|a,b=0|b,c||F(a,b,this.length);for(var d=this[a],e=1,f=0;++f<b&&(e*=256);)d+=this[a+f]*e;return e*=128,d>=e&&(d-=Math.pow(2,8*b)),d},e.prototype.readIntBE=function(a,b,c){a=0|a,b=0|b,c||F(a,b,this.length);for(var d=b,e=1,f=this[a+--d];d>0&&(e*=256);)f+=this[a+--d]*e;return e*=128,f>=e&&(f-=Math.pow(2,8*b)),f},e.prototype.readInt8=function(a,b){return b||F(a,1,this.length),128&this[a]?-1*(255-this[a]+1):this[a]},e.prototype.readInt16LE=function(a,b){b||F(a,2,this.length);var c=this[a]|this[a+1]<<8;return 32768&c?4294901760|c:c},e.prototype.readInt16BE=function(a,b){b||F(a,2,this.length);var c=this[a+1]|this[a]<<8;return 32768&c?4294901760|c:c},e.prototype.readInt32LE=function(a,b){return b||F(a,4,this.length),this[a]|this[a+1]<<8|this[a+2]<<16|this[a+3]<<24},e.prototype.readInt32BE=function(a,b){return b||F(a,4,this.length),this[a]<<24|this[a+1]<<16|this[a+2]<<8|this[a+3]},e.prototype.readFloatLE=function(a,b){return b||F(a,4,this.length),W.read(this,a,!0,23,4)},e.prototype.readFloatBE=function(a,b){return b||F(a,4,this.length),W.read(this,a,!1,23,4)},e.prototype.readDoubleLE=function(a,b){return b||F(a,8,this.length),W.read(this,a,!0,52,8)},e.prototype.readDoubleBE=function(a,b){return b||F(a,8,this.length),W.read(this,a,!1,52,8)},e.prototype.writeUIntLE=function(a,b,c,d){a=+a,b=0|b,c=0|c,d||G(this,a,b,c,Math.pow(2,8*c),0);var e=1,f=0;for(this[b]=255&a;++f<c&&(e*=256);)this[b+f]=a/e&255;return b+c},e.prototype.writeUIntBE=function(a,b,c,d){a=+a,b=0|b,c=0|c,d||G(this,a,b,c,Math.pow(2,8*c),0);var e=c-1,f=1;for(this[b+e]=255&a;--e>=0&&(f*=256);)this[b+e]=a/f&255;return b+c},e.prototype.writeUInt8=function(a,b,c){return a=+a,b=0|b,c||G(this,a,b,1,255,0),e.TYPED_ARRAY_SUPPORT||(a=Math.floor(a)),this[b]=a,b+1},e.prototype.writeUInt16LE=function(a,b,c){return a=+a,b=0|b,c||G(this,a,b,2,65535,0),e.TYPED_ARRAY_SUPPORT?(this[b]=a,this[b+1]=a>>>8):H(this,a,b,!0),b+2},e.prototype.writeUInt16BE=function(a,b,c){return a=+a,b=0|b,c||G(this,a,b,2,65535,0),e.TYPED_ARRAY_SUPPORT?(this[b]=a>>>8,this[b+1]=a):H(this,a,b,!1),b+2},e.prototype.writeUInt32LE=function(a,b,c){return a=+a,b=0|b,c||G(this,a,b,4,4294967295,0),e.TYPED_ARRAY_SUPPORT?(this[b+3]=a>>>24,this[b+2]=a>>>16,this[b+1]=a>>>8,this[b]=a):I(this,a,b,!0),b+4},e.prototype.writeUInt32BE=function(a,b,c){return a=+a,b=0|b,c||G(this,a,b,4,4294967295,0),e.TYPED_ARRAY_SUPPORT?(this[b]=a>>>24,this[b+1]=a>>>16,this[b+2]=a>>>8,this[b+3]=a):I(this,a,b,!1),b+4},e.prototype.writeIntLE=function(a,b,c,d){if(a=+a,b=0|b,!d){var e=Math.pow(2,8*c-1);G(this,a,b,c,e-1,-e)}var f=0,g=1,h=0>a?1:0;for(this[b]=255&a;++f<c&&(g*=256);)this[b+f]=(a/g>>0)-h&255;return b+c},e.prototype.writeIntBE=function(a,b,c,d){if(a=+a,b=0|b,!d){var e=Math.pow(2,8*c-1);G(this,a,b,c,e-1,-e)}var f=c-1,g=1,h=0>a?1:0;for(this[b+f]=255&a;--f>=0&&(g*=256);)this[b+f]=(a/g>>0)-h&255;return b+c},e.prototype.writeInt8=function(a,b,c){return a=+a,b=0|b,c||G(this,a,b,1,127,-128),e.TYPED_ARRAY_SUPPORT||(a=Math.floor(a)),0>a&&(a=255+a+1),this[b]=a,b+1},e.prototype.writeInt16LE=function(a,b,c){return a=+a,b=0|b,c||G(this,a,b,2,32767,-32768),e.TYPED_ARRAY_SUPPORT?(this[b]=a,this[b+1]=a>>>8):H(this,a,b,!0),b+2},e.prototype.writeInt16BE=function(a,b,c){return a=+a,b=0|b,c||G(this,a,b,2,32767,-32768),e.TYPED_ARRAY_SUPPORT?(this[b]=a>>>8,this[b+1]=a):H(this,a,b,!1),b+2},e.prototype.writeInt32LE=function(a,b,c){return a=+a,b=0|b,c||G(this,a,b,4,2147483647,-2147483648),e.TYPED_ARRAY_SUPPORT?(this[b]=a,this[b+1]=a>>>8,this[b+2]=a>>>16,this[b+3]=a>>>24):I(this,a,b,!0),b+4},e.prototype.writeInt32BE=function(a,b,c){return a=+a,b=0|b,c||G(this,a,b,4,2147483647,-2147483648),0>a&&(a=4294967295+a+1),e.TYPED_ARRAY_SUPPORT?(this[b]=a>>>24,this[b+1]=a>>>16,this[b+2]=a>>>8,this[b+3]=a):I(this,a,b,!1),b+4},e.prototype.writeFloatLE=function(a,b,c){return K(this,a,b,!0,c)},e.prototype.writeFloatBE=function(a,b,c){return K(this,a,b,!1,c)},e.prototype.writeDoubleLE=function(a,b,c){return L(this,a,b,!0,c)},e.prototype.writeDoubleBE=function(a,b,c){return L(this,a,b,!1,c)},e.prototype.copy=function(a,b,c,d){if(c||(c=0),d||0===d||(d=this.length),b>=a.length&&(b=a.length),b||(b=0),d>0&&c>d&&(d=c),d===c)return 0;if(0===a.length||0===this.length)return 0;if(0>b)throw new RangeError("targetStart out of bounds");if(0>c||c>=this.length)throw new RangeError("sourceStart out of bounds");if(0>d)throw new RangeError("sourceEnd out of bounds");d>this.length&&(d=this.length),a.length-b<d-c&&(d=a.length-b+c);var f,g=d-c;if(this===a&&b>c&&d>b)for(f=g-1;f>=0;f--)a[f+b]=this[f+c];else if(1e3>g||!e.TYPED_ARRAY_SUPPORT)for(f=0;g>f;f++)a[f+b]=this[f+c];else a._set(this.subarray(c,c+g),b);return g},e.prototype.fill=function(a,b,c){if(a||(a=0),b||(b=0),c||(c=this.length),b>c)throw new RangeError("end < start");if(c!==b&&0!==this.length){if(0>b||b>=this.length)throw new RangeError("start out of bounds");if(0>c||c>this.length)throw new RangeError("end out of bounds");var d;if("number"==typeof a)for(d=b;c>d;d++)this[d]=a;else{var e=P(a.toString()),f=e.length;for(d=b;c>d;d++)this[d]=e[d%f]}return this}},e.prototype.toArrayBuffer=function(){if("undefined"!=typeof Uint8Array){if(e.TYPED_ARRAY_SUPPORT)return new e(this).buffer;for(var a=new Uint8Array(this.length),b=0,c=a.length;c>b;b+=1)a[b]=this[b];return a.buffer}throw new TypeError("Buffer.toArrayBuffer not supported in this browser")};var Z=e.prototype;e._augment=function(a){return a.constructor=e,a._isBuffer=!0,a._set=a.set,a.get=Z.get,a.set=Z.set,a.write=Z.write,a.toString=Z.toString,a.toLocaleString=Z.toString,a.toJSON=Z.toJSON,a.equals=Z.equals,a.compare=Z.compare,a.indexOf=Z.indexOf,a.copy=Z.copy,a.slice=Z.slice,a.readUIntLE=Z.readUIntLE,a.readUIntBE=Z.readUIntBE,a.readUInt8=Z.readUInt8,a.readUInt16LE=Z.readUInt16LE,a.readUInt16BE=Z.readUInt16BE,a.readUInt32LE=Z.readUInt32LE,a.readUInt32BE=Z.readUInt32BE,a.readIntLE=Z.readIntLE,a.readIntBE=Z.readIntBE,a.readInt8=Z.readInt8,a.readInt16LE=Z.readInt16LE,a.readInt16BE=Z.readInt16BE,a.readInt32LE=Z.readInt32LE,a.readInt32BE=Z.readInt32BE,a.readFloatLE=Z.readFloatLE,a.readFloatBE=Z.readFloatBE,a.readDoubleLE=Z.readDoubleLE,a.readDoubleBE=Z.readDoubleBE,a.writeUInt8=Z.writeUInt8,a.writeUIntLE=Z.writeUIntLE,a.writeUIntBE=Z.writeUIntBE,a.writeUInt16LE=Z.writeUInt16LE,a.writeUInt16BE=Z.writeUInt16BE,a.writeUInt32LE=Z.writeUInt32LE,a.writeUInt32BE=Z.writeUInt32BE,a.writeIntLE=Z.writeIntLE,a.writeIntBE=Z.writeIntBE,a.writeInt8=Z.writeInt8,a.writeInt16LE=Z.writeInt16LE,a.writeInt16BE=Z.writeInt16BE,a.writeInt32LE=Z.writeInt32LE,a.writeInt32BE=Z.writeInt32BE,a.writeFloatLE=Z.writeFloatLE,a.writeFloatBE=Z.writeFloatBE,a.writeDoubleLE=Z.writeDoubleLE,a.writeDoubleBE=Z.writeDoubleBE,a.fill=Z.fill,a.inspect=Z.inspect,a.toArrayBuffer=Z.toArrayBuffer,a};var $=/[^+\/0-9A-Za-z-_]/g},{"base64-js":330,ieee754:331,"is-array":332}],332:[function(a,b,c){var d=Array.isArray,e=Object.prototype.toString;b.exports=d||function(a){return!!a&&"[object Array]"==e.call(a)}},{}],331:[function(a,b,c){c.read=function(a,b,c,d,e){var f,g,h=8*e-d-1,i=(1<<h)-1,j=i>>1,k=-7,l=c?e-1:0,m=c?-1:1,n=a[b+l];for(l+=m,f=n&(1<<-k)-1,n>>=-k,k+=h;k>0;f=256*f+a[b+l],l+=m,k-=8);for(g=f&(1<<-k)-1,f>>=-k,k+=d;k>0;g=256*g+a[b+l],l+=m,k-=8);if(0===f)f=1-j;else{if(f===i)return g?NaN:(n?-1:1)*(1/0);g+=Math.pow(2,d),f-=j}return(n?-1:1)*g*Math.pow(2,f-d)},c.write=function(a,b,c,d,e,f){var g,h,i,j=8*f-e-1,k=(1<<j)-1,l=k>>1,m=23===e?Math.pow(2,-24)-Math.pow(2,-77):0,n=d?0:f-1,o=d?1:-1,p=0>b||0===b&&0>1/b?1:0;for(b=Math.abs(b),isNaN(b)||b===1/0?(h=isNaN(b)?1:0,g=k):(g=Math.floor(Math.log(b)/Math.LN2),b*(i=Math.pow(2,-g))<1&&(g--,i*=2),b+=g+l>=1?m/i:m*Math.pow(2,1-l),b*i>=2&&(g++,i/=2),g+l>=k?(h=0,g=k):g+l>=1?(h=(b*i-1)*Math.pow(2,e),g+=l):(h=b*Math.pow(2,l-1)*Math.pow(2,e),g=0));e>=8;a[c+n]=255&h,n+=o,h/=256,e-=8);for(g=g<<e|h,j+=e;j>0;a[c+n]=255&g,n+=o,g/=256,j-=8);a[c+n-o]|=128*p}},{}],330:[function(a,b,c){var d="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";!function(a){"use strict";function b(a){var b=a.charCodeAt(0);return b===g||b===l?62:b===h||b===m?63:i>b?-1:i+10>b?b-i+26+26:k+26>b?b-k:j+26>b?b-j+26:void 0}function c(a){function c(a){j[l++]=a}var d,e,g,h,i,j;if(a.length%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var k=a.length;i="="===a.charAt(k-2)?2:"="===a.charAt(k-1)?1:0,j=new f(3*a.length/4-i),g=i>0?a.length-4:a.length;var l=0;for(d=0,e=0;g>d;d+=4,e+=3)h=b(a.charAt(d))<<18|b(a.charAt(d+1))<<12|b(a.charAt(d+2))<<6|b(a.charAt(d+3)),c((16711680&h)>>16),c((65280&h)>>8),c(255&h);return 2===i?(h=b(a.charAt(d))<<2|b(a.charAt(d+1))>>4,c(255&h)):1===i&&(h=b(a.charAt(d))<<10|b(a.charAt(d+1))<<4|b(a.charAt(d+2))>>2,c(h>>8&255),c(255&h)),j}function e(a){function b(a){return d.charAt(a)}function c(a){return b(a>>18&63)+b(a>>12&63)+b(a>>6&63)+b(63&a)}var e,f,g,h=a.length%3,i="";for(e=0,g=a.length-h;g>e;e+=3)f=(a[e]<<16)+(a[e+1]<<8)+a[e+2],i+=c(f);switch(h){case 1:f=a[a.length-1],i+=b(f>>2),i+=b(f<<4&63),i+="==";break;case 2:f=(a[a.length-2]<<8)+a[a.length-1],i+=b(f>>10),i+=b(f>>4&63),i+=b(f<<2&63),i+="="}return i}var f="undefined"!=typeof Uint8Array?Uint8Array:Array,g="+".charCodeAt(0),h="/".charCodeAt(0),i="0".charCodeAt(0),j="a".charCodeAt(0),k="A".charCodeAt(0),l="-".charCodeAt(0),m="_".charCodeAt(0);a.toByteArray=c,a.fromByteArray=e}("undefined"==typeof c?this.base64js={}:c)},{}],666:[function(a,b,c){!function(a,b,c){function d(a){var b=this,c="";b.next=function(){var a=b.x^b.x>>>2;return b.x=b.y,b.y=b.z,b.z=b.w,b.w=b.v,(b.d=b.d+362437|0)+(b.v=b.v^b.v<<4^(a^a<<1))|0},b.x=0,b.y=0,b.z=0,b.w=0,b.v=0,a===(0|a)?b.x=a:c+=a;for(var d=0;d<c.length+64;d++)b.x^=0|c.charCodeAt(d),d==c.length&&(b.d=b.x<<10^b.x>>>4),b.next()}function e(a,b){return b.x=a.x,b.y=a.y,b.z=a.z,b.w=a.w,b.v=a.v,b.d=a.d,b}function f(a,b){var c=new d(a),f=b&&b.state,g=function(){return(c.next()>>>0)/4294967296};return g["double"]=function(){do var a=c.next()>>>11,b=(c.next()>>>0)/4294967296,d=(a+b)/(1<<21);while(0===d);return d},g.int32=c.next,g.quick=g,f&&("object"==typeof f&&e(f,c),g.state=function(){return e(c,{})}),g}b&&b.exports?b.exports=f:c&&c.amd?c(function(){return f}):this.xorwow=f}(this,"object"==typeof b&&b,"function"==typeof define&&define)},{}],665:[function(a,b,c){!function(a,b,c){function d(a){function b(a,b){var c,d,e=[];if(b===(0|b))d=e[0]=b;else for(b=""+b,c=0;c<b.length;++c)e[7&c]=e[7&c]<<15^b.charCodeAt(c)+e[c+1&7]<<13;for(;e.length<8;)e.push(0);for(c=0;8>c&&0===e[c];++c);for(d=8==c?e[7]=-1:e[c],a.x=e,a.i=0,c=256;c>0;--c)a.next()}var c=this;c.next=function(){var a,b,d=c.x,e=c.i;return a=d[e],a^=a>>>7,b=a^a<<24,a=d[e+1&7],b^=a^a>>>10,a=d[e+3&7],b^=a^a>>>3,a=d[e+4&7],b^=a^a<<7,a=d[e+7&7],a^=a<<13,b^=a^a<<9,d[e]=b,c.i=e+1&7,b},b(c,a)}function e(a,b){return b.x=a.x.slice(),b.i=a.i,b}function f(a,b){null==a&&(a=+new Date);var c=new d(a),f=b&&b.state,g=function(){return(c.next()>>>0)/4294967296};return g["double"]=function(){do var a=c.next()>>>11,b=(c.next()>>>0)/4294967296,d=(a+b)/(1<<21);while(0===d);return d},g.int32=c.next,g.quick=g,f&&(f.x&&e(f,c),g.state=function(){return e(c,{})}),g}b&&b.exports?b.exports=f:c&&c.amd?c(function(){return f}):this.xorshift7=f}(this,"object"==typeof b&&b,"function"==typeof define&&define)},{}],664:[function(a,b,c){!function(a,b,c){function d(a){function b(a,b){var c,d,e,f,g,h=[],i=128;for(b===(0|b)?(d=b,b=null):(b+="\x00",d=0,i=Math.max(i,b.length)),e=0,f=-32;i>f;++f)b&&(d^=b.charCodeAt((f+32)%b.length)),0===f&&(g=d),d^=d<<10,d^=d>>>15,d^=d<<4,d^=d>>>13,f>=0&&(g=g+1640531527|0,c=h[127&f]^=d+g,e=0==c?e+1:0);for(e>=128&&(h[127&(b&&b.length||0)]=-1),e=127,f=512;f>0;--f)d=h[e+34&127],c=h[e=e+1&127],d^=d<<13,c^=c<<17,d^=d>>>15,c^=c>>>12,h[e]=d^c;a.w=g,a.X=h,a.i=e}var c=this;c.next=function(){var a,b,d=c.w,e=c.X,f=c.i;return c.w=d=d+1640531527|0,b=e[f+34&127],a=e[f=f+1&127],b^=b<<13,a^=a<<17,b^=b>>>15,a^=a>>>12,b=e[f]=b^a,c.i=f,b+(d^d>>>16)|0},b(c,a)}function e(a,b){return b.i=a.i,b.w=a.w,b.X=a.X.slice(),b}function f(a,b){null==a&&(a=+new Date);var c=new d(a),f=b&&b.state,g=function(){return(c.next()>>>0)/4294967296};return g["double"]=function(){do var a=c.next()>>>11,b=(c.next()>>>0)/4294967296,d=(a+b)/(1<<21);while(0===d);return d},g.int32=c.next,g.quick=g,f&&(f.X&&e(f,c),g.state=function(){return e(c,{})}),g}b&&b.exports?b.exports=f:c&&c.amd?c(function(){return f}):this.xor4096=f}(this,"object"==typeof b&&b,"function"==typeof define&&define)},{}],663:[function(a,b,c){!function(a,b,c){function d(a){var b=this,c="";b.x=0,b.y=0,b.z=0,b.w=0,b.next=function(){var a=b.x^b.x<<11;return b.x=b.y,b.y=b.z,b.z=b.w,b.w^=b.w>>>19^a^a>>>8},a===(0|a)?b.x=a:c+=a;for(var d=0;d<c.length+64;d++)b.x^=0|c.charCodeAt(d),b.next()}function e(a,b){return b.x=a.x,b.y=a.y,b.z=a.z,b.w=a.w,b}function f(a,b){var c=new d(a),f=b&&b.state,g=function(){return(c.next()>>>0)/4294967296};return g["double"]=function(){do var a=c.next()>>>11,b=(c.next()>>>0)/4294967296,d=(a+b)/(1<<21);while(0===d);return d},g.int32=c.next,g.quick=g,f&&("object"==typeof f&&e(f,c),g.state=function(){return e(c,{})}),g}b&&b.exports?b.exports=f:c&&c.amd?c(function(){return f}):this.xor128=f}(this,"object"==typeof b&&b,"function"==typeof define&&define)},{}],662:[function(a,b,c){!function(a,b,c){function d(a){var b=this,c="";b.next=function(){var a=b.b,c=b.c,d=b.d,e=b.a;return a=a<<25^a>>>7^c,c=c-d|0,d=d<<24^d>>>8^e,e=e-a|0,b.b=a=a<<20^a>>>12^c,b.c=c=c-d|0,b.d=d<<16^c>>>16^e,b.a=e-a|0},b.a=0,b.b=0,b.c=-1640531527,b.d=1367130551,a===Math.floor(a)?(b.a=a/4294967296|0,b.b=0|a):c+=a;for(var d=0;d<c.length+20;d++)b.b^=0|c.charCodeAt(d),b.next()}function e(a,b){return b.a=a.a,b.b=a.b,b.c=a.c,b.d=a.d,b}function f(a,b){var c=new d(a),f=b&&b.state,g=function(){return(c.next()>>>0)/4294967296};return g["double"]=function(){do var a=c.next()>>>11,b=(c.next()>>>0)/4294967296,d=(a+b)/(1<<21);while(0===d);return d},g.int32=c.next,g.quick=g,f&&("object"==typeof f&&e(f,c),g.state=function(){return e(c,{})}),g}b&&b.exports?b.exports=f:c&&c.amd?c(function(){return f}):this.tychei=f}(this,"object"==typeof b&&b,"function"==typeof define&&define)},{}],661:[function(a,b,c){!function(a,b,c){function d(a){var b=this,c=g();b.next=function(){var a=2091639*b.s0+2.3283064365386963e-10*b.c;return b.s0=b.s1,b.s1=b.s2,b.s2=a-(b.c=0|a)},b.c=1,b.s0=c(" "),b.s1=c(" "),b.s2=c(" "),b.s0-=c(a),b.s0<0&&(b.s0+=1),b.s1-=c(a),b.s1<0&&(b.s1+=1),b.s2-=c(a),b.s2<0&&(b.s2+=1),c=null}function e(a,b){return b.c=a.c,b.s0=a.s0,b.s1=a.s1,b.s2=a.s2,b}function f(a,b){var c=new d(a),f=b&&b.state,g=c.next;return g.int32=function(){return 4294967296*c.next()|0},g["double"]=function(){return g()+1.1102230246251565e-16*(2097152*g()|0)},g.quick=g,f&&("object"==typeof f&&e(f,c),g.state=function(){return e(c,{})}),g}function g(){var a=4022871197,b=function(b){b=b.toString();for(var c=0;c<b.length;c++){a+=b.charCodeAt(c);var d=.02519603282416938*a;a=d>>>0,d-=a,d*=a,a=d>>>0,d-=a,a+=4294967296*d}return 2.3283064365386963e-10*(a>>>0)};return b}b&&b.exports?b.exports=f:c&&c.amd?c(function(){return f}):this.alea=f}(this,"object"==typeof b&&b,"function"==typeof define&&define)},{}],204:[function(a,b,c){"use strict";var d=a("./NetSimEncodingControl.html.ejs"),e=a("./NetSimConstants").EncodingType,f=b.exports=function(a,b,c){this.rootDiv_=a,this.levelConfig_=b,this.changeEncodingCallback_=c,this.checkboxes_=null,this.render()};f.prototype.render=function(){var a=$(d({level:this.levelConfig_}));this.rootDiv_.html(a),this.checkboxes_=this.rootDiv_.find('input[type="checkbox"][name="encoding_checkboxes"]'),this.checkboxes_.change(this.onCheckboxesChange_.bind(this))},f.prototype.onCheckboxesChange_=function(){var a=[];this.checkboxes_.filter(":checked").each(function(b,c){a.push(c.value)}),this.changeEncodingCallback_(a)},f.prototype.setEncodings=function(a){this.checkboxes_.each(function(b,c){$(c).attr("checked",a.indexOf(c.value)>-1)})};var g=function(a){return a.map(function(a){return"tr."+a}).join(", ")};f.hideRowsByEncoding=function(a,b){var c=[];for(var d in e)e.hasOwnProperty(d)&&-1===b.indexOf(e[d])&&c.push(e[d]);a.find(g(b)).show(),a.find(g(c)).hide()},f.encodingsAsHash=function(a){return a.reduce(function(a,b){return a[b]=!0,a},{})}},{"./NetSimConstants":194,"./NetSimEncodingControl.html.ejs":203}],203:[function(require,module,exports){module.exports=function(){var t=function anonymous(locals,filters,escape){escape=escape||function(a){return String(a).replace(/&(?!\w+;)/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")};var buf=[];with(locals||{})!function(){function a(a,b){var c=["encoding_checkboxes_"+a];-1===level.showEncodingControls.indexOf(a)&&c.push("hidden-control"),
buf.push('\n    <div class="',escape(c.join(" ")),'">\n      <input type="checkbox"\n             name="encoding_checkboxes"\n             id="encoding_checkboxes_',escape(a),'"\n             value="',escape(a),'"\n          />\n      <label for="encoding_checkboxes_',escape(a),'">',escape(b),"</label>\n    </div>\n    ")}buf.push("");var b=require("./NetSimConstants").EncodingType,c=require("./locale");buf.push('\n<div class="netsim-encoding-selector">\n  <h1>',escape(c.encoding()),"</h1>\n  "),a(b.ASCII,c.ascii()),buf.push("\n  "),a(b.DECIMAL,c.decimal()),buf.push("\n  "),a(b.HEXADECIMAL,c.hexadecimal()),buf.push("\n  "),a(b.BINARY,c.binary()),buf.push("\n  "),a(b.A_AND_B,c.a_and_b()),buf.push("\n</div>")}();return buf.join("")};return function(a){return t(a,require("ejs").filters)}}()},{"./NetSimConstants":194,"./locale":264,ejs:500}],189:[function(require,module,exports){module.exports=function(){var t=function anonymous(locals,filters,escape){escape=escape||function(a){return String(a).replace(/&(?!\w+;)/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")};var buf=[];with(locals||{})!function(){function a(a,b){buf.push('\n    <tr class="',escape(a),'">\n      <th nowrap class="',escape(g.ENCODING_LABEL),'">',escape(e(a)),'</th>\n      <td class="',escape(g.MESSAGE),'">',escape(b),"</td>\n    </tr>\n    ")}buf.push("");var b=require("./locale"),c=require("./NetSimConstants"),d=require("./DataConverters"),e=require("./NetSimUtils").getEncodingLabel,f=c.EncodingType,g=c.PacketUIColumnType;buf.push('\n<div class="scroll-area bit-log-scroll-area">\n  <div class="packet">\n    <table>\n      <tbody>\n        '),a(f.ASCII,d.binaryToAscii(binary,chunkSize)),a(f.DECIMAL,d.alignDecimal(d.binaryToDecimal(binary,chunkSize))),a(f.HEXADECIMAL,d.formatHex(d.binaryToHex(binary),chunkSize)),a(f.BINARY,d.formatBinary(binary,chunkSize)),a(f.A_AND_B,d.formatAB(d.binaryToAB(binary),chunkSize)),buf.push("\n      </tbody>\n    </table>\n  </div>\n  "),showReadWireButton&&buf.push('\n    <div class="panel-footer bit-log-panel-footer">\n      <div class="right-side-controls">\n        <span class="netsim-button large-button" id="read-wire-button">',escape(b.readWire()),"</span>\n      </div>\n    </div>\n  "),buf.push("\n</div>\n")}();return buf.join("")};return function(a){return t(a,require("ejs").filters)}}()},{"./DataConverters":184,"./NetSimConstants":194,"./NetSimUtils":249,"./locale":264,ejs:500}],188:[function(a,b,c){"use strict";a("../utils");var d=a("./NetSimConstants"),e=a("./NetSimUtils"),f=a("./NetSimSlider"),g=b.exports=function(a,b,c){f.LogarithmicSlider.call(this,a,{onChange:b,onStop:c,value:1/0,min:4,max:128*d.BITS_PER_KILOBIT,upperBoundInfinite:!0}),this.render()};g.inherits(f.LogarithmicSlider),g.prototype.valueToLabel=function(a){return e.bitrateToLocalizedRoundedBitrate(a)}},{"../utils":324,"./NetSimConstants":194,"./NetSimSlider":243,"./NetSimUtils":249}],243:[function(a,b,c){"use strict";var d=a("../utils"),e=a("./NetSimSlider.html.ejs"),f=a("./locale"),g=0,h=100,i=b.exports=function(a,b){if(this.instanceID_=i.uniqueIDCounter,i.uniqueIDCounter++,this.rootDiv_=a,this.changeCallback_=d.valueOr(b.onChange,function(){}),this.stopCallback_=d.valueOr(b.onStop,function(){}),this.minValue_=d.valueOr(b.min,g),this.maxValue_=d.valueOr(b.max,h),this.value_=d.valueOr(b.value,this.minValue_),this.isUpperBoundInfinite_=d.valueOr(b.upperBoundInfinite,!1),this.isLowerBoundInfinite_=d.valueOr(b.lowerBoundInfinite,!1),this.step_=d.valueOr(b.step,1),0===this.step_)throw new Error("NetSimSlider does not support zero step values.");if(this.step_%1!==0)throw new Error("NetSimSlider does not support non-integer step values.  Use DecimalPrecisionSlider instead.");this.isDisabled_=d.valueOr(b.isDisabled,!1)};i.uniqueIDCounter=0,i.prototype.isStepNegative_=function(){return this.step_<0},i.prototype.render=function(){var a=this.isLowerBoundInfinite_?-(1/0):this.minValue_,b=this.isUpperBoundInfinite_?1/0:this.maxValue_,c=this.valueToSliderPosition(this.isStepNegative_()?b:a),d=this.valueToSliderPosition(this.isStepNegative_()?a:b),f=$(e({instanceID:this.instanceID_,minValue:this.valueToShortLabel(this.isStepNegative_()?b:a),maxValue:this.valueToShortLabel(this.isStepNegative_()?a:b)}));this.rootDiv_.html(f),this.rootDiv_.find(".slider").slider({value:this.valueToSliderPosition(this.value_),min:c,max:d,step:Math.abs(this.step_),slide:this.onSliderValueChange_.bind(this),stop:this.onSliderStop_.bind(this),disabled:this.isDisabled_}),(this.isLowerBoundInfinite_||this.isUpperBoundInfinite_)&&this.rootDiv_.find(".slider-labels").addClass("wide-labels"),this.setLabelFromValue_(this.value_)},i.prototype.disable=function(){this.isDisabled_=!0,this.rootDiv_.find(".slider").slider("option","disabled",!0)},i.prototype.enable=function(){this.isDisabled_=!1,this.rootDiv_.find(".slider").slider("option","disabled",!1)},i.prototype.setValue=function(a){this.value_!==a&&(this.value_=a,this.rootDiv_.find(".slider").slider("option","value",this.valueToSliderPosition(a)),this.setLabelFromValue_(a))},i.prototype.onSliderValueChange_=function(a,b){var c=this.sliderPositionToValue(b.value);this.value_=c,this.setLabelFromValue_(c),this.changeCallback_(c)},i.prototype.onSliderStop_=function(){this.stopCallback_(this.value_)},i.prototype.setLabelFromValue_=function(a){this.rootDiv_.find(".slider-value").text(this.valueToLabel(a))},i.prototype.valueToSliderPosition=function(a){return this.isUpperBoundInfinite_&&a>this.maxValue_?this.valueToSliderPosition(this.maxValue_)+this.step_:this.isLowerBoundInfinite_&&a<this.minValue_?this.valueToSliderPosition(this.minValue_)-this.step_:Math.max(this.minValue_,Math.min(this.maxValue_,a))*(this.isStepNegative_()?-1:1)},i.prototype.sliderPositionToValue=function(a){return this.isStepNegative_()?a<this.valueToSliderPosition(this.maxValue_)?this.isUpperBoundInfinite_?1/0:this.maxValue_:a>this.valueToSliderPosition(this.minValue_)?this.isLowerBoundInfinite_?-(1/0):this.minValue_:-a:a>this.valueToSliderPosition(this.maxValue_)?this.isUpperBoundInfinite_?1/0:this.maxValue_:a<this.valueToSliderPosition(this.minValue_)?this.isLowerBoundInfinite_?-(1/0):this.minValue_:a},i.prototype.valueToLabel=function(a){return a===1/0||a===-(1/0)?f.unlimited():a},i.prototype.valueToShortLabel=function(a){return this.valueToLabel(a)},i.DecimalPrecisionSlider=function(a,b){this.precision_=d.valueOr(b.precision,2),b.step=b.step*Math.pow(10,this.precision_),i.call(this,a,b)},i.DecimalPrecisionSlider.inherits(i),i.DecimalPrecisionSlider.prototype.valueToSliderPosition=function(a){return i.prototype.valueToSliderPosition.call(this,a)*Math.pow(10,this.precision_)},i.DecimalPrecisionSlider.prototype.sliderPositionToValue=function(a){return i.prototype.sliderPositionToValue.call(this,a)/Math.pow(10,this.precision_)};var j=1,k=2;i.LogarithmicSlider=function(a,b){b.min=d.valueOr(b.min,j),i.call(this,a,b),this.logBase_=d.valueOr(b.logBase,k),this.lnLogBase_=Math.log(this.logBase_),this.calculateSliderBounds_()},i.LogarithmicSlider.inherits(i),i.LogarithmicSlider.prototype.calculateSliderBounds_=function(){this.maxSliderPosition=this.logFloor_(this.maxValue_),Math.pow(this.logBase_,this.maxSliderPosition)!==this.maxValue_&&(this.maxSliderPosition+=this.step_),this.minSliderPosition=this.logFloor_(this.minValue_),this.infinitySliderPosition=this.maxSliderPosition+this.step_,this.negInfinitySliderPosition=this.minSliderPosition-this.step_},i.LogarithmicSlider.prototype.logFloor_=function(a){var b=1e-7;return Math.floor(b+Math.log(a)/this.lnLogBase_)},i.LogarithmicSlider.prototype.valueToSliderPosition=function(a){return a>this.maxValue_?this.isUpperBoundInfinite_?this.infinitySliderPosition:this.maxSliderPosition:a===this.maxValue_?this.maxSliderPosition:a<this.minValue_?this.isLowerBoundInfinite_?this.negInfinitySliderPosition:this.minSliderPosition:a===this.minValue_?this.minSliderPosition:Math.max(this.minSliderPosition,this.logFloor_(a))},i.LogarithmicSlider.prototype.sliderPositionToValue=function(a){return a>this.maxSliderPosition?this.isUpperBoundInfinite_?1/0:this.maxValue_:a===this.maxSliderPosition?this.maxValue_:a<this.minSliderPosition?this.isLowerBoundInfinite_?-(1/0):this.minValue_:a===this.minSliderPosition?this.minValue_:Math.pow(this.logBase_,a)}},{"../utils":324,"./NetSimSlider.html.ejs":242,"./locale":264}],242:[function(require,module,exports){module.exports=function(){var t=function anonymous(locals,filters,escape){escape=escape||function(a){return String(a).replace(/&(?!\w+;)/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")};var buf=[];with(locals||{})!function(){buf.push('<div id="netsim_slider_',escape(instanceID),'" class="netsim-slider">\n  <div class="slider-inline-wrap">\n    <div class="slider"></div>\n    <div class="slider-labels">\n      <div class="max-value">',escape(maxValue),'</div>\n      <div class="min-value">',escape(minValue),'</div>\n      <div class="current-value">\n        <label><span class="slider-value"></span></label>\n      </div>\n    </div>\n  </div>\n</div>\n')}();return buf.join("")};return function(a){return t(a,require("ejs").filters)}}()},{ejs:500}],187:[function(a,b,c){"use strict";var d="/v3/netsim",e={create:function(a){return $.extend({},e,{shardID:a,baseUrl:d+"/"+a})},makeTableApi:function(a){return f.create(this.shardID,a)}},f={create:function(a,b){return $.extend({},f,{shardID:a,tableName:b,baseUrl:d+"/"+a+"/"+b})},allRows:function(a){$.ajax({url:this.baseUrl,type:"get",dataType:"json"}).done(function(b,c){a(null,b)}).fail(function(b,c,d){var e=new Error("status: "+c+"; error: "+d);a(e,null)})},allRowsFromID:function(a,b){$.ajax({url:this.baseUrl+"@"+a,type:"get",dataType:"json"}).done(function(a,c){b(null,a)}).fail(function(a,c,d){var e=new Error("status: "+c+"; error: "+d);b(e,null)})},createRow:function(a,b){var c;try{c=JSON.stringify(a)}catch(d){return void b(d,void 0)}$.ajax({url:this.baseUrl,type:"post",contentType:"application/json; charset=utf-8",data:c}).done(function(a,c){b(null,a)}).fail(function(a,c,d){var e=new Error("status: "+c+"; error: "+d);b(e,void 0)})},deleteRows:function(a,b,c){c=c!==!1;var d=a.map(function(a){return"id[]="+a}).join("&");$.ajax({url:this.baseUrl+"?"+d,type:"delete",dataType:"json",async:c}).done(function(a,c){b(null,!0)}).fail(function(a,c,d){var e=new Error("status: "+c+"; error: "+d);b(e,!1)})},fetchRow:function(a,b){$.ajax({url:this.baseUrl+"/"+a,type:"get",dataType:"json"}).done(function(a,c){b(null,a)}).fail(function(a,c,d){var e=new Error("status: "+c+"; error: "+d);b(e,void 0)})},updateRow:function(a,b,c){$.ajax({url:this.baseUrl+"/"+a,type:"post",contentType:"application/json; charset=utf-8",data:JSON.stringify(b)}).done(function(a,b){c(null,a)}).fail(function(a,b,d){var e=new Error("status: "+b+"; error: "+d);c(e,!1)})}};b.exports={makeShardApi:function(a){return e.create(a)},makeTableApi:function(a,b){return f.create(a,b)}}},{}],186:[function(a,b,c){"use strict";var d=a("./NetSimAlert.html.ejs"),e=a("./ArgumentUtils"),f=a("./NetSimLogger"),g=f.getSingleton(),h=b.exports={};h.getOrCreateAlertContainer_=function(){var a=$(".netsim-alert-container");return 0===a.length&&(a=$("<div>").addClass("netsim-alert-container"),$("#netsim").append(a),a.on("closed",function(){1===$(this).children().length&&$(this).remove()})),a},h.isBootstrapAlertLoaded_=function(){return"function"==typeof $().alert},h.create_=function(a,b,c){if(!h.isBootstrapAlertLoaded_())return void g.warn("Bootstrap Alert not loaded; NetSimAlert refusing to create alert");e.validateRequired(a,"body",e.isString),e.validateRequired(b,"flavor",e.isString),c=e.extendOptionsObject(c);var f=h.getOrCreateAlertContainer_(),i=$(d({flavor:b,body:a,title:c.get("title",e.isString)}));return f.append(i),i.alert(),setTimeout(function(){i.alert("close")},c.get("timeout",e.isPositiveNoninfiniteNumber,5e3)),i},h.warn=function(a,b){return h.create_(a,"alert-warn",b)},h.info=function(a,b){return h.create_(a,"alert-info",b)},h.error=function(a,b){return h.create_(a,"alert-error",b)},h.success=function(a,b){return h.create_(a,"alert-success",b)}},{"./ArgumentUtils":182,"./NetSimAlert.html.ejs":185,"./NetSimLogger":213}],185:[function(require,module,exports){module.exports=function(){var t=function anonymous(locals,filters,escape){escape=escape||function(a){return String(a).replace(/&(?!\w+;)/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")};var buf=[];with(locals||{})!function(){buf.push(""),buf.push('\n<div class="alert netsim-alert ',escape(flavor),' fade in">\n  <button type="button" class="netsim-alert-button close" data-dismiss="alert" aria-label="Close"><span aria-hidden="true">&times;</span></button>\n  '),title&&buf.push("<strong>",escape(title),"</strong>"),buf.push("\n  ",escape(body),"\n</div>\n")}();return buf.join("")};return function(a){return t(a,require("ejs").filters)}}()},{ejs:500}],184:[function(a,b,c){"use strict";a("../utils");var d=a("./NetSimUtils");if(!window.atob||!window.btoa){var e=a("Base64");window.btoa=window.btoa||e.btoa,window.atob=window.atob||e.atob}c.minifyAB=function(a){return a.replace(/[^AB]/gi,"").toUpperCase()},c.formatAB=function(a,b){return c.formatBinary(c.abToBinary(a),b).replace(/0/g,"A").replace(/1/g,"B")},c.minifyBinary=function(a){return a.replace(/[^01]/g,"")},c.formatBinary=function(a,b){if(0>=b)throw new RangeError("Parameter chunkSize must be greater than zero");for(var d=c.minifyBinary(a),e=[],f=0;f<d.length;f+=b)e.push(d.substr(f,b));return e.join(" ")},c.minifyHex=function(a){return a.replace(/[^0-9A-F]/gi,"").toUpperCase()},c.minifyDecimal=function(a){return a.replace(/(^\s+|\s+$|[^0-9\s])/g,"").replace(/\s+/g," ")},c.formatHex=function(a,b){if(0>=b)throw new RangeError("Parameter chunkSize must be greater than zero");if(b%4!==0)return a;for(var d=b/4,e=c.minifyHex(a),f=[],g=0;g<e.length;g+=d)f.push(e.substr(g,d));return f.join(" ")},c.alignDecimal=function(a){if(""===a.replace(/\D/g,""))return"";var b=c.minifyDecimal(a).split(/\s+/),d=b.reduce(function(a,b){return b.length>a?b.length:a},0),e="0".repeat(d);return b.map(function(a){return(e+a).slice(-d)}).join(" ")},c.abToInt=function(a){return c.binaryToInt(c.abToBinary(a))},c.intToAB=function(a,b){return c.binaryToAB(c.intToBinary(a,b))},c.abToBinary=function(a){return c.minifyAB(a).replace(/A/g,"0").replace(/B/g,"1")},c.binaryToAB=function(a){return c.minifyBinary(a).replace(/0/g,"A").replace(/1/g,"B")},c.binaryToInt=function(a){return parseInt(c.minifyBinary(a),2)};var f=function(a,b,c){if(0>=c)throw new RangeError("Output width must be greater than zero");return d.zeroPadLeft(a.toString(b),c)};c.intToBinary=function(a,b){return f(a,2,b)},c.hexToInt=function(a){return parseInt(c.minifyHex(a),16)},c.intToHex=function(a,b){return f(a,16,b).toUpperCase()},c.hexToBinary=function(a){for(var b=c.minifyHex(a),d="",e=0;e<b.length;e++)d+=c.intToBinary(c.hexToInt(b.substr(e,1)),4);return d},c.binaryToHex=function(a){for(var b,e=4,f=[],g=c.minifyBinary(a),h=0;h<g.length;h+=e)b=d.zeroPadRight(g.substr(h,e),e),f.push(c.intToHex(c.binaryToInt(b),1));return f.join("")},c.decimalToBinary=function(a,b){return""===a.replace(/\D/g,"")?"":c.minifyDecimal(a).split(/\s+/).map(function(a){return c.intToBinary(parseInt(a,10),b)}).join("")},c.binaryToDecimal=function(a,b){for(var e,f=[],g=c.minifyBinary(a),h=0;h<g.length;h+=b)e=d.zeroPadRight(g.substr(h,b),b),f.push(c.binaryToInt(e));return f.join(" ")},c.asciiToBinary=function(a,b){for(var d=[],e=0;e<a.length;e++)d.push(c.intToBinary(a.charCodeAt(e),b));return d.join("")},c.binaryToAscii=function(a,b){if(0>=b)throw new RangeError("Parameter byteSize must be greater than zero");for(var e,f=[],g=c.minifyBinary(a),h=0;h<g.length;h+=b)e=d.zeroPadRight(g.substr(h,b),b),f.push(String.fromCharCode(c.binaryToInt(e)));return f.join("")},c.binaryToBase64=function(a){if(/^[01]*$/.test(a)===!1)throw new TypeError('argument binaryString to method binaryToBase64must be a binary string; received "'+a+'" instead');var b=8*Math.ceil(a.length/8),e=d.zeroPadRight(a,b),f=window.btoa(c.binaryToAscii(e,8));return{string:f,len:a.length}},c.base64ToBinary=function(a,b){var d;try{d=window.atob(a)}catch(e){throw new TypeError("argument base64string to method base64ToBinarymust be a base64-encoded string")}return c.asciiToBinary(d,8).substr(0,b)},c.binaryToAddressString=function(a,b){var d=c.minifyBinary(a);if(0===d.length)return"";var e=0;return b.split(/(\D+)/).map(function(a){var b=parseInt(a,10);if(isNaN(b))return a;var f=d.substr(e,b),g=f.length>0?c.binaryToInt(f):0;return e+=b,g.toString()}).join("")},c.addressStringToBinary=function(a,b){if(0===a.length)return"";for(var d,e=a.toString().split(/\D+/).map(function(a){return parseInt(a,10)}).filter(function(a){return!isNaN(a)}),f=b.split(/\D+/).map(function(a){return parseInt(a,10)}).filter(function(a){return!isNaN(a)}),g="",h=0;h<f.length;h++)d=h<e.length?e[h]:0,g+=c.intToBinary(d,f[h]);return g},c.formatBinaryForAddressHeader=function(a,b){var d=c.minifyBinary(a),e=b.split(/\D+/).map(function(a){return parseInt(a,10)}).filter(function(a){return!isNaN(a)}),f=[],g=0;e.forEach(function(a){var b=d.substr(g,a);b.length>0&&f.push(b),g+=a});var h=d.substr(g);return h.length>0&&f.push(h),f.join(" ")}},{"../utils":324,"./NetSimUtils":249,Base64:326}],326:[function(a,b,c){!function(){function a(a){this.message=a}var b="undefined"!=typeof c?c:this,d="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";a.prototype=new Error,a.prototype.name="InvalidCharacterError",b.btoa||(b.btoa=function(b){for(var c,e,f=String(b),g=0,h=d,i="";f.charAt(0|g)||(h="=",g%1);i+=h.charAt(63&c>>8-g%1*8)){if(e=f.charCodeAt(g+=.75),e>255)throw new a("'btoa' failed: The string to be encoded contains characters outside of the Latin1 range.");c=c<<8|e}return i}),b.atob||(b.atob=function(b){var c=String(b).replace(/=+$/,"");if(c.length%4==1)throw new a("'atob' failed: The string to be decoded is not correctly encoded.");for(var e,f,g=0,h=0,i="";f=c.charAt(h++);~f&&(e=g%4?64*e+f:f,g++%4)?i+=String.fromCharCode(255&e>>(-2*g&6)):0)f=d.indexOf(f);return i})}()},{}],249:[function(a,b,c){"use strict";var d=a("../utils"),e=d.getLodash(),f=a("./locale"),g=a("./NetSimConstants"),h=a("./NetSimLogger").getSingleton(),i=g.EncodingType;c.jQuerySvgElement=function(a){var b=$(document.createElementNS("http://www.w3.org/2000/svg",a));return b.addClass=function(a){var c=b.attr("class");return c?b.hasClass(a)||b.attr("class",c+" "+a):b.attr("class",a),b},b.removeClass=function(a){var c=b.attr("class");if(c){var d=c.split(/\s+/g).filter(function(b){return b!==a}).join(" ");b.attr("class",d)}return b},b.hasClass=function(a){var c=b.attr("class");return c&&c.split(/\s+/g).some(function(b){return b===a})},b.toggleClass=function(a,c){return c=d.valueOr(c,!b.hasClass(a)),c?b.addClass(a):b.removeClass(a),b},b},c.shouldShowTab=function(a,b){return a.showTabs.indexOf(b)>-1},c.getEncodingLabel=function(a){return a===i.ASCII?f.ascii():a===i.DECIMAL?f.decimal():a===i.HEXADECIMAL?f.hex():a===i.BINARY?f.binary():a===i.A_AND_B?f.a_and_b():""},c.forEachEnumValue=function(a,b){for(var c in a)a.hasOwnProperty(c)&&b(a[c])};var j=[{jsVal:1/0,jsonVal:"Infinity"},{jsVal:-(1/0),jsonVal:"-Infinity"},{jsVal:NaN,jsonVal:"NaN"},{jsVal:void 0,jsonVal:"undefined"}],k=function(a){return a!==a};c.serializeNumber=function(a){var b=e.find(j,function(b){return b.jsVal===a||k(b.jsVal)&&k(a)});return b?b.jsonVal:a},c.deserializeNumber=function(a){var b=e.find(j,function(b){return b.jsonVal===a});return b?b.jsVal:a},c.scrubHeaderSpecForBackwardsCompatibility=function(a){var b=!1,c=[];return a.forEach(function(a){"string"==typeof a?c.push(a):null!==a&&"object"==typeof a&&(c.push(a.key),b=!0)}),b&&h.warn("Converting old header specification format to new format. This level should be updated to use the new format."),c},c.scrubLevelConfiguration_=function(a){var b=e.clone(a,!0);return b.routerExpectsPacketHeader=c.scrubHeaderSpecForBackwardsCompatibility(b.routerExpectsPacketHeader),b.clientInitialPacketHeader=c.scrubHeaderSpecForBackwardsCompatibility(b.clientInitialPacketHeader),b.addressFormat=b.addressFormat.toString(),b.defaultPacketSizeLimit=c.deserializeNumber(b.defaultPacketSizeLimit),b.defaultPacketSizeLimit===1/0&&(b.defaultPacketSizeLimit=8192),b.defaultBitRateBitsPerSecond=c.deserializeNumber(b.defaultBitRateBitsPerSecond),b.defaultChunkSizeBits=c.deserializeNumber(b.defaultChunkSizeBits),b.defaultRouterBandwidth=c.deserializeNumber(b.defaultRouterBandwidth),b.defaultRouterMemory=c.deserializeNumber(b.defaultRouterMemory),Object.keys(b).filter(function(a){return!/_/.test(a)}).forEach(function(a){var c=j.some(function(c){return b[a]===c.jsonVal});c&&h.warn("Level option '"+a+"' has unconverted string value '"+b[a]+"'")}),b},c.bitsToLocalizedRoundedBytesize=function(a){if(a===1/0)return f.unlimited();var b=Math.floor(a/g.BITS_PER_GIGABYTE);if(b>0)return f.x_GBytes({x:b});var c=Math.floor(a/g.BITS_PER_MEGABYTE);if(c>0)return f.x_MBytes({x:c});var d=Math.floor(a/g.BITS_PER_KILOBYTE);if(d>0)return f.x_KBytes({x:d});var e=Math.floor(a/g.BITS_PER_BYTE);return e>0?f.x_Bytes({x:e}):f.x_bits({x:a})},c.bitrateToLocalizedRoundedBitrate=function(a){if(a===1/0)return f.unlimited();var b=Math.floor(a/g.BITS_PER_GIGABIT);if(b>0)return f.x_Gbps({x:b});var c=Math.floor(a/g.BITS_PER_MEGABIT);if(c>0)return f.x_Mbps({x:c});var d=Math.floor(a/g.BITS_PER_KILOBIT);if(d>0)return f.x_Kbps({x:d});var e=Math.floor(100*a)/100;return f.x_bps({x:e})},c.zeroPadLeft=function(a,b){var c="0".repeat(b);return(c+a).slice(-b)},c.zeroPadRight=function(a,b){var c="0".repeat(b);return(a+c).substr(0,b)}},{"../utils":324,"./NetSimConstants":194,"./NetSimLogger":213,"./locale":264}],264:[function(a,b,c){b.exports=window.blockly.netsim_locale},{}],213:[function(a,b,c){"use strict";var d=b.exports=function(a,b){this.outputConsole_=a,this.log_=function(){},this.info=function(){},this.warn=function(){},this.error=function(){},this.setVerbosity(void 0===b?e.VERBOSE:b)},e={NONE:0,ERROR:1,WARN:2,INFO:3,VERBOSE:4};d.LogLevel=e;var f;d.getSingleton=function(){return void 0===f&&(f=new d(console,e.WARN)),f},d.prototype.setVerbosity=function(a){this.log_=this.outputConsole_&&this.outputConsole_.log?Function.prototype.bind.call(this.outputConsole_.log,this.outputConsole_):function(){},a>=e.INFO?this.info=this.outputConsole_&&this.outputConsole_.info?Function.prototype.bind.call(this.outputConsole_.info,this.outputConsole_):this.log_:this.info=function(){},a>=e.WARN?this.warn=this.outputConsole_&&this.outputConsole_.warn?Function.prototype.bind.call(this.outputConsole_.warn,this.outputConsole_):this.log_:this.warn=function(){},a>=e.ERROR?this.error=this.outputConsole_&&this.outputConsole_.error?Function.prototype.bind.call(this.outputConsole_.error,this.outputConsole_):this.log_:this.error=function(){}},d.prototype.log=function(a,b){switch(void 0===b&&(b=e.INFO),b){case e.ERROR:this.error(a);break;case e.WARN:this.warn(a);break;case e.INFO:this.info(a);break;default:this.log_(a)}}},{}],194:[function(a,b,c){"use strict";c.BITS_PER_NIBBLE=4,c.BITS_PER_BYTE=8,c.BITS_PER_KILOBYTE=1024*c.BITS_PER_BYTE,c.BITS_PER_MEGABYTE=1024*c.BITS_PER_KILOBYTE,c.BITS_PER_GIGABYTE=1024*c.BITS_PER_MEGABYTE,c.BITS_PER_KILOBIT=1024,c.BITS_PER_MEGABIT=1024*c.BITS_PER_KILOBIT,c.BITS_PER_GIGABIT=1024*c.BITS_PER_MEGABIT,c.NodeType={CLIENT:"client",ROUTER:"router"},c.MessageGranularity={PACKETS:"packets",BITS:"bits"},c.DnsMode={NONE:"none",MANUAL:"manual",AUTOMATIC:"automatic"},c.EncodingType={ASCII:"ascii",DECIMAL:"decimal",HEXADECIMAL:"hexadecimal",BINARY:"binary",A_AND_B:"a_and_b"},c.NetSimTabType={INSTRUCTIONS:"instructions",MY_DEVICE:"my_device",ROUTER:"router",DNS:"dns"},c.PacketUIColumnType={ENCODING_LABEL:"encodingLabel",TO_ADDRESS:"toAddress",FROM_ADDRESS:"fromAddress",PACKET_INFO:"packetInfo",MESSAGE:"message"}},{}],183:[function(a,b,c){"use strict";var d=b.exports=function(){this.isReady=!1,this.whenReadyCallbacks_=[],this.id=void 0,this.name="",this.isAdmin=!1,this.ownedSections=[]};d.currentUser_=null,d.getCurrentUser=function(){return d.currentUser_||(d.currentUser_=new d,$.ajax({url:"/v2/user",type:"get",dataType:"json",success:function(a){d.currentUser_.initialize(a)},error:function(){d.currentUser_.initialize({isSignedIn:!1})}})),d.currentUser_},d.prototype.initialize=function(a){this.id=a.id,this.name=a.name,this.isAdmin=a.admin===!0,this.ownedSections=a.owned_sections,this.isSignedIn=a.isSignedIn!==!1,this.isReady=!0,this.whenReadyCallbacks_.forEach(function(a){a(this)}.bind(this)),this.whenReadyCallbacks_.length=0},d.prototype.whenReady=function(a){this.isReady?a(this):this.whenReadyCallbacks_.push(a)},d.prototype.ownsSection=function(a){return this.ownedSections.some(function(b){return b.id===a})}},{}],182:[function(a,b,c){"use strict";c.validateRequired=function(a,b,c){if(void 0===a)throw new TypeError(b+" is required.");if("function"==typeof c&&!c(a))throw new TypeError("Cannot set "+b+" to "+a+".");return a},c.extendOptionsObject=function(a){var b=void 0===a,c="object"==typeof a&&null!==a;if(!b&&!c)throw new TypeError("Options object must be an object.");if(a&&a.hasOwnProperty("get"))throw new Error('Cannot extend options; property "get" would be overwritten.');return $.extend({},a,{get:function(b,c,d){if(!a||void 0===a[b])return d;if("function"==typeof c&&!c(a[b]))throw new TypeError("Cannot set "+b+" to "+a[b]+".");return a[b]}})},c.isPositiveNoninfiniteNumber=function(a){return"number"==typeof a&&!isNaN(a)&&a>=0&&a!==1/0},c.isBoolean=function(a){return"boolean"==typeof a},c.isString=function(a){return"string"==typeof a}},{}],4:[function(a,b,c){"use strict";var d=a("./ObservableEvent"),e=window.performance&&window.performance.now?window.performance.now.bind(window.performance):Date.now,f=10,g=1e3/f,h=30,i=1e3/h,j=b.exports=function(){this.enabled=!1,this.tickClock=new j.Clock,this.renderClock=new j.Clock,this.tick_=this.buildTickMethod_(),this.render_=this.buildRenderMethod_(),this.tick=new d,this.render=new d};j.Clock=function(){this.time=e(),this.deltaTime=0},j.prototype.buildTickMethod_=function(){var a,b=this;return a=function(){if(b.enabled){var c=e();b.tickClock.deltaTime=c-b.tickClock.time,b.tickClock.time=c,b.tick.notifyObservers(b.tickClock),setTimeout(a,g-b.tickClock.deltaTime)}}},j.prototype.buildRenderMethod_=function(){var a,b=this;return a=window.requestAnimationFrame?function(c){b.enabled&&(b.renderClock.deltaTime=c-b.renderClock.time,b.renderClock.time=c,b.render.notifyObservers(b.renderClock),requestAnimationFrame(a))}:function(){if(b.enabled){var c=e();b.renderClock.deltaTime=c-b.renderClock.time,b.renderClock.time=c,b.render.notifyObservers(b.renderClock),setTimeout(a,i-b.renderClock.deltaTime)}}},j.prototype.begin=function(){this.enabled=!0,this.tickClock.time=e(),this.renderClock.time=e(),this.tick_(this.tickClock.time),this.render_(this.renderClock.time)},j.prototype.end=function(){this.enabled=!1}},{"./ObservableEvent":2}],2:[function(a,b,c){"use strict";var d=b.exports=function(){this.observerList_=[]};d.prototype.register=function(a){var b={toCall:a};return Object.freeze(b),this.observerList_.push(b),b},d.prototype.unregister=function(a){for(var b=0;b<this.observerList_.length;b++)if(a===this.observerList_[b])return this.observerList_.splice(b,1),!0;return!1},d.prototype.notifyObservers=function(){var a=Array.prototype.slice.call(arguments,0);this.observerList_.forEach(function(b){b.toCall.apply(void 0,a)})}},{}]},{},[265]);