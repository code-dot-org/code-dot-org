require=function a(b,c,d){function e(g,h){if(!c[g]){if(!b[g]){var i="function"==typeof require&&require;if(!h&&i)return i(g,!0);if(f)return f(g,!0);var j=new Error("Cannot find module '"+g+"'");throw j.code="MODULE_NOT_FOUND",j}var k=c[g]={exports:{}};b[g][0].call(k.exports,function(a){var c=b[g][1][a];return e(c?c:a)},k,k.exports,a,b,c,d)}return c[g].exports}for(var f="function"==typeof require&&require,g=0;g<d.length;g++)e(d[g]);return e}({"/home/ubuntu/staging/apps/build/js/maze/main.js":[function(a,b,c){(function(b){"use strict";var c=a("../appMain");window.Maze=a("./maze"),"undefined"!=typeof b&&(b.Maze=window.Maze);var d=a("./blocks"),e=a("./levels"),f=a("./skins");window.mazeMain=function(a){a.skinsModule=f,a.blocksModule=d,c(window.Maze,e,a)}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"../appMain":"/home/ubuntu/staging/apps/build/js/appMain.js","./blocks":"/home/ubuntu/staging/apps/build/js/maze/blocks.js","./levels":"/home/ubuntu/staging/apps/build/js/maze/levels.js","./maze":"/home/ubuntu/staging/apps/build/js/maze/maze.js","./skins":"/home/ubuntu/staging/apps/build/js/maze/skins.js"}],"/home/ubuntu/staging/apps/build/js/maze/skins.js":[function(a,b,c){"use strict";function d(a,b){var c=b.match(/^(.*)\.mp3$/)[1];return[a.assetUrl(b),a.assetUrl(c+".ogg")]}var e=a("../skins"),f=a("../utils"),g=f.getLodash(),h={letters:{nonDisappearingPegmanHittingObstacle:!0,pegmanHeight:50,pegmanWidth:50,danceOnLoad:!1,goal:"",idlePegmanAnimation:"idle_avatar.gif",movePegmanAnimation:"move_avatar.png",movePegmanAnimationSpeedScale:1.5,movePegmanAnimationFrameNumber:9,hideInstructions:!0},bee:{obstacleAnimation:"",obstacleIdle:"obstacle.png",redFlower:"redFlower.png",purpleFlower:"purpleFlower.png",honey:"honey.png",cloud:"cloud.png",cloudAnimation:"cloud_hide.gif",beeSound:!0,nectarSound:"getNectar.mp3",honeySound:"makeHoney.mp3",look:"#000",nonDisappearingPegmanHittingObstacle:!0,idlePegmanAnimation:"idle_avatar.gif",wallPegmanAnimation:"wall_avatar.png",movePegmanAnimation:"move_avatar.png",hittingWallAnimation:"wall.gif",movePegmanAnimationSpeedScale:1.5,movePegmanAnimationFrameNumber:9,actionSpeedScale:{nectar:1},pegmanYOffset:0,tileSheetWidth:5,pegmanHeight:50,pegmanWidth:50},farmer:{obstacleIdle:"obstacle.png",dirt:"dirt.png",fillSound:"fill.mp3",digSound:"dig.mp3",look:"#000",transparentTileEnding:!0,nonDisappearingPegmanHittingObstacle:!0,background:"background"+g.sample([0,1,2,3])+".png",dirtSound:!0,pegmanYOffset:-8,danceOnLoad:!0},pvz:{goalIdle:"goalIdle.gif",obstacleIdle:"obstacleIdle.gif",goalAnimation:"goal.gif",maze_forever:"maze_forever.png",obstacleScale:1.4,pegmanYOffset:-8,danceOnLoad:!0},birds:{goalIdle:"goalIdle.gif",obstacleIdle:"obstacle.png",goalAnimation:"goal.gif",maze_forever:"maze_forever.png",largerObstacleAnimationTiles:"tiles-broken.png",obstacleScale:1.2,additionalSound:!0,idlePegmanAnimation:"idle_avatar.gif",wallPegmanAnimation:"wall_avatar.png",movePegmanAnimation:"move_avatar.png",movePegmanAnimationSpeedScale:1.5,movePegmanAnimationFrameNumber:9,hittingWallAnimation:"wall.gif",approachingGoalAnimation:"close_goal.png",pegmanHeight:68,pegmanWidth:51,pegmanYOffset:-14,turnAfterVictory:!0},scrat:{goalIdle:"goal.png",obstacleIdle:"obstacle.png",goalAnimation:"goal.png",maze_forever:"maze_forever.png",largerObstacleAnimationTiles:"tiles-broken.png",obstacleScale:1.2,additionalSound:!0,idlePegmanAnimation:"idle_avatar_sheet.png",idlePegmanAnimationSpeedScale:1.5,idlePegmanCol:4,idlePegmanRow:11,hittingWallAnimation:"wall_avatar_sheet.png",hittingWallAnimationFrameNumber:20,hittingWallAnimationSpeedScale:1.5,hittingWallPegmanCol:1,hittingWallPegmanRow:20,celebrateAnimation:"jump_acorn_sheet.png",celebratePegmanCol:1,celebratePegmanRow:9,movePegmanAnimation:"move_avatar.png",movePegmanAnimationSpeedScale:1.5,movePegmanAnimationFrameNumber:9,approachingGoalAnimation:"close_goal.png",pegmanHeight:107,pegmanWidth:80,pegmanXOffset:-12,pegmanYOffset:-30,turnAfterVictory:!0}};h.bee_night=h.bee,h.farmer_night=h.farmer,c.load=function(a,b){var c=e.load(a,b),f=h[c.id];c.obstacleScale=1,c.obstacleAnimation=c.assetUrl("obstacle.gif"),c.movePegmanAnimationSpeedScale=1,c.look="#FFF",c.background=c.assetUrl("background.png"),c.tiles=c.assetUrl("tiles.png"),c.pegmanHeight=52,c.pegmanWidth=49,c.pegmanYOffset=0,c.turnAfterVictory=!1,c.danceOnLoad=!1,c.obstacleSound=d(c,"obstacle.mp3"),c.wallSound=d(c,"wall.mp3"),c.winGoalSound=d(c,"win_goal.mp3"),c.wall0Sound=d(c,"wall0.mp3"),c.wall1Sound=d(c,"wall1.mp3"),c.wall2Sound=d(c,"wall2.mp3"),c.wall3Sound=d(c,"wall3.mp3"),c.wall4Sound=d(c,"wall4.mp3");var g=/\.\S{3}$/,i=/^(.*)\.mp3$/;for(var j in f){var k=f[j];i.test(k)?k=d(c,k):g.test(k)&&(k=c.assetUrl(k)),c[j]=k}return c}},{"../skins":"/home/ubuntu/staging/apps/build/js/skins.js","../utils":"/home/ubuntu/staging/apps/build/js/utils.js"}],"/home/ubuntu/staging/apps/build/js/maze/maze.js":[function(a,b,c){"use strict";function d(){var a,b,c,d=document.getElementById("svgMaze"),e=document.createElementNS(T,"rect");e.setAttribute("width",U.MAZE_WIDTH),e.setAttribute("height",U.MAZE_HEIGHT),e.setAttribute("fill","#F1EEE7"),e.setAttribute("stroke-width",1),e.setAttribute("stroke","#CCB"),d.appendChild(e),d.setAttribute("width",U.MAZE_WIDTH),d.setAttribute("height",U.MAZE_HEIGHT);var f=document.getElementById("visualizationColumn");f.style.width=U.MAZE_WIDTH+"px",w.background&&(c=document.createElementNS(T,"image"),c.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",w.background),c.setAttribute("height",U.MAZE_HEIGHT),c.setAttribute("width",U.MAZE_WIDTH),c.setAttribute("x",0),c.setAttribute("y",0),d.appendChild(c)),g(d);var h=document.createElementNS(T,"clipPath");h.setAttribute("id","pegmanClipPath");var i=document.createElementNS(T,"rect");i.setAttribute("id","clipRect"),i.setAttribute("width",U.PEGMAN_WIDTH),i.setAttribute("height",U.PEGMAN_HEIGHT),h.appendChild(i),d.appendChild(h);var j=document.createElementNS(T,"image");j.setAttribute("id","pegman"),j.setAttribute("class","pegman-location"),j.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",w.avatar),j.setAttribute("height",U.PEGMAN_HEIGHT),j.setAttribute("width",21*U.PEGMAN_WIDTH),j.setAttribute("clip-path","url(#pegmanClipPath)"),d.appendChild(j);var k=document.createElementNS(T,"animate");if(k.setAttribute("id","pegmanFadeoutAnimation"),k.setAttribute("attributeType","CSS"),k.setAttribute("attributeName","opacity"),k.setAttribute("from",1),k.setAttribute("to",0),k.setAttribute("dur","1s"),k.setAttribute("begin","indefinite"),j.appendChild(k),U.finish_&&w.goalIdle){var l=document.createElementNS(T,"image");l.setAttribute("id","finish"),l.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",w.goalIdle),l.setAttribute("height",U.MARKER_HEIGHT),l.setAttribute("width",U.MARKER_WIDTH),d.appendChild(l)}if(w.hittingWallAnimation){var m=document.createElementNS(T,"image");m.setAttribute("id","wallAnimation"),m.setAttribute("height",U.SQUARE_SIZE),m.setAttribute("width",U.SQUARE_SIZE),m.setAttribute("visibility","hidden"),d.appendChild(m)}var n=0;for(b=0;b<U.ROWS;b++)for(a=0;a<U.COLS;a++){if(U.map[b][a]==P.OBSTACLE){var o=document.createElementNS(T,"image");o.setAttribute("id","obstacle"+n),o.setAttribute("height",U.MARKER_HEIGHT*w.obstacleScale),o.setAttribute("width",U.MARKER_WIDTH*w.obstacleScale),o.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",w.obstacleIdle),o.setAttribute("x",U.SQUARE_SIZE*(a+.5)-o.getAttribute("width")/2),o.setAttribute("y",U.SQUARE_SIZE*(b+.9)-o.getAttribute("height")),d.appendChild(o)}++n}if(w.idlePegmanAnimation&&(ba({idStr:"idle",pegmanImage:w.idlePegmanAnimation,row:U.start_.y,col:U.start_.x,direction:U.startDirection,numColPegman:w.idlePegmanCol,numRowPegman:w.idlePegmanRow}),w.idlePegmanCol>1||w.idlePegmanRow>1)){var p=w.idlePegmanRow,q=document.getElementById("idlePegman"),r=600,s=0;setInterval(function(){"visible"===q.getAttribute("visibility")&&(ca({idStr:"idle",row:U.start_.y,col:U.start_.x,direction:U.startDirection,animationRow:s}),s=(s+1)%p)},r)}w.celebrateAnimation&&ba({idStr:"celebrate",pegmanImage:w.celebrateAnimation,row:U.start_.y,col:U.start_.x,direction:O.NORTH,numColPegman:w.celebratePegmanCol,numRowPegman:w.celebratePegmanRow}),w.wallPegmanAnimation&&ba({idStr:"wall",pegmanImage:w.wallPegmanAnimation}),w.hittingWallAnimation&&w.hittingWallAnimationFrameNumber&&(ba({idStr:"wall",pegmanImage:w.hittingWallAnimation,numColPegman:w.hittingWallPegmanCol,numRowPegman:w.hittingWallPegmanRow}),document.getElementById("wallPegman").setAttribute("visibility","hidden")),w.movePegmanAnimation&&ba({idStr:"move",pegmanImage:w.movePegmanAnimation,numColPegman:4,numRowPegman:9})}function e(a,b){return void 0===U.map[b]||void 0===U.map[b][a]||U.map[b][a]===P.WALL}function f(a,b){return e(a,b)?"0":"1"}function g(a){if(U.wordSearch)return U.wordSearch.drawMapTiles(a);if(F.isScratSkin(w.id))return K.drawMapTiles(a);for(var b,c=0,d=0;d<U.ROWS;d++)for(var e=0;e<U.COLS;e++){b=f(e,d)+f(e,d-1)+f(e+1,d)+f(e,d+1)+f(e-1,d);var g="00000"!==b;if(!$[b])if(F.isBeeSkin(w.id)){for(var h=["null3","null4","null0"],i="null1",j=g?2*h.length:6*h.length,k=0;j>k;k++)h.push(i);b=G.sample(h)}else{if(!g&&Math.random()>.3)U.wallMap[d][e]=0,b="null0";else{var l=Math.floor(1+4*Math.random());U.wallMap[d][e]=l,b="null"+l}("2_1"==v.id||"2_2"==v.id||"2_3"==v.id)&&(U.wallMap[d][e]=0,b="null0")}if(U.drawTile(a,$[b],d,e,c),U.gridItemDrawer instanceof M&&(e+d)%2===0){var m=!/null/.test(b);U.gridItemDrawer.addCheckerboardTile(d,e,m)}c++}}function h(){if(U.initialDirtMap)for(var a=0;a<U.ROWS;a++)U.dirt_[a]=U.initialDirtMap[a].slice(0)}function i(a){for(var b=0;b<U.ROWS;b++)for(var c=0;c<U.COLS;c++)void 0!==W(U.dirt_,c,b)&&U.gridItemDrawer.updateItemImage(b,c,a)}function j(){var a=document.getElementById("stepButton");a.setAttribute("disabled",""),U.animating_?U.scheduleAnimations(!0):U.execute(!0)}function k(){for(var a=0,b=0;b<U.ROWS;b++)for(var c=0;c<U.COLS;c++){var d=document.getElementById("tileClipPath"+a);d.setAttribute("visibility","visible");var e=document.getElementById("tileElement"+a);e.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",w.tiles),e.setAttribute("opacity",1),a++}}function l(){var a=document.getElementById("runButton"),b=document.getElementById("resetButton");b.style.minWidth||(b.style.minWidth=a.offsetWidth+"px"),x.toggleRunReset("reset"),x.isUsingBlockly()&&Blockly.mainBlockSpace.traceOn(!0),x.reset(!1),x.attempts++}function m(){U.cachedBlockStates&&(U.cachedBlockStates.forEach(function(a){a.block.setMovable(a.movable),a.block.setDeletable(a.deletable),a.block.setEditable(a.editable)}),U.cachedBlockStates=[])}function n(a,b,c){switch(a.blockId&&x.highlight(String(a.blockId),b),a.command){case"north":o(O.NORTH,c);break;case"east":o(O.EAST,c);break;case"south":o(O.SOUTH,c);break;case"west":o(O.WEST,c);break;case"look_north":U.scheduleLook(O.NORTH);break;case"look_east":U.scheduleLook(O.EAST);break;case"look_south":U.scheduleLook(O.SOUTH);break;case"look_west":U.scheduleLook(O.WEST);break;case"fail_forward":U.scheduleFail(!0);break;case"fail_backward":U.scheduleFail(!1);break;case"left":var d=U.pegmanD+Q.LEFT;U.scheduleTurn(d),U.pegmanD=y.constrainDirection4(d);break;case"right":d=U.pegmanD+Q.RIGHT,U.scheduleTurn(d),U.pegmanD=y.constrainDirection4(d);break;case"finish":switch(U.testResults){case S.FREE_PLAY:case S.TOO_MANY_BLOCKS_FAIL:case S.ALL_PASS:s(!0,c);break;default:Z.setTimeout(function(){x.playAudio("failure")},V)}break;case"putdown":U.scheduleFill();break;case"pickup":U.scheduleDig();break;case"nectar":U.bee.animateGetNectar();break;case"honey":U.bee.animateMakeHoney()}}function o(a,b){var c=y.directionToDxDy(a),d=U.pegmanX+c.dx,e=U.pegmanY+c.dy;p(d,e,b),U.pegmanX=d,U.pegmanY=e}function p(a,b,c){var d,e,f=U.pegmanX,g=U.pegmanY,h=U.pegmanD,i=a-f,j=b-g;if(w.movePegmanAnimation){d=w.movePegmanAnimationFrameNumber;var k=document.getElementById("pegman"),l=document.getElementById("movePegman");e=c/d,U.scheduleSheetedMovement({x:f,y:g},{x:i,y:j},d,e,"move",h,!0),Z.setTimeout(function(){l.setAttribute("visibility","hidden"),k.setAttribute("visibility","visible"),U.displayPegman(a,b,y.directionToFrame(h)),U.wordSearch&&U.wordSearch.markTileVisited(b,a,!0)},e*d)}else d=4,e=c/d,D.range(1,d).forEach(function(a){Z.setTimeout(function(){U.displayPegman(f+i*a/d,g+j*a/d,y.directionToFrame(h))},e*a)});if(w.approachingGoalAnimation){var m=document.getElementById("finish");U.finish_&&Math.abs(a-U.finish_.x)<=1&&Math.abs(b-U.finish_.y)<=1?m.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",w.approachingGoalAnimation):m.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",w.goalIdle)}}function q(){for(var a=0,b=0;b<U.ROWS;b++)for(var c=0;c<U.COLS;c++){var d=document.getElementById("tileElement"+a),e=document.getElementById("tileAnimation"+a);d&&d.setAttribute("opacity",0),e&&e.beginElement&&e.beginElement(),a++}}function r(){var a=document.getElementById("pegmanFadeoutAnimation"),b=document.getElementById("pegman");b&&b.setAttribute("opacity",0),a&&a.beginElement&&a.beginElement()}function s(a,b){if(F.isScratSkin(w.id))return void K.scheduleDance(a,b,w);var c=y.directionToFrame(U.pegmanD);U.displayPegman(U.pegmanX,U.pegmanY,16);var d=document.getElementById("finish");a&&d&&(x.playAudio("winGoal"),d.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",w.goalAnimation)),a&&x.playAudio("win");var e=b/5;Z.setTimeout(function(){U.displayPegman(U.pegmanX,U.pegmanY,18)},e),Z.setTimeout(function(){U.displayPegman(U.pegmanX,U.pegmanY,20)},2*e),Z.setTimeout(function(){U.displayPegman(U.pegmanX,U.pegmanY,18)},3*e),Z.setTimeout(function(){U.displayPegman(U.pegmanX,U.pegmanY,20)},4*e),Z.setTimeout(function(){(!a||w.turnAfterVictory)&&U.displayPegman(U.pegmanX,U.pegmanY,c),a&&w.transparentTileEnding&&q(),U.wordSearch&&r()},5*e)}function t(){return!U.finish_||U.pegmanX==U.finish_.x&&U.pegmanY==U.finish_.y}function u(){if(!U.dirt_)return!0;for(var a=0;a<U.ROWS;a++)for(var b=0;b<U.COLS;b++)if(0!==W(U.dirt_,b,a))return!1;return!0}var v,w,x=a("../StudioApp").singleton,y=(a("../locale"),a("./tiles")),z=a("../codegen"),A=a("./api"),B=a("../templates/page.html.ejs"),C=a("../dom"),D=a("../utils"),E=a("../dropletUtils"),F=a("./mazeUtils"),G=D.getLodash(),H=a("./dropletConfig"),I=a("./bee"),J=a("./wordsearch"),K=a("./scrat"),L=a("./dirtDrawer"),M=a("./beeItemDrawer"),N=a("./executionInfo"),O=y.Direction,P=y.SquareType,Q=y.TurnDirection,R=x.ResultType,S=x.TestResults,T=a("../constants").SVG_NS,U=b.exports,V=100;x.setCheckForEmptyBlocks(!0);var W=function(a,b,c){return a&&a[c]?a[c][b]:void 0};U.scale={snapRadius:1,stepSpeed:5};var X=function(){U.map=v.map,U.initialDirtMap=v.initialDirt,U.startDirection=v.startDirection,U.animating_=!1;for(var a in v.scale)U.scale[a]=v.scale[a];v.fastGetNectarAnimation&&(w.actionSpeedScale.nectar=.5),U.ROWS=U.map.length,U.COLS=U.map[0].length,Y(),U.SQUARE_SIZE=50,U.PEGMAN_HEIGHT=w.pegmanHeight,U.PEGMAN_WIDTH=w.pegmanWidth,U.PEGMAN_X_OFFSET=w.pegmanXOffset||0,U.PEGMAN_Y_OFFSET=w.pegmanYOffset,U.MARKER_HEIGHT=43,U.MARKER_WIDTH=50,U.MAZE_WIDTH=U.SQUARE_SIZE*U.COLS,U.MAZE_HEIGHT=U.SQUARE_SIZE*U.ROWS,U.PATH_WIDTH=U.SQUARE_SIZE/3,U.initialDirtMap&&(U.dirt_=new Array(U.ROWS))},Y=function(){U.wallMap=new Array(U.ROWS);for(var a=0;a<U.ROWS;a++)U.wallMap[a]=new Array(U.COLS)},Z=a("../timeoutList"),$={10010:[4,0],10001:[3,3],11000:[0,1],10100:[0,2],11010:[4,1],10101:[3,2],10110:[0,0],10011:[2,0],11001:[4,2],11100:[2,3],11110:[1,1],10111:[1,0],11011:[2,1],11101:[1,2],11111:[2,2],null0:[4,3],null1:[3,0],null2:[3,1],null3:[0,3],null4:[1,3]};U.drawTile=function(a,b,c,d,e){var f=b[0],g=b[1],h=5*U.SQUARE_SIZE,i=4*U.SQUARE_SIZE,j=document.createElementNS(T,"clipPath");j.setAttribute("id","tileClipPath"+e);var k=document.createElementNS(T,"rect");k.setAttribute("width",U.SQUARE_SIZE),k.setAttribute("height",U.SQUARE_SIZE),k.setAttribute("x",d*U.SQUARE_SIZE),k.setAttribute("y",c*U.SQUARE_SIZE),j.appendChild(k),a.appendChild(j);var l=document.createElementNS(T,"image");l.setAttribute("id","tileElement"+e),l.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",w.tiles),l.setAttribute("height",i),l.setAttribute("width",h),l.setAttribute("clip-path","url(#tileClipPath"+e+")"),l.setAttribute("x",(d-f)*U.SQUARE_SIZE),l.setAttribute("y",(c-g)*U.SQUARE_SIZE),a.appendChild(l);var m=document.createElementNS(T,"animate");m.setAttribute("id","tileAnimation"+e),m.setAttribute("attributeType","CSS"),m.setAttribute("attributeName","opacity"),m.setAttribute("from",1),m.setAttribute("to",0),m.setAttribute("dur","1s"),m.setAttribute("begin","indefinite"),l.appendChild(m)},U.init=function(b){x.runButtonClick=this.runButtonClick.bind(this),x.reset=this.reset.bind(this);var c=null;w=b.skin,v=b.level,b.grayOutUndeletableBlocks=!0,b.forceInsertTopBlock="when_run",b.dropletConfig=H,F.isBeeSkin(b.skinId)?(U.bee=new I(U,x,b),U.scale.stepSpeed=2):"letters"===b.skinId&&(U.wordSearch=new J(v.searchWord,v.map,U.drawTile),c=a("./extraControlRows.html.ejs")({assetUrl:x.assetUrl,searchWord:v.searchWord})),X(),U.cachedBlockStates=[],b.html=B({assetUrl:x.assetUrl,data:{localeDirection:x.localeDirection(),visualization:a("./visualization.html.ejs")(),controls:a("./controls.html.ejs")({assetUrl:x.assetUrl,showStepButton:v.step&&!v.edit_blocks}),extraControlRows:c,blockUsed:void 0,idealBlockNumber:void 0,editCode:v.editCode,blockCounterClass:"block-counter-default",readonlyWorkspace:b.readonlyWorkspace},hideRunButton:v.stepOnly&&!v.edit_blocks}),b.loadAudio=function(){x.loadAudio(w.winSound,"win"),x.loadAudio(w.startSound,"start"),x.loadAudio(w.failureSound,"failure"),x.loadAudio(w.obstacleSound,"obstacle"),x.loadAudio(w.wallSound,"wall"),w.additionalSound&&(x.loadAudio(w.wall0Sound,"wall0"),x.loadAudio(w.wall1Sound,"wall1"),x.loadAudio(w.wall2Sound,"wall2"),x.loadAudio(w.wall3Sound,"wall3"),x.loadAudio(w.wall4Sound,"wall4"),x.loadAudio(w.winGoalSound,"winGoal")),w.dirtSound&&(x.loadAudio(w.fillSound,"fill"),x.loadAudio(w.digSound,"dig")),w.beeSound&&(x.loadAudio(w.nectarSound,"nectar"),x.loadAudio(w.honeySound,"honey"))},b.afterInject=function(){x.isUsingBlockly()&&(Blockly.HSV_SATURATION=.6,Blockly.SNAP_RADIUS*=U.scale.snapRadius,Blockly.JavaScript.INFINITE_LOOP_TRAP=z.loopHighlight("Maze")),U.start_=void 0,U.finish_=void 0;for(var a=0;a<U.ROWS;a++)for(var c=0;c<U.COLS;c++){var e=U.map[a][c];e==P.START?U.start_={x:c,y:a}:e===P.FINISH?U.finish_={x:c,y:a}:e==P.STARTANDFINISH&&(U.start_={x:c,y:a},U.finish_={x:c,y:a})}h(),F.isBeeSkin(b.skinId)?U.gridItemDrawer=new M(U.dirt_,w,U.initialDirtMap,U.bee):U.gridItemDrawer=new L(U.dirt_,w.dirt),d();var f=document.getElementById("stepButton");C.addClickTouchEvent(f,j);var g=document.getElementById("resetButton");C.addClickTouchEvent(g,U.resetButtonClick),w.hideInstructions&&(document.getElementById("bubble").style.display="none")},x.init(b)};var _=function(a){var b=U.SQUARE_SIZE*(a+.5)-U.PEGMAN_HEIGHT/2+U.PEGMAN_Y_OFFSET;return Math.floor(b)},aa=function(a){return a=a||0,a*U.PEGMAN_HEIGHT},ba=function(a){var b=document.getElementById("svgMaze"),c=document.createElementNS(T,"clipPath");c.setAttribute("id",a.idStr+"PegmanClip");var d=document.createElementNS(T,"rect");d.setAttribute("id",a.idStr+"PegmanClipRect"),void 0!==a.col&&d.setAttribute("x",a.col*U.SQUARE_SIZE+1+U.PEGMAN_X_OFFSET),void 0!==a.row&&d.setAttribute("y",_(a.row)),d.setAttribute("width",U.PEGMAN_WIDTH),d.setAttribute("height",U.PEGMAN_HEIGHT),c.appendChild(d),b.appendChild(c);var e=a.pegmanImage,f=document.createElementNS(T,"image");if(f.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",e),f.setAttribute("height",U.PEGMAN_HEIGHT*(a.numRowPegman||1)),f.setAttribute("width",U.PEGMAN_WIDTH*(a.numColPegman||4)),f.setAttribute("clip-path","url(#"+a.idStr+"PegmanClip)"),f.setAttribute("id",a.idStr+"Pegman"),b.appendChild(f),void 0!==a.col&&void 0!==a.direction){var g=U.SQUARE_SIZE*a.col-a.direction*U.PEGMAN_WIDTH+1+U.PEGMAN_X_OFFSET;f.setAttribute("x",g)}void 0!==a.row&&f.setAttribute("y",_(a.row))},ca=function(a){var b=document.getElementById(a.idStr+"PegmanClipRect");b.setAttribute("x",a.col*U.SQUARE_SIZE+1+U.PEGMAN_X_OFFSET),b.setAttribute("y",_(a.row));var c=document.getElementById(a.idStr+"Pegman"),d=U.SQUARE_SIZE*a.col-a.direction*U.PEGMAN_WIDTH+1+U.PEGMAN_X_OFFSET;c.setAttribute("x",d);var e=_(a.row)-aa(a.animationRow);c.setAttribute("y",e),c.setAttribute("visibility","visible")};U.reset=function(a){U.bee&&U.bee.reset();var b;if(Z.clearTimeouts(),U.animating_=!1,U.pegmanX=U.start_.x,U.pegmanY=U.start_.y,U.pegmanD=U.startDirection,a){var c=750;w.danceOnLoad&&s(!1,c),Z.setTimeout(function(){V=100,U.scheduleTurn(U.startDirection)},c+150)}else U.displayPegman(U.pegmanX,U.pegmanY,y.directionToFrame(U.pegmanD));var d=(document.getElementById("svgMaze"),document.getElementById("finish"));d&&(d.setAttribute("x",U.SQUARE_SIZE*(U.finish_.x+.5)-d.getAttribute("width")/2),d.setAttribute("y",U.SQUARE_SIZE*(U.finish_.y+.9)-d.getAttribute("height")),d.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",w.goalIdle),d.setAttribute("visibility","visible"));var e=document.getElementById("look");e.style.display="none",e.parentNode.appendChild(e);var f=e.getElementsByTagName("path");for(b=0;b<f.length;b++){var g=f[b];g.setAttribute("stroke",w.look)}var j=document.getElementById("pegman");if(j.setAttribute("opacity",1),w.idlePegmanAnimation){j.setAttribute("visibility","hidden");var l=document.getElementById("idlePegman");l.setAttribute("visibility","visible")}else j.setAttribute("visibility","visible");if(w.wallPegmanAnimation){var m=document.getElementById("wallPegman");m.setAttribute("visibility","hidden")}if(w.movePegmanAnimation){var n=document.getElementById("movePegman");n.setAttribute("visibility","hidden")}if(w.celebrateAnimation){var o=document.getElementById("celebratePegman");o.setAttribute("visibility","hidden")}h(),i(!1);var p,q,r=0;for(q=0;q<U.ROWS;q++)for(p=0;p<U.COLS;p++){var t=document.getElementById("obstacle"+r);t&&t.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",w.obstacleIdle),++r}U.wordSearch?U.wordSearch.resetTiles():k()},U.runButtonClick=function(){var a=document.getElementById("stepButton");a&&a.setAttribute("disabled",""),U.execute(!1)},U.resetButtonClick=function(){var a=document.getElementById("stepButton");a.removeAttribute("disabled"),m()};var da=function(){if(!U.waitingForReport&&!U.animating_){var a={app:"maze",skin:w.id,feedbackType:U.testResults,response:U.response,level:v};if(U.testResults===S.APP_SPECIFIC_FAIL&&U.bee){var b=U.bee.getMessage(U.executionInfo.terminationValue());b&&(a.message=b)}x.displayFeedback(a)}};U.onReportComplete=function(a){U.response=a,U.waitingForReport=!1,x.onReportComplete(a),da()},U.execute=function(a){l(),U.executionInfo=new N({ticks:100}),U.result=R.UNSET,U.testResults=S.NO_TESTS_RUN,U.waitingForReport=!1,U.animating_=!1,U.response=null;var b;x.isUsingBlockly()?b=Blockly.Generator.blockSpaceToCode("JavaScript"):(b=E.generateCodeAliases(H,"Maze"),b+=x.editor.getValue()),x.playAudio("start");try{var c=!v.edit_blocks;switch(c&&z.evalWith(b,{StudioApp:x,Maze:A,executionInfo:U.executionInfo}),U.onExecutionFinish(),U.executionInfo.terminationValue()){case null:U.executionInfo.queueAction("finish",null),U.result=R.FAILURE,V=150;break;case 1/0:U.result=R.TIMEOUT,V=0;break;case!0:U.result=R.SUCCESS,V=100;break;case!1:U.result=R.ERROR,V=150;break;default:U.result=R.ERROR,U.bee&&(U.testResults=U.bee.getTestResults(U.executionInfo.terminationValue()))}}catch(d){return U.result=R.ERROR,console.error("Unexpected exception: "+d+"\n"+d.stack),void(window.onerror&&window.onerror("UserCode:"+d.message,document.URL,0))}var e=U.result===R.SUCCESS;U.testResults===S.NO_TESTS_RUN&&(U.testResults=x.getTestResults(e));var f;if(v.editCode)f=x.editor.getValue();else{var g=Blockly.Xml.blockSpaceToDom(Blockly.mainBlockSpace);f=Blockly.Xml.domToText(g)}if(U.waitingForReport=!0,x.report({app:"maze",level:v.id,result:U.result===R.SUCCESS,testResult:U.testResults,program:encodeURIComponent(f),onComplete:U.onReportComplete}),x.reset(!1),i(!0),U.testResults===S.EXTRA_TOP_BLOCKS_FAIL)return U.result=R.ERROR,void da();if(U.animating_=!0,x.isUsingBlockly()&&(Blockly.mainBlockSpaceEditor.setEnableToolbox(!1),a)){if(0!==U.cachedBlockStates.length)throw new Error("Unexpected cachedBlockStates");Blockly.mainBlockSpace.getAllBlocks().forEach(function(a){U.cachedBlockStates.push({block:a,movable:a.isMovable(),deletable:a.isDeletable(),editable:a.isEditable()}),a.setMovable(!1),a.setDeletable(!1),a.setEditable(!1)})}if(w.idlePegmanAnimation){var h=document.getElementById("pegman"),j=document.getElementById("idlePegman");j.setAttribute("visibility","hidden"),h.setAttribute("visibility","visible")}var k=V*U.scale.stepSpeed*w.movePegmanAnimationSpeedScale;Z.setTimeout(function(){U.scheduleAnimations(a)},k)},U.scheduleAnimations=function(a){function b(d){if(d>=f.length)return void c();n(f[d],a,e);var g=f[d]&&f[d].command,h=w.actionSpeedScale&&w.actionSpeedScale[g]||1,i=Math.round(e*h);Z.setTimeout(function(){b(d+1)},i)}function c(){var b=U.executionInfo.stepsRemaining(),c=b?0:1e3;Z.setTimeout(function(){b?d.removeAttribute("disabled"):(U.animating_=!1,x.isUsingBlockly()&&Blockly.mainBlockSpaceEditor.setEnableToolbox(!0),a&&U.result!==R.SUCCESS||(m(),x.clearHighlighting()),da())},c)}var d=document.getElementById("stepButton");Z.clearTimeouts();var e=V*U.scale.stepSpeed*w.movePegmanAnimationSpeedScale,f=U.executionInfo.getActions(a);b(0)},U.scheduleSheetedMovement=function(a,b,c,d,e,f,g){var h=document.getElementById("pegman");D.range(0,c-1).forEach(function(i){Z.setTimeout(function(){g&&h.setAttribute("visibility","hidden"),ca({idStr:e,col:a.x+b.x*i/c,row:a.y+b.y*i/c,direction:f,animationRow:i})},d*i)})},U.scheduleTurn=function(a){var b=4,c=U.pegmanD,d=a-c;D.range(1,b).forEach(function(a){Z.setTimeout(function(){U.displayPegman(U.pegmanX,U.pegmanY,y.directionToFrame(c+d*a/b))},V*(a-1))})},U.updateSurroundingTiles=function(a,b,c){for(var d=[[a-1,b-1],[a-1,b],[a-1,b+1],[a,b-1],[a,b],[a,b+1],[a+1,b-1],[a+1,b],[a+1,b+1]],e=0;e<d.length;++e){var f=d[e][1]+U.COLS*d[e][0],g=document.getElementById("tileElement"+f);g&&g.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",c)}},U.scheduleFail=function(a){var b=y.directionToDxDy(U.pegmanD),c=b.dx,d=b.dy;a||(c=-c,d=-d);var e=U.pegmanX+c,f=U.pegmanY+d,g=y.directionToFrame(U.pegmanD);U.displayPegman(U.pegmanX+c/4,U.pegmanY+d/4,g);var h=U.map[f]&&U.map[f][e];if(h===P.WALL||void 0===h){if(x.playAudio("wall"),void 0!==h&&x.playAudio("wall"+U.wallMap[f][e]),w.hittingWallAnimation){var i=document.getElementById("wallAnimation"),j=w.hittingWallAnimationFrameNumber||0;if(j>1){d>=0&&(d+=1);var k=100;U.scheduleSheetedMovement({x:U.pegmanX,y:U.pegmanY},{x:c,y:d},j,k,"wall",O.NORTH,!0),setTimeout(function(){document.getElementById("wallPegman").setAttribute("visibility","hidden")},j*k)}else Z.setTimeout(function(){i.setAttribute("x",U.SQUARE_SIZE*(U.pegmanX+.5+.5*c)-i.getAttribute("width")/2),i.setAttribute("y",U.SQUARE_SIZE*(U.pegmanY+1+.5*d)-i.getAttribute("height")),i.setAttribute("visibility","visible"),i.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",w.hittingWallAnimation)},V/2)}Z.setTimeout(function(){U.displayPegman(U.pegmanX,U.pegmanY,g)},V),Z.setTimeout(function(){U.displayPegman(U.pegmanX+c/4,U.pegmanY+d/4,g),x.playAudio("failure")},2*V),Z.setTimeout(function(){U.displayPegman(U.pegmanX,U.pegmanY,g)},3*V),w.wallPegmanAnimation&&Z.setTimeout(function(){var a=document.getElementById("pegman");a.setAttribute("visibility","hidden"),ca({idStr:"wall",row:U.pegmanY,col:U.pegmanX,direction:U.pegmanD})},4*V)}else if(h==P.OBSTACLE){x.playAudio("obstacle");var l=e+U.COLS*f,m=document.getElementById("obstacle"+l);if(m.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",w.obstacleAnimation),Z.setTimeout(function(){U.displayPegman(U.pegmanX+c/2,U.pegmanY+d/2,g)},V),w.largerObstacleAnimationTiles&&Z.setTimeout(function(){U.updateSurroundingTiles(f,e,w.largerObstacleAnimationTiles)},V),!w.nonDisappearingPegmanHittingObstacle){var n=(document.getElementById("svgMaze"),document.getElementById("pegman"));Z.setTimeout(function(){n.setAttribute("visibility","hidden")},2*V)}Z.setTimeout(function(){x.playAudio("failure")},V)}},U.displayPegman=function(a,b,c){var d=document.getElementById("pegman");d.setAttribute("x",a*U.SQUARE_SIZE-c*U.PEGMAN_WIDTH+1+U.PEGMAN_X_OFFSET),d.setAttribute("y",_(b));var e=document.getElementById("clipRect");e.setAttribute("x",a*U.SQUARE_SIZE+1+U.PEGMAN_X_OFFSET),e.setAttribute("y",d.getAttribute("y"))};var ea=function(a){var b=U.pegmanX,c=U.pegmanY;U.dirt_[c][b]+=a.amount,U.gridItemDrawer.updateItemImage(c,b,!0),x.playAudio(a.sound)};U.scheduleFill=function(){ea({amount:1,sound:"fill"})},U.scheduleDig=function(){ea({amount:-1,sound:"dig"})},U.scheduleLook=function(a){var b=U.pegmanX,c=U.pegmanY;switch(a){case O.NORTH:b+=.5;break;case O.EAST:b+=1,c+=.5;break;case O.SOUTH:b+=.5,c+=1;break;case O.WEST:c+=.5}b*=U.SQUARE_SIZE,c*=U.SQUARE_SIZE,a=90*a-45;var d=document.getElementById("look");d.setAttribute("transform","translate("+b+", "+c+") rotate("+a+" 0 0) scale(.4)");var e=d.getElementsByTagName("path");d.style.display="inline";for(var f=0;f<e.length;f++){var g=e[f];U.scheduleLookStep(g,V*f)}},U.scheduleLookStep=function(a,b){Z.setTimeout(function(){a.style.display="inline",window.setTimeout(function(){a.style.display="none"},2*V)},b)},U.checkSuccess=function(){var a;return a=t()?U.bee?U.bee.finished():U.wordSearch?U.wordSearch.finished():u():!1,a&&(U.executionInfo.queueAction("finish",null),U.executionInfo.terminateWithValue(!0)),a},U.onExecutionFinish=function(){U.executionInfo.isTerminated()||U.checkSuccess(),U.bee&&U.bee.onExecutionFinish()}},{"../StudioApp":"/home/ubuntu/staging/apps/build/js/StudioApp.js","../codegen":"/home/ubuntu/staging/apps/build/js/codegen.js","../constants":"/home/ubuntu/staging/apps/build/js/constants.js","../dom":"/home/ubuntu/staging/apps/build/js/dom.js","../dropletUtils":"/home/ubuntu/staging/apps/build/js/dropletUtils.js","../locale":"/home/ubuntu/staging/apps/build/js/locale.js","../templates/page.html.ejs":"/home/ubuntu/staging/apps/build/js/templates/page.html.ejs","../timeoutList":"/home/ubuntu/staging/apps/build/js/timeoutList.js","../utils":"/home/ubuntu/staging/apps/build/js/utils.js","./api":"/home/ubuntu/staging/apps/build/js/maze/api.js","./bee":"/home/ubuntu/staging/apps/build/js/maze/bee.js","./beeItemDrawer":"/home/ubuntu/staging/apps/build/js/maze/beeItemDrawer.js","./controls.html.ejs":"/home/ubuntu/staging/apps/build/js/maze/controls.html.ejs","./dirtDrawer":"/home/ubuntu/staging/apps/build/js/maze/dirtDrawer.js","./dropletConfig":"/home/ubuntu/staging/apps/build/js/maze/dropletConfig.js","./executionInfo":"/home/ubuntu/staging/apps/build/js/maze/executionInfo.js","./extraControlRows.html.ejs":"/home/ubuntu/staging/apps/build/js/maze/extraControlRows.html.ejs","./mazeUtils":"/home/ubuntu/staging/apps/build/js/maze/mazeUtils.js","./scrat":"/home/ubuntu/staging/apps/build/js/maze/scrat.js","./tiles":"/home/ubuntu/staging/apps/build/js/maze/tiles.js","./visualization.html.ejs":"/home/ubuntu/staging/apps/build/js/maze/visualization.html.ejs","./wordsearch":"/home/ubuntu/staging/apps/build/js/maze/wordsearch.js"}],"/home/ubuntu/staging/apps/build/js/maze/wordsearch.js":[function(a,b,c){"use strict";function d(a){if("number"==typeof a)return m;if("string"==typeof a)return 2===a.length&&"_"===a[0]?a[1]:a[0];throw new Error("unexpected value for letterValue")}function e(a){var b;if(a){var c=a||[];c.unshift(l),b=g.without.apply(null,c)}else b=l;return g.sample(b)}var f=a("../utils"),g=f.getLodash(),h=a("./mazeUtils").cellId,i=a("./tiles").SquareType,j=a("../constants").SVG_NS,k=b.exports=function(a,b,c){this.goal_=a,this.visited_="",this.map_=b},l=["A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"],m="-",n="_",o=50;k.prototype.drawMapTiles=function(a){for(var b,c,f=0;f<this.map_.length;f++)for(var g=0;g<this.map_[f].length;g++){
var h=this.map_[f][g];h===n?(c=this.restrictedValues_(f,g),b=e(c)):b=d(h,!0),this.drawTile_(a,b,f,g)}},k.prototype.finished=function(){return this.visited_===this.goal_},k.prototype.isOpen_=function(a,b){var c=this.map_;return void 0!==c[a]&&void 0!==c[a][b]&&c[a][b]!==i.WALL},k.prototype.openNeighbors_=function(a,b){var c=[];return this.isOpen_(a+1,b)&&c.push([a+1,b]),this.isOpen_(a-1,b)&&c.push([a-1,b]),this.isOpen_(a,b+1)&&c.push([a,b+1]),this.isOpen_(a,b-1)&&c.push([a,b-1]),c},k.prototype.restrictedValues_=function(a,b){for(var c=this.map_,e=this.openNeighbors_(a,b),f=[],g=0;g<e.length;g++)for(var h=this.openNeighbors_(e[g][0],e[g][1]),i=0;i<h.length;i++){var j=h[i][0],k=h[i][1],l=d(c[j][k],!1);f.push(l,!1)}return f},k.prototype.drawTile_=function(a,b,c,d){var e=h("backgroundLetter",c,d),f=h("letter",c,d),g=document.createElementNS(j,"g"),i=document.createElementNS(j,"rect");i.setAttribute("id",e),i.setAttribute("width",o),i.setAttribute("height",o),i.setAttribute("x",d*o),i.setAttribute("y",c*o),i.setAttribute("stroke","#000000"),i.setAttribute("stroke-width",3),g.appendChild(i);var k=document.createElementNS(j,"text");k.setAttribute("id",f),k.setAttribute("class","search-letter"),k.setAttribute("width",o),k.setAttribute("height",o),k.setAttribute("x",(d+.5)*o),k.setAttribute("y",(c+.5)*o),k.setAttribute("font-size",32),k.setAttribute("text-anchor","middle"),k.setAttribute("font-family","Verdana"),k.textContent=b,g.appendChild(k),a.appendChild(g)},k.prototype.resetTiles=function(){for(var a=0;a<this.map_.length;a++)for(var b=0;b<this.map_[a].length;b++)this.updateTileHighlight_(a,b,!1);document.getElementById("currentWordContents").textContent="",this.visited_=""},k.prototype.updateTileHighlight_=function(a,b,c){var d=(a+b)%2===0?"#dae3f3":"#ffffff",e=c?"white":"black";c&&(d="#00b050");var f=h("backgroundLetter",a,b),g=h("letter",a,b);document.getElementById(f).setAttribute("fill",d);var i=document.getElementById(g);if(i.setAttribute("fill",e),i.getBBox){var j=i.getBBox(),k=o-j.height,l=a*o+k/2,m=l-j.y;i.setAttribute("transform","translate(0, "+m+")")}},k.prototype.markTileVisited=function(a,b,c){var d=document.getElementById(h("letter",a,b)).textContent;this.visited_+=d,c&&(this.updateTileHighlight_(a,b,!0),document.getElementById("currentWordContents").textContent=this.visited_)},k.__testonly__={letterValue:d,randomLetter:e,START_CHAR:m,EMPTY_CHAR:n}},{"../constants":"/home/ubuntu/staging/apps/build/js/constants.js","../utils":"/home/ubuntu/staging/apps/build/js/utils.js","./mazeUtils":"/home/ubuntu/staging/apps/build/js/maze/mazeUtils.js","./tiles":"/home/ubuntu/staging/apps/build/js/maze/tiles.js"}],"/home/ubuntu/staging/apps/build/js/maze/visualization.html.ejs":[function(require,module,exports){module.exports=function(){var t=function anonymous(locals,filters,escape){escape=escape||function(a){return String(a).replace(/&(?!\w+;)/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")};var buf=[];with(locals||{})!function(){buf.push('<svg xmlns="http://www.w3.org/2000/svg" version="1.1" id="svgMaze">\n  <g id="look">\n    <path d="M 0,-15 a 15 15 0 0 1 15 15" />\n    <path d="M 0,-35 a 35 35 0 0 1 35 35" />\n    <path d="M 0,-55 a 55 55 0 0 1 55 55" />\n  </g>\n</svg>\n<div id="capacityBubble">\n  <div id="capacity"></div>\n</div>\n')}();return buf.join("")};return function(a){return t(a,require("ejs").filters)}}()},{ejs:"/home/ubuntu/staging/apps/node_modules/ejs/lib/ejs.js"}],"/home/ubuntu/staging/apps/build/js/maze/scrat.js":[function(a,b,c){"use strict";function d(a,b){return void 0===Maze.map[b]||void 0===Maze.map[b][a]||Maze.map[b][a]===f.WALL}function e(a,b){return void 0!==Maze.map[b]&&Maze.map[b][a]===f.WALL}var f=a("./tiles").SquareType,g=a("./tiles").Direction,h=a("../utils"),i=h.getLodash(),j=a("../StudioApp").singleton,k={log:[0,0],lily1:[1,0],land1:[2,0],island_start:[0,1],island_topRight:[1,1],island_botLeft:[0,2],island_botRight:[1,2],water:[4,0],lily2:[2,1],lily3:[3,1],lily4:[2,2],lily5:[3,2],ice:[3,0],empty:[4,0]};b.exports.drawMapTiles=function(a){var b,c,f=[];for(b=0;b<Maze.ROWS;b++)for(c=0;c<Maze.COLS;c++)e(c,b)&&e(c+1,b)&&e(c,b+1)&&e(c+1,b+1)&&f.push({row:b,col:c});var g=i.sample(f),h={};g&&(h[g.row+0+"_"+(g.col+0)]="island_start",h[g.row+1+"_"+(g.col+0)]="island_botLeft",h[g.row+0+"_"+(g.col+1)]="island_topRight",h[g.row+1+"_"+(g.col+1)]="island_botRight");var j,l=0;for(b=0;b<Maze.ROWS;b++)for(c=0;c<Maze.COLS;c++){if(d(c,b)){var m=!(d(c,b-1)&&d(c+1,b)&&d(c,b+1)&&d(c-1,b));j="water",j=h[b+"_"+c],j||(j=i.sample(["empty","empty","empty","empty","empty","lily2","lily3","lily4","lily5","lily1","log","lily1","land1"])),m&&"land1"===j&&(j="empty")}else j="ice";Maze.drawTile(a,k[j],b,c,l),l++}},b.exports.scheduleDance=function(a,b,c){var d=document.getElementById("finish");d&&d.setAttribute("visibility","hidden");var e=c.celebratePegmanRow,f=b/e,h={x:Maze.pegmanX,y:Maze.pegmanY};Maze.scheduleSheetedMovement({x:h.x,y:h.y},{x:0,y:0},e,f,"celebrate",g.NORTH,!0),j.playAudio("win")}},{"../StudioApp":"/home/ubuntu/staging/apps/build/js/StudioApp.js","../utils":"/home/ubuntu/staging/apps/build/js/utils.js","./tiles":"/home/ubuntu/staging/apps/build/js/maze/tiles.js"}],"/home/ubuntu/staging/apps/build/js/maze/levels.js":[function(a,b,c){"use strict";function d(a,c,d){var e=j.extend({},b.exports[a]);e.step=c,e.stepOnly=d,b.exports[a+"_step"]=e}var e=a("./tiles").Direction,f=a("./karelLevels"),g=a("./wordsearchLevels"),h=a("./requiredBlocks"),i=a("../block_utils"),j=a("../utils"),k=a("./locale"),l=function(b,c){return a("./toolboxes/maze.xml.ejs")({page:b,level:c})},m=function(b,c){return a("./startBlocks.xml.ejs")({page:b,level:c})};b.exports={"2_1":{toolbox:l(2,1),ideal:4,requiredBlocks:[[h.MOVE_FORWARD]],startDirection:e.EAST,map:[[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0],[0,0,2,1,1,3,0,0],[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0]],startBlocks:m(2,1)},k1_demo:{toolbox:i.createToolbox(i.blockOfType("maze_moveNorth")+i.blockOfType("maze_moveSouth")+i.blockOfType("maze_moveEast")+i.blockOfType("maze_moveWest")+i.blockOfType("controls_repeat_simplified")),ideal:4,requiredBlocks:[[h.MOVE_FORWARD]],startDirection:e.EAST,map:[[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0],[0,0,2,1,1,3,0,0],[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0]],startBlocks:m(2,1)},"2_2":{toolbox:l(2,2),ideal:3,requiredBlocks:[[h.MOVE_FORWARD]],startDirection:e.SOUTH,map:[[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0],[0,0,0,2,0,0,0,0],[0,0,0,1,0,0,0,0],[0,0,0,3,0,0,0,0],[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0]],startBlocks:m(2,2)},"2_2_5":{toolbox:l(2,3),ideal:5,requiredBlocks:[[h.MOVE_FORWARD],[h.TURN_RIGHT]],startDirection:e.EAST,map:[[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0],[0,0,0,0,4,0,0,0],[0,0,2,1,1,0,0,0],[0,0,4,0,3,0,0,0],[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0]],startBlocks:m(2,3)},"2_3":{toolbox:l(2,3),ideal:6,requiredBlocks:[[h.MOVE_FORWARD],[h.TURN_LEFT],[h.TURN_RIGHT]],startDirection:e.EAST,map:[[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0],[0,0,4,1,3,0,0,0],[0,0,2,1,0,0,0,0],[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0]],startBlocks:m(2,3)},"2_4":{toolbox:l(2,4),ideal:9,requiredBlocks:[[h.MOVE_FORWARD],[h.TURN_LEFT],[h.TURN_RIGHT]],startDirection:e.EAST,map:[[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0],[0,0,2,4,0,3,0,0],[0,0,1,1,1,1,0,0],[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0]]},"2_5":{toolbox:l(2,5),ideal:3,requiredBlocks:[[h.MOVE_FORWARD],[h.FOR_LOOP]],startDirection:e.EAST,map:[[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0],[0,2,1,1,1,1,3,0],[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0]]},"2_6":{toolbox:l(2,6),ideal:4,requiredBlocks:[[h.TURN_RIGHT],[h.MOVE_FORWARD],[h.FOR_LOOP]],startDirection:e.EAST,map:[[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0],[0,0,0,0,2,0,0,0],[0,0,0,0,1,0,0,0],[0,0,0,0,1,0,0,0],[0,0,0,0,1,0,0,0],[0,0,0,0,1,0,0,0],[0,0,0,0,3,0,0,0]]},"2_7":{toolbox:l(2,7),ideal:6,requiredBlocks:[[h.MOVE_FORWARD],[h.FOR_LOOP],[h.TURN_LEFT]],startDirection:e.EAST,map:[[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,3,0],[0,0,0,0,0,0,1,0],[0,0,0,0,0,0,1,0],[0,0,0,0,0,0,1,0],[0,0,0,0,0,0,1,0],[0,0,2,1,1,1,1,0],[0,0,0,0,0,0,0,0]]},"2_8":{toolbox:l(2,8),ideal:5,requiredBlocks:[[h.MOVE_FORWARD],[h.FOR_LOOP],[h.TURN_RIGHT]],startDirection:e.EAST,map:[[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0],[0,0,2,1,1,0,0,0],[0,0,0,0,1,0,0,0],[0,0,3,1,1,0,0,0],[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0]],startBlocks:m(2,8),levelIncompleteError:k.repeatCarefullyError(),tooFewBlocksMsg:k.repeatCarefullyError()},"2_9":{toolbox:l(2,9),ideal:3,requiredBlocks:[[h.MOVE_FORWARD],[h.WHILE_LOOP]],startDirection:e.EAST,map:[[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0],[0,2,1,1,1,1,3,0],[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0]]},"2_10":{toolbox:l(2,10),ideal:5,requiredBlocks:[[h.MOVE_FORWARD],[h.TURN_LEFT],[h.WHILE_LOOP]],startDirection:e.EAST,map:[[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0],[0,0,3,1,1,0,0,0],[0,0,0,0,1,0,0,0],[0,0,2,1,1,0,0,0],[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0]]},"2_11":{toolbox:l(2,11),ideal:6,scale:{stepSpeed:3},requiredBlocks:[[h.MOVE_FORWARD],[h.WHILE_LOOP],[h.TURN_LEFT],[h.TURN_RIGHT]],startDirection:e.EAST,map:[[0,0,0,0,0,0,0,1],[0,0,0,0,0,0,3,1],[0,0,0,0,0,1,1,0],[0,0,0,0,1,1,0,0],[0,0,0,1,1,0,0,0],[0,0,1,1,0,0,0,0],[0,1,1,0,0,0,0,0],[2,1,0,0,0,0,0,0]]},"2_12":{toolbox:l(2,12),ideal:6,scale:{stepSpeed:3},requiredBlocks:[[h.MOVE_FORWARD],[h.WHILE_LOOP],[h.TURN_LEFT],[h.TURN_RIGHT]],startDirection:e.EAST,map:[[1,0,0,0,0,0,0,0],[1,2,4,0,0,0,0,0],[0,1,1,0,0,0,0,0],[0,0,1,1,0,0,0,0],[0,0,0,1,1,0,0,0],[0,0,0,0,1,1,0,0],[0,0,0,0,0,1,3,0],[0,0,0,0,0,0,1,1]]},"2_13":{toolbox:l(2,13),ideal:5,requiredBlocks:[[h.TURN_LEFT]],startDirection:e.EAST,map:[[0,0,0,0,0,0,0,0],[0,0,0,0,0,3,0,0],[0,0,0,0,0,1,0,0],[0,0,0,0,0,1,0,0],[0,0,0,0,0,1,0,0],[0,0,0,0,0,1,0,0],[0,0,0,2,1,1,0,0],[0,0,0,0,0,4,0,0]],startBlocks:m(2,13)},"2_14":{toolbox:l(2,14),ideal:5,scale:{stepSpeed:2},requiredBlocks:[[h.MOVE_FORWARD],[h.TURN_RIGHT],[h.IS_PATH_RIGHT],[h.WHILE_LOOP]],startDirection:e.EAST,map:[[0,0,0,4,0,0,0,0],[0,0,0,1,0,1,0,0],[0,0,2,1,1,1,0,0],[0,0,0,0,0,1,0,0],[0,0,0,0,0,1,1,4],[0,0,0,0,0,1,0,0],[0,3,1,1,1,1,0,0],[0,0,0,0,0,0,0,0]],levelIncompleteError:k.ifInRepeatError(),showPreviousLevelButton:!0},"2_15":{toolbox:l(2,15),ideal:5,scale:{stepSpeed:2},requiredBlocks:[[h.MOVE_FORWARD],[h.TURN_LEFT],[h.IS_PATH_LEFT],[h.WHILE_LOOP]],startDirection:e.NORTH,map:[[0,0,0,4,0,0,0,0],[0,0,0,1,0,0,0,0],[0,1,1,1,1,1,0,0],[0,1,0,0,0,1,0,0],[0,1,0,3,0,1,0,0],[0,1,0,1,0,1,1,4],[0,1,1,1,0,2,0,0],[0,0,0,0,0,0,0,0]]},"2_16":{toolbox:l(2,16),ideal:5,scale:{stepSpeed:2},requiredBlocks:[[h.MOVE_FORWARD],[h.TURN_RIGHT],[h.IS_PATH_RIGHT],[h.WHILE_LOOP]],startDirection:e.SOUTH,map:[[0,0,0,4,0,0,0,0],[0,0,0,1,0,0,0,0],[0,0,1,1,1,2,0,0],[0,0,0,0,0,1,1,4],[0,1,1,3,0,1,0,4],[0,1,0,0,0,1,0,1],[0,1,1,1,1,1,1,1],[0,0,0,0,0,0,0,0]]},"2_17":{toolbox:l(2,17),ideal:5,scale:{stepSpeed:2},requiredBlocks:[[h.MOVE_FORWARD],[h.IS_PATH_FORWARD],[h.TURN_LEFT],[h.WHILE_LOOP]],startDirection:e.EAST,map:[[0,0,0,0,0,0,0,0],[0,1,4,1,1,1,0,0],[0,0,1,0,0,0,0,0],[3,1,1,1,1,1,1,0],[0,1,0,1,0,0,1,0],[1,1,1,4,1,0,1,0],[0,1,0,1,0,2,1,0],[0,0,0,0,0,0,0,0]]},"2_18":{toolbox:l(2,18),ideal:5,scale:{stepSpeed:2},requiredBlocks:[[h.MOVE_FORWARD],[h.IS_PATH_FORWARD],[h.TURN_RIGHT],[h.WHILE_LOOP]],startDirection:e.EAST,map:[[0,0,4,0,4,0,4,0],[0,0,1,0,1,0,1,0],[0,2,1,1,1,1,1,0],[0,0,1,1,0,1,1,0],[0,0,0,0,0,0,1,0],[0,0,1,1,0,1,1,0],[0,1,3,1,1,1,1,0],[0,0,0,0,0,0,0,0]]},"2_19":{toolbox:l(2,19),ideal:7,scale:{stepSpeed:2},requiredBlocks:[[h.MOVE_FORWARD],[h.TURN_LEFT],[h.TURN_RIGHT]],startDirection:e.NORTH,map:[[1,1,1,1,1,1,1,1],[1,0,0,0,0,0,0,1],[1,0,1,1,1,1,1,1],[1,0,1,0,0,0,0,0],[1,0,1,0,1,1,1,1],[1,0,1,0,3,0,0,1],[1,0,1,0,0,0,0,1],[2,0,1,1,1,1,1,1]],startBlocks:m(2,19)},"3_1":{toolbox:l(3,1),ideal:3,editCode:!0,codeFunctions:{moveForward:null,turnLeft:null,turnRight:null},requiredBlocks:[[h.MOVE_FORWARD]],startDirection:e.EAST,map:[[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0],[0,0,2,1,3,0,0,0],[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0]]},"3_2":{toolbox:l(3,2),ideal:4,editCode:!0,codeFunctions:{moveForward:null,turnLeft:null,turnRight:null},requiredBlocks:[[h.MOVE_FORWARD]],startDirection:e.SOUTH,map:[[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0],[0,0,0,2,0,0,0,0],[0,0,0,1,0,0,0,0],[0,0,0,1,0,0,0,0],[0,0,0,3,0,0,0,0],[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0]]},"3_3":{toolbox:l(3,3),ideal:6,editCode:!0,codeFunctions:{moveForward:null,turnLeft:null,turnRight:null},requiredBlocks:[[h.MOVE_FORWARD],[h.TURN_LEFT],[h.TURN_RIGHT]],startDirection:e.EAST,map:[[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0],[0,0,4,1,3,0,0,0],[0,0,2,1,0,0,0,0],[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0]]},"3_4":{toolbox:l(3,4),ideal:8,editCode:!0,codeFunctions:{moveForward:null,turnLeft:null,turnRight:null},requiredBlocks:[[h.MOVE_FORWARD],[h.TURN_LEFT]],startDirection:e.EAST,map:[[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0],[0,0,2,4,3,0,0,0],[0,0,1,1,1,0,0,0],[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0]]},custom:{toolbox:l(3,4),requiredBlocks:[],startDirection:e.EAST,map:[[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0],[0,0,2,4,3,0,0,0],[0,0,1,1,1,0,0,0],[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0]]}};for(var n in f)b.exports["karel_"+n]=f[n];for(var n in g)b.exports["wordsearch_"+n]=g[n];d("2_1",!0,!0),d("2_2",!0,!1),d("2_17",!0,!1),d("karel_1_9",!0,!1),d("karel_2_9",!0,!1)},{"../block_utils":"/home/ubuntu/staging/apps/build/js/block_utils.js","../utils":"/home/ubuntu/staging/apps/build/js/utils.js","./karelLevels":"/home/ubuntu/staging/apps/build/js/maze/karelLevels.js","./locale":"/home/ubuntu/staging/apps/build/js/maze/locale.js","./requiredBlocks":"/home/ubuntu/staging/apps/build/js/maze/requiredBlocks.js","./startBlocks.xml.ejs":"/home/ubuntu/staging/apps/build/js/maze/startBlocks.xml.ejs","./tiles":"/home/ubuntu/staging/apps/build/js/maze/tiles.js","./toolboxes/maze.xml.ejs":"/home/ubuntu/staging/apps/build/js/maze/toolboxes/maze.xml.ejs","./wordsearchLevels":"/home/ubuntu/staging/apps/build/js/maze/wordsearchLevels.js"}],"/home/ubuntu/staging/apps/build/js/maze/wordsearchLevels.js":[function(a,b,c){"use strict";var d=a("./tiles").Direction,e=a("./requiredBlocks"),f=a("../block_utils"),g=function(){return f.createToolbox(f.blockOfType("maze_moveNorth")+f.blockOfType("maze_moveSouth")+f.blockOfType("maze_moveEast")+f.blockOfType("maze_moveWest"))};b.exports={k_1:{isK1:!0,toolbox:g(),ideal:5,requiredBlocks:[[e.moveEast]],startDirection:d.EAST,searchWord:"EAST",step:!0,map:[["_","_","_","_","_","_","_","_"],["_","_","_","_","_","_","_","_"],["_","_","_","_","_","_","_","_"],["_","_","_","_","_","_","_","_"],["_","_",2,"E","A","S","T","_"],["_","_","_","_","_","_","_","_"],["_","K","E","L","L","Y","B","_"],["_","_","_","_","_","_","_","_"]],startBlocks:f.blockOfType("maze_moveEast")},k_2:{isK1:!0,toolbox:g(),ideal:6,requiredBlocks:[[e.moveSouth]],searchWord:"SOUTH",startDirection:d.SOUTH,step:!0,map:[["_","_","_","_","_","_","_","_"],["A","N","G","I","E","D","O","G"],["_","_","_",2,"_","_","_","_"],["_","_","_","S","_","_","_","_"],["_","_","_","O","_","_","_","_"],["_","_","_","U","_","_","_","_"],["_","_","_","T","_","_","_","_"],["_","_","_","H","_","_","_","_"]],startBlocks:f.blockOfType("maze_moveSouth")},k_3:{isK1:!0,toolbox:g(),ideal:5,requiredBlocks:[[e.moveWest]],searchWord:"WEST",startDirection:d.WEST,step:!0,map:[["_","_","_","_","_","_","_","_"],["_","_","_","_","_","_","_","_"],["L","E","V","E","N","S","O","N"],["_","_","_","_","_","_","_","_"],["_","_","T","S","E","W",2,"_"],["_","_","_","_","_","_","_","_"],["_","_","_","_","_","_","_","_"],["_","_","_","_","_","_","_","_"]],startBlocks:f.blockOfType("maze_moveWest")},k_4:{isK1:!0,toolbox:g(),ideal:6,requiredBlocks:[[e.moveNorth]],searchWord:"NORTH",startDirection:d.NORTH,step:!0,map:[["_","_","_","_","G","_","_","_"],["_","_","H","_","O","_","_","_"],["_","_","T","_","_4","_","_","_"],["_","_","R","_","I","_","_","_"],["_","_","O","_","T","_","_","_"],["_","_","N","_","J","_","_","_"],["_","_",2,"_","R","_","_","_"],["_","_","_","_","F","_","_","_"]]},k_6:{isK1:!0,toolbox:g(),ideal:5,requiredBlocks:[[e.moveEast],[e.moveSouth]],searchWord:"JUMP",startDirection:d.EAST,step:!0,map:[["_","_","_","_","_","_","_","_"],["S","_","_","_","_","_","_","_"],["A","_","_","_","_","_","_","_"],["Y","_",2,"J","U","M","_","_"],["E","_","_","_","_","P","_","_"],["E","_","_","_","_","_","_","_"],["D","_","_","_","_","_","_","_"],["_","_","_","_","_","_","_","_"]]},k_9:{toolbox:g(),ideal:5,requiredBlocks:[[e.moveEast],[e.moveNorth]],searchWord:"CODE",startDirection:d.EAST,step:!0,map:[["_","_","_","_","_","_","M","_"],["_","_","_","_","_","_","A","_"],["_","_","_","_","_","_","R","_"],["_","_","_","D","E","_","K","_"],["_",2,"C","O","_","_","N","_"],["_","_","_","_","_","_","P","_"],["_","_","_","_","_","_","A","_"],["_","_","_","_","_","_","M","_"]]},k_13:{isK1:!0,toolbox:g(),ideal:6,requiredBlocks:[[e.moveEast],[e.moveSouth]],searchWord:"DEBUG",startDirection:d.EAST,step:!0,map:[["_","_","_","_","_","_","_","_"],["_","_","_","_","_","_","_","_"],["_",2,"D","E","_","_","_","_"],["_","_","_","B","_","_","_","_"],["_","_","_","U","G","_","_","_"],["_","_","_","_","_","_","_","_"],["_","_","_","H","E","N","R","Y"],["_","_","_","_","_","_","_","_"]]},k_15:{isK1:!0,toolbox:g(),ideal:6,requiredBlocks:[[e.moveSouth],[e.moveEast]],searchWord:"ABOVE",startDirection:d.SOUTH,step:!0,map:[["_","_","_","_","_","_","_","_"],["_","_","_","_","_","_","_","_"],["_","_",2,"_","_","_","_","_"],["_","_","A","_","_","_","_","_"],["_","_","B","O","_","_","_","_"],["_","_","_","V","E","_","_","_"],["_","_","_","_","_","_","_","_"],["_","_","_","_","_","_","_","_"]]},k_16:{isK1:!0,toolbox:g(),ideal:6,requiredBlocks:[[e.moveEast],[e.moveNorth]],searchWord:"BELOW",startDirection:d.EAST,step:!0,map:[["_","_","_","_","_","_","_","_"],["_","_","_","_","_","_","_","_"],["_","_","_","_","W","_","_","_"],["_","_","_","_","O","_","_","_"],["_","_","_","E","L","_","_","_"],["_","_",2,"B","_","_","_","_"],["_","_","_","_","_","_","_","_"],["_","_","_","_","_","_","_","_"]]},k_20:{isK1:!0,toolbox:g(),ideal:6,requiredBlocks:[[e.moveEast],[e.moveSouth]],searchWord:"STORY",startDirection:d.EAST,step:!0,map:[["_","_","_","_","_","_","_","_"],["_","_","_","_","_","_","_","_"],["_","_",2,"S","T","_","_","_"],["_","_","_","_","O","_","_","_"],["_","_","_","_","R","_","_","_"],["_","_","_","_","Y","_","_","_"],["_","_","_","_","_","_","_","_"],["_","_","_","_","_","_","_","_"]]}}},{"../block_utils":"/home/ubuntu/staging/apps/build/js/block_utils.js","./requiredBlocks":"/home/ubuntu/staging/apps/build/js/maze/requiredBlocks.js","./tiles":"/home/ubuntu/staging/apps/build/js/maze/tiles.js"}],"/home/ubuntu/staging/apps/build/js/maze/toolboxes/maze.xml.ejs":[function(require,module,exports){module.exports=function(){var t=function anonymous(locals,filters,escape){escape=escape||function(a){return String(a).replace(/&(?!\w+;)/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")};var buf=[];with(locals||{})!function(){buf.push('<xml id="toolbox" style="display: none;">\n  <block type="maze_moveForward"></block>\n  <block type="maze_turn"><title name="DIR">turnLeft</title></block>\n  <block type="maze_turn"><title name="DIR">turnRight</title></block>\n  '),1==page?(buf.push("    "),level>2&&(buf.push('      <block type="maze_forever"></block>\n      '),5==level?buf.push('        <block type="maze_if"><title name="DIR">isPathLeft</title></block>\n      '):level>5&&level<9&&buf.push('        <block type="maze_if"></block>\n      '),buf.push("      "),level>8&&buf.push('       <block type="maze_ifElse"></block>\n      '),buf.push("    ")),buf.push("  ")):2==page&&(buf.push("    "),level>4&&level<9&&buf.push('      <block type="controls_repeat">\n        <title name="TIMES">5</title>\n      </block>\n    '),buf.push("    "),level>8&&(buf.push('      <block type="maze_forever"></block>\n      '),13==level||15==level?buf.push('        <block type="maze_if"><title name="DIR">isPathLeft</title></block>\n      '):(14==level||16==level)&&buf.push('        <block type="maze_if"><title name="DIR">isPathRight</title></block>\n      '),buf.push("      "),level>16&&buf.push('       <block type="maze_ifElse"></block>\n      '),buf.push("    ")),buf.push("  ")),buf.push("</xml>\n")}();return buf.join("")};return function(a){return t(a,require("ejs").filters)}}()},{ejs:"/home/ubuntu/staging/apps/node_modules/ejs/lib/ejs.js"}],"/home/ubuntu/staging/apps/build/js/maze/startBlocks.xml.ejs":[function(require,module,exports){module.exports=function(){var t=function anonymous(locals,filters,escape){escape=escape||function(a){return String(a).replace(/&(?!\w+;)/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")};var buf=[];with(locals||{})!function(){buf.push(""),2==page&&(buf.push("  "),level<4?buf.push('    <block type="maze_moveForward" x="70" y="70"></block>\n  '):8==level?buf.push('    <block type="controls_repeat" x="70" y="70" editable="false"\n      deletable="false">\n      <title name="TIMES">3</title>\n    </block>\n  '):13==level?buf.push('    <block type="maze_forever" x="20" y="70" editable="false" deletable="false">\n      <statement name="DO">\n        <block type="maze_moveForward" editable="false" deletable="false">\n          <next>\n            <block type="maze_if" editable="false" deletable="false">\n              <title name="DIR">isPathLeft</title>\n            </block>\n          </next>\n        </block>\n      </statement>\n    </block>\n  '):19==level&&buf.push('    <block type="maze_forever" x="20" y="70" editable="false" deletable="false">\n      <statement name="DO">\n        <block type="maze_ifElse" editable="false" deletable="false">\n          <title name="DIR">isPathForward</title>\n          <statement name="ELSE">\n            <block type="maze_ifElse" editable="false" deletable="false">\n              <title name="DIR">isPathRight</title>\n            </block>\n          </statement>\n        </block>\n      </statement>\n    </block>\n  '),buf.push("")),buf.push("")}();return buf.join("")};return function(a){return t(a,require("ejs").filters)}}()},{ejs:"/home/ubuntu/staging/apps/node_modules/ejs/lib/ejs.js"}],"/home/ubuntu/staging/apps/build/js/maze/requiredBlocks.js":[function(a,b,c){"use strict";var d=a("../required_block_utils"),e={test:"moveForward",type:"maze_moveForward"},f={test:"turnLeft",type:"maze_turn",titles:{DIR:"turnLeft"}},g={test:"turnRight",type:"maze_turn",titles:{DIR:"turnRight"}},h={test:"while",type:"maze_forever"},i={test:"isPathLeft",type:"maze_if",titles:{DIR:"isPathLeft"}},j={test:"isPathRight",type:"maze_if",titles:{DIR:"isPathRight"}},k={test:"isPathForward",type:"maze_ifElse",titles:{DIR:"isPathForward"}},l={test:"for",type:"controls_repeat",titles:{TIMES:"???"}};b.exports={moveNorth:d.simpleBlock("maze_moveNorth"),moveSouth:d.simpleBlock("maze_moveSouth"),moveEast:d.simpleBlock("maze_moveEast"),moveWest:d.simpleBlock("maze_moveWest"),controls_repeat_simplified:d.repeatSimpleBlock("???"),MOVE_FORWARD:e,TURN_LEFT:f,TURN_RIGHT:g,WHILE_LOOP:h,IS_PATH_LEFT:i,IS_PATH_RIGHT:j,IS_PATH_FORWARD:k,FOR_LOOP:l}},{"../required_block_utils":"/home/ubuntu/staging/apps/build/js/required_block_utils.js"}],"/home/ubuntu/staging/apps/build/js/maze/karelLevels.js":[function(a,b,c){"use strict";var d=a("../level_base"),e=a("./tiles").Direction,f=a("./locale"),g=a("../block_utils"),h=function(b,c){var d;switch(b){case 1:d=a("./toolboxes/karel1.xml.ejs");break;case 2:d=a("./toolboxes/karel2.xml.ejs");break;case 3:d=a("./toolboxes/karel3.xml.ejs")}return d({level:c})},i=function(b,c){return a("./karelStartBlocks.xml.ejs")({page:b,level:c})},j={test:function(a){return"maze_moveForward"==a.type},type:"maze_moveForward"},k={test:"dig",type:"maze_dig"},l={test:"fill",type:"maze_fill"},m={test:function(a){return"controls_repeat"==a.type},type:"controls_repeat",titles:{TIMES:"???"}},n={test:function(a){return"controls_repeat_ext"==a.type},type:"controls_repeat_ext"},o={test:function(a){return"controls_for"==a.type},type:"controls_for"},p={test:function(a){return"variables_get"==a.type},type:"variables_get",titles:{VAR:"i"}},q={test:"turnLeft",type:"maze_turn",titles:{DIR:"turnLeft"}},r={test:"turnRight",type:"maze_turn",titles:{DIR:"turnRight"}},s={test:"while (Maze.isPathForward",type:"maze_untilBlocked"},t={test:"while (Maze.pilePresent",type:"maze_untilBlockedOrNotClear",titles:{DIR:"pilePresent"}},u={test:"while (Maze.holePresent",type:"maze_untilBlockedOrNotClear",titles:{DIR:"holePresent"}},v={test:"while (Maze.isPathForward",type:"maze_untilBlockedOrNotClear",titles:{DIR:"isPathForward"}},w={test:"if (Maze.pilePresent",type:"karel_if",titles:{DIR:"pilePresent"}},x={test:"if (Maze.holePresent",type:"karel_if",titles:{DIR:"holePresent"}},y={test:"} else {",type:"karel_ifElse"},z=function(a){return{test:function(b){return b.getTitleValue("NAME")==f.fillN({shovelfuls:a})},type:"procedures_callnoreturn",titles:{NAME:f.fillN({shovelfuls:a})}}},A=function(a){return{test:function(b){return b.getTitleValue("NAME")==f.removeN({shovelfuls:a})},type:"procedures_callnoreturn",titles:{NAME:f.removeN({shovelfuls:a})}}},B={test:function(a){return a.getTitleValue("NAME")==f.avoidCowAndRemove()},type:"procedures_callnoreturn",titles:{NAME:f.avoidCowAndRemove()}},C=({test:function(a){return a.getTitleValue("NAME")==f.removeAndAvoidTheCow()},type:"procedures_callnoreturn",titles:{NAME:f.removeAndAvoidTheCow()}},{test:function(a){return a.getTitleValue("NAME")==f.removeStack({shovelfuls:4})},type:"procedures_callnoreturn",titles:{NAME:f.removeStack({shovelfuls:4})}}),D={test:function(a){return a.getTitleValue("NAME")==f.fillStack({shovelfuls:2})},type:"procedures_callnoreturn",titles:{NAME:f.fillStack({shovelfuls:2})}};b.exports={"1_1":{toolbox:h(1,1),startBlocks:i(1,1),ideal:6,requiredBlocks:[[j],[k]],scale:{snapRadius:2},map:[[0,0,0,0,0,1,1,1],[0,1,1,0,0,1,1,1],[0,0,0,0,0,1,1,1],[0,0,0,0,0,0,0,0],[2,1,1,1,1,0,0,0],[0,0,0,0,0,0,0,0],[0,0,1,1,0,0,0,0],[0,0,1,1,0,0,0,0]],startDirection:e.EAST,initialDirt:[[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0],[0,0,0,0,1,0,0,0],[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0]]},"1_2":{toolbox:h(1,2),startBlocks:i(1,2),ideal:4,requiredBlocks:[[j],[l]],map:[[0,0,0,0,0,0,1,1],[0,0,0,0,0,0,1,1],[0,0,0,0,0,0,0,0],[0,1,1,1,0,0,0,0],[0,1,2,1,0,0,0,0],[0,1,1,1,0,1,1,1],[0,0,0,0,0,1,1,1],[0,0,0,0,0,1,1,1]],startDirection:e.EAST,initialDirt:[[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0],[0,0,0,-2,0,0,0,0],[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0]]},"1_3":{toolbox:h(1,3),startBlocks:i(1,3),ideal:4,requiredBlocks:[[j],[k],[m]],map:[[1,1,1,0,0,0,0,0],[1,1,1,0,0,0,0,0],[1,1,1,0,1,1,1,0],[0,0,0,0,1,2,1,0],[0,0,0,0,1,1,1,0],[0,0,0,0,0,0,0,0],[1,1,0,0,0,0,0,0],[1,1,0,0,0,0,0,0]],startDirection:e.SOUTH,initialDirt:[[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0],[0,0,0,0,0,10,0,0],[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0]]},"1_4":{toolbox:h(1,4),ideal:5,requiredBlocks:[[j],[k],[q],[m]],map:[[0,0,0,0,0,0,1,1],[0,0,0,0,0,0,1,1],[0,0,0,0,0,0,1,1],[0,0,0,1,1,0,0,0],[0,0,0,2,1,0,0,0],[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0],[1,1,1,1,1,1,1,1]],startDirection:e.EAST,initialDirt:[[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0],[0,0,0,1,1,0,0,0],[0,0,0,1,1,0,0,0],[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0]]},"1_5":{toolbox:h(1,5),startBlocks:i(1,5),ideal:6,requiredBlocks:[[j],[l],[m],[s]],scale:{stepSpeed:2},map:[[1,1,0,0,0,0,0,0],[1,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0],[0,0,0,0,1,1,0,0],[0,0,0,0,1,1,0,0],[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0],[2,1,1,1,1,1,0,0]],startDirection:e.EAST,initialDirt:[[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0],[0,-5,-5,-5,-5,-5,0,0]]},"1_6":{toolbox:h(1,6),ideal:4,requiredBlocks:[[j],[k],[t,m,v]],scale:{stepSpeed:3},map:[[1,1,0,1,1,0,1,1],[1,1,0,2,1,0,1,1],[0,0,0,1,1,0,0,0],[0,0,0,1,1,0,0,0],[0,0,0,1,1,0,0,0],[0,0,0,1,1,0,0,0],[1,1,0,1,1,0,1,1],[1,1,0,1,1,0,1,1]],startDirection:e.SOUTH,initialDirt:[[0,0,0,0,0,0,0,0],[0,0,0,1,0,0,0,0],[0,0,0,1,0,0,0,0],[0,0,0,1,0,0,0,0],[0,0,0,1,0,0,0,0],[0,0,0,1,0,0,0,0],[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0]]},"1_7":{toolbox:h(1,7),startBlocks:i(1,7),ideal:5,requiredBlocks:[[r],[j],[l],[u]],scale:{stepSpeed:2},map:[[1,1,0,0,0,0,1,1],[1,1,1,0,0,0,0,1],[0,1,1,2,0,0,0,0],[0,0,1,1,1,0,0,0],[0,0,0,1,1,1,0,0],[0,0,0,0,1,1,1,0],[1,0,0,0,0,1,1,1],[1,1,0,0,0,0,1,1]],startDirection:e.EAST,initialDirt:[[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0],[0,0,0,-18,0,0,0,0],[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0]]},"1_8":{toolbox:h(1,8),ideal:4,requiredBlocks:[[j],[l],[v,m]],scale:{stepSpeed:3},map:[[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0],[1,1,1,1,1,1,1,1],[2,1,1,1,1,1,1,1],[1,1,1,1,1,1,1,1],[1,1,1,1,1,1,1,1]],startDirection:e.EAST,initialDirt:[[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,-1],[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0]]},"1_9":{toolbox:h(1,9),ideal:10,requiredBlocks:[[j],[k],[v,m],[q]],scale:{stepSpeed:2.5},map:[[0,0,0,0,0,0,1,1],[0,0,0,0,0,0,1,1],[0,0,0,0,1,0,0,0],[0,1,1,0,1,0,0,0],[0,1,1,0,1,0,0,0],[0,0,0,0,1,0,0,0],[0,0,0,0,1,0,0,0],[2,1,1,1,1,0,0,0]],startDirection:e.EAST,initialDirt:[[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0],[0,0,0,0,1,0,0,0],[0,0,0,0,1,0,0,0],[0,0,0,0,1,0,0,0],[0,0,0,0,1,0,0,0],[0,0,0,0,1,0,0,0],[0,1,1,1,1,0,0,0]]},"1_10":{toolbox:h(1,10),startBlocks:i(1,10),ideal:5,requiredBlocks:[[j],[k],[w],[s,m]],scale:{stepSpeed:2.5},map:[[1,1,0,0,0,0,1,1],[1,1,0,0,0,0,1,1],[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0],[2,1,1,1,1,1,1,1],[0,0,0,0,0,0,0,0],[1,1,0,0,0,0,1,1],[1,1,0,0,0,0,1,1]],startDirection:e.EAST,initialDirt:[[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0],[0,1,0,0,1,1,0,1],[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0]]},"1_11":{toolbox:h(1,11),startBlocks:i(1,11),ideal:7,requiredBlocks:[[j],[k],[l],[w],[x],[s,m]],scale:{stepSpeed:2.5},map:[[1,1,0,0,0,0,1,1],[1,0,0,0,0,0,0,1],[0,0,0,0,0,0,0,0],[2,1,1,1,1,1,1,1],[0,0,0,0,0,0,0,0],[1,0,0,0,0,0,0,1],[1,1,0,0,0,0,1,1],[1,1,1,0,0,1,1,1]],startDirection:e.EAST,initialDirt:[[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0],[0,-1,0,0,-1,1,1,0],[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0]]},"2_1":{toolbox:h(2,1),startBlocks:i(2,1),ideal:null,requiredBlocks:[[j],[k],[l],[q,r]],scale:{stepSpeed:3},map:[[0,0,0,0,0,0,1,1],[0,0,0,0,0,0,1,1],[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0],[1,1,1,0,0,0,0,0],[1,1,1,0,0,0,0,0],[1,1,1,0,0,0,0,0],[2,1,1,0,0,0,0,0]],startDirection:e.EAST,initialDirt:[[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0],[1,0,1,0,0,0,0,0],[1,0,1,0,0,0,0,0],[1,-1,1,0,0,0,0,0],[1,-1,1,0,0,0,0,0]]},"2_2":{toolbox:h(2,2),startBlocks:i(2,2),ideal:6,requiredBlocks:[[j],[z(5)]],map:[[0,0,0,0,0,0,0,0],[0,1,1,1,1,1,1,0],[0,1,0,0,0,0,1,0],[0,1,0,2,1,0,1,0],[0,1,0,1,1,0,1,0],[0,1,0,0,0,0,1,0],[0,1,1,1,1,1,1,0],[0,0,0,0,0,0,0,0]],startDirection:e.EAST,initialDirt:[[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0],[0,0,0,0,-5,0,0,0],[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0]]},"2_3":{toolbox:h(2,3),startBlocks:i(2,3),ideal:8,requiredBlocks:[[j],[z(5)],[s,m]],scale:{stepSpeed:2},map:[[0,1,1,1,1,1,1,0],[1,0,0,0,0,0,0,1],[1,0,0,0,0,0,0,1],[1,0,0,0,0,0,0,1],[1,0,0,0,0,0,0,1],[1,0,0,0,0,0,0,1],[1,0,0,0,0,0,0,1],[0,2,1,1,1,1,1,0]],startDirection:e.EAST,initialDirt:[[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0],[0,0,-5,-5,-5,-5,-5,0]]},"2_4":{toolbox:h(2,4),startBlocks:i(2,4),
ideal:13,requiredBlocks:[[k],[m],[A(7)],[j],[q],[r]],scale:{stepSpeed:3},map:[[1,1,1,1,0,0,1,1],[1,1,1,0,0,1,1,1],[1,1,0,0,1,1,1,0],[1,0,0,1,1,1,0,0],[0,0,1,1,1,0,0,1],[0,1,2,1,0,0,1,1],[1,1,1,0,0,1,1,1],[1,1,0,0,1,1,1,1]],startDirection:e.EAST,initialDirt:[[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0],[0,0,0,0,0,7,0,0],[0,0,0,0,7,0,0,0],[0,0,0,7,0,0,0,0],[0,0,7,0,0,0,0,0],[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0]]},"2_5":{toolbox:h(2,5),startBlocks:i(2,5),ideal:8,requiredBlocks:[[k],[m],[A(6)],[j]],scale:{stepSpeed:3},map:[[0,0,0,1,1,0,0,0],[0,0,0,1,1,0,0,0],[0,0,0,1,1,0,0,0],[1,2,1,1,1,1,1,1],[1,1,1,1,1,1,1,1],[0,0,0,1,1,0,0,0],[0,0,0,1,1,0,0,0],[0,0,0,1,1,0,0,0]],startDirection:e.EAST,initialDirt:[[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0],[0,0,6,0,6,0,6,0],[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0]]},"2_6":{toolbox:h(2,6),startBlocks:i(2,6),ideal:11,requiredBlocks:[[A(8)],[z(8)],[j],[s,m]],scale:{stepSpeed:3},map:[[0,0,1,1,0,0,0,0],[0,0,1,1,0,0,0,0],[0,0,0,0,0,0,0,0],[2,1,1,1,1,1,1,1],[0,0,0,0,0,0,0,0],[0,0,0,0,1,1,1,0],[0,0,0,0,1,1,1,0],[0,0,0,0,1,1,1,0]],startDirection:e.EAST,initialDirt:[[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0],[8,0,0,0,0,0,0,-8],[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0]]},"2_7":{toolbox:h(2,7),startBlocks:i(2,7),ideal:11,requiredBlocks:[[q],[j],[r],[k]],map:[[1,1,0,0,0,1,1,1],[1,1,0,0,0,0,1,1],[0,0,0,0,0,0,0,0],[0,0,1,1,1,0,0,0],[0,0,2,4,1,0,0,0],[0,0,0,0,0,0,0,0],[0,0,1,1,0,0,0,0],[0,0,1,1,0,0,0,0]],startDirection:e.EAST,initialDirt:[[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0],[0,0,0,0,1,0,0,0],[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0]]},"2_8":{toolbox:h(2,8),startBlocks:i(2,8),ideal:13,requiredBlocks:[[m],[B]],scale:{stepSpeed:3},map:[[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0],[1,1,1,1,1,1,1,1],[2,4,1,4,1,4,1,1],[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0]],startDirection:e.EAST,initialDirt:[[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0],[0,0,1,0,1,0,1,0],[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0]]},"2_9":{toolbox:h(2,9),startBlocks:i(2,9),ideal:14,requiredBlocks:[[C],[j],[s,m]],scale:{stepSpeed:3},map:[[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0],[1,1,1,1,1,1,1,1],[1,1,1,1,1,1,1,1],[1,1,1,1,1,1,1,1],[1,1,1,1,1,1,1,1],[2,1,1,1,1,1,1,1]],startDirection:e.EAST,initialDirt:[[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0],[1,1,1,1,1,1,0,0],[1,1,1,1,1,1,0,0],[1,1,1,1,1,1,0,0],[1,1,1,1,1,1,0,0]]},"2_10":{toolbox:h(2,10),startBlocks:i(2,10),ideal:27,requiredBlocks:[[C],[j],[D],[w,y],[s,m]],scale:{stepSpeed:3},map:[[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0],[1,1,1,1,1,1,1,1],[1,1,1,1,1,1,1,1],[1,1,1,1,1,1,1,1],[1,1,1,1,1,1,1,1],[2,1,1,1,1,1,1,1]],startDirection:e.EAST,initialDirt:[[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0],[1,0,1,0,0,1,0,0],[1,0,1,0,0,1,0,0],[1,-1,1,-1,-1,1,-1,0],[1,-1,1,-1,-1,1,-1,0]]},debug_seq_1:{toolbox:h(3,1),startBlocks:i(3,1),ideal:8,requiredBlocks:[[j],[k],[l],[q],[r]],map:[[0,0,0,0,0,0,0,0],[0,0,0,0,1,1,0,0],[0,0,0,0,1,1,0,0],[0,0,0,0,0,0,0,0],[0,0,4,1,1,0,0,0],[0,0,2,1,4,0,0,0],[1,1,0,0,0,1,1,0],[1,1,0,0,0,0,0,0]],startDirection:e.EAST,initialDirt:[[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0],[0,0,0,-1,1,0,0,0],[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0]]},debug_seq_2:{toolbox:h(3,2),startBlocks:i(3,2),ideal:7,requiredBlocks:[[j],[k],[q]],map:[[1,1,0,0,0,0,0,0],[1,1,0,0,0,0,0,0],[0,0,0,0,0,0,1,0],[0,0,2,1,1,0,1,0],[0,0,1,1,1,0,1,0],[0,0,1,1,1,0,0,0],[1,0,0,0,0,0,0,1],[1,1,0,0,0,0,0,1]],startDirection:e.SOUTH,initialDirt:[[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0],[0,0,0,0,1,0,0,0],[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0]]},debug_repeat:{toolbox:h(3,3),startBlocks:i(3,3),ideal:12,requiredBlocks:[[j],[k],[q],[r],[m]],scale:{stepSpeed:3},map:[[1,1,1,1,1,1,1,1],[1,0,0,0,0,0,0,1],[1,0,1,1,1,1,0,1],[1,0,1,2,1,1,0,1],[1,0,1,1,1,1,0,1],[1,0,1,1,1,1,0,1],[1,0,0,0,0,0,0,1],[1,1,1,1,1,1,1,1]],startDirection:e.SOUTH,initialDirt:[[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0],[0,0,0,0,5,0,0,0],[0,0,0,0,0,7,0,0],[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0]]},debug_while:{toolbox:h(3,4),startBlocks:i(3,4),ideal:5,requiredBlocks:[[j],[m],[l],[u]],scale:{stepSpeed:3},map:[[0,0,0,0,0,1,1,0],[0,0,1,0,0,1,1,0],[0,0,1,0,0,1,1,0],[0,0,0,0,0,0,0,0],[0,2,1,1,1,1,1,0],[0,0,0,0,0,0,0,0],[1,1,0,0,0,0,0,0],[1,1,0,0,0,0,0,0]],startDirection:e.EAST,initialDirt:[[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,-15,0],[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0]]},debug_if:{toolbox:h(3,5),startBlocks:i(3,5),ideal:8,requiredBlocks:[[j],[q],[r],[m],[k],[w]],scale:{stepSpeed:3},map:[[0,0,0,0,0,0,0,1],[0,0,0,0,0,0,1,1],[0,0,0,0,0,1,1,0],[0,0,0,0,1,1,0,1],[0,0,0,1,1,0,1,1],[0,0,1,1,0,1,1,0],[0,1,1,0,1,1,0,1],[2,1,0,1,1,0,1,1]],startDirection:e.EAST,initialDirt:[[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,1],[0,0,0,0,0,0,0,0],[0,0,0,0,0,1,0,0],[0,0,0,0,1,0,0,0],[0,0,0,0,0,0,0,0],[0,0,1,0,0,0,0,0],[0,0,0,0,0,0,0,0]]},debug_if_else:{toolbox:h(3,6),startBlocks:i(3,6),ideal:10,requiredBlocks:[[j],[q],[r],[m],[k],[l],[y,x]],scale:{stepSpeed:3},map:[[0,0,0,0,1,1,0,1],[0,0,0,1,1,0,1,1],[0,0,1,1,0,1,1,0],[0,1,1,0,1,1,0,1],[1,1,0,1,1,0,1,1],[1,0,1,1,0,1,1,0],[0,1,1,0,1,1,0,0],[2,1,0,1,1,0,0,0]],startDirection:e.EAST,initialDirt:[[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,-1],[0,0,0,0,0,0,1,0],[0,0,0,0,0,1,0,0],[0,0,0,0,-1,0,0,0],[0,0,0,-1,0,0,0,0],[0,0,1,0,0,0,0,0],[0,-1,0,0,0,0,0,0]]},debug_function_1:{toolbox:h(3,7),startBlocks:i(3,7),ideal:8,requiredBlocks:[[j],[q],[m],[k]],scale:{stepSpeed:3},map:[[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0],[0,0,1,1,1,1,0,0],[0,0,1,0,0,1,0,0],[0,0,1,0,0,1,0,0],[0,0,2,1,1,1,0,0],[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0]],startDirection:e.EAST,initialDirt:[[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0],[0,0,1,1,1,1,0,0],[0,0,1,0,0,1,0,0],[0,0,1,0,0,1,0,0],[0,0,1,1,1,1,0,0],[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0]]},debug_function_2:{toolbox:h(3,8),startBlocks:i(3,8),ideal:17,requiredBlocks:[[j],[q],[m],[k],[l],[d.call(f.fillSquare())],[d.call(f.removeSquare())]],scale:{stepSpeed:3},map:[[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0],[1,1,1,1,1,1,1,1],[1,0,1,0,0,1,0,1],[2,1,1,1,1,1,1,1],[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0]],startDirection:e.EAST,initialDirt:[[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0],[1,1,1,0,0,-1,-1,-1],[1,0,1,0,0,-1,0,-1],[1,1,1,0,0,-1,-1,-1],[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0]]},debug_function_3:{toolbox:h(3,9),startBlocks:i(3,9),ideal:12,requiredBlocks:[[j],[n],[k],[o],[d.callWithArg(f.removePile(),f.heightParameter())],[p]],scale:{stepSpeed:2},map:[[0,0,0,0,0,0,0,0],[0,1,1,0,0,0,0,0],[0,1,1,0,0,0,1,1],[0,0,0,0,0,0,1,1],[0,0,0,0,0,0,0,0],[1,2,1,1,1,1,1,1],[0,0,0,0,0,0,0,0],[0,0,0,0,1,1,0,0]],startDirection:e.EAST,initialDirt:[[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0],[0,1,2,3,4,5,6,0],[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0]]},bee_1:{toolbox:g.createToolbox('      <block type="maze_moveForward"></block>      <block type="maze_turn"><title name="DIR">turnLeft</title></block>      <block type="maze_turn"><title name="DIR">turnRight</title></block>      <block type="maze_nectar"></block>      <block type="maze_honey"></block>      <block type="math_number"><title name="NUM">0</title></block>      <block type="bee_ifNectarAmount"></block>      <block type="bee_ifTotalNectar"></block>      <block type="bee_ifFlower"></block>      <block type="bee_ifOnlyFlower"></block>      <block type="bee_whileNectarAmount"></block>'),startBlocks:i(1,1),requiredBlocks:[],scale:{snapRadius:2},honeyGoal:1,step:!0,map:[[0,0,0,0,0,1,1,1],[0,1,1,0,0,1,1,1],[0,0,0,0,0,1,1,1],[0,0,0,0,0,0,0,0],[2,"P",1,1,1,0,0,0],[0,0,0,0,0,0,0,0],[0,0,1,1,0,0,0,0],[0,0,1,1,0,0,0,0]],startDirection:e.EAST,initialDirt:[[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0],[0,3,-1,0,0,0,0,0],[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0]]}}},{"../block_utils":"/home/ubuntu/staging/apps/build/js/block_utils.js","../level_base":"/home/ubuntu/staging/apps/build/js/level_base.js","./karelStartBlocks.xml.ejs":"/home/ubuntu/staging/apps/build/js/maze/karelStartBlocks.xml.ejs","./locale":"/home/ubuntu/staging/apps/build/js/maze/locale.js","./tiles":"/home/ubuntu/staging/apps/build/js/maze/tiles.js","./toolboxes/karel1.xml.ejs":"/home/ubuntu/staging/apps/build/js/maze/toolboxes/karel1.xml.ejs","./toolboxes/karel2.xml.ejs":"/home/ubuntu/staging/apps/build/js/maze/toolboxes/karel2.xml.ejs","./toolboxes/karel3.xml.ejs":"/home/ubuntu/staging/apps/build/js/maze/toolboxes/karel3.xml.ejs"}],"/home/ubuntu/staging/apps/build/js/maze/toolboxes/karel3.xml.ejs":[function(require,module,exports){module.exports=function(){var t=function anonymous(locals,filters,escape){escape=escape||function(a){return String(a).replace(/&(?!\w+;)/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")};var buf=[];with(locals||{})!function(){buf.push("");var a=require("../../locale"),b=function(){buf.push('  <category name="',escape(a.catProcedures()),'" custom="PROCEDURE"></category>\n  <category name="',escape(a.catLogic()),'">\n    <block type="karel_if"></block>\n    <block type="karel_ifElse"></block>\n  </category>\n')};buf.push("\n");var c=function(a,b){buf.push('  <block type="controls_for">\n    <value name="FROM">\n      <block type="math_number">\n        <title name="NUM">1</title>\n      </block>\n    </value>\n    <value name="TO">\n      <block type="math_number">\n        <title name="NUM">\n          ',escape(b||10),'        </title>\n      </block>\n    </value>\n    <value name="BY">\n      <block type="math_number">\n        <title name="NUM">1</title>\n      </block>\n    </value>\n    '),a&&(buf.push('      <statement name="DO">\n        '),a(),buf.push("\n      </statement>\n    ")),buf.push("  </block>\n")};buf.push('\n<xml id="toolbox" style="display: none;">\n  <category name="',escape(a.catActions()),'">\n    <block type="maze_moveForward"></block>\n    <block type="maze_turn"><title name="DIR">turnLeft</title></block>\n    <block type="maze_turn"><title name="DIR">turnRight</title></block>\n    <block type="maze_dig"></block>\n    <block type="maze_fill"></block>\n  </category>\n  '),b(),buf.push('  <category name="',escape(a.catLoops()),'">\n    <block type="maze_untilBlockedOrNotClear"></block>\n    '),level<9?buf.push('      <block type="controls_repeat"></block>\n    '):buf.push('      <block type="controls_repeat_ext">\n        <value name="TIMES">\n          <block type="math_number">\n            <title name="NUM">10</title>\n          </block>\n        </value>\n      </block>\n    '),buf.push("    "),c(),buf.push('  </category>\n  <category name="',escape(a.catMath()),'">\n    <block type="math_number"></block>\n  </category>\n  <category name="',escape(a.catVariables()),'" custom="VARIABLE">\n  </category>\n</xml>\n')}();return buf.join("")};return function(a){return t(a,require("ejs").filters)}}()},{"../../locale":"/home/ubuntu/staging/apps/build/js/locale.js",ejs:"/home/ubuntu/staging/apps/node_modules/ejs/lib/ejs.js"}],"/home/ubuntu/staging/apps/build/js/maze/toolboxes/karel2.xml.ejs":[function(require,module,exports){module.exports=function(){var t=function anonymous(locals,filters,escape){escape=escape||function(a){return String(a).replace(/&(?!\w+;)/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")};var buf=[];with(locals||{})!function(){buf.push("");var a=require("../../locale"),b=require(".././locale"),c=function(){buf.push("  "),level>3?buf.push('    <category name="',escape(a.catProcedures()),'" custom="PROCEDURE"></category>\n  '):(2==level||3==level)&&buf.push('    <category name="',escape(a.catProcedures()),'">\n      <block type="procedures_callnoreturn">\n        <mutation name="',escape(b.fillN({shovelfuls:5})),'"></mutation>\n      </block>\n    </category>\n  '),buf.push("  "),level<9?buf.push('    <category name="',escape(a.catLogic()),'">\n      <block type="karel_if"></block>\n    </category>\n  '):level>8&&buf.push('    <category name="',escape(a.catLogic()),'">\n      <block type="karel_if"></block>\n      <block type="karel_ifElse"></block>\n    </category>\n  '),buf.push("")};buf.push('\n<xml id="toolbox" style="display: none;">\n  <category name="',escape(a.catActions()),'">\n    <block type="maze_moveForward"></block>\n    <block type="maze_turn"><title name="DIR">turnLeft</title></block>\n    <block type="maze_turn"><title name="DIR">turnRight</title></block>\n    <block type="maze_dig"></block>\n    <block type="maze_fill"></block>\n  </category>\n  '),c(),buf.push('  <category name="',escape(a.catLoops()),'">\n    <block type="maze_untilBlocked"></block>\n    <block type="controls_repeat"></block>\n  </category>\n</xml>\n')}();return buf.join("")};return function(a){return t(a,require("ejs").filters)}}()},{"../../locale":"/home/ubuntu/staging/apps/build/js/locale.js",".././locale":"/home/ubuntu/staging/apps/build/js/maze/locale.js",ejs:"/home/ubuntu/staging/apps/node_modules/ejs/lib/ejs.js"}],"/home/ubuntu/staging/apps/build/js/maze/toolboxes/karel1.xml.ejs":[function(require,module,exports){module.exports=function(){var t=function anonymous(locals,filters,escape){escape=escape||function(a){return String(a).replace(/&(?!\w+;)/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")};var buf=[];with(locals||{})!function(){buf.push('<xml id="toolbox" style="display: none;">\n  <block type="maze_moveForward"></block>\n  <block type="maze_turn"><title name="DIR">turnLeft</title></block>\n  <block type="maze_turn"><title name="DIR">turnRight</title></block>\n  <block type="maze_dig"></block>\n  '),level>1&&(buf.push('    <block type="maze_fill"></block>\n    '),level>2&&(buf.push('      <block type="controls_repeat">\n        <title name="TIMES">5</title>\n      </block>\n      '),level>9&&buf.push('        <block type="karel_if"></block>\n      '),buf.push("    ")),buf.push("    "),(5==level||10==level||11==level)&&buf.push('      <block type="maze_untilBlocked"></block>\n    '),buf.push("    "),level>5&&level<8&&buf.push('      <block type="maze_untilBlockedOrNotClear"></block>\n    '),buf.push("    "),(8==level||9==level)&&buf.push('      <block type="maze_untilBlockedOrNotClear">\n        <title name="DIR">isPathForward</title>\n      </block>\n    '),buf.push("  ")),buf.push("</xml>\n")}();return buf.join("")};return function(a){return t(a,require("ejs").filters)}}()},{ejs:"/home/ubuntu/staging/apps/node_modules/ejs/lib/ejs.js"}],"/home/ubuntu/staging/apps/build/js/maze/karelStartBlocks.xml.ejs":[function(require,module,exports){module.exports=function(){var t=function anonymous(locals,filters,escape){escape=escape||function(a){return String(a).replace(/&(?!\w+;)/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")};var buf=[];with(locals||{})!function(){buf.push("");var a=require("./locale"),b=function(b){buf.push('  <block type="procedures_defnoreturn" x="20" y="200" editable="false"\n    deletable="false">\n    <mutation></mutation>\n    <title name="NAME">',escape(a.fillN({shovelfuls:b})),'</title>\n    <statement name="STACK">\n      <block type="controls_repeat" editable="false" deletable="false">\n        <title name="TIMES">',escape(b),'</title>\n        <statement name="DO">\n          <block type="maze_fill" editable="false" deletable="false">\n          </block>\n        </statement>\n       </block>\n    </statement>\n  </block>\n')};buf.push("\n");var c=function(b){buf.push('  <block type="procedures_defnoreturn" x="300" y="200" editable="false"\n    deletable="false">\n    <mutation></mutation>\n    <title name="NAME">',escape(a.removeN({shovelfuls:b})),'</title>\n    <statement name="STACK">\n      <block type="controls_repeat" editable="false" deletable="false">\n        <title name="TIMES">',escape(b),'</title>\n        <statement name="DO">\n          <block type="maze_dig" editable="false" deletable="false">\n          </block>\n        </statement>\n       </block>\n    </statement>\n  </block>\n')};buf.push("\n\n"),1==page?(buf.push("  "),1==level?buf.push('    <block type="maze_moveForward" x="70" y="70"></block>\n  '):2==level?buf.push('    <block type="maze_moveForward" x="70" y="70"></block>\n  '):3==level?buf.push('    <block type="maze_moveForward" x="70" y="70"></block>\n  '):4==level?buf.push('    <block type="maze_moveForward" x="70" y="70"></block>\n  '):5==level?buf.push('    <block type="maze_untilBlocked" x="70" y="70"></block>\n  '):6==level?buf.push('    <block type="maze_dig" x="70" y="70"></block>\n  '):7==level?buf.push('    <block type="maze_turn" x="70" y="70">\n          <title name="DIR">turnRight</title>\n    </block>\n  '):8==level?buf.push('    <block type="maze_moveForward" x="70" y="70"></block>\n  '):9==level?buf.push('    <block type="maze_moveForward" x="70" y="70"></block>\n  '):10==level?buf.push('    <block type="maze_untilBlocked" x="70" y="70"></block>\n  '):11==level&&buf.push('    <block type="maze_untilBlocked" x="70" y="70"></block>\n  '),buf.push("")):2==page?(buf.push("  "),2==level?(buf.push('    <block type="maze_moveForward" x="20" y="70"></block>\n    '),b(5),buf.push("  ")):3==level?(buf.push("    "),b(5),buf.push("  ")):4==level?(buf.push("    "),b(5),buf.push('    <block type="procedures_defnoreturn" x="300" y="200" editable="false"\n      deletable="false">\n      <mutation></mutation>\n      <title name="NAME">',escape(a.removeN({shovelfuls:7})),"</title>\n    </block>\n  ")):5==level?buf.push('    <block type="procedures_defnoreturn" x="20" y="200" editable="false"\n      deletable="false">\n      <mutation></mutation>\n      <title name="NAME">',escape(a.removeN({shovelfuls:6})),"</title>\n    </block>\n  "):6==level?(buf.push("    "),b(8),buf.push("    "),c(8),buf.push("  ")):7==level?buf.push('    <block type="procedures_callnoreturn" x="20" y="70" editable="false"\n      deletable="false">\n      <mutation name="',escape(a.avoidCowAndRemove()),'"></mutation>\n    </block>\n    <block type="procedures_defnoreturn" x="20" y="200" editable="false"\n      deletable="false">\n      <mutation></mutation>\n      <title name="NAME">',escape(a.avoidCowAndRemove()),"</title>\n    </block>\n  "):8==level?buf.push('    <block type="procedures_defnoreturn" x="20" y="200" editable="false"\n      deletable="false">\n      <mutation></mutation>\n      <title name="NAME">',escape(a.avoidCowAndRemove()),'</title>\n      <statement name="STACK">\n        <block type="maze_turn" editable="false" deletable="false">\n          <title name="DIR">turnLeft</title>\n          <next>\n            <block type="maze_moveForward" editable="false" deletable="false">\n              <next>\n                <block type="maze_turn" editable="false" deletable="false">\n                  <title name="DIR">turnRight</title>\n                  <next>\n                    <block type="maze_moveForward" editable="false"\n                      deletable="false">\n                      <next>\n                        <block type="maze_moveForward" editable="false"\n                          deletable="false">\n                          <next>\n                            <block type="maze_turn" editable="false"\n                              deletable="false">\n                              <title name="DIR">turnRight</title>\n                              <next>\n                                <block type="maze_moveForward"\n                                  editable="false" deletable="false">\n                                  <next>\n                                    <block type="maze_dig"\n                                      editable="false" deletable="false">\n                                      <next>\n                                        <block type="maze_turn"\n                                          editable="false" deletable="false">\n                                          <title name="DIR">turnLeft</title>\n                                        </block>\n                                      </next>\n                                    </block>\n                                  </next>\n                                </block>\n                              </next>\n                            </block>\n                          </next>\n                        </block>\n                      </next>\n                    </block>\n                  </next>\n                </block>\n              </next>\n            </block>\n          </next>\n        </block>\n      </statement>\n    </block>\n  '):9==level?buf.push('    <block type="procedures_defnoreturn" x="20" y="200" editable="false"\n      deletable="false">\n      <mutation></mutation>\n      <title name="NAME">',escape(a.removeStack({shovelfuls:4})),'</title>\n      <statement name="STACK">\n        <block type="maze_turn" editable="false" deletable="false">\n          <title name="DIR">turnLeft</title>\n          <next>\n            <block type="controls_repeat" editable="false" deletable="false">\n              <title name="TIMES">4</title>\n              <statement name="DO">\n                <block type="maze_dig" editable="false"\n                  deletable="false">\n                  <next>\n                    <block type="maze_moveForward" editable="false"\n                      deletable="false"></block>\n                  </next>\n                </block>\n              </statement>\n              <next>\n                <block type="maze_turn" editable="false" deletable="false">\n                  <title name="DIR">turnRight</title>\n                  <next>\n                    <block type="maze_turn" editable="false" deletable="false">\n                      <title name="DIR">turnRight</title>\n                      <next>\n                        <block type="controls_repeat" editable="false"\n                          deletable="false">\n                          <title name="TIMES">4</title>\n                          <statement name="DO">\n                            <block type="maze_moveForward" editable="false"\n                              deletable="false"></block>\n                          </statement>\n                          <next>\n                            <block type="maze_turn" editable="false"\n                              deletable="false">\n                              <title name="DIR">turnLeft</title>\n                            </block>\n                          </next>\n                        </block>\n                      </next>\n                    </block>\n                  </next>\n                </block>\n              </next>\n            </block>\n          </next>\n        </block>\n      </statement>\n    </block>\n  '):10==level?buf.push('    <block type="procedures_defnoreturn" x="20" y="200" editable="false"\n      deletable="false">\n      <mutation></mutation>\n      <title name="NAME">',escape(a.removeStack({shovelfuls:4})),'</title>\n      <statement name="STACK">\n        <block type="maze_turn" editable="false" deletable="false">\n          <title name="DIR">turnLeft</title>\n          <next>\n            <block type="controls_repeat" editable="false" deletable="false">\n              <title name="TIMES">4</title>\n              <statement name="DO">\n                <block type="maze_dig" editable="false"\n                  deletable="false">\n                  <next>\n                    <block type="maze_moveForward" editable="false"\n                      deletable="false"></block>\n                  </next>\n                </block>\n              </statement>\n              <next>\n                <block type="maze_turn" editable="false" deletable="false">\n                  <title name="DIR">turnRight</title>\n                  <next>\n                    <block type="maze_turn" editable="false" deletable="false">\n                      <title name="DIR">turnRight</title>\n                      <next>\n                        <block type="controls_repeat" editable="false"\n                          deletable="false">\n                          <title name="TIMES">4</title>\n                          <statement name="DO">\n                            <block type="maze_moveForward" editable="false"\n                              deletable="false"></block>\n                          </statement>\n                          <next>\n                            <block type="maze_turn" editable="false"\n                              deletable="false">\n                              <title name="DIR">turnLeft</title>\n                            </block>\n                          </next>\n                        </block>\n                      </next>\n                    </block>\n                  </next>\n                </block>\n              </next>\n            </block>\n          </next>\n        </block>\n      </statement>\n    </block>\n    <block type="procedures_defnoreturn" x="300" y="200" editable="false"\n      deletable="false">\n      <mutation></mutation>\n      <title name="NAME">',escape(a.fillStack({shovelfuls:2})),'</title>\n      <statement name="STACK">\n        <block type="maze_turn" editable="false" deletable="false">\n          <title name="DIR">turnLeft</title>\n          <next>\n            <block type="controls_repeat" editable="false" deletable="false">\n              <title name="TIMES">2</title>\n              <statement name="DO">\n                <block type="maze_fill" editable="false"\n                  deletable="false">\n                  <next>\n                    <block type="maze_moveForward" editable="false"\n                      deletable="false"></block>\n                  </next>\n                </block>\n              </statement>\n              <next>\n                <block type="maze_turn" editable="false" deletable="false">\n                  <title name="DIR">turnRight</title>\n                  <next>\n                    <block type="maze_turn" editable="false" deletable="false">\n                      <title name="DIR">turnRight</title>\n                      <next>\n                        <block type="controls_repeat" editable="false"\n                          deletable="false">\n                          <title name="TIMES">2</title>\n                          <statement name="DO">\n                            <block type="maze_moveForward" editable="false"\n                              deletable="false"></block>\n                          </statement>\n                          <next>\n                            <block type="maze_turn" editable="false"\n                              deletable="false">\n                              <title name="DIR">turnLeft</title>\n                            </block>\n                          </next>\n                        </block>\n                      </next>\n                    </block>\n                  </next>\n                </block>\n              </next>\n            </block>\n          </next>\n        </block>\n      </statement>\n    </block>\n  '):11==level&&buf.push('    <block type="procedures_defnoreturn" x="20" y="200" editable="false"\n      deletable="false">\n      <mutation></mutation>\n      <title name="NAME">',escape(a.removeAndAvoidTheCow()),'</title>\n      <statement name="STACK">\n        <block type="maze_dig" editable="false" deletable="false">\n          <next>\n            <block type="maze_turn" editable="false" deletable="false">\n              <title name="DIR">turnLeft</title>\n              <next>\n                <block type="maze_moveForward" editable="false"\n                  deletable="false">\n                  <next>\n                    <block type="maze_turn" editable="false" deletable="false">\n                      <title name="DIR">turnRight</title>\n                      <next>\n                        <block type="maze_moveForward" editable="false"\n                          deletable="false">\n                          <next>\n                            <block type="maze_moveForward" editable="false"\n                              deletable="false">\n                              <next>\n                                <block type="maze_turn" editable="false"\n                                  deletable="false">\n                                  <title name="DIR">turnRight</title>\n                                  <next>\n                                    <block type="maze_moveForward"\n                                      editable="false" deletable="false">\n                                      <next>\n                                        <block type="maze_turn"\n                                          editable="false" deletable="false">\n                                          <title name="DIR">turnLeft\n                                          </title>\n                                        </block>\n                                      </next>\n                                    </block>\n                                  </next>\n                                </block>\n                              </next>\n                            </block>\n                          </next>\n                        </block>\n                      </next>\n                    </block>\n                  </next>\n                </block>\n              </next>\n            </block>\n          </next>\n        </block>\n      </statement>\n    </block>\n  '),buf.push("")):3==page&&(buf.push("  "),1==level?buf.push('    <block type="maze_moveForward" x="70" y="70">\n      <next>\n        <block type="maze_turn">\n          <title name="DIR">turnLeft</title>\n          <next>\n            <block type="maze_moveForward">\n              <next>\n                <block type="maze_dig">\n                  <next>\n                    <block type="maze_turn">\n                      <title name="DIR">turnRight</title>\n                      <next>\n                        <block type="maze_moveForward">\n                          <next>\n                            <block type="maze_fill"></block>\n                          </next>\n                        </block>\n                      </next>\n                    </block>\n                  </next>\n                </block>\n              </next>\n            </block>\n          </next>\n        </block>\n      </next>\n    </block>\n  '):2==level?buf.push('    <block type="maze_moveForward" x="70" y="70">\n      <next>\n        <block type="maze_moveForward">\n          <next>\n            <block type="maze_moveForward">\n              <next>\n                <block type="maze_moveForward">\n                  <next>\n                    <block type="maze_dig"></block>\n                  </next>\n                </block>\n              </next>\n            </block>\n          </next>\n        </block>\n      </next>\n    </block>\n  '):3==level?buf.push('    <block type="maze_moveForward" x="70" y="70">\n      <next>\n        <block type="maze_turn">\n          <title name="DIR">turnLeft</title>\n          <next>\n            <block type="maze_moveForward">\n              <next>\n                <block type="controls_repeat">\n                  <title name="TIMES">10</title>\n                  <statement name="DO">\n                    <block type="maze_dig"></block>\n                  </statement>\n                  <next>\n                    <block type="maze_turn">\n                      <title name="DIR">turnRight</title>\n                      <next>\n                        <block type="maze_moveForward">\n                          <next>\n                            <block type="maze_turn">\n                              <title name="DIR">turnLeft</title>\n                              <next>\n                                <block type="maze_moveForward">\n                                  <next>\n                                    <block type="controls_repeat">\n                                      <title name="TIMES">10</title>\n                                      <statement name="DO">\n                                        <block type="maze_dig"></block>\n                                      </statement>\n                                    </block>\n                                  </next>\n                                </block>\n                              </next>\n                            </block>\n                          </next>\n                        </block>\n                      </next>\n                    </block>\n                  </next>\n                </block>\n              </next>\n            </block>\n          </next>\n        </block>\n      </next>\n    </block>\n  '):4==level?buf.push('    <block type="controls_repeat" x="70" y="70">\n      <title name="TIMES">5</title>\n      <statement name="DO">\n        <block type="maze_moveForward"></block>\n      </statement>\n      <next>\n        <block type="maze_untilBlockedOrNotClear">\n          <title name="DIR">pilePresent</title>\n          <statement name="DO">\n            <block type="maze_fill"></block>\n          </statement>\n        </block>\n      </next>\n    </block>\n  '):5==level?buf.push('    <block type="controls_repeat" x="70" y="70">\n      <title name="TIMES">7</title>\n      <statement name="DO">\n        <block type="maze_moveForward">\n          <next>\n            <block type="maze_dig">\n              <next>\n                <block type="maze_turn">\n                  <title name="DIR">turnLeft</title>\n                  <next>\n                    <block type="maze_moveForward">\n                      <next>\n                        <block type="maze_turn">\n                          <title name="DIR">turnRight</title>\n                        </block>\n                      </next>\n                    </block>\n                  </next>\n                </block>\n              </next>\n            </block>\n          </next>\n        </block>\n      </statement>\n    </block>\n  '):6==level?buf.push('    <block type="controls_repeat" x="70" y="70">\n      <title name="TIMES">7</title>\n      <statement name="DO">\n        <block type="maze_moveForward">\n          <next>\n            <block type="karel_if">\n              <title name="DIR">pilePresent</title>\n              <statement name="DO">\n                <block type="maze_dig"></block>\n              </statement>\n              <next>\n                <block type="maze_turn">\n                  <title name="DIR">turnLeft</title>\n                  <next>\n                    <block type="maze_moveForward">\n                      <next>\n                        <block type="maze_turn">\n                          <title name="DIR">turnRight</title>\n                        </block>\n                      </next>\n                    </block>\n                  </next>\n                </block>\n              </next>\n            </block>\n          </next>\n        </block>\n      </statement>\n    </block>\n  '):7==level?buf.push('    <block type="procedures_callnoreturn" x="20" y="70"\n      editable="false" deletable="false">\n      <mutation name="',escape(a.removeSquare()),'"></mutation>\n    </block>\n    <block type="procedures_defnoreturn" x="20" y="200" editable="false" deletable="false">\n      <mutation></mutation>\n      <title name="NAME">',escape(a.removeSquare()),'</title>\n      <statement name="STACK">\n        <block type="controls_repeat">\n          <title name="TIMES">4</title>\n          <statement name="DO">\n            <block type="controls_repeat">\n              <title name="TIMES">2</title>\n              <statement name="DO">\n                <block type="maze_moveForward">\n                  <next>\n                    <block type="maze_dig"></block>\n                  </next>\n                </block>\n              </statement>\n              <next>\n                <block type="maze_turn">\n                  <title name="DIR">turnLeft</title>\n                </block>\n              </next>\n            </block>\n          </statement>\n        </block>\n      </statement>\n    </block>\n  '):8==level?buf.push('    <block type="procedures_callnoreturn" x="20" y="70">\n      <mutation name="',escape(a.fillSquare()),'"></mutation>\n      <next>\n        <block type="controls_repeat">\n          <title name="TIMES">5</title>\n          <statement name="DO">\n            <block type="maze_moveForward"></block>\n          </statement>\n          <next>\n            <block type="procedures_callnoreturn">\n              <mutation name="',escape(a.removeSquare()),'"></mutation>\n            </block>\n          </next>\n        </block>\n      </next>\n    </block>\n    <block type="procedures_defnoreturn" deletable="false"\n      editable="false" x="20" y="250">\n      <mutation></mutation>\n      <title name="NAME">',escape(a.removeSquare()),'</title>\n      <statement name="STACK">\n        <block type="controls_repeat">\n          <title name="TIMES">4</title>\n          <statement name="DO">\n            <block type="controls_repeat">\n              <title name="TIMES">2</title>\n              <statement name="DO">\n                <block type="maze_moveForward">\n                  <next>\n                    <block type="maze_dig"></block>\n                  </next>\n                </block>\n              </statement>\n              <next>\n                <block type="maze_turn">\n                  <title name="DIR">turnLeft</title>\n                </block>\n              </next>\n            </block>\n          </statement>\n        </block>\n      </statement>\n    </block>\n    <block type="procedures_defnoreturn" deletable="false"\n      editable="false" x="350" y="250">\n      <mutation></mutation>\n      <title name="NAME">',escape(a.fillSquare()),'</title>\n      <statement name="STACK">\n        <block type="controls_repeat">\n          <title name="TIMES">4</title>\n          <statement name="DO">\n            <block type="controls_repeat">\n              <title name="TIMES">2</title>\n              <statement name="DO">\n                <block type="maze_moveForward">\n                  <next>\n                    <block type="maze_fill"></block>\n                  </next>\n                </block>\n              </statement>\n              <next>\n                <block type="maze_turn">\n                  <title name="DIR">turnLeft</title>\n                </block>\n              </next>\n            </block>\n          </statement>\n        </block>\n      </statement>\n    </block>\n  '):9==level&&buf.push('    <block type="controls_for" inline="true" x="20" y="70">\n      <title name="VAR">counter</title>\n      <value name="FROM">\n        <block type="math_number">\n          <title name="NUM">1</title>\n        </block>\n      </value>\n      <value name="TO">\n        <block type="math_number">\n          <title name="NUM">6</title>\n        </block>\n      </value>\n      <value name="BY">\n        <block type="math_number">\n          <title name="NUM">1</title>\n        </block>\n      </value>\n      <statement name="DO">\n        <block type="procedures_callnoreturn" inline="false">\n          <mutation name="',escape(a.removePile()),'">\n            <arg name="',escape(a.heightParameter()),'"></arg>\n          </mutation>\n          <value name="ARG0">\n            <block type="math_number">\n              <title name="NUM">1</title>\n            </block>\n          </value>\n          <next>\n            <block type="maze_moveForward"></block>\n          </next>\n        </block>\n      </statement>\n    </block>\n    <block type="procedures_defnoreturn" x="20" y="250" editable="false" deletable="false">\n      <mutation>\n        <arg name="',escape(a.heightParameter()),'"></arg>\n      </mutation>\n      <title name="NAME">',escape(a.removePile()),'</title>\n      <statement name="STACK">\n        <block type="controls_repeat_ext" inline="true">\n          <value name="TIMES">\n            <block type="math_number">\n              <title name="NUM">1</title>\n            </block>\n          </value>\n          <statement name="DO">\n            <block type="maze_dig"></block>\n          </statement>\n        </block>\n      </statement>\n    </block>\n  '),
buf.push("")),buf.push("")}();return buf.join("")};return function(a){return t(a,require("ejs").filters)}}()},{"./locale":"/home/ubuntu/staging/apps/build/js/maze/locale.js",ejs:"/home/ubuntu/staging/apps/node_modules/ejs/lib/ejs.js"}],"/home/ubuntu/staging/apps/build/js/maze/extraControlRows.html.ejs":[function(require,module,exports){module.exports=function(){var t=function anonymous(locals,filters,escape){escape=escape||function(a){return String(a).replace(/&(?!\w+;)/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")};var buf=[];with(locals||{})!function(){buf.push("");var a=require("./locale");buf.push('\n<div id="spelling-table-wrapper">\n  <table id="spelling-table" class="float-right">\n    <tr>\n      <td class="spellingTextCell">',escape(a.word()),':</td>\n      <td class="spellingButtonCell">\n        <button id="searchWord" class="spellingButton" disabled>\n          '),buf.push('\n          <img src="',escape(assetUrl("media/1x1.gif")),'"/>',escape(searchWord),'\n        </button>\n      </td>\n    </tr>\n    <tr>\n      <td class="spellingTextCell">',escape(a.youSpelled()),':</td>\n      <td class="spellingButtonCell">\n        <button id="currentWord" class="spellingButton" disabled>\n          '),buf.push('\n          <img src="',escape(assetUrl("media/1x1.gif")),'"><span id="currentWordContents"></span>\n        </button>\n      </td>\n    </tr>\n  </table>\n</div>\n')}();return buf.join("")};return function(a){return t(a,require("ejs").filters)}}()},{"./locale":"/home/ubuntu/staging/apps/build/js/maze/locale.js",ejs:"/home/ubuntu/staging/apps/node_modules/ejs/lib/ejs.js"}],"/home/ubuntu/staging/apps/build/js/maze/executionInfo.js":[function(a,b,c){"use strict";function d(a){if(0===a.length)return!0;if(1===a.length){var b=a[0];if(1===b.length&&"finish"===b[0].command)return!0}return!1}var e=a("../utils"),f=e.getLodash(),g=function(a){a=a||{},this.terminated_=!1,this.terminationValue_=null,this.steps_=[],this.ticks=a.ticks||1/0,this.collection_=null};b.exports=g,g.prototype.terminateWithValue=function(a){this.terminated_||(this.terminationValue_=a),this.terminated_=!0},g.prototype.isTerminated=function(){return this.terminated_},g.prototype.terminationValue=function(){return this.terminationValue_},g.prototype.queueAction=function(a,b){var c={command:a,blockId:b};this.collection_?this.collection_.push(c):this.steps_.push([c])},g.prototype.getActions=function(a){var b=[];return a?(b.push(this.steps_.shift()),d(this.steps_)&&b.push(this.steps_.splice(0))):b.push(this.steps_.splice(0)),f.flatten(b)},g.prototype.stepsRemaining=function(){return this.steps_.length>0},g.prototype.collectActions=function(){if(this.collection_)throw new Error("Already collecting");this.collection_=[]},g.prototype.stopCollecting=function(){if(!this.collection_)throw new Error("Not currently collecting");this.steps_.push(this.collection_),this.collection_=null},g.prototype.checkTimeout=function(){this.ticks--<0&&this.terminateWithValue(1/0)}},{"../utils":"/home/ubuntu/staging/apps/build/js/utils.js"}],"/home/ubuntu/staging/apps/build/js/maze/dropletConfig.js":[function(a,b,c){"use strict";a("./locale");b.exports.blocks=[{func:"moveForward",category:"Movement"},{func:"turnLeft",category:"Movement"},{func:"turnRight",category:"Movement"}],b.exports.categories={Movement:{color:"red",blocks:[]}}},{"./locale":"/home/ubuntu/staging/apps/build/js/maze/locale.js"}],"/home/ubuntu/staging/apps/build/js/maze/controls.html.ejs":[function(require,module,exports){module.exports=function(){var t=function anonymous(locals,filters,escape){escape=escape||function(a){return String(a).replace(/&(?!\w+;)/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")};var buf=[];with(locals||{})!function(){buf.push("");var a=require("./locale");buf.push('\n\n<button id="stepButton" class="launch ',escape(showStepButton?"":"hide"),' float-right">\n  '),buf.push('\n  <img src="',escape(assetUrl("media/1x1.gif")),'">',escape(a.step()),"\n</button>\n\n")}();return buf.join("")};return function(a){return t(a,require("ejs").filters)}}()},{"./locale":"/home/ubuntu/staging/apps/build/js/maze/locale.js",ejs:"/home/ubuntu/staging/apps/node_modules/ejs/lib/ejs.js"}],"/home/ubuntu/staging/apps/build/js/maze/blocks.js":[function(a,b,c){"use strict";var d=a("./locale"),e=a("../locale"),f=a("../codegen"),g=a("../block_utils"),h=a("./mazeUtils");c.install=function(b,c){var i=c.skin,j=b.Generator.get("JavaScript");b.JavaScript=j,h.isBeeSkin(i.id)&&a("./beeBlocks").install(b,c);var k={DIRECTION_CONFIGS:{West:{letter:e.directionWestLetter(),image:i.leftArrow,tooltip:d.moveWestTooltip()},East:{letter:e.directionEastLetter(),image:i.rightArrow,tooltip:d.moveEastTooltip()},North:{letter:e.directionNorthLetter(),image:i.upArrow,tooltip:d.moveNorthTooltip()},South:{letter:e.directionSouthLetter(),image:i.downArrow,tooltip:d.moveSouthTooltip()}},generateBlocksForAllDirections:function(){k.generateBlocksForDirection("North"),k.generateBlocksForDirection("South"),k.generateBlocksForDirection("West"),k.generateBlocksForDirection("East")},generateBlocksForDirection:function(a){j["maze_move"+a]=k.generateCodeGenerator(a),b.Blocks["maze_move"+a]=k.generateMoveBlock(a)},generateMoveBlock:function(a){var c=k.DIRECTION_CONFIGS[a];return{helpUrl:"",init:function(){this.setHSV(184,1,.74),this.appendDummyInput().appendTitle(new b.FieldLabel(c.letter,{fixedSize:{width:12,height:18}})).appendTitle(new b.FieldImage(c.image)),this.setPreviousStatement(!0),this.setNextStatement(!0),this.setTooltip(c.tooltip)}}},generateCodeGenerator:function(a){return function(){return"Maze.move"+a+"('block_id_"+this.id+"');\n"}}};k.generateBlocksForAllDirections(),g.generateSimpleBlock(b,j,{name:"maze_moveForward",helpUrl:"http://code.google.com/p/blockly/wiki/Move",title:d.moveForward(),tooltip:d.moveForwardTooltip(),functionName:"Maze.moveForward"}),g.generateSimpleBlock(b,j,{name:"maze_fill",helpUrl:"http://code.google.com/p/blockly/wiki/PutDown",title:d.fill(),tooltip:d.fillTooltip(),functionName:"Maze.fill"}),g.generateSimpleBlock(b,j,{name:"maze_dig",helpUrl:"http://code.google.com/p/blockly/wiki/PickUp",title:d.dig(),tooltip:d.digTooltip(),functionName:"Maze.dig"}),b.Blocks.maze_move={helpUrl:"http://code.google.com/p/blockly/wiki/Move",init:function(){this.setHSV(184,1,.74),this.appendDummyInput().appendTitle(new b.FieldDropdown(this.DIRECTIONS),"DIR"),this.setPreviousStatement(!0),this.setNextStatement(!0),this.setTooltip(d.moveTooltip())}},b.Blocks.maze_move.DIRECTIONS=[[d.moveForward(),"moveForward"],[d.moveBackward(),"moveBackward"]],j.maze_move=function(){var a=this.getTitleValue("DIR");return"Maze."+a+"('block_id_"+this.id+"');\n"},b.Blocks.maze_turn={helpUrl:"http://code.google.com/p/blockly/wiki/Turn",init:function(){this.setHSV(184,1,.74),this.appendDummyInput().appendTitle(new b.FieldDropdown(this.DIRECTIONS),"DIR"),this.setPreviousStatement(!0),this.setNextStatement(!0),this.setTooltip(d.turnTooltip())}},b.Blocks.maze_turn.DIRECTIONS=[[d.turnLeft()+" ","turnLeft"],[d.turnRight()+" ","turnRight"]],j.maze_turn=function(){var a=this.getTitleValue("DIR");return"Maze."+a+"('block_id_"+this.id+"');\n"},b.Blocks.maze_isPath={helpUrl:"",init:function(){this.setHSV(196,1,.79),this.setOutput(!0,b.BlockValueType.NUMBER),this.appendDummyInput().appendTitle(new b.FieldDropdown(this.DIRECTIONS),"DIR"),this.setTooltip(d.isPathTooltip())}},b.Blocks.maze_isPath.DIRECTIONS=[[d.ifPathAhead(),"isPathForward"],[d.pathLeft()+" ","isPathLeft"],[d.pathRight()+" ","isPathRight"]],j.maze_isPath=function(){var a="Maze."+this.getTitleValue("DIR")+"()";return[a,j.ORDER_FUNCTION_CALL]},b.Blocks.maze_if={helpUrl:"",init:function(){this.setHSV(196,1,.79),this.appendDummyInput().appendTitle(new b.FieldDropdown(this.DIRECTIONS),"DIR"),this.setInputsInline(!0),this.appendStatementInput("DO").appendTitle(d.doCode()),this.setTooltip(d.ifTooltip()),this.setPreviousStatement(!0),this.setNextStatement(!0)}},b.Blocks.maze_if.DIRECTIONS=b.Blocks.maze_isPath.DIRECTIONS,j.maze_if=function(){var a="Maze."+this.getTitleValue("DIR")+"('block_id_"+this.id+"')",b=j.statementToCode(this,"DO"),c="if ("+a+") {\n"+b+"}\n";return c},b.Blocks.maze_ifElse={helpUrl:"",init:function(){this.setHSV(196,1,.79),this.appendDummyInput().appendTitle(new b.FieldDropdown(this.DIRECTIONS),"DIR"),this.setInputsInline(!0),this.appendStatementInput("DO").appendTitle(d.doCode()),this.appendStatementInput("ELSE").appendTitle(d.elseCode()),this.setTooltip(d.ifelseTooltip()),this.setPreviousStatement(!0),this.setNextStatement(!0)}},b.Blocks.maze_ifElse.DIRECTIONS=b.Blocks.maze_isPath.DIRECTIONS,j.maze_ifElse=function(){var a="Maze."+this.getTitleValue("DIR")+"('block_id_"+this.id+"')",b=j.statementToCode(this,"DO"),c=j.statementToCode(this,"ELSE"),d="if ("+a+") {\n"+b+"} else {\n"+c+"}\n";return d},b.Blocks.karel_if={helpUrl:"",init:function(){this.setHSV(196,1,.79),this.appendDummyInput().appendTitle(d.ifCode()),this.appendDummyInput().appendTitle(new b.FieldDropdown(this.DIRECTIONS),"DIR"),this.setInputsInline(!0),this.appendStatementInput("DO").appendTitle(d.doCode()),this.setTooltip(d.ifTooltip()),this.setPreviousStatement(!0),this.setNextStatement(!0)}},j.karel_if=function(){var a="Maze."+this.getTitleValue("DIR")+"('block_id_"+this.id+"')",b=j.statementToCode(this,"DO"),c="if ("+a+") {\n"+b+"}\n";return c},b.Blocks.karel_if.DIRECTIONS=[[d.pilePresent(),"pilePresent"],[d.holePresent(),"holePresent"],[d.pathAhead(),"isPathForward"]],b.Blocks.karel_ifElse={helpUrl:"",init:function(){this.setHSV(196,1,.79),this.appendDummyInput().appendTitle(d.ifCode()),this.appendDummyInput().appendTitle(new b.FieldDropdown(this.DIRECTIONS),"DIR"),this.setInputsInline(!0),this.appendStatementInput("DO").appendTitle(d.doCode()),this.appendStatementInput("ELSE").appendTitle(d.elseCode()),this.setTooltip(d.ifelseTooltip()),this.setPreviousStatement(!0),this.setNextStatement(!0)}},j.karel_ifElse=function(){var a="Maze."+this.getTitleValue("DIR")+"('block_id_"+this.id+"')",b=j.statementToCode(this,"DO"),c=j.statementToCode(this,"ELSE"),d="if ("+a+") {\n"+b+"} else {\n"+c+"}\n";return d},b.Blocks.karel_ifElse.DIRECTIONS=b.Blocks.karel_if.DIRECTIONS,b.Blocks.maze_whileNotClear={helpUrl:"http://code.google.com/p/blockly/wiki/Repeat",init:function(){this.setHSV(322,.9,.95),this.appendDummyInput().appendTitle(new b.FieldDropdown(this.DIRECTIONS),"DIR"),this.appendStatementInput("DO").appendTitle(d.doCode()),this.setPreviousStatement(!0),this.setNextStatement(!0),this.setTooltip(d.whileTooltip())}},j.maze_whileNotClear=function(){var a="Maze."+this.getTitleValue("DIR")+"('block_id_"+this.id+"')",b=j.statementToCode(this,"DO");return b=f.loopTrap()+b,"while ("+a+") {\n"+b+"}\n"},b.Blocks.maze_whileNotClear.DIRECTIONS=[[d.whileMsg()+" "+d.pilePresent(),"pilePresent"],[d.whileMsg()+" "+d.holePresent(),"holePresent"]],b.Blocks.maze_untilBlocked={helpUrl:"http://code.google.com/p/blockly/wiki/Repeat",init:function(){this.setHSV(322,.9,.95),this.appendDummyInput().appendTitle(d.repeatUntilBlocked()),this.appendStatementInput("DO").appendTitle(d.doCode()),this.setPreviousStatement(!0),this.setNextStatement(!0),this.setTooltip(d.whileTooltip())}},j.maze_untilBlocked=function(){var a="Maze.isPathForward('block_id_"+this.id+"')",b=j.statementToCode(this,"DO");return b=f.loopTrap()+b,"while ("+a+") {\n"+b+"}\n"},b.Blocks.maze_forever={helpUrl:"http://code.google.com/p/blockly/wiki/Repeat",init:function(){this.setHSV(322,.9,.95),this.appendDummyInput().appendTitle(d.repeatUntil()).appendTitle(new b.FieldImage(i.maze_forever,35,35)),this.appendStatementInput("DO").appendTitle(d.doCode()),this.setPreviousStatement(!0),this.setTooltip(d.whileTooltip())}},j.maze_forever=function(){var a=j.statementToCode(this,"DO");return a=f.loopTrap()+f.loopHighlight("Maze",this.id)+a,"while (Maze.notFinished()) {\n"+a+"}\n"},b.Blocks.maze_untilBlockedOrNotClear={helpUrl:"http://code.google.com/p/blockly/wiki/Repeat",init:function(){this.setHSV(322,.9,.95),this.appendDummyInput().appendTitle(new b.FieldDropdown(this.DIRECTIONS),"DIR"),this.appendStatementInput("DO").appendTitle(d.doCode()),this.setPreviousStatement(!0),this.setNextStatement(!0),this.setTooltip(d.whileTooltip())}},j.maze_untilBlockedOrNotClear=function(){var a="Maze."+this.getTitleValue("DIR")+"('block_id_"+this.id+"')",b=j.statementToCode(this,"DO");return b=f.loopTrap()+b,"while ("+a+") {\n"+b+"}\n"},b.Blocks.maze_untilBlockedOrNotClear.DIRECTIONS=[[d.whileMsg()+" "+d.pilePresent(),"pilePresent"],[d.whileMsg()+" "+d.holePresent(),"holePresent"],[d.repeatUntilBlocked(),"isPathForward"]],delete b.Blocks.procedures_defreturn,delete b.Blocks.procedures_ifreturn}},{"../block_utils":"/home/ubuntu/staging/apps/build/js/block_utils.js","../codegen":"/home/ubuntu/staging/apps/build/js/codegen.js","../locale":"/home/ubuntu/staging/apps/build/js/locale.js","./beeBlocks":"/home/ubuntu/staging/apps/build/js/maze/beeBlocks.js","./locale":"/home/ubuntu/staging/apps/build/js/maze/locale.js","./mazeUtils":"/home/ubuntu/staging/apps/build/js/maze/mazeUtils.js"}],"/home/ubuntu/staging/apps/build/js/maze/beeItemDrawer.js":[function(a,b,c){"use strict";function d(a,b,c,e){this.__base=d.superPrototype,f.call(this,a,""),this.skin_=b,this.initialDirt_=c,this.bee_=e,this.honeyImages_=[],this.nectarImages_=[],this.svg_=null,this.pegman_=null,this.clouded_=a.map(function(a){return[]})}function e(a,b,c,d){var e=document.getElementsByClassName("pegman-location")[0],f=document.getElementById("svgMaze"),j=2,k=2,l=document.createElementNS(h,"text");return l.setAttribute("x",(c+1)*i-j),l.setAttribute("y",(b+1)*i-k),l.setAttribute("id",g(a,b,c)),l.setAttribute("class","bee-counter-text"),l.appendChild(document.createTextNode(d)),f.insertBefore(l,e),l}var f=a("./dirtDrawer");a("../utils");var g=a("./mazeUtils").cellId,h=a("../constants").SVG_NS,i=50;d.inherits(f),b.exports=d,d.prototype.updateItemImage=function(a,b,c){var d={href:null,unclippedWidth:i};this.initialDirt_[a][b]<0?d.href=this.skin_.honey:this.initialDirt_[a][b]>0&&(d.href=this.flowerImageHref_(a,b));var e,f=this.bee_.isCloudable(a,b),g=!c&&f,h=f&&this.clouded_[a][b]===!0,j=99,k=98,l=Math.abs(this.dirtMap_[a][b]);e=g?"":c||d.href!==this.skin_.purpleFlower?l===j?"":l===k?"0":""+l:"?",d.href&&(this.updateImageWithIndex_("beeItem",a,b,d,0),this.updateCounter_("counter",a,b,e),g?(this.showCloud_(a,b),this.clouded_[a][b]=!0):h&&(this.hideCloud_(a,b),this.clouded_[a][b]=!1))},d.prototype.updateCounter_=function(a,b,c,d){var f=document.getElementById(g(a,b,c));f||(f=e(a,b,c,d)),f.firstChild.nodeValue=d},d.prototype.createCounterImage_=function(a,b,c,d){var e=a+(b+1),f=document.createElementNS(h,"image");return f.setAttribute("id",e),f.setAttribute("width",i),f.setAttribute("height",i),f.setAttribute("y",c*i),f.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",d),this.getSvg_().insertBefore(f,this.getPegmanElement_()),f},d.prototype.flowerImageHref_=function(a,b){return this.bee_.isRedFlower(a,b)?this.skin_.redFlower:this.skin_.purpleFlower},d.prototype.updateHoneyCounter=function(a){for(var b=0;a>b;b++){this.honeyImages_[b]||(this.honeyImages_[b]=this.createCounterImage_("honey",b,1,this.skin_.honey));var c=i;a>8&&(c=7*i/(a-1)),this.honeyImages_[b].setAttribute("x",b*c)}for(b=0;b<this.honeyImages_.length;b++)this.honeyImages_[b].setAttribute("display",a>b?"block":"none")},d.prototype.updateNectarCounter=function(a){for(var b=a.length,c=0;b>c;c++){var d=this.flowerImageHref_(a[c].row,a[c].col);this.nectarImages_[c]||(this.nectarImages_[c]=this.createCounterImage_("nectar",c,0,d));var e=i;b>8&&(e=7*i/(b-1)),this.nectarImages_[c].setAttribute("x",c*e),this.nectarImages_[c].setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",d)}for(c=0;c<this.nectarImages_.length;c++)this.nectarImages_[c].setAttribute("display",b>c?"block":"none")},d.prototype.getSvg_=function(){return this.svg_||(this.svg_=document.getElementById("svgMaze")),this.svg_},d.prototype.getPegmanElement_=function(){return this.pegman_||(this.pegman_=document.getElementsByClassName("pegman-location")[0]),this.pegman_},d.prototype.showCloud_=function(a,b){var c={href:this.skin_.cloud,unclippedWidth:50};this.updateImageWithIndex_("cloud",a,b,c,0),this.displayCloudAnimation_(a,b,!1)},d.prototype.hideCloud_=function(a,b){var c=document.getElementById(g("cloud",a,b));c&&c.setAttribute("visibility","hidden"),this.displayCloudAnimation_(a,b,!0)},d.prototype.displayCloudAnimation_=function(a,b,c){var d=g("cloudAnimation",a,b),e=document.getElementById(d);if(!e){var f=document.getElementsByClassName("pegman-location")[0],j=document.getElementById("svgMaze");e=document.createElementNS(h,"image"),e.setAttribute("id",d),e.setAttribute("height",i),e.setAttribute("width",i),e.setAttribute("x",b*i),e.setAttribute("y",a*i),e.setAttribute("visibility","hidden"),j.appendChild(e,f)}e.setAttribute("visibility",c?"visible":"hidden"),e.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",this.skin_.cloudAnimation)},d.prototype.addCheckerboardTile=function(a,b,c){var d=document.getElementById("svgMaze"),e=document.createElementNS(h,"rect");if(e.setAttribute("width",i),e.setAttribute("height",i),e.setAttribute("x",b*i),e.setAttribute("y",a*i),e.setAttribute("fill","#78bb29"),e.setAttribute("opacity",c?.2:.5),c)d.appendChild(e);else{var f=document.getElementById("tileElement"+(8*a+b));d.insertBefore(e,f)}}},{"../constants":"/home/ubuntu/staging/apps/build/js/constants.js","../utils":"/home/ubuntu/staging/apps/build/js/utils.js","./dirtDrawer":"/home/ubuntu/staging/apps/build/js/maze/dirtDrawer.js","./mazeUtils":"/home/ubuntu/staging/apps/build/js/maze/mazeUtils.js"}],"/home/ubuntu/staging/apps/build/js/maze/dirtDrawer.js":[function(a,b,c){"use strict";function d(a,b,c,d){var e=document.getElementsByClassName("pegman-location")[0],g=document.getElementById("svgMaze"),h=f(a+"Clip",b,c),k=f(a,b,c),l=document.createElementNS(j,"clipPath");l.setAttribute("id",h);var m=document.createElementNS(j,"rect");m.setAttribute("x",c*i),m.setAttribute("y",b*i),m.setAttribute("width",i),m.setAttribute("height",i),l.appendChild(m),g.insertBefore(l,e);var n=document.createElementNS(j,"image");return n.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",d.href),n.setAttribute("height",i),n.setAttribute("width",d.unclippedWidth),n.setAttribute("clip-path","url(#"+h+")"),n.setAttribute("id",k),g.insertBefore(n,e),n}function e(a){var b;return 0===a?b=-1:-g>a?b=0:0>a?b=g+a+1:a>g?b=h-1:a>0&&(b=g+a),b}var f=a("./mazeUtils").cellId,g=10,h=2*g+2,i=50,j=a("../constants").SVG_NS,k=b.exports=function(a,b){this.dirtMap_=a,this.dirtImageInfo_={href:b,unclippedWidth:i*h}};k.prototype.updateItemImage=function(a,b,c){var d=this.dirtMap_[a][b];this.updateImageWithIndex_("dirt",a,b,this.dirtImageInfo_,e(d))},k.prototype.updateImageWithIndex_=function(a,b,c,e,g){var h=0>g,j=document.getElementById(f(a,b,c));if(!j){if(h)return;j=d(a,b,c,e)}j.setAttribute("visibility",h?"hidden":"visible"),h||(j.setAttribute("x",i*(c-g)),j.setAttribute("y",i*b))},k.__testonly__={spriteIndexForDirt:e,createImage:d}},{"../constants":"/home/ubuntu/staging/apps/build/js/constants.js","./mazeUtils":"/home/ubuntu/staging/apps/build/js/maze/mazeUtils.js"}],"/home/ubuntu/staging/apps/build/js/maze/mazeUtils.js":[function(a,b,c){"use strict";c.cellId=function(a,b,c){return a+"_"+b+"_"+c},c.isBeeSkin=function(a){return/bee(_night)?/.test(a)},c.isScratSkin=function(a){return/scrat/.test(a)}},{}],"/home/ubuntu/staging/apps/build/js/maze/beeBlocks.js":[function(a,b,c){"use strict";function d(a,b){a.Blocks.bee_ifOnlyFlower={helpUrl:"",init:function(){this.setHSV(196,1,.79),this.appendDummyInput().appendTitle(h.ifCode()),this.appendDummyInput().appendTitle(h.atFlower()),this.setInputsInline(!0),this.appendStatementInput("DO").appendTitle(h.doCode()),this.setTooltip(h.ifOnlyFlowerTooltip()),this.setPreviousStatement(!0),this.setNextStatement(!0)}},b.bee_ifOnlyFlower=function(){var a="Maze.atFlower('block_id_"+this.id+"')",c=b.statementToCode(this,"DO"),d="if ("+a+") {\n"+c+"}\n";return d}}function e(a,b){a.Blocks.bee_ifFlower={helpUrl:"",init:function(){var b=[[h.atFlower(),"atFlower"],[h.atHoneycomb(),"atHoneycomb"]];this.setHSV(196,1,.79),this.appendDummyInput().appendTitle(h.ifCode()),this.appendDummyInput().appendTitle(new a.FieldDropdown(b),"LOC"),this.setInputsInline(!0),this.appendStatementInput("DO").appendTitle(h.doCode()),this.setTooltip(h.ifFlowerTooltip()),this.setPreviousStatement(!0),this.setNextStatement(!0)}},b.bee_ifFlower=function(){var a="Maze."+this.getTitleValue("LOC")+"('block_id_"+this.id+"')",c=b.statementToCode(this,"DO"),d="if ("+a+") {\n"+c+"}\n";return d}}function f(a,b){a.Blocks.bee_ifElseFlower={helpUrl:"",init:function(){var b=[[h.atFlower(),"atFlower"],[h.atHoneycomb(),"atHoneycomb"]];this.setHSV(196,1,.79),this.appendDummyInput().appendTitle(h.ifCode()),this.appendDummyInput().appendTitle(new a.FieldDropdown(b),"LOC"),this.setInputsInline(!0),this.appendStatementInput("DO").appendTitle(h.doCode()),this.appendStatementInput("ELSE").appendTitle(h.elseCode()),this.setTooltip(h.ifelseFlowerTooltip()),this.setPreviousStatement(!0),this.setNextStatement(!0)}},b.bee_ifElseFlower=function(){var a="Maze."+this.getTitleValue("LOC")+"('block_id_"+this.id+"')",c=b.statementToCode(this,"DO"),d=b.statementToCode(this,"ELSE"),e="if ("+a+") {\n"+c+"} else {\n"+d+"}\n";return e}}function g(a,b,c,d,e){a.Blocks[c]={helpUrl:"",init:function(){var b,c=this;switch(d){case"if":b=h.ifCode(),this.setHSV(196,1,.79);break;case"ifelse":b=h.ifCode(),this.setHSV(196,1,.79);break;case"while":b=h.whileMsg(),this.setHSV(322,.9,.95);break;default:throw"Unexpcted type for addConditionalComparisonBlock"}this.appendDummyInput().appendTitle(b),this.appendDummyInput().appendTitle(new a.FieldDropdown(e),"ARG1"),this.appendDummyInput().appendTitle(" "),this.appendDummyInput().appendTitle(new a.FieldDropdown(j),"OP"),this.appendDummyInput().appendTitle(" "),this.appendDummyInput().appendTitle(new a.FieldTextInput("0",a.FieldTextInput.numberValidator),"ARG2"),this.setInputsInline(!0),this.appendStatementInput("DO").appendTitle(h.doCode()),"ifelse"===d&&this.appendStatementInput("ELSE").appendTitle(h.elseCode()),this.setPreviousStatement(!0),this.setNextStatement(!0),this.setTooltip(function(){var a=c.getTitleValue("OP");return k[a]})}},b[c]=function(){var a="Maze."+this.getTitleValue("ARG1")+"('block_id_"+this.id+"')",c=this.getTitleValue("OP"),e=("=="===c||"!="===c?Blockly.JavaScript.ORDER_EQUALITY:Blockly.JavaScript.ORDER_RELATIONAL,this.getTitleValue("ARG2")),f=b.statementToCode(this,"DO"),g="";if("ifelse"===d){var h=b.statementToCode(this,"ELSE");g=" else {\n"+h+"}"}var i=d;return"ifelse"===d&&(i="if"),i+" ("+a+" "+c+" "+e+") {\n"+f+"}"+g+"\n"}}var h=a("./locale"),i=(a("../codegen"),a("../block_utils")),j=[["=","=="],["<","<"],[">",">"]],k={"==":Blockly.Msg.LOGIC_COMPARE_TOOLTIP_EQ,"<":Blockly.Msg.LOGIC_COMPARE_TOOLTIP_LT,">":Blockly.Msg.LOGIC_COMPARE_TOOLTIP_GT};c.install=function(a,b){var c=b.skin,j=b.isK1,k=a.Generator.get("JavaScript");a.JavaScript=k,d(a,k),e(a,k),f(a,k),g(a,k,"bee_ifNectarAmount","if",[[h.nectarRemaining(),"nectarRemaining"],[h.honeyAvailable(),"honeyAvailable"]]),g(a,k,"bee_ifelseNectarAmount","ifelse",[[h.nectarRemaining(),"nectarRemaining"],[h.honeyAvailable(),"honeyAvailable"]]),g(a,k,"bee_ifTotalNectar","if",[[h.totalNectar(),"nectarCollected"],[h.totalHoney(),"honeyCreated"]]),g(a,k,"bee_ifelseTotalNectar","ifelse",[[h.totalNectar(),"nectarCollected"],[h.totalHoney(),"honeyCreated"]]),g(a,k,"bee_whileNectarAmount","while",[[h.nectarRemaining(),"nectarRemaining"],[h.honeyAvailable(),"honeyAvailable"]]),i.generateSimpleBlock(a,k,{name:"maze_nectar",helpUrl:"",title:j?h.get():h.nectar(),titleImage:j?c.redFlower:void 0,tooltip:h.nectarTooltip(),functionName:"Maze.getNectar"}),i.generateSimpleBlock(a,k,{name:"maze_honey",helpUrl:"",title:j?h.make():h.honey(),titleImage:j?c.honey:void 0,tooltip:h.honeyTooltip(),functionName:"Maze.makeHoney"})}},{"../block_utils":"/home/ubuntu/staging/apps/build/js/block_utils.js","../codegen":"/home/ubuntu/staging/apps/build/js/codegen.js","./locale":"/home/ubuntu/staging/apps/build/js/maze/locale.js"}],"/home/ubuntu/staging/apps/build/js/maze/api.js":[function(a,b,c){"use strict";function d(a,b){return b===h.constrainDirection4(a+k.LEFT)}function e(a,b){return b===h.constrainDirection4(a+k.RIGHT)}function f(a,b){return Math.abs(a-b)==j.BACKWARD}function g(a,b){Maze.executionInfo.collectActions(),r(a,b),p(j.FORWARD,b),Maze.executionInfo.stopCollecting()}var h=a("./tiles"),i=h.Direction,j=h.MoveDirection,k=h.TurnDirection,l=h.SquareType,m=a("../utils"),n=(a("./bee"),function(a){return m.executeIfConditional(function(){return!Maze.executionInfo.isTerminated()},a)}),o=function(a,b){var c,d,e=Maze.pegmanD+a;switch(h.constrainDirection4(e)){case i.NORTH:c=Maze.map[Maze.pegmanY-1]&&Maze.map[Maze.pegmanY-1][Maze.pegmanX],d="look_north";break;case i.EAST:c=Maze.map[Maze.pegmanY][Maze.pegmanX+1],d="look_east";break;case i.SOUTH:c=Maze.map[Maze.pegmanY+1]&&Maze.map[Maze.pegmanY+1][Maze.pegmanX],d="look_south";break;case i.WEST:c=Maze.map[Maze.pegmanY][Maze.pegmanX-1],d="look_west"}return b&&Maze.executionInfo.queueAction(d,b),c!==l.WALL&&c!==l.OBSTACLE&&void 0!==c},p=function(a,b){if(!o(a,null))return Maze.executionInfo.queueAction("fail_"+(a?"backward":"forward"),b),void Maze.executionInfo.terminateWithValue(!1);var c,d=Maze.pegmanD+a;switch(h.constrainDirection4(d)){case i.NORTH:Maze.pegmanY--,c="north";break;case i.EAST:Maze.pegmanX++,c="east";break;case i.SOUTH:Maze.pegmanY++,c="south";break;case i.WEST:Maze.pegmanX--,c="west"}return Maze.executionInfo.queueAction(c,b),Maze.wordSearch?void Maze.wordSearch.markTileVisited(Maze.pegmanY,Maze.pegmanX,!1):void Maze.checkSuccess()},q=function(a,b){a==k.RIGHT?(Maze.pegmanD+=k.RIGHT,Maze.executionInfo.queueAction("right",b)):(Maze.pegmanD+=k.LEFT,Maze.executionInfo.queueAction("left",b)),Maze.pegmanD=h.constrainDirection4(Maze.pegmanD)},r=function(a,b){var c=Maze.pegmanD;if(f(c,a)){var g=0>c-a,h=g?k.RIGHT:k.LEFT;q(h,b),q(h,b)}else e(c,a)?q(k.RIGHT,b):d(c,a)&&q(k.LEFT,b)};c.moveForward=n(function(a){p(j.FORWARD,a)}),c.moveBackward=n(function(a){p(j.BACKWARD,a)}),c.moveNorth=n(function(a){g(i.NORTH,a)}),c.moveSouth=n(function(a){g(i.SOUTH,a)}),c.moveEast=n(function(a){g(i.EAST,a)}),c.moveWest=n(function(a){g(i.WEST,a)}),c.turnLeft=n(function(a){q(k.LEFT,a)}),c.turnRight=n(function(a){q(k.RIGHT,a)}),c.isPathForward=n(function(a){return o(j.FORWARD,a)}),c.noPathForward=n(function(a){return!o(j.FORWARD,a)}),c.isPathRight=n(function(a){return o(j.RIGHT,a)}),c.isPathBackward=n(function(a){return o(j.BACKWARD,a)}),c.isPathLeft=n(function(a){return o(j.LEFT,a)}),c.pilePresent=n(function(a){var b=Maze.pegmanX,c=Maze.pegmanY;return Maze.dirt_[c][b]>0}),c.holePresent=n(function(a){var b=Maze.pegmanX,c=Maze.pegmanY;return Maze.dirt_[c][b]<0}),c.currentPositionNotClear=n(function(a){var b=Maze.pegmanX,c=Maze.pegmanY;return 0!==Maze.dirt_[c][b]}),c.fill=n(function(a){Maze.executionInfo.queueAction("putdown",a);var b=Maze.pegmanX,c=Maze.pegmanY;Maze.dirt_[c][b]=Maze.dirt_[c][b]+1}),c.dig=n(function(a){Maze.executionInfo.queueAction("pickup",a);var b=Maze.pegmanX,c=Maze.pegmanY;Maze.dirt_[c][b]=Maze.dirt_[c][b]-1}),c.notFinished=n(function(){return!Maze.checkSuccess()}),c.loopHighlight=n(function(a){Maze.executionInfo.queueAction("null",a)}),c.getNectar=n(function(a){Maze.bee.getNectar(a)}),c.makeHoney=n(function(a){Maze.bee.makeHoney(a)}),c.atFlower=n(function(a){var b=Maze.pegmanX,c=Maze.pegmanY;return Maze.executionInfo.queueAction("at_flower",a),Maze.bee.isFlower(c,b,!0)}),c.atHoneycomb=n(function(a){var b=Maze.pegmanX,c=Maze.pegmanY;return Maze.executionInfo.queueAction("at_honeycomb",a),Maze.bee.isHive(c,b,!0)}),c.nectarRemaining=n(function(a){return Maze.executionInfo.queueAction("nectar_remaining",a),Maze.bee.nectarRemaining(!0)}),c.honeyAvailable=n(function(a){return Maze.executionInfo.queueAction("honey_available",a),Maze.bee.honeyAvailable()}),c.nectarCollected=n(function(a){return Maze.executionInfo.queueAction("nectar_collected",a),Maze.bee.nectars_.length}),c.honeyCreated=n(function(a){return Maze.executionInfo.queueAction("honey_created",a),Maze.bee.honey_})},{"../utils":"/home/ubuntu/staging/apps/build/js/utils.js","./bee":"/home/ubuntu/staging/apps/build/js/maze/bee.js","./tiles":"/home/ubuntu/staging/apps/build/js/maze/tiles.js"}],"/home/ubuntu/staging/apps/build/js/maze/tiles.js":[function(a,b,c){"use strict";var d=a("../utils"),e=b.exports;e.Direction={NORTH:0,EAST:1,SOUTH:2,WEST:3},e.SquareType={WALL:0,OPEN:1,START:2,FINISH:3,OBSTACLE:4,STARTANDFINISH:5},e.TurnDirection={LEFT:-1,RIGHT:1},e.MoveDirection={FORWARD:0,RIGHT:1,BACKWARD:2,LEFT:3},e.directionToDxDy=function(a){switch(a){case e.Direction.NORTH:return{dx:0,dy:-1};case e.Direction.EAST:return{dx:1,dy:0};case e.Direction.SOUTH:return{dx:0,dy:1};case e.Direction.WEST:return{dx:-1,dy:0}}throw new Error("Invalid direction value"+a)},e.directionToFrame=function(a){return d.mod(4*a,16)},e.constrainDirection4=function(a){return d.mod(a,4)}},{"../utils":"/home/ubuntu/staging/apps/build/js/utils.js"}],"/home/ubuntu/staging/apps/build/js/maze/bee.js":[function(a,b,c){"use strict";var d=a("../utils"),e=a("./locale"),f=a("../constants.js").TestResults,g=a("../constants.js").BeeTerminationValue,h=-99,i=99,j=-98,k=98,l="FC",m=function(a,b,c){if(this.maze_=a,this.studioApp_=b,this.skin_=c.skin,this.defaultFlowerColor_="redWithNectar"===c.level.flowerType?"red":"purple","purple"===this.defaultFlowerColor_&&"purpleNectarHidden"!==c.level.flowerType)throw new Error("bad flowerType for Bee: "+c.level.flowerType);this.nectarGoal_=c.level.nectarGoal||0,this.honeyGoal_=c.level.honeyGoal||0,this.initialDirt_=d.cloneWithoutFunctions(c.level.initialDirt),this.userChecks_=[]};b.exports=m,m.prototype.reset=function(){this.honey_=0,this.nectars_=[];for(var a=0;a<this.initialDirt_.length;a++){this.userChecks_[a]=[];for(var b=0;b<this.initialDirt_[a].length;b++)this.userChecks_[a][b]={checkedForFlower:!1,checkedForNectar:!1}}this.maze_.gridItemDrawer.updateNectarCounter(this.nectars_),this.maze_.gridItemDrawer.updateHoneyCounter(this.honey_)},m.prototype.finished=function(){return this.honey_<this.honeyGoal_||this.nectars_.length<this.nectarGoal_?!1:this.checkedAllClouded()&&this.checkedAllPurple()?!0:!1},m.prototype.onExecutionFinish=function(){var a=this.maze_.executionInfo;a.isTerminated()||this.finished()||(this.nectars_.length<this.nectarGoal_?a.terminateWithValue(g.INSUFFICIENT_NECTAR):this.honey_<this.honeyGoal_?a.terminateWithValue(g.INSUFFICIENT_HONEY):this.checkedAllClouded()?this.checkedAllPurple()||a.terminateWithValue(g.UNCHECKED_PURPLE):a.terminateWithValue(g.UNCHECKED_CLOUD))},m.prototype.checkedAllClouded=function(){for(var a=0;a<this.initialDirt_.length;a++)for(var b=0;b<this.initialDirt_[a].length;b++)if(this.isCloudable(a,b)&&!this.userChecks_[a][b].checkedForFlower)return!1;return!0},m.prototype.checkedAllPurple=function(){for(var a=0;a<this.initialDirt_.length;a++)for(var b=0;b<this.initialDirt_[a].length;b++)if(this.isPurpleFlower(a,b)&&!this.userChecks_[a][b].checkedForNectar)return!1;return!0},m.prototype.getTestResults=function(a){switch(a){case g.NOT_AT_FLOWER:case g.FLOWER_EMPTY:case g.NOT_AT_HONEYCOMB:case g.HONEYCOMB_FULL:return f.APP_SPECIFIC_FAIL;case g.UNCHECKED_CLOUD:case g.UNCHECKED_PURPLE:case g.INSUFFICIENT_NECTAR:case g.INSUFFICIENT_HONEY:var b=this.studioApp_.getTestResults(!0);return b>=f.TOO_MANY_BLOCKS_FAIL&&(b=f.APP_SPECIFIC_FAIL),b}return this.studioApp_.getTestResults(!1)},m.prototype.getMessage=function(a){switch(a){case g.NOT_AT_FLOWER:return e.notAtFlowerError();case g.FLOWER_EMPTY:return e.flowerEmptyError();case g.NOT_AT_HONEYCOMB:return e.notAtHoneycombError();case g.HONEYCOMB_FULL:return e.honeycombFullError();case g.UNCHECKED_CLOUD:return e.uncheckedCloudError();case g.UNCHECKED_PURPLE:return e.uncheckedPurpleError();
case g.INSUFFICIENT_NECTAR:return e.insufficientNectar();case g.INSUFFICIENT_HONEY:return e.insufficientHoney();default:return null}},m.prototype.isHive=function(a,b,c){return c=c||!1,c&&(this.userChecks_[a][b].checkedForFlower=!0),this.initialDirt_[a][b]<0},m.prototype.isFlower=function(a,b,c){return c=c||!1,c&&(this.userChecks_[a][b].checkedForFlower=!0),this.initialDirt_[a][b]>0},m.prototype.isCloudable=function(a,b){return this.maze_.map[a][b]===l},m.prototype.isRedFlower=function(a,b){if(!this.isFlower(a,b))return!1;var c=/^R|P$/.exec(this.maze_.map[a][b]);return c&&"R"===c[0]?!0:c||"red"!==this.defaultFlowerColor_?!1:!0},m.prototype.isPurpleFlower=function(a,b){return this.isFlower(a,b,!1)&&!this.isRedFlower(a,b)},m.prototype.hiveGoal=function(a,b){var c=this.initialDirt_[a][b];return c>=-1?0:Math.abs(c)-1},m.prototype.hiveRemainingCapacity=function(a,b){if(!this.isHive(a,b))return 0;var c=this.maze_.dirt_[a][b];return c===h?1/0:c===j?0:-c},m.prototype.flowerRemainingCapacity=function(a,b){var c=this.maze_.dirt_[a][b];return 0>c?0:c===i?1/0:c===k?0:c},m.prototype.madeHoneyAt=function(a,b){this.maze_.dirt_[a][b]!==h&&(this.maze_.dirt_[a][b]+=1),this.honey_+=1},m.prototype.gotNectarAt=function(a,b){this.maze_.dirt_[a][b]!==i&&(this.maze_.dirt_[a][b]-=1),this.nectars_.push({row:a,col:b})},m.prototype.getNectar=function(a){var b=this.maze_.pegmanX,c=this.maze_.pegmanY;return this.isFlower(c,b)?0===this.flowerRemainingCapacity(c,b)?void this.maze_.executionInfo.terminateWithValue(g.FLOWER_EMPTY):(this.maze_.executionInfo.queueAction("nectar",a),void this.gotNectarAt(c,b)):void this.maze_.executionInfo.terminateWithValue(g.NOT_AT_FLOWER)},m.prototype.makeHoney=function(a){var b=this.maze_.pegmanX,c=this.maze_.pegmanY;return this.isHive(c,b)?0===this.hiveRemainingCapacity(c,b)?void this.maze_.executionInfo.terminateWithValue(g.HONEYCOMB_FULL):(this.maze_.executionInfo.queueAction("honey",a),void this.madeHoneyAt(c,b)):void this.maze_.executionInfo.terminateWithValue(g.NOT_AT_HONEYCOMB)},m.prototype.nectarRemaining=function(a){a=a||!1;var b=this.maze_.pegmanX,c=this.maze_.pegmanY;return a&&(this.userChecks_[c][b].checkedForNectar=!0),this.flowerRemainingCapacity(c,b)},m.prototype.honeyAvailable=function(){var a=this.maze_.pegmanX,b=this.maze_.pegmanY;return this.hiveRemainingCapacity(b,a)},m.prototype.playAudio_=function(a){this.studioApp_&&this.studioApp_.playAudio(a)},m.prototype.animateGetNectar=function(){var a=this.maze_.pegmanX,b=this.maze_.pegmanY;if(this.maze_.dirt_[b][a]<=0)throw new Error("Shouldn't be able to end up with a nectar animation if there was no nectar to be had");this.playAudio_("nectar"),this.gotNectarAt(b,a),this.maze_.gridItemDrawer.updateItemImage(b,a,!0),this.maze_.gridItemDrawer.updateNectarCounter(this.nectars_)},m.prototype.animateMakeHoney=function(){var a=this.maze_.pegmanX,b=this.maze_.pegmanY;if(!this.isHive(b,a))throw new Error("Shouldn't be able to end up with a honey animation if we arent at a hive or dont have nectar");this.playAudio_("honey"),this.madeHoneyAt(b,a),this.maze_.gridItemDrawer.updateItemImage(b,a,!0),this.maze_.gridItemDrawer.updateHoneyCounter(this.honey_)}},{"../constants.js":"/home/ubuntu/staging/apps/build/js/constants.js","../utils":"/home/ubuntu/staging/apps/build/js/utils.js","./locale":"/home/ubuntu/staging/apps/build/js/maze/locale.js"}],"/home/ubuntu/staging/apps/build/js/maze/locale.js":[function(a,b,c){"use strict";b.exports=window.blockly.maze_locale},{}]},{},["/home/ubuntu/staging/apps/build/js/maze/main.js"]);