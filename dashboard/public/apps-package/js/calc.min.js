require=function a(b,c,d){function e(g,h){if(!c[g]){if(!b[g]){var i="function"==typeof require&&require;if(!h&&i)return i(g,!0);if(f)return f(g,!0);var j=new Error("Cannot find module '"+g+"'");throw j.code="MODULE_NOT_FOUND",j}var k=c[g]={exports:{}};b[g][0].call(k.exports,function(a){var c=b[g][1][a];return e(c?c:a)},k,k.exports,a,b,c,d)}return c[g].exports}for(var f="function"==typeof require&&require,g=0;g<d.length;g++)e(d[g]);return e}({46:[function(a){var b=a("../appMain");window.Calc=a("./calc");var c=a("./blocks"),d=a("../skins"),e=a("./levels");window.calcMain=function(a){a.skinsModule=d,a.blocksModule=c,b(window.Calc,e,a)}},{"../appMain":5,"../skins":197,"./blocks":37,"./calc":38,"./levels":45}],38:[function(a,b){"use strict";function c(a,b,c){a=d(a),b=d(b),c=E.valueOr(c,!1);var e;return a?(e=b?a.getTokenListDiff(b):a.getTokenList(c),H.stripOuterParensFromTokenList(e)):null}function d(a){if(null===a||void 0===a)return a;if(a instanceof H)return a;if(a instanceof J)return a.expression;if(y.isSchemeNumber(a)||"string"==typeof a)return new H(a);throw new Error("unexpected")}function e(a){var b=a.computeEquation();if(b&&b.expression){var d,e=0,f=a.computesFunctionCall();if(!f&&!a.computesSingleVariable()){var g=a.sortedEquations();g.forEach(function(a){if(a.isFunction()&&g.length>1)throw new Error("Calc doesn't support goal with multiple functions or mixed functions/vars");d=c(a),q("answerExpression",a.signature,d,e++)})}d=c(b);var h=a.evaluate();if(h.err)throw h.err;f&&(d.push(new K(" = ",!1)),d.push(new K(h.result,!1))),q("answerExpression",b.signature,d,e)}}function f(a){if(a){if(0!==Blockly.mainBlockSpace.getTopBlocks().length)throw new Error("generateTargetExpression shouldn't be called with blocksif we already have blocks in the workspace");x.loadBlocks(a)}var b=new I(Blockly.mainBlockSpace.getTopBlocks());return Blockly.mainBlockSpace.getTopBlocks().forEach(function(a){a.dispose()}),b}function g(a,b){return{result:N.FAILURE,testResults:M.APP_SPECIFIC_FAIL,message:a,failedInput:E.valueOr(b,null)}}function h(a){return a instanceof H.DivideByZeroError?g(A.divideByZeroError(),null):(E.isInfiniteRecursionError(a)||console.log("Unexpected error: "+a),{result:N.FAILURE,testResults:M.LEVEL_INCOMPLETE_FAIL,message:null,failedInput:null})}function i(a){return a===M.QUESTION_MARKS_IN_NUMBER_FIELD||a===M.EMPTY_FUNCTIONAL_BLOCK||a===M.EXTRA_TOP_BLOCKS_FAIL}function j(){o();var a=R.userSet.clone(),b=R.targetSet,d=a.computeEquation();if(null!==d&&null!==d.expression){var e=k(a,b);if(!a.computesSingleConstant()){var f=b&&b.computeEquation(),g=c(d,f);(a.hasVariablesOrFunctions()||d.expression.depth()>0)&&(g=g.concat(l(a,b))),q("userExpression",null,g,e++,"errorToken"),g=m(a,b),g&&g.length&&q("userExpression",null,g,e++,"errorToken")}}}function k(a,b){var d=!b.computesFunctionCall()&&!b.computesSingleVariable();if(b.computesSingleVariable()&&null!==R.failedInput){var e=(a.getConstants(),b.getConstants());e.forEach(function(b,c){var d=b.name,e=a.getEquation(d);e.expression.setValue(R.failedInput[c])})}var f,g=0;return a.sortedEquations().forEach(function(a){var e=d?b.getEquation(a.name):null;f=c(a,e),q("userExpression",a.signature,f,g++,"errorToken")}),g}function l(a,b){var d=a.evaluate();if(d.err)return d.err instanceof H.DivideByZeroError||E.isInfiniteRecursionError(d.err)||console.log("Unexpected error: "+d.err),[];var e=d.result,f=e;return b.computesSingleVariable()?[new K(" = ",!1),new K(e,R.failedInput)]:(null!==b.computeEquation()&&(f=b.evaluate().result),c(" = ").concat(c(e,f)))}function m(a,b){if(null===R.failedInput||!b.computesFunctionCall())return[];for(var d=a.computeEquation(),e=d.expression.clone(),f=0;f<e.numChildren();f++)e.setChildValue(f,R.failedInput[f]);var g=a.evaluateWithExpression(e);if(g.err){if(!(g.err instanceof H.DivideByZeroError))throw g.err;g.result=""}var h=g.result;return c(e).concat(new K(" = ",!1)).concat(new K(h,!0))}function n(){R.animating=!1,s()}function o(){for(var a=document.getElementById("userExpression"),b=a.childNodes.length-1;b>=0;b--)a.removeChild(a.childNodes[b])}function p(a){var b=R.userSet.computeEquation();if(!b)throw new Error("require user expression");var d=b.expression;if(!d)return!0;var e=!1;if(R.userSet.hasVariablesOrFunctions()||R.targetSet.hasVariablesOrFunctions())throw new Error("Can't animate if either user/target have functions/vars");o();for(var f=d.clone(),g=f,h=0,i=0;a>=i&&!e;i++){var j;if(h===a)j=c(f,g);else if(h+1===a){var k=f.getDeepestOperation();k&&x.highlight("block_id_"+k.blockId),j=c(f,null,!0)}else j=c(f);var l=!1;i>0&&(l=!0,j=c("= ").concat(j)),q("userExpression",null,j,h,"markedToken",l),g=f.clone(),f.isDivZero()&&(e=!0),f.collapse()?h++:i===h+1&&(e=!0)}return e}function q(a,b,c,d,e,f){var g=document.getElementById(a),h=document.createElementNS(Blockly.SVG_NS,"g");g.appendChild(h);var i,j=0;b&&(i=new K(b+" = ",!1).renderToParent(h,j,null),j+=i);for(var k=0,l=0;l<c.length;l++)i=c[l].renderToParent(h,j,e),0===l&&(k=i),j+=i;var m;if(f){var n=Blockly.getRelativeXY(g.childNodes[0]);m=parseFloat(n.x)-k}else m=(P-h.getBoundingClientRect().width)/2;var o=d*Q;h.setAttribute("transform","translate("+m+", "+o+")")}function r(a){for(var b=document.getElementById(a).cloneNode(!0),c=b.getElementsByTagName("*"),d=0;d<c.length;d++){var e=c[d];e.removeAttribute("id")}return b}function s(){if(!R.waitingForReport&&!R.animating){u.extraTopBlocks=A.extraTopBlocks();var a=null;i(R.testResults)||(a=r("svgCalc"));var b={app:"calc",skin:v.id,response:R.response,level:u,feedbackType:R.testResults,tryAgainText:u.freePlay?z.keepPlaying():void 0,appStrings:{reinfFeedbackMsg:A.reinfFeedbackMsg()},appDiv:a};R.message&&!u.edit_blocks&&(b.message=R.message),x.displayFeedback(b)}}function t(a){var b=document.getElementById("runButton");b.disabled=!1,R.response=a,R.waitingForReport=!1,s()}var u,v,w=b.exports,x=a("../StudioApp").singleton,w=b.exports,y=a("./js-numbers/js-numbers.js"),z=a("../../locale/current/common"),A=a("../../locale/current/calc"),B=(a("../skins"),a("./levels"),a("../templates/page.html")),C=a("../dom"),D=a("../block_utils"),E=a("../utils"),F=E.getLodash(),G=a("../timeoutList"),H=a("./expressionNode"),I=a("./equationSet"),J=a("./equation"),K=a("./token"),L=a("./inputIterator"),M=x.TestResults,N=x.ResultType;x.setCheckForEmptyBlocks(!1);var O=400,P=400,Q=24,R={targetSet:null,userSet:null,animating:!1,waitingForReport:!1,response:null,message:null,result:null,testResults:null,failedInput:null};w.appState_=R;var S=2e3;w.init=function(b){v=b.skin,u=b.level,u.scale&&void 0!==u.scale.stepSpeed&&(S=u.scale.stepSpeed),b.grayOutUndeletableBlocks=!0,b.forceInsertTopBlock="functional_compute",b.enableShowCode=!1,b.html=B({assetUrl:x.assetUrl,data:{localeDirection:x.localeDirection(),visualization:a("./visualization.html")(),controls:a("./controls.html")({assetUrl:x.assetUrl}),blockUsed:void 0,idealBlockNumber:void 0,editCode:u.editCode,blockCounterClass:"block-counter-default",inputOutputTable:u.inputOutputTable}}),b.loadAudio=function(){x.loadAudio(v.winSound,"win"),x.loadAudio(v.startSound,"start"),x.loadAudio(v.failureSound,"failure")},b.afterInject=function(){var a=document.getElementById("svgCalc");a.setAttribute("width",P),a.setAttribute("height",O),u.freePlay&&document.getElementById("goalHeader").setAttribute("visibility","hidden"),Blockly.BROKEN_CONTROL_POINTS=!1,Blockly.JavaScript.addReservedWords("Calc,code");var c=u.solutionBlocks;u.solutionBlocks&&""!==u.solutionBlocks&&(c=D.forceInsertTopBlock(u.solutionBlocks,b.forceInsertTopBlock)),R.targetSet=f(c),e(R.targetSet);var d=document.getElementById("visualizationColumn");d.style.width="400px";var g=document.getElementById("resetButton");C.addClickTouchEvent(g,w.resetButtonClick)},x.init(b)},x.runButtonClick=function(){x.toggleRunReset("reset"),Blockly.mainBlockSpace.traceOn(!0),x.attempts++,w.execute()},w.resetButtonClick=function(){R.animating=!1,R.waitingForReport=!1,R.response=null,R.message=null,R.result=null,R.testResults=null,R.failedInput=null,G.clearTimeouts(),o()},w.evaluateFunction_=function(a,b){var c={result:N.UNSET,testResults:M.NO_TESTS_RUN,message:void 0,failedInput:null},d=a.computeEquation().expression.clone(),e=b.computeEquation(),f=e&&e.expression;if(!d.hasSameSignature(f)||!b.computesFunctionCall()){c.result=N.FAILURE,c.testResults=M.LEVEL_INCOMPLETE_FAIL;var g=d.getValue();return b.getEquation(g)||(c.message=A.missingFunctionError({functionName:g})),c}var i=a.evaluateWithExpression(d),j=b.evaluateWithExpression(d);if(i.err||j.err)return h(i.err||j.err);if(!y.equals(i.result,j.result))return c.result=N.FAILURE,c.testResults=M.LEVEL_INCOMPLETE_FAIL,c;for(var k=F.range(1,101).concat(F.range(-0,-101,-1)),l=d.numChildren(),m=new L(k,l),n=function(a,b){d.setChildValue(b,a)};m.remaining()>0&&!c.failedInput;){var o=m.next();if(o.forEach(n),i=a.evaluateWithExpression(d),j=b.evaluateWithExpression(d),i.err||j.err)return h(i.err||j.err);y.equals(i.result,j.result)||(c.failedInput=F.clone(o))}return c.failedInput?(c.result=N.FAILURE,c.testResults=M.APP_SPECIFIC_FAIL,c.message=A.failedInput()):a.computeEquation().expression.isIdenticalTo(b.computeEquation().expression)?(c.result=N.SUCCESS,c.testResults=M.ALL_PASS):(c.result=N.FAILURE,c.testResults=M.APP_SPECIFIC_FAIL,c.message=A.wrongInput()),c},w.evaluateSingleVariable_=function(a,b){var c={result:N.UNSET,testResults:M.NO_TESTS_RUN,message:void 0,failedInput:null};if(!a.computeEquation().expression.isIdenticalTo(b.computeEquation().expression))return g(A.levelIncompleteError());var d=a.getConstants();if(0===d.length)throw new Error("Unexpected: single variable with no constants");if(1!==d.length)throw new Error("No support for multiple constants");for(var e=b.getConstants(),f=e.map(function(a){return a.name}),i=0;i<d.length;i++)if(-1===f.indexOf(d[i].name))return g(A.missingVariableX({"var":d[i].name}));var j=b.evaluate();if(j.err)return h(j.err);var k=j.result,l=a.clone(),m=b.clone(),n=function(a,b){var c=d[b].name;l.getEquation(c).expression.setValue(a),m.getEquation(c).expression.setValue(a)};if(j=a.evaluate(),j.err)throw j.err;var o=j.result;if(!y.equals(k,o)){if(d.forEach(function(a,b){var c=a.name,d=m.getEquation(c).expression.evaluate().result;n(d,b)}),j=l.evaluate(),j.err)return h(j.err);if(!y.equals(k,j.result))return g(A.wrongResult())}for(var p=F.range(1,101).concat(F.range(-0,-101,-1)),q=d.length,r=new L(p,q);r.remaining()>0&&!c.failedInput;){var s=r.next();s.forEach(n);var t=l.evaluate(),u=m.evaluate(),v=t.err||u.err;if(v)return h(v);y.equals(t.result,u.result)||(c.failedInput=F.clone(s))}if(c.failedInput){var w=A.wrongOtherValuesX({"var":d[0].name});return g(w,c.failedInput)}return c.result=N.SUCCESS,c.testResults=M.ALL_PASS,c},w.evaluateResults_=function(a,b){var c,d,e,f={result:N.UNSET,testResults:M.NO_TESTS_RUN,message:void 0,failedInput:null};if(a.computesFunctionCall())return w.evaluateFunction_(a,b);if(a.computesSingleVariable())return w.evaluateSingleVariable_(a,b);if(b.hasVariablesOrFunctions()||a.hasVariablesOrFunctions())return a.isIdenticalTo(b)?(f.result=N.SUCCESS,f.testResults=M.ALL_PASS):a.isEquivalentTo(b)?(f.result=N.FAILURE,f.testResults=M.APP_SPECIFIC_FAIL,f.message=A.equivalentExpression()):(f.result=N.FAILURE,f.testResults=M.LEVEL_INCOMPLETE_FAIL),f;if(d=b.computeEquation(),e=a.computeEquation(),c=a.isIdenticalTo(b))f.result=N.SUCCESS,f.testResults=M.ALL_PASS;else{f.result=N.FAILURE;var g=f.result===N.SUCCESS;f.testResults=x.getTestResults(g),e&&d.expression&&d.expression.isEquivalentTo(e.expression)&&(f.testResults=M.APP_SPECIFIC_FAIL,f.message=A.equivalentExpression())}return f},w.execute=function(){w.generateResults_();var a=Blockly.Xml.blockSpaceToDom(Blockly.mainBlockSpace),b=Blockly.Xml.domToText(a),c={app:"calc",level:u.id,builder:u.builder,result:R.result===N.SUCCESS,testResult:R.testResults,program:encodeURIComponent(b),onComplete:t};return R.waitingForReport=!0,x.report(c),x.playAudio(R.result===N.SUCCESS?"win":"failure"),i(R.testResults)?s():(R.animating=!0,void(R.result===N.SUCCESS&&R.userSet.isAnimatable()&&!u.edit_blocks?w.step(0):(j(),G.setTimeout(function(){n()},S))))},w.generateResults_=function(){if(R.message=void 0,x.hasExtraTopBlocks())return R.result=N.FAILURE,void(R.testResults=M.EXTRA_TOP_BLOCKS_FAIL);if(x.hasUnfilledFunctionalBlock()){R.result=N.FAILURE,R.testResults=M.EMPTY_FUNCTIONAL_BLOCK;var a=F.find(Blockly.mainBlockSpace.getTopBlocks(),function(a){return"functional_compute"===a.type});return void(R.message=a&&!a.getInputTargetBlock("ARG1")?A.emptyComputeBlock():z.emptyFunctionalBlock())}if(x.hasQuestionMarksInNumberField())return R.result=N.FAILURE,void(R.testResults=M.QUESTION_MARKS_IN_NUMBER_FIELD);if(R.userSet=new I(Blockly.mainBlockSpace.getTopBlocks()),R.failedInput=null,R.userSet.hasDivZero())return R.result=N.FAILURE,R.testResults=M.APP_SPECIFIC_FAIL,void(R.message=A.divideByZeroError());if(u.freePlay||u.edit_blocks)R.result=N.SUCCESS,R.testResults=M.FREE_PLAY;else{var b=w.evaluateResults_(R.targetSet,R.userSet);R.result=b.result,R.testResults=b.testResults,R.message=b.message,R.failedInput=b.failedInput}R.testResults!==M.LEVEL_INCOMPLETE_FAIL||R.message||(R.message=A.levelIncompleteError())},w.step=function(a){var b=p(a);G.setTimeout(function(){b?(p(a+1),n()):w.step(a+1)},S)},w.__testonly__={displayGoal:e,displayComplexUserExpressions:j,appState:R}},{"../../locale/current/calc":247,"../../locale/current/common":248,"../StudioApp":4,"../block_utils":26,"../dom":57,"../skins":197,"../templates/page.html":222,"../timeoutList":228,"../utils":243,"./controls.html":39,"./equation":40,"./equationSet":41,"./expressionNode":42,"./inputIterator":43,"./js-numbers/js-numbers.js":44,"./levels":45,"./token":47,"./visualization.html":48}],48:[function(require,module,exports){module.exports=function(){var t=function anonymous(locals,filters,escape){escape=escape||function(a){return String(a).replace(/&(?!\w+;)/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")};var buf=[];with(locals||{})!function(){buf.push("");var a=require("../../locale/current/calc");buf.push('\n\n<svg xmlns="http://www.w3.org/2000/svg" version="1.1" id="svgCalc">\n  <rect x="0" y="0" width="400" height="300" fill="#33ccff"/>\n  <rect x="0" y="300" width="400" height="100" fill="#996633"/>\n  <text x="0" y="30" class="calcHeader">',escape(a.yourExpression()),'</text>\n  <g id="userExpression" class="expr" transform="translate(0, 100)">\n  </g>\n  <text x="0" y="330" class="calcHeader" id="goalHeader">',escape(a.goal()),'</text>\n  <g id="answerExpression" class="expr" transform="translate(0, 350)">\n  </g>\n</svg>\n')}();return buf.join("")};return function(a){return t(a,require("ejs").filters)}}()},{"../../locale/current/calc":247,ejs:264}],45:[function(a,b){var c=(a("../../locale/current/calc"),a("../block_utils"));b.exports={example1:{solutionBlocks:c.calcBlockXml("functional_times",[c.calcBlockXml("functional_plus",[1,2]),c.calcBlockXml("functional_plus",[3,4])]),ideal:1/0,toolbox:c.createToolbox(c.blockOfType("functional_plus")+c.blockOfType("functional_minus")+c.blockOfType("functional_times")+c.blockOfType("functional_dividedby")+c.blockOfType("functional_math_number")+'<block type="functional_math_number_dropdown">  <title name="NUM" config="0,1,2,3,4,5,6,7,8,9,10">???</title></block>'),startBlocks:"",requiredBlocks:"",freePlay:!1},custom:{answer:"",ideal:1/0,toolbox:"",startBlocks:"",requiredBlocks:"",freePlay:!1}}},{"../../locale/current/calc":247,"../block_utils":26}],43:[function(a,b){var c=function(a,b){this.numParams_=b,this.remaining_=Math.pow(a.length,b),this.availableValues_=a,this.indices_=[-1];for(var c=1;b>c;c++)this.indices_[c]=0};b.exports=c,c.prototype.next=function(){if(0===this.remaining_)throw new Error("empty");var a,b=0;do a=!1,this.indices_[b]++,this.indices_[b]===this.availableValues_.length&&(this.indices_[b]=0,b++,a=!0);while(a&&b<this.numParams_);return this.remaining_--,this.indices_.map(function(a){return this.availableValues_[a]},this)},c.prototype.remaining=function(){return this.remaining_}},{}],41:[function(a,b){function c(a){var b;if(!a)return null;var d=a.getChildren()[0];switch(a.type){case"functional_compute":return d?c(d):new f(null,[],null);case"functional_plus":case"functional_minus":case"functional_times":case"functional_dividedby":case"functional_pow":case"functional_sqrt":case"functional_squared":var g=a.getTitles()[0].getValue(),h=["ARG1"];a.getInput("ARG2")&&h.push("ARG2");var i=h.map(function(b){var d=a.getInputTargetBlock(b);return d?c(d).expression:0});return new f(null,[],new e(g,i,a.id));case"functional_math_number":case"functional_math_number_dropdown":var j=a.getTitleValue("NUM")||0;return"???"===j&&(j=0),new f(null,[],new e(parseFloat(j),[],a.id));case"functional_call":b=a.getCallName();var k=Blockly.Procedures.getDefinition(b,Blockly.mainBlockSpace);if(k.isVariable())return new f(null,[],new e(b));for(var l,m,n=[],o=0;l=a.getInput("ARG"+o);o++)m=l.connection.targetBlock(),n.push(m?c(m).expression:new e(0));return new f(null,[],new e(b,n));case"functional_definition":b=a.getTitleValue("NAME");var p=d?c(d).expression:new e(0);return new f(b,a.getVars(),p);case"functional_parameters_get":return new f(null,[],new e(a.getTitleValue("VAR")));case"functional_example":return null;default:throw"Unknown block type: "+a.type}}var d=a("../utils").getLodash(),e=a("./expressionNode"),f=a("./equation"),g=a("./js-numbers/js-numbers"),h=a("../utils"),i=function(a){this.compute_=null,this.equations_=[],a&&a.forEach(function(a){var b=c(a);b&&this.addEquation_(b)},this)};b.exports=i,i.prototype.clone=function(){var a=new i;return a.compute_=null,this.compute_&&(a.compute_=this.compute_.clone()),a.equations_=this.equations_.map(function(a){return a.clone()}),a},i.prototype.addEquation_=function(a){if(a.name){if(this.getEquation(a.name))throw new Error("equation already exists: "+a.name);this.equations_.push(a)}else{if(this.compute_)throw new Error("compute expression already exists");this.compute_=a}},i.prototype.getEquation=function(a){if(null===a)return this.computeEquation();for(var b=0;b<this.equations_.length;b++)if(this.equations_[b].name===a)return this.equations_[b];return null},i.prototype.computeEquation=function(){return this.compute_},i.prototype.hasVariablesOrFunctions=function(){return this.equations_.length>0},i.prototype.computesFunctionCall=function(){if(!this.compute_)return!1;var a=this.compute_.expression;return a.isFunctionCall()},i.prototype.computesSingleVariable=function(){if(!this.compute_)return!1;var a=this.compute_.expression;return a.isVariable()},i.prototype.computesSingleConstant=function(){if(!this.compute_||1!==this.equations_.length)return!1;var a=this.equations_[0],b=this.compute_.expression;return b.isVariable()&&a.expression.isNumber()&&b.getValue()===a.name},i.prototype.isAnimatable=function(){return this.compute_?this.hasVariablesOrFunctions()?!1:0===this.compute_.expression.depth()?!1:!0:!1},i.prototype.getConstants=function(){return this.equations_.filter(function(a){return 0===a.params.length&&a.expression.isNumber()})},i.prototype.isIdenticalTo=function(a){if(this.equations_.length!==a.equations_.length)return!1;var b=a.computeEquation().expression;if(!this.compute_.expression.isIdenticalTo(b))return!1;for(var c=0;c<this.equations_.length;c++){var d=this.equations_[c],e=a.getEquation(d.name);if(!e||!d.expression.isIdenticalTo(e.expression))return!1}return!0},i.prototype.isEquivalentTo=function(a){if(this.equations_.length!==a.equations_.length)return!1;var b=a.computeEquation().expression;if(!this.compute_.expression.isEquivalentTo(b))return!1;for(var c=0;c<this.equations_.length;c++){var d=this.equations_[c],e=a.getEquation(d.name);if(!e||!d.expression.isEquivalentTo(e.expression))return!1}return!0},i.prototype.sortedEquations=function(){return this.equations_.sort(function(a,b){return a.name.localeCompare(b.name)}),this.equations_},i.prototype.hasDivZero=function(){var a=this.evaluate();return a.err&&a.err instanceof e.DivideByZeroError},i.prototype.evaluate=function(){return this.evaluateWithExpression(this.compute_.expression)},i.prototype.evaluateWithExpression=function(a){if(0===this.equations_.length)return a.evaluate();var b,c,f,i={},j=function(a){c[a]=g.makeFloat(1)};do{b=!1;for(var k=0;k<this.equations_.length;k++){var l=this.equations_[k];if(l.isFunction()){if(i[l.name])continue;if(c=d.clone(i),c[l.name]={variables:l.params,expression:l.expression},l.params.forEach(j),f=l.expression.evaluate(c),f.err){if(f.err instanceof e.DivideByZeroError||h.isInfiniteRecursionError(f.err))return{err:f.err};continue}b=!0,i[l.name]={variables:l.params,expression:l.expression}}else if(void 0===i[l.name])if(f=l.expression.evaluate(i),f.err){if(f.err instanceof e.DivideByZeroError)return{err:f.err}}else b=!0,i[l.name]=f.result}}while(b);return a.evaluate(i)},i.__testonly__={getEquationFromBlock:c}},{"../utils":243,"./equation":40,"./expressionNode":42,"./js-numbers/js-numbers":44}],42:[function(a,b){function c(a){this.message=a||""}function d(a){return"number"==typeof a?h.makeFloat(a):a}var e=a("../utils"),f=e.getLodash(),g=a("./token"),h=a("./js-numbers/js-numbers"),i={ARITHMETIC:1,FUNCTION_CALL:2,VARIABLE:3,NUMBER:4,EXPONENTIAL:5},j=function(a,b,c){if(this.value_=d(a),this.blockId_=c,void 0===b&&(b=[]),!Array.isArray(b))throw new Error("Expected array");if(this.children_=b.map(function(a){return a instanceof j||(a=new j(a)),a}),this.isNumber()&&b.length>0)throw new Error("Can't have args for number ExpressionNode");if(this.isArithmetic()&&2!==b.length)throw new Error("Arithmetic ExpressionNode needs 2 args")};b.exports=j,j.DivideByZeroError=c,j.prototype.getType_=function(){return-1!==["+","-","*","/"].indexOf(this.value_)?i.ARITHMETIC:-1!==["pow","sqrt","sqr"].indexOf(this.value_)?i.EXPONENTIAL:"string"==typeof this.value_?0===this.children_.length?i.VARIABLE:i.FUNCTION_CALL:h.isSchemeNumber(this.value_)?i.NUMBER:void 0},j.prototype.isArithmetic=function(){return this.getType_()===i.ARITHMETIC},j.prototype.isFunctionCall=function(){return this.getType_()===i.FUNCTION_CALL},j.prototype.isVariable=function(){return this.getType_()===i.VARIABLE},j.prototype.isNumber=function(){return this.getType_()===i.NUMBER},j.prototype.isExponential=function(){return this.getType_()===i.EXPONENTIAL},j.prototype.isDivZero=function(){var a=this.getChildValue(1);return"/"===this.getValue()&&h.isSchemeNumber(a)&&h.equals(a,0)},j.prototype.clone=function(){var a=this.children_.map(function(a){return a.clone()});return new j(this.value_,a,this.blockId_)},j.prototype.evaluate=function(a,b){try{a=a||{},b=b||{};var f,g=this.getType_();if(g===i.VARIABLE){var j=e.valueOr(b[this.value_],a[this.value_]);if(void 0===j)throw new Error("No mapping for variable during evaluation");var k=this.clone();return k.setValue(j),k.evaluate(a)}if(g===i.FUNCTION_CALL){var l=e.valueOr(b[this.value_],a[this.value_]);if(void 0===l)throw new Error("No mapping for function during evaluation");if(!l.variables||!l.expression)throw new Error("Bad mapping for: "+this.value_);if(l.variables.length!==this.children_.length)throw new Error("Bad mapping for: "+this.value_);var m={};return l.variables.forEach(function(c,d){var f=this.children_[d].evaluate(a,b);if(f.err)throw f.err;var g=f.result;m[c]=e.valueOr(b[g],g)},this),l.expression.evaluate(a,m)}if(g===i.NUMBER)return{result:this.value_};if(g!==i.ARITHMETIC&&g!==i.EXPONENTIAL)throw new Error("Unexpected");var n=this.children_[0].evaluate(a,b);if(n.err)throw n.err;if(n=n.result.toExact(),1===this.children_.length){switch(this.value_){case"sqrt":f=h.sqrt(n);break;case"sqr":f=h.sqr(n);break;default:throw new Error("Unknown operator: "+this.value_)}return{result:d(f)}}var o=this.children_[1].evaluate(a,b);if(o.err)throw o.err;switch(o=o.result.toExact(),this.value_){case"+":f=h.add(n,o);break;case"-":f=h.subtract(n,o);break;case"*":f=h.multiply(n,o);break;case"/":if(h.equals(o,0))throw new c;f=h.divide(n,o);break;case"pow":f=h.expt(n,o);break;default:throw new Error("Unknown operator: "+this.value_)}return{result:d(f)}}catch(p){return{err:p}}},j.prototype.depth=function(){for(var a=0,b=0;b<this.children_.length;b++)a=Math.max(a,1+this.children_[b].depth());return a},j.prototype.getDeepestOperation=function(){if(0===this.children_.length)return null;for(var a=null,b=0,c=0;c<this.children_.length;c++){var d=this.children_[c].depth();d>b&&(b=d,a=this.children_[c])}return 0===b?this:a.getDeepestOperation()},j.prototype.collapse=function(){var a=this.getDeepestOperation();if(null===a)return!1;if(this===a){var b=this.evaluate();return b.err?!1:(this.value_=b.result,this.children_=[],!0)}return a.collapse()},j.prototype.getTokenListDiff=function(a){var b,c=a&&this.hasSameValue_(a)&&this.children_.length===a.children_.length,d=this.getType_();if(0===this.children_.length)return[new g(this.value_,!c)];var e=function(b){return this.children_[b].getTokenListDiff(c&&a.children_[b])}.bind(this);if(d===i.ARITHMETIC)return b=[new g("(",!c)],b.push([e(0),new g(" "+this.value_+" ",!c),e(1)]),b.push(new g(")",!c)),f.flatten(b);if("sqr"===this.value_)return f.flatten([new g("(",!c),e(0),new g(" ^ 2",!c),new g(")",!c)]);if("pow"===this.value_)return f.flatten([new g("(",!c),e(0),new g(" ^ ",!c),e(1),new g(")",!c)]);b=[new g(this.value_,a&&this.value_!==a.value_),new g("(",!c)];for(var h=this.children_.length,k=0;h>k;k++){k>0&&b.push(new g(",",!c));var l=e(k);1===h&&j.stripOuterParensFromTokenList(l),b.push(l)}return b.push(new g(")",!c)),f.flatten(b)},j.prototype.getTokenList=function(a){if(!a)return this.getTokenListDiff(this);if(this.depth()<=1)return this.getTokenListDiff(null);if(this.getType_()!==i.ARITHMETIC&&this.getType_()!==i.EXPONENTIAL)throw new Error("Unsupported");var b=!1;2===this.children_.length&&(b=this.children_[1].depth()>this.children_[0].depth());var c=new g("(",!1),d=new g(")",!1);"sqrt"===this.value_&&(c=new g("sqrt",!1),d=null);var e=[c,this.children_[0].getTokenList(a&&!b)];return this.children_.length>1&&e.push([new g(" "+this.value_+" ",!1),this.children_[1].getTokenList(a&&b)]),d&&e.push(d),f.flatten(e)},j.prototype.hasSameValue_=function(a){return a?this.isNumber()?h.equals(this.value_,a.value_):this.value_===a.value_:!1},j.prototype.isIdenticalTo=function(a){if(!a||!this.hasSameValue_(a)||this.children_.length!==a.children_.length)return!1;for(var b=0;b<this.children_.length;b++)if(!this.children_[b].isIdenticalTo(a.children_[b]))return!1;return!0},j.prototype.hasSameSignature=function(a){return a?this.getType_()!==i.FUNCTION_CALL||a.getType_()!==i.FUNCTION_CALL?!1:this.value_!==a.value_?!1:this.children_.length!==a.children_.length?!1:!0:!1},j.prototype.isEquivalentTo=function(a){if(this.getType_()!==i.ARITHMETIC)return this.isIdenticalTo(a);if(!a||this.value_!==a.value_)return!1;var b=this.children_[0],c=this.children_[1],d=a.children_[0],e=a.children_[1];return b.isEquivalentTo(d)?c.isEquivalentTo(e):b.isEquivalentTo(e)?c.isEquivalentTo(d):!1},j.prototype.numChildren=function(){return this.children_.length},j.prototype.getValue=function(){return this.value_.toString()},j.prototype.setValue=function(a){var b=this.getType_();if(b!==i.VARIABLE&&b!==i.NUMBER)throw new Error("Can't modify value");this.value_=b===i.NUMBER?d(a):a},j.prototype.getChildValue=function(a){return void 0===this.children_[a]?void 0:this.children_[a].value_},j.prototype.setChildValue=function(a,b){return this.children_[a].setValue(b)},j.prototype.debug=function(){return 0===this.children_.length?this.isNumber()?this.value_.toFixnum().toString():this.value_.toString():"("+this.value_+" "+this.children_.map(function(a){return a.debug()}).join(" ")+")"},j.stripOuterParensFromTokenList=function(a){return a.length>=2&&a[0].isParenthesis()&&a[a.length-1].isParenthesis()&&(a.splice(-1),a.splice(0,1)),a}},{"../utils":243,"./js-numbers/js-numbers":44,"./token":47}],47:[function(a,b){var c=a("./js-numbers/js-numbers"),d="Â ",e=function(a,b){this.val_=a,this.marked_=b,this.nonRepeated_=null,this.repeated_=null,this.setStringRepresentation_()};b.exports=e,e.prototype.isParenthesis=function(){return"("===this.val_||")"===this.val_},e.prototype.renderToParent=function(a,b,c){var e,f;e=document.createElementNS(Blockly.SVG_NS,"text");var g=document.createElementNS(Blockly.SVG_NS,"tspan");return g.textContent=this.nonRepeated_.replace(/ /g,d+d),e.appendChild(g),this.repeated_&&(g=document.createElementNS(Blockly.SVG_NS,"tspan"),g.setAttribute("style","text-decoration: overline"),g.textContent=this.repeated_.replace(/ /g,d+d),e.appendChild(g)),a.appendChild(e),f=void 0!==e.offsetWidth?e.offsetWidth:e.getBoundingClientRect().width,e.setAttribute("x",b),this.marked_&&c&&e.setAttribute("class",c),f},e.prototype.setStringRepresentation_=function(){if(!c.isSchemeNumber(this.val_)||"number"==typeof this.val_)return void(this.nonRepeated_=this.val_);if(this.val_.isInteger())return void(this.nonRepeated_=e.numberWithCommas_(this.val_.toFixnum()));var a=c.toExact(this.val_.numerator()),b=c.toExact(this.val_.denominator()),d=c.toRepeatingDecimal(a,b);return d[2]&&"0"!==d[2]?(this.nonRepeated_=e.numberWithCommas_(d[0])+"."+d[1],void(this.repeated_=d[2])):void(this.nonRepeated_=e.numberWithCommas_(this.val_.toFixnum()))},e.numberWithCommas_=function(a){var b=a.toString().split(".");return b[0]=b[0].replace(/\B(?=(\d{3})+(?!\d))/g,","),b.join(".")}},{"./js-numbers/js-numbers":44}],44:[function(a,b){var c={};b.exports=c,function(){"use strict";function a(a){return new RegExp("^([+-]?["+a+"]+)/(["+a+"]+)$")}function b(a,b){var c="[+-]",d="[+-]?",e=g(a),f="["+h(a)+"]",i="["+e+"]+",j=i+"/"+i,k=d+j,l=i,m="["+e+"]*\\.["+e+"]+",n="["+e+"]+\\.["+e+"]*",o="(?:"+l+"|"+m+"|"+n+")",p="(?:inf.0|nan.0|inf.f|nan.f)",q="(?:"+o+"|"+j+")",r=q+"(?:"+f+d+i+")?",s="(?:"+r+"|"+p+")",t="(?:"+d+r+"|"+c+p+")",u=new RegExp("^("+k+")("+c+j+"?)i$"),v=new RegExp("^("+t+")?("+c+s+"?)i$"),w=new RegExp("^("+t+")@("+t+")$"),x=b.match(u),y=b.match(v),z=b.match(w);return x?x:y?y:z?z:!1}function d(a){return new RegExp("^[+-]?["+a+"]+$")}function e(a){var b="(["+a+"]*)\\.(["+a+"]+)",c="(["+a+"]+)\\.(["+a+"]*)";return new RegExp("^(?:([+-]?)("+b+"|"+c+"))$")}function f(a,b){var c="["+a+"]+",d="["+a+"]*\\.["+a+"]+",e="["+a+"]+\\.["+a+"]*";return new RegExp("^(?:([+-]?(?:"+c+"|"+d+"|"+e+"))["+b+"]([+-]?["+a+"]+))$")}function g(a){return 2===a?"01":8===a?"0-7":10===a?"0-9":16===a?"0-9a-fA-F":sc("digitsForRadix: invalid radix",this,a)}function h(a){return 2===a||8===a||10===a?"defsl":16===a?"sl":sc("expMarkForRadix: invalid radix",this,a)}function i(a){this.defaultp=function(){return 0==a},this.exactp=function(){return 1==a},this.inexactp=function(){return 2==a}}function j(a,c,d,e){var f=b(c,a);return f?ce.makeInstance(k(f[1]||"0",c,d),k("+"===f[2]?"1":"-"===f[2]?"-1":f[2],c,d)):k(a,c,d,e)}function k(b,c,i,j){var m=b.match(a(g(c)));if(m)return Ud.makeInstance(k(m[1],c,i),k(m[2],c,i));if("+nan.0"===b||"-nan.0"===b)return Vd.nan;if("+inf.0"===b)return Vd.inf;if("-inf.0"===b)return Vd.neginf;if("-0.0"===b)return _d;var n=b.match(e(g(c)));if(n){var o=void 0!==n[3]?n[3]:n[5],p=void 0!==n[4]?n[4]:n[6];return l(n[1],o,p,c,i)}var q=b.match(f(g(c),h(c)));if(q){var r=k(q[1],c,i),s=k(q[2],c,i);return Hc(r,Rc(c,s))}if(b.match(d(g(c)))){var t=parseInt(b,c);return xd(t)?re(b):i.intAsExactp()?t:Vd.makeInstance(t)}return j?(0===b.length&&sc("no digits"),void sc("bad number: "+b,this)):!1}function l(a,b,c,d,e){var a="-"==a?-1:1,f=""===b?0:e.intAsExactp()?m(b,d):parseInt(b,d),g=""===c?0:e.intAsExactp()?m(c,d):parseInt(c,d),h=e.intAsExactp()?Rc(d,c.length):Math.pow(d,c.length),i=""===c?0:e.intAsExactp()?Jc(g,h):g/h,j=function(a){return"number"==typeof a?Vd.makeInstance(a):a.toInexact()};return e.floatAsInexactp()?j(Hc(a,Ec(f,i))):Hc(a,Ec(f,i))}function m(a,b){return k(a,b,i.on,!0)}function n(a,b,c){null!=a&&("number"==typeof a?this.fromNumber(a,b,c):null==b&&"string"!=typeof a?this.fromString(a,256):this.fromString(a,b))}function o(){return new n(null)}function p(a,b,c,d,e,f){for(;--f>=0;){var g=b*this[a++]+c[d]+e;
e=Math.floor(g/67108864),c[d++]=67108863&g}return e}function q(a,b,c,d,e,f){for(var g=32767&b,h=b>>15;--f>=0;){var i=32767&this[a],j=this[a++]>>15,k=h*i+j*g;i=g*i+((32767&k)<<15)+c[d]+(1073741823&e),e=(i>>>30)+(k>>>15)+h*j+(e>>>30),c[d++]=1073741823&i}return e}function s(a,b,c,d,e,f){for(var g=16383&b,h=b>>14;--f>=0;){var i=16383&this[a],j=this[a++]>>14,k=h*i+j*g;i=g*i+((16383&k)<<14)+c[d]+e,e=(i>>28)+(k>>14)+h*j,c[d++]=268435455&i}return e}function t(a){return ne.charAt(a)}function u(a,b){var c=oe[a.charCodeAt(b)];return null==c?-1:c}function v(a){for(var b=this.t-1;b>=0;--b)a[b]=this[b];a.t=this.t,a.s=this.s}function w(a){this.t=1,this.s=0>a?-1:0,a>0?this[0]=a:-1>a?this[0]=a+DV:this.t=0}function x(a){var b=o();return b.fromInt(a),b}function y(a,b){var c;if(16==b)c=4;else if(8==b)c=3;else if(256==b)c=8;else if(2==b)c=1;else if(32==b)c=5;else{if(4!=b)return void this.fromRadix(a,b);c=2}this.t=0,this.s=0;for(var d=a.length,e=!1,f=0;--d>=0;){var g=8==c?255&a[d]:u(a,d);0>g?"-"==a.charAt(d)&&(e=!0):(e=!1,0==f?this[this.t++]=g:f+c>this.DB?(this[this.t-1]|=(g&(1<<this.DB-f)-1)<<f,this[this.t++]=g>>this.DB-f):this[this.t-1]|=g<<f,f+=c,f>=this.DB&&(f-=this.DB))}8==c&&0!=(128&a[0])&&(this.s=-1,f>0&&(this[this.t-1]|=(1<<this.DB-f)-1<<f)),this.clamp(),e&&n.ZERO.subTo(this,this)}function z(){for(var a=this.s&this.DM;this.t>0&&this[this.t-1]==a;)--this.t}function A(a){if(this.s<0)return"-"+this.negate().toString(a);var b;if(16==a)b=4;else if(8==a)b=3;else if(2==a)b=1;else if(32==a)b=5;else{if(4!=a)return this.toRadix(a);b=2}var c,d=(1<<b)-1,e=!1,f=[],g=this.t,h=this.DB-g*this.DB%b;if(g-->0)for(h<this.DB&&(c=this[g]>>h)>0&&(e=!0,f.push(t(c)));g>=0;)b>h?(c=(this[g]&(1<<h)-1)<<b-h,c|=this[--g]>>(h+=this.DB-b)):(c=this[g]>>(h-=b)&d,0>=h&&(h+=this.DB,--g)),c>0&&(e=!0),e&&f.push(t(c));return e?f.join(""):"0"}function B(){var a=o();return n.ZERO.subTo(this,a),a}function C(){return this.s<0?this.negate():this}function D(a){var b=this.s-a.s;if(0!=b)return b;var c=this.t;if(b=this.s<0?a.t-c:c-a.t,0!=b)return b;for(;--c>=0;)if(0!=(b=this[c]-a[c]))return b;return 0}function E(a){var b,c=1;return 0!=(b=a>>>16)&&(a=b,c+=16),0!=(b=a>>8)&&(a=b,c+=8),0!=(b=a>>4)&&(a=b,c+=4),0!=(b=a>>2)&&(a=b,c+=2),0!=(b=a>>1)&&(a=b,c+=1),c}function F(){return this.t<=0?0:this.DB*(this.t-1)+E(this[this.t-1]^this.s&this.DM)}function G(a,b){var c;for(c=this.t-1;c>=0;--c)b[c+a]=this[c];for(c=a-1;c>=0;--c)b[c]=0;b.t=this.t+a,b.s=this.s}function H(a,b){for(var c=a;c<this.t;++c)b[c-a]=this[c];b.t=Math.max(this.t-a,0),b.s=this.s}function I(a,b){var c,d=a%this.DB,e=this.DB-d,f=(1<<e)-1,g=Math.floor(a/this.DB),h=this.s<<d&this.DM;for(c=this.t-1;c>=0;--c)b[c+g+1]=this[c]>>e|h,h=(this[c]&f)<<d;for(c=g-1;c>=0;--c)b[c]=0;b[g]=h,b.t=this.t+g+1,b.s=this.s,b.clamp()}function J(a,b){b.s=this.s;var c=Math.floor(a/this.DB);if(c>=this.t)return void(b.t=0);var d=a%this.DB,e=this.DB-d,f=(1<<d)-1;b[0]=this[c]>>d;for(var g=c+1;g<this.t;++g)b[g-c-1]|=(this[g]&f)<<e,b[g-c]=this[g]>>d;d>0&&(b[this.t-c-1]|=(this.s&f)<<e),b.t=this.t-c,b.clamp()}function K(a,b){for(var c=0,d=0,e=Math.min(a.t,this.t);e>c;)d+=this[c]-a[c],b[c++]=d&this.DM,d>>=this.DB;if(a.t<this.t){for(d-=a.s;c<this.t;)d+=this[c],b[c++]=d&this.DM,d>>=this.DB;d+=this.s}else{for(d+=this.s;c<a.t;)d-=a[c],b[c++]=d&this.DM,d>>=this.DB;d-=a.s}b.s=0>d?-1:0,-1>d?b[c++]=this.DV+d:d>0&&(b[c++]=d),b.t=c,b.clamp()}function L(a,b){var c=this.abs(),d=a.abs(),e=c.t;for(b.t=e+d.t;--e>=0;)b[e]=0;for(e=0;e<d.t;++e)b[e+c.t]=c.am(0,d[e],b,e,0,c.t);b.s=0,b.clamp(),this.s!=a.s&&n.ZERO.subTo(b,b)}function M(a){for(var b=this.abs(),c=a.t=2*b.t;--c>=0;)a[c]=0;for(c=0;c<b.t-1;++c){var d=b.am(c,b[c],a,2*c,0,1);(a[c+b.t]+=b.am(c+1,2*b[c],a,2*c+1,d,b.t-c-1))>=b.DV&&(a[c+b.t]-=b.DV,a[c+b.t+1]=1)}a.t>0&&(a[a.t-1]+=b.am(c,b[c],a,2*c,0,1)),a.s=0,a.clamp()}function N(a,b,c){var d=a.abs();if(!(d.t<=0)){var e=this.abs();if(e.t<d.t)return null!=b&&b.fromInt(0),void(null!=c&&this.copyTo(c));null==c&&(c=o());var f=o(),g=this.s,h=a.s,i=this.DB-E(d[d.t-1]);i>0?(d.lShiftTo(i,f),e.lShiftTo(i,c)):(d.copyTo(f),e.copyTo(c));var j=f.t,k=f[j-1];if(0!=k){var l=k*(1<<this.F1)+(j>1?f[j-2]>>this.F2:0),m=this.FV/l,p=(1<<this.F1)/l,q=1<<this.F2,r=c.t,s=r-j,t=null==b?o():b;for(f.dlShiftTo(s,t),c.compareTo(t)>=0&&(c[c.t++]=1,c.subTo(t,c)),n.ONE.dlShiftTo(j,t),t.subTo(f,f);f.t<j;)f[f.t++]=0;for(;--s>=0;){var u=c[--r]==k?this.DM:Math.floor(c[r]*m+(c[r-1]+q)*p);if((c[r]+=f.am(0,u,c,s,0,j))<u)for(f.dlShiftTo(s,t),c.subTo(t,c);c[r]<--u;)c.subTo(t,c)}null!=b&&(c.drShiftTo(j,b),g!=h&&n.ZERO.subTo(b,b)),c.t=j,c.clamp(),i>0&&c.rShiftTo(i,c),0>g&&n.ZERO.subTo(c,c)}}}function O(a){var b=o();return this.abs().divRemTo(a,null,b),this.s<0&&b.compareTo(n.ZERO)>0&&a.subTo(b,b),b}function P(a){this.m=a}function Q(a){return a.s<0||a.compareTo(this.m)>=0?a.mod(this.m):a}function R(a){return a}function S(a){a.divRemTo(this.m,null,a)}function T(a,b,c){a.multiplyTo(b,c),this.reduce(c)}function U(a,b){a.squareTo(b),this.reduce(b)}function V(){if(this.t<1)return 0;var a=this[0];if(0==(1&a))return 0;var b=3&a;return b=b*(2-(15&a)*b)&15,b=b*(2-(255&a)*b)&255,b=b*(2-((65535&a)*b&65535))&65535,b=b*(2-a*b%this.DV)%this.DV,b>0?this.DV-b:-b}function W(a){this.m=a,this.mp=a.invDigit(),this.mpl=32767&this.mp,this.mph=this.mp>>15,this.um=(1<<a.DB-15)-1,this.mt2=2*a.t}function X(a){var b=o();return a.abs().dlShiftTo(this.m.t,b),b.divRemTo(this.m,null,b),a.s<0&&b.compareTo(n.ZERO)>0&&this.m.subTo(b,b),b}function Y(a){var b=o();return a.copyTo(b),this.reduce(b),b}function Z(a){for(;a.t<=this.mt2;)a[a.t++]=0;for(var b=0;b<this.m.t;++b){var c=32767&a[b],d=c*this.mpl+((c*this.mph+(a[b]>>15)*this.mpl&this.um)<<15)&a.DM;for(c=b+this.m.t,a[c]+=this.m.am(0,d,a,b,0,this.m.t);a[c]>=a.DV;)a[c]-=a.DV,a[++c]++}a.clamp(),a.drShiftTo(this.m.t,a),a.compareTo(this.m)>=0&&a.subTo(this.m,a)}function $(a,b){a.squareTo(b),this.reduce(b)}function _(a,b,c){a.multiplyTo(b,c),this.reduce(c)}function ab(){return 0==(this.t>0?1&this[0]:this.s)}function bb(a,b){if(a>4294967295||1>a)return n.ONE;var c=o(),d=o(),e=b.convert(this),f=E(a)-1;for(e.copyTo(c);--f>=0;)if(b.sqrTo(c,d),(a&1<<f)>0)b.mulTo(d,e,c);else{var g=c;c=d,d=g}return b.revert(c)}function cb(a,b){var c;return c=256>a||b.isEven()?new P(b):new W(b),this.exp(a,c)}function db(){var a=o();return this.copyTo(a),a}function eb(){if(this.s<0){if(1==this.t)return this[0]-this.DV;if(0==this.t)return-1}else{if(1==this.t)return this[0];if(0==this.t)return 0}return(this[1]&(1<<32-this.DB)-1)<<this.DB|this[0]}function fb(){return 0==this.t?this.s:this[0]<<24>>24}function gb(){return 0==this.t?this.s:this[0]<<16>>16}function hb(a){return Math.floor(Math.LN2*this.DB/Math.log(a))}function ib(){return this.s<0?-1:this.t<=0||1==this.t&&this[0]<=0?0:1}function jb(a){if(null==a&&(a=10),0==this.signum()||2>a||a>36)return"0";var b=this.chunkSize(a),c=Math.pow(a,b),d=x(c),e=o(),f=o(),g="";for(this.divRemTo(d,e,f);e.signum()>0;)g=(c+f.intValue()).toString(a).substr(1)+g,e.divRemTo(d,e,f);return f.intValue().toString(a)+g}function kb(a,b){this.fromInt(0),null==b&&(b=10);for(var c=this.chunkSize(b),d=Math.pow(b,c),e=!1,f=0,g=0,h=0;h<a.length;++h){var i=u(a,h);0>i?"-"==a.charAt(h)&&0==this.signum()&&(e=!0):(g=b*g+i,++f>=c&&(this.dMultiply(d),this.dAddOffset(g,0),f=0,g=0))}f>0&&(this.dMultiply(Math.pow(b,f)),this.dAddOffset(g,0)),e&&n.ZERO.subTo(this,this)}function lb(a,b,c){if("number"==typeof b)if(2>a)this.fromInt(1);else for(this.fromNumber(a,c),this.testBit(a-1)||this.bitwiseTo(n.ONE.shiftLeft(a-1),tb,this),this.isEven()&&this.dAddOffset(1,0);!this.isProbablePrime(b);)this.dAddOffset(2,0),this.bitLength()>a&&this.subTo(n.ONE.shiftLeft(a-1),this);else{var d=[],e=7&a;d.length=(a>>3)+1,b.nextBytes(d),e>0?d[0]&=(1<<e)-1:d[0]=0,this.fromString(d,256)}}function mb(){var a=this.t,b=[];b[0]=this.s;var c,d=this.DB-a*this.DB%8,e=0;if(a-->0)for(d<this.DB&&(c=this[a]>>d)!=(this.s&this.DM)>>d&&(b[e++]=c|this.s<<this.DB-d);a>=0;)8>d?(c=(this[a]&(1<<d)-1)<<8-d,c|=this[--a]>>(d+=this.DB-8)):(c=this[a]>>(d-=8)&255,0>=d&&(d+=this.DB,--a)),0!=(128&c)&&(c|=-256),0==e&&(128&this.s)!=(128&c)&&++e,(e>0||c!=this.s)&&(b[e++]=c);return b}function nb(a){return 0==this.compareTo(a)}function ob(a){return this.compareTo(a)<0?this:a}function pb(a){return this.compareTo(a)>0?this:a}function qb(a,b,c){var d,e,f=Math.min(a.t,this.t);for(d=0;f>d;++d)c[d]=b(this[d],a[d]);if(a.t<this.t){for(e=a.s&this.DM,d=f;d<this.t;++d)c[d]=b(this[d],e);c.t=this.t}else{for(e=this.s&this.DM,d=f;d<a.t;++d)c[d]=b(e,a[d]);c.t=a.t}c.s=b(this.s,a.s),c.clamp()}function rb(a,b){return a&b}function sb(a){var b=o();return this.bitwiseTo(a,rb,b),b}function tb(a,b){return a|b}function ub(a){var b=o();return this.bitwiseTo(a,tb,b),b}function vb(a,b){return a^b}function wb(a){var b=o();return this.bitwiseTo(a,vb,b),b}function xb(a,b){return a&~b}function yb(a){var b=o();return this.bitwiseTo(a,xb,b),b}function zb(){for(var a=o(),b=0;b<this.t;++b)a[b]=this.DM&~this[b];return a.t=this.t,a.s=~this.s,a}function Ab(a){var b=o();return 0>a?this.rShiftTo(-a,b):this.lShiftTo(a,b),b}function Bb(a){var b=o();return 0>a?this.lShiftTo(-a,b):this.rShiftTo(a,b),b}function Cb(a){if(0==a)return-1;var b=0;return 0==(65535&a)&&(a>>=16,b+=16),0==(255&a)&&(a>>=8,b+=8),0==(15&a)&&(a>>=4,b+=4),0==(3&a)&&(a>>=2,b+=2),0==(1&a)&&++b,b}function Db(){for(var a=0;a<this.t;++a)if(0!=this[a])return a*this.DB+Cb(this[a]);return this.s<0?this.t*this.DB:-1}function Eb(a){for(var b=0;0!=a;)a&=a-1,++b;return b}function Fb(){for(var a=0,b=this.s&this.DM,c=0;c<this.t;++c)a+=Eb(this[c]^b);return a}function Gb(a){var b=Math.floor(a/this.DB);return b>=this.t?0!=this.s:0!=(this[b]&1<<a%this.DB)}function Hb(a,b){var c=n.ONE.shiftLeft(a);return this.bitwiseTo(c,b,c),c}function Ib(a){return this.changeBit(a,tb)}function Jb(a){return this.changeBit(a,xb)}function Kb(a){return this.changeBit(a,vb)}function Lb(a,b){for(var c=0,d=0,e=Math.min(a.t,this.t);e>c;)d+=this[c]+a[c],b[c++]=d&this.DM,d>>=this.DB;if(a.t<this.t){for(d+=a.s;c<this.t;)d+=this[c],b[c++]=d&this.DM,d>>=this.DB;d+=this.s}else{for(d+=this.s;c<a.t;)d+=a[c],b[c++]=d&this.DM,d>>=this.DB;d+=a.s}b.s=0>d?-1:0,d>0?b[c++]=d:-1>d&&(b[c++]=this.DV+d),b.t=c,b.clamp()}function Mb(a){var b=o();return this.addTo(a,b),b}function Nb(a){var b=o();return this.subTo(a,b),b}function Ob(a){var b=o();return this.multiplyTo(a,b),b}function Pb(a){var b=o();return this.divRemTo(a,b,null),b}function Qb(a){var b=o();return this.divRemTo(a,null,b),b}function Rb(a){var b=o(),c=o();return this.divRemTo(a,b,c),[b,c]}function Sb(a){this[this.t]=this.am(0,a-1,this,0,0,this.t),++this.t,this.clamp()}function Tb(a,b){if(0!=a){for(;this.t<=b;)this[this.t++]=0;for(this[b]+=a;this[b]>=this.DV;)this[b]-=this.DV,++b>=this.t&&(this[this.t++]=0),++this[b]}}function Ub(){}function Vb(a){return a}function Wb(a,b,c){a.multiplyTo(b,c)}function Xb(a,b){a.squareTo(b)}function Yb(a){return this.bnpExp(a,new Ub)}function Zb(a,b,c){var d=Math.min(this.t+a.t,b);for(c.s=0,c.t=d;d>0;)c[--d]=0;var e;for(e=c.t-this.t;e>d;++d)c[d+this.t]=this.am(0,a[d],c,d,0,this.t);for(e=Math.min(a.t,b);e>d;++d)this.am(0,a[d],c,d,0,b-d);c.clamp()}function $b(a,b,c){--b;var d=c.t=this.t+a.t-b;for(c.s=0;--d>=0;)c[d]=0;for(d=Math.max(b-this.t,0);d<a.t;++d)c[this.t+d-b]=this.am(b-d,a[d],c,0,0,this.t+d-b);c.clamp(),c.drShiftTo(1,c)}function _b(a){this.r2=o(),this.q3=o(),n.ONE.dlShiftTo(2*a.t,this.r2),this.mu=this.r2.divide(a),this.m=a}function ac(a){if(a.s<0||a.t>2*this.m.t)return a.mod(this.m);if(a.compareTo(this.m)<0)return a;var b=o();return a.copyTo(b),this.reduce(b),b}function bc(a){return a}function cc(a){for(a.drShiftTo(this.m.t-1,this.r2),a.t>this.m.t+1&&(a.t=this.m.t+1,a.clamp()),this.mu.multiplyUpperTo(this.r2,this.m.t+1,this.q3),this.m.multiplyLowerTo(this.q3,this.m.t+1,this.r2);a.compareTo(this.r2)<0;)a.dAddOffset(1,this.m.t+1);for(a.subTo(this.r2,a);a.compareTo(this.m)>=0;)a.subTo(this.m,a)}function dc(a,b){a.squareTo(b),this.reduce(b)}function ec(a,b,c){a.multiplyTo(b,c),this.reduce(c)}function fc(a,b){var c,d,e=a.bitLength(),f=x(1);if(0>=e)return f;c=18>e?1:48>e?3:144>e?4:768>e?5:6,d=8>e?new P(b):b.isEven()?new _b(b):new W(b);var g=[],h=3,i=c-1,j=(1<<c)-1;if(g[1]=d.convert(this),c>1){var k=o();for(d.sqrTo(g[1],k);j>=h;)g[h]=o(),d.mulTo(k,g[h-2],g[h]),h+=2}var l,m,n=a.t-1,p=!0,q=o();for(e=E(a[n])-1;n>=0;){for(e>=i?l=a[n]>>e-i&j:(l=(a[n]&(1<<e+1)-1)<<i-e,n>0&&(l|=a[n-1]>>this.DB+e-i)),h=c;0==(1&l);)l>>=1,--h;if((e-=h)<0&&(e+=this.DB,--n),p)g[l].copyTo(f),p=!1;else{for(;h>1;)d.sqrTo(f,q),d.sqrTo(q,f),h-=2;h>0?d.sqrTo(f,q):(m=f,f=q,q=m),d.mulTo(q,g[l],f)}for(;n>=0&&0==(a[n]&1<<e);)d.sqrTo(f,q),m=f,f=q,q=m,--e<0&&(e=this.DB-1,--n)}return d.revert(f)}function gc(a){var b=this.s<0?this.negate():this.clone(),c=a.s<0?a.negate():a.clone();if(b.compareTo(c)<0){var d=b;b=c,c=d}var e=b.getLowestSetBit(),f=c.getLowestSetBit();if(0>f)return b;for(f>e&&(f=e),f>0&&(b.rShiftTo(f,b),c.rShiftTo(f,c));b.signum()>0;)(e=b.getLowestSetBit())>0&&b.rShiftTo(e,b),(e=c.getLowestSetBit())>0&&c.rShiftTo(e,c),b.compareTo(c)>=0?(b.subTo(c,b),b.rShiftTo(1,b)):(c.subTo(b,c),c.rShiftTo(1,c));return f>0&&c.lShiftTo(f,c),c}function hc(a){if(0>=a)return 0;var b=this.DV%a,c=this.s<0?a-1:0;if(this.t>0)if(0==b)c=this[0]%a;else for(var d=this.t-1;d>=0;--d)c=(b*c+this[d])%a;return c}function ic(a){var b=a.isEven();if(this.isEven()&&b||0==a.signum())return n.ZERO;for(var c=a.clone(),d=this.clone(),e=x(1),f=x(0),g=x(0),h=x(1);0!=c.signum();){for(;c.isEven();)c.rShiftTo(1,c),b?(e.isEven()&&f.isEven()||(e.addTo(this,e),f.subTo(a,f)),e.rShiftTo(1,e)):f.isEven()||f.subTo(a,f),f.rShiftTo(1,f);for(;d.isEven();)d.rShiftTo(1,d),b?(g.isEven()&&h.isEven()||(g.addTo(this,g),h.subTo(a,h)),g.rShiftTo(1,g)):h.isEven()||h.subTo(a,h),h.rShiftTo(1,h);c.compareTo(d)>=0?(c.subTo(d,c),b&&e.subTo(g,e),f.subTo(h,f)):(d.subTo(c,d),b&&g.subTo(e,g),h.subTo(f,h))}return 0!=d.compareTo(n.ONE)?n.ZERO:h.compareTo(a)>=0?h.subtract(a):h.signum()<0?(h.addTo(a,h),h.signum()<0?h.add(a):h):h}function jc(a){var b,c=this.abs();if(1==c.t&&c[0]<=pe[pe.length-1]){for(b=0;b<pe.length;++b)if(c[0]==pe[b])return!0;return!1}if(c.isEven())return!1;for(b=1;b<pe.length;){for(var d=pe[b],e=b+1;e<pe.length&&qe>d;)d*=pe[e++];for(d=c.modInt(d);e>b;)if(d%pe[b++]==0)return!1}return c.millerRabin(a)}function kc(a){var b=this.subtract(n.ONE),c=b.getLowestSetBit();if(0>=c)return!1;var d=b.shiftRight(c);a=a+1>>1,a>pe.length&&(a=pe.length);for(var e=o(),f=0;a>f;++f){e.fromInt(pe[f]);var g=e.modPow(d,this);if(0!=g.compareTo(n.ONE)&&0!=g.compareTo(b)){for(var h=1;h++<c&&0!=g.compareTo(b);)if(g=g.modPowInt(2,this),0==g.compareTo(n.ONE))return!1;if(0!=g.compareTo(b))return!1}}return!0}function lc(a){return function(){var b=this.toInexact();return b[a].apply(b,arguments)}}var mc=c,nc=function(a,b,c){return c=c||{},function(d,e){return c.isXSpecialCase&&c.isXSpecialCase(d)?c.onXSpecialCase(d,e):c.isYSpecialCase&&c.isYSpecialCase(e)?c.onYSpecialCase(d,e):"number"==typeof d&&"number"==typeof e?a(d,e):("number"==typeof d&&(d=rc(d,e)),"number"==typeof e&&(e=rc(e,d)),d.level<e.level&&(d=d.liftTo(e)),e.level<d.level&&(e=e.liftTo(d)),b(d,e))}},oc=function(a){if(isNaN(a)||!isFinite(a))return Vd.makeInstance(a);var b=Math.floor(a);return b===a?xd(b)?re(pc(a+"")):b:Vd.makeInstance(a)},pc=function(a){var b,c,d=a.match(f(g(10),h(10)));return d?(b=d[1].match(/^([^.]*)(.*)$/),c=Number(d[2]),0===b[2].length?b[1]+qc(c):c>=b[2].length-1?b[1]+b[2].substring(1)+qc(c-(b[2].length-1)):b[1]+b[2].substring(1,1+c)):a},qc=function(a){var b=[];b.length=a;for(var c=0;a>c;c++)b[c]="0";return b.join("")},rc=function(a,b){switch(b.level){case 0:return re(a);case 1:return new Ud(a,1);case 2:return new Vd(a);case 3:return new ce(a,0);default:sc("IMPOSSIBLE: cannot lift fixnum integer to "+b.toString(),a,b)}},sc=function(a,b,c){mc.onThrowRuntimeError(a,b,c)},tc=function(a){throw new Error(a)},uc=function(a){return"number"==typeof a||a instanceof Ud||a instanceof Vd||a instanceof ce||a instanceof n},vc=function(a){return"number"==typeof a||uc(a)&&a.isRational()},wc=function(a){return"number"==typeof a||uc(a)&&a.isReal()},xc=function(a){return"number"==typeof a||uc(a)&&a.isExact()},yc=function(a){return"number"==typeof a?!1:uc(a)&&a.isInexact()},zc=function(a){return"number"==typeof a||uc(a)&&a.isInteger()},Ac=function(a){return"number"==typeof a||uc(a)&&a.isInteger()&&a.isExact()},Bc=function(a){return"number"==typeof a?a:a.toFixnum()},Cc=function(a){return"number"==typeof a?a:a.toExact()},Dc=function(a){return"number"==typeof a?Vd.makeInstance(a):a.toInexact()},Ec=function(a,b){var c;return"number"==typeof a&&"number"==typeof b&&(c=a+b,xd(c))?re(a).add(re(b)):a instanceof Vd&&b instanceof Vd?a.add(b):Fc(a,b)},Fc=nc(function(a,b){var c=a+b;return xd(c)?re(a).add(re(b)):c},function(a,b){return a.add(b)},{isXSpecialCase:function(a){return Ac(a)&&Gd(a)},onXSpecialCase:function(a,b){return b},isYSpecialCase:function(a){return Ac(a)&&Gd(a)},onYSpecialCase:function(a){return a}}),Gc=nc(function(a,b){var c=a-b;return xd(c)?re(a).subtract(re(b)):c},function(a,b){return a.subtract(b)},{isXSpecialCase:function(a){return Ac(a)&&Gd(a)},onXSpecialCase:function(a,b){return yd(b)},isYSpecialCase:function(a){return Ac(a)&&Gd(a)},onYSpecialCase:function(a){return a}}),Hc=function(a,b){var c;return"number"==typeof a&&"number"==typeof b?(c=a*b,xd(c)?re(a).multiply(re(b)):c):a instanceof Vd&&b instanceof Vd?a.multiply(b):Ic(a,b)},Ic=nc(function(a,b){var c=a*b;return xd(c)?re(a).multiply(re(b)):c},function(a,b){return a.multiply(b)},{isXSpecialCase:function(a){return Ac(a)&&(Gd(a)||Hd(a)||Id(a))},onXSpecialCase:function(a,b){return Gd(a)?0:Hd(a)?b:Id(a)?yd(b):void 0},isYSpecialCase:function(a){return Ac(a)&&(Gd(a)||Hd(a)||Id(a))},onYSpecialCase:function(a,b){return Gd(b)?0:Hd(b)?a:Id(b)?yd(a):void 0}}),Jc=nc(function(a,b){Gd(b)&&sc("/: division by zero",a,b);var c=a/b;return xd(c)?re(a).divide(re(b)):Math.floor(c)!==c?Ud.makeInstance(a,b):c},function(a,b){return a.divide(b)},{isXSpecialCase:function(a){return Lc(a,0)},onXSpecialCase:function(a,b){return Lc(b,0)&&sc("/: division by zero",a,b),0},isYSpecialCase:function(a){return Lc(a,0)},onYSpecialCase:function(a,b){sc("/: division by zero",a,b)}}),Kc=nc(function(a,b){return a===b},function(a,b){return a.equals(b)}),Lc=function(a,b){if(a===b)return!0;if("number"==typeof a&&"number"==typeof b)return a===b;if(a===_d||b===_d)return a===b;if(a instanceof ce||b instanceof ce)return Lc(jd(a),jd(b))&&Lc(id(a),id(b));var c=xc(a),d=xc(b);return(c&&d||!c&&!d)&&Kc(a,b)},Mc=function(a,b,c){return Qc(Xc(Gc(a,b)),c)},Nc=nc(function(a,b){return a>=b},function(a,b){return wc(a)&&wc(b)||sc(">=: couldn't be applied to complex number",a,b),a.greaterThanOrEqual(b)}),Oc=nc(function(a,b){return b>=a},function(a,b){return wc(a)&&wc(b)||sc("<=: couldn't be applied to complex number",a,b),a.lessThanOrEqual(b)}),Pc=nc(function(a,b){return a>b},function(a,b){return wc(a)&&wc(b)||sc(">: couldn't be applied to complex number",a,b),a.greaterThan(b)}),Qc=nc(function(a,b){return b>a},function(a,b){return wc(a)&&wc(b)||sc("<: couldn't be applied to complex number",a,b),a.lessThan(b)}),Rc=function(){var a=nc(function(a,b){var c=Math.pow(a,b);return xd(c)?re(a).expt(re(b)):c},function(a,b){return Kc(b,0)?Ec(b,1):a.expt(b)});return function(b,c){return Kc(c,0)?Ec(c,1):wc(c)&&Qc(c,0)?a(Jc(1,b),yd(c)):a(b,c)}}(),Sc=function(a){return Lc(a,0)?1:"number"==typeof a?Vd.makeInstance(Math.exp(a)):a.exp()},Tc=function(a,b){zc(a)||sc("modulo: the first argument "+a+" is not an integer.",a,b),zc(b)||sc("modulo: the second argument "+b+" is not an integer.",a,b);var c;return"number"==typeof a?(c=a%b,0>b?0>=c?c:c+b:0>c?c+b:c):(c=Ed(Yc(a),Yc(b)),Qc(b,0)?Oc(c,0)?c:Ec(c,b):Qc(c,0)?Ec(c,b):c)},Uc=function(a){return"number"==typeof a?a:a.numerator()},Vc=function(a){return"number"==typeof a?1:a.denominator()},Wc=function(a){if("number"==typeof a){if(a>=0){var b=Math.sqrt(a);return Math.floor(b)===b?b:Vd.makeInstance(b)}return ce.makeInstance(0,Wc(-a))}return a.sqrt()},Xc=function(a){return"number"==typeof a?Math.abs(a):a.abs()},Yc=function(a){return"number"==typeof a?a:a.floor()},Zc=function(a){return"number"==typeof a?a:a.ceiling()},$c=function(a){return"number"==typeof a?a:a.conjugate()},_c=function(a){return"number"==typeof a?Math.abs(a):a.magnitude()},ad=function(a){return Lc(a,1)?0:"number"==typeof a?Vd.makeInstance(Math.log(a)):a.log()},bd=function(a){return"number"==typeof a?a>0?0:Vd.pi:a.angle()},cd=function(a){return Lc(a,0)?0:"number"==typeof a?Vd.makeInstance(Math.tan(a)):a.tan()},dd=function(a){return Lc(a,0)?0:"number"==typeof a?Vd.makeInstance(Math.atan(a)):a.atan()},ed=function(a){return Lc(a,0)?1:"number"==typeof a?Vd.makeInstance(Math.cos(a)):a.cos()},fd=function(a){return Lc(a,0)?0:"number"==typeof a?Vd.makeInstance(Math.sin(a)):a.sin()},gd=function(a){return Lc(a,1)?0:"number"==typeof a?Vd.makeInstance(Math.acos(a)):a.acos()},hd=function(a){return Lc(a,0)?0:"number"==typeof a?Vd.makeInstance(Math.asin(a)):a.asin()},id=function(a){return"number"==typeof a?0:a.imaginaryPart()},jd=function(a){return"number"==typeof a?a:a.realPart()},kd=function(a){return"number"==typeof a?a:a.round()},ld=function(a){return Hc(a,a)},md=function(a){return zc(a)||sc("integer-sqrt: the argument "+a.toString()+" is not an integer.",a),"number"==typeof a?0>a?ce.makeInstance(0,Math.floor(Math.sqrt(-a))):Math.floor(Math.sqrt(a)):a.integerSqrt()},nd=function(a,b){zc(a)||sc("gcd: the argument "+a.toString()+" is not an integer.",a);for(var c,d,e=Xc(a),f=0;f<b.length;f++)for(d=Xc(b[f]),zc(d)||sc("gcd: the argument "+d.toString()+" is not an integer.",d);!Gd(d);)c=e,e=d,d=Ed(c,d);return e},od=function(a,b){zc(a)||sc("lcm: the argument "+a.toString()+" is not an integer.",a);var c=Xc(a);if(Gd(c))return 0;for(var d=0;d<b.length;d++){zc(b[d])||sc("lcm: the argument "+b[d].toString()+" is not an integer.",b[d]);var e=Fd(c,b[d]);if(Gd(e))return 0;c=Jc(Hc(c,b[d]),e)}return c},pd=function(a,b){return zc(a)||sc("quotient: the first argument "+a.toString()+" is not an integer.",a),zc(b)||sc("quotient: the second argument "+b.toString()+" is not an integer.",b),Md(a,b)},qd=function(a,b){return zc(a)||sc("remainder: the first argument "+a.toString()+" is not an integer.",a),zc(b)||sc("remainder: the second argument "+b.toString()+" is not an integer.",b),Nd(a,b)},rd=function(a){return Lc(a,0)?Vd.makeInstance(1):Jc(Ec(Sc(a),Sc(yd(a))),2)},sd=function(a){return Jc(Gc(Sc(a),Sc(yd(a))),2)},td=function(a,b){return Lc(b,0)?a:ce.makeInstance(Hc(a,ed(b)),Hc(a,fd(b)))},ud=function(a){return"number"==typeof a?isFinite(a):a.isFinite()},vd=-9e15,wd=9e15,xd=function(a){return vd>a||a>wd},yd=function(a){return"number"==typeof a?-a:a.negate()},zd=function(a){return Jc(a,2)},Ad=function(a){return Hc(a,de)},Bd=function(a,b){for(var c=1;;){if(Gd(b))return c;Kc(Tc(b,2),0)?(a=Hc(a,a),b=Jc(b,2)):(c=Hc(c,a),b=Gc(b,1))}},Cd=function(a,b,c){return c=c||{},function(d,e){if(d instanceof Ud?d=Uc(d):d instanceof ce&&(d=jd(d)),e instanceof Ud?e=Uc(e):e instanceof ce&&(e=jd(e)),"number"==typeof d&&"number"==typeof e){var f=a(d,e);if(!xd(f)||c.ignoreOverflow)return f}return d instanceof Vd||e instanceof Vd?c.doNotCoerseToFloating?a(Bc(d),Bc(e)):Vd.makeInstance(a(Bc(d),Bc(e))):("number"==typeof d&&(d=re(d)),"number"==typeof e&&(e=re(e)),b(d,e))}},Dd=function(a,b,c){return c=c||{},function(d){if(d instanceof Ud?d=Uc(d):d instanceof ce&&(d=jd(d)),"number"==typeof d){var e=a(d);if(!xd(e)||c.ignoreOverflow)return e}return d instanceof Vd?a(Bc(d)):("number"==typeof d&&(d=re(d)),b(d))}},Ed=Cd(function(a,b){return a%b},function(a,b){return O.call(a,b)}),Fd=Cd(function(a,b){for(var c;0!==b;)c=a,a=b,b=c%b;return a},function(a,b){return gc.call(a,b)}),Gd=Dd(function(a){return 0===a},function(a){return nb.call(a,n.ZERO)}),Hd=Dd(function(a){return 1===a},function(a){return nb.call(a,n.ONE)}),Id=Dd(function(a){return-1===a},function(a){return nb.call(a,n.NEGATIVE_ONE)}),Jd=Cd(function(a,b){return a+b},function(a,b){return Mb.call(a,b)}),Kd=Cd(function(a,b){return a-b},function(a,b){return Nb.call(a,b)}),Ld=Cd(function(a,b){return a*b},function(a,b){return Ob.call(a,b)}),Md=Cd(function(a,b){return(a-a%b)/b},function(a,b){return Pb.call(a,b)}),Nd=Cd(function(a,b){return a%b},function(a,b){return Qb.call(a,b)}),Od=Cd(function(a,b){return a/b},function(a,b){return Bc(a)/Bc(b)},{ignoreOverflow:!0,doNotCoerseToFloating:!0}),Pd=Cd(function(a,b){return a===b},function(a,b){return nb.call(a,b)},{doNotCoerseToFloating:!0}),Qd=Cd(function(a,b){return a>b},function(a,b){return D.call(a,b)>0},{doNotCoerseToFloating:!0}),Rd=Cd(function(a,b){return b>a},function(a,b){return D.call(a,b)<0},{doNotCoerseToFloating:!0}),Sd=Cd(function(a,b){return a>=b},function(a,b){return D.call(a,b)>=0},{doNotCoerseToFloating:!0}),Td=Cd(function(a,b){return b>=a},function(a,b){return D.call(a,b)<=0},{doNotCoerseToFloating:!0}),Ud=function(a,b){this.n=a,this.d=b};Ud.prototype.toString=function(){return Hd(this.d)?this.n.toString()+"":this.n.toString()+"/"+this.d.toString()},Ud.prototype.level=1,Ud.prototype.liftTo=function(a){return 2===a.level?new Vd(Od(this.n,this.d)):3===a.level?new ce(this,0):sc("invalid level of Number",this,a)},Ud.prototype.isFinite=function(){return!0},Ud.prototype.equals=function(a){return a instanceof Ud&&Pd(this.n,a.n)&&Pd(this.d,a.d)},Ud.prototype.isInteger=function(){return Hd(this.d)},Ud.prototype.isRational=function(){return!0},Ud.prototype.isReal=function(){return!0},Ud.prototype.add=function(a){return Ud.makeInstance(Jd(Ld(this.n,a.d),Ld(this.d,a.n)),Ld(this.d,a.d))},Ud.prototype.subtract=function(a){return Ud.makeInstance(Kd(Ld(this.n,a.d),Ld(this.d,a.n)),Ld(this.d,a.d))},Ud.prototype.negate=function(){return Ud.makeInstance(-this.n,this.d)},Ud.prototype.multiply=function(a){return Ud.makeInstance(Ld(this.n,a.n),Ld(this.d,a.d))},Ud.prototype.divide=function(a){return(Gd(this.d)||Gd(a.n))&&sc("/: division by zero",this,a),Ud.makeInstance(Ld(this.n,a.d),Ld(this.d,a.n))},Ud.prototype.toExact=function(){return this},Ud.prototype.toInexact=function(){return Vd.makeInstance(this.toFixnum())},Ud.prototype.isExact=function(){return!0},Ud.prototype.isInexact=function(){return!1},Ud.prototype.toFixnum=function(){return Od(this.n,this.d)},Ud.prototype.numerator=function(){return this.n},Ud.prototype.denominator=function(){return this.d},Ud.prototype.greaterThan=function(a){return Qd(Ld(this.n,a.d),Ld(this.d,a.n))},Ud.prototype.greaterThanOrEqual=function(a){return Sd(Ld(this.n,a.d),Ld(this.d,a.n))},Ud.prototype.lessThan=function(a){return Rd(Ld(this.n,a.d),Ld(this.d,a.n))},Ud.prototype.lessThanOrEqual=function(a){return Td(Ld(this.n,a.d),Ld(this.d,a.n))},Ud.prototype.integerSqrt=function(){var a=Wc(this);return vc(a)?Cc(Yc(a)):wc(a)?Cc(Yc(a)):ce.makeInstance(Cc(Yc(jd(a))),Cc(Yc(id(a))))},Ud.prototype.sqrt=function(){if(Sd(this.n,0)){var a=Wc(this.n),b=Wc(this.d);return Kc(Yc(a),a)&&Kc(Yc(b),b)?Ud.makeInstance(a,b):Vd.makeInstance(Od(a,b))}var a=Wc(yd(this.n)),b=Wc(this.d);return Kc(Yc(a),a)&&Kc(Yc(b),b)?ce.makeInstance(0,Ud.makeInstance(a,b)):ce.makeInstance(0,Vd.makeInstance(Od(a,b)))},Ud.prototype.abs=function(){return Ud.makeInstance(Xc(this.n),this.d)},Ud.prototype.floor=function(){var a=Md(this.n,this.d);return Rd(this.n,0)?Gc(a,1):a},Ud.prototype.ceiling=function(){var a=Md(this.n,this.d);return Rd(this.n,0)?a:Ec(a,1)},Ud.prototype.conjugate=function(){return this},Ud.prototype.magnitude=Ud.prototype.abs,Ud.prototype.log=function(){return Vd.makeInstance(Math.log(this.n/this.d))},Ud.prototype.angle=function(){return Gd(this.n)?0:Qd(this.n,0)?0:Vd.pi},Ud.prototype.tan=function(){return Vd.makeInstance(Math.tan(Od(this.n,this.d)))},Ud.prototype.atan=function(){return Vd.makeInstance(Math.atan(Od(this.n,this.d)))},Ud.prototype.cos=function(){return Vd.makeInstance(Math.cos(Od(this.n,this.d)))},Ud.prototype.sin=function(){return Vd.makeInstance(Math.sin(Od(this.n,this.d)))},Ud.prototype.expt=function(a){return Ac(a)&&Nc(a,0)?Bd(this,a):Vd.makeInstance(Math.pow(Od(this.n,this.d),Od(a.n,a.d)))},Ud.prototype.exp=function(){return Vd.makeInstance(Math.exp(Od(this.n,this.d)))},Ud.prototype.acos=function(){return Vd.makeInstance(Math.acos(Od(this.n,this.d)))},Ud.prototype.asin=function(){return Vd.makeInstance(Math.asin(Od(this.n,this.d)))},Ud.prototype.imaginaryPart=function(){return 0},Ud.prototype.realPart=function(){return this},Ud.prototype.round=function(){if(Kc(this.d,2)){var a=Od(this.n,this.d),b=Math.floor(a),c=Math.ceil(a);return Gd(b%2)?b:c}return Math.round(this.n/this.d)},Ud.makeInstance=function(a,b){void 0===a&&sc("n undefined",a,b),void 0===b&&(b=1),Gd(b)&&sc("division by zero: "+a+"/"+b),Rd(b,0)&&(a=yd(a),b=yd(b));var c=Fd(Xc(a),Xc(b));return a=Md(a,c),b=Md(b,c),Hd(b)||Gd(a)?a:new Ud(a,b)};var Vd=function(a){this.n=a};Vd=Vd;var Wd=new Vd(Number.NaN),Xd=new Vd(Number.POSITIVE_INFINITY),Yd=new Vd(Number.NEGATIVE_INFINITY),Zd=new Vd(Number.POSITIVE_INFINITY),$d=new Vd(Number.NEGATIVE_INFINITY),_d=new Vd(-0),ae=new Vd(0);Vd.pi=new Vd(Math.PI),Vd.e=new Vd(Math.E),Vd.nan=Wd,Vd.inf=Xd,Vd.neginf=Yd,Vd.makeInstance=function(a){return isNaN(a)?Vd.nan:a===Number.POSITIVE_INFINITY?Vd.inf:a===Number.NEGATIVE_INFINITY?Vd.neginf:0===a?1/a===-1/0?_d:ae:new Vd(a)},Vd.prototype.isExact=function(){return!1},Vd.prototype.isInexact=function(){return!0},Vd.prototype.isFinite=function(){return isFinite(this.n)||this===Zd||this===$d},Vd.prototype.toExact=function(){(!isFinite(this.n)||isNaN(this.n))&&sc("toExact: no exact representation for "+this,this);var a=this.n.toString(),b=a.match(/^(.*)\.(.*)$/);if(b){var c=(parseInt(b[1]),parseInt(b[2]),Math.pow(10,b[2].length));return Ud.makeInstance(Math.round(this.n*c),c)}return this.n},Vd.prototype.toInexact=function(){return this},Vd.prototype.isInexact=function(){return!0},Vd.prototype.level=2,Vd.prototype.liftTo=function(a){return 3===a.level?new ce(this,0):sc("invalid level of Number",this,a)},Vd.prototype.toString=function(){if(isNaN(this.n))return"+nan.0";if(this.n===Number.POSITIVE_INFINITY)return"+inf.0";if(this.n===Number.NEGATIVE_INFINITY)return"-inf.0";if(this===_d)return"-0.0";var a=this.n.toString();return a.match("\\.")?a:a+".0"},Vd.prototype.equals=function(a){return a instanceof Vd&&this.n===a.n},Vd.prototype.isRational=function(){return this.isFinite()},Vd.prototype.isInteger=function(){return this.isFinite()&&this.n===Math.floor(this.n)},Vd.prototype.isReal=function(){return!0};var be=function(a){return Qc(a,0)?-1:Pc(a,0)?1:a===_d?-1:0};Vd.prototype.add=function(a){return this.isFinite()&&a.isFinite()?Vd.makeInstance(this.n+a.n):isNaN(this.n)||isNaN(a.n)?Wd:this.isFinite()&&!a.isFinite()?a:!this.isFinite()&&a.isFinite()?this:be(this)*be(a)===1?this:Wd},Vd.prototype.subtract=function(a){return this.isFinite()&&a.isFinite()?Vd.makeInstance(this.n-a.n):isNaN(this.n)||isNaN(a.n)?Wd:this.isFinite()||a.isFinite()?this.isFinite()?Hc(a,-1):this:be(this)===be(a)?Wd:this},Vd.prototype.negate=function(){return Vd.makeInstance(-this.n)},Vd.prototype.multiply=function(a){return Vd.makeInstance(this.n*a.n)},Vd.prototype.divide=function(a){return Vd.makeInstance(this.n/a.n)},Vd.prototype.toFixnum=function(){return this.n},Vd.prototype.numerator=function(){var a=this.n.toString(),b=a.match(/^(.*)\.(.*)$/);if(b){var c=parseInt(b[2]),d=Math.pow(10,b[2].length),e=Fd(d,c),f=d/e;return Vd.makeInstance(Math.round(this.n*f))}return this},Vd.prototype.denominator=function(){var a=this.n.toString(),b=a.match(/^(.*)\.(.*)$/);if(b){var c=parseInt(b[2]),d=Math.pow(10,b[2].length),e=Fd(d,c);return Vd.makeInstance(Math.round(d/e))}return Vd.makeInstance(1)},Vd.prototype.floor=function(){return Vd.makeInstance(Math.floor(this.n))},Vd.prototype.ceiling=function(){return Vd.makeInstance(Math.ceil(this.n))},Vd.prototype.greaterThan=function(a){return this.n>a.n},Vd.prototype.greaterThanOrEqual=function(a){return this.n>=a.n},Vd.prototype.lessThan=function(a){return this.n<a.n},Vd.prototype.lessThanOrEqual=function(a){return this.n<=a.n},Vd.prototype.integerSqrt=function(){return this===_d?this:zc(this)?this.n>=0?Vd.makeInstance(Math.floor(Math.sqrt(this.n))):ce.makeInstance(ae,Vd.makeInstance(Math.floor(Math.sqrt(-this.n)))):void sc("integerSqrt: can only be applied to an integer",this)
},Vd.prototype.sqrt=function(){if(this.n<0){var a=ce.makeInstance(0,Vd.makeInstance(Math.sqrt(-this.n)));return a}return Vd.makeInstance(Math.sqrt(this.n))},Vd.prototype.abs=function(){return Vd.makeInstance(Math.abs(this.n))},Vd.prototype.log=function(){return this.n<0?new ce(this,0).log():Vd.makeInstance(Math.log(this.n))},Vd.prototype.angle=function(){return 0===this.n?0:this.n>0?0:Vd.pi},Vd.prototype.tan=function(){return Vd.makeInstance(Math.tan(this.n))},Vd.prototype.atan=function(){return Vd.makeInstance(Math.atan(this.n))},Vd.prototype.cos=function(){return Vd.makeInstance(Math.cos(this.n))},Vd.prototype.sin=function(){return Vd.makeInstance(Math.sin(this.n))},Vd.prototype.expt=function(a){return 1===this.n?a.isFinite()?this:isNaN(a.n)?this:this:Vd.makeInstance(Math.pow(this.n,a.n))},Vd.prototype.exp=function(){return Vd.makeInstance(Math.exp(this.n))},Vd.prototype.acos=function(){return Vd.makeInstance(Math.acos(this.n))},Vd.prototype.asin=function(){return Vd.makeInstance(Math.asin(this.n))},Vd.prototype.imaginaryPart=function(){return 0},Vd.prototype.realPart=function(){return this},Vd.prototype.round=function(){return isFinite(this.n)?this===_d?this:Vd.makeInstance(.5===Math.abs(Math.floor(this.n)-this.n)?Math.floor(this.n)%2===0?Math.floor(this.n):Math.ceil(this.n):Math.round(this.n)):this},Vd.prototype.conjugate=function(){return this},Vd.prototype.magnitude=Vd.prototype.abs;var ce=function(a,b){this.r=a,this.i=b};ce.makeInstance=function(a,b){return void 0===b&&(b=0),xc(b)&&zc(b)&&Gd(b)?a:((yc(a)||yc(b))&&(a=Dc(a),b=Dc(b)),new ce(a,b))},ce.prototype.toString=function(){var a=this.r.toString(),b=this.i.toString();return"-"===b[0]||"+"===b[0]?a+b+"i":a+"+"+b+"i"},ce.prototype.isFinite=function(){return ud(this.r)&&ud(this.i)},ce.prototype.isRational=function(){return vc(this.r)&&Lc(this.i,0)},ce.prototype.isInteger=function(){return zc(this.r)&&Lc(this.i,0)},ce.prototype.toExact=function(){return ce.makeInstance(Cc(this.r),Cc(this.i))},ce.prototype.toInexact=function(){return ce.makeInstance(Dc(this.r),Dc(this.i))},ce.prototype.isExact=function(){return xc(this.r)&&xc(this.i)},ce.prototype.isInexact=function(){return yc(this.r)||yc(this.i)},ce.prototype.level=3,ce.prototype.liftTo=function(a){sc("Don't know how to lift Complex number",this,a)},ce.prototype.equals=function(a){var b=a instanceof ce&&Kc(this.r,a.r)&&Kc(this.i,a.i);return b},ce.prototype.greaterThan=function(a){return this.isReal()&&a.isReal()||sc(">: expects argument of type real number",this,a),Pc(this.r,a.r)},ce.prototype.greaterThanOrEqual=function(a){return this.isReal()&&a.isReal()||sc(">=: expects argument of type real number",this,a),Nc(this.r,a.r)},ce.prototype.lessThan=function(a){return this.isReal()&&a.isReal()||sc("<: expects argument of type real number",this,a),Qc(this.r,a.r)},ce.prototype.lessThanOrEqual=function(a){return this.isReal()&&a.isReal()||sc("<=: expects argument of type real number",this,a),Oc(this.r,a.r)},ce.prototype.abs=function(){return Kc(this.i,0).valueOf()||sc("abs: expects argument of type real number",this),Xc(this.r)},ce.prototype.toFixnum=function(){return Kc(this.i,0).valueOf()||sc("toFixnum: expects argument of type real number",this),Bc(this.r)},ce.prototype.numerator=function(){return this.isReal()||sc("numerator: can only be applied to real number",this),Uc(this.n)},ce.prototype.denominator=function(){return this.isReal()||sc("floor: can only be applied to real number",this),Vc(this.n)},ce.prototype.add=function(a){return ce.makeInstance(Ec(this.r,a.r),Ec(this.i,a.i))},ce.prototype.subtract=function(a){return ce.makeInstance(Gc(this.r,a.r),Gc(this.i,a.i))},ce.prototype.negate=function(){return ce.makeInstance(yd(this.r),yd(this.i))},ce.prototype.multiply=function(a){if(a.isReal())return ce.makeInstance(Hc(this.r,a.r),Hc(this.i,a.r));var b=Gc(Hc(this.r,a.r),Hc(this.i,a.i)),c=Ec(Hc(this.r,a.i),Hc(this.i,a.r));return ce.makeInstance(b,c)},ce.prototype.divide=function(a){var b,c,d,e,f,g,h;if(a.isReal())return ce.makeInstance(Jc(this.r,a.r),Jc(this.i,a.r));if(this.isInexact()||a.isInexact())return b=this.r,c=this.i,d=a.r,e=a.i,Oc(Xc(e),Xc(d))?(f=Jc(e,d),g=Jc(Ec(b,Hc(c,f)),Ec(d,Hc(e,f))),h=Jc(Gc(c,Hc(b,f)),Ec(d,Hc(e,f)))):(f=Jc(d,e),g=Jc(Ec(Hc(b,f),c),Ec(Hc(d,f),e)),h=Jc(Gc(Hc(c,f),b),Ec(Hc(d,f),e))),ce.makeInstance(g,h);var i=$c(a),j=Hc(this,i),k=jd(Hc(a,i)),l=ce.makeInstance(Jc(jd(j),k),Jc(id(j),k));return l},ce.prototype.conjugate=function(){var a=ce.makeInstance(this.r,Gc(0,this.i));return a},ce.prototype.magnitude=function(){var a=Ec(Hc(this.r,this.r),Hc(this.i,this.i));return Wc(a)},ce.prototype.isReal=function(){return Lc(this.i,0)},ce.prototype.integerSqrt=function(){return zc(this)?md(this.r):void sc("integerSqrt: can only be applied to an integer",this)},ce.prototype.sqrt=function(){if(this.isReal())return Wc(this.r);var a=Ec(this.magnitude(),this.r),b=Wc(zd(a)),c=Jc(this.i,Wc(Hc(a,2)));return ce.makeInstance(b,c)},ce.prototype.log=function(){var a=this.magnitude(),b=this.angle(),c=Ec(ad(a),Ad(b));return c},ce.prototype.angle=function(){if(this.isReal())return bd(this.r);if(Kc(0,this.r)){var a=zd(Vd.pi);return Pc(this.i,0)?a:yd(a)}var a=dd(Jc(Xc(this.i),Xc(this.r)));return Pc(this.r,0)?Pc(this.i,0)?a:yd(a):Pc(this.i,0)?Gc(Vd.pi,a):Gc(a,Vd.pi)};var de=ce.makeInstance(0,1),ee=ce.makeInstance(0,-1);ce.prototype.tan=function(){return Jc(this.sin(),this.cos())},ce.prototype.atan=function(){return Kc(this,de)||Kc(this,ee)?Yd:Hc(de,Hc(Vd.makeInstance(.5),ad(Jc(Ec(de,this),Ec(de,Gc(0,this))))))},ce.prototype.cos=function(){if(this.isReal())return ed(this.r);var a=Ad(this),b=yd(a);return zd(Ec(Sc(a),Sc(b)))},ce.prototype.sin=function(){if(this.isReal())return fd(this.r);var a=Ad(this),b=yd(a),c=ce.makeInstance(0,2),d=Gc(Sc(a),Sc(b)),e=Jc(d,c);return e},ce.prototype.expt=function(a){if(Ac(a)&&Nc(a,0))return Bd(this,a);var b=Hc(a,this.log());return Sc(b)},ce.prototype.exp=function(){var a=Sc(this.r),b=ed(this.i),c=fd(this.i);return Hc(a,Ec(b,Ad(c)))},ce.prototype.acos=function(){if(this.isReal())return gd(this.r);var a=zd(Vd.pi),b=Ad(this),c=Wc(Gc(1,ld(this))),d=Ad(ad(Ec(b,c)));return Ec(a,d)},ce.prototype.asin=function(){if(this.isReal())return hd(this.r);var a=Gc(1,ld(this)),b=Wc(a);return Hc(2,dd(Jc(this,Ec(1,b))))},ce.prototype.ceiling=function(){return this.isReal()||sc("ceiling: can only be applied to real number",this),Zc(this.r)},ce.prototype.floor=function(){return this.isReal()||sc("floor: can only be applied to real number",this),Yc(this.r)},ce.prototype.imaginaryPart=function(){return this.i},ce.prototype.realPart=function(){return this.r},ce.prototype.round=function(){return this.isReal()||sc("round: can only be applied to real number",this),kd(this.r)};var fe=new RegExp("^(#[ei]#[bodx]|#[bodx]#[ei]|#[bodxei])(.*)$");i.def=new i(0),i.on=new i(1),i.off=new i(2),i.prototype.intAsExactp=function(){return this.defaultp()||this.exactp()},i.prototype.floatAsInexactp=function(){return this.defaultp()||this.inexactp()};var ge,he=function(a,b){var c=10,b="undefined"==typeof b?i.def:b===!0?i.on:b===!1?i.off:sc("exactness must be true or false",this,r),d=a.toLowerCase().match(fe);if(d){var e=d[1].toLowerCase(),f=e.match(new RegExp("(#[ei])")),g=e.match(new RegExp("(#[bodx])"));if(f){var h=f[1].charAt(1);b="e"===h?i.on:"i"===h?i.off:sc("invalid exactness flag",this,r)}if(g){var h=g[1].charAt(1);c="b"===h?2:"o"===h?8:"d"===h?10:"x"===h?16:sc("invalid radix flag",this,r)}}var k=d?d[2]:a,l=d?!0:!1;return j(k,c,b,l)},ie=0xdeadbeefcafe,je=15715070==(16777215&ie);je&&"undefined"!=typeof navigator&&"Microsoft Internet Explorer"==navigator.appName?(n.prototype.am=q,ge=30):je&&"undefined"!=typeof navigator&&"Netscape"!=navigator.appName?(n.prototype.am=p,ge=26):(n.prototype.am=s,ge=28),n.prototype.DB=ge,n.prototype.DM=(1<<ge)-1,n.prototype.DV=1<<ge;var ke=52;n.prototype.FV=Math.pow(2,ke),n.prototype.F1=ke-ge,n.prototype.F2=2*ge-ke;var le,me,ne="0123456789abcdefghijklmnopqrstuvwxyz",oe=[];for(le="0".charCodeAt(0),me=0;9>=me;++me)oe[le++]=me;for(le="a".charCodeAt(0),me=10;36>me;++me)oe[le++]=me;for(le="A".charCodeAt(0),me=10;36>me;++me)oe[le++]=me;P.prototype.convert=Q,P.prototype.revert=R,P.prototype.reduce=S,P.prototype.mulTo=T,P.prototype.sqrTo=U,W.prototype.convert=X,W.prototype.revert=Y,W.prototype.reduce=Z,W.prototype.mulTo=_,W.prototype.sqrTo=$,n.prototype.copyTo=v,n.prototype.fromInt=w,n.prototype.fromString=y,n.prototype.clamp=z,n.prototype.dlShiftTo=G,n.prototype.drShiftTo=H,n.prototype.lShiftTo=I,n.prototype.rShiftTo=J,n.prototype.subTo=K,n.prototype.multiplyTo=L,n.prototype.squareTo=M,n.prototype.divRemTo=N,n.prototype.invDigit=V,n.prototype.isEven=ab,n.prototype.bnpExp=bb,n.prototype.toString=A,n.prototype.negate=B,n.prototype.abs=C,n.prototype.compareTo=D,n.prototype.bitLength=F,n.prototype.mod=O,n.prototype.modPowInt=cb,n.ZERO=x(0),n.ONE=x(1),Ub.prototype.convert=Vb,Ub.prototype.revert=Vb,Ub.prototype.mulTo=Wb,Ub.prototype.sqrTo=Xb,_b.prototype.convert=ac,_b.prototype.revert=bc,_b.prototype.reduce=cc,_b.prototype.mulTo=ec,_b.prototype.sqrTo=dc;var pe=[2,3,5,7,11,13,17,19,23,29,31,37,41,43,47,53,59,61,67,71,73,79,83,89,97,101,103,107,109,113,127,131,137,139,149,151,157,163,167,173,179,181,191,193,197,199,211,223,227,229,233,239,241,251,257,263,269,271,277,281,283,293,307,311,313,317,331,337,347,349,353,359,367,373,379,383,389,397,401,409,419,421,431,433,439,443,449,457,461,463,467,479,487,491,499,503,509],qe=(1<<26)/pe[pe.length-1];n.prototype.chunkSize=hb,n.prototype.toRadix=jb,n.prototype.fromRadix=kb,n.prototype.fromNumber=lb,n.prototype.bitwiseTo=qb,n.prototype.changeBit=Hb,n.prototype.addTo=Lb,n.prototype.dMultiply=Sb,n.prototype.dAddOffset=Tb,n.prototype.multiplyLowerTo=Zb,n.prototype.multiplyUpperTo=$b,n.prototype.modInt=hc,n.prototype.millerRabin=kc,n.prototype.clone=db,n.prototype.intValue=eb,n.prototype.byteValue=fb,n.prototype.shortValue=gb,n.prototype.signum=ib,n.prototype.toByteArray=mb,n.prototype.equals=nb,n.prototype.min=ob,n.prototype.max=pb,n.prototype.and=sb,n.prototype.or=ub,n.prototype.xor=wb,n.prototype.andNot=yb,n.prototype.not=zb,n.prototype.shiftLeft=Ab,n.prototype.shiftRight=Bb,n.prototype.getLowestSetBit=Db,n.prototype.bitCount=Fb,n.prototype.testBit=Gb,n.prototype.setBit=Ib,n.prototype.clearBit=Jb,n.prototype.flipBit=Kb,n.prototype.add=Mb,n.prototype.subtract=Nb,n.prototype.multiply=Ob,n.prototype.divide=Pb,n.prototype.remainder=Qb,n.prototype.divideAndRemainder=Rb,n.prototype.modPow=fc,n.prototype.modInverse=ic,n.prototype.pow=Yb,n.prototype.expt=Yb,n.prototype.gcd=gc,n.prototype.isProbablePrime=jc,n.NEGATIVE_ONE=n.ONE.negate();var re=function(a){return"number"==typeof a&&(a+=""),a=pc(a),new n(a,10)};n.prototype.level=0,n.prototype.liftTo=function(a){if(1===a.level)return new Ud(this,1);if(2===a.level){var b=this.toFixnum();return b===Number.POSITIVE_INFINITY?Zd:b===Number.NEGATIVE_INFINITY?$d:new Vd(b)}return 3===a.level?new ce(this,0):sc("invalid level for BigInteger lift",this,a)},n.prototype.isFinite=function(){return!0},n.prototype.isInteger=function(){return!0},n.prototype.isRational=function(){return!0},n.prototype.isReal=function(){return!0},n.prototype.isExact=function(){return!0},n.prototype.isInexact=function(){return!1},n.prototype.toExact=function(){return this},n.prototype.toInexact=function(){return Vd.makeInstance(this.toFixnum())},n.prototype.toFixnum=function(){var a,b=0,c=this.toString();if("-"===c[0]){for(a=1;a<c.length;a++)b=10*b+Number(c[a]);return-b}for(a=0;a<c.length;a++)b=10*b+Number(c[a]);return b},n.prototype.greaterThan=function(a){return this.compareTo(a)>0},n.prototype.greaterThanOrEqual=function(a){return this.compareTo(a)>=0},n.prototype.lessThan=function(a){return this.compareTo(a)<0},n.prototype.lessThanOrEqual=function(a){return this.compareTo(a)<=0},n.prototype.divide=function(a){var b=Rb.call(this,a);if(0===b[1].compareTo(n.ZERO))return b[0];var c=Ec(b[0],Ud.makeInstance(b[1],a));return c},n.prototype.numerator=function(){return this},n.prototype.denominator=function(){return 1},function(){var a=function(a,b){for(;!Oc(ld(b),a)||!Qc(a,ld(Ec(b,1)));)b=Yc(Jc(Ec(b,Yc(Jc(a,b))),2));return b};n.prototype.integerSqrt=function(){var b;return be(this)>=0?a(this,this):(b=this.negate(),ce.makeInstance(0,a(b,b)))}}(),function(){n.prototype.sqrt=function(){var a,b=this.integerSqrt();return Lc(ld(b),this)?b:(a=Bc(this),isFinite(a)?a>=0?Vd.makeInstance(Math.sqrt(a)):ce.makeInstance(0,Vd.makeInstance(Math.sqrt(-a))):b)}}(),n.prototype.floor=function(){return this},n.prototype.ceiling=function(){return this},n.prototype.conjugate=lc("conjugate"),n.prototype.magnitude=lc("magnitude"),n.prototype.log=lc("log"),n.prototype.angle=lc("angle"),n.prototype.atan=lc("atan"),n.prototype.acos=lc("acos"),n.prototype.asin=lc("asin"),n.prototype.tan=lc("tan"),n.prototype.cos=lc("cos"),n.prototype.sin=lc("sin"),n.prototype.exp=lc("exp"),n.prototype.imaginaryPart=function(){return 0},n.prototype.realPart=function(){return this},n.prototype.round=function(){return this};var se=function(){var a=function(a,b,c){var d=[],e={};for(e[a]=!0;;){if(c--<=0)return[d.join(""),"..."];var f=pd(Hc(a,10),b),g=qd(Hc(a,10),b);if(d.push(f.toString()),e[g]){a=g;break}e[g]=!0,a=g}for(var h=a,i=[];;){var f=pd(Hc(a,10),b),g=qd(Hc(a,10),b);if(i.push(f.toString()),Kc(g,h))break;a=g}for(var j=d.join(""),k=i.join("");j.length>=k.length&&j.substring(j.length-k.length)===k;)j=j.substring(0,j.length-k.length);return[j,k]};return function(b,c,d){var e=512;d&&"undefined"!=typeof d.limit&&(e=d.limit),zc(b)||sc("toRepeatingDecimal: n "+b.toString()+" is not an integer."),zc(c)||sc("toRepeatingDecimal: d "+c.toString()+" is not an integer."),Kc(c,0)&&sc("toRepeatingDecimal: d equals 0"),Qc(c,0)&&sc("toRepeatingDecimal: d < 0");var f=Qc(b,0)?"-":"";b=Xc(b);var g=f+pd(b,c),h=a(qd(b,c),c,e);return[g].concat(h)}}();mc.fromFixnum=oc,mc.fromString=he,mc.makeBignum=re,mc.makeRational=Ud.makeInstance,mc.makeFloat=Vd.makeInstance,mc.makeComplex=ce.makeInstance,mc.makeComplexPolar=td,mc.pi=Vd.pi,mc.e=Vd.e,mc.nan=Vd.nan,mc.negative_inf=Vd.neginf,mc.inf=Vd.inf,mc.negative_one=-1,mc.zero=0,mc.one=1,mc.i=de,mc.negative_i=ee,mc.negative_zero=_d,mc.onThrowRuntimeError=tc,mc.isSchemeNumber=uc,mc.isRational=vc,mc.isReal=wc,mc.isExact=xc,mc.isInexact=yc,mc.isInteger=zc,mc.toFixnum=Bc,mc.toExact=Cc,mc.toInexact=Dc,mc.add=Ec,mc.subtract=Gc,mc.multiply=Hc,mc.divide=Jc,mc.equals=Kc,mc.eqv=Lc,mc.approxEquals=Mc,mc.greaterThanOrEqual=Nc,mc.lessThanOrEqual=Oc,mc.greaterThan=Pc,mc.lessThan=Qc,mc.expt=Rc,mc.exp=Sc,mc.modulo=Tc,mc.numerator=Uc,mc.denominator=Vc,mc.integerSqrt=md,mc.sqrt=Wc,mc.abs=Xc,mc.quotient=pd,mc.remainder=qd,mc.floor=Yc,mc.ceiling=Zc,mc.conjugate=$c,mc.magnitude=_c,mc.log=ad,mc.angle=bd,mc.tan=cd,mc.atan=dd,mc.cos=ed,mc.sin=fd,mc.tan=cd,mc.acos=gd,mc.asin=hd,mc.cosh=rd,mc.sinh=sd,mc.imaginaryPart=id,mc.realPart=jd,mc.round=kd,mc.sqr=ld,mc.gcd=nd,mc.lcm=od,mc.toRepeatingDecimal=se,mc.BigInteger=n,mc.Rational=Ud,mc.FloatPoint=Vd,mc.Complex=ce,mc.MIN_FIXNUM=vd,mc.MAX_FIXNUM=wd}()},{}],40:[function(a,b){var c=function(a,b,c){if(this.name=a,this.params=b||[],this.expression=c,3!==arguments.length)throw new Error("Equation requires name, params, and expression");this.signature=this.name,this.params.length>0&&(this.signature+="("+this.params.join(",")+")")};b.exports=c,c.prototype.isFunction=function(){return this.params.length>0},c.prototype.clone=function(){return new c(this.name,this.params.slice(),this.expression.clone())}},{}],39:[function(require,module,exports){module.exports=function(){var t=function anonymous(locals,filters,escape){escape=escape||function(a){return String(a).replace(/&(?!\w+;)/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")};var buf=[];with(locals||{})!function(){buf.push("");require("../../locale/current/calc"),require("../../locale/current/common");buf.push("\n")}();return buf.join("")};return function(a){return t(a,require("ejs").filters)}}()},{"../../locale/current/calc":247,"../../locale/current/common":248,ejs:264}],37:[function(a,b,c){"use strict";function d(a,b){a.Blocks.functional_compute={helpUrl:"",init:function(){a.FunctionalBlockUtils.initTitledFunctionalBlock(this,e.evaluate(),a.BlockValueType.NONE,[{name:"ARG1",type:a.BlockValueType.NUMBER}])}},b.functional_compute=function(){var a=Blockly.JavaScript.statementToCode(this,"ARG1",!1)||0;return"Calc.compute("+a+", 'block_id_"+this.id+"');\n"}}var e=a("../../locale/current/calc"),f=(a("../../locale/current/common"),a("../sharedFunctionalBlocks"));c.install=function(a,b){var c=(b.skin,a.Generator.get("JavaScript"));a.JavaScript=c;var e=function(b){var d=a.Variables.NAME_TYPE;return c.variableDB_.getDistinctName(b,d)};f.install(a,c,e),d(a,c,e)}},{"../../locale/current/calc":247,"../../locale/current/common":248,"../sharedFunctionalBlocks":196}],247:[function(a,b){b.exports=window.blockly.appLocale},{}]},{},[46]);