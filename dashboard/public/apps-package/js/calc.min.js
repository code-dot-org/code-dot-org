require=function a(b,c,d){function e(g,h){if(!c[g]){if(!b[g]){var i="function"==typeof require&&require;if(!h&&i)return i(g,!0);if(f)return f(g,!0);var j=new Error("Cannot find module '"+g+"'");throw j.code="MODULE_NOT_FOUND",j}var k=c[g]={exports:{}};b[g][0].call(k.exports,function(a){var c=b[g][1][a];return e(c?c:a)},k,k.exports,a,b,c,d)}return c[g].exports}for(var f="function"==typeof require&&require,g=0;g<d.length;g++)e(d[g]);return e}({57:[function(a){var b=a("../appMain");window.Calc=a("./calc");var c=a("./blocks"),d=a("../skins"),e=a("./levels");window.calcMain=function(a){a.skinsModule=d,a.blocksModule=c,b(window.Calc,e,a)}},{"../appMain":5,"../skins":223,"./blocks":47,"./calc":48,"./levels":55}],48:[function(a,b){"use strict";function c(a,b,c){a=d(a),b=d(b),c=E.valueOr(c,!1);var e;return a?(e=b?a.getTokenListDiff(b):a.getTokenList(c),H.stripOuterParensFromTokenList(e)):null}function d(a){if(null===a||void 0===a)return a;if(a instanceof H)return a;if(a instanceof J)return a.expression;if(y.isSchemeNumber(a)||"string"==typeof a)return new H(a);throw new Error("unexpected")}function e(a){var b=a.computeEquation();if(b&&b.expression){var d,e=0,f=a.computesFunctionCall();if(!f&&!a.computesSingleVariable()){var g=a.sortedEquations();g.forEach(function(a){if(a.isFunction()&&g.length>1)throw new Error("Calc doesn't support goal with multiple functions or mixed functions/vars");d=c(a),q("answerExpression",a.signature,d,e++)})}d=c(b);var h=a.evaluate();if(h.err)throw h.err;f&&(d.push(new K(" = ",!1)),d.push(new K(h.result,!1))),q("answerExpression",b.signature,d,e)}}function f(a){if(a){if(0!==Blockly.mainBlockSpace.getTopBlocks().length)throw new Error("generateTargetExpression shouldn't be called with blocksif we already have blocks in the workspace");x.loadBlocks(a)}var b=new I(Blockly.mainBlockSpace.getTopBlocks());return Blockly.mainBlockSpace.getTopBlocks().forEach(function(a){a.dispose()}),b}function g(a,b){return{result:N.FAILURE,testResults:M.APP_SPECIFIC_FAIL,message:a,failedInput:E.valueOr(b,null)}}function h(a){return a instanceof H.DivideByZeroError?g(A.divideByZeroError(),null):(E.isInfiniteRecursionError(a)||console.log("Unexpected error: "+a),{result:N.FAILURE,testResults:M.LEVEL_INCOMPLETE_FAIL,message:null,failedInput:null})}function i(a){return a===M.QUESTION_MARKS_IN_NUMBER_FIELD||a===M.EMPTY_FUNCTIONAL_BLOCK||a===M.EXTRA_TOP_BLOCKS_FAIL}function j(){o();var a=R.userSet.clone(),b=R.targetSet,d=a.computeEquation();if(null!==d&&null!==d.expression){var e=k(a,b);if(!a.computesSingleConstant()){var f=b&&b.computeEquation(),g=c(d,f);(a.hasVariablesOrFunctions()||d.expression.depth()>0)&&(g=g.concat(l(a,b))),q("userExpression",null,g,e++,"errorToken"),g=m(a,b),g&&g.length&&q("userExpression",null,g,e++,"errorToken")}}}function k(a,b){var d=!b.computesFunctionCall()&&!b.computesSingleVariable();if(b.computesSingleVariable()&&null!==R.failedInput){var e=(a.getConstants(),b.getConstants());e.forEach(function(b,c){var d=b.name,e=a.getEquation(d);e.expression.setValue(R.failedInput[c])})}var f,g=0;return a.sortedEquations().forEach(function(a){var e=d?b.getEquation(a.name):null;f=c(a,e),q("userExpression",a.signature,f,g++,"errorToken")}),g}function l(a,b){var d=a.evaluate();if(d.err)return d.err instanceof H.DivideByZeroError||E.isInfiniteRecursionError(d.err)||console.log("Unexpected error: "+d.err),[];var e=d.result,f=e;return b.computesSingleVariable()?[new K(" = ",!1),new K(e,R.failedInput)]:(null!==b.computeEquation()&&(f=b.evaluate().result),c(" = ").concat(c(e,f)))}function m(a,b){if(null===R.failedInput||!b.computesFunctionCall())return[];for(var d=a.computeEquation(),e=d.expression.clone(),f=0;f<e.numChildren();f++)e.setChildValue(f,R.failedInput[f]);var g=a.evaluateWithExpression(e);if(g.err){if(!(g.err instanceof H.DivideByZeroError))throw g.err;g.result=""}var h=g.result;return c(e).concat(new K(" = ",!1)).concat(new K(h,!0))}function n(){R.animating=!1,s()}function o(){for(var a=document.getElementById("userExpression"),b=a.childNodes.length-1;b>=0;b--)a.removeChild(a.childNodes[b])}function p(a){var b=R.userSet.computeEquation();if(!b)throw new Error("require user expression");var d=b.expression;if(!d)return!0;var e=!1;if(R.userSet.hasVariablesOrFunctions()||R.targetSet.hasVariablesOrFunctions())throw new Error("Can't animate if either user/target have functions/vars");o();for(var f=d.clone(),g=f,h=0,i=0;a>=i&&!e;i++){var j;if(h===a)j=c(f,g);else if(h+1===a){var k=f.getDeepestOperation();k&&x.highlight("block_id_"+k.blockId),j=c(f,null,!0)}else j=c(f);var l=!1;i>0&&(l=!0,j=c("= ").concat(j)),q("userExpression",null,j,h,"markedToken",l),g=f.clone(),f.isDivZero()&&(e=!0),f.collapse()?h++:i===h+1&&(e=!0)}return e}function q(a,b,c,d,e,f){var g=document.getElementById(a),h=document.createElementNS(Blockly.SVG_NS,"g");g.appendChild(h);var i,j=0;b&&(i=new K(b+" = ",!1).renderToParent(h,j,null),j+=i);for(var k=0,l=0;l<c.length;l++)i=c[l].renderToParent(h,j,e),0===l&&(k=i),j+=i;var m;if(f){var n=Blockly.getRelativeXY(g.childNodes[0]);m=parseFloat(n.x)-k}else m=(P-h.getBoundingClientRect().width)/2;var o=d*Q;h.setAttribute("transform","translate("+m+", "+o+")")}function r(a){for(var b=document.getElementById(a).cloneNode(!0),c=b.getElementsByTagName("*"),d=0;d<c.length;d++){var e=c[d];e.removeAttribute("id")}return b}function s(){if(!R.waitingForReport&&!R.animating){u.extraTopBlocks=A.extraTopBlocks();var a=null;i(R.testResults)||(a=r("svgCalc"));var b={app:"calc",skin:v.id,response:R.response,level:u,feedbackType:R.testResults,tryAgainText:u.freePlay?z.keepPlaying():void 0,continueText:u.freePlay?z.nextPuzzle():void 0,appStrings:{reinfFeedbackMsg:A.reinfFeedbackMsg()},appDiv:a};R.message&&!u.edit_blocks&&(b.message=R.message),x.displayFeedback(b)}}function t(a){var b=document.getElementById("runButton");b.disabled=!1,R.response=a,R.waitingForReport=!1,s()}var u,v,w=b.exports,x=a("../StudioApp").singleton,w=b.exports,y=a("./js-numbers/js-numbers.js"),z=a("../locale"),A=a("./locale"),B=(a("../skins"),a("./levels"),a("../templates/page.html.ejs")),C=a("../dom"),D=a("../block_utils"),E=a("../utils"),F=a("lodash"),G=a("../timeoutList"),H=a("./expressionNode"),I=a("./equationSet"),J=a("./equation"),K=a("./token"),L=a("./inputIterator"),M=x.TestResults,N=x.ResultType;x.setCheckForEmptyBlocks(!1);var O=400,P=400,Q=24,R={targetSet:null,userSet:null,animating:!1,waitingForReport:!1,response:null,message:null,result:null,testResults:null,failedInput:null};w.appState_=R;var S=2e3;w.init=function(b){x.runButtonClick=this.runButtonClick.bind(this),v=b.skin,u=b.level,u.scale&&void 0!==u.scale.stepSpeed&&(S=u.scale.stepSpeed),b.grayOutUndeletableBlocks=!0,b.forceInsertTopBlock="functional_compute",b.enableShowCode=!1,b.html=B({assetUrl:x.assetUrl,data:{localeDirection:x.localeDirection(),visualization:a("./visualization.html.ejs")(),controls:a("./controls.html.ejs")({assetUrl:x.assetUrl}),blockUsed:void 0,idealBlockNumber:void 0,editCode:u.editCode,blockCounterClass:"block-counter-default",inputOutputTable:u.inputOutputTable}}),b.loadAudio=function(){x.loadAudio(v.winSound,"win"),x.loadAudio(v.startSound,"start"),x.loadAudio(v.failureSound,"failure")},b.afterInject=function(){var a=document.getElementById("svgCalc");if(a.setAttribute("width",P),a.setAttribute("height",O),u.freePlay){var c=document.getElementById("background");c.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href","/blockly/media/skins/calc/background_freeplay.png")}Blockly.BROKEN_CONTROL_POINTS=!1,Blockly.JavaScript.addReservedWords("Calc,code");var d=u.solutionBlocks;u.solutionBlocks&&""!==u.solutionBlocks&&(d=D.forceInsertTopBlock(u.solutionBlocks,b.forceInsertTopBlock)),R.targetSet=f(d),e(R.targetSet);var g=document.getElementById("visualizationColumn");g.style.width="400px";var h=document.getElementById("resetButton");C.addClickTouchEvent(h,w.resetButtonClick)},x.init(b)},w.runButtonClick=function(){x.toggleRunReset("reset"),Blockly.mainBlockSpace.traceOn(!0),x.attempts++,w.execute()},w.resetButtonClick=function(){R.animating=!1,R.waitingForReport=!1,R.response=null,R.message=null,R.result=null,R.testResults=null,R.failedInput=null,G.clearTimeouts(),o()},w.evaluateFunction_=function(a,b){var c={result:N.UNSET,testResults:M.NO_TESTS_RUN,message:void 0,failedInput:null},d=a.computeEquation().expression.clone(),e=b.computeEquation(),f=e&&e.expression;if(!d.hasSameSignature(f)||!b.computesFunctionCall()){c.result=N.FAILURE,c.testResults=M.LEVEL_INCOMPLETE_FAIL;var g=d.getValue();return b.getEquation(g)||(c.message=A.missingFunctionError({functionName:g})),c}var i=a.evaluateWithExpression(d),j=b.evaluateWithExpression(d);if(i.err||j.err)return h(i.err||j.err);if(!y.equals(i.result,j.result))return c.result=N.FAILURE,c.testResults=M.LEVEL_INCOMPLETE_FAIL,c;for(var k=F.range(1,101).concat(F.range(-0,-101,-1)),l=d.numChildren(),m=new L(k,l),n=function(a,b){d.setChildValue(b,a)};m.remaining()>0&&!c.failedInput;){var o=m.next();if(o.forEach(n),i=a.evaluateWithExpression(d),j=b.evaluateWithExpression(d),i.err||j.err)return h(i.err||j.err);y.equals(i.result,j.result)||(c.failedInput=F.clone(o))}return c.failedInput?(c.result=N.FAILURE,c.testResults=M.APP_SPECIFIC_FAIL,c.message=A.failedInput()):a.computeEquation().expression.isIdenticalTo(b.computeEquation().expression)?(c.result=N.SUCCESS,c.testResults=M.ALL_PASS):(c.result=N.FAILURE,c.testResults=M.APP_SPECIFIC_FAIL,c.message=A.wrongInput()),c},w.evaluateSingleVariable_=function(a,b){var c={result:N.UNSET,testResults:M.NO_TESTS_RUN,message:void 0,failedInput:null};if(!a.computeEquation().expression.isIdenticalTo(b.computeEquation().expression))return g(A.levelIncompleteError());var d=a.getConstants();if(0===d.length)throw new Error("Unexpected: single variable with no constants");if(1!==d.length)throw new Error("No support for multiple constants");for(var e=b.getConstants(),f=e.map(function(a){return a.name}),i=0;i<d.length;i++)if(-1===f.indexOf(d[i].name))return g(A.missingVariableX({"var":d[i].name}));var j=b.evaluate();if(j.err)return h(j.err);var k=j.result,l=a.clone(),m=b.clone(),n=function(a,b){var c=d[b].name;l.getEquation(c).expression.setValue(a),m.getEquation(c).expression.setValue(a)};if(j=a.evaluate(),j.err)throw j.err;var o=j.result;if(!y.equals(k,o)){if(d.forEach(function(a,b){var c=a.name,d=m.getEquation(c).expression.evaluate().result;n(d,b)}),j=l.evaluate(),j.err)return h(j.err);if(!y.equals(k,j.result))return g(A.wrongResult())}for(var p=F.range(1,101).concat(F.range(-0,-101,-1)),q=d.length,r=new L(p,q);r.remaining()>0&&!c.failedInput;){var s=r.next();s.forEach(n);var t=l.evaluate(),u=m.evaluate(),v=t.err||u.err;if(v)return h(v);y.equals(t.result,u.result)||(c.failedInput=F.clone(s))}if(c.failedInput){var w=A.wrongOtherValuesX({"var":d[0].name});return g(w,c.failedInput)}return c.result=N.SUCCESS,c.testResults=M.ALL_PASS,c},w.evaluateResults_=function(a,b){var c,d,e,f={result:N.UNSET,testResults:M.NO_TESTS_RUN,message:void 0,failedInput:null};if(a.computesFunctionCall())return w.evaluateFunction_(a,b);if(a.computesSingleVariable())return w.evaluateSingleVariable_(a,b);if(b.hasVariablesOrFunctions()||a.hasVariablesOrFunctions())return a.isIdenticalTo(b)?(f.result=N.SUCCESS,f.testResults=M.ALL_PASS):a.isEquivalentTo(b)?(f.result=N.FAILURE,f.testResults=M.APP_SPECIFIC_FAIL,f.message=A.equivalentExpression()):(f.result=N.FAILURE,f.testResults=M.LEVEL_INCOMPLETE_FAIL),f;if(d=b.computeEquation(),e=a.computeEquation(),c=a.isIdenticalTo(b))f.result=N.SUCCESS,f.testResults=M.ALL_PASS;else{f.result=N.FAILURE;var g=f.result===N.SUCCESS;f.testResults=x.getTestResults(g),e&&d.expression&&d.expression.isEquivalentTo(e.expression)&&(f.testResults=M.APP_SPECIFIC_FAIL,f.message=A.equivalentExpression())}return f},w.execute=function(){w.generateResults_();var a=Blockly.Xml.blockSpaceToDom(Blockly.mainBlockSpace),b=Blockly.Xml.domToText(a),c={app:"calc",level:u.id,builder:u.builder,result:R.result===N.SUCCESS,testResult:R.testResults,program:encodeURIComponent(b),onComplete:t};return R.waitingForReport=!0,x.report(c),x.playAudio(R.result===N.SUCCESS?"win":"failure"),i(R.testResults)?s():(R.animating=!0,void(R.result===N.SUCCESS&&R.userSet.isAnimatable()&&!u.edit_blocks?w.step(0):(j(),G.setTimeout(function(){n()},S))))},w.generateResults_=function(){if(R.message=void 0,x.hasExtraTopBlocks())return R.result=N.FAILURE,void(R.testResults=M.EXTRA_TOP_BLOCKS_FAIL);if(x.hasUnfilledFunctionalBlock()){R.result=N.FAILURE,R.testResults=M.EMPTY_FUNCTIONAL_BLOCK;var a=F.find(Blockly.mainBlockSpace.getTopBlocks(),function(a){return"functional_compute"===a.type});return void(R.message=a&&!a.getInputTargetBlock("ARG1")?A.emptyComputeBlock():z.emptyFunctionalBlock())}if(x.hasQuestionMarksInNumberField())return R.result=N.FAILURE,void(R.testResults=M.QUESTION_MARKS_IN_NUMBER_FIELD);if(R.userSet=new I(Blockly.mainBlockSpace.getTopBlocks()),R.failedInput=null,R.userSet.hasDivZero())return R.result=N.FAILURE,R.testResults=M.APP_SPECIFIC_FAIL,void(R.message=A.divideByZeroError());if(u.freePlay||u.edit_blocks)R.result=N.SUCCESS,R.testResults=M.FREE_PLAY;else{var b=w.evaluateResults_(R.targetSet,R.userSet);R.result=b.result,R.testResults=b.testResults,R.message=b.message,R.failedInput=b.failedInput}R.testResults!==M.LEVEL_INCOMPLETE_FAIL||R.message||(R.message=A.levelIncompleteError())},w.step=function(a){var b=p(a);G.setTimeout(function(){b?(p(a+1),n()):w.step(a+1)},S)},w.__testonly__={displayGoal:e,displayComplexUserExpressions:j,appState:R}},{"../StudioApp":4,"../block_utils":35,"../dom":68,"../locale":110,"../skins":223,"../templates/page.html.ejs":249,"../timeoutList":255,"../utils":271,"./controls.html.ejs":49,"./equation":50,"./equationSet":51,"./expressionNode":52,"./inputIterator":53,"./js-numbers/js-numbers.js":54,"./levels":55,"./locale":56,"./token":58,"./visualization.html.ejs":59,lodash:284}],284:[function(a,b,c){(function(a){(function(){function d(a,b,c){for(var d=(c||0)-1,e=a?a.length:0;++d<e;)if(a[d]===b)return d;return-1}function e(a,b){var c=typeof b;if(a=a.cache,"boolean"==c||null==b)return a[b]?0:-1;"number"!=c&&"string"!=c&&(c="object");var e="number"==c?b:u+b;return a=(a=a[c])&&a[e],"object"==c?a&&d(a,b)>-1?0:-1:a?0:-1}function f(a){var b=this.cache,c=typeof a;if("boolean"==c||null==a)b[a]=!0;else{"number"!=c&&"string"!=c&&(c="object");var d="number"==c?a:u+a,e=b[c]||(b[c]={});"object"==c?(e[d]||(e[d]=[])).push(a):e[d]=!0}}function g(a){return a.charCodeAt(0)}function h(a,b){for(var c=a.criteria,d=b.criteria,e=-1,f=c.length;++e<f;){var g=c[e],h=d[e];if(g!==h){if(g>h||"undefined"==typeof g)return 1;if(h>g||"undefined"==typeof h)return-1}}return a.index-b.index}function i(a){var b=-1,c=a.length,d=a[0],e=a[c/2|0],g=a[c-1];if(d&&"object"==typeof d&&e&&"object"==typeof e&&g&&"object"==typeof g)return!1;var h=l();h["false"]=h["null"]=h["true"]=h.undefined=!1;var i=l();for(i.array=a,i.cache=h,i.push=f;++b<c;)i.push(a[b]);return i}function j(a){return"\\"+Y[a]}function k(){return r.pop()||[]}function l(){return s.pop()||{array:null,cache:null,criteria:null,"false":!1,index:0,"null":!1,number:null,object:null,push:null,string:null,"true":!1,undefined:!1,value:null}}function m(a){a.length=0,r.length<w&&r.push(a)}function n(a){var b=a.cache;b&&n(b),a.array=a.cache=a.criteria=a.object=a.number=a.string=a.value=null,s.length<w&&s.push(a)}function o(a,b,c){b||(b=0),"undefined"==typeof c&&(c=a?a.length:0);for(var d=-1,e=c-b||0,f=Array(0>e?0:e);++d<e;)f[d]=a[b+d];return f}function p(a){function b(a){return a&&"object"==typeof a&&!Zd(a)&&Hd.call(a,"__wrapped__")?a:new c(a)}function c(a,b){this.__chain__=!!b,this.__wrapped__=a}function f(a){function b(){if(d){var a=o(d);Id.apply(a,arguments)}if(this instanceof b){var f=s(c.prototype),g=c.apply(f,a||arguments);return Eb(g)?g:f}return c.apply(e,a||arguments)}var c=a[0],d=a[2],e=a[4];return Yd(b,a),b}function r(a,b,c,d,e){if(c){var f=c(a);if("undefined"!=typeof f)return f}var g=Eb(a);if(!g)return a;var h=Ad.call(a);if(!U[h])return a;var i=Wd[h];switch(h){case N:case O:return new i(+a);case Q:case T:return new i(a);case S:return f=i(a.source,C.exec(a)),f.lastIndex=a.lastIndex,f}var j=Zd(a);if(b){var l=!d;d||(d=k()),e||(e=k());for(var n=d.length;n--;)if(d[n]==a)return e[n];f=j?i(a.length):{}}else f=j?o(a):ee({},a);return j&&(Hd.call(a,"index")&&(f.index=a.index),Hd.call(a,"input")&&(f.input=a.input)),b?(d.push(a),e.push(f),(j?Yb:he)(a,function(a,g){f[g]=r(a,b,c,d,e)}),l&&(m(d),m(e)),f):f}function s(a){return Eb(a)?Nd(a):{}}function w(a,b,c){if("function"!=typeof a)return Zc;if("undefined"==typeof b||!("prototype"in a))return a;var d=a.__bindData__;if("undefined"==typeof d&&(Xd.funcNames&&(d=!a.name),d=d||!Xd.funcDecomp,!d)){var e=Fd.call(a);Xd.funcNames||(d=!D.test(e)),d||(d=H.test(e),Yd(a,d))}if(d===!1||d!==!0&&1&d[1])return a;switch(c){case 1:return function(c){return a.call(b,c)};case 2:return function(c,d){return a.call(b,c,d)};case 3:return function(c,d,e){return a.call(b,c,d,e)};case 4:return function(c,d,e,f){return a.call(b,c,d,e,f)}}return Ic(a,b)}function Y(a){function b(){var a=i?g:this;if(e){var n=o(e);Id.apply(n,arguments)}if((f||k)&&(n||(n=o(arguments)),f&&Id.apply(n,f),k&&n.length<h))return d|=16,Y([c,l?d:-4&d,n,null,g,h]);if(n||(n=arguments),j&&(c=a[m]),this instanceof b){a=s(c.prototype);var p=c.apply(a,n);return Eb(p)?p:a}return c.apply(a,n)}var c=a[0],d=a[1],e=a[2],f=a[3],g=a[4],h=a[5],i=1&d,j=2&d,k=4&d,l=8&d,m=c;return Yd(b,a),b}function $(a,b){var c=-1,f=ib(),g=a?a.length:0,h=g>=v&&f===d,j=[];if(h){var k=i(b);k?(f=e,b=k):h=!1}for(;++c<g;){var l=a[c];f(b,l)<0&&j.push(l)}return h&&n(b),j}function _(a,b,c,d){for(var e=(d||0)-1,f=a?a.length:0,g=[];++e<f;){var h=a[e];if(h&&"object"==typeof h&&"number"==typeof h.length&&(Zd(h)||mb(h))){b||(h=_(h,b,c));var i=-1,j=h.length,k=g.length;for(g.length+=j;++i<j;)g[k++]=h[i]}else c||g.push(h)}return g}function ab(a,b,c,d,e,f){if(c){var g=c(a,b);if("undefined"!=typeof g)return!!g}if(a===b)return 0!==a||1/a==1/b;var h=typeof a,i=typeof b;if(!(a!==a||a&&X[h]||b&&X[i]))return!1;if(null==a||null==b)return a===b;var j=Ad.call(a),l=Ad.call(b);if(j==L&&(j=R),l==L&&(l=R),j!=l)return!1;switch(j){case N:case O:return+a==+b;case Q:return a!=+a?b!=+b:0==a?1/a==1/b:a==+b;case S:case T:return a==vd(b)}var n=j==M;if(!n){var o=Hd.call(a,"__wrapped__"),p=Hd.call(b,"__wrapped__");if(o||p)return ab(o?a.__wrapped__:a,p?b.__wrapped__:b,c,d,e,f);if(j!=R)return!1;var q=a.constructor,r=b.constructor;if(q!=r&&!(Db(q)&&q instanceof q&&Db(r)&&r instanceof r)&&"constructor"in a&&"constructor"in b)return!1}var s=!e;e||(e=k()),f||(f=k());for(var t=e.length;t--;)if(e[t]==a)return f[t]==b;var u=0;if(g=!0,e.push(a),f.push(b),n){if(t=a.length,u=b.length,g=u==t,g||d)for(;u--;){var v=t,w=b[u];if(d)for(;v--&&!(g=ab(a[v],w,c,d,e,f)););else if(!(g=ab(a[u],w,c,d,e,f)))break}}else ge(b,function(b,h,i){return Hd.call(i,h)?(u++,g=Hd.call(a,h)&&ab(a[h],b,c,d,e,f)):void 0}),g&&!d&&ge(a,function(a,b,c){return Hd.call(c,b)?g=--u>-1:void 0});return e.pop(),f.pop(),s&&(m(e),m(f)),g}function bb(a,b,c,d,e){(Zd(b)?Yb:he)(b,function(b,f){var g,h,i=b,j=a[f];if(b&&((h=Zd(b))||ie(b))){for(var k=d.length;k--;)if(g=d[k]==b){j=e[k];break}if(!g){var l;c&&(i=c(j,b),(l="undefined"!=typeof i)&&(j=i)),l||(j=h?Zd(j)?j:[]:ie(j)?j:{}),d.push(b),e.push(j),l||bb(j,b,c,d,e)}}else c&&(i=c(j,b),"undefined"==typeof i&&(i=b)),"undefined"!=typeof i&&(j=i);a[f]=j})}function db(a,b){return a+Ed(Vd()*(b-a+1))}function eb(a,b,c){var f=-1,g=ib(),h=a?a.length:0,j=[],l=!b&&h>=v&&g===d,o=c||l?k():j;if(l){var p=i(o);g=e,o=p}for(;++f<h;){var q=a[f],r=c?c(q,f,a):q;(b?!f||o[o.length-1]!==r:g(o,r)<0)&&((c||l)&&o.push(r),j.push(q))}return l?(m(o.array),n(o)):c&&m(o),j}function fb(a){return function(c,d,e){var f={};d=b.createCallback(d,e,3);var g=-1,h=c?c.length:0;if("number"==typeof h)for(;++g<h;){var i=c[g];a(f,i,d(i,g,c),c)}else he(c,function(b,c,e){a(f,b,d(b,c,e),e)});return f}}function gb(a,b,c,d,e,g){var h=1&b,i=2&b,j=4&b,k=16&b,l=32&b;if(!i&&!Db(a))throw new wd;k&&!c.length&&(b&=-17,k=c=!1),l&&!d.length&&(b&=-33,l=d=!1);var m=a&&a.__bindData__;if(m&&m!==!0)return m=o(m),m[2]&&(m[2]=o(m[2])),m[3]&&(m[3]=o(m[3])),!h||1&m[1]||(m[4]=e),!h&&1&m[1]&&(b|=8),!j||4&m[1]||(m[5]=g),k&&Id.apply(m[2]||(m[2]=[]),c),l&&Ld.apply(m[3]||(m[3]=[]),d),m[1]|=b,gb.apply(null,m);var n=1==b||17===b?f:Y;return n([a,b,c,d,e,g])}function hb(a){return ae[a]}function ib(){var a=(a=b.indexOf)===rc?d:a;return a}function jb(a){return"function"==typeof a&&Bd.test(a)}function kb(a){var b,c;return a&&Ad.call(a)==R&&(b=a.constructor,!Db(b)||b instanceof b)?(ge(a,function(a,b){c=b}),"undefined"==typeof c||Hd.call(a,c)):!1}function lb(a){return be[a]}function mb(a){return a&&"object"==typeof a&&"number"==typeof a.length&&Ad.call(a)==L||!1}function nb(a,b,c,d){return"boolean"!=typeof b&&null!=b&&(d=c,c=b,b=!1),r(a,b,"function"==typeof c&&w(c,d,1))}function ob(a,b,c){return r(a,!0,"function"==typeof b&&w(b,c,1))}function pb(a,b){var c=s(a);return b?ee(c,b):c}function qb(a,c,d){var e;return c=b.createCallback(c,d,3),he(a,function(a,b,d){return c(a,b,d)?(e=b,!1):void 0}),e}function rb(a,c,d){var e;return c=b.createCallback(c,d,3),tb(a,function(a,b,d){return c(a,b,d)?(e=b,!1):void 0}),e}function sb(a,b,c){var d=[];ge(a,function(a,b){d.push(b,a)});var e=d.length;for(b=w(b,c,3);e--&&b(d[e--],d[e],a)!==!1;);return a}function tb(a,b,c){var d=_d(a),e=d.length;for(b=w(b,c,3);e--;){var f=d[e];if(b(a[f],f,a)===!1)break}return a}function ub(a){var b=[];return ge(a,function(a,c){Db(a)&&b.push(c)}),b.sort()}function vb(a,b){return a?Hd.call(a,b):!1}function wb(a){for(var b=-1,c=_d(a),d=c.length,e={};++b<d;){var f=c[b];e[a[f]]=f}return e}function xb(a){return a===!0||a===!1||a&&"object"==typeof a&&Ad.call(a)==N||!1}function yb(a){return a&&"object"==typeof a&&Ad.call(a)==O||!1}function zb(a){return a&&1===a.nodeType||!1}function Ab(a){var b=!0;if(!a)return b;var c=Ad.call(a),d=a.length;return c==M||c==T||c==L||c==R&&"number"==typeof d&&Db(a.splice)?!d:(he(a,function(){return b=!1}),b)}function Bb(a,b,c,d){return ab(a,b,"function"==typeof c&&w(c,d,2))}function Cb(a){return Pd(a)&&!Qd(parseFloat(a))}function Db(a){return"function"==typeof a}function Eb(a){return!(!a||!X[typeof a])}function Fb(a){return Hb(a)&&a!=+a}function Gb(a){return null===a}function Hb(a){return"number"==typeof a||a&&"object"==typeof a&&Ad.call(a)==Q||!1}function Ib(a){return a&&"object"==typeof a&&Ad.call(a)==S||!1}function Jb(a){return"string"==typeof a||a&&"object"==typeof a&&Ad.call(a)==T||!1}function Kb(a){return"undefined"==typeof a}function Lb(a,c,d){var e={};return c=b.createCallback(c,d,3),he(a,function(a,b,d){e[b]=c(a,b,d)}),e}function Mb(a){var b=arguments,c=2;if(!Eb(a))return a;if("number"!=typeof b[2]&&(c=b.length),c>3&&"function"==typeof b[c-2])var d=w(b[--c-1],b[c--],2);else c>2&&"function"==typeof b[c-1]&&(d=b[--c]);for(var e=o(arguments,1,c),f=-1,g=k(),h=k();++f<c;)bb(a,e[f],d,g,h);return m(g),m(h),a}function Nb(a,c,d){var e={};if("function"!=typeof c){var f=[];ge(a,function(a,b){f.push(b)}),f=$(f,_(arguments,!0,!1,1));for(var g=-1,h=f.length;++g<h;){var i=f[g];e[i]=a[i]}}else c=b.createCallback(c,d,3),ge(a,function(a,b,d){c(a,b,d)||(e[b]=a)});return e}function Ob(a){for(var b=-1,c=_d(a),d=c.length,e=nd(d);++b<d;){var f=c[b];e[b]=[f,a[f]]}return e}function Pb(a,c,d){var e={};if("function"!=typeof c)for(var f=-1,g=_(arguments,!0,!1,1),h=Eb(a)?g.length:0;++f<h;){var i=g[f];i in a&&(e[i]=a[i])}else c=b.createCallback(c,d,3),ge(a,function(a,b,d){c(a,b,d)&&(e[b]=a)});return e}function Qb(a,c,d,e){var f=Zd(a);if(null==d)if(f)d=[];else{var g=a&&a.constructor,h=g&&g.prototype;d=s(h)}return c&&(c=b.createCallback(c,e,4),(f?Yb:he)(a,function(a,b,e){return c(d,a,b,e)})),d}function Rb(a){for(var b=-1,c=_d(a),d=c.length,e=nd(d);++b<d;)e[b]=a[c[b]];return e}function Sb(a){for(var b=arguments,c=-1,d=_(b,!0,!1,1),e=b[2]&&b[2][b[1]]===a?1:d.length,f=nd(e);++c<e;)f[c]=a[d[c]];return f}function Tb(a,b,c){var d=-1,e=ib(),f=a?a.length:0,g=!1;return c=(0>c?Sd(0,f+c):c)||0,Zd(a)?g=e(a,b,c)>-1:"number"==typeof f?g=(Jb(a)?a.indexOf(b,c):e(a,b,c))>-1:he(a,function(a){return++d>=c?!(g=a===b):void 0}),g}function Ub(a,c,d){var e=!0;c=b.createCallback(c,d,3);var f=-1,g=a?a.length:0;if("number"==typeof g)for(;++f<g&&(e=!!c(a[f],f,a)););else he(a,function(a,b,d){return e=!!c(a,b,d)});return e}function Vb(a,c,d){var e=[];c=b.createCallback(c,d,3);var f=-1,g=a?a.length:0;if("number"==typeof g)for(;++f<g;){var h=a[f];c(h,f,a)&&e.push(h)}else he(a,function(a,b,d){c(a,b,d)&&e.push(a)});return e}function Wb(a,c,d){c=b.createCallback(c,d,3);var e=-1,f=a?a.length:0;if("number"!=typeof f){var g;return he(a,function(a,b,d){return c(a,b,d)?(g=a,!1):void 0}),g}for(;++e<f;){var h=a[e];if(c(h,e,a))return h}}function Xb(a,c,d){var e;return c=b.createCallback(c,d,3),Zb(a,function(a,b,d){return c(a,b,d)?(e=a,!1):void 0}),e}function Yb(a,b,c){var d=-1,e=a?a.length:0;if(b=b&&"undefined"==typeof c?b:w(b,c,3),"number"==typeof e)for(;++d<e&&b(a[d],d,a)!==!1;);else he(a,b);return a}function Zb(a,b,c){var d=a?a.length:0;if(b=b&&"undefined"==typeof c?b:w(b,c,3),"number"==typeof d)for(;d--&&b(a[d],d,a)!==!1;);else{var e=_d(a);d=e.length,he(a,function(a,c,f){return c=e?e[--d]:--d,b(f[c],c,f)})}return a}function $b(a,b){var c=o(arguments,2),d=-1,e="function"==typeof b,f=a?a.length:0,g=nd("number"==typeof f?f:0);return Yb(a,function(a){g[++d]=(e?b:a[b]).apply(a,c)}),g}function _b(a,c,d){var e=-1,f=a?a.length:0;if(c=b.createCallback(c,d,3),"number"==typeof f)for(var g=nd(f);++e<f;)g[e]=c(a[e],e,a);else g=[],he(a,function(a,b,d){g[++e]=c(a,b,d)});return g}function ac(a,c,d){var e=-1/0,f=e;if("function"!=typeof c&&d&&d[c]===a&&(c=null),null==c&&Zd(a))for(var h=-1,i=a.length;++h<i;){var j=a[h];j>f&&(f=j)}else c=null==c&&Jb(a)?g:b.createCallback(c,d,3),Yb(a,function(a,b,d){var g=c(a,b,d);g>e&&(e=g,f=a)});return f}function bc(a,c,d){var e=1/0,f=e;if("function"!=typeof c&&d&&d[c]===a&&(c=null),null==c&&Zd(a))for(var h=-1,i=a.length;++h<i;){var j=a[h];f>j&&(f=j)}else c=null==c&&Jb(a)?g:b.createCallback(c,d,3),Yb(a,function(a,b,d){var g=c(a,b,d);e>g&&(e=g,f=a)});return f}function cc(a,c,d,e){if(!a)return d;var f=arguments.length<3;c=b.createCallback(c,e,4);var g=-1,h=a.length;if("number"==typeof h)for(f&&(d=a[++g]);++g<h;)d=c(d,a[g],g,a);else he(a,function(a,b,e){d=f?(f=!1,a):c(d,a,b,e)});return d}function dc(a,c,d,e){var f=arguments.length<3;return c=b.createCallback(c,e,4),Zb(a,function(a,b,e){d=f?(f=!1,a):c(d,a,b,e)}),d}function ec(a,c,d){return c=b.createCallback(c,d,3),Vb(a,function(a,b,d){return!c(a,b,d)})}function fc(a,b,c){if(a&&"number"!=typeof a.length&&(a=Rb(a)),null==b||c)return a?a[db(0,a.length-1)]:q;var d=gc(a);return d.length=Td(Sd(0,b),d.length),d}function gc(a){var b=-1,c=a?a.length:0,d=nd("number"==typeof c?c:0);return Yb(a,function(a){var c=db(0,++b);d[b]=d[c],d[c]=a}),d}function hc(a){var b=a?a.length:0;return"number"==typeof b?b:_d(a).length}function ic(a,c,d){var e;c=b.createCallback(c,d,3);var f=-1,g=a?a.length:0;if("number"==typeof g)for(;++f<g&&!(e=c(a[f],f,a)););else he(a,function(a,b,d){return!(e=c(a,b,d))});return!!e}function jc(a,c,d){var e=-1,f=Zd(c),g=a?a.length:0,i=nd("number"==typeof g?g:0);for(f||(c=b.createCallback(c,d,3)),Yb(a,function(a,b,d){var g=i[++e]=l();f?g.criteria=_b(c,function(b){return a[b]}):(g.criteria=k())[0]=c(a,b,d),g.index=e,g.value=a}),g=i.length,i.sort(h);g--;){var j=i[g];i[g]=j.value,f||m(j.criteria),n(j)}return i}function kc(a){return a&&"number"==typeof a.length?o(a):Rb(a)}function lc(a){for(var b=-1,c=a?a.length:0,d=[];++b<c;){var e=a[b];e&&d.push(e)}return d}function mc(a){return $(a,_(arguments,!0,!0,1))}function nc(a,c,d){var e=-1,f=a?a.length:0;for(c=b.createCallback(c,d,3);++e<f;)if(c(a[e],e,a))return e;return-1}function oc(a,c,d){var e=a?a.length:0;for(c=b.createCallback(c,d,3);e--;)if(c(a[e],e,a))return e;return-1}function pc(a,c,d){var e=0,f=a?a.length:0;if("number"!=typeof c&&null!=c){var g=-1;for(c=b.createCallback(c,d,3);++g<f&&c(a[g],g,a);)e++}else if(e=c,null==e||d)return a?a[0]:q;return o(a,0,Td(Sd(0,e),f))}function qc(a,b,c,d){return"boolean"!=typeof b&&null!=b&&(d=c,c="function"!=typeof b&&d&&d[b]===a?null:b,b=!1),null!=c&&(a=_b(a,c,d)),_(a,b)}function rc(a,b,c){if("number"==typeof c){var e=a?a.length:0;c=0>c?Sd(0,e+c):c||0}else if(c){var f=Ac(a,b);return a[f]===b?f:-1}return d(a,b,c)}function sc(a,c,d){var e=0,f=a?a.length:0;if("number"!=typeof c&&null!=c){var g=f;for(c=b.createCallback(c,d,3);g--&&c(a[g],g,a);)e++}else e=null==c||d?1:c||e;return o(a,0,Td(Sd(0,f-e),f))}function tc(){for(var a=[],b=-1,c=arguments.length,f=k(),g=ib(),h=g===d,j=k();++b<c;){var l=arguments[b];(Zd(l)||mb(l))&&(a.push(l),f.push(h&&l.length>=v&&i(b?a[b]:j)))}var o=a[0],p=-1,q=o?o.length:0,r=[];a:for(;++p<q;){var s=f[0];if(l=o[p],(s?e(s,l):g(j,l))<0){for(b=c,(s||j).push(l);--b;)if(s=f[b],(s?e(s,l):g(a[b],l))<0)continue a;r.push(l)}}for(;c--;)s=f[c],s&&n(s);return m(f),m(j),r}function uc(a,c,d){var e=0,f=a?a.length:0;if("number"!=typeof c&&null!=c){var g=f;for(c=b.createCallback(c,d,3);g--&&c(a[g],g,a);)e++}else if(e=c,null==e||d)return a?a[f-1]:q;return o(a,Sd(0,f-e))}function vc(a,b,c){var d=a?a.length:0;for("number"==typeof c&&(d=(0>c?Sd(0,d+c):Td(c,d-1))+1);d--;)if(a[d]===b)return d;return-1}function wc(a){for(var b=arguments,c=0,d=b.length,e=a?a.length:0;++c<d;)for(var f=-1,g=b[c];++f<e;)a[f]===g&&(Kd.call(a,f--,1),e--);return a}function xc(a,b,c){a=+a||0,c="number"==typeof c?c:+c||1,null==b&&(b=a,a=0);for(var d=-1,e=Sd(0,Cd((b-a)/(c||1))),f=nd(e);++d<e;)f[d]=a,a+=c;return f}function yc(a,c,d){var e=-1,f=a?a.length:0,g=[];for(c=b.createCallback(c,d,3);++e<f;){var h=a[e];c(h,e,a)&&(g.push(h),Kd.call(a,e--,1),f--)}return g}function zc(a,c,d){if("number"!=typeof c&&null!=c){var e=0,f=-1,g=a?a.length:0;for(c=b.createCallback(c,d,3);++f<g&&c(a[f],f,a);)e++}else e=null==c||d?1:Sd(0,c);return o(a,e)}function Ac(a,c,d,e){var f=0,g=a?a.length:f;for(d=d?b.createCallback(d,e,1):Zc,c=d(c);g>f;){var h=f+g>>>1;d(a[h])<c?f=h+1:g=h}return f}function Bc(){return eb(_(arguments,!0,!0))}function Cc(a,c,d,e){return"boolean"!=typeof c&&null!=c&&(e=d,d="function"!=typeof c&&e&&e[c]===a?null:c,c=!1),null!=d&&(d=b.createCallback(d,e,3)),eb(a,c,d)}function Dc(a){return $(a,o(arguments,1))}function Ec(){for(var a=-1,b=arguments.length;++a<b;){var c=arguments[a];if(Zd(c)||mb(c))var d=d?eb($(d,c).concat($(c,d))):c}return d||[]}function Fc(){for(var a=arguments.length>1?arguments:arguments[0],b=-1,c=a?ac(me(a,"length")):0,d=nd(0>c?0:c);++b<c;)d[b]=me(a,b);return d}function Gc(a,b){var c=-1,d=a?a.length:0,e={};for(b||!d||Zd(a[0])||(b=[]);++c<d;){var f=a[c];b?e[f]=b[c]:f&&(e[f[0]]=f[1])}return e}function Hc(a,b){if(!Db(b))throw new wd;return function(){return--a<1?b.apply(this,arguments):void 0}}function Ic(a,b){return arguments.length>2?gb(a,17,o(arguments,2),null,b):gb(a,1,null,null,b)}function Jc(a){for(var b=arguments.length>1?_(arguments,!0,!1,1):ub(a),c=-1,d=b.length;++c<d;){var e=b[c];a[e]=gb(a[e],1,null,null,a)}return a}function Kc(a,b){return arguments.length>2?gb(b,19,o(arguments,2),null,a):gb(b,3,null,null,a)}function Lc(){for(var a=arguments,b=a.length;b--;)if(!Db(a[b]))throw new wd;return function(){for(var b=arguments,c=a.length;c--;)b=[a[c].apply(this,b)];return b[0]}}function Mc(a,b){return b="number"==typeof b?b:+b||a.length,gb(a,4,null,null,null,b)}function Nc(a,b,c){var d,e,f,g,h,i,j,k=0,l=!1,m=!0;if(!Db(a))throw new wd;if(b=Sd(0,b)||0,c===!0){var n=!0;m=!1}else Eb(c)&&(n=c.leading,l="maxWait"in c&&(Sd(b,c.maxWait)||0),m="trailing"in c?c.trailing:m);var o=function(){var c=b-(oe()-g);if(0>=c){e&&Dd(e);var l=j;e=i=j=q,l&&(k=oe(),f=a.apply(h,d),i||e||(d=h=null))}else i=Jd(o,c)},p=function(){i&&Dd(i),e=i=j=q,(m||l!==b)&&(k=oe(),f=a.apply(h,d),i||e||(d=h=null))};return function(){if(d=arguments,g=oe(),h=this,j=m&&(i||!n),l===!1)var c=n&&!i;else{e||n||(k=g);var q=l-(g-k),r=0>=q;r?(e&&(e=Dd(e)),k=g,f=a.apply(h,d)):e||(e=Jd(p,q))}return r&&i?i=Dd(i):i||b===l||(i=Jd(o,b)),c&&(r=!0,f=a.apply(h,d)),!r||i||e||(d=h=null),f}}function Oc(a){if(!Db(a))throw new wd;var b=o(arguments,1);
return Jd(function(){a.apply(q,b)},1)}function Pc(a,b){if(!Db(a))throw new wd;var c=o(arguments,2);return Jd(function(){a.apply(q,c)},b)}function Qc(a,b){if(!Db(a))throw new wd;var c=function(){var d=c.cache,e=b?b.apply(this,arguments):u+arguments[0];return Hd.call(d,e)?d[e]:d[e]=a.apply(this,arguments)};return c.cache={},c}function Rc(a){var b,c;if(!Db(a))throw new wd;return function(){return b?c:(b=!0,c=a.apply(this,arguments),a=null,c)}}function Sc(a){return gb(a,16,o(arguments,1))}function Tc(a){return gb(a,32,null,o(arguments,1))}function Uc(a,b,c){var d=!0,e=!0;if(!Db(a))throw new wd;return c===!1?d=!1:Eb(c)&&(d="leading"in c?c.leading:d,e="trailing"in c?c.trailing:e),V.leading=d,V.maxWait=b,V.trailing=e,Nc(a,b,V)}function Vc(a,b){return gb(b,16,[a])}function Wc(a){return function(){return a}}function Xc(a,b,c){var d=typeof a;if(null==a||"function"==d)return w(a,b,c);if("object"!=d)return bd(a);var e=_d(a),f=e[0],g=a[f];return 1!=e.length||g!==g||Eb(g)?function(b){for(var c=e.length,d=!1;c--&&(d=ab(b[e[c]],a[e[c]],null,!0)););return d}:function(a){var b=a[f];return g===b&&(0!==g||1/g==1/b)}}function Yc(a){return null==a?"":vd(a).replace(de,hb)}function Zc(a){return a}function $c(a,d,e){var f=!0,g=d&&ub(d);d&&(e||g.length)||(null==e&&(e=d),h=c,d=a,a=b,g=ub(d)),e===!1?f=!1:Eb(e)&&"chain"in e&&(f=e.chain);var h=a,i=Db(h);Yb(g,function(b){var c=a[b]=d[b];i&&(h.prototype[b]=function(){var b=this.__chain__,d=this.__wrapped__,e=[d];Id.apply(e,arguments);var g=c.apply(a,e);if(f||b){if(d===g&&Eb(g))return this;g=new h(g),g.__chain__=b}return g})})}function _c(){return a._=zd,this}function ad(){}function bd(a){return function(b){return b[a]}}function cd(a,b,c){var d=null==a,e=null==b;if(null==c&&("boolean"==typeof a&&e?(c=a,a=1):e||"boolean"!=typeof b||(c=b,e=!0)),d&&e&&(b=1),a=+a||0,e?(b=a,a=0):b=+b||0,c||a%1||b%1){var f=Vd();return Td(a+f*(b-a+parseFloat("1e-"+((f+"").length-1))),b)}return db(a,b)}function dd(a,b){if(a){var c=a[b];return Db(c)?a[b]():c}}function ed(a,c,d){var e=b.templateSettings;a=vd(a||""),d=fe({},d,e);var f,g=fe({},d.imports,e.imports),h=_d(g),i=Rb(g),k=0,l=d.interpolate||G,m="__p += '",n=ud((d.escape||G).source+"|"+l.source+"|"+(l===E?B:G).source+"|"+(d.evaluate||G).source+"|$","g");a.replace(n,function(b,c,d,e,g,h){return d||(d=e),m+=a.slice(k,h).replace(I,j),c&&(m+="' +\n__e("+c+") +\n'"),g&&(f=!0,m+="';\n"+g+";\n__p += '"),d&&(m+="' +\n((__t = ("+d+")) == null ? '' : __t) +\n'"),k=h+b.length,b}),m+="';\n";var o=d.variable,p=o;p||(o="obj",m="with ("+o+") {\n"+m+"\n}\n"),m=(f?m.replace(y,""):m).replace(z,"$1").replace(A,"$1;"),m="function("+o+") {\n"+(p?"":o+" || ("+o+" = {});\n")+"var __t, __p = '', __e = _.escape"+(f?", __j = Array.prototype.join;\nfunction print() { __p += __j.call(arguments, '') }\n":";\n")+m+"return __p\n}";var r="\n/*\n//# sourceURL="+(d.sourceURL||"/lodash/template/source["+K++ +"]")+"\n*/";try{var s=qd(h,"return "+m+r).apply(q,i)}catch(t){throw t.source=m,t}return c?s(c):(s.source=m,s)}function fd(a,b,c){a=(a=+a)>-1?a:0;var d=-1,e=nd(a);for(b=w(b,c,1);++d<a;)e[d]=b(d);return e}function gd(a){return null==a?"":vd(a).replace(ce,lb)}function hd(a){var b=++t;return vd(null==a?"":a)+b}function id(a){return a=new c(a),a.__chain__=!0,a}function jd(a,b){return b(a),a}function kd(){return this.__chain__=!0,this}function ld(){return vd(this.__wrapped__)}function md(){return this.__wrapped__}a=a?cb.defaults(Z.Object(),a,cb.pick(Z,J)):Z;var nd=a.Array,od=a.Boolean,pd=a.Date,qd=a.Function,rd=a.Math,sd=a.Number,td=a.Object,ud=a.RegExp,vd=a.String,wd=a.TypeError,xd=[],yd=td.prototype,zd=a._,Ad=yd.toString,Bd=ud("^"+vd(Ad).replace(/[.*+?^${}()|[\]\\]/g,"\\$&").replace(/toString| for [^\]]+/g,".*?")+"$"),Cd=rd.ceil,Dd=a.clearTimeout,Ed=rd.floor,Fd=qd.prototype.toString,Gd=jb(Gd=td.getPrototypeOf)&&Gd,Hd=yd.hasOwnProperty,Id=xd.push,Jd=a.setTimeout,Kd=xd.splice,Ld=xd.unshift,Md=function(){try{var a={},b=jb(b=td.defineProperty)&&b,c=b(a,a,a)&&b}catch(d){}return c}(),Nd=jb(Nd=td.create)&&Nd,Od=jb(Od=nd.isArray)&&Od,Pd=a.isFinite,Qd=a.isNaN,Rd=jb(Rd=td.keys)&&Rd,Sd=rd.max,Td=rd.min,Ud=a.parseInt,Vd=rd.random,Wd={};Wd[M]=nd,Wd[N]=od,Wd[O]=pd,Wd[P]=qd,Wd[R]=td,Wd[Q]=sd,Wd[S]=ud,Wd[T]=vd,c.prototype=b.prototype;var Xd=b.support={};Xd.funcDecomp=!jb(a.WinRTError)&&H.test(p),Xd.funcNames="string"==typeof qd.name,b.templateSettings={escape:/<%-([\s\S]+?)%>/g,evaluate:/<%([\s\S]+?)%>/g,interpolate:E,variable:"",imports:{_:b}},Nd||(s=function(){function b(){}return function(c){if(Eb(c)){b.prototype=c;var d=new b;b.prototype=null}return d||a.Object()}}());var Yd=Md?function(a,b){W.value=b,Md(a,"__bindData__",W)}:ad,Zd=Od||function(a){return a&&"object"==typeof a&&"number"==typeof a.length&&Ad.call(a)==M||!1},$d=function(a){var b,c=a,d=[];if(!c)return d;if(!X[typeof a])return d;for(b in c)Hd.call(c,b)&&d.push(b);return d},_d=Rd?function(a){return Eb(a)?Rd(a):[]}:$d,ae={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},be=wb(ae),ce=ud("("+_d(be).join("|")+")","g"),de=ud("["+_d(ae).join("")+"]","g"),ee=function(a,b,c){var d,e=a,f=e;if(!e)return f;var g=arguments,h=0,i="number"==typeof c?2:g.length;if(i>3&&"function"==typeof g[i-2])var j=w(g[--i-1],g[i--],2);else i>2&&"function"==typeof g[i-1]&&(j=g[--i]);for(;++h<i;)if(e=g[h],e&&X[typeof e])for(var k=-1,l=X[typeof e]&&_d(e),m=l?l.length:0;++k<m;)d=l[k],f[d]=j?j(f[d],e[d]):e[d];return f},fe=function(a,b,c){var d,e=a,f=e;if(!e)return f;for(var g=arguments,h=0,i="number"==typeof c?2:g.length;++h<i;)if(e=g[h],e&&X[typeof e])for(var j=-1,k=X[typeof e]&&_d(e),l=k?k.length:0;++j<l;)d=k[j],"undefined"==typeof f[d]&&(f[d]=e[d]);return f},ge=function(a,b,c){var d,e=a,f=e;if(!e)return f;if(!X[typeof e])return f;b=b&&"undefined"==typeof c?b:w(b,c,3);for(d in e)if(b(e[d],d,a)===!1)return f;return f},he=function(a,b,c){var d,e=a,f=e;if(!e)return f;if(!X[typeof e])return f;b=b&&"undefined"==typeof c?b:w(b,c,3);for(var g=-1,h=X[typeof e]&&_d(e),i=h?h.length:0;++g<i;)if(d=h[g],b(e[d],d,a)===!1)return f;return f},ie=Gd?function(a){if(!a||Ad.call(a)!=R)return!1;var b=a.valueOf,c=jb(b)&&(c=Gd(b))&&Gd(c);return c?a==c||Gd(a)==c:kb(a)}:kb,je=fb(function(a,b,c){Hd.call(a,c)?a[c]++:a[c]=1}),ke=fb(function(a,b,c){(Hd.call(a,c)?a[c]:a[c]=[]).push(b)}),le=fb(function(a,b,c){a[c]=b}),me=_b,ne=Vb,oe=jb(oe=pd.now)&&oe||function(){return(new pd).getTime()},pe=8==Ud(x+"08")?Ud:function(a,b){return Ud(Jb(a)?a.replace(F,""):a,b||0)};return b.after=Hc,b.assign=ee,b.at=Sb,b.bind=Ic,b.bindAll=Jc,b.bindKey=Kc,b.chain=id,b.compact=lc,b.compose=Lc,b.constant=Wc,b.countBy=je,b.create=pb,b.createCallback=Xc,b.curry=Mc,b.debounce=Nc,b.defaults=fe,b.defer=Oc,b.delay=Pc,b.difference=mc,b.filter=Vb,b.flatten=qc,b.forEach=Yb,b.forEachRight=Zb,b.forIn=ge,b.forInRight=sb,b.forOwn=he,b.forOwnRight=tb,b.functions=ub,b.groupBy=ke,b.indexBy=le,b.initial=sc,b.intersection=tc,b.invert=wb,b.invoke=$b,b.keys=_d,b.map=_b,b.mapValues=Lb,b.max=ac,b.memoize=Qc,b.merge=Mb,b.min=bc,b.omit=Nb,b.once=Rc,b.pairs=Ob,b.partial=Sc,b.partialRight=Tc,b.pick=Pb,b.pluck=me,b.property=bd,b.pull=wc,b.range=xc,b.reject=ec,b.remove=yc,b.rest=zc,b.shuffle=gc,b.sortBy=jc,b.tap=jd,b.throttle=Uc,b.times=fd,b.toArray=kc,b.transform=Qb,b.union=Bc,b.uniq=Cc,b.values=Rb,b.where=ne,b.without=Dc,b.wrap=Vc,b.xor=Ec,b.zip=Fc,b.zipObject=Gc,b.collect=_b,b.drop=zc,b.each=Yb,b.eachRight=Zb,b.extend=ee,b.methods=ub,b.object=Gc,b.select=Vb,b.tail=zc,b.unique=Cc,b.unzip=Fc,$c(b),b.clone=nb,b.cloneDeep=ob,b.contains=Tb,b.escape=Yc,b.every=Ub,b.find=Wb,b.findIndex=nc,b.findKey=qb,b.findLast=Xb,b.findLastIndex=oc,b.findLastKey=rb,b.has=vb,b.identity=Zc,b.indexOf=rc,b.isArguments=mb,b.isArray=Zd,b.isBoolean=xb,b.isDate=yb,b.isElement=zb,b.isEmpty=Ab,b.isEqual=Bb,b.isFinite=Cb,b.isFunction=Db,b.isNaN=Fb,b.isNull=Gb,b.isNumber=Hb,b.isObject=Eb,b.isPlainObject=ie,b.isRegExp=Ib,b.isString=Jb,b.isUndefined=Kb,b.lastIndexOf=vc,b.mixin=$c,b.noConflict=_c,b.noop=ad,b.now=oe,b.parseInt=pe,b.random=cd,b.reduce=cc,b.reduceRight=dc,b.result=dd,b.runInContext=p,b.size=hc,b.some=ic,b.sortedIndex=Ac,b.template=ed,b.unescape=gd,b.uniqueId=hd,b.all=Ub,b.any=ic,b.detect=Wb,b.findWhere=Wb,b.foldl=cc,b.foldr=dc,b.include=Tb,b.inject=cc,$c(function(){var a={};return he(b,function(c,d){b.prototype[d]||(a[d]=c)}),a}(),!1),b.first=pc,b.last=uc,b.sample=fc,b.take=pc,b.head=pc,he(b,function(a,d){var e="sample"!==d;b.prototype[d]||(b.prototype[d]=function(b,d){var f=this.__chain__,g=a(this.__wrapped__,b,d);return f||null!=b&&(!d||e&&"function"==typeof b)?new c(g,f):g})}),b.VERSION="2.4.1",b.prototype.chain=kd,b.prototype.toString=ld,b.prototype.value=md,b.prototype.valueOf=md,Yb(["join","pop","shift"],function(a){var d=xd[a];b.prototype[a]=function(){var a=this.__chain__,b=d.apply(this.__wrapped__,arguments);return a?new c(b,a):b}}),Yb(["push","reverse","sort","unshift"],function(a){var c=xd[a];b.prototype[a]=function(){return c.apply(this.__wrapped__,arguments),this}}),Yb(["concat","slice","splice"],function(a){var d=xd[a];b.prototype[a]=function(){return new c(d.apply(this.__wrapped__,arguments),this.__chain__)}}),b}var q,r=[],s=[],t=0,u=+new Date+"",v=75,w=40,x=" 	\f ﻿\n\r\u2028\u2029 ᠎             　",y=/\b__p \+= '';/g,z=/\b(__p \+=) '' \+/g,A=/(__e\(.*?\)|\b__t\)) \+\n'';/g,B=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,C=/\w*$/,D=/^\s*function[ \n\r\t]+\w/,E=/<%=([\s\S]+?)%>/g,F=RegExp("^["+x+"]*0+(?=.$)"),G=/($^)/,H=/\bthis\b/,I=/['\n\r\t\u2028\u2029\\]/g,J=["Array","Boolean","Date","Function","Math","Number","Object","RegExp","String","_","attachEvent","clearTimeout","isFinite","isNaN","parseInt","setTimeout"],K=0,L="[object Arguments]",M="[object Array]",N="[object Boolean]",O="[object Date]",P="[object Function]",Q="[object Number]",R="[object Object]",S="[object RegExp]",T="[object String]",U={};U[P]=!1,U[L]=U[M]=U[N]=U[O]=U[Q]=U[R]=U[S]=U[T]=!0;var V={leading:!1,maxWait:0,trailing:!1},W={configurable:!1,enumerable:!1,value:null,writable:!1},X={"boolean":!1,"function":!0,object:!0,number:!1,string:!1,undefined:!1},Y={"\\":"\\","'":"'","\n":"n","\r":"r","	":"t","\u2028":"u2028","\u2029":"u2029"},Z=X[typeof window]&&window||this,$=X[typeof c]&&c&&!c.nodeType&&c,_=X[typeof b]&&b&&!b.nodeType&&b,ab=_&&_.exports===$&&$,bb=X[typeof a]&&a;!bb||bb.global!==bb&&bb.window!==bb||(Z=bb);var cb=p();"function"==typeof define&&"object"==typeof define.amd&&define.amd?(Z._=cb,define(function(){return cb})):$&&_?ab?(_.exports=cb)._=cb:$._=cb:Z._=cb}).call(this)}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],59:[function(require,module,exports){module.exports=function(){var t=function anonymous(locals,filters,escape){escape=escape||function(a){return String(a).replace(/&(?!\w+;)/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")};var buf=[];with(locals||{})!function(){buf.push("");require("./locale");buf.push('\n\n<svg xmlns="http://www.w3.org/2000/svg" version="1.1" id="svgCalc">\n  <image id="background" height="400" width="400" x="0" y="0" xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="/blockly/media/skins/calc/background.png"></image>\n  <g id="userExpression" class="expr" transform="translate(0, 100)">\n  </g>\n  <g id="answerExpression" class="expr" transform="translate(0, 350)">\n  </g>\n</svg>\n')}();return buf.join("")};return function(a){return t(a,require("ejs").filters)}}()},{"./locale":56,ejs:281}],55:[function(a,b){var c=(a("./locale"),a("../block_utils"));b.exports={example1:{solutionBlocks:c.calcBlockXml("functional_times",[c.calcBlockXml("functional_plus",[1,2]),c.calcBlockXml("functional_plus",[3,4])]),ideal:1/0,toolbox:c.createToolbox(c.blockOfType("functional_plus")+c.blockOfType("functional_minus")+c.blockOfType("functional_times")+c.blockOfType("functional_dividedby")+c.blockOfType("functional_math_number")+'<block type="functional_math_number_dropdown">  <title name="NUM" config="0,1,2,3,4,5,6,7,8,9,10">???</title></block>'),startBlocks:"",requiredBlocks:"",freePlay:!1},custom:{answer:"",ideal:1/0,toolbox:"",startBlocks:"",requiredBlocks:"",freePlay:!1}}},{"../block_utils":35,"./locale":56}],53:[function(a,b){var c=function(a,b){this.numParams_=b,this.remaining_=Math.pow(a.length,b),this.availableValues_=a,this.indices_=[-1];for(var c=1;b>c;c++)this.indices_[c]=0};b.exports=c,c.prototype.next=function(){if(0===this.remaining_)throw new Error("empty");var a,b=0;do a=!1,this.indices_[b]++,this.indices_[b]===this.availableValues_.length&&(this.indices_[b]=0,b++,a=!0);while(a&&b<this.numParams_);return this.remaining_--,this.indices_.map(function(a){return this.availableValues_[a]},this)},c.prototype.remaining=function(){return this.remaining_}},{}],51:[function(a,b){function c(a){var b;if(!a)return null;var d=a.getChildren()[0];switch(a.type){case"functional_compute":return d?c(d):new f(null,[],null);case"functional_plus":case"functional_minus":case"functional_times":case"functional_dividedby":case"functional_pow":case"functional_sqrt":case"functional_squared":var g=a.getTitles()[0].getValue(),h=["ARG1"];a.getInput("ARG2")&&h.push("ARG2");var i=h.map(function(b){var d=a.getInputTargetBlock(b);return d?c(d).expression:0});return new f(null,[],new e(g,i,a.id));case"functional_math_number":case"functional_math_number_dropdown":var j=a.getTitleValue("NUM")||0;return"???"===j&&(j=0),new f(null,[],new e(parseFloat(j),[],a.id));case"functional_call":b=a.getCallName();var k=Blockly.Procedures.getDefinition(b,Blockly.mainBlockSpace);if(k.isVariable())return new f(null,[],new e(b));for(var l,m,n=[],o=0;l=a.getInput("ARG"+o);o++)m=l.connection.targetBlock(),n.push(m?c(m).expression:new e(0));return new f(null,[],new e(b,n));case"functional_definition":b=a.getTitleValue("NAME");var p=d?c(d).expression:new e(0);return new f(b,a.getVars(),p);case"functional_parameters_get":return new f(null,[],new e(a.getTitleValue("VAR")));case"functional_example":return null;default:throw"Unknown block type: "+a.type}}var d=a("../utils").getLodash(),e=a("./expressionNode"),f=a("./equation"),g=a("./js-numbers/js-numbers"),h=a("../utils"),i=function(a){this.compute_=null,this.equations_=[],a&&a.forEach(function(a){var b=c(a);b&&this.addEquation_(b)},this)};b.exports=i,i.prototype.clone=function(){var a=new i;return a.compute_=null,this.compute_&&(a.compute_=this.compute_.clone()),a.equations_=this.equations_.map(function(a){return a.clone()}),a},i.prototype.addEquation_=function(a){if(a.name){if(this.getEquation(a.name))throw new Error("equation already exists: "+a.name);this.equations_.push(a)}else{if(this.compute_)throw new Error("compute expression already exists");this.compute_=a}},i.prototype.getEquation=function(a){if(null===a)return this.computeEquation();for(var b=0;b<this.equations_.length;b++)if(this.equations_[b].name===a)return this.equations_[b];return null},i.prototype.computeEquation=function(){return this.compute_},i.prototype.hasVariablesOrFunctions=function(){return this.equations_.length>0},i.prototype.computesFunctionCall=function(){if(!this.compute_)return!1;var a=this.compute_.expression;return a.isFunctionCall()},i.prototype.computesSingleVariable=function(){if(!this.compute_)return!1;var a=this.compute_.expression;return a.isVariable()},i.prototype.computesSingleConstant=function(){if(!this.compute_||1!==this.equations_.length)return!1;var a=this.equations_[0],b=this.compute_.expression;return b.isVariable()&&a.expression.isNumber()&&b.getValue()===a.name},i.prototype.isAnimatable=function(){return this.compute_?this.hasVariablesOrFunctions()?!1:0===this.compute_.expression.depth()?!1:!0:!1},i.prototype.getConstants=function(){return this.equations_.filter(function(a){return 0===a.params.length&&a.expression.isNumber()})},i.prototype.isIdenticalTo=function(a){if(this.equations_.length!==a.equations_.length)return!1;var b=a.computeEquation().expression;if(!this.compute_.expression.isIdenticalTo(b))return!1;for(var c=0;c<this.equations_.length;c++){var d=this.equations_[c],e=a.getEquation(d.name);if(!e||!d.expression.isIdenticalTo(e.expression))return!1}return!0},i.prototype.isEquivalentTo=function(a){if(this.equations_.length!==a.equations_.length)return!1;var b=a.computeEquation().expression;if(!this.compute_.expression.isEquivalentTo(b))return!1;for(var c=0;c<this.equations_.length;c++){var d=this.equations_[c],e=a.getEquation(d.name);if(!e||!d.expression.isEquivalentTo(e.expression))return!1}return!0},i.prototype.sortedEquations=function(){return this.equations_.sort(function(a,b){return a.name.localeCompare(b.name)}),this.equations_},i.prototype.hasDivZero=function(){var a=this.evaluate();return a.err&&a.err instanceof e.DivideByZeroError},i.prototype.evaluate=function(){return this.evaluateWithExpression(this.compute_.expression)},i.prototype.evaluateWithExpression=function(a){if(0===this.equations_.length)return a.evaluate();var b,c,f,i={},j=function(a){c[a]=g.makeFloat(1)};do{b=!1;for(var k=0;k<this.equations_.length;k++){var l=this.equations_[k];if(l.isFunction()){if(i[l.name])continue;if(c=d.clone(i),c[l.name]={variables:l.params,expression:l.expression},l.params.forEach(j),f=l.expression.evaluate(c),f.err){if(f.err instanceof e.DivideByZeroError||h.isInfiniteRecursionError(f.err))return{err:f.err};continue}b=!0,i[l.name]={variables:l.params,expression:l.expression}}else if(void 0===i[l.name])if(f=l.expression.evaluate(i),f.err){if(f.err instanceof e.DivideByZeroError)return{err:f.err}}else b=!0,i[l.name]=f.result}}while(b);return a.evaluate(i)},i.__testonly__={getEquationFromBlock:c}},{"../utils":271,"./equation":50,"./expressionNode":52,"./js-numbers/js-numbers":54}],52:[function(a,b){function c(a){this.message=a||""}function d(a){return"number"==typeof a?h.makeFloat(a):a}var e=a("../utils"),f=e.getLodash(),g=a("./token"),h=a("./js-numbers/js-numbers"),i={ARITHMETIC:1,FUNCTION_CALL:2,VARIABLE:3,NUMBER:4,EXPONENTIAL:5},j=function(a,b,c){if(this.value_=d(a),this.blockId_=c,void 0===b&&(b=[]),!Array.isArray(b))throw new Error("Expected array");if(this.children_=b.map(function(a){return a instanceof j||(a=new j(a)),a}),this.isNumber()&&b.length>0)throw new Error("Can't have args for number ExpressionNode");if(this.isArithmetic()&&2!==b.length)throw new Error("Arithmetic ExpressionNode needs 2 args")};b.exports=j,j.DivideByZeroError=c,j.prototype.getType_=function(){return-1!==["+","-","*","/"].indexOf(this.value_)?i.ARITHMETIC:-1!==["pow","sqrt","sqr"].indexOf(this.value_)?i.EXPONENTIAL:"string"==typeof this.value_?0===this.children_.length?i.VARIABLE:i.FUNCTION_CALL:h.isSchemeNumber(this.value_)?i.NUMBER:void 0},j.prototype.isArithmetic=function(){return this.getType_()===i.ARITHMETIC},j.prototype.isFunctionCall=function(){return this.getType_()===i.FUNCTION_CALL},j.prototype.isVariable=function(){return this.getType_()===i.VARIABLE},j.prototype.isNumber=function(){return this.getType_()===i.NUMBER},j.prototype.isExponential=function(){return this.getType_()===i.EXPONENTIAL},j.prototype.isDivZero=function(){var a=this.getChildValue(1);return"/"===this.getValue()&&h.isSchemeNumber(a)&&h.equals(a,0)},j.prototype.clone=function(){var a=this.children_.map(function(a){return a.clone()});return new j(this.value_,a,this.blockId_)},j.prototype.evaluate=function(a,b){var f;try{a=a||{},b=b||{};var g,j=this.getType_();if(j===i.VARIABLE){var k=e.valueOr(b[this.value_],a[this.value_]);if(void 0===k)throw new Error("No mapping for variable during evaluation");var l=this.clone();return l.setValue(k),l.evaluate(a)}if(j===i.FUNCTION_CALL){var m=e.valueOr(b[this.value_],a[this.value_]);if(void 0===m)throw new Error("No mapping for function during evaluation");if(!m.variables||!m.expression)throw new Error("Bad mapping for: "+this.value_);if(m.variables.length!==this.children_.length)throw new Error("Bad mapping for: "+this.value_);var n={};return m.variables.forEach(function(c,d){var f=this.children_[d].evaluate(a,b);if(f.err)throw f.err;var g=f.result;n[c]=e.valueOr(b[g],g)},this),m.expression.evaluate(a,n)}if(j===i.NUMBER)return{result:this.value_};if(j!==i.ARITHMETIC&&j!==i.EXPONENTIAL)throw new Error("Unexpected");var o=this.children_[0].evaluate(a,b);if(o.err)throw o.err;if(o=o.result.toExact(),1===this.children_.length){switch(this.value_){case"sqrt":g=h.sqrt(o);break;case"sqr":g=h.sqr(o);break;default:throw new Error("Unknown operator: "+this.value_)}return{result:d(g)}}var p=this.children_[1].evaluate(a,b);if(p.err)throw p.err;switch(p=p.result.toExact(),this.value_){case"+":g=h.add(o,p);break;case"-":g=h.subtract(o,p);break;case"*":g=h.multiply(o,p);break;case"/":if(h.equals(p,0))throw new c;g=h.divide(o,p);break;case"pow":g=h.expt(o,p);break;default:throw new Error("Unknown operator: "+this.value_)}return{result:d(g)}}catch(q){f=q}return{err:f}},j.prototype.depth=function(){for(var a=0,b=0;b<this.children_.length;b++)a=Math.max(a,1+this.children_[b].depth());return a},j.prototype.getDeepestOperation=function(){if(0===this.children_.length)return null;for(var a=null,b=0,c=0;c<this.children_.length;c++){var d=this.children_[c].depth();d>b&&(b=d,a=this.children_[c])}return 0===b?this:a.getDeepestOperation()},j.prototype.collapse=function(){var a=this.getDeepestOperation();if(null===a)return!1;if(this===a){var b=this.evaluate();return b.err?!1:(this.value_=b.result,this.children_=[],!0)}return a.collapse()},j.prototype.getTokenListDiff=function(a){var b,c=a&&this.hasSameValue_(a)&&this.children_.length===a.children_.length,d=this.getType_();if(0===this.children_.length)return[new g(this.value_,!c)];var e=function(b){return this.children_[b].getTokenListDiff(c&&a.children_[b])}.bind(this);if(d===i.ARITHMETIC)return b=[new g("(",!c)],b.push([e(0),new g(" "+this.value_+" ",!c),e(1)]),b.push(new g(")",!c)),f.flatten(b);if("sqr"===this.value_)return f.flatten([new g("(",!c),e(0),new g(" ^ 2",!c),new g(")",!c)]);if("pow"===this.value_)return f.flatten([new g("(",!c),e(0),new g(" ^ ",!c),e(1),new g(")",!c)]);b=[new g(this.value_,a&&this.value_!==a.value_),new g("(",!c)];for(var h=this.children_.length,k=0;h>k;k++){k>0&&b.push(new g(",",!c));var l=e(k);1===h&&j.stripOuterParensFromTokenList(l),b.push(l)}return b.push(new g(")",!c)),f.flatten(b)},j.prototype.getTokenList=function(a){if(!a)return this.getTokenListDiff(this);if(this.depth()<=1)return this.getTokenListDiff(null);if(this.getType_()!==i.ARITHMETIC&&this.getType_()!==i.EXPONENTIAL)throw new Error("Unsupported");var b=!1;2===this.children_.length&&(b=this.children_[1].depth()>this.children_[0].depth());var c=new g("(",!1),d=new g(")",!1);"sqrt"===this.value_&&(c=new g("sqrt",!1),d=null);var e=[c,this.children_[0].getTokenList(a&&!b)];return this.children_.length>1&&e.push([new g(" "+this.value_+" ",!1),this.children_[1].getTokenList(a&&b)]),d&&e.push(d),f.flatten(e)},j.prototype.hasSameValue_=function(a){return a?this.isNumber()?h.equals(this.value_,a.value_):this.value_===a.value_:!1},j.prototype.isIdenticalTo=function(a){if(!a||!this.hasSameValue_(a)||this.children_.length!==a.children_.length)return!1;for(var b=0;b<this.children_.length;b++)if(!this.children_[b].isIdenticalTo(a.children_[b]))return!1;return!0},j.prototype.hasSameSignature=function(a){return a?this.getType_()!==i.FUNCTION_CALL||a.getType_()!==i.FUNCTION_CALL?!1:this.value_!==a.value_?!1:this.children_.length!==a.children_.length?!1:!0:!1},j.prototype.isEquivalentTo=function(a){if(this.getType_()!==i.ARITHMETIC)return this.isIdenticalTo(a);if(!a||this.value_!==a.value_)return!1;var b=this.children_[0],c=this.children_[1],d=a.children_[0],e=a.children_[1];return b.isEquivalentTo(d)?c.isEquivalentTo(e):b.isEquivalentTo(e)?c.isEquivalentTo(d):!1},j.prototype.numChildren=function(){return this.children_.length},j.prototype.getValue=function(){return this.value_.toString()},j.prototype.setValue=function(a){var b=this.getType_();if(b!==i.VARIABLE&&b!==i.NUMBER)throw new Error("Can't modify value");this.value_=b===i.NUMBER?d(a):a},j.prototype.getChildValue=function(a){return void 0===this.children_[a]?void 0:this.children_[a].value_},j.prototype.setChildValue=function(a,b){return this.children_[a].setValue(b)},j.prototype.debug=function(){return 0===this.children_.length?this.isNumber()?this.value_.toFixnum().toString():this.value_.toString():"("+this.value_+" "+this.children_.map(function(a){return a.debug()}).join(" ")+")"},j.stripOuterParensFromTokenList=function(a){return a.length>=2&&a[0].isParenthesis()&&a[a.length-1].isParenthesis()&&(a.splice(-1),a.splice(0,1)),a}},{"../utils":271,"./js-numbers/js-numbers":54,"./token":58}],58:[function(a,b){var c=a("./js-numbers/js-numbers"),d=" ",e=function(a,b){this.val_=a,this.marked_=b,this.nonRepeated_=null,this.repeated_=null,this.setStringRepresentation_()};b.exports=e,e.prototype.isParenthesis=function(){return"("===this.val_||")"===this.val_},e.prototype.renderToParent=function(a,b,c){var e,f;e=document.createElementNS(Blockly.SVG_NS,"text");var g=document.createElementNS(Blockly.SVG_NS,"tspan");return g.textContent=this.nonRepeated_.replace(/ /g,d+d),e.appendChild(g),this.repeated_&&(g=document.createElementNS(Blockly.SVG_NS,"tspan"),g.setAttribute("style","text-decoration: overline"),g.textContent=this.repeated_.replace(/ /g,d+d),e.appendChild(g)),a.appendChild(e),f=void 0!==e.offsetWidth?e.offsetWidth:e.getBoundingClientRect().width,e.setAttribute("x",b),this.marked_&&c&&e.setAttribute("class",c),f},e.prototype.setStringRepresentation_=function(){if(!c.isSchemeNumber(this.val_)||"number"==typeof this.val_)return void(this.nonRepeated_=this.val_);if(this.val_.isInteger())return void(this.nonRepeated_=e.numberWithCommas_(this.val_.toFixnum()));var a=c.toExact(this.val_.numerator()),b=c.toExact(this.val_.denominator()),d=c.toRepeatingDecimal(a,b);return d[2]&&"0"!==d[2]?(this.nonRepeated_=e.numberWithCommas_(d[0])+"."+d[1],void(this.repeated_=d[2])):void(this.nonRepeated_=e.numberWithCommas_(this.val_.toFixnum()))},e.numberWithCommas_=function(a){var b=a.toString().split(".");return b[0]=b[0].replace(/\B(?=(\d{3})+(?!\d))/g,","),b.join(".")}},{"./js-numbers/js-numbers":54}],54:[function(a,b){var c={};b.exports=c,function(){"use strict";function a(a){return new RegExp("^([+-]?["+a+"]+)/(["+a+"]+)$")}function b(a,b){var c="[+-]",d="[+-]?",e=g(a),f="["+h(a)+"]",i="["+e+"]+",j=i+"/"+i,k=d+j,l=i,m="["+e+"]*\\.["+e+"]+",n="["+e+"]+\\.["+e+"]*",o="(?:"+l+"|"+m+"|"+n+")",p="(?:inf.0|nan.0|inf.f|nan.f)",q="(?:"+o+"|"+j+")",r=q+"(?:"+f+d+i+")?",s="(?:"+r+"|"+p+")",t="(?:"+d+r+"|"+c+p+")",u=new RegExp("^("+k+")("+c+j+"?)i$"),v=new RegExp("^("+t+")?("+c+s+"?)i$"),w=new RegExp("^("+t+")@("+t+")$"),x=b.match(u),y=b.match(v),z=b.match(w);return x?x:y?y:z?z:!1}function d(a){return new RegExp("^[+-]?["+a+"]+$")}function e(a){var b="(["+a+"]*)\\.(["+a+"]+)",c="(["+a+"]+)\\.(["+a+"]*)";return new RegExp("^(?:([+-]?)("+b+"|"+c+"))$")}function f(a,b){var c="["+a+"]+",d="["+a+"]*\\.["+a+"]+",e="["+a+"]+\\.["+a+"]*";return new RegExp("^(?:([+-]?(?:"+c+"|"+d+"|"+e+"))["+b+"]([+-]?["+a+"]+))$")}function g(a){return 2===a?"01":8===a?"0-7":10===a?"0-9":16===a?"0-9a-fA-F":sc("digitsForRadix: invalid radix",this,a)}function h(a){return 2===a||8===a||10===a?"defsl":16===a?"sl":sc("expMarkForRadix: invalid radix",this,a)}function i(a){this.defaultp=function(){return 0==a},this.exactp=function(){return 1==a},this.inexactp=function(){return 2==a}}function j(a,c,d,e){var f=b(c,a);return f?ce.makeInstance(k(f[1]||"0",c,d),k("+"===f[2]?"1":"-"===f[2]?"-1":f[2],c,d)):k(a,c,d,e)}function k(b,c,i,j){var m=b.match(a(g(c)));if(m)return Ud.makeInstance(k(m[1],c,i),k(m[2],c,i));if("+nan.0"===b||"-nan.0"===b)return Vd.nan;if("+inf.0"===b)return Vd.inf;if("-inf.0"===b)return Vd.neginf;if("-0.0"===b)return _d;var n=b.match(e(g(c)));if(n){var o=void 0!==n[3]?n[3]:n[5],p=void 0!==n[4]?n[4]:n[6];return l(n[1],o,p,c,i)}var q=b.match(f(g(c),h(c)));if(q){var r=k(q[1],c,i),s=k(q[2],c,i);return Hc(r,Rc(c,s))}if(b.match(d(g(c)))){var t=parseInt(b,c);return xd(t)?re(b):i.intAsExactp()?t:Vd.makeInstance(t)}return j?(0===b.length&&sc("no digits"),void sc("bad number: "+b,this)):!1}function l(a,b,c,d,e){var a="-"==a?-1:1,f=""===b?0:e.intAsExactp()?m(b,d):parseInt(b,d),g=""===c?0:e.intAsExactp()?m(c,d):parseInt(c,d),h=e.intAsExactp()?Rc(d,c.length):Math.pow(d,c.length),i=""===c?0:e.intAsExactp()?Jc(g,h):g/h,j=function(a){return"number"==typeof a?Vd.makeInstance(a):a.toInexact()};return e.floatAsInexactp()?j(Hc(a,Ec(f,i))):Hc(a,Ec(f,i))}function m(a,b){return k(a,b,i.on,!0)}function n(a,b,c){null!=a&&("number"==typeof a?this.fromNumber(a,b,c):null==b&&"string"!=typeof a?this.fromString(a,256):this.fromString(a,b))}function o(){return new n(null)}function p(a,b,c,d,e,f){for(;--f>=0;){var g=b*this[a++]+c[d]+e;e=Math.floor(g/67108864),c[d++]=67108863&g}return e}function q(a,b,c,d,e,f){for(var g=32767&b,h=b>>15;--f>=0;){var i=32767&this[a],j=this[a++]>>15,k=h*i+j*g;i=g*i+((32767&k)<<15)+c[d]+(1073741823&e),e=(i>>>30)+(k>>>15)+h*j+(e>>>30),c[d++]=1073741823&i}return e}function s(a,b,c,d,e,f){for(var g=16383&b,h=b>>14;--f>=0;){var i=16383&this[a],j=this[a++]>>14,k=h*i+j*g;i=g*i+((16383&k)<<14)+c[d]+e,e=(i>>28)+(k>>14)+h*j,c[d++]=268435455&i}return e}function t(a){return ne.charAt(a)}function u(a,b){var c=oe[a.charCodeAt(b)];return null==c?-1:c}function v(a){for(var b=this.t-1;b>=0;--b)a[b]=this[b];a.t=this.t,a.s=this.s}function w(a){this.t=1,this.s=0>a?-1:0,a>0?this[0]=a:-1>a?this[0]=a+DV:this.t=0}function x(a){var b=o();return b.fromInt(a),b}function y(a,b){var c;if(16==b)c=4;else if(8==b)c=3;else if(256==b)c=8;else if(2==b)c=1;else if(32==b)c=5;else{if(4!=b)return void this.fromRadix(a,b);c=2}this.t=0,this.s=0;for(var d=a.length,e=!1,f=0;--d>=0;){var g=8==c?255&a[d]:u(a,d);0>g?"-"==a.charAt(d)&&(e=!0):(e=!1,0==f?this[this.t++]=g:f+c>this.DB?(this[this.t-1]|=(g&(1<<this.DB-f)-1)<<f,this[this.t++]=g>>this.DB-f):this[this.t-1]|=g<<f,f+=c,f>=this.DB&&(f-=this.DB))}8==c&&0!=(128&a[0])&&(this.s=-1,f>0&&(this[this.t-1]|=(1<<this.DB-f)-1<<f)),this.clamp(),e&&n.ZERO.subTo(this,this)}function z(){for(var a=this.s&this.DM;this.t>0&&this[this.t-1]==a;)--this.t}function A(a){if(this.s<0)return"-"+this.negate().toString(a);var b;if(16==a)b=4;else if(8==a)b=3;else if(2==a)b=1;else if(32==a)b=5;else{if(4!=a)return this.toRadix(a);b=2}var c,d=(1<<b)-1,e=!1,f=[],g=this.t,h=this.DB-g*this.DB%b;if(g-->0)for(h<this.DB&&(c=this[g]>>h)>0&&(e=!0,f.push(t(c)));g>=0;)b>h?(c=(this[g]&(1<<h)-1)<<b-h,c|=this[--g]>>(h+=this.DB-b)):(c=this[g]>>(h-=b)&d,0>=h&&(h+=this.DB,--g)),c>0&&(e=!0),e&&f.push(t(c));return e?f.join(""):"0"}function B(){var a=o();return n.ZERO.subTo(this,a),a}function C(){return this.s<0?this.negate():this}function D(a){var b=this.s-a.s;if(0!=b)return b;var c=this.t;if(b=this.s<0?a.t-c:c-a.t,0!=b)return b;for(;--c>=0;)if(0!=(b=this[c]-a[c]))return b;return 0}function E(a){var b,c=1;return 0!=(b=a>>>16)&&(a=b,c+=16),0!=(b=a>>8)&&(a=b,c+=8),0!=(b=a>>4)&&(a=b,c+=4),0!=(b=a>>2)&&(a=b,c+=2),0!=(b=a>>1)&&(a=b,c+=1),c}function F(){return this.t<=0?0:this.DB*(this.t-1)+E(this[this.t-1]^this.s&this.DM)}function G(a,b){var c;for(c=this.t-1;c>=0;--c)b[c+a]=this[c];for(c=a-1;c>=0;--c)b[c]=0;b.t=this.t+a,b.s=this.s}function H(a,b){for(var c=a;c<this.t;++c)b[c-a]=this[c];b.t=Math.max(this.t-a,0),b.s=this.s}function I(a,b){var c,d=a%this.DB,e=this.DB-d,f=(1<<e)-1,g=Math.floor(a/this.DB),h=this.s<<d&this.DM;for(c=this.t-1;c>=0;--c)b[c+g+1]=this[c]>>e|h,h=(this[c]&f)<<d;for(c=g-1;c>=0;--c)b[c]=0;b[g]=h,b.t=this.t+g+1,b.s=this.s,b.clamp()}function J(a,b){b.s=this.s;var c=Math.floor(a/this.DB);if(c>=this.t)return void(b.t=0);var d=a%this.DB,e=this.DB-d,f=(1<<d)-1;b[0]=this[c]>>d;for(var g=c+1;g<this.t;++g)b[g-c-1]|=(this[g]&f)<<e,b[g-c]=this[g]>>d;d>0&&(b[this.t-c-1]|=(this.s&f)<<e),b.t=this.t-c,b.clamp()}function K(a,b){for(var c=0,d=0,e=Math.min(a.t,this.t);e>c;)d+=this[c]-a[c],b[c++]=d&this.DM,d>>=this.DB;if(a.t<this.t){for(d-=a.s;c<this.t;)d+=this[c],b[c++]=d&this.DM,d>>=this.DB;d+=this.s}else{for(d+=this.s;c<a.t;)d-=a[c],b[c++]=d&this.DM,d>>=this.DB;d-=a.s}b.s=0>d?-1:0,-1>d?b[c++]=this.DV+d:d>0&&(b[c++]=d),b.t=c,b.clamp()}function L(a,b){var c=this.abs(),d=a.abs(),e=c.t;
for(b.t=e+d.t;--e>=0;)b[e]=0;for(e=0;e<d.t;++e)b[e+c.t]=c.am(0,d[e],b,e,0,c.t);b.s=0,b.clamp(),this.s!=a.s&&n.ZERO.subTo(b,b)}function M(a){for(var b=this.abs(),c=a.t=2*b.t;--c>=0;)a[c]=0;for(c=0;c<b.t-1;++c){var d=b.am(c,b[c],a,2*c,0,1);(a[c+b.t]+=b.am(c+1,2*b[c],a,2*c+1,d,b.t-c-1))>=b.DV&&(a[c+b.t]-=b.DV,a[c+b.t+1]=1)}a.t>0&&(a[a.t-1]+=b.am(c,b[c],a,2*c,0,1)),a.s=0,a.clamp()}function N(a,b,c){var d=a.abs();if(!(d.t<=0)){var e=this.abs();if(e.t<d.t)return null!=b&&b.fromInt(0),void(null!=c&&this.copyTo(c));null==c&&(c=o());var f=o(),g=this.s,h=a.s,i=this.DB-E(d[d.t-1]);i>0?(d.lShiftTo(i,f),e.lShiftTo(i,c)):(d.copyTo(f),e.copyTo(c));var j=f.t,k=f[j-1];if(0!=k){var l=k*(1<<this.F1)+(j>1?f[j-2]>>this.F2:0),m=this.FV/l,p=(1<<this.F1)/l,q=1<<this.F2,r=c.t,s=r-j,t=null==b?o():b;for(f.dlShiftTo(s,t),c.compareTo(t)>=0&&(c[c.t++]=1,c.subTo(t,c)),n.ONE.dlShiftTo(j,t),t.subTo(f,f);f.t<j;)f[f.t++]=0;for(;--s>=0;){var u=c[--r]==k?this.DM:Math.floor(c[r]*m+(c[r-1]+q)*p);if((c[r]+=f.am(0,u,c,s,0,j))<u)for(f.dlShiftTo(s,t),c.subTo(t,c);c[r]<--u;)c.subTo(t,c)}null!=b&&(c.drShiftTo(j,b),g!=h&&n.ZERO.subTo(b,b)),c.t=j,c.clamp(),i>0&&c.rShiftTo(i,c),0>g&&n.ZERO.subTo(c,c)}}}function O(a){var b=o();return this.abs().divRemTo(a,null,b),this.s<0&&b.compareTo(n.ZERO)>0&&a.subTo(b,b),b}function P(a){this.m=a}function Q(a){return a.s<0||a.compareTo(this.m)>=0?a.mod(this.m):a}function R(a){return a}function S(a){a.divRemTo(this.m,null,a)}function T(a,b,c){a.multiplyTo(b,c),this.reduce(c)}function U(a,b){a.squareTo(b),this.reduce(b)}function V(){if(this.t<1)return 0;var a=this[0];if(0==(1&a))return 0;var b=3&a;return b=b*(2-(15&a)*b)&15,b=b*(2-(255&a)*b)&255,b=b*(2-((65535&a)*b&65535))&65535,b=b*(2-a*b%this.DV)%this.DV,b>0?this.DV-b:-b}function W(a){this.m=a,this.mp=a.invDigit(),this.mpl=32767&this.mp,this.mph=this.mp>>15,this.um=(1<<a.DB-15)-1,this.mt2=2*a.t}function X(a){var b=o();return a.abs().dlShiftTo(this.m.t,b),b.divRemTo(this.m,null,b),a.s<0&&b.compareTo(n.ZERO)>0&&this.m.subTo(b,b),b}function Y(a){var b=o();return a.copyTo(b),this.reduce(b),b}function Z(a){for(;a.t<=this.mt2;)a[a.t++]=0;for(var b=0;b<this.m.t;++b){var c=32767&a[b],d=c*this.mpl+((c*this.mph+(a[b]>>15)*this.mpl&this.um)<<15)&a.DM;for(c=b+this.m.t,a[c]+=this.m.am(0,d,a,b,0,this.m.t);a[c]>=a.DV;)a[c]-=a.DV,a[++c]++}a.clamp(),a.drShiftTo(this.m.t,a),a.compareTo(this.m)>=0&&a.subTo(this.m,a)}function $(a,b){a.squareTo(b),this.reduce(b)}function _(a,b,c){a.multiplyTo(b,c),this.reduce(c)}function ab(){return 0==(this.t>0?1&this[0]:this.s)}function bb(a,b){if(a>4294967295||1>a)return n.ONE;var c=o(),d=o(),e=b.convert(this),f=E(a)-1;for(e.copyTo(c);--f>=0;)if(b.sqrTo(c,d),(a&1<<f)>0)b.mulTo(d,e,c);else{var g=c;c=d,d=g}return b.revert(c)}function cb(a,b){var c;return c=256>a||b.isEven()?new P(b):new W(b),this.exp(a,c)}function db(){var a=o();return this.copyTo(a),a}function eb(){if(this.s<0){if(1==this.t)return this[0]-this.DV;if(0==this.t)return-1}else{if(1==this.t)return this[0];if(0==this.t)return 0}return(this[1]&(1<<32-this.DB)-1)<<this.DB|this[0]}function fb(){return 0==this.t?this.s:this[0]<<24>>24}function gb(){return 0==this.t?this.s:this[0]<<16>>16}function hb(a){return Math.floor(Math.LN2*this.DB/Math.log(a))}function ib(){return this.s<0?-1:this.t<=0||1==this.t&&this[0]<=0?0:1}function jb(a){if(null==a&&(a=10),0==this.signum()||2>a||a>36)return"0";var b=this.chunkSize(a),c=Math.pow(a,b),d=x(c),e=o(),f=o(),g="";for(this.divRemTo(d,e,f);e.signum()>0;)g=(c+f.intValue()).toString(a).substr(1)+g,e.divRemTo(d,e,f);return f.intValue().toString(a)+g}function kb(a,b){this.fromInt(0),null==b&&(b=10);for(var c=this.chunkSize(b),d=Math.pow(b,c),e=!1,f=0,g=0,h=0;h<a.length;++h){var i=u(a,h);0>i?"-"==a.charAt(h)&&0==this.signum()&&(e=!0):(g=b*g+i,++f>=c&&(this.dMultiply(d),this.dAddOffset(g,0),f=0,g=0))}f>0&&(this.dMultiply(Math.pow(b,f)),this.dAddOffset(g,0)),e&&n.ZERO.subTo(this,this)}function lb(a,b,c){if("number"==typeof b)if(2>a)this.fromInt(1);else for(this.fromNumber(a,c),this.testBit(a-1)||this.bitwiseTo(n.ONE.shiftLeft(a-1),tb,this),this.isEven()&&this.dAddOffset(1,0);!this.isProbablePrime(b);)this.dAddOffset(2,0),this.bitLength()>a&&this.subTo(n.ONE.shiftLeft(a-1),this);else{var d=[],e=7&a;d.length=(a>>3)+1,b.nextBytes(d),e>0?d[0]&=(1<<e)-1:d[0]=0,this.fromString(d,256)}}function mb(){var a=this.t,b=[];b[0]=this.s;var c,d=this.DB-a*this.DB%8,e=0;if(a-->0)for(d<this.DB&&(c=this[a]>>d)!=(this.s&this.DM)>>d&&(b[e++]=c|this.s<<this.DB-d);a>=0;)8>d?(c=(this[a]&(1<<d)-1)<<8-d,c|=this[--a]>>(d+=this.DB-8)):(c=this[a]>>(d-=8)&255,0>=d&&(d+=this.DB,--a)),0!=(128&c)&&(c|=-256),0==e&&(128&this.s)!=(128&c)&&++e,(e>0||c!=this.s)&&(b[e++]=c);return b}function nb(a){return 0==this.compareTo(a)}function ob(a){return this.compareTo(a)<0?this:a}function pb(a){return this.compareTo(a)>0?this:a}function qb(a,b,c){var d,e,f=Math.min(a.t,this.t);for(d=0;f>d;++d)c[d]=b(this[d],a[d]);if(a.t<this.t){for(e=a.s&this.DM,d=f;d<this.t;++d)c[d]=b(this[d],e);c.t=this.t}else{for(e=this.s&this.DM,d=f;d<a.t;++d)c[d]=b(e,a[d]);c.t=a.t}c.s=b(this.s,a.s),c.clamp()}function rb(a,b){return a&b}function sb(a){var b=o();return this.bitwiseTo(a,rb,b),b}function tb(a,b){return a|b}function ub(a){var b=o();return this.bitwiseTo(a,tb,b),b}function vb(a,b){return a^b}function wb(a){var b=o();return this.bitwiseTo(a,vb,b),b}function xb(a,b){return a&~b}function yb(a){var b=o();return this.bitwiseTo(a,xb,b),b}function zb(){for(var a=o(),b=0;b<this.t;++b)a[b]=this.DM&~this[b];return a.t=this.t,a.s=~this.s,a}function Ab(a){var b=o();return 0>a?this.rShiftTo(-a,b):this.lShiftTo(a,b),b}function Bb(a){var b=o();return 0>a?this.lShiftTo(-a,b):this.rShiftTo(a,b),b}function Cb(a){if(0==a)return-1;var b=0;return 0==(65535&a)&&(a>>=16,b+=16),0==(255&a)&&(a>>=8,b+=8),0==(15&a)&&(a>>=4,b+=4),0==(3&a)&&(a>>=2,b+=2),0==(1&a)&&++b,b}function Db(){for(var a=0;a<this.t;++a)if(0!=this[a])return a*this.DB+Cb(this[a]);return this.s<0?this.t*this.DB:-1}function Eb(a){for(var b=0;0!=a;)a&=a-1,++b;return b}function Fb(){for(var a=0,b=this.s&this.DM,c=0;c<this.t;++c)a+=Eb(this[c]^b);return a}function Gb(a){var b=Math.floor(a/this.DB);return b>=this.t?0!=this.s:0!=(this[b]&1<<a%this.DB)}function Hb(a,b){var c=n.ONE.shiftLeft(a);return this.bitwiseTo(c,b,c),c}function Ib(a){return this.changeBit(a,tb)}function Jb(a){return this.changeBit(a,xb)}function Kb(a){return this.changeBit(a,vb)}function Lb(a,b){for(var c=0,d=0,e=Math.min(a.t,this.t);e>c;)d+=this[c]+a[c],b[c++]=d&this.DM,d>>=this.DB;if(a.t<this.t){for(d+=a.s;c<this.t;)d+=this[c],b[c++]=d&this.DM,d>>=this.DB;d+=this.s}else{for(d+=this.s;c<a.t;)d+=a[c],b[c++]=d&this.DM,d>>=this.DB;d+=a.s}b.s=0>d?-1:0,d>0?b[c++]=d:-1>d&&(b[c++]=this.DV+d),b.t=c,b.clamp()}function Mb(a){var b=o();return this.addTo(a,b),b}function Nb(a){var b=o();return this.subTo(a,b),b}function Ob(a){var b=o();return this.multiplyTo(a,b),b}function Pb(a){var b=o();return this.divRemTo(a,b,null),b}function Qb(a){var b=o();return this.divRemTo(a,null,b),b}function Rb(a){var b=o(),c=o();return this.divRemTo(a,b,c),[b,c]}function Sb(a){this[this.t]=this.am(0,a-1,this,0,0,this.t),++this.t,this.clamp()}function Tb(a,b){if(0!=a){for(;this.t<=b;)this[this.t++]=0;for(this[b]+=a;this[b]>=this.DV;)this[b]-=this.DV,++b>=this.t&&(this[this.t++]=0),++this[b]}}function Ub(){}function Vb(a){return a}function Wb(a,b,c){a.multiplyTo(b,c)}function Xb(a,b){a.squareTo(b)}function Yb(a){return this.bnpExp(a,new Ub)}function Zb(a,b,c){var d=Math.min(this.t+a.t,b);for(c.s=0,c.t=d;d>0;)c[--d]=0;var e;for(e=c.t-this.t;e>d;++d)c[d+this.t]=this.am(0,a[d],c,d,0,this.t);for(e=Math.min(a.t,b);e>d;++d)this.am(0,a[d],c,d,0,b-d);c.clamp()}function $b(a,b,c){--b;var d=c.t=this.t+a.t-b;for(c.s=0;--d>=0;)c[d]=0;for(d=Math.max(b-this.t,0);d<a.t;++d)c[this.t+d-b]=this.am(b-d,a[d],c,0,0,this.t+d-b);c.clamp(),c.drShiftTo(1,c)}function _b(a){this.r2=o(),this.q3=o(),n.ONE.dlShiftTo(2*a.t,this.r2),this.mu=this.r2.divide(a),this.m=a}function ac(a){if(a.s<0||a.t>2*this.m.t)return a.mod(this.m);if(a.compareTo(this.m)<0)return a;var b=o();return a.copyTo(b),this.reduce(b),b}function bc(a){return a}function cc(a){for(a.drShiftTo(this.m.t-1,this.r2),a.t>this.m.t+1&&(a.t=this.m.t+1,a.clamp()),this.mu.multiplyUpperTo(this.r2,this.m.t+1,this.q3),this.m.multiplyLowerTo(this.q3,this.m.t+1,this.r2);a.compareTo(this.r2)<0;)a.dAddOffset(1,this.m.t+1);for(a.subTo(this.r2,a);a.compareTo(this.m)>=0;)a.subTo(this.m,a)}function dc(a,b){a.squareTo(b),this.reduce(b)}function ec(a,b,c){a.multiplyTo(b,c),this.reduce(c)}function fc(a,b){var c,d,e=a.bitLength(),f=x(1);if(0>=e)return f;c=18>e?1:48>e?3:144>e?4:768>e?5:6,d=8>e?new P(b):b.isEven()?new _b(b):new W(b);var g=[],h=3,i=c-1,j=(1<<c)-1;if(g[1]=d.convert(this),c>1){var k=o();for(d.sqrTo(g[1],k);j>=h;)g[h]=o(),d.mulTo(k,g[h-2],g[h]),h+=2}var l,m,n=a.t-1,p=!0,q=o();for(e=E(a[n])-1;n>=0;){for(e>=i?l=a[n]>>e-i&j:(l=(a[n]&(1<<e+1)-1)<<i-e,n>0&&(l|=a[n-1]>>this.DB+e-i)),h=c;0==(1&l);)l>>=1,--h;if((e-=h)<0&&(e+=this.DB,--n),p)g[l].copyTo(f),p=!1;else{for(;h>1;)d.sqrTo(f,q),d.sqrTo(q,f),h-=2;h>0?d.sqrTo(f,q):(m=f,f=q,q=m),d.mulTo(q,g[l],f)}for(;n>=0&&0==(a[n]&1<<e);)d.sqrTo(f,q),m=f,f=q,q=m,--e<0&&(e=this.DB-1,--n)}return d.revert(f)}function gc(a){var b=this.s<0?this.negate():this.clone(),c=a.s<0?a.negate():a.clone();if(b.compareTo(c)<0){var d=b;b=c,c=d}var e=b.getLowestSetBit(),f=c.getLowestSetBit();if(0>f)return b;for(f>e&&(f=e),f>0&&(b.rShiftTo(f,b),c.rShiftTo(f,c));b.signum()>0;)(e=b.getLowestSetBit())>0&&b.rShiftTo(e,b),(e=c.getLowestSetBit())>0&&c.rShiftTo(e,c),b.compareTo(c)>=0?(b.subTo(c,b),b.rShiftTo(1,b)):(c.subTo(b,c),c.rShiftTo(1,c));return f>0&&c.lShiftTo(f,c),c}function hc(a){if(0>=a)return 0;var b=this.DV%a,c=this.s<0?a-1:0;if(this.t>0)if(0==b)c=this[0]%a;else for(var d=this.t-1;d>=0;--d)c=(b*c+this[d])%a;return c}function ic(a){var b=a.isEven();if(this.isEven()&&b||0==a.signum())return n.ZERO;for(var c=a.clone(),d=this.clone(),e=x(1),f=x(0),g=x(0),h=x(1);0!=c.signum();){for(;c.isEven();)c.rShiftTo(1,c),b?(e.isEven()&&f.isEven()||(e.addTo(this,e),f.subTo(a,f)),e.rShiftTo(1,e)):f.isEven()||f.subTo(a,f),f.rShiftTo(1,f);for(;d.isEven();)d.rShiftTo(1,d),b?(g.isEven()&&h.isEven()||(g.addTo(this,g),h.subTo(a,h)),g.rShiftTo(1,g)):h.isEven()||h.subTo(a,h),h.rShiftTo(1,h);c.compareTo(d)>=0?(c.subTo(d,c),b&&e.subTo(g,e),f.subTo(h,f)):(d.subTo(c,d),b&&g.subTo(e,g),h.subTo(f,h))}return 0!=d.compareTo(n.ONE)?n.ZERO:h.compareTo(a)>=0?h.subtract(a):h.signum()<0?(h.addTo(a,h),h.signum()<0?h.add(a):h):h}function jc(a){var b,c=this.abs();if(1==c.t&&c[0]<=pe[pe.length-1]){for(b=0;b<pe.length;++b)if(c[0]==pe[b])return!0;return!1}if(c.isEven())return!1;for(b=1;b<pe.length;){for(var d=pe[b],e=b+1;e<pe.length&&qe>d;)d*=pe[e++];for(d=c.modInt(d);e>b;)if(d%pe[b++]==0)return!1}return c.millerRabin(a)}function kc(a){var b=this.subtract(n.ONE),c=b.getLowestSetBit();if(0>=c)return!1;var d=b.shiftRight(c);a=a+1>>1,a>pe.length&&(a=pe.length);for(var e=o(),f=0;a>f;++f){e.fromInt(pe[f]);var g=e.modPow(d,this);if(0!=g.compareTo(n.ONE)&&0!=g.compareTo(b)){for(var h=1;h++<c&&0!=g.compareTo(b);)if(g=g.modPowInt(2,this),0==g.compareTo(n.ONE))return!1;if(0!=g.compareTo(b))return!1}}return!0}function lc(a){return function(){var b=this.toInexact();return b[a].apply(b,arguments)}}var mc=c,nc=function(a,b,c){return c=c||{},function(d,e){return c.isXSpecialCase&&c.isXSpecialCase(d)?c.onXSpecialCase(d,e):c.isYSpecialCase&&c.isYSpecialCase(e)?c.onYSpecialCase(d,e):"number"==typeof d&&"number"==typeof e?a(d,e):("number"==typeof d&&(d=rc(d,e)),"number"==typeof e&&(e=rc(e,d)),d.level<e.level&&(d=d.liftTo(e)),e.level<d.level&&(e=e.liftTo(d)),b(d,e))}},oc=function(a){if(isNaN(a)||!isFinite(a))return Vd.makeInstance(a);var b=Math.floor(a);return b===a?xd(b)?re(pc(a+"")):b:Vd.makeInstance(a)},pc=function(a){var b,c,d=a.match(f(g(10),h(10)));return d?(b=d[1].match(/^([^.]*)(.*)$/),c=Number(d[2]),0===b[2].length?b[1]+qc(c):c>=b[2].length-1?b[1]+b[2].substring(1)+qc(c-(b[2].length-1)):b[1]+b[2].substring(1,1+c)):a},qc=function(a){var b=[];b.length=a;for(var c=0;a>c;c++)b[c]="0";return b.join("")},rc=function(a,b){switch(b.level){case 0:return re(a);case 1:return new Ud(a,1);case 2:return new Vd(a);case 3:return new ce(a,0);default:sc("IMPOSSIBLE: cannot lift fixnum integer to "+b.toString(),a,b)}},sc=function(a,b,c){mc.onThrowRuntimeError(a,b,c)},tc=function(a){throw new Error(a)},uc=function(a){return"number"==typeof a||a instanceof Ud||a instanceof Vd||a instanceof ce||a instanceof n},vc=function(a){return"number"==typeof a||uc(a)&&a.isRational()},wc=function(a){return"number"==typeof a||uc(a)&&a.isReal()},xc=function(a){return"number"==typeof a||uc(a)&&a.isExact()},yc=function(a){return"number"==typeof a?!1:uc(a)&&a.isInexact()},zc=function(a){return"number"==typeof a||uc(a)&&a.isInteger()},Ac=function(a){return"number"==typeof a||uc(a)&&a.isInteger()&&a.isExact()},Bc=function(a){return"number"==typeof a?a:a.toFixnum()},Cc=function(a){return"number"==typeof a?a:a.toExact()},Dc=function(a){return"number"==typeof a?Vd.makeInstance(a):a.toInexact()},Ec=function(a,b){var c;return"number"==typeof a&&"number"==typeof b&&(c=a+b,xd(c))?re(a).add(re(b)):a instanceof Vd&&b instanceof Vd?a.add(b):Fc(a,b)},Fc=nc(function(a,b){var c=a+b;return xd(c)?re(a).add(re(b)):c},function(a,b){return a.add(b)},{isXSpecialCase:function(a){return Ac(a)&&Gd(a)},onXSpecialCase:function(a,b){return b},isYSpecialCase:function(a){return Ac(a)&&Gd(a)},onYSpecialCase:function(a){return a}}),Gc=nc(function(a,b){var c=a-b;return xd(c)?re(a).subtract(re(b)):c},function(a,b){return a.subtract(b)},{isXSpecialCase:function(a){return Ac(a)&&Gd(a)},onXSpecialCase:function(a,b){return yd(b)},isYSpecialCase:function(a){return Ac(a)&&Gd(a)},onYSpecialCase:function(a){return a}}),Hc=function(a,b){var c;return"number"==typeof a&&"number"==typeof b?(c=a*b,xd(c)?re(a).multiply(re(b)):c):a instanceof Vd&&b instanceof Vd?a.multiply(b):Ic(a,b)},Ic=nc(function(a,b){var c=a*b;return xd(c)?re(a).multiply(re(b)):c},function(a,b){return a.multiply(b)},{isXSpecialCase:function(a){return Ac(a)&&(Gd(a)||Hd(a)||Id(a))},onXSpecialCase:function(a,b){return Gd(a)?0:Hd(a)?b:Id(a)?yd(b):void 0},isYSpecialCase:function(a){return Ac(a)&&(Gd(a)||Hd(a)||Id(a))},onYSpecialCase:function(a,b){return Gd(b)?0:Hd(b)?a:Id(b)?yd(a):void 0}}),Jc=nc(function(a,b){Gd(b)&&sc("/: division by zero",a,b);var c=a/b;return xd(c)?re(a).divide(re(b)):Math.floor(c)!==c?Ud.makeInstance(a,b):c},function(a,b){return a.divide(b)},{isXSpecialCase:function(a){return Lc(a,0)},onXSpecialCase:function(a,b){return Lc(b,0)&&sc("/: division by zero",a,b),0},isYSpecialCase:function(a){return Lc(a,0)},onYSpecialCase:function(a,b){sc("/: division by zero",a,b)}}),Kc=nc(function(a,b){return a===b},function(a,b){return a.equals(b)}),Lc=function(a,b){if(a===b)return!0;if("number"==typeof a&&"number"==typeof b)return a===b;if(a===_d||b===_d)return a===b;if(a instanceof ce||b instanceof ce)return Lc(jd(a),jd(b))&&Lc(id(a),id(b));var c=xc(a),d=xc(b);return(c&&d||!c&&!d)&&Kc(a,b)},Mc=function(a,b,c){return Qc(Xc(Gc(a,b)),c)},Nc=nc(function(a,b){return a>=b},function(a,b){return wc(a)&&wc(b)||sc(">=: couldn't be applied to complex number",a,b),a.greaterThanOrEqual(b)}),Oc=nc(function(a,b){return b>=a},function(a,b){return wc(a)&&wc(b)||sc("<=: couldn't be applied to complex number",a,b),a.lessThanOrEqual(b)}),Pc=nc(function(a,b){return a>b},function(a,b){return wc(a)&&wc(b)||sc(">: couldn't be applied to complex number",a,b),a.greaterThan(b)}),Qc=nc(function(a,b){return b>a},function(a,b){return wc(a)&&wc(b)||sc("<: couldn't be applied to complex number",a,b),a.lessThan(b)}),Rc=function(){var a=nc(function(a,b){var c=Math.pow(a,b);return xd(c)?re(a).expt(re(b)):c},function(a,b){return Kc(b,0)?Ec(b,1):a.expt(b)});return function(b,c){return Kc(c,0)?Ec(c,1):wc(c)&&Qc(c,0)?a(Jc(1,b),yd(c)):a(b,c)}}(),Sc=function(a){return Lc(a,0)?1:"number"==typeof a?Vd.makeInstance(Math.exp(a)):a.exp()},Tc=function(a,b){zc(a)||sc("modulo: the first argument "+a+" is not an integer.",a,b),zc(b)||sc("modulo: the second argument "+b+" is not an integer.",a,b);var c;return"number"==typeof a?(c=a%b,0>b?0>=c?c:c+b:0>c?c+b:c):(c=Ed(Yc(a),Yc(b)),Qc(b,0)?Oc(c,0)?c:Ec(c,b):Qc(c,0)?Ec(c,b):c)},Uc=function(a){return"number"==typeof a?a:a.numerator()},Vc=function(a){return"number"==typeof a?1:a.denominator()},Wc=function(a){if("number"==typeof a){if(a>=0){var b=Math.sqrt(a);return Math.floor(b)===b?b:Vd.makeInstance(b)}return ce.makeInstance(0,Wc(-a))}return a.sqrt()},Xc=function(a){return"number"==typeof a?Math.abs(a):a.abs()},Yc=function(a){return"number"==typeof a?a:a.floor()},Zc=function(a){return"number"==typeof a?a:a.ceiling()},$c=function(a){return"number"==typeof a?a:a.conjugate()},_c=function(a){return"number"==typeof a?Math.abs(a):a.magnitude()},ad=function(a){return Lc(a,1)?0:"number"==typeof a?Vd.makeInstance(Math.log(a)):a.log()},bd=function(a){return"number"==typeof a?a>0?0:Vd.pi:a.angle()},cd=function(a){return Lc(a,0)?0:"number"==typeof a?Vd.makeInstance(Math.tan(a)):a.tan()},dd=function(a){return Lc(a,0)?0:"number"==typeof a?Vd.makeInstance(Math.atan(a)):a.atan()},ed=function(a){return Lc(a,0)?1:"number"==typeof a?Vd.makeInstance(Math.cos(a)):a.cos()},fd=function(a){return Lc(a,0)?0:"number"==typeof a?Vd.makeInstance(Math.sin(a)):a.sin()},gd=function(a){return Lc(a,1)?0:"number"==typeof a?Vd.makeInstance(Math.acos(a)):a.acos()},hd=function(a){return Lc(a,0)?0:"number"==typeof a?Vd.makeInstance(Math.asin(a)):a.asin()},id=function(a){return"number"==typeof a?0:a.imaginaryPart()},jd=function(a){return"number"==typeof a?a:a.realPart()},kd=function(a){return"number"==typeof a?a:a.round()},ld=function(a){return Hc(a,a)},md=function(a){return zc(a)||sc("integer-sqrt: the argument "+a.toString()+" is not an integer.",a),"number"==typeof a?0>a?ce.makeInstance(0,Math.floor(Math.sqrt(-a))):Math.floor(Math.sqrt(a)):a.integerSqrt()},nd=function(a,b){zc(a)||sc("gcd: the argument "+a.toString()+" is not an integer.",a);for(var c,d,e=Xc(a),f=0;f<b.length;f++)for(d=Xc(b[f]),zc(d)||sc("gcd: the argument "+d.toString()+" is not an integer.",d);!Gd(d);)c=e,e=d,d=Ed(c,d);return e},od=function(a,b){zc(a)||sc("lcm: the argument "+a.toString()+" is not an integer.",a);var c=Xc(a);if(Gd(c))return 0;for(var d=0;d<b.length;d++){zc(b[d])||sc("lcm: the argument "+b[d].toString()+" is not an integer.",b[d]);var e=Fd(c,b[d]);if(Gd(e))return 0;c=Jc(Hc(c,b[d]),e)}return c},pd=function(a,b){return zc(a)||sc("quotient: the first argument "+a.toString()+" is not an integer.",a),zc(b)||sc("quotient: the second argument "+b.toString()+" is not an integer.",b),Md(a,b)},qd=function(a,b){return zc(a)||sc("remainder: the first argument "+a.toString()+" is not an integer.",a),zc(b)||sc("remainder: the second argument "+b.toString()+" is not an integer.",b),Nd(a,b)},rd=function(a){return Lc(a,0)?Vd.makeInstance(1):Jc(Ec(Sc(a),Sc(yd(a))),2)},sd=function(a){return Jc(Gc(Sc(a),Sc(yd(a))),2)},td=function(a,b){return Lc(b,0)?a:ce.makeInstance(Hc(a,ed(b)),Hc(a,fd(b)))},ud=function(a){return"number"==typeof a?isFinite(a):a.isFinite()},vd=-9e15,wd=9e15,xd=function(a){return vd>a||a>wd},yd=function(a){return"number"==typeof a?-a:a.negate()},zd=function(a){return Jc(a,2)},Ad=function(a){return Hc(a,de)},Bd=function(a,b){for(var c=1;;){if(Gd(b))return c;Kc(Tc(b,2),0)?(a=Hc(a,a),b=Jc(b,2)):(c=Hc(c,a),b=Gc(b,1))}},Cd=function(a,b,c){return c=c||{},function(d,e){if(d instanceof Ud?d=Uc(d):d instanceof ce&&(d=jd(d)),e instanceof Ud?e=Uc(e):e instanceof ce&&(e=jd(e)),"number"==typeof d&&"number"==typeof e){var f=a(d,e);if(!xd(f)||c.ignoreOverflow)return f}return d instanceof Vd||e instanceof Vd?c.doNotCoerseToFloating?a(Bc(d),Bc(e)):Vd.makeInstance(a(Bc(d),Bc(e))):("number"==typeof d&&(d=re(d)),"number"==typeof e&&(e=re(e)),b(d,e))}},Dd=function(a,b,c){return c=c||{},function(d){if(d instanceof Ud?d=Uc(d):d instanceof ce&&(d=jd(d)),"number"==typeof d){var e=a(d);if(!xd(e)||c.ignoreOverflow)return e}return d instanceof Vd?a(Bc(d)):("number"==typeof d&&(d=re(d)),b(d))}},Ed=Cd(function(a,b){return a%b},function(a,b){return O.call(a,b)}),Fd=Cd(function(a,b){for(var c;0!==b;)c=a,a=b,b=c%b;return a},function(a,b){return gc.call(a,b)}),Gd=Dd(function(a){return 0===a},function(a){return nb.call(a,n.ZERO)}),Hd=Dd(function(a){return 1===a},function(a){return nb.call(a,n.ONE)}),Id=Dd(function(a){return-1===a},function(a){return nb.call(a,n.NEGATIVE_ONE)}),Jd=Cd(function(a,b){return a+b},function(a,b){return Mb.call(a,b)}),Kd=Cd(function(a,b){return a-b},function(a,b){return Nb.call(a,b)}),Ld=Cd(function(a,b){return a*b},function(a,b){return Ob.call(a,b)}),Md=Cd(function(a,b){return(a-a%b)/b},function(a,b){return Pb.call(a,b)}),Nd=Cd(function(a,b){return a%b},function(a,b){return Qb.call(a,b)}),Od=Cd(function(a,b){return a/b},function(a,b){return Bc(a)/Bc(b)},{ignoreOverflow:!0,doNotCoerseToFloating:!0}),Pd=Cd(function(a,b){return a===b},function(a,b){return nb.call(a,b)},{doNotCoerseToFloating:!0}),Qd=Cd(function(a,b){return a>b},function(a,b){return D.call(a,b)>0},{doNotCoerseToFloating:!0}),Rd=Cd(function(a,b){return b>a},function(a,b){return D.call(a,b)<0},{doNotCoerseToFloating:!0}),Sd=Cd(function(a,b){return a>=b},function(a,b){return D.call(a,b)>=0},{doNotCoerseToFloating:!0}),Td=Cd(function(a,b){return b>=a},function(a,b){return D.call(a,b)<=0},{doNotCoerseToFloating:!0}),Ud=function(a,b){this.n=a,this.d=b};Ud.prototype.toString=function(){return Hd(this.d)?this.n.toString()+"":this.n.toString()+"/"+this.d.toString()},Ud.prototype.level=1,Ud.prototype.liftTo=function(a){return 2===a.level?new Vd(Od(this.n,this.d)):3===a.level?new ce(this,0):sc("invalid level of Number",this,a)},Ud.prototype.isFinite=function(){return!0},Ud.prototype.equals=function(a){return a instanceof Ud&&Pd(this.n,a.n)&&Pd(this.d,a.d)},Ud.prototype.isInteger=function(){return Hd(this.d)},Ud.prototype.isRational=function(){return!0},Ud.prototype.isReal=function(){return!0},Ud.prototype.add=function(a){return Ud.makeInstance(Jd(Ld(this.n,a.d),Ld(this.d,a.n)),Ld(this.d,a.d))},Ud.prototype.subtract=function(a){return Ud.makeInstance(Kd(Ld(this.n,a.d),Ld(this.d,a.n)),Ld(this.d,a.d))},Ud.prototype.negate=function(){return Ud.makeInstance(-this.n,this.d)},Ud.prototype.multiply=function(a){return Ud.makeInstance(Ld(this.n,a.n),Ld(this.d,a.d))},Ud.prototype.divide=function(a){return(Gd(this.d)||Gd(a.n))&&sc("/: division by zero",this,a),Ud.makeInstance(Ld(this.n,a.d),Ld(this.d,a.n))},Ud.prototype.toExact=function(){return this},Ud.prototype.toInexact=function(){return Vd.makeInstance(this.toFixnum())},Ud.prototype.isExact=function(){return!0},Ud.prototype.isInexact=function(){return!1},Ud.prototype.toFixnum=function(){return Od(this.n,this.d)},Ud.prototype.numerator=function(){return this.n},Ud.prototype.denominator=function(){return this.d},Ud.prototype.greaterThan=function(a){return Qd(Ld(this.n,a.d),Ld(this.d,a.n))},Ud.prototype.greaterThanOrEqual=function(a){return Sd(Ld(this.n,a.d),Ld(this.d,a.n))},Ud.prototype.lessThan=function(a){return Rd(Ld(this.n,a.d),Ld(this.d,a.n))},Ud.prototype.lessThanOrEqual=function(a){return Td(Ld(this.n,a.d),Ld(this.d,a.n))},Ud.prototype.integerSqrt=function(){var a=Wc(this);return vc(a)?Cc(Yc(a)):wc(a)?Cc(Yc(a)):ce.makeInstance(Cc(Yc(jd(a))),Cc(Yc(id(a))))},Ud.prototype.sqrt=function(){if(Sd(this.n,0)){var a=Wc(this.n),b=Wc(this.d);return Kc(Yc(a),a)&&Kc(Yc(b),b)?Ud.makeInstance(a,b):Vd.makeInstance(Od(a,b))}var a=Wc(yd(this.n)),b=Wc(this.d);return Kc(Yc(a),a)&&Kc(Yc(b),b)?ce.makeInstance(0,Ud.makeInstance(a,b)):ce.makeInstance(0,Vd.makeInstance(Od(a,b)))},Ud.prototype.abs=function(){return Ud.makeInstance(Xc(this.n),this.d)},Ud.prototype.floor=function(){var a=Md(this.n,this.d);return Rd(this.n,0)?Gc(a,1):a},Ud.prototype.ceiling=function(){var a=Md(this.n,this.d);return Rd(this.n,0)?a:Ec(a,1)},Ud.prototype.conjugate=function(){return this},Ud.prototype.magnitude=Ud.prototype.abs,Ud.prototype.log=function(){return Vd.makeInstance(Math.log(this.n/this.d))},Ud.prototype.angle=function(){return Gd(this.n)?0:Qd(this.n,0)?0:Vd.pi},Ud.prototype.tan=function(){return Vd.makeInstance(Math.tan(Od(this.n,this.d)))},Ud.prototype.atan=function(){return Vd.makeInstance(Math.atan(Od(this.n,this.d)))},Ud.prototype.cos=function(){return Vd.makeInstance(Math.cos(Od(this.n,this.d)))},Ud.prototype.sin=function(){return Vd.makeInstance(Math.sin(Od(this.n,this.d)))},Ud.prototype.expt=function(a){return Ac(a)&&Nc(a,0)?Bd(this,a):Vd.makeInstance(Math.pow(Od(this.n,this.d),Od(a.n,a.d)))},Ud.prototype.exp=function(){return Vd.makeInstance(Math.exp(Od(this.n,this.d)))},Ud.prototype.acos=function(){return Vd.makeInstance(Math.acos(Od(this.n,this.d)))},Ud.prototype.asin=function(){return Vd.makeInstance(Math.asin(Od(this.n,this.d)))},Ud.prototype.imaginaryPart=function(){return 0},Ud.prototype.realPart=function(){return this},Ud.prototype.round=function(){if(Kc(this.d,2)){var a=Od(this.n,this.d),b=Math.floor(a),c=Math.ceil(a);return Gd(b%2)?b:c}return Math.round(this.n/this.d)},Ud.makeInstance=function(a,b){void 0===a&&sc("n undefined",a,b),void 0===b&&(b=1),Gd(b)&&sc("division by zero: "+a+"/"+b),Rd(b,0)&&(a=yd(a),b=yd(b));var c=Fd(Xc(a),Xc(b));return a=Md(a,c),b=Md(b,c),Hd(b)||Gd(a)?a:new Ud(a,b)};var Vd=function(a){this.n=a};Vd=Vd;var Wd=new Vd(Number.NaN),Xd=new Vd(Number.POSITIVE_INFINITY),Yd=new Vd(Number.NEGATIVE_INFINITY),Zd=new Vd(Number.POSITIVE_INFINITY),$d=new Vd(Number.NEGATIVE_INFINITY),_d=new Vd(-0),ae=new Vd(0);Vd.pi=new Vd(Math.PI),Vd.e=new Vd(Math.E),Vd.nan=Wd,Vd.inf=Xd,Vd.neginf=Yd,Vd.makeInstance=function(a){return isNaN(a)?Vd.nan:a===Number.POSITIVE_INFINITY?Vd.inf:a===Number.NEGATIVE_INFINITY?Vd.neginf:0===a?1/a===-1/0?_d:ae:new Vd(a)},Vd.prototype.isExact=function(){return!1},Vd.prototype.isInexact=function(){return!0},Vd.prototype.isFinite=function(){return isFinite(this.n)||this===Zd||this===$d},Vd.prototype.toExact=function(){(!isFinite(this.n)||isNaN(this.n))&&sc("toExact: no exact representation for "+this,this);var a=this.n.toString(),b=a.match(/^(.*)\.(.*)$/);if(b){var c=(parseInt(b[1]),parseInt(b[2]),Math.pow(10,b[2].length));return Ud.makeInstance(Math.round(this.n*c),c)}return this.n},Vd.prototype.toInexact=function(){return this},Vd.prototype.isInexact=function(){return!0},Vd.prototype.level=2,Vd.prototype.liftTo=function(a){return 3===a.level?new ce(this,0):sc("invalid level of Number",this,a)},Vd.prototype.toString=function(){if(isNaN(this.n))return"+nan.0";if(this.n===Number.POSITIVE_INFINITY)return"+inf.0";if(this.n===Number.NEGATIVE_INFINITY)return"-inf.0";if(this===_d)return"-0.0";var a=this.n.toString();return a.match("\\.")?a:a+".0"},Vd.prototype.equals=function(a){return a instanceof Vd&&this.n===a.n},Vd.prototype.isRational=function(){return this.isFinite()},Vd.prototype.isInteger=function(){return this.isFinite()&&this.n===Math.floor(this.n)},Vd.prototype.isReal=function(){return!0};var be=function(a){return Qc(a,0)?-1:Pc(a,0)?1:a===_d?-1:0};Vd.prototype.add=function(a){return this.isFinite()&&a.isFinite()?Vd.makeInstance(this.n+a.n):isNaN(this.n)||isNaN(a.n)?Wd:this.isFinite()&&!a.isFinite()?a:!this.isFinite()&&a.isFinite()?this:be(this)*be(a)===1?this:Wd},Vd.prototype.subtract=function(a){return this.isFinite()&&a.isFinite()?Vd.makeInstance(this.n-a.n):isNaN(this.n)||isNaN(a.n)?Wd:this.isFinite()||a.isFinite()?this.isFinite()?Hc(a,-1):this:be(this)===be(a)?Wd:this},Vd.prototype.negate=function(){return Vd.makeInstance(-this.n)},Vd.prototype.multiply=function(a){return Vd.makeInstance(this.n*a.n)},Vd.prototype.divide=function(a){return Vd.makeInstance(this.n/a.n)},Vd.prototype.toFixnum=function(){return this.n},Vd.prototype.numerator=function(){var a=this.n.toString(),b=a.match(/^(.*)\.(.*)$/);if(b){var c=parseInt(b[2]),d=Math.pow(10,b[2].length),e=Fd(d,c),f=d/e;return Vd.makeInstance(Math.round(this.n*f))}return this},Vd.prototype.denominator=function(){var a=this.n.toString(),b=a.match(/^(.*)\.(.*)$/);if(b){var c=parseInt(b[2]),d=Math.pow(10,b[2].length),e=Fd(d,c);return Vd.makeInstance(Math.round(d/e))}return Vd.makeInstance(1)},Vd.prototype.floor=function(){return Vd.makeInstance(Math.floor(this.n))},Vd.prototype.ceiling=function(){return Vd.makeInstance(Math.ceil(this.n))},Vd.prototype.greaterThan=function(a){return this.n>a.n},Vd.prototype.greaterThanOrEqual=function(a){return this.n>=a.n},Vd.prototype.lessThan=function(a){return this.n<a.n},Vd.prototype.lessThanOrEqual=function(a){return this.n<=a.n},Vd.prototype.integerSqrt=function(){return this===_d?this:zc(this)?this.n>=0?Vd.makeInstance(Math.floor(Math.sqrt(this.n))):ce.makeInstance(ae,Vd.makeInstance(Math.floor(Math.sqrt(-this.n)))):void sc("integerSqrt: can only be applied to an integer",this)},Vd.prototype.sqrt=function(){if(this.n<0){var a=ce.makeInstance(0,Vd.makeInstance(Math.sqrt(-this.n)));return a}return Vd.makeInstance(Math.sqrt(this.n))},Vd.prototype.abs=function(){return Vd.makeInstance(Math.abs(this.n))},Vd.prototype.log=function(){return this.n<0?new ce(this,0).log():Vd.makeInstance(Math.log(this.n))},Vd.prototype.angle=function(){return 0===this.n?0:this.n>0?0:Vd.pi},Vd.prototype.tan=function(){return Vd.makeInstance(Math.tan(this.n))},Vd.prototype.atan=function(){return Vd.makeInstance(Math.atan(this.n))},Vd.prototype.cos=function(){return Vd.makeInstance(Math.cos(this.n))},Vd.prototype.sin=function(){return Vd.makeInstance(Math.sin(this.n))},Vd.prototype.expt=function(a){return 1===this.n?a.isFinite()?this:isNaN(a.n)?this:this:Vd.makeInstance(Math.pow(this.n,a.n))},Vd.prototype.exp=function(){return Vd.makeInstance(Math.exp(this.n))},Vd.prototype.acos=function(){return Vd.makeInstance(Math.acos(this.n))},Vd.prototype.asin=function(){return Vd.makeInstance(Math.asin(this.n))},Vd.prototype.imaginaryPart=function(){return 0},Vd.prototype.realPart=function(){return this},Vd.prototype.round=function(){return isFinite(this.n)?this===_d?this:Vd.makeInstance(.5===Math.abs(Math.floor(this.n)-this.n)?Math.floor(this.n)%2===0?Math.floor(this.n):Math.ceil(this.n):Math.round(this.n)):this},Vd.prototype.conjugate=function(){return this},Vd.prototype.magnitude=Vd.prototype.abs;var ce=function(a,b){this.r=a,this.i=b};ce.makeInstance=function(a,b){return void 0===b&&(b=0),xc(b)&&zc(b)&&Gd(b)?a:((yc(a)||yc(b))&&(a=Dc(a),b=Dc(b)),new ce(a,b))},ce.prototype.toString=function(){var a=this.r.toString(),b=this.i.toString();return"-"===b[0]||"+"===b[0]?a+b+"i":a+"+"+b+"i"},ce.prototype.isFinite=function(){return ud(this.r)&&ud(this.i)},ce.prototype.isRational=function(){return vc(this.r)&&Lc(this.i,0)},ce.prototype.isInteger=function(){return zc(this.r)&&Lc(this.i,0)},ce.prototype.toExact=function(){return ce.makeInstance(Cc(this.r),Cc(this.i))},ce.prototype.toInexact=function(){return ce.makeInstance(Dc(this.r),Dc(this.i))},ce.prototype.isExact=function(){return xc(this.r)&&xc(this.i)},ce.prototype.isInexact=function(){return yc(this.r)||yc(this.i)},ce.prototype.level=3,ce.prototype.liftTo=function(a){sc("Don't know how to lift Complex number",this,a)},ce.prototype.equals=function(a){var b=a instanceof ce&&Kc(this.r,a.r)&&Kc(this.i,a.i);return b},ce.prototype.greaterThan=function(a){return this.isReal()&&a.isReal()||sc(">: expects argument of type real number",this,a),Pc(this.r,a.r)},ce.prototype.greaterThanOrEqual=function(a){return this.isReal()&&a.isReal()||sc(">=: expects argument of type real number",this,a),Nc(this.r,a.r)},ce.prototype.lessThan=function(a){return this.isReal()&&a.isReal()||sc("<: expects argument of type real number",this,a),Qc(this.r,a.r)},ce.prototype.lessThanOrEqual=function(a){return this.isReal()&&a.isReal()||sc("<=: expects argument of type real number",this,a),Oc(this.r,a.r)},ce.prototype.abs=function(){return Kc(this.i,0).valueOf()||sc("abs: expects argument of type real number",this),Xc(this.r)},ce.prototype.toFixnum=function(){return Kc(this.i,0).valueOf()||sc("toFixnum: expects argument of type real number",this),Bc(this.r)},ce.prototype.numerator=function(){return this.isReal()||sc("numerator: can only be applied to real number",this),Uc(this.n)
},ce.prototype.denominator=function(){return this.isReal()||sc("floor: can only be applied to real number",this),Vc(this.n)},ce.prototype.add=function(a){return ce.makeInstance(Ec(this.r,a.r),Ec(this.i,a.i))},ce.prototype.subtract=function(a){return ce.makeInstance(Gc(this.r,a.r),Gc(this.i,a.i))},ce.prototype.negate=function(){return ce.makeInstance(yd(this.r),yd(this.i))},ce.prototype.multiply=function(a){if(a.isReal())return ce.makeInstance(Hc(this.r,a.r),Hc(this.i,a.r));var b=Gc(Hc(this.r,a.r),Hc(this.i,a.i)),c=Ec(Hc(this.r,a.i),Hc(this.i,a.r));return ce.makeInstance(b,c)},ce.prototype.divide=function(a){var b,c,d,e,f,g,h;if(a.isReal())return ce.makeInstance(Jc(this.r,a.r),Jc(this.i,a.r));if(this.isInexact()||a.isInexact())return b=this.r,c=this.i,d=a.r,e=a.i,Oc(Xc(e),Xc(d))?(f=Jc(e,d),g=Jc(Ec(b,Hc(c,f)),Ec(d,Hc(e,f))),h=Jc(Gc(c,Hc(b,f)),Ec(d,Hc(e,f)))):(f=Jc(d,e),g=Jc(Ec(Hc(b,f),c),Ec(Hc(d,f),e)),h=Jc(Gc(Hc(c,f),b),Ec(Hc(d,f),e))),ce.makeInstance(g,h);var i=$c(a),j=Hc(this,i),k=jd(Hc(a,i)),l=ce.makeInstance(Jc(jd(j),k),Jc(id(j),k));return l},ce.prototype.conjugate=function(){var a=ce.makeInstance(this.r,Gc(0,this.i));return a},ce.prototype.magnitude=function(){var a=Ec(Hc(this.r,this.r),Hc(this.i,this.i));return Wc(a)},ce.prototype.isReal=function(){return Lc(this.i,0)},ce.prototype.integerSqrt=function(){return zc(this)?md(this.r):void sc("integerSqrt: can only be applied to an integer",this)},ce.prototype.sqrt=function(){if(this.isReal())return Wc(this.r);var a=Ec(this.magnitude(),this.r),b=Wc(zd(a)),c=Jc(this.i,Wc(Hc(a,2)));return ce.makeInstance(b,c)},ce.prototype.log=function(){var a=this.magnitude(),b=this.angle(),c=Ec(ad(a),Ad(b));return c},ce.prototype.angle=function(){if(this.isReal())return bd(this.r);if(Kc(0,this.r)){var a=zd(Vd.pi);return Pc(this.i,0)?a:yd(a)}var a=dd(Jc(Xc(this.i),Xc(this.r)));return Pc(this.r,0)?Pc(this.i,0)?a:yd(a):Pc(this.i,0)?Gc(Vd.pi,a):Gc(a,Vd.pi)};var de=ce.makeInstance(0,1),ee=ce.makeInstance(0,-1);ce.prototype.tan=function(){return Jc(this.sin(),this.cos())},ce.prototype.atan=function(){return Kc(this,de)||Kc(this,ee)?Yd:Hc(de,Hc(Vd.makeInstance(.5),ad(Jc(Ec(de,this),Ec(de,Gc(0,this))))))},ce.prototype.cos=function(){if(this.isReal())return ed(this.r);var a=Ad(this),b=yd(a);return zd(Ec(Sc(a),Sc(b)))},ce.prototype.sin=function(){if(this.isReal())return fd(this.r);var a=Ad(this),b=yd(a),c=ce.makeInstance(0,2),d=Gc(Sc(a),Sc(b)),e=Jc(d,c);return e},ce.prototype.expt=function(a){if(Ac(a)&&Nc(a,0))return Bd(this,a);var b=Hc(a,this.log());return Sc(b)},ce.prototype.exp=function(){var a=Sc(this.r),b=ed(this.i),c=fd(this.i);return Hc(a,Ec(b,Ad(c)))},ce.prototype.acos=function(){if(this.isReal())return gd(this.r);var a=zd(Vd.pi),b=Ad(this),c=Wc(Gc(1,ld(this))),d=Ad(ad(Ec(b,c)));return Ec(a,d)},ce.prototype.asin=function(){if(this.isReal())return hd(this.r);var a=Gc(1,ld(this)),b=Wc(a);return Hc(2,dd(Jc(this,Ec(1,b))))},ce.prototype.ceiling=function(){return this.isReal()||sc("ceiling: can only be applied to real number",this),Zc(this.r)},ce.prototype.floor=function(){return this.isReal()||sc("floor: can only be applied to real number",this),Yc(this.r)},ce.prototype.imaginaryPart=function(){return this.i},ce.prototype.realPart=function(){return this.r},ce.prototype.round=function(){return this.isReal()||sc("round: can only be applied to real number",this),kd(this.r)};var fe=new RegExp("^(#[ei]#[bodx]|#[bodx]#[ei]|#[bodxei])(.*)$");i.def=new i(0),i.on=new i(1),i.off=new i(2),i.prototype.intAsExactp=function(){return this.defaultp()||this.exactp()},i.prototype.floatAsInexactp=function(){return this.defaultp()||this.inexactp()};var ge,he=function(a,b){var c=10,b="undefined"==typeof b?i.def:b===!0?i.on:b===!1?i.off:sc("exactness must be true or false",this,r),d=a.toLowerCase().match(fe);if(d){var e=d[1].toLowerCase(),f=e.match(new RegExp("(#[ei])")),g=e.match(new RegExp("(#[bodx])"));if(f){var h=f[1].charAt(1);b="e"===h?i.on:"i"===h?i.off:sc("invalid exactness flag",this,r)}if(g){var h=g[1].charAt(1);c="b"===h?2:"o"===h?8:"d"===h?10:"x"===h?16:sc("invalid radix flag",this,r)}}var k=d?d[2]:a,l=d?!0:!1;return j(k,c,b,l)},ie=0xdeadbeefcafe,je=15715070==(16777215&ie);je&&"undefined"!=typeof navigator&&"Microsoft Internet Explorer"==navigator.appName?(n.prototype.am=q,ge=30):je&&"undefined"!=typeof navigator&&"Netscape"!=navigator.appName?(n.prototype.am=p,ge=26):(n.prototype.am=s,ge=28),n.prototype.DB=ge,n.prototype.DM=(1<<ge)-1,n.prototype.DV=1<<ge;var ke=52;n.prototype.FV=Math.pow(2,ke),n.prototype.F1=ke-ge,n.prototype.F2=2*ge-ke;var le,me,ne="0123456789abcdefghijklmnopqrstuvwxyz",oe=[];for(le="0".charCodeAt(0),me=0;9>=me;++me)oe[le++]=me;for(le="a".charCodeAt(0),me=10;36>me;++me)oe[le++]=me;for(le="A".charCodeAt(0),me=10;36>me;++me)oe[le++]=me;P.prototype.convert=Q,P.prototype.revert=R,P.prototype.reduce=S,P.prototype.mulTo=T,P.prototype.sqrTo=U,W.prototype.convert=X,W.prototype.revert=Y,W.prototype.reduce=Z,W.prototype.mulTo=_,W.prototype.sqrTo=$,n.prototype.copyTo=v,n.prototype.fromInt=w,n.prototype.fromString=y,n.prototype.clamp=z,n.prototype.dlShiftTo=G,n.prototype.drShiftTo=H,n.prototype.lShiftTo=I,n.prototype.rShiftTo=J,n.prototype.subTo=K,n.prototype.multiplyTo=L,n.prototype.squareTo=M,n.prototype.divRemTo=N,n.prototype.invDigit=V,n.prototype.isEven=ab,n.prototype.bnpExp=bb,n.prototype.toString=A,n.prototype.negate=B,n.prototype.abs=C,n.prototype.compareTo=D,n.prototype.bitLength=F,n.prototype.mod=O,n.prototype.modPowInt=cb,n.ZERO=x(0),n.ONE=x(1),Ub.prototype.convert=Vb,Ub.prototype.revert=Vb,Ub.prototype.mulTo=Wb,Ub.prototype.sqrTo=Xb,_b.prototype.convert=ac,_b.prototype.revert=bc,_b.prototype.reduce=cc,_b.prototype.mulTo=ec,_b.prototype.sqrTo=dc;var pe=[2,3,5,7,11,13,17,19,23,29,31,37,41,43,47,53,59,61,67,71,73,79,83,89,97,101,103,107,109,113,127,131,137,139,149,151,157,163,167,173,179,181,191,193,197,199,211,223,227,229,233,239,241,251,257,263,269,271,277,281,283,293,307,311,313,317,331,337,347,349,353,359,367,373,379,383,389,397,401,409,419,421,431,433,439,443,449,457,461,463,467,479,487,491,499,503,509],qe=(1<<26)/pe[pe.length-1];n.prototype.chunkSize=hb,n.prototype.toRadix=jb,n.prototype.fromRadix=kb,n.prototype.fromNumber=lb,n.prototype.bitwiseTo=qb,n.prototype.changeBit=Hb,n.prototype.addTo=Lb,n.prototype.dMultiply=Sb,n.prototype.dAddOffset=Tb,n.prototype.multiplyLowerTo=Zb,n.prototype.multiplyUpperTo=$b,n.prototype.modInt=hc,n.prototype.millerRabin=kc,n.prototype.clone=db,n.prototype.intValue=eb,n.prototype.byteValue=fb,n.prototype.shortValue=gb,n.prototype.signum=ib,n.prototype.toByteArray=mb,n.prototype.equals=nb,n.prototype.min=ob,n.prototype.max=pb,n.prototype.and=sb,n.prototype.or=ub,n.prototype.xor=wb,n.prototype.andNot=yb,n.prototype.not=zb,n.prototype.shiftLeft=Ab,n.prototype.shiftRight=Bb,n.prototype.getLowestSetBit=Db,n.prototype.bitCount=Fb,n.prototype.testBit=Gb,n.prototype.setBit=Ib,n.prototype.clearBit=Jb,n.prototype.flipBit=Kb,n.prototype.add=Mb,n.prototype.subtract=Nb,n.prototype.multiply=Ob,n.prototype.divide=Pb,n.prototype.remainder=Qb,n.prototype.divideAndRemainder=Rb,n.prototype.modPow=fc,n.prototype.modInverse=ic,n.prototype.pow=Yb,n.prototype.expt=Yb,n.prototype.gcd=gc,n.prototype.isProbablePrime=jc,n.NEGATIVE_ONE=n.ONE.negate();var re=function(a){return"number"==typeof a&&(a+=""),a=pc(a),new n(a,10)};n.prototype.level=0,n.prototype.liftTo=function(a){if(1===a.level)return new Ud(this,1);if(2===a.level){var b=this.toFixnum();return b===Number.POSITIVE_INFINITY?Zd:b===Number.NEGATIVE_INFINITY?$d:new Vd(b)}return 3===a.level?new ce(this,0):sc("invalid level for BigInteger lift",this,a)},n.prototype.isFinite=function(){return!0},n.prototype.isInteger=function(){return!0},n.prototype.isRational=function(){return!0},n.prototype.isReal=function(){return!0},n.prototype.isExact=function(){return!0},n.prototype.isInexact=function(){return!1},n.prototype.toExact=function(){return this},n.prototype.toInexact=function(){return Vd.makeInstance(this.toFixnum())},n.prototype.toFixnum=function(){var a,b=0,c=this.toString();if("-"===c[0]){for(a=1;a<c.length;a++)b=10*b+Number(c[a]);return-b}for(a=0;a<c.length;a++)b=10*b+Number(c[a]);return b},n.prototype.greaterThan=function(a){return this.compareTo(a)>0},n.prototype.greaterThanOrEqual=function(a){return this.compareTo(a)>=0},n.prototype.lessThan=function(a){return this.compareTo(a)<0},n.prototype.lessThanOrEqual=function(a){return this.compareTo(a)<=0},n.prototype.divide=function(a){var b=Rb.call(this,a);if(0===b[1].compareTo(n.ZERO))return b[0];var c=Ec(b[0],Ud.makeInstance(b[1],a));return c},n.prototype.numerator=function(){return this},n.prototype.denominator=function(){return 1},function(){var a=function(a,b){for(;!Oc(ld(b),a)||!Qc(a,ld(Ec(b,1)));)b=Yc(Jc(Ec(b,Yc(Jc(a,b))),2));return b};n.prototype.integerSqrt=function(){var b;return be(this)>=0?a(this,this):(b=this.negate(),ce.makeInstance(0,a(b,b)))}}(),function(){n.prototype.sqrt=function(){var a,b=this.integerSqrt();return Lc(ld(b),this)?b:(a=Bc(this),isFinite(a)?a>=0?Vd.makeInstance(Math.sqrt(a)):ce.makeInstance(0,Vd.makeInstance(Math.sqrt(-a))):b)}}(),n.prototype.floor=function(){return this},n.prototype.ceiling=function(){return this},n.prototype.conjugate=lc("conjugate"),n.prototype.magnitude=lc("magnitude"),n.prototype.log=lc("log"),n.prototype.angle=lc("angle"),n.prototype.atan=lc("atan"),n.prototype.acos=lc("acos"),n.prototype.asin=lc("asin"),n.prototype.tan=lc("tan"),n.prototype.cos=lc("cos"),n.prototype.sin=lc("sin"),n.prototype.exp=lc("exp"),n.prototype.imaginaryPart=function(){return 0},n.prototype.realPart=function(){return this},n.prototype.round=function(){return this};var se=function(){var a=function(a,b,c){var d=[],e={};for(e[a]=!0;;){if(c--<=0)return[d.join(""),"..."];var f=pd(Hc(a,10),b),g=qd(Hc(a,10),b);if(d.push(f.toString()),e[g]){a=g;break}e[g]=!0,a=g}for(var h=a,i=[];;){var f=pd(Hc(a,10),b),g=qd(Hc(a,10),b);if(i.push(f.toString()),Kc(g,h))break;a=g}for(var j=d.join(""),k=i.join("");j.length>=k.length&&j.substring(j.length-k.length)===k;)j=j.substring(0,j.length-k.length);return[j,k]};return function(b,c,d){var e=512;d&&"undefined"!=typeof d.limit&&(e=d.limit),zc(b)||sc("toRepeatingDecimal: n "+b.toString()+" is not an integer."),zc(c)||sc("toRepeatingDecimal: d "+c.toString()+" is not an integer."),Kc(c,0)&&sc("toRepeatingDecimal: d equals 0"),Qc(c,0)&&sc("toRepeatingDecimal: d < 0");var f=Qc(b,0)?"-":"";b=Xc(b);var g=f+pd(b,c),h=a(qd(b,c),c,e);return[g].concat(h)}}();mc.fromFixnum=oc,mc.fromString=he,mc.makeBignum=re,mc.makeRational=Ud.makeInstance,mc.makeFloat=Vd.makeInstance,mc.makeComplex=ce.makeInstance,mc.makeComplexPolar=td,mc.pi=Vd.pi,mc.e=Vd.e,mc.nan=Vd.nan,mc.negative_inf=Vd.neginf,mc.inf=Vd.inf,mc.negative_one=-1,mc.zero=0,mc.one=1,mc.i=de,mc.negative_i=ee,mc.negative_zero=_d,mc.onThrowRuntimeError=tc,mc.isSchemeNumber=uc,mc.isRational=vc,mc.isReal=wc,mc.isExact=xc,mc.isInexact=yc,mc.isInteger=zc,mc.toFixnum=Bc,mc.toExact=Cc,mc.toInexact=Dc,mc.add=Ec,mc.subtract=Gc,mc.multiply=Hc,mc.divide=Jc,mc.equals=Kc,mc.eqv=Lc,mc.approxEquals=Mc,mc.greaterThanOrEqual=Nc,mc.lessThanOrEqual=Oc,mc.greaterThan=Pc,mc.lessThan=Qc,mc.expt=Rc,mc.exp=Sc,mc.modulo=Tc,mc.numerator=Uc,mc.denominator=Vc,mc.integerSqrt=md,mc.sqrt=Wc,mc.abs=Xc,mc.quotient=pd,mc.remainder=qd,mc.floor=Yc,mc.ceiling=Zc,mc.conjugate=$c,mc.magnitude=_c,mc.log=ad,mc.angle=bd,mc.tan=cd,mc.atan=dd,mc.cos=ed,mc.sin=fd,mc.tan=cd,mc.acos=gd,mc.asin=hd,mc.cosh=rd,mc.sinh=sd,mc.imaginaryPart=id,mc.realPart=jd,mc.round=kd,mc.sqr=ld,mc.gcd=nd,mc.lcm=od,mc.toRepeatingDecimal=se,mc.BigInteger=n,mc.Rational=Ud,mc.FloatPoint=Vd,mc.Complex=ce,mc.MIN_FIXNUM=vd,mc.MAX_FIXNUM=wd}()},{}],50:[function(a,b){var c=function(a,b,c){if(this.name=a,this.params=b||[],this.expression=c,3!==arguments.length)throw new Error("Equation requires name, params, and expression");this.signature=this.name,this.params.length>0&&(this.signature+="("+this.params.join(",")+")")};b.exports=c,c.prototype.isFunction=function(){return this.params.length>0},c.prototype.clone=function(){return new c(this.name,this.params.slice(),this.expression.clone())}},{}],49:[function(require,module,exports){module.exports=function(){var t=function anonymous(locals,filters,escape){escape=escape||function(a){return String(a).replace(/&(?!\w+;)/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")};var buf=[];with(locals||{})!function(){buf.push("");require("./locale"),require("../locale");buf.push("\n")}();return buf.join("")};return function(a){return t(a,require("ejs").filters)}}()},{"../locale":110,"./locale":56,ejs:281}],47:[function(a,b,c){"use strict";function d(a,b){a.Blocks.functional_compute={helpUrl:"",init:function(){a.FunctionalBlockUtils.initTitledFunctionalBlock(this,e.evaluate(),a.BlockValueType.NONE,[{name:"ARG1",type:a.BlockValueType.NUMBER}])}},b.functional_compute=function(){var a=Blockly.JavaScript.statementToCode(this,"ARG1",!1)||0;return"Calc.compute("+a+", 'block_id_"+this.id+"');\n"}}var e=a("./locale"),f=(a("../locale"),a("../sharedFunctionalBlocks"));c.install=function(a){var b=a.Generator.get("JavaScript");a.JavaScript=b;var c=function(c){var d=a.Variables.NAME_TYPE;return b.variableDB_.getDistinctName(c,d)};f.install(a,b,c),d(a,b,c)}},{"../locale":110,"../sharedFunctionalBlocks":222,"./locale":56}],56:[function(a,b){b.exports=window.blockly.calc_locale},{}]},{},[57]);