require=function a(b,c,d){function e(g,h){if(!c[g]){if(!b[g]){var i="function"==typeof require&&require;if(!h&&i)return i(g,!0);if(f)return f(g,!0);var j=new Error("Cannot find module '"+g+"'");throw j.code="MODULE_NOT_FOUND",j}var k=c[g]={exports:{}};b[g][0].call(k.exports,function(a){var c=b[g][1][a];return e(c?c:a)},k,k.exports,a,b,c,d)}return c[g].exports}for(var f="function"==typeof require&&require,g=0;g<d.length;g++)e(d[g]);return e}({"/home/ubuntu/staging/apps/build/js/craft/main.js":[function(a,b,c){(function(b){"use strict";var c=a("../appMain");window.Craft=a("./craft"),"undefined"!=typeof b&&(b.Craft=window.Craft);var d=a("./blocks"),e=a("./levels"),f=a("./skins");window.craftMain=function(a){a.skinsModule=f,a.blocksModule=d,a.maxVisualizationWidth=600;var b=434,g=477;a.nativeVizWidth=b,a.vizAspectRatio=b/g,a.mobileNoPaddingShareWidth=a.nativeVizWidth,c(window.Craft,e,a)}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"../appMain":"/home/ubuntu/staging/apps/build/js/appMain.js","./blocks":"/home/ubuntu/staging/apps/build/js/craft/blocks.js","./craft":"/home/ubuntu/staging/apps/build/js/craft/craft.js","./levels":"/home/ubuntu/staging/apps/build/js/craft/levels.js","./skins":"/home/ubuntu/staging/apps/build/js/craft/skins.js"}],"/home/ubuntu/staging/apps/build/js/craft/skins.js":[function(a,b,c){"use strict";var d=a("../skins");c.load=function(a,b){var c=d.load(a,b);return c}},{"../skins":"/home/ubuntu/staging/apps/build/js/skins.js"}],"/home/ubuntu/staging/apps/build/js/craft/levels.js":[function(a,b,c){"use strict";function d(a){return e("craft_"+a)}function e(a){return'<block type="'+a+'"></block>'}var f=a("../block_utils").createToolbox,g=(a("../utils"),'<block type="craft_moveForward"></block>'),h='<block type="controls_repeat_dropdown">  <title name="TIMES" config="3-10">???</title></block>',i='<block type="craft_turn">  <title name="DIR">left</title></block>',j='<block type="craft_turn"><title name="DIR">right</title></block>';b.exports={playground:{requiredBlocks:[],freePlay:!0,toolbox:f(d("moveForward")+d("turnRight")+d("turnLeft")+d("destroyBlock")+d("placeBlock")+e("controls_repeat")+h+d("whileBlockAhead")),startBlocks:'<block type="when_run" deletable="false" x="20" y="20"></block>',groundPlane:["grass","grass","grass","grass","grass","grass","grass","grass","grass","grass","grass","grass","grass","grass","grass","grass","grass","grass","grass","grass","grass","grass","grass","grass","grass","grass","grass","grass","grass","grass","grass","grass","grass","grass","grass","grass","grass","grass","grass","grass","coarseDirt","coarseDirt","coarseDirt","grass","grass","grass","grass","grass","grass","grass","grass","grass","grass","grass","grass","grass","grass","grass","grass","grass","grass","grass","grass","grass","grass","grass","grass","grass","grass","grass","grass","grass","grass","grass","grass","grass","grass","grass","grass","grass","grass","grass","grass","grass","grass","grass","grass","grass","grass","grass","grass","grass","grass","grass","grass","grass","grass","grass","grass","grass"],groundDecorationPlane:["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","tallGrass","","","","","","","","",""],actionPlane:["grass","grass","","","","","","","grass","grass","","grass","","","","","","","","grass","","","","logOak","","","","","","","","","","","","","","","","","","","","","","","","logOak","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","logOak","","","","","","","","","","","","","","logOak","","",""],fluffPlane:["","","","","","","","","","","","","","","","","","","","","","","","leavesOak","","","","","","","","","","","","","","","","","","","","","","","","leavesOak","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","leavesOak","","","","","","","","","","","","","","leavesOak","","",""]},1:{requiredBlocks:[],freePlay:!0,toolbox:f(d("moveForward")+d("turnRight")+d("turnLeft")),startBlocks:'<block type="when_run" deletable="false" x="20" y="20"></block>',playerStartPosition:[3,4],groundPlane:["grass","grass","grass","grass","grass","grass","grass","grass","grass","grass","grass","grass","grass","grass","grass","grass","grass","grass","grass","grass","grass","grass","grass","grass","grass","grass","grass","grass","grass","grass","grass","grass","grass","grass","grass","grass","grass","grass","grass","grass","grass","grass","grass","coarseDirt","coarseDirt","coarseDirt","grass","grass","grass","grass","grass","grass","grass","grass","grass","grass","grass","grass","grass","grass","grass","grass","grass","grass","grass","grass","grass","grass","grass","grass","grass","grass","grass","grass","grass","grass","grass","grass","grass","grass","grass","grass","grass","grass","grass","grass","grass","grass","grass","grass","grass","grass","grass","grass","grass","grass","grass","grass","grass","grass"],groundDecorationPlane:["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","tallGrass","","","","","","","","",""],actionPlane:["grass","grass","","","","","","","grass","grass","","grass","","","","","","","","grass","","","","logOak","","","","","","","","","","","","","","","","","","","","","","","logOak","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","logOak","","","","","","","","","","","","","","logOak","","",""],fluffPlane:["","","","","","","","","","","","","","","","","","","","","","","","leavesOak","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","leavesOak","","","","","","","","","","","","","","leavesOak","","",""],verificationFunction:function(a){return a.isPlayerNextTo("logOak")}},2:{requiredBlocks:[],freePlay:!0,toolbox:f(d("moveForward")+d("turnRight")+d("turnLeft")+d("destroyBlock")+d("placeBlock")+e("controls_repeat")+h+d("whileBlockAhead")),startBlocks:'<block type="when_run" deletable="false" x="20" y="20"></block>',groundPlane:["grass","grass","grass","grass","grass","grass","grass","grass","grass","grass","grass","grass","grass","grass","grass","grass","grass","grass","grass","grass","grass","grass","grass","grass","grass","grass","grass","grass","grass","grass","grass","grass","grass","planksOak","planksOak","planksOak","planksOak","grass","grass","grass","coarseDirt","coarseDirt","coarseDirt","planksOak","planksOak","planksOak","planksOak","grass","grass","grass","grass","grass","grass","planksOak","planksOak","planksOak","planksOak","grass","grass","grass","grass","grass","grass","planksOak","planksOak","planksOak","planksOak","grass","grass","grass","grass","grass","grass","grass","grass","grass","grass","grass","grass","grass","grass","grass","grass","grass","grass","grass","grass","grass","grass","grass","grass","grass","grass","grass","grass","grass","grass","grass","grass","grass"],groundDecorationPlane:["","","","","","","","","","","","","","","","","","","","","","","","","","","","","tallGrass","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","tallGrass","","","","","","","","",""],actionPlane:["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""],fluffPlane:["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""]},custom:{requiredBlocks:[],freePlay:!1,toolbox:f(g+i+j)}}},{"../block_utils":"/home/ubuntu/staging/apps/build/js/block_utils.js","../utils":"/home/ubuntu/staging/apps/build/js/utils.js"}],"/home/ubuntu/staging/apps/build/js/craft/craft.js":[function(require,module,exports){"use strict";function trySetLocalStorageItem(a,b){try{window.localStorage.setItem(a,b)}catch(c){console&&console.log&&console.log("Couldn't set local storage item for key "+a)}}var studioApp=require("../StudioApp").singleton,commonMsg=require("../locale"),craftMsg=require("./locale"),skins=require("../skins"),codegen=require("../codegen"),api=require("./api"),GameController=require("./game/GameController"),dom=require("../dom"),houseLevels=require("./houseLevels"),levelbuilderOverrides=require("./levelbuilderOverrides"),MusicController=require("../MusicController"),ResultType=studioApp.ResultType,TestResults=studioApp.TestResults,MEDIA_URL="/blockly/media/craft/",Craft=module.exports,characters={Steve:{name:"Steve",staticAvatar:MEDIA_URL+"Sliced_Parts/Pop_Up_Character_Steve_Neutral.png",smallStaticAvatar:MEDIA_URL+"Sliced_Parts/Pop_Up_Character_Steve_Neutral.png",failureAvatar:MEDIA_URL+"Sliced_Parts/Pop_Up_Character_Steve_Fail.png",winAvatar:MEDIA_URL+"Sliced_Parts/Pop_Up_Character_Steve_Win.png"},Alex:{name:"Alex",staticAvatar:MEDIA_URL+"Sliced_Parts/Pop_Up_Character_Alex_Neutral.png",smallStaticAvatar:MEDIA_URL+"Sliced_Parts/Pop_Up_Character_Alex_Neutral.png",failureAvatar:MEDIA_URL+"Sliced_Parts/Pop_Up_Character_Alex_Fail.png",winAvatar:MEDIA_URL+"Sliced_Parts/Pop_Up_Character_Alex_Win.png"}},interfaceImages={DEFAULT:[MEDIA_URL+"Sliced_Parts/MC_Loading_Spinner.gif",MEDIA_URL+"Sliced_Parts/Frame_Large_Plus_Logo.png",MEDIA_URL+"Sliced_Parts/Pop_Up_Slice.png",MEDIA_URL+"Sliced_Parts/X_Button.png",MEDIA_URL+"Sliced_Parts/Button_Grey_Slice.png",MEDIA_URL+"Sliced_Parts/Run_Button_Up_Slice.png",MEDIA_URL+"Sliced_Parts/MC_Run_Arrow_Icon.png",MEDIA_URL+"Sliced_Parts/Run_Button_Down_Slice.png",MEDIA_URL+"Sliced_Parts/Reset_Button_Up_Slice.png",MEDIA_URL+"Sliced_Parts/MC_Reset_Arrow_Icon.png",MEDIA_URL+"Sliced_Parts/Reset_Button_Down_Slice.png",MEDIA_URL+"Sliced_Parts/Callout_Tail.png"],1:[MEDIA_URL+"Sliced_Parts/Steve_Character_Select.png",MEDIA_URL+"Sliced_Parts/Alex_Character_Select.png",characters.Steve.staticAvatar,characters.Steve.smallStaticAvatar,characters.Alex.staticAvatar,characters.Alex.smallStaticAvatar],2:[characters.Alex.winAvatar,characters.Steve.winAvatar,characters.Alex.failureAvatar,characters.Steve.failureAvatar],6:[MEDIA_URL+"Sliced_Parts/House_Option_A_v3.png",MEDIA_URL+"Sliced_Parts/House_Option_B_v3.png",MEDIA_URL+"Sliced_Parts/House_Option_C_v3.png"]},MUSIC_METADATA=[{volume:1,hasOgg:!0,name:"vignette1"},{volume:1,hasOgg:!0,name:"vignette2-quiet"},{volume:1,hasOgg:!0,name:"vignette3"},{volume:1,hasOgg:!0,name:"vignette4-intro"},{volume:1,hasOgg:!0,name:"vignette5-shortpiano"},{volume:1,hasOgg:!0,name:"vignette7-funky-chirps-short"},{volume:1,hasOgg:!0,name:"vignette8-free-play"}],CHARACTER_STEVE="Steve",CHARACTER_ALEX="Alex",DEFAULT_CHARACTER=CHARACTER_STEVE,AUTO_LOAD_CHARACTER_ASSET_PACK="player"+DEFAULT_CHARACTER;Craft.init=function(a){1===a.level.puzzle_number&&1===a.level.stage_total&&(a.level.puzzle_number=999),a.level.isTestLevel&&(a.level.customSlowMotion=.1),a.level.disableFinalStageMessage=!0;var b=function(){return document.documentMode},c=b();c&&$("body").addClass("ieVersion"+c);var d=document.body;d.className=d.className+" minecraft",a.level.showPopupOnLoad&&(a.level.afterVideoBeforeInstructionsFn=function(b){var c=document.createEvent("Event");c.initEvent("instructionsShown",!0,!0),document.dispatchEvent(c),"playerSelection"===a.level.showPopupOnLoad?Craft.showPlayerSelectionPopup(function(c){trackEvent("Minecraft","ChoseCharacter",c),Craft.clearPlayerState(),trySetLocalStorageItem("craftSelectedPlayer",c),Craft.updateUIForCharacter(c),Craft.initializeAppLevel(a.level),b()}):"houseLayoutSelection"===a.level.showPopupOnLoad&&Craft.showHouseSelectionPopup(function(c){trackEvent("Minecraft","ChoseHouse",c),h.edit_blocks||($.extend(a.level,houseLevels[c]),Blockly.mainBlockSpace.clear(),studioApp.setStartBlocks_(a,!0)),Craft.initializeAppLevel(a.level),b()})}),a.level.puzzle_number&&levelbuilderOverrides[a.level.puzzle_number]&&$.extend(a.level,levelbuilderOverrides[a.level.puzzle_number]),Craft.initialConfig=a,studioApp.reset=this.reset.bind(this),studioApp.runButtonClick=this.runButtonClick.bind(this),Craft.level=a.level,Craft.skin=a.skin;var e=[];Craft.level.songs&&MUSIC_METADATA&&(e=MUSIC_METADATA.filter(function(a){return-1!==Craft.level.songs.indexOf(a.name)})),Craft.musicController=new MusicController(studioApp.cdoSounds,function(b){return a.skin.assetUrl("music/"+b)},e,e.length>1?7500:null);var f=function l(){document.removeEventListener("instructionsHidden",l),studioApp.cdoSounds&&studioApp.cdoSounds.whenAudioUnlocked(function(){var a=Craft.level.songs&&Craft.level.songs.length>1,b=a?Craft.level.songs[0]:null;Craft.musicController.play(b)})};document.addEventListener("instructionsHidden",f);var g=characters[Craft.getCurrentCharacter()];a.skin.staticAvatar=g.staticAvatar,a.skin.smallStaticAvatar=g.smallStaticAvatar,a.skin.failureAvatar=g.failureAvatar,a.skin.winAvatar=g.winAvatar;var h=a.level,i=h.specialLevelType;switch(i){case"houseWallBuild":h.blocksToStore=["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","houseBottomA","houseBottomB","houseBottomC","houseBottomD","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""]}studioApp.init($.extend({},a,{forceInsertTopBlock:"when_run",html:require("../templates/page.html.ejs")({assetUrl:studioApp.assetUrl,data:{localeDirection:studioApp.localeDirection(),visualization:require("./visualization.html.ejs")(),controls:require("./controls.html.ejs")({assetUrl:studioApp.assetUrl,shareable:a.level.shareable}),editCode:a.level.editCode,blockCounterClass:"block-counter-default",readonlyWorkspace:a.readonlyWorkspace}}),appStrings:{generatedCodeDescription:craftMsg.generatedCodeDescription()},loadAudio:function(){},afterInject:function(){var b=parseFloat((location.search.split("customSlowMotion=")[1]||"").split("&")[0]);Craft.gameController=new GameController({Phaser:window.Phaser,containerId:"phaser-game",assetRoot:Craft.skin.assetUrl(""),audioPlayer:{register:studioApp.registerAudio.bind(studioApp),play:studioApp.playAudio.bind(studioApp)},debug:!1,customSlowMotion:b,earlyLoadAssetPacks:Craft.earlyLoadAssetsForLevel(h.puzzle_number),afterAssetsLoaded:function(){Craft.musicController.preload()},earlyLoadNiceToHaveAssetPacks:Craft.niceToHaveAssetsForLevel(h.puzzle_number)}),a.level.showPopupOnLoad||Craft.initializeAppLevel(a.level)},twitter:{text:"Share on Twitter",hashtag:"Craft"}}));var j=[];j=j.concat(interfaceImages.DEFAULT),a.level.puzzle_number&&interfaceImages[a.level.puzzle_number]&&(j=j.concat(interfaceImages[a.level.puzzle_number])),j.forEach(function(a){preloadImage(a)});var k=$(".mc-share-button");k.length&&dom.addClickTouchEvent(k[0],function(){Craft.reportResult(!0)})};var preloadImage=function(a){var b=new Image;b.src=a};Craft.characterAssetPackName=function(a){return"player"+a},Craft.getCurrentCharacter=function(){return window.localStorage.getItem("craftSelectedPlayer")||DEFAULT_CHARACTER},Craft.updateUIForCharacter=function(a){Craft.initialConfig.skin.staticAvatar=characters[a].staticAvatar,Craft.initialConfig.skin.smallStaticAvatar=characters[a].smallStaticAvatar,Craft.initialConfig.skin.failureAvatar=characters[a].failureAvatar,Craft.initialConfig.skin.winAvatar=characters[a].winAvatar,studioApp.setIconsFromSkin(Craft.initialConfig.skin),$("#prompt-icon").attr("src",characters[a].smallStaticAvatar)},Craft.showPlayerSelectionPopup=function(a){var b=DEFAULT_CHARACTER,c=document.createElement("div");c.innerHTML=require("./dialogs/playerSelection.html.ejs")({image:studioApp.assetUrl()});var d=studioApp.createModalDialog({contentDiv:c,defaultBtnSelector:"#choose-steve",onHidden:function(){a(b)},id:"craft-popup-player-selection"});dom.addClickTouchEvent($("#close-character-select")[0],function(){d.hide()}.bind(this)),dom.addClickTouchEvent($("#choose-steve")[0],function(){b=CHARACTER_STEVE,d.hide()}.bind(this)),dom.addClickTouchEvent($("#choose-alex")[0],function(){b=CHARACTER_ALEX,d.hide()}.bind(this)),d.show()},Craft.showHouseSelectionPopup=function(a){var b=document.createElement("div");b.innerHTML=require("./dialogs/houseSelection.html.ejs")({image:studioApp.assetUrl()});var c="houseA",d=studioApp.createModalDialog({contentDiv:b,defaultBtnSelector:"#choose-house-a",onHidden:function(){a(c)},id:"craft-popup-house-selection",icon:characters[Craft.getCurrentCharacter()].staticAvatar});dom.addClickTouchEvent($("#close-house-select")[0],function(){d.hide()}.bind(this)),dom.addClickTouchEvent($("#choose-house-a")[0],function(){c="houseA",d.hide()}.bind(this)),dom.addClickTouchEvent($("#choose-house-b")[0],function(){c="houseB",d.hide()}.bind(this)),dom.addClickTouchEvent($("#choose-house-c")[0],function(){c="houseC",d.hide()}.bind(this)),d.show()},Craft.clearPlayerState=function(){window.localStorage.removeItem("craftHouseBlocks"),window.localStorage.removeItem("craftPlayerInventory"),window.localStorage.removeItem("craftSelectedPlayer"),window.localStorage.removeItem("craftSelectedHouse")},Craft.onHouseSelected=function(a){trySetLocalStorageItem("craftSelectedHouse",a)},Craft.initializeAppLevel=function(levelConfig){var houseBlocks=JSON.parse(window.localStorage.getItem("craftHouseBlocks"));Craft.foldInCustomHouseBlocks(houseBlocks,levelConfig);for(var fluffPlane=[],i=0;i<(levelConfig.gridWidth||10)*(levelConfig.gridHeight||10);i++)fluffPlane.push("");var levelAssetPacks={beforeLoad:Craft.minAssetsForLevelWithCharacter(levelConfig.puzzle_number),afterLoad:Craft.afterLoadAssetsForLevel(levelConfig.puzzle_number)};Craft.gameController.loadLevel({isDaytime:levelConfig.isDaytime,groundPlane:levelConfig.groundPlane,groundDecorationPlane:levelConfig.groundDecorationPlane,actionPlane:levelConfig.actionPlane,fluffPlane:fluffPlane,playerStartPosition:levelConfig.playerStartPosition,playerStartDirection:levelConfig.playerStartDirection,playerName:Craft.getCurrentCharacter(),assetPacks:levelAssetPacks,specialLevelType:levelConfig.specialLevelType,houseBottomRight:levelConfig.houseBottomRight,gridDimensions:levelConfig.gridWidth&&levelConfig.gridHeight?[levelConfig.gridWidth,levelConfig.gridHeight]:null,verificationFunction:eval("["+levelConfig.verificationFunction+"]")[0]})},Craft.minAssetsForLevelWithCharacter=function(a){return Craft.minAssetsForLevelNumber(a).concat([Craft.characterAssetPackName(Craft.getCurrentCharacter())])},Craft.minAssetsForLevelNumber=function(a){switch(a){case 1:return["levelOneAssets"];case 2:return["levelTwoAssets"];case 3:return["levelThreeAssets"];default:return["allAssetsMinusPlayer"]}},Craft.afterLoadAssetsForLevel=function(a){switch(a){case 1:return Craft.minAssetsForLevelNumber(2);case 2:return Craft.minAssetsForLevelNumber(3);default:return["allAssetsMinusPlayer"]}},Craft.earlyLoadAssetsForLevel=function(a){switch(a){case 1:return Craft.minAssetsForLevelNumber(a);default:return Craft.minAssetsForLevelWithCharacter(a)}},Craft.niceToHaveAssetsForLevel=function(a){switch(a){case 1:return["playerSteve","playerAlex"];default:return["allAssetsMinusPlayer"]}},Craft.foldInArray=function(a,b){for(var c=0;c<a.length;c++)""!==b[c]&&(a[c]=b[c])},Craft.foldInCustomHouseBlocks=function(a,b){var c=[b.groundPlane,b.actionPlane];c.forEach(function(b){for(var c=0;c<b.length;c++){var d=b[c];d.match(/house/)&&(b[c]=a&&a[d]?a[d]:"planksBirch")}})},Craft.reset=function(a){a||Craft.gameController.codeOrgAPI.resetAttempt()},Craft.phaserLoaded=function(){return Craft.gameController&&Craft.gameController.game&&!Craft.gameController.game.load.isLoading},Craft.runButtonClick=function(){if(Craft.phaserLoaded()){var a=document.getElementById("runButton"),b=document.getElementById("resetButton");if(b.style.minWidth||(b.style.minWidth=a.offsetWidth+"px"),studioApp.toggleRunReset("reset"),Blockly.mainBlockSpace.traceOn(!0),studioApp.attempts++,Craft.executeUserCode(),Craft.level.freePlay&&!studioApp.hideSource){var c=$("#right-button-cell");if(c.length&&!c.hasClass("right-button-cell-enabled")){c.addClass("right-button-cell-enabled"),studioApp.onResize();var d=document.createEvent("Event");d.initEvent("finishButtonShown",!0,!0),document.dispatchEvent(d)}}}},Craft.executeUserCode=function(){if(Craft.initialConfig.level.edit_blocks)return void this.reportResult(!0);if(studioApp.hasExtraTopBlocks())return void this.reportResult(!1);studioApp.playAudio("start"),Blockly.mainBlockSpace.traceOn(!0);var a=Craft.gameController.codeOrgAPI;a.startCommandCollection();var b=Blockly.Generator.blockSpaceToCode("JavaScript");codegen.evalWith(b,{moveForward:function(b){a.moveForward(studioApp.highlight.bind(studioApp,b))},turnLeft:function(b){a.turn(studioApp.highlight.bind(studioApp,b),"left")},turnRight:function(b){a.turn(studioApp.highlight.bind(studioApp,b),"right")},destroyBlock:function(b){a.destroyBlock(studioApp.highlight.bind(studioApp,b))},shear:function(b){a.destroyBlock(studioApp.highlight.bind(studioApp,b))},tillSoil:function(b){a.tillSoil(studioApp.highlight.bind(studioApp,b))},whilePathAhead:function(b,c){a.whilePathAhead(studioApp.highlight.bind(studioApp,b),"",c)},whileBlockAhead:function(b,c,d){a.whilePathAhead(studioApp.highlight.bind(studioApp,b),c,d)},ifLavaAhead:function(b,c){a.ifBlockAhead(studioApp.highlight.bind(studioApp,c),"lava",b)},ifBlockAhead:function(b,c,d){a.ifBlockAhead(studioApp.highlight.bind(studioApp,d),b,c)},placeBlock:function(b,c){a.placeBlock(studioApp.highlight.bind(studioApp,c),b)},plantCrop:function(b){a.placeBlock(studioApp.highlight.bind(studioApp,b),"cropWheat")},placeTorch:function(b){a.placeBlock(studioApp.highlight.bind(studioApp,b),"torch")},placeBlockAhead:function(b,c){a.placeInFront(studioApp.highlight.bind(studioApp,c),b)}}),a.startAttempt(function(a,b){if(!Craft.level.freePlay){this.reportResult(a);var c=Craft.initialConfig.level.blocksToStore;if(a&&c){for(var d=JSON.parse(window.localStorage.getItem("craftHouseBlocks"))||{},e=0;e<b.actionPlane.length;e++)""!==c[e]&&(d[c[e]]=b.actionPlane[e].blockType);trySetLocalStorageItem("craftHouseBlocks",JSON.stringify(d))}var f=b.getInventoryTypes(),g=JSON.parse(window.localStorage.getItem("craftPlayerInventory"))||[],h={};f.concat(g).forEach(function(a){h[a]=!0}),trySetLocalStorageItem("craftPlayerInventory",JSON.stringify(Object.keys(h)))}}.bind(this))},Craft.getTestResultFrom=function(a,b){return b===TestResults.LEVEL_INCOMPLETE_FAIL?TestResults.APP_SPECIFIC_FAIL:Craft.initialConfig.level.freePlay?TestResults.FREE_PLAY:b},Craft.reportResult=function(a){var b=studioApp.getTestResults(a),c=Craft.getTestResultFrom(a,b),d=Craft.replayTextForResult(c);studioApp.report({app:"craft",level:Craft.initialConfig.level.id,result:Craft.initialConfig.level.freePlay?!0:a,testResult:c,program:encodeURIComponent(Blockly.Xml.domToText(Blockly.Xml.blockSpaceToDom(Blockly.mainBlockSpace))),onComplete:function(a){studioApp.displayFeedback({keepPlayingText:d,app:"craft",skin:Craft.initialConfig.skin.id,feedbackType:c,response:a,level:Craft.initialConfig.level,appStrings:{reinfFeedbackMsg:craftMsg.reinfFeedbackMsg(),nextLevelMsg:craftMsg.nextLevelMsg({puzzleNumber:Craft.initialConfig.level.puzzle_number}),tooManyBlocksFailMsgFunction:craftMsg.tooManyBlocksFail,generatedCodeDescription:craftMsg.generatedCodeDescription()},feedbackImage:Craft.initialConfig.level.freePlay?Craft.gameController.getScreenshot():null,showingSharing:Craft.initialConfig.level.freePlay})}})},Craft.replayTextForResult=function(a){return a===TestResults.FREE_PLAY?craftMsg.keepPlayingButton():a<=TestResults.APP_SPECIFIC_ACCEPTABLE_FAIL?commonMsg.tryAgain():craftMsg.replayButton()}},{"../MusicController":"/home/ubuntu/staging/apps/build/js/MusicController.js","../StudioApp":"/home/ubuntu/staging/apps/build/js/StudioApp.js","../codegen":"/home/ubuntu/staging/apps/build/js/codegen.js","../dom":"/home/ubuntu/staging/apps/build/js/dom.js","../locale":"/home/ubuntu/staging/apps/build/js/locale.js","../skins":"/home/ubuntu/staging/apps/build/js/skins.js","../templates/page.html.ejs":"/home/ubuntu/staging/apps/build/js/templates/page.html.ejs","./api":"/home/ubuntu/staging/apps/build/js/craft/api.js","./controls.html.ejs":"/home/ubuntu/staging/apps/build/js/craft/controls.html.ejs","./dialogs/houseSelection.html.ejs":"/home/ubuntu/staging/apps/build/js/craft/dialogs/houseSelection.html.ejs","./dialogs/playerSelection.html.ejs":"/home/ubuntu/staging/apps/build/js/craft/dialogs/playerSelection.html.ejs","./game/GameController":"/home/ubuntu/staging/apps/build/js/craft/game/GameController.js","./houseLevels":"/home/ubuntu/staging/apps/build/js/craft/houseLevels.js","./levelbuilderOverrides":"/home/ubuntu/staging/apps/build/js/craft/levelbuilderOverrides.js","./locale":"/home/ubuntu/staging/apps/build/js/craft/locale.js","./visualization.html.ejs":"/home/ubuntu/staging/apps/build/js/craft/visualization.html.ejs"}],"/home/ubuntu/staging/apps/build/js/craft/visualization.html.ejs":[function(require,module,exports){module.exports=function(){var t=function anonymous(locals,filters,escape){escape=escape||function(a){return String(a).replace(/&(?!\w+;)/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")};var buf=[];with(locals||{})!function(){buf.push('<div id="minecraft-frame">\n  <div id="phaser-game">\n  </div>\n</div>\n')}();return buf.join("")};return function(a){return t(a,require("ejs").filters)}}()},{ejs:"/home/ubuntu/staging/apps/node_modules/ejs/lib/ejs.js"}],"/home/ubuntu/staging/apps/build/js/craft/levelbuilderOverrides.js":[function(a,b,c){"use strict";var d=(a("../utils"),a("./locale"));b.exports={1:{appSpecificFailError:d.level1FailureMessage(),tooFewBlocksMsg:d.level1TooFewBlocksMessage(),songs:["vignette4-intro"]},2:{appSpecificFailError:d.level2FailureMessage(),tooFewBlocksMsg:d.level2TooFewBlocksMessage(),songs:["vignette5-shortpiano"]},3:{appSpecificFailError:d.level3FailureMessage(),tooFewBlocksMsg:d.level3TooFewBlocksMessage(),songs:["vignette2-quiet","vignette5-shortpiano","vignette4-intro"]},4:{appSpecificFailError:d.level4FailureMessage(),tooFewBlocksMsg:d.level4FailureMessage(),songs:["vignette3","vignette2-quiet","vignette5-shortpiano","vignette4-intro"],songDelay:4e3},5:{appSpecificFailError:d.level5FailureMessage(),tooFewBlocksMsg:d.level5FailureMessage(),songs:["vignette7-funky-chirps-short","vignette2-quiet","vignette4-intro","vignette3"]},6:{appSpecificFailError:d.level6FailureMessage(),tooFewBlocksMsg:d.level6FailureMessage(),songs:["vignette1","vignette2-quiet","vignette4-intro","vignette3"],songDelay:4e3},7:{appSpecificFailError:d.level7FailureMessage(),tooFewBlocksMsg:d.level7FailureMessage(),songs:["vignette2-quiet","vignette7-funky-chirps-short","vignette4-intro","vignette1","vignette3"]},8:{appSpecificFailError:d.level8FailureMessage(),tooFewBlocksMsg:d.level8FailureMessage(),songs:["vignette5-shortpiano","vignette2-quiet","vignette1","vignette4-intro","vignette3"]},9:{appSpecificFailError:d.level9FailureMessage(),tooFewBlocksMsg:d.level9FailureMessage(),songs:["vignette3","vignette5-shortpiano","vignette7-funky-chirps-short","vignette2-quiet","vignette4-intro","vignette1"]},10:{appSpecificFailError:d.level10FailureMessage(),tooFewBlocksMsg:d.level10FailureMessage(),songs:["vignette4-intro","vignette3","vignette5-shortpiano","vignette2-quiet","vignette7-funky-chirps-short"]},11:{appSpecificFailError:d.level11FailureMessage(),tooFewBlocksMsg:d.level11FailureMessage(),songs:["vignette7-funky-chirps-short","vignette3","vignette2-quiet"]},12:{appSpecificFailError:d.level12FailureMessage(),tooFewBlocksMsg:d.level12FailureMessage(),songs:["vignette5-shortpiano","vignette2-quiet","vignette4-intro","vignette1"]},13:{appSpecificFailError:d.level13FailureMessage(),tooFewBlocksMsg:d.level13FailureMessage(),songs:["vignette1","vignette3","vignette2-quiet","vignette4-intro"]},14:{songs:["vignette8-free-play","vignette3","vignette2-quiet","vignette4-intro","vignette1"]}}},{"../utils":"/home/ubuntu/staging/apps/build/js/utils.js","./locale":"/home/ubuntu/staging/apps/build/js/craft/locale.js"}],"/home/ubuntu/staging/apps/build/js/craft/houseLevels.js":[function(a,b,c){"use strict";a("../utils");b.exports={houseA:{groundPlane:["grass","grass","grass","grass","grass","grass","grass","grass","grass","grass","grass","grass","grass","grass","grass","grass","grass","grass","grass","grass","grass","grass","grass","grass","grass","grass","grass","grass","grass","grass","grass","grass","grass","dirtCoarse","dirtCoarse","dirtCoarse","dirtCoarse","grass","grass","grass","grass","grass","grass","dirtCoarse","grass","grass","dirtCoarse","grass","grass","grass","grass","grass","grass","dirtCoarse","grass","grass","dirtCoarse","grass","grass","grass","grass","grass","grass","grass","grass","grass","grass","grass","grass","grass","grass","grass","grass","grass","grass","grass","grass","grass","grass","grass","grass","grass","grass","grass","grass","grass","grass","grass","grass","grass","grass","grass","grass","grass","grass","grass","grass","grass","grass","grass"],verificationFunction:function(a){return a.solutionMapMatchesResultMap(["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","any","any","any","any","","","","","","","any","","","any","","","","","","","any","","","any","","","","","","","any","any","any","any","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""])}.toString(),blocksToStore:["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","houseRightC","","","","","","","","","","houseRightB","","","","","","","houseLeftA","","","houseRightA","","","","","","","houseBottomA","houseBottomB","houseBottomC","houseBottomD","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""],houseBottomRight:[5,5]},houseC:{groundPlane:["grass","grass","grass","grass","grass","grass","grass","grass","grass","grass","grass","grass","grass","grass","grass","grass","grass","grass","grass","grass","grass","grass","dirtCoarse","dirtCoarse","dirtCoarse","dirtCoarse","grass","grass","grass","grass","grass","grass","dirtCoarse","grass","grass","grass","dirtCoarse","grass","grass","grass","grass","grass","dirtCoarse","dirtCoarse","grass","grass","dirtCoarse","grass","grass","grass","grass","grass","grass","dirtCoarse","grass","grass","dirtCoarse","grass","grass","grass","grass","grass","grass","dirtCoarse","dirtCoarse","dirtCoarse","dirtCoarse","grass","grass","grass","grass","grass","grass","grass","grass","grass","grass","grass","grass","grass","grass","grass","grass","grass","grass","grass","grass","grass","grass","grass","grass","grass","grass","grass","grass","grass","grass","grass","grass","grass"],groundDecorationPlane:["","","","","","tallGrass","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","tallGrass","","","","","","","","",""],actionPlane:["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","houseBottomA","houseBottomB","houseBottomC","houseBottomD","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""],
verificationFunction:'function (verificationAPI) {\r\n      return verificationAPI.solutionMapMatchesResultMap(\r\n            [\r\n              "", "", "", "", "", "", "", "", "", "",\r\n              "", "", "", "", "", "", "", "", "", "",\r\n              "", "", "any", "any", "any", "any", "", "", "", "",\r\n              "", "", "any", "", "", "", "any", "", "", "",\r\n              "", "", "any", "any", "", "", "any", "", "", "",\r\n              "", "", "", "any", "", "", "any", "", "", "",\r\n              "", "", "", "any", "any", "any", "any", "", "", "",\r\n              "", "", "", "", "", "", "", "", "", "",\r\n              "", "", "", "", "", "", "", "", "", "",\r\n              "", "", "", "", "", "", "", "", "", ""\r\n            ]);\r\n}',startBlocks:'<xml><block type="when_run" deletable="false" movable="false"><next><block type="controls_repeat_dropdown"><title name="TIMES" config="2-10">2</title><statement name="DO"><block type="craft_moveForward"><next><block type="craft_placeBlock"><title name="TYPE">planksBirch</title></block></next></block></statement><next><block type="craft_turn"><title name="DIR">left</title><next><block type="craft_moveForward"><next><block type="craft_placeBlock"><title name="TYPE">planksBirch</title><next><block type="craft_turn"><title name="DIR">right</title></block></next></block></next></block></next></block></next></block></next></block></xml>',blocksToStore:["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","houseRightC","","","","","","","","","","houseRightB","","","","","","","houseLeftA","","","houseRightA","","","","","","","houseBottomA","houseBottomB","houseBottomC","houseBottomD","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""],houseBottomRight:[5,5]},houseB:{groundPlane:["grass","grass","grass","grass","grass","grass","grass","grass","grass","grass","grass","grass","grass","dirtCoarse","dirtCoarse","dirtCoarse","grass","grass","grass","grass","grass","grass","grass","dirtCoarse","grass","dirtCoarse","grass","grass","grass","grass","grass","grass","grass","dirtCoarse","grass","dirtCoarse","grass","grass","grass","grass","grass","grass","grass","dirtCoarse","grass","dirtCoarse","dirtCoarse","grass","grass","grass","grass","grass","grass","dirtCoarse","grass","grass","dirtCoarse","grass","grass","grass","grass","grass","grass","dirtCoarse","grass","grass","dirtCoarse","grass","grass","grass","grass","grass","grass","dirtCoarse","dirtCoarse","dirtCoarse","dirtCoarse","grass","grass","grass","grass","grass","grass","grass","grass","grass","grass","grass","grass","grass","grass","grass","grass","grass","grass","grass","grass","grass","grass","grass"],verificationFunction:'function (verificationAPI) {\r\n      return verificationAPI.solutionMapMatchesResultMap(\r\n            [\r\n              "", "", "", "", "", "", "", "", "", "",\r\n              "", "", "", "any", "any", "any", "", "", "", "",\r\n              "", "", "", "any", "", "any", "", "", "", "",\r\n              "", "", "", "any", "", "any", "", "", "", "",\r\n              "", "", "", "any", "", "any", "any", "", "", "",\r\n              "", "", "", "any", "", "", "any", "", "", "",\r\n              "", "", "", "any", "", "", "any", "", "", "",\r\n              "", "", "", "any", "any", "any", "any", "", "", "",\r\n              "", "", "", "", "", "", "", "", "", "",\r\n              "", "", "", "", "", "", "", "", "", ""\r\n            ]);\r\n}',startBlocks:'<xml><block type="when_run" deletable="false" movable="false"><next><block type="controls_repeat_dropdown"><title name="TIMES" config="2-10">6</title><statement name="DO"><block type="craft_moveForward"><next><block type="craft_placeBlock"><title name="TYPE">planksBirch</title></block></next></block></statement></block></next></block></xml>',blocksToStore:["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","houseRightC","","","","","","","","","","houseRightB","","","","","","","houseLeftA","","","houseRightA","","","","","","","houseBottomA","houseBottomB","houseBottomC","houseBottomD","","","","","","","","","","","","","","","","","","","","","","",""],actionPlane:["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","houseBottomA","houseBottomB","houseBottomC","houseBottomD","","","","","","","","","","","","","","","","","","","","","","",""],playerStartPosition:[3,7],houseBottomRight:[5,6]}}},{"../utils":"/home/ubuntu/staging/apps/build/js/utils.js"}],"/home/ubuntu/staging/apps/build/js/craft/game/GameController.js":[function(a,b,c){"use strict";function d(a){if(a&&a.__esModule)return a;var b={};if(null!=a)for(var c in a)Object.prototype.hasOwnProperty.call(a,c)&&(b[c]=a[c]);return b["default"]=a,b}function e(a){return a&&a.__esModule?a:{"default":a}}function f(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(c,"__esModule",{value:!0});var g=function(){function a(a,b){var c=[],d=!0,e=!1,f=void 0;try{for(var g,h=a[Symbol.iterator]();!(d=(g=h.next()).done)&&(c.push(g.value),!b||c.length!==b);d=!0);}catch(i){e=!0,f=i}finally{try{!d&&h["return"]&&h["return"]()}finally{if(e)throw f}}return c}return function(b,c){if(Array.isArray(b))return b;if(Symbol.iterator in Object(b))return a(b,c);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),h=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),i=a("./CommandQueue/CommandQueue.js"),j=e(i),k=a("./CommandQueue/BaseCommand.js"),l=(e(k),a("./CommandQueue/DestroyBlockCommand.js")),m=(e(l),a("./CommandQueue/MoveForwardCommand.js")),n=(e(m),a("./CommandQueue/TurnCommand.js")),o=(e(n),a("./CommandQueue/WhileCommand.js")),p=(e(o),a("./CommandQueue/IfBlockAheadCommand.js")),q=(e(p),a("./LevelMVC/LevelModel.js")),r=e(q),s=a("./LevelMVC/LevelView.js"),t=e(s),u=a("./LevelMVC/AssetLoader.js"),v=e(u),w=a("./API/CodeOrgAPI.js"),x=d(w),y=400,z=400,A=function(){function a(b){var c=this;f(this,a),this.DEBUG=b.debug,window.PhaserGlobal={disableAudio:!0,disableWebAudio:!0,hideBanner:!this.DEBUG},this.codeOrgAPI=x.get(this);var d=b.Phaser;this.game=new d.Game({width:y,height:z,renderer:d.CANVAS,parent:b.containerId,state:"earlyLoad",preserveDrawingBuffer:!0}),this.specialLevelType=null,this.queue=new j["default"](this),this.OnCompleteCallback=null,this.assetRoot=b.assetRoot,this.audioPlayer=b.audioPlayer,this.afterAssetsLoaded=b.afterAssetsLoaded,this.assetLoader=new v["default"](this),this.earlyLoadAssetPacks=b.earlyLoadAssetPacks||[],this.earlyLoadNiceToHaveAssetPacks=b.earlyLoadNiceToHaveAssetPacks||[],this.resettableTimers=[],this.assumedSlowMotion=1.5,this.initialSlowMotion=b.customSlowMotion||this.assumedSlowMotion,this.playerDelayFactor=1,this.game.state.add("earlyLoad",{preload:function(){c.game.load.resetLocked=!0,c.assetLoader.loadPacks(c.earlyLoadAssetPacks)},create:function(){c.assetLoader.loadPacks(c.earlyLoadNiceToHaveAssetPacks),c.game.load.start()}}),this.game.state.add("levelRunner",{preload:this.preload.bind(this),create:this.create.bind(this),update:this.update.bind(this),render:this.render.bind(this)})}return h(a,[{key:"loadLevel",value:function(a){this.levelData=Object.freeze(a),this.levelModel=new r["default"](this.levelData),this.levelView=new t["default"](this),this.specialLevelType=a.specialLevelType,this.game.state.start("levelRunner")}},{key:"reset",value:function(){this.levelModel.reset(),this.levelView.reset(this.levelModel),this.resettableTimers.forEach(function(a){a.stop(!0)}),this.resettableTimers.length=0}},{key:"preload",value:function(){this.game.load.resetLocked=!0,this.game.time.advancedTiming=this.DEBUG,this.game.stage.disableVisibilityChange=!0,this.assetLoader.loadPacks(this.levelData.assetPacks.beforeLoad)}},{key:"create",value:function(){var a=this;this.levelView.create(this.levelModel),this.game.time.slowMotion=this.initialSlowMotion,this.addCheatKeys(),this.assetLoader.loadPacks(this.levelData.assetPacks.afterLoad),this.game.load.onLoadComplete.addOnce(function(){a.afterAssetsLoaded&&a.afterAssetsLoaded()}),this.game.load.start()}},{key:"followingPlayer",value:function(){return!!this.levelData.gridDimensions}},{key:"update",value:function(){this.queue.tick(),this.levelView.update(),this.queue.isFinished()&&this.handleEndState()}},{key:"addCheatKeys",value:function(){var a=this;this.game.input.keyboard.addKey(Phaser.Keyboard.TILDE).onUp.add(function(){a.game.input.keyboard.addKey(Phaser.Keyboard.UP).onUp.add(function(){var b=function(){console.log("highlight move forward command.")};a.codeOrgAPI.moveForward(b)}),a.game.input.keyboard.addKey(Phaser.Keyboard.RIGHT).onUp.add(function(){var b=function(){console.log("highlight turn right command.")};a.codeOrgAPI.turnRight(b)}),a.game.input.keyboard.addKey(Phaser.Keyboard.LEFT).onUp.add(function(){var b=function(){console.log("highlight turn left command.")};a.codeOrgAPI.turnLeft(b)}),a.game.input.keyboard.addKey(Phaser.Keyboard.P).onUp.add(function(){var b=function(){console.log("highlight placeBlock command.")};a.codeOrgAPI.placeBlock(b,"logOak")}),a.game.input.keyboard.addKey(Phaser.Keyboard.D).onUp.add(function(){var b=function(){console.log("highlight destroy block command.")};a.codeOrgAPI.destroyBlock(b)}),a.game.input.keyboard.addKey(Phaser.Keyboard.E).onUp.add(function(){var b=function(a){console.log("Execute command list done: "+a+" ")};a.codeOrgAPI.startAttempt(b)}),a.game.input.keyboard.addKey(Phaser.Keyboard.W).onUp.add(function(){var b=function(){console.log("Execute While command list")},c="empty",d=function(){this.GameController.codeOrgAPI.moveForward(function(){console.log("Execute While command move block")}),this.GameController.codeOrgAPI.moveForward(function(){console.log("Execute While command move block2")}),this.GameController.codeOrgAPI.turnLeft(function(){console.log("Execute While command turn")})};a.codeOrgAPI.whilePathAhead(b,c,d)})})}},{key:"handleEndState",value:function(){this.OnCompleteCallback&&(this.queue.isSucceeded()?this.OnCompleteCallback(!0,this.levelModel):this.OnCompleteCallback(!1,this.levelModel),this.OnCompleteCallback=null)}},{key:"render",value:function(){this.DEBUG&&this.game.debug.text(this.game.time.fps||"--",2,14,"#00ff00"),this.levelView.render()}},{key:"scaleFromOriginal",value:function(){var a=this.levelData.gridDimensions||[10,10],b=g(a,2),c=b[0],d=b[1],e=10,f=10;return[c/e,d/f]}},{key:"getScreenshot",value:function(){return this.game.canvas.toDataURL("image/png")}},{key:"moveForward",value:function(a){var b,c,d,e=this,f=this.levelModel.player;if(this.levelModel.canMoveForward()){var g=f.isOnBlock;this.levelModel.moveForward(),d=g&&g!=f.isOnBlock,c=f.isOnBlock||d?this.levelModel.actionPlane[this.levelModel.yToIndex(f.position[1])+f.position[0]].blockType:this.levelModel.groundPlane[this.levelModel.yToIndex(f.position[1])+f.position[0]].blockType,this.levelView.playMoveForwardAnimation(f.position,f.facing,d,f.isOnBlock,c,function(){e.levelView.playIdleAnimation(f.position,f.facing,f.isOnBlock),b=e.levelModel.isPlayerStandingNearCreeper(),e.levelModel.isPlayerStandingInWater()?e.levelView.playDrownFailureAnimation(f.position,f.facing,f.isOnBlock,function(){a.failed()}):e.levelModel.isPlayerStandingInLava()?e.levelView.playBurnInLavaAnimation(f.position,f.facing,f.isOnBlock,function(){a.failed()}):e.delayPlayerMoveBy(30,200,function(){a.succeeded()})})}else this.levelModel.isForwardBlockOfType("creeper")?this.levelView.playCreeperExplodeAnimation(f.position,f.facing,this.levelModel.getMoveForwardPosition(),f.isOnBlock,function(){a.failed()}):(this.levelView.playBumpAnimation(f.position,f.facing,!1),this.delayPlayerMoveBy(400,800,function(){a.succeeded()}))}},{key:"turn",value:function(a,b){-1==b&&this.levelModel.turnLeft(),1==b&&this.levelModel.turnRight(),this.levelView.updatePlayerDirection(this.levelModel.player.position,this.levelModel.player.facing),this.delayPlayerMoveBy(200,800,function(){a.succeeded()})}},{key:"destroyBlockWithoutPlayerInteraction",value:function(a){var b=this.levelModel.actionPlane[this.levelModel.yToIndex(a[1])+a[0]];if(this.levelModel.destroyBlock(a),null!==b){var c=b.position,d=b.blockType;if(b.isDestroyable){switch(this.levelModel.computeShadingPlane(),this.levelModel.computeFowPlane(),d){case"logAcacia":case"treeAcacia":d="planksAcacia";break;case"logBirch":case"treeBirch":d="planksBirch";break;case"logJungle":case"treeJungle":d="planksJungle";break;case"logOak":case"treeOak":d="planksOak";break;case"logSpruce":case"treeSpruce":d="planksSpruce"}this.levelView.actionPlaneBlocks[this.levelModel.yToIndex(c[1])+c[0]].kill(),this.levelView.playExplosionAnimation(this.levelModel.player.position,this.levelModel.player.facing,c,d,function(){},!0)}else if(b.isUsable)switch(d){case"sheep":this.levelView.playShearAnimation(this.levelModel.player.position,this.levelModel.player.facing,c,d,function(){})}}}},{key:"destroyBlock",value:function(a){var b=this,c=this.levelModel.player;if(this.levelModel.canDestroyBlockForward()){var d=this.levelModel.destroyBlockForward();if(null!==d){var e=d.position,f=d.blockType;if(d.isDestroyable){switch(this.levelModel.computeShadingPlane(),this.levelModel.computeFowPlane(),f){case"logAcacia":case"treeAcacia":f="planksAcacia";break;case"logBirch":case"treeBirch":f="planksBirch";break;case"logJungle":case"treeJungle":f="planksJungle";break;case"logOak":case"treeOak":f="planksOak";break;case"logSpruce":case"treeSpruce":f="planksSpruce"}this.levelView.playDestroyBlockAnimation(c.position,c.facing,e,f,this.levelModel.shadingPlane,this.levelModel.fowPlane,function(){a.succeeded()})}else if(d.isUsable)switch(f){case"sheep":this.levelView.playShearSheepAnimation(c.position,c.facing,e,f,function(){a.succeeded()});break;default:a.succeeded()}else a.succeeded()}}else this.levelView.playPunchDestroyAirAnimation(c.position,c.facing,this.levelModel.getMoveForwardPosition(),function(){b.levelView.setSelectionIndicatorPosition(c.position[0],c.position[1]),b.levelView.playIdleAnimation(c.position,c.facing,c.isOnBlock),b.delayPlayerMoveBy(200,600,function(){a.succeeded()})})}},{key:"canUseTints",value:function(){return!0}},{key:"checkTntAnimation",value:function(){return"freeplay"===this.specialLevelType}},{key:"checkMinecartLevelEndAnimation",value:function(){return"minecart"===this.specialLevelType}},{key:"checkHouseBuiltEndAnimation",value:function(){return"houseBuild"===this.specialLevelType}},{key:"checkRailBlock",value:function b(a){var b=this.levelModel.railMap[this.levelModel.yToIndex(this.levelModel.player.position[1])+this.levelModel.player.position[0]];return a=""!==b?b:"railsVertical"}},{key:"placeBlock",value:function(a,b){var c=this,d=this.levelModel.yToIndex(this.levelModel.player.position[1])+this.levelModel.player.position[0],e=this.levelModel.actionPlane[d].blockType;if(this.levelModel.canPlaceBlock())if(this.checkMinecartLevelEndAnimation()&&"rail"==b&&(b=this.checkRailBlock(b)),""!==e&&this.levelModel.destroyBlock(d),this.levelModel.placeBlock(b))this.levelView.playPlaceBlockAnimation(this.levelModel.player.position,this.levelModel.player.facing,b,e,function(){c.levelModel.computeShadingPlane(),c.levelModel.computeFowPlane(),c.levelView.updateShadingPlane(c.levelModel.shadingPlane),c.levelView.updateFowPlane(c.levelModel.fowPlane),c.delayBy(200,function(){c.levelView.playIdleAnimation(c.levelModel.player.position,c.levelModel.player.facing,!1)}),c.delayPlayerMoveBy(200,400,function(){a.succeeded()})});else var f=this.levelView.playPlayerAnimation("jumpUp",this.levelModel.player.position,this.levelModel.player.facing,!1).onLoop.add(function(){c.levelView.playIdleAnimation(c.levelModel.player.position,c.levelModel.player.facing,!1),f.detach(),c.delayBy(800,function(){a.succeeded()})},this);else a.failed()}},{key:"setPlayerActionDelayByQueueLength",value:function(){var a=10,b=20,c=this.queue.getLength(),d=b-a,e=Math.min(Math.max(c-a,0),d);this.playerDelayFactor=1-e/d}},{key:"delayBy",value:function(a,b){var c=this.game.time.create(!0);c.add(this.originalMsToScaled(a),b,this),c.start(),this.resettableTimers.push(c)}},{key:"delayPlayerMoveBy",value:function(a,b,c){this.delayBy(Math.max(a,b*this.playerDelayFactor),c)}},{key:"originalMsToScaled",value:function(a){var b=a/this.assumedSlowMotion;return b*this.game.time.slowMotion}},{key:"originalFpsToScaled",value:function(a){var b=a*this.assumedSlowMotion;return b/this.game.time.slowMotion}},{key:"placeBlockForward",value:function(a,b){var c,d,e=this,f=function(){};return this.levelModel.canPlaceBlockForward()?(c=this.levelModel.getMoveForwardPosition(),d=this.levelModel.getPlaneToPlaceOn(c),this.levelModel.isBlockOfTypeOnPlane(c,"lava",d)&&(f=function(){e.levelView.audioPlayer.play("fizz")}),this.levelModel.placeBlockForward(b,d),void this.levelView.playPlaceBlockInFrontAnimation(this.levelModel.player.position,this.levelModel.player.facing,this.levelModel.getMoveForwardPosition(),d,b,function(){e.levelModel.computeShadingPlane(),e.levelModel.computeFowPlane(),e.levelView.updateShadingPlane(e.levelModel.shadingPlane),e.levelView.updateFowPlane(e.levelModel.fowPlane),f(),e.delayBy(200,function(){e.levelView.playIdleAnimation(e.levelModel.player.position,e.levelModel.player.facing,!1)}),e.delayPlayerMoveBy(200,400,function(){a.succeeded()})})):void this.levelView.playPunchAirAnimation(this.levelModel.player.position,this.levelModel.player.facing,this.levelModel.player.position,function(){e.levelView.playIdleAnimation(e.levelModel.player.position,e.levelModel.player.facing,!1),a.succeeded()})}},{key:"checkSolution",value:function(a){var b=this,c=this.levelModel.player;if(this.levelView.setSelectionIndicatorPosition(c.position[0],c.position[1]),this.levelModel.isSolved())if(this.checkHouseBuiltEndAnimation()){var d=this.levelModel.getHouseBottomRight(),e=[d[0]-1,d[1]+2],f=[d[0],d[1]],g=[d[0]-1,d[1]+1];this.levelModel.moveTo(e),this.levelView.playSuccessHouseBuiltAnimation(c.position,c.facing,c.isOnBlock,this.levelModel.houseGroundToFloorBlocks(d),[f,g],function(){a.succeeded()},function(){b.levelModel.destroyBlock(f),b.levelModel.destroyBlock(g),b.levelModel.computeShadingPlane(),b.levelModel.computeFowPlane(),b.levelView.updateShadingPlane(b.levelModel.shadingPlane),b.levelView.updateFowPlane(b.levelModel.fowPlane)})}else if(this.checkMinecartLevelEndAnimation())this.levelView.playMinecartAnimation(c.position,c.facing,c.isOnBlock,function(){a.succeeded()},this.levelModel.getMinecartTrack(),this.levelModel.getUnpoweredRails());else if(this.checkTntAnimation()){this.levelView.scaleShowWholeWorld(function(){});var h=this.levelModel.getTnt(),i=c.isOnBlock;this.levelView.playDestroyTntAnimation(c.position,c.facing,c.isOnBlock,this.levelModel.getTnt(),this.levelModel.shadingPlane,function(){h.length;for(var d in h){h[d].x===b.levelModel.player.position.x&&h[d].y===b.levelModel.player.position.y&&(b.levelModel.player.isOnBlock=!1);var e=b.levelModel.getAllBorderingPositionNotOfType(h[d],"tnt");b.levelModel.destroyBlock(h[d]);for(var f=1;f<e.length;++f)e[f][0]&&b.destroyBlockWithoutPlayerInteraction(e[f][1])}!c.isOnBlock&&i&&b.levelView.playPlayerJumpDownVerticalAnimation(c.position,c.facing),b.levelModel.computeShadingPlane(),b.levelModel.computeFowPlane(),b.levelView.updateShadingPlane(b.levelModel.shadingPlane),b.levelView.updateFowPlane(b.levelModel.fowPlane),b.delayBy(200,function(){b.levelView.playSuccessAnimation(c.position,c.facing,c.isOnBlock,function(){a.succeeded()})})})}else this.levelView.playSuccessAnimation(c.position,c.facing,c.isOnBlock,function(){a.succeeded()});else this.levelView.playFailureAnimation(c.position,c.facing,c.isOnBlock,function(){a.failed()})}},{key:"isPathAhead",value:function(a){return this.levelModel.isForwardBlockOfType(a)}}]),a}();window.GameController=A,c["default"]=A,b.exports=c["default"]},{"./API/CodeOrgAPI.js":"/home/ubuntu/staging/apps/build/js/craft/game/API/CodeOrgAPI.js","./CommandQueue/BaseCommand.js":"/home/ubuntu/staging/apps/build/js/craft/game/CommandQueue/BaseCommand.js","./CommandQueue/CommandQueue.js":"/home/ubuntu/staging/apps/build/js/craft/game/CommandQueue/CommandQueue.js","./CommandQueue/DestroyBlockCommand.js":"/home/ubuntu/staging/apps/build/js/craft/game/CommandQueue/DestroyBlockCommand.js","./CommandQueue/IfBlockAheadCommand.js":"/home/ubuntu/staging/apps/build/js/craft/game/CommandQueue/IfBlockAheadCommand.js","./CommandQueue/MoveForwardCommand.js":"/home/ubuntu/staging/apps/build/js/craft/game/CommandQueue/MoveForwardCommand.js","./CommandQueue/TurnCommand.js":"/home/ubuntu/staging/apps/build/js/craft/game/CommandQueue/TurnCommand.js","./CommandQueue/WhileCommand.js":"/home/ubuntu/staging/apps/build/js/craft/game/CommandQueue/WhileCommand.js","./LevelMVC/AssetLoader.js":"/home/ubuntu/staging/apps/build/js/craft/game/LevelMVC/AssetLoader.js","./LevelMVC/LevelModel.js":"/home/ubuntu/staging/apps/build/js/craft/game/LevelMVC/LevelModel.js","./LevelMVC/LevelView.js":"/home/ubuntu/staging/apps/build/js/craft/game/LevelMVC/LevelView.js"}],"/home/ubuntu/staging/apps/build/js/craft/game/LevelMVC/LevelView.js":[function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{"default":a}}function e(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(c,"__esModule",{value:!0});var f=function(){function a(a,b){var c=[],d=!0,e=!1,f=void 0;try{for(var g,h=a[Symbol.iterator]();!(d=(g=h.next()).done)&&(c.push(g.value),!b||c.length!==b);d=!0);}catch(i){e=!0,f=i}finally{try{!d&&h["return"]&&h["return"]()}finally{if(e)throw f}}return c}return function(b,c){if(Array.isArray(b))return b;if(Symbol.iterator in Object(b))return a(b,c);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),g=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),h=a("./FacingDirection.js"),i=d(h),j=function(){function a(b){e(this,a),this.controller=b,this.audioPlayer=b.audioPlayer,this.game=b.game,this.baseShading=null,this.playerSprite=null,this.playerGhost=null,this.selectionIndicator=null,this.groundPlane=null,this.shadingPlane=null,this.actionPlane=null,this.fluffPlane=null,this.fowPlane=null,this.miniBlocks={dirt:["Miniblocks",0,5],dirtCoarse:["Miniblocks",6,11],sand:["Miniblocks",12,17],gravel:["Miniblocks",18,23],bricks:["Miniblocks",24,29],logAcacia:["Miniblocks",30,35],logBirch:["Miniblocks",36,41],logJungle:["Miniblocks",42,47],logOak:["Miniblocks",48,53],logSpruce:["Miniblocks",54,59],planksAcacia:["Miniblocks",60,65],planksBirch:["Miniblocks",66,71],planksJungle:["Miniblocks",72,77],planksOak:["Miniblocks",78,83],planksSpruce:["Miniblocks",84,89],cobblestone:["Miniblocks",90,95],sandstone:["Miniblocks",96,101],wool:["Miniblocks",102,107],redstoneDust:["Miniblocks",108,113],lapisLazuli:["Miniblocks",114,119],ingotIron:["Miniblocks",120,125],ingotGold:["Miniblocks",126,131],emerald:["Miniblocks",132,137],diamond:["Miniblocks",138,143],coal:["Miniblocks",144,149],bucketWater:["Miniblocks",150,155],bucketLava:["Miniblocks",156,161],gunPowder:["Miniblocks",162,167],wheat:["Miniblocks",168,173],potato:["Miniblocks",174,179],carrots:["Miniblocks",180,185],sheep:["Miniblocks",102,107]},this.blocks={bedrock:["blocks","Bedrock",-13,0],bricks:["blocks","Bricks",-13,0],oreCoal:["blocks","Coal_Ore",-13,0],dirtCoarse:["blocks","Coarse_Dirt",-13,0],cobblestone:["blocks","Cobblestone",-13,0],oreDiamond:["blocks","Diamond_Ore",-13,0],dirt:["blocks","Dirt",-13,0],oreEmerald:["blocks","Emerald_Ore",-13,0],farmlandWet:["blocks","Farmland_Wet",-13,0],flowerDandelion:["blocks","Flower_Dandelion",-13,0],flowerOxeeye:["blocks","Flower_Oxeeye",-13,0],flowerRose:["blocks","Flower_Rose",-13,0],glass:["blocks","Glass",-13,0],oreGold:["blocks","Gold_Ore",-13,0],grass:["blocks","Grass",-13,0],gravel:["blocks","Gravel",-13,0],oreIron:["blocks","Iron_Ore",-13,0],oreLapis:["blocks","Lapis_Ore",-13,0],lava:["blocks","Lava_0",-13,0],logAcacia:["blocks","Log_Acacia",-13,0],logBirch:["blocks","Log_Birch",-13,0],logJungle:["blocks","Log_Jungle",-13,0],logOak:["blocks","Log_Oak",-13,0],logSpruce:["blocks","Log_Spruce",-13,0],planksAcacia:["blocks","Planks_Acacia",-13,0],planksBirch:["blocks","Planks_Birch",-13,0],planksJungle:["blocks","Planks_Jungle",-13,0],planksOak:["blocks","Planks_Oak",-13,0],planksSpruce:["blocks","Planks_Spruce",-13,0],oreRedstone:["blocks","Redstone_Ore",-13,0],sand:["blocks","Sand",-13,0],sandstone:["blocks","Sandstone",-13,0],stone:["blocks","Stone",-13,0],tnt:["tnt","TNTexplosion0",-80,-58],water:["blocks","Water_0",-13,0],wool:["blocks","Wool_White",-13,0],wool_orange:["blocks","Wool_Orange",-13,0],leavesAcacia:["leavesAcacia","Leaves0",-42,80],leavesBirch:["leavesBirch","Leaves0",-100,-10],leavesJungle:["leavesJungle","Leaves0",-69,43],leavesOak:["leavesOak","Leaves0",-100,0],leavesSpruce:["leavesSpruce","Leaves0",-76,60],watering:["blocks","Water_0",-13,0],cropWheat:["blocks","Wheat0",-13,0],torch:["torch","Torch0",-13,0],tallGrass:["tallGrass","",-13,0],lavaPop:["lavaPop","LavaPop01",-13,0],fire:["fire","",-11,135],bubbles:["bubbles","",-11,135],explosion:["explosion","",-70,60],door:["door","",-12,-15],railsBottomLeft:["blocks","Rails_BottomLeft",-13,0],railsBottomRight:["blocks","Rails_BottomRight",-13,0],railsHorizontal:["blocks","Rails_Horizontal",-13,0],railsTopLeft:["blocks","Rails_TopLeft",-13,0],railsTopRight:["blocks","Rails_TopRight",-13,0],railsUnpoweredHorizontal:["blocks","Rails_UnpoweredHorizontal",-13,0],railsUnpoweredVertical:["blocks","Rails_UnpoweredVertical",-13,0],railsVertical:["blocks","Rails_Vertical",-13,-0],railsPoweredHorizontal:["blocks","Rails_PoweredHorizontal",-13,0],railsPoweredVertical:["blocks","Rails_PoweredVertical",-13,0],railsRedstoneTorch:["blocks","Rails_RedstoneTorch",-12,9]},this.actionPlaneBlocks=[],this.toDestroy=[],this.resettableTweens=[]}return g(a,[{key:"yToIndex",value:function(a){return this.controller.levelModel.yToIndex(a)}},{key:"create",value:function(a){this.createPlanes(),this.reset(a)}},{key:"reset",value:function(a){var b=a.player;this.resettableTweens.forEach(function(a){a.stop(!1)}),this.resettableTweens.length=0,this.resetPlanes(a),this.preparePlayerSprite(b.name),this.playerSprite.animations.stop(),this.updateShadingPlane(a.shadingPlane),this.updateFowPlane(a.fowPlane),this.setPlayerPosition(b.position[0],b.position[1],b.isOnBlock),this.setSelectionIndicatorPosition(b.position[0],b.position[1]),this.selectionIndicator.visible=!0,this.playIdleAnimation(b.position,b.facing,b.isOnBlock),this.controller.followingPlayer()&&(this.game.world.setBounds(0,0,40*a.planeWidth,40*a.planeHeight),this.game.camera.follow(this.playerSprite),this.game.world.scale.x=1,this.game.world.scale.y=1)}},{key:"update",value:function(){var a;for(a=0;a<this.toDestroy.length;++a)this.toDestroy[a].destroy();this.toDestroy=[],this.playerGhost&&(this.playerGhost.frame=this.playerSprite.frame,this.playerGhost.z=1e3)}},{key:"render",value:function(){this.actionPlane.sort("sortOrder"),this.fluffPlane.sort("z")}},{key:"getDirectionName",value:function(a){var b;switch(a){case i["default"].Up:b="_up";break;case i["default"].Right:b="_right";break;case i["default"].Down:b="_down";break;case i["default"].Left:b="_left"}return b}},{key:"updatePlayerDirection",value:function(a,b){var c=this.getDirectionName(b);this.setSelectionIndicatorPosition(a[0],a[1]),this.playScaledSpeed(this.playerSprite.animations,"idle"+c)}},{key:"playPlayerAnimation",value:function(a,b,c,d){var e=this.getDirectionName(c);this.playerSprite.sortOrder=this.yToIndex(b[1])+5;var f=a+e;return this.playScaledSpeed(this.playerSprite.animations,f)}},{key:"playIdleAnimation",value:function(a,b,c){this.playPlayerAnimation("idle",a,b,c)}},{key:"scaleShowWholeWorld",value:function(a){var b=this.controller.scaleFromOriginal(),c=f(b,2),d=c[0],e=c[1],g=this.addResettableTween(this.game.world.scale).to({x:1/d,y:1/e},1e3,Phaser.Easing.Exponential.Out);this.game.camera.unfollow();var h=this.addResettableTween(this.game.camera).to({x:0,y:0},1e3,Phaser.Easing.Exponential.Out);g.onComplete.addOnce(function(){a()}),h.start(),g.start()}},{key:"playSuccessAnimation",value:function(a,b,c,d){var e=this;this.controller.delayBy(250,function(){e.audioPlayer.play("success"),e.onAnimationEnd(e.playPlayerAnimation("celebrate",a,b,c),function(){d()})})}},{key:"playFailureAnimation",value:function(a,b,c,d){var e=this;this.controller.delayBy(500,function(){e.audioPlayer.play("failure"),e.onAnimationEnd(e.playPlayerAnimation("fail",a,b,c),function(){e.controller.delayBy(800,d)})})}},{key:"playBumpAnimation",value:function(a,b,c){var d=this,e=this.playPlayerAnimation("bump",a,b,c);return e.onComplete.add(function(){d.playIdleAnimation(a,b,c)}),e}},{key:"playDrownFailureAnimation",value:function(a,b,c,d){var e,g;this.playPlayerAnimation("fail",a,b,c),this.createBlock(this.fluffPlane,a[0],a[1],"bubbles"),e=this.fluffPlane.create(0,0,"finishOverlay");var h=this.controller.scaleFromOriginal(),i=f(h,2),j=i[0],k=i[1];e.scale.x=j,e.scale.y=k,e.alpha=0,this.controller.canUseTints()&&(e.tint=3296255),g=this.addResettableTween(e).to({alpha:.5},200,Phaser.Easing.Linear.None),g.onComplete.add(function(){d()}),g.start()}},{key:"playBurnInLavaAnimation",value:function(a,b,c,d){var e,g;this.playPlayerAnimation("jumpUp",a,b,c),this.createBlock(this.fluffPlane,a[0],a[1],"fire"),e=this.fluffPlane.create(0,0,"finishOverlay");var h=this.controller.scaleFromOriginal(),i=f(h,2),j=i[0],k=i[1];e.scale.x=j,e.scale.y=k,e.alpha=0,this.controller.canUseTints()&&(e.tint=13719565),g=this.addResettableTween(e).to({alpha:.5},200,Phaser.Easing.Linear.None),g.onComplete.add(function(){d()}),g.start()}},{key:"playDestroyTntAnimation",value:function(a,b,c,d,e,f){var g,h,i=this;if(0===d.length)return void f();this.audioPlayer.play("fuse");for(var j in d)g=this.actionPlaneBlocks[this.coordinatesToIndex(d[j])],h=this.playScaledSpeed(g.animations,"explode");this.onAnimationEnd(h,function(){i.audioPlayer.play("explode"),f()})}},{key:"playCreeperExplodeAnimation",value:function(a,b,c,d,e){var f=this;this.controller.delayBy(180,function(){f.playPlayerAnimation("bump",a,b,!1).onComplete.add(function(){f.audioPlayer.play("fuse"),f.playExplodingCreeperAnimation(a,b,c,d,e,f),f.controller.delayBy(200,function(){f.onAnimationLoopOnce(f.playPlayerAnimation("jumpUp",a,b,!1),function(){f.playIdleAnimation(a,b,d)})})})})}},{key:"playExplodingCreeperAnimation",value:function(a,b,c,d,e){var f=this,g=(this.getDirectionName(b),this.yToIndex(c[1])+c[0]),h=this.actionPlaneBlocks[g],i=h.animations.getAnimation("explode");i.onComplete.add(function(){h.kill(),f.playExplosionAnimation(a,b,c,d,function(){f.controller.delayBy(100,function(){f.playFailureAnimation(a,b,!1,e)})},!1),f.audioPlayer.play("explode"),f.playExplosionCloudAnimation(c)}),i.play()}},{key:"playExplosionCloudAnimation",value:function(a){this.createBlock(this.fluffPlane,a[0],a[1],"explosion")}},{key:"coordinatesToIndex",value:function(a){return this.yToIndex(a[1])+a[0]}},{key:"playMinecartTurnAnimation",value:function(a,b,c,d,e){var f=this.playPlayerAnimation("mineCart_turn"+e,a,i["default"].Down,!1);return f}},{key:"playMinecartMoveForwardAnimation",value:function(a,b,c,d,e,f){var g;return this.audioPlayer.play("minecart"),this.playPlayerAnimation("mineCart",a,b,!1),g=this.addResettableTween(this.playerSprite).to({x:-18+40*e[0],y:-32+40*e[1]},f,Phaser.Easing.Linear.None),g.start(),
this.playerSprite.sortOrder=this.yToIndex(e[1])+5,g}},{key:"activateUnpoweredRails",value:function(a){for(var b=0;b<a.length;b+=2){var c=a[b+1],d=a[b];this.createActionPlaneBlock(d,c)}}},{key:"playMinecartAnimation",value:function(a,b,c,d,e,f){var g,h=this;this.track=e,this.i=0,this.setPlayerPosition(3,2,c),a=[3,2],g=this.playLevelEndAnimation(a,b,c,d,!1),g.onComplete.add(function(){h.activateUnpoweredRails(f),h.playTrack(a,b,c,d,e)})}},{key:"playTrack",value:function(a,b,c,d,e){var f=this;if(this.i<this.track.length){var g,h=this.track[this.i][0],i=this.track[this.i][1],j=this.track[this.i][3];b=this.track[this.i][2],"turn"===h.substring(0,4)?(g=h.substring(5),this.playMinecartTurnAnimation(a,b,c,d,g).onComplete.add(function(){f.playMinecartMoveForwardAnimation(a,b,c,d,i,j).onComplete.add(function(){a=i,f.playTrack(a,b,c,d,e)})})):this.playMinecartMoveForwardAnimation(a,b,c,d,i,j).onComplete.add(function(){f.playTrack(a,b,c,d,e)}),this.i++}else this.playSuccessAnimation(a,b,c,function(){}),d()}},{key:"addHouseBed",value:function(a){var b=a[1]-1,c=this.actionPlane.create(38*a[0],35*b,"bed");c.sortOrder=this.yToIndex(a[1])}},{key:"addDoor",value:function(a){var b,c=this.actionPlaneBlocks[this.coordinatesToIndex(a)];this.createActionPlaneBlock(a,"door"),b=this.createBlock(this.groundPlane,a[0],a[1],"wool_orange"),c.kill(),b.sortOrder=this.yToIndex(6)}},{key:"playSuccessHouseBuiltAnimation",value:function(a,b,c,d,e,f,g){var h,i=this;h=this.playLevelEndAnimation(a,b,c,function(){i.controller.delayBy(4e3,f)},!0),h.onComplete.add(function(){i.audioPlayer.play("houseSuccess");for(var a,b,c,f=0;f<d.length;++f)a=d[f][1],b=d[f][2],c=i.createBlock(i.groundPlane,a,b,"wool_orange"),c.sortOrder=i.yToIndex(b);i.addHouseBed(e[0]),i.addDoor(e[1]),i.groundPlane.sort("sortOrder"),g()})}},{key:"playLevelEndAnimation",value:function(a,b,c,d,e){var g,h,i,j=this;g=this.fluffPlane.create(0,0,"finishOverlay");var k=this.controller.scaleFromOriginal(),l=f(k,2),m=l[0],n=l[1];return g.scale.x=m,g.scale.y=n,g.alpha=0,h=this.tweenToWhite(g),i=this.tweenFromWhiteToClear(g),h.onComplete.add(function(){j.selectionIndicator.visible=!1,j.setPlayerPosition(a[0],a[1],c),i.start()}),e&&i.onComplete.add(function(){j.playSuccessAnimation(a,b,c,d)}),h.start(),h}},{key:"tweenFromWhiteToClear",value:function(a){var b;return b=this.addResettableTween(a).to({alpha:0},700,Phaser.Easing.Linear.None)}},{key:"tweenToWhite",value:function b(a){var b;return b=this.addResettableTween(a).to({alpha:1},300,Phaser.Easing.Linear.None)}},{key:"playBlockSound",value:function(a){var b=a.substring(0,3);"stone"===a||"cobblestone"===a||"bedrock"===a||"ore"===b||"bricks"===a?this.audioPlayer.play("stepStone"):"grass"===a||"dirt"===a||"dirtCoarse"===a||"wool_orange"==a||"wool"==a?this.audioPlayer.play("stepGrass"):"gravel"===a?this.audioPlayer.play("stepGravel"):"farmlandWet"===a?this.audioPlayer.play("stepFarmland"):this.audioPlayer.play("stepWood")}},{key:"playMoveForwardAnimation",value:function(a,b,c,d,e,f){var g,h,j,k,l=this,m=-32;this.playBlockSound(e);var n=this.getDirectionName(b);this.setSelectionIndicatorPosition(a[0],a[1]);var o=a[1]+(b===i["default"].Up?1:0);return this.playerSprite.sortOrder=this.yToIndex(o)+5,h=[Math.trunc((this.playerSprite.position.x+18)/40),Math.ceil((this.playerSprite.position.y+32)/40)],j=[a[0]-h[0],a[1]-h[1]],d&&(m-=22),c?(k="jumpDown"+n,this.playScaledSpeed(this.playerSprite.animations,k),g=this.addResettableTween(this.playerSprite).to({x:[-18+40*h[0],-18+40*(h[0]+j[0]),-18+40*a[0]],y:[-32+40*h[1],-32+40*(h[1]+j[1])-50,-32+40*a[1]]},300,Phaser.Easing.Linear.None).interpolation(function(a,b){return Phaser.Math.bezierInterpolation(a,b)}),g.onComplete.add(function(){l.audioPlayer.play("fall")})):(k="walk"+n,this.playScaledSpeed(this.playerSprite.animations,k),g=this.addResettableTween(this.playerSprite).to({x:-18+40*a[0],y:m+40*a[1]},200,Phaser.Easing.Linear.None)),g.onComplete.add(function(){f()}),g.start(),g}},{key:"playPlayerJumpDownVerticalAnimation",value:function(a,b){var c=this,d="jumpDown"+this.getDirectionName(b);this.playScaledSpeed(this.playerSprite.animations,d);var e=this.addResettableTween(this.playerSprite).to({x:[-18+40*a[0],-18+40*a[0],-18+40*a[0]],y:[-32+40*a[1],-32+40*a[1]-50,-32+40*a[1]]},300,Phaser.Easing.Linear.None).interpolation(function(a,b){return Phaser.Math.bezierInterpolation(a,b)});e.onComplete.addOnce(function(){c.audioPlayer.play("fall")}),e.start()}},{key:"playPlaceBlockAnimation",value:function(a,b,c,d,e){var f,g=this,h=this.yToIndex(a[1])+a[0];if("cropWheat"===c||"torch"===c||"rails"===c.substring(0,5)){this.setSelectionIndicatorPosition(a[0],a[1]);var i=this.playPlayerAnimation("punch",a,b,!1).onComplete.add(function(){var b;i.detach();var d=g.yToIndex(a[1])+a[0];b=g.createBlock(g.actionPlane,a[0],a[1],c),b&&(b.sortOrder=g.yToIndex(a[1])),g.actionPlaneBlocks[d]=b,e()})}else{this.audioPlayer.play("placeBlock");var j=this.getDirectionName(b);this.setSelectionIndicatorPosition(a[0],a[1]),f="jumpUp"+j,""!==d&&this.playExplosionAnimation(a,b,a,d,function(){},!1),this.playScaledSpeed(this.playerSprite.animations,f);var k=this.addResettableTween(this.playerSprite).to({y:-55+40*a[1]},125,Phaser.Easing.Cubic.EaseOut);k.onComplete.addOnce(function(){k=null,""!==d&&g.actionPlaneBlocks[h].kill();var b=g.createBlock(g.actionPlane,a[0],a[1],c);b&&(b.sortOrder=g.yToIndex(a[1])),g.actionPlaneBlocks[h]=b,e()}),k.start()}}},{key:"playPlaceBlockInFrontAnimation",value:function(a,b,c,d,e,f){var g=this;this.setSelectionIndicatorPosition(c[0],c[1]),this.playPlayerAnimation("punch",a,b,!1).onComplete.addOnce(function(){d===g.controller.levelModel.actionPlane?g.createActionPlaneBlock(c,e):g.refreshGroundPlane(),f()})}},{key:"createActionPlaneBlock",value:function(a,b){var c=this.yToIndex(a[1])+a[0],d=this.createBlock(this.actionPlane,a[0],a[1],b);d&&(d.sortOrder=this.yToIndex(a[1])),this.actionPlaneBlocks[c]=d}},{key:"playShearAnimation",value:function(a,b,c,d,e){var f=this,g=this.yToIndex(c[1])+c[0],h=this.actionPlaneBlocks[g];h.animations.stop(null,!0),this.onAnimationLoopOnce(this.playScaledSpeed(h.animations,"used"),function(){f.playScaledSpeed(h.animations,"face")}),this.playExplosionAnimation(a,b,c,d,e,!0)}},{key:"playShearSheepAnimation",value:function(a,b,c,d,e){var f=this;this.getDirectionName(b);this.setSelectionIndicatorPosition(c[0],c[1]),this.onAnimationEnd(this.playPlayerAnimation("punch",a,b,!1),function(){var g=f.yToIndex(c[1])+c[0],h=f.actionPlaneBlocks[g];h.animations.stop(null,!0),f.onAnimationLoopOnce(f.playScaledSpeed(h.animations,"used"),function(){f.playScaledSpeed(h.animations,"face")}),f.playExplosionAnimation(a,b,c,d,e,!0)})}},{key:"playDestroyBlockAnimation",value:function(a,b,c,d,e,f,g){this.setSelectionIndicatorPosition(c[0],c[1]);var h=d.match(/(ore|stone|clay|bricks|bedrock)/)?"mine":"punchDestroy";this.playPlayerAnimation(h,a,b,!1),this.playMiningParticlesAnimation(b,c),this.playBlockDestroyOverlayAnimation(a,b,c,d,e,f,g)}},{key:"playPunchDestroyAirAnimation",value:function(a,b,c,d){this.playPunchAnimation(a,b,c,"punchDestroy",d)}},{key:"playPunchAirAnimation",value:function(a,b,c,d){this.playPunchAnimation(a,b,c,"punch",d)}},{key:"playPunchAnimation",value:function(a,b,c,d,e){this.setSelectionIndicatorPosition(c[0],c[1]),this.onAnimationEnd(this.playPlayerAnimation(d,a,b,!1),function(){e()})}},{key:"playBlockDestroyOverlayAnimation",value:function(a,b,c,d,e,f,g){var h=this,i=this.yToIndex(c[1])+c[0],j=this.actionPlaneBlocks[i],k=(this.getDirectionName(b),this.actionPlane.create(-12+40*c[0],-22+40*c[1],"destroyOverlay","destroy1"));k.sortOrder=this.yToIndex(c[1])+2,this.onAnimationEnd(k.animations.add("destroy",Phaser.Animation.generateFrameNames("destroy",1,12,"",0),30,!1),function(){h.actionPlaneBlocks[i]=null,j.hasOwnProperty("onBlockDestroy")&&j.onBlockDestroy(j),j.kill(),k.kill(),h.toDestroy.push(j),h.toDestroy.push(k),h.updateShadingPlane(e),h.updateFowPlane(f),h.setSelectionIndicatorPosition(a[0],a[1]),h.audioPlayer.play("dig_wood1"),h.playExplosionAnimation(a,b,c,d,g,!0)}),this.playScaledSpeed(k.animations,"destroy")}},{key:"playMiningParticlesAnimation",value:function(a,b){var c=this,d=[[24,-100,-80],[12,-120,-80],[0,-60,-80],[36,-80,-60]],e=this.getDirectionName(a),f="_left"===e?0:"_bottom"===e?1:"_right"===e?2:3,g=d[f][0],h=d[f][1],i=d[f][2],j=this.actionPlane.create(h+40*b[0],i+40*b[1],"miningParticles","MiningParticles"+g);j.sortOrder=this.yToIndex(b[1])+2,this.onAnimationEnd(j.animations.add("miningParticles",Phaser.Animation.generateFrameNames("MiningParticles",g,g+11,"",0),30,!1),function(){j.kill(),c.toDestroy.push(j)}),this.playScaledSpeed(j.animations,"miningParticles")}},{key:"playExplosionAnimation",value:function(a,b,c,d,e,f){var g=this,h=this.actionPlane.create(-36+40*c[0],-30+40*c[1],"blockExplode","BlockBreakParticle0");if(this.controller.canUseTints())switch(d){case"treeAcacia":case"logAcacia":h.tint=7103834;break;case"treeBirch":case"logBirch":h.tint=14341836;break;case"treeJungle":case"logJungle":h.tint=6967089;break;case"treeOak":case"logOak":h.tint=6771249;break;case"treeSpruce":case"logSpruce":h.tint=4929827;break;case"planksAcacia":h.tint=12215095;break;case"planksBirch":h.tint=14142349;break;case"planksJungle":h.tint=12093284;break;case"planksOak":h.tint=11833434;break;case"planksSpruce":h.tint=8412726;break;case"stone":case"oreCoal":case"oreDiamond":case"oreIron":case"oreGold":case"oreEmerald":case"oreRedstone":h.tint=13027014;break;case"grass":case"cropWheat":h.tint=6131491;break;case"dirt":h.tint=9068083}h.sortOrder=this.yToIndex(c[1])+2,this.onAnimationEnd(h.animations.add("explode",Phaser.Animation.generateFrameNames("BlockBreakParticle",0,7,"",0),30,!1),function(){h.kill(),g.toDestroy.push(h),f&&(g.playPlayerAnimation("idle",a,b,!1),g.playItemDropAnimation(a,b,c,d,e))}),this.playScaledSpeed(h.animations,"explode"),f||e()}},{key:"playItemDropAnimation",value:function(a,b,c,d,e){var f=this,g=this.createMiniBlock(c[0],c[1],d);g.sortOrder=this.yToIndex(c[1])+2,this.onAnimationEnd(this.playScaledSpeed(g.animations,"animate"),function(){f.playItemAcquireAnimation(a,b,c,d,g,e)})}},{key:"playScaledSpeed",value:function(a,b){var c=a.getAnimation(b);return c.originalFps||(c.originalFps=1e3/c.delay),a.play(b,this.controller.originalFpsToScaled(c.originalFps))}},{key:"playItemAcquireAnimation",value:function(a,b,c,d,e,f){var g,h=this;g=this.addResettableTween(e).to({x:-18+40*a[0],y:-32+40*a[1]},200,Phaser.Easing.Linear.None),g.onComplete.add(function(){h.audioPlayer.play("collectedBlock"),e.kill(),h.toDestroy.push(e),f()}),g.start()}},{key:"setPlayerPosition",value:function(a,b,c){this.playerSprite.x=-18+40*a,this.playerSprite.y=-32+(c?-23:0)+40*b,this.playerSprite.sortOrder=this.yToIndex(b)+5}},{key:"setSelectionIndicatorPosition",value:function(a,b){this.selectionIndicator.x=-12+40*a,this.selectionIndicator.y=-12+40*b}},{key:"createPlanes",value:function(){this.groundPlane=this.game.add.group(),this.groundPlane.yOffset=-2,this.shadingPlane=this.game.add.group(),this.shadingPlane.yOffset=-2,this.actionPlane=this.game.add.group(),this.actionPlane.yOffset=-22,this.fluffPlane=this.game.add.group(),this.fluffPlane.yOffset=-160,this.fowPlane=this.game.add.group(),this.fowPlane.yOffset=0}},{key:"resetPlanes",value:function(a){var b,c,d,e;this.groundPlane.removeAll(!0),this.actionPlane.removeAll(!0),this.fluffPlane.removeAll(!0),this.shadingPlane.removeAll(!0),this.fowPlane.removeAll(!0),this.baseShading=this.game.add.group();for(var f=0;f<40*this.controller.levelModel.planeWidth;f+=400)for(var g=0;g<40*this.controller.levelModel.planeHeight;g+=400)this.baseShading.create(f,g,"shadeLayer");for(this.refreshGroundPlane(),this.actionPlaneBlocks=[],d=0;d<this.controller.levelModel.planeHeight;++d)for(c=0;c<this.controller.levelModel.planeWidth;++c){var h=this.yToIndex(d)+c;b=null,a.groundDecorationPlane[h].isEmpty||(b=this.createBlock(this.actionPlane,c,d,a.groundDecorationPlane[h].blockType),b&&(b.sortOrder=this.yToIndex(d))),b=null,a.actionPlane[h].isEmpty||(e=a.actionPlane[h].blockType,b=this.createBlock(this.actionPlane,c,d,e),null!==b&&(b.sortOrder=this.yToIndex(d))),this.actionPlaneBlocks.push(b)}for(d=0;d<this.controller.levelModel.planeHeight;++d)for(c=0;c<this.controller.levelModel.planeWidth;++c){var h=this.yToIndex(d)+c;a.fluffPlane[h].isEmpty||(b=this.createBlock(this.fluffPlane,c,d,a.fluffPlane[h].blockType))}}},{key:"refreshGroundPlane",value:function(){this.groundPlane.removeAll(!0);for(var a=0;a<this.controller.levelModel.planeHeight;++a)for(var b=0;b<this.controller.levelModel.planeWidth;++b){var c=this.yToIndex(a)+b,d=this.createBlock(this.groundPlane,b,a,this.controller.levelModel.groundPlane[c].blockType);d&&(d.sortOrder=this.yToIndex(a))}}},{key:"updateShadingPlane",value:function(a){var b,c,d,e,f;for(this.shadingPlane.removeAll(),this.shadingPlane.add(this.baseShading),this.shadingPlane.add(this.selectionIndicator),b=0;b<a.length;++b){switch(c=a[b],f="AO",d=40*c.x,e=-22+40*c.y,c.type){case"AOeffect_Left":d+=26,e+=22;break;case"AOeffect_Right":d+=0,e+=22;break;case"AOeffect_Bottom":d+=0,e+=22;break;case"AOeffect_BottomLeft":d+=25,e+=22;break;case"AOeffect_BottomRight":d+=0,e+=22;break;case"AOeffect_Top":d+=0,e+=47;break;case"AOeffect_TopLeft":d+=25,e+=47;break;case"AOeffect_TopRight":d+=0,e+=47;break;case"Shadow_Parts_Fade_base.png":f="blockShadows",d-=52,e+=0;break;case"Shadow_Parts_Fade_top.png":f="blockShadows",d-=52,e+=0}this.shadingPlane.create(d,e,f,c.type)}}},{key:"updateFowPlane",value:function(a){var b,c,d,e;for(this.fowPlane.removeAll(),b=0;b<a.length;++b){var f=a[b];if(""!==f){switch(e="undergroundFow",c=-40+40*f.x,d=-40+40*f.y,f.type){case"FogOfWar_Center":}this.fowPlane.create(c,d,e,f.type)}}}},{key:"playRandomPlayerIdle",value:function(a){var b,c,d;switch(b=this.getDirectionName(a),c=Math.trunc(4*Math.random())+1){case 1:d="idle";break;case 2:d="lookLeft";break;case 3:d="lookRight";break;case 4:d="lookAtCam"}d+=b,this.playScaledSpeed(this.playerSprite.animations,d)}},{key:"generatePlayerCelebrateFrames",value:function(){var a,b=[];for(a=0;6>a;++a)b.push("Player_001");return b=b.concat("Player_259"),b=b.concat("Player_260"),b.push("Player_261"),b.push("Player_297"),b.push("Player_298"),b.push("Player_297"),b.push("Player_261"),b.push("Player_261"),b.push("Player_297"),b.push("Player_298"),b.push("Player_297"),b.push("Player_261"),b.push("Player_001"),b.push("Player_001"),b.push("Player_001"),b.push("Player_001"),b.push("Player_001"),b.push("Player_261"),b.push("Player_297"),b.push("Player_298"),b.push("Player_297"),b.push("Player_261"),b.push("Player_261"),b.push("Player_297"),b.push("Player_298"),b.push("Player_297"),b.push("Player_261"),b}},{key:"generateFramesWithEndDelay",value:function(a,b,c,d,e,f){for(var g=Phaser.Animation.generateFrameNames(a,b,c,"",e),h=0;f>h;++h)g.push(d);return g}},{key:"preparePlayerSprite",value:function(a){var b,c,d,e,f=this,g=10,h=20;for(this.playerSprite=this.actionPlane.create(0,0,"player"+a,"Player_121"),this.controller.followingPlayer()&&this.game.camera.follow(this.playerSprite),this.playerGhost=this.fluffPlane.create(0,0,"player"+a,"Player_121"),this.playerGhost.parent=this.playerSprite,this.playerGhost.alpha=.2,this.selectionIndicator=this.shadingPlane.create(24,44,"selectionIndicator"),e=Phaser.Animation.generateFrameNames("Player_",285,296,"",3),b=[],b.push("Player_001"),b.push("Player_003"),b.push("Player_001"),b.push("Player_007"),b.push("Player_009"),b.push("Player_007"),c=0;5>c;++c)b.push("Player_001");for(this.playerSprite.animations.add("idle_down",b,h/3,!1).onComplete.add(function(){f.playRandomPlayerIdle(i["default"].Down)}),b=this.generateFramesWithEndDelay("Player_",6,5,"Player_005",3,5),b.push("Player_006"),this.playerSprite.animations.add("lookLeft_down",b,g,!1).onComplete.add(function(){f.playScaledSpeed(f.playerSprite.animations,"idlePause_down")}),b=this.generateFramesWithEndDelay("Player_",12,11,"Player_011",3,5),b.push("Player_012"),this.playerSprite.animations.add("lookRight_down",b,g,!1).onComplete.add(function(){f.playScaledSpeed(f.playerSprite.animations,"idlePause_down")}),b=this.generateFramesWithEndDelay("Player_",263,262,"Player_262",3,5),b.push("Player_263"),this.playerSprite.animations.add("lookAtCam_down",b,g,!1).onComplete.add(function(){f.playScaledSpeed(f.playerSprite.animations,"idlePause_down")}),b=[],c=0;13>c;++c)b.push("Player_001");for(this.playerSprite.animations.add("idlePause_down",b,h/3,!1).onComplete.add(function(){f.playRandomPlayerIdle(i["default"].Down)}),this.playerSprite.animations.add("walk_down",Phaser.Animation.generateFrameNames("Player_",13,h,"",3),h,!0),d=Phaser.Animation.generateFrameNames("Player_",21,24,"",3),this.playerSprite.animations.add("punch_down",d,h,!1).onComplete.add(function(){f.audioPlayer.play("punch")}),this.playerSprite.animations.add("punchDestroy_down",d.concat(d).concat(d),h,!1),this.playerSprite.animations.add("hurt_down",Phaser.Animation.generateFrameNames("Player_",25,28,"",3),h,!0),this.playerSprite.animations.add("crouch_down",Phaser.Animation.generateFrameNames("Player_",29,32,"",3),h,!0),this.playerSprite.animations.add("jumpUp_down",Phaser.Animation.generateFrameNames("Player_",33,36,"",3),h/2,!0),this.playerSprite.animations.add("fail_down",Phaser.Animation.generateFrameNames("Player_",45,48,"",3),h,!1),this.playerSprite.animations.add("celebrate_down",this.generatePlayerCelebrateFrames(),h/2,!1),this.playerSprite.animations.add("bump_down",Phaser.Animation.generateFrameNames("Player_",49,54,"",3),h,!1).onStart.add(function(){f.audioPlayer.play("bump")}),this.playerSprite.animations.add("jumpDown_down",Phaser.Animation.generateFrameNames("Player_",55,60,"",3),h,!0),this.playerSprite.animations.add("mine_down",Phaser.Animation.generateFrameNames("Player_",241,244,"",3),h,!0),this.playerSprite.animations.add("mineCart_down",Phaser.Animation.generateFrameNames("Minecart_",5,5,"",2),h,!1),this.playerSprite.animations.add("mineCart_turnleft_down",Phaser.Animation.generateFrameNames("Minecart_",6,6,"",2),h,!1),this.playerSprite.animations.add("mineCart_turnright_down",Phaser.Animation.generateFrameNames("Minecart_",12,12,"",2),h,!1),b=[],b.push("Player_061"),b.push("Player_063"),b.push("Player_061"),b.push("Player_067"),b.push("Player_069"),b.push("Player_067"),c=0;5>c;++c)b.push("Player_061");for(this.playerSprite.animations.add("idle_right",b,h/3,!1).onComplete.add(function(){f.playRandomPlayerIdle(i["default"].Right)}),b=this.generateFramesWithEndDelay("Player_",66,65,"Player_065",3,5),b.push("Player_066"),this.playerSprite.animations.add("lookLeft_right",b,g,!1).onComplete.add(function(){f.playScaledSpeed(f.playerSprite.animations,"idlePause_right")}),b=this.generateFramesWithEndDelay("Player_",72,71,"Player_071",3,5),b.push("Player_072"),this.playerSprite.animations.add("lookRight_right",b,g,!1).onComplete.add(function(){f.playScaledSpeed(f.playerSprite.animations,"idlePause_right")}),b=this.generateFramesWithEndDelay("Player_",270,269,"Player_269",3,5),b.push("Player_270"),this.playerSprite.animations.add("lookAtCam_right",b,g,!1).onComplete.add(function(){f.playScaledSpeed(f.playerSprite.animations,"idlePause_right")}),b=[],c=0;13>c;++c)b.push("Player_061");for(this.playerSprite.animations.add("idlePause_right",b,h/3,!1).onComplete.add(function(){f.playRandomPlayerIdle(i["default"].Right)}),this.playerSprite.animations.add("walk_right",Phaser.Animation.generateFrameNames("Player_",73,80,"",3),h,!0),d=Phaser.Animation.generateFrameNames("Player_",81,84,"",3),this.playerSprite.animations.add("punch_right",d,h,!1).onComplete.add(function(){f.audioPlayer.play("punch")}),this.playerSprite.animations.add("punchDestroy_right",d.concat(d).concat(d),h,!1),this.playerSprite.animations.add("hurt_right",Phaser.Animation.generateFrameNames("Player_",85,88,"",3),h,!0),this.playerSprite.animations.add("crouch_right",Phaser.Animation.generateFrameNames("Player_",89,92,"",3),h,!0),this.playerSprite.animations.add("jumpUp_right",Phaser.Animation.generateFrameNames("Player_",93,96,"",3),h/2,!0),this.playerSprite.animations.add("fail_right",Phaser.Animation.generateFrameNames("Player_",105,108,"",3),h/2,!1),this.playerSprite.animations.add("celebrate_right",this.generatePlayerCelebrateFrames(),h/2,!1),this.playerSprite.animations.add("bump_right",Phaser.Animation.generateFrameNames("Player_",109,114,"",3),h,!1).onStart.add(function(){f.audioPlayer.play("bump")}),this.playerSprite.animations.add("jumpDown_right",Phaser.Animation.generateFrameNames("Player_",115,120,"",3),h,!0),this.playerSprite.animations.add("mine_right",Phaser.Animation.generateFrameNames("Player_",245,248,"",3),h,!0),this.playerSprite.animations.add("mineCart_right",Phaser.Animation.generateFrameNames("Minecart_",7,7,"",2),h,!1),b=[],b.push("Player_181"),b.push("Player_183"),b.push("Player_181"),b.push("Player_187"),b.push("Player_189"),b.push("Player_187"),c=0;5>c;++c)b.push("Player_181");for(this.playerSprite.animations.add("idle_left",b,h/3,!1).onComplete.add(function(){f.playRandomPlayerIdle(i["default"].Left)}),b=this.generateFramesWithEndDelay("Player_",186,185,"Player_185",3,5),b.push("Player_186"),this.playerSprite.animations.add("lookLeft_left",b,g,!1).onComplete.add(function(){f.playScaledSpeed(f.playerSprite.animations,"idlePause_left")}),b=this.generateFramesWithEndDelay("Player_",192,191,"Player_191",3,5),b.push("Player_192"),this.playerSprite.animations.add("lookRight_left",b,g,!1).onComplete.add(function(){f.playScaledSpeed(f.playerSprite.animations,"idlePause_left")}),b=this.generateFramesWithEndDelay("Player_",284,283,"Player_283",3,5),b.push("Player_284"),this.playerSprite.animations.add("lookAtCam_left",b,g,!1).onComplete.add(function(){f.playScaledSpeed(f.playerSprite.animations,"idlePause_left")}),b=[],c=0;13>c;++c)b.push("Player_181");for(this.playerSprite.animations.add("idlePause_left",b,h/3,!1).onComplete.add(function(){f.playRandomPlayerIdle(i["default"].Left)}),this.playerSprite.animations.add("walk_left",Phaser.Animation.generateFrameNames("Player_",193,200,"",3),h,!0),d=Phaser.Animation.generateFrameNames("Player_",201,204,"",3),this.playerSprite.animations.add("punch_left",d,h,!1).onComplete.add(function(){f.audioPlayer.play("punch")}),this.playerSprite.animations.add("punchDestroy_left",d.concat(d).concat(d),h,!1),this.playerSprite.animations.add("hurt_left",Phaser.Animation.generateFrameNames("Player_",205,208,"",3),h,!0),this.playerSprite.animations.add("crouch_left",Phaser.Animation.generateFrameNames("Player_",209,212,"",3),h,!0),this.playerSprite.animations.add("jumpUp_left",Phaser.Animation.generateFrameNames("Player_",213,216,"",3),h/2,!0),this.playerSprite.animations.add("fail_left",Phaser.Animation.generateFrameNames("Player_",225,228,"",3),h/2,!1),this.playerSprite.animations.add("celebrate_left",this.generatePlayerCelebrateFrames(),h/2,!1),this.playerSprite.animations.add("bump_left",Phaser.Animation.generateFrameNames("Player_",229,234,"",3),h,!1).onStart.add(function(){f.audioPlayer.play("bump")}),this.playerSprite.animations.add("jumpDown_left",Phaser.Animation.generateFrameNames("Player_",235,240,"",3),h,!0),this.playerSprite.animations.add("mine_left",Phaser.Animation.generateFrameNames("Player_",253,256,"",3),h,!0),this.playerSprite.animations.add("mineCart_left",Phaser.Animation.generateFrameNames("Minecart_",11,11,"",2),h,!1),b=[],b.push("Player_121"),b.push("Player_123"),b.push("Player_121"),b.push("Player_127"),b.push("Player_129"),b.push("Player_127"),c=0;5>c;++c)b.push("Player_121");for(this.playerSprite.animations.add("idle_up",b,h/3,!1).onComplete.add(function(){f.playRandomPlayerIdle(i["default"].Up)}),b=this.generateFramesWithEndDelay("Player_",126,125,"Player_125",3,5),b.push("Player_126"),this.playerSprite.animations.add("lookLeft_up",b,g,!1).onComplete.add(function(){f.playScaledSpeed(f.playerSprite.animations,"idlePause_up")}),b=this.generateFramesWithEndDelay("Player_",132,131,"Player_131",3,5),b.push("Player_132"),this.playerSprite.animations.add("lookRight_up",b,g,!1).onComplete.add(function(){f.playScaledSpeed(f.playerSprite.animations,"idlePause_up")}),b=this.generateFramesWithEndDelay("Player_",277,276,"Player_276",3,5),b.push("Player_277"),this.playerSprite.animations.add("lookAtCam_up",b,g,!1).onComplete.add(function(){f.playScaledSpeed(f.playerSprite.animations,"idlePause_up")}),b=[],c=0;13>c;++c)b.push("Player_121");this.playerSprite.animations.add("idlePause_up",b,h/3,!1).onComplete.add(function(){f.playRandomPlayerIdle(i["default"].Up)}),this.playerSprite.animations.add("walk_up",Phaser.Animation.generateFrameNames("Player_",133,140,"",3),h,!0),d=Phaser.Animation.generateFrameNames("Player_",141,144,"",3),this.playerSprite.animations.add("punch_up",d,h,!1).onComplete.add(function(){f.audioPlayer.play("punch")}),this.playerSprite.animations.add("punchDestroy_up",d.concat(d).concat(d),h,!1),this.playerSprite.animations.add("hurt_up",Phaser.Animation.generateFrameNames("Player_",145,148,"",3),h,!0),this.playerSprite.animations.add("crouch_up",Phaser.Animation.generateFrameNames("Player_",149,152,"",3),h,!0),this.playerSprite.animations.add("jumpUp_up",Phaser.Animation.generateFrameNames("Player_",153,156,"",3),h/2,!0),this.playerSprite.animations.add("fail_up",Phaser.Animation.generateFrameNames("Player_",165,168,"",3),h/2,!1),this.playerSprite.animations.add("celebrate_up",this.generatePlayerCelebrateFrames(),h/2,!1),this.playerSprite.animations.add("bump_up",Phaser.Animation.generateFrameNames("Player_",169,174,"",3),h,!1).onStart.add(function(){f.audioPlayer.play("bump")}),this.playerSprite.animations.add("jumpDown_up",Phaser.Animation.generateFrameNames("Player_",175,180,"",3),h,!0),this.playerSprite.animations.add("mine_up",Phaser.Animation.generateFrameNames("Player_",249,252,"",3),h,!0),this.playerSprite.animations.add("mineCart_up",Phaser.Animation.generateFrameNames("Minecart_",9,9,"",2),h,!1),this.playerSprite.animations.add("mineCart_turnleft_up",Phaser.Animation.generateFrameNames("Minecart_",10,10,"",2),h,!1),this.playerSprite.animations.add("mineCart_turnright_up",Phaser.Animation.generateFrameNames("Minecart_",8,8,"",2),h,!1)}},{key:"createMiniBlock",value:function(a,b,c){var d,e="",f=null;switch(c){case"treeAcacia":case"treeBirch":case"treeJungle":case"treeOak":case"treeSpruce":e="log"+c.substring(4);break;case"stone":e="cobblestone";break;case"oreCoal":e="coal";break;case"oreDiamond":e="diamond";break;case"oreIron":e="ingotIron";break;case"oreLapis":e="lapisLazuli";break;case"oreGold":e="ingotGold";break;case"oreEmerald":e="emerald";break;case"oreRedstone":e="redstoneDust";break;case"grass":e="dirt";break;case"wool_orange":e="wool";break;case"tnt":e="gunPowder";break;default:e=c}var g="miniBlocks",h=this.miniBlocks[e][0],i=this.miniBlocks[e][1],j=this.miniBlocks[e][2],k=-10,l=0;return d=Phaser.Animation.generateFrameNames(h,i,j,"",3),f=this.actionPlane.create(k+40*a,l+this.actionPlane.yOffset+40*b,g,""),f.animations.add("animate",d,10,!1),f}},{key:"playAnimationWithOffset",value:function(a,b,c,d){var e=Math.trunc(Math.random()*c)+d;this.playScaledSpeed(a.animations,b).setFrame(e,!0)}},{key:"playRandomSheepAnimation",value:function(a){var b=Math.trunc(20*Math.random()+1);switch(b){case 1:case 2:case 3:case 4:case 5:case 6:a.play("idle");break;case 7:case 8:case 9:case 10:a.play("lookLeft");break;case 11:case 12:case 13:case 14:a.play("lookRight");break;case 15:case 16:case 17:a.play("lookAtCam");break;case 18:case 19:a.play("kick");break;case 20:a.play("idlePause")}}},{key:"playRandomCreeperAnimation",value:function(a){var b=Math.trunc(this.yToIndex(Math.random())+1);switch(b){case 1:case 2:case 3:a.play("lookLeft");break;case 4:case 5:case 6:a.play("lookRight");break;case 7:case 8:a.play("lookAtCam");break;case 9:case 10:a.play("idle")}}},{key:"createBlock",value:function(a,b,c,d){var e,f,g,h,i,j,k,l=this,m=null;switch(d){case"treeAcacia":case"treeBirch":case"treeJungle":case"treeOak":case"treeSpruce":m=this.createBlock(a,b,c,"log"+d.substring(4)),m.fluff=this.createBlock(this.fluffPlane,b,c,"leaves"+d.substring(4)),m.onBlockDestroy=function(a){a.fluff.animations.add("despawn",Phaser.Animation.generateFrameNames("Leaves",0,6,"",0),10,!1).onComplete.add(function(){l.toDestroy.push(a.fluff),a.fluff.kill()}),l.playScaledSpeed(a.fluff.animations,"despawn")};break;case"sheep":var n=10;for(m=a.create(-22+40*b,-12+40*c,"sheep","Sheep_199"),f=Phaser.Animation.generateFrameNames("Sheep_",199,215,"",0),e=0;n>e;++e)f.push("Sheep_215");for(m.animations.add("idle",f,15,!1).onComplete.add(function(){m.play("idlePause")}),f=Phaser.Animation.generateFrameNames("Sheep_",184,186,"",0),e=0;n>e;++e)f.push("Sheep_186");for(f.push("Sheep_188"),m.animations.add("lookRight",f,15,!1).onComplete.add(function(){m.play("idlePause")}),f=Phaser.Animation.generateFrameNames("Sheep_",193,195,"",0),e=0;n>e;++e)f.push("Sheep_195");for(f.push("Sheep_197"),m.animations.add("lookLeft",f,15,!1).onComplete.add(function(){m.play("idlePause")}),f=Phaser.Animation.generateFrameNames("Sheep_",217,233,"",0),m.animations.add("kick",f,15,!1).onComplete.add(function(){m.play("idlePause")}),f=Phaser.Animation.generateFrameNames("Sheep_",484,485,"",0),e=0;n>e;++e)f.push("Sheep_485");for(f.push("Sheep_486"),m.animations.add("lookAtCam",f,15,!1).onComplete.add(function(){m.play("idlePause")}),f=[],e=0;15>e;++e)f.push("Sheep_215");for(m.animations.add("idlePause",f,15,!1).onComplete.add(function(){l.playRandomSheepAnimation(m)}),f=Phaser.Animation.generateFrameNames("Sheep_",490,491,"",0),k=Math.trunc(3*Math.random())+3,e=0;k>e;++e)f.push("Sheep_491");for(this.onAnimationStart(m.animations.add("face",f,2,!0),function(){l.audioPlayer.play("sheepBaa")}),f=Phaser.Animation.generateFrameNames("Sheep_",439,455,"",0),e=0;3>e;++e)f.push("Sheep_455");m.animations.add("used",f,15,!0),this.playAnimationWithOffset(m,"idle",17,199);break;case"creeper":for(m=a.create(-6+40*b,0+a.yOffset+40*c,"creeper","Creeper_053"),f=Phaser.Animation.generateFrameNames("Creeper_",37,51,"",3),m.animations.add("explode",f,10,!1),f=Phaser.Animation.generateFrameNames("Creeper_",4,7,"",3),e=0;15>e;++e)f.push("Creeper_007");for(f.push("Creeper_008"),f.push("Creeper_009"),f.push("Creeper_010"),f.push("Creeper_011"),m.animations.add("lookLeft",f,15,!1).onComplete.add(function(){m.play("idlePause")}),f=Phaser.Animation.generateFrameNames("Creeper_",16,19,"",3),e=0;15>e;++e)f.push("Creeper_019");for(f.push("Creeper_020"),f.push("Creeper_021"),f.push("Creeper_022"),f.push("Creeper_023"),m.animations.add("lookRight",f,15,!1).onComplete.add(function(){m.play("idlePause")}),f=Phaser.Animation.generateFrameNames("Creeper_",244,245,"",3),e=0;15>e;++e)f.push("Creeper_245");for(f.push("Creeper_246"),m.animations.add("lookAtCam",f,15,!1).onComplete.add(function(){m.play("idlePause")}),f=[],e=0;15>e;++e)f.push("Creeper_004");for(m.animations.add("idlePause",f,15,!1).onComplete.add(function(){l.playRandomCreeperAnimation(m)}),f=Phaser.Animation.generateFrameNames("Creeper_",53,59,"",3),k=Math.trunc(this.yToIndex(Math.random()))+20,e=0;k>e;++e)f.push("Creeper_004");m.animations.add("idle",f,15,!1).onComplete.add(function(){m.play("idlePause")}),this.playAnimationWithOffset(m,"idle",8,52);break;case"cropWheat":g=this.blocks[d][0],h=this.blocks[d][1],i=this.blocks[d][2],j=this.blocks[d][3],m=a.create(i+40*b,j+a.yOffset+40*c,g,h),f=Phaser.Animation.generateFrameNames("Wheat",0,2,"",0),m.animations.add("idle",f,.4,!1),this.playScaledSpeed(m.animations,"idle");break;case"torch":g=this.blocks[d][0],h=this.blocks[d][1],i=this.blocks[d][2],j=this.blocks[d][3],m=a.create(i+40*b,j+a.yOffset+40*c,g,h),f=Phaser.Animation.generateFrameNames("Torch",0,23,"",0),m.animations.add("idle",f,15,!0),this.playScaledSpeed(m.animations,"idle");break;case"water":g=this.blocks[d][0],h=this.blocks[d][1],i=this.blocks[d][2],j=this.blocks[d][3],m=a.create(i+40*b,j+a.yOffset+40*c,g,h),f=Phaser.Animation.generateFrameNames("Water_",0,5,"",0),m.animations.add("idle",f,5,!0),this.playScaledSpeed(m.animations,"idle");
break;case"watering":g=this.blocks[d][0],h=this.blocks[d][1],i=this.blocks[d][2],j=this.blocks[d][3],m=a.create(i+40*b,j+a.yOffset+40*c,g,h),m.kill(),this.toDestroy.push(m),this.createBlock(this.groundPlane,b,c,"farmlandWet"),this.refreshGroundPlane();break;case"lava":g=this.blocks[d][0],h=this.blocks[d][1],i=this.blocks[d][2],j=this.blocks[d][3],m=a.create(i+40*b,j+a.yOffset+40*c,g,h),f=Phaser.Animation.generateFrameNames("Lava_",0,5,"",0),m.animations.add("idle",f,5,!0),this.playScaledSpeed(m.animations,"idle");break;case"lavaPop":for(g=this.blocks[d][0],h=this.blocks[d][1],i=this.blocks[d][2],j=this.blocks[d][3],m=a.create(i+40*b,j+a.yOffset+40*c,g,h),f=Phaser.Animation.generateFrameNames("LavaPop",1,7,"",2),e=0;4>e;++e)f.push("LavaPop07");for(f=f.concat(Phaser.Animation.generateFrameNames("LavaPop",8,13,"",2)),e=0;3>e;++e)f.push("LavaPop13");for(f=f.concat(Phaser.Animation.generateFrameNames("LavaPop",14,30,"",2)),e=0;8>e;++e)f.push("LavaPop01");m.animations.add("idle",f,5,!0),this.playAnimationWithOffset(m,"idle",29,1);break;case"fire":g=this.blocks[d][0],h=this.blocks[d][1],i=this.blocks[d][2],j=this.blocks[d][3],m=a.create(i+40*b,j+a.yOffset+40*c,g,h),f=Phaser.Animation.generateFrameNames("Fire",0,14,"",2),m.animations.add("idle",f,5,!0),this.playScaledSpeed(m.animations,"idle");break;case"bubbles":g=this.blocks[d][0],h=this.blocks[d][1],i=this.blocks[d][2],j=this.blocks[d][3],m=a.create(i+40*b,j+a.yOffset+40*c,g,h),f=Phaser.Animation.generateFrameNames("Bubbles",0,14,"",2),m.animations.add("idle",f,5,!0),this.playScaledSpeed(m.animations,"idle");break;case"explosion":g=this.blocks[d][0],h=this.blocks[d][1],i=this.blocks[d][2],j=this.blocks[d][3],m=a.create(i+40*b,j+a.yOffset+40*c,g,h),f=Phaser.Animation.generateFrameNames("Explosion",0,16,"",1),m.animations.add("idle",f,15,!1).onComplete.add(function(){l.toDestroy.push(m),m.kill()}),this.playScaledSpeed(m.animations,"idle");break;case"door":g=this.blocks[d][0],h=this.blocks[d][1],i=this.blocks[d][2],j=this.blocks[d][3],m=a.create(i+40*b,j+a.yOffset+40*c,g,h),f=[];for(var o=Phaser.Animation.generateFrameNames("Door",0,3,"",1),p=0;5>p;++p)f.push("Door0");f=f.concat(o);var q=m.animations.add("open",f,5,!1);q.enableUpdate=!0,q.onUpdate.add(function(){1===q.frame&&l.audioPlayer.play("doorOpen")}),this.playScaledSpeed(m.animations,"open");break;case"tnt":g=this.blocks[d][0],h=this.blocks[d][1],i=this.blocks[d][2],j=this.blocks[d][3],m=a.create(i+40*b,j+a.yOffset+40*c,g,h),f=Phaser.Animation.generateFrameNames("TNTexplosion",0,8,"",0),m.animations.add("explode",f,7,!1).onComplete.add(function(){l.playExplosionCloudAnimation([b,c]),m.kill(),l.toDestroy.push(m),l.actionPlaneBlocks[l.coordinatesToIndex([b,c])]=null});break;default:g=this.blocks[d][0],h=this.blocks[d][1],i=this.blocks[d][2],j=this.blocks[d][3],m=a.create(i+40*b,j+a.yOffset+40*c,g,h)}return m}},{key:"onAnimationEnd",value:function(a,b){var c=a.onComplete.add(function(){c.detach(),b()})}},{key:"onAnimationStart",value:function(a,b){var c=a.onStart.add(function(){c.detach(),b()})}},{key:"onAnimationLoopOnce",value:function(a,b){var c=a.onLoop.add(function(){c.detach(),b()})}},{key:"addResettableTween",value:function(a){var b=this.game.add.tween(a);return this.resettableTweens.push(b),b}}]),a}();c["default"]=j,b.exports=c["default"]},{"./FacingDirection.js":"/home/ubuntu/staging/apps/build/js/craft/game/LevelMVC/FacingDirection.js"}],"/home/ubuntu/staging/apps/build/js/craft/game/LevelMVC/LevelModel.js":[function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{"default":a}}function e(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(c,"__esModule",{value:!0});var f=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),g=a("./LevelBlock.js"),h=d(g),i=a("./FacingDirection.js"),j=d(i),k=function(){function a(b){e(this,a),this.planeWidth=b.gridDimensions?b.gridDimensions[0]:10,this.planeHeight=b.gridDimensions?b.gridDimensions[1]:10,this.player={},this.railMap=["","","","","","","","","","","","","","","","","","","","","","","","railsUnpoweredVertical","","","","","","","","","","railsUnpoweredVertical","","","","","","","","","","railsUnpoweredVertical","","","","","","","","","","railsUnpoweredVertical","","","","","","","","","","railsUnpoweredVertical","","","","","","","","","","railsBottomLeft","railsHorizontal","railsHorizontal","railsHorizontal","railsHorizontal","railsHorizontal","railsHorizontal","","","","","","","","","","","","","","","","","","","",""],this.initialLevelData=Object.create(b),this.reset(),this.initialPlayerState=Object.create(this.player)}return f(a,[{key:"planeArea",value:function(){return this.planeWidth*this.planeHeight}},{key:"inBounds",value:function(a,b){return a>=0&&a<this.planeWidth&&b>=0&&b<this.planeHeight}},{key:"reset",value:function(){this.groundPlane=this.constructPlane(this.initialLevelData.groundPlane,!1),this.groundDecorationPlane=this.constructPlane(this.initialLevelData.groundDecorationPlane,!1),this.shadingPlane=[],this.actionPlane=this.constructPlane(this.initialLevelData.actionPlane,!0),this.fluffPlane=this.constructPlane(this.initialLevelData.fluffPlane,!1),this.fowPlane=[],this.isDaytime=void 0===this.initialLevelData.isDaytime||this.initialLevelData.isDaytime;var a=Object.create(this.initialLevelData),b=a.playerStartPosition[0],c=a.playerStartPosition[1];this.player.name=this.initialLevelData.playerName||"Steve",this.player.position=a.playerStartPosition,this.player.isOnBlock=!this.actionPlane[this.yToIndex(c)+b].getIsEmptyOrEntity(),this.player.facing=a.playerStartDirection,this.player.inventory={},this.computeShadingPlane(),this.computeFowPlane()}},{key:"yToIndex",value:function(a){return a*this.planeWidth}},{key:"constructPlane",value:function(a,b){var c,d,e=[];for(c=0;c<a.length;++c)d=new h["default"](a[c]),d.isWalkable=d.isWalkable||!b,e.push(d);return e}},{key:"isSolved",value:function(){return this.initialLevelData.verificationFunction(this)}},{key:"getHouseBottomRight",value:function(){return this.initialLevelData.houseBottomRight}},{key:"isPlayerNextTo",value:function(a){var b;return b=[this.player.position[0],this.player.position[1]-1],this.isBlockOfType(b,a)?!0:(b=[this.player.position[0],this.player.position[1]+1],this.isBlockOfType(b,a)?!0:(b=[this.player.position[0]+1,this.player.position[1]],this.isBlockOfType(b,a)?!0:(b=[this.player.position[0]-1,this.player.position[1]],this.isBlockOfType(b,a)?!0:!1)))}},{key:"getInventoryAmount",value:function(a){return this.player.inventory[a]||0}},{key:"getInventoryTypes",value:function(){return Object.keys(this.player.inventory)}},{key:"countOfTypeOnMap",value:function(a){var b,c=0;for(b=0;b<this.planeArea();++b)a==this.actionPlane[b].blockType&&++c;return c}},{key:"isPlayerAt",value:function(a){return this.player.position[0]===a[0]&&this.player.position[1]===a[1]}},{key:"solutionMapMatchesResultMap",value:function(a){for(var b=0;b<this.planeArea();b++){var c=a[b];if(""!==c)if("empty"===c){if(!this.actionPlane[b].isEmpty)return!1}else if("any"===c){if(this.actionPlane[b].isEmpty)return!1}else if(this.actionPlane[b].blockType!==c)return!1}return!0}},{key:"getTnt",value:function(){for(var a=[],b=0;b<this.planeWidth;++b)for(var c=0;c<this.planeHeight;++c){var d=this.coordinatesToIndex([b,c]),e=this.actionPlane[d];"tnt"===e.blockType&&a.push([b,c])}return a}},{key:"getUnpoweredRails",value:function(){for(var a=[],b=0;b<this.planeWidth;++b)for(var c=0;c<this.planeHeight;++c){var d=this.coordinatesToIndex([b,c]),e=this.actionPlane[d];"railsUn"==e.blockType.substring(0,7)&&a.push([b,c],"railsPowered"+this.actionPlane[d].blockType.substring(14))}return a}},{key:"getMoveForwardPosition",value:function(){var a=this.player.position[0],b=this.player.position[1];switch(this.player.facing){case j["default"].Up:--b;break;case j["default"].Down:++b;break;case j["default"].Left:--a;break;case j["default"].Right:++a}return[a,b]}},{key:"isForwardBlockOfType",value:function(a){var b=this.getMoveForwardPosition(),c=this.isBlockOfTypeOnPlane(b,"empty",this.actionPlane);return""===a&&c?!0:c?this.isBlockOfTypeOnPlane(b,a,this.groundPlane):this.isBlockOfTypeOnPlane(b,a,this.actionPlane)}},{key:"isBlockOfType",value:function(a,b){return this.isBlockOfTypeOnPlane(a,b,this.actionPlane)}},{key:"isBlockOfTypeOnPlane",value:function(a,b,c){var d=!1,e=this.yToIndex(a[1])+a[0];return e>=0&&e<this.planeArea()&&(d="empty"==b?c[e].isEmpty:"tree"==b?c[e].getIsTree():b==c[e].blockType),d}},{key:"isPlayerStandingInWater",value:function(){var a=this.yToIndex(this.player.position[1])+this.player.position[0];return"water"===this.groundPlane[a].blockType}},{key:"isPlayerStandingInLava",value:function(){var a=this.yToIndex(this.player.position[1])+this.player.position[0];return"lava"===this.groundPlane[a].blockType}},{key:"coordinatesToIndex",value:function(a){return this.yToIndex(a[1])+a[0]}},{key:"checkPositionForTypeAndPush",value:function(a,b,c){return!a&&""!==this.actionPlane[this.coordinatesToIndex(b)].blockType||this.isBlockOfType(b,a)?(c.push([!0,b]),!0):(c.push([!1,null]),!1)}},{key:"houseGroundToFloorHelper",value:function(a,b,c){var d,e,f,g,h,i,j=0,k=c,l=this.yToIndex(a[2])+a[1];44===l&&(l=44),f=[0,a[1],a[2]+1],f[0]=this.yToIndex(f[2])+f[1],g=[0,a[1],a[2]-1],g[0]=this.yToIndex(g[2])+g[1],h=[0,a[1]+1,a[2]],h[0]=this.yToIndex(h[2])+h[1],i=[0,a[1]-1,a[2]],h[0]=this.yToIndex(h[2])+h[1],d=this.actionPlane[l],e=this.groundPlane[l];for(var m=0;m<k.length;++m)if(k[m][0]===l){j=-1;break}return""!==d.blockType?{}:k.length>0&&-1===j?{}:(k.push(a),k.concat(this.houseGroundToFloorHelper(f,b,k)),k.concat(this.houseGroundToFloorHelper(g,b,k)),k.concat(this.houseGroundToFloorHelper(h,b,k)),k.concat(this.houseGroundToFloorHelper(i,b,k)),k)}},{key:"houseGroundToFloorBlocks",value:function(a){var b="wool_orange",c=[0,a[0],a[1]];return this.houseGroundToFloorHelper(c,b,[])}},{key:"getAllBorderingPositionNotOfType",value:function(a,b){for(var c=this.getAllBorderingPosition(a,null),d=1;d<c.length;++d)c[d][0]&&this.actionPlane[this.coordinatesToIndex(c[d][1])].blockType==b&&(c[d][0]=!1);return c}},{key:"getAllBorderingPosition",value:function(a,b){var c,d=[!1];return c=[a[0]+1,a[1]+1],this.checkPositionForTypeAndPush(b,c,d)&&(d[0]=!0),c=[a[0]-1,a[1]+1],this.checkPositionForTypeAndPush(b,c,d)&&(d[0]=!0),c=[a[0]+1,a[1]-1],this.checkPositionForTypeAndPush(b,c,d)&&(d[0]=!0),c=[a[0]-1,a[1]-1],this.checkPositionForTypeAndPush(b,c,d)&&(d[0]=!0),c=[a[0],a[1]+1],this.checkPositionForTypeAndPush(b,c,d)&&(d[0]=!0),c=[a[0],a[1]-1],this.checkPositionForTypeAndPush(b,c,d)&&(d[0]=!0),c=[a[0]+1,a[1]],this.checkPositionForTypeAndPush(b,c,d)&&(d[0]=!0),c=[a[0]-1,a[1]],this.checkPositionForTypeAndPush(b,c,d)&&(d[0]=!0),d}},{key:"getAllBorderingPlayer",value:function(a){return this.getAllBorderingPosition(this.player.position,a)}},{key:"isPlayerStandingNearCreeper",value:function(){return this.getAllBorderingPlayer("creeper")}},{key:"getMinecartTrack",value:function(){var a=[];return a.push(["down",[3,2],j["default"].Down,300]),a.push(["down",[3,3],j["default"].Down,300]),a.push(["down",[3,4],j["default"].Down,300]),a.push(["down",[3,5],j["default"].Down,300]),a.push(["down",[3,6],j["default"].Down,300]),a.push(["down",[3,7],j["default"].Down,300]),a.push(["turn_left",[3,7],j["default"].Right,400]),a.push(["right",[4,7],j["default"].Right,400]),a.push(["right",[5,7],j["default"].Right,400]),a.push(["right",[6,7],j["default"].Right,400]),a.push(["right",[7,7],j["default"].Right,400]),a.push(["right",[8,7],j["default"].Right,400]),a.push(["right",[9,7],j["default"].Right,400]),a.push(["right",[10,7],j["default"].Right,400]),a.push(["right",[11,7],j["default"].Right,400]),a}},{key:"canMoveForward",value:function(){var a=!1,b=this.getMoveForwardPosition(),c=this.yToIndex(b[1])+b[0],d=b[0],e=b[1];return this.inBounds(d,e)&&(a=this.actionPlane[c].isWalkable||this.player.isOnBlock&&!this.actionPlane[c].isEmpty),a}},{key:"canPlaceBlock",value:function(){return!0}},{key:"canPlaceBlockForward",value:function(){return this.player.isOnBlock?!1:null!==this.getPlaneToPlaceOn(this.getMoveForwardPosition())}},{key:"getPlaneToPlaceOn",value:function(a){var b=this.yToIndex(a[1])+a[0],c=a[0],d=a[1];if(this.inBounds(c,d)){var e=this.actionPlane[b];if(e.isPlacable){var f=this.groundPlane[b];return f.isPlacable?this.groundPlane:this.actionPlane}}return null}},{key:"canDestroyBlockForward",value:function(){var a=!1;if(!this.player.isOnBlock){var b=this.getMoveForwardPosition(),c=this.yToIndex(b[1])+b[0],d=b[0],e=b[1];if(this.inBounds(d,e)){var f=this.actionPlane[c];a=!f.isEmpty&&(f.isDestroyable||f.isUsable)}}return a}},{key:"moveForward",value:function(){var a=this.getMoveForwardPosition();this.moveTo(a)}},{key:"moveTo",value:function(a){var b=this.yToIndex(a[1])+a[0];this.player.position=a,this.actionPlane[b].isEmpty&&(this.player.isOnBlock=!1)}},{key:"turnLeft",value:function(){switch(this.player.facing){case j["default"].Up:this.player.facing=j["default"].Left;break;case j["default"].Left:this.player.facing=j["default"].Down;break;case j["default"].Down:this.player.facing=j["default"].Right;break;case j["default"].Right:this.player.facing=j["default"].Up}}},{key:"turnRight",value:function(){switch(this.player.facing){case j["default"].Up:this.player.facing=j["default"].Right;break;case j["default"].Right:this.player.facing=j["default"].Down;break;case j["default"].Down:this.player.facing=j["default"].Left;break;case j["default"].Left:this.player.facing=j["default"].Up}}},{key:"placeBlock",value:function(a){var b=this.player.position,c=this.yToIndex(b[1])+b[0],d=!1;switch(a){case"cropWheat":d="farmlandWet"===this.groundPlane[c].blockType;break;default:d=!0}if(d===!0){var e=new h["default"](a);this.actionPlane[c]=e,this.player.isOnBlock=!e.isWalkable}return d}},{key:"placeBlockForward",value:function(a,b){var c=this.getMoveForwardPosition(),d=this.yToIndex(c[1])+c[0];"watering"===a&&(a="farmlandWet",b=this.groundPlane),b[d]=new h["default"](a)}},{key:"destroyBlock",value:function(a){var b=null,c=a,d=this.yToIndex(c[1])+c[0],e=c[0],f=c[1];return this.inBounds(e,f)&&(b=this.actionPlane[d],null!==b&&(b.position=[e,f],b.isDestroyable&&(this.actionPlane[d]=new h["default"]("")))),b}},{key:"destroyBlockForward",value:function(){var a=null,b=this.getMoveForwardPosition(),c=this.yToIndex(b[1])+b[0],d=b[0],e=b[1];if(this.inBounds(d,e)&&(a=this.actionPlane[c],null!==a)){a.position=[d,e];var f=this.getInventoryType(a.blockType);this.player.inventory[f]=(this.player.inventory[f]||0)+1,a.isDestroyable&&(this.actionPlane[c]=new h["default"](""))}return a}},{key:"getInventoryType",value:function(a){switch(a){case"sheep":return"wool";case"stone":return"cobblestone";case"treeAcacia":case"treeBirch":case"treeJungle":case"treeOak":case"treeSpruce":return"planks"+a.substring(4);default:return a}}},{key:"solveFOWTypeForMap",value:function(){var a,b;a=this.getAllEmissives(),b=this.findBlocksAffectedByEmissives(a);for(var c in b)b.hasOwnProperty(c)&&this.solveFOWTypeFor(b[c],a)}},{key:"solveFOWTypeFor",value:function(a,b){var c,d,e,f=!1,g=!1,h=!1,i=!1,j=!1,k=!1,l=!1,m=!1,n=0,o=this.coordinatesToIndex(a);c=this.findEmissivesThatTouch(a,b);for(var p in c){var q=c[p];e=a[1],d=a[0],n=Math.atan2(q[1]-a[1],q[0]-a[0]),n=-n,0>n&&(n+=2*Math.PI),n*=360/(2*Math.PI),!k&&n>32.5&&57.5>=n&&(i=!0,this.pushIfHigherPrecedence(o,{x:d,y:e,type:"FogOfWar_InCorner_TopRight",precedence:0})),!h&&n>122.5&&147.5>=n&&(f=!0,this.pushIfHigherPrecedence(o,{x:d,y:e,type:"FogOfWar_InCorner_TopLeft",precedence:0})),!h&&n>212.5&&237.5>=n&&(g=!0,this.pushIfHigherPrecedence(o,{x:d,y:e,type:"FogOfWar_InCorner_BottomLeft",precedence:0})),!k&&n>302.5&&317.5>=n&&(j=!0,this.pushIfHigherPrecedence(o,{x:d,y:e,type:"FogOfWar_InCorner_BottomRight",precedence:0})),(n>=327.5||32.5>=n)&&(k=!0,this.pushIfHigherPrecedence(o,{x:d,y:e,type:"FogOfWar_Right",precedence:1})),n>237.5&&302.5>=n&&(m=!0,this.pushIfHigherPrecedence(o,{x:d,y:e,type:"FogOfWar_Bottom",precedence:1})),n>147.5&&212.5>=n&&(h=!0,this.pushIfHigherPrecedence(o,{x:d,y:e,type:"FogOfWar_Left",precedence:1})),n>57.5&&122.5>=n&&(l=!0,this.pushIfHigherPrecedence(o,{x:d,y:e,type:"FogOfWar_Top",precedence:1}))}f&&g&&this.pushIfHigherPrecedence(o,{x:d,y:e,type:"FogOfWar_Left",precedence:1}),i&&j&&this.pushIfHigherPrecedence(o,{x:d,y:e,type:"FogOfWar_Right",precedence:1}),f&&i&&this.pushIfHigherPrecedence(o,{x:d,y:e,type:"FogOfWar_Top",precedence:1}),j&&g&&this.pushIfHigherPrecedence(o,{x:d,y:e,type:"FogOfWar_Bottom",precedence:1}),j&&f||g&&i||h&&k||l&&m||k&&m&&f||m&&i&&f||l&&j&&g||h&&i&&j||h&&m&&i?this.fowPlane[o]="":m&&h||m&&f||h&&j?this.pushIfHigherPrecedence(o,{x:d,y:e,type:"FogOfWar_Bottom_Left",precedence:2}):m&&k||m&&i||k&&g?this.pushIfHigherPrecedence(o,{x:d,y:e,type:"FogOfWar_Bottom_Right",precedence:2}):l&&k||l&&j||k&&f?this.pushIfHigherPrecedence(o,{x:d,y:e,type:"FogOfWar_Top_Right",precedence:2}):(l&&h||l&&g||h&&i)&&this.pushIfHigherPrecedence(o,{x:d,y:e,type:"FogOfWar_Top_Left",precedence:2})}},{key:"pushIfHigherPrecedence",value:function(a,b){if(""===b)return void(this.fowPlane[a]="");var c=this.fowPlane[a];c&&c.precedence>b.precedence||(this.fowPlane[a]=b)}},{key:"getAllEmissives",value:function(){for(var a=[],b=0;b<this.planeHeight;++b)for(var c=0;c<this.planeWidth;++c){var d=this.coordinatesToIndex([c,b]);(!this.actionPlane[d].isEmpty&&this.actionPlane[d].isEmissive||this.groundPlane[d].isEmissive&&this.actionPlane[d].isEmpty)&&a.push([c,b])}return a}},{key:"findBlocksAffectedByEmissives",value:function(a){var b={};for(var c in a)for(var d=a[c],e=d[1],f=d[0],g=d[1]-2;g<=d[1]+2;++g)for(var h=d[0]-2;h<=d[0]+2;++h)this.inBounds(h,g)&&(g>=e-1&&e+1>=g&&h>=f-1&&f+1>=h||(b[g.toString()+h.toString()]=[h,g]));return b}},{key:"findEmissivesThatTouch",value:function(a,b){for(var c=[],d=a[1],e=a[0],f=d-2;d+2>=f;++f)for(var g=e-2;e+2>=g;++g)if(this.inBounds(g,f)&&!(f>=d-1&&d+1>=f&&g>=e-1&&e+1>=g))for(var h in b)b[h][0]===g&&b[h][1]===f&&c.push(b[h]);return c}},{key:"computeFowPlane",value:function(){var a,b;if(this.fowPlane=[],this.isDaytime)for(b=0;b<this.planeHeight;++b)for(a=0;a<this.planeWidth;++a);else{for(b=0;b<this.planeHeight;++b)for(a=0;a<this.planeWidth;++a)this.fowPlane.push({x:a,y:b,type:"FogOfWar_Center"});for(this.solveFOWTypeForMap(),b=0;b<this.planeHeight;++b)for(a=0;a<this.planeWidth;++a){var c=this.yToIndex(b)+a;(this.groundPlane[c].isEmissive&&this.actionPlane[c].isEmpty||!this.actionPlane[c].isEmpty&&this.actionPlane[c].isEmissive)&&this.clearFowAround(a,b)}}}},{key:"clearFowAround",value:function(a,b){var c,d;for(d=-1;1>=d;++d)for(c=-1;1>=c;++c)this.clearFowAt(a+c,b+d)}},{key:"clearFowAt",value:function(a,b){if(a>=0&&a<this.planeWidth&&b>=0&&b<this.planeHeight){var c=this.yToIndex(b)+a;this.fowPlane[c]=""}}},{key:"computeShadingPlane",value:function(){var a,b,c,d,e;for(this.shadingPlane=[],c=0;c<this.planeArea();++c)a=c%this.planeWidth,b=Math.floor(c/this.planeWidth),d=!1,e=!1,(this.actionPlane[c].isEmpty||this.actionPlane[c].isTransparent)&&(0===b&&this.shadingPlane.push({x:a,y:b,type:"AOeffect_Bottom"}),b===this.planeHeight-1&&this.shadingPlane.push({x:a,y:b,type:"AOeffect_Top"}),0===a&&this.shadingPlane.push({x:a,y:b,type:"AOeffect_Right"}),a===this.planeWidth-1&&this.shadingPlane.push({x:a,y:b,type:"AOeffect_Left"}),a<this.planeWidth-1&&!this.actionPlane[this.yToIndex(b)+a+1].getIsEmptyOrEntity()&&(this.shadingPlane.push({x:a,y:b,type:"AOeffect_Left"}),d=!0),a>0&&!this.actionPlane[this.yToIndex(b)+a-1].getIsEmptyOrEntity()&&(this.shadingPlane.push({x:a,y:b,type:"AOeffect_Right"}),this.shadingPlane.push({x:a,y:b,type:"Shadow_Parts_Fade_base.png"}),b>0&&a>0&&this.actionPlane[this.yToIndex(b-1)+a-1].getIsEmptyOrEntity()&&this.shadingPlane.push({x:a,y:b,type:"Shadow_Parts_Fade_top.png"}),e=!0),b>0&&!this.actionPlane[this.yToIndex(b-1)+a].getIsEmptyOrEntity()?this.shadingPlane.push({x:a,y:b,type:"AOeffect_Bottom"}):b>0&&(a<this.planeWidth-1&&!this.actionPlane[this.yToIndex(b-1)+a+1].getIsEmptyOrEntity()&&this.actionPlane[this.yToIndex(b)+a+1].getIsEmptyOrEntity()&&this.shadingPlane.push({x:a,y:b,type:"AOeffect_BottomLeft"}),!e&&a>0&&!this.actionPlane[this.yToIndex(b-1)+a-1].getIsEmptyOrEntity()&&this.shadingPlane.push({x:a,y:b,type:"AOeffect_BottomRight"})),b<this.planeHeight-1&&(a<this.planeWidth-1&&!this.actionPlane[this.yToIndex(b+1)+a+1].getIsEmptyOrEntity()&&this.actionPlane[this.yToIndex(b)+a+1].getIsEmptyOrEntity()&&this.shadingPlane.push({x:a,y:b,type:"AOeffect_TopLeft"}),!e&&a>0&&!this.actionPlane[this.yToIndex(b+1)+a-1].getIsEmptyOrEntity()&&this.shadingPlane.push({x:a,y:b,type:"AOeffect_TopRight"})))}}]),a}();c["default"]=k,b.exports=c["default"]},{"./FacingDirection.js":"/home/ubuntu/staging/apps/build/js/craft/game/LevelMVC/FacingDirection.js","./LevelBlock.js":"/home/ubuntu/staging/apps/build/js/craft/game/LevelMVC/LevelBlock.js"}],"/home/ubuntu/staging/apps/build/js/craft/game/LevelMVC/LevelBlock.js":[function(a,b,c){"use strict";function d(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(c,"__esModule",{value:!0});var e=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),f=function(){function a(b){d(this,a),this.blockType=b,this.isEntity=!1,this.isWalkable=!1,this.isDeadly=!1,this.isPlacable=!1,this.isDestroyable=!0,this.isUsable=!0,this.isEmpty=!1,this.isEmissive=!1,this.isTransparent=!1,""===b&&(this.isWalkable=!0,this.isDestroyable=!1,this.isEmpty=!0,this.isPlacable=!0,this.isUsable=!1),b.match("torch")&&(this.isWalkable=!0,this.isPlacable=!0),"rails"==b.substring(0,5)&&(this.isEntity=!0,this.isWalkable=!0,this.isUsable=!0,this.isDestroyable=!1,this.isTransparent=!0),"sheep"==b&&(this.isEntity=!0,this.isDestroyable=!1,this.isUsable=!0),"creeper"==b&&(this.isEntity=!0),"glass"==b&&(this.isDestroyable=!1),"bedrock"==b&&(this.isDestroyable=!1),"lava"==b&&(this.isEmissive=!0,this.isWalkable=!0,this.isDeadly=!0,this.isPlacable=!0),"water"==b&&(this.isPlacable=!0),"torch"==b&&(this.isEmissive=!0,this.isEntity=!0,this.isWalkable=!0,this.isUsable=!0,this.isDestroyable=!1,this.isTransparent=!0),"cropWheat"==b&&(this.isEmissive=!1,this.isEntity=!0,this.isWalkable=!0,this.isUsable=!0,this.isDestroyable=!1,this.isTransparent=!0),"tnt"==b&&(this.isUsable=!0,this.isDestroyable=!0),"door"==b&&(this.isEntity=!0,this.isWalkable=!0,this.isUsable=!0,this.isDestroyable=!1,this.isTransparent=!0)}return e(a,[{key:"getIsTree",value:function(){return!!this.blockType.match(/^tree/)}},{key:"getIsEmptyOrEntity",value:function(){return this.isEmpty||this.isEntity}}]),a}();c["default"]=f,b.exports=c["default"]},{}],"/home/ubuntu/staging/apps/build/js/craft/game/LevelMVC/FacingDirection.js":[function(a,b,c){"use strict";Object.defineProperty(c,"__esModule",{value:!0}),c["default"]=Object.freeze({Up:0,Right:1,Down:2,Left:3}),b.exports=c["default"]},{}],"/home/ubuntu/staging/apps/build/js/craft/game/LevelMVC/AssetLoader.js":[function(a,b,c){"use strict";function d(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(c,"__esModule",{value:!0});var e=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),f=function(){function a(b){d(this,a),this.controller=b,this.audioPlayer=b.audioPlayer,this.game=b.game,this.assetRoot=b.assetRoot,this.assets={entityShadow:{type:"image",path:this.assetRoot+"images/Character_Shadow.png"},selectionIndicator:{type:"image",path:this.assetRoot+"images/Selection_Indicator.png"},shadeLayer:{type:"image",path:this.assetRoot+"images/Shade_Layer.png"},tallGrass:{type:"image",path:this.assetRoot+"images/TallGrass.png"},finishOverlay:{type:"image",path:this.assetRoot+"images/WhiteRect.png"},bed:{type:"image",path:this.assetRoot+"images/Bed.png"},playerSteve:{type:"atlasJSON",pngPath:this.assetRoot+"images/Steve1013.png",jsonPath:this.assetRoot+"images/Steve1013.json"},playerAlex:{type:"atlasJSON",pngPath:this.assetRoot+"images/Alex1013.png",jsonPath:this.assetRoot+"images/Alex1013.json"},AO:{type:"atlasJSON",pngPath:this.assetRoot+"images/AO.png",jsonPath:this.assetRoot+"images/AO.json"},blockShadows:{type:"atlasJSON",pngPath:this.assetRoot+"images/Block_Shadows.png",jsonPath:this.assetRoot+"images/Block_Shadows.json"},undergroundFow:{type:"atlasJSON",pngPath:this.assetRoot+"images/UndergroundFoW.png",jsonPath:this.assetRoot+"images/UndergroundFoW.json"},blocks:{type:"atlasJSON",pngPath:this.assetRoot+"images/Blocks.png",jsonPath:this.assetRoot+"images/Blocks.json"},leavesAcacia:{type:"atlasJSON",pngPath:this.assetRoot+"images/Leaves_Acacia_Decay.png",jsonPath:this.assetRoot+"images/Leaves_Acacia_Decay.json"},leavesBirch:{type:"atlasJSON",pngPath:this.assetRoot+"images/Leaves_Birch_Decay.png",jsonPath:this.assetRoot+"images/Leaves_Birch_Decay.json"},leavesJungle:{type:"atlasJSON",pngPath:this.assetRoot+"images/Leaves_Jungle_Decay.png",jsonPath:this.assetRoot+"images/Leaves_Jungle_Decay.json"},leavesOak:{type:"atlasJSON",pngPath:this.assetRoot+"images/Leaves_Oak_Decay.png",jsonPath:this.assetRoot+"images/Leaves_Oak_Decay.json"},leavesSpruce:{type:"atlasJSON",pngPath:this.assetRoot+"images/Leaves_Spruce_Decay.png",jsonPath:this.assetRoot+"images/Leaves_Spruce_Decay.json"},sheep:{type:"atlasJSON",pngPath:this.assetRoot+"images/Sheep.png",jsonPath:this.assetRoot+"images/Sheep.json"},creeper:{type:"atlasJSON",pngPath:this.assetRoot+"images/Creeper.png",jsonPath:this.assetRoot+"images/Creeper.json"},crops:{type:"atlasJSON",pngPath:this.assetRoot+"images/Crops.png",jsonPath:this.assetRoot+"images/Crops.json"},torch:{type:"atlasJSON",pngPath:this.assetRoot+"images/Torch.png",jsonPath:this.assetRoot+"images/Torch.json"},destroyOverlay:{type:"atlasJSON",pngPath:this.assetRoot+"images/Destroy_Overlay.png",jsonPath:this.assetRoot+"images/Destroy_Overlay.json"},blockExplode:{type:"atlasJSON",pngPath:this.assetRoot+"images/BlockExplode.png",jsonPath:this.assetRoot+"images/BlockExplode.json"},miningParticles:{type:"atlasJSON",pngPath:this.assetRoot+"images/MiningParticles.png",jsonPath:this.assetRoot+"images/MiningParticles.json"},miniBlocks:{type:"atlasJSON",pngPath:this.assetRoot+"images/Miniblocks.png",jsonPath:this.assetRoot+"images/Miniblocks.json"},lavaPop:{type:"atlasJSON",pngPath:this.assetRoot+"images/LavaPop.png",jsonPath:this.assetRoot+"images/LavaPop.json"},fire:{type:"atlasJSON",pngPath:this.assetRoot+"images/Fire.png",jsonPath:this.assetRoot+"images/Fire.json"},bubbles:{type:"atlasJSON",pngPath:this.assetRoot+"images/Bubbles.png",jsonPath:this.assetRoot+"images/Bubbles.json"},explosion:{type:"atlasJSON",pngPath:this.assetRoot+"images/Explosion.png",jsonPath:this.assetRoot+"images/Explosion.json"},door:{type:"atlasJSON",pngPath:this.assetRoot+"images/Door.png",jsonPath:this.assetRoot+"images/Door.json"},rails:{type:"atlasJSON",pngPath:this.assetRoot+"images/Rails.png",jsonPath:this.assetRoot+"images/Rails.json"},tnt:{type:"atlasJSON",pngPath:this.assetRoot+"images/TNT.png",jsonPath:this.assetRoot+"images/TNT.json"},dig_wood1:{type:"sound",mp3:this.assetRoot+"audio/dig_wood1.mp3",wav:this.assetRoot+"audio/dig_wood1.wav",ogg:this.assetRoot+"audio/dig_wood1.ogg"},stepGrass:{type:"sound",mp3:this.assetRoot+"audio/step_grass1.mp3",wav:this.assetRoot+"audio/step_grass1.wav",ogg:this.assetRoot+"audio/step_grass1.ogg"},stepWood:{type:"sound",mp3:this.assetRoot+"audio/wood2.mp3",ogg:this.assetRoot+"audio/wood2.ogg"},stepStone:{type:"sound",mp3:this.assetRoot+"audio/stone2.mp3",ogg:this.assetRoot+"audio/stone2.ogg"},stepGravel:{type:"sound",mp3:this.assetRoot+"audio/gravel1.mp3",ogg:this.assetRoot+"audio/gravel1.ogg"},stepFarmland:{type:"sound",mp3:this.assetRoot+"audio/cloth4.mp3",ogg:this.assetRoot+"audio/cloth4.ogg"},failure:{type:"sound",mp3:this.assetRoot+"audio/break.mp3",ogg:this.assetRoot+"audio/break.ogg"},success:{type:"sound",mp3:this.assetRoot+"audio/levelup.mp3",ogg:this.assetRoot+"audio/levelup.ogg"},fall:{type:"sound",mp3:this.assetRoot+"audio/fallsmall.mp3",ogg:this.assetRoot+"audio/fallsmall.ogg"},fuse:{type:"sound",mp3:this.assetRoot+"audio/fuse.mp3",ogg:this.assetRoot+"audio/fuse.ogg"},explode:{type:"sound",mp3:this.assetRoot+"audio/explode3.mp3",ogg:this.assetRoot+"audio/explode3.ogg"},placeBlock:{type:"sound",mp3:this.assetRoot+"audio/cloth1.mp3",ogg:this.assetRoot+"audio/cloth1.ogg"},collectedBlock:{type:"sound",mp3:this.assetRoot+"audio/pop.mp3",ogg:this.assetRoot+"audio/pop.ogg"},bump:{type:"sound",mp3:this.assetRoot+"audio/hit3.mp3",ogg:this.assetRoot+"audio/hit3.ogg"},punch:{type:"sound",mp3:this.assetRoot+"audio/cloth1.mp3",ogg:this.assetRoot+"audio/cloth1.ogg"},fizz:{type:"sound",mp3:this.assetRoot+"audio/fizz.mp3",ogg:this.assetRoot+"audio/fizz.ogg"},doorOpen:{type:"sound",mp3:this.assetRoot+"audio/door_open.mp3",ogg:this.assetRoot+"audio/door_open.ogg"},houseSuccess:{type:"sound",mp3:this.assetRoot+"audio/launch1.mp3",ogg:this.assetRoot+"audio/launch1.ogg"},minecart:{type:"sound",mp3:this.assetRoot+"audio/minecartBase.mp3",ogg:this.assetRoot+"audio/minecartBase.ogg"},sheepBaa:{type:"sound",mp3:this.assetRoot+"audio/say3.mp3",ogg:this.assetRoot+"audio/say3.ogg"}},this.assetPacks={levelOneAssets:["entityShadow","selectionIndicator","shadeLayer","AO","blockShadows","leavesOak","leavesBirch","tallGrass","blocks","sheep","bump","stepGrass","failure","success"],levelTwoAssets:["entityShadow","selectionIndicator","shadeLayer","AO","blockShadows","leavesSpruce","tallGrass","blocks","sheep","bump","stepGrass","failure","playerSteve","success","miniBlocks","blockExplode","miningParticles","destroyOverlay","dig_wood1","collectedBlock","punch"],levelThreeAssets:["entityShadow","selectionIndicator","shadeLayer","AO","blockShadows","leavesOak","tallGrass","blocks","sheep","bump","stepGrass","failure","playerSteve","success","miniBlocks","blockExplode","miningParticles","destroyOverlay","dig_wood1","collectedBlock","sheepBaa","punch"],allAssetsMinusPlayer:["entityShadow","selectionIndicator","shadeLayer","tallGrass","finishOverlay","bed","AO","blockShadows","undergroundFow","blocks","leavesAcacia","leavesBirch","leavesJungle","leavesOak","leavesSpruce","sheep","creeper","crops","torch","destroyOverlay","blockExplode","miningParticles","miniBlocks","lavaPop","fire","bubbles","explosion","door","rails","tnt","dig_wood1","stepGrass","stepWood","stepStone","stepGravel","stepFarmland","failure","success","fall","fuse","explode","placeBlock","collectedBlock","bump","punch","fizz","doorOpen","houseSuccess","minecart","sheepBaa"],playerSteve:["playerSteve"],playerAlex:["playerAlex"],grass:["tallGrass"]}}return e(a,[{key:"loadPacks",value:function(a){var b=this;a.forEach(function(a){b.loadPack(a)})}},{key:"loadPack",value:function(a){var b=this.assetPacks[a];this.loadAssets(b)}},{key:"loadAssets",value:function(a){var b=this;a.forEach(function(a){var c=b.assets[a];b.loadAsset(a,c)})}},{key:"loadAsset",value:function(a,b){switch(b.type){case"image":this.game.load.image(a,b.path);break;case"sound":this.audioPlayer.register({id:a,mp3:b.mp3,ogg:b.ogg});break;case"atlasJSON":this.game.load.atlasJSONHash(a,b.pngPath,b.jsonPath);break;default:throw"Asset "+a+" needs config.type set in configuration."}}}]),a}();c["default"]=f,b.exports=c["default"]},{}],"/home/ubuntu/staging/apps/build/js/craft/game/API/CodeOrgAPI.js":[function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{"default":a}}function e(a){return{startCommandCollection:function(){a.DEBUG&&console.log("Collecting commands.")},startAttempt:function(b){a.OnCompleteCallback=b,
a.queue.addCommand(new w["default"](a)),a.setPlayerActionDelayByQueueLength(),a.queue.begin()},resetAttempt:function(){a.reset(),a.queue.reset(),a.OnCompleteCallback=null},moveForward:function(b){a.queue.addCommand(new o["default"](a,b))},turn:function(b,c){a.queue.addCommand(new q["default"](a,b,"right"===c?1:-1))},turnRight:function(b){a.queue.addCommand(new q["default"](a,b,1))},turnLeft:function(b){a.queue.addCommand(new q["default"](a,b,-1))},destroyBlock:function(b){a.queue.addCommand(new i["default"](a,b))},placeBlock:function(b,c){a.queue.addCommand(new k["default"](a,b,c))},placeInFront:function(b,c){a.queue.addCommand(new m["default"](a,b,c))},tillSoil:function(b){a.queue.addCommand(new m["default"](a,b,"watering"))},whilePathAhead:function(b,c,d){a.queue.addCommand(new s["default"](a,b,c,d))},ifBlockAhead:function(b,c,d){a.queue.addCommand(new u["default"](a,b,c,d))},getScreenshot:function(){return a.getScreenshot()}}}Object.defineProperty(c,"__esModule",{value:!0}),c.get=e;var f=a("../CommandQueue/CommandQueue.js"),g=(d(f),a("../CommandQueue/BaseCommand.js")),h=(d(g),a("../CommandQueue/DestroyBlockCommand.js")),i=d(h),j=a("../CommandQueue/PlaceBlockCommand.js"),k=d(j),l=a("../CommandQueue/PlaceInFrontCommand.js"),m=d(l),n=a("../CommandQueue/MoveForwardCommand.js"),o=d(n),p=a("../CommandQueue/TurnCommand.js"),q=d(p),r=a("../CommandQueue/WhileCommand.js"),s=d(r),t=a("../CommandQueue/IfBlockAheadCommand.js"),u=d(t),v=a("../CommandQueue/CheckSolutionCommand.js"),w=d(v)},{"../CommandQueue/BaseCommand.js":"/home/ubuntu/staging/apps/build/js/craft/game/CommandQueue/BaseCommand.js","../CommandQueue/CheckSolutionCommand.js":"/home/ubuntu/staging/apps/build/js/craft/game/CommandQueue/CheckSolutionCommand.js","../CommandQueue/CommandQueue.js":"/home/ubuntu/staging/apps/build/js/craft/game/CommandQueue/CommandQueue.js","../CommandQueue/DestroyBlockCommand.js":"/home/ubuntu/staging/apps/build/js/craft/game/CommandQueue/DestroyBlockCommand.js","../CommandQueue/IfBlockAheadCommand.js":"/home/ubuntu/staging/apps/build/js/craft/game/CommandQueue/IfBlockAheadCommand.js","../CommandQueue/MoveForwardCommand.js":"/home/ubuntu/staging/apps/build/js/craft/game/CommandQueue/MoveForwardCommand.js","../CommandQueue/PlaceBlockCommand.js":"/home/ubuntu/staging/apps/build/js/craft/game/CommandQueue/PlaceBlockCommand.js","../CommandQueue/PlaceInFrontCommand.js":"/home/ubuntu/staging/apps/build/js/craft/game/CommandQueue/PlaceInFrontCommand.js","../CommandQueue/TurnCommand.js":"/home/ubuntu/staging/apps/build/js/craft/game/CommandQueue/TurnCommand.js","../CommandQueue/WhileCommand.js":"/home/ubuntu/staging/apps/build/js/craft/game/CommandQueue/WhileCommand.js"}],"/home/ubuntu/staging/apps/build/js/craft/game/CommandQueue/WhileCommand.js":[function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{"default":a}}function e(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function f(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}Object.defineProperty(c,"__esModule",{value:!0});var g=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),h=function(a,b,c){for(var d=!0;d;){var e=a,f=b,g=c;d=!1,null===e&&(e=Function.prototype);var h=Object.getOwnPropertyDescriptor(e,f);if(void 0!==h){if("value"in h)return h.value;var i=h.get;return void 0===i?void 0:i.call(g)}var j=Object.getPrototypeOf(e);if(null===j)return void 0;a=j,b=f,c=g,d=!0,h=j=void 0}},i=a("./CommandState.js"),j=d(i),k=a("./CommandQueue.js"),l=d(k),m=a("./BaseCommand.js"),n=d(m),o=function(a){function b(a,c,d,f){e(this,b),h(Object.getPrototypeOf(b.prototype),"constructor",this).call(this,a,c),this.iterationsLeft=15,this.BlockType=d,this.WhileCode=f,this.queue=new l["default"](this)}return f(b,a),g(b,[{key:"tick",value:function(){this.state===j["default"].WORKING&&this.queue.tick(),this.queue.isFailed()&&(this.state=j["default"].FAILURE),this.queue.isSucceeded()&&this.handleWhileCheck()}},{key:"begin",value:function(){h(Object.getPrototypeOf(b.prototype),"begin",this).call(this),this.GameController.DEBUG&&console.log("WHILE command: BEGIN"),this.handleWhileCheck()}},{key:"handleWhileCheck",value:function(){this.iterationsLeft<=0&&(this.state=j["default"].FAILURE),this.GameController.isPathAhead(this.BlockType)?(this.queue.reset(),this.GameController.queue.setWhileCommandInsertState(this.queue),this.WhileCode(),this.GameController.queue.setWhileCommandInsertState(null),this.queue.begin()):this.state=j["default"].SUCCESS,this.iterationsLeft--,this.GameController.DEBUG&&console.log("While command: Iterationsleft   "+this.iterationsLeft+" ")}}]),b}(n["default"]);c["default"]=o,b.exports=c["default"]},{"./BaseCommand.js":"/home/ubuntu/staging/apps/build/js/craft/game/CommandQueue/BaseCommand.js","./CommandQueue.js":"/home/ubuntu/staging/apps/build/js/craft/game/CommandQueue/CommandQueue.js","./CommandState.js":"/home/ubuntu/staging/apps/build/js/craft/game/CommandQueue/CommandState.js"}],"/home/ubuntu/staging/apps/build/js/craft/game/CommandQueue/TurnCommand.js":[function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{"default":a}}function e(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function f(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}Object.defineProperty(c,"__esModule",{value:!0});var g=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),h=function(a,b,c){for(var d=!0;d;){var e=a,f=b,g=c;d=!1,null===e&&(e=Function.prototype);var h=Object.getOwnPropertyDescriptor(e,f);if(void 0!==h){if("value"in h)return h.value;var i=h.get;return void 0===i?void 0:i.call(g)}var j=Object.getPrototypeOf(e);if(null===j)return void 0;a=j,b=f,c=g,d=!0,h=j=void 0}},i=a("./CommandState.js"),j=(d(i),a("./BaseCommand.js")),k=d(j),l=function(a){function b(a,c,d){e(this,b),h(Object.getPrototypeOf(b.prototype),"constructor",this).call(this,a,c),this.Direction=d}return f(b,a),g(b,[{key:"tick",value:function(){}},{key:"begin",value:function(){h(Object.getPrototypeOf(b.prototype),"begin",this).call(this),this.GameController.DEBUG&&console.log("TURN command: BEGIN turning "+this.Direction+"  "),this.GameController.turn(this,this.Direction)}}]),b}(k["default"]);c["default"]=l,b.exports=c["default"]},{"./BaseCommand.js":"/home/ubuntu/staging/apps/build/js/craft/game/CommandQueue/BaseCommand.js","./CommandState.js":"/home/ubuntu/staging/apps/build/js/craft/game/CommandQueue/CommandState.js"}],"/home/ubuntu/staging/apps/build/js/craft/game/CommandQueue/PlaceInFrontCommand.js":[function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{"default":a}}function e(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function f(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}Object.defineProperty(c,"__esModule",{value:!0});var g=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),h=function(a,b,c){for(var d=!0;d;){var e=a,f=b,g=c;d=!1,null===e&&(e=Function.prototype);var h=Object.getOwnPropertyDescriptor(e,f);if(void 0!==h){if("value"in h)return h.value;var i=h.get;return void 0===i?void 0:i.call(g)}var j=Object.getPrototypeOf(e);if(null===j)return void 0;a=j,b=f,c=g,d=!0,h=j=void 0}},i=a("./CommandState.js"),j=(d(i),a("./BaseCommand.js")),k=d(j),l=function(a){function b(a,c,d){e(this,b),h(Object.getPrototypeOf(b.prototype),"constructor",this).call(this,a,c),this.BlockType=d}return f(b,a),g(b,[{key:"tick",value:function(){}},{key:"begin",value:function(){h(Object.getPrototypeOf(b.prototype),"begin",this).call(this),this.GameController.placeBlockForward(this,this.BlockType)}}]),b}(k["default"]);c["default"]=l,b.exports=c["default"]},{"./BaseCommand.js":"/home/ubuntu/staging/apps/build/js/craft/game/CommandQueue/BaseCommand.js","./CommandState.js":"/home/ubuntu/staging/apps/build/js/craft/game/CommandQueue/CommandState.js"}],"/home/ubuntu/staging/apps/build/js/craft/game/CommandQueue/PlaceBlockCommand.js":[function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{"default":a}}function e(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function f(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}Object.defineProperty(c,"__esModule",{value:!0});var g=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),h=function(a,b,c){for(var d=!0;d;){var e=a,f=b,g=c;d=!1,null===e&&(e=Function.prototype);var h=Object.getOwnPropertyDescriptor(e,f);if(void 0!==h){if("value"in h)return h.value;var i=h.get;return void 0===i?void 0:i.call(g)}var j=Object.getPrototypeOf(e);if(null===j)return void 0;a=j,b=f,c=g,d=!0,h=j=void 0}},i=a("./CommandState.js"),j=(d(i),a("./BaseCommand.js")),k=d(j),l=function(a){function b(a,c,d){e(this,b),h(Object.getPrototypeOf(b.prototype),"constructor",this).call(this,a,c),this.BlockType=d}return f(b,a),g(b,[{key:"tick",value:function(){}},{key:"begin",value:function(){h(Object.getPrototypeOf(b.prototype),"begin",this).call(this),this.GameController.placeBlock(this,this.BlockType)}}]),b}(k["default"]);c["default"]=l,b.exports=c["default"]},{"./BaseCommand.js":"/home/ubuntu/staging/apps/build/js/craft/game/CommandQueue/BaseCommand.js","./CommandState.js":"/home/ubuntu/staging/apps/build/js/craft/game/CommandQueue/CommandState.js"}],"/home/ubuntu/staging/apps/build/js/craft/game/CommandQueue/MoveForwardCommand.js":[function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{"default":a}}function e(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function f(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}Object.defineProperty(c,"__esModule",{value:!0});var g=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),h=function(a,b,c){for(var d=!0;d;){var e=a,f=b,g=c;d=!1,null===e&&(e=Function.prototype);var h=Object.getOwnPropertyDescriptor(e,f);if(void 0!==h){if("value"in h)return h.value;var i=h.get;return void 0===i?void 0:i.call(g)}var j=Object.getPrototypeOf(e);if(null===j)return void 0;a=j,b=f,c=g,d=!0,h=j=void 0}},i=a("./CommandState.js"),j=(d(i),a("./BaseCommand.js")),k=d(j),l=function(a){function b(a,c){e(this,b),h(Object.getPrototypeOf(b.prototype),"constructor",this).call(this,a,c)}return f(b,a),g(b,[{key:"tick",value:function(){}},{key:"begin",value:function(){h(Object.getPrototypeOf(b.prototype),"begin",this).call(this),this.GameController.moveForward(this)}}]),b}(k["default"]);c["default"]=l,b.exports=c["default"]},{"./BaseCommand.js":"/home/ubuntu/staging/apps/build/js/craft/game/CommandQueue/BaseCommand.js","./CommandState.js":"/home/ubuntu/staging/apps/build/js/craft/game/CommandQueue/CommandState.js"}],"/home/ubuntu/staging/apps/build/js/craft/game/CommandQueue/IfBlockAheadCommand.js":[function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{"default":a}}function e(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function f(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}Object.defineProperty(c,"__esModule",{value:!0});var g=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),h=function(a,b,c){for(var d=!0;d;){var e=a,f=b,g=c;d=!1,null===e&&(e=Function.prototype);var h=Object.getOwnPropertyDescriptor(e,f);if(void 0!==h){if("value"in h)return h.value;var i=h.get;return void 0===i?void 0:i.call(g)}var j=Object.getPrototypeOf(e);if(null===j)return void 0;a=j,b=f,c=g,d=!0,h=j=void 0}},i=a("./CommandState.js"),j=d(i),k=a("./CommandQueue.js"),l=d(k),m=a("./BaseCommand.js"),n=d(m),o=function(a){function b(a,c,d,f){e(this,b),h(Object.getPrototypeOf(b.prototype),"constructor",this).call(this,a,c),this.blockType=d,this.ifCodeCallback=f,this.queue=new l["default"](this)}return f(b,a),g(b,[{key:"tick",value:function(){this.state===j["default"].WORKING&&this.queue.tick(),this.queue.isFailed()&&(this.state=j["default"].FAILURE),this.queue.isSucceeded()&&(this.state=j["default"].SUCCESS)}},{key:"begin",value:function(){h(Object.getPrototypeOf(b.prototype),"begin",this).call(this),this.GameController.DEBUG&&console.log("WHILE command: BEGIN"),this.handleIfCheck()}},{key:"handleIfCheck",value:function(){this.GameController.isPathAhead(this.blockType)?(this.queue.reset(),this.GameController.queue.setWhileCommandInsertState(this.queue),this.ifCodeCallback(),this.GameController.queue.setWhileCommandInsertState(null),this.queue.begin()):this.state=j["default"].SUCCESS}}]),b}(n["default"]);c["default"]=o,b.exports=c["default"]},{"./BaseCommand.js":"/home/ubuntu/staging/apps/build/js/craft/game/CommandQueue/BaseCommand.js","./CommandQueue.js":"/home/ubuntu/staging/apps/build/js/craft/game/CommandQueue/CommandQueue.js","./CommandState.js":"/home/ubuntu/staging/apps/build/js/craft/game/CommandQueue/CommandState.js"}],"/home/ubuntu/staging/apps/build/js/craft/game/CommandQueue/DestroyBlockCommand.js":[function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{"default":a}}function e(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function f(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}Object.defineProperty(c,"__esModule",{value:!0});var g=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),h=function(a,b,c){for(var d=!0;d;){var e=a,f=b,g=c;d=!1,null===e&&(e=Function.prototype);var h=Object.getOwnPropertyDescriptor(e,f);if(void 0!==h){if("value"in h)return h.value;var i=h.get;return void 0===i?void 0:i.call(g)}var j=Object.getPrototypeOf(e);if(null===j)return void 0;a=j,b=f,c=g,d=!0,h=j=void 0}},i=a("./CommandState.js"),j=(d(i),a("./BaseCommand.js")),k=d(j),l=function(a){function b(a,c){e(this,b),h(Object.getPrototypeOf(b.prototype),"constructor",this).call(this,a,c)}return f(b,a),g(b,[{key:"tick",value:function(){}},{key:"begin",value:function(){h(Object.getPrototypeOf(b.prototype),"begin",this).call(this),this.GameController.destroyBlock(this)}}]),b}(k["default"]);c["default"]=l,b.exports=c["default"]},{"./BaseCommand.js":"/home/ubuntu/staging/apps/build/js/craft/game/CommandQueue/BaseCommand.js","./CommandState.js":"/home/ubuntu/staging/apps/build/js/craft/game/CommandQueue/CommandState.js"}],"/home/ubuntu/staging/apps/build/js/craft/game/CommandQueue/CheckSolutionCommand.js":[function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{"default":a}}function e(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function f(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}Object.defineProperty(c,"__esModule",{value:!0});var g=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),h=function(a,b,c){for(var d=!0;d;){var e=a,f=b,g=c;d=!1,null===e&&(e=Function.prototype);var h=Object.getOwnPropertyDescriptor(e,f);if(void 0!==h){if("value"in h)return h.value;var i=h.get;return void 0===i?void 0:i.call(g)}var j=Object.getPrototypeOf(e);if(null===j)return void 0;a=j,b=f,c=g,d=!0,h=j=void 0}},i=a("./CommandState.js"),j=(d(i),a("./CommandQueue.js")),k=(d(j),a("./BaseCommand.js")),l=d(k),m=function(a){function b(a){e(this,b);var c=function(){a.DEBUG&&console.log("Execute solve command")};h(Object.getPrototypeOf(b.prototype),"constructor",this).call(this,a,c)}return f(b,a),g(b,[{key:"tick",value:function(){}},{key:"begin",value:function(){h(Object.getPrototypeOf(b.prototype),"begin",this).call(this),this.GameController.DEBUG&&console.log("Solve command: BEGIN");this.GameController.checkSolution(this)}}]),b}(l["default"]);c["default"]=m,b.exports=c["default"]},{"./BaseCommand.js":"/home/ubuntu/staging/apps/build/js/craft/game/CommandQueue/BaseCommand.js","./CommandQueue.js":"/home/ubuntu/staging/apps/build/js/craft/game/CommandQueue/CommandQueue.js","./CommandState.js":"/home/ubuntu/staging/apps/build/js/craft/game/CommandQueue/CommandState.js"}],"/home/ubuntu/staging/apps/build/js/craft/game/CommandQueue/CommandQueue.js":[function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{"default":a}}function e(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(c,"__esModule",{value:!0});var f=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),g=a("./BaseCommand"),h=(d(g),a("./CommandState.js")),i=d(h),j=function(){function a(b){e(this,a),this.gameController=b,this.game=b.game,this.reset()}return f(a,[{key:"addCommand",value:function(a){this.whileCommandQueue?this.whileCommandQueue.addCommand(a):this.commandList_.push(a)}},{key:"setWhileCommandInsertState",value:function(a){this.whileCommandQueue=a}},{key:"begin",value:function(){this.state=i["default"].WORKING,this.gameController.DEBUG&&console.log("Debug Queue: BEGIN")}},{key:"reset",value:function(){this.state=i["default"].NOT_STARTED,this.currentCommand=null,this.commandList_=[],this.whileCommandQueue&&this.whileCommandQueue.reset(),this.whileCommandQueue=null}},{key:"tick",value:function(){if(this.state===i["default"].WORKING){if(!this.currentCommand){if(0===this.commandList_.length)return void(this.state=i["default"].SUCCESS);this.currentCommand=this.commandList_.shift()}this.currentCommand.isStarted()?this.currentCommand.tick():this.currentCommand.begin(),this.currentCommand.isSucceeded()?this.currentCommand=null:this.currentCommand.isFailed()&&(this.state=i["default"].FAILURE)}}},{key:"getLength",value:function(){return this.commandList_?this.commandList_.length:0}},{key:"isStarted",value:function(){return this.state!==i["default"].NOT_STARTED}},{key:"isFinished",value:function(){return this.isSucceeded()||this.isFailed()}},{key:"isSucceeded",value:function(){return this.state===i["default"].SUCCESS}},{key:"isFailed",value:function(){return this.state===i["default"].FAILURE}}]),a}();c["default"]=j,b.exports=c["default"]},{"./BaseCommand":"/home/ubuntu/staging/apps/build/js/craft/game/CommandQueue/BaseCommand.js","./CommandState.js":"/home/ubuntu/staging/apps/build/js/craft/game/CommandQueue/CommandState.js"}],"/home/ubuntu/staging/apps/build/js/craft/game/CommandQueue/BaseCommand.js":[function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{"default":a}}function e(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(c,"__esModule",{value:!0});var f=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),g=a("./CommandState.js"),h=d(g),i=function(){function a(b,c){e(this,a),this.GameController=b,this.Game=b.game,this.HighlightCallback=c,this.state=h["default"].NOT_STARTED}return f(a,[{key:"tick",value:function(){}},{key:"begin",value:function(){this.HighlightCallback&&this.HighlightCallback(),this.state=h["default"].WORKING}},{key:"isStarted",value:function(){return this.state!=h["default"].NOT_STARTED}},{key:"isFinished",value:function(){return this.isSucceeded()||this.isFailed()}},{key:"isSucceeded",value:function(){return this.state===h["default"].SUCCESS}},{key:"isFailed",value:function(){return this.state===h["default"].FAILURE}},{key:"succeeded",value:function(){this.state=h["default"].SUCCESS}},{key:"failed",value:function(){this.state=h["default"].FAILURE}}]),a}();c["default"]=i,b.exports=c["default"]},{"./CommandState.js":"/home/ubuntu/staging/apps/build/js/craft/game/CommandQueue/CommandState.js"}],"/home/ubuntu/staging/apps/build/js/craft/game/CommandQueue/CommandState.js":[function(a,b,c){"use strict";Object.defineProperty(c,"__esModule",{value:!0}),c["default"]=Object.freeze({NOT_STARTED:0,WORKING:1,SUCCESS:2,FAILURE:3}),b.exports=c["default"]},{}],"/home/ubuntu/staging/apps/build/js/craft/dialogs/playerSelection.html.ejs":[function(require,module,exports){module.exports=function(){var t=function anonymous(locals,filters,escape){escape=escape||function(a){return String(a).replace(/&(?!\w+;)/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")};var buf=[];with(locals||{})!function(){buf.push("");var a=require("../locale");buf.push('\n<h1 class="minecraft-big-yellow-header" id="getting-started-header">',escape(a.playerSelectLetsGetStarted()),'</h1>\n\n<h2 id="select-character-text">',escape(a.playerSelectChooseCharacter()),'</h2>\n\n<div id="choose-character-container">\n  <div class="minecraft-character" id="choose-steve">\n    <h1 class="minecraft-big-yellow-header">Steve</h1>\n    <div class="character-portrait" id="steve-portrait"></div>\n    <div class="choose-character-button" id="choose-steve-select">',escape(a.selectChooseButton()),'</div>\n  </div>\n  <div class="minecraft-character" id="choose-alex">\n    <h1 class="minecraft-big-yellow-header">Alex</h1>\n    <div class="character-portrait" id="alex-portrait"></div>\n    <div class="choose-character-button" id="choose-alex-select">',escape(a.selectChooseButton()),'</div>\n  </div>\n</div>\n\n<div id="close-character-select"></div>\n')}();return buf.join("")};return function(a){return t(a,require("ejs").filters)}}()},{"../locale":"/home/ubuntu/staging/apps/build/js/craft/locale.js",ejs:"/home/ubuntu/staging/apps/node_modules/ejs/lib/ejs.js"}],"/home/ubuntu/staging/apps/build/js/craft/dialogs/houseSelection.html.ejs":[function(require,module,exports){module.exports=function(){var t=function anonymous(locals,filters,escape){escape=escape||function(a){return String(a).replace(/&(?!\w+;)/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")};var buf=[];with(locals||{})!function(){buf.push("");var a=require("../locale");buf.push('\n<h1 class="minecraft-big-yellow-header" id="getting-started-header">',escape(a.houseSelectLetsBuild()),'</h1>\n\n<h2 id="select-house-text">',escape(a.houseSelectChooseFloorPlan()),'</h2>\n\n<div id="choose-house-container">\n  <div class="minecraft-house" id="choose-house-a">\n    <h1 class="minecraft-big-yellow-header">',escape(a.houseSelectEasy()),'</h1>\n    <div class="house-outline-container">\n      <div class="house-photo" id="house-a-picture"></div>\n    </div>\n    <div class="choose-house-button">',escape(a.selectChooseButton()),'</div>\n  </div>\n  <div class="minecraft-house" id="choose-house-b">\n    <h1 class="minecraft-big-yellow-header">',escape(a.houseSelectMedium()),'</h1>\n    <div class="house-outline-container">\n      <div class="house-photo" id="house-b-picture"></div>\n    </div>\n    <div class="choose-house-button">',escape(a.selectChooseButton()),'</div>\n  </div>\n  <div class="minecraft-house" id="choose-house-c">\n    <h1 class="minecraft-big-yellow-header">',escape(a.houseSelectHard()),'</h1>\n    <div class="house-outline-container">\n      <div class="house-photo" id="house-c-picture"></div>\n    </div>\n    <div class="choose-house-button">',escape(a.selectChooseButton()),'</div>\n  </div>\n</div>\n\n<div id="close-house-select"></div>\n')}();return buf.join("")};return function(a){return t(a,require("ejs").filters)}}()},{"../locale":"/home/ubuntu/staging/apps/build/js/craft/locale.js",ejs:"/home/ubuntu/staging/apps/node_modules/ejs/lib/ejs.js"}],"/home/ubuntu/staging/apps/build/js/craft/controls.html.ejs":[function(require,module,exports){module.exports=function(){var t=function anonymous(locals,filters,escape){escape=escape||function(a){return String(a).replace(/&(?!\w+;)/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")};var buf=[];with(locals||{})!function(){buf.push("");var a=require("../locale");buf.push('\n\n<div id="right-button-cell">\n  <button id="rightButton" class="share mc-share-button">\n    <div>',escape(a.finish()),"</div>\n  </button>\n</div>\n\n<!-- This is a comment unique to Craft -->\n")}();return buf.join("")};return function(a){return t(a,require("ejs").filters)}}()},{"../locale":"/home/ubuntu/staging/apps/build/js/locale.js",ejs:"/home/ubuntu/staging/apps/node_modules/ejs/lib/ejs.js"}],"/home/ubuntu/staging/apps/build/js/craft/blocks.js":[function(a,b,c){"use strict";function d(a){return a.map(function(a){var b=f[a]||a;return[b,a]})}var e=a("./locale"),f={bedrock:e.blockTypeBedrock(),bricks:e.blockTypeBricks(),clay:e.blockTypeClay(),oreCoal:e.blockTypeOreCoal(),dirtCoarse:e.blockTypeDirtCoarse(),cobblestone:e.blockTypeCobblestone(),oreDiamond:e.blockTypeOreDiamond(),dirt:e.blockTypeDirt(),oreEmerald:e.blockTypeOreEmerald(),farmlandWet:e.blockTypeFarmlandWet(),glass:e.blockTypeGlass(),oreGold:e.blockTypeOreGold(),grass:e.blockTypeGrass(),gravel:e.blockTypeGravel(),clayHardened:e.blockTypeClayHardened(),oreIron:e.blockTypeOreIron(),oreLapis:e.blockTypeOreLapis(),lava:e.blockTypeLava(),logAcacia:e.blockTypeLogAcacia(),logBirch:e.blockTypeLogBirch(),logJungle:e.blockTypeLogJungle(),logOak:e.blockTypeLogOak(),logSpruce:e.blockTypeLogSpruce(),planksAcacia:e.blockTypePlanksAcacia(),planksBirch:e.blockTypePlanksBirch(),planksJungle:e.blockTypePlanksJungle(),planksOak:e.blockTypePlanksOak(),planksSpruce:e.blockTypePlanksSpruce(),oreRedstone:e.blockTypeOreRedstone(),rail:e.blockTypeRail(),sand:e.blockTypeSand(),sandstone:e.blockTypeSandstone(),stone:e.blockTypeStone(),tnt:e.blockTypeTnt(),tree:e.blockTypeTree(),water:e.blockTypeWater(),wool:e.blockTypeWool(),"":e.blockTypeEmpty()},g=["bedrock","bricks","clay","oreCoal","dirtCoarse","cobblestone","oreDiamond","dirt","oreEmerald","farmlandWet","glass","oreGold","grass","gravel","clayHardened","oreIron","oreLapis","lava","logAcacia","logBirch","logJungle","logOak","logSpruce","planksAcacia","planksBirch","planksJungle","planksOak","planksSpruce","oreRedstone","sand","sandstone","stone","tnt","tree","wool"];c.install=function(a,b){var c=(b.level.availableBlocks||[]).concat(JSON.parse(window.localStorage.getItem("craftPlayerInventory"))||[]),f={};c.forEach(function(a){f[a]=!0});var h={inventoryBlocks:Object.keys(f),ifBlockOptions:b.level.ifBlockOptions,placeBlockOptions:b.level.placeBlockOptions},i=!h.inventoryBlocks||0===h.inventoryBlocks.length,j=i?g:h.inventoryBlocks;a.Blocks.craft_moveForward={helpUrl:"",init:function(){this.setHSV(184,1,.74),this.appendDummyInput().appendTitle(new a.FieldLabel(e.blockMoveForward())),this.setPreviousStatement(!0),this.setNextStatement(!0)}},a.Generator.get("JavaScript").craft_moveForward=function(){return"moveForward('block_id_"+this.id+"');\n"},a.Blocks.craft_turn={helpUrl:"http://code.google.com/p/blockly/wiki/Turn",init:function(){this.setHSV(184,1,.74),this.appendDummyInput().appendTitle(new a.FieldDropdown(this.DIRECTIONS),"DIR"),this.setPreviousStatement(!0),this.setNextStatement(!0)}},a.Blocks.craft_turn.DIRECTIONS=[[e.blockTurnLeft()+" ↺","left"],[e.blockTurnRight()+" ↻","right"]],a.Generator.get("JavaScript").craft_turn=function(){var a=this.getTitleValue("DIR"),b="left"===a?"turnLeft":"turnRight";return b+"('block_id_"+this.id+"');\n"},a.Blocks.craft_destroyBlock={helpUrl:"",init:function(){this.setHSV(184,1,.74),this.appendDummyInput().appendTitle(new a.FieldLabel(e.blockDestroyBlock())),this.setPreviousStatement(!0),this.setNextStatement(!0)}},a.Generator.get("JavaScript").craft_destroyBlock=function(){return"destroyBlock('block_id_"+this.id+"');\n"},a.Blocks.craft_shear={helpUrl:"",init:function(){this.setHSV(184,1,.74),this.appendDummyInput().appendTitle(new a.FieldLabel(e.blockShear())),this.setPreviousStatement(!0),this.setNextStatement(!0)}},a.Generator.get("JavaScript").craft_shear=function(){return"shear('block_id_"+this.id+"');\n"},a.Blocks.craft_whileBlockAhead={helpUrl:"",init:function(){var b=d(h.ifBlockOptions||j),c=new a.FieldDropdown(b);c.setValue(b[0][1]),this.setHSV(322,.9,.95),this.appendDummyInput().appendTitle(e.blockWhileXAheadWhile()).appendTitle(c,"TYPE").appendTitle(e.blockWhileXAheadAhead()),this.appendStatementInput("DO").appendTitle(e.blockWhileXAheadDo()),this.setPreviousStatement(!0),this.setNextStatement(!0)}},a.Generator.get("JavaScript").craft_whileBlockAhead=function(){var b=a.Generator.get("JavaScript").statementToCode(this,"DO"),c=this.getTitleValue("TYPE");return"whileBlockAhead('block_id_"+this.id+"',\n\""+c+'",   function() { '+b+"  });\n"},a.Blocks.craft_ifBlockAhead={helpUrl:"",init:function(){var b=d(h.ifBlockOptions||j),c=new a.FieldDropdown(b);c.setValue(b[0][1]),this.setHSV(196,1,.79),this.appendDummyInput().appendTitle(e.blockIf()).appendTitle(c,"TYPE").appendTitle(e.blockWhileXAheadAhead()),this.appendStatementInput("DO").appendTitle(e.blockWhileXAheadDo()),this.setPreviousStatement(!0),this.setNextStatement(!0)}},a.Generator.get("JavaScript").craft_ifBlockAhead=function(){
var b=a.Generator.get("JavaScript").statementToCode(this,"DO"),c=this.getTitleValue("TYPE");return'ifBlockAhead("'+c+'", function() {\n'+b+"}, 'block_id_"+this.id+"');\n"},a.Blocks.craft_ifLavaAhead={helpUrl:"",init:function(){this.setHSV(196,1,.79),this.appendDummyInput().appendTitle(e.blockIfLavaAhead()),this.appendStatementInput("DO").appendTitle(e.blockWhileXAheadDo()),this.setPreviousStatement(!0),this.setNextStatement(!0)}},a.Generator.get("JavaScript").craft_ifLavaAhead=function(){var b=a.Generator.get("JavaScript").statementToCode(this,"DO");return"ifLavaAhead(function() {\n"+b+"}, 'block_id_"+this.id+"');\n"},a.Blocks.craft_placeBlock={helpUrl:"",init:function(){var b=d(h.placeBlockOptions||j),c=new a.FieldDropdown(b);c.setValue(b[0][1]),this.setHSV(184,1,.74),this.appendDummyInput().appendTitle(e.blockPlaceXPlace()).appendTitle(c,"TYPE"),this.setPreviousStatement(!0),this.setNextStatement(!0)}},a.Generator.get("JavaScript").craft_placeBlock=function(){var a=this.getTitleValue("TYPE");return'placeBlock("'+a+"\", 'block_id_"+this.id+"');\n"},a.Blocks.craft_placeTorch={helpUrl:"",init:function(){this.setHSV(184,1,.74),this.appendDummyInput().appendTitle(e.blockPlaceTorch()),this.setPreviousStatement(!0),this.setNextStatement(!0)}},a.Generator.get("JavaScript").craft_placeTorch=function(){return"placeTorch('block_id_"+this.id+"');\n"},a.Blocks.craft_plantCrop={helpUrl:"",init:function(){this.setHSV(184,1,.74),this.appendDummyInput().appendTitle(e.blockPlantCrop()),this.setPreviousStatement(!0),this.setNextStatement(!0)}},a.Generator.get("JavaScript").craft_plantCrop=function(){return"plantCrop('block_id_"+this.id+"');\n"},a.Blocks.craft_tillSoil={helpUrl:"",init:function(){this.setHSV(184,1,.74),this.appendDummyInput().appendTitle(e.blockTillSoil),this.setPreviousStatement(!0),this.setNextStatement(!0)}},a.Generator.get("JavaScript").craft_tillSoil=function(){return"tillSoil('block_id_"+this.id+"');\n"},a.Blocks.craft_placeBlockAhead={helpUrl:"",init:function(){var b=d(h.placeBlockOptions||j),c=new a.FieldDropdown(b);c.setValue(b[0][1]),this.setHSV(184,1,.74),this.appendDummyInput().appendTitle(e.blockPlaceXAheadPlace()).appendTitle(c,"TYPE").appendTitle(e.blockPlaceXAheadAhead()),this.setPreviousStatement(!0),this.setNextStatement(!0)}},a.Generator.get("JavaScript").craft_placeBlockAhead=function(){var a=this.getTitleValue("TYPE");return'placeBlockAhead("'+a+"\", 'block_id_"+this.id+"');\n"}}},{"./locale":"/home/ubuntu/staging/apps/build/js/craft/locale.js"}],"/home/ubuntu/staging/apps/build/js/craft/locale.js":[function(a,b,c){"use strict";b.exports=window.blockly.craft_locale},{}],"/home/ubuntu/staging/apps/build/js/craft/api.js":[function(a,b,c){"use strict"},{}]},{},["/home/ubuntu/staging/apps/build/js/craft/main.js"]);