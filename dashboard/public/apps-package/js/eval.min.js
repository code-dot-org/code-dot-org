require=function a(b,c,d){function e(g,h){if(!c[g]){if(!b[g]){var i="function"==typeof require&&require;if(!h&&i)return i(g,!0);if(f)return f(g,!0);var j=new Error("Cannot find module '"+g+"'");throw j.code="MODULE_NOT_FOUND",j}var k=c[g]={exports:{}};b[g][0].call(k.exports,function(a){var c=b[g][1][a];return e(c?c:a)},k,k.exports,a,b,c,d)}return c[g].exports}for(var f="function"==typeof require&&require,g=0;g<d.length;g++)e(d[g]);return e}({"/home/ubuntu/staging/apps/build/js/eval/main.js":[function(a,b,c){"use strict";var d=a("../appMain");window.Eval=a("./eval");var e=a("./blocks"),f=a("../skins"),g=a("./levels");window.evalMain=function(a){a.skinsModule=f,a.blocksModule=e,d(window.Eval,g,a)}},{"../appMain":"/home/ubuntu/staging/apps/build/js/appMain.js","../skins":"/home/ubuntu/staging/apps/build/js/skins.js","./blocks":"/home/ubuntu/staging/apps/build/js/eval/blocks.js","./eval":"/home/ubuntu/staging/apps/build/js/eval/eval.js","./levels":"/home/ubuntu/staging/apps/build/js/eval/levels.js"}],"/home/ubuntu/staging/apps/build/js/eval/eval.js":[function(a,b,c){"use strict";function d(a,b){b&&(r.resetButtonClick(),q.resetButtonClick(),q.clearCanvasWithID("user")),e(),h();var c;try{var d=a.getInputTargetBlock("ACTUAL"),i=a.getInputTargetBlock("EXPECTED"),j=k(d),l=k(i);if(r.feedback_.throwOnInvalidExampleBlocks(d,i),!j||j instanceof z)throw new Error("Invalid Call Block");if(!l||l instanceof z)throw new Error("Invalid Result Block");j.draw(document.getElementById("test-call")),l.draw(document.getElementById("test-result")),c=o("test-call","test-result")?null:"Does not match definition"}catch(m){c="Execution error: "+m.message}return b?g():f(),c}function e(){q.clearCanvasWithID("test-call"),q.clearCanvasWithID("test-result")}function f(){document.getElementById("answer").style.display="block",document.getElementById("test-call").style.display="none",document.getElementById("test-result").style.display="none"}function g(){document.getElementById("answer").style.display="none",document.getElementById("test-call").style.display="none",document.getElementById("test-result").style.display="block"}function h(){document.getElementById("answer").style.display="none",document.getElementById("test-call").style.display="block",document.getElementById("test-result").style.display="block"}function i(a){try{u.evalWith(a,{StudioApp:r,Eval:v});var b=q.displayedObject;return q.displayedObject=null,b}catch(c){return c instanceof z?c:B.isInfiniteRecursionError(c)?new z(z.Type.InfiniteRecursion,null):(window.onerror&&window.onerror("UserCode:"+c.message,document.URL,0),console&&console.log&&console.log(c),new z(z.Type.UserCodeException,null))}}function j(){var a=Blockly.Generator.blockSpaceToCode("JavaScript",["functional_display","functional_definition"]),b=i(a);return b}function k(a){var b=Blockly.Generator.blockSpaceToCode("JavaScript",["functional_definition"]),c=Blockly.Generator.blocksToCode("JavaScript",[a]),d=c.split("\n"),e=d.slice(-1)[0],f="Eval.display("+e+");",g=d.slice(0,-1).join("\n")+f,h=i(b+"; "+g);return h}function l(a){if(0!==Blockly.mainBlockSpace.getTopBlocks().length)throw new Error("getDrawableFromBlocks shouldn't be called with blocks if we already have blocks in the workspace");r.loadBlocks(a);var b=j();return Blockly.mainBlockSpace.getTopBlocks().forEach(function(a){a.dispose()}),b}function m(a){var b=document.createElement("div");return b.appendChild(a.cloneNode(!0)),b.innerHTML}function n(a){var b=document.createElement("canvas");b.width=q.CANVAS_WIDTH,b.height=q.CANVAS_HEIGHT,E(b,m(document.getElementById(a))),b.svg.stop();var c=b.getContext("2d");return c.getImageData(0,0,q.CANVAS_WIDTH,q.CANVAS_HEIGHT)}function o(a,b){for(var c=n(a),d=n(b),e=0;e<c.data.length;e++)if(0!==Math.abs(c.data[e]-d.data[e]))return!1;return!0}function p(a){var b=document.getElementById("runButton");b.disabled=!1,setTimeout(function(){H(a)},2e3)}var q=b.exports,r=a("../StudioApp").singleton,q=b.exports,s=a("../locale"),t=a("./locale"),u=(a("../skins"),a("./levels"),a("../codegen")),v=a("./api"),w=a("../templates/page.html.ejs"),x=a("../dom"),y=a("../block_utils"),z=a("./evalError"),A=a("./evalText"),B=a("../utils"),C=r.ResultType,D=r.TestResults,E=a("canvg");"undefined"!=typeof SVGElement&&a("../canvg/svg_todataurl");var F,G;r.setCheckForEmptyBlocks(!1),q.CANVAS_HEIGHT=400,q.CANVAS_WIDTH=400,q.displayedObject=null,q.answerObject=null,q.feedbackImage=null,q.encodedFeedbackImage=null,q.init=function(b){r.runButtonClick=this.runButtonClick.bind(this),G=b.skin,F=b.level,b.grayOutUndeletableBlocks=!0,b.forceInsertTopBlock="functional_display",b.enableShowCode=!1,b.skin.staticAvatar=null,b.skin.smallStaticAvatar=null,b.skin.failureAvatar=null,b.skin.winAvatar=null,b.html=w({assetUrl:r.assetUrl,data:{localeDirection:r.localeDirection(),visualization:a("./visualization.html.ejs")(),controls:a("./controls.html.ejs")({assetUrl:r.assetUrl}),blockUsed:void 0,idealBlockNumber:void 0,editCode:F.editCode,blockCounterClass:"block-counter-default",readonlyWorkspace:b.readonlyWorkspace}}),b.loadAudio=function(){r.loadAudio(G.winSound,"win"),r.loadAudio(G.startSound,"start"),r.loadAudio(G.failureSound,"failure")},b.afterInject=function(){var a=document.getElementById("svgEval");if(!a)throw"something bad happened";if(a.setAttribute("width",q.CANVAS_WIDTH),a.setAttribute("height",q.CANVAS_HEIGHT),Blockly.BROKEN_CONTROL_POINTS=!1,Blockly.JavaScript.addReservedWords("Eval,code"),F.coordinateGridBackground){var c=document.getElementById("background");c.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",G.assetUrl("background_grid.png")),r.createCoordinateGridBackground({svg:"svgEval",origin:-200,firstLabel:-100,lastLabel:100,increment:100}),c.setAttribute("visibility","visible")}if(F.solutionBlocks){var e=y.forceInsertTopBlock(F.solutionBlocks,b.forceInsertTopBlock),g=l(e);g&&g.draw&&(q.answerObject=g,g.draw(document.getElementById("answer")))}var h=document.getElementById("visualizationColumn");h.style.width="400px";var i=document.getElementById("resetButton");x.addClickTouchEvent(i,q.resetButtonClick),Blockly.contractEditor&&(Blockly.contractEditor.registerTestHandler(d),Blockly.contractEditor.registerTestResetHandler(f))},r.init(b)},q.runButtonClick=function(){r.toggleRunReset("reset"),Blockly.mainBlockSpace.traceOn(!0),r.attempts++,q.execute()},q.clearCanvasWithID=function(a){for(var b=document.getElementById(a);b.firstChild;)b.removeChild(b.firstChild)},q.resetButtonClick=function(){f(),q.clearCanvasWithID("user"),q.feedbackImage=null,q.encodedFeedbackImage=null,q.result=C.UNSET,q.testResults=D.NO_TESTS_RUN,q.message=void 0},q.getTextStringsFromObject_=function(a){if(!a)return[];var b=[];return a instanceof A&&b.push(a.getText()),a.getChildren().forEach(function(a){b=b.concat(q.getTextStringsFromObject_(a))}),b},q.haveCaseMismatch_=function(a,b){var c=q.getTextStringsFromObject_(a),d=q.getTextStringsFromObject_(b);if(c.length!==d.length)return!1;c.sort(),d.sort();for(var e=!1,f=0;f<c.length;f++){var g=c[f],h=d[f];if(g!==h){if(g.toLowerCase()!==h.toLowerCase())return!1;e=!0}}return e},q.haveBooleanMismatch_=function(a,b){var c=q.getTextStringsFromObject_(a),d=q.getTextStringsFromObject_(b);if(1!==c.length||1!==d.length)return!1;var e=c[0],f=d[0];return"true"===e&&"false"===f||"false"===e&&"true"===f?!0:!1},q.execute=function(){if(q.result=C.UNSET,q.testResults=D.NO_TESTS_RUN,q.message=void 0,r.hasUnfilledFunctionalBlock())q.result=!1,q.testResults=D.EMPTY_FUNCTIONAL_BLOCK,q.message=r.getUnfilledFunctionalBlockError("functional_display");else if(r.hasQuestionMarksInNumberField())q.result=!1,q.testResults=D.QUESTION_MARKS_IN_NUMBER_FIELD;else if(r.hasEmptyFunctionOrVariableName())q.result=!1,q.testResults=D.EMPTY_FUNCTION_NAME,q.message=s.unnamedFunction();else{e(),f();var a=j();a&&a.draw&&a.draw(document.getElementById("user")),a instanceof z?(q.result=!1,q.testResults=D.APP_SPECIFIC_FAIL,q.message=a.feedbackMessage):q.haveCaseMismatch_(a,q.answerObject)?(q.result=!1,q.testResults=D.APP_SPECIFIC_FAIL,q.message=t.stringMismatchError()):q.haveBooleanMismatch_(a,q.answerObject)?(q.result=!1,q.testResults=D.APP_SPECIFIC_FAIL,q.message=t.wrongBooleanError()):(q.checkExamples_(),q.result===C.UNSET&&(q.result=o("user","answer"),q.testResults=r.getTestResults(q.result)),F.freePlay&&(q.result=!0,q.testResults=D.FREE_PLAY))}var b=Blockly.Xml.blockSpaceToDom(Blockly.mainBlockSpace),c=Blockly.Xml.domToText(b),d={app:"eval",level:F.id,builder:F.builder,result:q.result,testResult:q.testResults,program:encodeURIComponent(c),onComplete:p,image:q.encodedFeedbackImage};"undefined"==typeof document.getElementById("svgEval").toDataURL?r.report(d):document.getElementById("svgEval").toDataURL("image/png",{callback:function(a){q.feedbackImage=a,q.encodedFeedbackImage=encodeURIComponent(q.feedbackImage.split(",")[1]),r.report(d)}}),r.playAudio(q.result?"win":"failure")},q.checkExamples_=function(a){if(F.examplesRequired){var b=r.getFunctionWithoutTwoExamples();if(b)return q.result=!1,q.testResults=D.EXAMPLE_FAILED,void(q.message=s.emptyExampleBlockErrorMsg({functionName:b}));var c=r.getUnfilledFunctionalExample();if(c){q.result=!1,q.testResults=D.EXAMPLE_FAILED;var e=c.getRootBlock().getInputTargetBlock("ACTUAL").getTitleValue("NAME");return void(q.message=s.emptyExampleBlockErrorMsg({functionName:e}))}var f=r.checkForFailingExamples(d);return f?(q.clearCanvasWithID("user"),q.result=!1,q.testResults=D.EXAMPLE_FAILED,void(q.message=s.exampleErrorMessage({functionName:f}))):void 0}};var H=function(a){if(q.result!==C.UNSET){F.extraTopBlocks=t.extraTopBlocks();var b;F.freePlay&&(b=s.keepPlaying());var c={app:"eval",skin:G.id,feedbackType:q.testResults,response:a,level:F,tryAgainText:b,continueText:F.freePlay?s.nextPuzzle():void 0,showingSharing:!F.disableSharing&&F.freePlay,saveToGalleryUrl:F.freePlay&&q.response&&q.response.save_to_gallery_url,feedbackImage:q.feedbackImage,appStrings:{reinfFeedbackMsg:t.reinfFeedbackMsg({backButton:b})}};q.message&&!F.edit_blocks&&(c.message=q.message),r.displayFeedback(c)}}},{"../StudioApp":"/home/ubuntu/staging/apps/build/js/StudioApp.js","../block_utils":"/home/ubuntu/staging/apps/build/js/block_utils.js","../canvg/svg_todataurl":"/home/ubuntu/staging/apps/build/js/canvg/svg_todataurl.js","../codegen":"/home/ubuntu/staging/apps/build/js/codegen.js","../dom":"/home/ubuntu/staging/apps/build/js/dom.js","../locale":"/home/ubuntu/staging/apps/build/js/locale.js","../skins":"/home/ubuntu/staging/apps/build/js/skins.js","../templates/page.html.ejs":"/home/ubuntu/staging/apps/build/js/templates/page.html.ejs","../utils":"/home/ubuntu/staging/apps/build/js/utils.js","./api":"/home/ubuntu/staging/apps/build/js/eval/api.js","./controls.html.ejs":"/home/ubuntu/staging/apps/build/js/eval/controls.html.ejs","./evalError":"/home/ubuntu/staging/apps/build/js/eval/evalError.js","./evalText":"/home/ubuntu/staging/apps/build/js/eval/evalText.js","./levels":"/home/ubuntu/staging/apps/build/js/eval/levels.js","./locale":"/home/ubuntu/staging/apps/build/js/eval/locale.js","./visualization.html.ejs":"/home/ubuntu/staging/apps/build/js/eval/visualization.html.ejs",canvg:"/home/ubuntu/staging/apps/node_modules/canvg/canvg.js"}],"/home/ubuntu/staging/apps/build/js/eval/visualization.html.ejs":[function(require,module,exports){module.exports=function(){var t=function anonymous(locals,filters,escape){escape=escape||function(a){return String(a).replace(/&(?!\w+;)/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")};var buf=[];with(locals||{})!function(){buf.push('<svg xmlns="http://www.w3.org/2000/svg" version="1.1" id="svgEval">\n  <image id="background" visibility="hidden" height="400" width="400" x="0" y="0" ></image>\n  <g id="answer">\n  </g>\n  <g id="user">\n  </g>\n  <g id="test-call">\n  </g>\n  <g id="test-result">\n  </g>\n</svg>\n')}();return buf.join("")};return function(a){return t(a,require("ejs").filters)}}()},{ejs:"/home/ubuntu/staging/apps/node_modules/ejs/lib/ejs.js"}],"/home/ubuntu/staging/apps/build/js/eval/levels.js":[function(a,b,c){"use strict";var d=(a("./locale"),a("../block_utils"));b.exports={eval1:{solutionBlocks:d.mathBlockXml("functional_star",{COLOR:d.mathBlockXml("functional_string",null,{VAL:"green"}),STYLE:d.mathBlockXml("functional_string",null,{VAL:"solid"}),SIZE:d.mathBlockXml("functional_math_number",null,{NUM:200})}),ideal:1/0,toolbox:d.createToolbox(d.blockOfType("functional_plus")+d.blockOfType("functional_minus")+d.blockOfType("functional_times")+d.blockOfType("functional_dividedby")+d.blockOfType("functional_math_number")+d.blockOfType("functional_string")+d.blockOfType("functional_style")+d.blockOfType("functional_circle")+d.blockOfType("functional_triangle")+d.blockOfType("functional_square")+d.blockOfType("functional_rectangle")+d.blockOfType("functional_ellipse")+d.blockOfType("functional_star")+d.blockOfType("functional_radial_star")+d.blockOfType("functional_polygon")+d.blockOfType("place_image")+d.blockOfType("offset")+d.blockOfType("overlay")+d.blockOfType("underlay")+d.blockOfType("rotate")+d.blockOfType("scale")+d.blockOfType("functional_text")+d.blockOfType("string_append")+d.blockOfType("string_length")+d.blockOfType("functional_greater_than")+d.blockOfType("functional_less_than")+d.blockOfType("functional_number_equals")+d.blockOfType("functional_string_equals")+d.blockOfType("functional_logical_and")+d.blockOfType("functional_logical_or")+d.blockOfType("functional_logical_not")+d.blockOfType("functional_boolean")),startBlocks:d.mathBlockXml("functional_star",{COLOR:d.mathBlockXml("functional_string",null,{VAL:"black"}),STYLE:d.mathBlockXml("functional_string",null,{VAL:"solid"}),SIZE:d.mathBlockXml("functional_math_number",null,{NUM:200})}),requiredBlocks:"",freePlay:!1},custom:{answer:"",ideal:1/0,toolbox:"",startBlocks:"",requiredBlocks:"",freePlay:!1}}},{"../block_utils":"/home/ubuntu/staging/apps/build/js/block_utils.js","./locale":"/home/ubuntu/staging/apps/build/js/eval/locale.js"}],"/home/ubuntu/staging/apps/build/js/eval/controls.html.ejs":[function(require,module,exports){module.exports=function(){var t=function anonymous(locals,filters,escape){escape=escape||function(a){return String(a).replace(/&(?!\w+;)/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")};var buf=[];with(locals||{})!function(){buf.push("");var a=(require("./locale"),require("../locale"));buf.push('\n\n<button id="continueButton" class="launch hide float-right">\n  <img src="',escape(assetUrl("media/1x1.gif")),'">',escape(a["continue"]()),"\n</button>\n")}();return buf.join("")};return function(a){return t(a,require("ejs").filters)}}()},{"../locale":"/home/ubuntu/staging/apps/build/js/locale.js","./locale":"/home/ubuntu/staging/apps/build/js/eval/locale.js",ejs:"/home/ubuntu/staging/apps/node_modules/ejs/lib/ejs.js"}],"/home/ubuntu/staging/apps/build/js/eval/blocks.js":[function(a,b,c){"use strict";function d(a,b,c,d){var e=d.blockName,f=d.blockTitle,g=d.apiName,h=d.args,i=d.returnType||a.BlockValueType.IMAGE;a.Blocks[e]={init:function(){a.FunctionalBlockUtils.initTitledFunctionalBlock(this,f,i,h,{verticallyStackInputs:d.verticallyStackInputs})}},b[e]=function(){for(var b=[],c=0;c<h.length;c++){var d=h[c],e=Blockly.JavaScript.statementToCode(this,d.name,!1);e||(d.type===a.BlockValueType.NUMBER?e="0":"STYLE"===d.name?e=a.JavaScript.quote_("solid"):"COLOR"===d.name&&(e=a.JavaScript.quote_("black"))),b.push(e)}return"Eval."+g+"("+b.join(", ")+")"}}var e=a("./locale"),f=(a("../locale"),a("./evalUtils"),a("../sharedFunctionalBlocks"));c.install=function(a,b){var c=(b.skin,a.Generator.get("JavaScript"));a.JavaScript=c;var g=function(b){var d=a.Variables.NAME_TYPE;return c.variableDB_.getDistinctName(b,d)};f.install(a,c,g),d(a,c,g,{blockName:"functional_display",blockTitle:e.displayBlockTitle(),apiName:"display",returnType:a.BlockValueType.NONE,args:[{name:"ARG1",type:a.BlockValueType.NONE}]}),d(a,c,g,{blockName:"functional_circle",blockTitle:e.circleBlockTitle(),apiName:"circle",args:[{name:"SIZE",type:a.BlockValueType.NUMBER},{name:"STYLE",type:a.BlockValueType.STRING},{name:"COLOR",type:a.BlockValueType.STRING}]}),d(a,c,g,{blockName:"functional_triangle",blockTitle:e.triangleBlockTitle(),apiName:"triangle",args:[{name:"SIZE",type:a.BlockValueType.NUMBER},{name:"STYLE",type:a.BlockValueType.STRING},{name:"COLOR",type:a.BlockValueType.STRING}]}),d(a,c,g,{blockName:"functional_square",blockTitle:e.squareBlockTitle(),apiName:"square",args:[{name:"SIZE",type:a.BlockValueType.NUMBER},{name:"STYLE",type:a.BlockValueType.STRING},{name:"COLOR",type:a.BlockValueType.STRING}]}),d(a,c,g,{blockName:"functional_rectangle",blockTitle:e.rectangleBlockTitle(),apiName:"rectangle",args:[{name:"WIDTH",type:a.BlockValueType.NUMBER},{name:"HEIGHT",type:a.BlockValueType.NUMBER},{name:"STYLE",type:a.BlockValueType.STRING},{name:"COLOR",type:a.BlockValueType.STRING}]}),d(a,c,g,{blockName:"functional_ellipse",blockTitle:e.ellipseBlockTitle(),apiName:"ellipse",args:[{name:"WIDTH",type:a.BlockValueType.NUMBER},{name:"HEIGHT",type:a.BlockValueType.NUMBER},{name:"STYLE",type:a.BlockValueType.STRING},{name:"COLOR",type:a.BlockValueType.STRING}]}),d(a,c,g,{blockName:"functional_star",blockTitle:e.starBlockTitle(),apiName:"star",args:[{name:"SIZE",type:a.BlockValueType.NUMBER},{name:"STYLE",type:a.BlockValueType.STRING},{name:"COLOR",type:a.BlockValueType.STRING}]}),d(a,c,g,{blockName:"functional_radial_star",blockTitle:e.radialStarBlockTitle(),apiName:"radialStar",args:[{name:"POINTS",type:a.BlockValueType.NUMBER},{name:"INNER",type:a.BlockValueType.NUMBER},{name:"OUTER",type:a.BlockValueType.NUMBER},{name:"STYLE",type:a.BlockValueType.STRING},{name:"COLOR",type:a.BlockValueType.STRING}]}),d(a,c,g,{blockName:"functional_polygon",blockTitle:e.polygonBlockTitle(),apiName:"polygon",args:[{name:"SIDES",type:a.BlockValueType.NUMBER},{name:"LENGTH",type:a.BlockValueType.NUMBER},{name:"STYLE",type:a.BlockValueType.STRING},{name:"COLOR",type:a.BlockValueType.STRING}]}),d(a,c,g,{blockName:"functional_text",blockTitle:e.textBlockTitle(),apiName:"text",args:[{name:"TEXT",type:a.BlockValueType.STRING},{name:"SIZE",type:a.BlockValueType.NUMBER},{name:"COLOR",type:a.BlockValueType.STRING}]}),d(a,c,g,{blockName:"overlay",blockTitle:e.overlayBlockTitle(),apiName:"overlay",args:[{name:"TOP",type:a.BlockValueType.IMAGE},{name:"BOTTOM",type:a.BlockValueType.IMAGE}],verticallyStackInputs:!0}),d(a,c,g,{blockName:"underlay",blockTitle:e.underlayBlockTitle(),apiName:"underlay",args:[{name:"BOTTOM",type:a.BlockValueType.IMAGE},{name:"TOP",type:a.BlockValueType.IMAGE}],verticallyStackInputs:!0}),d(a,c,g,{blockName:"place_image",blockTitle:e.placeImageBlockTitle(),apiName:"placeImage",args:[{name:"X",type:a.BlockValueType.NUMBER},{name:"Y",type:a.BlockValueType.NUMBER},{name:"IMAGE",type:a.BlockValueType.IMAGE}]}),d(a,c,g,{blockName:"offset",blockTitle:e.offsetBlockTitle(),apiName:"offset",args:[{name:"X",type:a.BlockValueType.NUMBER},{name:"Y",type:a.BlockValueType.NUMBER},{name:"IMAGE",type:a.BlockValueType.IMAGE}]}),d(a,c,g,{blockName:"rotate",blockTitle:e.rotateImageBlockTitle(),apiName:"rotateImage",args:[{name:"DEGREES",type:a.BlockValueType.NUMBER},{name:"IMAGE",type:a.BlockValueType.IMAGE}]}),d(a,c,g,{blockName:"scale",blockTitle:e.scaleImageBlockTitle(),apiName:"scaleImage",args:[{name:"FACTOR",type:a.BlockValueType.NUMBER},{name:"IMAGE",type:a.BlockValueType.IMAGE}]}),d(a,c,g,{blockName:"string_append",blockTitle:e.stringAppendBlockTitle(),apiName:"stringAppend",returnType:a.BlockValueType.STRING,args:[{name:"FIRST",type:a.BlockValueType.STRING},{name:"SECOND",type:a.BlockValueType.STRING}]}),d(a,c,g,{blockName:"string_length",blockTitle:e.stringLengthBlockTitle(),apiName:"stringLength",returnType:a.BlockValueType.NUMBER,args:[{name:"STR",type:a.BlockValueType.STRING}]}),a.FunctionalBlockUtils.installStringPicker(a,c,{blockName:"functional_style",values:[[e.solid(),"solid"],["75%","75%"],["50%","50%"],["25%","25%"],[e.outline(),"outline"]]})}},{"../locale":"/home/ubuntu/staging/apps/build/js/locale.js","../sharedFunctionalBlocks":"/home/ubuntu/staging/apps/build/js/sharedFunctionalBlocks.js","./evalUtils":"/home/ubuntu/staging/apps/build/js/eval/evalUtils.js","./locale":"/home/ubuntu/staging/apps/build/js/eval/locale.js"}],"/home/ubuntu/staging/apps/build/js/eval/api.js":[function(a,b,c){"use strict";var d=a("./evalUtils"),e=a("./evalImage"),f=a("./evalText"),g=a("./evalCircle"),h=a("./evalTriangle"),i=a("./evalMulti"),j=a("./evalRect"),k=a("./evalEllipse"),f=a("./evalText"),l=a("./evalStar"),m=a("./evalPolygon");c.display=function(a){void 0===a&&(a=""),"number"==typeof a&&a.toLocaleString&&(a=a.toLocaleString()),a.draw||(a=new f(a.toString(),12,"black")),Eval.displayedObject=a},c.circle=function(a,b,c){return new g(a,b,c)},c.triangle=function(a,b,c){return new h(a,b,c)},c.overlay=function(a,b){return new i(a,b)},c.underlay=function(a,b){return new i(b,a)},c.square=function(a,b,c){return new j(a,a,b,c)},c.rectangle=function(a,b,c,d){return new j(a,b,c,d)},c.ellipse=function(a,b,c,d){return new k(a,b,c,d)},c.text=function(a,b,c){return new f(a,b,c)},c.star=function(a,b,c){var d=(3-Math.sqrt(5))/2*a;return new l(5,d,a,b,c)},c.radialStar=function(a,b,c,d,e){return new l(a,b,c,d,e)},c.polygon=function(a,b,c,d){return new m(a,b,c,d)},c.placeImage=function(a,b,c){return d.ensureNumber(a),d.ensureNumber(b),d.ensureType(c,e),a+=Eval.CANVAS_WIDTH/2,b+=Eval.CANVAS_HEIGHT/2,b=d.cartesianToPixel(b),c.place(a,b),c},c.offset=function(a,b,c){return d.ensureNumber(a),d.ensureNumber(b),d.ensureType(c,e),a=c.x_+a,b=c.y_-b,c.place(a,b),c},c.rotateImage=function(a,b){return d.ensureNumber(a),b.rotate(a),b},c.scaleImage=function(a,b){return b.scale(a,a),b},c.stringAppend=function(a,b){return d.ensureString(a),d.ensureString(b),a+b},c.stringLength=function(a){return d.ensureString(a),a.length}},{"./evalCircle":"/home/ubuntu/staging/apps/build/js/eval/evalCircle.js","./evalEllipse":"/home/ubuntu/staging/apps/build/js/eval/evalEllipse.js","./evalImage":"/home/ubuntu/staging/apps/build/js/eval/evalImage.js","./evalMulti":"/home/ubuntu/staging/apps/build/js/eval/evalMulti.js","./evalPolygon":"/home/ubuntu/staging/apps/build/js/eval/evalPolygon.js","./evalRect":"/home/ubuntu/staging/apps/build/js/eval/evalRect.js","./evalStar":"/home/ubuntu/staging/apps/build/js/eval/evalStar.js","./evalText":"/home/ubuntu/staging/apps/build/js/eval/evalText.js","./evalTriangle":"/home/ubuntu/staging/apps/build/js/eval/evalTriangle.js","./evalUtils":"/home/ubuntu/staging/apps/build/js/eval/evalUtils.js"}],"/home/ubuntu/staging/apps/build/js/eval/evalTriangle.js":[function(a,b,c){"use strict";var d=a("./evalImage"),e=a("./evalUtils"),f=function(a,b,c){e.ensureNumber(a),e.ensureStyle(b),e.ensureColor(c),d.apply(this,[b,c]),this.edge_=a,this.element_=null};f.inherits(d),b.exports=f,f.prototype.draw=function(a){this.element_||(this.element_=document.createElementNS(Blockly.SVG_NS,"polygon"),a.appendChild(this.element_));var b=Math.sqrt(3)/2*this.edge_,c={x:-this.edge_/2,y:b/3},e={x:this.edge_/2,y:b/3},f={x:0,y:2*-b/3};this.element_.setAttribute("points",c.x+","+c.y+" "+e.x+","+e.y+" "+f.x+","+f.y),d.prototype.draw.apply(this,arguments)}},{"./evalImage":"/home/ubuntu/staging/apps/build/js/eval/evalImage.js","./evalUtils":"/home/ubuntu/staging/apps/build/js/eval/evalUtils.js"}],"/home/ubuntu/staging/apps/build/js/eval/evalText.js":[function(a,b,c){"use strict";var d=a("./evalImage"),e=a("./evalUtils"),f=function(a,b,c){e.ensureString(a),e.ensureNumber(b),e.ensureColor(c),d.apply(this,["solid",c]),this.text_=a,this.fontSize_=b,this.element_=null};f.inherits(d),b.exports=f,f.prototype.draw=function(a){this.element_||(this.element_=document.createElementNS(Blockly.SVG_NS,"text"),a.appendChild(this.element_)),this.element_.textContent=this.text_,this.element_.setAttribute("style","font-size: "+this.fontSize_+"pt");var b=this.element_.getBBox();this.element_.setAttribute("x",-b.width/2),this.element_.setAttribute("y",-b.height/2),d.prototype.draw.apply(this,arguments)},f.prototype.getText=function(){return this.text_}},{"./evalImage":"/home/ubuntu/staging/apps/build/js/eval/evalImage.js","./evalUtils":"/home/ubuntu/staging/apps/build/js/eval/evalUtils.js"}],"/home/ubuntu/staging/apps/build/js/eval/evalStar.js":[function(a,b,c){"use strict";var d=a("./evalImage"),e=a("./evalUtils"),f=function(a,b,c,f,g){e.ensureNumber(a),e.ensureNumber(b),e.ensureNumber(c),e.ensureStyle(f),e.ensureColor(g),d.apply(this,[f,g]),this.outer_=c,this.inner_=b,this.pointCount_=a,this.element_=null};f.inherits(d),b.exports=f,f.prototype.draw=function(a){this.element_||(this.element_=document.createElementNS(Blockly.SVG_NS,"polygon"),a.appendChild(this.element_));for(var b=[],c=this.outer_,e=this.inner_,f=2*Math.PI/this.pointCount_,g=0;g<2*Math.PI;g+=f)b.push(c*Math.cos(g)+","+c*Math.sin(g)),b.push(e*Math.cos(g+f/2)+","+e*Math.sin(g+f/2));this.element_.setAttribute("points",b.join(" ")),this.pointCount_%2==1&&this.rotate(-90/this.pointCount_),d.prototype.draw.apply(this,arguments)}},{"./evalImage":"/home/ubuntu/staging/apps/build/js/eval/evalImage.js","./evalUtils":"/home/ubuntu/staging/apps/build/js/eval/evalUtils.js"}],"/home/ubuntu/staging/apps/build/js/eval/evalRect.js":[function(a,b,c){"use strict";var d=a("./evalImage"),e=a("./evalUtils"),f=function(a,b,c,f){e.ensureNumber(a),e.ensureNumber(b),e.ensureStyle(c),e.ensureColor(f),d.apply(this,[c,f]),this.width_=a,this.height_=b,this.element_=null};f.inherits(d),b.exports=f,f.prototype.draw=function(a){this.element_||(this.element_=document.createElementNS(Blockly.SVG_NS,"rect"),a.appendChild(this.element_)),this.element_.setAttribute("x",-this.width_/2),this.element_.setAttribute("y",-this.height_/2),this.element_.setAttribute("width",this.width_),this.element_.setAttribute("height",this.height_),d.prototype.draw.apply(this,arguments)}},{"./evalImage":"/home/ubuntu/staging/apps/build/js/eval/evalImage.js","./evalUtils":"/home/ubuntu/staging/apps/build/js/eval/evalUtils.js"}],"/home/ubuntu/staging/apps/build/js/eval/evalPolygon.js":[function(a,b,c){"use strict";var d=a("./evalImage"),e=a("./evalUtils"),f=function(a,b,c,f){e.ensureNumber(a),e.ensureNumber(b),e.ensureStyle(c),e.ensureColor(f),d.apply(this,[c,f]),this.radius_=b/(2*Math.sin(Math.PI/a)),this.pointCount_=a,this.element_=null};f.inherits(d),b.exports=f,f.prototype.draw=function(a){this.element_||(this.element_=document.createElementNS(Blockly.SVG_NS,"polygon"),a.appendChild(this.element_));for(var b=[],c=this.radius_,e=2*Math.PI/this.pointCount_,f=1;f<=this.pointCount_;f++)b.push(c*Math.cos(f*e)+","+c*Math.sin(f*e));this.element_.setAttribute("points",b.join(" ")),d.prototype.draw.apply(this,arguments)}},{"./evalImage":"/home/ubuntu/staging/apps/build/js/eval/evalImage.js","./evalUtils":"/home/ubuntu/staging/apps/build/js/eval/evalUtils.js"}],"/home/ubuntu/staging/apps/build/js/eval/evalMulti.js":[function(a,b,c){"use strict";var d=a("./evalImage"),e=a("./evalUtils"),f=function(a,b){e.ensureType(a,d),e.ensureType(b,d),d.apply(this),this.image1_=a,this.image2_=b;var c,f;c=this.image1_.x_-this.x_,f=this.image1_.y_-this.y_,this.image1_.updatePosition(c,f),c=this.image2_.x_-this.x_,f=this.image2_.y_-this.y_,this.image2_.updatePosition(c,f),this.element_=null};f.inherits(d),b.exports=f,f.prototype.draw=function(a){if(!this.element_){this.element_=document.createElementNS(Blockly.SVG_NS,"g"),a.appendChild(this.element_)}this.image2_.draw(this.element_),this.image1_.draw(this.element_),d.prototype.draw.apply(this,arguments)},d.prototype.getChildren=function(){return[this.image1_,this.image2_]}},{"./evalImage":"/home/ubuntu/staging/apps/build/js/eval/evalImage.js","./evalUtils":"/home/ubuntu/staging/apps/build/js/eval/evalUtils.js"}],"/home/ubuntu/staging/apps/build/js/eval/evalEllipse.js":[function(a,b,c){"use strict";var d=a("./evalImage"),e=a("./evalUtils"),f=function(a,b,c,f){e.ensureNumber(a),e.ensureNumber(b),e.ensureStyle(c),e.ensureColor(f),d.apply(this,[c,f]),this.width_=a,this.height_=b,this.element_=null};f.inherits(d),b.exports=f,f.prototype.draw=function(a){this.element_||(this.element_=document.createElementNS(Blockly.SVG_NS,"ellipse"),a.appendChild(this.element_)),this.element_.setAttribute("cx",0),this.element_.setAttribute("cy",0),this.element_.setAttribute("rx",this.width_/2),this.element_.setAttribute("ry",this.height_/2),d.prototype.draw.apply(this,arguments)}},{"./evalImage":"/home/ubuntu/staging/apps/build/js/eval/evalImage.js","./evalUtils":"/home/ubuntu/staging/apps/build/js/eval/evalUtils.js"}],"/home/ubuntu/staging/apps/build/js/eval/evalCircle.js":[function(a,b,c){"use strict";var d=a("./evalImage"),e=a("./evalUtils"),f=function(a,b,c){e.ensureNumber(a),e.ensureStyle(b),e.ensureColor(c),d.apply(this,[b,c]),this.radius_=a,this.element_=null};f.inherits(d),b.exports=f,f.prototype.draw=function(a){this.element_||(this.element_=document.createElementNS(Blockly.SVG_NS,"circle"),a.appendChild(this.element_)),this.element_.setAttribute("cx",0),this.element_.setAttribute("cy",0),this.element_.setAttribute("r",this.radius_),d.prototype.draw.apply(this,arguments)},f.prototype.rotate=function(){}},{"./evalImage":"/home/ubuntu/staging/apps/build/js/eval/evalImage.js","./evalUtils":"/home/ubuntu/staging/apps/build/js/eval/evalUtils.js"}],"/home/ubuntu/staging/apps/build/js/eval/evalImage.js":[function(a,b,c){"use strict";var d=a("./evalUtils"),e=function(a,b){this.x_=200,this.y_=200,this.rotation_=0,this.scaleX_=1,this.scaleY=1,this.style_=a,this.color_=b};b.exports=e,e.prototype.updatePosition=function(a,b){this.x_=a,this.y_=b},e.prototype.draw=function(a){this.style_&&this.color_&&(this.element_.setAttribute("fill",d.getFill(this.style_,this.color_)),this.element_.setAttribute("stroke",d.getStroke(this.style_,this.color_)),this.element_.setAttribute("opacity",d.getOpacity(this.style_,this.color_)));var b="";b+=" translate("+this.x_+" "+this.y_+")",(1!==this.scaleX_||1!==this.scaleY)&&(b+=" scale("+this.scaleX_+" "+this.scaleY_+")"),0!==this.rotation_&&(b+=" rotate("+this.rotation_+")"),""===b?this.element_.removeAttribute("transform"):this.element_.setAttribute("transform",b)},e.prototype.place=function(a,b){this.x_=a,this.y_=b},e.prototype.rotate=function(a){this.rotation_+=a},e.prototype.scale=function(a,b){this.scaleX_=a,this.scaleY_=b},e.prototype.getChildren=function(){return[]}},{"./evalUtils":"/home/ubuntu/staging/apps/build/js/eval/evalUtils.js"}],"/home/ubuntu/staging/apps/build/js/eval/evalUtils.js":[function(a,b,c){"use strict";var d=a("./evalError"),e=a("../utils"),f=e.getLodash();b.exports.ensureString=function(a){return b.exports.ensureType(a,"string")},b.exports.ensureNumber=function(a){return b.exports.ensureType(a,"number")},b.exports.ensureStyle=function(a){if("%"===a.slice(-1)){var c=b.exports.getOpacity(a);if(c>=0&&1>=c)return}if(!f.contains(["outline","solid"],a))throw new d(d.Type.BadStyle,a)},b.exports.ensureColor=function(a){var b=document.createElement("div");if(b.style.color=a,!b.style.color)throw new d(d.Type.BadColor,a)},b.exports.ensureType=function(a,b){if("string"==typeof b){if(typeof a!==b)throw new Error("expected type: "+b+"\ngot type: "+typeof a)}else if(!(a instanceof b))throw new Error("unexpected object")},b.exports.getFill=function(a,b){return"outline"===a?"none":b},b.exports.getStroke=function(a,b){return"outline"===a?b:"none"},b.exports.getOpacity=function(a){var b=1;return"%"===a.slice(-1)&&(b=parseInt(a.slice(0,-1),10)/100),b},b.exports.cartesianToPixel=function(a){return 400-a}},{"../utils":"/home/ubuntu/staging/apps/build/js/utils.js","./evalError":"/home/ubuntu/staging/apps/build/js/eval/evalError.js"}],"/home/ubuntu/staging/apps/build/js/eval/evalError.js":[function(a,b,c){"use strict";var d=a("./locale"),e=function f(a,b){switch(this.type=a,a){case f.Type.BadStyle:this.feedbackMessage=d.badStyleStringError({val:b});break;case f.Type.BadColor:this.feedbackMessage=d.badColorStringError({val:b});break;case f.Type.InfiniteRecursion:
this.feedbackMessage=d.infiniteRecursionError();break;case f.Type.UserCodeException:this.feedbackMessage=d.userCodeException();break;default:this.feedbackMessag=""}};b.exports=e,e.Type={BadStyle:0,BadColor:1,InfiniteRecursion:2,UserCodeException:3}},{"./locale":"/home/ubuntu/staging/apps/build/js/eval/locale.js"}],"/home/ubuntu/staging/apps/build/js/eval/locale.js":[function(a,b,c){"use strict";b.exports=window.blockly.eval_locale},{}]},{},["/home/ubuntu/staging/apps/build/js/eval/main.js"]);