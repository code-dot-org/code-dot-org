require=function a(b,c,d){function e(g,h){if(!c[g]){if(!b[g]){var i="function"==typeof require&&require;if(!h&&i)return i(g,!0);if(f)return f(g,!0);var j=new Error("Cannot find module '"+g+"'");throw j.code="MODULE_NOT_FOUND",j}var k=c[g]={exports:{}};b[g][0].call(k.exports,function(a){var c=b[g][1][a];return e(c?c:a)},k,k.exports,a,b,c,d)}return c[g].exports}for(var f="function"==typeof require&&require,g=0;g<d.length;g++)e(d[g]);return e}({286:[function(a,b,c){(function(b){var c=a("../appMain");window.Studio=a("./studio"),"undefined"!=typeof b&&(b.Studio=window.Studio);var d=a("./blocks"),e=a("./levels"),f=a("./skins");window.studioMain=function(a){a.skinsModule=f,a.blocksModule=d,c(window.Studio,e,a)}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"../appMain":9,"./blocks":277,"./levels":284,"./skins":290,"./studio":291}],291:[function(a,b,c){"use strict";function d(){switch(la.map=ma.map,la.timeoutFailureTick=ma.timeoutFailureTick||1/0,la.slowJsExecutionFactor=ma.slowJsExecutionFactor||1,la.ticksBeforeFaceSouth=la.slowJsExecutionFactor+mb,la.minWorkspaceHeight=ma.minWorkspaceHeight,la.softButtons_=ma.softButtons||{},la.protagonistSpriteIndex=ma.protagonistSpriteIndex||ma.protaganistSpriteIndex,ma.customGameType){case"Big Game":la.customLogic=new V(la);break;case"Rocket Height":la.customLogic=new W(la);break;case"Sam the Bat":la.customLogic=new X(la);break;case"Ninja Cat":la.customLogic=new V(la,{staticPlayer:!0})}P.registerCustomGameLogic(la.customLogic),ma.avatarList?la.startAvatars=ma.avatarList.slice():la.startAvatars=e(na.avatarList,ma.firstSpriteIndex);for(var a in ma.scale)la.scale[a]=ma.scale[a];la.ROWS=la.map.length,la.COLS=la.map[0].length,la.SQUARE_SIZE=50,la.HALF_SQUARE=la.SQUARE_SIZE/2,la.MARKER_HEIGHT=ma.markerHeight||100,la.MARKER_WIDTH=ma.markerWidth||100,la.MAZE_WIDTH=la.SQUARE_SIZE*la.COLS,la.MAZE_HEIGHT=la.SQUARE_SIZE*la.ROWS,I.MAZE_WIDTH=la.MAZE_WIDTH,I.MAZE_HEIGHT=la.MAZE_HEIGHT}function e(a,b){return b=b||0,_.flatten([a.slice(b),a.slice(0,b)])}function f(a,b,c,d,e,f){return Math.abs(a-b)<=c&&Math.abs(d-e)<=f}function g(a,b,c,d,e,f){return Math.abs(a-b)<c&&Math.abs(d-e)<f}function h(a,b){la.eventHandlers.forEach(function(c){if(I.isUsingBlockly()){if(c.name===a&&(b||0===c.cmdQueue.length)){la.currentCmdQueue=c.cmdQueue;try{c.func(I,O,la.Globals)}catch(d){}la.currentCmdQueue=null}}else c.name===a&&la.JSInterpreter.queueEvent(c.func)})}function i(a){for(var b=a.length-1;b>=0;b--)a[b].moveToNextPosition(),a[b].outOfBounds()?(a[b].removeElement(),a.splice(b,1)):a[b].display()}function j(a,b,c){var d=c?la.sprite[a].height:la.sprite[a].width,e=c?la.sprite[b].height:la.sprite[b].width;return L.SPRITE_COLLIDE_DISTANCE_SCALING*(d+e)/2}function k(a,b,c){var d=c?la.sprite[a].height:la.sprite[a].width,e=c?b.height:b.width;return L.SPRITE_COLLIDE_DISTANCE_SCALING*(d+e)/2}function l(a,b,c){var d,e=c?a.height:a.width;return d="left"===b||"right"===b?c?la.MAZE_HEIGHT:0:c?0:la.MAZE_WIDTH,(e+d)/2}function m(a,b,c,d,e){for(var g=d.length-1;g>=0;g--){var h=d[g],i=h.getNextPosition();f(b,i.x,k(a,h,!1),c,i.y,k(a,h,!0))?h.startCollision(a)&&(la.currentEventParams={eventObject:h},D(a,h.className,!0),la.currentEventParams=null,e&&(h.removeElement(),d.splice(g,1))):h.endCollision(a)}}function n(a,b,c,d){for(var e=0;e<ra.length&&ma.edgeCollisions;e++){var g,h,i=ra[e];switch(i){case"top":g=la.MAZE_WIDTH/2,h=0;break;case"left":g=0,h=la.MAZE_HEIGHT/2;break;case"bottom":g=la.MAZE_WIDTH/2,h=la.MAZE_HEIGHT;break;case"right":g=la.MAZE_WIDTH,h=la.MAZE_HEIGHT/2}f(b,g,l(a,i,!1),c,h,l(a,i,!0))?a.startCollision(i)&&d(i):a.endCollision(i)}}function o(a){return function(b){D(a,b)}}function p(){r();for(var a=0;a<la.spriteCount;a++){var b=la.sprite[a];if(b.visible){for(var c=b.width/2,d=b.height/2,e=Ta(a,!1,!1),g=Ta(a,!0,!1),h=e+c,i=g+d,k=0;k<la.spriteCount;k++)if(a!=k&&la.sprite[k].visible){var l=Ta(k,!1,!1)+la.sprite[k].width/2,p=Ta(k,!0,!1)+la.sprite[k].height/2;f(h,l,j(a,k,!1),i,p,j(a,k,!0))?la.collideSpriteWith(a,k):b.endCollision(k),G(a,k)}for(m(a,h,i,la.projectiles),m(a,h,i,la.items,ma.removeItemsWhenActorCollides),n(b,h,i,o(a)),ma.wallMapCollisions&&(la.willSpriteTouchWall(b,e,g)?(ma.blockMovingIntoWalls&&(Sa(a,!1),Sa(a,!0)),la.collideSpriteWith(a,"wall")):b.endCollision("wall")),G(a,"wall"),k=0;k<ra.length;k++)G(a,ra[k]);for(k=0;k<na.ProjectileClassNames.length;k++)G(a,na.ProjectileClassNames[k]);for(k=0;k<na.ItemClassNames.length;k++)G(a,na.ItemClassNames[k])}}}function q(a){return function(b){ma.blockMovingIntoWalls&&a.bounce(),la.currentEventParams={eventObject:a},E(a.className,b,!0),la.currentEventParams=null}}function r(){for(var a=0;a<la.items.length;a++){var b=la.items[a],c=b.getNextPosition();ma.wallMapCollisions&&(la.willCollidableTouchWall(b,c.x,c.y)?(ma.blockMovingIntoWalls&&b.bounce(),la.currentEventParams={eventObject:b},la.collideItemWith(b,"wall",!0),la.currentEventParams=null):b.endCollision("wall")),ma.edgeCollisions&&n(b,c.x,c.y,q(b)),F(b.className,"wall");for(var d=0;d<ra.length;d++)F(b.className,ra[d])}}function s(a){for(var b=0;b<a.length;b++)a[b].removeElement();a.length=0}function t(a,b,c){var d=b+": ";void 0!==c&&(d+="Line: "+c+": "),d+=a,console.log&&console.log(d)}function u(a,b){!b&&a instanceof SyntaxError&&(b=a.loc.line,N.selectEditorRowCol(I.editor,b-1,a.loc.column)),!b&&la.JSInterpreter&&(b=1+la.JSInterpreter.getNearestUserCodeLine()),t(String(a),gb.ERROR,b),la.executionError=a,ma.freePlay||la.onPuzzleComplete()}function v(a,b){var c=la.sprite[a],d=0,e=new Date,f=e-la.startTime;return b&&b.walkDirection?ib[c.displayDir]:b&&b.walkFrame&&c.timePerFrame?Math.floor(f/c.timePerFrame)%c.frameCounts.walk:8===c.frameCounts.turns&&c.displayDir!==da.SOUTH?c.frameCounts.normal+c.frameCounts.animation+1+hb[c.displayDir]:7===c.frameCounts.turns&&c.displayDir!==da.SOUTH?c.frameCounts.normal+c.frameCounts.animation+hb[c.displayDir]:(1===c.frameCounts.animation&&la.tickCount&&1===Math.round((la.tickCount+a*kb)/jb)%lb&&(d=c.frameCounts.normal),c.frameCounts.normal>1&&c.timePerFrame&&(d=Math.floor(f/c.timePerFrame)%c.frameCounts.normal),!d&&c.emotion!==ga.NORMAL&&c.frameCounts.emotions>0&&(d=c.frameCounts.normal+c.frameCounts.animation+c.frameCounts.turns+(c.emotion-1)),d)}function w(a){var b=la.sprite[a];return b.frameCounts.normal+b.frameCounts.animation+b.frameCounts.turns+b.frameCounts.emotions}function x(a,b,c){return/.gif$/.test(na[a])?1:b&&b[a]?b[a]:c}function y(a,b,c){return a+"_"+b+"_"+c}function z(a){return/^\d*$/.test(a)}function A(a){return-1!==ra.indexOf(a)}function B(a){return-1!==na.ProjectileClassNames.indexOf(a)}function C(a){return-1!==na.ItemClassNames.indexOf(a)}function D(a,b,c){var d="whenSpriteCollided-"+a+"-";h(d+b,c),h(d+"anything",c),z(b)?h(d+"any_actor",c):A(b)?h(d+"any_edge",c):B(b)?h(d+"any_projectile",c):C(b)&&h(d+"any_item",c)}function E(a,b,c){var d="whenItemCollided-"+a+"-";h(d+b,c),A(b)&&h(d+"any_edge",c)}function F(a,b){var c="whenItemCollided-"+a+"-";la.executeQueue(c+b),A(b)&&la.executeQueue(c+"any_edge")}function G(a,b){var c="whenSpriteCollided-"+a+"-";la.executeQueue(c+b),la.executeQueue(c+"any_actor"),la.executeQueue(c+"anything"),A(b)?la.executeQueue(c+"any_edge"):B(b)?la.executeQueue(c+"any_projectile"):C(b)&&la.executeQueue(c+"any_item")}function H(a,b){var c=function(b){var c=b?a.height:a.width,d=b?la.MARKER_HEIGHT:la.MARKER_WIDTH;return L.FINISH_COLLIDE_DISTANCE_SCALING*(c+d)/2},d=a.x+a.width/2,e=a.y+a.height/2,g=b.x+la.MARKER_WIDTH/2,h=b.y+la.MARKER_HEIGHT/2;return f(d,g,c(!1),e,h,c(!0))}var I=a("../StudioApp").singleton,J=a("../locale"),K=a("./locale"),L=(a("../skins"),a("./constants")),M=a("../constants"),N=a("../codegen"),O=a("./api"),P=a("./blocks"),Q=a("../templates/page.html.ejs"),R=a("../dom"),S=a("./collidable"),T=a("./projectile"),U=a("./Item"),V=a("./bigGameLogic"),W=a("./rocketHeightLogic"),X=a("./samBatLogic"),Y=a("../xml").parseElement,Z=a("../utils"),_=(a("../dropletUtils"),Z.getLodash()),aa=a("./dropletConfig"),ba=Z.getHammer(),ca=a("../JSInterpreter");"undefined"!=typeof SVGElement&&(a("../canvg/rgbcolor.js"),a("../canvg/StackBlur.js"),a("../canvg/canvg.js"),a("../canvg/svg_todataurl"));var da=L.Direction,ea=L.NextTurn,fa=L.SquareType,ga=L.Emotions,ha=M.KeyCodes,ia=I.ResultType,ja=I.TestResults,ka="http://www.w3.org/2000/svg",la=b.exports;la.keyState={},la.gesturesObserved={},la.btnState={};var ma,na,oa={UP:0,DOWN:1},pa={LEFT:"leftButton",UP:"upButton",RIGHT:"rightButton",DOWN:"downButton"},qa=25,ra=["top","left","bottom","right"];I.setCheckForEmptyBlocks(!0),la.BLOCK_X_COORDINATE=20,la.BLOCK_Y_COORDINATE=20;var sa={whenRun:"whenGameStarts",whenDown:"when-down",whenUp:"when-up",whenLeft:"when-left",whenRight:"when-right",whenTouchItem:"whenSpriteCollided-"+(la.protagonistSpriteIndex||0)+"-any_item"};la.scale={snapRadius:1,stepSpeed:33};var ta=5e3,ua=60,va=100,wa=20,xa=24,ya=7,za=5,Aa=15,Ba=360,Ca=za+Aa+ya*xa,Da=20,Ea=50,Fa=5,Ga=10,Ha=20,Ia=4,Ja=5,Ka=180,La=20+Ia*Ha,Ma=60,Na=500,Oa={text:K.shareStudioTwitter(),hashtag:"StudioCode"},Pa=function(){var a,b=document.getElementById("svgStudio");b.setAttribute("width",la.MAZE_WIDTH),b.setAttribute("height",la.MAZE_HEIGHT);var c=new ba(b);c.on("tap",la.onSvgClicked),c.on("drag",la.onSvgDrag);var d=document.getElementById("visualizationColumn");if(d.style.width=la.MAZE_WIDTH+"px",na.background){var e=document.createElementNS(ka,"image");e.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",na.background),e.setAttribute("id","background"),e.setAttribute("height",la.MAZE_HEIGHT),e.setAttribute("width",la.MAZE_WIDTH),e.setAttribute("x",0),e.setAttribute("y",0),b.appendChild(e)}if(ma.coordinateGridBackground&&I.createCoordinateGridBackground({svg:"svgStudio",origin:0,firstLabel:100,lastLabel:300,increment:100}),ma.wallMapCollisions&&la.drawMapTiles(b),la.spriteStart_){for(a=0;a<la.spriteCount;a++){var f=document.createElementNS(ka,"clipPath");f.setAttribute("id","spriteClipPath"+a);var g=document.createElementNS(ka,"rect");g.setAttribute("id","spriteClipRect"+a),f.appendChild(g),b.appendChild(f);var h=document.createElementNS(ka,"image");h.setAttribute("id","sprite"+a),h.setAttribute("clip-path","url(#spriteClipPath"+a+")"),b.appendChild(h);var i=document.createElementNS(ka,"image");i.setAttribute("id","spriteWalk"+a),i.setAttribute("clip-path","url(#spriteWalkClipPath"+a+")"),b.appendChild(i);var j=document.createElementNS(ka,"clipPath");j.setAttribute("id","spriteWalkClipPath"+a);var k=document.createElementNS(ka,"rect");k.setAttribute("id","spriteWalkClipRect"+a),j.appendChild(k),b.appendChild(j),R.addMouseDownTouchEvent(h,Qa(this,la.onSpriteClicked,a))}for(a=0;a<la.spriteCount;a++){var l=document.createElementNS(ka,"g");l.setAttribute("id","speechBubble"+a),l.setAttribute("visibility","hidden");var m=document.createElementNS(ka,"path");m.setAttribute("id","speechBubblePath"+a),m.setAttribute("class","studio-speech-bubble-path");var n=document.createElementNS(ka,"text");n.setAttribute("id","speechBubbleText"+a),n.setAttribute("class","studio-speech-bubble"),l.appendChild(m),l.appendChild(n),b.appendChild(l)}}if(la.spriteGoals_)for(a=0;a<la.spriteGoals_.length;a++){var o=document.createElementNS(ka,"clipPath");o.setAttribute("id","finishClipPath"+a);var p=document.createElementNS(ka,"rect");p.setAttribute("id","finishClipRect"+a),p.setAttribute("width",la.MARKER_WIDTH),p.setAttribute("height",la.MARKER_HEIGHT),o.appendChild(p),b.appendChild(o);var q=document.createElementNS(ka,"image");q.setAttribute("id","spriteFinish"+a),q.setAttribute("height",la.MARKER_HEIGHT),q.setAttribute("width",ma.goalOverride&&ma.goalOverride.imageWidth||la.MARKER_WIDTH),q.setAttribute("clip-path","url(#finishClipPath"+a+")"),b.appendChild(q)}var r=document.createElementNS(ka,"text");r.setAttribute("id","score"),r.setAttribute("class","studio-score"),r.setAttribute("x",la.MAZE_WIDTH/2),r.setAttribute("y",Ma),r.appendChild(document.createTextNode("")),r.setAttribute("visibility","hidden"),b.appendChild(r);var s=document.createElementNS(ka,"text");s.setAttribute("id","titleScreenTitle"),s.setAttribute("class","studio-ts-title"),s.setAttribute("x",la.MAZE_WIDTH/2),s.setAttribute("y",ua),s.appendChild(document.createTextNode("")),s.setAttribute("visibility","hidden"),b.appendChild(s);var t=document.createElementNS(ka,"g"),u=(la.MAZE_WIDTH-Ba)/2;t.setAttribute("id","titleScreenTextGroup"),t.setAttribute("x",u),t.setAttribute("y",va),t.setAttribute("transform","translate("+u+","+va+")"),t.setAttribute("visibility","hidden");var v=document.createElementNS(ka,"rect");v.setAttribute("id","titleScreenTextRect"),v.setAttribute("x",0),v.setAttribute("y",0),v.setAttribute("width",Ba),v.setAttribute("class","studio-ts-text-rect");var w=document.createElementNS(ka,"text");w.setAttribute("id","titleScreenText"),w.setAttribute("class","studio-ts-text"),w.setAttribute("x",Ba/2),w.setAttribute("y",0),w.appendChild(document.createTextNode("")),t.appendChild(v),t.appendChild(w),b.appendChild(t)},Qa=function(a,b,c){return function(){var d=Array.prototype.slice.apply(arguments).concat(c);b.apply(a,d)}},Ra=function(a,b,c){var d=0;return la.eventHandlers.forEach(function(e){var f=e.cmdQueue[0];if(f&&"moveDistance"===f.name&&f.opts.spriteIndex===a){var g,h=Math.min(f.opts.queuedDistance,la.sprite[f.opts.spriteIndex].speed);switch(f.opts.dir){case da.NORTH:g=b?-1:0;break;case da.WEST:g=b?0:-1;break;case da.SOUTH:g=b?1:0;break;case da.EAST:g=b?0:1}c&&0!==g&&(f.opts.queuedDistance-=h,"0.00"===Math.abs(f.opts.queuedDistance).toFixed(2)&&(f.opts.queuedDistance=0)),d+=h*g}}),d},Sa=function(a,b){la.eventHandlers.forEach(function(c){var d=c.cmdQueue[0];if(d&&"moveDistance"===d.name&&d.opts.spriteIndex===a){var e=d.opts.dir;!b||e!==da.NORTH&&e!==da.SOUTH?b||e!==da.EAST&&e!==da.WEST||(d.opts.queuedDistance=0):d.opts.queuedDistance=0}})},Ta=function(a,b,c){var d=b?la.sprite[a].y:la.sprite[a].x;return d+Ra(a,b,c)},Ua=function(a){var b=la.sprite[a],c=b.x,d=b.y,e=Ta(a,!1,!0),f=Ta(a,!0,!0);if(ma.allowSpritesOutsidePlayspace)b.x=e,b.y=f;else{var g=Math.min(la.MAZE_WIDTH-b.width,Math.max(0,e));e!=g&&Sa(a,!1),b.x=g;var h=Math.min(la.MAZE_HEIGHT-b.height,Math.max(0,f));f!=h&&Sa(a,!0),b.y=h}(c!==b.x||d!==b.y)&&(b.lastMove=la.tickCount)},Va=function(a){for(;a.svgText.firstChild;)a.svgText.removeChild(a.svgText.firstChild);var b=a.text.toString().split(" "),c=document.createElementNS("http://www.w3.org/2000/svg","tspan");c.setAttribute("x",a.width/2),c.setAttribute("dy",a.lineHeight+a.topMargin);var d=document.createTextNode(b[0]);c.appendChild(d),a.svgText.appendChild(c);for(var e=1,f=1;f<b.length;f++){var g=c.firstChild.data.length;if(c.firstChild.data+=" "+b[f],c.getComputedTextLength&&c.getComputedTextLength()>a.width-2*a.sideMargin){if(c.firstChild.data=c.firstChild.data.slice(0,g),a.maxLines===e)return a.fullHeight;c=document.createElementNS("http://www.w3.org/2000/svg","tspan"),c.setAttribute("x",a.width/2),c.setAttribute("dy",a.lineHeight),d=document.createTextNode(b[f]),c.appendChild(d),a.svgText.appendChild(c),e++}}var h=a.maxLines-Math.max(1,e);return a.fullHeight-h*a.lineHeight};la.initAutoHandlers=function(a){for(var b in a){var c=la.JSInterpreter.findGlobalFunction(b);c&&ab(la.eventHandlers,a[b],c)}},la.callApiCode=function(a,b){ab(la.eventHandlers,a,b),h(a),la.executeQueue(a)},la.onTick=function(){la.tickCount++;var a=!1;la.customLogic&&la.customLogic.onTick(),1===la.tickCount&&h("whenGameStarts"),la.executeQueue("whenGameStarts"),la.JSInterpreter&&(a=0!==(la.tickCount-1)%la.slowJsExecutionFactor),h("repeatForever"),la.executeQueue("repeatForever");for(var b=0;b<la.spriteCount;b++)la.executeQueue("whenSpriteClicked-"+b);if(!a){for(var c in ha)if(la.keyState[ha[c]]&&"keydown"===la.keyState[ha[c]])switch(ha[c]){case ha.LEFT:h("when-left");break;case ha.UP:h("when-up");break;case ha.RIGHT:h("when-right");break;case ha.DOWN:h("when-down")}for(var d in pa)if(la.btnState[pa[d]]&&la.btnState[pa[d]]===oa.DOWN)switch(pa[d]){case pa.LEFT:h("when-left");break;case pa.UP:h("when-up");break;case pa.RIGHT:h("when-right");break;case pa.DOWN:h("when-down")}for(var e in la.gesturesObserved){switch(e){case"left":h("when-left");break;case"up":h("when-up");break;case"right":h("when-right");break;case"down":h("when-down")}0===la.gesturesObserved[e]--&&delete la.gesturesObserved[e]}la.executeQueue("when-left"),la.executeQueue("when-up"),la.executeQueue("when-right"),la.executeQueue("when-down")}for(p(),la.JSInterpreter&&!a&&la.JSInterpreter.executeInterpreter(1===la.tickCount),b=0;b<la.spriteCount;b++){a||Ua(b);var f=!0;la.tickCount-la.sprite[b].lastMove>la.ticksBeforeFaceSouth&&(la.sprite[b].dir=da.SOUTH,f=!1),la.sprite[b].lastMove===1/0&&(f=!1),la.displaySprite(b,f)}i(la.projectiles),i(la.items),xb()&&la.onPuzzleComplete()},la.willSpriteTouchWall=function(a,b,c){var d=b+a.width/2,e=c+a.height/2;return la.willCollidableTouchWall(a,d,e)},la.willCollidableTouchWall=function(a,b,c){for(var d=Math.floor(b)+1,e=Math.floor(c)+1,f=Math.floor(b/la.SQUARE_SIZE),h=Math.floor(c/la.SQUARE_SIZE),i=Math.max(0,f-d);i<Math.min(la.COLS,f+d);i++)for(var j=Math.max(0,h-e);j<Math.min(la.ROWS,h+e);j++)if(la.map[j][i]&fa.WALL&&g(b,(i+.5)*la.SQUARE_SIZE,la.SQUARE_SIZE/2+a.width/2,c,(j+.5)*la.SQUARE_SIZE,la.SQUARE_SIZE/2+a.height/2))return!0;return!1},la.onSvgDrag=function(a){la.tickCount>0&&(la.gesturesObserved[a.gesture.direction]=Math.round(a.gesture.distance/qa),a.gesture.preventDefault())},la.onKey=function(a){la.keyState[a.keyCode]=a.type,la.tickCount>0&&a.keyCode>=ha.LEFT&&a.keyCode<=ha.DOWN&&a.preventDefault()},la.onArrowButtonDown=function(a,b){la.btnState[b]=oa.DOWN,a.preventDefault()},la.onSpriteClicked=function(a,b){la.tickCount>0&&h("whenSpriteClicked-"+b),a.preventDefault()},la.onSvgClicked=function(a){la.tickCount>0&&la.eventHandlers.forEach(function(a){var b=a.cmdQueue[0];b&&b.opts.waitForClick&&!b.opts.complete&&(b.opts.waitCallback&&b.opts.waitCallback(),b.opts.complete=!0)}),a.preventDefault()},la.onArrowButtonUp=function(a,b){la.btnState[b]=oa.UP},la.onMouseUp=function(a){la.btnState={}},la.initSprites=function(){la.spriteCount=0,la.sprite=[],la.startTime=null,la.spriteGoals_=[];for(var a=0;a<la.ROWS;a++)for(var b=0;b<la.COLS;b++)la.map[a][b]&fa.SPRITEFINISH?la.spriteGoals_.push({x:b*la.SQUARE_SIZE,y:a*la.SQUARE_SIZE,finished:!1}):la.map[a][b]&fa.SPRITESTART&&(0===la.spriteCount&&(la.spriteStart_=[]),la.spriteStart_[la.spriteCount]={x:b*la.SQUARE_SIZE,y:a*la.SQUARE_SIZE},la.spriteCount++);I.isUsingBlockly()&&(P.setSpriteCount(Blockly,la.spriteCount),P.setStartAvatars(la.startAvatars),ma.projectileCollisions&&P.enableProjectileCollisions(Blockly),ma.edgeCollisions&&P.enableEdgeCollisions(Blockly),ma.allowSpritesOutsidePlayspace&&P.enableSpritesOutsidePlayspace(Blockly))},la.initReadonly=function(a){na=a.skin,ma=a.level,d(),a.appMsg=K,la.initSprites(),I.initReadonly(a)};var Wa=function(a){for(var b,c=Y(a.level.startBlocks),d=0,e=I.sortBlocksByVisibility(c.childNodes),f=0;e&&f<e.length;f++)b=e[f],1!==b.nodeType||b.getAttribute("y")||d++;if(d){var g=0,h=(a.level.minWorkspaceHeight||800)-la.BLOCK_Y_COORDINATE,i=h/d;for(f=0,b;e&&f<e.length;f++)b=e[f],1!==b.nodeType||b.getAttribute("y")||(b.setAttribute("x",b.getAttribute("x")||la.BLOCK_X_COORDINATE),b.setAttribute("y",la.BLOCK_Y_COORDINATE+i*g),g+=1);a.level.startBlocks=Blockly.Xml.domToText(c)}};la.init=function(b){I.reset=this.reset.bind(this),I.runButtonClick=this.runButtonClick.bind(this),la.projectiles=[],la.items=[],la.eventHandlers=[],la.perExecutionTimeouts=[],la.clearEventHandlersKillTickLoop(),na=b.skin,ma=b.level;var c=!!ma.useContractEditor;b.grayOutUndeletableBlocks=c,d(),la.customLogic&&(na.staticAvatar=null,na.smallStaticAvatar=null,na.failureAvatar=null,na.winAvatar=null),window.addEventListener("keydown",la.onKey,!1),window.addEventListener("keyup",la.onKey,!1);var e=!ma.isProjectLevel,f=_.isEmpty(ma.softButtons),g=a("./controls.html.ejs")({assetUrl:I.assetUrl,finishButton:f&&e}),h=a("./extraControlRows.html.ejs")({assetUrl:I.assetUrl,finishButton:!f&&e});b.html=Q({assetUrl:I.assetUrl,data:{localeDirection:I.localeDirection(),visualization:a("./visualization.html.ejs")(),controls:g,extraControlRows:h,blockUsed:void 0,idealBlockNumber:void 0,editCode:ma.editCode,blockCounterClass:"block-counter-default",inputOutputTable:ma.inputOutputTable,readonlyWorkspace:b.readonlyWorkspace}}),b.loadAudio=function(){I.loadAudio(na.winSound,"win"),I.loadAudio(na.startSound,"start"),I.loadAudio(na.failureSound,"failure"),I.loadAudio(na.rubberSound,"rubber"),I.loadAudio(na.crunchSound,"crunch"),I.loadAudio(na.flagSound,"flag"),I.loadAudio(na.winPointSound,"winpoint"),I.loadAudio(na.winPoint2Sound,"winpoint2"),I.loadAudio(na.losePointSound,"losepoint"),I.loadAudio(na.losePoint2Sound,"losepoint2"),I.loadAudio(na.goal1Sound,"goal1"),I.loadAudio(na.goal2Sound,"goal2"),I.loadAudio(na.woodSound,"wood"),I.loadAudio(na.retroSound,"retro"),I.loadAudio(na.slapSound,"slap"),I.loadAudio(na.hitSound,"hit")},b.afterInject=function(){for(var a in pa)R.addMouseUpTouchEvent(document.getElementById(pa[a]),Qa(this,la.onArrowButtonUp,pa[a])),R.addMouseDownTouchEvent(document.getElementById(pa[a]),Qa(this,la.onArrowButtonDown,pa[a]));document.addEventListener("mouseup",la.onMouseUp,!1),I.isUsingBlockly()&&(Blockly.HSV_SATURATION=.6,Blockly.SNAP_RADIUS*=la.scale.snapRadius,Blockly.contractEditor&&Blockly.contractEditor.registerTestHandler(la.getStudioExampleFailure)),Pa()},I.isUsingBlockly()&&"toolbox_blocks"!=b.level.edit_blocks&&Wa(b),b.twitter=Oa,b.makeYourOwn=b.share,b.makeString=K.makeYourOwn(),b.makeUrl="http://code.org/studio",b.makeImage=I.assetUrl("media/promo.png"),b.enableShowCode=Z.valueOr(I.editCode,!1),b.varsInGlobals=!0,b.dropletConfig=aa,b.unusedConfig=[];for(var i in sa)b.unusedConfig.push(i);b.appMsg=K,la.initSprites(),I.init(b);var j=document.getElementById("finishButton");j&&R.addClickTouchEvent(j,la.onPuzzleComplete),b.skin.preloadAssets&&($a(),Za(),Ya())};var Xa=function(a){var b=new Image;b.src=a},Ya=function(){if(I.isUsingBlockly())for(var a=na.backgroundChoicesK1,b=0;b<a.length;b++)Xa(a[b][0])},Za=function(){for(var a=0;a<na.ProjectileClassNames.length;a++)Xa(na[na.ProjectileClassNames[a]]);for(a=0;a<na.ItemClassNames.length;a++)Xa(na[na.ItemClassNames[a]])},$a=function(){for(var a=0;a<na.avatarList.length;a++)Xa(na[na.avatarList[a]].sprite)};la.clearEventHandlersKillTickLoop=function(){la.eventHandlers.forEach(function(a){var b=a.cmdQueue[0];b&&b.opts.waitTimeout&&!b.opts.complete&&window.clearTimeout(b.opts.waitTimeout)}),la.eventHandlers=[],la.perExecutionTimeouts.forEach(function(a){clearInterval(a)}),la.perExecutionTimeouts=[],la.tickCount=0;for(var a=0;a<la.spriteCount;a++)la.sprite[a]&&la.sprite[a].bubbleTimeout&&window.clearTimeout(la.sprite[a].bubbleTimeout);s(la.projectiles),s(la.items)},la.reset=function(a){var b;la.clearEventHandlersKillTickLoop();var c=document.getElementById("svgStudio");la.customLogic&&la.customLogic.reset();var d=0;for(b=0;b<la.softButtons_.length;b++)document.getElementById(la.softButtons_[b]).style.display="inline",d++;if(d){var e=document.getElementById("soft-buttons");e.className="soft-buttons-"+d}for(la.preExecutionFailure=!1,la.message=null,la.playerScore=0,la.scoreText=null,document.getElementById("score").setAttribute("visibility","hidden"),document.getElementById("titleScreenTitle").setAttribute("visibility","hidden"),document.getElementById("titleScreenTextGroup").setAttribute("visibility","hidden"),ma.coordinateGridBackground?la.setBackground({value:"grid"}):la.setBackground({value:ma.background||na.defaultBackground}),la.gesturesObserved={},la.currentCmdQueue=null,la.sayComplete=0,la.playSoundCount=0,ma.goal&&(ma.goal.successState={}),la.Globals={},I.editCode&&(la.executionError=null,la.JSInterpreter=null),b=0;b<la.spriteCount;b++){la.sprite[b]=new S({x:la.spriteStart_[b].x,y:la.spriteStart_[b].y,displayX:la.spriteStart_[b].x,displayY:la.spriteStart_[b].y,speed:L.DEFAULT_SPRITE_SPEED,size:L.DEFAULT_SPRITE_SIZE,dir:da.NONE,displayDir:da.SOUTH,emotion:ma.defaultEmotion||ga.NORMAL,lastMove:1/0,visible:!ma.spritesHiddenToStart});var f={spriteIndex:b,value:la.startAvatars[b%la.startAvatars.length],forceHidden:ma.spritesHiddenToStart};la.setSprite(f),la.displaySprite(b),document.getElementById("speechBubble"+b).setAttribute("visibility","hidden"),document.getElementById("sprite"+b).removeAttribute("opacity");var g=document.getElementById("explosion"+b);g&&g.setAttribute("visibility","hidden")}la.createLevelItems(c);var h=na.goal;for(ma.goalOverride&&ma.goalOverride.goal&&(h=na[ma.goalOverride.goal]),b=0;b<la.spriteGoals_.length;b++){la.spriteGoals_[b].finished=!1;var i=document.getElementById("spriteFinish"+b);i.setAttribute("x",la.spriteGoals_[b].x),i.setAttribute("y",la.spriteGoals_[b].y),i.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",h);var j=document.getElementById("finishClipRect"+b);j.setAttribute("x",la.spriteGoals_[b].x),j.setAttribute("y",la.spriteGoals_[b].y)}la.levelRestarted=!0},la.getStudioExampleFailure=function(a){try{var b=a.getInputTargetBlock("ACTUAL"),c=a.getInputTargetBlock("EXPECTED");if(!b)throw new Error("Invalid Call Block");if(!c)throw new Error("Invalid Result Block");var d=Blockly.Generator.blockSpaceToCode("JavaScript",["functional_definition"]),e=Blockly.Generator.blocksToCode("JavaScript",[a]);if(e){var f=N.evalWith(d+"; return"+e,{StudioApp:I,Studio:O,Globals:la.Globals});return f?null:"Does not match definition."}return"No example code."}catch(g){return"Execution error: "+g.message}},la.runButtonClick=function(){var a=document.getElementById("runButton"),b=document.getElementById("resetButton");if(b.style.minWidth||(b.style.minWidth=a.offsetWidth+"px"),I.toggleRunReset("reset"),I.isUsingBlockly()&&Blockly.mainBlockSpace.traceOn(!0),I.reset(!1),I.attempts++,la.startTime=new Date,la.execute(),ma.freePlay&&!ma.isProjectLevel&&(!I.hideSource||ma.showFinish)){var c=document.getElementById("share-cell");c.className="share-cell-enabled"}ma.showZeroScore&&la.displayScore()};var _a=function(){var a;a=ma.freePlay&&!la.customLogic instanceof V?J.keepPlaying():J.tryAgain(),la.waitingForReport||I.displayFeedback({app:"studio",skin:na.id,feedbackType:la.testResults,tryAgainText:a,continueText:ma.freePlay?J.nextPuzzle():void 0,response:la.response,level:ma,showingSharing:!ma.disableSharing&&ma.freePlay&&!la.preExecutionFailure&&!ma.projectTemplateLevelName,feedbackImage:la.feedbackImage,twitter:Oa,saveToGalleryUrl:ma.freePlay&&la.response&&la.response.save_to_gallery_url,message:la.message,appStrings:{reinfFeedbackMsg:K.reinfFeedbackMsg({backButton:a}),sharingText:K.shareGame()}})};la.onReportComplete=function(a){la.response=a,la.waitingForReport=!1,_a()};var ab=function(a,b,c){a.push({name:b,func:c,cmdQueue:[]})},bb=function(a,b,c,d,e,f,g){for(var h=Blockly.mainBlockSpace.getTopBlocks(),i=0;h[i];i++){var j=h[i],k=j.getTitleValue(d)||"0",l=j.getTitleValue(f)||"0";if(!(j.type!==b||d&&e!==k||f&&g!==l)){var m=Blockly.Generator.blocksToCode("JavaScript",[j]);if(m){var n=N.functionFromCode(m,{StudioApp:I,Studio:O,Globals:la.Globals}),o=c;d&&(o+="-"+e),f&&(o+="-"+g),ab(a,o,n)}}}},cb=function(a,b,c,d){for(var e=0;e<la.spriteCount;e++)bb(a,b,c,d,String(e))},db=function(a,b,c,d,e){for(var f=0;f<e.length;f++)bb(a,b,c,d,e[f])},eb=function(a,b,c,d,e){var f,g=function(g){bb(a,b,c,d,String(f),e,g)};for(f=0;f<la.spriteCount;f++){for(var h=0;h<la.spriteCount;h++)f!==h&&bb(a,b,c,d,String(f),e,String(h));na.ProjectileClassNames.forEach(g),na.ItemClassNames.forEach(g),ra.forEach(g),bb(a,b,c,d,String(f),e,"any_actor"),bb(a,b,c,d,String(f),e,"any_edge"),bb(a,b,c,d,String(f),e,"any_projectile"),bb(a,b,c,d,String(f),e,"anything")}},fb=function(a){var b=Blockly.Generator.blockSpaceToCode("JavaScript",a);try{N.evalWith(b,{StudioApp:I,Studio:O,Globals:la.Globals})}catch(c){}};la.checkForPreExecutionFailure=function(){if(I.hasUnfilledFunctionalBlock())return la.result=!1,la.testResults=ja.EMPTY_FUNCTIONAL_BLOCK,la.message=I.getUnfilledFunctionalBlockError("functional_start_setValue"),la.preExecutionFailure=!0,!0;if(I.hasExtraTopBlocks())return la.result=!1,la.testResults=ja.EXTRA_TOP_BLOCKS_FAIL,la.preExecutionFailure=!0,!0;if(I.hasEmptyFunctionOrVariableName())return la.result=!1,la.testResults=ja.EMPTY_FUNCTION_NAME,la.message=J.unnamedFunction(),la.preExecutionFailure=!0,!0;var a=la.checkExamples_();return void 0!==a.result?($.extend(la,a),la.preExecutionFailure=!0,!0):!1},la.checkExamples_=function(){var a={};if(!ma.examplesRequired)return a;var b=I.getFunctionWithoutExample();if(b)return a.result=ia.FAILURE,a.testResults=ja.EXAMPLE_FAILED,a.message=J.emptyExampleBlockErrorMsg({functionName:b}),a;var c=I.getUnfilledFunctionalExample();if(c){a.result=ia.FAILURE,a.testResults=ja.EXAMPLE_FAILED;var d=c.getRootBlock().getInputTargetBlock("ACTUAL").getTitleValue("NAME");return a.message=J.emptyExampleBlockErrorMsg({functionName:d}),a}var e=I.checkForFailingExamples(la.getStudioExampleFailure);return e&&(a.result=!1,a.testResults=ja.EXAMPLE_FAILED,a.message=J.exampleErrorMessage({functionName:e})),a};var gb={WARNING:"WARNING",ERROR:"ERROR"};la.execute=function(){la.result=I.UNSET,la.testResults=ja.NO_TESTS_RUN,la.waitingForReport=!1,la.response=null;var a=[];if(I.isUsingBlockly()){if(la.checkForPreExecutionFailure())return la.onPuzzleComplete();bb(a,"when_run","whenGameStarts"),bb(a,"functional_start_setSpeeds","whenGameStarts"),bb(a,"functional_start_setBackgroundAndSpeeds","whenGameStarts"),bb(a,"functional_start_setFuncs","whenGameStarts"),bb(a,"functional_start_setValue","whenGameStarts"),bb(a,"studio_whenLeft","when-left"),bb(a,"studio_whenRight","when-right"),bb(a,"studio_whenUp","when-up"),bb(a,"studio_whenDown","when-down"),db(a,"studio_whenArrow","when","VALUE",["left","right","up","down"]),bb(a,"studio_repeatForever","repeatForever"),cb(a,"studio_whenSpriteClicked","whenSpriteClicked","SPRITE"),eb(a,"studio_whenSpriteCollided","whenSpriteCollided","SPRITE1","SPRITE2")}if(I.playAudio("start"),I.reset(!1),ma.editCode){var b=I.editor.getValue();la.JSInterpreter=new ca({code:b,blocks:aa.blocks,enableEvents:!0,studioApp:I,onExecutionError:u}),la.initAutoHandlers(sa)}else fb("procedures_defreturn"),fb("procedures_defnoreturn"),fb("functional_definition"),la.eventHandlers=a;la.perExecutionTimeouts=[],la.perExecutionTimeouts.push(window.setInterval(la.onTick,la.scale.stepSpeed))},la.feedbackImage="",la.encodedFeedbackImage="",la.onPuzzleComplete=function(){la.executionError?la.result=ia.ERROR:ma.freePlay&&!la.preExecutionFailure&&(la.result=ia.SUCCESS),la.clearEventHandlersKillTickLoop();var a=la.result===ia.SUCCESS;la.preExecutionFailure||(la.testResults=ma.freePlay?ja.FREE_PLAY:I.getTestResults(a)),la.testResults>=ja.TOO_MANY_BLOCKS_FAIL?I.playAudio("win"):I.playAudio("failure");var b;if(ma.editCode)b=I.editor.getValue();else{var c=Blockly.Xml.blockSpaceToDom(Blockly.mainBlockSpace);b=Blockly.Xml.domToText(c)}la.waitingForReport=!0;var d=function(){I.report({app:"studio",level:ma.id,result:la.result===ia.SUCCESS,testResult:la.testResults,program:encodeURIComponent(b),image:la.encodedFeedbackImage,onComplete:la.onReportComplete})};"undefined"==typeof document.getElementById("svgStudio").toDataURL?d():document.getElementById("svgStudio").toDataURL("image/png",{callback:function(a){la.feedbackImage=a,la.encodedFeedbackImage=encodeURIComponent(la.feedbackImage.split(",")[1]),d()}})};var hb={};hb[da.SOUTHEAST]=0,hb[da.EAST]=1,hb[da.NORTHEAST]=2,hb[da.NORTH]=3,hb[da.NORTHWEST]=4,hb[da.WEST]=5,hb[da.SOUTHWEST]=6;var ib={};ib[da.SOUTH]=0,ib[da.SOUTHEAST]=1,ib[da.EAST]=2,ib[da.NORTHEAST]=3,ib[da.NORTH]=4,ib[da.NORTHWEST]=5,ib[da.WEST]=6,ib[da.SOUTHWEST]=7;var jb=6,kb=7,lb=8,mb=4;la.drawWallTile=function(a,b,c){var d=y("wallBackground",b,c),e=y("wallLetter",b,c),f=document.createElementNS(ka,"g"),g=document.createElementNS(ka,"rect");g.setAttribute("id",d),g.setAttribute("width",la.SQUARE_SIZE),g.setAttribute("height",la.SQUARE_SIZE),g.setAttribute("x",c*la.SQUARE_SIZE),g.setAttribute("y",b*la.SQUARE_SIZE),
g.setAttribute("fill","rgba(255, 255, 255, 0.5)"),g.setAttribute("stroke","#000000"),g.setAttribute("stroke-width",1),f.appendChild(g);var h=document.createElementNS(ka,"text");h.setAttribute("id",e),h.setAttribute("class","wall-letter"),h.setAttribute("width",la.SQUARE_SIZE),h.setAttribute("height",la.SQUARE_SIZE),h.setAttribute("x",(c+.5)*la.SQUARE_SIZE),h.setAttribute("y",(b+1)*la.SQUARE_SIZE-12),h.setAttribute("font-size",32),h.setAttribute("text-anchor","middle"),h.setAttribute("font-family","Verdana"),h.textContent="X",f.appendChild(h),a.appendChild(f)},la.createLevelItems=function(a){for(var b=0;b<la.ROWS;b++)for(var c=0;c<la.COLS;c++)for(var d=la.map[b][c],e=0;e<na.ItemClassNames.length;e++)if(L.squareHasItemClass(e,d)){var f=na.ItemClassNames[e],g={frames:x(f,na.specialItemFrames,na.itemFrames),className:f,dir:da.NONE,image:na[f],loop:!0,x:la.HALF_SQUARE+la.SQUARE_SIZE*c,y:la.HALF_SQUARE+la.SQUARE_SIZE*b},h=new U(g);h.createElement(a),h.display(),la.items.push(h)}},la.drawMapTiles=function(a){for(var b=0;b<la.ROWS;b++)for(var c=0;c<la.COLS;c++){var d=la.map[b][c];d&fa.WALL&&la.drawWallTile(a,b,c)}};var nb=function(a){var b=+a.getAttribute("height"),c="true"===a.getAttribute("onTop"),d="true"===a.getAttribute("onRight");a.setAttribute("d",sb(0,0,Ka,b,Da,c,d))};la.displaySprite=function(a,b){var c=la.sprite[a];if("hidden"!==c.value){var d,e,f,g,h,i=document.getElementById("sprite"+a),j=document.getElementById("spriteWalk"+a);if(void 0!==c.value&&na[c.value]&&na[c.value].walk&&b){var k=document.getElementById("explosion"+a);if(k&&"hidden"!==k.getAttribute("visibility"))return void j.setAttribute("visibility","hidden");i.setAttribute("visibility","hidden"),j.setAttribute("visibility","visible"),g=c.width*v(a,{walkDirection:!0}),h=c.height*v(a,{walkFrame:!0}),d=j,e=document.getElementById("spriteWalkClipRect"+a),f=document.getElementById("spriteClipRect"+a)}else i.setAttribute("visibility","visible"),j.setAttribute("visibility","hidden"),g=c.width*v(a),h=0,d=i,e=document.getElementById("spriteClipRect"+a),f=document.getElementById("spriteWalkClipRect"+a);var l=e.getAttribute("x"),m=e.getAttribute("y"),n=c.dir;n===da.NONE?c.dir=da.SOUTH:(c.x!=l||c.y!=m)&&(c.dir=da.NONE,c.x<l?c.dir|=da.WEST:c.x>l&&(c.dir|=da.EAST),c.y<m?c.dir|=da.NORTH:c.y>m&&(c.dir|=da.SOUTH)),c.dir!==c.displayDir&&la.tickCount&&0===la.tickCount%2&&(c.displayDir=ea[c.displayDir][c.dir]),ma.gridAlignedMovement?(c.x>c.displayX?c.displayX+=la.SQUARE_SIZE/ma.slowJsExecutionFactor:c.x<c.displayX&&(c.displayX-=la.SQUARE_SIZE/ma.slowJsExecutionFactor),c.y>c.displayY?c.displayY+=la.SQUARE_SIZE/ma.slowJsExecutionFactor:c.y<c.displayY&&(c.displayY-=la.SQUARE_SIZE/ma.slowJsExecutionFactor)):(c.displayX=c.x,c.displayY=c.y),d.setAttribute("x",c.displayX-g),d.setAttribute("y",c.displayY-h),e.setAttribute("x",c.displayX),e.setAttribute("y",c.displayY),f.setAttribute("x",c.displayX),f.setAttribute("y",c.displayY);var o=document.getElementById("speechBubble"+a),p=document.getElementById("speechBubblePath"+a),q=+p.getAttribute("height"),r="true"===p.getAttribute("onTop"),s="true"===p.getAttribute("onRight"),t=!0,u=!0,w=c.y-(q+Fa);0>w&&(w=c.y+c.height+Fa,t=!1);var x=c.x+Ea;x>la.MAZE_WIDTH-Ka&&(x=c.x+c.width-(Ka+Ea),u=!1),p.setAttribute("onTop",t),p.setAttribute("onRight",u),(r!==t||s!==u)&&nb(p),o.setAttribute("transform","translate("+x+","+w+")")}},la.displayScore=function(){var a=document.getElementById("score");la.scoreText?a.textContent=la.scoreText:a.textContent=K.scoreText({playerScore:la.playerScore}),a.setAttribute("visibility","visible")},la.showCoordinates=function(){var a=la.sprite[la.protagonistSpriteIndex||0];if(a){var b=a.x+50,c=350-a.y;la.setScoreText({text:"x: "+b+" y: "+c})}},la.queueCmd=function(a,b,c){var d={id:a,name:b,opts:c};if(I.isUsingBlockly()){if(la.currentEventParams)for(var e in la.currentEventParams)d.opts[e]=la.currentEventParams[e];la.currentCmdQueue.push(d)}else la.callCmd(d)},la.executeQueue=function(a){la.eventHandlers.forEach(function(b){if(b.name===a&&b.cmdQueue.length)for(var c=b.cmdQueue[0];c&&la.callCmd(c);c=b.cmdQueue[0])b.cmdQueue.shift()})},la.callCmd=function(a){switch(a.name){case"setBackground":I.highlight(a.id),la.setBackground(a.opts);break;case"setSprite":I.highlight(a.id),la.setSprite(a.opts);break;case"saySprite":return a.opts.started||I.highlight(a.id),la.saySprite(a.opts);case"setSpriteEmotion":I.highlight(a.id),la.setSpriteEmotion(a.opts);break;case"setSpriteSpeed":I.highlight(a.id),la.setSpriteSpeed(a.opts);break;case"setSpriteSize":I.highlight(a.id),la.setSpriteSize(a.opts);break;case"setSpritePosition":I.highlight(a.id),la.setSpritePosition(a.opts);break;case"setSpriteXY":I.highlight(a.id),la.setSpriteXY(a.opts);break;case"playSound":I.highlight(a.id),I.playAudio(a.opts.soundName,{volume:1}),la.playSoundCount++;break;case"showTitleScreen":return a.opts.started||I.highlight(a.id),la.showTitleScreen(a.opts);case"move":I.highlight(a.id),la.moveSingle(a.opts);break;case"moveEast":I.highlight(a.id),la.moveSingle({spriteIndex:la.protagonistSpriteIndex||0,dir:da.EAST});break;case"moveWest":I.highlight(a.id),la.moveSingle({spriteIndex:la.protagonistSpriteIndex||0,dir:da.WEST});break;case"moveNorth":I.highlight(a.id),la.moveSingle({spriteIndex:la.protagonistSpriteIndex||0,dir:da.NORTH});break;case"moveSouth":I.highlight(a.id),la.moveSingle({spriteIndex:la.protagonistSpriteIndex||0,dir:da.SOUTH});break;case"moveDistance":return a.opts.started||I.highlight(a.id),la.moveDistance(a.opts);case"stop":I.highlight(a.id),la.stop(a.opts);break;case"throwProjectile":return a.opts.started||I.highlight(a.id),la.throwProjectile(a.opts);case"makeProjectile":I.highlight(a.id),la.makeProjectile(a.opts);break;case"changeScore":I.highlight(a.id),la.changeScore(a.opts);break;case"setScoreText":I.highlight(a.id),la.setScoreText(a.opts);break;case"showCoordinates":I.highlight(a.id),la.showCoordinates();break;case"wait":return a.opts.started||I.highlight(a.id),la.wait(a.opts);case"vanish":I.highlight(a.id),la.vanishActor(a.opts);break;case"addItemsToScene":I.highlight(a.id),la.addItemsToScene(a.opts);break;case"onEvent":I.highlight(a.id),la.onEvent(a.opts)}return!0},la.addItemsToScene=function(a){for(var b=[da.NORTH,da.EAST,da.SOUTH,da.WEST,da.NORTHEAST,da.SOUTHEAST,da.SOUTHWEST,da.NORTHWEST],c=function(){var a={};return ma.gridAlignedMovement?(a.x=la.HALF_SQUARE+la.SQUARE_SIZE*Math.floor(Math.random()*la.COLS),a.y=la.HALF_SQUARE+la.SQUARE_SIZE*Math.floor(Math.random()*la.ROWS)):(a.x=la.HALF_SQUARE+Math.floor(Math.random()*(la.MAZE_WIDTH-la.SQUARE_SIZE)),a.y=la.HALF_SQUARE+Math.floor(Math.random()*(la.MAZE_HEIGHT-la.SQUARE_SIZE))),a},d=0;d<a.number;d++){var e=ma.gridAlignedMovement?da.NONE:b[Math.floor(Math.random()*b.length)],f=c(),g={frames:x(a.className,na.specialItemFrames,na.itemFrames),className:a.className,dir:e,image:na[a.className],loop:!0,x:f.x,y:f.y},h=new U(g);if(ma.blockMovingIntoWalls)for(var i=0;la.willCollidableTouchWall(h,h.x,h.y);){var j=c();if(h.x=j.x,h.y=j.y,i++,i>100)break}h.createElement(document.getElementById("svgStudio")),la.items.push(h)}},la.vanishActor=function(a){var b=document.getElementById("svgStudio"),c=document.getElementById("sprite"+a.spriteIndex),d=c&&"hidden"!==c.getAttribute("visibility"),e=document.getElementById("spriteWalk"+a.spriteIndex),f=e&&"hidden"!==e.getAttribute("visibility");if(d||f){var g=document.getElementById("explosion"+a.spriteIndex);g||(g=document.createElementNS(ka,"image"),g.setAttribute("id","explosion"+a.spriteIndex),g.setAttribute("visibility","hidden"),b.appendChild(g,c));var h=document.getElementById("spriteClipRect"+a.spriteIndex),i=la.sprite[a.spriteIndex].width;g.setAttribute("height",la.sprite[a.spriteIndex].height),g.setAttribute("x",h.getAttribute("x")),g.setAttribute("visibility","visible");var j=parseInt(h.getAttribute("x"),10),k=na.explosionFrames;g.setAttribute("clip-path","url(#spriteClipPath"+a.spriteIndex+")"),g.setAttribute("width",k*i),na.fadeExplosion||la.setSprite({spriteIndex:a.spriteIndex,value:"hidden"}),_.range(0,k).forEach(function(a){la.perExecutionTimeouts.push(setTimeout(function(){g.setAttribute("x",j-a*i),0===a&&g.setAttribute("y",h.getAttribute("y")),na.fadeExplosion&&c.setAttribute("opacity",(k-a)/k)},a*na.timePerExplosionFrame))}),la.perExecutionTimeouts.push(setTimeout(function(){g.setAttribute("visibility","hidden"),na.fadeAnimation&&(la.setSprite({spriteIndex:a.spriteIndex,value:"hidden"}),c.removeAttribute("opacity"))},na.timePerExplosionFrame*(k+1))),g.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",na.explosion+"?spriteIndex="+a.spriteIndex)}},la.setSpriteEmotion=function(a){la.sprite[a.spriteIndex].emotion=a.value},la.setSpriteSpeed=function(a){var b=Math.min(Math.max(a.value,2),12);la.sprite[a.spriteIndex].speed=b},la.setSpriteSize=function(a){la.sprite[a.spriteIndex].size=a.value;var b=la.sprite[a.spriteIndex].value;"hidden"!==b&&la.setSprite({spriteIndex:a.spriteIndex,value:b})},la.changeScore=function(a){la.playerScore+=Number(a.value),la.displayScore()},la.setScoreText=function(a){la.scoreText=a.text,la.displayScore()},la.setBackground=function(a){var b=document.getElementById("background");b.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",na[a.value].background)},la.setSprite=function(a){var b=a.spriteIndex,c=la.sprite[b],d=a.value,e=document.getElementById("sprite"+b);if(e){var f=null;if(void 0!==d&&na[d]&&na[d].walk){if(f=document.getElementById("spriteWalk"+b),!f)return;f.setAttribute("visibility","hidden")}if(c.visible="hidden"!==d&&!a.forceHidden,e.setAttribute("visibility",c.visible?"visible":"hidden"),c.value=a.forceHidden?"hidden":a.value,"hidden"!==d&&"visible"!==d){c.frameCounts=na[d].frameCounts,c.timePerFrame=na[d].timePerFrame,ma.gridAlignedMovement?(c.height=c.width=la.SQUARE_SIZE,c.size=c.width/na.spriteWidth):(c.height=c.size*na.spriteHeight,c.width=c.size*na.spriteWidth),na.projectileSpriteHeight&&(c.projectileSpriteHeight=c.size*na.projectileSpriteHeight),na.projectileSpriteWidth&&(c.projectileSpriteWidth=c.size*na.projectileSpriteWidth);var g=document.getElementById("spriteClipRect"+b);if(g.setAttribute("width",c.width),g.setAttribute("height",c.height),e.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",na[d].sprite),e.setAttribute("width",c.width*w(b)),e.setAttribute("height",c.height),f){var h=document.getElementById("spriteWalkClipRect"+b);h.setAttribute("width",c.width),h.setAttribute("height",c.height),f.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",na[d].walk);var i=la.sprite[b].frameCounts;f.setAttribute("width",c.width*i.turns),f.setAttribute("height",c.height*i.walk)}la.displaySprite(b)}}};var ob=function(a,b){return a+" "+b+" "},pb=15,qb=25,rb=10,sb=function(a,b,c,d,e,f,g){var h="M"+ob(a+e,b);return f||(h+=g?"L"+ob(a+e-rb,b-pb)+"L"+ob(a+e+qb,b):"L"+ob(a+c-e-qb,b)+"L"+ob(a+c-rb,b-pb)),h+="L"+ob(a+c-e,b),h+="Q"+ob(a+c,b)+ob(a+c,b+e),h+="L"+ob(a+c,b+d-e)+"Q"+ob(a+c,b+d)+ob(a+c-e,b+d),f&&(h+=g?"L"+ob(a+e+qb,b+d)+"L"+ob(a+e-rb,b+d+pb):"L"+ob(a+c-rb,b+d+pb)+"L"+ob(a+c-e-qb,b+d)),h+="L"+ob(a+e,b+d),h+="Q"+ob(a,b+d)+ob(a,b+d-e),h+="L"+ob(a,b+e)+"Q"+ob(a,b)+ob(a+e,b),h+="Z"},tb=function(a){a.complete||(a.waitCallback&&a.waitCallback(),a.complete=!0)};la.wait=function(a){return a.started||(a.started=!0,"click"===a.value?a.waitForClick=!0:a.waitTimeout=window.setTimeout(Qa(this,tb,a),a.value)),a.complete},la.hideTitleScreen=function(a){var b=document.getElementById("titleScreenTitle"),c=document.getElementById("titleScreenTextGroup");b.setAttribute("visibility","hidden"),c.setAttribute("visibility","hidden"),a.complete=!0},la.showTitleScreen=function(a){if(!a.started){a.started=!0;var b=document.getElementById("titleScreenTitle"),c=document.getElementById("titleScreenTextGroup"),d=document.getElementById("titleScreenText"),e=document.getElementById("titleScreenTextRect");b.textContent=a.title;var f={svgText:d,text:a.text,width:Ba,lineHeight:xa,topMargin:za,sideMargin:wa,maxLines:ya,fullHeight:Ca},g=Va(f);e.setAttribute("height",g),b.setAttribute("visibility","visible"),c.setAttribute("visibility","visible"),a.waitForClick=!0,a.waitCallback=Qa(this,la.hideTitleScreen,a),a.waitTimeout=window.setTimeout(Qa(this,tb,a),ta)}return a.complete},la.isCmdCurrentInQueue=function(a,b){var c=!1;return la.eventHandlers.forEach(function(d){if(d.name===b){var e=d.cmdQueue[0];e&&e.name===a&&(c=!0)}}),c},la.hideSpeechBubble=function(a){var b=document.getElementById("speechBubble"+a.spriteIndex);b.setAttribute("visibility","hidden"),b.removeAttribute("onTop"),b.removeAttribute("onRight"),b.removeAttribute("height"),a.complete=!0,delete la.sprite[a.spriteIndex].bubbleTimeoutFunc,la.sayComplete++},la.saySprite=function(a){if(a.started)return a.complete;var b=a.spriteIndex,c=la.sprite[b];if(c){if(a.started=!0,c.bubbleTimeoutFunc&&c.bubbleTimeoutFunc(),window.clearTimeout(c.bubbleTimeout),!c.visible)return a.complete=!0,a.complete;var d=document.getElementById("speechBubbleText"+b),e={svgText:d,text:a.text,width:Ka,lineHeight:Ha,topMargin:Ja,sideMargin:Ga,maxLines:Ia,fullHeight:La},f=Va(e),g=document.getElementById("speechBubblePath"+b),h=document.getElementById("speechBubble"+b);return g.setAttribute("height",f),nb(g),la.displaySprite(a.spriteIndex),h.setAttribute("visibility","visible"),c.bubbleTimeoutFunc=Qa(this,la.hideSpeechBubble,a),c.bubbleTimeout=window.setTimeout(c.bubbleTimeoutFunc,1e3*a.seconds),a.complete}},la.stop=function(a){if(Sa(a.spriteIndex,!0),Sa(a.spriteIndex,!1),!a.dontResetCollisions){var b=la.sprite[a.spriteIndex];if(!b)return;b.clearCollisions();for(var c=0;c<la.spriteCount;c++)c!==a.spriteIndex&&la.sprite[c].endCollision(a.spriteIndex)}},la.throwProjectile=function(a){if(a.started)return a.complete;a.started=!0,a.complete=!1,window.setTimeout(function(){a.complete=!0},Na);var b=la.sprite[a.spriteIndex];if(b.visible){var c=na.preventProjectileLoop&&na.preventProjectileLoop(a.className),d={frames:x(a.className,na.specialProjectileFrames,na.projectileFrames),className:a.className,dir:a.dir,image:na[a.className],loop:!c,spriteX:b.x,spriteY:b.y,spriteHeight:b.projectileSpriteHeight||b.height,spriteWidth:b.projectileSpriteWidth||b.width},e=new T(d);e.createElement(document.getElementById("svgStudio")),la.projectiles.push(e)}};var ub=function(a,b){if("bounce"===b)a.bounce();else{if("disappear"!==b)throw"unknown action in doMakeProjectile";a.removeElement();var c=la.projectiles.indexOf(a);if(-1!==c)return la.projectiles.splice(c,1),!0}return!1};la.makeProjectile=function(a){if(a.eventObject)ub(a.eventObject,a.action);else for(var b=0;b<la.projectiles.length;b++)la.projectiles[b].className===a.className&&ub(la.projectiles[b],a.action)&&b--};var vb=function(a,b){switch(b){case L.Position.OUTTOPOUTLEFT:case L.Position.TOPOUTLEFT:case L.Position.MIDDLEOUTLEFT:case L.Position.BOTTOMOUTLEFT:case L.Position.OUTBOTTOMOUTLEFT:return-a.width;case L.Position.OUTTOPLEFT:case L.Position.TOPLEFT:case L.Position.MIDDLELEFT:case L.Position.BOTTOMLEFT:case L.Position.OUTBOTTOMLEFT:return 0;case L.Position.OUTTOPCENTER:case L.Position.TOPCENTER:case L.Position.MIDDLECENTER:case L.Position.BOTTOMCENTER:case L.Position.OUTBOTTOMCENTER:return(la.MAZE_WIDTH-a.width)/2;case L.Position.OUTTOPRIGHT:case L.Position.TOPRIGHT:case L.Position.MIDDLERIGHT:case L.Position.BOTTOMRIGHT:case L.Position.OUTBOTTOMRIGHT:return la.MAZE_WIDTH-a.width;case L.Position.OUTTOPOUTRIGHT:case L.Position.TOPOUTRIGHT:case L.Position.MIDDLEOUTRIGHT:case L.Position.BOTTOMOUTRIGHT:case L.Position.OUTBOTTOMOUTRIGHT:return la.MAZE_WIDTH}},wb=function(a,b){switch(b){case L.Position.OUTTOPOUTLEFT:case L.Position.OUTTOPLEFT:case L.Position.OUTTOPCENTER:case L.Position.OUTTOPRIGHT:case L.Position.OUTTOPOUTRIGHT:return-a.height;case L.Position.TOPOUTLEFT:case L.Position.TOPLEFT:case L.Position.TOPCENTER:case L.Position.TOPRIGHT:case L.Position.TOPOUTRIGHT:return 0;case L.Position.MIDDLEOUTLEFT:case L.Position.MIDDLELEFT:case L.Position.MIDDLECENTER:case L.Position.MIDDLERIGHT:case L.Position.MIDDLEOUTRIGHT:return(la.MAZE_HEIGHT-a.height)/2;case L.Position.BOTTOMOUTLEFT:case L.Position.BOTTOMLEFT:case L.Position.BOTTOMCENTER:case L.Position.BOTTOMRIGHT:case L.Position.BOTTOMOUTRIGHT:return la.MAZE_HEIGHT-a.height;case L.Position.OUTBOTTOMOUTLEFT:case L.Position.OUTBOTTOMLEFT:case L.Position.OUTBOTTOMCENTER:case L.Position.OUTBOTTOMRIGHT:case L.Position.OUTBOTTOMOUTRIGHT:return la.MAZE_HEIGHT}};la.collideItemWith=function(a,b,c){a.startCollision(b)&&E(a.className,b,c)},la.collideSpriteWith=function(a,b,c){var d=la.sprite[a];d.startCollision(b)&&D(a,b,c)},la.setSpritePosition=function(a){var b=la.sprite[a.spriteIndex];a.value&&(a.x=vb(b,a.value),a.y=wb(b,a.value));var c=b.x===a.x&&b.y===a.y;la.stop({spriteIndex:a.spriteIndex,dontResetCollisions:c}),b.displayX=b.x=a.x,b.displayY=b.y=a.y,b.dir=da.NONE},la.setSpriteXY=function(a){var b=la.sprite[a.spriteIndex],c=a.x-b.width/2,d=a.y-b.height/2,e=b.x===c&&b.y===d;la.stop({spriteIndex:a.spriteIndex,dontResetCollisions:e}),b.displayX=b.x=c,b.displayY=b.y=d,b.dir=da.NONE},la.moveSingle=function(a){var b=la.sprite[a.spriteIndex];b.lastMove=la.tickCount;var c=ma.gridAlignedMovement?la.SQUARE_SIZE:b.speed;switch(a.dir){case da.NORTH:if(ma.blockMovingIntoWalls&&la.willSpriteTouchWall(b,b.x,b.y-c))break;b.y-=c,b.y<0&&!ma.allowSpritesOutsidePlayspace&&(b.y=0);break;case da.EAST:if(ma.blockMovingIntoWalls&&la.willSpriteTouchWall(b,b.x+c,b.y))break;b.x+=c;var d=la.MAZE_WIDTH-b.width;b.x>d&&!ma.allowSpritesOutsidePlayspace&&(b.x=d);break;case da.SOUTH:if(ma.blockMovingIntoWalls&&la.willSpriteTouchWall(b,b.x,b.y+c))break;b.y+=c;var e=la.MAZE_HEIGHT-b.height;b.y>e&&!ma.allowSpritesOutsidePlayspace&&(b.y=e);break;case da.WEST:if(ma.blockMovingIntoWalls&&la.willSpriteTouchWall(b,b.x-c,b.y))break;b.x-=c,b.x<0&&!ma.allowSpritesOutsidePlayspace&&(b.x=0)}ma.gridAlignedMovement&&la.JSInterpreter&&la.JSInterpreter["yield"]()},la.moveDistance=function(a){return a.started||(a.started=!0,ma.gridAlignedMovement&&(a.distance=Math.ceil(a.distance/la.SQUARE_SIZE)*la.SQUARE_SIZE),a.queuedDistance=a.distance),0===a.queuedDistance},la.onEvent=function(a){ab(la.eventHandlers,a.eventName,a.func)},la.allWhenRunBlocksComplete=function(){for(var a=0;a<la.eventHandlers.length;a++)if("whenGameStarts"===la.eventHandlers[a].name&&0!==la.eventHandlers[a].cmdQueue.length)return!1;return!0},la.timedOut=function(){return ma.timeoutAfterWhenRun&&(0===la.eventHandlers.length||1===la.eventHandlers.length&&"whenGameStarts"===la.eventHandlers[0].name&&la.allWhenRunBlocksComplete())?!0:la.tickCount>la.timeoutFailureTick},la.allGoalsVisited=function(){var a,b,c=la.sprite[la.protagonistSpriteIndex],d=0;if(0===la.spriteGoals_.length)return!1;if(la.protagonistSpriteIndex&&!c)return!1;for(a=0;a<la.spriteGoals_.length;a++){var e=la.spriteGoals_[a];if(!e.finished){if(c){var f=e.finished;if(e.finished=H(c,e),!f&&e.finished){var g=!1,i="whenSpriteCollided-"+la.protagonistSpriteIndex+"-";h(i+"anything",g)}}else{e.finished=!1;for(var j=0;j<la.sprite.length;j++)if(H(la.sprite[j],e)){e.finished=!0;break}}b=e.finished}if(e.finished){d++,b&&d!==la.spriteGoals_.length&&I.playAudio("flag");var k=na.goalSuccess;ma.goalOverride&&ma.goalOverride.success&&(k=na[ma.goalOverride.success]);var l=document.getElementById("spriteFinish"+a);l.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",k)}}return d===la.spriteGoals_.length};var xb=function(){var a=0!==la.spriteGoals_.length,b=la.allGoalsVisited(),c=ma.goal&&ma.goal.successCondition?!0:!1,d=!c||Z.valueOr(ma.goal.successCondition(),!0),e=c&&Z.valueOr(ma.goal.successCondition(),!1);return a&&b&&d||a&&ma.completeOnSuccessConditionNotGoals&&e||!a&&e?(la.result=ia.SUCCESS,!0):ma.goal&&ma.goal.failureCondition&&ma.goal.failureCondition()?(la.result=ia.FAILURE,!0):la.timedOut()?(la.result=ia.FAILURE,!0):!1}},{"../JSInterpreter":1,"../StudioApp":5,"../canvg/StackBlur.js":101,"../canvg/canvg.js":102,"../canvg/rgbcolor.js":103,"../canvg/svg_todataurl":104,"../codegen":106,"../constants":107,"../dom":108,"../dropletUtils":109,"../locale":150,"../skins":271,"../templates/page.html.ejs":301,"../utils":323,"../xml":324,"./Item":273,"./api":274,"./bigGameLogic":276,"./blocks":277,"./collidable":278,"./constants":279,"./controls.html.ejs":280,"./dropletConfig":282,"./extraControlRows.html.ejs":283,"./locale":285,"./projectile":287,"./rocketHeightLogic":288,"./samBatLogic":289,"./visualization.html.ejs":292}],292:[function(require,module,exports){module.exports=function(){var t=function anonymous(locals,filters,escape){escape=escape||function(a){return String(a).replace(/&(?!\w+;)/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")};var buf=[];with(locals||{})!function(){buf.push('<svg xmlns="http://www.w3.org/2000/svg" version="1.1" id="svgStudio">\n</svg>\n<div id="capacityBubble">\n  <div id="capacity"></div>\n</div>\n')}();return buf.join("")};return function(a){return t(a,require("ejs").filters)}}()},{ejs:500}],289:[function(a,b,c){var d=a("./customGameLogic"),e=a("./constants"),f=e.Direction,g=(e.Position,a("../constants").KeyCodes),h=(a("../codegen"),a("./api"),function(a){d.apply(this,arguments),this.samIndex=0,this.sam=null,this.stopped={left:!1,up:!1,right:!1,down:!1}});h.inherits(d),h.prototype.onTick=function(){this.sam=this.studio_.sprite[this.samIndex];for(var a in g)if(this.studio_.keyState[g[a]]&&"keydown"===this.studio_.keyState[g[a]])switch(g[a]){case g.LEFT:this.updateSam_(f.WEST);break;case g.UP:this.updateSam_(f.NORTH);break;case g.RIGHT:this.updateSam_(f.EAST);break;case g.DOWN:this.updateSam_(f.SOUTH)}for(var b in this.studio_.btnState)if(this.studio_.btnState[b])switch(b){case"leftButton":this.updateSam_(f.WEST);break;case"upButton":this.updateSam_(f.NORTH);break;case"rightButton":this.updateSam_(f.EAST);break;case"downButton":this.updateSam_(f.SOUTH)}var c=this.sam.x+this.sam.width/2,d=this.studio_.MAZE_HEIGHT-(this.sam.y+this.sam.height/2);this.studio_.scoreText="("+c+", "+d+")",this.studio_.displayScore()},h.prototype.updateSam_=function(a){var b=this.sam.x+this.sam.width/2,c=this.studio_.MAZE_HEIGHT-(this.sam.y+this.sam.height/2);switch(a){case f.WEST:this.onscreen(b-this.sam.speed,c)||(a=f.NONE,this.stopped.left=!0);break;case f.NORTH:this.onscreen(b,c+this.sam.speed)||(a=f.NONE,this.stopped.up=!0);break;case f.EAST:this.onscreen(b+this.sam.speed,c)||(a=f.NONE,this.stopped.right=!0);break;case f.SOUTH:this.onscreen(b,c-this.sam.speed)||(a=f.NONE,this.stopped.down=!0)}this.studio_.moveSingle({spriteIndex:this.samIndex,dir:a})},h.prototype.onscreen=function(a,b){return this.resolveCachedBlock_("VALUE")(a,b)},b.exports=h},{"../codegen":106,"../constants":107,"./api":274,"./constants":279,"./customGameLogic":281}],288:[function(a,b,c){var d=a("./customGameLogic"),e=a("./constants"),f=e.Direction,g=(a("../codegen"),a("./api"),function(a){d.apply(this,arguments),this.rocketIndex=0,this.last=Date.now(),this.seconds=0,this.rocket=null,this.height=0,this.SECONDS_TO_RUN=8});g.inherits(d),g.prototype.onTick=function(){1===this.studio_.tickCount&&(this.last=Date.now(),this.seconds=0,this.rocket=this.studio_.sprite[this.rocketIndex],this.height=0,this.studio_.setBackground({value:"space"})),Date.now()-this.last<1e3||(this.last=Date.now(),this.seconds++,this.height=this.rocket_height(this.seconds)||0,this.rocket.y=this.studio_.MAZE_HEIGHT-(this.height+this.rocket.height),this.rocket.dir=f.NONE,this.studio_.scoreText="Time: "+this.seconds+" | Height: "+this.height,this.studio_.displayScore())},g.prototype.rocket_height=function(a){return this.resolveCachedBlock_("VALUE")(a)},b.exports=g},{"../codegen":106,"./api":274,"./constants":279,"./customGameLogic":281}],287:[function(a,b,c){var d=a("./collidable"),e=a("./constants").Direction,f=a("./constants"),g="http://www.w3.org/2000/svg",h=0,i={};i[e.EAST]=0,i[e.SOUTH]=90,i[e.WEST]=180,i[e.NORTH]=270,i[e.NORTHEAST]=45,i[e.SOUTHEAST]=135,i[e.SOUTHWEST]=225,i[e.NORTHWEST]=315;var j={};j[e.NORTH]={x:.5,y:0},j[e.EAST]={x:1,y:.5},j[e.SOUTH]={x:.5,y:1},j[e.WEST]={x:0,y:.5},j[e.NORTHEAST]={x:1,y:0},j[e.SOUTHEAST]={x:1,y:1},j[e.SOUTHWEST]={x:0,y:1},j[e.NORTHWEST]={x:0,y:0};var k={};k[e.NORTH]={x:0,y:-25},k[e.EAST]={x:25,y:0},k[e.SOUTH]={x:0,y:25},k[e.WEST]={x:-25,y:0},k[e.NORTHEAST]={x:25,y:-25},k[e.SOUTHEAST]={x:25,y:25},k[e.SOUTHWEST]={x:-25,y:25},k[e.NORTHWEST]={x:-25,y:-25};var l=function(a){d.apply(this,arguments),this.height=a.height||50,this.width=a.width||50,this.speed=a.speed||f.DEFAULT_SPRITE_SPEED/2,this.currentFrame_=0;var b=this;this.animator_=window.setInterval(function(){(b.loop||b.currentFrame_+1<b.frames)&&(b.currentFrame_=(b.currentFrame_+1)%b.frames)},50),this.x=a.spriteX+k[a.dir].x+a.spriteWidth*j[a.dir].x,this.y=a.spriteY+k[a.dir].y+a.spriteHeight*j[a.dir].y};l.prototype=new d,b.exports=l,l.__resetIds=function(){h=0},l.prototype.createElement=function(a){this.clipPath=document.createElementNS(g,"clipPath");var b="projectile_clippath_"+h++;this.clipPath.setAttribute("id",b);var c=document.createElementNS(g,"rect");c.setAttribute("width",this.width),c.setAttribute("height",this.height),this.clipPath.appendChild(c),a.appendChild(this.clipPath),this.element=document.createElementNS(g,"image"),this.element.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",this.image),this.element.setAttribute("height",this.height),this.element.setAttribute("width",this.width*this.frames),a.appendChild(this.element),this.element.setAttribute("clip-path","url(#"+b+")")},l.prototype.removeElement=function(){this.element&&(this.element.parentNode.removeChild(this.element),this.element=null),this.clipPath&&(this.clipPath.parentNode.removeChild(this.clipPath),this.clipPath=null),this.animator_&&(window.clearInterval(this.animator_),this.animator_=null)},l.prototype.display=function(){var a={x:this.x-this.width/2,y:this.y-this.height/2};this.element.setAttribute("x",a.x-this.width*this.currentFrame_),this.element.setAttribute("y",a.y);var b=this.clipPath.childNodes[0];b.setAttribute("x",a.x),b.setAttribute("y",a.y),this.frames>1&&this.element.setAttribute("transform","rotate("+i[this.dir]+", "+this.x+", "+this.y+")")},l.prototype.getNextPosition=function(){var a=e.getUnitVector(this.dir);return{x:this.x+this.speed*a.x,y:this.y+this.speed*a.y}},l.prototype.moveToNextPosition=function(){var a=this.getNextPosition();this.x=a.x,this.y=a.y}},{"./collidable":278,"./constants":279}],290:[function(a,b,c){function d(a,b){a.preloadAssets=!0,a.defaultBackground="leafy",a.projectileFrames=10,a.itemFrames=10,a.ProjectileClassNames=["projectile_hiro","projectile_anna","projectile_elsa","projectile_baymax","projectile_rapunzel","projectile_cherry","projectile_ice","projectile_duck"],a.specialProjectileFrames={projectile_cherry:13,projectile_ice:12,projectile_duck:12},a.ItemClassNames=["item_hiro","item_anna","item_elsa","item_baymax","item_rapunzel","item_cherry","item_ice","item_duck"],a.specialItemFrames={item_cherry:13,item_ice:12,item_duck:12},a.explosion=a.assetUrl("vanish.png"),a.explosionFrames=17,a.fadeExplosion=!0,a.timePerExplosionFrame=100,a.projectileSpriteWidth=70,a.projectileSpriteHeight=70,a.avatarList=["anna","elsa","hiro","baymax","rapunzel"],a.avatarList.forEach(function(b){a[b]={sprite:a.assetUrl("avatar_"+b+".png"),walk:a.assetUrl("walk_"+b+".png"),dropdownThumbnail:a.assetUrl("avatar_"+b+"_thumb.png"),frameCounts:{normal:19,animation:0,turns:8,emotions:0,walk:12},timePerFrame:100}}),a.preventProjectileLoop=function(a){return"projectile_hiro"===a},a.preventItemLoop=function(a){return"item_hiro"===a},a.projectile_hiro=a.assetUrl("projectile_hiro.png"),a.projectile_anna=a.assetUrl("projectile_anna.png"),a.projectile_elsa=a.assetUrl("projectile_elsa.png"),a.projectile_baymax=a.assetUrl("projectile_baymax.png"),a.projectile_rapunzel=a.assetUrl("projectile_rapunzel.png"),a.projectile_cherry=a.assetUrl("projectile_cherry.png"),a.projectile_ice=a.assetUrl("projectile_ice.png"),a.projectile_duck=a.assetUrl("projectile_duck.png"),a.item_hiro=a.assetUrl("projectile_hiro.png"),a.item_anna=a.assetUrl("projectile_anna.png"),a.item_elsa=a.assetUrl("projectile_elsa.png"),a.item_baymax=a.assetUrl("projectile_baymax.png"),a.item_rapunzel=a.assetUrl("projectile_rapunzel.png"),a.item_cherry=a.assetUrl("projectile_cherry.png"),a.item_ice=a.assetUrl("projectile_ice.png"),a.item_duck=a.assetUrl("projectile_duck.png"),a.leafy={background:a.assetUrl("background_leafy.jpg")},a.grassy={background:a.assetUrl("background_grassy.jpg")},a.flower={background:a.assetUrl("background_flower.jpg")},a.tile={background:a.assetUrl("background_tile.jpg")},a.icy={background:a.assetUrl("background_icy.jpg")},a.snowy={background:a.assetUrl("background_snowy.jpg")},a.backgroundChoices=[[g.setBackgroundRandom(),i],[g.setBackgroundLeafy(),'"leafy"'],[g.setBackgroundGrassy(),'"grassy"'],[g.setBackgroundFlower(),'"flower"'],[g.setBackgroundTile(),'"tile"'],[g.setBackgroundIcy(),'"icy"'],[g.setBackgroundSnowy(),'"snowy"']],a.backgroundChoicesK1=[[a.leafy.background,'"leafy"'],[a.grassy.background,'"grassy"'],[a.flower.background,'"flower"'],[a.tile.background,'"tile"'],[a.icy.background,'"icy"'],[a.snowy.background,'"snowy"'],[a.randomPurpleIcon,i]],a.spriteChoices=[[g.setSpriteHidden(),j],[g.setSpriteRandom(),i],[g.setSpriteAnna(),'"anna"'],[g.setSpriteElsa(),'"elsa"'],[g.setSpriteHiro(),'"hiro"'],[g.setSpriteBaymax(),'"baymax"'],[g.setSpriteRapunzel(),'"rapunzel"']],a.projectileChoices=[[g.projectileHiro(),'"projectile_hiro"'],[g.projectileAnna(),'"projectile_anna"'],[g.projectileElsa(),'"projectile_elsa"'],[g.projectileBaymax(),'"projectile_baymax"'],[g.projectileRapunzel(),'"projectile_rapunzel"'],[g.projectileCherry(),'"projectile_cherry"'],[g.projectileIce(),'"projectile_ice"'],[g.projectileDuck(),'"projectile_duck"'],[g.projectileRandom(),i]],a.itemChoices=[[g.itemHiro(),'"item_hiro"'],[g.itemAnna(),'"item_anna"'],[g.itemElsa(),'"item_elsa"'],[g.itemBaymax(),'"item_baymax"'],[g.itemRapunzel(),'"item_rapunzel"'],[g.itemCherry(),'"item_cherry"'],[g.itemIce(),'"item_ice"'],[g.itemDuck(),'"item_duck"'],[g.itemRandom(),i]]}function e(a,b){a.defaultBackground="cave",a.projectileFrames=8,a.itemFrames=8,a.explosion=a.assetUrl("explosion.png"),a.explosionThumbnail=a.assetUrl("explosion_thumb.png"),a.explosionFrames=20,a.fadeExplosion=!1,a.timePerExplosionFrame=40,a.hardcourt={background:a.assetUrl("background.png")},a.black={background:a.assetUrl("retro_background.png")},a.cave={background:a.assetUrl("background_cave.png")},a.night={background:a.assetUrl("background_santa.png")},a.cloudy={background:a.assetUrl("background_scifi.png")},a.underwater={background:a.assetUrl("background_underwater.png")},a.city={background:a.assetUrl("background_city.png")},a.desert={background:a.assetUrl("background_desert.png")},a.rainbow={background:a.assetUrl("background_rainbow.png")},a.soccer={background:a.assetUrl("background_soccer.png")},a.space={background:a.assetUrl("background_space.png")},a.tennis={background:a.assetUrl("background_tennis.png")},a.winter={background:a.assetUrl("background_winter.png")},a.grid={background:a.assetUrl("background_grid.png")},a.avatarList=["dog","cat","penguin","dinosaur","octopus","witch","bat","bird","dragon","squirrel","wizard","alien","ghost","monster","robot","unicorn","zombie","knight","ninja","pirate","caveboy","cavegirl","princess","spacebot","soccergirl","soccerboy","tennisgirl","tennisboy"],a.avatarList.forEach(function(b){a[b]={sprite:a.assetUrl(b+"_spritesheet_200px.png"),dropdownThumbnail:a.assetUrl(b+"_thumb.png"),frameCounts:{normal:1,animation:1,turns:7,emotions:3}}}),a.backgroundChoices=[[g.setBackgroundRandom(),i],[g.setBackgroundCave(),'"cave"'],[g.setBackgroundNight(),'"night"'],[g.setBackgroundCloudy(),'"cloudy"'],[g.setBackgroundUnderwater(),'"underwater"'],[g.setBackgroundHardcourt(),'"hardcourt"'],[g.setBackgroundBlack(),'"black"'],[g.setBackgroundCity(),'"city"'],[g.setBackgroundDesert(),'"desert"'],[g.setBackgroundRainbow(),'"rainbow"'],[g.setBackgroundSoccer(),'"soccer"'],[g.setBackgroundSpace(),'"space"'],[g.setBackgroundTennis(),'"tennis"'],[g.setBackgroundWinter(),'"winter"']],
a.backgroundChoicesK1=[[a.cave.background,'"cave"'],[a.night.background,'"night"'],[a.cloudy.background,'"cloudy"'],[a.underwater.background,'"underwater"'],[a.hardcourt.background,'"hardcourt"'],[a.black.background,'"black"'],[a.city.background,'"city"'],[a.desert.background,'"desert"'],[a.rainbow.background,'"rainbow"'],[a.soccer.background,'"soccer"'],[a.space.background,'"space"'],[a.tennis.background,'"tennis"'],[a.winter.background,'"winter"'],[a.randomPurpleIcon,i]],a.spriteChoices=[[g.setSpriteHidden(),j],[g.setSpriteRandom(),i],[g.setSpriteWitch(),'"witch"'],[g.setSpriteCat(),'"cat"'],[g.setSpriteDinosaur(),'"dinosaur"'],[g.setSpriteDog(),'"dog"'],[g.setSpriteOctopus(),'"octopus"'],[g.setSpritePenguin(),'"penguin"'],[g.setSpriteBat(),'"bat"'],[g.setSpriteBird(),'"bird"'],[g.setSpriteDragon(),'"dragon"'],[g.setSpriteSquirrel(),'"squirrel"'],[g.setSpriteWizard(),'"wizard"'],[g.setSpriteAlien(),'"alien"'],[g.setSpriteGhost(),'"ghost"'],[g.setSpriteMonster(),'"monster"'],[g.setSpriteRobot(),'"robot"'],[g.setSpriteUnicorn(),'"unicorn"'],[g.setSpriteZombie(),'"zombie"'],[g.setSpriteKnight(),'"knight"'],[g.setSpriteNinja(),'"ninja"'],[g.setSpritePirate(),'"pirate"'],[g.setSpriteCaveBoy(),'"caveboy"'],[g.setSpriteCaveGirl(),'"cavegirl"'],[g.setSpritePrincess(),'"princess"'],[g.setSpriteSpacebot(),'"spacebot"'],[g.setSpriteSoccerGirl(),'"soccergirl"'],[g.setSpriteSoccerBoy(),'"soccerboy"'],[g.setSpriteTennisGirl(),'"tennisgirl"'],[g.setSpriteTennisBoy(),'"tennisboy"']],a.projectileChoices=[[g.projectileBlueFireball(),'"blue_fireball"'],[g.projectilePurpleFireball(),'"purple_fireball"'],[g.projectileRedFireball(),'"red_fireball"'],[g.projectileYellowHearts(),'"yellow_hearts"'],[g.projectilePurpleHearts(),'"purple_hearts"'],[g.projectileRedHearts(),'"red_hearts"'],[g.projectileRandom(),i]],a.itemChoices=[[g.itemBlueFireball(),'"item_blue_fireball"'],[g.itemPurpleFireball(),'"item_purple_fireball"'],[g.itemRedFireball(),'"item_red_fireball"'],[g.itemYellowHearts(),'"item_yellow_hearts"'],[g.itemPurpleHearts(),'"item_purple_hearts"'],[g.itemRedHearts(),'"item_red_hearts"'],[g.itemRandom(),i]]}var f=a("../skins"),g=a("./locale"),h=a("./constants"),i=h.RANDOM_VALUE,j=h.HIDDEN_VALUE;h.CLICK_VALUE,h.VISIBLE_VALUE;c.load=function(a,b){var c=f.load(a,b);switch(c.ProjectileClassNames=["blue_fireball","purple_fireball","red_fireball","purple_hearts","red_hearts","yellow_hearts"],c.ItemClassNames=["item_blue_fireball","item_purple_fireball","item_red_fireball","item_purple_hearts","item_red_hearts","item_yellow_hearts"],c.yellow_hearts=c.assetUrl("yellow_hearts.gif"),c.purple_hearts=c.assetUrl("purple_hearts.gif"),c.red_hearts=c.assetUrl("red_hearts.gif"),c.blue_fireball=c.assetUrl("blue_fireball.png"),c.purple_fireball=c.assetUrl("purple_fireball.png"),c.red_fireball=c.assetUrl("red_fireball.png"),c.item_yellow_hearts=c.assetUrl("yellow_hearts.gif"),c.item_purple_hearts=c.assetUrl("purple_hearts.gif"),c.item_red_hearts=c.assetUrl("red_hearts.gif"),c.item_blue_fireball=c.assetUrl("blue_fireball.png"),c.item_purple_fireball=c.assetUrl("purple_fireball.png"),c.item_red_fireball=c.assetUrl("red_fireball.png"),c.whenUp=c.assetUrl("when-up.png"),c.whenDown=c.assetUrl("when-down.png"),c.whenLeft=c.assetUrl("when-left.png"),c.whenRight=c.assetUrl("when-right.png"),c.collide=c.assetUrl("when-sprite-collide.png"),c.emotionAngry=c.assetUrl("emotion-angry.png"),c.emotionNormal=c.assetUrl("emotion-nothing.png"),c.emotionSad=c.assetUrl("emotion-sad.png"),c.emotionHappy=c.assetUrl("emotion-happy.png"),c.speechBubble=c.assetUrl("say-sprite.png"),c.goal=c.assetUrl("goal.png"),c.goalSuccess=c.assetUrl("goal_success.png"),c.rubberSound=[c.assetUrl("wall.mp3"),c.assetUrl("wall.ogg")],c.flagSound=[c.assetUrl("win_goal.mp3"),c.assetUrl("win_goal.ogg")],c.crunchSound=[c.assetUrl("wall0.mp3"),c.assetUrl("wall0.ogg")],c.winPointSound=[c.assetUrl("1_we_win.mp3"),c.assetUrl("1_we_win.ogg")],c.winPoint2Sound=[c.assetUrl("2_we_win.mp3"),c.assetUrl("2_we_win.ogg")],c.losePointSound=[c.assetUrl("1_we_lose.mp3"),c.assetUrl("1_we_lose.ogg")],c.losePoint2Sound=[c.assetUrl("2_we_lose.mp3"),c.assetUrl("2_we_lose.ogg")],c.goal1Sound=[c.assetUrl("1_goal.mp3"),c.assetUrl("1_goal.ogg")],c.goal2Sound=[c.assetUrl("2_goal.mp3"),c.assetUrl("2_goal.ogg")],c.woodSound=[c.assetUrl("1_paddle_bounce.mp3"),c.assetUrl("1_paddle_bounce.ogg")],c.retroSound=[c.assetUrl("2_paddle_bounce.mp3"),c.assetUrl("2_paddle_bounce.ogg")],c.slapSound=[c.assetUrl("1_wall_bounce.mp3"),c.assetUrl("1_wall_bounce.ogg")],c.hitSound=[c.assetUrl("2_wall_bounce.mp3"),c.assetUrl("2_wall_bounce.ogg")],c.background=c.assetUrl("background.png"),c.spriteHeight=100,c.spriteWidth=100,c.dropdownThumbnailWidth=50,c.dropdownThumbnailHeight=50,c.preloadAssets=!0,c.id){case"infinity":d(c,a);break;case"studio":e(c,a)}return c}},{"../skins":271,"./constants":279,"./locale":285}],284:[function(a,b,c){function d(a){var b={};return a.sprite&&(b.SPRITE=a.sprite),a.requiredText&&(b.TEXT=a.requiredText),a.notDefaultText&&(b.TEXT=e.helloWorld()),[{test:function(b){return"studio_saySprite"!==b.type?!1:a.sprite&&b.getTitleValue("SPRITE")!==a.sprite?!1:(a.notDefaultText||a.requiredText)&&b.getTitleValue("TEXT")===e.defaultSayText()?!1:!0},type:"studio_saySprite",titles:b}]}var e=a("./locale"),f=a("../utils"),g=a("../block_utils"),h=a("./constants"),i=(h.Direction,h.Emotions),j=g.createToolbox,k=g.blockOfType,l=g.createCategory,m=k("studio_moveNorthDistance")+k("studio_moveEastDistance")+k("studio_moveSouthDistance")+k("studio_moveWestDistance"),n=(k("studio_moveNorth")+k("studio_moveEast")+k("studio_moveSouth")+k("studio_moveWest"),b.exports={});n.custom={ideal:1/0,requiredBlocks:[],scale:{snapRadius:2},startBlocks:""},n.dog_hello={ideal:2,requiredBlocks:[d({notDefaultText:!0})],scale:{snapRadius:2},map:[[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0],[0,0,0,16,0,0,0,0],[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0]],goal:{successCondition:function(){return Studio.sayComplete>0}},timeoutFailureTick:100,toolbox:j(k("studio_saySprite")),startBlocks:'<block type="when_run" deletable="false" x="20" y="20"></block>'},n.k1_1=f.extend(n.dog_hello,{isK1:!0,toolbox:j(k("studio_saySprite"))}),n.c2_1=f.extend(n.dog_hello),n.c3_story_1=f.extend(n.dog_hello),n.playlab_1=f.extend(n.dog_hello,{background:"winter",timeoutFailureTick:null,timeoutAfterWhenRun:!0,firstSpriteIndex:2,goal:{successCondition:function(){return Studio.allWhenRunBlocksComplete()&&Studio.sayComplete>0}},requiredBlocks:[d({requiredText:e.hello()})]}),n.dog_and_cat_hello={ideal:3,requiredBlocks:[d({sprite:"0",notDefaultText:!0}),d({sprite:"1",notDefaultText:!0})],scale:{snapRadius:2},map:[[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0],[0,0,16,0,0,16,0,0],[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0]],goal:{successCondition:function(){return Studio.sayComplete>1}},timeoutFailureTick:200,toolbox:j(k("studio_saySprite")),startBlocks:'<block type="when_run" deletable="false" x="20" y="20"></block>'},n.k1_2=f.extend(n.dog_and_cat_hello,{isK1:!0,toolbox:j(k("studio_saySprite"))}),n.c2_2=f.extend(n.dog_and_cat_hello,{}),n.c3_story_2=f.extend(n.dog_and_cat_hello,{}),n.playlab_2=f.extend(n.dog_and_cat_hello,{background:"desert",firstSpriteIndex:20,timeoutFailureTick:null,timeoutAfterWhenRun:!0,defaultEmotion:i.HAPPY,goal:{successCondition:function(){return Studio.allWhenRunBlocksComplete()&&Studio.sayComplete>1}},requiredBlocks:[d({sprite:"0",requiredText:e.hello()}),d({sprite:"1",requiredText:e.hello()})],map:[[0,0,0,0,0,0,0,0],[0,0,0,0,0,16,0,0],[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0],[0,16,0,0,0,0,0,0],[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0]]}),n.dog_move_cat={ideal:2,requiredBlocks:[[{test:"moveDistance",type:"studio_moveDistance",titles:{DIR:"2"}}]],scale:{snapRadius:2},map:[[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0],[0,0,16,0,0,16,0,0],[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0]],goal:{successCondition:function(){return Studio.sprite[0].isCollidingWith(1)}},timeoutFailureTick:100,toolbox:j('<block type="studio_moveDistance"><title name="DIR">2</title></block>'+k("studio_saySprite")),startBlocks:'<block type="when_run" deletable="false" x="20" y="20"></block>'},n.k1_3=f.extend(n.dog_move_cat,{isK1:!0,requiredBlocks:[[{test:function(a){return"studio_moveEastDistance"==a.type},type:"studio_moveEastDistance"}]],toolbox:j(m+k("studio_saySprite"))}),n.c2_3=f.extend(n.dog_move_cat,{}),n.c3_story_3=f.extend(n.dog_move_cat,{}),n.playlab_3={ideal:2,requiredBlocks:[[{test:"moveDistance",type:"studio_moveDistance",titles:{DIR:"2",DISTANCE:"200"}}]],timeoutFailureTick:null,timeoutAfterWhenRun:!0,scale:{snapRadius:2},background:"tennis",firstSpriteIndex:26,toolbox:j('<block type="studio_moveDistance"><title name="DIR">1</title><title name="DISTANCE">200</title></block><block type="studio_moveDistance"><title name="DIR">2</title><title name="DISTANCE">200</title></block><block type="studio_moveDistance"><title name="DIR">4</title><title name="DISTANCE">200</title></block><block type="studio_moveDistance"><title name="DIR">8</title><title name="DISTANCE">200</title></block>'),startBlocks:'<block type="when_run" deletable="false" x="20" y="20"></block>',map:[[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0],[0,16,0,0,0,1,0,0],[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0]]},n.dog_move_cat_hello={ideal:4,requiredBlocks:[[{test:"moveDistance",type:"studio_moveDistance",titles:{DIR:"2",DISTANCE:"100"}}],d({sprite:"1",requiredText:e.hello()})],scale:{snapRadius:2},map:[[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0],[0,0,16,0,0,16,0,0],[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0]],goal:{successCondition:function(){return Studio.sayComplete>0&&Studio.sprite[0].isCollidingWith(1)}},timeoutFailureTick:200,toolbox:j('<block type="studio_moveDistance"><title name="DIR">2</title></block>'+k("studio_saySprite")),startBlocks:'<block type="when_run" deletable="false" x="20" y="20"></block>     <block type="studio_whenSpriteCollided" deletable="false" x="20" y="120"></block>'},n.k1_4=f.extend(n.dog_move_cat_hello,{isK1:!0,requiredBlocks:[[{test:function(a){return"studio_moveEastDistance"==a.type},type:"studio_moveEastDistance"}],[{test:function(a){return"studio_saySprite"==a.type&&"1"===a.getTitleValue("SPRITE")&&a.getTitleValue("TEXT")!==e.defaultSayText()},type:"studio_saySprite",titles:{TEXT:e.hello(),SPRITE:"1"}}]],toolbox:j(m+k("studio_saySprite")),startBlocks:'<block type="when_run" deletable="false" x="20" y="20"></block>      <block type="studio_whenSpriteCollided" deletable="false" x="20" y="140"></block>'}),n.c2_4=f.extend(n.dog_move_cat_hello,{}),n.c3_story_4=f.extend(n.dog_move_cat_hello,{}),n.playlab_4={ideal:4,scale:{snapRadius:2},background:"tennis",avatarList:["tennisboy","tennisgirl"],defaultEmotion:i.SAD,requiredBlocks:[[{test:"moveDistance",type:"studio_moveDistance",titles:{DIR:"4",DISTANCE:"200"}}],[{test:"playSound",type:"studio_playSound",titles:{SOUND:"goal1"}}]],timeoutFailureTick:100,timeoutAfterWhenRun:!0,goal:{successCondition:function(){return Studio.playSoundCount>0&&Studio.sprite[0].isCollidingWith(1)}},toolbox:j('<block type="studio_moveDistance"><title name="DIR">1</title><title name="DISTANCE">200</title></block><block type="studio_moveDistance"><title name="DIR">2</title><title name="DISTANCE">200</title></block><block type="studio_moveDistance"><title name="DIR">4</title><title name="DISTANCE">200</title></block><block type="studio_moveDistance"><title name="DIR">8</title><title name="DISTANCE">200</title></block><block type="studio_playSound"><title name="SOUND">goal1</title></block>'),startBlocks:'<block type="when_run" deletable="false" x="20" y="20"></block><block type="studio_whenSpriteCollided" deletable="false" x="20" y="120"></block>',map:[[0,0,0,0,0,0,0,0],[0,0,0,16,0,0,0,0],[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0],[0,0,0,16,0,0,0,0],[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0]]},n.click_hello={ideal:3,requiredBlocks:[d({requiredText:e.hello()})],scale:{snapRadius:2},map:[[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0],[0,0,0,16,0,0,0,0],[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0]],firstSpriteIndex:4,goal:{successCondition:function(){return this.successState.seenCmd||(this.successState.seenCmd=Studio.isCmdCurrentInQueue("saySprite","whenSpriteClicked-0")),Studio.sayComplete>0&&this.successState.seenCmd}},timeoutFailureTick:300,toolbox:j('<block type="studio_moveDistance"><title name="DIR">2</title></block>'+k("studio_saySprite")),startBlocks:'<block type="when_run" deletable="false" x="20" y="20"></block>     <block type="studio_whenSpriteClicked" deletable="false" x="20" y="120"></block>'},n.c2_5=f.extend(n.click_hello,{}),n.c3_game_1=f.extend(n.click_hello,{}),n.playlab_5=f.extend(n.click_hello,{background:"space",firstSpriteIndex:23,timeoutAfterWhenRun:!0,defaultEmotion:i.HAPPY,toolbox:j(k("studio_saySprite")),startBlocks:'<block type="studio_whenSpriteClicked" deletable="false" x="20" y="20"></block>'}),n.octopus_happy={ideal:2,requiredBlocks:[[{test:"setSpriteEmotion",type:"studio_setSpriteEmotion"}]],scale:{snapRadius:2},map:[[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0],[0,0,0,16,0,0,0,0],[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0]],firstSpriteIndex:4,goal:{successCondition:function(){return Studio.sprite[0].emotion===i.HAPPY&&Studio.tickCount>=50}},timeoutFailureTick:100,toolbox:j('<block type="studio_moveDistance"><title name="DIR">2</title></block>'+k("studio_setSpriteEmotion")),startBlocks:'<block type="when_run" deletable="false" x="20" y="20"></block>'},n.k1_5=f.extend(n.octopus_happy,{isK1:!0,toolbox:j(m+k("studio_setSpriteEmotion"))}),n.c3_story_5=f.extend(n.octopus_happy,{}),n.c3_story_6={ideal:1/0,requiredBlocks:[],scale:{snapRadius:2},minWorkspaceHeight:1400,edgeCollisions:!0,projectileCollisions:!0,allowSpritesOutsidePlayspace:!1,spritesHiddenToStart:!0,freePlay:!0,map:[[0,16,0,0,0,16,0,0],[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0],[0,16,0,0,0,16,0,0],[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0],[0,16,0,0,0,16,0,0],[0,0,0,0,0,0,0,0]],toolbox:j(k("studio_setSprite")+k("studio_setBackground")+k("studio_whenSpriteCollided")+k("studio_repeatForever")+k("studio_showTitleScreen")+k("studio_move")+k("studio_moveDistance")+k("studio_stop")+k("studio_wait")+k("studio_playSound")+k("studio_changeScore")+k("studio_saySprite")+k("studio_setSpritePosition")+k("studio_setSpriteSpeed")+k("studio_setSpriteEmotion")),startBlocks:'<block type="when_run" deletable="false" x="20" y="20"></block>'},n.move_penguin={ideal:8,requiredBlocks:[[{test:"move",type:"studio_move"}]],scale:{snapRadius:2},softButtons:["leftButton","rightButton","downButton","upButton"],map:[[0,0,0,0,0,0,0,0],[1,0,0,0,0,1,0,0],[0,0,0,0,0,0,0,0],[0,0,16,0,0,0,0,0],[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0],[0,1,0,0,0,0,1,0],[0,0,0,0,0,0,0,0]],firstSpriteIndex:2,toolbox:j(k("studio_move")+k("studio_saySprite")),startBlocks:'<block type="studio_whenLeft" deletable="false" x="20" y="20"></block>     <block type="studio_whenRight" deletable="false" x="180" y="20"></block>     <block type="studio_whenUp" deletable="false" x="20" y="120"></block>     <block type="studio_whenDown" deletable="false" x="180" y="120"></block>'},n.c2_6=f.extend(n.move_penguin,{}),n.c3_game_2=f.extend(n.move_penguin,{}),n.playlab_6=f.extend(n.move_penguin,{background:"cave",firstSpriteIndex:5,goalOverride:{goal:"red_fireball",success:"blue_fireball",imageWidth:800},defaultEmotion:i.ANGRY,toolbox:j(k("studio_move",{DIR:8})+k("studio_move",{DIR:2})+k("studio_move",{DIR:1})+k("studio_move",{DIR:4})),map:[[1,0,0,0,0,0,1,0],[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0],[0,0,0,16,0,0,0,0],[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0],[1,0,0,0,0,0,1,0],[0,0,0,0,0,0,0,0]]}),n.dino_up_and_down={ideal:11,requiredBlocks:[[{test:"moveDistance",type:"studio_moveDistance",titles:{SPRITE:"1",DISTANCE:"400"}}]],scale:{snapRadius:2},softButtons:["leftButton","rightButton","downButton","upButton"],map:[[0,0,0,0,1,0,0,0],[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0],[16,0,0,0,16,0,0,0],[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0],[0,0,0,0,1,0,0,0],[0,0,0,0,0,0,0,0]],firstSpriteIndex:2,protagonistSpriteIndex:1,timeoutFailureTick:150,minWorkspaceHeight:800,toolbox:j('<block type="studio_moveDistance">          <title name="DISTANCE">400</title>          <title name="SPRITE">1</title></block><block type="studio_saySprite">          <title name="SPRITE">1</title></block>'),startBlocks:'<block type="studio_whenLeft" deletable="false" x="20" y="20">       <next><block type="studio_move">               <title name="DIR">8</title></block>       </next></block>     <block type="studio_whenRight" deletable="false" x="20" y="150">       <next><block type="studio_move">               <title name="DIR">2</title></block>       </next></block>     <block type="studio_whenUp" deletable="false" x="20" y="280">       <next><block type="studio_move">               <title name="DIR">1</title></block>       </next></block>     <block type="studio_whenDown" deletable="false" x="20" y="410">       <next><block type="studio_move">               <title name="DIR">4</title></block>       </next></block>     <block type="studio_repeatForever" deletable="false" x="20" y="540"></block>'},n.c2_7=f.extend(n.dino_up_and_down,{}),n.c3_game_3=f.extend(n.dino_up_and_down,{}),n.playlab_7={ideal:3,background:"rainbow",firstSpriteIndex:10,scale:{snapRadius:2},softButtons:["leftButton","rightButton","downButton","upButton"],defaultEmotion:i.HAPPY,map:[[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0],[16,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0]],goal:{successCondition:function(){return 252===Studio.tickCount}},timeoutFailureTick:253,minWorkspaceHeight:800,toolbox:j('<block type="studio_moveDistance"><title name="DIR">1</title><title name="DISTANCE">400</title></block><block type="studio_moveDistance"><title name="DIR">2</title><title name="DISTANCE">400</title></block><block type="studio_moveDistance"><title name="DIR">4</title><title name="DISTANCE">400</title></block><block type="studio_moveDistance"><title name="DIR">8</title><title name="DISTANCE">400</title></block>'),startBlocks:'<block type="studio_repeatForever" deletable="false" x="20" y="20"></block>',requiredBlocks:[[{test:function(a){return"studio_moveDistance"===a.type&&"2"===a.getTitleValue("DIR")},type:"studio_moveDistance",titles:{DIR:2,DISTANCE:"400"}}],[{test:function(a){return"studio_moveDistance"===a.type&&"8"===a.getTitleValue("DIR")},type:"studio_moveDistance",titles:{DIR:8,DISTANCE:"400"}}]]},n.penguin_ouch={ideal:14,requiredBlocks:[d({sprite:"0",requiredText:e.ouchExclamation()}),[{test:"playSound",type:"studio_playSound"}]],scale:{snapRadius:2},softButtons:["leftButton","rightButton","downButton","upButton"],map:[[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0],[16,0,0,0,16,0,0,0],[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0]],firstSpriteIndex:2,minWorkspaceHeight:900,goal:{successCondition:function(){return Studio.sprite[0].isCollidingWith(1)}},timeoutFailureTick:300,toolbox:j('<block type="studio_moveDistance">          <title name="DISTANCE">400</title>          <title name="SPRITE">1</title></block>'+k("studio_saySprite")+k("studio_playSound")),startBlocks:'<block type="studio_whenLeft" deletable="false" x="20" y="20">       <next><block type="studio_move">               <title name="DIR">8</title></block>       </next></block>     <block type="studio_whenRight" deletable="false" x="20" y="150">       <next><block type="studio_move">               <title name="DIR">2</title></block>       </next></block>     <block type="studio_whenUp" deletable="false" x="20" y="280">       <next><block type="studio_move">               <title name="DIR">1</title></block>       </next></block>     <block type="studio_whenDown" deletable="false" x="20" y="410">       <next><block type="studio_move">               <title name="DIR">4</title></block>       </next></block>     <block type="studio_repeatForever" deletable="false" x="20" y="540">       <statement name="DO"><block type="studio_moveDistance">               <title name="SPRITE">1</title>               <title name="DISTANCE">400</title>         <next><block type="studio_moveDistance">                 <title name="SPRITE">1</title>                 <title name="DISTANCE">400</title>                 <title name="DIR">4</title></block>         </next></block>     </statement></block>     <block type="studio_whenSpriteCollided" deletable="false" x="20" y="730"></block>'},n.c2_8=f.extend(n.penguin_ouch,{}),n.c3_game_4=f.extend(n.penguin_ouch,{}),n.penguin_touch_octopus={ideal:16,requiredBlocks:[[{test:"changeScore",type:"studio_changeScore"}]],scale:{snapRadius:2},softButtons:["leftButton","rightButton","downButton","upButton"],map:[[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0],[16,0,0,0,16,0,16,0],[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0]],firstSpriteIndex:2,minWorkspaceHeight:1050,goal:{successCondition:function(){return Studio.sprite[0].isCollidingWith(2)}},timeoutFailureTick:600,toolbox:j('<block type="studio_moveDistance">          <title name="DISTANCE">400</title>          <title name="SPRITE">1</title></block>'+k("studio_saySprite")+k("studio_playSound")+k("studio_changeScore")),startBlocks:'<block type="studio_whenLeft" deletable="false" x="20" y="20">       <next><block type="studio_move">               <title name="DIR">8</title></block>       </next></block>     <block type="studio_whenRight" deletable="false" x="20" y="150">       <next><block type="studio_move">               <title name="DIR">2</title></block>       </next></block>     <block type="studio_whenUp" deletable="false" x="20" y="280">       <next><block type="studio_move">               <title name="DIR">1</title></block>       </next></block>     <block type="studio_whenDown" deletable="false" x="20" y="410">       <next><block type="studio_move">               <title name="DIR">4</title></block>       </next></block>     <block type="studio_repeatForever" deletable="false" x="20" y="540">       <statement name="DO"><block type="studio_moveDistance">               <title name="SPRITE">1</title>               <title name="DISTANCE">400</title>         <next><block type="studio_moveDistance">                 <title name="SPRITE">1</title>                 <title name="DISTANCE">400</title>                 <title name="DIR">4</title></block>         </next></block>     </statement></block>     <block type="studio_whenSpriteCollided" deletable="false" x="20" y="730">       <next><block type="studio_playSound">       <next><block type="studio_saySprite">               <title name="TEXT">Ouch!</title></block>       </next></block>       </next></block>     <block type="studio_whenSpriteCollided" deletable="false" x="20" y="860">      <title name="SPRITE2">2</title></block>'},n.c2_9=f.extend(n.penguin_touch_octopus,{}),n.c3_game_5=f.extend(n.penguin_touch_octopus,{}),n.playlab_8={background:"rainbow",ideal:16,requiredBlocks:[[{test:"changeScore",type:"studio_changeScore"}],[{test:"playSound",type:"studio_playSound",titles:{SOUND:"winpoint"}}]],scale:{snapRadius:2},softButtons:["leftButton","rightButton","downButton","upButton"],map:[[0,0,0,0,0,0,0,0],[0,0,0,16,0,0,0,0],[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0],[16,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0]],avatarList:["unicorn","wizard"],defaultEmotion:i.HAPPY,goal:{successCondition:function(){return Studio.sprite[0].isCollidingWith(1)&&1===Studio.playerScore},failureCondition:function(){return Studio.sprite[0].isCollidingWith(1)&&1!==Studio.playerScore}},timeoutFailureTick:600,toolbox:j(k("studio_changeScore")+'<block type="studio_playSound"><title name="SOUND">winpoint</title></block>'),startBlocks:'<block type="studio_whenSpriteCollided" deletable="false" x="20" y="20"></block><block type="studio_repeatForever" deletable="false" x="20" y="150"><statement name="DO">'+g.blockWithNext("studio_moveDistance",{SPRITE:1,DIR:2,DISTANCE:400},k("studio_moveDistance",{SPRITE:1,DIR:8,DISTANCE:400}))+'</statement></block><block type="studio_whenLeft" deletable="false" x="20" y="300"><next>'+k("studio_move",{SPRITE:0,DIR:8})+'</next></block><block type="studio_whenRight" deletable="false" x="20" y="400"><next>'+k("studio_move",{SPRITE:0,DIR:2})+'</next></block><block type="studio_whenUp" deletable="false" x="20" y="500"><next>'+k("studio_move",{SPRITE:0,DIR:1})+'</next></block><block type="studio_whenDown" deletable="false" x="20" y="600"><next>'+k("studio_move",{SPRITE:0,DIR:4})+"</next></block>"},n.change_background_and_speed={ideal:19,requiredBlocks:[[{test:"setBackground",type:"studio_setBackground",titles:{VALUE:'"night"'}}],[{test:"setSpriteSpeed",type:"studio_setSpriteSpeed",titles:{VALUE:"Studio.SpriteSpeed.FAST"}}]],scale:{snapRadius:2},softButtons:["leftButton","rightButton","downButton","upButton"],map:[[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0],[16,0,0,0,16,0,16,0],[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0]],firstSpriteIndex:2,minWorkspaceHeight:1250,goal:{successCondition:function(){return Studio.sprite[0].isCollidingWith(2)}},timeoutFailureTick:600,toolbox:j(k("studio_setBackground",{VALUE:'"night"'})+k("studio_moveDistance",{DISTANCE:400,SPRITE:1})+k("studio_saySprite")+k("studio_playSound")+k("studio_changeScore")+k("studio_setSpriteSpeed",{VALUE:"Studio.SpriteSpeed.FAST"})),startBlocks:'<block type="when_run" deletable="false" x="20" y="20"></block><block type="studio_whenLeft" deletable="false" x="20" y="200"><next>'+k("studio_move",{DIR:8})+'</next></block><block type="studio_whenRight" deletable="false" x="20" y="330"><next>'+k("studio_move",{DIR:2})+'</next></block><block type="studio_whenUp" deletable="false" x="20" y="460"><next>'+k("studio_move",{DIR:1})+'</next></block><block type="studio_whenDown" deletable="false" x="20" y="590"><next>'+k("studio_move",{DIR:4})+'</next></block><block type="studio_repeatForever" deletable="false" x="20" y="720"><statement name="DO">'+g.blockWithNext("studio_moveDistance",{SPRITE:1,DIR:1,DISTANCE:400},k("studio_moveDistance",{SPRITE:1,DIR:4,DISTANCE:400}))+'</statement></block><block type="studio_whenSpriteCollided" deletable="false" x="20" y="880"><title name="SPRITE2">1</title><next>'+g.blockWithNext("studio_playSound",{},k("studio_saySprite",{TEXT:e.ouchExclamation()}))+'</next></block><block type="studio_whenSpriteCollided" deletable="false" x="20" y="1040"><title name="SPRITE2">2</title><next>'+k("studio_changeScore")+"</next></block>"},n.c2_10=f.extend(n.change_background_and_speed,{}),n.c3_game_6=f.extend(n.change_background_and_speed,{}),n.playlab_9={background:"black",requiredBlocks:[[{test:"setBackground",type:"studio_setBackground",titles:{VALUE:'"space"'}}],[{test:"setSpriteSpeed",type:"studio_setSpriteSpeed",titles:{VALUE:"Studio.SpriteSpeed.FAST"}}]],timeoutFailureTick:400,scale:{snapRadius:2},defaultEmotion:i.ANGRY,softButtons:["leftButton","rightButton","downButton","upButton"],avatarList:["spacebot","alien"],goal:{successCondition:function(){return Studio.sprite[0].isCollidingWith(1)}},map:[[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0],[16,0,0,0,0,0,16,0],[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0]],toolbox:j(k("studio_setSpriteSpeed",{VALUE:"Studio.SpriteSpeed.FAST"})+k("studio_setBackground",{VALUE:'"space"'})+k("studio_moveDistance",{DISTANCE:400,SPRITE:1})+k("studio_saySprite")+k("studio_playSound",{SOUND:"winpoint2"})+k("studio_changeScore")),minWorkspaceHeight:1250,startBlocks:'<block type="when_run" deletable="false" x="20" y="20"></block><block type="studio_repeatForever" deletable="false" x="20" y="150"><statement name="DO">'+g.blockWithNext("studio_moveDistance",{SPRITE:1,DIR:1,DISTANCE:400},k("studio_moveDistance",{SPRITE:1,DIR:4,DISTANCE:400}))+'</statement></block><block type="studio_whenSpriteCollided" deletable="false" x="20" y="290"><title name="SPRITE2">0</title><title name="SPRITE2">1</title><next>'+g.blockWithNext("studio_playSound",{SOUND:"winpoint2"},k("studio_saySprite",{TEXT:e.alienInvasion()}))+'</next></block><block type="studio_whenLeft" deletable="false" x="20" y="410"><next>'+k("studio_move",{DIR:8})+'</next></block><block type="studio_whenRight" deletable="false" x="20" y="510"><next>'+k("studio_move",{DIR:2})+'</next></block><block type="studio_whenUp" deletable="false" x="20" y="610"><next>'+k("studio_move",{DIR:1})+'</next></block><block type="studio_whenDown" deletable="false" x="20" y="710"><next>'+k("studio_move",{DIR:4})+"</next></block>"},n.sandbox={ideal:1/0,requiredBlocks:[],scale:{snapRadius:2},softButtons:["leftButton","rightButton","downButton","upButton"],minWorkspaceHeight:1400,edgeCollisions:!0,projectileCollisions:!0,allowSpritesOutsidePlayspace:!1,spritesHiddenToStart:!0,freePlay:!0,map:[[0,16,0,0,0,16,0,0],[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0],[0,16,0,0,0,16,0,0],[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0],[0,16,0,0,0,16,0,0],[0,0,0,0,0,0,0,0]],toolbox:j(k("studio_setSprite")+k("studio_setBackground")+k("studio_whenArrow")+k("studio_whenSpriteClicked")+k("studio_whenSpriteCollided")+k("studio_repeatForever")+k("studio_showTitleScreen")+k("studio_move")+k("studio_moveDistance")+k("studio_stop")+k("studio_wait")+k("studio_playSound")+k("studio_changeScore")+k("studio_saySprite")+k("studio_setSpritePosition")+k("studio_throw")+k("studio_makeProjectile")+k("studio_setSpriteSpeed")+k("studio_setSpriteEmotion")+k("studio_vanish")),startBlocks:'<block type="when_run" deletable="false" x="20" y="20"></block>'},n.c2_11=f.extend(n.sandbox,{}),n.c3_game_7=f.extend(n.sandbox,{}),n.playlab_10=f.extend(n.sandbox,{}),n.k1_6={ideal:1/0,requiredBlocks:[],scale:{snapRadius:2},minWorkspaceHeight:1500,spritesHiddenToStart:!0,freePlay:!0,map:[[16,0,16,0,16,0,16,0],[0,16,0,16,0,16,0,0],[16,0,16,0,16,0,16,0],[0,16,0,16,0,16,0,0],[16,0,16,0,16,0,16,0],[0,16,0,16,0,16,0,0],[16,16,16,16,16,16,16,0],[0,0,0,0,0,0,0,0]],isK1:!0,softButtons:[],toolbox:j(k("studio_setSprite")+k("studio_saySprite")+m+k("studio_whenSpriteCollided")+k("studio_setBackground")+k("studio_setSpriteSpeed")+k("studio_setSpriteEmotion")+k("studio_playSound")+k("studio_vanish")),startBlocks:'<block type="when_run" deletable="false" x="20" y="20">      <next><block type="studio_setSprite">         <title name="SPRITE">0</title></block>       </next></block>'},n.k1_block_test=f.extend(n[99],{toolbox:j(k("studio_setSprite")+k("studio_moveNorth")+k("studio_moveSouth")+k("studio_moveEast")+k("studio_moveWest")+k("studio_moveNorth_length")+k("studio_moveSouth_length")+k("studio_moveEast_length")+k("studio_moveWest_length")),isK1:!0}),n.full_sandbox={scrollbars:!0,requiredBlocks:[],scale:{snapRadius:2},softButtons:["leftButton","rightButton","downButton","upButton"],minWorkspaceHeight:1400,edgeCollisions:!0,projectileCollisions:!0,allowSpritesOutsidePlayspace:!0,spritesHiddenToStart:!0,freePlay:!0,map:[[0,16,0,0,0,16,0,0],[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0],[0,16,0,0,0,16,0,0],[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0],[0,16,0,0,0,16,0,0],[0,0,0,0,0,0,0,0]],toolbox:j(l(e.catActions(),k("studio_setSprite")+k("studio_setBackground")+'<block type="studio_showTitleScreenParams">                         <value name="TITLE"><block type="text"></block>                         </value>                         <value name="TEXT"><block type="text"></block>                         </value></block>'+k("studio_move")+'<block type="studio_moveDistanceParams" inline="true">                       <value name="DISTANCE"><block type="math_number">                               <title name="NUM">25</title></block>                       </value></block>'+k("studio_stop")+'<block type="studio_waitParams" inline="true">                         <value name="VALUE"><block type="math_number">                                 <title name="NUM">1</title></block>                         </value></block>'+k("studio_playSound")+'<block type="studio_setScoreText" inline="true">                         <value name="TEXT"><block type="text"></block>                         </value></block><block type="studio_saySpriteParams" inline="true">                         <value name="TEXT"><block type="text"></block>                         </value></block>'+k("studio_setSpritePosition")+k("studio_addItems")+k("studio_throw")+k("studio_makeProjectile")+k("studio_setSpriteSpeed")+k("studio_setSpriteEmotion")+k("studio_vanish")+k("studio_setSpriteSize")+k("studio_showCoordinates"))+l(e.catEvents(),k("studio_whenArrow")+k("studio_whenSpriteClicked")+k("studio_whenSpriteCollided"))+l(e.catControl(),k("studio_repeatForever")+'<block type="controls_repeat_ext">                           <value name="TIMES">                             <block type="math_number">                               <title name="NUM">10</title>                             </block>                           </value>                         </block>'+k("controls_whileUntil")+'<block type="controls_for">                           <value name="FROM">                             <block type="math_number">                               <title name="NUM">1</title>                             </block>                           </value>                           <value name="TO">                             <block type="math_number">                               <title name="NUM">10</title>                             </block>                           </value>                           <value name="BY">                             <block type="math_number">                               <title name="NUM">1</title>                             </block>                           </value>                         </block>'+k("controls_flow_statements"))+l(e.catLogic(),k("controls_if")+k("logic_compare")+k("logic_operation")+k("logic_negate")+k("logic_boolean"))+l(e.catMath(),k("math_number")+'<block type="math_change">                           <value name="DELTA">                             <block type="math_number">                               <title name="NUM">1</title>                             </block>                           </value>                         </block><block type="math_random_int">                           <value name="FROM">                             <block type="math_number">                               <title name="NUM">1</title>                             </block>                           </value>                           <value name="TO">                             <block type="math_number">                               <title name="NUM">100</title>                             </block>                           </value>                         </block>'+k("math_arithmetic"))+l(e.catText(),k("text")+k("text_join")+'<block type="text_append">                           <value name="TEXT">                             <block type="text"></block>                           </value>                         </block>')+l(e.catVariables(),"","VARIABLE")+l(e.catProcedures(),"","PROCEDURE")+l("Functional",k("functional_string")+k("functional_background_string_picker")+k("functional_math_number")+'<block type="functional_math_number_dropdown"><title name="NUM" config="2,3,4,5,6,7,8,9,10,11,12">???</title></block>')+l("Functional Start",k("functional_start_setSpeeds")+k("functional_start_setBackgroundAndSpeeds"))+l("Functional Logic",k("functional_greater_than")+k("functional_less_than")+k("functional_number_equals")+k("functional_string_equals")+k("functional_logical_and")+k("functional_logical_or")+k("functional_logical_not")+k("functional_boolean"))),
startBlocks:'<block type="when_run" deletable="false" x="20" y="20"></block>'},n.full_sandbox_infinity=f.extend(n.full_sandbox,{}),n.ec_sandbox=f.extend(n.sandbox,{editCode:!0,map:[[0,16,0,0,0,16,0,32],[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0],[0,16,0,0,0,16,0,0],[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0],[0,16,0,0,0,16,0,0],[0,0,0,0,0,0,0,0]],codeFunctions:{setSprite:null,setBackground:null,move:null,playSound:null,changeScore:null,setSpritePosition:null,setSpriteSpeed:null,setSpriteEmotion:null,throwProjectile:null,vanish:null,onEvent:null,forLoop_i_0_4:null,ifBlock:null,ifElseBlock:null,whileBlock:null,addOperator:null,subtractOperator:null,multiplyOperator:null,divideOperator:null,equalityOperator:null,inequalityOperator:null,greaterThanOperator:null,lessThanOperator:null,andOperator:null,orOperator:null,notOperator:null,randomNumber_max:null,randomNumber_min_max:null,mathRound:null,mathAbs:null,mathMax:null,mathMin:null,declareAssign_x:null,assign_x:null,declareAssign_x_array_1_4:null,declareAssign_x_prompt:null,functionParams_none:null,functionParams_n:null,callMyFunction:null,callMyFunction_n:null},startBlocks:""}),n.hoc2015_1={editCode:!0,map:[[4,4,4,4,4,4,4,4],[4,4,4,4,4,4,4,4],[4,4,16,0,256,1,4,4],[4,4,4,4,4,4,4,4],[4,4,4,4,4,4,4,4],[4,4,4,4,4,4,4,4],[4,4,4,4,4,4,4,4],[4,4,4,4,4,4,4,4]],avatarList:["baymax"],wallMapCollisions:!0,blockMovingIntoWalls:!0,gridAlignedMovement:!0,removeItemsWhenActorCollides:!0,slowJsExecutionFactor:10,markerHeight:50,markerWidth:50,codeFunctions:{moveEast:{category:""},moveWest:{category:""},moveNorth:{category:""},moveSouth:{category:""}}},n.hoc2015_2={editCode:!0,map:[[4,4,4,4,4,4,4,4],[4,4,4,4,4,4,4,4],[4,4,4,0,0,256,4,4],[4,4,4,0,4,0,4,4],[4,4,4,1,16,256,4,4],[4,4,4,4,4,4,4,4],[4,4,4,4,4,4,4,4],[4,4,4,4,4,4,4,4]],avatarList:["baymax"],wallMapCollisions:!0,blockMovingIntoWalls:!0,gridAlignedMovement:!0,removeItemsWhenActorCollides:!0,slowJsExecutionFactor:10,markerHeight:50,markerWidth:50,codeFunctions:{moveEast:{category:""},moveWest:{category:""},moveNorth:{category:""},moveSouth:{category:""}}}},{"../block_utils":76,"../utils":323,"./constants":279,"./locale":285}],283:[function(require,module,exports){module.exports=function(){var t=function anonymous(locals,filters,escape){escape=escape||function(a){return String(a).replace(/&(?!\w+;)/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")};var buf=[];with(locals||{})!function(){buf.push("");var a=require("../locale");buf.push("\n\n"),finishButton&&buf.push('\n  <div id="share-cell" class="share-cell-none">\n    <button id="finishButton" class="share">\n      <img src="',escape(assetUrl("media/1x1.gif")),'">',escape(a.finish()),"\n    </button>\n  </div>\n"),buf.push("\n")}();return buf.join("")};return function(a){return t(a,require("ejs").filters)}}()},{"../locale":150,ejs:500}],282:[function(a,b,c){var d=(a("./locale"),a("./apiJavascript.js"));b.exports.blocks=[{func:"setSprite",parent:d,category:"Play Lab",params:["0","'cat'"]},{func:"setBackground",parent:d,category:"Play Lab",params:["'night'"]},{func:"move",parent:d,category:"Play Lab",params:["0","1"]},{func:"moveEast",parent:d,category:"Play Lab"},{func:"moveWest",parent:d,category:"Play Lab"},{func:"moveNorth",parent:d,category:"Play Lab"},{func:"moveSouth",parent:d,category:"Play Lab"},{func:"playSound",parent:d,category:"Play Lab",params:["'slap'"]},{func:"changeScore",parent:d,category:"Play Lab",params:["1"]},{func:"setSpritePosition",parent:d,category:"Play Lab",params:["0","7"]},{func:"setSpriteSpeed",parent:d,category:"Play Lab",params:["0","8"]},{func:"setSpriteEmotion",parent:d,category:"Play Lab",params:["0","1"]},{func:"throwProjectile",parent:d,category:"Play Lab",params:["0","1","'blue_fireball'"]},{func:"vanish",parent:d,category:"Play Lab",params:["0"]},{func:"addItemsToScene",parent:d,category:"Play Lab",params:["'blue_fireball'","5"]},{func:"onEvent",parent:d,category:"Play Lab",params:["'when-left'","function() {\n  \n}"]}],b.exports.categories={"Play Lab":{color:"red",blocks:[]}}},{"./apiJavascript.js":275,"./locale":285}],280:[function(require,module,exports){module.exports=function(){var t=function anonymous(locals,filters,escape){escape=escape||function(a){return String(a).replace(/&(?!\w+;)/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")};var buf=[];with(locals||{})!function(){buf.push("");var a=require("../locale");buf.push('\n\n<div id="soft-buttons" class="soft-buttons-none">\n  <button id="leftButton" class="arrow">\n    <img src="',escape(assetUrl("media/1x1.gif")),'" class="left-btn icon21">\n  </button>\n  <button id="rightButton" class="arrow">\n    <img src="',escape(assetUrl("media/1x1.gif")),'" class="right-btn icon21">\n  </button>\n  <button id="upButton" class="arrow">\n    <img src="',escape(assetUrl("media/1x1.gif")),'" class="up-btn icon21">\n  </button>\n  <button id="downButton" class="arrow">\n    <img src="',escape(assetUrl("media/1x1.gif")),'" class="down-btn icon21">\n  </button>\n</div>\n\n'),finishButton&&buf.push('\n  <div id="share-cell" class="share-cell-none">\n    <button id="finishButton" class="share">\n      <img src="',escape(assetUrl("media/1x1.gif")),'">',escape(a.finish()),"\n    </button>\n  </div>\n"),buf.push("\n")}();return buf.join("")};return function(a){return t(a,require("ejs").filters)}}()},{"../locale":150,ejs:500}],277:[function(a,b,c){"use strict";function d(a){var b=l.range(0,u);return l.map(b,function(b){return[a({spriteIndex:b+1}),b.toString()]})}function e(a,b,c,d,e){a.Blocks.studio_vanish={helpUrl:"",init:function(){this.setHSV(184,1,.74),e.isK1?this.appendDummyInput().appendTitle(g.vanish()).appendTitle(new a.FieldImage(e.skin.explosionThumbnail)).appendTitle(d(),"SPRITE"):this.appendDummyInput().appendTitle(c(g.vanishActorN),"SPRITE"),this.setPreviousStatement(!0),this.setInputsInline(!0),this.setNextStatement(!0),this.setTooltip(g.vanishTooltip())}},b.studio_vanish=function(){var a=this.getTitleValue("SPRITE");return"Studio.vanish('block_id_"+this.id+"', "+a+");\n"}}var f=a("../StudioApp").singleton,g=a("./locale"),h=a("../sharedFunctionalBlocks"),i=a("../locale"),j=(a("../codegen"),a("./constants")),k=a("../utils"),l=k.getLodash(),m=j.Direction,n=j.Position,o=j.Emotions,p=j.RANDOM_VALUE,q=j.HIDDEN_VALUE,r=j.CLICK_VALUE,s=j.VISIBLE_VALUE,t=function(a){var b=a.value||a.ctx.getTitleValue("VALUE");if(b===p){var c=l(a.ctx.VALUES).map(function(a){return a[1]}).without(p,q,r);b="Studio.random(["+c+"])"}return a.returnValue?b:"Studio."+a.name+"('block_id_"+a.ctx.id+"', "+(a.extraParams?a.extraParams+", ":"")+b+");\n"},u=6,v=!1,w=!1,x=!1,y=[],z=null;c.setSpriteCount=function(a,b){u=b},c.enableProjectileCollisions=function(a){v=!0},c.enableEdgeCollisions=function(a){w=!0},c.enableSpritesOutsidePlayspace=function(a){x=!0},c.setStartAvatars=function(a){y=a.slice(0)},c.registerCustomGameLogic=function(a){z=a},c.install=function(a,b){function c(b){return new a.FieldDropdown(d(b))}function j(){var b=l.range(0,u),c=l.map(b,function(a){var b=y[a];return[B[b].dropdownThumbnail,a.toString()]});return new a.FieldImageDropdown(c,B.dropdownThumbnailWidth,B.dropdownThumbnailHeight)}function r(a){var b=Blockly.JavaScript.valueToCode(a,"SPRITE",Blockly.JavaScript.ORDER_NONE)||"1";return b+"-1"}function A(a){a!==p&&f.playAudio(k.stripQuotes(a),{volume:1})}var B=b.skin,C=b.isK1,D=a.Generator.get("JavaScript");a.JavaScript=D,y=B.avatarList.slice(0),D.studio_eventHandlerPrologue=function(){return"\n"},e(a,D,c,j,b),D.studio_eventHandlerPrologue=function(){return"\n"},a.Blocks.studio_whenLeft={helpUrl:"",init:function(){this.setHSV(140,1,.74),C?this.appendDummyInput().appendTitle(i.when()).appendTitle(new Blockly.FieldImage(B.whenLeft)):this.appendDummyInput().appendTitle(g.whenLeft()),this.setPreviousStatement(!1),this.setNextStatement(!0),this.setTooltip(g.whenLeftTooltip())}},D.studio_whenLeft=D.studio_eventHandlerPrologue,a.Blocks.studio_whenRight={helpUrl:"",init:function(){this.setHSV(140,1,.74),C?this.appendDummyInput().appendTitle(i.when()).appendTitle(new Blockly.FieldImage(B.whenRight)):this.appendDummyInput().appendTitle(g.whenRight()),this.setPreviousStatement(!1),this.setNextStatement(!0),this.setTooltip(g.whenRightTooltip())}},D.studio_whenRight=D.studio_eventHandlerPrologue,a.Blocks.studio_whenUp={helpUrl:"",init:function(){this.setHSV(140,1,.74),C?this.appendDummyInput().appendTitle(i.when()).appendTitle(new Blockly.FieldImage(B.whenUp)):this.appendDummyInput().appendTitle(g.whenUp()),this.setPreviousStatement(!1),this.setNextStatement(!0),this.setTooltip(g.whenUpTooltip())}},D.studio_whenUp=D.studio_eventHandlerPrologue,a.Blocks.studio_whenDown={helpUrl:"",init:function(){this.setHSV(140,1,.74),C?this.appendDummyInput().appendTitle(i.when()).appendTitle(new Blockly.FieldImage(B.whenDown)):this.appendDummyInput().appendTitle(g.whenDown()),this.setPreviousStatement(!1),this.setNextStatement(!0),this.setTooltip(g.whenDownTooltip())}},D.studio_whenDown=D.studio_eventHandlerPrologue,a.Blocks.studio_whenArrow={helpUrl:"",init:function(){this.setHSV(140,1,.74),this.appendDummyInput().appendTitle(i.when()),C?this.appendDummyInput().appendTitle(new a.FieldImageDropdown(this.K1_VALUES),"VALUE"):this.appendDummyInput().appendTitle(new a.FieldDropdown(this.VALUES),"VALUE"),this.setPreviousStatement(!1),this.setInputsInline(!0),this.setNextStatement(!0),this.setTooltip(g.whenArrowTooltip())}},a.Blocks.studio_whenArrow.K1_VALUES=[[B.whenUp,"up"],[B.whenRight,"right"],[B.whenDown,"down"],[B.whenLeft,"left"]],a.Blocks.studio_whenArrow.VALUES=[[g.whenArrowUp(),"up"],[g.whenArrowDown(),"down"],[g.whenArrowLeft(),"left"],[g.whenArrowRight(),"right"]],D.studio_whenArrow=D.studio_eventHandlerPrologue,a.Blocks.studio_repeatForever={helpUrl:"",init:function(){this.setHSV(322,.9,.95),C?(this.appendDummyInput().appendTitle(i.repeat()),this.appendStatementInput("DO").appendTitle(new a.FieldImage(B.repeatImage))):(this.appendDummyInput().appendTitle(g.repeatForever()),this.appendStatementInput("DO").appendTitle(g.repeatDo())),this.setPreviousStatement(!1),this.setNextStatement(!1),this.setTooltip(g.repeatForeverTooltip())}},D.studio_repeatForever=function(){var a=Blockly.JavaScript.statementToCode(this,"DO");return D.studio_eventHandlerPrologue()+a},a.Blocks.studio_whenSpriteClicked={helpUrl:"",init:function(){this.setHSV(140,1,.74),u>1?this.appendDummyInput().appendTitle(c(g.whenSpriteClickedN),"SPRITE"):this.appendDummyInput().appendTitle(g.whenSpriteClicked()),this.setPreviousStatement(!1),this.setInputsInline(!0),this.setNextStatement(!0),this.setTooltip(g.whenSpriteClickedTooltip())}},D.studio_whenSpriteClicked=D.studio_eventHandlerPrologue,a.Blocks.studio_whenSpriteCollided={helpUrl:"",init:function(){var b,e;if(this.setHSV(140,1,.74),C)b=j(),e=j(),this.appendDummyInput().appendTitle(i.when()).appendTitle(new a.FieldImage(B.collide)).appendTitle(b,"SPRITE1"),this.appendDummyInput().appendTitle(i.and()).appendTitle(e,"SPRITE2");else{b=c(g.whenSpriteCollidedN);var f=[this.GROUPINGS[0]];f=f.concat(d(g.whenSpriteCollidedWithN)),f.unshift(this.GROUPINGS[1]),v&&(f=f.concat([this.GROUPINGS[2]]),f=f.concat(this.PROJECTILES)),w&&(f=f.concat([this.GROUPINGS[3]]),f=f.concat(this.EDGES)),e=new a.FieldDropdown(f),this.appendDummyInput().appendTitle(b,"SPRITE1"),this.appendDummyInput().appendTitle(e,"SPRITE2")}u>1&&e.setValue("1"),this.setPreviousStatement(!1),this.setInputsInline(!0),this.setNextStatement(!0),this.setTooltip(g.whenSpriteCollidedTooltip())}},a.Blocks.studio_whenSpriteCollided.GROUPINGS=[[g.whenSpriteCollidedWithAnything(),"anything"],[g.whenSpriteCollidedWithAnyActor(),"any_actor"],[g.whenSpriteCollidedWithAnyProjectile(),"any_projectile"],[g.whenSpriteCollidedWithAnyEdge(),"any_edge"]],a.Blocks.studio_whenSpriteCollided.PROJECTILES=[[g.whenSpriteCollidedWithBlueFireball(),"blue_fireball"],[g.whenSpriteCollidedWithPurpleFireball(),"purple_fireball"],[g.whenSpriteCollidedWithRedFireball(),"red_fireball"],[g.whenSpriteCollidedWithYellowHearts(),"yellow_hearts"],[g.whenSpriteCollidedWithPurpleHearts(),"purple_hearts"],[g.whenSpriteCollidedWithRedHearts(),"red_hearts"]],a.Blocks.studio_whenSpriteCollided.EDGES=[[g.whenSpriteCollidedWithTopEdge(),"top"],[g.whenSpriteCollidedWithLeftEdge(),"left"],[g.whenSpriteCollidedWithBottomEdge(),"bottom"],[g.whenSpriteCollidedWithRightEdge(),"right"]],D.studio_whenSpriteCollided=D.studio_eventHandlerPrologue,a.Blocks.studio_stop={helpUrl:"",init:function(){this.setHSV(184,1,.74),u>1?this.appendDummyInput().appendTitle(c(g.stopSpriteN),"SPRITE"):this.appendDummyInput().appendTitle(g.stopSprite()),this.setPreviousStatement(!0),this.setInputsInline(!0),this.setNextStatement(!0),this.setTooltip(g.stopTooltip())}},a.Blocks.studio_stopSprite={helpUrl:"",init:function(){this.setHSV(184,1,.74),this.appendValueInput("SPRITE").setCheck(a.BlockValueType.NUMBER).appendTitle(g.stopSpriteN({spriteIndex:""})),this.setPreviousStatement(!0),this.setInputsInline(!0),this.setNextStatement(!0),this.setTooltip(g.stopTooltip())}},D.studio_stop=function(){return"Studio.stop('block_id_"+this.id+"', "+(this.getTitleValue("SPRITE")||"0")+");\n"},D.studio_stopSprite=function(){var a=r(this);return"Studio.stop('block_id_"+this.id+"', "+a+");\n"},a.Blocks.studio_addItems={helpUrl:"",init:function(){this.setHSV(184,1,.74),this.appendDummyInput().appendTitle(new a.FieldDropdown(this.NUMBER),"NUMBER"),this.appendDummyInput().appendTitle(new a.FieldDropdown(B.itemChoices),"VALUE"),this.setPreviousStatement(!0),this.setInputsInline(!0),this.setNextStatement(!0),this.setTooltip(g.addItemsTooltip())}},a.Blocks.studio_addItems.NUMBER=[[g.addItems1(),"1"],[g.addItems2(),"2"],[g.addItems3(),"3"],[g.addItems5(),"5"],[g.addItems10(),"10"],[g.addItemsRandom(),"random"]],D.studio_addItems=function(){var a=this.NUMBER.slice(0,-1).map(function(a){return a[1]}),b=this.getTitleValue("NUMBER");"random"===b&&(b="Studio.random(["+a+"])");var c=B.itemChoices.slice(0,-1).map(function(a){return a[1]}),d=this.getTitleValue("VALUE");return"random"===d&&(d="Studio.random(["+c+"])"),"Studio.addItemsToScene('block_id_"+this.id+"', "+d+", "+(b||"1")+");\n"},a.Blocks.studio_throw={helpUrl:"",init:function(){this.setHSV(184,1,.74),u>1?this.appendDummyInput().appendTitle(c(g.throwSpriteN),"SPRITE"):this.appendDummyInput().appendTitle(g.throwSprite()),this.appendDummyInput().appendTitle(new a.FieldDropdown(B.projectileChoices),"VALUE"),this.appendDummyInput().appendTitle("	"),this.appendDummyInput().appendTitle(new a.FieldDropdown(this.DIR),"DIR"),this.setPreviousStatement(!0),this.setInputsInline(!0),this.setNextStatement(!0),this.setTooltip(g.throwTooltip())}},a.Blocks.studio_throw.DIR=[[g.moveDirectionUp(),m.NORTH.toString()],[g.moveDirectionDown(),m.SOUTH.toString()],[g.moveDirectionLeft(),m.WEST.toString()],[g.moveDirectionRight(),m.EAST.toString()],[g.moveDirectionRandom(),"random"]],D.studio_throw=function(){var a=this.DIR.slice(0,-1).map(function(a){return a[1]}),b=this.getTitleValue("DIR");"random"===b&&(b="Studio.random(["+a+"])");var c=B.projectileChoices.slice(0,-1).map(function(a){return a[1]}),d=this.getTitleValue("VALUE");return"random"===d&&(d="Studio.random(["+c+"])"),"Studio.throwProjectile('block_id_"+this.id+"', "+(this.getTitleValue("SPRITE")||"0")+", "+b+", "+d+");\n"},a.Blocks.studio_makeProjectile={helpUrl:"",init:function(){this.setHSV(184,1,.74),this.appendDummyInput().appendTitle(new a.FieldDropdown(this.VALUES),"VALUE"),this.appendDummyInput().appendTitle("	"),this.appendDummyInput().appendTitle(new a.FieldDropdown(this.ACTIONS),"ACTION"),this.setPreviousStatement(!0),this.setInputsInline(!0),this.setNextStatement(!0),this.setTooltip(g.makeProjectileTooltip())}},a.Blocks.studio_makeProjectile.VALUES=[[g.makeProjectileBlueFireball(),'"blue_fireball"'],[g.makeProjectilePurpleFireball(),'"purple_fireball"'],[g.makeProjectileRedFireball(),'"red_fireball"'],[g.makeProjectileYellowHearts(),'"yellow_hearts"'],[g.makeProjectilePurpleHearts(),'"purple_hearts"'],[g.makeProjectileRedHearts(),'"red_hearts"']],a.Blocks.studio_makeProjectile.ACTIONS=[[g.makeProjectileBounce(),'"bounce"'],[g.makeProjectileDisappear(),'"disappear"']],D.studio_makeProjectile=function(){return"Studio.makeProjectile('block_id_"+this.id+"', "+this.getTitleValue("VALUE")+", "+this.getTitleValue("ACTION")+");\n"},a.Blocks.studio_setSpritePosition={helpUrl:"",init:function(){var b;x?(b=new a.FieldDropdown(this.VALUES_EXTENDED),b.setValue(this.VALUES_EXTENDED[4][1])):(b=new a.FieldDropdown(this.VALUES),b.setValue(this.VALUES[1][1])),this.setHSV(184,1,.74),u>1?this.appendDummyInput().appendTitle(c(g.setSpriteN),"SPRITE"):this.appendDummyInput().appendTitle(g.setSprite()),this.appendDummyInput().appendTitle(b,"VALUE"),this.setPreviousStatement(!0),this.setInputsInline(!0),this.setNextStatement(!0),this.setTooltip(g.setSpritePositionTooltip())}},a.Blocks.studio_setSpritePosition.VALUES=[[g.positionRandom(),p],[g.positionTopLeft(),n.TOPLEFT.toString()],[g.positionTopCenter(),n.TOPCENTER.toString()],[g.positionTopRight(),n.TOPRIGHT.toString()],[g.positionMiddleLeft(),n.MIDDLELEFT.toString()],[g.positionMiddleCenter(),n.MIDDLECENTER.toString()],[g.positionMiddleRight(),n.MIDDLERIGHT.toString()],[g.positionBottomLeft(),n.BOTTOMLEFT.toString()],[g.positionBottomCenter(),n.BOTTOMCENTER.toString()],[g.positionBottomRight(),n.BOTTOMRIGHT.toString()]],a.Blocks.studio_setSpritePosition.VALUES_EXTENDED=[[g.positionRandom(),p],[g.positionOutTopLeft(),n.OUTTOPLEFT.toString()],[g.positionOutTopRight(),n.OUTTOPRIGHT.toString()],[g.positionTopOutLeft(),n.TOPOUTLEFT.toString()],[g.positionTopLeft(),n.TOPLEFT.toString()],[g.positionTopCenter(),n.TOPCENTER.toString()],[g.positionTopRight(),n.TOPRIGHT.toString()],[g.positionTopOutRight(),n.TOPOUTRIGHT.toString()],[g.positionMiddleLeft(),n.MIDDLELEFT.toString()],[g.positionMiddleCenter(),n.MIDDLECENTER.toString()],[g.positionMiddleRight(),n.MIDDLERIGHT.toString()],[g.positionBottomOutLeft(),n.BOTTOMOUTLEFT.toString()],[g.positionBottomLeft(),n.BOTTOMLEFT.toString()],[g.positionBottomCenter(),n.BOTTOMCENTER.toString()],[g.positionBottomRight(),n.BOTTOMRIGHT.toString()],[g.positionBottomOutRight(),n.BOTTOMOUTRIGHT.toString()],[g.positionOutBottomLeft(),n.OUTBOTTOMLEFT.toString()],[g.positionOutBottomRight(),n.OUTBOTTOMRIGHT.toString()]],D.studio_setSpritePosition=function(){return t({ctx:this,extraParams:this.getTitleValue("SPRITE")||"0",name:"setSpritePosition"})},a.Blocks.studio_setSpriteXY={helpUrl:"",init:function(){this.setHSV(184,1,.74),u>1?this.appendValueInput("SPRITE").setCheck(a.BlockValueType.NUMBER).appendTitle(g.moveSpriteN({spriteIndex:""})):this.appendDummyInput().appendTitle(g.setSprite()),this.appendDummyInput().appendTitle(g.toXY()),this.appendValueInput("XPOS").setCheck(a.BlockValueType.NUMBER),this.appendValueInput("YPOS").setCheck(a.BlockValueType.NUMBER),this.setPreviousStatement(!0),this.setInputsInline(!0),this.setNextStatement(!0)}},D.studio_setSpriteXY=function(){var a=r(this),b=Blockly.JavaScript.valueToCode(this,"XPOS",Blockly.JavaScript.ORDER_NONE)||"0",c=Blockly.JavaScript.valueToCode(this,"YPOS",Blockly.JavaScript.ORDER_NONE)||"0";return"Studio.setSpriteXY('block_id_"+this.id+"', "+a+", "+b+", "+c+");\n"};var E={DIRECTION_CONFIGS:{West:{letter:i.directionWestLetter(),image:B.leftArrow,studioValue:m.WEST.toString(),tooltip:g.moveLeftTooltip()},East:{letter:i.directionEastLetter(),image:B.rightArrow,studioValue:m.EAST.toString(),tooltip:g.moveRightTooltip()},North:{letter:i.directionNorthLetter(),image:B.upArrow,studioValue:m.NORTH.toString(),tooltip:g.moveUpTooltip()},South:{letter:i.directionSouthLetter(),image:B.downArrow,studioValue:m.SOUTH.toString(),tooltip:g.moveDownTooltip()}},DISTANCES:[[B.shortLine,"25"],[B.longLine,"400"]],DEFAULT_MOVE_DISTANCE:"100",generateBlocksForAllDirections:function(){E.generateBlocksForDirection("North"),E.generateBlocksForDirection("South"),E.generateBlocksForDirection("West"),E.generateBlocksForDirection("East")},generateBlocksForDirection:function(b){D["studio_move"+b]=E.generateCodeGenerator(b,!0),a.Blocks["studio_move"+b]=E.generateMoveBlock(b,!1),D["studio_move"+b+"Distance"]=E.generateCodeGenerator(b,!1),a.Blocks["studio_move"+b+"Distance"]=E.generateMoveBlock(b,!1),D["studio_move"+b+"_length"]=E.generateCodeGenerator(b,!1),a.Blocks["studio_move"+b+"_length"]=E.generateMoveBlock(b,!0)},generateMoveBlock:function(b,c){var d=E.DIRECTION_CONFIGS[b];return{helpUrl:"",init:function(){this.setHSV(184,1,.74),this.appendDummyInput().appendTitle(g.moveSprite()).appendTitle(new a.FieldImage(d.image)).appendTitle(d.letter),u>1&&this.appendDummyInput().appendTitle(j(),"SPRITE"),c&&this.appendDummyInput().appendTitle(new a.FieldImageDropdown(E.DISTANCES),"DISTANCE"),this.setPreviousStatement(!0),this.setInputsInline(!0),this.setNextStatement(!0),this.setTooltip(d.tooltip)}}},generateCodeGenerator:function(a,b){var c=E.DIRECTION_CONFIGS[a];return function(){var a=this.getTitleValue("SPRITE")||"0",d=c.studioValue,e=b?"move":"moveDistance",f=this.getTitleValue("DISTANCE")||E.DEFAULT_MOVE_DISTANCE;return"Studio."+e+"('block_id_"+this.id+"', "+a+", "+d+(b?"":", "+f)+");\n"}}};E.generateBlocksForAllDirections(),a.Blocks.studio_move={helpUrl:"",init:function(){this.setHSV(184,1,.74),u>1?(C?this.appendDummyInput().appendTitle(g.moveSprite()).appendTitle(j(),"SPRITE"):this.appendDummyInput().appendTitle(c(g.moveSpriteN),"SPRITE"),this.appendDummyInput().appendTitle("	")):this.appendDummyInput().appendTitle(g.moveSprite()),C?this.appendDummyInput().appendTitle(new a.FieldImageDropdown(this.K1_DIR),"DIR"):this.appendDummyInput().appendTitle(new a.FieldDropdown(this.DIR),"DIR"),this.setPreviousStatement(!0),this.setInputsInline(!0),this.setNextStatement(!0),this.setTooltip(g.moveTooltip())}},a.Blocks.studio_move.K1_DIR=[[B.upArrow,m.NORTH.toString()],[B.rightArrow,m.EAST.toString()],[B.downArrow,m.SOUTH.toString()],[B.leftArrow,m.WEST.toString()]],a.Blocks.studio_move.DIR=[[g.moveDirectionUp(),m.NORTH.toString()],[g.moveDirectionDown(),m.SOUTH.toString()],[g.moveDirectionLeft(),m.WEST.toString()],[g.moveDirectionRight(),m.EAST.toString()]],D.studio_move=function(){return"Studio.move('block_id_"+this.id+"', "+(this.getTitleValue("SPRITE")||"0")+", "+this.getTitleValue("DIR")+");\n"};var F=function(b){var d={};return d.helpUrl="",d.init=function(){this.setHSV(184,1,.74),b.sprite?this.appendValueInput("SPRITE").setCheck(a.BlockValueType.NUMBER).appendTitle(g.moveSpriteN({spriteIndex:""})):u>1?(C?this.appendDummyInput().appendTitle(g.moveSprite()).appendTitle(j(),"SPRITE"):this.appendDummyInput().appendTitle(c(g.moveSpriteN),"SPRITE"),this.appendDummyInput().appendTitle("	")):this.appendDummyInput().appendTitle(g.moveSprite()),C?this.appendDummyInput().appendTitle(new a.FieldImageDropdown(this.K1_DIR),"DIR"):this.appendDummyInput().appendTitle(new a.FieldDropdown(this.DIR),"DIR"),this.appendDummyInput().appendTitle("	"),b.params?(this.appendValueInput("DISTANCE").setCheck(a.BlockValueType.NUMBER),this.appendDummyInput().appendTitle(g.moveDistancePixels())):C?this.appendDummyInput().appendTitle(new a.FieldImageDropdown(this.K1_DISTANCE),"DISTANCE"):this.appendDummyInput().appendTitle(new a.FieldDropdown(this.DISTANCE),"DISTANCE"),this.setPreviousStatement(!0),this.setInputsInline(!0),this.setNextStatement(!0),this.setTooltip(g.moveDistanceTooltip())},d.K1_DIR=[[B.upArrow,m.NORTH.toString()],[B.rightArrow,m.EAST.toString()],[B.downArrow,m.SOUTH.toString()],[B.leftArrow,m.WEST.toString()]],d.DIR=[[g.moveDirectionUp(),m.NORTH.toString()],[g.moveDirectionDown(),m.SOUTH.toString()],[g.moveDirectionLeft(),m.WEST.toString()],[g.moveDirectionRight(),m.EAST.toString()],[g.moveDirectionRandom(),"random"]],b.params||(d.DISTANCE=[[g.moveDistance25(),"25"],[g.moveDistance50(),"50"],[g.moveDistance100(),"100"],[g.moveDistance200(),"200"],[g.moveDistance400(),"400"],[g.moveDistanceRandom(),"random"]],d.K1_DISTANCE=[[B.shortLine,"25"],[B.longLine,"400"]]),d};a.Blocks.studio_moveDistance=F({}),a.Blocks.studio_moveDistanceParams=F({params:!0}),a.Blocks.studio_moveDistanceParamsSprite=F({params:!0,sprite:!0}),D.studio_moveDistance=function(){var a=this.DISTANCE.slice(0,-1).map(function(a){return a[1]}),b=this.getTitleValue("DISTANCE");"random"===b&&(b="Studio.random(["+a+"])");var c=this.DIR.slice(0,-1).map(function(a){return a[1]}),d=this.getTitleValue("DIR");return"random"===d&&(d="Studio.random(["+c+"])"),"Studio.moveDistance('block_id_"+this.id+"', "+(this.getTitleValue("SPRITE")||"0")+", "+d+", "+b+");\n"},D.studio_moveDistanceParams=function(){var a=this.DIR.slice(0,-1).map(function(a){return a[1]}),b=this.getTitleValue("DIR");"random"===b&&(b="Studio.random(["+a+"])");var c=Blockly.JavaScript.valueToCode(this,"DISTANCE",Blockly.JavaScript.ORDER_NONE)||"0";return"Studio.moveDistance('block_id_"+this.id+"', "+(this.getTitleValue("SPRITE")||"0")+", "+b+", "+c+");\n"},D.studio_moveDistanceParamsSprite=function(){var a=r(this),b=this.DIR.slice(0,-1).map(function(a){return a[1]}),c=this.getTitleValue("DIR");"random"===c&&(c="Studio.random(["+b+"])");var d=Blockly.JavaScript.valueToCode(this,"DISTANCE",Blockly.JavaScript.ORDER_NONE)||"0";return"Studio.moveDistance('block_id_"+this.id+"', "+a+", "+c+", "+d+");\n"},a.Blocks.studio_playSound={helpUrl:"",init:function(){this.setHSV(184,1,.74),C?this.appendDummyInput().appendTitle(i.play()).appendTitle(new a.FieldImage(B.soundIcon)).appendTitle(new a.FieldDropdown(this.K1_SOUNDS,A),"SOUND"):this.appendDummyInput().appendTitle(new a.FieldDropdown(this.SOUNDS,A),"SOUND"),this.setPreviousStatement(!0),this.setNextStatement(!0),this.setTooltip(g.playSoundTooltip())}},a.Blocks.studio_playSound.K1_SOUNDS=[[g.soundHit(),"hit"],[g.soundWood(),"wood"],[g.soundRetro(),"retro"],[g.soundSlap(),"slap"],[g.soundRubber(),"rubber"],[g.soundCrunch(),"crunch"],[g.soundWinPoint(),"winpoint"],[g.soundWinPoint2(),"winpoint2"],[g.soundLosePoint(),"losepoint"],[g.soundLosePoint2(),"losepoint2"],[g.soundGoal1(),"goal1"],[g.soundGoal2(),"goal2"]],a.Blocks.studio_playSound.SOUNDS=[[g.playSoundHit(),"hit"],[g.playSoundWood(),"wood"],[g.playSoundRetro(),"retro"],[g.playSoundSlap(),"slap"],[g.playSoundRubber(),"rubber"],[g.playSoundCrunch(),"crunch"],[g.playSoundWinPoint(),"winpoint"],[g.playSoundWinPoint2(),"winpoint2"],[g.playSoundLosePoint(),"losepoint"],[g.playSoundLosePoint2(),"losepoint2"],[g.playSoundGoal1(),"goal1"],[g.playSoundGoal2(),"goal2"]],D.studio_playSound=function(){return"Studio.playSound('block_id_"+this.id+"', '"+this.getTitleValue("SOUND")+"');\n"},a.Blocks.studio_changeScore={helpUrl:"",init:function(){this.setHSV(184,1,.74),C?this.appendDummyInput().appendTitle(i.score()).appendTitle(new a.FieldImage(B.scoreCard)):this.appendDummyInput().appendTitle(new a.FieldDropdown(this.VALUES),"VALUE"),this.setPreviousStatement(!0),this.setNextStatement(!0),this.setTooltip(C?g.changeScoreTooltipK1():g.changeScoreTooltip())}},a.Blocks.studio_changeScore.VALUES=[[g.incrementPlayerScore(),"1"],[g.decrementPlayerScore(),"-1"]],D.studio_changeScore=function(){return"Studio.changeScore('block_id_"+this.id+"', '"+(this.getTitleValue("VALUE")||"1")+"');\n"},a.Blocks.studio_setScoreText={helpUrl:"",init:function(){this.setHSV(184,1,.74),this.appendValueInput("TEXT").appendTitle(g.setScoreText()),this.setInputsInline(!0),this.setPreviousStatement(!0),this.setNextStatement(!0),this.setTooltip(g.setScoreTextTooltip())}},D.studio_setScoreText=function(){var a=Blockly.JavaScript.valueToCode(this,"TEXT",Blockly.JavaScript.ORDER_NONE)||"";return"Studio.setScoreText('block_id_"+this.id+"', "+a+");\n"},a.Blocks.studio_showCoordinates={helpUrl:"",init:function(){this.setHSV(184,1,.74),this.appendDummyInput().appendTitle(g.showCoordinates()),this.setInputsInline(!0),this.setPreviousStatement(!0),this.setNextStatement(!0),this.setTooltip(g.showCoordinatesTooltip())}},D.studio_showCoordinates=function(){return"Studio.showCoordinates('block_id_"+this.id+"');\n"},a.Blocks.studio_setSpriteSpeed={helpUrl:"",init:function(){if(this.setHSV(184,1,.74),u>1?C?this.appendDummyInput().appendTitle(g.setSprite()).appendTitle(j(),"SPRITE"):this.appendDummyInput().appendTitle(c(g.setSpriteN),"SPRITE"):this.appendDummyInput().appendTitle(g.setSprite()),C){var b=new a.FieldImageDropdown(this.K1_VALUES);b.setValue(this.K1_VALUES[1][1]),this.appendDummyInput().appendTitle(g.speed()).appendTitle(b,"VALUE")}else{var d=new a.FieldDropdown(this.VALUES);d.setValue(this.VALUES[3][1]),this.appendDummyInput().appendTitle(d,"VALUE")}this.setInputsInline(!0),this.setPreviousStatement(!0),this.setNextStatement(!0),this.setTooltip(g.setSpriteSpeedTooltip())}},a.Blocks.studio_setSpriteSpeedParams={helpUrl:"",init:function(){this.setHSV(184,1,.74),this.appendValueInput("SPRITE").setCheck(a.BlockValueType.NUMBER).appendTitle(g.setSpriteN({spriteIndex:""})),this.appendValueInput("VALUE").setCheck(a.BlockValueType.NUMBER).appendTitle(g.speed()),this.setInputsInline(!0),this.setPreviousStatement(!0),this.setNextStatement(!0),this.setTooltip(g.setSpriteSpeedTooltip())}},a.Blocks.studio_setSpriteSpeed.K1_VALUES=[[B.speedSlow,"Studio.SpriteSpeed.SLOW"],[B.speedMedium,"Studio.SpriteSpeed.NORMAL"],[B.speedFast,"Studio.SpriteSpeed.FAST"]],a.Blocks.studio_setSpriteSpeed.VALUES=[[g.setSpriteSpeedRandom(),p],[g.setSpriteSpeedVerySlow(),"Studio.SpriteSpeed.VERY_SLOW"],[g.setSpriteSpeedSlow(),"Studio.SpriteSpeed.SLOW"],[g.setSpriteSpeedNormal(),"Studio.SpriteSpeed.NORMAL"],[g.setSpriteSpeedFast(),"Studio.SpriteSpeed.FAST"],[g.setSpriteSpeedVeryFast(),"Studio.SpriteSpeed.VERY_FAST"]],D.studio_setSpriteSpeed=function(){return t({ctx:this,extraParams:this.getTitleValue("SPRITE")||"0",name:"setSpriteSpeed"})},D.studio_setSpriteSpeedParams=function(){var a=r(this),b=Blockly.JavaScript.valueToCode(this,"VALUE",Blockly.JavaScript.ORDER_NONE)||"5";return"Studio.setSpriteSpeed('block_id_"+this.id+"', "+a+","+b+");\n"},a.Blocks.studio_setSpriteSize={helpUrl:"",init:function(){this.setHSV(184,1,.74),u>1?this.appendDummyInput().appendTitle(c(g.setSpriteN),"SPRITE"):this.appendDummyInput().appendTitle(g.setSprite());var b=new a.FieldDropdown(this.VALUES);b.setValue(this.VALUES[3][1]),this.appendDummyInput().appendTitle(b,"VALUE"),this.setInputsInline(!0),this.setPreviousStatement(!0),this.setNextStatement(!0),this.setTooltip(g.setSpriteSizeTooltip())}},a.Blocks.studio_setSpriteSizeParams={helpUrl:"",init:function(){this.setHSV(184,1,.74),this.appendValueInput("SPRITE").setCheck(a.BlockValueType.NUMBER).appendTitle(g.setSpriteN({spriteIndex:""})),this.appendValueInput("VALUE").setCheck(a.BlockValueType.NUMBER).appendTitle(g.size()),this.setInputsInline(!0),this.setPreviousStatement(!0),this.setNextStatement(!0),this.setTooltip(g.setSpriteSizeTooltip())}},a.Blocks.studio_setSpriteSize.VALUES=[[g.setSpriteSizeRandom(),p],[g.setSpriteSizeVerySmall(),"Studio.SpriteSize.VERY_SMALL"],[g.setSpriteSizeSmall(),"Studio.SpriteSize.SMALL"],[g.setSpriteSizeNormal(),"Studio.SpriteSize.NORMAL"],[g.setSpriteSizeLarge(),"Studio.SpriteSize.LARGE"],[g.setSpriteSizeVeryLarge(),"Studio.SpriteSize.VERY_LARGE"]],D.studio_setSpriteSize=function(){return t({ctx:this,extraParams:this.getTitleValue("SPRITE")||"0",name:"setSpriteSize"})},D.studio_setSpriteSizeParams=function(){var a=r(this),b=Blockly.JavaScript.valueToCode(this,"VALUE",Blockly.JavaScript.ORDER_NONE)||"5";return"Studio.setSpriteSize('block_id_"+this.id+"', "+a+","+b+");\n"},a.Blocks.studio_setBackground={helpUrl:"",init:function(){this.setHSV(312,.32,.62),this.VALUES=[];var b;C?(this.VALUES=B.backgroundChoicesK1,b=new a.FieldImageDropdown(B.backgroundChoicesK1,B.dropdownThumbnailWidth,B.dropdownThumbnailHeight),this.appendDummyInput().appendTitle(g.setBackground()).appendTitle(b,"VALUE")):(this.VALUES=B.backgroundChoices,b=new a.FieldDropdown(B.backgroundChoices),this.appendDummyInput().appendTitle(b,"VALUE")),b.setValue('"'+B.defaultBackground+'"'),this.setInputsInline(!0),this.setPreviousStatement(!0),this.setNextStatement(!0),this.setTooltip(g.setBackgroundTooltip());
}},a.Blocks.studio_setBackgroundParam={helpUrl:"",init:function(){this.setHSV(312,.32,.62),this.VALUES=B.backgroundChoices,this.appendDummyInput().appendTitle(g.setBackground()),this.appendValueInput("VALUE"),this.setInputsInline(!0),this.setPreviousStatement(!0),this.setNextStatement(!0),this.setTooltip(g.setBackgroundTooltip())}},D.studio_setBackground=function(){return t({ctx:this,name:"setBackground"})},D.studio_setBackgroundParam=function(){var b=a.JavaScript.valueToCode(this,"VALUE",Blockly.JavaScript.ORDER_NONE);return t({value:b,ctx:this,name:"setBackground"})};var G=function(b){var c={};return c.helpUrl="",c.init=function(){this.setHSV(184,1,.74),this.appendDummyInput().appendTitle(g.showTitleScreen()),b.params?(this.appendValueInput("TITLE").setCheck(a.BlockValueType.STRING).setAlign(Blockly.ALIGN_RIGHT).appendTitle(g.showTitleScreenTitle()),this.appendValueInput("TEXT").setCheck(a.BlockValueType.STRING).setAlign(Blockly.ALIGN_RIGHT).appendTitle(g.showTitleScreenText())):(this.appendDummyInput().appendTitle(g.showTitleScreenTitle()).appendTitle(new Blockly.FieldImage(Blockly.assetUrl("media/quote0.png"),12,12)).appendTitle(new Blockly.FieldTextInput(g.showTSDefTitle()),"TITLE").appendTitle(new Blockly.FieldImage(Blockly.assetUrl("media/quote1.png"),12,12)),this.appendDummyInput().appendTitle(g.showTitleScreenText()).appendTitle(new Blockly.FieldImage(Blockly.assetUrl("media/quote0.png"),12,12)).appendTitle(new Blockly.FieldTextInput(g.showTSDefText()),"TEXT").appendTitle(new Blockly.FieldImage(Blockly.assetUrl("media/quote1.png"),12,12))),this.setPreviousStatement(!0),this.setNextStatement(!0),this.setTooltip(g.showTitleScreenTooltip())},c};a.Blocks.studio_showTitleScreen=G({}),a.Blocks.studio_showTitleScreenParams=G({params:!0}),D.studio_showTitleScreen=function(){return"Studio.showTitleScreen('block_id_"+this.id+"', "+a.JavaScript.quote_(this.getTitleValue("TITLE"))+", "+a.JavaScript.quote_(this.getTitleValue("TEXT"))+");\n"},D.studio_showTitleScreenParams=function(){var a=Blockly.JavaScript.valueToCode(this,"TITLE",Blockly.JavaScript.ORDER_NONE)||"",b=Blockly.JavaScript.valueToCode(this,"TEXT",Blockly.JavaScript.ORDER_NONE)||"";return"Studio.showTitleScreen('block_id_"+this.id+"', "+a+", "+b+");\n"},C?(a.Blocks.studio_setSprite={helpUrl:"",init:function(){this.setHSV(312,.32,.62);var b=new a.FieldDropdown(this.VALUES);b.setValue(s),this.appendDummyInput().appendTitle(b,"VALUE"),u>1&&this.appendDummyInput().appendTitle(j(),"SPRITE"),this.setInputsInline(!0),this.setPreviousStatement(!0),this.setNextStatement(!0),this.setTooltip(g.setSpriteK1Tooltip())}},a.Blocks.studio_setSprite.VALUES=[[g.setSpriteHideK1(),q],[g.setSpriteShowK1(),s]]):(a.Blocks.studio_setSprite={helpUrl:"",init:function(){this.VALUES=B.spriteChoices;var b=new a.FieldDropdown(B.spriteChoices);b.setValue(B.spriteChoices[2][1]),this.setHSV(312,.32,.62),u>1?this.appendDummyInput().appendTitle(c(g.setSpriteN),"SPRITE"):this.appendDummyInput().appendTitle(g.setSprite()),this.appendDummyInput().appendTitle(b,"VALUE"),this.setInputsInline(!0),this.setPreviousStatement(!0),this.setNextStatement(!0),this.setTooltip(g.setSpriteTooltip())}},a.Blocks.studio_setSpriteParams={helpUrl:"",init:function(){this.VALUES=B.spriteChoices;var b=new a.FieldDropdown(B.spriteChoices);b.setValue(B.spriteChoices[2][1]),this.setHSV(312,.32,.62),this.appendValueInput("SPRITE").setCheck(a.BlockValueType.NUMBER).appendTitle(g.setSpriteN({spriteIndex:""})),this.appendDummyInput().appendTitle(b,"VALUE"),this.setInputsInline(!0),this.setPreviousStatement(!0),this.setNextStatement(!0),this.setTooltip(g.setSpriteTooltip())}},a.Blocks.studio_setSpriteParamValue={helpUrl:"",init:function(){this.setHSV(312,.32,.62),u>1?this.appendDummyInput().appendTitle(c(g.setSpriteN),"SPRITE"):this.appendDummyInput().appendTitle(g.setSprite()),this.appendValueInput("VALUE"),this.setInputsInline(!0),this.setPreviousStatement(!0),this.setNextStatement(!0),this.setTooltip(g.setSpriteTooltip())}}),D.studio_setSprite=function(){var a=this.getTitleValue("SPRITE")||"0";return t({ctx:this,extraParams:a,name:"setSprite"})},D.studio_setSpriteParams=function(){var a=r(this);return t({ctx:this,extraParams:a,name:"setSprite"})},D.studio_setSpriteParamValue=function(){var b=this.getTitleValue("SPRITE")||"0",c=a.JavaScript.valueToCode(this,"VALUE",Blockly.JavaScript.ORDER_NONE);return t({value:c,ctx:this,extraParams:b,name:"setSprite"})},a.Blocks.studio_setSpriteEmotion={helpUrl:"",init:function(){if(this.setHSV(184,1,.74),u>1?C?this.appendDummyInput().appendTitle(g.setSprite()).appendTitle(j(),"SPRITE"):this.appendDummyInput().appendTitle(c(g.setSpriteN),"SPRITE"):this.appendDummyInput().appendTitle(g.setSprite()),C){var b=new a.FieldImageDropdown(this.K1_VALUES,34,34);b.setValue(this.K1_VALUES[0][1]),this.appendDummyInput().appendTitle(g.emotion()).appendTitle(b,"VALUE")}else{var d=new a.FieldDropdown(this.VALUES);d.setValue(this.VALUES[1][1]),this.appendDummyInput().appendTitle(d,"VALUE")}this.setInputsInline(!0),this.setPreviousStatement(!0),this.setNextStatement(!0),this.setTooltip(g.setSpriteEmotionTooltip())}},a.Blocks.studio_setSpriteEmotionParams={helpUrl:"",init:function(){this.setHSV(184,1,.74),this.appendValueInput("SPRITE").setCheck(a.BlockValueType.NUMBER).appendTitle(g.setSpriteN({spriteIndex:""}));var b=new a.FieldDropdown(this.VALUES);b.setValue(this.VALUES[1][1]),this.appendDummyInput().appendTitle(b,"VALUE"),this.setInputsInline(!0),this.setPreviousStatement(!0),this.setNextStatement(!0),this.setTooltip(g.setSpriteEmotionTooltip())}},a.Blocks.studio_setSpriteEmotion.VALUES=a.Blocks.studio_setSpriteEmotionParams.VALUES=[[g.setSpriteEmotionRandom(),p],[g.setSpriteEmotionNormal(),o.NORMAL.toString()],[g.setSpriteEmotionHappy(),o.HAPPY.toString()],[g.setSpriteEmotionAngry(),o.ANGRY.toString()],[g.setSpriteEmotionSad(),o.SAD.toString()]],a.Blocks.studio_setSpriteEmotion.K1_VALUES=[[B.emotionNormal,o.NORMAL.toString()],[B.emotionHappy,o.HAPPY.toString()],[B.emotionAngry,o.ANGRY.toString()],[B.emotionSad,o.SAD.toString()],[B.randomPurpleIcon,p]],D.studio_setSpriteEmotion=function(){return t({ctx:this,extraParams:this.getTitleValue("SPRITE")||"0",name:"setSpriteEmotion"})},D.studio_setSpriteEmotionParams=function(){var a=r(this);return t({ctx:this,extraParams:a,name:"setSpriteEmotion"})};var H=function(b){var d={};return d.helpUrl="",d.init=function(){if(this.setHSV(184,1,.74),b.time?(this.appendValueInput("SPRITE").setCheck(a.BlockValueType.NUMBER).appendTitle(g.actor()),this.appendDummyInput().appendTitle(g.saySprite())):u>1?C?this.appendDummyInput().appendTitle(g.saySprite()).appendTitle(j(),"SPRITE"):this.appendDummyInput().appendTitle(c(g.saySpriteN),"SPRITE"):this.appendDummyInput().appendTitle(g.saySprite()),b.restrictedDialog){for(var d=[],e=59,f=0;e>f;f++){var h=d[f]=[],i=g["saySpriteChoices_"+f]();h[0]=h[1]=i}var k=new a.FieldDropdown(d);this.appendDummyInput().appendTitle(k,"VALUE")}else if(b.params)this.appendValueInput("TEXT");else{var l=this.appendDummyInput();C&&l.appendTitle(new Blockly.FieldImage(B.speechBubble)),l.appendTitle(new Blockly.FieldImage(Blockly.assetUrl("media/quote0.png"),12,12)).appendTitle(new Blockly.FieldTextInput(g.defaultSayText()),"TEXT").appendTitle(new Blockly.FieldImage(Blockly.assetUrl("media/quote1.png"),12,12))}b.time&&(this.appendValueInput("TIME").setCheck(a.BlockValueType.NUMBER).appendTitle(g["for"]()),this.appendDummyInput().appendTitle(g.waitSeconds())),this.setInputsInline(!0),this.setPreviousStatement(!0),this.setNextStatement(!0),this.setTooltip(g.saySpriteTooltip())},d};a.Blocks.studio_saySprite=H({}),a.Blocks.studio_saySpriteChoices=H({restrictedDialog:!0}),a.Blocks.studio_saySpriteParams=H({params:!0}),a.Blocks.studio_saySpriteParamsTime=H({params:!0,time:!0}),D.studio_saySprite=function(){return"Studio.saySprite('block_id_"+this.id+"', "+(this.getTitleValue("SPRITE")||"0")+", "+a.JavaScript.quote_(this.getTitleValue("TEXT"))+");\n"},D.studio_saySpriteChoices=function(){return"Studio.saySprite('block_id_"+this.id+"', "+(this.getTitleValue("SPRITE")||"0")+", '"+(this.getTitleValue("VALUE")||" ")+"');\n"},D.studio_saySpriteParams=function(){var a=Blockly.JavaScript.valueToCode(this,"TEXT",Blockly.JavaScript.ORDER_NONE)||"";return"Studio.saySprite('block_id_"+this.id+"', "+(this.getTitleValue("SPRITE")||"0")+", "+a+");\n"},D.studio_saySpriteParamsTime=function(){var a=r(this),b=Blockly.JavaScript.valueToCode(this,"TEXT",Blockly.JavaScript.ORDER_NONE)||"",c=Blockly.JavaScript.valueToCode(this,"TIME",Blockly.JavaScript.ORDER_NONE)||1;return"Studio.saySprite('block_id_"+this.id+"', "+a+", "+b+","+c+");\n"};var I=function(b){var c={};return c.helpUrl="",c.init=function(){if(this.setHSV(184,1,.74),b.params)this.appendDummyInput().appendTitle(g.waitFor()),this.appendValueInput("VALUE").setCheck(a.BlockValueType.NUMBER),this.appendDummyInput().appendTitle(g.waitSeconds());else{var c=new a.FieldDropdown(this.VALUES);c.setValue(this.VALUES[2][1]),this.appendDummyInput().appendTitle(c,"VALUE")}this.setInputsInline(!0),this.setPreviousStatement(!0),this.setNextStatement(!0),this.setTooltip(b.params?g.waitParamsTooltip():g.waitTooltip())},b.params||(c.VALUES=[[g.waitForClick(),'"click"'],[g.waitForRandom(),"random"],[g.waitForHalfSecond(),"500"],[g.waitFor1Second(),"1000"],[g.waitFor2Seconds(),"2000"],[g.waitFor5Seconds(),"5000"],[g.waitFor10Seconds(),"10000"]]),c};a.Blocks.studio_wait=I({}),a.Blocks.studio_waitParams=I({params:!0}),D.studio_wait=function(){return t({ctx:this,name:"wait"})},D.studio_waitParams=function(){var a=Blockly.JavaScript.valueToCode(this,"VALUE",Blockly.JavaScript.ORDER_NONE)||"0";return"Studio.wait('block_id_"+this.id+"', ("+a+" * 1000));\n"},a.Blocks.functional_start_setValue={init:function(){var b=g.startSetValue(),c=a.BlockValueType.NONE,d=[{name:"VALUE",type:a.BlockValueType.FUNCTION}];a.FunctionalBlockUtils.initTitledFunctionalBlock(this,b,c,d)}},D.functional_start_setValue=function(){if(!z)throw new Error("must register custom game logic");z.cacheBlock("VALUE",this.getInputTargetBlock("VALUE"))},a.Blocks.functional_start_setVars={init:function(){var b=g.startSetVars(),c=a.BlockValueType.NONE,d=[{name:"title",type:a.BlockValueType.STRING},{name:"subtitle",type:a.BlockValueType.STRING},{name:"background",type:a.BlockValueType.IMAGE},{name:"player",type:a.BlockValueType.IMAGE},{name:"target",type:a.BlockValueType.IMAGE},{name:"danger",type:a.BlockValueType.IMAGE}];a.FunctionalBlockUtils.initTitledFunctionalBlock(this,b,c,d)}},D.functional_start_setVars=function(){},a.Blocks.functional_start_setFuncs={init:function(){this.blockArgs=[{name:"title",type:a.BlockValueType.STRING},{name:"subtitle",type:a.BlockValueType.STRING},{name:"background",type:a.BlockValueType.IMAGE},{name:"target",type:a.BlockValueType.IMAGE},{name:"danger",type:a.BlockValueType.IMAGE},{name:"player",type:a.BlockValueType.IMAGE},{name:"update-target",type:a.BlockValueType.FUNCTION},{name:"update-danger",type:a.BlockValueType.FUNCTION},{name:"update-player",type:a.BlockValueType.FUNCTION},{name:"collide?",type:a.BlockValueType.FUNCTION},{name:"on-screen?",type:a.BlockValueType.FUNCTION}],this.setFunctional(!0,{headerHeight:30}),this.setHSV.apply(this,a.FunctionalTypeColors[a.BlockValueType.NONE]);var b={fixedSize:{height:35}};this.appendDummyInput().appendTitle(new Blockly.FieldLabel("game_funcs",b)).setAlign(Blockly.ALIGN_LEFT);var c=["title, subtitle, background",[this.blockArgs[0],this.blockArgs[1],this.blockArgs[2]],"target, danger, player",[this.blockArgs[3],this.blockArgs[4],this.blockArgs[5]],"update-target, update-danger, update-player",[this.blockArgs[6],this.blockArgs[7],this.blockArgs[8]],"collide?, onscreen?",[this.blockArgs[9],this.blockArgs[10]]];c.forEach(function(b){"string"==typeof b?this.appendDummyInput().appendTitle(new Blockly.FieldLabel(b)):b.forEach(function(b,c){var d=this.appendFunctionalInput(b.name);0!==c&&d.setInline(!0),d.setHSV.apply(d,a.FunctionalTypeColors[b.type]),d.setCheck(b.type),d.setAlign(Blockly.ALIGN_LEFT)},this)},this),this.setFunctionalOutput(!1)}},D.functional_start_setFuncs=function(){if(!z)throw new Error("must register custom game logic");this.blockArgs.forEach(function(a){var b=this.getInputTargetBlock(a.name);b&&z.cacheBlock(a.name,b)},this)},a.Blocks.functional_start_setSpeeds={init:function(){var b="start (player-speed, enemy-speed)",c=a.BlockValueType.NONE,d=[{name:"PLAYER_SPEED",type:"Number"},{name:"ENEMY_SPEED",type:"Number"}];a.FunctionalBlockUtils.initTitledFunctionalBlock(this,b,c,d)}},D.functional_start_setSpeeds=function(){var a=7,b=Blockly.JavaScript.statementToCode(this,"PLAYER_SPEED",!1)||a,c=Blockly.JavaScript.statementToCode(this,"ENEMY_SPEED",!1)||a,d="0",e="1",f="Studio.setSpriteSpeed('block_id_"+this.id+"',"+d+","+b+");\n";return f+="Studio.setSpriteSpeed('block_id_"+this.id+"',"+e+","+c+");\n"},a.Blocks.functional_start_setBackgroundAndSpeeds={init:function(){var b="start (background, player-speed, enemy-speed)",c=a.BlockValueType.NONE,d=[{name:"BACKGROUND",type:a.BlockValueType.STRING},{name:"PLAYER_SPEED",type:"Number"},{name:"ENEMY_SPEED",type:"Number"}];a.FunctionalBlockUtils.initTitledFunctionalBlock(this,b,c,d)}},D.functional_start_setBackgroundAndSpeeds=function(){var a=Blockly.JavaScript.statementToCode(this,"BACKGROUND",!1)||"cave",b=7,c=Blockly.JavaScript.statementToCode(this,"PLAYER_SPEED",!1)||b,d=Blockly.JavaScript.statementToCode(this,"ENEMY_SPEED",!1)||b,e="Studio.setBackground('block_id_"+this.id+"',"+a+");\n";return e+="Studio.setSpriteSpeed('block_id_"+this.id+"',0,"+c+");\n",e+="Studio.setSpriteSpeed('block_id_"+this.id+"',1,"+d+");\n"},h.install(a,D);var J=B.backgroundChoices.slice(1);a.FunctionalBlockUtils.installStringPicker(a,D,{blockName:"functional_background_string_picker",values:J}),a.Blocks.studio_vanishSprite={helpUrl:"",init:function(){this.setHSV(184,1,.74),this.appendValueInput("SPRITE").setCheck(a.BlockValueType.NUMBER).appendTitle(g.vanishActorN({spriteIndex:""})),this.setPreviousStatement(!0),this.setInputsInline(!0),this.setNextStatement(!0),this.setTooltip(g.vanishTooltip())}},D.studio_vanishSprite=function(){var a=r(this);return"Studio.vanish('block_id_"+this.id+"', "+a+");\n"},a.Blocks.functional_sprite_dropdown={helpUrl:"",init:function(){this.setHSV.apply(this,a.FunctionalTypeColors[a.BlockValueType.IMAGE]),this.VALUES=B.spriteChoices;var b=l.map(y,function(a){return[B[a].dropdownThumbnail,a]}),c=new a.FieldImageDropdown(b,B.dropdownThumbnailWidth,B.dropdownThumbnailHeight);this.appendDummyInput().appendTitle(c,"SPRITE_INDEX"),this.setFunctionalOutput(!0)}},D.functional_sprite_dropdown=function(){return a.JavaScript.quote_(this.getTitleValue("SPRITE_INDEX"))},a.Blocks.functional_background_dropdown={helpUrl:"",init:function(){this.setHSV.apply(this,a.FunctionalTypeColors[a.BlockValueType.IMAGE]),this.VALUES=B.backgroundChoicesK1;var b=new a.FieldImageDropdown(B.backgroundChoicesK1,B.dropdownThumbnailWidth,B.dropdownThumbnailHeight);this.appendDummyInput().appendTitle(b,"BACKGROUND"),this.setFunctionalOutput(!0)}},D.functional_background_dropdown=function(){return t({value:this.getTitleValue("BACKGROUND"),ctx:this,returnValue:!0})},a.Blocks.functional_keydown={helpUrl:"",init:function(){a.FunctionalBlockUtils.initTitledFunctionalBlock(this,"keydown?",a.BlockValueType.BOOLEAN,[{name:"ARG1",type:"Number"}])}},D.functional_keydown=function(){var a=Blockly.JavaScript.statementToCode(this,"ARG1",!1)||-1;return"Studio.isKeyDown("+a+");"}}},{"../StudioApp":5,"../codegen":106,"../locale":150,"../sharedFunctionalBlocks":270,"../utils":323,"./constants":279,"./locale":285}],285:[function(a,b,c){b.exports=window.blockly.studio_locale},{}],276:[function(a,b,c){var d=a("./customGameLogic"),e=a("./constants"),f=e.Direction,g=e.Position,h=(a("../codegen"),a("./api"),a("../utils")),i=function(a,b){b=b||{},d.apply(this,arguments),this.playerSpriteIndex=0,this.targetSpriteIndex=1,this.dangerSpriteIndex=2,this.finished=!1,this.staticPlayer=h.valueOr(b.staticPlayer,!1)};i.inherits(d),i.prototype.onTick=function(){if(1===this.studio_.tickCount)return this.onFirstTick_(),void(this.studio_.playerScore=100);if(!this.finished){var a=document.getElementById("titleScreenTitle");if("visible"!==a.getAttribute("visibility")){var b=this.studio_.sprite[this.playerSpriteIndex],c=this.studio_.sprite[this.targetSpriteIndex],d=this.studio_.sprite[this.dangerSpriteIndex];this.updateSpriteX_(this.targetSpriteIndex,this.update_target.bind(this)),this.updateSpriteX_(this.dangerSpriteIndex,this.update_danger.bind(this));for(var e in this.studio_.keyState)"keydown"===this.studio_.keyState[e]&&this.handleUpdatePlayer_(e);for(var f in this.studio_.btnState)this.studio_.btnState[f]&&("leftButton"===f?this.handleUpdatePlayer_(37):"upButton"===f?this.handleUpdatePlayer_(38):"rightButton"===f?this.handleUpdatePlayer_(39):"downButton"===f&&this.handleUpdatePlayer_(40));if(b.visible&&d.visible&&this.collide(b.x,b.y,d.x,d.y)&&(this.studio_.vanishActor({spriteIndex:this.playerSpriteIndex}),setTimeout(function(){this.studio_.setSprite({spriteIndex:this.playerSpriteIndex,value:"visible"})}.bind(this),850),this.studio_.playerScore-=20,this.resetSprite_(d)),b.visible&&c.visible&&this.collide(b.x,b.y,c.x,c.y)&&(this.studio_.playerScore+=10,this.resetSprite_(c)),this.studio_.playerScore<=0){var g=document.getElementById("score");g.setAttribute("visibility","hidden"),this.studio_.showTitleScreen({title:"Game Over",text:"Click Reset to Play Again"});for(var h=0;h<this.studio_.spriteCount;h++)this.studio_.setSprite({spriteIndex:h,value:"hidden"});this.finished=!0}else this.studio_.displayScore()}}},i.prototype.reset=function(){this.finished=!1},i.prototype.onFirstTick_=function(){var a=function(a,b,c){b.setBackground(null,this.getVar_("background")),b.setSpritePosition(null,this.playerSpriteIndex,g.MIDDLECENTER),b.setSprite(null,this.playerSpriteIndex,this.getVar_("player")),b.setSpritePosition(null,this.targetSpriteIndex,g.TOPLEFT),b.setSprite(null,this.targetSpriteIndex,this.getVar_("target")),b.setSpritePosition(null,this.dangerSpriteIndex,g.BOTTOMRIGHT),b.setSprite(null,this.dangerSpriteIndex,this.getVar_("danger")),b.showTitleScreen(null,this.getVar_("title"),this.getVar_("subtitle"))}.bind(this);this.studio_.callApiCode("BigGame.onFirstTick",a)},i.prototype.updateSpriteX_=function(a,b){var c=this.studio_.sprite[a],d=c.x+c.width/2,e=b(d);c.x=e-c.width/2,this.onscreen(e)?c.visible||this.studio_.setSprite({spriteIndex:this.studio_.sprite.indexOf(c),value:"visible"}):c.visible&&this.resetSprite_(c)},i.prototype.handleUpdatePlayer_=function(a){var b=this.studio_.sprite[this.playerSpriteIndex];if(b.visible){var c=b.y+b.height/2,d=this.studio_.MAZE_HEIGHT-c,f=this.update_player(a,d);b.y=this.studio_.MAZE_HEIGHT-f-b.height/2,this.staticPlayer&&(b.dir=e.Direction.NONE)}},i.prototype.resetSprite_=function(a){a.dir===f.EAST?a.x=0-a.width:a.x=this.studio_.MAZE_WIDTH,a.y=Math.floor(Math.random()*(this.studio_.MAZE_HEIGHT-a.height)),this.studio_.setSprite({spriteIndex:this.studio_.sprite.indexOf(a),value:"hidden"})},i.prototype.update_target=function(a){return this.getFunc_("update-target")(a)},i.prototype.update_danger=function(a){return this.getFunc_("update-danger")(a)},i.prototype.update_player=function(a,b){return this.getFunc_("update-player")(a,b)},i.prototype.onscreen=function(a){return this.getFunc_("on-screen?")(a)},i.prototype.collide=function(a,b,c,d){return this.getFunc_("collide?")(a,b,c,d)},b.exports=i},{"../codegen":106,"../utils":323,"./api":274,"./constants":279,"./customGameLogic":281}],281:[function(a,b,c){var d=a("./constants"),e=(d.Direction,d.Position,a("../codegen")),f=a("./api"),g=function(a){this.studio_=a,this.cached_={}};g.prototype.onTick=function(){throw new Error("should be overridden by child")},g.prototype.reset=function(){},g.prototype.cacheBlock=function(a,b){this.cached_[a]=b},g.prototype.resolveCachedBlock_=function(a){var b="",c=this.cached_[a];if(!c)return b;var d="return "+Blockly.JavaScript.blockToCode(c);return b=e.evalWith(d,{Studio:f,Globals:Studio.Globals})},g.prototype.getVar_=function(a){return this.resolveCachedBlock_(a)},g.prototype.getFunc_=function(a){return this.resolveCachedBlock_(a)||function(){}},b.exports=g},{"../codegen":106,"./api":274,"./constants":279}],275:[function(a,b,c){c.setBackground=function(a){Studio.queueCmd(null,"setBackground",{value:a})},c.setSprite=function(a,b){Studio.queueCmd(null,"setSprite",{spriteIndex:a,value:b})},c.setSpriteEmotion=function(a,b){Studio.queueCmd(null,"setSpriteEmotion",{spriteIndex:a,value:b})},c.setSpriteSpeed=function(a,b){Studio.queueCmd(null,"setSpriteSpeed",{spriteIndex:a,value:b})},c.setSpritePosition=function(a,b){Studio.queueCmd(null,"setSpritePosition",{spriteIndex:a,value:b})},c.playSound=function(a){Studio.queueCmd(null,"playSound",{soundName:a})},c.throwProjectile=function(a,b,c){Studio.queueCmd(null,"throwProjectile",{spriteIndex:a,dir:b,className:c})},c.move=function(a,b){Studio.queueCmd(null,"move",{spriteIndex:a,dir:b})},c.moveEast=function(){Studio.queueCmd(null,"moveEast")},c.moveWest=function(){Studio.queueCmd(null,"moveWest")},c.moveNorth=function(){Studio.queueCmd(null,"moveNorth")},c.moveSouth=function(){Studio.queueCmd(null,"moveSouth")},c.changeScore=function(a){Studio.queueCmd(null,"changeScore",{value:a})},c.addItemsToScene=function(a,b){Studio.queueCmd(null,"addItemsToScene",{className:a,number:b})},c.vanish=function(a){Studio.queueCmd(null,"vanish",{spriteIndex:a})},c.onEvent=function(a,b){Studio.queueCmd(null,"onEvent",{eventName:a,func:b})}},{}],274:[function(a,b,c){var d=a("./constants");c.SpriteSpeed=d.SpriteSpeed,c.SpriteSize=d.SpriteSize;var e=3;c.random=function(a){var b=Math.floor(Math.random()*a.length);return a[b]},c.setBackground=function(a,b){Studio.queueCmd(a,"setBackground",{value:b})},c.setSprite=function(a,b,c){Studio.queueCmd(a,"setSprite",{spriteIndex:b,value:c})},c.saySprite=function(a,b,c,d){void 0===d&&(d=e),Studio.queueCmd(a,"saySprite",{spriteIndex:b,text:c,seconds:d})},c.showTitleScreen=function(a,b,c){Studio.queueCmd(a,"showTitleScreen",{title:b,text:c})},c.setSpriteEmotion=function(a,b,c){Studio.queueCmd(a,"setSpriteEmotion",{spriteIndex:b,value:c})},c.setSpriteSpeed=function(a,b,c){Studio.queueCmd(a,"setSpriteSpeed",{spriteIndex:b,value:c})},c.setSpriteSize=function(a,b,c){Studio.queueCmd(a,"setSpriteSize",{spriteIndex:b,value:c})},c.setSpritePosition=function(a,b,c){Studio.queueCmd(a,"setSpritePosition",{spriteIndex:b,value:Number(c)})},c.setSpriteXY=function(a,b,c,d){Studio.queueCmd(a,"setSpriteXY",{spriteIndex:b,x:Number(c),y:Number(d)})},c.playSound=function(a,b){Studio.queueCmd(a,"playSound",{soundName:b})},c.stop=function(a,b){Studio.queueCmd(a,"stop",{spriteIndex:b})},c.throwProjectile=function(a,b,c,d){Studio.queueCmd(a,"throwProjectile",{spriteIndex:b,dir:Number(c),className:String(d)})},c.makeProjectile=function(a,b,c){Studio.queueCmd(a,"makeProjectile",{className:b,action:c})},c.move=function(a,b,c){Studio.queueCmd(a,"move",{spriteIndex:b,dir:Number(c)})},c.moveDistance=function(a,b,c,d){Studio.queueCmd(a,"moveDistance",{spriteIndex:b,dir:c,distance:d})},c.changeScore=function(a,b){Studio.queueCmd(a,"changeScore",{value:b})},c.addItemsToScene=function(a,b,c){Studio.queueCmd(a,"addItemsToScene",{className:b,number:c})},c.setScoreText=function(a,b){Studio.queueCmd(a,"setScoreText",{text:b})},c.showCoordinates=function(a){Studio.queueCmd(a,"showCoordinates",{})},c.wait=function(a,b){Studio.queueCmd(a,"wait",{value:b})},c.vanish=function(a,b){Studio.queueCmd(a,"vanish",{spriteIndex:b})},c.onEvent=function(a,b,c){Studio.queueCmd(a,"onEvent",{eventName:String(b),func:c})},c.isKeyDown=function(a){return"keydown"===Studio.keyState[a]}},{"./constants":279}],273:[function(a,b,c){var d=a("./collidable"),e=a("./constants").Direction,f=a("./constants"),g="http://www.w3.org/2000/svg",h=0,i=function(a){d.apply(this,arguments),this.height=a.height||50,this.width=a.width||50,this.speed=a.speed||f.DEFAULT_SPRITE_SPEED/2,this.currentFrame_=0;var b=this;this.animator_=window.setInterval(function(){(b.loop||b.currentFrame_+1<b.frames)&&(b.currentFrame_=(b.currentFrame_+1)%b.frames)},50)};i.prototype=new d,b.exports=i,i.__resetIds=function(){h=0},i.prototype.createElement=function(a){this.clipPath=document.createElementNS(g,"clipPath");var b="item_clippath_"+h++;this.clipPath.setAttribute("id",b);var c=document.createElementNS(g,"rect");c.setAttribute("width",this.width),c.setAttribute("height",this.height),this.clipPath.appendChild(c),a.appendChild(this.clipPath),this.element=document.createElementNS(g,"image"),this.element.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",this.image),this.element.setAttribute("height",this.height),this.element.setAttribute("width",this.width*this.frames),a.appendChild(this.element),this.element.setAttribute("clip-path","url(#"+b+")")},i.prototype.removeElement=function(){this.element&&(this.element.parentNode.removeChild(this.element),this.element=null),this.clipPath&&(this.clipPath.parentNode.removeChild(this.clipPath),this.clipPath=null),this.animator_&&(window.clearInterval(this.animator_),this.animator_=null)},i.prototype.display=function(){var a={x:this.x-this.width/2,y:this.y-this.height/2};this.element.setAttribute("x",a.x-this.width*this.currentFrame_),this.element.setAttribute("y",a.y);var b=this.clipPath.childNodes[0];b.setAttribute("x",a.x),b.setAttribute("y",a.y)},i.prototype.getNextPosition=function(){var a=e.getUnitVector(this.dir);return{x:this.x+this.speed*a.x,y:this.y+this.speed*a.y}},i.prototype.moveToNextPosition=function(){var a=this.getNextPosition();this.x=a.x,this.y=a.y}},{"./collidable":278,"./constants":279}],278:[function(a,b,c){"use strict";var d=a("../StudioApp").singleton,e=a("./constants").Direction,f=function(a){for(var b in a)this[b]=a[b];this.visible=this.visible||!0,this.flags=0,this.collidingWith_={},this.frames=this.frames||1};b.exports=f,f.prototype.clearCollisions=function(){this.collidingWith_={}},f.prototype.startCollision=function(a){return this.isCollidingWith(a)?!1:(this.collidingWith_[a]=!0,!0)},f.prototype.endCollision=function(a){this.collidingWith_[a]=!1},f.prototype.isCollidingWith=function(a){return this.collidingWith_[a]===!0},f.prototype.bounce=function(){switch(this.dir){case e.NORTH:this.dir=e.SOUTH;break;case e.WEST:this.dir=e.EAST;break;case e.SOUTH:this.dir=e.NORTH;break;case e.EAST:this.dir=e.WEST;break;case e.NORTHEAST:this.dir=e.SOUTHWEST;break;case e.SOUTHEAST:this.dir=e.NORTHWEST;break;case e.SOUTHWEST:this.dir=e.NORTHEAST;break;case e.NORTHWEST:this.dir=e.SOUTHEAST}},f.prototype.outOfBounds=function(){return this.x<-(this.width/2)||this.x>d.MAZE_WIDTH+this.width/2||this.y<-(this.height/2)||this.y>d.MAZE_HEIGHT+this.height/2}},{"../StudioApp":5,"./constants":279}],279:[function(a,b,c){"use strict";c.SpriteSpeed={VERY_SLOW:2,SLOW:3,NORMAL:5,FAST:8,VERY_FAST:12},c.SpriteSize={VERY_SMALL:.5,SMALL:.75,NORMAL:1,LARGE:1.5,VERY_LARGE:2},c.Direction={NONE:0,NORTH:1,EAST:2,SOUTH:4,WEST:8,NORTHEAST:3,SOUTHEAST:6,SOUTHWEST:12,NORTHWEST:9};var d=c.Direction,e={};e[d.NONE]={x:0,y:0},e[d.NORTH]={x:0,y:-1},e[d.EAST]={x:1,y:0},e[d.SOUTH]={x:0,y:1},e[d.WEST]={x:-1,y:0},e[d.NORTHEAST]={x:1,y:-1},e[d.SOUTHEAST]={x:1,y:1},e[d.SOUTHWEST]={x:-1,y:1},e[d.NORTHWEST]={x:-1,y:-1},c.Direction.getUnitVector=function(a){return e[a]},c.Position={OUTTOPOUTLEFT:1,OUTTOPLEFT:2,OUTTOPCENTER:3,OUTTOPRIGHT:4,OUTTOPOUTRIGHT:5,TOPOUTLEFT:6,TOPLEFT:7,TOPCENTER:8,TOPRIGHT:9,TOPOUTRIGHT:10,MIDDLEOUTLEFT:11,MIDDLELEFT:12,MIDDLECENTER:13,MIDDLERIGHT:14,MIDDLEOUTRIGHT:15,BOTTOMOUTLEFT:16,BOTTOMLEFT:17,BOTTOMCENTER:18,BOTTOMRIGHT:19,BOTTOMOUTRIGHT:20,OUTBOTTOMOUTLEFT:21,OUTBOTTOMLEFT:22,OUTBOTTOMCENTER:23,OUTBOTTOMRIGHT:24,OUTBOTTOMOUTRIGHT:25},c.NextTurn={},c.NextTurn[d.NORTH]={},c.NextTurn[d.NORTH][d.NORTH]=d.NORTH,c.NextTurn[d.NORTH][d.EAST]=d.NORTHEAST,c.NextTurn[d.NORTH][d.SOUTH]=d.NORTHEAST,c.NextTurn[d.NORTH][d.WEST]=d.NORTHWEST,c.NextTurn[d.NORTH][d.NORTHEAST]=d.NORTHEAST,c.NextTurn[d.NORTH][d.SOUTHEAST]=d.NORTHEAST,c.NextTurn[d.NORTH][d.SOUTHWEST]=d.NORTHWEST,c.NextTurn[d.NORTH][d.NORTHWEST]=d.NORTHWEST,c.NextTurn[d.EAST]={},c.NextTurn[d.EAST][d.NORTH]=d.NORTHEAST,c.NextTurn[d.EAST][d.EAST]=d.EAST,c.NextTurn[d.EAST][d.SOUTH]=d.SOUTHEAST,c.NextTurn[d.EAST][d.WEST]=d.SOUTHEAST,c.NextTurn[d.EAST][d.NORTHEAST]=d.NORTHEAST,c.NextTurn[d.EAST][d.SOUTHEAST]=d.SOUTHEAST,c.NextTurn[d.EAST][d.SOUTHWEST]=d.SOUTHEAST,c.NextTurn[d.EAST][d.NORTHWEST]=d.NORTHEAST,c.NextTurn[d.SOUTH]={},c.NextTurn[d.SOUTH][d.NORTH]=d.SOUTHEAST,c.NextTurn[d.SOUTH][d.EAST]=d.SOUTHEAST,c.NextTurn[d.SOUTH][d.SOUTH]=d.SOUTH,c.NextTurn[d.SOUTH][d.WEST]=d.SOUTHWEST,c.NextTurn[d.SOUTH][d.NORTHEAST]=d.SOUTHEAST,c.NextTurn[d.SOUTH][d.SOUTHEAST]=d.SOUTHEAST,c.NextTurn[d.SOUTH][d.SOUTHWEST]=d.SOUTHWEST,c.NextTurn[d.SOUTH][d.NORTHWEST]=d.SOUTHWEST,c.NextTurn[d.WEST]={},c.NextTurn[d.WEST][d.NORTH]=d.NORTHWEST,c.NextTurn[d.WEST][d.EAST]=d.SOUTHWEST,c.NextTurn[d.WEST][d.SOUTH]=d.SOUTHWEST,c.NextTurn[d.WEST][d.WEST]=d.WEST,c.NextTurn[d.WEST][d.NORTHEAST]=d.NORTHWEST,c.NextTurn[d.WEST][d.SOUTHEAST]=d.SOUTHWEST,c.NextTurn[d.WEST][d.SOUTHWEST]=d.SOUTHWEST,c.NextTurn[d.WEST][d.NORTHWEST]=d.NORTHWEST,c.NextTurn[d.NORTHEAST]={},c.NextTurn[d.NORTHEAST][d.NORTH]=d.NORTH,c.NextTurn[d.NORTHEAST][d.EAST]=d.EAST,c.NextTurn[d.NORTHEAST][d.SOUTH]=d.EAST,c.NextTurn[d.NORTHEAST][d.WEST]=d.NORTH,c.NextTurn[d.NORTHEAST][d.NORTHEAST]=d.NORTHEAST,c.NextTurn[d.NORTHEAST][d.SOUTHEAST]=d.EAST,c.NextTurn[d.NORTHEAST][d.SOUTHWEST]=d.EAST,c.NextTurn[d.NORTHEAST][d.NORTHWEST]=d.NORTH,c.NextTurn[d.SOUTHEAST]={},c.NextTurn[d.SOUTHEAST][d.NORTH]=d.EAST,c.NextTurn[d.SOUTHEAST][d.EAST]=d.EAST,c.NextTurn[d.SOUTHEAST][d.SOUTH]=d.SOUTH,c.NextTurn[d.SOUTHEAST][d.WEST]=d.SOUTH,c.NextTurn[d.SOUTHEAST][d.NORTHEAST]=d.EAST,c.NextTurn[d.SOUTHEAST][d.SOUTHEAST]=d.SOUTHEAST,c.NextTurn[d.SOUTHEAST][d.SOUTHWEST]=d.SOUTH,c.NextTurn[d.SOUTHEAST][d.NORTHWEST]=d.SOUTH,c.NextTurn[d.SOUTHWEST]={},c.NextTurn[d.SOUTHWEST][d.NORTH]=d.WEST,c.NextTurn[d.SOUTHWEST][d.EAST]=d.SOUTH,c.NextTurn[d.SOUTHWEST][d.SOUTH]=d.SOUTH,c.NextTurn[d.SOUTHWEST][d.WEST]=d.WEST,c.NextTurn[d.SOUTHWEST][d.NORTHEAST]=d.SOUTH,c.NextTurn[d.SOUTHWEST][d.SOUTHEAST]=d.SOUTH,c.NextTurn[d.SOUTHWEST][d.SOUTHWEST]=d.SOUTHWEST,c.NextTurn[d.SOUTHWEST][d.NORTHWEST]=d.WEST,c.NextTurn[d.NORTHWEST]={},c.NextTurn[d.NORTHWEST][d.NORTH]=d.NORTH,c.NextTurn[d.NORTHWEST][d.EAST]=d.NORTH,c.NextTurn[d.NORTHWEST][d.SOUTH]=d.WEST,c.NextTurn[d.NORTHWEST][d.WEST]=d.WEST,c.NextTurn[d.NORTHWEST][d.NORTHEAST]=d.NORTH,c.NextTurn[d.NORTHWEST][d.SOUTHEAST]=d.WEST,c.NextTurn[d.NORTHWEST][d.SOUTHWEST]=d.WEST,c.NextTurn[d.NORTHWEST][d.NORTHWEST]=d.NORTHWEST,c.Emotions={NORMAL:0,HAPPY:1,ANGRY:2,SAD:3},c.FINISH_COLLIDE_DISTANCE_SCALING=.75,c.SPRITE_COLLIDE_DISTANCE_SCALING=.9,c.DEFAULT_SPRITE_SPEED=5,c.DEFAULT_SPRITE_SIZE=1,c.SquareType={OPEN:0,SPRITEFINISH:1,NOT_USED_2:2,WALL:4,NOT_USED_8:8,SPRITESTART:16,ITEM_CLASS_0:32,ITEM_CLASS_1:64,ITEM_CLASS_2:128,ITEM_CLASS_3:256,ITEM_CLASS_4:512,ITEM_CLASS_5:1024,ITEM_CLASS_6:2048,ITEM_CLASS_7:4096},c.SquareItemClassMask=c.SquareType.ITEM_CLASS_0|c.SquareType.ITEM_CLASS_1|c.SquareType.ITEM_CLASS_2|c.SquareType.ITEM_CLASS_3|c.SquareType.ITEM_CLASS_4|c.SquareType.ITEM_CLASS_5|c.SquareType.ITEM_CLASS_6|c.SquareType.ITEM_CLASS_7,c.SquareItemClassShift=5,c.squareHasItemClass=function(a,b){var d=(b&c.SquareItemClassMask)>>>c.SquareItemClassShift;return Math.pow(2,a)&d},c.RANDOM_VALUE="random",c.HIDDEN_VALUE='"hidden"',c.CLICK_VALUE='"click"',c.VISIBLE_VALUE='"visible"'},{}]},{},[286]);