require=function a(b,c,d){function e(g,h){if(!c[g]){if(!b[g]){var i="function"==typeof require&&require;if(!h&&i)return i(g,!0);if(f)return f(g,!0);var j=new Error("Cannot find module '"+g+"'");throw j.code="MODULE_NOT_FOUND",j}var k=c[g]={exports:{}};b[g][0].call(k.exports,function(a){var c=b[g][1][a];return e(c?c:a)},k,k.exports,a,b,c,d)}return c[g].exports}for(var f="function"==typeof require&&require,g=0;g<d.length;g++)e(d[g]);return e}({69:[function(a){(function(b){var c=a("../appMain");window.Flappy=a("./flappy"),"undefined"!=typeof b&&(b.Flappy=window.Flappy);var d=a("./blocks"),e=a("./levels"),f=a("./skins");window.flappyMain=function(a){a.skinsModule=f,a.blocksModule=d,c(window.Flappy,e,a)}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"../appMain":3,"./blocks":64,"./flappy":67,"./levels":68,"./skins":70}],70:[function(a,b,c){var d=a("../skins"),e={flappy:{}};c.load=function(a,b){var c=d.load(a,b),f=e[c.id];return c.scifi={background:c.assetUrl("background_scifi.png"),avatar:c.assetUrl("avatar_scifi.png"),obstacle_bottom:c.assetUrl("obstacle_bottom_scifi.png"),obstacle_bottom_thumb:c.assetUrl("obstacle_bottom_scifi_thumb.png"),obstacle_top:c.assetUrl("obstacle_top_scifi.png"),ground:c.assetUrl("ground_scifi.png"),ground_thumb:c.assetUrl("ground_scifi_thumb.png")},c.underwater={background:c.assetUrl("background_underwater.png"),avatar:c.assetUrl("avatar_underwater.png"),obstacle_bottom:c.assetUrl("obstacle_bottom_underwater.png"),obstacle_bottom_thumb:c.assetUrl("obstacle_bottom_underwater_thumb.png"),obstacle_top:c.assetUrl("obstacle_top_underwater.png"),ground:c.assetUrl("ground_underwater.png"),ground_thumb:c.assetUrl("ground_underwater_thumb.png")},c.cave={background:c.assetUrl("background_cave.png"),avatar:c.assetUrl("avatar_cave.png"),obstacle_bottom:c.assetUrl("obstacle_bottom_cave.png"),obstacle_bottom_thumb:c.assetUrl("obstacle_bottom_cave_thumb.png"),obstacle_top:c.assetUrl("obstacle_top_cave.png"),ground:c.assetUrl("ground_cave.png"),ground_thumb:c.assetUrl("ground_cave_thumb.png")},c.santa={background:c.assetUrl("background_santa.png"),avatar:c.assetUrl("santa.png"),obstacle_bottom:c.assetUrl("obstacle_bottom_santa.png"),obstacle_bottom_thumb:c.assetUrl("obstacle_bottom_santa_thumb.png"),obstacle_top:c.assetUrl("obstacle_top_santa.png"),ground:c.assetUrl("ground_santa.png"),ground_thumb:c.assetUrl("ground_santa_thumb.png")},c.night={background:c.assetUrl("background_night.png")},c.redbird={avatar:c.assetUrl("avatar_redbird.png")},c.laser={obstacle_bottom:c.assetUrl("obstacle_bottom_laser.png"),obstacle_bottom_thumb:c.assetUrl("obstacle_bottom_laser_thumb.png"),obstacle_top:c.assetUrl("obstacle_top_laser.png")},c.lava={ground:c.assetUrl("ground_lava.png"),ground_thumb:c.assetUrl("ground_lava_thumb.png")},c.shark={avatar:c.assetUrl("shark.png")},c.easter={avatar:c.assetUrl("easterbunny.png")},c.batman={avatar:c.assetUrl("batman.png")},c.submarine={avatar:c.assetUrl("submarine.png")},c.unicorn={avatar:c.assetUrl("unicorn.png")},c.fairy={avatar:c.assetUrl("fairy.png")},c.superman={avatar:c.assetUrl("superman.png")},c.turkey={avatar:c.assetUrl("turkey.png")},c.ground=c.assetUrl("ground.png"),c.ground_thumb=c.assetUrl("ground_thumb.png"),c.obstacle_top=c.assetUrl("obstacle_top.png"),c.obstacle_bottom=c.assetUrl("obstacle_bottom.png"),c.obstacle_bottom_thumb=c.assetUrl("obstacle_bottom_thumb.png"),c.instructions=c.assetUrl("instructions.png"),c.clickrun=c.assetUrl("clickrun.png"),c.getready=c.assetUrl("getready.png"),c.gameover=c.assetUrl("gameover.png"),c.flapIcon=c.assetUrl("flap-bird.png"),c.crashIcon=c.assetUrl("when-crash.png"),c.collideObstacleIcon=c.assetUrl("when-obstacle.png"),c.collideGroundIcon=c.assetUrl("when-crash.png"),c.enterObstacleIcon=c.assetUrl("when-pass.png"),c.tiles=c.assetUrl("tiles.png"),c.goal=c.assetUrl("goal.png"),c.goalSuccess=c.assetUrl("goal_success.png"),c.obstacle=c.assetUrl("obstacle.png"),c.obstacleScale=f.obstacleScale||1,c.largerObstacleAnimationTiles=c.assetUrl(f.largerObstacleAnimationTiles),c.hittingWallAnimation=c.assetUrl(f.hittingWallAnimation),c.approachingGoalAnimation=c.assetUrl(f.approachingGoalAnimation),c.obstacleSound=[c.assetUrl("obstacle.mp3"),c.assetUrl("obstacle.ogg")],c.wallSound=[c.assetUrl("wall.mp3"),c.assetUrl("wall.ogg")],c.winGoalSound=[c.assetUrl("win_goal.mp3"),c.assetUrl("win_goal.ogg")],c.wall0Sound=[c.assetUrl("wall0.mp3"),c.assetUrl("wall0.ogg")],c.dieSound=[c.assetUrl("sfx_die.mp3"),c.assetUrl("sfx_die.ogg")],c.hitSound=[c.assetUrl("sfx_hit.mp3"),c.assetUrl("sfx_hit.ogg")],c.pointSound=[c.assetUrl("sfx_point.mp3"),c.assetUrl("sfx_point.ogg")],c.swooshingSound=[c.assetUrl("sfx_swooshing.mp3"),c.assetUrl("sfx_swooshing.ogg")],c.wingSound=[c.assetUrl("sfx_wing.mp3"),c.assetUrl("sfx_wing.ogg")],c.jetSound=[c.assetUrl("jet.mp3"),c.assetUrl("jet.ogg")],c.crashSound=[c.assetUrl("crash.mp3"),c.assetUrl("crash.ogg")],c.jingleSound=[c.assetUrl("jingle.mp3"),c.assetUrl("jingle.ogg")],c.laserSound=[c.assetUrl("laser.mp3"),c.assetUrl("laser.ogg")],c.splashSound=[c.assetUrl("splash.mp3"),c.assetUrl("splash.ogg")],c.graph=f.graph,c.background=c.assetUrl("background.png"),c}},{"../skins":117}],68:[function(a,b){var c=a("./constants"),d=a("../../locale/current/flappy"),e=a("../block_utils").createToolbox,f=a("../utils"),g='<block type="flappy_flap"></block>',h='<block type="flappy_flap_height"></block>',i='<block type="flappy_endGame"></block>',j='<block type="flappy_playSound"></block>',k='<block type="flappy_incrementPlayerScore"></block>',l='<block type="flappy_setSpeed"></block>',m='<block type="flappy_setBackground"></block>',n='<block type="flappy_setGapHeight"></block>',o='<block type="flappy_setPlayer"></block>',p='<block type="flappy_setObstacle"></block>',q='<block type="flappy_setGround"></block>',r='<block type="flappy_setGravity"></block>',s='<block type="flappy_setScore"></block>',t=c.AVATAR_HEIGHT,u=c.AVATAR_WIDTH,v=(c.AVATAR_Y_OFFSET,function(a,b){return'<block type="'+a+'" deletable="false">'+(b?"<next>"+b+"</next>":"")+"</block>"}),w=function(a,b){return'<block type="'+a+'" deletable="false" movable="false">'+(b?"<next>"+b+"</next>":"")+"</block>"};b.exports={1:{requiredBlocks:[[{test:"flap",type:"flappy_flap"}]],obstacles:!1,ground:!1,score:!1,freePlay:!1,goal:{startX:100,startY:0,successCondition:function(){return Flappy.avatarY<=40},failureCondition:function(){return Flappy.avatarY>Flappy.MAZE_HEIGHT}},scale:{snapRadius:2},toolbox:e(g+j),startBlocks:v("flappy_whenClick"),appSpecificFailError:d.flappySpecificFail()},2:{requiredBlocks:[[{test:"endGame",type:"flappy_endGame"}]],obstacles:!1,ground:!0,score:!1,freePlay:!1,goal:{startX:100,startY:324,successCondition:function(){return 322===Flappy.avatarY&&110===Flappy.avatarX},failureCondition:function(){var a=Flappy.avatarY+t,b=Flappy.MAZE_HEIGHT-Flappy.GROUND_HEIGHT;return a>=b&&Flappy.gameState===Flappy.GameStates.ACTIVE}},scale:{snapRadius:2},toolbox:e(g+i+j),startBlocks:v("flappy_whenClick",g)+v("flappy_whenCollideGround")},3:{requiredBlocks:[[{test:"setSpeed",type:"flappy_setSpeed"}]],obstacles:!1,ground:!0,score:!1,freePlay:!1,goal:{startX:345,startY:0,moving:!0,successCondition:function(){var a={x:(Flappy.avatarX+u)/2,y:(Flappy.avatarY+t)/2},b={x:(Flappy.goalX+Flappy.GOAL_SIZE)/2,y:(Flappy.goalY+Flappy.GOAL_SIZE)/2},c={x:Math.abs(a.x-b.x),y:Math.abs(a.y-b.y)};return c.x<15&&c.y<15},failureCondition:function(){return Flappy.activeTicks()>=120&&0===Flappy.SPEED}},scale:{snapRadius:2},toolbox:e(g+j+l),startBlocks:v("flappy_whenClick",g)+v("when_run")},4:{requiredBlocks:[[{test:"endGame",type:"flappy_endGame"}]],obstacles:!0,ground:!0,score:!1,freePlay:!1,goal:{startX:572,startY:324,moving:!0,successCondition:function(){return Flappy.obstacles[0].hitAvatar&&Flappy.gameState===Flappy.GameStates.OVER},failureCondition:function(){var a=Flappy.obstacles[0].x+Flappy.OBSTACLE_WIDTH;return a<Flappy.avatarX}},scale:{snapRadius:2},toolbox:e(g+i+j+l),startBlocks:v("flappy_whenClick",g)+v("when_run",l)+v("flappy_whenCollideObstacle")},5:{requiredBlocks:[[{test:"incrementPlayerScore",type:"flappy_incrementPlayerScore"}]],defaultFlap:"SMALL",obstacles:!0,ground:!0,score:!0,freePlay:!1,goal:{successCondition:function(){var a=!1;return Flappy.obstacles.forEach(function(b){!b.hitAvatar&&b.containsAvatar()&&(a=!0)}),a&&Flappy.playerScore>0},failureCondition:function(){var a=!1;return Flappy.obstacles.forEach(function(b){!b.hitAvatar&&b.containsAvatar()&&(a=!0)}),a&&0===Flappy.playerScore}},scale:{snapRadius:2},toolbox:e(g+i+k+j+l),startBlocks:v("flappy_whenClick",g)+v("flappy_whenEnterObstacle")+v("when_run",l)},6:{requiredBlocks:[[{test:"flap",type:"flappy_flap_height"}]],obstacles:!0,ground:!0,score:!0,freePlay:!1,goal:{successCondition:function(){var a=!1;return Flappy.obstacles.forEach(function(b){b.containsAvatar()&&(a=!0)}),a&&Flappy.playerScore>0},failureCondition:function(){var a=!1;return Flappy.obstacles.forEach(function(b){b.containsAvatar()&&(a=!0)}),a&&0===Flappy.playerScore}},scale:{snapRadius:2},toolbox:e(h+i+k+j+l),startBlocks:v("flappy_whenClick")+v("flappy_whenEnterObstacle",k)+v("when_run",l)},7:{requiredBlocks:[[{test:"setBackground",type:"flappy_setBackground"}]],obstacles:!0,ground:!0,score:!0,freePlay:!1,goal:{successCondition:function(){return Flappy.gameState===Flappy.GameStates.OVER}},scale:{snapRadius:2},toolbox:e(h+i+k+j+l+m),startBlocks:v("flappy_whenClick",h)+v("flappy_whenCollideGround",i)+v("flappy_whenCollideObstacle",i)+v("flappy_whenEnterObstacle",k)+v("when_run",l)},8:{requiredBlocks:[[{test:function(a){return("flappy_setBackground"===a.type||"flappy_setPlayer"===a.type)&&"random"===a.getTitleValue("VALUE")},type:"flappy_setBackground",titles:{VALUE:"random"}}]],obstacles:!0,ground:!0,score:!0,freePlay:!1,goal:{successCondition:function(){return Flappy.gameState===Flappy.GameStates.OVER}},scale:{snapRadius:2},toolbox:e(h+i+k+j+l+m+o),startBlocks:v("flappy_whenClick",h)+v("flappy_whenCollideGround",i)+v("flappy_whenCollideObstacle",i)+v("flappy_whenEnterObstacle",k)+v("when_run",l)},9:{requiredBlocks:[[{test:function(a){return"flappy_setScore"===a.type},type:"flappy_setScore"}]],obstacles:!0,ground:!0,score:!0,freePlay:!1,goal:{successCondition:function(){return Flappy.gameState===Flappy.GameStates.OVER}},scale:{snapRadius:2},toolbox:e(h+i+k+j+l+m+o+s),startBlocks:v("flappy_whenClick",h)+v("flappy_whenCollideGround",i)+v("flappy_whenCollideObstacle")+v("flappy_whenEnterObstacle",k)+v("when_run",l)},11:{shareable:!0,requiredBlocks:[],obstacles:!0,ground:!0,score:!0,freePlay:!0,scale:{snapRadius:2},toolbox:e(h+j+k+i+l+m+o+p+q+n+r+s),startBlocks:v("flappy_whenClick")+v("flappy_whenCollideGround")+v("flappy_whenCollideObstacle")+v("flappy_whenEnterObstacle")+v("when_run")},k1:{requiredBlocks:[],obstacles:!0,ground:!0,score:!0,freePlay:!0,isK1:!0,scale:{snapRadius:2},toolbox:e(g+i+m+o+p+q+j+h+l+k+n+r+s),startBlocks:v("flappy_whenClick")+v("flappy_whenCollideGround")+v("flappy_whenCollideObstacle")+v("flappy_whenEnterObstacle")+v("when_run")}},b.exports.k1_1={isK1:!0,grayOutUndeletableBlocks:!0,requiredBlocks:[],obstacles:!0,ground:!0,score:!0,freePlay:!0,scale:{snapRadius:2},toolbox:"",startBlocks:w("flappy_whenClick",w("flappy_flap"))+w("flappy_whenCollideGround",w("flappy_endGame"))+w("flappy_whenCollideObstacle",w("flappy_endGame"))+w("flappy_whenEnterObstacle",w("flappy_incrementPlayerScore"))+w("when_run",w("flappy_setSpeed"))},b.exports.k1_2=f.extend(b.exports[1],{isK1:!0}),b.exports.k1_3=f.extend(b.exports[2],{isK1:!0}),b.exports.k1_4=f.extend(b.exports[3],{isK1:!0}),b.exports.k1_5=f.extend(b.exports[4],{isK1:!0}),b.exports.k1_6=f.extend(b.exports[5],{isK1:!0}),b.exports.k1_7={isK1:!0,requiredBlocks:[[{test:"incrementPlayerScore",type:"flappy_incrementPlayerScore"}]],defaultFlap:"SMALL",obstacles:!0,ground:!0,score:!0,freePlay:!1,goal:{successCondition:function(){var a=!1;return Flappy.obstacles.forEach(function(b){!b.hitAvatar&&b.containsAvatar()&&(a=!0)}),a&&Flappy.playerScore>1},failureCondition:function(){var a=!1;return Flappy.obstacles.forEach(function(b){!b.hitAvatar&&b.containsAvatar()&&(a=!0)}),a&&Flappy.playerScore<=1}},scale:{snapRadius:2},toolbox:e(g+i+k+j+l),startBlocks:v("flappy_whenClick",g)+v("flappy_whenEnterObstacle")+v("when_run",l)},b.exports.k1_8=f.extend(b.exports[7],{isK1:!0,toolbox:e(g+i+k+j+l+m),startBlocks:v("flappy_whenClick",g)+v("flappy_whenCollideGround",i)+v("flappy_whenCollideObstacle",i)+v("flappy_whenEnterObstacle",k)+v("when_run",l)}),b.exports.k1_9={isK1:!0,requiredBlocks:[[{test:"setPlayer",type:"flappy_setPlayer"}]],obstacles:!0,ground:!0,score:!0,freePlay:!1,goal:{successCondition:function(){return Flappy.gameState===Flappy.GameStates.OVER}},scale:{snapRadius:2},toolbox:e(g+i+k+j+l+m+o),startBlocks:v("flappy_whenClick",g)+v("flappy_whenCollideGround",i)+v("flappy_whenCollideObstacle",i)+v("flappy_whenEnterObstacle",k)+v("when_run",l)}},{"../../locale/current/flappy":164,"../block_utils":16,"../utils":157,"./constants":65}],67:[function(a,b){"use strict";var c=a("../StudioApp").singleton,d=a("../../locale/current/common"),e=a("../../locale/current/flappy"),f=(a("../skins"),a("../codegen")),g=a("./api"),h=a("../templates/page.html"),i=a("../dom"),j=a("./constants"),k=a("../utils"),l=c.ResultType,m=c.TestResults,n=b.exports;n.GameStates={WAITING:0,ACTIVE:1,ENDING:2,OVER:3},n.gameState=n.GameStates.WAITING,n.clickPending=!1,n.avatarVelocity=0;var o,p;n.obstacles=[];var q;c.setCheckForEmptyBlocks(!0);var r=function(){var a=n.MIN_OBSTACLE_HEIGHT,b=n.MAZE_HEIGHT-n.GROUND_HEIGHT-n.MIN_OBSTACLE_HEIGHT-n.GAP_SIZE;return Math.floor(Math.random()*(b-a)+a)};n.scale={snapRadius:1,stepSpeed:33};var s={text:e.shareFlappyTwitter(),hashtag:"FlappyCode"},t=j.AVATAR_HEIGHT,u=j.AVATAR_WIDTH,v=(j.AVATAR_Y_OFFSET,function(){q=void 0===o.infoText?!0:o.infoText,q||(n.gameState=n.GameStates.ACTIVE);for(var a in o.scale)n.scale[a]=o.scale[a];n.MARKER_HEIGHT=43,n.MARKER_WIDTH=50,n.MAZE_WIDTH=400,n.MAZE_HEIGHT=400,n.GROUND_WIDTH=400,n.GROUND_HEIGHT=48,n.GOAL_SIZE=55,n.OBSTACLE_WIDTH=52,n.OBSTACLE_HEIGHT=320,n.MIN_OBSTACLE_HEIGHT=48,n.setGapHeight(g.GapHeight.NORMAL),n.OBSTACLE_SPACING=250;var b=2*n.MAZE_WIDTH/n.OBSTACLE_SPACING;o.obstacles||(b=0);for(var c=function(a){this.x=a,this.gapStart=r(),this.hitAvatar=!1},d=function(){var a=n.avatarX+u,b=n.avatarY+t,c=this.x+n.OBSTACLE_WIDTH,d=this.gapStart+n.GAP_SIZE;return a>this.x&&c>a&&n.avatarY>this.gapStart&&d>b},e=0;b>e;e++)n.obstacles.push({x:1.5*n.MAZE_WIDTH+e*n.OBSTACLE_SPACING,gapStart:r(),hitAvatar:!1,reset:c,containsAvatar:d})}),w=function(){var a,b,c=document.getElementById("svgFlappy");c.setAttribute("width",n.MAZE_WIDTH),c.setAttribute("height",n.MAZE_HEIGHT);var d=document.getElementById("visualizationColumn");if(d.style.width=n.MAZE_WIDTH+"px",p.background&&(b=document.createElementNS(Blockly.SVG_NS,"image"),b.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",p.background),b.setAttribute("id","background"),b.setAttribute("height",n.MAZE_HEIGHT),b.setAttribute("width",n.MAZE_WIDTH),b.setAttribute("x",0),b.setAttribute("y",0),c.appendChild(b)),n.obstacles.forEach(function(a,b){var d=document.createElementNS(Blockly.SVG_NS,"image");d.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",p.obstacle_top),d.setAttribute("id","obstacle_top"+b),d.setAttribute("height",n.OBSTACLE_HEIGHT),d.setAttribute("width",n.OBSTACLE_WIDTH),c.appendChild(d);var e=document.createElementNS(Blockly.SVG_NS,"image");e.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",p.obstacle_bottom),e.setAttribute("id","obstacle_bottom"+b),e.setAttribute("height",n.OBSTACLE_HEIGHT),e.setAttribute("width",n.OBSTACLE_WIDTH),c.appendChild(e)}),o.ground)for(a=0;a<n.MAZE_WIDTH/n.GROUND_WIDTH+1;a++){var e=document.createElementNS(Blockly.SVG_NS,"image");e.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",p.ground),e.setAttribute("id","ground"+a),e.setAttribute("height",n.GROUND_HEIGHT),e.setAttribute("width",n.GROUND_WIDTH),e.setAttribute("x",0),e.setAttribute("y",n.MAZE_HEIGHT-n.GROUND_HEIGHT),c.appendChild(e)}if(o.goal&&o.goal.startX){var f=document.createElementNS(Blockly.SVG_NS,"image");f.setAttribute("id","goal"),f.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",p.goal),f.setAttribute("height",n.GOAL_SIZE),f.setAttribute("width",n.GOAL_SIZE),f.setAttribute("x",o.goal.startX),f.setAttribute("y",o.goal.startY),c.appendChild(f)}var g=document.createElementNS(Blockly.SVG_NS,"clipPath");g.setAttribute("id","avatArclipPath");var h=document.createElementNS(Blockly.SVG_NS,"rect");h.setAttribute("id","avatArclipRect"),h.setAttribute("width",n.MAZE_WIDTH),h.setAttribute("height",n.MAZE_HEIGHT-n.GROUND_HEIGHT),g.appendChild(h),c.appendChild(g);var i=document.createElementNS(Blockly.SVG_NS,"image");i.setAttribute("id","avatar"),i.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",p.avatar),i.setAttribute("height",t),i.setAttribute("width",u),o.ground&&i.setAttribute("clip-path","url(#avatArclipPath)"),c.appendChild(i);var j=document.createElementNS(Blockly.SVG_NS,"image");j.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",p.instructions),j.setAttribute("id","instructions"),j.setAttribute("height",50),j.setAttribute("width",159),j.setAttribute("x",110),j.setAttribute("y",170),j.setAttribute("visibility","hidden"),c.appendChild(j);var k=document.createElementNS(Blockly.SVG_NS,"image");k.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",p.getready),k.setAttribute("id","getready"),k.setAttribute("height",50),k.setAttribute("width",183),k.setAttribute("x",108),k.setAttribute("y",80),k.setAttribute("visibility","hidden"),c.appendChild(k);var l=document.createElementNS(Blockly.SVG_NS,"image");l.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",p.clickrun),l.setAttribute("id","clickrun"),l.setAttribute("height",41),l.setAttribute("width",273),l.setAttribute("x",64),l.setAttribute("y",200),l.setAttribute("visibility","visibile"),c.appendChild(l);var m=document.createElementNS(Blockly.SVG_NS,"image");m.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",p.gameover),m.setAttribute("id","gameover"),m.setAttribute("height",41),m.setAttribute("width",192),m.setAttribute("x",104),m.setAttribute("y",80),m.setAttribute("visibility","hidden"),c.appendChild(m);var q=document.createElementNS(Blockly.SVG_NS,"text");q.setAttribute("id","score"),q.setAttribute("class","flappy-score"),q.setAttribute("x",n.MAZE_WIDTH/2),q.setAttribute("y",60),q.appendChild(document.createTextNode("0")),q.setAttribute("visibility","hidden"),c.appendChild(q);var r=document.createElementNS(Blockly.SVG_NS,"rect");r.setAttribute("width",n.MAZE_WIDTH),r.setAttribute("height",n.MAZE_HEIGHT),r.setAttribute("fill-opacity",0),r.addEventListener("touchstart",function(a){n.onMouseDown(a),a.preventDefault()}),r.addEventListener("mousedown",function(a){n.onMouseDown(a)}),c.appendChild(r)};n.calcDistance=function(a,b){return Math.sqrt(a*a+b*b)};var x=function(a){var b=n.avatarX+u>=a.x&&n.avatarX<=a.x+n.OBSTACLE_WIDTH;return b&&(n.avatarY<=a.gapStart||n.avatarY+t>=a.gapStart+n.GAP_SIZE)?!0:!1};n.activeTicks=function(){return n.firstActiveTick<0?0:n.tickCount-n.firstActiveTick},n.callUserGeneratedCode=function(a){try{a.call(n,c,g)}catch(b){console&&console.log(b)}},n.onTick=function(){var a,b;if(n.firstActiveTick<0&&n.gameState===n.GameStates.ACTIVE&&(n.firstActiveTick=n.tickCount),n.tickCount++,1===n.tickCount&&n.callUserGeneratedCode(n.whenRunButton),n.clickPending&&n.gameState<=n.GameStates.ACTIVE&&(n.callUserGeneratedCode(n.whenClick),n.clickPending=!1),a=n.avatarY+t<n.MAZE_HEIGHT-n.GROUND_HEIGHT,n.gameState===n.GameStates.ACTIVE){n.avatarVelocity+=n.gravity,n.avatarY=n.avatarY+n.avatarVelocity;var d=o.ground?n.MAZE_HEIGHT-n.GROUND_HEIGHT-t+1:1.5*n.MAZE_HEIGHT;n.avatarY=Math.min(n.avatarY,d),n.avatarY=Math.max(n.avatarY,n.MAZE_HEIGHT*-.5),n.obstacles.forEach(function(a,b){var d=a.x>n.avatarX+u;a.x-=n.SPEED;var e=a.x>n.avatarX+u;if(d&&!e&&n.avatarY>a.gapStart&&n.avatarY+t<a.gapStart+n.GAP_SIZE&&n.callUserGeneratedCode(n.whenEnterObstacle),!a.hitAvatar&&x(a)){a.hitAvatar=!0;try{n.whenCollideObstacle(c,g)}catch(f){}}var h=n.obstacles.length,i=(b-1+h)%h;a.x+n.OBSTACLE_WIDTH<0&&a.reset(n.obstacles[i].x+n.OBSTACLE_SPACING)}),b=n.avatarY+t<n.MAZE_HEIGHT-n.GROUND_HEIGHT,a&&!b&&n.callUserGeneratedCode(n.whenCollideGround),o.goal&&o.goal.moving&&(n.goalX-=n.SPEED,n.goalX+n.GOAL_SIZE<0&&(n.goalX=n.MAZE_WIDTH+n.GOAL_SIZE))}if(n.gameState===n.GameStates.ENDING){n.avatarY+=10;var e=n.MAZE_HEIGHT-n.GROUND_HEIGHT-u+4;n.avatarY>=e&&(n.avatarY=e,n.gameState=n.GameStates.OVER,n.gameOverTick=n.tickCount),document.getElementById("avatar").setAttribute("transform","translate("+u+", 0) rotate(90, "+n.avatarX+", "+n.avatarY+")"),q&&document.getElementById("gameover").setAttribute("visibility","visibile")}n.displayAvatar(n.avatarX,n.avatarY),n.displayObstacles(),n.gameState<=n.GameStates.ACTIVE&&(n.displayGround(n.tickCount),n.displayGoal()),A()&&n.onPuzzleComplete()},n.onMouseDown=function(){if(n.intervalId){if(n.clickPending=!0,n.gameState===n.GameStates.WAITING)n.gameState=n.GameStates.ACTIVE;else if(n.gameState===n.GameStates.OVER&&n.gameOverTick+10<n.tickCount){var a=document.getElementById("resetButton");a&&a.click()}document.getElementById("instructions").setAttribute("visibility","hidden"),document.getElementById("getready").setAttribute("visibility","hidden")}else n.gameState===n.GameStates.WAITING&&c.runButtonClick()},n.init=function(b){n.clearEventHandlersKillTickLoop(),p=b.skin,o=b.level,b.grayOutUndeletableBlocks=o.grayOutUndeletableBlocks,v(),b.html=h({assetUrl:c.assetUrl,data:{localeDirection:c.localeDirection(),visualization:a("./visualization.html")(),controls:a("./controls.html")({assetUrl:c.assetUrl,shareable:o.shareable}),blockUsed:void 0,idealBlockNumber:void 0,editCode:o.editCode,blockCounterClass:"block-counter-default"}}),b.loadAudio=function(){c.loadAudio(p.winSound,"win"),c.loadAudio(p.startSound,"start"),c.loadAudio(p.failureSound,"failure"),c.loadAudio(p.obstacleSound,"obstacle"),c.loadAudio(p.dieSound,"sfx_die"),c.loadAudio(p.hitSound,"sfx_hit"),c.loadAudio(p.pointSound,"sfx_point"),c.loadAudio(p.swooshingSound,"sfx_swooshing"),c.loadAudio(p.wingSound,"sfx_wing"),c.loadAudio(p.winGoalSound,"winGoal"),c.loadAudio(p.jetSound,"jet"),c.loadAudio(p.jingleSound,"jingle"),c.loadAudio(p.crashSound,"crash"),c.loadAudio(p.laserSound,"laser"),c.loadAudio(p.splashSound,"splash"),c.loadAudio(p.wallSound,"wall"),c.loadAudio(p.wall0Sound,"wall0")},b.afterInject=function(){Blockly.HSV_SATURATION=.6,Blockly.SNAP_RADIUS*=n.scale.snapRadius,w()},b.trashcan=!1,b.twitter=s,b.makeYourOwn=b.share,b.makeString=d.makeYourOwnFlappy(),b.makeUrl="http://code.org/flappy",b.makeImage=c.assetUrl("media/flappy_promo.png"),b.enableShowCode=!1,b.enableShowBlockCount=!1,o.isK1&&(j.WORKSPACE_ROW_HEIGHT*=1.5);var e=j.WORKSPACE_BUFFER,f=e+j.WORKSPACE_COL_WIDTH,g=j.WORKSPACE_BUFFER,k=g+j.WORKSPACE_ROW_HEIGHT,l=k+j.WORKSPACE_ROW_HEIGHT;b.blockArrangement={flappy_whenClick:{x:e,y:g},when_run:{x:e,y:g},flappy_whenCollideGround:{x:f,y:g},flappy_whenCollideObstacle:{x:f,y:k},flappy_whenEnterObstacle:{x:f,y:l}},-1===o.startBlocks.indexOf("whenCollide")&&(b.blockArrangement.flappy_whenEnterObstacle={x:f,y:g}),-1!==o.startBlocks.indexOf("when_run")&&(b.blockArrangement.flappy_whenClick.y=k),c.init(b);var m=document.getElementById("rightButton");i.addClickTouchEvent(m,n.onPuzzleComplete)},n.clearEventHandlersKillTickLoop=function(){n.whenClick=null,n.whenCollideGround=null,n.whenCollideObstacle=null,n.whenEnterObstacle=null,n.whenRunButton=null,n.intervalId&&window.clearInterval(n.intervalId),n.intervalId=0},c.reset=function(){n.clearEventHandlersKillTickLoop(),n.gameState=n.GameStates.WAITING,n.playerScore=0,n.avatarVelocity=0,n.obstacles.forEach(function(a,b){a.reset(1.5*n.MAZE_WIDTH+b*n.OBSTACLE_SPACING)}),n.SPEED=0,n.FLAP_VELOCITY=-11,n.setBackground("flappy"),n.setObstacle("flappy"),n.setPlayer("flappy"),n.setGround("flappy"),n.setGapHeight(g.GapHeight.NORMAL),n.gravity=g.Gravity.NORMAL,n.avatarX=110,n.avatarY=150,o.goal&&o.goal.startX&&(n.goalX=o.goal.startX,n.goalY=o.goal.startY),document.getElementById("avatar").setAttribute("transform",""),document.getElementById("score").setAttribute("visibility","hidden"),document.getElementById("instructions").setAttribute("visibility","hidden"),document.getElementById("clickrun").setAttribute("visibility","visible"),document.getElementById("getready").setAttribute("visibility","hidden"),document.getElementById("gameover").setAttribute("visibility","hidden"),n.displayAvatar(n.avatarX,n.avatarY),n.displayObstacles(),n.displayGround(0),n.displayGoal();document.getElementById("svgFlappy")},c.runButtonClick=function(){var a=document.getElementById("runButton"),b=document.getElementById("resetButton");if(b.style.minWidth||(b.style.minWidth=a.offsetWidth+"px"),document.getElementById("clickrun").setAttribute("visibility","hidden"),document.getElementById("instructions").setAttribute("visibility","visible"),document.getElementById("getready").setAttribute("visibility","visible"),c.toggleRunReset("reset"),Blockly.mainBlockSpace.traceOn(!0),c.attempts++,n.execute(),o.freePlay){var d=document.getElementById("right-button-cell");d.className="right-button-cell-enabled"}o.score&&(document.getElementById("score").setAttribute("visibility","visible"),n.displayScore())};var y=function(){n.waitingForReport||c.displayFeedback({app:"flappy",skin:p.id,feedbackType:n.testResults,response:n.response,level:o,showingSharing:o.freePlay&&o.shareable,twitter:s,appStrings:{reinfFeedbackMsg:e.reinfFeedbackMsg(),sharingText:e.shareGame()}})};n.onReportComplete=function(a){n.response=a,n.waitingForReport=!1,y()},n.execute=function(){var a;n.result=l.UNSET,n.testResults=m.NO_TESTS_RUN,n.waitingForReport=!1,n.response=null,o.editCode&&(a=k.generateCodeAliases(o.codeFunctions,null,"Flappy"),a+=c.editor.getValue());var b=Blockly.Generator.blockSpaceToCode("JavaScript","flappy_whenClick"),d=f.functionFromCode(b,{StudioApp:c,Flappy:g}),e=Blockly.Generator.blockSpaceToCode("JavaScript","flappy_whenCollideGround"),h=f.functionFromCode(e,{StudioApp:c,Flappy:g}),i=Blockly.Generator.blockSpaceToCode("JavaScript","flappy_whenEnterObstacle"),j=f.functionFromCode(i,{StudioApp:c,Flappy:g}),p=Blockly.Generator.blockSpaceToCode("JavaScript","flappy_whenCollideObstacle"),q=f.functionFromCode(p,{StudioApp:c,Flappy:g}),r=Blockly.Generator.blockSpaceToCode("JavaScript","when_run"),s=f.functionFromCode(r,{StudioApp:c,Flappy:g});c.playAudio("start"),n.whenClick=d,n.whenCollideGround=h,n.whenEnterObstacle=j,n.whenCollideObstacle=q,n.whenRunButton=s,n.tickCount=0,n.firstActiveTick=-1,n.gameOverTick=0,n.intervalId&&window.clearInterval(n.intervalId),n.intervalId=window.setInterval(n.onTick,n.scale.stepSpeed)},n.onPuzzleComplete=function(){o.freePlay&&(n.result=l.SUCCESS),n.clearEventHandlersKillTickLoop();var a=n.result==l.SUCCESS;n.testResults=o.freePlay?m.FREE_PLAY:c.getTestResults(a),"1"!==o.id||n.testResults!==m.TOO_FEW_BLOCKS_FAIL&&n.testResults!==m.LEVEL_INCOMPLETE_FAIL||(n.testResults=m.APP_SPECIFIC_FAIL),c.playAudio(n.testResults>=m.FREE_PLAY?"win":"failure"),o.editCode&&(n.testResults=a?m.ALL_PASS:m.TOO_FEW_BLOCKS_FAIL);var b=Blockly.Xml.blockSpaceToDom(Blockly.mainBlockSpace),d=Blockly.Xml.domToText(b);n.waitingForReport=!0,c.report({app:"flappy",level:o.id,result:n.result===l.SUCCESS,testResult:n.testResults,program:encodeURIComponent(d),onComplete:n.onReportComplete})},n.displayAvatar=function(a,b){var c=document.getElementById("avatar");c.setAttribute("x",a),c.setAttribute("y",b)},n.displayGoal=function(){if(n.goalX){var a=document.getElementById("goal");a.setAttribute("x",n.goalX),a.setAttribute("y",n.goalY)}},n.displayGround=function(a){if(o.ground){var b=a*n.SPEED;b%=n.GROUND_WIDTH;for(var c=0;c<n.MAZE_WIDTH/n.GROUND_WIDTH+1;c++){var d=document.getElementById("ground"+c);d.setAttribute("x",-b+c*n.GROUND_WIDTH),d.setAttribute("y",n.MAZE_HEIGHT-n.GROUND_HEIGHT)}}},n.displayObstacles=function(){for(var a=0;a<n.obstacles.length;a++){var b=n.obstacles[a],c=document.getElementById("obstacle_top"+a);c.setAttribute("x",b.x),c.setAttribute("y",b.gapStart-n.OBSTACLE_HEIGHT);var d=document.getElementById("obstacle_bottom"+a);d.setAttribute("x",b.x),d.setAttribute("y",b.gapStart+n.GAP_SIZE)}},n.displayScore=function(){var a=document.getElementById("score");a.textContent=n.playerScore},n.flap=function(a){var b=o.defaultFlap||"NORMAL";n.avatarVelocity=a||g.FlapHeight[b]},n.setGapHeight=function(a){var b=n.MAZE_HEIGHT-n.MIN_OBSTACLE_HEIGHT-n.OBSTACLE_HEIGHT;b>a&&(a=b),n.GAP_SIZE=a};var z=function(a){return"flappy"===a?p:p[a]};n.setBackground=function(a){var b=document.getElementById("background");b.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",z(a).background)},n.setPlayer=function(a){var b=document.getElementById("avatar");b.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",z(a).avatar)},n.setObstacle=function(a){var b;n.obstacles.forEach(function(c,d){b=document.getElementById("obstacle_top"+d),b.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",z(a).obstacle_top),b=document.getElementById("obstacle_bottom"+d),b.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",z(a).obstacle_bottom)})},n.setGround=function(a){if(o.ground){var b,c;for(c=0;c<n.MAZE_WIDTH/n.GROUND_WIDTH+1;c++)b=document.getElementById("ground"+c),b.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",z(a).ground)}};var A=function(){return o.goal&&o.goal.successCondition&&o.goal.successCondition()?(n.result=l.SUCCESS,!0):o.goal&&o.goal.failureCondition&&o.goal.failureCondition()?(n.result=l.FAILURE,!0):!1}},{"../../locale/current/common":162,"../../locale/current/flappy":164,"../StudioApp":2,"../codegen":41,"../dom":43,"../skins":117,"../templates/page.html":137,"../utils":157,"./api":63,"./constants":65,"./controls.html":66,"./visualization.html":71}],71:[function(require,module,exports){module.exports=function(){var t=function anonymous(locals,filters,escape){escape=escape||function(a){return String(a).replace(/&(?!\w+;)/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")};var buf=[];with(locals||{})!function(){buf.push('<svg xmlns="http://www.w3.org/2000/svg" version="1.1" id="svgFlappy">\n</svg>\n<div id="capacityBubble">\n  <div id="capacity"></div>\n</div>\n')}();return buf.join("")};return function(a){return t(a,require("ejs").filters)}}()},{ejs:178}],66:[function(require,module,exports){module.exports=function(){var t=function anonymous(locals,filters,escape){escape=escape||function(a){return String(a).replace(/&(?!\w+;)/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")};var buf=[];with(locals||{})!function(){buf.push("");var a=require("../../locale/current/common");buf.push('\n\n<div id="right-button-cell">\n  <button id="rightButton" class="share">\n    <img src="',escape(assetUrl("media/1x1.gif")),'">',escape(a.finish()),"\n  </button>\n</div>\n")}();return buf.join("")};return function(a){return t(a,require("ejs").filters)}}()},{"../../locale/current/common":162,ejs:178}],65:[function(a,b){b.exports={WORKSPACE_BUFFER:20,WORKSPACE_COL_WIDTH:210,WORKSPACE_ROW_HEIGHT:120,AVATAR_HEIGHT:24,AVATAR_WIDTH:34,AVATAR_Y_OFFSET:0}},{}],64:[function(a,b,c){"use strict";var d=a("../../locale/current/flappy"),e=a("../../locale/current/common"),f=(a("../block_utils"),a("../utils")),g=f.getLodash(),h=a("../StudioApp").singleton,i='"flappy"',j="random",k=function(a,b){var c=a.getTitleValue("VALUE");if(c===j){var d=g(a.VALUES).map(function(a){return a[1]}).reject(function(a){return a===j});c="Flappy.random(["+d+"])"}return"Flappy."+b+"('block_id_"+a.id+"', "+c+");\n"};c.install=function(a,b){function c(a){a!==j&&h.playAudio(f.stripQuotes(a))}var g=b.skin,l=b.isK1,m=a.Generator.get("JavaScript");a.JavaScript=m,a.Blocks.flappy_whenClick={helpUrl:"",init:function(){this.setHSV(140,1,.74),l?this.appendDummyInput().appendTitle(e.when()).appendTitle(new a.FieldImage(g.clickIcon)):this.appendDummyInput().appendTitle(d.whenClick()),this.setPreviousStatement(!1),this.setNextStatement(!0),this.setTooltip(d.whenClickTooltip())
}},m.flappy_whenClick=function(){return"\n"},a.Blocks.flappy_whenCollideGround={helpUrl:"",init:function(){this.setHSV(140,1,.74),l?this.appendDummyInput().appendTitle(e.when()).appendTitle(new a.FieldImage(g.collideGroundIcon)):this.appendDummyInput().appendTitle(d.whenCollideGround()),this.setPreviousStatement(!1),this.setNextStatement(!0),this.setTooltip(d.whenCollideGroundTooltip())}},m.flappy_whenCollideGround=function(){return"\n"},a.Blocks.flappy_whenCollideObstacle={helpUrl:"",init:function(){this.setHSV(140,1,.74),l?this.appendDummyInput().appendTitle(e.when()).appendTitle(new a.FieldImage(g.collideObstacleIcon)):this.appendDummyInput().appendTitle(d.whenCollideObstacle()),this.setPreviousStatement(!1),this.setNextStatement(!0),this.setTooltip(d.whenCollideObstacleTooltip())}},m.flappy_whenCollideObstacle=function(){return"\n"},a.Blocks.flappy_whenEnterObstacle={helpUrl:"",init:function(){this.setHSV(140,1,.74),l?this.appendDummyInput().appendTitle(e.when()).appendTitle(new a.FieldImage(g.enterObstacleIcon)):this.appendDummyInput().appendTitle(d.whenEnterObstacle()),this.setPreviousStatement(!1),this.setNextStatement(!0),this.setTooltip(d.whenEnterObstacleTooltip())}},m.flappy_whenEnterObstacle=function(){return"\n"},a.Blocks.flappy_flap={helpUrl:"",init:function(){this.setHSV(184,1,.74),l?this.appendDummyInput().appendTitle(d.flap()).appendTitle(new a.FieldImage(g.flapIcon)):this.appendDummyInput().appendTitle(d.flap()),this.setPreviousStatement(!0),this.setNextStatement(!0),this.setTooltip(d.flapTooltip())}},m.flappy_flap=function(){return"Flappy.flap('block_id_"+this.id+"');\n"},a.Blocks.flappy_flap_height={helpUrl:"",init:function(){var b=new a.FieldDropdown(this.VALUES);b.setValue(this.VALUES[3][1]),this.setHSV(184,1,.74),this.appendDummyInput().appendTitle(b,"VALUE"),this.setPreviousStatement(!0),this.setNextStatement(!0),this.setTooltip(d.flapTooltip())}},a.Blocks.flappy_flap_height.VALUES=[[d.flapRandom(),j],[d.flapVerySmall(),"Flappy.FlapHeight.VERY_SMALL"],[d.flapSmall(),"Flappy.FlapHeight.SMALL"],[d.flapNormal(),"Flappy.FlapHeight.NORMAL"],[d.flapLarge(),"Flappy.FlapHeight.LARGE"],[d.flapVeryLarge(),"Flappy.FlapHeight.VERY_LARGE"]],m.flappy_flap_height=function(){return k(this,"flap")},a.Blocks.flappy_playSound={WING_FLAP_SOUND:'"sfx_wing"',helpUrl:"",init:function(){this.VALUES=l?this.k1SoundChoices:this.soundChoices;var b=new a.FieldDropdown(this.VALUES,c);b.setValue(this.WING_FLAP_SOUND),l?this.appendDummyInput().appendTitle(e.play()).appendTitle(new a.FieldImage(g.soundIcon)).appendTitle(b,"VALUE"):this.appendDummyInput().appendTitle(b,"VALUE"),this.setHSV(184,1,.74),this.setPreviousStatement(!0),this.setNextStatement(!0),this.setTooltip(d.playSoundTooltip())},get k1SoundChoices(){return[[d.soundRandom(),j],[d.soundBounce(),'"wall"'],[d.soundCrunch(),'"wall0"'],[d.soundDie(),'"sfx_die"'],[d.soundHit(),'"sfx_hit"'],[d.soundPoint(),'"sfx_point"'],[d.soundSwoosh(),'"sfx_swooshing"'],[d.soundWing(),this.WING_FLAP_SOUND],[d.soundJet(),'"jet"'],[d.soundCrash(),'"crash"'],[d.soundJingle(),'"jingle"'],[d.soundSplash(),'"splash"'],[d.soundLaser(),'"laser"']]},get soundChoices(){return[[d.playSoundRandom(),j],[d.playSoundBounce(),'"wall"'],[d.playSoundCrunch(),'"wall0"'],[d.playSoundDie(),'"sfx_die"'],[d.playSoundHit(),'"sfx_hit"'],[d.playSoundPoint(),'"sfx_point"'],[d.playSoundSwoosh(),'"sfx_swooshing"'],[d.playSoundWing(),this.WING_FLAP_SOUND],[d.playSoundJet(),'"jet"'],[d.playSoundCrash(),'"crash"'],[d.playSoundJingle(),'"jingle"'],[d.playSoundSplash(),'"splash"'],[d.playSoundLaser(),'"laser"']]}},m.flappy_playSound=function(){return k(this,"playSound")},a.Blocks.flappy_incrementPlayerScore={helpUrl:"",init:function(){this.setHSV(184,1,.74),l?this.appendDummyInput().appendTitle(e.score()).appendTitle(new a.FieldImage(g.scoreCard)):this.appendDummyInput().appendTitle(d.incrementPlayerScore()),this.setPreviousStatement(!0),this.setNextStatement(!0),this.setTooltip(d.incrementPlayerScoreTooltip())}},m.flappy_incrementPlayerScore=function(){return"Flappy.incrementPlayerScore('block_id_"+this.id+"');\n"},a.Blocks.flappy_endGame={helpUrl:"",init:function(){this.setHSV(184,1,.74),l?this.appendDummyInput().appendTitle(e.end()).appendTitle(new a.FieldImage(g.endIcon)):this.appendDummyInput().appendTitle(d.endGame()),this.setPreviousStatement(!0),this.setNextStatement(!0),this.setTooltip(d.endGameTooltip())}},m.flappy_endGame=function(){return"Flappy.endGame('block_id_"+this.id+"');\n"},a.Blocks.flappy_setSpeed={helpUrl:"",init:function(){if(this.setHSV(312,.32,.62),l){var b=new a.FieldImageDropdown(this.K1_VALUES,63,33);b.setValue(this.K1_VALUES[1][1]),this.appendDummyInput().appendTitle(d.setSpeed()).appendTitle(b,"VALUE")}else{var c=new a.FieldDropdown(this.VALUES);c.setValue(this.VALUES[3][1]),this.appendDummyInput().appendTitle(c,"VALUE")}this.setInputsInline(!0),this.setPreviousStatement(!0),this.setNextStatement(!0),this.setTooltip(d.setSpeedTooltip())}},a.Blocks.flappy_setSpeed.K1_VALUES=[[g.speedSlow,"Flappy.LevelSpeed.SLOW"],[g.speedMedium,"Flappy.LevelSpeed.NORMAL"],[g.speedFast,"Flappy.LevelSpeed.FAST"]],a.Blocks.flappy_setSpeed.VALUES=[[d.speedRandom(),j],[d.speedVerySlow(),"Flappy.LevelSpeed.VERY_SLOW"],[d.speedSlow(),"Flappy.LevelSpeed.SLOW"],[d.speedNormal(),"Flappy.LevelSpeed.NORMAL"],[d.speedFast(),"Flappy.LevelSpeed.FAST"],[d.speedVeryFast(),"Flappy.LevelSpeed.VERY_FAST"]],m.flappy_setSpeed=function(){return k(this,"setSpeed")},a.Blocks.flappy_setGapHeight={helpUrl:"",init:function(){var b=new a.FieldDropdown(this.VALUES);b.setValue(this.VALUES[3][1]),this.setHSV(312,.32,.62),this.appendDummyInput().appendTitle(b,"VALUE"),this.setInputsInline(!0),this.setPreviousStatement(!0),this.setNextStatement(!0),this.setTooltip(d.setGapHeightTooltip())}},a.Blocks.flappy_setGapHeight.VALUES=[[d.setGapRandom(),j],[d.setGapVerySmall(),"Flappy.GapHeight.VERY_SMALL"],[d.setGapSmall(),"Flappy.GapHeight.SMALL"],[d.setGapNormal(),"Flappy.GapHeight.NORMAL"],[d.setGapLarge(),"Flappy.GapHeight.LARGE"],[d.setGapVeryLarge(),"Flappy.GapHeight.VERY_LARGE"]],m.flappy_setGapHeight=function(){return k(this,"setGapHeight")},a.Blocks.flappy_setBackground={helpUrl:"",init:function(){this.setHSV(312,.32,.62);var b,c=this.appendDummyInput();l?(c.appendTitle(d.setBackground()),b=new a.FieldImageDropdown(this.K1_CHOICES,50,30),b.setValue(i)):(b=new a.FieldDropdown(this.VALUES),b.setValue(i)),c.appendTitle(b,"VALUE"),this.setInputsInline(!0),this.setPreviousStatement(!0),this.setNextStatement(!0),this.setTooltip(d.setBackgroundTooltip())}},a.Blocks.flappy_setBackground.VALUES=[[d.setBackgroundRandom(),j],[d.setBackgroundFlappy(),i],[d.setBackgroundNight(),'"night"'],[d.setBackgroundSciFi(),'"scifi"'],[d.setBackgroundUnderwater(),'"underwater"'],[d.setBackgroundCave(),'"cave"'],[d.setBackgroundSanta(),'"santa"']],a.Blocks.flappy_setBackground.K1_CHOICES=[[g.background,i],[g.night.background,'"night"'],[g.scifi.background,'"scifi"'],[g.underwater.background,'"underwater"'],[g.cave.background,'"cave"'],[g.santa.background,'"santa"'],[g.randomPurpleIcon,j]],m.flappy_setBackground=function(){return k(this,"setBackground")},a.Blocks.flappy_setPlayer={helpUrl:"",init:function(){this.setHSV(312,.32,.62);var b,c=this.appendDummyInput();l?(c.appendTitle(d.setPlayer()),b=new a.FieldImageDropdown(this.K1_CHOICES,34,24),b.setValue(i)):(b=new a.FieldDropdown(this.VALUES),b.setValue(i)),c.appendTitle(b,"VALUE"),this.setInputsInline(!0),this.setPreviousStatement(!0),this.setNextStatement(!0),this.setTooltip(d.setPlayerTooltip())}},a.Blocks.flappy_setPlayer.VALUES=[[d.setPlayerRandom(),j],[d.setPlayerFlappy(),i],[d.setPlayerRedBird(),'"redbird"'],[d.setPlayerSciFi(),'"scifi"'],[d.setPlayerUnderwater(),'"underwater"'],[d.setPlayerSanta(),'"santa"'],[d.setPlayerCave(),'"cave"'],[d.setPlayerShark(),'"shark"'],[d.setPlayerEaster(),'"easter"'],[d.setPlayerBatman(),'"batman"'],[d.setPlayerSubmarine(),'"submarine"'],[d.setPlayerUnicorn(),'"unicorn"'],[d.setPlayerFairy(),'"fairy"'],[d.setPlayerSuperman(),'"superman"'],[d.setPlayerTurkey(),'"turkey"']],a.Blocks.flappy_setPlayer.K1_CHOICES=[[g.avatar,i],[g.redbird.avatar,'"redbird"'],[g.scifi.avatar,'"scifi"'],[g.underwater.avatar,'"underwater"'],[g.santa.avatar,'"santa"'],[g.cave.avatar,'"cave"'],[g.shark.avatar,'"shark"'],[g.easter.avatar,'"easter"'],[g.batman.avatar,'"batman"'],[g.submarine.avatar,'"submarine"'],[g.unicorn.avatar,'"unicorn"'],[g.fairy.avatar,'"fairy"'],[g.superman.avatar,'"superman"'],[g.turkey.avatar,'"turkey"'],[g.randomPurpleIcon,j]],m.flappy_setPlayer=function(){return k(this,"setPlayer")},a.Blocks.flappy_setObstacle={helpUrl:"",init:function(){this.setHSV(312,.32,.62);var b,c=this.appendDummyInput();l?(c.appendTitle(d.setObstacle()),b=new a.FieldImageDropdown(this.K1_CHOICES,50,30),b.setValue(i)):(b=new a.FieldDropdown(this.VALUES),b.setValue(i)),c.appendTitle(b,"VALUE"),this.setInputsInline(!0),this.setPreviousStatement(!0),this.setNextStatement(!0),this.setTooltip(d.setObstacleTooltip())}},a.Blocks.flappy_setObstacle.VALUES=[[d.setObstacleRandom(),j],[d.setObstacleFlappy(),i],[d.setObstacleSciFi(),'"scifi"'],[d.setObstacleUnderwater(),'"underwater"'],[d.setObstacleCave(),'"cave"'],[d.setObstacleSanta(),'"santa"'],[d.setObstacleLaser(),'"laser"']],a.Blocks.flappy_setObstacle.K1_CHOICES=[[g.obstacle_bottom_thumb,i],[g.scifi.obstacle_bottom_thumb,'"scifi"'],[g.underwater.obstacle_bottom_thumb,'"underwater"'],[g.cave.obstacle_bottom_thumb,'"cave"'],[g.santa.obstacle_bottom_thumb,'"santa"'],[g.laser.obstacle_bottom_thumb,'"laser"'],[g.randomPurpleIcon,j]],m.flappy_setObstacle=function(){return k(this,"setObstacle")},a.Blocks.flappy_setGround={helpUrl:"",init:function(){this.setHSV(312,.32,.62);var b,c=this.appendDummyInput();l?(c.appendTitle(d.setGround()),b=new a.FieldImageDropdown(this.K1_CHOICES,50,30),b.setValue(i)):(b=new a.FieldDropdown(this.VALUES),b.setValue(i)),c.appendTitle(b,"VALUE"),this.setInputsInline(!0),this.setPreviousStatement(!0),this.setNextStatement(!0),this.setTooltip(d.setGroundTooltip())}},a.Blocks.flappy_setGround.VALUES=[[d.setGroundRandom(),j],[d.setGroundFlappy(),i],[d.setGroundSciFi(),'"scifi"'],[d.setGroundUnderwater(),'"underwater"'],[d.setGroundCave(),'"cave"'],[d.setGroundSanta(),'"santa"'],[d.setGroundLava(),'"lava"']],a.Blocks.flappy_setGround.K1_CHOICES=[[g.ground_thumb,i],[g.scifi.ground_thumb,'"scifi"'],[g.underwater.ground_thumb,'"underwater"'],[g.cave.ground_thumb,'"cave"'],[g.santa.ground_thumb,'"santa"'],[g.lava.ground_thumb,'"lava"'],[g.randomPurpleIcon,j]],m.flappy_setGround=function(){return k(this,"setGround")},a.Blocks.flappy_setGravity={helpUrl:"",init:function(){var b=new a.FieldDropdown(this.VALUES);b.setValue(this.VALUES[3][1]),this.setHSV(312,.32,.62),this.appendDummyInput().appendTitle(b,"VALUE"),this.setInputsInline(!0),this.setPreviousStatement(!0),this.setNextStatement(!0),this.setTooltip(d.setGravityTooltip())}},a.Blocks.flappy_setGravity.VALUES=[[d.setGravityRandom(),j],[d.setGravityVeryLow(),"Flappy.Gravity.VERY_LOW"],[d.setGravityLow(),"Flappy.Gravity.LOW"],[d.setGravityNormal(),"Flappy.Gravity.NORMAL"],[d.setGravityHigh(),"Flappy.Gravity.HIGH"],[d.setGravityVeryHigh(),"Flappy.Gravity.VERY_HIGH"]],m.flappy_setGravity=function(){return k(this,"setGravity")},a.Blocks.flappy_setScore={init:function(){this.setHSV(312,.32,.62),this.appendDummyInput().appendTitle(d.setScore()).appendTitle(new a.FieldTextInput("0",a.FieldTextInput.numberValidator),"VALUE"),this.setInputsInline(!0),this.setPreviousStatement(!0),this.setNextStatement(!0),this.setTooltip(d.setScoreTooltip())}},m.flappy_setScore=function(){var a=window.parseInt(this.getTitleValue("VALUE"),10);return"Flappy.setScore('block_id_"+this.id+"', "+a+");\n"},delete a.Blocks.procedures_defreturn,delete a.Blocks.procedures_ifreturn}},{"../../locale/current/common":162,"../../locale/current/flappy":164,"../StudioApp":2,"../block_utils":16,"../utils":157}],164:[function(a,b){b.exports=window.blockly.appLocale},{}],63:[function(a,b,c){var d=a("../StudioApp").singleton;c.FlapHeight={VERY_SMALL:-6,SMALL:-8,NORMAL:-11,LARGE:-13,VERY_LARGE:-15},c.LevelSpeed={VERY_SLOW:1,SLOW:3,NORMAL:4,FAST:6,VERY_FAST:8},c.GapHeight={VERY_SMALL:65,SMALL:75,NORMAL:100,LARGE:125,VERY_LARGE:150},c.Gravity={VERY_LOW:.5,LOW:.75,NORMAL:1,HIGH:1.25,VERY_HIGH:1.5},c.random=function(a){var b=Math.floor(Math.random()*a.length);return a[b]},c.setScore=function(a,b){d.highlight(a),Flappy.playerScore=b,Flappy.displayScore()},c.setGravity=function(a,b){d.highlight(a),Flappy.gravity=b},c.setGround=function(a,b){d.highlight(a),Flappy.setGround(b)},c.setObstacle=function(a,b){d.highlight(a),Flappy.setObstacle(b)},c.setPlayer=function(a,b){d.highlight(a),Flappy.setPlayer(b)},c.setGapHeight=function(a,b){d.highlight(a),Flappy.setGapHeight(b)},c.setBackground=function(a,b){d.highlight(a),Flappy.setBackground(b)},c.setSpeed=function(a,b){d.highlight(a),Flappy.SPEED=b},c.playSound=function(a,b){d.highlight(a),d.playAudio(b)},c.flap=function(a,b){d.highlight(a),Flappy.flap(b)},c.endGame=function(a){d.highlight(a),Flappy.gameState=Flappy.GameStates.ENDING},c.incrementPlayerScore=function(a){d.highlight(a),Flappy.playerScore++,Flappy.displayScore()}},{"../StudioApp":2}]},{},[69]);