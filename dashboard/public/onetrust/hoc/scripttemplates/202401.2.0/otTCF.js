(function(){function Pe(){return typeof Reflect!="undefined"&&Reflect.get?Pe=Reflect.get.bind():Pe=function(m,w,L){var N=Pt(m,w);if(N){var U=Object.getOwnPropertyDescriptor(N,w);return U.get?U.get.call(arguments.length<3?m:L):U.value}},Pe.apply(this,arguments)}function Pt(d,m){for(;!Object.prototype.hasOwnProperty.call(d,m)&&(d=ge(d),d!==null););return d}function Ue(d){return Dt(d)||Nt(d)||dt(d)||Rt()}function Rt(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function Nt(d){if(typeof Symbol!="undefined"&&d[Symbol.iterator]!=null||d["@@iterator"]!=null)return Array.from(d)}function Dt(d){if(Array.isArray(d))return Me(d)}function st(d,m,w,L,N,U,J){try{var j=d[U](J),R=j.value}catch(Q){w(Q);return}j.done?m(R):Promise.resolve(R).then(L,N)}function ot(d){return function(){var m=this,w=arguments;return new Promise(function(L,N){var U=d.apply(m,w);function J(R){st(U,L,N,J,j,"next",R)}function j(R){st(U,L,N,J,j,"throw",R)}J(void 0)})}}function ve(){"use strict";ve=function(){return d};var d={},m=Object.prototype,w=m.hasOwnProperty,L=Object.defineProperty||function(v,h,g){v[h]=g.value},N=typeof Symbol=="function"?Symbol:{},U=N.iterator||"@@iterator",J=N.asyncIterator||"@@asyncIterator",j=N.toStringTag||"@@toStringTag";function R(v,h,g){return Object.defineProperty(v,h,{value:g,enumerable:!0,configurable:!0,writable:!0}),v[h]}try{R({},"")}catch(v){R=function(g,I,O){return g[I]=O}}function Q(v,h,g,I){var O=h&&h.prototype instanceof X?h:X,C=Object.create(O.prototype),F=new be(I||[]);return L(C,"_invoke",{value:Z(v,g,F)}),C}function we(v,h,g){try{return{type:"normal",arg:v.call(h,g)}}catch(I){return{type:"throw",arg:I}}}d.wrap=Q;var p={};function X(){}function Y(){}function K(){}var q={};R(q,U,function(){return this});var ee=Object.getPrototypeOf,me=ee&&ee(ee(D([])));me&&me!==m&&w.call(me,U)&&(q=me);var ae=K.prototype=X.prototype=Object.create(q);function l(v){["next","throw","return"].forEach(function(h){R(v,h,function(g){return this._invoke(h,g)})})}function re(v,h){function g(O,C,F,H){var B=we(v[O],v,C);if(B.type!=="throw"){var ie=B.arg,te=ie.value;return te&&$(te)=="object"&&w.call(te,"__await")?h.resolve(te.__await).then(function(se){g("next",se,F,H)},function(se){g("throw",se,F,H)}):h.resolve(te).then(function(se){ie.value=se,F(ie)},function(se){return g("throw",se,F,H)})}H(B.arg)}var I;L(this,"_invoke",{value:function(C,F){function H(){return new h(function(B,ie){g(C,F,B,ie)})}return I=I?I.then(H,H):H()}})}function Z(v,h,g){var I="suspendedStart";return function(O,C){if(I==="executing")throw new Error("Generator is already running");if(I==="completed"){if(O==="throw")throw C;return de()}for(g.method=O,g.arg=C;;){var F=g.delegate;if(F){var H=Ae(F,g);if(H){if(H===p)continue;return H}}if(g.method==="next")g.sent=g._sent=g.arg;else if(g.method==="throw"){if(I==="suspendedStart")throw I="completed",g.arg;g.dispatchException(g.arg)}else g.method==="return"&&g.abrupt("return",g.arg);I="executing";var B=we(v,h,g);if(B.type==="normal"){if(I=g.done?"completed":"suspendedYield",B.arg===p)continue;return{value:B.arg,done:g.done}}B.type==="throw"&&(I="completed",g.method="throw",g.arg=B.arg)}}}function Ae(v,h){var g=h.method,I=v.iterator[g];if(I===void 0)return h.delegate=null,g==="throw"&&v.iterator.return&&(h.method="return",h.arg=void 0,Ae(v,h),h.method==="throw")||g!=="return"&&(h.method="throw",h.arg=new TypeError("The iterator does not provide a '"+g+"' method")),p;var O=we(I,v.iterator,h.arg);if(O.type==="throw")return h.method="throw",h.arg=O.arg,h.delegate=null,p;var C=O.arg;return C?C.done?(h[v.resultName]=C.value,h.next=v.nextLoc,h.method!=="return"&&(h.method="next",h.arg=void 0),h.delegate=null,p):C:(h.method="throw",h.arg=new TypeError("iterator result is not an object"),h.delegate=null,p)}function ue(v){var h={tryLoc:v[0]};1 in v&&(h.catchLoc=v[1]),2 in v&&(h.finallyLoc=v[2],h.afterLoc=v[3]),this.tryEntries.push(h)}function ye(v){var h=v.completion||{};h.type="normal",delete h.arg,v.completion=h}function be(v){this.tryEntries=[{tryLoc:"root"}],v.forEach(ue,this),this.reset(!0)}function D(v){if(v){var h=v[U];if(h)return h.call(v);if(typeof v.next=="function")return v;if(!isNaN(v.length)){var g=-1,I=function O(){for(;++g<v.length;)if(w.call(v,g))return O.value=v[g],O.done=!1,O;return O.value=void 0,O.done=!0,O};return I.next=I}}return{next:de}}function de(){return{value:void 0,done:!0}}return Y.prototype=K,L(ae,"constructor",{value:K,configurable:!0}),L(K,"constructor",{value:Y,configurable:!0}),Y.displayName=R(K,j,"GeneratorFunction"),d.isGeneratorFunction=function(v){var h=typeof v=="function"&&v.constructor;return!!h&&(h===Y||(h.displayName||h.name)==="GeneratorFunction")},d.mark=function(v){return Object.setPrototypeOf?Object.setPrototypeOf(v,K):(v.__proto__=K,R(v,j,"GeneratorFunction")),v.prototype=Object.create(ae),v},d.awrap=function(v){return{__await:v}},l(re.prototype),R(re.prototype,J,function(){return this}),d.AsyncIterator=re,d.async=function(v,h,g,I,O){O===void 0&&(O=Promise);var C=new re(Q(v,h,g,I),O);return d.isGeneratorFunction(h)?C:C.next().then(function(F){return F.done?F.value:C.next()})},l(ae),R(ae,j,"Generator"),R(ae,U,function(){return this}),R(ae,"toString",function(){return"[object Generator]"}),d.keys=function(v){var h=Object(v),g=[];for(var I in h)g.push(I);return g.reverse(),function O(){for(;g.length;){var C=g.pop();if(C in h)return O.value=C,O.done=!1,O}return O.done=!0,O}},d.values=D,be.prototype={constructor:be,reset:function(h){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(ye),!h)for(var g in this)g.charAt(0)==="t"&&w.call(this,g)&&!isNaN(+g.slice(1))&&(this[g]=void 0)},stop:function(){this.done=!0;var h=this.tryEntries[0].completion;if(h.type==="throw")throw h.arg;return this.rval},dispatchException:function(h){if(this.done)throw h;var g=this;function I(ie,te){return F.type="throw",F.arg=h,g.next=ie,te&&(g.method="next",g.arg=void 0),!!te}for(var O=this.tryEntries.length-1;O>=0;--O){var C=this.tryEntries[O],F=C.completion;if(C.tryLoc==="root")return I("end");if(C.tryLoc<=this.prev){var H=w.call(C,"catchLoc"),B=w.call(C,"finallyLoc");if(H&&B){if(this.prev<C.catchLoc)return I(C.catchLoc,!0);if(this.prev<C.finallyLoc)return I(C.finallyLoc)}else if(H){if(this.prev<C.catchLoc)return I(C.catchLoc,!0)}else{if(!B)throw new Error("try statement without catch or finally");if(this.prev<C.finallyLoc)return I(C.finallyLoc)}}}},abrupt:function(h,g){for(var I=this.tryEntries.length-1;I>=0;--I){var O=this.tryEntries[I];if(O.tryLoc<=this.prev&&w.call(O,"finallyLoc")&&this.prev<O.finallyLoc){var C=O;break}}C&&(h==="break"||h==="continue")&&C.tryLoc<=g&&g<=C.finallyLoc&&(C=null);var F=C?C.completion:{};return F.type=h,F.arg=g,C?(this.method="next",this.next=C.finallyLoc,p):this.complete(F)},complete:function(h,g){if(h.type==="throw")throw h.arg;return h.type==="break"||h.type==="continue"?this.next=h.arg:h.type==="return"?(this.rval=this.arg=h.arg,this.method="return",this.next="end"):h.type==="normal"&&g&&(this.next=g),p},finish:function(h){for(var g=this.tryEntries.length-1;g>=0;--g){var I=this.tryEntries[g];if(I.finallyLoc===h)return this.complete(I.completion,I.afterLoc),ye(I),p}},catch:function(h){for(var g=this.tryEntries.length-1;g>=0;--g){var I=this.tryEntries[g];if(I.tryLoc===h){var O=I.completion;if(O.type==="throw"){var C=O.arg;ye(I)}return C}}throw new Error("illegal catch attempt")},delegateYield:function(h,g,I){return this.delegate={iterator:D(h),resultName:g,nextLoc:I},this.method==="next"&&(this.arg=void 0),p}},d}function u(d,m,w){return m=ut(m),m in d?Object.defineProperty(d,m,{value:w,enumerable:!0,configurable:!0,writable:!0}):d[m]=w,d}function at(d,m){for(var w=0;w<m.length;w++){var L=m[w];L.enumerable=L.enumerable||!1,L.configurable=!0,"value"in L&&(L.writable=!0),Object.defineProperty(d,ut(L.key),L)}}function _(d,m,w){return m&&at(d.prototype,m),w&&at(d,w),Object.defineProperty(d,"prototype",{writable:!1}),d}function ut(d){var m=Ft(d,"string");return $(m)==="symbol"?m:String(m)}function Ft(d,m){if($(d)!=="object"||d===null)return d;var w=d[Symbol.toPrimitive];if(w!==void 0){var L=w.call(d,m||"default");if($(L)!=="object")return L;throw new TypeError("@@toPrimitive must return a primitive value.")}return(m==="string"?String:Number)(d)}function A(d,m){if(!(d instanceof m))throw new TypeError("Cannot call a class as a function")}function M(d,m){if(typeof m!="function"&&m!==null)throw new TypeError("Super expression must either be null or a function");d.prototype=Object.create(m&&m.prototype,{constructor:{value:d,writable:!0,configurable:!0}}),Object.defineProperty(d,"prototype",{writable:!1}),m&&_e(d,m)}function G(d){var m=lt();return function(){var L=ge(d),N;if(m){var U=ge(this).constructor;N=Reflect.construct(L,arguments,U)}else N=L.apply(this,arguments);return ct(this,N)}}function ct(d,m){if(m&&($(m)==="object"||typeof m=="function"))return m;if(m!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return y(d)}function y(d){if(d===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return d}function Ee(d){var m=typeof Map=="function"?new Map:void 0;return Ee=function(L){if(L===null||!Ut(L))return L;if(typeof L!="function")throw new TypeError("Super expression must either be null or a function");if(typeof m!="undefined"){if(m.has(L))return m.get(L);m.set(L,N)}function N(){return Re(L,arguments,ge(this).constructor)}return N.prototype=Object.create(L.prototype,{constructor:{value:N,enumerable:!1,writable:!0,configurable:!0}}),_e(N,L)},Ee(d)}function Re(d,m,w){return lt()?Re=Reflect.construct.bind():Re=function(N,U,J){var j=[null];j.push.apply(j,U);var R=Function.bind.apply(N,j),Q=new R;return J&&_e(Q,J.prototype),Q},Re.apply(null,arguments)}function lt(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(d){return!1}}function Ut(d){return Function.toString.call(d).indexOf("[native code]")!==-1}function _e(d,m){return _e=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(L,N){return L.__proto__=N,L},_e(d,m)}function ge(d){return ge=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(w){return w.__proto__||Object.getPrototypeOf(w)},ge(d)}function $(d){return $=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(m){return typeof m}:function(m){return m&&typeof Symbol=="function"&&m.constructor===Symbol&&m!==Symbol.prototype?"symbol":typeof m},$(d)}function Te(d,m){var w=typeof Symbol!="undefined"&&d[Symbol.iterator]||d["@@iterator"];if(!w){if(Array.isArray(d)||(w=dt(d))||m&&d&&typeof d.length=="number"){w&&(d=w);var L=0,N=function(){};return{s:N,n:function(){return L>=d.length?{done:!0}:{done:!1,value:d[L++]}},e:function(Q){throw Q},f:N}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var U=!0,J=!1,j;return{s:function(){w=w.call(d)},n:function(){var Q=w.next();return U=Q.done,Q},e:function(Q){J=!0,j=Q},f:function(){try{!U&&w.return!=null&&w.return()}finally{if(J)throw j}}}}function dt(d,m){if(d){if(typeof d=="string")return Me(d,m);var w=Object.prototype.toString.call(d).slice(8,-1);if(w==="Object"&&d.constructor&&(w=d.constructor.name),w==="Map"||w==="Set")return Array.from(d);if(w==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(w))return Me(d,m)}}function Me(d,m){(m==null||m>d.length)&&(m=d.length);for(var w=0,L=new Array(m);w<m;w++)L[w]=d[w];return L}(function(){var d,m,w=Object.defineProperty,L=Object.defineProperties,N=Object.getOwnPropertyDescriptors,U=Object.getOwnPropertySymbols,J=Object.prototype.hasOwnProperty,j=Object.prototype.propertyIsEnumerable,R=function(o,t,n){return t in o?w(o,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):o[t]=n},Q=function(o,t){for(var n in t||(t={}))J.call(t,n)&&R(o,n,t[n]);if(U){var e=Te(U(t)),r;try{for(e.s();!(r=e.n()).done;){var n=r.value;j.call(t,n)&&R(o,n,t[n])}}catch(s){e.e(s)}finally{e.f()}}return o},we=function(o,t){return L(o,N(t))},p=function(o,t,n){return R(o,$(t)!="symbol"?t+"":t,n),n},X=function(i){M(t,i);var o=G(t);function t(n){var e;return A(this,t),e=o.call(this,n),e.name="DecodingError",e}return _(t)}(Ee(Error)),Y=function(i){M(t,i);var o=G(t);function t(n){var e;return A(this,t),e=o.call(this,n),e.name="EncodingError",e}return _(t)}(Ee(Error)),K=function(i){M(t,i);var o=G(t);function t(n){var e;return A(this,t),e=o.call(this,n),e.name="GVLError",e}return _(t)}(Ee(Error)),q=function(i){M(t,i);var o=G(t);function t(n,e){var r,s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:"";return A(this,t),r=o.call(this,"invalid value ".concat(e," passed for ").concat(n," ").concat(s)),r.name="TCModelError",r}return _(t)}(Ee(Error)),ee=function(){function i(){A(this,i)}return _(i,null,[{key:"encode",value:function(t){if(!/^[0-1]+$/.test(t))throw new Y("Invalid bitField");var n=t.length%this.LCM;t+=n?"0".repeat(this.LCM-n):"";for(var e="",r=0;r<t.length;r+=this.BASIS)e+=this.DICT[parseInt(t.substr(r,this.BASIS),2)];return e}},{key:"decode",value:function(t){if(!/^[A-Za-z0-9\-_]+$/.test(t))throw new X("Invalidly encoded Base64URL string");for(var n="",e=0;e<t.length;e++){var r=this.REVERSE_DICT.get(t[e]).toString(2);n+="0".repeat(this.BASIS-r.length)+r}return n}}]),i}();p(ee,"DICT","ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_"),p(ee,"REVERSE_DICT",new Map([["A",0],["B",1],["C",2],["D",3],["E",4],["F",5],["G",6],["H",7],["I",8],["J",9],["K",10],["L",11],["M",12],["N",13],["O",14],["P",15],["Q",16],["R",17],["S",18],["T",19],["U",20],["V",21],["W",22],["X",23],["Y",24],["Z",25],["a",26],["b",27],["c",28],["d",29],["e",30],["f",31],["g",32],["h",33],["i",34],["j",35],["k",36],["l",37],["m",38],["n",39],["o",40],["p",41],["q",42],["r",43],["s",44],["t",45],["u",46],["v",47],["w",48],["x",49],["y",50],["z",51],["0",52],["1",53],["2",54],["3",55],["4",56],["5",57],["6",58],["7",59],["8",60],["9",61],["-",62],["_",63]])),p(ee,"BASIS",6),p(ee,"LCM",24);var me=function(){function i(){A(this,i)}return _(i,[{key:"has",value:function(t){return i.langSet.has(t)}},{key:"parseLanguage",value:function(t){t=t.toUpperCase();var n=t.split("-")[0];if(t.length>=2&&n.length==2){if(i.langSet.has(t))return t;if(i.langSet.has(n))return n;var e=n+"-"+n;if(i.langSet.has(e))return e;var r=Te(i.langSet),s;try{for(r.s();!(s=r.n()).done;){var c=s.value;if(c.indexOf(t)!==-1||c.indexOf(n)!==-1)return c}}catch(a){r.e(a)}finally{r.f()}}throw new Error("unsupported language ".concat(t))}},{key:"forEach",value:function(t){i.langSet.forEach(t)}},{key:"size",get:function(){return i.langSet.size}}]),i}(),ae=me;p(ae,"langSet",new Set(["AR","BG","BS","CA","CS","DA","DE","EL","EN","ES","ET","EU","FI","FR","GL","HR","HU","IT","JA","LT","LV","MT","NL","NO","PL","PT-BR","PT-PT","RO","RU","SK","SL","SR-LATN","SR-CYRL","SV","TR","ZH"]));var l=_(function i(){A(this,i)});p(l,"cmpId","cmpId"),p(l,"cmpVersion","cmpVersion"),p(l,"consentLanguage","consentLanguage"),p(l,"consentScreen","consentScreen"),p(l,"created","created"),p(l,"supportOOB","supportOOB"),p(l,"isServiceSpecific","isServiceSpecific"),p(l,"lastUpdated","lastUpdated"),p(l,"numCustomPurposes","numCustomPurposes"),p(l,"policyVersion","policyVersion"),p(l,"publisherCountryCode","publisherCountryCode"),p(l,"publisherCustomConsents","publisherCustomConsents"),p(l,"publisherCustomLegitimateInterests","publisherCustomLegitimateInterests"),p(l,"publisherLegitimateInterests","publisherLegitimateInterests"),p(l,"publisherConsents","publisherConsents"),p(l,"publisherRestrictions","publisherRestrictions"),p(l,"purposeConsents","purposeConsents"),p(l,"purposeLegitimateInterests","purposeLegitimateInterests"),p(l,"purposeOneTreatment","purposeOneTreatment"),p(l,"specialFeatureOptins","specialFeatureOptins"),p(l,"useNonStandardTexts","useNonStandardTexts"),p(l,"vendorConsents","vendorConsents"),p(l,"vendorLegitimateInterests","vendorLegitimateInterests"),p(l,"vendorListVersion","vendorListVersion"),p(l,"vendorsAllowed","vendorsAllowed"),p(l,"vendorsDisclosed","vendorsDisclosed"),p(l,"version","version");var re=function(){function i(){A(this,i)}return _(i,[{key:"clone",value:function(){var t=this,n=new this.constructor;return Object.keys(this).forEach(function(e){var r=t.deepClone(t[e]);r!==void 0&&(n[e]=r)}),n}},{key:"deepClone",value:function(t){var n=$(t);if(n==="number"||n==="string"||n==="boolean")return t;if(t!==null&&n==="object"){if(typeof t.clone=="function")return t.clone();if(t instanceof Date)return new Date(t.getTime());if(t[Symbol.iterator]!==void 0){var e=[],r=Te(t),s;try{for(r.s();!(s=r.n()).done;){var c=s.value;e.push(this.deepClone(c))}}catch(S){r.e(S)}finally{r.f()}return t instanceof Array?e:new t.constructor(e)}else{var a={};for(var b in t)t.hasOwnProperty(b)&&(a[b]=this.deepClone(t[b]));return a}}}}]),i}(),Z;(function(i){i[i.NOT_ALLOWED=0]="NOT_ALLOWED",i[i.REQUIRE_CONSENT=1]="REQUIRE_CONSENT",i[i.REQUIRE_LI=2]="REQUIRE_LI"})(Z||(Z={}));var Ae=function(i){M(t,i);var o=G(t);function t(n,e){var r;return A(this,t),r=o.call(this),u(y(r),"purposeId_",void 0),u(y(r),"restrictionType",void 0),n!==void 0&&(r.purposeId=n),e!==void 0&&(r.restrictionType=e),r}return _(t,[{key:"hash",get:function(){if(!this.isValid())throw new Error("cannot hash invalid PurposeRestriction");return"".concat(this.purposeId).concat(t.hashSeparator).concat(this.restrictionType)}},{key:"purposeId",get:function(){return this.purposeId_},set:function(e){this.purposeId_=e}},{key:"isValid",value:function(){return Number.isInteger(this.purposeId)&&this.purposeId>0&&(this.restrictionType===Z.NOT_ALLOWED||this.restrictionType===Z.REQUIRE_CONSENT||this.restrictionType===Z.REQUIRE_LI)}},{key:"isSameAs",value:function(e){return this.purposeId===e.purposeId&&this.restrictionType===e.restrictionType}}],[{key:"unHash",value:function(e){var r=e.split(this.hashSeparator),s=new t;if(r.length!==2)throw new q("hash",e);return s.purposeId=parseInt(r[0],10),s.restrictionType=parseInt(r[1],10),s}}]),t}(re),ue=Ae;p(ue,"hashSeparator","-");var ye=function(i){M(t,i);var o=G(t);function t(){var n;A(this,t);for(var e=arguments.length,r=new Array(e),s=0;s<e;s++)r[s]=arguments[s];return n=o.call.apply(o,[this].concat(r)),u(y(n),"bitLength",0),u(y(n),"map",new Map),u(y(n),"gvl_",void 0),n}return _(t,[{key:"has",value:function(e){return this.map.has(e)}},{key:"isOkToHave",value:function(e,r,s){var c,a=!0;if((c=this.gvl)!==null&&c!==void 0&&c.vendors){var b=this.gvl.vendors[s];if(b)if(e===Z.NOT_ALLOWED)a=b.legIntPurposes.includes(r)||b.purposes.includes(r);else if(b.flexiblePurposes.length)switch(e){case Z.REQUIRE_CONSENT:a=b.flexiblePurposes.includes(r)&&b.legIntPurposes.includes(r);break;case Z.REQUIRE_LI:a=b.flexiblePurposes.includes(r)&&b.purposes.includes(r);break}else a=!1;else a=!1}return a}},{key:"add",value:function(e,r){if(this.isOkToHave(r.restrictionType,r.purposeId,e)){var s=r.hash;this.has(s)||(this.map.set(s,new Set),this.bitLength=0),this.map.get(s).add(e)}}},{key:"restrictPurposeToLegalBasis",value:function(e){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Array.from(this.gvl.vendorIds),s=e.hash;if(!this.has(s))this.map.set(s,new Set(r)),this.bitLength=0;else{var c=this.map.get(s),a=Te(r),b;try{for(a.s();!(b=a.n()).done;){var S=b.value;c.add(S)}}catch(k){a.e(k)}finally{a.f()}}}},{key:"getVendors",value:function(e){var r=[];if(e){var s=e.hash;this.has(s)&&(r=Array.from(this.map.get(s)))}else{var c=new Set;this.map.forEach(function(a){Array.from(a).forEach(function(b){c.add(b)})}),r=Array.from(c)}return r.sort(function(a,b){return a-b})}},{key:"getRestrictionType",value:function(e,r){var s;return this.getRestrictions(e).forEach(function(c){c.purposeId===r&&(s===void 0||s>c.restrictionType)&&(s=c.restrictionType)}),s}},{key:"vendorHasRestriction",value:function(e,r){for(var s=!1,c=this.getRestrictions(e),a=0;a<c.length&&!s;a++)s=r.isSameAs(c[a]);return s}},{key:"getMaxVendorId",value:function(){var e=0;return this.map.forEach(function(r){var s=Array.from(r);e=Math.max(s[s.length-1],e)}),e}},{key:"getRestrictions",value:function(e){var r=[];return this.map.forEach(function(s,c){e?s.has(e)&&r.push(ue.unHash(c)):r.push(ue.unHash(c))}),r}},{key:"getPurposes",value:function(){var e=new Set;return this.map.forEach(function(r,s){e.add(ue.unHash(s).purposeId)}),Array.from(e)}},{key:"remove",value:function(e,r){var s=r.hash,c=this.map.get(s);c&&(c.delete(e),c.size==0&&(this.map.delete(s),this.bitLength=0))}},{key:"gvl",get:function(){return this.gvl_},set:function(e){var r=this;this.gvl_||(this.gvl_=e,this.map.forEach(function(s,c){var a=ue.unHash(c);Array.from(s).forEach(function(b){r.isOkToHave(a.restrictionType,a.purposeId,b)||s.delete(b)})}))}},{key:"isEmpty",value:function(){return this.map.size===0}},{key:"numRestrictions",get:function(){return this.map.size}}]),t}(re),be;(function(i){i.COOKIE="cookie",i.WEB="web",i.APP="app"})(be||(be={}));var D;(function(i){i.CORE="core",i.VENDORS_DISCLOSED="vendorsDisclosed",i.VENDORS_ALLOWED="vendorsAllowed",i.PUBLISHER_TC="publisherTC"})(D||(D={}));var de=_(function i(){A(this,i)});p(de,"ID_TO_KEY",[D.CORE,D.VENDORS_DISCLOSED,D.VENDORS_ALLOWED,D.PUBLISHER_TC]),p(de,"KEY_TO_ID",(m={},u(m,D.CORE,0),u(m,D.VENDORS_DISCLOSED,1),u(m,D.VENDORS_ALLOWED,2),u(m,D.PUBLISHER_TC,3),m));var v=(d=Symbol.iterator,function(i){M(t,i);var o=G(t);function t(){var n;A(this,t);for(var e=arguments.length,r=new Array(e),s=0;s<e;s++)r[s]=arguments[s];return n=o.call.apply(o,[this].concat(r)),u(y(n),"bitLength",0),u(y(n),"maxId_",0),u(y(n),"set_",new Set),n}return _(t,[{key:d,value:ve().mark(function n(){var e;return ve().wrap(function(s){for(;;)switch(s.prev=s.next){case 0:e=1;case 1:if(!(e<=this.maxId)){s.next=7;break}return s.next=4,[e,this.has(e)];case 4:e++,s.next=1;break;case 7:case"end":return s.stop()}},n,this)})},{key:"values",value:function(){return this.set_.values()}},{key:"maxId",get:function(){return this.maxId_}},{key:"has",value:function(e){return this.set_.has(e)}},{key:"unset",value:function(e){var r=this;Array.isArray(e)?e.forEach(function(s){return r.unset(s)}):$(e)=="object"?this.unset(Object.keys(e).map(function(s){return Number(s)})):(this.set_.delete(Number(e)),this.bitLength=0,e===this.maxId&&(this.maxId_=0,this.set_.forEach(function(s){r.maxId_=Math.max(r.maxId,s)})))}},{key:"isIntMap",value:function(e){var r=this,s=$(e)=="object";return s=s&&Object.keys(e).every(function(c){var a=Number.isInteger(parseInt(c,10));return a=a&&r.isValidNumber(e[c].id),a=a&&e[c].name!==void 0,a}),s}},{key:"isValidNumber",value:function(e){return parseInt(e,10)>0}},{key:"isSet",value:function(e){var r=!1;return e instanceof Set&&(r=Array.from(e).every(this.isValidNumber)),r}},{key:"set",value:function(e){var r=this;if(Array.isArray(e))e.forEach(function(s){return r.set(s)});else if(this.isSet(e))this.set(Array.from(e));else if(this.isIntMap(e))this.set(Object.keys(e).map(function(s){return Number(s)}));else if(this.isValidNumber(e))this.set_.add(e),this.maxId_=Math.max(this.maxId,e),this.bitLength=0;else throw new q("set()",e,"must be positive integer array, positive integer, Set<number>, or IntMap")}},{key:"empty",value:function(){this.set_=new Set}},{key:"forEach",value:function(e){for(var r=1;r<=this.maxId;r++)e(this.has(r),r)}},{key:"size",get:function(){return this.set_.size}},{key:"setAll",value:function(e){this.set(e)}}]),t}(re)),h,g,I,O,C,F,H,B,ie,te,se,Ge,je,He,Be,xe,Qe,We,f=_(function i(){A(this,i)});h=l.cmpId,g=l.cmpVersion,I=l.consentLanguage,O=l.consentScreen,C=l.created,F=l.isServiceSpecific,H=l.lastUpdated,B=l.policyVersion,ie=l.publisherCountryCode,te=l.publisherLegitimateInterests,se=l.publisherConsents,Ge=l.purposeConsents,je=l.purposeLegitimateInterests,He=l.purposeOneTreatment,Be=l.specialFeatureOptins,xe=l.useNonStandardTexts,Qe=l.vendorListVersion,We=l.version,p(f,h,12),p(f,g,12),p(f,I,12),p(f,O,6),p(f,C,36),p(f,F,1),p(f,H,36),p(f,B,6),p(f,ie,12),p(f,te,24),p(f,se,24),p(f,Ge,24),p(f,je,24),p(f,He,1),p(f,Be,12),p(f,xe,1),p(f,Qe,12),p(f,We,6),p(f,"anyBoolean",1),p(f,"encodingType",1),p(f,"maxId",16),p(f,"numCustomPurposes",6),p(f,"numEntries",12),p(f,"numRestrictions",12),p(f,"purposeId",6),p(f,"restrictionType",2),p(f,"segmentType",3),p(f,"singleOrRange",1),p(f,"vendorId",16);var oe=function(){function i(){A(this,i)}return _(i,null,[{key:"encode",value:function(t){return String(Number(t))}},{key:"decode",value:function(t){return t==="1"}}]),i}(),T=function(){function i(){A(this,i)}return _(i,null,[{key:"encode",value:function(t,n){var e;if(typeof t=="string"&&(t=parseInt(t,10)),e=t.toString(2),e.length>n||t<0)throw new Y("".concat(t," too large to encode into ").concat(n));return e.length<n&&(e="0".repeat(n-e.length)+e),e}},{key:"decode",value:function(t,n){if(n!==t.length)throw new X("invalid bit length");return parseInt(t,2)}}]),i}(),Je=function(){function i(){A(this,i)}return _(i,null,[{key:"encode",value:function(t,n){return T.encode(Math.round(t.getTime()/100),n)}},{key:"decode",value:function(t,n){if(n!==t.length)throw new X("invalid bit length");var e=new Date;return e.setTime(T.decode(t,n)*100),e}}]),i}(),ce=function(){function i(){A(this,i)}return _(i,null,[{key:"encode",value:function(t,n){for(var e="",r=1;r<=n;r++)e+=oe.encode(t.has(r));return e}},{key:"decode",value:function(t,n){if(t.length!==n)throw new X("bitfield encoding length mismatch");for(var e=new v,r=1;r<=n;r++)oe.decode(t[r-1])&&e.set(r);return e.bitLength=t.length,e}}]),i}(),ze=function(){function i(){A(this,i)}return _(i,null,[{key:"encode",value:function(t,n){t=t.toUpperCase();var e=65,r=t.charCodeAt(0)-e,s=t.charCodeAt(1)-e;if(r<0||r>25||s<0||s>25)throw new Y("invalid language code: ".concat(t));if(n%2===1)throw new Y("numBits must be even, ".concat(n," is not valid"));n=n/2;var c=T.encode(r,n),a=T.encode(s,n);return c+a}},{key:"decode",value:function(t,n){var e;if(n===t.length&&!(t.length%2)){var r=t.length/2,s=T.decode(t.slice(0,r),r)+65,c=T.decode(t.slice(r),r)+65;e=String.fromCharCode(s)+String.fromCharCode(c)}else throw new X("invalid bit length for language");return e}}]),i}(),pt=function(){function i(){A(this,i)}return _(i,null,[{key:"encode",value:function(t){var n=T.encode(t.numRestrictions,f.numRestrictions);if(!t.isEmpty()){var e=Array.from(t.gvl.vendorIds),r=function(c,a){var b=e.indexOf(c);return e.indexOf(a)-b>1};t.getRestrictions().forEach(function(s){n+=T.encode(s.purposeId,f.purposeId),n+=T.encode(s.restrictionType,f.restrictionType);for(var c=t.getVendors(s),a=c.length,b=0,S=0,k="",P=0;P<a;P++){var V=c[P];if(S===0&&(b++,S=V),P===a-1||r(V,c[P+1])){var z=V!==S;k+=oe.encode(z),k+=T.encode(S,f.vendorId),z&&(k+=T.encode(V,f.vendorId)),S=0}}n+=T.encode(b,f.numEntries),n+=k})}return n}},{key:"decode",value:function(t){var n=0,e=new ye,r=T.decode(t.substr(n,f.numRestrictions),f.numRestrictions);n+=f.numRestrictions;for(var s=0;s<r;s++){var c=T.decode(t.substr(n,f.purposeId),f.purposeId);n+=f.purposeId;var a=T.decode(t.substr(n,f.restrictionType),f.restrictionType);n+=f.restrictionType;var b=new ue(c,a),S=T.decode(t.substr(n,f.numEntries),f.numEntries);n+=f.numEntries;for(var k=function(){var z=oe.decode(t.substr(n,f.anyBoolean));n+=f.anyBoolean;var le=T.decode(t.substr(n,f.vendorId),f.vendorId);if(n+=f.vendorId,z){var Le=T.decode(t.substr(n,f.vendorId),f.vendorId);if(n+=f.vendorId,Le<le)throw new X("Invalid RangeEntry: endVendorId ".concat(Le," is less than ").concat(le));var kt=Array.from({length:Le-le+1},function(Mt,Tt){return le+Tt});e.restrictPurposeToLegalBasis(b,kt)}else e.restrictPurposeToLegalBasis(b,[le])},P=0;P<S;P++)k()}return e.bitLength=n,e}}]),i}(),Ie;(function(i){i[i.FIELD=0]="FIELD",i[i.RANGE=1]="RANGE"})(Ie||(Ie={}));var Se=function(){function i(){A(this,i)}return _(i,null,[{key:"encode",value:function(t){var n=[],e=[],r=T.encode(t.maxId,f.maxId),s="",c,a=f.maxId+f.encodingType,b=a+t.maxId,S=f.vendorId*2+f.singleOrRange+f.numEntries,k=a+f.numEntries;return t.forEach(function(P,V){s+=oe.encode(P),c=t.maxId>S&&k<b,c&&P&&(t.has(V+1)?e.length===0&&(e.push(V),k+=f.singleOrRange,k+=f.vendorId):(e.push(V),k+=f.vendorId,n.push(e),e=[]))}),c?(r+=String(Ie.RANGE),r+=this.buildRangeEncoding(n)):(r+=String(Ie.FIELD),r+=s),r}},{key:"decode",value:function(t,n){var e,r=0,s=T.decode(t.substr(r,f.maxId),f.maxId);r+=f.maxId;var c=T.decode(t.charAt(r),f.encodingType);if(r+=f.encodingType,c===Ie.RANGE){if(e=new v,n===1){if(t.substr(r,1)==="1")throw new X("Unable to decode default consent=1");r++}var a=T.decode(t.substr(r,f.numEntries),f.numEntries);r+=f.numEntries;for(var b=0;b<a;b++){var S=oe.decode(t.charAt(r));r+=f.singleOrRange;var k=T.decode(t.substr(r,f.vendorId),f.vendorId);if(r+=f.vendorId,S){var P=T.decode(t.substr(r,f.vendorId),f.vendorId);r+=f.vendorId;for(var V=k;V<=P;V++)e.set(V)}else e.set(k)}}else{var z=t.substr(r,s);r+=s,e=ce.decode(z,s)}return e.bitLength=r,e}},{key:"buildRangeEncoding",value:function(t){var n=t.length,e=T.encode(n,f.numEntries);return t.forEach(function(r){var s=r.length===1;e+=oe.encode(!s),e+=T.encode(r[0],f.vendorId),s||(e+=T.encode(r[1],f.vendorId))}),e}}]),i}();function Ye(){var i;return i={},u(i,l.version,T),u(i,l.created,Je),u(i,l.lastUpdated,Je),u(i,l.cmpId,T),u(i,l.cmpVersion,T),u(i,l.consentScreen,T),u(i,l.consentLanguage,ze),u(i,l.vendorListVersion,T),u(i,l.policyVersion,T),u(i,l.isServiceSpecific,oe),u(i,l.useNonStandardTexts,oe),u(i,l.specialFeatureOptins,ce),u(i,l.purposeConsents,ce),u(i,l.purposeLegitimateInterests,ce),u(i,l.purposeOneTreatment,oe),u(i,l.publisherCountryCode,ze),u(i,l.vendorConsents,Se),u(i,l.vendorLegitimateInterests,Se),u(i,l.publisherRestrictions,pt),u(i,"segmentType",T),u(i,l.vendorsDisclosed,Se),u(i,l.vendorsAllowed,Se),u(i,l.publisherConsents,ce),u(i,l.publisherLegitimateInterests,ce),u(i,l.numCustomPurposes,T),u(i,l.publisherCustomConsents,ce),u(i,l.publisherCustomLegitimateInterests,ce),i}var ht=_(function i(){var o;A(this,i),u(this,1,u({},D.CORE,[l.version,l.created,l.lastUpdated,l.cmpId,l.cmpVersion,l.consentScreen,l.consentLanguage,l.vendorListVersion,l.purposeConsents,l.vendorConsents])),u(this,2,(o={},u(o,D.CORE,[l.version,l.created,l.lastUpdated,l.cmpId,l.cmpVersion,l.consentScreen,l.consentLanguage,l.vendorListVersion,l.policyVersion,l.isServiceSpecific,l.useNonStandardTexts,l.specialFeatureOptins,l.purposeConsents,l.purposeLegitimateInterests,l.purposeOneTreatment,l.publisherCountryCode,l.vendorConsents,l.vendorLegitimateInterests,l.publisherRestrictions]),u(o,D.PUBLISHER_TC,[l.publisherConsents,l.publisherLegitimateInterests,l.numCustomPurposes,l.publisherCustomConsents,l.publisherCustomLegitimateInterests]),u(o,D.VENDORS_ALLOWED,[l.vendorsAllowed]),u(o,D.VENDORS_DISCLOSED,[l.vendorsDisclosed]),o))}),ft=_(function i(o,t){if(A(this,i),u(this,1,[D.CORE]),u(this,2,[D.CORE]),o.version===2)if(o.isServiceSpecific)this[2].push(D.PUBLISHER_TC);else{var n=!!(t&&t.isForVendors);(!n||o[l.supportOOB]===!0)&&this[2].push(D.VENDORS_DISCLOSED),n&&(o[l.supportOOB]&&o[l.vendorsAllowed].size>0&&this[2].push(D.VENDORS_ALLOWED),this[2].push(D.PUBLISHER_TC))}}),Ne=function(){function i(){A(this,i)}return _(i,null,[{key:"encode",value:function(t,n){var e=this,r;try{r=this.fieldSequence[String(t.version)][n]}catch(a){throw new Y("Unable to encode version: ".concat(t.version,", segment: ").concat(n))}var s="";n!==D.CORE&&(s=T.encode(de.KEY_TO_ID[n],f.segmentType));var c=Ye();return r.forEach(function(a){var b=t[a],S=c[a],k=f[a];k===void 0&&e.isPublisherCustom(a)&&(k=Number(t[l.numCustomPurposes]));try{s+=S.encode(b,k)}catch(P){throw new Y("Error encoding ".concat(n,"->").concat(a,": ").concat(P.message))}}),ee.encode(s)}},{key:"decode",value:function(t,n,e){var r=this,s=ee.decode(t),c=0;e===D.CORE&&(n.version=T.decode(s.substr(c,f[l.version]),f[l.version])),e!==D.CORE&&(c+=f.segmentType);var a=this.fieldSequence[String(n.version)][e],b=Ye();return a.forEach(function(S){var k=b[S],P=f[S];if(P===void 0&&r.isPublisherCustom(S)&&(P=Number(n[l.numCustomPurposes])),P!==0){var V=s.substr(c,P);if(k===Se?n[S]=k.decode(V,n.version):n[S]=k.decode(V,P),Number.isInteger(P))c+=P;else if(Number.isInteger(n[S].bitLength))c+=n[S].bitLength;else throw new X(S)}}),n}},{key:"isPublisherCustom",value:function(t){return t.indexOf("publisherCustom")===0}}]),i}();p(Ne,"fieldSequence",new ht);var Ke=function(){function i(){A(this,i)}return _(i,null,[{key:"process",value:function(t,n){var e=t.gvl;if(!e)throw new Y("Unable to encode TCModel without a GVL");if(!e.isReady)throw new Y("Unable to encode TCModel tcModel.gvl.readyPromise is not resolved");t=t.clone(),t.consentLanguage=e.language.slice(0,2).toUpperCase(),(n==null?void 0:n.version)>0&&(n==null?void 0:n.version)<=this.processor.length?t.version=n.version:t.version=this.processor.length;var r=t.version-1;if(!this.processor[r])throw new Y("Invalid version: ".concat(t.version));return this.processor[r](t,e)}}]),i}();p(Ke,"processor",[function(i){return i},function(i,o){i.publisherRestrictions.gvl=o,i.purposeLegitimateInterests.unset([1,3,4,5,6]);var t=new Map;return t.set("legIntPurposes",i.vendorLegitimateInterests),t.set("purposes",i.vendorConsents),t.forEach(function(n,e){n.forEach(function(r,s){if(r){var c=o.vendors[s];if(!c||c.deletedDate)n.unset(s);else if(c[e].length===0&&!(e==="legIntPurposes"&&c.purposes.length===0&&c.legIntPurposes.length===0&&c.specialPurposes.length>0))if(i.isServiceSpecific)if(c.flexiblePurposes.length===0)n.unset(s);else{for(var a=i.publisherRestrictions.getRestrictions(s),b=!1,S=0,k=a.length;S<k&&!b;S++)b=a[S].restrictionType===Z.REQUIRE_CONSENT&&e==="purposes"||a[S].restrictionType===Z.REQUIRE_LI&&e==="legIntPurposes";b||n.unset(s)}else n.unset(s)}})}),i.vendorsDisclosed.set(o.vendors),i}]);var vt=function(){function i(){A(this,i)}return _(i,null,[{key:"absCall",value:function(t,n,e,r){return new Promise(function(s,c){var a=new XMLHttpRequest,b=function(){if(a.readyState==XMLHttpRequest.DONE)if(a.status>=200&&a.status<300){var z=a.response;if(typeof z=="string")try{z=JSON.parse(z)}catch(le){}s(z)}else c(new Error("HTTP Status: ".concat(a.status," response type: ").concat(a.responseType)))},S=function(){c(new Error("error"))},k=function(){c(new Error("aborted"))},P=function(){c(new Error("Timeout "+r+"ms "+t))};a.withCredentials=e,a.addEventListener("load",b),a.addEventListener("error",S),a.addEventListener("abort",k),n===null?a.open("GET",t,!0):a.open("POST",t,!0),a.responseType="json",a.timeout=r,a.ontimeout=P,a.send(n)})}},{key:"post",value:function(t,n){var e=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1,r=arguments.length>3&&arguments[3]!==void 0?arguments[3]:0;return this.absCall(t,JSON.stringify(n),e,r)}},{key:"fetch",value:function(t){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,e=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0;return this.absCall(t,null,n,e)}}]),i}(),gt=function(i){M(t,i);var o=G(t);function t(n){var e;A(this,t),e=o.call(this),u(y(e),"readyPromise",void 0),u(y(e),"gvlSpecificationVersion",void 0),u(y(e),"vendorListVersion",void 0),u(y(e),"tcfPolicyVersion",void 0),u(y(e),"lastUpdated",void 0),u(y(e),"purposes",void 0),u(y(e),"specialPurposes",void 0),u(y(e),"features",void 0),u(y(e),"specialFeatures",void 0),u(y(e),"isReady_",!1),u(y(e),"vendors_",void 0),u(y(e),"vendorIds",void 0),u(y(e),"fullVendorList",void 0),u(y(e),"byPurposeVendorMap",void 0),u(y(e),"bySpecialPurposeVendorMap",void 0),u(y(e),"byFeatureVendorMap",void 0),u(y(e),"bySpecialFeatureVendorMap",void 0),u(y(e),"stacks",void 0),u(y(e),"dataCategories",void 0),u(y(e),"lang_",void 0),u(y(e),"cacheLang_",void 0),u(y(e),"isLatest",!1);var r=t.baseUrl;if(e.lang_=t.DEFAULT_LANGUAGE,e.cacheLang_=t.DEFAULT_LANGUAGE,e.isVendorList(n))e.populate(n),e.readyPromise=Promise.resolve();else{if(!r)throw new K("must specify GVL.baseUrl before loading GVL json");if(n>0){var s=n;t.CACHE.has(s)?(e.populate(t.CACHE.get(s)),e.readyPromise=Promise.resolve()):(r+=t.versionedFilename.replace("[VERSION]",String(s)),e.readyPromise=e.fetchJson(r))}else t.CACHE.has(t.LATEST_CACHE_KEY)?(e.populate(t.CACHE.get(t.LATEST_CACHE_KEY)),e.readyPromise=Promise.resolve()):(e.isLatest=!0,e.readyPromise=e.fetchJson(r+t.latestFilename))}return e}return _(t,[{key:"cacheLanguage",value:function(){t.LANGUAGE_CACHE.has(this.cacheLang_)||t.LANGUAGE_CACHE.set(this.cacheLang_,{purposes:this.purposes,specialPurposes:this.specialPurposes,features:this.features,specialFeatures:this.specialFeatures,stacks:this.stacks,dataCategories:this.dataCategories})}},{key:"fetchJson",value:function(){var n=ot(ve().mark(function r(s){return ve().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,a.t0=this,a.next=4,vt.fetch(s);case 4:a.t1=a.sent,a.t0.populate.call(a.t0,a.t1),a.next=11;break;case 8:throw a.prev=8,a.t2=a.catch(0),new K(a.t2.message);case 11:case"end":return a.stop()}},r,this,[[0,8]])}));function e(r){return n.apply(this,arguments)}return e}()},{key:"getJson",value:function(){return JSON.parse(JSON.stringify({gvlSpecificationVersion:this.gvlSpecificationVersion,vendorListVersion:this.vendorListVersion,tcfPolicyVersion:this.tcfPolicyVersion,lastUpdated:this.lastUpdated,purposes:this.purposes,specialPurposes:this.specialPurposes,features:this.features,specialFeatures:this.specialFeatures,stacks:this.stacks,dataCategories:this.dataCategories,vendors:this.fullVendorList}))}},{key:"changeLanguage",value:function(){var n=ot(ve().mark(function r(s){var c,a,b,S,k;return ve().wrap(function(V){for(;;)switch(V.prev=V.next){case 0:c=s,V.prev=1,c=t.consentLanguages.parseLanguage(s),V.next=8;break;case 5:throw V.prev=5,V.t0=V.catch(1),new K("Error during parsing the language: "+V.t0.message);case 8:if(a=s.toUpperCase(),!(!(c.toLowerCase()===t.DEFAULT_LANGUAGE.toLowerCase()&&!t.LANGUAGE_CACHE.has(a))&&c!==this.lang_)){V.next=26;break}if(this.lang_=c,!t.LANGUAGE_CACHE.has(a)){V.next=15;break}b=t.LANGUAGE_CACHE.get(a);for(S in b)b.hasOwnProperty(S)&&(this[S]=b[S]);V.next=26;break;case 15:return k=t.baseUrl+t.languageFilename.replace("[LANG]",this.lang_.toLowerCase()),V.prev=16,V.next=19,this.fetchJson(k);case 19:this.cacheLang_=a,this.cacheLanguage(),V.next=26;break;case 23:throw V.prev=23,V.t1=V.catch(16),new K("unable to load language: "+V.t1.message);case 26:case"end":return V.stop()}},r,this,[[1,5],[16,23]])}));function e(r){return n.apply(this,arguments)}return e}()},{key:"language",get:function(){return this.lang_}},{key:"isVendorList",value:function(e){return e!==void 0&&e.vendors!==void 0}},{key:"populate",value:function(e){this.purposes=e.purposes,this.specialPurposes=e.specialPurposes,this.features=e.features,this.specialFeatures=e.specialFeatures,this.stacks=e.stacks,this.dataCategories=e.dataCategories,this.isVendorList(e)&&(this.gvlSpecificationVersion=e.gvlSpecificationVersion,this.tcfPolicyVersion=e.tcfPolicyVersion,this.vendorListVersion=e.vendorListVersion,this.lastUpdated=e.lastUpdated,typeof this.lastUpdated=="string"&&(this.lastUpdated=new Date(this.lastUpdated)),this.vendors_=e.vendors,this.fullVendorList=e.vendors,this.mapVendors(),this.isReady_=!0,this.isLatest&&t.CACHE.set(t.LATEST_CACHE_KEY,this.getJson()),t.CACHE.has(this.vendorListVersion)||t.CACHE.set(this.vendorListVersion,this.getJson())),this.cacheLanguage()}},{key:"mapVendors",value:function(e){var r=this;this.byPurposeVendorMap={},this.bySpecialPurposeVendorMap={},this.byFeatureVendorMap={},this.bySpecialFeatureVendorMap={},Object.keys(this.purposes).forEach(function(s){r.byPurposeVendorMap[s]={legInt:new Set,consent:new Set,flexible:new Set}}),Object.keys(this.specialPurposes).forEach(function(s){r.bySpecialPurposeVendorMap[s]=new Set}),Object.keys(this.features).forEach(function(s){r.byFeatureVendorMap[s]=new Set}),Object.keys(this.specialFeatures).forEach(function(s){r.bySpecialFeatureVendorMap[s]=new Set}),Array.isArray(e)||(e=Object.keys(this.fullVendorList).map(function(s){return+s})),this.vendorIds=new Set(e),this.vendors_=e.reduce(function(s,c){var a=r.vendors_[String(c)];return a&&a.deletedDate===void 0&&(a.purposes.forEach(function(b){r.byPurposeVendorMap[String(b)].consent.add(c)}),a.specialPurposes.forEach(function(b){r.bySpecialPurposeVendorMap[String(b)].add(c)}),a.legIntPurposes.forEach(function(b){r.byPurposeVendorMap[String(b)].legInt.add(c)}),a.flexiblePurposes&&a.flexiblePurposes.forEach(function(b){r.byPurposeVendorMap[String(b)].flexible.add(c)}),a.features.forEach(function(b){r.byFeatureVendorMap[String(b)].add(c)}),a.specialFeatures.forEach(function(b){r.bySpecialFeatureVendorMap[String(b)].add(c)}),s[c]=a),s},{})}},{key:"getFilteredVendors",value:function(e,r,s,c){var a=this,b=e.charAt(0).toUpperCase()+e.slice(1),S,k={};return e==="purpose"&&s?S=this["by"+b+"VendorMap"][String(r)][s]:S=this["by"+(c?"Special":"")+b+"VendorMap"][String(r)],S.forEach(function(P){k[String(P)]=a.vendors[String(P)]}),k}},{key:"getVendorsWithConsentPurpose",value:function(e){return this.getFilteredVendors("purpose",e,"consent")}},{key:"getVendorsWithLegIntPurpose",value:function(e){return this.getFilteredVendors("purpose",e,"legInt")}},{key:"getVendorsWithFlexiblePurpose",value:function(e){return this.getFilteredVendors("purpose",e,"flexible")}},{key:"getVendorsWithSpecialPurpose",value:function(e){return this.getFilteredVendors("purpose",e,void 0,!0)}},{key:"getVendorsWithFeature",value:function(e){return this.getFilteredVendors("feature",e)}},{key:"getVendorsWithSpecialFeature",value:function(e){return this.getFilteredVendors("feature",e,void 0,!0)}},{key:"vendors",get:function(){return this.vendors_}},{key:"narrowVendorsTo",value:function(e){this.mapVendors(e)}},{key:"isReady",get:function(){return this.isReady_}},{key:"clone",value:function(){var e=new t(this.getJson());return this.lang_!==t.DEFAULT_LANGUAGE&&e.changeLanguage(this.lang_),e}}],[{key:"baseUrl",get:function(){return this.baseUrl_},set:function(e){if(/^https?:\/\/vendorlist\.consensu\.org\//.test(e))throw new K("Invalid baseUrl!  You may not pull directly from vendorlist.consensu.org and must provide your own cache");e.length>0&&e[e.length-1]!=="/"&&(e+="/"),this.baseUrl_=e}},{key:"emptyLanguageCache",value:function(e){var r=!1;return e==null&&t.LANGUAGE_CACHE.size>0?(t.LANGUAGE_CACHE=new Map,r=!0):typeof e=="string"&&this.consentLanguages.has(e.toUpperCase())&&(t.LANGUAGE_CACHE.delete(e.toUpperCase()),r=!0),r}},{key:"emptyCache",value:function(e){var r=!1;return Number.isInteger(e)&&e>=0?(t.CACHE.delete(e),r=!0):e===void 0&&(t.CACHE=new Map,r=!0),r}},{key:"isInstanceOf",value:function(e){return $(e)=="object"&&typeof e.narrowVendorsTo=="function"}}]),t}(re),W=gt;p(W,"LANGUAGE_CACHE",new Map),p(W,"CACHE",new Map),p(W,"LATEST_CACHE_KEY",0),p(W,"DEFAULT_LANGUAGE","EN"),p(W,"consentLanguages",new ae),p(W,"baseUrl_"),p(W,"latestFilename","vendor-list.json"),p(W,"versionedFilename","archives/vendor-list-v[VERSION].json"),p(W,"languageFilename","purposes-[LANG].json");var Oe=function(i){M(t,i);var o=G(t);function t(n){var e;return A(this,t),e=o.call(this),u(y(e),"isServiceSpecific_",!1),u(y(e),"supportOOB_",!0),u(y(e),"useNonStandardTexts_",!1),u(y(e),"purposeOneTreatment_",!1),u(y(e),"publisherCountryCode_","AA"),u(y(e),"version_",2),u(y(e),"consentScreen_",0),u(y(e),"policyVersion_",4),u(y(e),"consentLanguage_","EN"),u(y(e),"cmpId_",0),u(y(e),"cmpVersion_",0),u(y(e),"vendorListVersion_",0),u(y(e),"numCustomPurposes_",0),u(y(e),"gvl_",void 0),u(y(e),"created",void 0),u(y(e),"lastUpdated",void 0),u(y(e),"specialFeatureOptins",new v),u(y(e),"purposeConsents",new v),u(y(e),"purposeLegitimateInterests",new v),u(y(e),"publisherConsents",new v),u(y(e),"publisherLegitimateInterests",new v),u(y(e),"publisherCustomConsents",new v),u(y(e),"publisherCustomLegitimateInterests",new v),u(y(e),"customPurposes",void 0),u(y(e),"vendorConsents",new v),u(y(e),"vendorLegitimateInterests",new v),u(y(e),"vendorsDisclosed",new v),u(y(e),"vendorsAllowed",new v),u(y(e),"publisherRestrictions",new ye),n&&(e.gvl=n),e.updated(),e}return _(t,[{key:"gvl",get:function(){return this.gvl_},set:function(e){W.isInstanceOf(e)||(e=new W(e)),this.gvl_=e,this.publisherRestrictions.gvl=e}},{key:"cmpId",get:function(){return this.cmpId_},set:function(e){if(e=Number(e),Number.isInteger(e)&&e>1)this.cmpId_=e;else throw new q("cmpId",e)}},{key:"cmpVersion",get:function(){return this.cmpVersion_},set:function(e){if(e=Number(e),Number.isInteger(e)&&e>-1)this.cmpVersion_=e;else throw new q("cmpVersion",e)}},{key:"consentScreen",get:function(){return this.consentScreen_},set:function(e){if(e=Number(e),Number.isInteger(e)&&e>-1)this.consentScreen_=e;else throw new q("consentScreen",e)}},{key:"consentLanguage",get:function(){return this.consentLanguage_},set:function(e){this.consentLanguage_=e}},{key:"publisherCountryCode",get:function(){return this.publisherCountryCode_},set:function(e){if(/^([A-z]){2}$/.test(e))this.publisherCountryCode_=e.toUpperCase();else throw new q("publisherCountryCode",e)}},{key:"vendorListVersion",get:function(){return this.gvl?this.gvl.vendorListVersion:this.vendorListVersion_},set:function(e){if(e=Number(e)>>0,e<0)throw new q("vendorListVersion",e);this.vendorListVersion_=e}},{key:"policyVersion",get:function(){return this.gvl?this.gvl.tcfPolicyVersion:this.policyVersion_},set:function(e){if(this.policyVersion_=parseInt(e,10),this.policyVersion_<0)throw new q("policyVersion",e)}},{key:"version",get:function(){return this.version_},set:function(e){this.version_=parseInt(e,10)}},{key:"isServiceSpecific",get:function(){return this.isServiceSpecific_},set:function(e){this.isServiceSpecific_=e}},{key:"useNonStandardTexts",get:function(){return this.useNonStandardTexts_},set:function(e){this.useNonStandardTexts_=e}},{key:"supportOOB",get:function(){return this.supportOOB_},set:function(e){this.supportOOB_=e}},{key:"purposeOneTreatment",get:function(){return this.purposeOneTreatment_},set:function(e){this.purposeOneTreatment_=e}},{key:"setAllVendorConsents",value:function(){this.vendorConsents.set(this.gvl.vendors)}},{key:"unsetAllVendorConsents",value:function(){this.vendorConsents.empty()}},{key:"setAllVendorsDisclosed",value:function(){this.vendorsDisclosed.set(this.gvl.vendors)}},{key:"unsetAllVendorsDisclosed",value:function(){this.vendorsDisclosed.empty()}},{key:"setAllVendorsAllowed",value:function(){this.vendorsAllowed.set(this.gvl.vendors)}},{key:"unsetAllVendorsAllowed",value:function(){this.vendorsAllowed.empty()}},{key:"setAllVendorLegitimateInterests",value:function(){this.vendorLegitimateInterests.set(this.gvl.vendors)}},{key:"unsetAllVendorLegitimateInterests",value:function(){this.vendorLegitimateInterests.empty()}},{key:"setAllPurposeConsents",value:function(){this.purposeConsents.set(this.gvl.purposes)}},{key:"unsetAllPurposeConsents",value:function(){this.purposeConsents.empty()}},{key:"setAllPurposeLegitimateInterests",value:function(){this.purposeLegitimateInterests.set(this.gvl.purposes)}},{key:"unsetAllPurposeLegitimateInterests",value:function(){this.purposeLegitimateInterests.empty()}},{key:"setAllSpecialFeatureOptins",value:function(){this.specialFeatureOptins.set(this.gvl.specialFeatures)}},{key:"unsetAllSpecialFeatureOptins",value:function(){this.specialFeatureOptins.empty()}},{key:"setAll",value:function(){this.setAllVendorConsents(),this.setAllPurposeLegitimateInterests(),this.setAllSpecialFeatureOptins(),this.setAllPurposeConsents(),this.setAllVendorLegitimateInterests()}},{key:"unsetAll",value:function(){this.unsetAllVendorConsents(),this.unsetAllPurposeLegitimateInterests(),this.unsetAllSpecialFeatureOptins(),this.unsetAllPurposeConsents(),this.unsetAllVendorLegitimateInterests()}},{key:"numCustomPurposes",get:function(){var e=this.numCustomPurposes_;if($(this.customPurposes)=="object"){var r=Object.keys(this.customPurposes).sort(function(s,c){return Number(s)-Number(c)});e=parseInt(r.pop(),10)}return e},set:function(e){if(this.numCustomPurposes_=parseInt(e,10),this.numCustomPurposes_<0)throw new q("numCustomPurposes",e)}},{key:"updated",value:function(){var e=new Date,r=new Date(Date.UTC(e.getUTCFullYear(),e.getUTCMonth(),e.getUTCDate()));this.created=r,this.lastUpdated=r}}]),t}(re);p(Oe,"consentLanguages",W.consentLanguages);var qe=function(){function i(){A(this,i)}return _(i,null,[{key:"encode",value:function(t,n){var e="",r;return t=Ke.process(t,n),Array.isArray(n==null?void 0:n.segments)?r=n.segments:r=new ft(t,n)[""+t.version],r.forEach(function(s,c){var a="";c<r.length-1&&(a="."),e+=Ne.encode(t,s)+a}),e}},{key:"decode",value:function(t,n){var e=t.split("."),r=e.length;n||(n=new Oe);for(var s=0;s<r;s++){var c=e[s],a=ee.decode(c.charAt(0)).substr(0,f.segmentType),b=de.ID_TO_KEY[T.decode(a,f.segmentType).toString()];Ne.decode(c,n,b)}return n}}]),i}(),x;(function(i){i.PING="ping",i.GET_TC_DATA="getTCData",i.GET_IN_APP_TC_DATA="getInAppTCData",i.GET_VENDOR_LIST="getVendorList",i.ADD_EVENT_LISTENER="addEventListener",i.REMOVE_EVENT_LISTENER="removeEventListener"})(x||(x={}));var pe;(function(i){i.STUB="stub",i.LOADING="loading",i.LOADED="loaded",i.ERROR="error"})(pe||(pe={}));var he;(function(i){i.VISIBLE="visible",i.HIDDEN="hidden",i.DISABLED="disabled"})(he||(he={}));var Ce;(function(i){i.TC_LOADED="tcloaded",i.CMP_UI_SHOWN="cmpuishown",i.USER_ACTION_COMPLETE="useractioncomplete"})(Ce||(Ce={}));var Ve=function(){function i(o,t,n,e){A(this,i),u(this,"listenerId",void 0),u(this,"callback",void 0),u(this,"next",void 0),u(this,"param",void 0),u(this,"success",!0),Object.assign(this,{callback:o,listenerId:n,param:t,next:e});try{this.respond()}catch(r){this.invokeCallback(null)}}return _(i,[{key:"invokeCallback",value:function(t){var n=t!==null;typeof this.next=="function"?this.callback(this.next,t,n):this.callback(t,n)}}]),i}(),ke=function(i){M(t,i);var o=G(t);function t(){return A(this,t),o.apply(this,arguments)}return _(t,[{key:"respond",value:function(){this.throwIfParamInvalid(),this.invokeCallback(new $e(this.param,this.listenerId))}},{key:"throwIfParamInvalid",value:function(){if(this.param!==void 0&&(!Array.isArray(this.param)||!this.param.every(Number.isInteger)))throw new Error("Invalid Parameter")}}]),t}(Ve),mt=function(){function i(){A(this,i),u(this,"eventQueue",new Map),u(this,"queueNumber",0)}return _(i,[{key:"add",value:function(t){return this.eventQueue.set(this.queueNumber,t),this.queueNumber++}},{key:"remove",value:function(t){return this.eventQueue.delete(t)}},{key:"exec",value:function(){this.eventQueue.forEach(function(t,n){new ke(t.callback,t.param,n,t.next)})}},{key:"clear",value:function(){this.queueNumber=0,this.eventQueue.clear()}},{key:"size",get:function(){return this.eventQueue.size}}]),i}(),E=function(){function i(){A(this,i)}return _(i,null,[{key:"reset",value:function(){delete this.cmpId,delete this.cmpVersion,delete this.eventStatus,delete this.gdprApplies,delete this.tcModel,delete this.tcString,delete this.tcfPolicyVersion,this.cmpStatus=pe.LOADING,this.disabled=!1,this.displayStatus=he.HIDDEN,this.eventQueue.clear()}}]),i}();p(E,"apiVersion","2"),p(E,"tcfPolicyVersion"),p(E,"eventQueue",new mt),p(E,"cmpStatus",pe.LOADING),p(E,"disabled",!1),p(E,"displayStatus",he.HIDDEN),p(E,"cmpId"),p(E,"cmpVersion"),p(E,"eventStatus"),p(E,"gdprApplies"),p(E,"tcModel"),p(E,"tcString");var De=_(function i(){A(this,i),u(this,"cmpId",E.cmpId),u(this,"cmpVersion",E.cmpVersion),u(this,"gdprApplies",E.gdprApplies),u(this,"tcfPolicyVersion",E.tcfPolicyVersion)}),yt=function(i){M(t,i);var o=G(t);function t(){var n;A(this,t);for(var e=arguments.length,r=new Array(e),s=0;s<e;s++)r[s]=arguments[s];return n=o.call.apply(o,[this].concat(r)),u(y(n),"cmpStatus",pe.ERROR),n}return _(t)}(De),$e=function(i){M(t,i);var o=G(t);function t(n,e){var r;if(A(this,t),r=o.call(this),u(y(r),"tcString",void 0),u(y(r),"listenerId",void 0),u(y(r),"eventStatus",void 0),u(y(r),"cmpStatus",void 0),u(y(r),"isServiceSpecific",void 0),u(y(r),"useNonStandardTexts",void 0),u(y(r),"publisherCC",void 0),u(y(r),"purposeOneTreatment",void 0),u(y(r),"outOfBand",void 0),u(y(r),"purpose",void 0),u(y(r),"vendor",void 0),u(y(r),"specialFeatureOptins",void 0),u(y(r),"publisher",void 0),r.eventStatus=E.eventStatus,r.cmpStatus=E.cmpStatus,r.listenerId=e,E.gdprApplies){var s=E.tcModel;r.tcString=E.tcString,r.isServiceSpecific=s.isServiceSpecific,r.useNonStandardTexts=s.useNonStandardTexts,r.purposeOneTreatment=s.purposeOneTreatment,r.publisherCC=s.publisherCountryCode,r.outOfBand={allowedVendors:r.createVectorField(s.vendorsAllowed,n),disclosedVendors:r.createVectorField(s.vendorsDisclosed,n)},r.purpose={consents:r.createVectorField(s.purposeConsents),legitimateInterests:r.createVectorField(s.purposeLegitimateInterests)},r.vendor={consents:r.createVectorField(s.vendorConsents,n),legitimateInterests:r.createVectorField(s.vendorLegitimateInterests,n)},r.specialFeatureOptins=r.createVectorField(s.specialFeatureOptins),r.publisher={consents:r.createVectorField(s.publisherConsents),legitimateInterests:r.createVectorField(s.publisherLegitimateInterests),customPurpose:{consents:r.createVectorField(s.publisherCustomConsents),legitimateInterests:r.createVectorField(s.publisherCustomLegitimateInterests)},restrictions:r.createRestrictions(s.publisherRestrictions)}}return ct(r)}return _(t,[{key:"createRestrictions",value:function(e){var r={};if(e.numRestrictions>0)for(var s=e.getMaxVendorId(),c=function(){var S=a.toString();e.getRestrictions(a).forEach(function(k){var P=k.purposeId.toString();r[P]||(r[P]={}),r[P][S]=k.restrictionType})},a=1;a<=s;a++)c();return r}},{key:"createVectorField",value:function(e,r){return r?r.reduce(function(s,c){return s[String(c)]=e.has(Number(c)),s},{}):Ue(e).reduce(function(s,c){return s[c[0].toString(10)]=c[1],s},{})}}]),t}(De),bt=function(i){M(t,i);var o=G(t);function t(n){var e;return A(this,t),e=o.call(this,n),delete e.outOfBand,e}return _(t,[{key:"createVectorField",value:function(e){return Ue(e).reduce(function(r,s){return r+=s[1]?"1":"0",r},"")}},{key:"createRestrictions",value:function(e){var r={};if(e.numRestrictions>0){var s=e.getMaxVendorId();e.getRestrictions().forEach(function(b){r[b.purposeId.toString()]="_".repeat(s)});for(var c=function(S){var k=S+1;e.getRestrictions(k).forEach(function(P){var V=P.restrictionType.toString(),z=P.purposeId.toString(),le=r[z].substr(0,S),Le=r[z].substr(S+1);r[z]=le+V+Le})},a=0;a<s;a++)c(a)}return r}}]),t}($e),Et=function(i){M(t,i);var o=G(t);function t(){var n;return A(this,t),n=o.call(this),u(y(n),"cmpLoaded",!0),u(y(n),"cmpStatus",E.cmpStatus),u(y(n),"displayStatus",E.displayStatus),u(y(n),"apiVersion",String(E.apiVersion)),u(y(n),"gvlVersion",void 0),E.tcModel&&E.tcModel.vendorListVersion&&(n.gvlVersion=+E.tcModel.vendorListVersion),n}return _(t)}(De),wt=function(i){M(t,i);var o=G(t);function t(){return A(this,t),o.apply(this,arguments)}return _(t,[{key:"respond",value:function(){this.invokeCallback(new Et)}}]),t}(Ve),It=function(i){M(t,i);var o=G(t);function t(){return A(this,t),o.apply(this,arguments)}return _(t,[{key:"respond",value:function(){this.throwIfParamInvalid(),this.invokeCallback(new bt(this.param))}}]),t}(ke),St=function(i){M(t,i);var o=G(t);function t(){return A(this,t),o.apply(this,arguments)}return _(t,[{key:"respond",value:function(){var e=this,r=E.tcModel,s=r.vendorListVersion,c;this.param===void 0&&(this.param=s),this.param===s&&r.gvl?c=r.gvl:c=new W(this.param),c.readyPromise.then(function(){e.invokeCallback(c.getJson())})}}]),t}(Ve),Ct=function(i){M(t,i);var o=G(t);function t(){return A(this,t),o.apply(this,arguments)}return _(t,[{key:"respond",value:function(){this.listenerId=E.eventQueue.add({callback:this.callback,param:this.param,next:this.next}),Pe(ge(t.prototype),"respond",this).call(this)}}]),t}(ke),Lt=function(i){M(t,i);var o=G(t);function t(){return A(this,t),o.apply(this,arguments)}return _(t,[{key:"respond",value:function(){this.invokeCallback(E.eventQueue.remove(this.param))}}]),t}(Ve),Xe,Ze,et,tt,nt,rt,ne=_(function i(){A(this,i)});Xe=x.PING,Ze=x.GET_TC_DATA,et=x.GET_IN_APP_TC_DATA,tt=x.GET_VENDOR_LIST,nt=x.ADD_EVENT_LISTENER,rt=x.REMOVE_EVENT_LISTENER,p(ne,Xe,wt),p(ne,Ze,ke),p(ne,et,It),p(ne,tt,St),p(ne,nt,Ct),p(ne,rt,Lt);var it=function(){function i(){A(this,i)}return _(i,null,[{key:"has",value:function(t){return typeof t=="string"&&(t=Number(t)),this.set_.has(t)}}]),i}();p(it,"set_",new Set([0,2,void 0,null]));var Fe="__tcfapi",_t=function(){function i(o){if(A(this,i),u(this,"callQueue",void 0),u(this,"customCommands",void 0),o){var t=x.ADD_EVENT_LISTENER;if(o!=null&&o[t])throw new Error("Built-In Custom Commmand for ".concat(t," not allowed: Use ").concat(x.GET_TC_DATA," instead"));if(t=x.REMOVE_EVENT_LISTENER,o!=null&&o[t])throw new Error("Built-In Custom Commmand for ".concat(t," not allowed"));o!=null&&o[x.GET_TC_DATA]&&(o[x.ADD_EVENT_LISTENER]=o[x.GET_TC_DATA],o[x.REMOVE_EVENT_LISTENER]=o[x.GET_TC_DATA]),this.customCommands=o}try{this.callQueue=window[Fe]()||[]}catch(n){this.callQueue=[]}finally{window[Fe]=this.apiCall.bind(this),this.purgeQueuedCalls()}}return _(i,[{key:"apiCall",value:function(t,n,e){if(typeof t!="string")e(null,!1);else if(!it.has(n))e(null,!1);else{var r;if(typeof e!="function")throw new Error("invalid callback function");for(var s=arguments.length,c=new Array(s>3?s-3:0),a=3;a<s;a++)c[a-3]=arguments[a];E.disabled?e(new yt,!1):!this.isCustomCommand(t)&&!this.isBuiltInCommand(t)?e(null,!1):this.isCustomCommand(t)&&!this.isBuiltInCommand(t)?(r=this.customCommands)[t].apply(r,[e].concat(c)):t===x.PING?this.isCustomCommand(t)?new ne[t](this.customCommands[t],c[0],null,e):new ne[t](e,c[0]):E.tcModel===void 0?this.callQueue.push([t,n,e].concat(c)):this.isCustomCommand(t)&&this.isBuiltInCommand(t)?new ne[t](this.customCommands[t],c[0],null,e):new ne[t](e,c[0])}}},{key:"purgeQueuedCalls",value:function(){var t=this.callQueue;this.callQueue=[],t.forEach(function(n){var e;(e=window)[Fe].apply(e,Ue(n))})}},{key:"isCustomCommand",value:function(t){return this.customCommands&&typeof this.customCommands[t]=="function"}},{key:"isBuiltInCommand",value:function(t){return ne[t]!==void 0}}]),i}(),At=function(){function i(o,t){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1,e=arguments.length>3?arguments[3]:void 0;A(this,i),u(this,"callResponder",void 0),u(this,"isServiceSpecific",void 0),u(this,"numUpdates",0),this.throwIfInvalidInt(o,"cmpId",2),this.throwIfInvalidInt(t,"cmpVersion",0),E.cmpId=o,E.cmpVersion=t,E.tcfPolicyVersion=4,this.isServiceSpecific=!!n,this.callResponder=new _t(e)}return _(i,[{key:"throwIfInvalidInt",value:function(t,n,e){if(!(typeof t=="number"&&Number.isInteger(t)&&t>=e))throw new Error("Invalid ".concat(n,": ").concat(t))}},{key:"update",value:function(t){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;if(E.disabled)throw new Error("CmpApi Disabled");E.cmpStatus=pe.LOADED,n?(E.displayStatus=he.VISIBLE,E.eventStatus=Ce.CMP_UI_SHOWN):E.tcModel===void 0?(E.displayStatus=he.DISABLED,E.eventStatus=Ce.TC_LOADED):(E.displayStatus=he.HIDDEN,E.eventStatus=Ce.USER_ACTION_COMPLETE),E.gdprApplies=t!==null,E.gdprApplies?(t===""?(E.tcModel=new Oe,E.tcModel.cmpId=E.cmpId,E.tcModel.cmpVersion=E.cmpVersion):E.tcModel=qe.decode(t),E.tcModel.isServiceSpecific=this.isServiceSpecific,E.tcfPolicyVersion=Number(E.tcModel.policyVersion),E.tcString=t):E.tcModel=null,this.numUpdates===0?this.callResponder.purgeQueuedCalls():E.eventQueue.exec(),this.numUpdates++}},{key:"disable",value:function(){E.disabled=!0,E.cmpStatus=pe.ERROR}}]),i}(),Ot=function(){function i(){A(this,i)}return _(i,[{key:"receiveMessage",value:function(t){var n=typeof t.data=="string",e={};try{n?e=JSON.parse(t.data):e=t.data}catch(S){}if(e&&e.__tcfapiCall){var r=e.__tcfapiCall.callId,s=e.__tcfapiCall.command,c=e.__tcfapiCall.parameter,a=e.__tcfapiCall.version,b=function(k,P){var V={__tcfapiReturn:{returnValue:k,success:P,callId:r,command:s}};t&&t.source&&t.source.postMessage&&t.source.postMessage(n?JSON.stringify(V):V,"*")};window.__tcfapi.apply(window,[s,a,b,c])}else e&&e.hasOwnProperty("OnetrustIABCookies")&&(e.OnetrustIABCookies==="blocked"&&(e.OnetrustIABCookies=null),window.OneTrust.updateConsentFromCookies(e.OnetrustIABCookies))}},{key:"initializeTCF",value:function(){window.removeEventListener("message",window.receiveOTMessage),delete window.receiveOTMessage,(window.attachEvent||window.addEventListener)("message",function(t){return fe.receiveMessage(t)},!1)}},{key:"getGVLObject",value:function(t,n){if(t){var e=t.substr(t.lastIndexOf("/")+1);W.baseUrl=t.replace("/"+e,""),W.latestFilename=e}return new W(n)}},{key:"getTCModelObject",value:function(t){return new Oe(t)}},{key:"getTCStringObject",value:function(){return qe}},{key:"getCmpApi",value:function(t,n,e){var r=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{};return new At(t,n,e,r)}},{key:"getPurposeRestriction",value:function(t,n){return new ue(t,n)}}]),i}(),fe=new Ot;fe.initializeTCF();var Vt={gvl:fe.getGVLObject,tcModel:fe.getTCModelObject,tcString:fe.getTCStringObject,cmpApi:fe.getCmpApi,purposeRestriction:fe.getPurposeRestriction};window.otIabModule=we(Q({},window.otIabModule),{tcfSdkRef:Vt})})();})();
/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */
