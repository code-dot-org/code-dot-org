(function(){function De(){"use strict";De=function(){return c};var c={},h=Object.prototype,O=h.hasOwnProperty,I=Object.defineProperty||function(g,S,d){g[S]=d.value},U=typeof Symbol=="function"?Symbol:{},B=U.iterator||"@@iterator",W=U.asyncIterator||"@@asyncIterator",Y=U.toStringTag||"@@toStringTag";function k(g,S,d){return Object.defineProperty(g,S,{value:d,enumerable:!0,configurable:!0,writable:!0}),g[S]}try{k({},"")}catch(g){k=function(d,N,y){return d[N]=y}}function T(g,S,d,N){var y=S&&S.prototype instanceof ge?S:ge,_=Object.create(y.prototype),A=new we(N||[]);return I(_,"_invoke",{value:je(g,d,A)}),_}function Pe(g,S,d){try{return{type:"normal",arg:g.call(S,d)}}catch(N){return{type:"throw",arg:N}}}c.wrap=T;var z={};function ge(){}function Re(){}function ve(){}var Ge={};k(Ge,B,function(){return this});var Fe=Object.getPrototypeOf,me=Fe&&Fe(Fe(le([])));me&&me!==h&&O.call(me,B)&&(Ge=me);var K=ve.prototype=ge.prototype=Object.create(Ge);function xe(g){["next","throw","return"].forEach(function(S){k(g,S,function(d){return this._invoke(S,d)})})}function Ce(g,S){function d(y,_,A,x){var $=Pe(g[y],g,_);if($.type!=="throw"){var de=$.arg,Q=de.value;return Q&&Ne(Q)=="object"&&O.call(Q,"__await")?S.resolve(Q.__await).then(function(ae){d("next",ae,A,x)},function(ae){d("throw",ae,A,x)}):S.resolve(Q).then(function(ae){de.value=ae,A(de)},function(ae){return d("throw",ae,A,x)})}x($.arg)}var N;I(this,"_invoke",{value:function(_,A){function x(){return new S(function($,de){d(_,A,$,de)})}return N=N?N.then(x,x):x()}})}function je(g,S,d){var N="suspendedStart";return function(y,_){if(N==="executing")throw new Error("Generator is already running");if(N==="completed"){if(y==="throw")throw _;return Ie()}for(d.method=y,d.arg=_;;){var A=d.delegate;if(A){var x=Be(A,d);if(x){if(x===z)continue;return x}}if(d.method==="next")d.sent=d._sent=d.arg;else if(d.method==="throw"){if(N==="suspendedStart")throw N="completed",d.arg;d.dispatchException(d.arg)}else d.method==="return"&&d.abrupt("return",d.arg);N="executing";var $=Pe(g,S,d);if($.type==="normal"){if(N=d.done?"completed":"suspendedYield",$.arg===z)continue;return{value:$.arg,done:d.done}}$.type==="throw"&&(N="completed",d.method="throw",d.arg=$.arg)}}}function Be(g,S){var d=S.method,N=g.iterator[d];if(N===void 0)return S.delegate=null,d==="throw"&&g.iterator.return&&(S.method="return",S.arg=void 0,Be(g,S),S.method==="throw")||d!=="return"&&(S.method="throw",S.arg=new TypeError("The iterator does not provide a '"+d+"' method")),z;var y=Pe(N,g.iterator,S.arg);if(y.type==="throw")return S.method="throw",S.arg=y.arg,S.delegate=null,z;var _=y.arg;return _?_.done?(S[g.resultName]=_.value,S.next=g.nextLoc,S.method!=="return"&&(S.method="next",S.arg=void 0),S.delegate=null,z):_:(S.method="throw",S.arg=new TypeError("iterator result is not an object"),S.delegate=null,z)}function Ye(g){var S={tryLoc:g[0]};1 in g&&(S.catchLoc=g[1]),2 in g&&(S.finallyLoc=g[2],S.afterLoc=g[3]),this.tryEntries.push(S)}function Ve(g){var S=g.completion||{};S.type="normal",delete S.arg,g.completion=S}function we(g){this.tryEntries=[{tryLoc:"root"}],g.forEach(Ye,this),this.reset(!0)}function le(g){if(g){var S=g[B];if(S)return S.call(g);if(typeof g.next=="function")return g;if(!isNaN(g.length)){var d=-1,N=function y(){for(;++d<g.length;)if(O.call(g,d))return y.value=g[d],y.done=!1,y;return y.value=void 0,y.done=!0,y};return N.next=N}}return{next:Ie}}function Ie(){return{value:void 0,done:!0}}return Re.prototype=ve,I(K,"constructor",{value:ve,configurable:!0}),I(ve,"constructor",{value:Re,configurable:!0}),Re.displayName=k(ve,Y,"GeneratorFunction"),c.isGeneratorFunction=function(g){var S=typeof g=="function"&&g.constructor;return!!S&&(S===Re||(S.displayName||S.name)==="GeneratorFunction")},c.mark=function(g){return Object.setPrototypeOf?Object.setPrototypeOf(g,ve):(g.__proto__=ve,k(g,Y,"GeneratorFunction")),g.prototype=Object.create(K),g},c.awrap=function(g){return{__await:g}},xe(Ce.prototype),k(Ce.prototype,W,function(){return this}),c.AsyncIterator=Ce,c.async=function(g,S,d,N,y){y===void 0&&(y=Promise);var _=new Ce(T(g,S,d,N),y);return c.isGeneratorFunction(S)?_:_.next().then(function(A){return A.done?A.value:_.next()})},xe(K),k(K,Y,"Generator"),k(K,B,function(){return this}),k(K,"toString",function(){return"[object Generator]"}),c.keys=function(g){var S=Object(g),d=[];for(var N in S)d.push(N);return d.reverse(),function y(){for(;d.length;){var _=d.pop();if(_ in S)return y.value=_,y.done=!1,y}return y.done=!0,y}},c.values=le,we.prototype={constructor:we,reset:function(S){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(Ve),!S)for(var d in this)d.charAt(0)==="t"&&O.call(this,d)&&!isNaN(+d.slice(1))&&(this[d]=void 0)},stop:function(){this.done=!0;var S=this.tryEntries[0].completion;if(S.type==="throw")throw S.arg;return this.rval},dispatchException:function(S){if(this.done)throw S;var d=this;function N(de,Q){return A.type="throw",A.arg=S,d.next=de,Q&&(d.method="next",d.arg=void 0),!!Q}for(var y=this.tryEntries.length-1;y>=0;--y){var _=this.tryEntries[y],A=_.completion;if(_.tryLoc==="root")return N("end");if(_.tryLoc<=this.prev){var x=O.call(_,"catchLoc"),$=O.call(_,"finallyLoc");if(x&&$){if(this.prev<_.catchLoc)return N(_.catchLoc,!0);if(this.prev<_.finallyLoc)return N(_.finallyLoc)}else if(x){if(this.prev<_.catchLoc)return N(_.catchLoc,!0)}else{if(!$)throw new Error("try statement without catch or finally");if(this.prev<_.finallyLoc)return N(_.finallyLoc)}}}},abrupt:function(S,d){for(var N=this.tryEntries.length-1;N>=0;--N){var y=this.tryEntries[N];if(y.tryLoc<=this.prev&&O.call(y,"finallyLoc")&&this.prev<y.finallyLoc){var _=y;break}}_&&(S==="break"||S==="continue")&&_.tryLoc<=d&&d<=_.finallyLoc&&(_=null);var A=_?_.completion:{};return A.type=S,A.arg=d,_?(this.method="next",this.next=_.finallyLoc,z):this.complete(A)},complete:function(S,d){if(S.type==="throw")throw S.arg;return S.type==="break"||S.type==="continue"?this.next=S.arg:S.type==="return"?(this.rval=this.arg=S.arg,this.method="return",this.next="end"):S.type==="normal"&&d&&(this.next=d),z},finish:function(S){for(var d=this.tryEntries.length-1;d>=0;--d){var N=this.tryEntries[d];if(N.finallyLoc===S)return this.complete(N.completion,N.afterLoc),Ve(N),z}},catch:function(S){for(var d=this.tryEntries.length-1;d>=0;--d){var N=this.tryEntries[d];if(N.tryLoc===S){var y=N.completion;if(y.type==="throw"){var _=y.arg;Ve(N)}return _}}throw new Error("illegal catch attempt")},delegateYield:function(S,d,N){return this.delegate={iterator:le(S),resultName:d,nextLoc:N},this.method==="next"&&(this.arg=void 0),z}},c}function dt(c,h,O,I,U,B,W){try{var Y=c[B](W),k=Y.value}catch(T){O(T);return}Y.done?h(k):Promise.resolve(k).then(I,U)}function tt(c){return function(){var h=this,O=arguments;return new Promise(function(I,U){var B=c.apply(h,O);function W(k){dt(B,I,U,W,Y,"next",k)}function Y(k){dt(B,I,U,W,Y,"throw",k)}W(void 0)})}}function X(){return typeof Reflect!="undefined"&&Reflect.get?X=Reflect.get.bind():X=function(h,O,I){var U=Lt(h,O);if(U){var B=Object.getOwnPropertyDescriptor(U,O);return B.get?B.get.call(arguments.length<3?h:I):B.value}},X.apply(this,arguments)}function Lt(c,h){for(;!Object.prototype.hasOwnProperty.call(c,h)&&(c=j(c),c!==null););return c}function ke(c){var h=typeof Map=="function"?new Map:void 0;return ke=function(I){if(I===null||!kt(I))return I;if(typeof I!="function")throw new TypeError("Super expression must either be null or a function");if(typeof h!="undefined"){if(h.has(I))return h.get(I);h.set(I,U)}function U(){return $e(I,arguments,j(this).constructor)}return U.prototype=Object.create(I.prototype,{constructor:{value:U,enumerable:!1,writable:!0,configurable:!0}}),He(U,I)},ke(c)}function $e(c,h,O){return gt()?$e=Reflect.construct.bind():$e=function(U,B,W){var Y=[null];Y.push.apply(Y,B);var k=Function.bind.apply(U,Y),T=new k;return W&&He(T,W.prototype),T},$e.apply(null,arguments)}function kt(c){return Function.toString.call(c).indexOf("[native code]")!==-1}function ce(c){return Bt(c)||Ft(c)||ft(c)||Gt()}function Gt(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function Ft(c){if(typeof Symbol!="undefined"&&c[Symbol.iterator]!=null||c["@@iterator"]!=null)return Array.from(c)}function Bt(c){if(Array.isArray(c))return nt(c)}function V(c,h){if(typeof h!="function"&&h!==null)throw new TypeError("Super expression must either be null or a function");c.prototype=Object.create(h&&h.prototype,{constructor:{value:c,writable:!0,configurable:!0}}),Object.defineProperty(c,"prototype",{writable:!1}),h&&He(c,h)}function He(c,h){return He=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(I,U){return I.__proto__=U,I},He(c,h)}function w(c){var h=gt();return function(){var I=j(c),U;if(h){var B=j(this).constructor;U=Reflect.construct(I,arguments,B)}else U=I.apply(this,arguments);return Ht(this,U)}}function Ht(c,h){if(h&&(Ne(h)==="object"||typeof h=="function"))return h;if(h!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return q(c)}function q(c){if(c===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return c}function gt(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(c){return!1}}function j(c){return j=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(O){return O.__proto__||Object.getPrototypeOf(O)},j(c)}function Et(c,h){for(var O=0;O<h.length;O++){var I=h[O];I.enumerable=I.enumerable||!1,I.configurable=!0,"value"in I&&(I.writable=!0),Object.defineProperty(c,_t(I.key),I)}}function p(c,h,O){return h&&Et(c.prototype,h),O&&Et(c,O),Object.defineProperty(c,"prototype",{writable:!1}),c}function v(c,h){if(!(c instanceof h))throw new TypeError("Cannot call a class as a function")}function E(c,h,O){return h=_t(h),h in c?Object.defineProperty(c,h,{value:O,enumerable:!0,configurable:!0,writable:!0}):c[h]=O,c}function _t(c){var h=xt(c,"string");return Ne(h)==="symbol"?h:String(h)}function xt(c,h){if(Ne(c)!=="object"||c===null)return c;var O=c[Symbol.toPrimitive];if(O!==void 0){var I=O.call(c,h||"default");if(Ne(I)!=="object")return I;throw new TypeError("@@toPrimitive must return a primitive value.")}return(h==="string"?String:Number)(c)}function Ne(c){return Ne=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(h){return typeof h}:function(h){return h&&typeof Symbol=="function"&&h.constructor===Symbol&&h!==Symbol.prototype?"symbol":typeof h},Ne(c)}function ht(c,h){var O=typeof Symbol!="undefined"&&c[Symbol.iterator]||c["@@iterator"];if(!O){if(Array.isArray(c)||(O=ft(c))||h&&c&&typeof c.length=="number"){O&&(c=O);var I=0,U=function(){};return{s:U,n:function(){return I>=c.length?{done:!0}:{done:!1,value:c[I++]}},e:function(T){throw T},f:U}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var B=!0,W=!1,Y;return{s:function(){O=O.call(c)},n:function(){var T=O.next();return B=T.done,T},e:function(T){W=!0,Y=T},f:function(){try{!B&&O.return!=null&&O.return()}finally{if(W)throw Y}}}}function ft(c,h){if(c){if(typeof c=="string")return nt(c,h);var O=Object.prototype.toString.call(c).slice(8,-1);if(O==="Object"&&c.constructor&&(O=c.constructor.name),O==="Map"||O==="Set")return Array.from(c);if(O==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(O))return nt(c,h)}}function nt(c,h){(h==null||h>c.length)&&(h=c.length);for(var O=0,I=new Array(h);O<h;O++)I[O]=c[O];return I}(function(){var c=Object.defineProperty,h=Object.defineProperties,O=Object.getOwnPropertyDescriptors,I=Object.getOwnPropertySymbols,U=Object.prototype.hasOwnProperty,B=Object.prototype.propertyIsEnumerable,W=function(s,e,r){return e in s?c(s,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):s[e]=r},Y=function(s,e){for(var r in e||(e={}))U.call(e,r)&&W(s,r,e[r]);if(I){var n=ht(I(e)),t;try{for(n.s();!(t=n.n()).done;){var r=t.value;B.call(e,r)&&W(s,r,e[r])}}catch(o){n.e(o)}finally{n.f()}}return s},k=function(s,e){return h(s,O(e))},T=function(s,e,r){return W(s,Ne(e)!="symbol"?e+"":e,r),r},Pe=p(function i(s,e,r,n){v(this,i),E(this,"eventName",void 0),E(this,"listenerId",void 0),E(this,"data",void 0),E(this,"pingData",void 0),this.eventName=s,this.listenerId=e,this.data=r,this.pingData=n}),z=p(function i(s){v(this,i),E(this,"gppVersion",void 0),E(this,"cmpStatus",void 0),E(this,"cmpDisplayStatus",void 0),E(this,"signalStatus",void 0),E(this,"supportedAPIs",void 0),E(this,"cmpId",void 0),E(this,"sectionList",void 0),E(this,"applicableSections",void 0),E(this,"gppString",void 0),E(this,"parsedSections",void 0),this.gppVersion=s.gppVersion,this.cmpStatus=s.cmpStatus,this.cmpDisplayStatus=s.cmpDisplayStatus,this.signalStatus=s.signalStatus,this.supportedAPIs=s.supportedAPIs,this.cmpId=s.cmpId,this.sectionList=s.gppModel.getSectionIds(),this.applicableSections=s.applicableSections,this.gppString=s.gppModel.encode(),this.parsedSections=s.gppModel.toObject()}),ge=function(){function i(s,e,r){v(this,i),E(this,"callback",void 0),E(this,"parameter",void 0),E(this,"success",!0),E(this,"cmpApiContext",void 0),this.cmpApiContext=s,Object.assign(this,{callback:e,parameter:r})}return p(i,[{key:"execute",value:function(){try{return this.respond()}catch(e){return this.invokeCallback(null),null}}},{key:"invokeCallback",value:function(e){var r=e!==null;this.callback&&this.callback(e,r)}}]),i}(),Re=function(i){V(e,i);var s=w(e);function e(){return v(this,e),s.apply(this,arguments)}return p(e,[{key:"respond",value:function(){var n=this.cmpApiContext.eventQueue.add({callback:this.callback,parameter:this.parameter}),t=new Pe("listenerRegistered",n,!0,new z(this.cmpApiContext));this.invokeCallback(t)}}]),e}(ge),ve=function(i){V(e,i);var s=w(e);function e(){return v(this,e),s.apply(this,arguments)}return p(e,[{key:"respond",value:function(){var n=new z(this.cmpApiContext);this.invokeCallback(n)}}]),e}(ge),Ge=function(i){V(e,i);var s=w(e);function e(){return v(this,e),s.apply(this,arguments)}return p(e,[{key:"respond",value:function(){if(!this.parameter||this.parameter.length===0)throw new Error("<section>.<field> parameter required");var n=this.parameter.split(".");if(n.length!=2)throw new Error("Field name must be in the format <section>.<fieldName>");var t=n[0],o=n[1],a=this.cmpApiContext.gppModel.getFieldValue(t,o);this.invokeCallback(a)}}]),e}(ge),Fe=function(i){V(e,i);var s=w(e);function e(){return v(this,e),s.apply(this,arguments)}return p(e,[{key:"respond",value:function(){if(!this.parameter||this.parameter.length===0)throw new Error("<section> parameter required");var n=null;this.cmpApiContext.gppModel.hasSection(this.parameter)&&(n=this.cmpApiContext.gppModel.getSection(this.parameter)),this.invokeCallback(n)}}]),e}(ge),me=function(i){V(e,i);var s=w(e);function e(){return v(this,e),s.apply(this,arguments)}return p(e,[{key:"respond",value:function(){if(!this.parameter||this.parameter.length===0)throw new Error("<section>[.version] parameter required");var n=this.cmpApiContext.gppModel.hasSection(this.parameter);this.invokeCallback(n)}}]),e}(ge),K;(function(i){i.ADD_EVENT_LISTENER="addEventListener",i.GET_FIELD="getField",i.GET_SECTION="getSection",i.HAS_SECTION="hasSection",i.PING="ping",i.REMOVE_EVENT_LISTENER="removeEventListener"})(K||(K={}));var xe=function(i){V(e,i);var s=w(e);function e(){return v(this,e),s.apply(this,arguments)}return p(e,[{key:"respond",value:function(){var n=this.parameter,t=this.cmpApiContext.eventQueue.remove(n),o=new Pe("listenerRemoved",n,t,new z(this.cmpApiContext));this.invokeCallback(o)}}]),e}(ge),Ce,je,Be,Ye,Ve,we,le=p(function i(){v(this,i)});Ce=K.ADD_EVENT_LISTENER,je=K.GET_FIELD,Be=K.GET_SECTION,Ye=K.HAS_SECTION,Ve=K.PING,we=K.REMOVE_EVENT_LISTENER,T(le,Ce,Re),T(le,je,Ge),T(le,Be,Fe),T(le,Ye,me),T(le,Ve,ve),T(le,we,xe);var Ie;(function(i){i.STUB="stub",i.LOADING="loading",i.LOADED="loaded",i.ERROR="error"})(Ie||(Ie={}));var g;(function(i){i.VISIBLE="visible",i.HIDDEN="hidden",i.DISABLED="disabled"})(g||(g={}));var S;(function(i){i.GPP_LOADED="gpploaded",i.CMP_UI_SHOWN="cmpuishown",i.USER_ACTION_COMPLETE="useractioncomplete"})(S||(S={}));var d;(function(i){i.NOT_READY="not ready",i.READY="ready"})(d||(d={}));var N=function(){function i(s,e){if(v(this,i),E(this,"callQueue",void 0),E(this,"customCommands",void 0),E(this,"cmpApiContext",void 0),this.cmpApiContext=s,e){var r=K.ADD_EVENT_LISTENER;if(e!=null&&e[r])throw new Error("Built-In Custom Commmand for ".concat(r," not allowed"));if(r=K.REMOVE_EVENT_LISTENER,e!=null&&e[r])throw new Error("Built-In Custom Commmand for ".concat(r," not allowed"));this.customCommands=e}try{this.callQueue=window.__gpp()||[]}catch(n){this.callQueue=[]}finally{window.__gpp=this.apiCall.bind(this),this.purgeQueuedCalls()}}return p(i,[{key:"apiCall",value:function(e,r,n,t){if(typeof e!="string")r(null,!1);else{if(r&&typeof r!="function")throw new Error("invalid callback function");this.isCustomCommand(e)?this.customCommands[e](r,n):this.isBuiltInCommand(e)?new le[e](this.cmpApiContext,r,n).execute():r&&r(null,!1)}}},{key:"purgeQueuedCalls",value:function(){var e=this.callQueue;this.callQueue=[],e.forEach(function(r){var n;(n=window).__gpp.apply(n,ce(r))})}},{key:"isCustomCommand",value:function(e){return this.customCommands&&typeof this.customCommands[e]=="function"}},{key:"isBuiltInCommand",value:function(e){return le[e]!==void 0}}]),i}(),y=function(){function i(s){v(this,i),E(this,"eventQueue",new Map),E(this,"queueNumber",1e3),E(this,"cmpApiContext",void 0),this.cmpApiContext=s;try{for(var e=window.__gpp("events")||[],r=0;r<e.length;r++){var n=e[r];this.eventQueue.set(n.id,{callback:n.callback,parameter:n.parameter})}}catch(t){console.log(t)}}return p(i,[{key:"add",value:function(e){return this.eventQueue.set(this.queueNumber,e),this.queueNumber++}},{key:"get",value:function(e){return this.eventQueue.get(e)}},{key:"remove",value:function(e){return this.eventQueue.delete(e)}},{key:"exec",value:function(e,r){var n=this;this.eventQueue.forEach(function(t,o){var a=new Pe(e,o,r,new z(n.cmpApiContext)),u=!0;t.callback(a,u)})}},{key:"clear",value:function(){this.queueNumber=1e3,this.eventQueue.clear()}},{key:"size",get:function(){return this.eventQueue.size}}]),i}(),_=function(i){V(e,i);var s=w(e);function e(r){var n;return v(this,e),n=s.call(this,r),n.name="DecodingError",n}return p(e)}(ke(Error)),A=function(){function i(){v(this,i)}return p(i,null,[{key:"encode",value:function(e,r){var n=[];if(e>=1)for(n.push(1);e>=n[0]*2;)n.unshift(n[0]*2);for(var t="",o=0;o<n.length;o++){var a=n[o];e>=a?(t+="1",e-=a):t+="0"}for(;t.length<r;)t="0"+t;return t}},{key:"decode",value:function(e){if(!/^[0-1]*$/.test(e))throw new _("Undecodable FixedInteger '"+e+"'");for(var r=0,n=[],t=0;t<e.length;t++)t===0?n[e.length-(t+1)]=1:n[e.length-(t+1)]=n[e.length-t]*2;for(var o=0;o<e.length;o++)e.charAt(o)==="1"&&(r+=n[o]);return r}}]),i}(),x=function(i){V(e,i);var s=w(e);function e(r){var n;return v(this,e),n=s.call(this,r),n.name="EncodingError",n}return p(e)}(ke(Error)),$=function(){function i(){v(this,i)}return p(i,[{key:"encode",value:function(e){if(!/^[0-1]*$/.test(e))throw new x("Unencodable Base64Url '"+e+"'");e=this.pad(e);for(var r="",n=0;n<=e.length-6;){var t=e.substring(n,n+6);try{var o=A.decode(t),a=i.DICT.charAt(o);r+=a,n+=6}catch(u){throw new x("Unencodable Base64Url '"+e+"'")}}return r}},{key:"decode",value:function(e){if(!/^[A-Za-z0-9\-_]*$/.test(e))throw new _("Undecodable Base64URL string");for(var r="",n=0;n<e.length;n++){var t=e.charAt(n),o=i.REVERSE_DICT.get(t),a=A.encode(o,6);r+=a}return r}}]),i}(),de=$;T(de,"DICT","ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_"),T(de,"REVERSE_DICT",new Map([["A",0],["B",1],["C",2],["D",3],["E",4],["F",5],["G",6],["H",7],["I",8],["J",9],["K",10],["L",11],["M",12],["N",13],["O",14],["P",15],["Q",16],["R",17],["S",18],["T",19],["U",20],["V",21],["W",22],["X",23],["Y",24],["Z",25],["a",26],["b",27],["c",28],["d",29],["e",30],["f",31],["g",32],["h",33],["i",34],["j",35],["k",36],["l",37],["m",38],["n",39],["o",40],["p",41],["q",42],["r",43],["s",44],["t",45],["u",46],["v",47],["w",48],["x",49],["y",50],["z",51],["0",52],["1",53],["2",54],["3",55],["4",56],["5",57],["6",58],["7",59],["8",60],["9",61],["-",62],["_",63]]));var Q=function(i){V(e,i);var s=w(e);function e(){return v(this,e),s.apply(this,arguments)}return p(e,[{key:"pad",value:function(n){for(;n.length%8>0;)n+="0";for(;n.length%6>0;)n+="0";return n}}]),e}(de),ae=function(){function i(){v(this,i)}return p(i,null,[{key:"encode",value:function(e){var r=[];if(e>=1&&(r.push(1),e>=2)){r.push(2);for(var n=2;e>=r[n-1]+r[n-2];)r.push(r[n-1]+r[n-2]),n++}for(var t="1",o=r.length-1;o>=0;o--){var a=r[o];e>=a?(t="1"+t,e-=a):t="0"+t}return t}},{key:"decode",value:function(e){if(!/^[0-1]*$/.test(e)||e.length<2||e.indexOf("11")!==e.length-2)throw new _("Undecodable FibonacciInteger '"+e+"'");for(var r=0,n=[],t=0;t<e.length-1;t++)t===0?n.push(1):t===1?n.push(2):n.push(n[t-1]+n[t-2]);for(var o=0;o<e.length-1;o++)e.charAt(o)==="1"&&(r+=n[o]);return r}}]),i}(),Me=function(){function i(){v(this,i)}return p(i,null,[{key:"encode",value:function(e){if(e===!0)return"1";if(e===!1)return"0";throw new x("Unencodable Boolean '"+e+"'")}},{key:"decode",value:function(e){if(e==="1")return!0;if(e==="0")return!1;throw new _("Undecodable Boolean '"+e+"'")}}]),i}(),rt=function(){function i(){v(this,i)}return p(i,null,[{key:"encode",value:function(e){e=e.sort(function(R,pe){return R-pe});for(var r=[],n=0,t=0;t<e.length;){for(var o=t;o<e.length-1&&e[o]+1===e[o+1];)o++;r.push(e.slice(t,o+1)),t=o+1}for(var a=A.encode(r.length,12),u=0;u<r.length;u++)if(r[u].length==1){var P=r[u][0]-n;n=r[u][0],a+="0"+ae.encode(P)}else{var L=r[u][0]-n;n=r[u][0];var Se=r[u][r[u].length-1]-n;n=r[u][r[u].length-1],a+="1"+ae.encode(L)+ae.encode(Se)}return a}},{key:"decode",value:function(e){if(!/^[0-1]*$/.test(e)||e.length<12)throw new _("Undecodable FibonacciIntegerRange '"+e+"'");for(var r=[],n=A.decode(e.substring(0,12)),t=0,o=12,a=0;a<n;a++){var u=Me.decode(e.substring(o,o+1));if(o++,u===!0){var P=e.indexOf("11",o),L=ae.decode(e.substring(o,P+2))+t;t=L,o=P+2,P=e.indexOf("11",o);var Se=ae.decode(e.substring(o,P+2))+t;t=Se,o=P+2;for(var R=L;R<=Se;R++)r.push(R)}else{var pe=e.indexOf("11",o),Te=ae.decode(e.substring(o,pe+2))+t;t=Te,r.push(Te),o=pe+2}}return r}}]),i}(),_e=function(){function i(){v(this,i),E(this,"value",void 0)}return p(i,[{key:"hasValue",value:function(){return this.value!==void 0&&this.value!==null}},{key:"getValue",value:function(){return this.value}},{key:"setValue",value:function(e){this.value=e}}]),i}(),pt=function(i){V(e,i);var s=w(e);function e(r){var n;return v(this,e),n=s.call(this),n.setValue(r),n}return p(e,[{key:"encode",value:function(){return rt.encode(this.value)}},{key:"decode",value:function(n){this.value=rt.decode(n)}},{key:"substring",value:function(n,t){for(var o=A.decode(n.substring(t,t+12)),a=t+12,u=0;u<o;u++)n.charAt(a)==="1"?a=n.indexOf("11",n.indexOf("11",a+1)+2)+2:a=n.indexOf("11",a+1)+2;return n.substring(t,a)}},{key:"getValue",value:function(){return ce(X(j(e.prototype),"getValue",this).call(this))}},{key:"setValue",value:function(n){X(j(e.prototype),"setValue",this).call(this,ce(new Set(n)).sort(function(t,o){return t-o}))}}]),e}(_e),l=function(i){V(e,i);var s=w(e);function e(r,n){var t;return v(this,e),t=s.call(this),E(q(t),"bitStringLength",void 0),t.bitStringLength=r,t.setValue(n),t}return p(e,[{key:"encode",value:function(){return A.encode(this.value,this.bitStringLength)}},{key:"decode",value:function(n){this.value=A.decode(n)}},{key:"substring",value:function(n,t){return n.substring(t,t+this.bitStringLength)}}]),e}(_e),Ae;(function(i){i.ID="Id",i.VERSION="Version",i.SECTION_IDS="SectionIds"})(Ae||(Ae={}));var qe=function(){function i(s,e){v(this,i),E(this,"fields",void 0),E(this,"fieldOrder",void 0),this.fields=s,this.fieldOrder=e}return p(i,[{key:"hasField",value:function(e){return this.fields.has(e)}},{key:"getFieldValue",value:function(e){return this.fields.has(e)?this.fields.get(e).getValue():null}},{key:"setFieldValue",value:function(e,r){if(this.fields.has(e))this.fields.get(e).setValue(r);else throw new Error(e+" not found")}},{key:"getFieldOrder",value:function(){return this.fieldOrder}},{key:"encodeToBitString",value:function(){for(var e="",r=0;r<this.fieldOrder.length;r++){var n=this.fieldOrder[r];if(this.fields.has(n)){var t=this.fields.get(n);e+=t.encode()}else throw new Error("Field not found: '"+n+"'")}return e}},{key:"decodeFromBitString",value:function(e){for(var r=0,n=0;n<this.fieldOrder.length;n++){var t=this.fieldOrder[n];if(this.fields.has(t)){var o=this.fields.get(t),a=o.substring(e,r);o.decode(a),r+=a.length}else throw new Error("Field not found: '"+t+"'")}}},{key:"toObj",value:function(){for(var e={},r=0;r<this.fieldOrder.length;r++){var n=this.fieldOrder[r];if(this.fields.has(n)){var t=this.fields.get(n).getValue();e[n]=t}}return e}}]),i}(),vt=function(i){V(e,i);var s=w(e);function e(r){var n;v(this,e);var t=new Map;t.set(Ae.ID.toString(),new l(6,e.ID)),t.set(Ae.VERSION.toString(),new l(6,e.VERSION)),t.set(Ae.SECTION_IDS.toString(),new pt([]));var o=[Ae.ID.toString(),Ae.VERSION.toString(),Ae.SECTION_IDS.toString()];return n=s.call(this,t,o),E(q(n),"base64UrlEncoder",new Q),r&&r.length>0&&n.decode(r),n}return p(e,[{key:"encode",value:function(){var n=this.encodeToBitString();return this.base64UrlEncoder.encode(n)}},{key:"decode",value:function(n){var t=this.base64UrlEncoder.decode(n);this.decodeFromBitString(t)}},{key:"getId",value:function(){return e.ID}},{key:"getName",value:function(){return e.NAME}}]),e}(qe),ye=vt;T(ye,"ID",3),T(ye,"VERSION",1),T(ye,"NAME","header");var Ee=function(i){V(e,i);var s=w(e);function e(r){var n;return v(this,e),n=s.call(this),n.setValue(r),n}return p(e,[{key:"encode",value:function(){return Me.encode(this.value)}},{key:"decode",value:function(n){this.value=Me.decode(n)}},{key:"substring",value:function(n,t){return n.substring(t,t+1)}}]),e}(_e),it=function(){function i(){v(this,i)}return p(i,null,[{key:"encode",value:function(e){return e?A.encode(Math.round(e.getTime()/100),36):A.encode(0,36)}},{key:"decode",value:function(e){if(!/^[0-1]*$/.test(e)||e.length!==36)throw new _("Undecodable Datetime '"+e+"'");return new Date(A.decode(e)*100)}}]),i}(),We=function(i){V(e,i);var s=w(e);function e(r){var n;return v(this,e),n=s.call(this),n.setValue(r),n}return p(e,[{key:"encode",value:function(){return it.encode(this.value)}},{key:"decode",value:function(n){this.value=it.decode(n)}},{key:"substring",value:function(n,t){return n.substring(t,t+36)}}]),e}(_e),be=function(){function i(){v(this,i)}return p(i,null,[{key:"encode",value:function(e,r){for(var n="",t=0;t<e.length;t++)n+=Me.encode(e[t]);for(;n.length<r;)n+="0";return n}},{key:"decode",value:function(e){if(!/^[0-1]*$/.test(e))throw new _("Undecodable FixedBitfield '"+e+"'");for(var r=[],n=0;n<e.length;n++)r.push(Me.decode(e.substring(n,n+1)));return r}}]),i}(),Ke=function(i){V(e,i);var s=w(e);function e(r,n){var t;return v(this,e),t=s.call(this),E(q(t),"getLength",void 0),t.getLength=r,t.setValue(n),t}return p(e,[{key:"encode",value:function(){return be.encode(this.value,this.getLength())}},{key:"decode",value:function(n){this.value=be.decode(n)}},{key:"substring",value:function(n,t){return n.substring(t,t+this.getLength())}},{key:"getValue",value:function(){return ce(X(j(e.prototype),"getValue",this).call(this))}},{key:"setValue",value:function(n){for(var t=this.getLength(),o=ce(n),a=o.length;a<t;a++)o.push(!1);o.length>t&&(o=o.slice(0,t)),X(j(e.prototype),"setValue",this).call(this,ce(o))}}]),e}(_e),fe=function(i){V(e,i);var s=w(e);function e(r){var n;return v(this,e),n=s.call(this),E(q(n),"numElements",void 0),n.numElements=r.length,n.setValue(r),n}return p(e,[{key:"encode",value:function(){return be.encode(this.value,this.numElements)}},{key:"decode",value:function(n){this.value=be.decode(n)}},{key:"substring",value:function(n,t){return n.substring(t,t+this.numElements)}},{key:"getValue",value:function(){return ce(X(j(e.prototype),"getValue",this).call(this))}},{key:"setValue",value:function(n){for(var t=ce(n),o=t.length;o<this.numElements;o++)t.push(!1);t.length>this.numElements&&(t=t.slice(0,this.numElements)),X(j(e.prototype),"setValue",this).call(this,t)}}]),e}(_e),st=function(){function i(){v(this,i)}return p(i,null,[{key:"encode",value:function(e,r){for(;e.length<r;)e+=" ";for(var n="",t=0;t<e.length;t++){var o=e.charCodeAt(t);if(o===32)n+=A.encode(63,6);else if(o>=65)n+=A.encode(e.charCodeAt(t)-65,6);else throw new x("Unencodable FixedString '"+e+"'")}return n}},{key:"decode",value:function(e){if(!/^[0-1]*$/.test(e)||e.length%6!==0)throw new _("Undecodable FixedString '"+e+"'");for(var r="",n=0;n<e.length;n+=6){var t=A.decode(e.substring(n,n+6));t===63?r+=" ":r+=String.fromCharCode(t+65)}return r.trim()}}]),i}(),ze=function(i){V(e,i);var s=w(e);function e(r,n){var t;return v(this,e),t=s.call(this),E(q(t),"stringLength",void 0),t.stringLength=r,t.setValue(n),t}return p(e,[{key:"encode",value:function(){return st.encode(this.value,this.stringLength)}},{key:"decode",value:function(n){this.value=st.decode(n)}},{key:"substring",value:function(n,t){return n.substring(t,t+this.stringLength*6)}}]),e}(_e),Ue=function(){function i(s,e){v(this,i),E(this,"fields",void 0),E(this,"segments",void 0),this.fields=s,this.segments=e}return p(i,[{key:"hasField",value:function(e){return this.fields.has(e)}},{key:"getFieldValue",value:function(e){return this.fields.has(e)?this.fields.get(e).getValue():null}},{key:"setFieldValue",value:function(e,r){if(this.fields.has(e))this.fields.get(e).setValue(r);else throw new Error(e+" not found")}},{key:"getSegments",value:function(){return this.segments}},{key:"encodeSegmentsToBitStrings",value:function(){for(var e=[],r=0;r<this.segments.length;r++){for(var n="",t=0;t<this.segments[r].length;t++){var o=this.segments[r][t];if(this.fields.has(o))try{var a=this.fields.get(o);n+=a.encode()}catch(u){throw new Error("Unable to encode "+o)}else throw new Error("Field not found: '"+o+"'")}e.push(n)}return e}},{key:"decodeSegmentsFromBitStrings",value:function(e){for(var r=0;r<this.segments.length&&r<e.length;r++){var n=e[r];if(n&&n.length>0)for(var t=0,o=0;o<this.segments[r].length;o++){var a=this.segments[r][o];if(this.fields.has(a))try{var u=this.fields.get(a),P=u.substring(n,t);u.decode(P),t+=P.length}catch(L){throw new Error("Unable to decode "+a)}else throw new Error("Field not found: '"+a+"'")}}}},{key:"toObj",value:function(){for(var e={},r=0;r<this.segments.length;r++)for(var n=0;n<this.segments[r].length;n++){var t=this.segments[r][n];if(this.fields.has(t)){var o=this.fields.get(t).getValue();e[t]=o}}return e}}]),i}(),Qe=function(){function i(){v(this,i)}return p(i,null,[{key:"encode",value:function(e){e.sort(function(u,P){return u-P});for(var r=[],n=0;n<e.length;){for(var t=n;t<e.length-1&&e[t]+1===e[t+1];)t++;r.push(e.slice(n,t+1)),n=t+1}for(var o=A.encode(r.length,12),a=0;a<r.length;a++)r[a].length===1?o+="0"+A.encode(r[a][0],16):o+="1"+A.encode(r[a][0],16)+A.encode(r[a][r[a].length-1],16);return o}},{key:"decode",value:function(e){if(!/^[0-1]*$/.test(e)||e.length<12)throw new _("Undecodable FixedIntegerRange '"+e+"'");for(var r=[],n=A.decode(e.substring(0,12)),t=12,o=0;o<n;o++){var a=Me.decode(e.substring(t,t+1));if(t++,a===!0){var u=A.decode(e.substring(t,t+16));t+=16;var P=A.decode(e.substring(t,t+16));t+=16;for(var L=u;L<=P;L++)r.push(L)}else{var Se=A.decode(e.substring(t,t+16));r.push(Se),t+=16}}return r}}]),i}(),ot=function(i){V(e,i);var s=w(e);function e(r){var n;return v(this,e),n=s.call(this),n.setValue(r),n}return p(e,[{key:"encode",value:function(){return Qe.encode(this.value)}},{key:"decode",value:function(n){this.value=Qe.decode(n)}},{key:"substring",value:function(n,t){for(var o=A.decode(n.substring(t,t+12)),a=t+12,u=0;u<o;u++)n.charAt(a)==="1"?a+=33:a+=17;return n.substring(t,a)}},{key:"getValue",value:function(){return ce(X(j(e.prototype),"getValue",this).call(this))}},{key:"setValue",value:function(n){X(j(e.prototype),"setValue",this).call(this,ce(new Set(n)).sort(function(t,o){return t-o}))}}]),e}(_e),Le=function(i){V(e,i);var s=w(e);function e(r){var n;return v(this,e),n=s.call(this),n.setValue(r),n}return p(e,[{key:"encode",value:function(){var n=this.value.length>0?this.value[this.value.length-1]:0,t=Qe.encode(this.value),o=t.length,a=n;if(o<=a)return A.encode(n,16)+"1"+t;{for(var u=[],P=0,L=0;L<n;L++)L===this.value[P]-1?(u[L]=!0,P++):u[L]=!1;return A.encode(n,16)+"0"+be.encode(u,a)}}},{key:"decode",value:function(n){if(n.charAt(16)==="1")this.value=Qe.decode(n.substring(17));else{for(var t=[],o=be.decode(n.substring(17)),a=0;a<o.length;a++)o[a]===!0&&t.push(a+1);this.value=t}}},{key:"substring",value:function(n,t){var o=A.decode(n.substring(t,t+16));return n.charAt(t+16)==="1"?n.substring(t,t+17)+new ot([]).substring(n,t+17):n.substring(t,t+17+o)}},{key:"getValue",value:function(){return ce(X(j(e.prototype),"getValue",this).call(this))}},{key:"setValue",value:function(n){X(j(e.prototype),"setValue",this).call(this,ce(new Set(n)).sort(function(t,o){return t-o}))}}]),e}(_e),f;(function(i){i.VERSION="Version",i.CREATED="Created",i.LAST_UPDATED="LastUpdated",i.CMP_ID="CmpId",i.CMP_VERSION="CmpVersion",i.CONSENT_SCREEN="ConsentScreen",i.CONSENT_LANGUAGE="ConsentLanguage",i.VENDOR_LIST_VERSION="VendorListVersion",i.POLICY_VERSION="PolicyVersion",i.IS_SERVICE_SPECIFIC="IsServiceSpecific",i.USE_NON_STANDARD_STACKS="UseNonStandardStacks",i.SPECIAL_FEATURE_OPTINS="SpecialFeatureOptins",i.PURPOSE_CONSENTS="PurposeConsents",i.PURPOSE_LEGITIMATE_INTERESTS="PurposeLegitimateInterests",i.PURPOSE_ONE_TREATMENT="PurposeOneTreatment",i.PUBLISHER_COUNTRY_CODE="PublisherCountryCode",i.VENDOR_CONSENTS="VendorConsents",i.VENDOR_LEGITIMATE_INTERESTS="VendorLegitimateInterests",i.PUBLISHER_RESTRICTIONS="PublisherRestrictions",i.PUBLISHER_PURPOSES_SEGMENT_TYPE="PublisherPurposesSegmentType",i.PUBLISHER_CONSENTS="PublisherConsents",i.PUBLISHER_LEGITIMATE_INTERESTS="PublisherLegitimateInterests",i.NUM_CUSTOM_PURPOSES="NumCustomPurposes",i.PUBLISHER_CUSTOM_CONSENTS="PublisherCustomConsents",i.PUBLISHER_CUSTOM_LEGITIMATE_INTERESTS="PublisherCustomLegitimateInterests",i.VENDORS_ALLOWED_SEGMENT_TYPE="VendorsAllowedSegmentType",i.VENDORS_ALLOWED="VendorsAllowed",i.VENDORS_DISCLOSED_SEGMENT_TYPE="VendorsDisclosedSegmentType",i.VENDORS_DISCLOSED="VendorsDisclosed"})(f||(f={}));var Ot=function(i){V(e,i);var s=w(e);function e(){return v(this,e),s.apply(this,arguments)}return p(e,[{key:"pad",value:function(n){for(;n.length%24>0;)n+="0";return n}}]),e}(de),Tt=function(i){V(e,i);var s=w(e);function e(r){var n;v(this,e);var t=new Map,o=new Date;t.set(f.VERSION.toString(),new l(6,e.VERSION)),t.set(f.CREATED.toString(),new We(o)),t.set(f.LAST_UPDATED.toString(),new We(o)),t.set(f.CMP_ID.toString(),new l(12,0)),t.set(f.CMP_VERSION.toString(),new l(12,0)),t.set(f.CONSENT_SCREEN.toString(),new l(6,0)),t.set(f.CONSENT_LANGUAGE.toString(),new ze(2,"EN")),t.set(f.VENDOR_LIST_VERSION.toString(),new l(12,0)),t.set(f.POLICY_VERSION.toString(),new l(6,2)),t.set(f.IS_SERVICE_SPECIFIC.toString(),new Ee(!1)),t.set(f.USE_NON_STANDARD_STACKS.toString(),new Ee(!1)),t.set(f.SPECIAL_FEATURE_OPTINS.toString(),new fe([!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1])),t.set(f.PURPOSE_CONSENTS.toString(),new fe([!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1])),t.set(f.PURPOSE_LEGITIMATE_INTERESTS.toString(),new fe([!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1])),t.set(f.PURPOSE_ONE_TREATMENT.toString(),new Ee(!1)),t.set(f.PUBLISHER_COUNTRY_CODE.toString(),new ze(2,"AA")),t.set(f.VENDOR_CONSENTS.toString(),new Le([])),t.set(f.VENDOR_LEGITIMATE_INTERESTS.toString(),new Le([])),t.set(f.PUBLISHER_RESTRICTIONS.toString(),new ot([])),t.set(f.PUBLISHER_PURPOSES_SEGMENT_TYPE.toString(),new l(3,3)),t.set(f.PUBLISHER_CONSENTS.toString(),new fe([!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1])),t.set(f.PUBLISHER_LEGITIMATE_INTERESTS.toString(),new fe([!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1]));var a=new l(6,0);t.set(f.NUM_CUSTOM_PURPOSES.toString(),a),t.set(f.PUBLISHER_CUSTOM_CONSENTS.toString(),new Ke(function(){return a.getValue()},[])),t.set(f.PUBLISHER_CUSTOM_LEGITIMATE_INTERESTS.toString(),new Ke(function(){return a.getValue()},[])),t.set(f.VENDORS_ALLOWED_SEGMENT_TYPE.toString(),new l(3,2)),t.set(f.VENDORS_ALLOWED.toString(),new Le([])),t.set(f.VENDORS_DISCLOSED_SEGMENT_TYPE.toString(),new l(3,1)),t.set(f.VENDORS_DISCLOSED.toString(),new Le([]));var u=[f.VERSION.toString(),f.CREATED.toString(),f.LAST_UPDATED.toString(),f.CMP_ID.toString(),f.CMP_VERSION.toString(),f.CONSENT_SCREEN.toString(),f.CONSENT_LANGUAGE.toString(),f.VENDOR_LIST_VERSION.toString(),f.POLICY_VERSION.toString(),f.IS_SERVICE_SPECIFIC.toString(),f.USE_NON_STANDARD_STACKS.toString(),f.SPECIAL_FEATURE_OPTINS.toString(),f.PURPOSE_CONSENTS.toString(),f.PURPOSE_LEGITIMATE_INTERESTS.toString(),f.PURPOSE_ONE_TREATMENT.toString(),f.PUBLISHER_COUNTRY_CODE.toString(),f.VENDOR_CONSENTS.toString(),f.VENDOR_LEGITIMATE_INTERESTS.toString(),f.PUBLISHER_RESTRICTIONS.toString()],P=[f.PUBLISHER_PURPOSES_SEGMENT_TYPE.toString(),f.PUBLISHER_CONSENTS.toString(),f.PUBLISHER_LEGITIMATE_INTERESTS.toString(),f.NUM_CUSTOM_PURPOSES.toString(),f.PUBLISHER_CUSTOM_CONSENTS.toString(),f.PUBLISHER_CUSTOM_LEGITIMATE_INTERESTS.toString()],L=[f.VENDORS_ALLOWED_SEGMENT_TYPE.toString(),f.VENDORS_ALLOWED.toString()],Se=[f.VENDORS_DISCLOSED_SEGMENT_TYPE.toString(),f.VENDORS_DISCLOSED.toString()],R=[u,P,L,Se];return n=s.call(this,t,R),E(q(n),"base64UrlEncoder",new Ot),r&&r.length>0&&n.decode(r),n}return p(e,[{key:"encode",value:function(){var n=this.encodeSegmentsToBitStrings(),t=[];return t.push(this.base64UrlEncoder.encode(n[0])),this.getFieldValue(f.IS_SERVICE_SPECIFIC.toString())?n[1]&&n[1].length>0&&t.push(this.base64UrlEncoder.encode(n[1])):(n[2]&&n[2].length>0&&t.push(this.base64UrlEncoder.encode(n[2])),n[3]&&n[3].length>0&&t.push(this.base64UrlEncoder.encode(n[3]))),t.join(".")}},{key:"decode",value:function(n){for(var t=n.split("."),o=[],a=0;a<t.length;a++){var u=this.base64UrlEncoder.decode(t[a]);switch(u.substring(0,3)){case"000":{o[0]=u;break}case"001":{o[3]=u;break}case"010":{o[2]=u;break}case"011":{o[1]=u;break}default:throw new _("Unable to decode segment '"+t[a]+"'")}}this.decodeSegmentsFromBitStrings(o)}},{key:"setFieldValue",value:function(n,t){if(X(j(e.prototype),"setFieldValue",this).call(this,n,t),n!==f.CREATED.toString()&&n!==f.LAST_UPDATED.toString()){var o=new Date,a=new Date(Date.UTC(o.getUTCFullYear(),o.getUTCMonth(),o.getUTCDate()));this.setFieldValue(f.CREATED.toString(),a),this.setFieldValue(f.LAST_UPDATED.toString(),a)}}},{key:"getId",value:function(){return e.ID}},{key:"getName",value:function(){return e.NAME}}]),e}(Ue),J=Tt;T(J,"ID",2),T(J,"VERSION",2),T(J,"NAME","tcfeuv2");var C;(function(i){i.VERSION="Version",i.CREATED="Created",i.LAST_UPDATED="LastUpdated",i.CMP_ID="CmpId",i.CMP_VERSION="CmpVersion",i.CONSENT_SCREEN="ConsentScreen",i.CONSENT_LANGUAGE="ConsentLanguage",i.VENDOR_LIST_VERSION="VendorListVersion",i.TCF_POLICY_VERSION="TcfPolicyVersion",i.USE_NON_STANDARD_STACKS="UseNonStandardStacks",i.SPECIAL_FEATURE_EXPRESS_CONSENT="SpecialFeatureExpressConsent",i.PURPOSES_EXPRESS_CONSENT="PurposesExpressConsent",i.PURPOSES_IMPLIED_CONSENT="PurposesImpliedConsent",i.VENDOR_EXPRESS_CONSENT="VendorExpressConsent",i.VENDOR_IMPLIED_CONSENT="VendorImpliedConsent",i.SEGMENT_TYPE="SegmentType",i.PUB_PURPOSES_EXPRESS_CONSENT="PubPurposesExpressConsent",i.PUB_PURPOSES_IMPLIED_CONSENT="PubPurposesImpliedConsent",i.NUM_CUSTOM_PURPOSES="NumCustomPurposes",i.CUSTOM_PURPOSES_EXPRESS_CONSENT="CustomPurposesExpressConsent",i.CUSTOM_PURPOSES_IMPLIED_CONSENT="CustomPurposesImpliedConsent"})(C||(C={}));var Nt=function(i){V(e,i);var s=w(e);function e(r){var n;v(this,e);var t=new Map,o=new Date;t.set(C.VERSION.toString(),new l(6,e.VERSION)),t.set(C.CREATED.toString(),new We(o)),t.set(C.LAST_UPDATED.toString(),new We(o)),t.set(C.CMP_ID.toString(),new l(12,0)),t.set(C.CMP_VERSION.toString(),new l(12,0)),t.set(C.CONSENT_SCREEN.toString(),new l(6,0)),t.set(C.CONSENT_LANGUAGE.toString(),new ze(2,"EN")),t.set(C.VENDOR_LIST_VERSION.toString(),new l(12,0)),t.set(C.TCF_POLICY_VERSION.toString(),new l(6,1)),t.set(C.USE_NON_STANDARD_STACKS.toString(),new Ee(!1)),t.set(C.SPECIAL_FEATURE_EXPRESS_CONSENT.toString(),new fe([!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1])),t.set(C.PURPOSES_EXPRESS_CONSENT.toString(),new fe([!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1])),t.set(C.PURPOSES_IMPLIED_CONSENT.toString(),new fe([!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1])),t.set(C.VENDOR_EXPRESS_CONSENT.toString(),new Le([])),t.set(C.VENDOR_IMPLIED_CONSENT.toString(),new Le([])),t.set(C.SEGMENT_TYPE.toString(),new l(3,3)),t.set(C.PUB_PURPOSES_EXPRESS_CONSENT.toString(),new fe([!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1])),t.set(C.PUB_PURPOSES_IMPLIED_CONSENT.toString(),new fe([!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1]));var a=new l(6,0);t.set(C.NUM_CUSTOM_PURPOSES.toString(),a),t.set(C.CUSTOM_PURPOSES_EXPRESS_CONSENT.toString(),new Ke(function(){return a.getValue()},[])),t.set(C.CUSTOM_PURPOSES_IMPLIED_CONSENT.toString(),new Ke(function(){return a.getValue()},[]));var u=[C.VERSION.toString(),C.CREATED.toString(),C.LAST_UPDATED.toString(),C.CMP_ID.toString(),C.CMP_VERSION.toString(),C.CONSENT_SCREEN.toString(),C.CONSENT_LANGUAGE.toString(),C.VENDOR_LIST_VERSION.toString(),C.TCF_POLICY_VERSION.toString(),C.USE_NON_STANDARD_STACKS.toString(),C.SPECIAL_FEATURE_EXPRESS_CONSENT.toString(),C.PURPOSES_EXPRESS_CONSENT.toString(),C.PURPOSES_IMPLIED_CONSENT.toString(),C.VENDOR_EXPRESS_CONSENT.toString(),C.VENDOR_IMPLIED_CONSENT.toString()],P=[C.SEGMENT_TYPE.toString(),C.PUB_PURPOSES_EXPRESS_CONSENT.toString(),C.PUB_PURPOSES_IMPLIED_CONSENT.toString(),C.NUM_CUSTOM_PURPOSES.toString(),C.CUSTOM_PURPOSES_EXPRESS_CONSENT.toString(),C.CUSTOM_PURPOSES_IMPLIED_CONSENT.toString()],L=[u,P];return n=s.call(this,t,L),E(q(n),"base64UrlEncoder",new Q),r&&r.length>0&&n.decode(r),n}return p(e,[{key:"encode",value:function(){var n=this.encodeSegmentsToBitStrings(),t=[];return t.push(this.base64UrlEncoder.encode(n[0])),n[1]&&n[1].length>0&&t.push(this.base64UrlEncoder.encode(n[1])),t.join(".")}},{key:"decode",value:function(n){for(var t=n.split("."),o=[],a=0;a<t.length;a++){var u=this.base64UrlEncoder.decode(t[a]);switch(u.substring(0,3)){case"000":{o[0]=u;break}case"011":{o[1]=u;break}default:throw new _("Unable to decode segment '"+t[a]+"'")}}this.decodeSegmentsFromBitStrings(o)}},{key:"setFieldValue",value:function(n,t){if(X(j(e.prototype),"setFieldValue",this).call(this,n,t),n!==C.CREATED.toString()&&n!==C.LAST_UPDATED.toString()){var o=new Date,a=new Date(Date.UTC(o.getUTCFullYear(),o.getUTCMonth(),o.getUTCDate()));this.setFieldValue(C.CREATED.toString(),a),this.setFieldValue(C.LAST_UPDATED.toString(),a)}}},{key:"getId",value:function(){return e.ID}},{key:"getName",value:function(){return e.NAME}}]),e}(Ue),Z=Nt;T(Z,"ID",5),T(Z,"VERSION",2),T(Z,"NAME","tcfcav1");var at=function(i){V(e,i);var s=w(e);function e(r){var n;return v(this,e),n=s.call(this,r),n.name="InvalidFieldError",n}return p(e)}(ke(Error)),ue;(function(i){i.VERSION="Version",i.NOTICE="Notice",i.OPT_OUT_SALE="OptOutSale",i.LSPA_COVERED="LspaCovered"})(ue||(ue={}));var It=function(){function i(s){v(this,i),E(this,"fields",void 0),this.fields=new Map,this.fields.set(ue.VERSION.toString(),i.VERSION),this.fields.set(ue.NOTICE.toString(),"-"),this.fields.set(ue.OPT_OUT_SALE.toString(),"-"),this.fields.set(ue.LSPA_COVERED.toString(),"-"),s&&s.length>0&&this.decode(s)}return p(i,[{key:"hasField",value:function(e){return this.fields.has(e)}},{key:"getFieldValue",value:function(e){return this.fields.has(e)?this.fields.get(e):null}},{key:"setFieldValue",value:function(e,r){if(this.fields.has(e))this.fields.set(e,r);else throw new at(e+" not found")}},{key:"toObj",value:function(){var e={},r=ht(this.fields.keys()),n;try{for(r.s();!(n=r.n()).done;){var t=n.value,o=this.fields.get(t);e[t.toString()]=o}}catch(a){r.e(a)}finally{r.f()}return e}},{key:"encode",value:function(){var e="";return e+=this.getFieldValue(ue.VERSION.toString()),e+=this.getFieldValue(ue.NOTICE.toString()),e+=this.getFieldValue(ue.OPT_OUT_SALE.toString()),e+=this.getFieldValue(ue.LSPA_COVERED.toString()),e}},{key:"decode",value:function(e){this.setFieldValue(ue.VERSION.toString(),parseInt(e.charAt(0))),this.setFieldValue(ue.NOTICE.toString(),e.charAt(1)),this.setFieldValue(ue.OPT_OUT_SALE.toString(),e.charAt(2)),this.setFieldValue(ue.LSPA_COVERED.toString(),e.charAt(3))}},{key:"getId",value:function(){return i.ID}},{key:"getName",value:function(){return i.NAME}}]),i}(),ee=It;T(ee,"ID",6),T(ee,"VERSION",1),T(ee,"NAME","uspv1");var ut=function(){function i(){v(this,i)}return p(i,null,[{key:"encode",value:function(e,r,n){for(var t="",o=0;o<e.length;o++)t+=A.encode(e[o],r);for(;t.length<r*n;)t+="0";return t}},{key:"decode",value:function(e,r,n){if(!/^[0-1]*$/.test(e))throw new _("Undecodable FixedInteger '"+e+"'");if(e.length>r*n)throw new _("Undecodable FixedIntegerList '"+e+"'");if(e.length%r!=0)throw new _("Undecodable FixedIntegerList '"+e+"'");for(;e.length<r*n;)e+="0";e.length>r*n&&(e=e.substring(0,r*n));for(var t=[],o=0;o<e.length;o+=r)t.push(A.decode(e.substring(o,o+r)));for(;t.length<n;)t.push(0);return t}}]),i}(),Oe=function(i){V(e,i);var s=w(e);function e(r,n){var t;return v(this,e),t=s.call(this),E(q(t),"elementBitStringLength",void 0),E(q(t),"numElements",void 0),t.elementBitStringLength=r,t.numElements=n.length,t.setValue(n),t}return p(e,[{key:"encode",value:function(){return ut.encode(this.value,this.elementBitStringLength,this.numElements)}},{key:"decode",value:function(n){this.value=ut.decode(n,this.elementBitStringLength,this.numElements)}},{key:"substring",value:function(n,t){return n.substring(t,t+this.elementBitStringLength*this.numElements)}},{key:"getValue",value:function(){return ce(X(j(e.prototype),"getValue",this).call(this))}},{key:"setValue",value:function(n){for(var t=ce(n),o=t.length;o<this.numElements;o++)t.push(0);t.length>this.numElements&&(t=t.slice(0,this.numElements)),X(j(e.prototype),"setValue",this).call(this,t)}}]),e}(_e),D;(function(i){i.VERSION="Version",i.SHARING_NOTICE="SharingNotice",i.SALE_OPT_OUT_NOTICE="SaleOptOutNotice",i.SHARING_OPT_OUT_NOTICE="SharingOptOutNotice",i.TARGETED_ADVERTISING_OPT_OUT_NOTICE="TargetedAdvertisingOptOutNotice",i.SENSITIVE_DATA_PROCESSING_OPT_OUT_NOTICE="SensitiveDataProcessingOptOutNotice",i.SENSITIVE_DATA_LIMIT_USE_NOTICE="SensitiveDataLimitUseNotice",i.SALE_OPT_OUT="SaleOptOut",i.SHARING_OPT_OUT="SharingOptOut",i.TARGETED_ADVERTISING_OPT_OUT="TargetedAdvertisingOptOut",i.SENSITIVE_DATA_PROCESSING="SensitiveDataProcessing",i.KNOWN_CHILD_SENSITIVE_DATA_CONSENTS="KnownChildSensitiveDataConsents",i.PERSONAL_DATA_CONSENTS="PersonalDataConsents",i.MSPA_COVERED_TRANSACTION="MspaCoveredTransaction",i.MSPA_OPT_OUT_OPTION_MODE="MspaOptOutOptionMode",i.MSPA_SERVICE_PROVIDER_MODE="MspaServiceProviderMode",i.GPC_SEGMENT_TYPE="GpcSegmentType",i.GPC_SEGMENT_INCLUDED="GpcSegmentIncluded",i.GPC="Gpc"})(D||(D={}));var At=function(i){V(e,i);var s=w(e);function e(r){var n;v(this,e);var t=new Map;t.set(D.VERSION.toString(),new l(6,e.VERSION)),t.set(D.SHARING_NOTICE.toString(),new l(2,0)),t.set(D.SALE_OPT_OUT_NOTICE.toString(),new l(2,0)),t.set(D.SHARING_OPT_OUT_NOTICE.toString(),new l(2,0)),t.set(D.TARGETED_ADVERTISING_OPT_OUT_NOTICE.toString(),new l(2,0)),t.set(D.SENSITIVE_DATA_PROCESSING_OPT_OUT_NOTICE.toString(),new l(2,0)),t.set(D.SENSITIVE_DATA_LIMIT_USE_NOTICE.toString(),new l(2,0)),t.set(D.SALE_OPT_OUT.toString(),new l(2,0)),t.set(D.SHARING_OPT_OUT.toString(),new l(2,0)),t.set(D.TARGETED_ADVERTISING_OPT_OUT.toString(),new l(2,0)),t.set(D.SENSITIVE_DATA_PROCESSING.toString(),new Oe(2,[0,0,0,0,0,0,0,0,0,0,0,0])),t.set(D.KNOWN_CHILD_SENSITIVE_DATA_CONSENTS.toString(),new Oe(2,[0,0])),t.set(D.PERSONAL_DATA_CONSENTS.toString(),new l(2,0)),t.set(D.MSPA_COVERED_TRANSACTION.toString(),new l(2,0)),t.set(D.MSPA_OPT_OUT_OPTION_MODE.toString(),new l(2,0)),t.set(D.MSPA_SERVICE_PROVIDER_MODE.toString(),new l(2,0)),t.set(D.GPC_SEGMENT_TYPE.toString(),new l(2,1)),t.set(D.GPC_SEGMENT_INCLUDED.toString(),new Ee(!0)),t.set(D.GPC.toString(),new Ee(!1));var o=[D.VERSION.toString(),D.SHARING_NOTICE.toString(),D.SALE_OPT_OUT_NOTICE.toString(),D.SHARING_OPT_OUT_NOTICE.toString(),D.TARGETED_ADVERTISING_OPT_OUT_NOTICE.toString(),D.SENSITIVE_DATA_PROCESSING_OPT_OUT_NOTICE.toString(),D.SENSITIVE_DATA_LIMIT_USE_NOTICE.toString(),D.SALE_OPT_OUT.toString(),D.SHARING_OPT_OUT.toString(),D.TARGETED_ADVERTISING_OPT_OUT.toString(),D.SENSITIVE_DATA_PROCESSING.toString(),D.KNOWN_CHILD_SENSITIVE_DATA_CONSENTS.toString(),D.PERSONAL_DATA_CONSENTS.toString(),D.MSPA_COVERED_TRANSACTION.toString(),D.MSPA_OPT_OUT_OPTION_MODE.toString(),D.MSPA_SERVICE_PROVIDER_MODE.toString()],a=[D.GPC_SEGMENT_TYPE.toString(),D.GPC.toString()],u=[o,a];return n=s.call(this,t,u),E(q(n),"base64UrlEncoder",new Q),r&&r.length>0&&n.decode(r),n}return p(e,[{key:"encode",value:function(){var n=this.encodeSegmentsToBitStrings(),t=[];return t.push(this.base64UrlEncoder.encode(n[0])),n[1]&&n[1].length>0&&this.fields.get(D.GPC_SEGMENT_INCLUDED).getValue()===!0&&t.push(this.base64UrlEncoder.encode(n[1])),t.join(".")}},{key:"decode",value:function(n){for(var t=n.split("."),o=[],a=!1,u=0;u<t.length;u++){var P=this.base64UrlEncoder.decode(t[u]);switch(P.substring(0,2)){case"00":{o[0]=P;break}case"01":{a=!0,o[1]=P;break}default:throw new _("Unable to decode segment '"+t[u]+"'")}}this.decodeSegmentsFromBitStrings(o),this.fields.get(D.GPC_SEGMENT_INCLUDED).setValue(a)}},{key:"getId",value:function(){return e.ID}},{key:"getName",value:function(){return e.NAME}}]),e}(Ue),te=At;T(te,"ID",7),T(te,"VERSION",1),T(te,"NAME","usnatv1");var m;(function(i){i.VERSION="Version",i.SALE_OPT_OUT_NOTICE="SaleOptOutNotice",i.SHARING_OPT_OUT_NOTICE="SharingOptOutNotice",i.SENSITIVE_DATA_LIMIT_USE_NOTICE="SensitiveDataLimitUseNotice",i.SALE_OPT_OUT="SaleOptOut",i.SHARING_OPT_OUT="SharingOptOut",i.SENSITIVE_DATA_PROCESSING="SensitiveDataProcessing",i.KNOWN_CHILD_SENSITIVE_DATA_CONSENTS="KnownChildSensitiveDataConsents",i.PERSONAL_DATA_CONSENTS="PersonalDataConsents",i.MSPA_COVERED_TRANSACTION="MspaCoveredTransaction",i.MSPA_OPT_OUT_OPTION_MODE="MspaOptOutOptionMode",i.MSPA_SERVICE_PROVIDER_MODE="MspaServiceProviderMode",i.GPC_SEGMENT_TYPE="GpcSegmentType",i.GPC_SEGMENT_INCLUDED="GpcSegmentIncluded",i.GPC="Gpc"})(m||(m={}));var Pt=function(i){V(e,i);var s=w(e);function e(r){var n;v(this,e);var t=new Map;t.set(m.VERSION.toString(),new l(6,e.VERSION)),t.set(m.SALE_OPT_OUT_NOTICE.toString(),new l(2,0)),t.set(m.SHARING_OPT_OUT_NOTICE.toString(),new l(2,0)),t.set(m.SENSITIVE_DATA_LIMIT_USE_NOTICE.toString(),new l(2,0)),t.set(m.SALE_OPT_OUT.toString(),new l(2,0)),t.set(m.SHARING_OPT_OUT.toString(),new l(2,0)),t.set(m.SENSITIVE_DATA_PROCESSING.toString(),new Oe(2,[0,0,0,0,0,0,0,0,0])),t.set(m.KNOWN_CHILD_SENSITIVE_DATA_CONSENTS.toString(),new Oe(2,[0,0])),t.set(m.PERSONAL_DATA_CONSENTS.toString(),new l(2,0)),t.set(m.MSPA_COVERED_TRANSACTION.toString(),new l(2,0)),t.set(m.MSPA_OPT_OUT_OPTION_MODE.toString(),new l(2,0)),t.set(m.MSPA_SERVICE_PROVIDER_MODE.toString(),new l(2,0)),t.set(m.GPC_SEGMENT_TYPE.toString(),new l(2,1)),t.set(m.GPC_SEGMENT_INCLUDED.toString(),new Ee(!0)),t.set(m.GPC.toString(),new Ee(!1));var o=[m.VERSION.toString(),m.SALE_OPT_OUT_NOTICE.toString(),m.SHARING_OPT_OUT_NOTICE.toString(),m.SENSITIVE_DATA_LIMIT_USE_NOTICE.toString(),m.SALE_OPT_OUT.toString(),m.SHARING_OPT_OUT.toString(),m.SENSITIVE_DATA_PROCESSING.toString(),m.KNOWN_CHILD_SENSITIVE_DATA_CONSENTS.toString(),m.PERSONAL_DATA_CONSENTS.toString(),m.MSPA_COVERED_TRANSACTION.toString(),m.MSPA_OPT_OUT_OPTION_MODE.toString(),m.MSPA_SERVICE_PROVIDER_MODE.toString()],a=[m.GPC_SEGMENT_TYPE.toString(),m.GPC.toString()],u=[o,a];return n=s.call(this,t,u),E(q(n),"base64UrlEncoder",new Q),r&&r.length>0&&n.decode(r),n}return p(e,[{key:"encode",value:function(){var n=this.encodeSegmentsToBitStrings(),t=[];return t.push(this.base64UrlEncoder.encode(n[0])),n[1]&&n[1].length>0&&this.fields.get(m.GPC_SEGMENT_INCLUDED).getValue()===!0&&t.push(this.base64UrlEncoder.encode(n[1])),t.join(".")}},{key:"decode",value:function(n){for(var t=n.split("."),o=[],a=!1,u=0;u<t.length;u++){var P=this.base64UrlEncoder.decode(t[u]);switch(P.substring(0,2)){case"00":{o[0]=P;break}case"01":{a=!0,o[1]=P;break}default:throw new _("Unable to decode segment '"+t[u]+"'")}}this.decodeSegmentsFromBitStrings(o),this.fields.get(m.GPC_SEGMENT_INCLUDED).setValue(a)}},{key:"getId",value:function(){return e.ID}},{key:"getName",value:function(){return e.NAME}}]),e}(Ue),ne=Pt;T(ne,"ID",8),T(ne,"VERSION",1),T(ne,"NAME","uscav1");var F;(function(i){i.VERSION="Version",i.SHARING_NOTICE="SharingNotice",i.SALE_OPT_OUT_NOTICE="SaleOptOutNotice",i.TARGETED_ADVERTISING_OPT_OUT_NOTICE="TargetedAdvertisingOptOutNotice",i.SALE_OPT_OUT="SaleOptOut",i.TARGETED_ADVERTISING_OPT_OUT="TargetedAdvertisingOptOut",i.SENSITIVE_DATA_PROCESSING="SensitiveDataProcessing",i.KNOWN_CHILD_SENSITIVE_DATA_CONSENTS="KnownChildSensitiveDataConsents",i.MSPA_COVERED_TRANSACTION="MspaCoveredTransaction",i.MSPA_OPT_OUT_OPTION_MODE="MspaOptOutOptionMode",i.MSPA_SERVICE_PROVIDER_MODE="MspaServiceProviderMode"})(F||(F={}));var Ct=function(i){V(e,i);var s=w(e);function e(r){var n;v(this,e);var t=new Map;t.set(F.VERSION.toString(),new l(6,e.VERSION)),t.set(F.SHARING_NOTICE.toString(),new l(2,0)),t.set(F.SALE_OPT_OUT_NOTICE.toString(),new l(2,0)),t.set(F.TARGETED_ADVERTISING_OPT_OUT_NOTICE.toString(),new l(2,0)),t.set(F.SALE_OPT_OUT.toString(),new l(2,0)),t.set(F.TARGETED_ADVERTISING_OPT_OUT.toString(),new l(2,0)),t.set(F.SENSITIVE_DATA_PROCESSING.toString(),new Oe(2,[0,0,0,0,0,0,0,0])),t.set(F.KNOWN_CHILD_SENSITIVE_DATA_CONSENTS.toString(),new l(2,0)),t.set(F.MSPA_COVERED_TRANSACTION.toString(),new l(2,0)),t.set(F.MSPA_OPT_OUT_OPTION_MODE.toString(),new l(2,0)),t.set(F.MSPA_SERVICE_PROVIDER_MODE.toString(),new l(2,0));var o=[F.VERSION.toString(),F.SHARING_NOTICE.toString(),F.SALE_OPT_OUT_NOTICE.toString(),F.TARGETED_ADVERTISING_OPT_OUT_NOTICE.toString(),F.SALE_OPT_OUT.toString(),F.TARGETED_ADVERTISING_OPT_OUT.toString(),F.SENSITIVE_DATA_PROCESSING.toString(),F.KNOWN_CHILD_SENSITIVE_DATA_CONSENTS.toString(),F.MSPA_COVERED_TRANSACTION.toString(),F.MSPA_OPT_OUT_OPTION_MODE.toString(),F.MSPA_SERVICE_PROVIDER_MODE.toString()];return n=s.call(this,t,o),E(q(n),"base64UrlEncoder",new Q),r&&r.length>0&&n.decode(r),n}return p(e,[{key:"encode",value:function(){return this.base64UrlEncoder.encode(this.encodeToBitString())}},{key:"decode",value:function(n){this.decodeFromBitString(this.base64UrlEncoder.decode(n))}},{key:"getId",value:function(){return e.ID}},{key:"getName",value:function(){return e.NAME}}]),e}(qe),re=Ct;T(re,"ID",9),T(re,"VERSION",1),T(re,"NAME","usvav1");var M;(function(i){i.VERSION="Version",i.SHARING_NOTICE="SharingNotice",i.SALE_OPT_OUT_NOTICE="SaleOptOutNotice",i.TARGETED_ADVERTISING_OPT_OUT_NOTICE="TargetedAdvertisingOptOutNotice",i.SALE_OPT_OUT="SaleOptOut",i.TARGETED_ADVERTISING_OPT_OUT="TargetedAdvertisingOptOut",i.SENSITIVE_DATA_PROCESSING="SensitiveDataProcessing",i.KNOWN_CHILD_SENSITIVE_DATA_CONSENTS="KnownChildSensitiveDataConsents",i.MSPA_COVERED_TRANSACTION="MspaCoveredTransaction",i.MSPA_OPT_OUT_OPTION_MODE="MspaOptOutOptionMode",i.MSPA_SERVICE_PROVIDER_MODE="MspaServiceProviderMode",i.GPC_SEGMENT_TYPE="GpcSegmentType",i.GPC_SEGMENT_INCLUDED="GpcSegmentIncluded",i.GPC="Gpc"})(M||(M={}));var yt=function(i){V(e,i);var s=w(e);function e(r){var n;v(this,e);var t=new Map;t.set(M.VERSION.toString(),new l(6,e.VERSION)),t.set(M.SHARING_NOTICE.toString(),new l(2,0)),t.set(M.SALE_OPT_OUT_NOTICE.toString(),new l(2,0)),t.set(M.TARGETED_ADVERTISING_OPT_OUT_NOTICE.toString(),new l(2,0)),t.set(M.SALE_OPT_OUT.toString(),new l(2,0)),t.set(M.TARGETED_ADVERTISING_OPT_OUT.toString(),new l(2,0)),t.set(M.SENSITIVE_DATA_PROCESSING.toString(),new Oe(2,[0,0,0,0,0,0,0])),t.set(M.KNOWN_CHILD_SENSITIVE_DATA_CONSENTS.toString(),new l(2,0)),t.set(M.MSPA_COVERED_TRANSACTION.toString(),new l(2,0)),t.set(M.MSPA_OPT_OUT_OPTION_MODE.toString(),new l(2,0)),t.set(M.MSPA_SERVICE_PROVIDER_MODE.toString(),new l(2,0)),t.set(M.GPC_SEGMENT_TYPE.toString(),new l(2,1)),t.set(M.GPC_SEGMENT_INCLUDED.toString(),new Ee(!0)),t.set(M.GPC.toString(),new Ee(!1));var o=[M.VERSION.toString(),M.SHARING_NOTICE.toString(),M.SALE_OPT_OUT_NOTICE.toString(),M.TARGETED_ADVERTISING_OPT_OUT_NOTICE.toString(),M.SALE_OPT_OUT.toString(),M.TARGETED_ADVERTISING_OPT_OUT.toString(),M.SENSITIVE_DATA_PROCESSING.toString(),M.KNOWN_CHILD_SENSITIVE_DATA_CONSENTS.toString(),M.MSPA_COVERED_TRANSACTION.toString(),M.MSPA_OPT_OUT_OPTION_MODE.toString(),M.MSPA_SERVICE_PROVIDER_MODE.toString()],a=[M.GPC_SEGMENT_TYPE.toString(),M.GPC.toString()],u=[o,a];return n=s.call(this,t,u),E(q(n),"base64UrlEncoder",new Q),r&&r.length>0&&n.decode(r),n}return p(e,[{key:"encode",value:function(){var n=this.encodeSegmentsToBitStrings(),t=[];return t.push(this.base64UrlEncoder.encode(n[0])),n[1]&&n[1].length>0&&this.fields.get(M.GPC_SEGMENT_INCLUDED).getValue()===!0&&t.push(this.base64UrlEncoder.encode(n[1])),t.join(".")}},{key:"decode",value:function(n){for(var t=n.split("."),o=[],a=!1,u=0;u<t.length;u++){var P=this.base64UrlEncoder.decode(t[u]);switch(P.substring(0,2)){case"00":{o[0]=P;break}case"01":{a=!0,o[1]=P;break}default:throw new _("Unable to decode segment '"+t[u]+"'")}}this.decodeSegmentsFromBitStrings(o),this.fields.get(M.GPC_SEGMENT_INCLUDED).setValue(a)}},{key:"getId",value:function(){return e.ID}},{key:"getName",value:function(){return e.NAME}}]),e}(Ue),ie=yt;T(ie,"ID",10),T(ie,"VERSION",1),T(ie,"NAME","uscov1");var G;(function(i){i.VERSION="Version",i.SHARING_NOTICE="SharingNotice",i.SALE_OPT_OUT_NOTICE="SaleOptOutNotice",i.TARGETED_ADVERTISING_OPT_OUT_NOTICE="TargetedAdvertisingOptOutNotice",i.SENSITIVE_DATA_PROCESSING_OPT_OUT_NOTICE="SensitiveDataProcessingOptOutNotice",i.SALE_OPT_OUT="SaleOptOut",i.TARGETED_ADVERTISING_OPT_OUT="TargetedAdvertisingOptOut",i.SENSITIVE_DATA_PROCESSING="SensitiveDataProcessing",i.KNOWN_CHILD_SENSITIVE_DATA_CONSENTS="KnownChildSensitiveDataConsents",i.MSPA_COVERED_TRANSACTION="MspaCoveredTransaction",i.MSPA_OPT_OUT_OPTION_MODE="MspaOptOutOptionMode",i.MSPA_SERVICE_PROVIDER_MODE="MspaServiceProviderMode"})(G||(G={}));var Dt=function(i){V(e,i);var s=w(e);function e(r){var n;v(this,e);var t=new Map;t.set(G.VERSION.toString(),new l(6,e.VERSION)),t.set(G.SHARING_NOTICE.toString(),new l(2,0)),t.set(G.SALE_OPT_OUT_NOTICE.toString(),new l(2,0)),t.set(G.TARGETED_ADVERTISING_OPT_OUT_NOTICE.toString(),new l(2,0)),t.set(G.SENSITIVE_DATA_PROCESSING_OPT_OUT_NOTICE.toString(),new l(2,0)),t.set(G.SALE_OPT_OUT.toString(),new l(2,0)),t.set(G.TARGETED_ADVERTISING_OPT_OUT.toString(),new l(2,0)),t.set(G.SENSITIVE_DATA_PROCESSING.toString(),new Oe(2,[0,0,0,0,0,0,0,0])),t.set(G.KNOWN_CHILD_SENSITIVE_DATA_CONSENTS.toString(),new l(2,0)),t.set(G.MSPA_COVERED_TRANSACTION.toString(),new l(2,0)),t.set(G.MSPA_OPT_OUT_OPTION_MODE.toString(),new l(2,0)),t.set(G.MSPA_SERVICE_PROVIDER_MODE.toString(),new l(2,0));var o=[G.VERSION.toString(),G.SHARING_NOTICE.toString(),G.SALE_OPT_OUT_NOTICE.toString(),G.TARGETED_ADVERTISING_OPT_OUT_NOTICE.toString(),G.SENSITIVE_DATA_PROCESSING_OPT_OUT_NOTICE.toString(),G.SALE_OPT_OUT.toString(),G.TARGETED_ADVERTISING_OPT_OUT.toString(),G.SENSITIVE_DATA_PROCESSING.toString(),G.KNOWN_CHILD_SENSITIVE_DATA_CONSENTS.toString(),G.MSPA_COVERED_TRANSACTION.toString(),G.MSPA_OPT_OUT_OPTION_MODE.toString(),G.MSPA_SERVICE_PROVIDER_MODE.toString()];return n=s.call(this,t,o),E(q(n),"base64UrlEncoder",new Q),r&&r.length>0&&n.decode(r),n}return p(e,[{key:"encode",value:function(){return this.base64UrlEncoder.encode(this.encodeToBitString())}},{key:"decode",value:function(n){this.decodeFromBitString(this.base64UrlEncoder.decode(n))}},{key:"getId",value:function(){return e.ID}},{key:"getName",value:function(){return e.NAME}}]),e}(qe),se=Dt;T(se,"ID",11),T(se,"VERSION",1),T(se,"NAME","usutv1");var b;(function(i){i.VERSION="Version",i.SHARING_NOTICE="SharingNotice",i.SALE_OPT_OUT_NOTICE="SaleOptOutNotice",i.TARGETED_ADVERTISING_OPT_OUT_NOTICE="TargetedAdvertisingOptOutNotice",i.SALE_OPT_OUT="SaleOptOut",i.TARGETED_ADVERTISING_OPT_OUT="TargetedAdvertisingOptOut",i.SENSITIVE_DATA_PROCESSING="SensitiveDataProcessing",i.KNOWN_CHILD_SENSITIVE_DATA_CONSENTS="KnownChildSensitiveDataConsents",i.MSPA_COVERED_TRANSACTION="MspaCoveredTransaction",i.MSPA_OPT_OUT_OPTION_MODE="MspaOptOutOptionMode",i.MSPA_SERVICE_PROVIDER_MODE="MspaServiceProviderMode",i.GPC_SEGMENT_TYPE="GpcSegmentType",i.GPC_SEGMENT_INCLUDED="GpcSegmentIncluded",i.GPC="Gpc"})(b||(b={}));var Rt=function(i){V(e,i);var s=w(e);function e(r){var n;v(this,e);var t=new Map;t.set(b.VERSION.toString(),new l(6,e.VERSION)),t.set(b.SHARING_NOTICE.toString(),new l(2,0)),t.set(b.SALE_OPT_OUT_NOTICE.toString(),new l(2,0)),t.set(b.TARGETED_ADVERTISING_OPT_OUT_NOTICE.toString(),new l(2,0)),t.set(b.SALE_OPT_OUT.toString(),new l(2,0)),t.set(b.TARGETED_ADVERTISING_OPT_OUT.toString(),new l(2,0)),t.set(b.SENSITIVE_DATA_PROCESSING.toString(),new Oe(2,[0,0,0,0,0,0,0,0])),t.set(b.KNOWN_CHILD_SENSITIVE_DATA_CONSENTS.toString(),new Oe(2,[0,0,0])),t.set(b.MSPA_COVERED_TRANSACTION.toString(),new l(2,0)),t.set(b.MSPA_OPT_OUT_OPTION_MODE.toString(),new l(2,0)),t.set(b.MSPA_SERVICE_PROVIDER_MODE.toString(),new l(2,0)),t.set(b.GPC_SEGMENT_TYPE.toString(),new l(2,1)),t.set(b.GPC_SEGMENT_INCLUDED.toString(),new Ee(!0)),t.set(b.GPC.toString(),new Ee(!1));var o=[b.VERSION.toString(),b.SHARING_NOTICE.toString(),b.SALE_OPT_OUT_NOTICE.toString(),b.TARGETED_ADVERTISING_OPT_OUT_NOTICE.toString(),b.SALE_OPT_OUT.toString(),b.TARGETED_ADVERTISING_OPT_OUT.toString(),b.SENSITIVE_DATA_PROCESSING.toString(),b.KNOWN_CHILD_SENSITIVE_DATA_CONSENTS.toString(),b.MSPA_COVERED_TRANSACTION.toString(),b.MSPA_OPT_OUT_OPTION_MODE.toString(),b.MSPA_SERVICE_PROVIDER_MODE.toString()],a=[b.GPC_SEGMENT_TYPE.toString(),b.GPC.toString()],u=[o,a];return n=s.call(this,t,u),E(q(n),"base64UrlEncoder",new Q),r&&r.length>0&&n.decode(r),n}return p(e,[{key:"encode",value:function(){var n=this.encodeSegmentsToBitStrings(),t=[];return t.push(this.base64UrlEncoder.encode(n[0])),n[1]&&n[1].length>0&&this.fields.get(b.GPC_SEGMENT_INCLUDED).getValue()===!0&&t.push(this.base64UrlEncoder.encode(n[1])),t.join(".")}},{key:"decode",value:function(n){for(var t=n.split("."),o=[],a=!1,u=0;u<t.length;u++){var P=this.base64UrlEncoder.decode(t[u]);switch(P.substring(0,2)){case"00":{o[0]=P;break}case"01":{a=!0,o[1]=P;break}default:throw new _("Unable to decode segment '"+t[u]+"'")}}this.decodeSegmentsFromBitStrings(o),this.fields.get(b.GPC_SEGMENT_INCLUDED).setValue(a)}},{key:"getId",value:function(){return e.ID}},{key:"getName",value:function(){return e.NAME}}]),e}(Ue),oe=Rt;T(oe,"ID",12),T(oe,"VERSION",1),T(oe,"NAME","usctv1");var H=p(function i(){v(this,i)});T(H,"SECTION_ID_NAME_MAP",new Map([[J.ID,J.NAME],[Z.ID,Z.NAME],[ee.ID,ee.NAME],[te.ID,te.NAME],[ne.ID,ne.NAME],[re.ID,re.NAME],[ie.ID,ie.NAME],[se.ID,se.NAME],[oe.ID,oe.NAME]])),T(H,"SECTION_ORDER",[J.NAME,Z.NAME,ee.NAME,te.NAME,ne.NAME,re.NAME,ie.NAME,se.NAME,oe.NAME]);var he=function(i){V(e,i);var s=w(e);function e(r){var n;return v(this,e),n=s.call(this,r),n.name="LazyDecodingError",n}return p(e)}(_),ct=function(){function i(s){v(this,i),E(this,"sections",new Map),E(this,"encodedString",void 0),E(this,"decoded",void 0),E(this,"dirty",void 0),s?(this.encodedString=s,this.decoded=!1,this.dirty=!1):(this.encodedString="DBAA",this.decoded=!1,this.dirty=!1)}return p(i,[{key:"setFieldValue",value:function(e,r,n){if(!this.decoded&&this.encodedString!=null&&this.encodedString.length>0)try{this.decode(this.encodedString)}catch(o){throw new he(o.message)}var t=null;if(this.sections.has(e)?t=this.sections.get(e):e===Z.NAME?(t=new Z,this.sections.set(Z.NAME,t)):e===J.NAME?(t=new J,this.sections.set(J.NAME,t)):e===ee.NAME?(t=new ee,this.sections.set(ee.NAME,t)):e===te.NAME?(t=new te,this.sections.set(te.NAME,t)):e===ne.NAME?(t=new ne,this.sections.set(ne.NAME,t)):e===re.NAME?(t=new re,this.sections.set(re.NAME,t)):e===ie.NAME?(t=new ie,this.sections.set(ie.NAME,t)):e===se.NAME?(t=new se,this.sections.set(se.NAME,t)):e===oe.NAME&&(t=new oe,this.sections.set(oe.NAME,t)),t)t.setFieldValue(r,n),this.dirty=!0;else throw new at(e+"."+r+" not found")}},{key:"setFieldValueBySectionId",value:function(e,r,n){this.setFieldValue(H.SECTION_ID_NAME_MAP.get(e),r,n)}},{key:"getFieldValue",value:function(e,r){if(!this.decoded&&this.encodedString!=null&&this.encodedString.length>0)try{this.decode(this.encodedString)}catch(n){throw new he(n.message)}return this.sections.has(e)?this.sections.get(e).getFieldValue(r):null}},{key:"getFieldValueBySectionId",value:function(e,r){return this.getFieldValue(H.SECTION_ID_NAME_MAP.get(e),r)}},{key:"hasField",value:function(e,r){if(!this.decoded&&this.encodedString!=null&&this.encodedString.length>0)try{this.decode(this.encodedString)}catch(n){throw new he(n.message)}return this.sections.has(e)?this.sections.get(e).hasField(r):!1}},{key:"hasFieldBySectionId",value:function(e,r){return this.hasField(H.SECTION_ID_NAME_MAP.get(e),r)}},{key:"hasSection",value:function(e){if(!this.decoded&&this.encodedString!=null&&this.encodedString.length>0)try{this.decode(this.encodedString)}catch(r){throw new he(r.message)}return this.sections.has(e)}},{key:"hasSectionId",value:function(e){return this.hasSection(H.SECTION_ID_NAME_MAP.get(e))}},{key:"deleteSection",value:function(e){if(!this.decoded&&this.encodedString!=null&&this.encodedString.length>0)try{this.decode(this.encodedString)}catch(r){throw new he(r.message)}this.sections.delete(e),this.dirty=!0}},{key:"deleteSectionById",value:function(e){this.deleteSection(H.SECTION_ID_NAME_MAP.get(e))}},{key:"clear",value:function(){this.sections.clear(),this.encodedString="DBAA",this.decoded=!1,this.dirty=!1}},{key:"getHeader",value:function(){if(!this.decoded&&this.encodedString!=null&&this.encodedString.length>0)try{this.decode(this.encodedString)}catch(r){throw new he(r.message)}var e=new ye;return e.setFieldValue("SectionIds",this.getSectionIds()),e.toObj()}},{key:"getSection",value:function(e){if(!this.decoded&&this.encodedString!=null&&this.encodedString.length>0)try{this.decode(this.encodedString)}catch(r){throw new he(r.message)}return this.sections.has(e)?this.sections.get(e).toObj():null}},{key:"getSectionIds",value:function(){if(!this.decoded&&this.encodedString!=null&&this.encodedString.length>0)try{this.decode(this.encodedString)}catch(o){throw new he(o.message)}for(var e=[],r=0;r<H.SECTION_ORDER.length;r++){var n=H.SECTION_ORDER[r];if(this.sections.has(n)){var t=this.sections.get(n);e.push(t.getId())}}return e}},{key:"encode",value:function(){if(!this.dirty)return this.encodedString;if(!this.decoded&&this.encodedString!=null&&this.encodedString.length>0)try{this.decode(this.encodedString)}catch(u){throw new he(u.message)}for(var e=[],r=[],n=0;n<H.SECTION_ORDER.length;n++){var t=H.SECTION_ORDER[n];if(this.sections.has(t)){var o=this.sections.get(t);e.push(o.encode()),r.push(o.getId())}}var a=new ye;return a.setFieldValue("SectionIds",this.getSectionIds()),e.unshift(a.encode()),this.encodedString=e.join("~"),this.dirty=!1,this.encodedString}},{key:"decode",value:function(e){this.encodedString=e,this.decoded=!1,this.dirty=!0,this.sections.clear();var r=e.split("~"),n=new ye(r[0]);this.sections.set(ye.NAME,n);for(var t=n.getFieldValue("SectionIds"),o=0;o<t.length;o++)if(t[o]===Z.ID){var a=new Z(r[o+1]);this.sections.set(Z.NAME,a)}else if(t[o]===J.ID){var u=new J(r[o+1]);this.sections.set(J.NAME,u)}else if(t[o]===ee.ID){var P=new ee(r[o+1]);this.sections.set(ee.NAME,P)}else if(t[o]===te.ID){var L=new te(r[o+1]);this.sections.set(te.NAME,L)}else if(t[o]===ne.ID){var Se=new ne(r[o+1]);this.sections.set(ne.NAME,Se)}else if(t[o]===re.ID){var R=new re(r[o+1]);this.sections.set(re.NAME,R)}else if(t[o]===ie.ID){var pe=new ie(r[o+1]);this.sections.set(ie.NAME,pe)}else if(t[o]===se.ID){var Te=new se(r[o+1]);this.sections.set(se.NAME,Te)}else if(t[o]===oe.ID){var lt=new oe(r[o+1]);this.sections.set(oe.NAME,lt)}this.decoded=!0,this.dirty=!1}},{key:"encodeSection",value:function(e){if(!this.decoded&&this.encodedString!=null&&this.encodedString.length>0)try{this.decode(this.encodedString)}catch(r){throw new he(r.message)}return this.sections.has(e)?this.sections.get(e).encode():null}},{key:"encodeSectionById",value:function(e){return this.encodeSection(H.SECTION_ID_NAME_MAP.get(e))}},{key:"decodeSection",value:function(e,r){if(!this.decoded&&this.encodedString!=null&&this.encodedString.length>0)try{this.decode(this.encodedString)}catch(t){throw new he(t.message)}var n=null;this.sections.has(e)?n=this.sections.get(e):e===Z.NAME?(n=new Z,this.sections.set(Z.NAME,n)):e===J.NAME?(n=new J,this.sections.set(J.NAME,n)):e===ee.NAME?(n=new ee,this.sections.set(ee.NAME,n)):e===te.NAME?(n=new te,this.sections.set(te.NAME,n)):e===ne.NAME?(n=new ne,this.sections.set(ne.NAME,n)):e===re.NAME?(n=new re,this.sections.set(re.NAME,n)):e===ie.NAME?(n=new ie,this.sections.set(ie.NAME,n)):e===se.NAME?(n=new se,this.sections.set(se.NAME,n)):e===oe.NAME&&(n=new oe,this.sections.set(oe.NAME,n)),n&&n.decode(r)}},{key:"decodeSectionById",value:function(e,r){this.decodeSection(H.SECTION_ID_NAME_MAP.get(e),r)}},{key:"toObject",value:function(){if(!this.decoded&&this.encodedString!=null&&this.encodedString.length>0)try{this.decode(this.encodedString)}catch(t){throw new he(t.message)}for(var e={},r=0;r<H.SECTION_ORDER.length;r++){var n=H.SECTION_ORDER[r];this.sections.has(n)&&(e[n]=this.sections.get(n).toObj())}return e}}]),i}(),mt=function(){function i(){v(this,i),E(this,"gppVersion","1.1"),E(this,"supportedAPIs",[]),E(this,"eventQueue",new y(this)),E(this,"cmpStatus",Ie.LOADING),E(this,"cmpDisplayStatus",g.HIDDEN),E(this,"signalStatus",d.NOT_READY),E(this,"applicableSections",[]),E(this,"gppModel",new ct),E(this,"cmpId",void 0),E(this,"cmpVersion",void 0),E(this,"eventStatus",void 0)}return p(i,[{key:"reset",value:function(){this.eventQueue.clear(),this.cmpStatus=Ie.LOADING,this.cmpDisplayStatus=g.HIDDEN,this.signalStatus=d.NOT_READY,this.applicableSections=[],this.supportedAPIs=[],this.gppModel=new ct,delete this.cmpId,delete this.cmpVersion,delete this.eventStatus}}]),i}(),Je=function(){function i(){v(this,i)}return p(i,null,[{key:"absCall",value:function(e,r,n,t){return new Promise(function(o,a){var u=new XMLHttpRequest,P=function(){if(u.readyState==XMLHttpRequest.DONE)if(u.status>=200&&u.status<300){var Te=u.response;if(typeof Te=="string")try{Te=JSON.parse(Te)}catch(lt){}o(Te)}else a(new Error("HTTP Status: ".concat(u.status," response type: ").concat(u.responseType)))},L=function(){a(new Error("error"))},Se=function(){a(new Error("aborted"))},R=function(){a(new Error("Timeout "+t+"ms "+e))};u.withCredentials=n,u.addEventListener("load",P),u.addEventListener("error",L),u.addEventListener("abort",Se),r===null?u.open("GET",e,!0):u.open("POST",e,!0),u.responseType="json",u.timeout=t,u.ontimeout=R,u.send(r)})}},{key:"post",value:function(e,r){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1,t=arguments.length>3&&arguments[3]!==void 0?arguments[3]:0;return this.absCall(e,JSON.stringify(r),n,t)}},{key:"fetch",value:function(e){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0;return this.absCall(e,null,r,n)}}]),i}(),Xe=function(i){V(e,i);var s=w(e);function e(r){var n;return v(this,e),n=s.call(this,r),n.name="GVLError",n}return p(e)}(ke(Error)),Vt=function(){function i(){v(this,i)}return p(i,[{key:"has",value:function(e){return i.langSet.has(e)}},{key:"forEach",value:function(e){i.langSet.forEach(e)}},{key:"size",get:function(){return i.langSet.size}}]),i}(),St=Vt;T(St,"langSet",new Set(["BG","CA","CS","DA","DE","EL","EN","ES","ET","FI","FR","HR","HU","IT","JA","LT","LV","MT","NL","NO","PL","PT","RO","RU","SK","SL","SV","TR","ZH"]));var wt=function(){function i(){v(this,i),E(this,"vendors",void 0),E(this,"consentLanguages",new St),E(this,"gvlSpecificationVersion",void 0),E(this,"vendorListVersion",void 0),E(this,"tcfPolicyVersion",void 0),E(this,"lastUpdated",void 0),E(this,"purposes",void 0),E(this,"specialPurposes",void 0),E(this,"features",void 0),E(this,"specialFeatures",void 0),E(this,"stacks",void 0),E(this,"dataCategories",void 0),E(this,"language",i.DEFAULT_LANGUAGE),E(this,"vendorIds",void 0),E(this,"ready",!1),E(this,"fullVendorList",void 0),E(this,"byPurposeVendorMap",void 0),E(this,"bySpecialPurposeVendorMap",void 0),E(this,"byFeatureVendorMap",void 0),E(this,"bySpecialFeatureVendorMap",void 0),E(this,"baseUrl",void 0),E(this,"languageFilename","purposes-[LANG].json")}return p(i,[{key:"changeLanguage",value:function(){var s=tt(De().mark(function r(n){var t,o;return De().wrap(function(u){for(;;)switch(u.prev=u.next){case 0:if(t=n.toUpperCase(),!this.consentLanguages.has(t)){u.next=18;break}if(t===this.language){u.next=16;break}return this.language=t,o=this.baseUrl+this.languageFilename.replace("[LANG]",n),u.prev=5,u.t0=this,u.next=9,Je.fetch(o);case 9:u.t1=u.sent,u.t0.populate.call(u.t0,u.t1),u.next=16;break;case 13:throw u.prev=13,u.t2=u.catch(5),new Xe("unable to load language: "+u.t2.message);case 16:u.next=19;break;case 18:throw new Xe("unsupported language ".concat(n));case 19:case"end":return u.stop()}},r,this,[[5,13]])}));function e(r){return s.apply(this,arguments)}return e}()},{key:"getJson",value:function(){return JSON.parse(JSON.stringify({gvlSpecificationVersion:this.gvlSpecificationVersion,vendorListVersion:this.vendorListVersion,tcfPolicyVersion:this.tcfPolicyVersion,lastUpdated:this.lastUpdated,purposes:this.purposes,specialPurposes:this.specialPurposes,features:this.features,specialFeatures:this.specialFeatures,stacks:this.stacks,dataCategories:this.dataCategories,vendors:this.fullVendorList}))}},{key:"isVendorList",value:function(e){return e!==void 0&&e.vendors!==void 0}},{key:"populate",value:function(e){this.purposes=e.purposes,this.specialPurposes=e.specialPurposes,this.features=e.features,this.specialFeatures=e.specialFeatures,this.stacks=e.stacks,this.dataCategories=e.dataCategories,this.isVendorList(e)&&(this.gvlSpecificationVersion=e.gvlSpecificationVersion,this.tcfPolicyVersion=e.tcfPolicyVersion,this.vendorListVersion=e.vendorListVersion,this.lastUpdated=e.lastUpdated,typeof this.lastUpdated=="string"&&(this.lastUpdated=new Date(this.lastUpdated)),this.vendors=e.vendors,this.fullVendorList=e.vendors,this.mapVendors(),this.ready=!0)}},{key:"mapVendors",value:function(e){var r=this;this.byPurposeVendorMap={},this.bySpecialPurposeVendorMap={},this.byFeatureVendorMap={},this.bySpecialFeatureVendorMap={},Object.keys(this.purposes).forEach(function(n){r.byPurposeVendorMap[n]={legInt:new Set,consent:new Set,flexible:new Set}}),Object.keys(this.specialPurposes).forEach(function(n){r.bySpecialPurposeVendorMap[n]=new Set}),Object.keys(this.features).forEach(function(n){r.byFeatureVendorMap[n]=new Set}),Object.keys(this.specialFeatures).forEach(function(n){r.bySpecialFeatureVendorMap[n]=new Set}),Array.isArray(e)||(e=Object.keys(this.fullVendorList).map(function(n){return+n})),this.vendorIds=new Set(e),this.vendors=e.reduce(function(n,t){var o=r.vendors[String(t)];return o&&o.deletedDate===void 0&&(o.purposes.forEach(function(a){r.byPurposeVendorMap[String(a)].consent.add(t)}),o.specialPurposes.forEach(function(a){r.bySpecialPurposeVendorMap[String(a)].add(t)}),o.legIntPurposes.forEach(function(a){r.byPurposeVendorMap[String(a)].legInt.add(t)}),o.flexiblePurposes&&o.flexiblePurposes.forEach(function(a){r.byPurposeVendorMap[String(a)].flexible.add(t)}),o.features.forEach(function(a){r.byFeatureVendorMap[String(a)].add(t)}),o.specialFeatures.forEach(function(a){r.bySpecialFeatureVendorMap[String(a)].add(t)}),n[t]=o),n},{})}},{key:"getFilteredVendors",value:function(e,r,n,t){var o=this,a=e.charAt(0).toUpperCase()+e.slice(1),u,P={};return e==="purpose"&&n?u=this["by"+a+"VendorMap"][String(r)][n]:u=this["by"+(t?"Special":"")+a+"VendorMap"][String(r)],u.forEach(function(L){P[String(L)]=o.vendors[String(L)]}),P}},{key:"getVendorsWithConsentPurpose",value:function(e){return this.getFilteredVendors("purpose",e,"consent")}},{key:"getVendorsWithLegIntPurpose",value:function(e){return this.getFilteredVendors("purpose",e,"legInt")}},{key:"getVendorsWithFlexiblePurpose",value:function(e){return this.getFilteredVendors("purpose",e,"flexible")}},{key:"getVendorsWithSpecialPurpose",value:function(e){return this.getFilteredVendors("purpose",e,void 0,!0)}},{key:"getVendorsWithFeature",value:function(e){return this.getFilteredVendors("feature",e)}},{key:"getVendorsWithSpecialFeature",value:function(e){return this.getFilteredVendors("feature",e,void 0,!0)}},{key:"narrowVendorsTo",value:function(e){this.mapVendors(e)}},{key:"isReady",get:function(){return this.ready}}],[{key:"fromVendorList",value:function(e){var r=new i;return r.populate(e),r}},{key:"fromUrl",value:function(){var s=tt(De().mark(function r(n){var t,o,a,u,P,L;return De().wrap(function(R){for(;;)switch(R.prev=R.next){case 0:if(t=n.baseUrl,!(!t||t.length===0)){R.next=3;break}throw new Xe("Invalid baseUrl: '"+t+"'");case 3:if(!/^https?:\/\/vendorlist\.consensu\.org\//.test(t)){R.next=5;break}throw new Xe("Invalid baseUrl!  You may not pull directly from vendorlist.consensu.org and must provide your own cache");case 5:if(t.length>0&&t[t.length-1]!=="/"&&(t+="/"),o=new i,o.baseUrl=t,n.languageFilename?o.languageFilename=n.languageFilename:o.languageFilename="purposes-[LANG].json",!(n.version>0)){R.next=18;break}return a=n.versionedFilename,a||(a="archives/vendor-list-v[VERSION].json"),u=t+a.replace("[VERSION]",String(n.version)),R.t0=o,R.next=14,Je.fetch(u);case 14:R.t1=R.sent,R.t0.populate.call(R.t0,R.t1),R.next=26;break;case 18:return P=n.latestFilename,P||(P="vendor-list.json"),L=t+P,R.t2=o,R.next=24,Je.fetch(L);case 24:R.t3=R.sent,R.t2.populate.call(R.t2,R.t3);case 26:return R.abrupt("return",o);case 27:case"end":return R.stop()}},r)}));function e(r){return s.apply(this,arguments)}return e}()},{key:"isInstanceOf",value:function(e){return Ne(e)=="object"&&typeof e.narrowVendorsTo=="function"}}]),i}(),Ze=wt;T(Ze,"DEFAULT_LANGUAGE","EN");var Mt=function(){function i(s,e,r){v(this,i),E(this,"callResponder",void 0),E(this,"cmpApiContext",void 0),this.cmpApiContext=new mt,this.cmpApiContext.cmpId=s,this.cmpApiContext.cmpVersion=e,this.callResponder=new N(this.cmpApiContext,r)}return p(i,[{key:"fireEvent",value:function(e,r){this.cmpApiContext.eventQueue.exec(e,r)}},{key:"fireErrorEvent",value:function(e){this.cmpApiContext.eventQueue.exec("error",e)}},{key:"fireSectionChange",value:function(e){this.cmpApiContext.eventQueue.exec("sectionChange",e)}},{key:"getEventStatus",value:function(){return this.cmpApiContext.eventStatus}},{key:"setEventStatus",value:function(e){this.cmpApiContext.eventStatus=e}},{key:"getCmpStatus",value:function(){return this.cmpApiContext.cmpStatus}},{key:"setCmpStatus",value:function(e){this.cmpApiContext.cmpStatus=e,this.cmpApiContext.eventQueue.exec("cmpStatus",e)}},{key:"getCmpDisplayStatus",value:function(){return this.cmpApiContext.cmpDisplayStatus}},{key:"setCmpDisplayStatus",value:function(e){this.cmpApiContext.cmpDisplayStatus=e,this.cmpApiContext.eventQueue.exec("cmpDisplayStatus",e)}},{key:"getSignalStatus",value:function(){return this.cmpApiContext.signalStatus}},{key:"setSignalStatus",value:function(e){this.cmpApiContext.signalStatus=e,this.cmpApiContext.eventQueue.exec("signalStatus",e)}},{key:"getApplicableSections",value:function(){return this.cmpApiContext.applicableSections}},{key:"setApplicableSections",value:function(e){this.cmpApiContext.applicableSections=e}},{key:"getSupportedAPIs",value:function(){return this.cmpApiContext.supportedAPIs}},{key:"setSupportedAPIs",value:function(e){this.cmpApiContext.supportedAPIs=e}},{key:"setGppString",value:function(e){this.cmpApiContext.gppModel.decode(e)}},{key:"getGppString",value:function(){return this.cmpApiContext.gppModel.encode()}},{key:"setSectionString",value:function(e,r){this.cmpApiContext.gppModel.decodeSection(e,r)}},{key:"setSectionStringById",value:function(e,r){this.setSectionString(H.SECTION_ID_NAME_MAP.get(e),r)}},{key:"getSectionString",value:function(e){return this.cmpApiContext.gppModel.encodeSection(e)}},{key:"getSectionStringById",value:function(e){return this.getSectionString(H.SECTION_ID_NAME_MAP.get(e))}},{key:"setFieldValue",value:function(e,r,n){this.cmpApiContext.gppModel.setFieldValue(e,r,n)}},{key:"setFieldValueBySectionId",value:function(e,r,n){this.setFieldValue(H.SECTION_ID_NAME_MAP.get(e),r,n)}},{key:"getFieldValue",value:function(e,r){return this.cmpApiContext.gppModel.getFieldValue(e,r)}},{key:"getFieldValueBySectionId",value:function(e,r){return this.getFieldValue(H.SECTION_ID_NAME_MAP.get(e),r)}},{key:"getSection",value:function(e){return this.cmpApiContext.gppModel.getSection(e)}},{key:"getSectionById",value:function(e){return this.getSection(H.SECTION_ID_NAME_MAP.get(e))}},{key:"hasSection",value:function(e){return this.cmpApiContext.gppModel.hasSection(e)}},{key:"hasSectionId",value:function(e){return this.hasSection(H.SECTION_ID_NAME_MAP.get(e))}},{key:"deleteSection",value:function(e){this.cmpApiContext.gppModel.deleteSection(e)}},{key:"deleteSectionById",value:function(e){this.deleteSection(H.SECTION_ID_NAME_MAP.get(e))}},{key:"clear",value:function(){this.cmpApiContext.gppModel.clear()}},{key:"getObject",value:function(){return this.cmpApiContext.gppModel.toObject()}},{key:"getGvlFromVendorList",value:function(e){return Ze.fromVendorList(e)}},{key:"getGvlFromUrl",value:function(){var s=tt(De().mark(function r(n){return De().wrap(function(o){for(;;)switch(o.prev=o.next){case 0:return o.abrupt("return",Ze.fromUrl(n));case 1:case"end":return o.stop()}},r)}));function e(r){return s.apply(this,arguments)}return e}()}]),i}(),bt=function(){function i(){v(this,i),this.cmpStatus=Ie,this.displayStatus=g}return p(i,[{key:"getCmpApi",value:function(e,r,n){return new Mt(e,r,n)}}]),i}(),et=new bt,Ut={gppCmpApi:et.getCmpApi,cmpStatus:et.cmpStatus,displayStatus:et.displayStatus,signalStatus:d};window.otIabModule=k(Y({},window.otIabModule),{gppSdkRef:Ut})})();})();
/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */
