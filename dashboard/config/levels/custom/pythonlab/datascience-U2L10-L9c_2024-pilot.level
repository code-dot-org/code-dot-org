<Pythonlab>
  <config><![CDATA[{
  "game_id": 72,
  "created_at": "2024-09-17T23:14:05.000Z",
  "level_num": "custom",
  "user_id": 18602,
  "properties": {
    "encrypted": "false",
    "long_instructions": "# Fabric Dying\r\n\r\n::: details [**✅ Step 1**]\r\nFilter for all entries that have a *non-null* second ingredient, that have a fabric type that ends in **'n'**, and that takes less than **150** min to dye. \r\n:::\r\n\r\n::: details [**✅ Step 2**]\r\nCount the occurrences of each color result into the `color_counts` variable.\r\n:::\r\n\r\n::: details [**✅ Step 3**]\r\nPrint the resulting filter visualization.\r\n:::\r\n",
    "ai_tutor_available": "false",
    "submittable": "false",
    "hide_share_and_remix": "false",
    "predict_settings": {
      "isPredictLevel": false
    },
    "start_sources": {
      "files": {
        "0": {
          "id": "0",
          "name": "main.py",
          "language": "py",
          "contents": "import pandas as pd\nimport matplotlib.pyplot as plt\n\ndf = pd.read_csv('fabric_dye_log.csv')\n\n# Step 1\nfiltered_data = df[]\n\n\n# Step 2\ncolor_counts = filtered_data['Color Result']\n\n\n# ----- Graphing the data -----------\n# Plot the data\nplt.figure(figsize=(14, 8))\n\n\n# Bar chart for Color Result counts\nplt.bar(color_counts.index, color_counts.values, color='purple', label='Color Result Count')\n\n\n# Set labels and title\nplt.xlabel('Color Result')\nplt.ylabel('Count')\nplt.title('Total Color Results Based on Filter')\nplt.xticks(rotation=90)\nplt.legend()\n\n\n# Show the plot\nplt.show()\n\n",
          "folderId": "0",
          "active": false,
          "open": true,
          "type": "locked_starter"
        },
        "1": {
          "id": "1",
          "name": "fabric_dye_log.csv",
          "language": "csv",
          "contents": "Ingredient One,Quantity One,Ingredient Two,Quantity Two,Time to Dye,Color Result,Fabric Type\nWalnut Hulls,47,,0,176,Brown,Rayon\nCochineal,66,Onion Skins,45,63,Purple,Silk\nMadder,51,Onion Skins,124,68,Red,Hemp\nIndigo,15,,0,167,Blue,Rayon\nPomegranate,71,Pomegranate,142,216,Yellow,Nylon\nTurmeric,41,,0,225,Orange,Nylon\nWalnut Hulls,10,,0,236,Brown,Linen\nIndigo,115,Black Tea,131,224,Blue,Linen\nTurmeric,109,,0,183,Orange,Wool\nTurmeric,32,Brazilwood,115,87,Pink,Polyester\nWeld,16,,0,65,Yellow,Rayon\nCochineal,21,Onion Skins,53,141,Purple,Wool\nBlack Tea,118,,0,86,Brown,Polyester\nIndigo,24,Pomegranate,140,105,Blue,Polyester\nBrazilwood,27,,0,70,Pink,Hemp\nTurmeric,72,,0,122,Orange,Nylon\nSaffron,73,,0,201,Yellow,Silk\nSaffron,73,,0,194,Yellow,Linen\nTurmeric,11,Black Tea,162,229,Brown,Rayon\nOnion Skins,24,Madder,94,110,Red,Nylon\nMadder,109,Pomegranate,74,172,Red,Silk\nCochineal,86,Pomegranate,82,82,Purple,Hemp\nCochineal,52,Cutch,115,124,Purple,Polyester\nCutch,41,Logwood,42,125,Black,Polyester\nOnion Skins,52,Cutch,127,104,Brown,Cotton\nLogwood,190,Logwood,115,140,Black,Rayon\nLogwood,156,Black Tea,165,183,Black,Silk\nRed Sandalwood,108,Henna,162,100,Red,Linen\nHenna,73,,0,118,Brown,Linen\nOnion Skins,191,,0,65,Yellow,Polyester\nWalnut Hulls,35,,0,219,Brown,Nylon\nCutch,16,Brazilwood,162,51,Brown,Hemp\nMadder,95,,0,180,Red,Hemp\nPomegranate,96,,0,150,Yellow,Hemp\nBlack Tea,85,Red Sandalwood,162,157,Red,Polyester\nIndigo,69,,0,229,Blue,Hemp\nCutch,17,,0,211,Brown,Wool\nCochineal,51,Logwood,178,109,Black,Wool\nIndigo,98,,0,173,Blue,Rayon\nPomegranate,35,,0,152,Yellow,Wool\nMadder,97,,0,153,Red,Linen\nIndigo,101,Madder,91,196,Blue,Nylon\nRed Sandalwood,30,,0,168,Red,Nylon\nRed Sandalwood,97,,0,121,Red,Nylon\nIndigo,17,Saffron,54,188,Blue,Polyester\nHenna,54,Turmeric,13,229,Brown,Wool\nSaffron,192,Red Sandalwood,164,44,Red,Nylon\nHenna,194,,0,227,Brown,Cotton\nCutch,95,Cutch,70,103,Brown,Cotton\nCutch,46,Cochineal,104,161,Purple,Polyester\nMadder,146,Turmeric,179,97,Red,Nylon\nWalnut Hulls,12,Turmeric,128,57,Brown,Nylon\nMadder,112,Logwood,200,201,Black,Polyester\nCochineal,171,Indigo,124,52,Purple,Rayon\nWeld,68,Logwood,82,57,Black,Silk\nCochineal,41,Logwood,158,89,Black,Polyester\nMadder,42,,0,162,Red,Silk\nIndigo,68,,0,134,Blue,Hemp\nOnion Skins,106,Red Sandalwood,25,54,Red,Rayon\nMadder,21,Cutch,122,139,Red,Rayon\nWeld,16,,0,114,Yellow,Linen\nWalnut Hulls,173,Black Tea,137,175,Brown,Cotton\nPomegranate,190,,0,32,Yellow,Polyester\nSaffron,48,,0,174,Yellow,Cotton\nMadder,187,,0,134,Red,Linen\nTurmeric,50,,0,31,Orange,Nylon\nHenna,110,,0,150,Brown,Linen\nWeld,85,Weld,50,164,Yellow,Silk\nWeld,159,,0,143,Yellow,Linen\nRed Sandalwood,112,,0,113,Red,Linen\nBrazilwood,192,,0,229,Pink,Rayon\nRed Sandalwood,197,,0,216,Red,Nylon\nLogwood,19,Logwood,24,219,Black,Silk\nRed Sandalwood,117,,0,157,Red,Silk\nOnion Skins,173,,0,234,Yellow,Nylon\nWalnut Hulls,14,Black Tea,47,67,Brown,Polyester\nWalnut Hulls,61,Pomegranate,23,226,Brown,Silk\nMadder,151,Black Tea,75,131,Red,Hemp\nPomegranate,150,Black Tea,34,184,Brown,Linen\nTurmeric,184,,0,175,Orange,Polyester\nWalnut Hulls,32,Henna,132,67,Brown,Linen\nIndigo,28,,0,213,Blue,Polyester\nTurmeric,181,,0,103,Orange,Polyester\nLogwood,119,,0,236,Black,Cotton\nWeld,109,Black Tea,63,89,Brown,Linen\nCutch,17,Saffron,135,239,Brown,Wool\nWalnut Hulls,199,,0,153,Brown,Wool\nCutch,67,Madder,135,66,Red,Silk\nHenna,41,Saffron,100,155,Brown,Nylon\nSaffron,69,,0,35,Yellow,Linen\nRed Sandalwood,78,,0,154,Red,Nylon\nPomegranate,47,Turmeric,20,216,Orange,Rayon\nSaffron,55,,0,218,Yellow,Linen\nRed Sandalwood,123,,0,108,Red,Linen\nIndigo,192,Cochineal,82,138,Purple,Wool\nMadder,175,,0,79,Red,Polyester\nMadder,122,,0,70,Red,Hemp\nBrazilwood,195,Saffron,68,37,Pink,Silk\nIndigo,116,Cutch,171,109,Blue,Wool\nTurmeric,50,,0,78,Orange,Rayon\n",
          "folderId": "0",
          "active": false,
          "open": true
        }
      },
      "folders": {
      },
      "openFiles": [
        "0",
        "1"
      ]
    },
    "display_name": "Fabric Dying Log",
    "bubble_choice_description": "Practice converting data types and applying more filtering conditions with the fabric dying log dataset.",
    "thumbnail_url": "https://images.code.org/456d687aab78042eea2a2e453ab82c07-colorant.png",
    "teacher_markdown": "**Student Takeaways:**\r\n- Students learn how to filter a dataset based on multiple criteria, including non-null checks, string patterns, and numerical thresholds, focusing on how to narrow down data for specific analysis.\r\n- Students understand how to count occurrences of specific outcomes (e.g., color results) \r\n\r\n\r\n**Possible Misconceptions and/or Difficulties:**\r\n-  Students might struggle with correctly applying multiple filtering conditions, particularly when combining non-null checks with string patterns and numerical comparisons.\r\n",
    "validation_file": {
      "id": "2",
      "name": "test.py",
      "language": "py",
      "contents": "import unittest\nimport ast\n\nclass TestFabricDyeLog(unittest.TestCase):\n    def setUp(self):\n        with open('main.py', 'r') as f:\n            self.tree = ast.parse(f.read())\n\n    def detect_ingredient_fabric_time_filter(self):\n        \"\"\"Detects filtering based on non-null 'Ingredient Two', 'Fabric Type' ending in 'n', and 'Time to Dye' < 150.\"\"\"\n        ingredient_condition = False\n        fabric_condition = False\n        time_condition = False\n\n        # Traverse the AST and search for the conditions\n        for node in ast.walk(self.tree):\n            # Check for non-null Ingredient Two using notnull() or .notna()\n            if isinstance(node, ast.Call) and isinstance(node.func, ast.Attribute) and node.func.attr in ['notnull', 'notna']:\n                if isinstance(node.func.value, ast.Subscript):\n                    if isinstance(node.func.value.slice, ast.Constant) and node.func.value.slice.value == 'Ingredient Two':\n                        ingredient_condition = True\n\n            # Check for Fabric Type ending in 'n' using str.endswith()\n            if isinstance(node, ast.Call) and isinstance(node.func, ast.Attribute) and node.func.attr == 'endswith':\n                if isinstance(node.func.value, ast.Attribute) and node.func.value.attr == 'str':\n                    if isinstance(node.func.value.value, ast.Subscript):\n                        if isinstance(node.func.value.value.slice, ast.Constant) and node.func.value.value.slice.value == 'Fabric Type':\n                            if isinstance(node.args[0], ast.Constant) and node.args[0].value == 'n':\n                                fabric_condition = True\n\n            # Check for Time to Dye < 150\n            if isinstance(node, ast.Compare):\n                if isinstance(node.left, ast.Subscript):\n                    if isinstance(node.left.slice, ast.Constant) and node.left.slice.value == 'Time to Dye':\n                        if isinstance(node.comparators[0], ast.Constant) and node.comparators[0].value == 150:\n                            if isinstance(node.ops[0], ast.Lt):\n                                time_condition = True\n\n        # Return True only if all three conditions are detected\n        return ingredient_condition and fabric_condition and time_condition\n\n    def detect_color_result_value_counts(self):\n        \"\"\"Detects the use of value_counts() on the 'Color Result' column.\"\"\"\n        for node in ast.walk(self.tree):\n            if isinstance(node, ast.Call) and isinstance(node.func, ast.Attribute):\n                # Check for 'Color Result'.value_counts()\n                if node.func.attr == 'value_counts':\n                    if isinstance(node.func.value, ast.Subscript):\n                        if isinstance(node.func.value.slice, ast.Constant) and node.func.value.slice.value == 'Color Result':\n                            return True\n        return False\n\n    def test_step_1_combined_filter_conditions(self):\n        \"\"\"Filter for non-null second ingredient, fabric type ends in 'n', and time < 150 min.\"\"\"\n        self.assertTrue(self.detect_ingredient_fabric_time_filter(), \n                        \"Filter for non-null second ingredient, fabric type ends in 'n', and time < 150 min.\")\n\n    def test_step_2_value_counts_operation(self):\n        \"\"\"Check if value_counts() was used on the 'Color Result' column.\"\"\"\n        self.assertTrue(self.detect_color_result_value_counts(), \n                        \"The value_counts() function was not used on the 'Color Result' column to count occurrences.\")\n\nif __name__ == '__main__':\n    unittest.main()\n",
      "folderId": "0",
      "active": false,
      "open": false,
      "type": "validation"
    }
  },
  "published": true,
  "audit_log": "[{\"changed_at\":\"2024-09-17T23:14:05.225+00:00\",\"changed\":[\"cloned from \\\"datascience-U2L10-L8c_2024-pilot\\\"\"],\"cloned_from\":\"datascience-U2L10-L8c_2024-pilot\"},{\"changed_at\":\"2024-09-17 23:15:47 +0000\",\"changed\":[\"long_instructions\",\"predict_settings\",\"bubble_choice_description\",\"teacher_markdown\"],\"changed_by_id\":18602,\"changed_by_email\":\"angelina+levelbuilder@code.org\"},{\"changed_at\":\"2024-09-17 23:16:46 +0000\",\"changed\":[\"start_sources\"],\"changed_by_id\":18602,\"changed_by_email\":\"angelina+levelbuilder@code.org\"},{\"changed_at\":\"2024-10-02 19:50:10 +0000\",\"changed\":[\"start_sources\"],\"changed_by_id\":18602,\"changed_by_email\":\"angelina+levelbuilder@code.org\"},{\"changed_at\":\"2024-10-02 19:50:16 +0000\",\"changed\":[\"predict_settings\"],\"changed_by_id\":18602,\"changed_by_email\":\"angelina+levelbuilder@code.org\"},{\"changed_at\":\"2024-10-02 19:51:52 +0000\",\"changed\":[\"start_sources\"],\"changed_by_id\":18602,\"changed_by_email\":\"angelina+levelbuilder@code.org\"},{\"changed_at\":\"2024-10-02 19:52:02 +0000\",\"changed\":[\"predict_settings\"],\"changed_by_id\":18602,\"changed_by_email\":\"angelina+levelbuilder@code.org\"},{\"changed_at\":\"2024-10-03 16:42:52 +0000\",\"changed\":[\"start_sources\"],\"changed_by_id\":18753,\"changed_by_email\":\"molly+levelbuilder@code.org\"},{\"changed_at\":\"2024-10-21 16:50:04 +0000\",\"changed\":[\"start_sources\"],\"changed_by_id\":18914,\"changed_by_email\":\"samantha.schwartz+levelbuilder@code.org\"}]"
}]]></config>
</Pythonlab>
