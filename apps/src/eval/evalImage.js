var evalUtils = require('./evalUtils');

var EvalImage = function(style, color) {
  // x/y location in pixel space of object's center
  this.x_ = 200;
  this.y_ = 200;

  this.rotation_ = 0;
  this.scaleX_ = 1.0;
  this.scaleY = 1.0;

  this.style_ = style;
  this.color_ = color;
};
module.exports = EvalImage;

EvalImage.prototype.updatePosition = function(x, y) {
  this.x_ = x;
  this.y_ = y;
};

EvalImage.prototype.draw = function(parentElement) {
  if (this.style_ && this.color_) {
    this.element_.setAttribute(
      'fill',
      evalUtils.getFill(this.style_, this.color_)
    );
    this.element_.setAttribute(
      'stroke',
      evalUtils.getStroke(this.style_, this.color_)
    );
    this.element_.setAttribute(
      'opacity',
      evalUtils.getOpacity(this.style_, this.color_)
    );
  }

  var transform = '';
  transform += ' translate(' + this.x_ + ' ' + this.y_ + ')';

  if (this.scaleX_ !== 1.0 || this.scaleY !== 1.0) {
    transform += ' scale(' + this.scaleX_ + ' ' + this.scaleY_ + ')';
  }

  if (this.rotation_ !== 0) {
    transform += ' rotate(' + this.rotation_ + ')';
  }

  if (transform === '') {
    this.element_.removeAttribute('transform');
  } else {
    this.element_.setAttribute('transform', transform);
  }
};

EvalImage.prototype.place = function(x, y) {
  this.x_ = x;
  this.y_ = y;
};

EvalImage.prototype.rotate = function(degrees) {
  this.rotation_ += degrees;
};

EvalImage.prototype.scale = function(scaleX, scaleY) {
  this.scaleX_ = scaleX;
  this.scaleY_ = scaleY;
};

/**
 * Get child EvalObjects. overridden by children
 */
EvalImage.prototype.getChildren = function() {
  return [];
};
