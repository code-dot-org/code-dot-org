<%

var msg = require('./locale');

/**
 * Template to create function for filling in shovels.
 */
var fillShovelfuls = function(n) { -%>
  <block type="procedures_defnoreturn" x="20" y="200" editable="false"
    deletable="false">
    <mutation></mutation>
    <title name="NAME"><%= msg.fillN({shovelfuls: n}) %></title>
    <statement name="STACK">
      <block type="controls_repeat" editable="false" deletable="false">
        <title name="TIMES"><%= n %></title>
        <statement name="DO">
          <block type="maze_fill" editable="false" deletable="false">
          </block>
        </statement>
       </block>
    </statement>
  </block>
<% }; -%>

<%
/**
 * Template to create function for removing in shovels.
 */
var removeShovelfuls = function(n) { -%>
  <block type="procedures_defnoreturn" x="300" y="200" editable="false"
    deletable="false">
    <mutation></mutation>
    <title name="NAME"><%= msg.removeN({shovelfuls: n}) %></title>
    <statement name="STACK">
      <block type="controls_repeat" editable="false" deletable="false">
        <title name="TIMES"><%= n %></title>
        <statement name="DO">
          <block type="maze_dig" editable="false" deletable="false">
          </block>
        </statement>
       </block>
    </statement>
  </block>
<% }; %>

<% if (page === 1) { -%>
  <% if (level === 1) { -%>
    <block type="maze_moveForward" x="70" y="70"></block>
  <% } else if (level === 2) { -%>
    <block type="maze_moveForward" x="70" y="70"></block>
  <% } else if (level === 3) { -%>
    <block type="maze_moveForward" x="70" y="70"></block>
  <% } else if (level === 4) { -%>
    <block type="maze_moveForward" x="70" y="70"></block>
  <% } else if (level === 5) { -%>
    <block type="maze_untilBlocked" x="70" y="70"></block>
  <% } else if (level === 6) { -%>
    <block type="maze_dig" x="70" y="70"></block>
  <% } else if (level === 7) { -%>
    <block type="maze_turn" x="70" y="70">
          <title name="DIR">turnRight</title>
    </block>
  <% } else if (level === 8) { -%>
    <block type="maze_moveForward" x="70" y="70"></block>
  <% } else if (level === 9) { -%>
    <block type="maze_moveForward" x="70" y="70"></block>
  <% } else if (level === 10) { -%>
    <block type="maze_untilBlocked" x="70" y="70"></block>
  <% } else if (level === 11) { -%>
    <block type="maze_untilBlocked" x="70" y="70"></block>
  <% } -%>
<% } else if (page === 2) { -%>
  <% if (level === 2) { -%>
    <block type="maze_moveForward" x="20" y="70"></block>
    <% fillShovelfuls(5) -%>
  <% } else if (level === 3) { -%>
    <% fillShovelfuls(5) -%>
  <% } else if (level === 4) { -%>
    <% fillShovelfuls(5) -%>
    <block type="procedures_defnoreturn" x="300" y="200" editable="false"
      deletable="false">
      <mutation></mutation>
      <title name="NAME"><%= msg.removeN({shovelfuls: 7}) %></title>
    </block>
  <% } else if (level === 5) { -%>
    <block type="procedures_defnoreturn" x="20" y="200" editable="false"
      deletable="false">
      <mutation></mutation>
      <title name="NAME"><%= msg.removeN({shovelfuls: 6}) %></title>
    </block>
  <% } else if (level === 6) { -%>
    <% fillShovelfuls(8) -%>
    <% removeShovelfuls(8) -%>
  <% } else if (level === 7) { -%>
    <block type="procedures_callnoreturn" x="20" y="70" editable="false"
      deletable="false">
      <mutation name="<%= msg.avoidCowAndRemove() %>"></mutation>
    </block>
    <block type="procedures_defnoreturn" x="20" y="200" editable="false"
      deletable="false">
      <mutation></mutation>
      <title name="NAME"><%= msg.avoidCowAndRemove() %></title>
    </block>
  <% } else if (level === 8) { -%>
    <block type="procedures_defnoreturn" x="20" y="200" editable="false"
      deletable="false">
      <mutation></mutation>
      <title name="NAME"><%= msg.avoidCowAndRemove() %></title>
      <statement name="STACK">
        <block type="maze_turn" editable="false" deletable="false">
          <title name="DIR">turnLeft</title>
          <next>
            <block type="maze_moveForward" editable="false" deletable="false">
              <next>
                <block type="maze_turn" editable="false" deletable="false">
                  <title name="DIR">turnRight</title>
                  <next>
                    <block type="maze_moveForward" editable="false"
                      deletable="false">
                      <next>
                        <block type="maze_moveForward" editable="false"
                          deletable="false">
                          <next>
                            <block type="maze_turn" editable="false"
                              deletable="false">
                              <title name="DIR">turnRight</title>
                              <next>
                                <block type="maze_moveForward"
                                  editable="false" deletable="false">
                                  <next>
                                    <block type="maze_dig"
                                      editable="false" deletable="false">
                                      <next>
                                        <block type="maze_turn"
                                          editable="false" deletable="false">
                                          <title name="DIR">turnLeft</title>
                                        </block>
                                      </next>
                                    </block>
                                  </next>
                                </block>
                              </next>
                            </block>
                          </next>
                        </block>
                      </next>
                    </block>
                  </next>
                </block>
              </next>
            </block>
          </next>
        </block>
      </statement>
    </block>
  <% } else if (level === 9) { -%>
    <block type="procedures_defnoreturn" x="20" y="200" editable="false"
      deletable="false">
      <mutation></mutation>
      <title name="NAME"><%= msg.removeStack({shovelfuls: 4}) %></title>
      <statement name="STACK">
        <block type="maze_turn" editable="false" deletable="false">
          <title name="DIR">turnLeft</title>
          <next>
            <block type="controls_repeat" editable="false" deletable="false">
              <title name="TIMES">4</title>
              <statement name="DO">
                <block type="maze_dig" editable="false"
                  deletable="false">
                  <next>
                    <block type="maze_moveForward" editable="false"
                      deletable="false"></block>
                  </next>
                </block>
              </statement>
              <next>
                <block type="maze_turn" editable="false" deletable="false">
                  <title name="DIR">turnRight</title>
                  <next>
                    <block type="maze_turn" editable="false" deletable="false">
                      <title name="DIR">turnRight</title>
                      <next>
                        <block type="controls_repeat" editable="false"
                          deletable="false">
                          <title name="TIMES">4</title>
                          <statement name="DO">
                            <block type="maze_moveForward" editable="false"
                              deletable="false"></block>
                          </statement>
                          <next>
                            <block type="maze_turn" editable="false"
                              deletable="false">
                              <title name="DIR">turnLeft</title>
                            </block>
                          </next>
                        </block>
                      </next>
                    </block>
                  </next>
                </block>
              </next>
            </block>
          </next>
        </block>
      </statement>
    </block>
  <% } else if (level === 10) { -%>
    <block type="procedures_defnoreturn" x="20" y="200" editable="false"
      deletable="false">
      <mutation></mutation>
      <title name="NAME"><%= msg.removeStack({shovelfuls: 4}) %></title>
      <statement name="STACK">
        <block type="maze_turn" editable="false" deletable="false">
          <title name="DIR">turnLeft</title>
          <next>
            <block type="controls_repeat" editable="false" deletable="false">
              <title name="TIMES">4</title>
              <statement name="DO">
                <block type="maze_dig" editable="false"
                  deletable="false">
                  <next>
                    <block type="maze_moveForward" editable="false"
                      deletable="false"></block>
                  </next>
                </block>
              </statement>
              <next>
                <block type="maze_turn" editable="false" deletable="false">
                  <title name="DIR">turnRight</title>
                  <next>
                    <block type="maze_turn" editable="false" deletable="false">
                      <title name="DIR">turnRight</title>
                      <next>
                        <block type="controls_repeat" editable="false"
                          deletable="false">
                          <title name="TIMES">4</title>
                          <statement name="DO">
                            <block type="maze_moveForward" editable="false"
                              deletable="false"></block>
                          </statement>
                          <next>
                            <block type="maze_turn" editable="false"
                              deletable="false">
                              <title name="DIR">turnLeft</title>
                            </block>
                          </next>
                        </block>
                      </next>
                    </block>
                  </next>
                </block>
              </next>
            </block>
          </next>
        </block>
      </statement>
    </block>
    <block type="procedures_defnoreturn" x="300" y="200" editable="false"
      deletable="false">
      <mutation></mutation>
      <title name="NAME"><%= msg.fillStack({shovelfuls: 2}) %></title>
      <statement name="STACK">
        <block type="maze_turn" editable="false" deletable="false">
          <title name="DIR">turnLeft</title>
          <next>
            <block type="controls_repeat" editable="false" deletable="false">
              <title name="TIMES">2</title>
              <statement name="DO">
                <block type="maze_fill" editable="false"
                  deletable="false">
                  <next>
                    <block type="maze_moveForward" editable="false"
                      deletable="false"></block>
                  </next>
                </block>
              </statement>
              <next>
                <block type="maze_turn" editable="false" deletable="false">
                  <title name="DIR">turnRight</title>
                  <next>
                    <block type="maze_turn" editable="false" deletable="false">
                      <title name="DIR">turnRight</title>
                      <next>
                        <block type="controls_repeat" editable="false"
                          deletable="false">
                          <title name="TIMES">2</title>
                          <statement name="DO">
                            <block type="maze_moveForward" editable="false"
                              deletable="false"></block>
                          </statement>
                          <next>
                            <block type="maze_turn" editable="false"
                              deletable="false">
                              <title name="DIR">turnLeft</title>
                            </block>
                          </next>
                        </block>
                      </next>
                    </block>
                  </next>
                </block>
              </next>
            </block>
          </next>
        </block>
      </statement>
    </block>
  <% } else if (level === 11) { -%>
    <block type="procedures_defnoreturn" x="20" y="200" editable="false"
      deletable="false">
      <mutation></mutation>
      <title name="NAME"><%= msg.removeAndAvoidTheCow() %></title>
      <statement name="STACK">
        <block type="maze_dig" editable="false" deletable="false">
          <next>
            <block type="maze_turn" editable="false" deletable="false">
              <title name="DIR">turnLeft</title>
              <next>
                <block type="maze_moveForward" editable="false"
                  deletable="false">
                  <next>
                    <block type="maze_turn" editable="false" deletable="false">
                      <title name="DIR">turnRight</title>
                      <next>
                        <block type="maze_moveForward" editable="false"
                          deletable="false">
                          <next>
                            <block type="maze_moveForward" editable="false"
                              deletable="false">
                              <next>
                                <block type="maze_turn" editable="false"
                                  deletable="false">
                                  <title name="DIR">turnRight</title>
                                  <next>
                                    <block type="maze_moveForward"
                                      editable="false" deletable="false">
                                      <next>
                                        <block type="maze_turn"
                                          editable="false" deletable="false">
                                          <title name="DIR">turnLeft
                                          </title>
                                        </block>
                                      </next>
                                    </block>
                                  </next>
                                </block>
                              </next>
                            </block>
                          </next>
                        </block>
                      </next>
                    </block>
                  </next>
                </block>
              </next>
            </block>
          </next>
        </block>
      </statement>
    </block>
  <% } -%>
<% } else if (page === 3) { -%>
  <% if (level === 1) { -%>
    <block type="maze_moveForward" x="70" y="70">
      <next>
        <block type="maze_turn">
          <title name="DIR">turnLeft</title>
          <next>
            <block type="maze_moveForward">
              <next>
                <block type="maze_dig">
                  <next>
                    <block type="maze_turn">
                      <title name="DIR">turnRight</title>
                      <next>
                        <block type="maze_moveForward">
                          <next>
                            <block type="maze_fill"></block>
                          </next>
                        </block>
                      </next>
                    </block>
                  </next>
                </block>
              </next>
            </block>
          </next>
        </block>
      </next>
    </block>
  <% } else if (level === 2) { -%>
    <block type="maze_moveForward" x="70" y="70">
      <next>
        <block type="maze_moveForward">
          <next>
            <block type="maze_moveForward">
              <next>
                <block type="maze_moveForward">
                  <next>
                    <block type="maze_dig"></block>
                  </next>
                </block>
              </next>
            </block>
          </next>
        </block>
      </next>
    </block>
  <% } else if (level === 3) { -%>
    <block type="maze_moveForward" x="70" y="70">
      <next>
        <block type="maze_turn">
          <title name="DIR">turnLeft</title>
          <next>
            <block type="maze_moveForward">
              <next>
                <block type="controls_repeat">
                  <title name="TIMES">10</title>
                  <statement name="DO">
                    <block type="maze_dig"></block>
                  </statement>
                  <next>
                    <block type="maze_turn">
                      <title name="DIR">turnRight</title>
                      <next>
                        <block type="maze_moveForward">
                          <next>
                            <block type="maze_turn">
                              <title name="DIR">turnLeft</title>
                              <next>
                                <block type="maze_moveForward">
                                  <next>
                                    <block type="controls_repeat">
                                      <title name="TIMES">10</title>
                                      <statement name="DO">
                                        <block type="maze_dig"></block>
                                      </statement>
                                    </block>
                                  </next>
                                </block>
                              </next>
                            </block>
                          </next>
                        </block>
                      </next>
                    </block>
                  </next>
                </block>
              </next>
            </block>
          </next>
        </block>
      </next>
    </block>
  <% } else if (level === 4) { -%>
    <block type="controls_repeat" x="70" y="70">
      <title name="TIMES">5</title>
      <statement name="DO">
        <block type="maze_moveForward"></block>
      </statement>
      <next>
        <block type="maze_untilBlockedOrNotClear">
          <title name="DIR">pilePresent</title>
          <statement name="DO">
            <block type="maze_fill"></block>
          </statement>
        </block>
      </next>
    </block>
  <% } else if (level === 5) { -%>
    <block type="controls_repeat" x="70" y="70">
      <title name="TIMES">7</title>
      <statement name="DO">
        <block type="maze_moveForward">
          <next>
            <block type="maze_dig">
              <next>
                <block type="maze_turn">
                  <title name="DIR">turnLeft</title>
                  <next>
                    <block type="maze_moveForward">
                      <next>
                        <block type="maze_turn">
                          <title name="DIR">turnRight</title>
                        </block>
                      </next>
                    </block>
                  </next>
                </block>
              </next>
            </block>
          </next>
        </block>
      </statement>
    </block>
  <% } else if (level === 6) { -%>
    <block type="controls_repeat" x="70" y="70">
      <title name="TIMES">7</title>
      <statement name="DO">
        <block type="maze_moveForward">
          <next>
            <block type="karel_if">
              <title name="DIR">pilePresent</title>
              <statement name="DO">
                <block type="maze_dig"></block>
              </statement>
              <next>
                <block type="maze_turn">
                  <title name="DIR">turnLeft</title>
                  <next>
                    <block type="maze_moveForward">
                      <next>
                        <block type="maze_turn">
                          <title name="DIR">turnRight</title>
                        </block>
                      </next>
                    </block>
                  </next>
                </block>
              </next>
            </block>
          </next>
        </block>
      </statement>
    </block>
  <% } else if (level === 7) { -%>
    <block type="procedures_callnoreturn" x="20" y="70"
      editable="false" deletable="false">
      <mutation name="<%= msg.removeSquare() %>"></mutation>
    </block>
    <block type="procedures_defnoreturn" x="20" y="200" editable="false" deletable="false">
      <mutation></mutation>
      <title name="NAME"><%= msg.removeSquare() %></title>
      <statement name="STACK">
        <block type="controls_repeat">
          <title name="TIMES">4</title>
          <statement name="DO">
            <block type="controls_repeat">
              <title name="TIMES">2</title>
              <statement name="DO">
                <block type="maze_moveForward">
                  <next>
                    <block type="maze_dig"></block>
                  </next>
                </block>
              </statement>
              <next>
                <block type="maze_turn">
                  <title name="DIR">turnLeft</title>
                </block>
              </next>
            </block>
          </statement>
        </block>
      </statement>
    </block>
  <% } else if (level === 8) { -%>
    <block type="procedures_callnoreturn" x="20" y="70">
      <mutation name="<%= msg.fillSquare() %>"></mutation>
      <next>
        <block type="controls_repeat">
          <title name="TIMES">5</title>
          <statement name="DO">
            <block type="maze_moveForward"></block>
          </statement>
          <next>
            <block type="procedures_callnoreturn">
              <mutation name="<%= msg.removeSquare() %>"></mutation>
            </block>
          </next>
        </block>
      </next>
    </block>
    <block type="procedures_defnoreturn" deletable="false"
      editable="false" x="20" y="250">
      <mutation></mutation>
      <title name="NAME"><%= msg.removeSquare() %></title>
      <statement name="STACK">
        <block type="controls_repeat">
          <title name="TIMES">4</title>
          <statement name="DO">
            <block type="controls_repeat">
              <title name="TIMES">2</title>
              <statement name="DO">
                <block type="maze_moveForward">
                  <next>
                    <block type="maze_dig"></block>
                  </next>
                </block>
              </statement>
              <next>
                <block type="maze_turn">
                  <title name="DIR">turnLeft</title>
                </block>
              </next>
            </block>
          </statement>
        </block>
      </statement>
    </block>
    <block type="procedures_defnoreturn" deletable="false"
      editable="false" x="350" y="250">
      <mutation></mutation>
      <title name="NAME"><%= msg.fillSquare() %></title>
      <statement name="STACK">
        <block type="controls_repeat">
          <title name="TIMES">4</title>
          <statement name="DO">
            <block type="controls_repeat">
              <title name="TIMES">2</title>
              <statement name="DO">
                <block type="maze_moveForward">
                  <next>
                    <block type="maze_fill"></block>
                  </next>
                </block>
              </statement>
              <next>
                <block type="maze_turn">
                  <title name="DIR">turnLeft</title>
                </block>
              </next>
            </block>
          </statement>
        </block>
      </statement>
    </block>
  <% } else if (level === 9) { -%>
    <block type="controls_for" inline="true" x="20" y="70">
      <title name="VAR">counter</title>
      <value name="FROM">
        <block type="math_number">
          <title name="NUM">1</title>
        </block>
      </value>
      <value name="TO">
        <block type="math_number">
          <title name="NUM">6</title>
        </block>
      </value>
      <value name="BY">
        <block type="math_number">
          <title name="NUM">1</title>
        </block>
      </value>
      <statement name="DO">
        <block type="procedures_callnoreturn" inline="false">
          <mutation name="<%= msg.removePile() %>">
            <arg name="<%= msg.heightParameter() %>"></arg>
          </mutation>
          <value name="ARG0">
            <block type="math_number">
              <title name="NUM">1</title>
            </block>
          </value>
          <next>
            <block type="maze_moveForward"></block>
          </next>
        </block>
      </statement>
    </block>
    <block type="procedures_defnoreturn" x="20" y="250" editable="false" deletable="false">
      <mutation>
        <arg name="<%= msg.heightParameter() %>"></arg>
      </mutation>
      <title name="NAME"><%= msg.removePile() %></title>
      <statement name="STACK">
        <block type="controls_repeat_ext" inline="true">
          <value name="TIMES">
            <block type="math_number">
              <title name="NUM">1</title>
            </block>
          </value>
          <statement name="DO">
            <block type="maze_dig"></block>
          </statement>
        </block>
      </statement>
    </block>
  <% } -%>
<% } -%>
