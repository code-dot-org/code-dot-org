{"version":3,"sources":["droplet-full.js"],"names":["f","exports","module","define","amd","g","window","global","self","this","droplet","e","t","n","r","s","o","u","a","require","i","Error","code","l","call","length","1","2","arguments","apply","dup","3","kMaxLength","Buffer","TYPED_ARRAY_SUPPORT","arg","parent","undefined","fromNumber","fromString","fromObject","that","allocate","checked","string","encoding","byteLength","write","object","isBuffer","fromBuffer","isArray","fromArray","TypeError","ArrayBuffer","buffer","fromTypedArray","fromArrayBuffer","fromArrayLike","fromJsonObject","copy","array","_augment","Uint8Array","type","data","__proto__","prototype","_isBuffer","poolSize","rootParent","RangeError","toString","SlowBuffer","subject","buf","len","loweredCase","utf8ToBytes","base64ToBytes","toLowerCase","slowToString","start","end","Infinity","hexSlice","utf8Slice","asciiSlice","binarySlice","base64Slice","utf16leSlice","hexWrite","offset","Number","remaining","strLen","parsed","parseInt","substr","isNaN","utf8Write","blitBuffer","asciiWrite","asciiToBytes","binaryWrite","base64Write","ucs2Write","utf16leToBytes","base64","fromByteArray","slice","Math","min","res","firstByte","codePoint","bytesPerSequence","secondByte","thirdByte","fourthByte","tempCodePoint","push","decodeCodePointsArray","codePoints","MAX_ARGUMENTS_LENGTH","String","fromCharCode","ret","out","toHex","bytes","checkOffset","ext","checkInt","value","max","objectWriteUInt16","littleEndian","j","objectWriteUInt32","checkIEEE754","writeFloat","noAssert","ieee754","writeDouble","base64clean","str","stringtrim","replace","INVALID_BASE64_RE","trim","units","leadSurrogate","charCodeAt","byteArray","c","hi","lo","toByteArray","src","dst","INSPECT_MAX_BYTES","Bar","arr","foo","constructor","subarray","b","compare","x","y","isEncoding","concat","list","pos","item","equals","inspect","match","join","indexOf","val","byteOffset","arrayIndexOf","foundIndex","get","console","log","readUInt8","set","v","writeUInt8","isFinite","swap","toJSON","Array","_arr","newBuf","sliceLen","readUIntLE","mul","readUIntBE","readUInt16LE","readUInt16BE","readUInt32LE","readUInt32BE","readIntLE","pow","readIntBE","readInt8","readInt16LE","readInt16BE","readInt32LE","readInt32BE","readFloatLE","read","readFloatBE","readDoubleLE","readDoubleBE","writeUIntLE","writeUIntBE","floor","writeUInt16LE","writeUInt16BE","writeUInt32LE","writeUInt32BE","writeIntLE","limit","sub","writeIntBE","writeInt8","writeInt16LE","writeInt16BE","writeInt32LE","writeInt32BE","writeFloatLE","writeFloatBE","writeDoubleLE","writeDoubleBE","target","targetStart","_set","fill","toArrayBuffer","BP","toLocaleString","base64-js","isarray","4","decode","elt","PLUS","PLUS_URL_SAFE","SLASH","SLASH_URL_SAFE","NUMBER","UPPER","LOWER","b64ToByteArray","b64","L","tmp","placeHolders","charAt","Arr","uint8ToBase64","uint8","encode","num","temp","extraBytes","output","base64js","5","isLE","mLen","nBytes","m","eLen","eMax","eBias","nBits","d","NaN","rt","abs","LN2","6","7","EventEmitter","_events","_maxListeners","isFunction","isNumber","isObject","isUndefined","defaultMaxListeners","setMaxListeners","emit","er","handler","args","listeners","error","addListener","listener","newListener","warned","trace","on","once","removeListener","fired","position","splice","removeAllListeners","key","listenerCount","emitter","8","Object","create","ctor","superCtor","super_","enumerable","writable","configurable","TempCtor","9","obj","10","11","cleanUpNextTick","draining","currentQueue","queue","queueIndex","drainQueue","timeout","setTimeout","run","clearTimeout","Item","fun","noop","process","nextTick","title","browser","env","argv","version","versions","off","binding","name","cwd","chdir","dir","umask","12","./lib/_stream_duplex.js","13","Duplex","options","Readable","Writable","readable","allowHalfOpen","onend","_writableState","ended","bind","objectKeys","keys","util","inherits","xs","method","./_stream_readable","./_stream_writable","_process","core-util-is","14","PassThrough","Transform","_transform","chunk","cb","./_stream_transform","15","ReadableState","stream","hwm","highWaterMark","defaultHwm","objectMode","pipes","pipesCount","flowing","endEmitted","reading","sync","needReadable","emittedReadable","readableListening","readableObjectMode","defaultEncoding","ranOut","awaitDrain","readingMore","decoder","StringDecoder","_readableState","Stream","readableAddChunk","state","addToFront","chunkInvalid","isNullOrUndefined","onEofChunk","unshift","emitReadable","maybeReadMore","needMoreData","roundUpToNextPowerOf2","MAX_HWM","p","howMuchToRead","isNull","isString","debug","emitReadable_","flow","maybeReadMore_","pipeOnDrain","EE","resume","resumeScheduled","resume_","fromList","stringMode","shift","cpy","endReadable","forEach","debuglog","setEncoding","enc","nOrig","doRead","_read","pipe","dest","pipeOpts","onunpipe","cleanup","onclose","onfinish","ondrain","onerror","ondata","needDrain","pause","unpipe","doEnd","stdout","stderr","endFn","dests","ev","fn","wrap","paused","_fromList","./_stream_duplex","events","string_decoder/","16","TransformState","afterTransform","needTransform","transforming","writecb","writechunk","ts","_transformState","rs","_flush","done","ws","_write","writeencoding","17","WriteReq","callback","WritableState","writableObjectMode","ending","finished","noDecode","decodeStrings","writing","corked","bufferProcessing","onwrite","writelen","pendingcb","prefinished","errorEmitted","writeAfterEnd","validChunk","valid","decodeChunk","writeOrBuffer","doWrite","writev","_writev","onwriteError","onwriteStateUpdate","needFinish","clearBuffer","afterWrite","onwriteDrain","finishMaybe","cbs","err","entry","prefinish","need","endWritable","cork","uncork","18","objectToString","isBoolean","isSymbol","isRegExp","re","isDate","isError","isPrimitive","../../../../insert-module-globals/node_modules/is-buffer/index.js","19","./lib/_stream_passthrough.js","20","READABLE_STREAM","./lib/_stream_readable.js","./lib/_stream_transform.js","./lib/_stream_writable.js","21","22","23","source","didOnEnd","destroy","_isStdio","readable-stream/duplex.js","readable-stream/passthrough.js","readable-stream/readable.js","readable-stream/transform.js","readable-stream/writable.js","24","assertEncoding","isBufferEncoding","passThroughWrite","utf16DetectIncompleteChar","charReceived","charLength","base64DetectIncompleteChar","surrogateSize","detectIncompleteChar","charBuffer","charStr","available","charCode","size","substring","cr","25","sax","SAXParser","strict","opt","parser","clearBuffers","q","bufferCheckPosition","MAX_BUFFER_LENGTH","lowercase","lowercasetags","looseCase","tags","closed","closedRoot","sawRoot","tag","noscript","S","BEGIN","strictEntities","ENTITIES","XML_ENTITIES","attribList","xmlns","ns","rootNS","trackPosition","line","column","checkBufferLength","maxAllowed","maxActual","buffers","closeText","emitNode","cdata","script","flushBuffers","createStream","SAXStream","_parser","me","_decoder","streamWraps","defineProperty","h","charClass","split","reduce","is","charclass","not","event","nodeType","textNode","textopts","text","normalize","strictFail","BEGIN_WHITESPACE","TEXT","message","newTag","tagName","attributes","qname","attribute","qualName","prefix","local","attrib","attribName","hasOwnProperty","attribValue","qn","XML_NAMESPACE","XMLNS_NAMESPACE","openTag","selfClosing","uri","JSON","stringify","nv","isSelfClosing","SCRIPT","closeTag","closeTo","pop","parseEntity","entity","entityLC","numStr","fromCodePoint","OPEN_WAKA","startTagPosition","whitespace","starti","TEXT_ENTITY","SCRIPT_ENDING","CLOSE_TAG","SGML_DECL","sgmlDecl","nameStart","OPEN_TAG","PROC_INST","procInstName","procInstBody","pad","toUpperCase","CDATA","COMMENT","comment","DOCTYPE","doctype","quote","SGML_DECL_QUOTED","DOCTYPE_DTD","DOCTYPE_QUOTED","DOCTYPE_DTD_QUOTED","COMMENT_ENDING","COMMENT_ENDED","CDATA_ENDING","CDATA_ENDING_2","PROC_INST_ENDING","PROC_INST_BODY","body","nameBody","OPEN_TAG_SLASH","ATTRIB","ATTRIB_NAME","ATTRIB_VALUE","ATTRIB_NAME_SAW_WHITE","ATTRIB_VALUE_QUOTED","ATTRIB_VALUE_UNQUOTED","ATTRIB_VALUE_ENTITY_Q","ATTRIB_VALUE_CLOSED","attribEnd","ATTRIB_VALUE_ENTITY_U","CLOSE_TAG_SAW_WHITE","returnState","EVENTS","getPrototypeOf","close","flush","ex","filter","SD","number","letter","xml","STATE","COMMENT_STARTING","amp","gt","lt","quot","apos","AElig","Aacute","Acirc","Agrave","Aring","Atilde","Auml","Ccedil","ETH","Eacute","Ecirc","Egrave","Euml","Iacute","Icirc","Igrave","Iuml","Ntilde","Oacute","Ocirc","Ograve","Oslash","Otilde","Ouml","THORN","Uacute","Ucirc","Ugrave","Uuml","Yacute","aacute","acirc","aelig","agrave","aring","atilde","auml","ccedil","eacute","ecirc","egrave","eth","euml","iacute","icirc","igrave","iuml","ntilde","oacute","ocirc","ograve","oslash","otilde","ouml","szlig","thorn","uacute","ucirc","ugrave","uuml","yacute","yuml","reg","nbsp","iexcl","cent","pound","curren","yen","brvbar","sect","uml","ordf","laquo","shy","macr","deg","plusmn","sup1","sup2","sup3","acute","micro","para","middot","cedil","ordm","raquo","frac14","frac12","frac34","iquest","times","divide","OElig","oelig","Scaron","scaron","Yuml","fnof","circ","tilde","Alpha","Beta","Gamma","Delta","Epsilon","Zeta","Eta","Theta","Iota","Kappa","Lambda","Mu","Nu","Xi","Omicron","Pi","Rho","Sigma","Tau","Upsilon","Phi","Chi","Psi","Omega","alpha","beta","gamma","delta","epsilon","zeta","eta","theta","iota","kappa","lambda","mu","nu","xi","omicron","pi","rho","sigmaf","sigma","tau","upsilon","phi","chi","psi","omega","thetasym","upsih","piv","ensp","emsp","thinsp","zwnj","zwj","lrm","rlm","ndash","mdash","lsquo","rsquo","sbquo","ldquo","rdquo","bdquo","dagger","Dagger","bull","hellip","permil","prime","Prime","lsaquo","rsaquo","oline","frasl","euro","image","weierp","real","trade","alefsym","larr","uarr","rarr","darr","harr","crarr","lArr","uArr","rArr","dArr","hArr","forall","part","exist","empty","nabla","isin","notin","ni","prod","sum","minus","lowast","radic","prop","infin","ang","and","or","cap","cup","int","there4","sim","cong","asymp","ne","equiv","le","ge","sup","nsub","sube","supe","oplus","otimes","perp","sdot","lceil","rceil","lfloor","rfloor","lang","rang","loz","spades","clubs","hearts","diams","stringFromCharCode","highSurrogate","lowSurrogate","codeUnits","index","result","string_decoder","26","BACKSPACE_KEY","CONTROL_KEYS","CURSOR_HEIGHT_DECREASE","CURSOR_UNFOCUSED_OPACITY","CURSOR_WIDTH_DECREASE","CapturePoint","CrossDocumentLocation","DEBUG_FLAG","DOWN_ARROW_KEY","DROPDOWN_SCROLLBAR_PADDING","ENTER_KEY","Editor","EditorState","FloatingBlockRecord","FloatingOperation","GRAY_BLOCK_BORDER","GRAY_BLOCK_COLOR","GRAY_BLOCK_MARGIN","LEFT_ARROW_KEY","MAX_DROP_DISTANCE","META_KEYS","MIN_DRAG_DISTANCE","PALETTE_LEFT_MARGIN","PALETTE_MARGIN","PALETTE_TOP_MARGIN","QUAD","RIGHT_ARROW_KEY","RememberedSocketRecord","TAB_KEY","TOUCH_SELECTION_TIMEOUT","TYPE_FROM_SEVERITY","TYPE_SEVERITY","UP_ARROW_KEY","Y_KEY","Z_KEY","command_modifiers","command_pressed","draw","editorBindings","getMostSevereAnnotationType","getOffsetLeft","getOffsetTop","helper","hook","isOSX","last_","model","modes","parseBlock","ref","ref1","unsortedEditorBindings","userAgent","validateLassoSelection","view","navigator","test","metaKey","ctrlKey","populate","resize","resize_palette","redraw_main","redraw_palette","rebuild_palette","mousedown","mousemove","mouseup","dblclick","keydown","keyup","priority","wrapperElement","options1","dispatchKeyEvent","dispatchMouseEvent","elements","eventName","fn1","ref2","ref3","ref4","ref5","ref6","ref7","useBlockMode","readOnly","paletteGroups","palette","showPaletteInTextMode","paletteEnabled","enablePaletteAtStart","dropIntoAceAtLineStart","allowFloatingBlocks","mode","modeOptions","coffee","Draw","gutterDecorations","debugging","dropletElement","document","createElement","className","tabIndex","appendChild","style","backgroundColor","mainCanvas","width","height","mainCtx","getContext","paletteWrapper","paletteElement","paletteCanvas","paletteCtx","left","top","bottom","offsetWidth","refreshFontCapital","standardViewSettings","padding","indentWidth","textHeight","getFontHeight","indentTongueHeight","tabOffset","tabWidth","tabHeight","tabSideWidth","dropAreaHeight","indentDropAreaMinWidth","emptySocketWidth","emptyLineHeight","highlightAreaHeight","shadowBlur","ctx","bindings","View","paletteView","extend","showDropdowns","showDropdownInPalette","dragView","addEventListener","_this","resizeBlockMode","k","len1","trackPoint","which","Point","clientX","clientY","preventDefault","returnValue","results","dragCover","element","tree","Document","redrawMain","rebuildPalette","textModeAtStart","setEditorState","setMode","modeClass","setValue","getValue","getMode","setReadOnly","aceEditor","getReadOnly","resizeTextMode","resizeAceElement","clientHeight","clientWidth","resizeGutter","offsetHeight","gutter","transitionContainer","resizePalette","resizePaletteHighlight","resizeNubby","resizeMainScroller","resizeLassoCanvas","resizeCursorCanvas","resizeDragCanvas","scrollOffsets","main","mainScroller","scrollTop","scrollLeft","setTransform","highlightCtx","cursorCtx","paletteHeader","paletteHighlightCtx","currentlyUsingBlocks","clearMain","opts","boundingRectangle","clearRect","setTopNubbyStyle","color","nubbyHeight","nubbyColor","topNubbyPath","Path","bevel","fillColor","drawFloatingBlock","record","startWidth","endWidth","rect","blockView","bottomTextPosition","oldBounds","path","rectangle","startHeight","getViewNodeFor","block","layout","Rectangle","totalBounds","distanceToBase","lineLength","below","fontSize","bounds","grayBox","grayBoxPath","NoRectangle","right","noclip","dotted","strokeColor","lineWidth","globalAlpha","fillStyle","fillText","startComment","above","endComment","grayscale","selected","noText","unite","restore","layoutResult","oldScroll","currentlyAnimating_suprressRedraw","setGlobalFontSize","setCtx","save","clip","measureText","floatingBlocks","redrawCursors","redrawHighlights","changeEventVersion","suppressAceChangeEvent","session","getScrollTop","setAceValue","setScrollTop","fireEvent","id","info","clearHighlightCanvas","markedLines","inDisplay","getHighlightPath","markedBlocks","extraMarks","draggingBlock","maskFloatingPaths","getDocument","redrawLassoHighlight","clearCursorCanvas","cursorCanvas","cursorAtSocket","redrawTextHighlights","lassoSelection","drawCursor","strokeCursor","determineCursorPosition","clearPalette","clearPaletteHighlightCanvas","paletteHighlightCanvas","redrawPalette","boundingRect","lastBottomEdge","paletteBlockView","currentPaletteBlocks","getBounds","absoluteOffset","el","point","offsetLeft","offsetTop","offsetParent","trackerPointToMain","gbr","getBoundingClientRect","trackerPointToPalette","trackerPointIsInElement","trackerPointIsInMain","trackerPointIsInMainScroller","trackerPointIsInGutter","trackerPointIsInPalette","trackerPointIsInAce","aceElement","hitTest","head","seek","container","contains","next","focus","scrollTo","removeBlankLines","tail","prev","spliceOut","List","undoStack","redoStack","shiftKey","redo","undo","root","floats","other","getSerializedEditorState","map","clearUndoStack","currentValue","operation","setCursor","cursor","popUndo","performFloatingOperation","perform","getPreserves","rememberedSockets","clone","correctCursor","pushUndo","popRedo","undoCapture","dropletDocument","documentIndex","socket","location","node","remove","getDocuments","fromCrossDocumentLocation","populateSocket","prepareNode","spliceIn","toCrossDocumentLocation","textContent","insert","socket1","text1","before","after","updates","adjustPosToLineStart","getLine","row","getLength","validCursorPosition","context","leading","trailing","Container","getLeadingText","getTrailingText","parens","getReader","setLeadingText","setTrailingText","clickedPoint","clickedBlock","clickedBlockPaletteEntry","draggingOffset","lastHighlight","dragCanvas","dragCtx","highlightCanvas","clearDrag","documents","getFromLocation","getLocation","box","hitTestResult","mainPoint","consumedHitTest","handleTextInputClick","token","dumpNodeForDebug","absorbCache","hitTestBlock","stringifyInPlace","addButtonRect","handleButton","populateBlock","subtractButtonRect","drawDraggingBlock","draggingBlockView","clearCache","screen","drawShadow","wouldDelete","palettePoint","acceptLevel","allowed","bound","dropPoint","expansion","viewNode","capturedPickup","from","magnitude","dragReplacing","upperLeftCorner","classes","lastExpansionText","dropPointQuadTree","init","w","StartToken","getAcceptLevel","FORBID","_droplet_node","begunTrash","getClosestDroppableBlock","isDebugMode","best","retrieve","distance","DISCOURAGE","highlightArea","getClosestDroppableBlockFromPosition","drag","drop","nextSibling","firstChild","dropBlock","expansionText","newBlock","renderer","screenToTextCoordinates","selection","moveToPosition","blur","opacity","discourageDropTimeout","firstChar","firstNonWhitespaceRegex","futureCursorLocation","hadTextToken","hasTextToken","indentation","leadingWhitespaceRegex","newBeginning","newIndex","nextLine","prevLine","rememberedSocketOffsets","skipInitialIndent","suffix","endDrag","spliceRememberedSocketOffsets","reparse","count","Location","exec","onTextInput","blockBegin","newRememberedSockets","offsets","block1","position1","inTree","addBlockAsFloatingBlock","newDocument","removeBlock","renderPoint","roundedSingletons","op","direction","index1","setPalette","parse","setParent","paletteGroup","paletteHeaderRow","innerHTML","currentPaletteMetadata","clickHandler","newPaletteBlocks","paletteGroupHeader","updatePalette","header","innerText","blocks","parsedBlocks","changePaletteGroup","group","curGroup","currentPaletteGroup","currentPaletteGroupHeader","currentPaletteIndex","handleTextInputClickInPalette","paletteHighlightPath","currentHighlightedPaletteBlock","hoverDiv","paletteScrollerStuffing","viewOrChildrenContains","setAttribute","hiddenInput","inputLeft","inputTop","getCursor","textInputAnchor","textInputSelecting","oldFocusValue","keyCode","selectionEnd","highlightFlashShow","redrawTextInput","dropdownVisible","formatDropdown","endRow","newp","oldp","sameLength","startRow","treeView","selectionStart","deepCopy","glue","deepEquals","scrollIntoView","endPosition","startPosition","textFocusView","textPadding","hasDropdown","DROPDOWN_ARROW_WIDTH","strokeStyle","strokeRect","textInputHighlighted","fillRect","hideDropdown","originalTrigger","newList","originalText","originalUpdates","parseContext","wrapAtRoot","markBlock","traverseOneLevel","setTextSelectionRange","setSelectionRange","first","last","lines","TextToken","connect","NewlineToken","hitTestTextInput","isDroppable","getTextPosition","round","setTextInputAnchor","textInputHead","selectDoubleClick","setTextInputHead","editable","showDropdown","hitTestTextInputInPalette","dropdownElement","display","fontFamily","minWidth","getDropdownList","dropdown","generate","inPalette","dropdownItems","div","setText","paddingLeft","click","dropdownTop","scrollHeight","paddingRight","lassoSelectCanvas","lassoSelectCtx","lassoSelectAnchor","clearLassoSelectCanvas","clearLassoSelection","clickedLassoSelection","suppressLassoSelect","findLassoSelect","lassoRectangle","intersects","lassoSelectionDocument","lassoView","mainCanvasRectangle","tokensToInclude","EndToken","document1","location1","destination","validate","getDefaultSelectionRange","getTextLocation","scrollCursorIntoPosition","axis","scrollCursorToEndOfDocument","scrollToLine","ref8","deleteAtCursor","capturedBackspace","deleteLassoSelection","handwritten","cursorTarget","handwrittenBlocks","newSocket","newTextMarker","Block","Socket","newHandwrittenSocket","startSingleLineComment","ANY_DROP","socketLevel","BLOCK_ONLY","copyAceEditor","$gutterLayer","gutterWidth","setValue_raw","getAceValue","acemode","ace","edit","setTheme","setFontSize","getSession","setTabSize","currentlyAnimating","computePlaintextTranslationVectors","aceSession","corner","rownum","textElements","translationVectors","wrappedlines","indent","lineHeight","layerConfig","leftEdge","font","aceFontSize","documentToScreenRow","specialIndent","depth","performMeltAnimation","fadeTime","translateTime","aceScrollTop","fn2","paletteDisappearingWithMelt","textElement","translatingElements","findLineNumberAtCoordinate","scrollWidth","overflowX","overflowY","currentlyAnimating_suppressRedraw","whiteSpace","fontAscent","transition","getFirstVisibleRow","getLastVisibleRow","annotations","lineNumberWrapper","zIndex","overflow","parentNode","removeChild","success","parseFloat","getFontSize","performFreezeAnimation","setValueResult","paletteAppearingWithFreeze","$gutter","len2","editorHasFocus","enablePalette","enabled","activeElement","toggleBlocks","mainScrollerStuffing","paletteScroller","extraBottomHeight","metrics","fontMetrics","prettytop","fontDescent","descent","setFontSize_raw","tooltipElement","setFontFamily","setGlobalFontFamily","nextMarkedBlockId","markLine","getBlockOnLine","mark","getFromTextLocation","unmark","unmarkLine","clearLineMarks","lastHoveredLine","hoveredLine","hasEvent","trimWhitespace","setTrimWhitespace","newParse","removal","oldScrollTop","addEmptyLine","lastAceSeenValue","useBlocks","paletteVisibleInNewState","touchEventToPoint","changedTouches","queueLassoMousedown","lassoSelectStartTimeout","touchScrollAnchor","arcAngle","arcCenter","endAngle","startAngle","beginPath","lineCap","atan2","PI","arc","stroke","flashTimeout","highlightsCurrentlyShown","flash","highlightFlashHide","copyPasteInput","hasFocus","blurCursors","focusCursors","childObj","modelView","children","child","gutterVersion","lastGutterWidth","lineNumberTags","breakpoints","domEvent","getDocumentPosition","stop","clickedLine","setBreakpoint","redrawGutter","clearBreakpoint","clearBreakpoints","getBreakpoints","setAnnotations","base","addLineNumberForLine","lineDiv","pageX","pageY","paddingTop","paddingBottom","warning","coord","pivot","changedBox","setPaletteWidth","pressedVKey","pressedXKey","minIndent","trimLeft","overflowsX","documentDimensions","viewportDimensions","overflowsY","getLineMetrics","serialize","sort","../vendor/quadtree.js","./draw.coffee","./helper.coffee","./model.coffee","./modes.coffee","./view.coffee","27","_area","_intersects","avgColor","memoizedAvgColor","toRGB","twoDigitHex","zeroPad","hasProp","__super__","hex","rgb","factor","newRGB","x1","y1","sqrt","translate","vector","add","plus","toMagnitude","mag","clear","Size","swallow","overlap","toPath","superClass","_points","_cachedTranslation","_cacheFlag","_bounds","_clearCache","maxX","maxY","minX","minY","reverse","lastSide","rectSides","side","moveTo","lineTo","len3","setLineDash","offsetX","offsetY","oldValues","shadowColor","shadowOffsetY","shadowOffsetX","Text","point1","value1","wantedFont","setPosition","textBaseline","family","getGlobalFontSize","28","fontMetricsCache","MOSTLY_BLOCK","MOSTLY_VALUE","VALUE_ONLY","ENCOURAGE","DROPDOWN_ARROW_PADDING","trimRight","sources","getOwnPropertyNames","getOwnPropertyDescriptor","xmlPrettyPrint","xmlParser","ontext","escapeXMLText","onopentag","attr","onclosetag","fontHeight","canvas","capital","fontStyle","gp","lf","textTopAndBottom","testText","col","pixels","ceil","getImageData","ascent","baseline","clipLines","serializeShallowDict","dict","props","deserializeShallowDict","newObject","29","CATEGORIES","CLASS_EXCEPTIONS","DEFAULT_INDENT_DEPTH","JavaScriptParser","KNOWN_FUNCTIONS","LOGICAL_OPERATORS","NEVER_PAREN","NODE_CATEGORIES","OPERATOR_PRECEDENCES","STATEMENT_NODE_TYPES","acorn","isStandardForLoop","alert","prompt","console.log","*.toString","Math.abs","Math.acos","Math.asin","Math.atan","Math.atan2","Math.cos","Math.sin","Math.tan","Math.ceil","Math.floor","Math.round","Math.exp","Math.ln","Math.log10","Math.pow","Math.sqrt","Math.max","Math.min","Math.random","functions","returns","comments","arithmetic","logic","containers","assignments","loops","conditionals","command","errors","==","!=","===","!==","<","<=",">",">=","in","instanceof","||","&&","!","BinaryExpression","UnaryExpression","ConditionalExpression","LogicalExpression","FunctionExpression","FunctionDeclaration","AssignmentExpression","UpdateExpression","VariableDeclaration","ReturnStatement","IfStatement","SwitchStatement","ForStatement","ForInStatement","WhileStatement","DoWhileStatement","NewExpression","ObjectExpression","ArrayExpression","MemberExpression","BreakStatement","ThrowStatement","TryStatement","CallExpression","SequenceExpression","Identifier","++","--","~","*","/","%","+","-","<<",">>",">>>","&","^","|","categories","markRoot","locations","allowReturnOutsideFunction","fullNameArray","property","lookupKnownName","fname","full","identifier","wildcard","callee","anyobj","getAcceptsRule","default","NORMAL","getClasses","known","getPrecedence","operator","expression","lookupCategory","category","getColor","getSocketLevel","semicolon","semicolonLength","loc","getCaseIndentBounds","consequent","getIndentPrefix","indentDepth","isComment","indentAndCommentMarker","button","oldBlock","argCount","currentElif","elementCount","elseLocation","lastArgPosition","lastElPosition","lastParamPosition","maxArgs","minArgs","newLastArgPosition","newLastElPosition","newLastParamPosition","paramCount","alternate","params","argument","buttons","declaration","len4","len5","len6","len7","len8","len9","nodeBoundsStart","param","ref10","ref11","ref12","ref13","ref14","ref15","ref16","ref9","results1","results2","results3","results4","results5","results6","results7","results8","results9","showButtons","space","statement","switchCase","jsBlock","expressions","jsSocketAndMark","onFirstLine","lockZeroParamFunctions","addButton","subtractButton","addSocket","precedence","label","beginner","update","addIndent","flagToRemove","paramButtonsForUnknownFunctions","objectDropdown","declarations","properties","discriminant","cases","guard","finalizer","addBlock","Parser","pred","variableName","emptyIndent","wrapParser","../../vendor/acorn","../helper.coffee","../model.coffee","../parser.coffee","30","./controller.coffee","31","BlockEndToken","BlockStartToken","DocumentEndToken","DocumentStartToken","IndentEndToken","IndentStartToken","Operation","ReplaceOperation","SocketEndToken","SocketStartToken","TextLocation","Token","_id","Function","trigger","isTreeValid","hare","lastHare","stack","tortise","_droplet_debug_lastHare","beforeStart1","before1","beforeEnd1","afterStart1","after1","afterEnd1","beforeStart","beforeEnd","afterStart","afterEnd","start1","updateTokens","notifyChange","updateTextLocations","isFirstOnLine","isLastOnLine","assembler","correctParentTree","ephemeral","lineMarkStyles","_cloneEmpty","_firstChild","hasParent","getLinesToParent","selfClone","rawReplace","getNewlineBefore","getNewlineAfter","_serialize_header","_serialize_footer","contents","lineCount","addLineMark","removeLineMark","parent1","getSerializedLocation","getIndent","count1","row1","col1","answer","markup","warn","currentlyParenWrapped","emptyString","dropdownOnly","Indent","prefix1","_value","32","html","java","javascript","python","coffeescript","./languages/c.coffee","./languages/coffee.coffee","./languages/html.coffee","./languages/java.coffee","./languages/javascript.coffee","./languages/python.coffee","33","ParserFactory","_extend","hasSomeTextAfter","stripFlaggedBlocks","defaults","opts1","createParser","_parse","sortMarkup","applyMarkup","detectParenWrap","isParenWrapped","addMarkup","checkBounds","IllegalArgumentException","isDifferent","constructHandwrittenBlock","posAfterIndentAndCommentMarker","textPrefix","textPrefixToken","textToken","oldblock","lastIndex","markupOnLines","emptyLineColor","parseXML","tokens","handritten","nodeName","flagToStrip","CustomParser","CustomParserFactory","parseOptions","leadingFn","trailingFn","34","CARRIAGE_ARROW_INDENT","CARRIAGE_ARROW_NONE","CARRIAGE_ARROW_SIDEALONG","CARRIAGE_GROW_DOWN","DEFAULT_OPTIONS","DROPDOWN_ARROW_HEIGHT","DROP_TRIANGLE_COLOR","MULTILINE_END","MULTILINE_END_START","MULTILINE_MIDDLE","MULTILINE_START","NO","NO_MULTILINE","arrayEq","modulo","buttonWidth","buttonHeight","buttonPadding","minSocketWidth","invisibleSocketWidth","emptyLineWidth","bevelClip","colors","return","control","red","pink","purple","deeppurple","indigo","blue","lightblue","cyan","teal","green","lightgreen","lime","yellow","amber","orange","deeporange","brown","grey","bluegrey","option","BlockViewNode","ContainerViewNode","DocumentViewNode","GenericViewNode","IndentViewNode","ListViewNode","SocketViewNode","TextViewNode","createView","hasViewNodeFor","model1","view1","lastCoordinate","invalidate","lineChildren","multilineChildrenData","margins","topLineSticksToBottom","bottomLineSticksToTop","minDimensions","minDistanceToBase","dimensions","carriageArrow","bevels","changedBoundingBox","dropArea","computedVersion","startLine","endLine","computeChildren","computeCarriageArrow","computeMargins","parenttype","firstLeft","midLeft","lastLeft","firstRight","midRight","lastRight","firstMargins","midMargins","lastMargins","getMargins","computeBevels","computeMinDimensions","computeDimensions","force","changed","oldDimensions","oldDistanceToBase","computeBoundingBoxX","computeAllBoundingBoxX","computeGlue","computeBoundingBoxY","computeAllBoundingBoxY","computeOwnPath","computePath","maxRight","lastComputedLinePredicate","computeOwnDropArea","computeDropAreas","computeNewVersionNumber","drawSelf","debugDimensions","childView","debugAllDimensions","debugAllBoundingBoxes","base1","childLength","childObject","bottomMargin","buttonLine","childNode","desiredLine","lineChild","lineChildView","linesToExtend","minDimension","preIndentLines","childLeft","childLine","childMargins","childAbove","oldCarriageArrow","oldBevels","destinationBounds","glueTop","innerLeft","innerRight","leftmost","multilineBounds","multilineChild","multilineNode","multilineView","newPath","parentViewNode","rightmost","shouldAddTab","addTabReverse","addTab","oldFill","oldStroke","extraWidth","drawButton","dx","dy","buttonStart","buttonTop","firstRect","firstStart","firstTop","lastLine","lastRect","highlightAreaPoints","lastBoundsLeft","lastBoundsRight","isInvisibleSocket","dimension","lastFirstChildren","lastLastChildren","childRef","lastBounds","oldPoint","35","mod","setOptions","defaultOptions","has","sourceFile","isKeyword","ecmaVersion","isEcma6Keyword","isEcma5AndLessKeyword","raise","getLineInfo","input","SyntaxError","raisedAt","tokPos","makePredicate","words","compareTo","cats","cat","Position","tokCurLine","tokLineStart","initTokenState","tokRegexpAllowed","metParenL","inTemplate","skipSpace","finishToken","shouldSkipSpace","tokEnd","tokEndLoc","tokType","tokVal","beforeExpr","onToken","getCurrentToken","skipBlockComment","startLoc","onComment","lineBreak","skipLineComment","ch","inputLen","nonASCIIwhitespace","readToken_dot","readNumber","next2","_ellipsis","_dot","readToken_slash","readRegexp","finishOp","_assign","_slash","readToken_mult_modulo","_star","_modulo","readToken_pipe_amp","_logicalOR","_logicalAND","_bitwiseOR","_bitwiseAND","readToken_caret","_bitwiseXOR","readToken_plus_min","newline","lastEnd","readToken","_incDec","_plusMin","readToken_lt_gt","_bitShift","_relational","readToken_eq_excl","_equality","_arrow","_eq","_prefix","getTemplateToken","_string","_bquote","_dollarBraceL","_braceR","readTmplString","getTokenFromCode","_parenL","_parenR","_semi","_comma","_bracketL","_bracketR","_braceL","_colon","_question","readRadixNumber","readString","forceRegexp","tokStart","tokStartLoc","_eof","isIdentifierStart","readWord","tok","nonASCIIidentifierStart","escaped","inClass","content","mods","readWord1","RegExp","_regexp","readInt","radix","total","_num","startsWithDot","isFloat","octal","readCodePoint","unexpected","readHexChar","cu1","cu2","readEscapedChar","containsEsc","word","isIdentifierChar","esc","escStr","_name","keywordTypes","lastStart","lastEndLoc","setStrict","strct","lastIndexOf","Node","SourceLocation","startNode","directSourceFile","ranges","range","startNodeFrom","finishNode","isUseStrict","stmt","eat","canInsertSemicolon","strictSemicolons","expect","propName","toAssignable","allowSpread","checkType","kind","lastI","checkSpreadAssign","checkFunctionParam","nameHash","isStrictReservedWord","isStrictBadIdWord","checkPropClash","propHash","computed","isGetSet","checkLVal","expr","isBinding","elem","parseTopLevel","program","inFunction","inGenerator","labels","parseStatement","starttype","_break","_continue","parseBreakContinueStatement","keyword","_debugger","parseDebuggerStatement","_do","parseDoStatement","_for","parseForStatement","_function","parseFunctionStatement","_class","parseClass","_if","parseIfStatement","_return","parseReturnStatement","_switch","parseSwitchStatement","_throw","parseThrowStatement","_try","parseTryStatement","_var","_let","_const","parseVarStatement","_while","parseWhileStatement","_with","parseWithStatement","parseEmptyStatement","_export","parseExport","_import","parseImport","maybeName","parseExpression","parseLabeledStatement","parseExpressionStatement","isBreak","parseIdent","lab","loopLabel","parseParenExpression","parseFor","varKind","isLet","parseVar","_in","parseForIn","parseFunction","_else","switchLabel","cur","sawDefault","_case","_default","isCase","_catch","clause","guardedHandlers","_finally","isLoop","allowStrict","oldStrict","noIn","decl","parseExprAtom","noComma","parseMaybeAssign","parseMaybeConditional","isAssign","parseExprOps","parseExprOp","parseMaybeUnary","minPrec","prec","binop","isUpdate","parseExprSubscripts","postfix","parseSubscripts","noCalls","parseExprList","quasi","parseTemplate","_yield","parseYield","parseArrowExpression","raw","_null","_true","_false","atomValue","exprList","tokStartLoc1","tokStart1","parseComprehension","oldParenL","parseObj","_new","parseNew","parseSpread","quasis","cooked","allowTrailingCommas","isGenerator","shorthand","parsePropertyName","parseMethod","initFunction","rest","generator","isStatement","allowExpressionBody","parseFunctionParams","parseFunctionBody","hasDefaults","allowExpression","isExpression","oldInFunc","oldInGen","oldLabels","_extends","classBody","methodHash","staticMethodHash","allowTrailingComma","allowEmpty","elts","liberal","forbidReserved","isReservedWord3","isReservedWord5","specifiers","isBatch","parseExportSpecifiers","nodes","parseImportSpecifiers","delegate","of","inpt","endLoc","tokenize","getToken","jumpTo","reAllowed","break","case","catch","continue","debugger","do","else","finally","for","function","if","switch","throw","try","var","let","const","while","with","null","true","false","new","typeof","void","delete","class","extends","export","import","yield","tokTypes","bracketL","bracketR","braceL","braceR","parenL","parenR","comma","semi","colon","dot","ellipsis","question","slash","eq","eof","regexp","arrow","bquote","dollarBraceL","kw","ecma5AndLessKeywords","nonASCIIidentifierStartChars","nonASCIIidentifier","36","browserify_shim__define__module__export__","maxChildren","maxDepth","items","instance","findOverlappingNodes","findInsertNode","oldChildren","childrenDepth","getNodes","selector"],"mappings":"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","file":"droplet-full.min.js","sourcesContent":["/* Droplet.\n * Copyright (c) 2017 Anthony Bau.\n * MIT License.\n *\n * Date: 2017-06-19\n */\n(function(f){if(typeof exports===\"object\"&&typeof module!==\"undefined\"){module.exports=f()}else if(typeof define===\"function\"&&define.amd){define([],f)}else{var g;if(typeof window!==\"undefined\"){g=window}else if(typeof global!==\"undefined\"){g=global}else if(typeof self!==\"undefined\"){g=self}else{g=this}g.droplet = f()}})(function(){var define,module,exports;return (function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require==\"function\"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error(\"Cannot find module '\"+o+\"'\");throw f.code=\"MODULE_NOT_FOUND\",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require==\"function\"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})({1:[function(require,module,exports){\n\n},{}],2:[function(require,module,exports){\narguments[4][1][0].apply(exports,arguments)\n},{\"dup\":1}],3:[function(require,module,exports){\n(function (global){\n/*!\n * The buffer module from node.js, for the browser.\n *\n * @author   Feross Aboukhadijeh <feross@feross.org> <http://feross.org>\n * @license  MIT\n */\n/* eslint-disable no-proto */\n\n'use strict'\n\nvar base64 = require('base64-js')\nvar ieee754 = require('ieee754')\nvar isArray = require('isarray')\n\nexports.Buffer = Buffer\nexports.SlowBuffer = SlowBuffer\nexports.INSPECT_MAX_BYTES = 50\nBuffer.poolSize = 8192 // not used by this implementation\n\nvar rootParent = {}\n\n/**\n * If `Buffer.TYPED_ARRAY_SUPPORT`:\n *   === true    Use Uint8Array implementation (fastest)\n *   === false   Use Object implementation (most compatible, even IE6)\n *\n * Browsers that support typed arrays are IE 10+, Firefox 4+, Chrome 7+, Safari 5.1+,\n * Opera 11.6+, iOS 4.2+.\n *\n * Due to various browser bugs, sometimes the Object implementation will be used even\n * when the browser supports typed arrays.\n *\n * Note:\n *\n *   - Firefox 4-29 lacks support for adding new properties to `Uint8Array` instances,\n *     See: https://bugzilla.mozilla.org/show_bug.cgi?id=695438.\n *\n *   - Safari 5-7 lacks support for changing the `Object.prototype.constructor` property\n *     on objects.\n *\n *   - Chrome 9-10 is missing the `TypedArray.prototype.subarray` function.\n *\n *   - IE10 has a broken `TypedArray.prototype.subarray` function which returns arrays of\n *     incorrect length in some situations.\n\n * We detect these buggy browsers and set `Buffer.TYPED_ARRAY_SUPPORT` to `false` so they\n * get the Object implementation, which is slower but behaves correctly.\n */\nBuffer.TYPED_ARRAY_SUPPORT = global.TYPED_ARRAY_SUPPORT !== undefined\n  ? global.TYPED_ARRAY_SUPPORT\n  : typedArraySupport()\n\nfunction typedArraySupport () {\n  function Bar () {}\n  try {\n    var arr = new Uint8Array(1)\n    arr.foo = function () { return 42 }\n    arr.constructor = Bar\n    return arr.foo() === 42 && // typed array instances can be augmented\n        arr.constructor === Bar && // constructor can be set\n        typeof arr.subarray === 'function' && // chrome 9-10 lack `subarray`\n        arr.subarray(1, 1).byteLength === 0 // ie10 has broken `subarray`\n  } catch (e) {\n    return false\n  }\n}\n\nfunction kMaxLength () {\n  return Buffer.TYPED_ARRAY_SUPPORT\n    ? 0x7fffffff\n    : 0x3fffffff\n}\n\n/**\n * Class: Buffer\n * =============\n *\n * The Buffer constructor returns instances of `Uint8Array` that are augmented\n * with function properties for all the node `Buffer` API functions. We use\n * `Uint8Array` so that square bracket notation works as expected -- it returns\n * a single octet.\n *\n * By augmenting the instances, we can avoid modifying the `Uint8Array`\n * prototype.\n */\nfunction Buffer (arg) {\n  if (!(this instanceof Buffer)) {\n    // Avoid going through an ArgumentsAdaptorTrampoline in the common case.\n    if (arguments.length > 1) return new Buffer(arg, arguments[1])\n    return new Buffer(arg)\n  }\n\n  if (!Buffer.TYPED_ARRAY_SUPPORT) {\n    this.length = 0\n    this.parent = undefined\n  }\n\n  // Common case.\n  if (typeof arg === 'number') {\n    return fromNumber(this, arg)\n  }\n\n  // Slightly less common case.\n  if (typeof arg === 'string') {\n    return fromString(this, arg, arguments.length > 1 ? arguments[1] : 'utf8')\n  }\n\n  // Unusual.\n  return fromObject(this, arg)\n}\n\nfunction fromNumber (that, length) {\n  that = allocate(that, length < 0 ? 0 : checked(length) | 0)\n  if (!Buffer.TYPED_ARRAY_SUPPORT) {\n    for (var i = 0; i < length; i++) {\n      that[i] = 0\n    }\n  }\n  return that\n}\n\nfunction fromString (that, string, encoding) {\n  if (typeof encoding !== 'string' || encoding === '') encoding = 'utf8'\n\n  // Assumption: byteLength() return value is always < kMaxLength.\n  var length = byteLength(string, encoding) | 0\n  that = allocate(that, length)\n\n  that.write(string, encoding)\n  return that\n}\n\nfunction fromObject (that, object) {\n  if (Buffer.isBuffer(object)) return fromBuffer(that, object)\n\n  if (isArray(object)) return fromArray(that, object)\n\n  if (object == null) {\n    throw new TypeError('must start with number, buffer, array or string')\n  }\n\n  if (typeof ArrayBuffer !== 'undefined') {\n    if (object.buffer instanceof ArrayBuffer) {\n      return fromTypedArray(that, object)\n    }\n    if (object instanceof ArrayBuffer) {\n      return fromArrayBuffer(that, object)\n    }\n  }\n\n  if (object.length) return fromArrayLike(that, object)\n\n  return fromJsonObject(that, object)\n}\n\nfunction fromBuffer (that, buffer) {\n  var length = checked(buffer.length) | 0\n  that = allocate(that, length)\n  buffer.copy(that, 0, 0, length)\n  return that\n}\n\nfunction fromArray (that, array) {\n  var length = checked(array.length) | 0\n  that = allocate(that, length)\n  for (var i = 0; i < length; i += 1) {\n    that[i] = array[i] & 255\n  }\n  return that\n}\n\n// Duplicate of fromArray() to keep fromArray() monomorphic.\nfunction fromTypedArray (that, array) {\n  var length = checked(array.length) | 0\n  that = allocate(that, length)\n  // Truncating the elements is probably not what people expect from typed\n  // arrays with BYTES_PER_ELEMENT > 1 but it's compatible with the behavior\n  // of the old Buffer constructor.\n  for (var i = 0; i < length; i += 1) {\n    that[i] = array[i] & 255\n  }\n  return that\n}\n\nfunction fromArrayBuffer (that, array) {\n  if (Buffer.TYPED_ARRAY_SUPPORT) {\n    // Return an augmented `Uint8Array` instance, for best performance\n    array.byteLength\n    that = Buffer._augment(new Uint8Array(array))\n  } else {\n    // Fallback: Return an object instance of the Buffer class\n    that = fromTypedArray(that, new Uint8Array(array))\n  }\n  return that\n}\n\nfunction fromArrayLike (that, array) {\n  var length = checked(array.length) | 0\n  that = allocate(that, length)\n  for (var i = 0; i < length; i += 1) {\n    that[i] = array[i] & 255\n  }\n  return that\n}\n\n// Deserialize { type: 'Buffer', data: [1,2,3,...] } into a Buffer object.\n// Returns a zero-length buffer for inputs that don't conform to the spec.\nfunction fromJsonObject (that, object) {\n  var array\n  var length = 0\n\n  if (object.type === 'Buffer' && isArray(object.data)) {\n    array = object.data\n    length = checked(array.length) | 0\n  }\n  that = allocate(that, length)\n\n  for (var i = 0; i < length; i += 1) {\n    that[i] = array[i] & 255\n  }\n  return that\n}\n\nif (Buffer.TYPED_ARRAY_SUPPORT) {\n  Buffer.prototype.__proto__ = Uint8Array.prototype\n  Buffer.__proto__ = Uint8Array\n} else {\n  // pre-set for values that may exist in the future\n  Buffer.prototype.length = undefined\n  Buffer.prototype.parent = undefined\n}\n\nfunction allocate (that, length) {\n  if (Buffer.TYPED_ARRAY_SUPPORT) {\n    // Return an augmented `Uint8Array` instance, for best performance\n    that = Buffer._augment(new Uint8Array(length))\n    that.__proto__ = Buffer.prototype\n  } else {\n    // Fallback: Return an object instance of the Buffer class\n    that.length = length\n    that._isBuffer = true\n  }\n\n  var fromPool = length !== 0 && length <= Buffer.poolSize >>> 1\n  if (fromPool) that.parent = rootParent\n\n  return that\n}\n\nfunction checked (length) {\n  // Note: cannot use `length < kMaxLength` here because that fails when\n  // length is NaN (which is otherwise coerced to zero.)\n  if (length >= kMaxLength()) {\n    throw new RangeError('Attempt to allocate Buffer larger than maximum ' +\n                         'size: 0x' + kMaxLength().toString(16) + ' bytes')\n  }\n  return length | 0\n}\n\nfunction SlowBuffer (subject, encoding) {\n  if (!(this instanceof SlowBuffer)) return new SlowBuffer(subject, encoding)\n\n  var buf = new Buffer(subject, encoding)\n  delete buf.parent\n  return buf\n}\n\nBuffer.isBuffer = function isBuffer (b) {\n  return !!(b != null && b._isBuffer)\n}\n\nBuffer.compare = function compare (a, b) {\n  if (!Buffer.isBuffer(a) || !Buffer.isBuffer(b)) {\n    throw new TypeError('Arguments must be Buffers')\n  }\n\n  if (a === b) return 0\n\n  var x = a.length\n  var y = b.length\n\n  var i = 0\n  var len = Math.min(x, y)\n  while (i < len) {\n    if (a[i] !== b[i]) break\n\n    ++i\n  }\n\n  if (i !== len) {\n    x = a[i]\n    y = b[i]\n  }\n\n  if (x < y) return -1\n  if (y < x) return 1\n  return 0\n}\n\nBuffer.isEncoding = function isEncoding (encoding) {\n  switch (String(encoding).toLowerCase()) {\n    case 'hex':\n    case 'utf8':\n    case 'utf-8':\n    case 'ascii':\n    case 'binary':\n    case 'base64':\n    case 'raw':\n    case 'ucs2':\n    case 'ucs-2':\n    case 'utf16le':\n    case 'utf-16le':\n      return true\n    default:\n      return false\n  }\n}\n\nBuffer.concat = function concat (list, length) {\n  if (!isArray(list)) throw new TypeError('list argument must be an Array of Buffers.')\n\n  if (list.length === 0) {\n    return new Buffer(0)\n  }\n\n  var i\n  if (length === undefined) {\n    length = 0\n    for (i = 0; i < list.length; i++) {\n      length += list[i].length\n    }\n  }\n\n  var buf = new Buffer(length)\n  var pos = 0\n  for (i = 0; i < list.length; i++) {\n    var item = list[i]\n    item.copy(buf, pos)\n    pos += item.length\n  }\n  return buf\n}\n\nfunction byteLength (string, encoding) {\n  if (typeof string !== 'string') string = '' + string\n\n  var len = string.length\n  if (len === 0) return 0\n\n  // Use a for loop to avoid recursion\n  var loweredCase = false\n  for (;;) {\n    switch (encoding) {\n      case 'ascii':\n      case 'binary':\n      // Deprecated\n      case 'raw':\n      case 'raws':\n        return len\n      case 'utf8':\n      case 'utf-8':\n        return utf8ToBytes(string).length\n      case 'ucs2':\n      case 'ucs-2':\n      case 'utf16le':\n      case 'utf-16le':\n        return len * 2\n      case 'hex':\n        return len >>> 1\n      case 'base64':\n        return base64ToBytes(string).length\n      default:\n        if (loweredCase) return utf8ToBytes(string).length // assume utf8\n        encoding = ('' + encoding).toLowerCase()\n        loweredCase = true\n    }\n  }\n}\nBuffer.byteLength = byteLength\n\nfunction slowToString (encoding, start, end) {\n  var loweredCase = false\n\n  start = start | 0\n  end = end === undefined || end === Infinity ? this.length : end | 0\n\n  if (!encoding) encoding = 'utf8'\n  if (start < 0) start = 0\n  if (end > this.length) end = this.length\n  if (end <= start) return ''\n\n  while (true) {\n    switch (encoding) {\n      case 'hex':\n        return hexSlice(this, start, end)\n\n      case 'utf8':\n      case 'utf-8':\n        return utf8Slice(this, start, end)\n\n      case 'ascii':\n        return asciiSlice(this, start, end)\n\n      case 'binary':\n        return binarySlice(this, start, end)\n\n      case 'base64':\n        return base64Slice(this, start, end)\n\n      case 'ucs2':\n      case 'ucs-2':\n      case 'utf16le':\n      case 'utf-16le':\n        return utf16leSlice(this, start, end)\n\n      default:\n        if (loweredCase) throw new TypeError('Unknown encoding: ' + encoding)\n        encoding = (encoding + '').toLowerCase()\n        loweredCase = true\n    }\n  }\n}\n\nBuffer.prototype.toString = function toString () {\n  var length = this.length | 0\n  if (length === 0) return ''\n  if (arguments.length === 0) return utf8Slice(this, 0, length)\n  return slowToString.apply(this, arguments)\n}\n\nBuffer.prototype.equals = function equals (b) {\n  if (!Buffer.isBuffer(b)) throw new TypeError('Argument must be a Buffer')\n  if (this === b) return true\n  return Buffer.compare(this, b) === 0\n}\n\nBuffer.prototype.inspect = function inspect () {\n  var str = ''\n  var max = exports.INSPECT_MAX_BYTES\n  if (this.length > 0) {\n    str = this.toString('hex', 0, max).match(/.{2}/g).join(' ')\n    if (this.length > max) str += ' ... '\n  }\n  return '<Buffer ' + str + '>'\n}\n\nBuffer.prototype.compare = function compare (b) {\n  if (!Buffer.isBuffer(b)) throw new TypeError('Argument must be a Buffer')\n  if (this === b) return 0\n  return Buffer.compare(this, b)\n}\n\nBuffer.prototype.indexOf = function indexOf (val, byteOffset) {\n  if (byteOffset > 0x7fffffff) byteOffset = 0x7fffffff\n  else if (byteOffset < -0x80000000) byteOffset = -0x80000000\n  byteOffset >>= 0\n\n  if (this.length === 0) return -1\n  if (byteOffset >= this.length) return -1\n\n  // Negative offsets start from the end of the buffer\n  if (byteOffset < 0) byteOffset = Math.max(this.length + byteOffset, 0)\n\n  if (typeof val === 'string') {\n    if (val.length === 0) return -1 // special case: looking for empty string always fails\n    return String.prototype.indexOf.call(this, val, byteOffset)\n  }\n  if (Buffer.isBuffer(val)) {\n    return arrayIndexOf(this, val, byteOffset)\n  }\n  if (typeof val === 'number') {\n    if (Buffer.TYPED_ARRAY_SUPPORT && Uint8Array.prototype.indexOf === 'function') {\n      return Uint8Array.prototype.indexOf.call(this, val, byteOffset)\n    }\n    return arrayIndexOf(this, [ val ], byteOffset)\n  }\n\n  function arrayIndexOf (arr, val, byteOffset) {\n    var foundIndex = -1\n    for (var i = 0; byteOffset + i < arr.length; i++) {\n      if (arr[byteOffset + i] === val[foundIndex === -1 ? 0 : i - foundIndex]) {\n        if (foundIndex === -1) foundIndex = i\n        if (i - foundIndex + 1 === val.length) return byteOffset + foundIndex\n      } else {\n        foundIndex = -1\n      }\n    }\n    return -1\n  }\n\n  throw new TypeError('val must be string, number or Buffer')\n}\n\n// `get` is deprecated\nBuffer.prototype.get = function get (offset) {\n  console.log('.get() is deprecated. Access using array indexes instead.')\n  return this.readUInt8(offset)\n}\n\n// `set` is deprecated\nBuffer.prototype.set = function set (v, offset) {\n  console.log('.set() is deprecated. Access using array indexes instead.')\n  return this.writeUInt8(v, offset)\n}\n\nfunction hexWrite (buf, string, offset, length) {\n  offset = Number(offset) || 0\n  var remaining = buf.length - offset\n  if (!length) {\n    length = remaining\n  } else {\n    length = Number(length)\n    if (length > remaining) {\n      length = remaining\n    }\n  }\n\n  // must be an even number of digits\n  var strLen = string.length\n  if (strLen % 2 !== 0) throw new Error('Invalid hex string')\n\n  if (length > strLen / 2) {\n    length = strLen / 2\n  }\n  for (var i = 0; i < length; i++) {\n    var parsed = parseInt(string.substr(i * 2, 2), 16)\n    if (isNaN(parsed)) throw new Error('Invalid hex string')\n    buf[offset + i] = parsed\n  }\n  return i\n}\n\nfunction utf8Write (buf, string, offset, length) {\n  return blitBuffer(utf8ToBytes(string, buf.length - offset), buf, offset, length)\n}\n\nfunction asciiWrite (buf, string, offset, length) {\n  return blitBuffer(asciiToBytes(string), buf, offset, length)\n}\n\nfunction binaryWrite (buf, string, offset, length) {\n  return asciiWrite(buf, string, offset, length)\n}\n\nfunction base64Write (buf, string, offset, length) {\n  return blitBuffer(base64ToBytes(string), buf, offset, length)\n}\n\nfunction ucs2Write (buf, string, offset, length) {\n  return blitBuffer(utf16leToBytes(string, buf.length - offset), buf, offset, length)\n}\n\nBuffer.prototype.write = function write (string, offset, length, encoding) {\n  // Buffer#write(string)\n  if (offset === undefined) {\n    encoding = 'utf8'\n    length = this.length\n    offset = 0\n  // Buffer#write(string, encoding)\n  } else if (length === undefined && typeof offset === 'string') {\n    encoding = offset\n    length = this.length\n    offset = 0\n  // Buffer#write(string, offset[, length][, encoding])\n  } else if (isFinite(offset)) {\n    offset = offset | 0\n    if (isFinite(length)) {\n      length = length | 0\n      if (encoding === undefined) encoding = 'utf8'\n    } else {\n      encoding = length\n      length = undefined\n    }\n  // legacy write(string, encoding, offset, length) - remove in v0.13\n  } else {\n    var swap = encoding\n    encoding = offset\n    offset = length | 0\n    length = swap\n  }\n\n  var remaining = this.length - offset\n  if (length === undefined || length > remaining) length = remaining\n\n  if ((string.length > 0 && (length < 0 || offset < 0)) || offset > this.length) {\n    throw new RangeError('attempt to write outside buffer bounds')\n  }\n\n  if (!encoding) encoding = 'utf8'\n\n  var loweredCase = false\n  for (;;) {\n    switch (encoding) {\n      case 'hex':\n        return hexWrite(this, string, offset, length)\n\n      case 'utf8':\n      case 'utf-8':\n        return utf8Write(this, string, offset, length)\n\n      case 'ascii':\n        return asciiWrite(this, string, offset, length)\n\n      case 'binary':\n        return binaryWrite(this, string, offset, length)\n\n      case 'base64':\n        // Warning: maxLength not taken into account in base64Write\n        return base64Write(this, string, offset, length)\n\n      case 'ucs2':\n      case 'ucs-2':\n      case 'utf16le':\n      case 'utf-16le':\n        return ucs2Write(this, string, offset, length)\n\n      default:\n        if (loweredCase) throw new TypeError('Unknown encoding: ' + encoding)\n        encoding = ('' + encoding).toLowerCase()\n        loweredCase = true\n    }\n  }\n}\n\nBuffer.prototype.toJSON = function toJSON () {\n  return {\n    type: 'Buffer',\n    data: Array.prototype.slice.call(this._arr || this, 0)\n  }\n}\n\nfunction base64Slice (buf, start, end) {\n  if (start === 0 && end === buf.length) {\n    return base64.fromByteArray(buf)\n  } else {\n    return base64.fromByteArray(buf.slice(start, end))\n  }\n}\n\nfunction utf8Slice (buf, start, end) {\n  end = Math.min(buf.length, end)\n  var res = []\n\n  var i = start\n  while (i < end) {\n    var firstByte = buf[i]\n    var codePoint = null\n    var bytesPerSequence = (firstByte > 0xEF) ? 4\n      : (firstByte > 0xDF) ? 3\n      : (firstByte > 0xBF) ? 2\n      : 1\n\n    if (i + bytesPerSequence <= end) {\n      var secondByte, thirdByte, fourthByte, tempCodePoint\n\n      switch (bytesPerSequence) {\n        case 1:\n          if (firstByte < 0x80) {\n            codePoint = firstByte\n          }\n          break\n        case 2:\n          secondByte = buf[i + 1]\n          if ((secondByte & 0xC0) === 0x80) {\n            tempCodePoint = (firstByte & 0x1F) << 0x6 | (secondByte & 0x3F)\n            if (tempCodePoint > 0x7F) {\n              codePoint = tempCodePoint\n            }\n          }\n          break\n        case 3:\n          secondByte = buf[i + 1]\n          thirdByte = buf[i + 2]\n          if ((secondByte & 0xC0) === 0x80 && (thirdByte & 0xC0) === 0x80) {\n            tempCodePoint = (firstByte & 0xF) << 0xC | (secondByte & 0x3F) << 0x6 | (thirdByte & 0x3F)\n            if (tempCodePoint > 0x7FF && (tempCodePoint < 0xD800 || tempCodePoint > 0xDFFF)) {\n              codePoint = tempCodePoint\n            }\n          }\n          break\n        case 4:\n          secondByte = buf[i + 1]\n          thirdByte = buf[i + 2]\n          fourthByte = buf[i + 3]\n          if ((secondByte & 0xC0) === 0x80 && (thirdByte & 0xC0) === 0x80 && (fourthByte & 0xC0) === 0x80) {\n            tempCodePoint = (firstByte & 0xF) << 0x12 | (secondByte & 0x3F) << 0xC | (thirdByte & 0x3F) << 0x6 | (fourthByte & 0x3F)\n            if (tempCodePoint > 0xFFFF && tempCodePoint < 0x110000) {\n              codePoint = tempCodePoint\n            }\n          }\n      }\n    }\n\n    if (codePoint === null) {\n      // we did not generate a valid codePoint so insert a\n      // replacement char (U+FFFD) and advance only 1 byte\n      codePoint = 0xFFFD\n      bytesPerSequence = 1\n    } else if (codePoint > 0xFFFF) {\n      // encode to utf16 (surrogate pair dance)\n      codePoint -= 0x10000\n      res.push(codePoint >>> 10 & 0x3FF | 0xD800)\n      codePoint = 0xDC00 | codePoint & 0x3FF\n    }\n\n    res.push(codePoint)\n    i += bytesPerSequence\n  }\n\n  return decodeCodePointsArray(res)\n}\n\n// Based on http://stackoverflow.com/a/22747272/680742, the browser with\n// the lowest limit is Chrome, with 0x10000 args.\n// We go 1 magnitude less, for safety\nvar MAX_ARGUMENTS_LENGTH = 0x1000\n\nfunction decodeCodePointsArray (codePoints) {\n  var len = codePoints.length\n  if (len <= MAX_ARGUMENTS_LENGTH) {\n    return String.fromCharCode.apply(String, codePoints) // avoid extra slice()\n  }\n\n  // Decode in chunks to avoid \"call stack size exceeded\".\n  var res = ''\n  var i = 0\n  while (i < len) {\n    res += String.fromCharCode.apply(\n      String,\n      codePoints.slice(i, i += MAX_ARGUMENTS_LENGTH)\n    )\n  }\n  return res\n}\n\nfunction asciiSlice (buf, start, end) {\n  var ret = ''\n  end = Math.min(buf.length, end)\n\n  for (var i = start; i < end; i++) {\n    ret += String.fromCharCode(buf[i] & 0x7F)\n  }\n  return ret\n}\n\nfunction binarySlice (buf, start, end) {\n  var ret = ''\n  end = Math.min(buf.length, end)\n\n  for (var i = start; i < end; i++) {\n    ret += String.fromCharCode(buf[i])\n  }\n  return ret\n}\n\nfunction hexSlice (buf, start, end) {\n  var len = buf.length\n\n  if (!start || start < 0) start = 0\n  if (!end || end < 0 || end > len) end = len\n\n  var out = ''\n  for (var i = start; i < end; i++) {\n    out += toHex(buf[i])\n  }\n  return out\n}\n\nfunction utf16leSlice (buf, start, end) {\n  var bytes = buf.slice(start, end)\n  var res = ''\n  for (var i = 0; i < bytes.length; i += 2) {\n    res += String.fromCharCode(bytes[i] + bytes[i + 1] * 256)\n  }\n  return res\n}\n\nBuffer.prototype.slice = function slice (start, end) {\n  var len = this.length\n  start = ~~start\n  end = end === undefined ? len : ~~end\n\n  if (start < 0) {\n    start += len\n    if (start < 0) start = 0\n  } else if (start > len) {\n    start = len\n  }\n\n  if (end < 0) {\n    end += len\n    if (end < 0) end = 0\n  } else if (end > len) {\n    end = len\n  }\n\n  if (end < start) end = start\n\n  var newBuf\n  if (Buffer.TYPED_ARRAY_SUPPORT) {\n    newBuf = Buffer._augment(this.subarray(start, end))\n  } else {\n    var sliceLen = end - start\n    newBuf = new Buffer(sliceLen, undefined)\n    for (var i = 0; i < sliceLen; i++) {\n      newBuf[i] = this[i + start]\n    }\n  }\n\n  if (newBuf.length) newBuf.parent = this.parent || this\n\n  return newBuf\n}\n\n/*\n * Need to make sure that buffer isn't trying to write out of bounds.\n */\nfunction checkOffset (offset, ext, length) {\n  if ((offset % 1) !== 0 || offset < 0) throw new RangeError('offset is not uint')\n  if (offset + ext > length) throw new RangeError('Trying to access beyond buffer length')\n}\n\nBuffer.prototype.readUIntLE = function readUIntLE (offset, byteLength, noAssert) {\n  offset = offset | 0\n  byteLength = byteLength | 0\n  if (!noAssert) checkOffset(offset, byteLength, this.length)\n\n  var val = this[offset]\n  var mul = 1\n  var i = 0\n  while (++i < byteLength && (mul *= 0x100)) {\n    val += this[offset + i] * mul\n  }\n\n  return val\n}\n\nBuffer.prototype.readUIntBE = function readUIntBE (offset, byteLength, noAssert) {\n  offset = offset | 0\n  byteLength = byteLength | 0\n  if (!noAssert) {\n    checkOffset(offset, byteLength, this.length)\n  }\n\n  var val = this[offset + --byteLength]\n  var mul = 1\n  while (byteLength > 0 && (mul *= 0x100)) {\n    val += this[offset + --byteLength] * mul\n  }\n\n  return val\n}\n\nBuffer.prototype.readUInt8 = function readUInt8 (offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 1, this.length)\n  return this[offset]\n}\n\nBuffer.prototype.readUInt16LE = function readUInt16LE (offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 2, this.length)\n  return this[offset] | (this[offset + 1] << 8)\n}\n\nBuffer.prototype.readUInt16BE = function readUInt16BE (offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 2, this.length)\n  return (this[offset] << 8) | this[offset + 1]\n}\n\nBuffer.prototype.readUInt32LE = function readUInt32LE (offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 4, this.length)\n\n  return ((this[offset]) |\n      (this[offset + 1] << 8) |\n      (this[offset + 2] << 16)) +\n      (this[offset + 3] * 0x1000000)\n}\n\nBuffer.prototype.readUInt32BE = function readUInt32BE (offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 4, this.length)\n\n  return (this[offset] * 0x1000000) +\n    ((this[offset + 1] << 16) |\n    (this[offset + 2] << 8) |\n    this[offset + 3])\n}\n\nBuffer.prototype.readIntLE = function readIntLE (offset, byteLength, noAssert) {\n  offset = offset | 0\n  byteLength = byteLength | 0\n  if (!noAssert) checkOffset(offset, byteLength, this.length)\n\n  var val = this[offset]\n  var mul = 1\n  var i = 0\n  while (++i < byteLength && (mul *= 0x100)) {\n    val += this[offset + i] * mul\n  }\n  mul *= 0x80\n\n  if (val >= mul) val -= Math.pow(2, 8 * byteLength)\n\n  return val\n}\n\nBuffer.prototype.readIntBE = function readIntBE (offset, byteLength, noAssert) {\n  offset = offset | 0\n  byteLength = byteLength | 0\n  if (!noAssert) checkOffset(offset, byteLength, this.length)\n\n  var i = byteLength\n  var mul = 1\n  var val = this[offset + --i]\n  while (i > 0 && (mul *= 0x100)) {\n    val += this[offset + --i] * mul\n  }\n  mul *= 0x80\n\n  if (val >= mul) val -= Math.pow(2, 8 * byteLength)\n\n  return val\n}\n\nBuffer.prototype.readInt8 = function readInt8 (offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 1, this.length)\n  if (!(this[offset] & 0x80)) return (this[offset])\n  return ((0xff - this[offset] + 1) * -1)\n}\n\nBuffer.prototype.readInt16LE = function readInt16LE (offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 2, this.length)\n  var val = this[offset] | (this[offset + 1] << 8)\n  return (val & 0x8000) ? val | 0xFFFF0000 : val\n}\n\nBuffer.prototype.readInt16BE = function readInt16BE (offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 2, this.length)\n  var val = this[offset + 1] | (this[offset] << 8)\n  return (val & 0x8000) ? val | 0xFFFF0000 : val\n}\n\nBuffer.prototype.readInt32LE = function readInt32LE (offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 4, this.length)\n\n  return (this[offset]) |\n    (this[offset + 1] << 8) |\n    (this[offset + 2] << 16) |\n    (this[offset + 3] << 24)\n}\n\nBuffer.prototype.readInt32BE = function readInt32BE (offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 4, this.length)\n\n  return (this[offset] << 24) |\n    (this[offset + 1] << 16) |\n    (this[offset + 2] << 8) |\n    (this[offset + 3])\n}\n\nBuffer.prototype.readFloatLE = function readFloatLE (offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 4, this.length)\n  return ieee754.read(this, offset, true, 23, 4)\n}\n\nBuffer.prototype.readFloatBE = function readFloatBE (offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 4, this.length)\n  return ieee754.read(this, offset, false, 23, 4)\n}\n\nBuffer.prototype.readDoubleLE = function readDoubleLE (offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 8, this.length)\n  return ieee754.read(this, offset, true, 52, 8)\n}\n\nBuffer.prototype.readDoubleBE = function readDoubleBE (offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 8, this.length)\n  return ieee754.read(this, offset, false, 52, 8)\n}\n\nfunction checkInt (buf, value, offset, ext, max, min) {\n  if (!Buffer.isBuffer(buf)) throw new TypeError('buffer must be a Buffer instance')\n  if (value > max || value < min) throw new RangeError('value is out of bounds')\n  if (offset + ext > buf.length) throw new RangeError('index out of range')\n}\n\nBuffer.prototype.writeUIntLE = function writeUIntLE (value, offset, byteLength, noAssert) {\n  value = +value\n  offset = offset | 0\n  byteLength = byteLength | 0\n  if (!noAssert) checkInt(this, value, offset, byteLength, Math.pow(2, 8 * byteLength), 0)\n\n  var mul = 1\n  var i = 0\n  this[offset] = value & 0xFF\n  while (++i < byteLength && (mul *= 0x100)) {\n    this[offset + i] = (value / mul) & 0xFF\n  }\n\n  return offset + byteLength\n}\n\nBuffer.prototype.writeUIntBE = function writeUIntBE (value, offset, byteLength, noAssert) {\n  value = +value\n  offset = offset | 0\n  byteLength = byteLength | 0\n  if (!noAssert) checkInt(this, value, offset, byteLength, Math.pow(2, 8 * byteLength), 0)\n\n  var i = byteLength - 1\n  var mul = 1\n  this[offset + i] = value & 0xFF\n  while (--i >= 0 && (mul *= 0x100)) {\n    this[offset + i] = (value / mul) & 0xFF\n  }\n\n  return offset + byteLength\n}\n\nBuffer.prototype.writeUInt8 = function writeUInt8 (value, offset, noAssert) {\n  value = +value\n  offset = offset | 0\n  if (!noAssert) checkInt(this, value, offset, 1, 0xff, 0)\n  if (!Buffer.TYPED_ARRAY_SUPPORT) value = Math.floor(value)\n  this[offset] = (value & 0xff)\n  return offset + 1\n}\n\nfunction objectWriteUInt16 (buf, value, offset, littleEndian) {\n  if (value < 0) value = 0xffff + value + 1\n  for (var i = 0, j = Math.min(buf.length - offset, 2); i < j; i++) {\n    buf[offset + i] = (value & (0xff << (8 * (littleEndian ? i : 1 - i)))) >>>\n      (littleEndian ? i : 1 - i) * 8\n  }\n}\n\nBuffer.prototype.writeUInt16LE = function writeUInt16LE (value, offset, noAssert) {\n  value = +value\n  offset = offset | 0\n  if (!noAssert) checkInt(this, value, offset, 2, 0xffff, 0)\n  if (Buffer.TYPED_ARRAY_SUPPORT) {\n    this[offset] = (value & 0xff)\n    this[offset + 1] = (value >>> 8)\n  } else {\n    objectWriteUInt16(this, value, offset, true)\n  }\n  return offset + 2\n}\n\nBuffer.prototype.writeUInt16BE = function writeUInt16BE (value, offset, noAssert) {\n  value = +value\n  offset = offset | 0\n  if (!noAssert) checkInt(this, value, offset, 2, 0xffff, 0)\n  if (Buffer.TYPED_ARRAY_SUPPORT) {\n    this[offset] = (value >>> 8)\n    this[offset + 1] = (value & 0xff)\n  } else {\n    objectWriteUInt16(this, value, offset, false)\n  }\n  return offset + 2\n}\n\nfunction objectWriteUInt32 (buf, value, offset, littleEndian) {\n  if (value < 0) value = 0xffffffff + value + 1\n  for (var i = 0, j = Math.min(buf.length - offset, 4); i < j; i++) {\n    buf[offset + i] = (value >>> (littleEndian ? i : 3 - i) * 8) & 0xff\n  }\n}\n\nBuffer.prototype.writeUInt32LE = function writeUInt32LE (value, offset, noAssert) {\n  value = +value\n  offset = offset | 0\n  if (!noAssert) checkInt(this, value, offset, 4, 0xffffffff, 0)\n  if (Buffer.TYPED_ARRAY_SUPPORT) {\n    this[offset + 3] = (value >>> 24)\n    this[offset + 2] = (value >>> 16)\n    this[offset + 1] = (value >>> 8)\n    this[offset] = (value & 0xff)\n  } else {\n    objectWriteUInt32(this, value, offset, true)\n  }\n  return offset + 4\n}\n\nBuffer.prototype.writeUInt32BE = function writeUInt32BE (value, offset, noAssert) {\n  value = +value\n  offset = offset | 0\n  if (!noAssert) checkInt(this, value, offset, 4, 0xffffffff, 0)\n  if (Buffer.TYPED_ARRAY_SUPPORT) {\n    this[offset] = (value >>> 24)\n    this[offset + 1] = (value >>> 16)\n    this[offset + 2] = (value >>> 8)\n    this[offset + 3] = (value & 0xff)\n  } else {\n    objectWriteUInt32(this, value, offset, false)\n  }\n  return offset + 4\n}\n\nBuffer.prototype.writeIntLE = function writeIntLE (value, offset, byteLength, noAssert) {\n  value = +value\n  offset = offset | 0\n  if (!noAssert) {\n    var limit = Math.pow(2, 8 * byteLength - 1)\n\n    checkInt(this, value, offset, byteLength, limit - 1, -limit)\n  }\n\n  var i = 0\n  var mul = 1\n  var sub = value < 0 ? 1 : 0\n  this[offset] = value & 0xFF\n  while (++i < byteLength && (mul *= 0x100)) {\n    this[offset + i] = ((value / mul) >> 0) - sub & 0xFF\n  }\n\n  return offset + byteLength\n}\n\nBuffer.prototype.writeIntBE = function writeIntBE (value, offset, byteLength, noAssert) {\n  value = +value\n  offset = offset | 0\n  if (!noAssert) {\n    var limit = Math.pow(2, 8 * byteLength - 1)\n\n    checkInt(this, value, offset, byteLength, limit - 1, -limit)\n  }\n\n  var i = byteLength - 1\n  var mul = 1\n  var sub = value < 0 ? 1 : 0\n  this[offset + i] = value & 0xFF\n  while (--i >= 0 && (mul *= 0x100)) {\n    this[offset + i] = ((value / mul) >> 0) - sub & 0xFF\n  }\n\n  return offset + byteLength\n}\n\nBuffer.prototype.writeInt8 = function writeInt8 (value, offset, noAssert) {\n  value = +value\n  offset = offset | 0\n  if (!noAssert) checkInt(this, value, offset, 1, 0x7f, -0x80)\n  if (!Buffer.TYPED_ARRAY_SUPPORT) value = Math.floor(value)\n  if (value < 0) value = 0xff + value + 1\n  this[offset] = (value & 0xff)\n  return offset + 1\n}\n\nBuffer.prototype.writeInt16LE = function writeInt16LE (value, offset, noAssert) {\n  value = +value\n  offset = offset | 0\n  if (!noAssert) checkInt(this, value, offset, 2, 0x7fff, -0x8000)\n  if (Buffer.TYPED_ARRAY_SUPPORT) {\n    this[offset] = (value & 0xff)\n    this[offset + 1] = (value >>> 8)\n  } else {\n    objectWriteUInt16(this, value, offset, true)\n  }\n  return offset + 2\n}\n\nBuffer.prototype.writeInt16BE = function writeInt16BE (value, offset, noAssert) {\n  value = +value\n  offset = offset | 0\n  if (!noAssert) checkInt(this, value, offset, 2, 0x7fff, -0x8000)\n  if (Buffer.TYPED_ARRAY_SUPPORT) {\n    this[offset] = (value >>> 8)\n    this[offset + 1] = (value & 0xff)\n  } else {\n    objectWriteUInt16(this, value, offset, false)\n  }\n  return offset + 2\n}\n\nBuffer.prototype.writeInt32LE = function writeInt32LE (value, offset, noAssert) {\n  value = +value\n  offset = offset | 0\n  if (!noAssert) checkInt(this, value, offset, 4, 0x7fffffff, -0x80000000)\n  if (Buffer.TYPED_ARRAY_SUPPORT) {\n    this[offset] = (value & 0xff)\n    this[offset + 1] = (value >>> 8)\n    this[offset + 2] = (value >>> 16)\n    this[offset + 3] = (value >>> 24)\n  } else {\n    objectWriteUInt32(this, value, offset, true)\n  }\n  return offset + 4\n}\n\nBuffer.prototype.writeInt32BE = function writeInt32BE (value, offset, noAssert) {\n  value = +value\n  offset = offset | 0\n  if (!noAssert) checkInt(this, value, offset, 4, 0x7fffffff, -0x80000000)\n  if (value < 0) value = 0xffffffff + value + 1\n  if (Buffer.TYPED_ARRAY_SUPPORT) {\n    this[offset] = (value >>> 24)\n    this[offset + 1] = (value >>> 16)\n    this[offset + 2] = (value >>> 8)\n    this[offset + 3] = (value & 0xff)\n  } else {\n    objectWriteUInt32(this, value, offset, false)\n  }\n  return offset + 4\n}\n\nfunction checkIEEE754 (buf, value, offset, ext, max, min) {\n  if (value > max || value < min) throw new RangeError('value is out of bounds')\n  if (offset + ext > buf.length) throw new RangeError('index out of range')\n  if (offset < 0) throw new RangeError('index out of range')\n}\n\nfunction writeFloat (buf, value, offset, littleEndian, noAssert) {\n  if (!noAssert) {\n    checkIEEE754(buf, value, offset, 4, 3.4028234663852886e+38, -3.4028234663852886e+38)\n  }\n  ieee754.write(buf, value, offset, littleEndian, 23, 4)\n  return offset + 4\n}\n\nBuffer.prototype.writeFloatLE = function writeFloatLE (value, offset, noAssert) {\n  return writeFloat(this, value, offset, true, noAssert)\n}\n\nBuffer.prototype.writeFloatBE = function writeFloatBE (value, offset, noAssert) {\n  return writeFloat(this, value, offset, false, noAssert)\n}\n\nfunction writeDouble (buf, value, offset, littleEndian, noAssert) {\n  if (!noAssert) {\n    checkIEEE754(buf, value, offset, 8, 1.7976931348623157E+308, -1.7976931348623157E+308)\n  }\n  ieee754.write(buf, value, offset, littleEndian, 52, 8)\n  return offset + 8\n}\n\nBuffer.prototype.writeDoubleLE = function writeDoubleLE (value, offset, noAssert) {\n  return writeDouble(this, value, offset, true, noAssert)\n}\n\nBuffer.prototype.writeDoubleBE = function writeDoubleBE (value, offset, noAssert) {\n  return writeDouble(this, value, offset, false, noAssert)\n}\n\n// copy(targetBuffer, targetStart=0, sourceStart=0, sourceEnd=buffer.length)\nBuffer.prototype.copy = function copy (target, targetStart, start, end) {\n  if (!start) start = 0\n  if (!end && end !== 0) end = this.length\n  if (targetStart >= target.length) targetStart = target.length\n  if (!targetStart) targetStart = 0\n  if (end > 0 && end < start) end = start\n\n  // Copy 0 bytes; we're done\n  if (end === start) return 0\n  if (target.length === 0 || this.length === 0) return 0\n\n  // Fatal error conditions\n  if (targetStart < 0) {\n    throw new RangeError('targetStart out of bounds')\n  }\n  if (start < 0 || start >= this.length) throw new RangeError('sourceStart out of bounds')\n  if (end < 0) throw new RangeError('sourceEnd out of bounds')\n\n  // Are we oob?\n  if (end > this.length) end = this.length\n  if (target.length - targetStart < end - start) {\n    end = target.length - targetStart + start\n  }\n\n  var len = end - start\n  var i\n\n  if (this === target && start < targetStart && targetStart < end) {\n    // descending copy from end\n    for (i = len - 1; i >= 0; i--) {\n      target[i + targetStart] = this[i + start]\n    }\n  } else if (len < 1000 || !Buffer.TYPED_ARRAY_SUPPORT) {\n    // ascending copy from start\n    for (i = 0; i < len; i++) {\n      target[i + targetStart] = this[i + start]\n    }\n  } else {\n    target._set(this.subarray(start, start + len), targetStart)\n  }\n\n  return len\n}\n\n// fill(value, start=0, end=buffer.length)\nBuffer.prototype.fill = function fill (value, start, end) {\n  if (!value) value = 0\n  if (!start) start = 0\n  if (!end) end = this.length\n\n  if (end < start) throw new RangeError('end < start')\n\n  // Fill 0 bytes; we're done\n  if (end === start) return\n  if (this.length === 0) return\n\n  if (start < 0 || start >= this.length) throw new RangeError('start out of bounds')\n  if (end < 0 || end > this.length) throw new RangeError('end out of bounds')\n\n  var i\n  if (typeof value === 'number') {\n    for (i = start; i < end; i++) {\n      this[i] = value\n    }\n  } else {\n    var bytes = utf8ToBytes(value.toString())\n    var len = bytes.length\n    for (i = start; i < end; i++) {\n      this[i] = bytes[i % len]\n    }\n  }\n\n  return this\n}\n\n/**\n * Creates a new `ArrayBuffer` with the *copied* memory of the buffer instance.\n * Added in Node 0.12. Only available in browsers that support ArrayBuffer.\n */\nBuffer.prototype.toArrayBuffer = function toArrayBuffer () {\n  if (typeof Uint8Array !== 'undefined') {\n    if (Buffer.TYPED_ARRAY_SUPPORT) {\n      return (new Buffer(this)).buffer\n    } else {\n      var buf = new Uint8Array(this.length)\n      for (var i = 0, len = buf.length; i < len; i += 1) {\n        buf[i] = this[i]\n      }\n      return buf.buffer\n    }\n  } else {\n    throw new TypeError('Buffer.toArrayBuffer not supported in this browser')\n  }\n}\n\n// HELPER FUNCTIONS\n// ================\n\nvar BP = Buffer.prototype\n\n/**\n * Augment a Uint8Array *instance* (not the Uint8Array class!) with Buffer methods\n */\nBuffer._augment = function _augment (arr) {\n  arr.constructor = Buffer\n  arr._isBuffer = true\n\n  // save reference to original Uint8Array set method before overwriting\n  arr._set = arr.set\n\n  // deprecated\n  arr.get = BP.get\n  arr.set = BP.set\n\n  arr.write = BP.write\n  arr.toString = BP.toString\n  arr.toLocaleString = BP.toString\n  arr.toJSON = BP.toJSON\n  arr.equals = BP.equals\n  arr.compare = BP.compare\n  arr.indexOf = BP.indexOf\n  arr.copy = BP.copy\n  arr.slice = BP.slice\n  arr.readUIntLE = BP.readUIntLE\n  arr.readUIntBE = BP.readUIntBE\n  arr.readUInt8 = BP.readUInt8\n  arr.readUInt16LE = BP.readUInt16LE\n  arr.readUInt16BE = BP.readUInt16BE\n  arr.readUInt32LE = BP.readUInt32LE\n  arr.readUInt32BE = BP.readUInt32BE\n  arr.readIntLE = BP.readIntLE\n  arr.readIntBE = BP.readIntBE\n  arr.readInt8 = BP.readInt8\n  arr.readInt16LE = BP.readInt16LE\n  arr.readInt16BE = BP.readInt16BE\n  arr.readInt32LE = BP.readInt32LE\n  arr.readInt32BE = BP.readInt32BE\n  arr.readFloatLE = BP.readFloatLE\n  arr.readFloatBE = BP.readFloatBE\n  arr.readDoubleLE = BP.readDoubleLE\n  arr.readDoubleBE = BP.readDoubleBE\n  arr.writeUInt8 = BP.writeUInt8\n  arr.writeUIntLE = BP.writeUIntLE\n  arr.writeUIntBE = BP.writeUIntBE\n  arr.writeUInt16LE = BP.writeUInt16LE\n  arr.writeUInt16BE = BP.writeUInt16BE\n  arr.writeUInt32LE = BP.writeUInt32LE\n  arr.writeUInt32BE = BP.writeUInt32BE\n  arr.writeIntLE = BP.writeIntLE\n  arr.writeIntBE = BP.writeIntBE\n  arr.writeInt8 = BP.writeInt8\n  arr.writeInt16LE = BP.writeInt16LE\n  arr.writeInt16BE = BP.writeInt16BE\n  arr.writeInt32LE = BP.writeInt32LE\n  arr.writeInt32BE = BP.writeInt32BE\n  arr.writeFloatLE = BP.writeFloatLE\n  arr.writeFloatBE = BP.writeFloatBE\n  arr.writeDoubleLE = BP.writeDoubleLE\n  arr.writeDoubleBE = BP.writeDoubleBE\n  arr.fill = BP.fill\n  arr.inspect = BP.inspect\n  arr.toArrayBuffer = BP.toArrayBuffer\n\n  return arr\n}\n\nvar INVALID_BASE64_RE = /[^+\\/0-9A-Za-z-_]/g\n\nfunction base64clean (str) {\n  // Node strips out invalid characters like \\n and \\t from the string, base64-js does not\n  str = stringtrim(str).replace(INVALID_BASE64_RE, '')\n  // Node converts strings with length < 2 to ''\n  if (str.length < 2) return ''\n  // Node allows for non-padded base64 strings (missing trailing ===), base64-js does not\n  while (str.length % 4 !== 0) {\n    str = str + '='\n  }\n  return str\n}\n\nfunction stringtrim (str) {\n  if (str.trim) return str.trim()\n  return str.replace(/^\\s+|\\s+$/g, '')\n}\n\nfunction toHex (n) {\n  if (n < 16) return '0' + n.toString(16)\n  return n.toString(16)\n}\n\nfunction utf8ToBytes (string, units) {\n  units = units || Infinity\n  var codePoint\n  var length = string.length\n  var leadSurrogate = null\n  var bytes = []\n\n  for (var i = 0; i < length; i++) {\n    codePoint = string.charCodeAt(i)\n\n    // is surrogate component\n    if (codePoint > 0xD7FF && codePoint < 0xE000) {\n      // last char was a lead\n      if (!leadSurrogate) {\n        // no lead yet\n        if (codePoint > 0xDBFF) {\n          // unexpected trail\n          if ((units -= 3) > -1) bytes.push(0xEF, 0xBF, 0xBD)\n          continue\n        } else if (i + 1 === length) {\n          // unpaired lead\n          if ((units -= 3) > -1) bytes.push(0xEF, 0xBF, 0xBD)\n          continue\n        }\n\n        // valid lead\n        leadSurrogate = codePoint\n\n        continue\n      }\n\n      // 2 leads in a row\n      if (codePoint < 0xDC00) {\n        if ((units -= 3) > -1) bytes.push(0xEF, 0xBF, 0xBD)\n        leadSurrogate = codePoint\n        continue\n      }\n\n      // valid surrogate pair\n      codePoint = (leadSurrogate - 0xD800 << 10 | codePoint - 0xDC00) + 0x10000\n    } else if (leadSurrogate) {\n      // valid bmp char, but last char was a lead\n      if ((units -= 3) > -1) bytes.push(0xEF, 0xBF, 0xBD)\n    }\n\n    leadSurrogate = null\n\n    // encode utf8\n    if (codePoint < 0x80) {\n      if ((units -= 1) < 0) break\n      bytes.push(codePoint)\n    } else if (codePoint < 0x800) {\n      if ((units -= 2) < 0) break\n      bytes.push(\n        codePoint >> 0x6 | 0xC0,\n        codePoint & 0x3F | 0x80\n      )\n    } else if (codePoint < 0x10000) {\n      if ((units -= 3) < 0) break\n      bytes.push(\n        codePoint >> 0xC | 0xE0,\n        codePoint >> 0x6 & 0x3F | 0x80,\n        codePoint & 0x3F | 0x80\n      )\n    } else if (codePoint < 0x110000) {\n      if ((units -= 4) < 0) break\n      bytes.push(\n        codePoint >> 0x12 | 0xF0,\n        codePoint >> 0xC & 0x3F | 0x80,\n        codePoint >> 0x6 & 0x3F | 0x80,\n        codePoint & 0x3F | 0x80\n      )\n    } else {\n      throw new Error('Invalid code point')\n    }\n  }\n\n  return bytes\n}\n\nfunction asciiToBytes (str) {\n  var byteArray = []\n  for (var i = 0; i < str.length; i++) {\n    // Node's code seems to be doing this and not & 0x7F..\n    byteArray.push(str.charCodeAt(i) & 0xFF)\n  }\n  return byteArray\n}\n\nfunction utf16leToBytes (str, units) {\n  var c, hi, lo\n  var byteArray = []\n  for (var i = 0; i < str.length; i++) {\n    if ((units -= 2) < 0) break\n\n    c = str.charCodeAt(i)\n    hi = c >> 8\n    lo = c % 256\n    byteArray.push(lo)\n    byteArray.push(hi)\n  }\n\n  return byteArray\n}\n\nfunction base64ToBytes (str) {\n  return base64.toByteArray(base64clean(str))\n}\n\nfunction blitBuffer (src, dst, offset, length) {\n  for (var i = 0; i < length; i++) {\n    if ((i + offset >= dst.length) || (i >= src.length)) break\n    dst[i + offset] = src[i]\n  }\n  return i\n}\n\n}).call(this,typeof global !== \"undefined\" ? global : typeof self !== \"undefined\" ? self : typeof window !== \"undefined\" ? window : {})\n},{\"base64-js\":4,\"ieee754\":5,\"isarray\":6}],4:[function(require,module,exports){\nvar lookup = 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/';\n\n;(function (exports) {\n\t'use strict';\n\n  var Arr = (typeof Uint8Array !== 'undefined')\n    ? Uint8Array\n    : Array\n\n\tvar PLUS   = '+'.charCodeAt(0)\n\tvar SLASH  = '/'.charCodeAt(0)\n\tvar NUMBER = '0'.charCodeAt(0)\n\tvar LOWER  = 'a'.charCodeAt(0)\n\tvar UPPER  = 'A'.charCodeAt(0)\n\tvar PLUS_URL_SAFE = '-'.charCodeAt(0)\n\tvar SLASH_URL_SAFE = '_'.charCodeAt(0)\n\n\tfunction decode (elt) {\n\t\tvar code = elt.charCodeAt(0)\n\t\tif (code === PLUS ||\n\t\t    code === PLUS_URL_SAFE)\n\t\t\treturn 62 // '+'\n\t\tif (code === SLASH ||\n\t\t    code === SLASH_URL_SAFE)\n\t\t\treturn 63 // '/'\n\t\tif (code < NUMBER)\n\t\t\treturn -1 //no match\n\t\tif (code < NUMBER + 10)\n\t\t\treturn code - NUMBER + 26 + 26\n\t\tif (code < UPPER + 26)\n\t\t\treturn code - UPPER\n\t\tif (code < LOWER + 26)\n\t\t\treturn code - LOWER + 26\n\t}\n\n\tfunction b64ToByteArray (b64) {\n\t\tvar i, j, l, tmp, placeHolders, arr\n\n\t\tif (b64.length % 4 > 0) {\n\t\t\tthrow new Error('Invalid string. Length must be a multiple of 4')\n\t\t}\n\n\t\t// the number of equal signs (place holders)\n\t\t// if there are two placeholders, than the two characters before it\n\t\t// represent one byte\n\t\t// if there is only one, then the three characters before it represent 2 bytes\n\t\t// this is just a cheap hack to not do indexOf twice\n\t\tvar len = b64.length\n\t\tplaceHolders = '=' === b64.charAt(len - 2) ? 2 : '=' === b64.charAt(len - 1) ? 1 : 0\n\n\t\t// base64 is 4/3 + up to two characters of the original data\n\t\tarr = new Arr(b64.length * 3 / 4 - placeHolders)\n\n\t\t// if there are placeholders, only get up to the last complete 4 chars\n\t\tl = placeHolders > 0 ? b64.length - 4 : b64.length\n\n\t\tvar L = 0\n\n\t\tfunction push (v) {\n\t\t\tarr[L++] = v\n\t\t}\n\n\t\tfor (i = 0, j = 0; i < l; i += 4, j += 3) {\n\t\t\ttmp = (decode(b64.charAt(i)) << 18) | (decode(b64.charAt(i + 1)) << 12) | (decode(b64.charAt(i + 2)) << 6) | decode(b64.charAt(i + 3))\n\t\t\tpush((tmp & 0xFF0000) >> 16)\n\t\t\tpush((tmp & 0xFF00) >> 8)\n\t\t\tpush(tmp & 0xFF)\n\t\t}\n\n\t\tif (placeHolders === 2) {\n\t\t\ttmp = (decode(b64.charAt(i)) << 2) | (decode(b64.charAt(i + 1)) >> 4)\n\t\t\tpush(tmp & 0xFF)\n\t\t} else if (placeHolders === 1) {\n\t\t\ttmp = (decode(b64.charAt(i)) << 10) | (decode(b64.charAt(i + 1)) << 4) | (decode(b64.charAt(i + 2)) >> 2)\n\t\t\tpush((tmp >> 8) & 0xFF)\n\t\t\tpush(tmp & 0xFF)\n\t\t}\n\n\t\treturn arr\n\t}\n\n\tfunction uint8ToBase64 (uint8) {\n\t\tvar i,\n\t\t\textraBytes = uint8.length % 3, // if we have 1 byte left, pad 2 bytes\n\t\t\toutput = \"\",\n\t\t\ttemp, length\n\n\t\tfunction encode (num) {\n\t\t\treturn lookup.charAt(num)\n\t\t}\n\n\t\tfunction tripletToBase64 (num) {\n\t\t\treturn encode(num >> 18 & 0x3F) + encode(num >> 12 & 0x3F) + encode(num >> 6 & 0x3F) + encode(num & 0x3F)\n\t\t}\n\n\t\t// go through the array every three bytes, we'll deal with trailing stuff later\n\t\tfor (i = 0, length = uint8.length - extraBytes; i < length; i += 3) {\n\t\t\ttemp = (uint8[i] << 16) + (uint8[i + 1] << 8) + (uint8[i + 2])\n\t\t\toutput += tripletToBase64(temp)\n\t\t}\n\n\t\t// pad the end with zeros, but make sure to not forget the extra bytes\n\t\tswitch (extraBytes) {\n\t\t\tcase 1:\n\t\t\t\ttemp = uint8[uint8.length - 1]\n\t\t\t\toutput += encode(temp >> 2)\n\t\t\t\toutput += encode((temp << 4) & 0x3F)\n\t\t\t\toutput += '=='\n\t\t\t\tbreak\n\t\t\tcase 2:\n\t\t\t\ttemp = (uint8[uint8.length - 2] << 8) + (uint8[uint8.length - 1])\n\t\t\t\toutput += encode(temp >> 10)\n\t\t\t\toutput += encode((temp >> 4) & 0x3F)\n\t\t\t\toutput += encode((temp << 2) & 0x3F)\n\t\t\t\toutput += '='\n\t\t\t\tbreak\n\t\t}\n\n\t\treturn output\n\t}\n\n\texports.toByteArray = b64ToByteArray\n\texports.fromByteArray = uint8ToBase64\n}(typeof exports === 'undefined' ? (this.base64js = {}) : exports))\n\n},{}],5:[function(require,module,exports){\nexports.read = function (buffer, offset, isLE, mLen, nBytes) {\n  var e, m\n  var eLen = nBytes * 8 - mLen - 1\n  var eMax = (1 << eLen) - 1\n  var eBias = eMax >> 1\n  var nBits = -7\n  var i = isLE ? (nBytes - 1) : 0\n  var d = isLE ? -1 : 1\n  var s = buffer[offset + i]\n\n  i += d\n\n  e = s & ((1 << (-nBits)) - 1)\n  s >>= (-nBits)\n  nBits += eLen\n  for (; nBits > 0; e = e * 256 + buffer[offset + i], i += d, nBits -= 8) {}\n\n  m = e & ((1 << (-nBits)) - 1)\n  e >>= (-nBits)\n  nBits += mLen\n  for (; nBits > 0; m = m * 256 + buffer[offset + i], i += d, nBits -= 8) {}\n\n  if (e === 0) {\n    e = 1 - eBias\n  } else if (e === eMax) {\n    return m ? NaN : ((s ? -1 : 1) * Infinity)\n  } else {\n    m = m + Math.pow(2, mLen)\n    e = e - eBias\n  }\n  return (s ? -1 : 1) * m * Math.pow(2, e - mLen)\n}\n\nexports.write = function (buffer, value, offset, isLE, mLen, nBytes) {\n  var e, m, c\n  var eLen = nBytes * 8 - mLen - 1\n  var eMax = (1 << eLen) - 1\n  var eBias = eMax >> 1\n  var rt = (mLen === 23 ? Math.pow(2, -24) - Math.pow(2, -77) : 0)\n  var i = isLE ? 0 : (nBytes - 1)\n  var d = isLE ? 1 : -1\n  var s = value < 0 || (value === 0 && 1 / value < 0) ? 1 : 0\n\n  value = Math.abs(value)\n\n  if (isNaN(value) || value === Infinity) {\n    m = isNaN(value) ? 1 : 0\n    e = eMax\n  } else {\n    e = Math.floor(Math.log(value) / Math.LN2)\n    if (value * (c = Math.pow(2, -e)) < 1) {\n      e--\n      c *= 2\n    }\n    if (e + eBias >= 1) {\n      value += rt / c\n    } else {\n      value += rt * Math.pow(2, 1 - eBias)\n    }\n    if (value * c >= 2) {\n      e++\n      c /= 2\n    }\n\n    if (e + eBias >= eMax) {\n      m = 0\n      e = eMax\n    } else if (e + eBias >= 1) {\n      m = (value * c - 1) * Math.pow(2, mLen)\n      e = e + eBias\n    } else {\n      m = value * Math.pow(2, eBias - 1) * Math.pow(2, mLen)\n      e = 0\n    }\n  }\n\n  for (; mLen >= 8; buffer[offset + i] = m & 0xff, i += d, m /= 256, mLen -= 8) {}\n\n  e = (e << mLen) | m\n  eLen += mLen\n  for (; eLen > 0; buffer[offset + i] = e & 0xff, i += d, e /= 256, eLen -= 8) {}\n\n  buffer[offset + i - d] |= s * 128\n}\n\n},{}],6:[function(require,module,exports){\nvar toString = {}.toString;\n\nmodule.exports = Array.isArray || function (arr) {\n  return toString.call(arr) == '[object Array]';\n};\n\n},{}],7:[function(require,module,exports){\n// Copyright Joyent, Inc. and other Node contributors.\n//\n// Permission is hereby granted, free of charge, to any person obtaining a\n// copy of this software and associated documentation files (the\n// \"Software\"), to deal in the Software without restriction, including\n// without limitation the rights to use, copy, modify, merge, publish,\n// distribute, sublicense, and/or sell copies of the Software, and to permit\n// persons to whom the Software is furnished to do so, subject to the\n// following conditions:\n//\n// The above copyright notice and this permission notice shall be included\n// in all copies or substantial portions of the Software.\n//\n// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS\n// OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF\n// MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN\n// NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM,\n// DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR\n// OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE\n// USE OR OTHER DEALINGS IN THE SOFTWARE.\n\nfunction EventEmitter() {\n  this._events = this._events || {};\n  this._maxListeners = this._maxListeners || undefined;\n}\nmodule.exports = EventEmitter;\n\n// Backwards-compat with node 0.10.x\nEventEmitter.EventEmitter = EventEmitter;\n\nEventEmitter.prototype._events = undefined;\nEventEmitter.prototype._maxListeners = undefined;\n\n// By default EventEmitters will print a warning if more than 10 listeners are\n// added to it. This is a useful default which helps finding memory leaks.\nEventEmitter.defaultMaxListeners = 10;\n\n// Obviously not all Emitters should be limited to 10. This function allows\n// that to be increased. Set to zero for unlimited.\nEventEmitter.prototype.setMaxListeners = function(n) {\n  if (!isNumber(n) || n < 0 || isNaN(n))\n    throw TypeError('n must be a positive number');\n  this._maxListeners = n;\n  return this;\n};\n\nEventEmitter.prototype.emit = function(type) {\n  var er, handler, len, args, i, listeners;\n\n  if (!this._events)\n    this._events = {};\n\n  // If there is no 'error' event listener then throw.\n  if (type === 'error') {\n    if (!this._events.error ||\n        (isObject(this._events.error) && !this._events.error.length)) {\n      er = arguments[1];\n      if (er instanceof Error) {\n        throw er; // Unhandled 'error' event\n      }\n      throw TypeError('Uncaught, unspecified \"error\" event.');\n    }\n  }\n\n  handler = this._events[type];\n\n  if (isUndefined(handler))\n    return false;\n\n  if (isFunction(handler)) {\n    switch (arguments.length) {\n      // fast cases\n      case 1:\n        handler.call(this);\n        break;\n      case 2:\n        handler.call(this, arguments[1]);\n        break;\n      case 3:\n        handler.call(this, arguments[1], arguments[2]);\n        break;\n      // slower\n      default:\n        len = arguments.length;\n        args = new Array(len - 1);\n        for (i = 1; i < len; i++)\n          args[i - 1] = arguments[i];\n        handler.apply(this, args);\n    }\n  } else if (isObject(handler)) {\n    len = arguments.length;\n    args = new Array(len - 1);\n    for (i = 1; i < len; i++)\n      args[i - 1] = arguments[i];\n\n    listeners = handler.slice();\n    len = listeners.length;\n    for (i = 0; i < len; i++)\n      listeners[i].apply(this, args);\n  }\n\n  return true;\n};\n\nEventEmitter.prototype.addListener = function(type, listener) {\n  var m;\n\n  if (!isFunction(listener))\n    throw TypeError('listener must be a function');\n\n  if (!this._events)\n    this._events = {};\n\n  // To avoid recursion in the case that type === \"newListener\"! Before\n  // adding it to the listeners, first emit \"newListener\".\n  if (this._events.newListener)\n    this.emit('newListener', type,\n              isFunction(listener.listener) ?\n              listener.listener : listener);\n\n  if (!this._events[type])\n    // Optimize the case of one listener. Don't need the extra array object.\n    this._events[type] = listener;\n  else if (isObject(this._events[type]))\n    // If we've already got an array, just append.\n    this._events[type].push(listener);\n  else\n    // Adding the second element, need to change to array.\n    this._events[type] = [this._events[type], listener];\n\n  // Check for listener leak\n  if (isObject(this._events[type]) && !this._events[type].warned) {\n    var m;\n    if (!isUndefined(this._maxListeners)) {\n      m = this._maxListeners;\n    } else {\n      m = EventEmitter.defaultMaxListeners;\n    }\n\n    if (m && m > 0 && this._events[type].length > m) {\n      this._events[type].warned = true;\n      console.error('(node) warning: possible EventEmitter memory ' +\n                    'leak detected. %d listeners added. ' +\n                    'Use emitter.setMaxListeners() to increase limit.',\n                    this._events[type].length);\n      if (typeof console.trace === 'function') {\n        // not supported in IE 10\n        console.trace();\n      }\n    }\n  }\n\n  return this;\n};\n\nEventEmitter.prototype.on = EventEmitter.prototype.addListener;\n\nEventEmitter.prototype.once = function(type, listener) {\n  if (!isFunction(listener))\n    throw TypeError('listener must be a function');\n\n  var fired = false;\n\n  function g() {\n    this.removeListener(type, g);\n\n    if (!fired) {\n      fired = true;\n      listener.apply(this, arguments);\n    }\n  }\n\n  g.listener = listener;\n  this.on(type, g);\n\n  return this;\n};\n\n// emits a 'removeListener' event iff the listener was removed\nEventEmitter.prototype.removeListener = function(type, listener) {\n  var list, position, length, i;\n\n  if (!isFunction(listener))\n    throw TypeError('listener must be a function');\n\n  if (!this._events || !this._events[type])\n    return this;\n\n  list = this._events[type];\n  length = list.length;\n  position = -1;\n\n  if (list === listener ||\n      (isFunction(list.listener) && list.listener === listener)) {\n    delete this._events[type];\n    if (this._events.removeListener)\n      this.emit('removeListener', type, listener);\n\n  } else if (isObject(list)) {\n    for (i = length; i-- > 0;) {\n      if (list[i] === listener ||\n          (list[i].listener && list[i].listener === listener)) {\n        position = i;\n        break;\n      }\n    }\n\n    if (position < 0)\n      return this;\n\n    if (list.length === 1) {\n      list.length = 0;\n      delete this._events[type];\n    } else {\n      list.splice(position, 1);\n    }\n\n    if (this._events.removeListener)\n      this.emit('removeListener', type, listener);\n  }\n\n  return this;\n};\n\nEventEmitter.prototype.removeAllListeners = function(type) {\n  var key, listeners;\n\n  if (!this._events)\n    return this;\n\n  // not listening for removeListener, no need to emit\n  if (!this._events.removeListener) {\n    if (arguments.length === 0)\n      this._events = {};\n    else if (this._events[type])\n      delete this._events[type];\n    return this;\n  }\n\n  // emit removeListener for all listeners on all events\n  if (arguments.length === 0) {\n    for (key in this._events) {\n      if (key === 'removeListener') continue;\n      this.removeAllListeners(key);\n    }\n    this.removeAllListeners('removeListener');\n    this._events = {};\n    return this;\n  }\n\n  listeners = this._events[type];\n\n  if (isFunction(listeners)) {\n    this.removeListener(type, listeners);\n  } else {\n    // LIFO order\n    while (listeners.length)\n      this.removeListener(type, listeners[listeners.length - 1]);\n  }\n  delete this._events[type];\n\n  return this;\n};\n\nEventEmitter.prototype.listeners = function(type) {\n  var ret;\n  if (!this._events || !this._events[type])\n    ret = [];\n  else if (isFunction(this._events[type]))\n    ret = [this._events[type]];\n  else\n    ret = this._events[type].slice();\n  return ret;\n};\n\nEventEmitter.listenerCount = function(emitter, type) {\n  var ret;\n  if (!emitter._events || !emitter._events[type])\n    ret = 0;\n  else if (isFunction(emitter._events[type]))\n    ret = 1;\n  else\n    ret = emitter._events[type].length;\n  return ret;\n};\n\nfunction isFunction(arg) {\n  return typeof arg === 'function';\n}\n\nfunction isNumber(arg) {\n  return typeof arg === 'number';\n}\n\nfunction isObject(arg) {\n  return typeof arg === 'object' && arg !== null;\n}\n\nfunction isUndefined(arg) {\n  return arg === void 0;\n}\n\n},{}],8:[function(require,module,exports){\nif (typeof Object.create === 'function') {\n  // implementation from standard node.js 'util' module\n  module.exports = function inherits(ctor, superCtor) {\n    ctor.super_ = superCtor\n    ctor.prototype = Object.create(superCtor.prototype, {\n      constructor: {\n        value: ctor,\n        enumerable: false,\n        writable: true,\n        configurable: true\n      }\n    });\n  };\n} else {\n  // old school shim for old browsers\n  module.exports = function inherits(ctor, superCtor) {\n    ctor.super_ = superCtor\n    var TempCtor = function () {}\n    TempCtor.prototype = superCtor.prototype\n    ctor.prototype = new TempCtor()\n    ctor.prototype.constructor = ctor\n  }\n}\n\n},{}],9:[function(require,module,exports){\n/**\n * Determine if an object is Buffer\n *\n * Author:   Feross Aboukhadijeh <feross@feross.org> <http://feross.org>\n * License:  MIT\n *\n * `npm install is-buffer`\n */\n\nmodule.exports = function (obj) {\n  return !!(obj != null &&\n    (obj._isBuffer || // For Safari 5-7 (missing Object.prototype.constructor)\n      (obj.constructor &&\n      typeof obj.constructor.isBuffer === 'function' &&\n      obj.constructor.isBuffer(obj))\n    ))\n}\n\n},{}],10:[function(require,module,exports){\nmodule.exports = Array.isArray || function (arr) {\n  return Object.prototype.toString.call(arr) == '[object Array]';\n};\n\n},{}],11:[function(require,module,exports){\n// shim for using process in browser\n\nvar process = module.exports = {};\nvar queue = [];\nvar draining = false;\nvar currentQueue;\nvar queueIndex = -1;\n\nfunction cleanUpNextTick() {\n    draining = false;\n    if (currentQueue.length) {\n        queue = currentQueue.concat(queue);\n    } else {\n        queueIndex = -1;\n    }\n    if (queue.length) {\n        drainQueue();\n    }\n}\n\nfunction drainQueue() {\n    if (draining) {\n        return;\n    }\n    var timeout = setTimeout(cleanUpNextTick);\n    draining = true;\n\n    var len = queue.length;\n    while(len) {\n        currentQueue = queue;\n        queue = [];\n        while (++queueIndex < len) {\n            if (currentQueue) {\n                currentQueue[queueIndex].run();\n            }\n        }\n        queueIndex = -1;\n        len = queue.length;\n    }\n    currentQueue = null;\n    draining = false;\n    clearTimeout(timeout);\n}\n\nprocess.nextTick = function (fun) {\n    var args = new Array(arguments.length - 1);\n    if (arguments.length > 1) {\n        for (var i = 1; i < arguments.length; i++) {\n            args[i - 1] = arguments[i];\n        }\n    }\n    queue.push(new Item(fun, args));\n    if (queue.length === 1 && !draining) {\n        setTimeout(drainQueue, 0);\n    }\n};\n\n// v8 likes predictible objects\nfunction Item(fun, array) {\n    this.fun = fun;\n    this.array = array;\n}\nItem.prototype.run = function () {\n    this.fun.apply(null, this.array);\n};\nprocess.title = 'browser';\nprocess.browser = true;\nprocess.env = {};\nprocess.argv = [];\nprocess.version = ''; // empty string to avoid regexp issues\nprocess.versions = {};\n\nfunction noop() {}\n\nprocess.on = noop;\nprocess.addListener = noop;\nprocess.once = noop;\nprocess.off = noop;\nprocess.removeListener = noop;\nprocess.removeAllListeners = noop;\nprocess.emit = noop;\n\nprocess.binding = function (name) {\n    throw new Error('process.binding is not supported');\n};\n\nprocess.cwd = function () { return '/' };\nprocess.chdir = function (dir) {\n    throw new Error('process.chdir is not supported');\n};\nprocess.umask = function() { return 0; };\n\n},{}],12:[function(require,module,exports){\nmodule.exports = require(\"./lib/_stream_duplex.js\")\n\n},{\"./lib/_stream_duplex.js\":13}],13:[function(require,module,exports){\n(function (process){\n// Copyright Joyent, Inc. and other Node contributors.\n//\n// Permission is hereby granted, free of charge, to any person obtaining a\n// copy of this software and associated documentation files (the\n// \"Software\"), to deal in the Software without restriction, including\n// without limitation the rights to use, copy, modify, merge, publish,\n// distribute, sublicense, and/or sell copies of the Software, and to permit\n// persons to whom the Software is furnished to do so, subject to the\n// following conditions:\n//\n// The above copyright notice and this permission notice shall be included\n// in all copies or substantial portions of the Software.\n//\n// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS\n// OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF\n// MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN\n// NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM,\n// DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR\n// OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE\n// USE OR OTHER DEALINGS IN THE SOFTWARE.\n\n// a duplex stream is just a stream that is both readable and writable.\n// Since JS doesn't have multiple prototypal inheritance, this class\n// prototypally inherits from Readable, and then parasitically from\n// Writable.\n\nmodule.exports = Duplex;\n\n/*<replacement>*/\nvar objectKeys = Object.keys || function (obj) {\n  var keys = [];\n  for (var key in obj) keys.push(key);\n  return keys;\n}\n/*</replacement>*/\n\n\n/*<replacement>*/\nvar util = require('core-util-is');\nutil.inherits = require('inherits');\n/*</replacement>*/\n\nvar Readable = require('./_stream_readable');\nvar Writable = require('./_stream_writable');\n\nutil.inherits(Duplex, Readable);\n\nforEach(objectKeys(Writable.prototype), function(method) {\n  if (!Duplex.prototype[method])\n    Duplex.prototype[method] = Writable.prototype[method];\n});\n\nfunction Duplex(options) {\n  if (!(this instanceof Duplex))\n    return new Duplex(options);\n\n  Readable.call(this, options);\n  Writable.call(this, options);\n\n  if (options && options.readable === false)\n    this.readable = false;\n\n  if (options && options.writable === false)\n    this.writable = false;\n\n  this.allowHalfOpen = true;\n  if (options && options.allowHalfOpen === false)\n    this.allowHalfOpen = false;\n\n  this.once('end', onend);\n}\n\n// the no-half-open enforcer\nfunction onend() {\n  // if we allow half-open state, or if the writable side ended,\n  // then we're ok.\n  if (this.allowHalfOpen || this._writableState.ended)\n    return;\n\n  // no more data can be written.\n  // But allow more writes to happen in this tick.\n  process.nextTick(this.end.bind(this));\n}\n\nfunction forEach (xs, f) {\n  for (var i = 0, l = xs.length; i < l; i++) {\n    f(xs[i], i);\n  }\n}\n\n}).call(this,require('_process'))\n},{\"./_stream_readable\":15,\"./_stream_writable\":17,\"_process\":11,\"core-util-is\":18,\"inherits\":8}],14:[function(require,module,exports){\n// Copyright Joyent, Inc. and other Node contributors.\n//\n// Permission is hereby granted, free of charge, to any person obtaining a\n// copy of this software and associated documentation files (the\n// \"Software\"), to deal in the Software without restriction, including\n// without limitation the rights to use, copy, modify, merge, publish,\n// distribute, sublicense, and/or sell copies of the Software, and to permit\n// persons to whom the Software is furnished to do so, subject to the\n// following conditions:\n//\n// The above copyright notice and this permission notice shall be included\n// in all copies or substantial portions of the Software.\n//\n// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS\n// OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF\n// MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN\n// NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM,\n// DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR\n// OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE\n// USE OR OTHER DEALINGS IN THE SOFTWARE.\n\n// a passthrough stream.\n// basically just the most minimal sort of Transform stream.\n// Every written chunk gets output as-is.\n\nmodule.exports = PassThrough;\n\nvar Transform = require('./_stream_transform');\n\n/*<replacement>*/\nvar util = require('core-util-is');\nutil.inherits = require('inherits');\n/*</replacement>*/\n\nutil.inherits(PassThrough, Transform);\n\nfunction PassThrough(options) {\n  if (!(this instanceof PassThrough))\n    return new PassThrough(options);\n\n  Transform.call(this, options);\n}\n\nPassThrough.prototype._transform = function(chunk, encoding, cb) {\n  cb(null, chunk);\n};\n\n},{\"./_stream_transform\":16,\"core-util-is\":18,\"inherits\":8}],15:[function(require,module,exports){\n(function (process){\n// Copyright Joyent, Inc. and other Node contributors.\n//\n// Permission is hereby granted, free of charge, to any person obtaining a\n// copy of this software and associated documentation files (the\n// \"Software\"), to deal in the Software without restriction, including\n// without limitation the rights to use, copy, modify, merge, publish,\n// distribute, sublicense, and/or sell copies of the Software, and to permit\n// persons to whom the Software is furnished to do so, subject to the\n// following conditions:\n//\n// The above copyright notice and this permission notice shall be included\n// in all copies or substantial portions of the Software.\n//\n// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS\n// OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF\n// MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN\n// NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM,\n// DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR\n// OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE\n// USE OR OTHER DEALINGS IN THE SOFTWARE.\n\nmodule.exports = Readable;\n\n/*<replacement>*/\nvar isArray = require('isarray');\n/*</replacement>*/\n\n\n/*<replacement>*/\nvar Buffer = require('buffer').Buffer;\n/*</replacement>*/\n\nReadable.ReadableState = ReadableState;\n\nvar EE = require('events').EventEmitter;\n\n/*<replacement>*/\nif (!EE.listenerCount) EE.listenerCount = function(emitter, type) {\n  return emitter.listeners(type).length;\n};\n/*</replacement>*/\n\nvar Stream = require('stream');\n\n/*<replacement>*/\nvar util = require('core-util-is');\nutil.inherits = require('inherits');\n/*</replacement>*/\n\nvar StringDecoder;\n\n\n/*<replacement>*/\nvar debug = require('util');\nif (debug && debug.debuglog) {\n  debug = debug.debuglog('stream');\n} else {\n  debug = function () {};\n}\n/*</replacement>*/\n\n\nutil.inherits(Readable, Stream);\n\nfunction ReadableState(options, stream) {\n  var Duplex = require('./_stream_duplex');\n\n  options = options || {};\n\n  // the point at which it stops calling _read() to fill the buffer\n  // Note: 0 is a valid value, means \"don't call _read preemptively ever\"\n  var hwm = options.highWaterMark;\n  var defaultHwm = options.objectMode ? 16 : 16 * 1024;\n  this.highWaterMark = (hwm || hwm === 0) ? hwm : defaultHwm;\n\n  // cast to ints.\n  this.highWaterMark = ~~this.highWaterMark;\n\n  this.buffer = [];\n  this.length = 0;\n  this.pipes = null;\n  this.pipesCount = 0;\n  this.flowing = null;\n  this.ended = false;\n  this.endEmitted = false;\n  this.reading = false;\n\n  // a flag to be able to tell if the onwrite cb is called immediately,\n  // or on a later tick.  We set this to true at first, because any\n  // actions that shouldn't happen until \"later\" should generally also\n  // not happen before the first write call.\n  this.sync = true;\n\n  // whenever we return null, then we set a flag to say\n  // that we're awaiting a 'readable' event emission.\n  this.needReadable = false;\n  this.emittedReadable = false;\n  this.readableListening = false;\n\n\n  // object stream flag. Used to make read(n) ignore n and to\n  // make all the buffer merging and length checks go away\n  this.objectMode = !!options.objectMode;\n\n  if (stream instanceof Duplex)\n    this.objectMode = this.objectMode || !!options.readableObjectMode;\n\n  // Crypto is kind of old and crusty.  Historically, its default string\n  // encoding is 'binary' so we have to make this configurable.\n  // Everything else in the universe uses 'utf8', though.\n  this.defaultEncoding = options.defaultEncoding || 'utf8';\n\n  // when piping, we only care about 'readable' events that happen\n  // after read()ing all the bytes and not getting any pushback.\n  this.ranOut = false;\n\n  // the number of writers that are awaiting a drain event in .pipe()s\n  this.awaitDrain = 0;\n\n  // if true, a maybeReadMore has been scheduled\n  this.readingMore = false;\n\n  this.decoder = null;\n  this.encoding = null;\n  if (options.encoding) {\n    if (!StringDecoder)\n      StringDecoder = require('string_decoder/').StringDecoder;\n    this.decoder = new StringDecoder(options.encoding);\n    this.encoding = options.encoding;\n  }\n}\n\nfunction Readable(options) {\n  var Duplex = require('./_stream_duplex');\n\n  if (!(this instanceof Readable))\n    return new Readable(options);\n\n  this._readableState = new ReadableState(options, this);\n\n  // legacy\n  this.readable = true;\n\n  Stream.call(this);\n}\n\n// Manually shove something into the read() buffer.\n// This returns true if the highWaterMark has not been hit yet,\n// similar to how Writable.write() returns true if you should\n// write() some more.\nReadable.prototype.push = function(chunk, encoding) {\n  var state = this._readableState;\n\n  if (util.isString(chunk) && !state.objectMode) {\n    encoding = encoding || state.defaultEncoding;\n    if (encoding !== state.encoding) {\n      chunk = new Buffer(chunk, encoding);\n      encoding = '';\n    }\n  }\n\n  return readableAddChunk(this, state, chunk, encoding, false);\n};\n\n// Unshift should *always* be something directly out of read()\nReadable.prototype.unshift = function(chunk) {\n  var state = this._readableState;\n  return readableAddChunk(this, state, chunk, '', true);\n};\n\nfunction readableAddChunk(stream, state, chunk, encoding, addToFront) {\n  var er = chunkInvalid(state, chunk);\n  if (er) {\n    stream.emit('error', er);\n  } else if (util.isNullOrUndefined(chunk)) {\n    state.reading = false;\n    if (!state.ended)\n      onEofChunk(stream, state);\n  } else if (state.objectMode || chunk && chunk.length > 0) {\n    if (state.ended && !addToFront) {\n      var e = new Error('stream.push() after EOF');\n      stream.emit('error', e);\n    } else if (state.endEmitted && addToFront) {\n      var e = new Error('stream.unshift() after end event');\n      stream.emit('error', e);\n    } else {\n      if (state.decoder && !addToFront && !encoding)\n        chunk = state.decoder.write(chunk);\n\n      if (!addToFront)\n        state.reading = false;\n\n      // if we want the data now, just emit it.\n      if (state.flowing && state.length === 0 && !state.sync) {\n        stream.emit('data', chunk);\n        stream.read(0);\n      } else {\n        // update the buffer info.\n        state.length += state.objectMode ? 1 : chunk.length;\n        if (addToFront)\n          state.buffer.unshift(chunk);\n        else\n          state.buffer.push(chunk);\n\n        if (state.needReadable)\n          emitReadable(stream);\n      }\n\n      maybeReadMore(stream, state);\n    }\n  } else if (!addToFront) {\n    state.reading = false;\n  }\n\n  return needMoreData(state);\n}\n\n\n\n// if it's past the high water mark, we can push in some more.\n// Also, if we have no data yet, we can stand some\n// more bytes.  This is to work around cases where hwm=0,\n// such as the repl.  Also, if the push() triggered a\n// readable event, and the user called read(largeNumber) such that\n// needReadable was set, then we ought to push more, so that another\n// 'readable' event will be triggered.\nfunction needMoreData(state) {\n  return !state.ended &&\n         (state.needReadable ||\n          state.length < state.highWaterMark ||\n          state.length === 0);\n}\n\n// backwards compatibility.\nReadable.prototype.setEncoding = function(enc) {\n  if (!StringDecoder)\n    StringDecoder = require('string_decoder/').StringDecoder;\n  this._readableState.decoder = new StringDecoder(enc);\n  this._readableState.encoding = enc;\n  return this;\n};\n\n// Don't raise the hwm > 128MB\nvar MAX_HWM = 0x800000;\nfunction roundUpToNextPowerOf2(n) {\n  if (n >= MAX_HWM) {\n    n = MAX_HWM;\n  } else {\n    // Get the next highest power of 2\n    n--;\n    for (var p = 1; p < 32; p <<= 1) n |= n >> p;\n    n++;\n  }\n  return n;\n}\n\nfunction howMuchToRead(n, state) {\n  if (state.length === 0 && state.ended)\n    return 0;\n\n  if (state.objectMode)\n    return n === 0 ? 0 : 1;\n\n  if (isNaN(n) || util.isNull(n)) {\n    // only flow one buffer at a time\n    if (state.flowing && state.buffer.length)\n      return state.buffer[0].length;\n    else\n      return state.length;\n  }\n\n  if (n <= 0)\n    return 0;\n\n  // If we're asking for more than the target buffer level,\n  // then raise the water mark.  Bump up to the next highest\n  // power of 2, to prevent increasing it excessively in tiny\n  // amounts.\n  if (n > state.highWaterMark)\n    state.highWaterMark = roundUpToNextPowerOf2(n);\n\n  // don't have that much.  return null, unless we've ended.\n  if (n > state.length) {\n    if (!state.ended) {\n      state.needReadable = true;\n      return 0;\n    } else\n      return state.length;\n  }\n\n  return n;\n}\n\n// you can override either this method, or the async _read(n) below.\nReadable.prototype.read = function(n) {\n  debug('read', n);\n  var state = this._readableState;\n  var nOrig = n;\n\n  if (!util.isNumber(n) || n > 0)\n    state.emittedReadable = false;\n\n  // if we're doing read(0) to trigger a readable event, but we\n  // already have a bunch of data in the buffer, then just trigger\n  // the 'readable' event and move on.\n  if (n === 0 &&\n      state.needReadable &&\n      (state.length >= state.highWaterMark || state.ended)) {\n    debug('read: emitReadable', state.length, state.ended);\n    if (state.length === 0 && state.ended)\n      endReadable(this);\n    else\n      emitReadable(this);\n    return null;\n  }\n\n  n = howMuchToRead(n, state);\n\n  // if we've ended, and we're now clear, then finish it up.\n  if (n === 0 && state.ended) {\n    if (state.length === 0)\n      endReadable(this);\n    return null;\n  }\n\n  // All the actual chunk generation logic needs to be\n  // *below* the call to _read.  The reason is that in certain\n  // synthetic stream cases, such as passthrough streams, _read\n  // may be a completely synchronous operation which may change\n  // the state of the read buffer, providing enough data when\n  // before there was *not* enough.\n  //\n  // So, the steps are:\n  // 1. Figure out what the state of things will be after we do\n  // a read from the buffer.\n  //\n  // 2. If that resulting state will trigger a _read, then call _read.\n  // Note that this may be asynchronous, or synchronous.  Yes, it is\n  // deeply ugly to write APIs this way, but that still doesn't mean\n  // that the Readable class should behave improperly, as streams are\n  // designed to be sync/async agnostic.\n  // Take note if the _read call is sync or async (ie, if the read call\n  // has returned yet), so that we know whether or not it's safe to emit\n  // 'readable' etc.\n  //\n  // 3. Actually pull the requested chunks out of the buffer and return.\n\n  // if we need a readable event, then we need to do some reading.\n  var doRead = state.needReadable;\n  debug('need readable', doRead);\n\n  // if we currently have less than the highWaterMark, then also read some\n  if (state.length === 0 || state.length - n < state.highWaterMark) {\n    doRead = true;\n    debug('length less than watermark', doRead);\n  }\n\n  // however, if we've ended, then there's no point, and if we're already\n  // reading, then it's unnecessary.\n  if (state.ended || state.reading) {\n    doRead = false;\n    debug('reading or ended', doRead);\n  }\n\n  if (doRead) {\n    debug('do read');\n    state.reading = true;\n    state.sync = true;\n    // if the length is currently zero, then we *need* a readable event.\n    if (state.length === 0)\n      state.needReadable = true;\n    // call internal read method\n    this._read(state.highWaterMark);\n    state.sync = false;\n  }\n\n  // If _read pushed data synchronously, then `reading` will be false,\n  // and we need to re-evaluate how much data we can return to the user.\n  if (doRead && !state.reading)\n    n = howMuchToRead(nOrig, state);\n\n  var ret;\n  if (n > 0)\n    ret = fromList(n, state);\n  else\n    ret = null;\n\n  if (util.isNull(ret)) {\n    state.needReadable = true;\n    n = 0;\n  }\n\n  state.length -= n;\n\n  // If we have nothing in the buffer, then we want to know\n  // as soon as we *do* get something into the buffer.\n  if (state.length === 0 && !state.ended)\n    state.needReadable = true;\n\n  // If we tried to read() past the EOF, then emit end on the next tick.\n  if (nOrig !== n && state.ended && state.length === 0)\n    endReadable(this);\n\n  if (!util.isNull(ret))\n    this.emit('data', ret);\n\n  return ret;\n};\n\nfunction chunkInvalid(state, chunk) {\n  var er = null;\n  if (!util.isBuffer(chunk) &&\n      !util.isString(chunk) &&\n      !util.isNullOrUndefined(chunk) &&\n      !state.objectMode) {\n    er = new TypeError('Invalid non-string/buffer chunk');\n  }\n  return er;\n}\n\n\nfunction onEofChunk(stream, state) {\n  if (state.decoder && !state.ended) {\n    var chunk = state.decoder.end();\n    if (chunk && chunk.length) {\n      state.buffer.push(chunk);\n      state.length += state.objectMode ? 1 : chunk.length;\n    }\n  }\n  state.ended = true;\n\n  // emit 'readable' now to make sure it gets picked up.\n  emitReadable(stream);\n}\n\n// Don't emit readable right away in sync mode, because this can trigger\n// another read() call => stack overflow.  This way, it might trigger\n// a nextTick recursion warning, but that's not so bad.\nfunction emitReadable(stream) {\n  var state = stream._readableState;\n  state.needReadable = false;\n  if (!state.emittedReadable) {\n    debug('emitReadable', state.flowing);\n    state.emittedReadable = true;\n    if (state.sync)\n      process.nextTick(function() {\n        emitReadable_(stream);\n      });\n    else\n      emitReadable_(stream);\n  }\n}\n\nfunction emitReadable_(stream) {\n  debug('emit readable');\n  stream.emit('readable');\n  flow(stream);\n}\n\n\n// at this point, the user has presumably seen the 'readable' event,\n// and called read() to consume some data.  that may have triggered\n// in turn another _read(n) call, in which case reading = true if\n// it's in progress.\n// However, if we're not ended, or reading, and the length < hwm,\n// then go ahead and try to read some more preemptively.\nfunction maybeReadMore(stream, state) {\n  if (!state.readingMore) {\n    state.readingMore = true;\n    process.nextTick(function() {\n      maybeReadMore_(stream, state);\n    });\n  }\n}\n\nfunction maybeReadMore_(stream, state) {\n  var len = state.length;\n  while (!state.reading && !state.flowing && !state.ended &&\n         state.length < state.highWaterMark) {\n    debug('maybeReadMore read 0');\n    stream.read(0);\n    if (len === state.length)\n      // didn't get any data, stop spinning.\n      break;\n    else\n      len = state.length;\n  }\n  state.readingMore = false;\n}\n\n// abstract method.  to be overridden in specific implementation classes.\n// call cb(er, data) where data is <= n in length.\n// for virtual (non-string, non-buffer) streams, \"length\" is somewhat\n// arbitrary, and perhaps not very meaningful.\nReadable.prototype._read = function(n) {\n  this.emit('error', new Error('not implemented'));\n};\n\nReadable.prototype.pipe = function(dest, pipeOpts) {\n  var src = this;\n  var state = this._readableState;\n\n  switch (state.pipesCount) {\n    case 0:\n      state.pipes = dest;\n      break;\n    case 1:\n      state.pipes = [state.pipes, dest];\n      break;\n    default:\n      state.pipes.push(dest);\n      break;\n  }\n  state.pipesCount += 1;\n  debug('pipe count=%d opts=%j', state.pipesCount, pipeOpts);\n\n  var doEnd = (!pipeOpts || pipeOpts.end !== false) &&\n              dest !== process.stdout &&\n              dest !== process.stderr;\n\n  var endFn = doEnd ? onend : cleanup;\n  if (state.endEmitted)\n    process.nextTick(endFn);\n  else\n    src.once('end', endFn);\n\n  dest.on('unpipe', onunpipe);\n  function onunpipe(readable) {\n    debug('onunpipe');\n    if (readable === src) {\n      cleanup();\n    }\n  }\n\n  function onend() {\n    debug('onend');\n    dest.end();\n  }\n\n  // when the dest drains, it reduces the awaitDrain counter\n  // on the source.  This would be more elegant with a .once()\n  // handler in flow(), but adding and removing repeatedly is\n  // too slow.\n  var ondrain = pipeOnDrain(src);\n  dest.on('drain', ondrain);\n\n  function cleanup() {\n    debug('cleanup');\n    // cleanup event handlers once the pipe is broken\n    dest.removeListener('close', onclose);\n    dest.removeListener('finish', onfinish);\n    dest.removeListener('drain', ondrain);\n    dest.removeListener('error', onerror);\n    dest.removeListener('unpipe', onunpipe);\n    src.removeListener('end', onend);\n    src.removeListener('end', cleanup);\n    src.removeListener('data', ondata);\n\n    // if the reader is waiting for a drain event from this\n    // specific writer, then it would cause it to never start\n    // flowing again.\n    // So, if this is awaiting a drain, then we just call it now.\n    // If we don't know, then assume that we are waiting for one.\n    if (state.awaitDrain &&\n        (!dest._writableState || dest._writableState.needDrain))\n      ondrain();\n  }\n\n  src.on('data', ondata);\n  function ondata(chunk) {\n    debug('ondata');\n    var ret = dest.write(chunk);\n    if (false === ret) {\n      debug('false write response, pause',\n            src._readableState.awaitDrain);\n      src._readableState.awaitDrain++;\n      src.pause();\n    }\n  }\n\n  // if the dest has an error, then stop piping into it.\n  // however, don't suppress the throwing behavior for this.\n  function onerror(er) {\n    debug('onerror', er);\n    unpipe();\n    dest.removeListener('error', onerror);\n    if (EE.listenerCount(dest, 'error') === 0)\n      dest.emit('error', er);\n  }\n  // This is a brutally ugly hack to make sure that our error handler\n  // is attached before any userland ones.  NEVER DO THIS.\n  if (!dest._events || !dest._events.error)\n    dest.on('error', onerror);\n  else if (isArray(dest._events.error))\n    dest._events.error.unshift(onerror);\n  else\n    dest._events.error = [onerror, dest._events.error];\n\n\n\n  // Both close and finish should trigger unpipe, but only once.\n  function onclose() {\n    dest.removeListener('finish', onfinish);\n    unpipe();\n  }\n  dest.once('close', onclose);\n  function onfinish() {\n    debug('onfinish');\n    dest.removeListener('close', onclose);\n    unpipe();\n  }\n  dest.once('finish', onfinish);\n\n  function unpipe() {\n    debug('unpipe');\n    src.unpipe(dest);\n  }\n\n  // tell the dest that it's being piped to\n  dest.emit('pipe', src);\n\n  // start the flow if it hasn't been started already.\n  if (!state.flowing) {\n    debug('pipe resume');\n    src.resume();\n  }\n\n  return dest;\n};\n\nfunction pipeOnDrain(src) {\n  return function() {\n    var state = src._readableState;\n    debug('pipeOnDrain', state.awaitDrain);\n    if (state.awaitDrain)\n      state.awaitDrain--;\n    if (state.awaitDrain === 0 && EE.listenerCount(src, 'data')) {\n      state.flowing = true;\n      flow(src);\n    }\n  };\n}\n\n\nReadable.prototype.unpipe = function(dest) {\n  var state = this._readableState;\n\n  // if we're not piping anywhere, then do nothing.\n  if (state.pipesCount === 0)\n    return this;\n\n  // just one destination.  most common case.\n  if (state.pipesCount === 1) {\n    // passed in one, but it's not the right one.\n    if (dest && dest !== state.pipes)\n      return this;\n\n    if (!dest)\n      dest = state.pipes;\n\n    // got a match.\n    state.pipes = null;\n    state.pipesCount = 0;\n    state.flowing = false;\n    if (dest)\n      dest.emit('unpipe', this);\n    return this;\n  }\n\n  // slow case. multiple pipe destinations.\n\n  if (!dest) {\n    // remove all.\n    var dests = state.pipes;\n    var len = state.pipesCount;\n    state.pipes = null;\n    state.pipesCount = 0;\n    state.flowing = false;\n\n    for (var i = 0; i < len; i++)\n      dests[i].emit('unpipe', this);\n    return this;\n  }\n\n  // try to find the right one.\n  var i = indexOf(state.pipes, dest);\n  if (i === -1)\n    return this;\n\n  state.pipes.splice(i, 1);\n  state.pipesCount -= 1;\n  if (state.pipesCount === 1)\n    state.pipes = state.pipes[0];\n\n  dest.emit('unpipe', this);\n\n  return this;\n};\n\n// set up data events if they are asked for\n// Ensure readable listeners eventually get something\nReadable.prototype.on = function(ev, fn) {\n  var res = Stream.prototype.on.call(this, ev, fn);\n\n  // If listening to data, and it has not explicitly been paused,\n  // then call resume to start the flow of data on the next tick.\n  if (ev === 'data' && false !== this._readableState.flowing) {\n    this.resume();\n  }\n\n  if (ev === 'readable' && this.readable) {\n    var state = this._readableState;\n    if (!state.readableListening) {\n      state.readableListening = true;\n      state.emittedReadable = false;\n      state.needReadable = true;\n      if (!state.reading) {\n        var self = this;\n        process.nextTick(function() {\n          debug('readable nexttick read 0');\n          self.read(0);\n        });\n      } else if (state.length) {\n        emitReadable(this, state);\n      }\n    }\n  }\n\n  return res;\n};\nReadable.prototype.addListener = Readable.prototype.on;\n\n// pause() and resume() are remnants of the legacy readable stream API\n// If the user uses them, then switch into old mode.\nReadable.prototype.resume = function() {\n  var state = this._readableState;\n  if (!state.flowing) {\n    debug('resume');\n    state.flowing = true;\n    if (!state.reading) {\n      debug('resume read 0');\n      this.read(0);\n    }\n    resume(this, state);\n  }\n  return this;\n};\n\nfunction resume(stream, state) {\n  if (!state.resumeScheduled) {\n    state.resumeScheduled = true;\n    process.nextTick(function() {\n      resume_(stream, state);\n    });\n  }\n}\n\nfunction resume_(stream, state) {\n  state.resumeScheduled = false;\n  stream.emit('resume');\n  flow(stream);\n  if (state.flowing && !state.reading)\n    stream.read(0);\n}\n\nReadable.prototype.pause = function() {\n  debug('call pause flowing=%j', this._readableState.flowing);\n  if (false !== this._readableState.flowing) {\n    debug('pause');\n    this._readableState.flowing = false;\n    this.emit('pause');\n  }\n  return this;\n};\n\nfunction flow(stream) {\n  var state = stream._readableState;\n  debug('flow', state.flowing);\n  if (state.flowing) {\n    do {\n      var chunk = stream.read();\n    } while (null !== chunk && state.flowing);\n  }\n}\n\n// wrap an old-style stream as the async data source.\n// This is *not* part of the readable stream interface.\n// It is an ugly unfortunate mess of history.\nReadable.prototype.wrap = function(stream) {\n  var state = this._readableState;\n  var paused = false;\n\n  var self = this;\n  stream.on('end', function() {\n    debug('wrapped end');\n    if (state.decoder && !state.ended) {\n      var chunk = state.decoder.end();\n      if (chunk && chunk.length)\n        self.push(chunk);\n    }\n\n    self.push(null);\n  });\n\n  stream.on('data', function(chunk) {\n    debug('wrapped data');\n    if (state.decoder)\n      chunk = state.decoder.write(chunk);\n    if (!chunk || !state.objectMode && !chunk.length)\n      return;\n\n    var ret = self.push(chunk);\n    if (!ret) {\n      paused = true;\n      stream.pause();\n    }\n  });\n\n  // proxy all the other methods.\n  // important when wrapping filters and duplexes.\n  for (var i in stream) {\n    if (util.isFunction(stream[i]) && util.isUndefined(this[i])) {\n      this[i] = function(method) { return function() {\n        return stream[method].apply(stream, arguments);\n      }}(i);\n    }\n  }\n\n  // proxy certain important events.\n  var events = ['error', 'close', 'destroy', 'pause', 'resume'];\n  forEach(events, function(ev) {\n    stream.on(ev, self.emit.bind(self, ev));\n  });\n\n  // when we try to consume some more bytes, simply unpause the\n  // underlying stream.\n  self._read = function(n) {\n    debug('wrapped _read', n);\n    if (paused) {\n      paused = false;\n      stream.resume();\n    }\n  };\n\n  return self;\n};\n\n\n\n// exposed for testing purposes only.\nReadable._fromList = fromList;\n\n// Pluck off n bytes from an array of buffers.\n// Length is the combined lengths of all the buffers in the list.\nfunction fromList(n, state) {\n  var list = state.buffer;\n  var length = state.length;\n  var stringMode = !!state.decoder;\n  var objectMode = !!state.objectMode;\n  var ret;\n\n  // nothing in the list, definitely empty.\n  if (list.length === 0)\n    return null;\n\n  if (length === 0)\n    ret = null;\n  else if (objectMode)\n    ret = list.shift();\n  else if (!n || n >= length) {\n    // read it all, truncate the array.\n    if (stringMode)\n      ret = list.join('');\n    else\n      ret = Buffer.concat(list, length);\n    list.length = 0;\n  } else {\n    // read just some of it.\n    if (n < list[0].length) {\n      // just take a part of the first list item.\n      // slice is the same for buffers and strings.\n      var buf = list[0];\n      ret = buf.slice(0, n);\n      list[0] = buf.slice(n);\n    } else if (n === list[0].length) {\n      // first list is a perfect match\n      ret = list.shift();\n    } else {\n      // complex case.\n      // we have enough to cover it, but it spans past the first buffer.\n      if (stringMode)\n        ret = '';\n      else\n        ret = new Buffer(n);\n\n      var c = 0;\n      for (var i = 0, l = list.length; i < l && c < n; i++) {\n        var buf = list[0];\n        var cpy = Math.min(n - c, buf.length);\n\n        if (stringMode)\n          ret += buf.slice(0, cpy);\n        else\n          buf.copy(ret, c, 0, cpy);\n\n        if (cpy < buf.length)\n          list[0] = buf.slice(cpy);\n        else\n          list.shift();\n\n        c += cpy;\n      }\n    }\n  }\n\n  return ret;\n}\n\nfunction endReadable(stream) {\n  var state = stream._readableState;\n\n  // If we get here before consuming all the bytes, then that is a\n  // bug in node.  Should never happen.\n  if (state.length > 0)\n    throw new Error('endReadable called on non-empty stream');\n\n  if (!state.endEmitted) {\n    state.ended = true;\n    process.nextTick(function() {\n      // Check that we didn't get one last unshift.\n      if (!state.endEmitted && state.length === 0) {\n        state.endEmitted = true;\n        stream.readable = false;\n        stream.emit('end');\n      }\n    });\n  }\n}\n\nfunction forEach (xs, f) {\n  for (var i = 0, l = xs.length; i < l; i++) {\n    f(xs[i], i);\n  }\n}\n\nfunction indexOf (xs, x) {\n  for (var i = 0, l = xs.length; i < l; i++) {\n    if (xs[i] === x) return i;\n  }\n  return -1;\n}\n\n}).call(this,require('_process'))\n},{\"./_stream_duplex\":13,\"_process\":11,\"buffer\":3,\"core-util-is\":18,\"events\":7,\"inherits\":8,\"isarray\":10,\"stream\":23,\"string_decoder/\":24,\"util\":2}],16:[function(require,module,exports){\n// Copyright Joyent, Inc. and other Node contributors.\n//\n// Permission is hereby granted, free of charge, to any person obtaining a\n// copy of this software and associated documentation files (the\n// \"Software\"), to deal in the Software without restriction, including\n// without limitation the rights to use, copy, modify, merge, publish,\n// distribute, sublicense, and/or sell copies of the Software, and to permit\n// persons to whom the Software is furnished to do so, subject to the\n// following conditions:\n//\n// The above copyright notice and this permission notice shall be included\n// in all copies or substantial portions of the Software.\n//\n// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS\n// OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF\n// MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN\n// NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM,\n// DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR\n// OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE\n// USE OR OTHER DEALINGS IN THE SOFTWARE.\n\n\n// a transform stream is a readable/writable stream where you do\n// something with the data.  Sometimes it's called a \"filter\",\n// but that's not a great name for it, since that implies a thing where\n// some bits pass through, and others are simply ignored.  (That would\n// be a valid example of a transform, of course.)\n//\n// While the output is causally related to the input, it's not a\n// necessarily symmetric or synchronous transformation.  For example,\n// a zlib stream might take multiple plain-text writes(), and then\n// emit a single compressed chunk some time in the future.\n//\n// Here's how this works:\n//\n// The Transform stream has all the aspects of the readable and writable\n// stream classes.  When you write(chunk), that calls _write(chunk,cb)\n// internally, and returns false if there's a lot of pending writes\n// buffered up.  When you call read(), that calls _read(n) until\n// there's enough pending readable data buffered up.\n//\n// In a transform stream, the written data is placed in a buffer.  When\n// _read(n) is called, it transforms the queued up data, calling the\n// buffered _write cb's as it consumes chunks.  If consuming a single\n// written chunk would result in multiple output chunks, then the first\n// outputted bit calls the readcb, and subsequent chunks just go into\n// the read buffer, and will cause it to emit 'readable' if necessary.\n//\n// This way, back-pressure is actually determined by the reading side,\n// since _read has to be called to start processing a new chunk.  However,\n// a pathological inflate type of transform can cause excessive buffering\n// here.  For example, imagine a stream where every byte of input is\n// interpreted as an integer from 0-255, and then results in that many\n// bytes of output.  Writing the 4 bytes {ff,ff,ff,ff} would result in\n// 1kb of data being output.  In this case, you could write a very small\n// amount of input, and end up with a very large amount of output.  In\n// such a pathological inflating mechanism, there'd be no way to tell\n// the system to stop doing the transform.  A single 4MB write could\n// cause the system to run out of memory.\n//\n// However, even in such a pathological case, only a single written chunk\n// would be consumed, and then the rest would wait (un-transformed) until\n// the results of the previous transformed chunk were consumed.\n\nmodule.exports = Transform;\n\nvar Duplex = require('./_stream_duplex');\n\n/*<replacement>*/\nvar util = require('core-util-is');\nutil.inherits = require('inherits');\n/*</replacement>*/\n\nutil.inherits(Transform, Duplex);\n\n\nfunction TransformState(options, stream) {\n  this.afterTransform = function(er, data) {\n    return afterTransform(stream, er, data);\n  };\n\n  this.needTransform = false;\n  this.transforming = false;\n  this.writecb = null;\n  this.writechunk = null;\n}\n\nfunction afterTransform(stream, er, data) {\n  var ts = stream._transformState;\n  ts.transforming = false;\n\n  var cb = ts.writecb;\n\n  if (!cb)\n    return stream.emit('error', new Error('no writecb in Transform class'));\n\n  ts.writechunk = null;\n  ts.writecb = null;\n\n  if (!util.isNullOrUndefined(data))\n    stream.push(data);\n\n  if (cb)\n    cb(er);\n\n  var rs = stream._readableState;\n  rs.reading = false;\n  if (rs.needReadable || rs.length < rs.highWaterMark) {\n    stream._read(rs.highWaterMark);\n  }\n}\n\n\nfunction Transform(options) {\n  if (!(this instanceof Transform))\n    return new Transform(options);\n\n  Duplex.call(this, options);\n\n  this._transformState = new TransformState(options, this);\n\n  // when the writable side finishes, then flush out anything remaining.\n  var stream = this;\n\n  // start out asking for a readable event once data is transformed.\n  this._readableState.needReadable = true;\n\n  // we have implemented the _read method, and done the other things\n  // that Readable wants before the first _read call, so unset the\n  // sync guard flag.\n  this._readableState.sync = false;\n\n  this.once('prefinish', function() {\n    if (util.isFunction(this._flush))\n      this._flush(function(er) {\n        done(stream, er);\n      });\n    else\n      done(stream);\n  });\n}\n\nTransform.prototype.push = function(chunk, encoding) {\n  this._transformState.needTransform = false;\n  return Duplex.prototype.push.call(this, chunk, encoding);\n};\n\n// This is the part where you do stuff!\n// override this function in implementation classes.\n// 'chunk' is an input chunk.\n//\n// Call `push(newChunk)` to pass along transformed output\n// to the readable side.  You may call 'push' zero or more times.\n//\n// Call `cb(err)` when you are done with this chunk.  If you pass\n// an error, then that'll put the hurt on the whole operation.  If you\n// never call cb(), then you'll never get another chunk.\nTransform.prototype._transform = function(chunk, encoding, cb) {\n  throw new Error('not implemented');\n};\n\nTransform.prototype._write = function(chunk, encoding, cb) {\n  var ts = this._transformState;\n  ts.writecb = cb;\n  ts.writechunk = chunk;\n  ts.writeencoding = encoding;\n  if (!ts.transforming) {\n    var rs = this._readableState;\n    if (ts.needTransform ||\n        rs.needReadable ||\n        rs.length < rs.highWaterMark)\n      this._read(rs.highWaterMark);\n  }\n};\n\n// Doesn't matter what the args are here.\n// _transform does all the work.\n// That we got here means that the readable side wants more data.\nTransform.prototype._read = function(n) {\n  var ts = this._transformState;\n\n  if (!util.isNull(ts.writechunk) && ts.writecb && !ts.transforming) {\n    ts.transforming = true;\n    this._transform(ts.writechunk, ts.writeencoding, ts.afterTransform);\n  } else {\n    // mark that we need a transform, so that any data that comes in\n    // will get processed, now that we've asked for it.\n    ts.needTransform = true;\n  }\n};\n\n\nfunction done(stream, er) {\n  if (er)\n    return stream.emit('error', er);\n\n  // if there's nothing in the write buffer, then that means\n  // that nothing more will ever be provided\n  var ws = stream._writableState;\n  var ts = stream._transformState;\n\n  if (ws.length)\n    throw new Error('calling transform done when ws.length != 0');\n\n  if (ts.transforming)\n    throw new Error('calling transform done when still transforming');\n\n  return stream.push(null);\n}\n\n},{\"./_stream_duplex\":13,\"core-util-is\":18,\"inherits\":8}],17:[function(require,module,exports){\n(function (process){\n// Copyright Joyent, Inc. and other Node contributors.\n//\n// Permission is hereby granted, free of charge, to any person obtaining a\n// copy of this software and associated documentation files (the\n// \"Software\"), to deal in the Software without restriction, including\n// without limitation the rights to use, copy, modify, merge, publish,\n// distribute, sublicense, and/or sell copies of the Software, and to permit\n// persons to whom the Software is furnished to do so, subject to the\n// following conditions:\n//\n// The above copyright notice and this permission notice shall be included\n// in all copies or substantial portions of the Software.\n//\n// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS\n// OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF\n// MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN\n// NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM,\n// DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR\n// OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE\n// USE OR OTHER DEALINGS IN THE SOFTWARE.\n\n// A bit simpler than readable streams.\n// Implement an async ._write(chunk, cb), and it'll handle all\n// the drain event emission and buffering.\n\nmodule.exports = Writable;\n\n/*<replacement>*/\nvar Buffer = require('buffer').Buffer;\n/*</replacement>*/\n\nWritable.WritableState = WritableState;\n\n\n/*<replacement>*/\nvar util = require('core-util-is');\nutil.inherits = require('inherits');\n/*</replacement>*/\n\nvar Stream = require('stream');\n\nutil.inherits(Writable, Stream);\n\nfunction WriteReq(chunk, encoding, cb) {\n  this.chunk = chunk;\n  this.encoding = encoding;\n  this.callback = cb;\n}\n\nfunction WritableState(options, stream) {\n  var Duplex = require('./_stream_duplex');\n\n  options = options || {};\n\n  // the point at which write() starts returning false\n  // Note: 0 is a valid value, means that we always return false if\n  // the entire buffer is not flushed immediately on write()\n  var hwm = options.highWaterMark;\n  var defaultHwm = options.objectMode ? 16 : 16 * 1024;\n  this.highWaterMark = (hwm || hwm === 0) ? hwm : defaultHwm;\n\n  // object stream flag to indicate whether or not this stream\n  // contains buffers or objects.\n  this.objectMode = !!options.objectMode;\n\n  if (stream instanceof Duplex)\n    this.objectMode = this.objectMode || !!options.writableObjectMode;\n\n  // cast to ints.\n  this.highWaterMark = ~~this.highWaterMark;\n\n  this.needDrain = false;\n  // at the start of calling end()\n  this.ending = false;\n  // when end() has been called, and returned\n  this.ended = false;\n  // when 'finish' is emitted\n  this.finished = false;\n\n  // should we decode strings into buffers before passing to _write?\n  // this is here so that some node-core streams can optimize string\n  // handling at a lower level.\n  var noDecode = options.decodeStrings === false;\n  this.decodeStrings = !noDecode;\n\n  // Crypto is kind of old and crusty.  Historically, its default string\n  // encoding is 'binary' so we have to make this configurable.\n  // Everything else in the universe uses 'utf8', though.\n  this.defaultEncoding = options.defaultEncoding || 'utf8';\n\n  // not an actual buffer we keep track of, but a measurement\n  // of how much we're waiting to get pushed to some underlying\n  // socket or file.\n  this.length = 0;\n\n  // a flag to see when we're in the middle of a write.\n  this.writing = false;\n\n  // when true all writes will be buffered until .uncork() call\n  this.corked = 0;\n\n  // a flag to be able to tell if the onwrite cb is called immediately,\n  // or on a later tick.  We set this to true at first, because any\n  // actions that shouldn't happen until \"later\" should generally also\n  // not happen before the first write call.\n  this.sync = true;\n\n  // a flag to know if we're processing previously buffered items, which\n  // may call the _write() callback in the same tick, so that we don't\n  // end up in an overlapped onwrite situation.\n  this.bufferProcessing = false;\n\n  // the callback that's passed to _write(chunk,cb)\n  this.onwrite = function(er) {\n    onwrite(stream, er);\n  };\n\n  // the callback that the user supplies to write(chunk,encoding,cb)\n  this.writecb = null;\n\n  // the amount that is being written when _write is called.\n  this.writelen = 0;\n\n  this.buffer = [];\n\n  // number of pending user-supplied write callbacks\n  // this must be 0 before 'finish' can be emitted\n  this.pendingcb = 0;\n\n  // emit prefinish if the only thing we're waiting for is _write cbs\n  // This is relevant for synchronous Transform streams\n  this.prefinished = false;\n\n  // True if the error was already emitted and should not be thrown again\n  this.errorEmitted = false;\n}\n\nfunction Writable(options) {\n  var Duplex = require('./_stream_duplex');\n\n  // Writable ctor is applied to Duplexes, though they're not\n  // instanceof Writable, they're instanceof Readable.\n  if (!(this instanceof Writable) && !(this instanceof Duplex))\n    return new Writable(options);\n\n  this._writableState = new WritableState(options, this);\n\n  // legacy.\n  this.writable = true;\n\n  Stream.call(this);\n}\n\n// Otherwise people can pipe Writable streams, which is just wrong.\nWritable.prototype.pipe = function() {\n  this.emit('error', new Error('Cannot pipe. Not readable.'));\n};\n\n\nfunction writeAfterEnd(stream, state, cb) {\n  var er = new Error('write after end');\n  // TODO: defer error events consistently everywhere, not just the cb\n  stream.emit('error', er);\n  process.nextTick(function() {\n    cb(er);\n  });\n}\n\n// If we get something that is not a buffer, string, null, or undefined,\n// and we're not in objectMode, then that's an error.\n// Otherwise stream chunks are all considered to be of length=1, and the\n// watermarks determine how many objects to keep in the buffer, rather than\n// how many bytes or characters.\nfunction validChunk(stream, state, chunk, cb) {\n  var valid = true;\n  if (!util.isBuffer(chunk) &&\n      !util.isString(chunk) &&\n      !util.isNullOrUndefined(chunk) &&\n      !state.objectMode) {\n    var er = new TypeError('Invalid non-string/buffer chunk');\n    stream.emit('error', er);\n    process.nextTick(function() {\n      cb(er);\n    });\n    valid = false;\n  }\n  return valid;\n}\n\nWritable.prototype.write = function(chunk, encoding, cb) {\n  var state = this._writableState;\n  var ret = false;\n\n  if (util.isFunction(encoding)) {\n    cb = encoding;\n    encoding = null;\n  }\n\n  if (util.isBuffer(chunk))\n    encoding = 'buffer';\n  else if (!encoding)\n    encoding = state.defaultEncoding;\n\n  if (!util.isFunction(cb))\n    cb = function() {};\n\n  if (state.ended)\n    writeAfterEnd(this, state, cb);\n  else if (validChunk(this, state, chunk, cb)) {\n    state.pendingcb++;\n    ret = writeOrBuffer(this, state, chunk, encoding, cb);\n  }\n\n  return ret;\n};\n\nWritable.prototype.cork = function() {\n  var state = this._writableState;\n\n  state.corked++;\n};\n\nWritable.prototype.uncork = function() {\n  var state = this._writableState;\n\n  if (state.corked) {\n    state.corked--;\n\n    if (!state.writing &&\n        !state.corked &&\n        !state.finished &&\n        !state.bufferProcessing &&\n        state.buffer.length)\n      clearBuffer(this, state);\n  }\n};\n\nfunction decodeChunk(state, chunk, encoding) {\n  if (!state.objectMode &&\n      state.decodeStrings !== false &&\n      util.isString(chunk)) {\n    chunk = new Buffer(chunk, encoding);\n  }\n  return chunk;\n}\n\n// if we're already writing something, then just put this\n// in the queue, and wait our turn.  Otherwise, call _write\n// If we return false, then we need a drain event, so set that flag.\nfunction writeOrBuffer(stream, state, chunk, encoding, cb) {\n  chunk = decodeChunk(state, chunk, encoding);\n  if (util.isBuffer(chunk))\n    encoding = 'buffer';\n  var len = state.objectMode ? 1 : chunk.length;\n\n  state.length += len;\n\n  var ret = state.length < state.highWaterMark;\n  // we must ensure that previous needDrain will not be reset to false.\n  if (!ret)\n    state.needDrain = true;\n\n  if (state.writing || state.corked)\n    state.buffer.push(new WriteReq(chunk, encoding, cb));\n  else\n    doWrite(stream, state, false, len, chunk, encoding, cb);\n\n  return ret;\n}\n\nfunction doWrite(stream, state, writev, len, chunk, encoding, cb) {\n  state.writelen = len;\n  state.writecb = cb;\n  state.writing = true;\n  state.sync = true;\n  if (writev)\n    stream._writev(chunk, state.onwrite);\n  else\n    stream._write(chunk, encoding, state.onwrite);\n  state.sync = false;\n}\n\nfunction onwriteError(stream, state, sync, er, cb) {\n  if (sync)\n    process.nextTick(function() {\n      state.pendingcb--;\n      cb(er);\n    });\n  else {\n    state.pendingcb--;\n    cb(er);\n  }\n\n  stream._writableState.errorEmitted = true;\n  stream.emit('error', er);\n}\n\nfunction onwriteStateUpdate(state) {\n  state.writing = false;\n  state.writecb = null;\n  state.length -= state.writelen;\n  state.writelen = 0;\n}\n\nfunction onwrite(stream, er) {\n  var state = stream._writableState;\n  var sync = state.sync;\n  var cb = state.writecb;\n\n  onwriteStateUpdate(state);\n\n  if (er)\n    onwriteError(stream, state, sync, er, cb);\n  else {\n    // Check if we're actually ready to finish, but don't emit yet\n    var finished = needFinish(stream, state);\n\n    if (!finished &&\n        !state.corked &&\n        !state.bufferProcessing &&\n        state.buffer.length) {\n      clearBuffer(stream, state);\n    }\n\n    if (sync) {\n      process.nextTick(function() {\n        afterWrite(stream, state, finished, cb);\n      });\n    } else {\n      afterWrite(stream, state, finished, cb);\n    }\n  }\n}\n\nfunction afterWrite(stream, state, finished, cb) {\n  if (!finished)\n    onwriteDrain(stream, state);\n  state.pendingcb--;\n  cb();\n  finishMaybe(stream, state);\n}\n\n// Must force callback to be called on nextTick, so that we don't\n// emit 'drain' before the write() consumer gets the 'false' return\n// value, and has a chance to attach a 'drain' listener.\nfunction onwriteDrain(stream, state) {\n  if (state.length === 0 && state.needDrain) {\n    state.needDrain = false;\n    stream.emit('drain');\n  }\n}\n\n\n// if there's something in the buffer waiting, then process it\nfunction clearBuffer(stream, state) {\n  state.bufferProcessing = true;\n\n  if (stream._writev && state.buffer.length > 1) {\n    // Fast case, write everything using _writev()\n    var cbs = [];\n    for (var c = 0; c < state.buffer.length; c++)\n      cbs.push(state.buffer[c].callback);\n\n    // count the one we are adding, as well.\n    // TODO(isaacs) clean this up\n    state.pendingcb++;\n    doWrite(stream, state, true, state.length, state.buffer, '', function(err) {\n      for (var i = 0; i < cbs.length; i++) {\n        state.pendingcb--;\n        cbs[i](err);\n      }\n    });\n\n    // Clear buffer\n    state.buffer = [];\n  } else {\n    // Slow case, write chunks one-by-one\n    for (var c = 0; c < state.buffer.length; c++) {\n      var entry = state.buffer[c];\n      var chunk = entry.chunk;\n      var encoding = entry.encoding;\n      var cb = entry.callback;\n      var len = state.objectMode ? 1 : chunk.length;\n\n      doWrite(stream, state, false, len, chunk, encoding, cb);\n\n      // if we didn't call the onwrite immediately, then\n      // it means that we need to wait until it does.\n      // also, that means that the chunk and cb are currently\n      // being processed, so move the buffer counter past them.\n      if (state.writing) {\n        c++;\n        break;\n      }\n    }\n\n    if (c < state.buffer.length)\n      state.buffer = state.buffer.slice(c);\n    else\n      state.buffer.length = 0;\n  }\n\n  state.bufferProcessing = false;\n}\n\nWritable.prototype._write = function(chunk, encoding, cb) {\n  cb(new Error('not implemented'));\n\n};\n\nWritable.prototype._writev = null;\n\nWritable.prototype.end = function(chunk, encoding, cb) {\n  var state = this._writableState;\n\n  if (util.isFunction(chunk)) {\n    cb = chunk;\n    chunk = null;\n    encoding = null;\n  } else if (util.isFunction(encoding)) {\n    cb = encoding;\n    encoding = null;\n  }\n\n  if (!util.isNullOrUndefined(chunk))\n    this.write(chunk, encoding);\n\n  // .end() fully uncorks\n  if (state.corked) {\n    state.corked = 1;\n    this.uncork();\n  }\n\n  // ignore unnecessary end() calls.\n  if (!state.ending && !state.finished)\n    endWritable(this, state, cb);\n};\n\n\nfunction needFinish(stream, state) {\n  return (state.ending &&\n          state.length === 0 &&\n          !state.finished &&\n          !state.writing);\n}\n\nfunction prefinish(stream, state) {\n  if (!state.prefinished) {\n    state.prefinished = true;\n    stream.emit('prefinish');\n  }\n}\n\nfunction finishMaybe(stream, state) {\n  var need = needFinish(stream, state);\n  if (need) {\n    if (state.pendingcb === 0) {\n      prefinish(stream, state);\n      state.finished = true;\n      stream.emit('finish');\n    } else\n      prefinish(stream, state);\n  }\n  return need;\n}\n\nfunction endWritable(stream, state, cb) {\n  state.ending = true;\n  finishMaybe(stream, state);\n  if (cb) {\n    if (state.finished)\n      process.nextTick(cb);\n    else\n      stream.once('finish', cb);\n  }\n  state.ended = true;\n}\n\n}).call(this,require('_process'))\n},{\"./_stream_duplex\":13,\"_process\":11,\"buffer\":3,\"core-util-is\":18,\"inherits\":8,\"stream\":23}],18:[function(require,module,exports){\n(function (Buffer){\n// Copyright Joyent, Inc. and other Node contributors.\n//\n// Permission is hereby granted, free of charge, to any person obtaining a\n// copy of this software and associated documentation files (the\n// \"Software\"), to deal in the Software without restriction, including\n// without limitation the rights to use, copy, modify, merge, publish,\n// distribute, sublicense, and/or sell copies of the Software, and to permit\n// persons to whom the Software is furnished to do so, subject to the\n// following conditions:\n//\n// The above copyright notice and this permission notice shall be included\n// in all copies or substantial portions of the Software.\n//\n// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS\n// OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF\n// MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN\n// NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM,\n// DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR\n// OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE\n// USE OR OTHER DEALINGS IN THE SOFTWARE.\n\n// NOTE: These type checking functions intentionally don't use `instanceof`\n// because it is fragile and can be easily faked with `Object.create()`.\n\nfunction isArray(arg) {\n  if (Array.isArray) {\n    return Array.isArray(arg);\n  }\n  return objectToString(arg) === '[object Array]';\n}\nexports.isArray = isArray;\n\nfunction isBoolean(arg) {\n  return typeof arg === 'boolean';\n}\nexports.isBoolean = isBoolean;\n\nfunction isNull(arg) {\n  return arg === null;\n}\nexports.isNull = isNull;\n\nfunction isNullOrUndefined(arg) {\n  return arg == null;\n}\nexports.isNullOrUndefined = isNullOrUndefined;\n\nfunction isNumber(arg) {\n  return typeof arg === 'number';\n}\nexports.isNumber = isNumber;\n\nfunction isString(arg) {\n  return typeof arg === 'string';\n}\nexports.isString = isString;\n\nfunction isSymbol(arg) {\n  return typeof arg === 'symbol';\n}\nexports.isSymbol = isSymbol;\n\nfunction isUndefined(arg) {\n  return arg === void 0;\n}\nexports.isUndefined = isUndefined;\n\nfunction isRegExp(re) {\n  return objectToString(re) === '[object RegExp]';\n}\nexports.isRegExp = isRegExp;\n\nfunction isObject(arg) {\n  return typeof arg === 'object' && arg !== null;\n}\nexports.isObject = isObject;\n\nfunction isDate(d) {\n  return objectToString(d) === '[object Date]';\n}\nexports.isDate = isDate;\n\nfunction isError(e) {\n  return (objectToString(e) === '[object Error]' || e instanceof Error);\n}\nexports.isError = isError;\n\nfunction isFunction(arg) {\n  return typeof arg === 'function';\n}\nexports.isFunction = isFunction;\n\nfunction isPrimitive(arg) {\n  return arg === null ||\n         typeof arg === 'boolean' ||\n         typeof arg === 'number' ||\n         typeof arg === 'string' ||\n         typeof arg === 'symbol' ||  // ES6 symbol\n         typeof arg === 'undefined';\n}\nexports.isPrimitive = isPrimitive;\n\nexports.isBuffer = Buffer.isBuffer;\n\nfunction objectToString(o) {\n  return Object.prototype.toString.call(o);\n}\n\n}).call(this,{\"isBuffer\":require(\"../../../../insert-module-globals/node_modules/is-buffer/index.js\")})\n},{\"../../../../insert-module-globals/node_modules/is-buffer/index.js\":9}],19:[function(require,module,exports){\nmodule.exports = require(\"./lib/_stream_passthrough.js\")\n\n},{\"./lib/_stream_passthrough.js\":14}],20:[function(require,module,exports){\n(function (process){\nexports = module.exports = require('./lib/_stream_readable.js');\nexports.Stream = require('stream');\nexports.Readable = exports;\nexports.Writable = require('./lib/_stream_writable.js');\nexports.Duplex = require('./lib/_stream_duplex.js');\nexports.Transform = require('./lib/_stream_transform.js');\nexports.PassThrough = require('./lib/_stream_passthrough.js');\nif (!process.browser && process.env.READABLE_STREAM === 'disable') {\n  module.exports = require('stream');\n}\n\n}).call(this,require('_process'))\n},{\"./lib/_stream_duplex.js\":13,\"./lib/_stream_passthrough.js\":14,\"./lib/_stream_readable.js\":15,\"./lib/_stream_transform.js\":16,\"./lib/_stream_writable.js\":17,\"_process\":11,\"stream\":23}],21:[function(require,module,exports){\nmodule.exports = require(\"./lib/_stream_transform.js\")\n\n},{\"./lib/_stream_transform.js\":16}],22:[function(require,module,exports){\nmodule.exports = require(\"./lib/_stream_writable.js\")\n\n},{\"./lib/_stream_writable.js\":17}],23:[function(require,module,exports){\n// Copyright Joyent, Inc. and other Node contributors.\n//\n// Permission is hereby granted, free of charge, to any person obtaining a\n// copy of this software and associated documentation files (the\n// \"Software\"), to deal in the Software without restriction, including\n// without limitation the rights to use, copy, modify, merge, publish,\n// distribute, sublicense, and/or sell copies of the Software, and to permit\n// persons to whom the Software is furnished to do so, subject to the\n// following conditions:\n//\n// The above copyright notice and this permission notice shall be included\n// in all copies or substantial portions of the Software.\n//\n// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS\n// OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF\n// MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN\n// NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM,\n// DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR\n// OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE\n// USE OR OTHER DEALINGS IN THE SOFTWARE.\n\nmodule.exports = Stream;\n\nvar EE = require('events').EventEmitter;\nvar inherits = require('inherits');\n\ninherits(Stream, EE);\nStream.Readable = require('readable-stream/readable.js');\nStream.Writable = require('readable-stream/writable.js');\nStream.Duplex = require('readable-stream/duplex.js');\nStream.Transform = require('readable-stream/transform.js');\nStream.PassThrough = require('readable-stream/passthrough.js');\n\n// Backwards-compat with node 0.4.x\nStream.Stream = Stream;\n\n\n\n// old-style streams.  Note that the pipe method (the only relevant\n// part of this class) is overridden in the Readable class.\n\nfunction Stream() {\n  EE.call(this);\n}\n\nStream.prototype.pipe = function(dest, options) {\n  var source = this;\n\n  function ondata(chunk) {\n    if (dest.writable) {\n      if (false === dest.write(chunk) && source.pause) {\n        source.pause();\n      }\n    }\n  }\n\n  source.on('data', ondata);\n\n  function ondrain() {\n    if (source.readable && source.resume) {\n      source.resume();\n    }\n  }\n\n  dest.on('drain', ondrain);\n\n  // If the 'end' option is not supplied, dest.end() will be called when\n  // source gets the 'end' or 'close' events.  Only dest.end() once.\n  if (!dest._isStdio && (!options || options.end !== false)) {\n    source.on('end', onend);\n    source.on('close', onclose);\n  }\n\n  var didOnEnd = false;\n  function onend() {\n    if (didOnEnd) return;\n    didOnEnd = true;\n\n    dest.end();\n  }\n\n\n  function onclose() {\n    if (didOnEnd) return;\n    didOnEnd = true;\n\n    if (typeof dest.destroy === 'function') dest.destroy();\n  }\n\n  // don't leave dangling pipes when there are errors.\n  function onerror(er) {\n    cleanup();\n    if (EE.listenerCount(this, 'error') === 0) {\n      throw er; // Unhandled stream error in pipe.\n    }\n  }\n\n  source.on('error', onerror);\n  dest.on('error', onerror);\n\n  // remove all the event listeners that were added.\n  function cleanup() {\n    source.removeListener('data', ondata);\n    dest.removeListener('drain', ondrain);\n\n    source.removeListener('end', onend);\n    source.removeListener('close', onclose);\n\n    source.removeListener('error', onerror);\n    dest.removeListener('error', onerror);\n\n    source.removeListener('end', cleanup);\n    source.removeListener('close', cleanup);\n\n    dest.removeListener('close', cleanup);\n  }\n\n  source.on('end', cleanup);\n  source.on('close', cleanup);\n\n  dest.on('close', cleanup);\n\n  dest.emit('pipe', source);\n\n  // Allow for unix-like usage: A.pipe(B).pipe(C)\n  return dest;\n};\n\n},{\"events\":7,\"inherits\":8,\"readable-stream/duplex.js\":12,\"readable-stream/passthrough.js\":19,\"readable-stream/readable.js\":20,\"readable-stream/transform.js\":21,\"readable-stream/writable.js\":22}],24:[function(require,module,exports){\n// Copyright Joyent, Inc. and other Node contributors.\n//\n// Permission is hereby granted, free of charge, to any person obtaining a\n// copy of this software and associated documentation files (the\n// \"Software\"), to deal in the Software without restriction, including\n// without limitation the rights to use, copy, modify, merge, publish,\n// distribute, sublicense, and/or sell copies of the Software, and to permit\n// persons to whom the Software is furnished to do so, subject to the\n// following conditions:\n//\n// The above copyright notice and this permission notice shall be included\n// in all copies or substantial portions of the Software.\n//\n// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS\n// OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF\n// MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN\n// NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM,\n// DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR\n// OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE\n// USE OR OTHER DEALINGS IN THE SOFTWARE.\n\nvar Buffer = require('buffer').Buffer;\n\nvar isBufferEncoding = Buffer.isEncoding\n  || function(encoding) {\n       switch (encoding && encoding.toLowerCase()) {\n         case 'hex': case 'utf8': case 'utf-8': case 'ascii': case 'binary': case 'base64': case 'ucs2': case 'ucs-2': case 'utf16le': case 'utf-16le': case 'raw': return true;\n         default: return false;\n       }\n     }\n\n\nfunction assertEncoding(encoding) {\n  if (encoding && !isBufferEncoding(encoding)) {\n    throw new Error('Unknown encoding: ' + encoding);\n  }\n}\n\n// StringDecoder provides an interface for efficiently splitting a series of\n// buffers into a series of JS strings without breaking apart multi-byte\n// characters. CESU-8 is handled as part of the UTF-8 encoding.\n//\n// @TODO Handling all encodings inside a single object makes it very difficult\n// to reason about this code, so it should be split up in the future.\n// @TODO There should be a utf8-strict encoding that rejects invalid UTF-8 code\n// points as used by CESU-8.\nvar StringDecoder = exports.StringDecoder = function(encoding) {\n  this.encoding = (encoding || 'utf8').toLowerCase().replace(/[-_]/, '');\n  assertEncoding(encoding);\n  switch (this.encoding) {\n    case 'utf8':\n      // CESU-8 represents each of Surrogate Pair by 3-bytes\n      this.surrogateSize = 3;\n      break;\n    case 'ucs2':\n    case 'utf16le':\n      // UTF-16 represents each of Surrogate Pair by 2-bytes\n      this.surrogateSize = 2;\n      this.detectIncompleteChar = utf16DetectIncompleteChar;\n      break;\n    case 'base64':\n      // Base-64 stores 3 bytes in 4 chars, and pads the remainder.\n      this.surrogateSize = 3;\n      this.detectIncompleteChar = base64DetectIncompleteChar;\n      break;\n    default:\n      this.write = passThroughWrite;\n      return;\n  }\n\n  // Enough space to store all bytes of a single character. UTF-8 needs 4\n  // bytes, but CESU-8 may require up to 6 (3 bytes per surrogate).\n  this.charBuffer = new Buffer(6);\n  // Number of bytes received for the current incomplete multi-byte character.\n  this.charReceived = 0;\n  // Number of bytes expected for the current incomplete multi-byte character.\n  this.charLength = 0;\n};\n\n\n// write decodes the given buffer and returns it as JS string that is\n// guaranteed to not contain any partial multi-byte characters. Any partial\n// character found at the end of the buffer is buffered up, and will be\n// returned when calling write again with the remaining bytes.\n//\n// Note: Converting a Buffer containing an orphan surrogate to a String\n// currently works, but converting a String to a Buffer (via `new Buffer`, or\n// Buffer#write) will replace incomplete surrogates with the unicode\n// replacement character. See https://codereview.chromium.org/121173009/ .\nStringDecoder.prototype.write = function(buffer) {\n  var charStr = '';\n  // if our last write ended with an incomplete multibyte character\n  while (this.charLength) {\n    // determine how many remaining bytes this buffer has to offer for this char\n    var available = (buffer.length >= this.charLength - this.charReceived) ?\n        this.charLength - this.charReceived :\n        buffer.length;\n\n    // add the new bytes to the char buffer\n    buffer.copy(this.charBuffer, this.charReceived, 0, available);\n    this.charReceived += available;\n\n    if (this.charReceived < this.charLength) {\n      // still not enough chars in this buffer? wait for more ...\n      return '';\n    }\n\n    // remove bytes belonging to the current character from the buffer\n    buffer = buffer.slice(available, buffer.length);\n\n    // get the character that was split\n    charStr = this.charBuffer.slice(0, this.charLength).toString(this.encoding);\n\n    // CESU-8: lead surrogate (D800-DBFF) is also the incomplete character\n    var charCode = charStr.charCodeAt(charStr.length - 1);\n    if (charCode >= 0xD800 && charCode <= 0xDBFF) {\n      this.charLength += this.surrogateSize;\n      charStr = '';\n      continue;\n    }\n    this.charReceived = this.charLength = 0;\n\n    // if there are no more bytes in this buffer, just emit our char\n    if (buffer.length === 0) {\n      return charStr;\n    }\n    break;\n  }\n\n  // determine and set charLength / charReceived\n  this.detectIncompleteChar(buffer);\n\n  var end = buffer.length;\n  if (this.charLength) {\n    // buffer the incomplete character bytes we got\n    buffer.copy(this.charBuffer, 0, buffer.length - this.charReceived, end);\n    end -= this.charReceived;\n  }\n\n  charStr += buffer.toString(this.encoding, 0, end);\n\n  var end = charStr.length - 1;\n  var charCode = charStr.charCodeAt(end);\n  // CESU-8: lead surrogate (D800-DBFF) is also the incomplete character\n  if (charCode >= 0xD800 && charCode <= 0xDBFF) {\n    var size = this.surrogateSize;\n    this.charLength += size;\n    this.charReceived += size;\n    this.charBuffer.copy(this.charBuffer, size, 0, size);\n    buffer.copy(this.charBuffer, 0, 0, size);\n    return charStr.substring(0, end);\n  }\n\n  // or just emit the charStr\n  return charStr;\n};\n\n// detectIncompleteChar determines if there is an incomplete UTF-8 character at\n// the end of the given buffer. If so, it sets this.charLength to the byte\n// length that character, and sets this.charReceived to the number of bytes\n// that are available for this character.\nStringDecoder.prototype.detectIncompleteChar = function(buffer) {\n  // determine how many bytes we have to check at the end of this buffer\n  var i = (buffer.length >= 3) ? 3 : buffer.length;\n\n  // Figure out if one of the last i bytes of our buffer announces an\n  // incomplete char.\n  for (; i > 0; i--) {\n    var c = buffer[buffer.length - i];\n\n    // See http://en.wikipedia.org/wiki/UTF-8#Description\n\n    // 110XXXXX\n    if (i == 1 && c >> 5 == 0x06) {\n      this.charLength = 2;\n      break;\n    }\n\n    // 1110XXXX\n    if (i <= 2 && c >> 4 == 0x0E) {\n      this.charLength = 3;\n      break;\n    }\n\n    // 11110XXX\n    if (i <= 3 && c >> 3 == 0x1E) {\n      this.charLength = 4;\n      break;\n    }\n  }\n  this.charReceived = i;\n};\n\nStringDecoder.prototype.end = function(buffer) {\n  var res = '';\n  if (buffer && buffer.length)\n    res = this.write(buffer);\n\n  if (this.charReceived) {\n    var cr = this.charReceived;\n    var buf = this.charBuffer;\n    var enc = this.encoding;\n    res += buf.slice(0, cr).toString(enc);\n  }\n\n  return res;\n};\n\nfunction passThroughWrite(buffer) {\n  return buffer.toString(this.encoding);\n}\n\nfunction utf16DetectIncompleteChar(buffer) {\n  this.charReceived = buffer.length % 2;\n  this.charLength = this.charReceived ? 2 : 0;\n}\n\nfunction base64DetectIncompleteChar(buffer) {\n  this.charReceived = buffer.length % 3;\n  this.charLength = this.charReceived ? 3 : 0;\n}\n\n},{\"buffer\":3}],25:[function(require,module,exports){\n(function (Buffer){\n// wrapper for non-node envs\n;(function (sax) {\n\nsax.parser = function (strict, opt) { return new SAXParser(strict, opt) }\nsax.SAXParser = SAXParser\nsax.SAXStream = SAXStream\nsax.createStream = createStream\n\n// When we pass the MAX_BUFFER_LENGTH position, start checking for buffer overruns.\n// When we check, schedule the next check for MAX_BUFFER_LENGTH - (max(buffer lengths)),\n// since that's the earliest that a buffer overrun could occur.  This way, checks are\n// as rare as required, but as often as necessary to ensure never crossing this bound.\n// Furthermore, buffers are only tested at most once per write(), so passing a very\n// large string into write() might have undesirable effects, but this is manageable by\n// the caller, so it is assumed to be safe.  Thus, a call to write() may, in the extreme\n// edge case, result in creating at most one complete copy of the string passed in.\n// Set to Infinity to have unlimited buffers.\nsax.MAX_BUFFER_LENGTH = 64 * 1024\n\nvar buffers = [\n  \"comment\", \"sgmlDecl\", \"textNode\", \"tagName\", \"doctype\",\n  \"procInstName\", \"procInstBody\", \"entity\", \"attribName\",\n  \"attribValue\", \"cdata\", \"script\"\n]\n\nsax.EVENTS = // for discoverability.\n  [ \"text\"\n  , \"processinginstruction\"\n  , \"sgmldeclaration\"\n  , \"doctype\"\n  , \"comment\"\n  , \"attribute\"\n  , \"opentag\"\n  , \"closetag\"\n  , \"opencdata\"\n  , \"cdata\"\n  , \"closecdata\"\n  , \"error\"\n  , \"end\"\n  , \"ready\"\n  , \"script\"\n  , \"opennamespace\"\n  , \"closenamespace\"\n  ]\n\nfunction SAXParser (strict, opt) {\n  if (!(this instanceof SAXParser)) return new SAXParser(strict, opt)\n\n  var parser = this\n  clearBuffers(parser)\n  parser.q = parser.c = \"\"\n  parser.bufferCheckPosition = sax.MAX_BUFFER_LENGTH\n  parser.opt = opt || {}\n  parser.opt.lowercase = parser.opt.lowercase || parser.opt.lowercasetags\n  parser.looseCase = parser.opt.lowercase ? \"toLowerCase\" : \"toUpperCase\"\n  parser.tags = []\n  parser.closed = parser.closedRoot = parser.sawRoot = false\n  parser.tag = parser.error = null\n  parser.strict = !!strict\n  parser.noscript = !!(strict || parser.opt.noscript)\n  parser.state = S.BEGIN\n  parser.strictEntities = parser.opt.strictEntities\n  parser.ENTITIES = parser.strictEntities ? Object.create(sax.XML_ENTITIES) : Object.create(sax.ENTITIES)\n  parser.attribList = []\n\n  // namespaces form a prototype chain.\n  // it always points at the current tag,\n  // which protos to its parent tag.\n  if (parser.opt.xmlns) parser.ns = Object.create(rootNS)\n\n  // mostly just for error reporting\n  parser.trackPosition = parser.opt.position !== false\n  if (parser.trackPosition) {\n    parser.position = parser.line = parser.column = 0\n  }\n  emit(parser, \"onready\")\n}\n\nif (!Object.create) Object.create = function (o) {\n  function f () { this.__proto__ = o }\n  f.prototype = o\n  return new f\n}\n\nif (!Object.getPrototypeOf) Object.getPrototypeOf = function (o) {\n  return o.__proto__\n}\n\nif (!Object.keys) Object.keys = function (o) {\n  var a = []\n  for (var i in o) if (o.hasOwnProperty(i)) a.push(i)\n  return a\n}\n\nfunction checkBufferLength (parser) {\n  var maxAllowed = Math.max(sax.MAX_BUFFER_LENGTH, 10)\n    , maxActual = 0\n  for (var i = 0, l = buffers.length; i < l; i ++) {\n    var len = parser[buffers[i]].length\n    if (len > maxAllowed) {\n      // Text/cdata nodes can get big, and since they're buffered,\n      // we can get here under normal conditions.\n      // Avoid issues by emitting the text node now,\n      // so at least it won't get any bigger.\n      switch (buffers[i]) {\n        case \"textNode\":\n          closeText(parser)\n        break\n\n        case \"cdata\":\n          emitNode(parser, \"oncdata\", parser.cdata)\n          parser.cdata = \"\"\n        break\n\n        case \"script\":\n          emitNode(parser, \"onscript\", parser.script)\n          parser.script = \"\"\n        break\n\n        default:\n          error(parser, \"Max buffer length exceeded: \"+buffers[i])\n      }\n    }\n    maxActual = Math.max(maxActual, len)\n  }\n  // schedule the next check for the earliest possible buffer overrun.\n  parser.bufferCheckPosition = (sax.MAX_BUFFER_LENGTH - maxActual)\n                             + parser.position\n}\n\nfunction clearBuffers (parser) {\n  for (var i = 0, l = buffers.length; i < l; i ++) {\n    parser[buffers[i]] = \"\"\n  }\n}\n\nfunction flushBuffers (parser) {\n  closeText(parser)\n  if (parser.cdata !== \"\") {\n    emitNode(parser, \"oncdata\", parser.cdata)\n    parser.cdata = \"\"\n  }\n  if (parser.script !== \"\") {\n    emitNode(parser, \"onscript\", parser.script)\n    parser.script = \"\"\n  }\n}\n\nSAXParser.prototype =\n  { end: function () { end(this) }\n  , write: write\n  , resume: function () { this.error = null; return this }\n  , close: function () { return this.write(null) }\n  , flush: function () { flushBuffers(this) }\n  }\n\ntry {\n  var Stream = require(\"stream\").Stream\n} catch (ex) {\n  var Stream = function () {}\n}\n\n\nvar streamWraps = sax.EVENTS.filter(function (ev) {\n  return ev !== \"error\" && ev !== \"end\"\n})\n\nfunction createStream (strict, opt) {\n  return new SAXStream(strict, opt)\n}\n\nfunction SAXStream (strict, opt) {\n  if (!(this instanceof SAXStream)) return new SAXStream(strict, opt)\n\n  Stream.apply(this)\n\n  this._parser = new SAXParser(strict, opt)\n  this.writable = true\n  this.readable = true\n\n\n  var me = this\n\n  this._parser.onend = function () {\n    me.emit(\"end\")\n  }\n\n  this._parser.onerror = function (er) {\n    me.emit(\"error\", er)\n\n    // if didn't throw, then means error was handled.\n    // go ahead and clear error, so we can write again.\n    me._parser.error = null\n  }\n\n  this._decoder = null;\n\n  streamWraps.forEach(function (ev) {\n    Object.defineProperty(me, \"on\" + ev, {\n      get: function () { return me._parser[\"on\" + ev] },\n      set: function (h) {\n        if (!h) {\n          me.removeAllListeners(ev)\n          return me._parser[\"on\"+ev] = h\n        }\n        me.on(ev, h)\n      },\n      enumerable: true,\n      configurable: false\n    })\n  })\n}\n\nSAXStream.prototype = Object.create(Stream.prototype,\n  { constructor: { value: SAXStream } })\n\nSAXStream.prototype.write = function (data) {\n  if (typeof Buffer === 'function' &&\n      typeof Buffer.isBuffer === 'function' &&\n      Buffer.isBuffer(data)) {\n    if (!this._decoder) {\n      var SD = require('string_decoder').StringDecoder\n      this._decoder = new SD('utf8')\n    }\n    data = this._decoder.write(data);\n  }\n\n  this._parser.write(data.toString())\n  this.emit(\"data\", data)\n  return true\n}\n\nSAXStream.prototype.end = function (chunk) {\n  if (chunk && chunk.length) this.write(chunk)\n  this._parser.end()\n  return true\n}\n\nSAXStream.prototype.on = function (ev, handler) {\n  var me = this\n  if (!me._parser[\"on\"+ev] && streamWraps.indexOf(ev) !== -1) {\n    me._parser[\"on\"+ev] = function () {\n      var args = arguments.length === 1 ? [arguments[0]]\n               : Array.apply(null, arguments)\n      args.splice(0, 0, ev)\n      me.emit.apply(me, args)\n    }\n  }\n\n  return Stream.prototype.on.call(me, ev, handler)\n}\n\n\n\n// character classes and tokens\nvar whitespace = \"\\r\\n\\t \"\n  // this really needs to be replaced with character classes.\n  // XML allows all manner of ridiculous numbers and digits.\n  , number = \"0124356789\"\n  , letter = \"abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ\"\n  // (Letter | \"_\" | \":\")\n  , quote = \"'\\\"\"\n  , entity = number+letter+\"#\"\n  , attribEnd = whitespace + \">\"\n  , CDATA = \"[CDATA[\"\n  , DOCTYPE = \"DOCTYPE\"\n  , XML_NAMESPACE = \"http://www.w3.org/XML/1998/namespace\"\n  , XMLNS_NAMESPACE = \"http://www.w3.org/2000/xmlns/\"\n  , rootNS = { xml: XML_NAMESPACE, xmlns: XMLNS_NAMESPACE }\n\n// turn all the string character sets into character class objects.\nwhitespace = charClass(whitespace)\nnumber = charClass(number)\nletter = charClass(letter)\n\n// http://www.w3.org/TR/REC-xml/#NT-NameStartChar\n// This implementation works on strings, a single character at a time\n// as such, it cannot ever support astral-plane characters (10000-EFFFF)\n// without a significant breaking change to either this  parser, or the\n// JavaScript language.  Implementation of an emoji-capable xml parser\n// is left as an exercise for the reader.\nvar nameStart = /[:_A-Za-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD]/\n\nvar nameBody = /[:_A-Za-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\u00B7\\u0300-\\u036F\\u203F-\\u2040\\.\\d-]/\n\nquote = charClass(quote)\nentity = charClass(entity)\nattribEnd = charClass(attribEnd)\n\nfunction charClass (str) {\n  return str.split(\"\").reduce(function (s, c) {\n    s[c] = true\n    return s\n  }, {})\n}\n\nfunction isRegExp (c) {\n  return Object.prototype.toString.call(c) === '[object RegExp]'\n}\n\nfunction is (charclass, c) {\n  return isRegExp(charclass) ? !!c.match(charclass) : charclass[c]\n}\n\nfunction not (charclass, c) {\n  return !is(charclass, c)\n}\n\nvar S = 0\nsax.STATE =\n{ BEGIN                     : S++ // leading byte order mark or whitespace\n, BEGIN_WHITESPACE          : S++ // leading whitespace\n, TEXT                      : S++ // general stuff\n, TEXT_ENTITY               : S++ // &amp and such.\n, OPEN_WAKA                 : S++ // <\n, SGML_DECL                 : S++ // <!BLARG\n, SGML_DECL_QUOTED          : S++ // <!BLARG foo \"bar\n, DOCTYPE                   : S++ // <!DOCTYPE\n, DOCTYPE_QUOTED            : S++ // <!DOCTYPE \"//blah\n, DOCTYPE_DTD               : S++ // <!DOCTYPE \"//blah\" [ ...\n, DOCTYPE_DTD_QUOTED        : S++ // <!DOCTYPE \"//blah\" [ \"foo\n, COMMENT_STARTING          : S++ // <!-\n, COMMENT                   : S++ // <!--\n, COMMENT_ENDING            : S++ // <!-- blah -\n, COMMENT_ENDED             : S++ // <!-- blah --\n, CDATA                     : S++ // <![CDATA[ something\n, CDATA_ENDING              : S++ // ]\n, CDATA_ENDING_2            : S++ // ]]\n, PROC_INST                 : S++ // <?hi\n, PROC_INST_BODY            : S++ // <?hi there\n, PROC_INST_ENDING          : S++ // <?hi \"there\" ?\n, OPEN_TAG                  : S++ // <strong\n, OPEN_TAG_SLASH            : S++ // <strong /\n, ATTRIB                    : S++ // <a\n, ATTRIB_NAME               : S++ // <a foo\n, ATTRIB_NAME_SAW_WHITE     : S++ // <a foo _\n, ATTRIB_VALUE              : S++ // <a foo=\n, ATTRIB_VALUE_QUOTED       : S++ // <a foo=\"bar\n, ATTRIB_VALUE_CLOSED       : S++ // <a foo=\"bar\"\n, ATTRIB_VALUE_UNQUOTED     : S++ // <a foo=bar\n, ATTRIB_VALUE_ENTITY_Q     : S++ // <foo bar=\"&quot;\"\n, ATTRIB_VALUE_ENTITY_U     : S++ // <foo bar=&quot;\n, CLOSE_TAG                 : S++ // </a\n, CLOSE_TAG_SAW_WHITE       : S++ // </a   >\n, SCRIPT                    : S++ // <script> ...\n, SCRIPT_ENDING             : S++ // <script> ... <\n}\n\nsax.XML_ENTITIES =\n{ \"amp\" : \"&\"\n, \"gt\" : \">\"\n, \"lt\" : \"<\"\n, \"quot\" : \"\\\"\"\n, \"apos\" : \"'\"\n}\n\nsax.ENTITIES =\n{ \"amp\" : \"&\"\n, \"gt\" : \">\"\n, \"lt\" : \"<\"\n, \"quot\" : \"\\\"\"\n, \"apos\" : \"'\"\n, \"AElig\" : 198\n, \"Aacute\" : 193\n, \"Acirc\" : 194\n, \"Agrave\" : 192\n, \"Aring\" : 197\n, \"Atilde\" : 195\n, \"Auml\" : 196\n, \"Ccedil\" : 199\n, \"ETH\" : 208\n, \"Eacute\" : 201\n, \"Ecirc\" : 202\n, \"Egrave\" : 200\n, \"Euml\" : 203\n, \"Iacute\" : 205\n, \"Icirc\" : 206\n, \"Igrave\" : 204\n, \"Iuml\" : 207\n, \"Ntilde\" : 209\n, \"Oacute\" : 211\n, \"Ocirc\" : 212\n, \"Ograve\" : 210\n, \"Oslash\" : 216\n, \"Otilde\" : 213\n, \"Ouml\" : 214\n, \"THORN\" : 222\n, \"Uacute\" : 218\n, \"Ucirc\" : 219\n, \"Ugrave\" : 217\n, \"Uuml\" : 220\n, \"Yacute\" : 221\n, \"aacute\" : 225\n, \"acirc\" : 226\n, \"aelig\" : 230\n, \"agrave\" : 224\n, \"aring\" : 229\n, \"atilde\" : 227\n, \"auml\" : 228\n, \"ccedil\" : 231\n, \"eacute\" : 233\n, \"ecirc\" : 234\n, \"egrave\" : 232\n, \"eth\" : 240\n, \"euml\" : 235\n, \"iacute\" : 237\n, \"icirc\" : 238\n, \"igrave\" : 236\n, \"iuml\" : 239\n, \"ntilde\" : 241\n, \"oacute\" : 243\n, \"ocirc\" : 244\n, \"ograve\" : 242\n, \"oslash\" : 248\n, \"otilde\" : 245\n, \"ouml\" : 246\n, \"szlig\" : 223\n, \"thorn\" : 254\n, \"uacute\" : 250\n, \"ucirc\" : 251\n, \"ugrave\" : 249\n, \"uuml\" : 252\n, \"yacute\" : 253\n, \"yuml\" : 255\n, \"copy\" : 169\n, \"reg\" : 174\n, \"nbsp\" : 160\n, \"iexcl\" : 161\n, \"cent\" : 162\n, \"pound\" : 163\n, \"curren\" : 164\n, \"yen\" : 165\n, \"brvbar\" : 166\n, \"sect\" : 167\n, \"uml\" : 168\n, \"ordf\" : 170\n, \"laquo\" : 171\n, \"not\" : 172\n, \"shy\" : 173\n, \"macr\" : 175\n, \"deg\" : 176\n, \"plusmn\" : 177\n, \"sup1\" : 185\n, \"sup2\" : 178\n, \"sup3\" : 179\n, \"acute\" : 180\n, \"micro\" : 181\n, \"para\" : 182\n, \"middot\" : 183\n, \"cedil\" : 184\n, \"ordm\" : 186\n, \"raquo\" : 187\n, \"frac14\" : 188\n, \"frac12\" : 189\n, \"frac34\" : 190\n, \"iquest\" : 191\n, \"times\" : 215\n, \"divide\" : 247\n, \"OElig\" : 338\n, \"oelig\" : 339\n, \"Scaron\" : 352\n, \"scaron\" : 353\n, \"Yuml\" : 376\n, \"fnof\" : 402\n, \"circ\" : 710\n, \"tilde\" : 732\n, \"Alpha\" : 913\n, \"Beta\" : 914\n, \"Gamma\" : 915\n, \"Delta\" : 916\n, \"Epsilon\" : 917\n, \"Zeta\" : 918\n, \"Eta\" : 919\n, \"Theta\" : 920\n, \"Iota\" : 921\n, \"Kappa\" : 922\n, \"Lambda\" : 923\n, \"Mu\" : 924\n, \"Nu\" : 925\n, \"Xi\" : 926\n, \"Omicron\" : 927\n, \"Pi\" : 928\n, \"Rho\" : 929\n, \"Sigma\" : 931\n, \"Tau\" : 932\n, \"Upsilon\" : 933\n, \"Phi\" : 934\n, \"Chi\" : 935\n, \"Psi\" : 936\n, \"Omega\" : 937\n, \"alpha\" : 945\n, \"beta\" : 946\n, \"gamma\" : 947\n, \"delta\" : 948\n, \"epsilon\" : 949\n, \"zeta\" : 950\n, \"eta\" : 951\n, \"theta\" : 952\n, \"iota\" : 953\n, \"kappa\" : 954\n, \"lambda\" : 955\n, \"mu\" : 956\n, \"nu\" : 957\n, \"xi\" : 958\n, \"omicron\" : 959\n, \"pi\" : 960\n, \"rho\" : 961\n, \"sigmaf\" : 962\n, \"sigma\" : 963\n, \"tau\" : 964\n, \"upsilon\" : 965\n, \"phi\" : 966\n, \"chi\" : 967\n, \"psi\" : 968\n, \"omega\" : 969\n, \"thetasym\" : 977\n, \"upsih\" : 978\n, \"piv\" : 982\n, \"ensp\" : 8194\n, \"emsp\" : 8195\n, \"thinsp\" : 8201\n, \"zwnj\" : 8204\n, \"zwj\" : 8205\n, \"lrm\" : 8206\n, \"rlm\" : 8207\n, \"ndash\" : 8211\n, \"mdash\" : 8212\n, \"lsquo\" : 8216\n, \"rsquo\" : 8217\n, \"sbquo\" : 8218\n, \"ldquo\" : 8220\n, \"rdquo\" : 8221\n, \"bdquo\" : 8222\n, \"dagger\" : 8224\n, \"Dagger\" : 8225\n, \"bull\" : 8226\n, \"hellip\" : 8230\n, \"permil\" : 8240\n, \"prime\" : 8242\n, \"Prime\" : 8243\n, \"lsaquo\" : 8249\n, \"rsaquo\" : 8250\n, \"oline\" : 8254\n, \"frasl\" : 8260\n, \"euro\" : 8364\n, \"image\" : 8465\n, \"weierp\" : 8472\n, \"real\" : 8476\n, \"trade\" : 8482\n, \"alefsym\" : 8501\n, \"larr\" : 8592\n, \"uarr\" : 8593\n, \"rarr\" : 8594\n, \"darr\" : 8595\n, \"harr\" : 8596\n, \"crarr\" : 8629\n, \"lArr\" : 8656\n, \"uArr\" : 8657\n, \"rArr\" : 8658\n, \"dArr\" : 8659\n, \"hArr\" : 8660\n, \"forall\" : 8704\n, \"part\" : 8706\n, \"exist\" : 8707\n, \"empty\" : 8709\n, \"nabla\" : 8711\n, \"isin\" : 8712\n, \"notin\" : 8713\n, \"ni\" : 8715\n, \"prod\" : 8719\n, \"sum\" : 8721\n, \"minus\" : 8722\n, \"lowast\" : 8727\n, \"radic\" : 8730\n, \"prop\" : 8733\n, \"infin\" : 8734\n, \"ang\" : 8736\n, \"and\" : 8743\n, \"or\" : 8744\n, \"cap\" : 8745\n, \"cup\" : 8746\n, \"int\" : 8747\n, \"there4\" : 8756\n, \"sim\" : 8764\n, \"cong\" : 8773\n, \"asymp\" : 8776\n, \"ne\" : 8800\n, \"equiv\" : 8801\n, \"le\" : 8804\n, \"ge\" : 8805\n, \"sub\" : 8834\n, \"sup\" : 8835\n, \"nsub\" : 8836\n, \"sube\" : 8838\n, \"supe\" : 8839\n, \"oplus\" : 8853\n, \"otimes\" : 8855\n, \"perp\" : 8869\n, \"sdot\" : 8901\n, \"lceil\" : 8968\n, \"rceil\" : 8969\n, \"lfloor\" : 8970\n, \"rfloor\" : 8971\n, \"lang\" : 9001\n, \"rang\" : 9002\n, \"loz\" : 9674\n, \"spades\" : 9824\n, \"clubs\" : 9827\n, \"hearts\" : 9829\n, \"diams\" : 9830\n}\n\nObject.keys(sax.ENTITIES).forEach(function (key) {\n    var e = sax.ENTITIES[key]\n    var s = typeof e === 'number' ? String.fromCharCode(e) : e\n    sax.ENTITIES[key] = s\n})\n\nfor (var S in sax.STATE) sax.STATE[sax.STATE[S]] = S\n\n// shorthand\nS = sax.STATE\n\nfunction emit (parser, event, data) {\n  parser[event] && parser[event](data)\n}\n\nfunction emitNode (parser, nodeType, data) {\n  if (parser.textNode) closeText(parser)\n  emit(parser, nodeType, data)\n}\n\nfunction closeText (parser) {\n  parser.textNode = textopts(parser.opt, parser.textNode)\n  if (parser.textNode) emit(parser, \"ontext\", parser.textNode)\n  parser.textNode = \"\"\n}\n\nfunction textopts (opt, text) {\n  if (opt.trim) text = text.trim()\n  if (opt.normalize) text = text.replace(/\\s+/g, \" \")\n  return text\n}\n\nfunction error (parser, er) {\n  closeText(parser)\n  if (parser.trackPosition) {\n    er += \"\\nLine: \"+parser.line+\n          \"\\nColumn: \"+parser.column+\n          \"\\nChar: \"+parser.c\n  }\n  er = new Error(er)\n  parser.error = er\n  emit(parser, \"onerror\", er)\n  return parser\n}\n\nfunction end (parser) {\n  if (parser.sawRoot && !parser.closedRoot) strictFail(parser, \"Unclosed root tag\")\n  if ((parser.state !== S.BEGIN) &&\n      (parser.state !== S.BEGIN_WHITESPACE) &&\n      (parser.state !== S.TEXT))\n    error(parser, \"Unexpected end\")\n  closeText(parser)\n  parser.c = \"\"\n  parser.closed = true\n  emit(parser, \"onend\")\n  SAXParser.call(parser, parser.strict, parser.opt)\n  return parser\n}\n\nfunction strictFail (parser, message) {\n  if (typeof parser !== 'object' || !(parser instanceof SAXParser))\n    throw new Error('bad call to strictFail');\n  if (parser.strict) error(parser, message)\n}\n\nfunction newTag (parser) {\n  if (!parser.strict) parser.tagName = parser.tagName[parser.looseCase]()\n  var parent = parser.tags[parser.tags.length - 1] || parser\n    , tag = parser.tag = { name : parser.tagName, attributes : {} }\n\n  // will be overridden if tag contails an xmlns=\"foo\" or xmlns:foo=\"bar\"\n  if (parser.opt.xmlns) tag.ns = parent.ns\n  parser.attribList.length = 0\n}\n\nfunction qname (name, attribute) {\n  var i = name.indexOf(\":\")\n    , qualName = i < 0 ? [ \"\", name ] : name.split(\":\")\n    , prefix = qualName[0]\n    , local = qualName[1]\n\n  // <x \"xmlns\"=\"http://foo\">\n  if (attribute && name === \"xmlns\") {\n    prefix = \"xmlns\"\n    local = \"\"\n  }\n\n  return { prefix: prefix, local: local }\n}\n\nfunction attrib (parser) {\n  if (!parser.strict) parser.attribName = parser.attribName[parser.looseCase]()\n\n  if (parser.attribList.indexOf(parser.attribName) !== -1 ||\n      parser.tag.attributes.hasOwnProperty(parser.attribName)) {\n    return parser.attribName = parser.attribValue = \"\"\n  }\n\n  if (parser.opt.xmlns) {\n    var qn = qname(parser.attribName, true)\n      , prefix = qn.prefix\n      , local = qn.local\n\n    if (prefix === \"xmlns\") {\n      // namespace binding attribute; push the binding into scope\n      if (local === \"xml\" && parser.attribValue !== XML_NAMESPACE) {\n        strictFail( parser\n                  , \"xml: prefix must be bound to \" + XML_NAMESPACE + \"\\n\"\n                  + \"Actual: \" + parser.attribValue )\n      } else if (local === \"xmlns\" && parser.attribValue !== XMLNS_NAMESPACE) {\n        strictFail( parser\n                  , \"xmlns: prefix must be bound to \" + XMLNS_NAMESPACE + \"\\n\"\n                  + \"Actual: \" + parser.attribValue )\n      } else {\n        var tag = parser.tag\n          , parent = parser.tags[parser.tags.length - 1] || parser\n        if (tag.ns === parent.ns) {\n          tag.ns = Object.create(parent.ns)\n        }\n        tag.ns[local] = parser.attribValue\n      }\n    }\n\n    // defer onattribute events until all attributes have been seen\n    // so any new bindings can take effect; preserve attribute order\n    // so deferred events can be emitted in document order\n    parser.attribList.push([parser.attribName, parser.attribValue])\n  } else {\n    // in non-xmlns mode, we can emit the event right away\n    parser.tag.attributes[parser.attribName] = parser.attribValue\n    emitNode( parser\n            , \"onattribute\"\n            , { name: parser.attribName\n              , value: parser.attribValue } )\n  }\n\n  parser.attribName = parser.attribValue = \"\"\n}\n\nfunction openTag (parser, selfClosing) {\n  if (parser.opt.xmlns) {\n    // emit namespace binding events\n    var tag = parser.tag\n\n    // add namespace info to tag\n    var qn = qname(parser.tagName)\n    tag.prefix = qn.prefix\n    tag.local = qn.local\n    tag.uri = tag.ns[qn.prefix] || \"\"\n\n    if (tag.prefix && !tag.uri) {\n      strictFail(parser, \"Unbound namespace prefix: \"\n                       + JSON.stringify(parser.tagName))\n      tag.uri = qn.prefix\n    }\n\n    var parent = parser.tags[parser.tags.length - 1] || parser\n    if (tag.ns && parent.ns !== tag.ns) {\n      Object.keys(tag.ns).forEach(function (p) {\n        emitNode( parser\n                , \"onopennamespace\"\n                , { prefix: p , uri: tag.ns[p] } )\n      })\n    }\n\n    // handle deferred onattribute events\n    // Note: do not apply default ns to attributes:\n    //   http://www.w3.org/TR/REC-xml-names/#defaulting\n    for (var i = 0, l = parser.attribList.length; i < l; i ++) {\n      var nv = parser.attribList[i]\n      var name = nv[0]\n        , value = nv[1]\n        , qualName = qname(name, true)\n        , prefix = qualName.prefix\n        , local = qualName.local\n        , uri = prefix == \"\" ? \"\" : (tag.ns[prefix] || \"\")\n        , a = { name: name\n              , value: value\n              , prefix: prefix\n              , local: local\n              , uri: uri\n              }\n\n      // if there's any attributes with an undefined namespace,\n      // then fail on them now.\n      if (prefix && prefix != \"xmlns\" && !uri) {\n        strictFail(parser, \"Unbound namespace prefix: \"\n                         + JSON.stringify(prefix))\n        a.uri = prefix\n      }\n      parser.tag.attributes[name] = a\n      emitNode(parser, \"onattribute\", a)\n    }\n    parser.attribList.length = 0\n  }\n\n  parser.tag.isSelfClosing = !!selfClosing\n\n  // process the tag\n  parser.sawRoot = true\n  parser.tags.push(parser.tag)\n  emitNode(parser, \"onopentag\", parser.tag)\n  if (!selfClosing) {\n    // special case for <script> in non-strict mode.\n    if (!parser.noscript && parser.tagName.toLowerCase() === \"script\") {\n      parser.state = S.SCRIPT\n    } else {\n      parser.state = S.TEXT\n    }\n    parser.tag = null\n    parser.tagName = \"\"\n  }\n  parser.attribName = parser.attribValue = \"\"\n  parser.attribList.length = 0\n}\n\nfunction closeTag (parser) {\n  if (!parser.tagName) {\n    strictFail(parser, \"Weird empty close tag.\")\n    parser.textNode += \"</>\"\n    parser.state = S.TEXT\n    return\n  }\n\n  if (parser.script) {\n    if (parser.tagName !== \"script\") {\n      parser.script += \"</\" + parser.tagName + \">\"\n      parser.tagName = \"\"\n      parser.state = S.SCRIPT\n      return\n    }\n    emitNode(parser, \"onscript\", parser.script)\n    parser.script = \"\"\n  }\n\n  // first make sure that the closing tag actually exists.\n  // <a><b></c></b></a> will close everything, otherwise.\n  var t = parser.tags.length\n  var tagName = parser.tagName\n  if (!parser.strict) tagName = tagName[parser.looseCase]()\n  var closeTo = tagName\n  while (t --) {\n    var close = parser.tags[t]\n    if (close.name !== closeTo) {\n      // fail the first time in strict mode\n      strictFail(parser, \"Unexpected close tag\")\n    } else break\n  }\n\n  // didn't find it.  we already failed for strict, so just abort.\n  if (t < 0) {\n    strictFail(parser, \"Unmatched closing tag: \"+parser.tagName)\n    parser.textNode += \"</\" + parser.tagName + \">\"\n    parser.state = S.TEXT\n    return\n  }\n  parser.tagName = tagName\n  var s = parser.tags.length\n  while (s --> t) {\n    var tag = parser.tag = parser.tags.pop()\n    parser.tagName = parser.tag.name\n    emitNode(parser, \"onclosetag\", parser.tagName)\n\n    var x = {}\n    for (var i in tag.ns) x[i] = tag.ns[i]\n\n    var parent = parser.tags[parser.tags.length - 1] || parser\n    if (parser.opt.xmlns && tag.ns !== parent.ns) {\n      // remove namespace bindings introduced by tag\n      Object.keys(tag.ns).forEach(function (p) {\n        var n = tag.ns[p]\n        emitNode(parser, \"onclosenamespace\", { prefix: p, uri: n })\n      })\n    }\n  }\n  if (t === 0) parser.closedRoot = true\n  parser.tagName = parser.attribValue = parser.attribName = \"\"\n  parser.attribList.length = 0\n  parser.state = S.TEXT\n}\n\nfunction parseEntity (parser) {\n  var entity = parser.entity\n    , entityLC = entity.toLowerCase()\n    , num\n    , numStr = \"\"\n  if (parser.ENTITIES[entity])\n    return parser.ENTITIES[entity]\n  if (parser.ENTITIES[entityLC])\n    return parser.ENTITIES[entityLC]\n  entity = entityLC\n  if (entity.charAt(0) === \"#\") {\n    if (entity.charAt(1) === \"x\") {\n      entity = entity.slice(2)\n      num = parseInt(entity, 16)\n      numStr = num.toString(16)\n    } else {\n      entity = entity.slice(1)\n      num = parseInt(entity, 10)\n      numStr = num.toString(10)\n    }\n  }\n  entity = entity.replace(/^0+/, \"\")\n  if (numStr.toLowerCase() !== entity) {\n    strictFail(parser, \"Invalid character entity\")\n    return \"&\"+parser.entity + \";\"\n  }\n\n  return String.fromCodePoint(num)\n}\n\nfunction write (chunk) {\n  var parser = this\n  if (this.error) throw this.error\n  if (parser.closed) return error(parser,\n    \"Cannot write after close. Assign an onready handler.\")\n  if (chunk === null) return end(parser)\n  var i = 0, c = \"\"\n  while (parser.c = c = chunk.charAt(i++)) {\n    if (parser.trackPosition) {\n      parser.position ++\n      if (c === \"\\n\") {\n        parser.line ++\n        parser.column = 0\n      } else parser.column ++\n    }\n    switch (parser.state) {\n\n      case S.BEGIN:\n        parser.state = S.BEGIN_WHITESPACE\n        if (c === \"\\uFEFF\") {\n          continue;\n        }\n      // no continue - fall through\n\n      case S.BEGIN_WHITESPACE:\n        if (c === \"<\") {\n          parser.state = S.OPEN_WAKA\n          parser.startTagPosition = parser.position\n        } else if (not(whitespace,c)) {\n          // have to process this as a text node.\n          // weird, but happens.\n          strictFail(parser, \"Non-whitespace before first tag.\")\n          parser.textNode = c\n          parser.state = S.TEXT\n        }\n      continue\n\n      case S.TEXT:\n        if (parser.sawRoot && !parser.closedRoot) {\n          var starti = i-1\n          while (c && c!==\"<\" && c!==\"&\") {\n            c = chunk.charAt(i++)\n            if (c && parser.trackPosition) {\n              parser.position ++\n              if (c === \"\\n\") {\n                parser.line ++\n                parser.column = 0\n              } else parser.column ++\n            }\n          }\n          parser.textNode += chunk.substring(starti, i-1)\n        }\n        if (c === \"<\" && !(parser.sawRoot && parser.closedRoot && !parser.strict)) {\n          parser.state = S.OPEN_WAKA\n          parser.startTagPosition = parser.position\n        } else {\n          if (not(whitespace, c) && (!parser.sawRoot || parser.closedRoot))\n            strictFail(parser, \"Text data outside of root node.\")\n          if (c === \"&\") parser.state = S.TEXT_ENTITY\n          else parser.textNode += c\n        }\n      continue\n\n      case S.SCRIPT:\n        // only non-strict\n        if (c === \"<\") {\n          parser.state = S.SCRIPT_ENDING\n        } else parser.script += c\n      continue\n\n      case S.SCRIPT_ENDING:\n        if (c === \"/\") {\n          parser.state = S.CLOSE_TAG\n        } else {\n          parser.script += \"<\" + c\n          parser.state = S.SCRIPT\n        }\n      continue\n\n      case S.OPEN_WAKA:\n        // either a /, ?, !, or text is coming next.\n        if (c === \"!\") {\n          parser.state = S.SGML_DECL\n          parser.sgmlDecl = \"\"\n        } else if (is(whitespace, c)) {\n          // wait for it...\n        } else if (is(nameStart,c)) {\n          parser.state = S.OPEN_TAG\n          parser.tagName = c\n        } else if (c === \"/\") {\n          parser.state = S.CLOSE_TAG\n          parser.tagName = \"\"\n        } else if (c === \"?\") {\n          parser.state = S.PROC_INST\n          parser.procInstName = parser.procInstBody = \"\"\n        } else {\n          strictFail(parser, \"Unencoded <\")\n          // if there was some whitespace, then add that in.\n          if (parser.startTagPosition + 1 < parser.position) {\n            var pad = parser.position - parser.startTagPosition\n            c = new Array(pad).join(\" \") + c\n          }\n          parser.textNode += \"<\" + c\n          parser.state = S.TEXT\n        }\n      continue\n\n      case S.SGML_DECL:\n        if ((parser.sgmlDecl+c).toUpperCase() === CDATA) {\n          emitNode(parser, \"onopencdata\")\n          parser.state = S.CDATA\n          parser.sgmlDecl = \"\"\n          parser.cdata = \"\"\n        } else if (parser.sgmlDecl+c === \"--\") {\n          parser.state = S.COMMENT\n          parser.comment = \"\"\n          parser.sgmlDecl = \"\"\n        } else if ((parser.sgmlDecl+c).toUpperCase() === DOCTYPE) {\n          parser.state = S.DOCTYPE\n          if (parser.doctype || parser.sawRoot) strictFail(parser,\n            \"Inappropriately located doctype declaration\")\n          parser.doctype = \"\"\n          parser.sgmlDecl = \"\"\n        } else if (c === \">\") {\n          emitNode(parser, \"onsgmldeclaration\", parser.sgmlDecl)\n          parser.sgmlDecl = \"\"\n          parser.state = S.TEXT\n        } else if (is(quote, c)) {\n          parser.state = S.SGML_DECL_QUOTED\n          parser.sgmlDecl += c\n        } else parser.sgmlDecl += c\n      continue\n\n      case S.SGML_DECL_QUOTED:\n        if (c === parser.q) {\n          parser.state = S.SGML_DECL\n          parser.q = \"\"\n        }\n        parser.sgmlDecl += c\n      continue\n\n      case S.DOCTYPE:\n        if (c === \">\") {\n          parser.state = S.TEXT\n          emitNode(parser, \"ondoctype\", parser.doctype)\n          parser.doctype = true // just remember that we saw it.\n        } else {\n          parser.doctype += c\n          if (c === \"[\") parser.state = S.DOCTYPE_DTD\n          else if (is(quote, c)) {\n            parser.state = S.DOCTYPE_QUOTED\n            parser.q = c\n          }\n        }\n      continue\n\n      case S.DOCTYPE_QUOTED:\n        parser.doctype += c\n        if (c === parser.q) {\n          parser.q = \"\"\n          parser.state = S.DOCTYPE\n        }\n      continue\n\n      case S.DOCTYPE_DTD:\n        parser.doctype += c\n        if (c === \"]\") parser.state = S.DOCTYPE\n        else if (is(quote,c)) {\n          parser.state = S.DOCTYPE_DTD_QUOTED\n          parser.q = c\n        }\n      continue\n\n      case S.DOCTYPE_DTD_QUOTED:\n        parser.doctype += c\n        if (c === parser.q) {\n          parser.state = S.DOCTYPE_DTD\n          parser.q = \"\"\n        }\n      continue\n\n      case S.COMMENT:\n        if (c === \"-\") parser.state = S.COMMENT_ENDING\n        else parser.comment += c\n      continue\n\n      case S.COMMENT_ENDING:\n        if (c === \"-\") {\n          parser.state = S.COMMENT_ENDED\n          parser.comment = textopts(parser.opt, parser.comment)\n          if (parser.comment) emitNode(parser, \"oncomment\", parser.comment)\n          parser.comment = \"\"\n        } else {\n          parser.comment += \"-\" + c\n          parser.state = S.COMMENT\n        }\n      continue\n\n      case S.COMMENT_ENDED:\n        if (c !== \">\") {\n          strictFail(parser, \"Malformed comment\")\n          // allow <!-- blah -- bloo --> in non-strict mode,\n          // which is a comment of \" blah -- bloo \"\n          parser.comment += \"--\" + c\n          parser.state = S.COMMENT\n        } else parser.state = S.TEXT\n      continue\n\n      case S.CDATA:\n        if (c === \"]\") parser.state = S.CDATA_ENDING\n        else parser.cdata += c\n      continue\n\n      case S.CDATA_ENDING:\n        if (c === \"]\") parser.state = S.CDATA_ENDING_2\n        else {\n          parser.cdata += \"]\" + c\n          parser.state = S.CDATA\n        }\n      continue\n\n      case S.CDATA_ENDING_2:\n        if (c === \">\") {\n          if (parser.cdata) emitNode(parser, \"oncdata\", parser.cdata)\n          emitNode(parser, \"onclosecdata\")\n          parser.cdata = \"\"\n          parser.state = S.TEXT\n        } else if (c === \"]\") {\n          parser.cdata += \"]\"\n        } else {\n          parser.cdata += \"]]\" + c\n          parser.state = S.CDATA\n        }\n      continue\n\n      case S.PROC_INST:\n        if (c === \"?\") parser.state = S.PROC_INST_ENDING\n        else if (is(whitespace, c)) parser.state = S.PROC_INST_BODY\n        else parser.procInstName += c\n      continue\n\n      case S.PROC_INST_BODY:\n        if (!parser.procInstBody && is(whitespace, c)) continue\n        else if (c === \"?\") parser.state = S.PROC_INST_ENDING\n        else parser.procInstBody += c\n      continue\n\n      case S.PROC_INST_ENDING:\n        if (c === \">\") {\n          emitNode(parser, \"onprocessinginstruction\", {\n            name : parser.procInstName,\n            body : parser.procInstBody\n          })\n          parser.procInstName = parser.procInstBody = \"\"\n          parser.state = S.TEXT\n        } else {\n          parser.procInstBody += \"?\" + c\n          parser.state = S.PROC_INST_BODY\n        }\n      continue\n\n      case S.OPEN_TAG:\n        if (is(nameBody, c)) parser.tagName += c\n        else {\n          newTag(parser)\n          if (c === \">\") openTag(parser)\n          else if (c === \"/\") parser.state = S.OPEN_TAG_SLASH\n          else {\n            if (not(whitespace, c)) strictFail(\n              parser, \"Invalid character in tag name\")\n            parser.state = S.ATTRIB\n          }\n        }\n      continue\n\n      case S.OPEN_TAG_SLASH:\n        if (c === \">\") {\n          openTag(parser, true)\n          closeTag(parser)\n        } else {\n          strictFail(parser, \"Forward-slash in opening tag not followed by >\")\n          parser.state = S.ATTRIB\n        }\n      continue\n\n      case S.ATTRIB:\n        // haven't read the attribute name yet.\n        if (is(whitespace, c)) continue\n        else if (c === \">\") openTag(parser)\n        else if (c === \"/\") parser.state = S.OPEN_TAG_SLASH\n        else if (is(nameStart, c)) {\n          parser.attribName = c\n          parser.attribValue = \"\"\n          parser.state = S.ATTRIB_NAME\n        } else strictFail(parser, \"Invalid attribute name\")\n      continue\n\n      case S.ATTRIB_NAME:\n        if (c === \"=\") parser.state = S.ATTRIB_VALUE\n        else if (c === \">\") {\n          strictFail(parser, \"Attribute without value\")\n          parser.attribValue = parser.attribName\n          attrib(parser)\n          openTag(parser)\n        }\n        else if (is(whitespace, c)) parser.state = S.ATTRIB_NAME_SAW_WHITE\n        else if (is(nameBody, c)) parser.attribName += c\n        else strictFail(parser, \"Invalid attribute name\")\n      continue\n\n      case S.ATTRIB_NAME_SAW_WHITE:\n        if (c === \"=\") parser.state = S.ATTRIB_VALUE\n        else if (is(whitespace, c)) continue\n        else {\n          strictFail(parser, \"Attribute without value\")\n          parser.tag.attributes[parser.attribName] = \"\"\n          parser.attribValue = \"\"\n          emitNode(parser, \"onattribute\",\n                   { name : parser.attribName, value : \"\" })\n          parser.attribName = \"\"\n          if (c === \">\") openTag(parser)\n          else if (is(nameStart, c)) {\n            parser.attribName = c\n            parser.state = S.ATTRIB_NAME\n          } else {\n            strictFail(parser, \"Invalid attribute name\")\n            parser.state = S.ATTRIB\n          }\n        }\n      continue\n\n      case S.ATTRIB_VALUE:\n        if (is(whitespace, c)) continue\n        else if (is(quote, c)) {\n          parser.q = c\n          parser.state = S.ATTRIB_VALUE_QUOTED\n        } else {\n          strictFail(parser, \"Unquoted attribute value\")\n          parser.state = S.ATTRIB_VALUE_UNQUOTED\n          parser.attribValue = c\n        }\n      continue\n\n      case S.ATTRIB_VALUE_QUOTED:\n        if (c !== parser.q) {\n          if (c === \"&\") parser.state = S.ATTRIB_VALUE_ENTITY_Q\n          else parser.attribValue += c\n          continue\n        }\n        attrib(parser)\n        parser.q = \"\"\n        parser.state = S.ATTRIB_VALUE_CLOSED\n      continue\n\n      case S.ATTRIB_VALUE_CLOSED:\n        if (is(whitespace, c)) {\n          parser.state = S.ATTRIB\n        } else if (c === \">\") openTag(parser)\n        else if (c === \"/\") parser.state = S.OPEN_TAG_SLASH\n        else if (is(nameStart, c)) {\n          strictFail(parser, \"No whitespace between attributes\")\n          parser.attribName = c\n          parser.attribValue = \"\"\n          parser.state = S.ATTRIB_NAME\n        } else strictFail(parser, \"Invalid attribute name\")\n      continue\n\n      case S.ATTRIB_VALUE_UNQUOTED:\n        if (not(attribEnd,c)) {\n          if (c === \"&\") parser.state = S.ATTRIB_VALUE_ENTITY_U\n          else parser.attribValue += c\n          continue\n        }\n        attrib(parser)\n        if (c === \">\") openTag(parser)\n        else parser.state = S.ATTRIB\n      continue\n\n      case S.CLOSE_TAG:\n        if (!parser.tagName) {\n          if (is(whitespace, c)) continue\n          else if (not(nameStart, c)) {\n            if (parser.script) {\n              parser.script += \"</\" + c\n              parser.state = S.SCRIPT\n            } else {\n              strictFail(parser, \"Invalid tagname in closing tag.\")\n            }\n          } else parser.tagName = c\n        }\n        else if (c === \">\") closeTag(parser)\n        else if (is(nameBody, c)) parser.tagName += c\n        else if (parser.script) {\n          parser.script += \"</\" + parser.tagName\n          parser.tagName = \"\"\n          parser.state = S.SCRIPT\n        } else {\n          if (not(whitespace, c)) strictFail(parser,\n            \"Invalid tagname in closing tag\")\n          parser.state = S.CLOSE_TAG_SAW_WHITE\n        }\n      continue\n\n      case S.CLOSE_TAG_SAW_WHITE:\n        if (is(whitespace, c)) continue\n        if (c === \">\") closeTag(parser)\n        else strictFail(parser, \"Invalid characters in closing tag\")\n      continue\n\n      case S.TEXT_ENTITY:\n      case S.ATTRIB_VALUE_ENTITY_Q:\n      case S.ATTRIB_VALUE_ENTITY_U:\n        switch(parser.state) {\n          case S.TEXT_ENTITY:\n            var returnState = S.TEXT, buffer = \"textNode\"\n          break\n\n          case S.ATTRIB_VALUE_ENTITY_Q:\n            var returnState = S.ATTRIB_VALUE_QUOTED, buffer = \"attribValue\"\n          break\n\n          case S.ATTRIB_VALUE_ENTITY_U:\n            var returnState = S.ATTRIB_VALUE_UNQUOTED, buffer = \"attribValue\"\n          break\n        }\n        if (c === \";\") {\n          parser[buffer] += parseEntity(parser)\n          parser.entity = \"\"\n          parser.state = returnState\n        }\n        else if (is(entity, c)) parser.entity += c\n        else {\n          strictFail(parser, \"Invalid character entity\")\n          parser[buffer] += \"&\" + parser.entity + c\n          parser.entity = \"\"\n          parser.state = returnState\n        }\n      continue\n\n      default:\n        throw new Error(parser, \"Unknown state: \" + parser.state)\n    }\n  } // while\n  // cdata blocks can get very big under normal conditions. emit and move on.\n  // if (parser.state === S.CDATA && parser.cdata) {\n  //   emitNode(parser, \"oncdata\", parser.cdata)\n  //   parser.cdata = \"\"\n  // }\n  if (parser.position >= parser.bufferCheckPosition) checkBufferLength(parser)\n  return parser\n}\n\n/*! http://mths.be/fromcodepoint v0.1.0 by @mathias */\nif (!String.fromCodePoint) {\n        (function() {\n                var stringFromCharCode = String.fromCharCode;\n                var floor = Math.floor;\n                var fromCodePoint = function() {\n                        var MAX_SIZE = 0x4000;\n                        var codeUnits = [];\n                        var highSurrogate;\n                        var lowSurrogate;\n                        var index = -1;\n                        var length = arguments.length;\n                        if (!length) {\n                                return '';\n                        }\n                        var result = '';\n                        while (++index < length) {\n                                var codePoint = Number(arguments[index]);\n                                if (\n                                        !isFinite(codePoint) || // `NaN`, `+Infinity`, or `-Infinity`\n                                        codePoint < 0 || // not a valid Unicode code point\n                                        codePoint > 0x10FFFF || // not a valid Unicode code point\n                                        floor(codePoint) != codePoint // not an integer\n                                ) {\n                                        throw RangeError('Invalid code point: ' + codePoint);\n                                }\n                                if (codePoint <= 0xFFFF) { // BMP code point\n                                        codeUnits.push(codePoint);\n                                } else { // Astral code point; split in surrogate halves\n                                        // http://mathiasbynens.be/notes/javascript-encoding#surrogate-formulae\n                                        codePoint -= 0x10000;\n                                        highSurrogate = (codePoint >> 10) + 0xD800;\n                                        lowSurrogate = (codePoint % 0x400) + 0xDC00;\n                                        codeUnits.push(highSurrogate, lowSurrogate);\n                                }\n                                if (index + 1 == length || codeUnits.length > MAX_SIZE) {\n                                        result += stringFromCharCode.apply(null, codeUnits);\n                                        codeUnits.length = 0;\n                                }\n                        }\n                        return result;\n                };\n                if (Object.defineProperty) {\n                        Object.defineProperty(String, 'fromCodePoint', {\n                                'value': fromCodePoint,\n                                'configurable': true,\n                                'writable': true\n                        });\n                } else {\n                        String.fromCodePoint = fromCodePoint;\n                }\n        }());\n}\n\n})(typeof exports === \"undefined\" ? sax = {} : exports);\n\n}).call(this,require(\"buffer\").Buffer)\n},{\"buffer\":3,\"stream\":23,\"string_decoder\":24}],26:[function(require,module,exports){\nvar ANIMATION_FRAME_RATE, BACKSPACE_KEY, CONTROL_KEYS, CURSOR_HEIGHT_DECREASE, CURSOR_UNFOCUSED_OPACITY, CURSOR_WIDTH_DECREASE, CapturePoint, CrossDocumentLocation, DEBUG_FLAG, DEFAULT_INDENT_DEPTH, DISCOURAGE_DROP_TIMEOUT, DOWN_ARROW_KEY, DROPDOWN_SCROLLBAR_PADDING, ENTER_KEY, Editor, EditorState, FloatingBlockRecord, FloatingOperation, GRAY_BLOCK_BORDER, GRAY_BLOCK_COLOR, GRAY_BLOCK_HANDLE_HEIGHT, GRAY_BLOCK_HANDLE_WIDTH, GRAY_BLOCK_MARGIN, LEFT_ARROW_KEY, MAX_DROP_DISTANCE, META_KEYS, MIN_DRAG_DISTANCE, PALETTE_LEFT_MARGIN, PALETTE_MARGIN, PALETTE_TOP_MARGIN, QUAD, RIGHT_ARROW_KEY, RememberedSocketRecord, TAB_KEY, TOUCH_SELECTION_TIMEOUT, TYPE_FROM_SEVERITY, TYPE_SEVERITY, UP_ARROW_KEY, Y_KEY, Z_KEY, binding, command_modifiers, command_pressed, containsCursor, draw, editorBindings, escapeString, getMostSevereAnnotationType, getOffsetLeft, getOffsetTop, helper, hook, isOSX, j, key, last_, len, model, modes, parseBlock, ref, ref1, touchEvents, unsortedEditorBindings, userAgent, validateLassoSelection, view,\n  indexOf = [].indexOf || function(item) { for (var i = 0, l = this.length; i < l; i++) { if (i in this && this[i] === item) return i; } return -1; };\n\nhelper = require('./helper.coffee');\n\ndraw = require('./draw.coffee');\n\nmodel = require('./model.coffee');\n\nview = require('./view.coffee');\n\nQUAD = require('../vendor/quadtree.js');\n\nmodes = require('./modes.coffee');\n\nPALETTE_TOP_MARGIN = 5;\n\nPALETTE_MARGIN = 5;\n\nMIN_DRAG_DISTANCE = 1;\n\nPALETTE_LEFT_MARGIN = 5;\n\nDEFAULT_INDENT_DEPTH = '  ';\n\nANIMATION_FRAME_RATE = 60;\n\nDISCOURAGE_DROP_TIMEOUT = 1000;\n\nMAX_DROP_DISTANCE = 100;\n\nCURSOR_WIDTH_DECREASE = 3;\n\nCURSOR_HEIGHT_DECREASE = 2;\n\nCURSOR_UNFOCUSED_OPACITY = 0.5;\n\nDEBUG_FLAG = false;\n\nDROPDOWN_SCROLLBAR_PADDING = 17;\n\nBACKSPACE_KEY = 8;\n\nTAB_KEY = 9;\n\nENTER_KEY = 13;\n\nLEFT_ARROW_KEY = 37;\n\nUP_ARROW_KEY = 38;\n\nRIGHT_ARROW_KEY = 39;\n\nDOWN_ARROW_KEY = 40;\n\nZ_KEY = 90;\n\nY_KEY = 89;\n\nMETA_KEYS = [91, 92, 93, 223, 224];\n\nCONTROL_KEYS = [17, 162, 163];\n\nGRAY_BLOCK_MARGIN = 5;\n\nGRAY_BLOCK_HANDLE_WIDTH = 15;\n\nGRAY_BLOCK_HANDLE_HEIGHT = 30;\n\nGRAY_BLOCK_COLOR = '#FFF';\n\nGRAY_BLOCK_BORDER = '#AAA';\n\nuserAgent = '';\n\nif (typeof window !== 'undefined' && ((ref = window.navigator) != null ? ref.userAgent : void 0)) {\n  userAgent = window.navigator.userAgent;\n}\n\nisOSX = /OS X/.test(userAgent);\n\ncommand_modifiers = isOSX ? META_KEYS : CONTROL_KEYS;\n\ncommand_pressed = function(e) {\n  if (isOSX) {\n    return e.metaKey;\n  } else {\n    return e.ctrlKey;\n  }\n};\n\nunsortedEditorBindings = {\n  'populate': [],\n  'resize': [],\n  'resize_palette': [],\n  'redraw_main': [],\n  'redraw_palette': [],\n  'rebuild_palette': [],\n  'mousedown': [],\n  'mousemove': [],\n  'mouseup': [],\n  'dblclick': [],\n  'keydown': [],\n  'keyup': []\n};\n\neditorBindings = {};\n\nhook = function(event, priority, fn) {\n  return unsortedEditorBindings[event].push({\n    priority: priority,\n    fn: fn\n  });\n};\n\nexports.Editor = Editor = (function() {\n  function Editor(wrapperElement, options1) {\n    var binding, boundListeners, dispatchKeyEvent, dispatchMouseEvent, elements, eventName, fn1, j, len, ref1, ref2, ref3, ref4, ref5, ref6, ref7, useBlockMode;\n    this.wrapperElement = wrapperElement;\n    this.options = options1;\n    this.readOnly = false;\n    this.paletteGroups = this.options.palette;\n    this.showPaletteInTextMode = (ref1 = this.options.showPaletteInTextMode) != null ? ref1 : false;\n    this.paletteEnabled = (ref2 = this.options.enablePaletteAtStart) != null ? ref2 : true;\n    this.dropIntoAceAtLineStart = (ref3 = this.options.dropIntoAceAtLineStart) != null ? ref3 : false;\n    this.allowFloatingBlocks = (ref4 = this.options.allowFloatingBlocks) != null ? ref4 : true;\n    this.options.mode = this.options.mode.replace(/$\\/ace\\/mode\\//, '');\n    if (this.options.mode in modes) {\n      this.mode = new modes[this.options.mode](this.options.modeOptions);\n    } else {\n      this.mode = new coffee(this.options.modeOptions);\n    }\n    this.draw = new draw.Draw();\n    this.gutterDecorations = {};\n    this.debugging = true;\n    this.dropletElement = document.createElement('div');\n    this.dropletElement.className = 'droplet-wrapper-div';\n    this.dropletElement.tabIndex = 0;\n    this.wrapperElement.appendChild(this.dropletElement);\n    this.wrapperElement.style.backgroundColor = '#FFF';\n    this.mainCanvas = document.createElement('canvas');\n    this.mainCanvas.className = 'droplet-main-canvas';\n    this.mainCanvas.width = this.mainCanvas.height = 0;\n    this.mainCtx = this.mainCanvas.getContext('2d');\n    this.dropletElement.appendChild(this.mainCanvas);\n    this.paletteWrapper = document.createElement('div');\n    this.paletteWrapper.className = 'droplet-palette-wrapper';\n    this.paletteElement = document.createElement('div');\n    this.paletteElement.className = 'droplet-palette-element';\n    this.paletteWrapper.appendChild(this.paletteElement);\n    this.paletteCanvas = document.createElement('canvas');\n    this.paletteCanvas.className = 'droplet-palette-canvas';\n    this.paletteCanvas.height = this.paletteCanvas.width = 0;\n    this.paletteCtx = this.paletteCanvas.getContext('2d');\n    this.paletteElement.appendChild(this.paletteCanvas);\n    this.paletteWrapper.style.position = 'absolute';\n    this.paletteWrapper.style.left = '0px';\n    this.paletteWrapper.style.top = '0px';\n    this.paletteWrapper.style.bottom = '0px';\n    this.paletteWrapper.style.width = '270px';\n    this.dropletElement.style.left = this.paletteWrapper.offsetWidth + 'px';\n    this.wrapperElement.appendChild(this.paletteWrapper);\n    this.draw.refreshFontCapital();\n    this.standardViewSettings = {\n      padding: 5,\n      indentWidth: 20,\n      textHeight: helper.getFontHeight('Courier New', 15),\n      indentTongueHeight: 20,\n      tabOffset: 10,\n      tabWidth: 15,\n      tabHeight: 4,\n      tabSideWidth: 1 / 4,\n      dropAreaHeight: 20,\n      indentDropAreaMinWidth: 50,\n      emptySocketWidth: 20,\n      emptyLineHeight: 25,\n      highlightAreaHeight: 10,\n      shadowBlur: 5,\n      ctx: this.mainCtx,\n      draw: this.draw\n    };\n    this.bindings = {};\n    this.view = new view.View(this.standardViewSettings);\n    this.paletteView = new view.View(helper.extend({}, this.standardViewSettings, {\n      showDropdowns: (ref5 = this.options.showDropdownInPalette) != null ? ref5 : false\n    }));\n    this.dragView = new view.View(this.standardViewSettings);\n    boundListeners = [];\n    ref6 = editorBindings.populate;\n    for (j = 0, len = ref6.length; j < len; j++) {\n      binding = ref6[j];\n      binding.call(this);\n    }\n    window.addEventListener('resize', (function(_this) {\n      return function() {\n        return _this.resizeBlockMode();\n      };\n    })(this));\n    dispatchMouseEvent = (function(_this) {\n      return function(event) {\n        var handler, k, len1, ref7, state, trackPoint;\n        if (event.type !== 'mousemove' && event.which !== 1) {\n          return;\n        }\n        trackPoint = new _this.draw.Point(event.clientX, event.clientY);\n        state = {};\n        ref7 = editorBindings[event.type];\n        for (k = 0, len1 = ref7.length; k < len1; k++) {\n          handler = ref7[k];\n          handler.call(_this, trackPoint, event, state);\n        }\n        if (event.type === 'mousedown') {\n          if (typeof event.preventDefault === \"function\") {\n            event.preventDefault();\n          }\n          event.returnValue = false;\n          return false;\n        }\n      };\n    })(this);\n    dispatchKeyEvent = (function(_this) {\n      return function(event) {\n        var handler, k, len1, ref7, results, state;\n        state = {};\n        ref7 = editorBindings[event.type];\n        results = [];\n        for (k = 0, len1 = ref7.length; k < len1; k++) {\n          handler = ref7[k];\n          results.push(handler.call(_this, event, state));\n        }\n        return results;\n      };\n    })(this);\n    ref7 = {\n      keydown: [this.dropletElement, this.paletteElement],\n      keyup: [this.dropletElement, this.paletteElement],\n      mousedown: [this.dropletElement, this.paletteElement, this.dragCover],\n      dblclick: [this.dropletElement, this.paletteElement, this.dragCover],\n      mouseup: [window],\n      mousemove: [window]\n    };\n    fn1 = (function(_this) {\n      return function(eventName, elements) {\n        var element, k, len1, results;\n        results = [];\n        for (k = 0, len1 = elements.length; k < len1; k++) {\n          element = elements[k];\n          if (/^key/.test(eventName)) {\n            results.push(element.addEventListener(eventName, dispatchKeyEvent));\n          } else {\n            results.push(element.addEventListener(eventName, dispatchMouseEvent));\n          }\n        }\n        return results;\n      };\n    })(this);\n    for (eventName in ref7) {\n      elements = ref7[eventName];\n      fn1(eventName, elements);\n    }\n    this.tree = new model.Document();\n    this.resizeBlockMode();\n    this.redrawMain();\n    this.rebuildPalette();\n    useBlockMode = (this.mode != null) && !this.options.textModeAtStart;\n    this.setEditorState(useBlockMode);\n    return this;\n  }\n\n  Editor.prototype.setMode = function(mode, modeOptions) {\n    var modeClass;\n    modeClass = modes[mode];\n    if (modeClass) {\n      this.options.mode = mode;\n      this.mode = new modeClass(modeOptions);\n    } else {\n      this.options.mode = null;\n      this.mode = null;\n    }\n    return this.setValue(this.getValue());\n  };\n\n  Editor.prototype.getMode = function() {\n    return this.options.mode;\n  };\n\n  Editor.prototype.setReadOnly = function(readOnly) {\n    this.readOnly = readOnly;\n    return this.aceEditor.setReadOnly(readOnly);\n  };\n\n  Editor.prototype.getReadOnly = function() {\n    return this.readOnly;\n  };\n\n  Editor.prototype.resizeTextMode = function() {\n    this.resizeAceElement();\n    return this.aceEditor.resize(true);\n  };\n\n  Editor.prototype.resizeBlockMode = function() {\n    this.resizeTextMode();\n    this.dropletElement.style.height = this.wrapperElement.clientHeight + \"px\";\n    if (this.paletteEnabled) {\n      this.dropletElement.style.left = this.paletteWrapper.offsetWidth + \"px\";\n      this.dropletElement.style.width = (this.wrapperElement.clientWidth - this.paletteWrapper.offsetWidth) + \"px\";\n    } else {\n      this.dropletElement.style.left = \"0px\";\n      this.dropletElement.style.width = this.wrapperElement.clientWidth + \"px\";\n    }\n    this.resizeGutter();\n    this.mainCanvas.height = this.dropletElement.offsetHeight;\n    this.mainCanvas.width = this.dropletElement.offsetWidth - this.gutter.offsetWidth;\n    this.mainCanvas.style.height = this.mainCanvas.height + \"px\";\n    this.mainCanvas.style.width = this.mainCanvas.width + \"px\";\n    this.mainCanvas.style.left = this.gutter.offsetWidth + \"px\";\n    this.transitionContainer.style.left = this.gutter.offsetWidth + \"px\";\n    this.resizePalette();\n    this.resizePaletteHighlight();\n    this.resizeNubby();\n    this.resizeMainScroller();\n    this.resizeLassoCanvas();\n    this.resizeCursorCanvas();\n    this.resizeDragCanvas();\n    this.scrollOffsets.main.y = this.mainScroller.scrollTop;\n    this.scrollOffsets.main.x = this.mainScroller.scrollLeft;\n    this.mainCtx.setTransform(1, 0, 0, 1, -this.scrollOffsets.main.x, -this.scrollOffsets.main.y);\n    this.highlightCtx.setTransform(1, 0, 0, 1, -this.scrollOffsets.main.x, -this.scrollOffsets.main.y);\n    this.cursorCtx.setTransform(1, 0, 0, 1, -this.scrollOffsets.main.x, -this.scrollOffsets.main.y);\n    return this.redrawMain();\n  };\n\n  Editor.prototype.resizePalette = function() {\n    var binding, j, len, ref1;\n    this.paletteCanvas.style.top = this.paletteHeader.offsetHeight + \"px\";\n    this.paletteCanvas.height = this.paletteWrapper.offsetHeight - this.paletteHeader.offsetHeight;\n    this.paletteCanvas.width = this.paletteWrapper.offsetWidth;\n    this.paletteCanvas.style.height = this.paletteCanvas.height + \"px\";\n    this.paletteCanvas.style.width = this.paletteCanvas.width + \"px\";\n    ref1 = editorBindings.resize_palette;\n    for (j = 0, len = ref1.length; j < len; j++) {\n      binding = ref1[j];\n      binding.call(this);\n    }\n    this.paletteCtx.setTransform(1, 0, 0, 1, -this.scrollOffsets.palette.x, -this.scrollOffsets.palette.y);\n    this.paletteHighlightCtx.setTransform(1, 0, 0, 1, -this.scrollOffsets.palette.x, -this.scrollOffsets.palette.y);\n    return this.rebuildPalette();\n  };\n\n  Editor.prototype.resize = function() {\n    if (this.currentlyUsingBlocks) {\n      return this.resizeBlockMode();\n    } else {\n      return this.resizeTextMode();\n    }\n  };\n\n  return Editor;\n\n})();\n\nEditor.prototype.clearMain = function(opts) {\n  if (opts.boundingRectangle != null) {\n    return this.mainCtx.clearRect(opts.boundingRectangle.x, opts.boundingRectangle.y, opts.boundingRectangle.width, opts.boundingRectangle.height);\n  } else {\n    return this.mainCtx.clearRect(this.scrollOffsets.main.x, this.scrollOffsets.main.y, this.mainCanvas.width, this.mainCanvas.height);\n  }\n};\n\nEditor.prototype.setTopNubbyStyle = function(height, color) {\n  if (height == null) {\n    height = 10;\n  }\n  if (color == null) {\n    color = '#EBEBEB';\n  }\n  this.nubbyHeight = Math.max(0, height);\n  this.nubbyColor = color;\n  this.topNubbyPath = new this.draw.Path();\n  if (height >= 0) {\n    this.topNubbyPath.bevel = true;\n    this.topNubbyPath.push(new this.draw.Point(this.mainCanvas.width, -5));\n    this.topNubbyPath.push(new this.draw.Point(this.mainCanvas.width, height));\n    this.topNubbyPath.push(new this.draw.Point(this.view.opts.tabOffset + this.view.opts.tabWidth, height));\n    this.topNubbyPath.push(new this.draw.Point(this.view.opts.tabOffset + this.view.opts.tabWidth * (1 - this.view.opts.tabSideWidth), this.view.opts.tabHeight + height));\n    this.topNubbyPath.push(new this.draw.Point(this.view.opts.tabOffset + this.view.opts.tabWidth * this.view.opts.tabSideWidth, this.view.opts.tabHeight + height));\n    this.topNubbyPath.push(new this.draw.Point(this.view.opts.tabOffset, height));\n    this.topNubbyPath.push(new this.draw.Point(-5, height));\n    this.topNubbyPath.push(new this.draw.Point(-5, -5));\n    this.topNubbyPath.style.fillColor = color;\n  }\n  return this.redrawMain();\n};\n\nEditor.prototype.resizeNubby = function() {\n  return this.setTopNubbyStyle(this.nubbyHeight, this.nubbyColor);\n};\n\nEditor.prototype.drawFloatingBlock = function(record, startWidth, endWidth, rect, opts) {\n  var blockView, bottomTextPosition, oldBounds, path, rectangle, ref1, ref2, startHeight;\n  blockView = this.view.getViewNodeFor(record.block);\n  blockView.layout(record.position.x, record.position.y);\n  rectangle = new this.view.draw.Rectangle();\n  rectangle.copy(blockView.totalBounds);\n  rectangle.x -= GRAY_BLOCK_MARGIN;\n  rectangle.y -= GRAY_BLOCK_MARGIN;\n  rectangle.width += 2 * GRAY_BLOCK_MARGIN;\n  rectangle.height += 2 * GRAY_BLOCK_MARGIN;\n  bottomTextPosition = blockView.totalBounds.bottom() - blockView.distanceToBase[blockView.lineLength - 1].below - this.fontSize;\n  if ((blockView.totalBounds.width - blockView.bounds[blockView.bounds.length - 1].width) < endWidth) {\n    if (blockView.lineLength > 1) {\n      rectangle.height += this.fontSize;\n      bottomTextPosition = rectangle.bottom() - this.fontSize - 5;\n    } else {\n      rectangle.width += endWidth;\n    }\n  }\n  if (!rectangle.equals(record.grayBox)) {\n    record.grayBox = rectangle;\n    oldBounds = (ref1 = (ref2 = record.grayBoxPath) != null ? typeof ref2.bounds === \"function\" ? ref2.bounds() : void 0 : void 0) != null ? ref1 : new this.view.draw.NoRectangle();\n    startHeight = blockView.bounds[0].height + 10;\n    record.grayBoxPath = path = new this.view.draw.Path();\n    path.push(new this.view.draw.Point(rectangle.right() - 5, rectangle.y));\n    path.push(new this.view.draw.Point(rectangle.right(), rectangle.y + 5));\n    path.push(new this.view.draw.Point(rectangle.right(), rectangle.bottom() - 5));\n    path.push(new this.view.draw.Point(rectangle.right() - 5, rectangle.bottom()));\n    if (blockView.lineLength > 1) {\n      path.push(new this.view.draw.Point(rectangle.x + 5, rectangle.bottom()));\n      path.push(new this.view.draw.Point(rectangle.x, rectangle.bottom() - 5));\n    } else {\n      path.push(new this.view.draw.Point(rectangle.x, rectangle.bottom()));\n    }\n    path.push(new this.view.draw.Point(rectangle.x, rectangle.y + startHeight));\n    path.push(new this.view.draw.Point(rectangle.x - startWidth + 5, rectangle.y + startHeight));\n    path.push(new this.view.draw.Point(rectangle.x - startWidth, rectangle.y + startHeight - 5));\n    path.push(new this.view.draw.Point(rectangle.x - startWidth, rectangle.y + 5));\n    path.push(new this.view.draw.Point(rectangle.x - startWidth + 5, rectangle.y));\n    path.push(new this.view.draw.Point(rectangle.x, rectangle.y));\n    path.bevel = false;\n    path.noclip = true;\n    path.dotted = true;\n    path.style = {\n      fillColor: GRAY_BLOCK_COLOR,\n      strokeColor: GRAY_BLOCK_BORDER,\n      lineWidth: 4\n    };\n    if (opts.boundingRectangle != null) {\n      opts.boundingRectangle.unite(path.bounds());\n      opts.boundingRectangle.unite(oldBounds);\n      this.mainCtx.restore();\n      return this.redrawMain(opts);\n    }\n  }\n  this.mainCtx.globalAlpha *= 0.8;\n  record.grayBoxPath.draw(this.mainCtx);\n  this.mainCtx.fillStyle = '#000';\n  this.mainCtx.fillText(this.mode.startComment, blockView.totalBounds.x - startWidth, blockView.totalBounds.y + blockView.distanceToBase[0].above - this.fontSize);\n  this.mainCtx.fillText(this.mode.endComment, record.grayBox.right() - endWidth - 5, bottomTextPosition);\n  this.mainCtx.globalAlpha /= 0.8;\n  return blockView.draw(this.mainCtx, rect, {\n    grayscale: false,\n    selected: false,\n    noText: false\n  });\n};\n\nEditor.prototype.redrawMain = function(opts) {\n  var binding, endWidth, j, k, layoutResult, len, len1, oldScroll, options, record, rect, ref1, ref2, ref3, ref4, startWidth;\n  if (opts == null) {\n    opts = {};\n  }\n  if (!this.currentlyAnimating_suprressRedraw) {\n    this.draw.setGlobalFontSize(this.fontSize);\n    this.draw.setCtx(this.mainCtx);\n    this.clearMain(opts);\n    this.topNubbyPath.draw(this.mainCtx);\n    if (opts.boundingRectangle != null) {\n      this.mainCtx.save();\n      opts.boundingRectangle.clip(this.mainCtx);\n    }\n    rect = (ref1 = opts.boundingRectangle) != null ? ref1 : new this.draw.Rectangle(this.scrollOffsets.main.x, this.scrollOffsets.main.y, this.mainCanvas.width, this.mainCanvas.height);\n    options = {\n      grayscale: false,\n      selected: false,\n      noText: (ref2 = opts.noText) != null ? ref2 : false\n    };\n    layoutResult = this.view.getViewNodeFor(this.tree).layout(0, this.nubbyHeight);\n    this.view.getViewNodeFor(this.tree).draw(this.mainCtx, rect, options);\n    startWidth = this.mainCtx.measureText(this.mode.startComment).width;\n    endWidth = this.mainCtx.measureText(this.mode.endComment).width;\n    ref3 = this.floatingBlocks;\n    for (j = 0, len = ref3.length; j < len; j++) {\n      record = ref3[j];\n      this.drawFloatingBlock(record, startWidth, endWidth, rect, opts);\n    }\n    if (opts.boundingRectangle != null) {\n      this.mainCtx.restore();\n    }\n    this.redrawCursors();\n    this.redrawHighlights();\n    this.resizeGutter();\n    ref4 = editorBindings.redraw_main;\n    for (k = 0, len1 = ref4.length; k < len1; k++) {\n      binding = ref4[k];\n      binding.call(this, layoutResult);\n    }\n    if (this.changeEventVersion !== this.tree.version) {\n      this.changeEventVersion = this.tree.version;\n      this.suppressAceChangeEvent = true;\n      oldScroll = this.aceEditor.session.getScrollTop();\n      this.setAceValue(this.getValue());\n      this.suppressAceChangeEvent = false;\n      this.aceEditor.session.setScrollTop(oldScroll);\n      this.fireEvent('change', []);\n    }\n    return null;\n  }\n};\n\nEditor.prototype.redrawHighlights = function() {\n  var id, info, line, path, ref1, ref2, ref3;\n  this.clearHighlightCanvas();\n  ref1 = this.markedLines;\n  for (line in ref1) {\n    info = ref1[line];\n    if (this.inDisplay(info.model)) {\n      path = this.getHighlightPath(info.model, info.style);\n      path.draw(this.highlightCtx);\n    } else {\n      delete this.markedLines[line];\n    }\n  }\n  ref2 = this.markedBlocks;\n  for (id in ref2) {\n    info = ref2[id];\n    if (this.inDisplay(info.model)) {\n      path = this.getHighlightPath(info.model, info.style);\n      path.draw(this.highlightCtx);\n    } else {\n      delete this.markedLines[id];\n    }\n  }\n  ref3 = this.extraMarks;\n  for (id in ref3) {\n    info = ref3[id];\n    if (this.inDisplay(info.model)) {\n      path = this.getHighlightPath(info.model, info.style);\n      path.draw(this.highlightCtx);\n    } else {\n      delete this.extraMarks[id];\n    }\n  }\n  if ((this.draggingBlock != null) && this.inDisplay(this.draggingBlock)) {\n    this.view.getViewNodeFor(this.draggingBlock).draw(this.highlightCtx, new this.draw.Rectangle(this.scrollOffsets.main.x, this.scrollOffsets.main.y, this.mainCanvas.width, this.mainCanvas.height), {\n      grayscale: true\n    });\n    this.maskFloatingPaths(this.draggingBlock.getDocument());\n  }\n  return this.redrawLassoHighlight();\n};\n\nEditor.prototype.clearCursorCanvas = function() {\n  return this.cursorCtx.clearRect(this.scrollOffsets.main.x, this.scrollOffsets.main.y, this.cursorCanvas.width, this.cursorCanvas.height);\n};\n\nEditor.prototype.redrawCursors = function() {\n  this.clearCursorCanvas();\n  if (this.cursorAtSocket()) {\n    return this.redrawTextHighlights();\n  } else if (this.lassoSelection == null) {\n    return this.drawCursor();\n  }\n};\n\nEditor.prototype.drawCursor = function() {\n  return this.strokeCursor(this.determineCursorPosition());\n};\n\nEditor.prototype.clearPalette = function() {\n  return this.paletteCtx.clearRect(this.scrollOffsets.palette.x, this.scrollOffsets.palette.y, this.paletteCanvas.width, this.paletteCanvas.height);\n};\n\nEditor.prototype.clearPaletteHighlightCanvas = function() {\n  return this.paletteHighlightCtx.clearRect(this.scrollOffsets.palette.x, this.scrollOffsets.palette.y, this.paletteHighlightCanvas.width, this.paletteHighlightCanvas.height);\n};\n\nEditor.prototype.redrawPalette = function() {\n  var binding, boundingRect, entry, j, k, lastBottomEdge, len, len1, paletteBlockView, ref1, ref2, results;\n  this.clearPalette();\n  lastBottomEdge = PALETTE_TOP_MARGIN;\n  boundingRect = new this.draw.Rectangle(this.scrollOffsets.palette.x, this.scrollOffsets.palette.y, this.paletteCanvas.width, this.paletteCanvas.height);\n  ref1 = this.currentPaletteBlocks;\n  for (j = 0, len = ref1.length; j < len; j++) {\n    entry = ref1[j];\n    paletteBlockView = this.paletteView.getViewNodeFor(entry.block);\n    paletteBlockView.layout(PALETTE_LEFT_MARGIN, lastBottomEdge);\n    paletteBlockView.draw(this.paletteCtx, boundingRect);\n    lastBottomEdge = paletteBlockView.getBounds().bottom() + PALETTE_MARGIN;\n  }\n  ref2 = editorBindings.redraw_palette;\n  results = [];\n  for (k = 0, len1 = ref2.length; k < len1; k++) {\n    binding = ref2[k];\n    results.push(binding.call(this));\n  }\n  return results;\n};\n\nEditor.prototype.rebuildPalette = function() {\n  var binding, j, len, ref1, results;\n  this.redrawPalette();\n  ref1 = editorBindings.rebuild_palette;\n  results = [];\n  for (j = 0, len = ref1.length; j < len; j++) {\n    binding = ref1[j];\n    results.push(binding.call(this));\n  }\n  return results;\n};\n\nEditor.prototype.absoluteOffset = function(el) {\n  var point;\n  point = new this.draw.Point(el.offsetLeft, el.offsetTop);\n  el = el.offsetParent;\n  while (!(el === document.body || (el == null))) {\n    point.x += el.offsetLeft - el.scrollLeft;\n    point.y += el.offsetTop - el.scrollTop;\n    el = el.offsetParent;\n  }\n  return point;\n};\n\nEditor.prototype.trackerPointToMain = function(point) {\n  var gbr;\n  if (this.mainCanvas.offsetParent == null) {\n    return new this.draw.Point(NaN, NaN);\n  }\n  gbr = this.mainCanvas.getBoundingClientRect();\n  return new this.draw.Point(point.x - gbr.left + this.scrollOffsets.main.x, point.y - gbr.top + this.scrollOffsets.main.y);\n};\n\nEditor.prototype.trackerPointToPalette = function(point) {\n  var gbr;\n  if (this.paletteCanvas.offsetParent == null) {\n    return new this.draw.Point(NaN, NaN);\n  }\n  gbr = this.paletteCanvas.getBoundingClientRect();\n  return new this.draw.Point(point.x - gbr.left + this.scrollOffsets.palette.x, point.y - gbr.top + this.scrollOffsets.palette.y);\n};\n\nEditor.prototype.trackerPointIsInElement = function(point, element) {\n  var gbr;\n  if (this.readOnly) {\n    return false;\n  }\n  if (element.offsetParent == null) {\n    return false;\n  }\n  gbr = element.getBoundingClientRect();\n  return point.x >= gbr.left && point.x < gbr.right && point.y >= gbr.top && point.y < gbr.bottom;\n};\n\nEditor.prototype.trackerPointIsInMain = function(point) {\n  return this.trackerPointIsInElement(point, this.mainCanvas);\n};\n\nEditor.prototype.trackerPointIsInMainScroller = function(point) {\n  return this.trackerPointIsInElement(point, this.mainScroller);\n};\n\nEditor.prototype.trackerPointIsInGutter = function(point) {\n  return this.trackerPointIsInElement(point, this.gutter);\n};\n\nEditor.prototype.trackerPointIsInPalette = function(point) {\n  return this.trackerPointIsInElement(point, this.paletteCanvas);\n};\n\nEditor.prototype.trackerPointIsInAce = function(point) {\n  return this.trackerPointIsInElement(point, this.aceElement);\n};\n\nEditor.prototype.hitTest = function(point, block, view) {\n  var head, result, seek;\n  if (view == null) {\n    view = this.view;\n  }\n  if (this.readOnly) {\n    return null;\n  }\n  head = block.start;\n  seek = block.end;\n  result = null;\n  while (head !== seek) {\n    if (head.type === 'blockStart' && view.getViewNodeFor(head.container).path.contains(point)) {\n      result = head.container;\n      seek = head.container.end;\n    }\n    head = head.next;\n  }\n  return result;\n};\n\nhook('mousedown', 10, function() {\n  var x, y;\n  x = document.body.scrollLeft;\n  y = document.body.scrollTop;\n  this.dropletElement.focus();\n  return window.scrollTo(x, y);\n});\n\nEditor.prototype.removeBlankLines = function() {\n  var head, tail;\n  head = tail = this.tree.end.prev;\n  while ((head != null ? head.type : void 0) === 'newline') {\n    head = head.prev;\n  }\n  if (head.type === 'newline') {\n    return this.spliceOut(new model.List(head, tail));\n  }\n};\n\nhook('populate', 0, function() {\n  this.undoStack = [];\n  this.redoStack = [];\n  return this.changeEventVersion = 0;\n});\n\nhook('keydown', 0, function(event, state) {\n  if (event.which === Z_KEY && event.shiftKey && command_pressed(event)) {\n    return this.redo();\n  } else if (event.which === Z_KEY && command_pressed(event)) {\n    return this.undo();\n  } else if (event.which === Y_KEY && command_pressed(event)) {\n    return this.redo();\n  }\n});\n\nEditorState = (function() {\n  function EditorState(root, floats) {\n    this.root = root;\n    this.floats = floats;\n  }\n\n  EditorState.prototype.equals = function(other) {\n    var el, i, j, len, ref1;\n    if (!(this.root === other.root && this.floats.length === other.floats.length)) {\n      return false;\n    }\n    ref1 = this.floats;\n    for (i = j = 0, len = ref1.length; j < len; i = ++j) {\n      el = ref1[i];\n      if (!(el.position.equals(other.floats[i].position) && el.string === other.floats[i].string)) {\n        return false;\n      }\n    }\n    return true;\n  };\n\n  EditorState.prototype.toString = function() {\n    return JSON.stringify({\n      root: this.root,\n      floats: this.floats\n    });\n  };\n\n  return EditorState;\n\n})();\n\nEditor.prototype.getSerializedEditorState = function() {\n  return new EditorState(this.tree.stringify(), this.floatingBlocks.map(function(x) {\n    return {\n      position: x.position,\n      string: x.block.stringify()\n    };\n  }));\n};\n\nEditor.prototype.clearUndoStack = function() {\n  this.undoStack.length = 0;\n  return this.redoStack.length = 0;\n};\n\nEditor.prototype.undo = function() {\n  var currentValue, operation;\n  this.setCursor(this.cursor, (function(x) {\n    return x.type !== 'socketStart';\n  }));\n  currentValue = this.getSerializedEditorState();\n  while (!(this.undoStack.length === 0 || (this.undoStack[this.undoStack.length - 1] instanceof CapturePoint && !this.getSerializedEditorState().equals(currentValue)))) {\n    operation = this.popUndo();\n    if (operation instanceof FloatingOperation) {\n      this.performFloatingOperation(operation, 'backward');\n    } else {\n      if (!(operation instanceof CapturePoint)) {\n        this.getDocument(operation.document).perform(operation.operation, 'backward', this.getPreserves(operation.document));\n      }\n    }\n  }\n  if (this.undoStack[this.undoStack.length - 1] instanceof CapturePoint) {\n    this.rememberedSockets = this.undoStack[this.undoStack.length - 1].rememberedSockets.map(function(x) {\n      return x.clone();\n    });\n  }\n  this.popUndo();\n  this.correctCursor();\n  this.redrawMain();\n};\n\nEditor.prototype.pushUndo = function(operation) {\n  this.redoStack.length = 0;\n  return this.undoStack.push(operation);\n};\n\nEditor.prototype.popUndo = function() {\n  var operation;\n  operation = this.undoStack.pop();\n  if (operation != null) {\n    this.redoStack.push(operation);\n  }\n  return operation;\n};\n\nEditor.prototype.popRedo = function() {\n  var operation;\n  operation = this.redoStack.pop();\n  if (operation != null) {\n    this.undoStack.push(operation);\n  }\n  return operation;\n};\n\nEditor.prototype.redo = function() {\n  var currentValue, operation;\n  currentValue = this.getSerializedEditorState();\n  while (!(this.redoStack.length === 0 || (this.redoStack[this.redoStack.length - 1] instanceof CapturePoint && !this.getSerializedEditorState().equals(currentValue)))) {\n    operation = this.popRedo();\n    if (operation instanceof FloatingOperation) {\n      this.performFloatingOperation(operation, 'forward');\n    } else {\n      if (!(operation instanceof CapturePoint)) {\n        this.getDocument(operation.document).perform(operation.operation, 'forward', this.getPreserves(operation.document));\n      }\n    }\n  }\n  if (this.undoStack[this.undoStack.length - 1] instanceof CapturePoint) {\n    this.rememberedSockets = this.undoStack[this.undoStack.length - 1].rememberedSockets.map(function(x) {\n      return x.clone();\n    });\n  }\n  this.popRedo();\n  this.redrawMain();\n};\n\nEditor.prototype.undoCapture = function() {\n  return this.pushUndo(new CapturePoint(this.rememberedSockets));\n};\n\nCapturePoint = (function() {\n  function CapturePoint(rememberedSockets) {\n    this.rememberedSockets = rememberedSockets.map(function(x) {\n      return x.clone();\n    });\n  }\n\n  return CapturePoint;\n\n})();\n\nhook('populate', 7, function() {\n  return this.rememberedSockets = [];\n});\n\nEditor.prototype.getPreserves = function(dropletDocument) {\n  var array;\n  if (dropletDocument instanceof model.Document) {\n    dropletDocument = this.documentIndex(dropletDocument);\n  }\n  array = [this.cursor];\n  array = array.concat(this.rememberedSockets.map(function(x) {\n    return x.socket;\n  }));\n  return array.filter(function(location) {\n    return location.document === dropletDocument;\n  }).map(function(location) {\n    return location.location;\n  });\n};\n\nEditor.prototype.spliceOut = function(node, container) {\n  var dropletDocument, i, j, k, len, len1, operation, parent, record, ref1, ref2, socket;\n  if (container == null) {\n    container = null;\n  }\n  if (!(node instanceof model.List)) {\n    node = new model.List(node, node);\n  }\n  operation = null;\n  dropletDocument = node.getDocument();\n  parent = node.parent;\n  if (dropletDocument != null) {\n    operation = node.getDocument().remove(node, this.getPreserves(dropletDocument));\n    this.pushUndo({\n      operation: operation,\n      document: this.getDocuments().indexOf(dropletDocument)\n    });\n    if ((parent != null ? parent.type : void 0) === 'socket' && node.start.type === 'blockStart') {\n      ref1 = this.rememberedSockets;\n      for (i = j = 0, len = ref1.length; j < len; i = ++j) {\n        socket = ref1[i];\n        if (this.fromCrossDocumentLocation(socket.socket) === parent) {\n          this.rememberedSockets.splice(i, 0);\n          this.populateSocket(parent, socket.text);\n          break;\n        }\n      }\n    }\n    if (dropletDocument.start.next === dropletDocument.end) {\n      ref2 = this.floatingBlocks;\n      for (i = k = 0, len1 = ref2.length; k < len1; i = ++k) {\n        record = ref2[i];\n        if (record.block === dropletDocument) {\n          this.pushUndo(new FloatingOperation(i, record.block, record.position, 'delete'));\n          if (this.cursor.document === i + 1) {\n            this.setCursor(this.tree.start);\n          }\n          if (this.cursor.document > i + 1) {\n            this.cursor.document -= 1;\n          }\n          this.floatingBlocks.splice(i, 1);\n          break;\n        }\n      }\n    }\n  } else if (container != null) {\n    container.remove(node);\n  }\n  this.prepareNode(node, null);\n  this.correctCursor();\n  return operation;\n};\n\nEditor.prototype.spliceIn = function(node, location) {\n  var container, dropletDocument, operation, ref1;\n  container = (ref1 = location.container) != null ? ref1 : location.parent;\n  if (container.type === 'block') {\n    container = container.parent;\n  } else if (container.type === 'socket' && container.start.next !== container.end) {\n    if (this.documentIndex(container) !== -1) {\n      this.rememberedSockets.push(new RememberedSocketRecord(this.toCrossDocumentLocation(container), container.textContent()));\n    }\n    this.spliceOut(new model.List(container.start.next, container.end.prev), container);\n  }\n  dropletDocument = location.getDocument();\n  this.prepareNode(node, container);\n  if (dropletDocument != null) {\n    operation = dropletDocument.insert(location, node, this.getPreserves(dropletDocument));\n    this.pushUndo({\n      operation: operation,\n      document: this.getDocuments().indexOf(dropletDocument)\n    });\n    this.correctCursor();\n    return operation;\n  } else {\n    container.insert(location, node);\n    return null;\n  }\n};\n\nRememberedSocketRecord = (function() {\n  function RememberedSocketRecord(socket1, text1) {\n    this.socket = socket1;\n    this.text = text1;\n  }\n\n  RememberedSocketRecord.prototype.clone = function() {\n    return new RememberedSocketRecord(this.socket.clone(), this.text);\n  };\n\n  return RememberedSocketRecord;\n\n})();\n\nEditor.prototype.replace = function(before, after, updates) {\n  var dropletDocument, operation;\n  if (updates == null) {\n    updates = [];\n  }\n  dropletDocument = before.start.getDocument();\n  if (dropletDocument != null) {\n    operation = dropletDocument.replace(before, after, updates.concat(this.getPreserves(dropletDocument)));\n    this.pushUndo({\n      operation: operation,\n      document: this.documentIndex(dropletDocument)\n    });\n    this.correctCursor();\n    return operation;\n  } else {\n    return null;\n  }\n};\n\nEditor.prototype.adjustPosToLineStart = function(pos) {\n  var line;\n  line = this.aceEditor.session.getLine(pos.row);\n  if (pos.row === this.aceEditor.session.getLength() - 1) {\n    pos.column = pos.column >= line.length / 2 ? line.length : 0;\n  } else {\n    pos.column = 0;\n  }\n  return pos;\n};\n\nEditor.prototype.correctCursor = function() {\n  var cursor;\n  cursor = this.fromCrossDocumentLocation(this.cursor);\n  if (!this.validCursorPosition(cursor)) {\n    while (!((cursor == null) || (this.validCursorPosition(cursor) && cursor.type !== 'socketStart'))) {\n      cursor = cursor.next;\n    }\n    if (cursor == null) {\n      cursor = this.fromCrossDocumentLocation(this.cursor);\n    }\n    while (!((cursor == null) || (this.validCursorPosition(cursor) && cursor.type !== 'socketStart'))) {\n      cursor = cursor.prev;\n    }\n    return this.cursor = this.toCrossDocumentLocation(cursor);\n  }\n};\n\nEditor.prototype.prepareNode = function(node, context) {\n  var leading, ref1, ref2, trailing;\n  if (node instanceof model.Container) {\n    leading = node.getLeadingText();\n    if (node.start.next === node.end.prev) {\n      trailing = null;\n    } else {\n      trailing = node.getTrailingText();\n    }\n    ref2 = this.mode.parens(leading, trailing, node.getReader(), (ref1 = context != null ? typeof context.getReader === \"function\" ? context.getReader() : void 0 : void 0) != null ? ref1 : null), leading = ref2[0], trailing = ref2[1];\n    node.setLeadingText(leading);\n    return node.setTrailingText(trailing);\n  }\n};\n\nhook('populate', 0, function() {\n  this.clickedPoint = null;\n  this.clickedBlock = null;\n  this.clickedBlockPaletteEntry = null;\n  this.draggingBlock = null;\n  this.draggingOffset = null;\n  this.lastHighlight = null;\n  this.dragCanvas = document.createElement('canvas');\n  this.dragCanvas.className = 'droplet-drag-canvas';\n  this.dragCanvas.style.left = '-9999px';\n  this.dragCanvas.style.top = '-9999px';\n  this.dragCtx = this.dragCanvas.getContext('2d');\n  this.highlightCanvas = document.createElement('canvas');\n  this.highlightCanvas.className = 'droplet-highlight-canvas';\n  this.highlightCtx = this.highlightCanvas.getContext('2d');\n  this.wrapperElement.appendChild(this.dragCanvas);\n  return this.dropletElement.appendChild(this.highlightCanvas);\n});\n\nEditor.prototype.clearHighlightCanvas = function() {\n  return this.highlightCtx.clearRect(this.scrollOffsets.main.x, this.scrollOffsets.main.y, this.highlightCanvas.width, this.highlightCanvas.height);\n};\n\nEditor.prototype.clearDrag = function() {\n  return this.dragCtx.clearRect(0, 0, this.dragCanvas.width, this.dragCanvas.height);\n};\n\nEditor.prototype.resizeDragCanvas = function() {\n  this.dragCanvas.width = 0;\n  this.dragCanvas.height = 0;\n  this.highlightCanvas.width = this.dropletElement.offsetWidth - this.gutter.offsetWidth;\n  this.highlightCanvas.style.width = this.highlightCanvas.width + \"px\";\n  this.highlightCanvas.height = this.dropletElement.offsetHeight;\n  this.highlightCanvas.style.height = this.highlightCanvas.height + \"px\";\n  return this.highlightCanvas.style.left = this.mainCanvas.offsetLeft + \"px\";\n};\n\nEditor.prototype.getDocuments = function() {\n  var documents, el, i, j, len, ref1;\n  documents = [this.tree];\n  ref1 = this.floatingBlocks;\n  for (i = j = 0, len = ref1.length; j < len; i = ++j) {\n    el = ref1[i];\n    documents.push(el.block);\n  }\n  return documents;\n};\n\nEditor.prototype.getDocument = function(n) {\n  if (n === 0) {\n    return this.tree;\n  } else {\n    return this.floatingBlocks[n - 1].block;\n  }\n};\n\nEditor.prototype.documentIndex = function(block) {\n  return this.getDocuments().indexOf(block.getDocument());\n};\n\nEditor.prototype.fromCrossDocumentLocation = function(location) {\n  return this.getDocument(location.document).getFromLocation(location.location);\n};\n\nEditor.prototype.toCrossDocumentLocation = function(block) {\n  return new CrossDocumentLocation(this.documentIndex(block), block.getLocation());\n};\n\nhook('mousedown', 1, function(point, event, state) {\n  var box, dropletDocument, hitTestResult, i, j, k, len, line, mainPoint, node, record, ref1, ref2;\n  if (state.consumedHitTest) {\n    return;\n  }\n  if (!this.trackerPointIsInMain(point)) {\n    return;\n  }\n  mainPoint = this.trackerPointToMain(point);\n  ref1 = this.getDocuments();\n  for (i = j = ref1.length - 1; j >= 0; i = j += -1) {\n    dropletDocument = ref1[i];\n    if (this.handleTextInputClick(mainPoint, dropletDocument)) {\n      state.consumedHitTest = true;\n      return;\n    } else if (this.cursor.document === i && this.cursorAtSocket()) {\n      this.setCursor(this.cursor, (function(token) {\n        return token.type !== 'socketStart';\n      }));\n    }\n    hitTestResult = this.hitTest(mainPoint, dropletDocument);\n    if (this.debugging && event.shiftKey) {\n      line = null;\n      node = this.view.getViewNodeFor(hitTestResult);\n      ref2 = node.bounds;\n      for (i = k = 0, len = ref2.length; k < len; i = ++k) {\n        box = ref2[i];\n        if (box.contains(mainPoint)) {\n          line = i;\n          break;\n        }\n      }\n      this.dumpNodeForDebug(hitTestResult, line);\n    }\n    if (hitTestResult != null) {\n      this.clickedBlock = hitTestResult;\n      this.clickedBlockPaletteEntry = null;\n      this.setCursor(this.clickedBlock.start.next);\n      this.clickedPoint = point;\n      state.consumedHitTest = true;\n      return;\n    } else if (i > 0) {\n      record = this.floatingBlocks[i - 1];\n      if ((record.grayBoxPath != null) && record.grayBoxPath.contains(this.trackerPointToMain(point))) {\n        this.clickedBlock = new model.List(record.block.start.next, record.block.end.prev);\n        this.clickedPoint = point;\n        this.view.getViewNodeFor(this.clickedBlock).absorbCache();\n        state.consumedHitTest = true;\n        this.redrawMain();\n        return;\n      }\n    }\n  }\n});\n\nhook('mousedown', 4, function(point, event, state) {\n  var hitTestBlock, hitTestResult, line, mainPoint, str;\n  if (state.consumedHitTest) {\n    return;\n  }\n  if (!this.trackerPointIsInMain(point)) {\n    return;\n  }\n  mainPoint = this.trackerPointToMain(point);\n  if ((this.lassoSelection != null) && (this.hitTest(mainPoint, this.lassoSelection) != null)) {\n    return;\n  }\n  hitTestResult = this.hitTest(mainPoint, this.tree);\n  if (hitTestResult != null) {\n    hitTestBlock = this.view.getViewNodeFor(hitTestResult);\n    str = hitTestResult.stringifyInPlace();\n    if ((hitTestBlock.addButtonRect != null) && hitTestBlock.addButtonRect.contains(mainPoint)) {\n      line = this.mode.handleButton(str, 'add-button', hitTestResult.getReader());\n      if ((line != null ? line.length : void 0) >= 0) {\n        this.populateBlock(hitTestResult, line);\n        this.redrawMain();\n      }\n      return state.consumedHitTest = true;\n    } else if ((hitTestBlock.subtractButtonRect != null) && hitTestBlock.subtractButtonRect.contains(mainPoint)) {\n      line = this.mode.handleButton(str, 'subtract-button', hitTestResult.getReader());\n      if ((line != null ? line.length : void 0) >= 0) {\n        this.populateBlock(hitTestResult, line);\n        this.redrawMain();\n      }\n      return state.consumedHitTest = true;\n    }\n  }\n});\n\nhook('mouseup', 0, function(point, event, state) {\n  if (this.clickedBlock != null) {\n    this.clickedBlock = null;\n    return this.clickedPoint = null;\n  }\n});\n\nEditor.prototype.drawDraggingBlock = function() {\n  var draggingBlockView;\n  this.dragView.clearCache();\n  draggingBlockView = this.dragView.getViewNodeFor(this.draggingBlock);\n  draggingBlockView.layout(1, 1);\n  this.dragCanvas.width = Math.min(draggingBlockView.totalBounds.width + 10, window.screen.width);\n  this.dragCanvas.height = Math.min(draggingBlockView.totalBounds.height + 10, window.screen.height);\n  draggingBlockView.drawShadow(this.dragCtx, 5, 5);\n  return draggingBlockView.draw(this.dragCtx, new this.draw.Rectangle(0, 0, this.dragCanvas.width, this.dragCanvas.height));\n};\n\nEditor.prototype.wouldDelete = function(position) {\n  var mainPoint, palettePoint, ref1, ref2, ref3, ref4;\n  mainPoint = this.trackerPointToMain(position);\n  palettePoint = this.trackerPointToPalette(position);\n  return !this.lastHighlight && !((this.mainCanvas.width + this.scrollOffsets.main.x > (ref1 = mainPoint.x) && ref1 > this.scrollOffsets.main.x) && (this.mainCanvas.height + this.scrollOffsets.main.y > (ref2 = mainPoint.y) && ref2 > this.scrollOffsets.main.y)) || ((this.paletteCanvas.width + this.scrollOffsets.palette.x > (ref3 = palettePoint.x) && ref3 > this.scrollOffsets.palette.x) && (this.paletteCanvas.height + this.scrollOffsets.palette.y > (ref4 = palettePoint.y) && ref4 > this.scrollOffsets.palette.y));\n};\n\nhook('mousemove', 1, function(point, event, state) {\n  var acceptLevel, allowed, bound, dropPoint, dropletDocument, expansion, head, i, j, k, l, len, len1, line, mainPoint, position, record, ref1, ref2, ref3, viewNode;\n  if (!state.capturedPickup && (this.clickedBlock != null) && point.from(this.clickedPoint).magnitude() > MIN_DRAG_DISTANCE) {\n    this.draggingBlock = this.clickedBlock;\n    this.dragReplacing = false;\n    if (this.clickedBlockPaletteEntry) {\n      this.draggingOffset = this.paletteView.getViewNodeFor(this.draggingBlock).bounds[0].upperLeftCorner().from(this.trackerPointToPalette(this.clickedPoint));\n      expansion = this.clickedBlockPaletteEntry.expansion;\n      if ('function' === typeof expansion) {\n        expansion = expansion();\n      }\n      if (expansion) {\n        expansion = parseBlock(this.mode, expansion);\n      }\n      this.draggingBlock = (expansion || this.draggingBlock).clone();\n      if ('function' === typeof this.clickedBlockPaletteEntry.expansion) {\n        if (indexOf.call(this.draggingBlock.classes, 'mostly-value') >= 0) {\n          this.draggingBlock.classes.push('any-drop');\n        }\n        this.draggingBlock.lastExpansionText = expansion;\n        this.draggingBlock.expansion = this.clickedBlockPaletteEntry.expansion;\n      }\n    } else {\n      mainPoint = this.trackerPointToMain(this.clickedPoint);\n      viewNode = this.view.getViewNodeFor(this.draggingBlock);\n      this.draggingOffset = null;\n      ref1 = viewNode.bounds;\n      for (line = j = 0, len = ref1.length; j < len; line = ++j) {\n        bound = ref1[line];\n        if (bound.contains(mainPoint)) {\n          this.draggingOffset = bound.upperLeftCorner().from(mainPoint);\n          this.draggingOffset.y += viewNode.bounds[0].y - bound.y;\n          break;\n        }\n      }\n      if (this.draggingOffset == null) {\n        this.draggingOffset = viewNode.bounds[0].upperLeftCorner().from(mainPoint);\n      }\n    }\n    this.drawDraggingBlock();\n    position = new this.draw.Point(point.x + this.draggingOffset.x, point.y + this.draggingOffset.y);\n    this.dropPointQuadTree = QUAD.init({\n      x: this.scrollOffsets.main.x,\n      y: this.scrollOffsets.main.y,\n      w: this.mainCanvas.width,\n      h: this.mainCanvas.height\n    });\n    ref2 = this.getDocuments();\n    for (k = 0, len1 = ref2.length; k < len1; k++) {\n      dropletDocument = ref2[k];\n      head = dropletDocument.start;\n      if (this.draggingBlock.start.prev === head) {\n        head = head.next;\n      }\n      while (head !== dropletDocument.end) {\n        if (head === this.draggingBlock.start) {\n          head = this.draggingBlock.end;\n        }\n        if (head instanceof model.StartToken) {\n          acceptLevel = this.getAcceptLevel(this.draggingBlock, head.container);\n          if (acceptLevel !== helper.FORBID) {\n            dropPoint = this.view.getViewNodeFor(head.container).dropPoint;\n            if (dropPoint != null) {\n              allowed = true;\n              ref3 = this.floatingBlocks;\n              for (i = l = ref3.length - 1; l >= 0; i = l += -1) {\n                record = ref3[i];\n                if (record.block === dropletDocument) {\n                  break;\n                } else if (record.grayBoxPath.contains(dropPoint)) {\n                  allowed = false;\n                  break;\n                }\n              }\n              if (allowed) {\n                this.dropPointQuadTree.insert({\n                  x: dropPoint.x,\n                  y: dropPoint.y,\n                  w: 0,\n                  h: 0,\n                  acceptLevel: acceptLevel,\n                  _droplet_node: head.container\n                });\n              }\n            }\n          }\n        }\n        head = head.next;\n      }\n    }\n    this.dragCanvas.style.top = (position.y + getOffsetTop(this.dropletElement)) + \"px\";\n    this.dragCanvas.style.left = (position.x + getOffsetLeft(this.dropletElement)) + \"px\";\n    this.clickedPoint = this.clickedBlock = null;\n    this.clickedBlockPaletteEntry = null;\n    this.begunTrash = this.wouldDelete(position);\n    return this.redrawMain();\n  }\n});\n\nEditor.prototype.getClosestDroppableBlock = function(mainPoint, isDebugMode) {\n  var best, min, testPoints;\n  best = null;\n  min = Infinity;\n  if (!this.dropPointQuadTree) {\n    return null;\n  }\n  testPoints = this.dropPointQuadTree.retrieve({\n    x: mainPoint.x - MAX_DROP_DISTANCE,\n    y: mainPoint.y - MAX_DROP_DISTANCE,\n    w: MAX_DROP_DISTANCE * 2,\n    h: MAX_DROP_DISTANCE * 2\n  }, (function(_this) {\n    return function(point) {\n      var distance;\n      if (!((point.acceptLevel === helper.DISCOURAGE) && !isDebugMode)) {\n        distance = mainPoint.from(point);\n        distance.y *= 2;\n        distance = distance.magnitude();\n        if (distance < min && mainPoint.from(point).magnitude() < MAX_DROP_DISTANCE && (_this.view.getViewNodeFor(point._droplet_node).highlightArea != null)) {\n          best = point._droplet_node;\n          return min = distance;\n        }\n      }\n    };\n  })(this));\n  return best;\n};\n\nEditor.prototype.getClosestDroppableBlockFromPosition = function(position, isDebugMode) {\n  var mainPoint;\n  if (!this.currentlyUsingBlocks) {\n    return null;\n  }\n  mainPoint = this.trackerPointToMain(position);\n  return this.getClosestDroppableBlock(mainPoint, isDebugMode);\n};\n\nEditor.prototype.getAcceptLevel = function(drag, drop) {\n  var next;\n  if (drop.type === 'socket') {\n    if (drag.type === 'list' || indexOf.call(drop.classes, '__comment__') >= 0) {\n      return helper.FORBID;\n    } else {\n      return this.mode.drop(drag.getReader(), drop.getReader(), null, null);\n    }\n  } else if (drop.type === 'block') {\n    if (drop.parent.type === 'socket') {\n      return helper.FORBID;\n    } else {\n      next = drop.nextSibling();\n      return this.mode.drop(drag.getReader(), drop.parent.getReader(), drop.getReader(), next != null ? typeof next.getReader === \"function\" ? next.getReader() : void 0 : void 0);\n    }\n  } else {\n    next = drop.firstChild();\n    return this.mode.drop(drag.getReader(), drop.getReader(), drop.getReader(), next != null ? typeof next.getReader === \"function\" ? next.getReader() : void 0 : void 0);\n  }\n};\n\nhook('mousemove', 0, function(point, event, state) {\n  var dropBlock, expansionText, head, mainPoint, newBlock, palettePoint, pos, position, rect, ref1, ref2, ref3;\n  if (this.draggingBlock != null) {\n    position = new this.draw.Point(point.x + this.draggingOffset.x, point.y + this.draggingOffset.y);\n    if (this.draggingBlock.expansion) {\n      expansionText = this.draggingBlock.expansion(this.getClosestDroppableBlockFromPosition(position, event.shiftKey));\n      if (expansionText !== this.draggingBlock.lastExpansionText) {\n        newBlock = parseBlock(this.mode, expansionText);\n        newBlock.lastExpansionText = expansionText;\n        newBlock.expansion = this.draggingBlock.expansion;\n        if (indexOf.call(this.draggingBlock.classes, 'any-drop') >= 0) {\n          newBlock.classes.push('any-drop');\n        }\n        this.draggingBlock = newBlock;\n        this.drawDraggingBlock();\n      }\n    }\n    if (!this.currentlyUsingBlocks) {\n      if (this.trackerPointIsInAce(position)) {\n        pos = this.aceEditor.renderer.screenToTextCoordinates(position.x, position.y);\n        if (this.dropIntoAceAtLineStart) {\n          pos = this.adjustPosToLineStart(pos);\n        }\n        this.aceEditor.focus();\n        this.aceEditor.session.selection.moveToPosition(pos);\n      } else {\n        this.aceEditor.blur();\n      }\n    }\n    rect = this.wrapperElement.getBoundingClientRect();\n    this.dragCanvas.style.top = (position.y - rect.top) + \"px\";\n    this.dragCanvas.style.left = (position.x - rect.left) + \"px\";\n    mainPoint = this.trackerPointToMain(position);\n    head = this.tree.start.next;\n    while (((ref1 = head.type) === 'newline' || ref1 === 'cursor') || head.type === 'text' && head.value === '') {\n      head = head.next;\n    }\n    if (head === this.tree.end && this.floatingBlocks.length === 0 && (this.mainCanvas.width + this.scrollOffsets.main.x > (ref2 = mainPoint.x) && ref2 > this.scrollOffsets.main.x - this.gutter.offsetWidth) && (this.mainCanvas.height + this.scrollOffsets.main.y > (ref3 = mainPoint.y) && ref3 > this.scrollOffsets.main.y)) {\n      this.view.getViewNodeFor(this.tree).highlightArea.draw(this.highlightCtx);\n      this.lastHighlight = this.tree;\n    } else {\n      if (this.hitTest(mainPoint, this.draggingBlock)) {\n        dropBlock = null;\n        this.dragReplacing = true;\n      } else {\n        this.dragReplacing = false;\n        dropBlock = this.getClosestDroppableBlock(mainPoint, event.shiftKey);\n      }\n      if (dropBlock !== this.lastHighlight) {\n        this.redrawHighlights();\n        if (dropBlock != null) {\n          this.view.getViewNodeFor(dropBlock).highlightArea.draw(this.highlightCtx);\n          this.maskFloatingPaths(dropBlock.getDocument());\n        }\n        this.lastHighlight = dropBlock;\n      }\n    }\n    palettePoint = this.trackerPointToPalette(position);\n    if (this.wouldDelete(position)) {\n      if (this.begunTrash) {\n        return this.dragCanvas.style.opacity = 0.85;\n      } else {\n        return this.dragCanvas.style.opacity = 0.3;\n      }\n    } else {\n      this.dragCanvas.style.opacity = 0.85;\n      return this.begunTrash = false;\n    }\n  }\n});\n\nhook('mouseup', 0, function() {\n  clearTimeout(this.discourageDropTimeout);\n  return this.discourageDropTimeout = null;\n});\n\nhook('mouseup', 1, function(point, event, state) {\n  var el, firstChar, firstNonWhitespaceRegex, futureCursorLocation, hadTextToken, hasTextToken, i, indentation, j, leadingWhitespaceRegex, len, line, newBeginning, newIndex, nextLine, pos, position, prefix, prevLine, rememberedSocketOffsets, skipInitialIndent, suffix, text;\n  if (this.dragReplacing) {\n    this.endDrag();\n  }\n  if (this.draggingBlock != null) {\n    if (!this.currentlyUsingBlocks) {\n      position = new this.draw.Point(point.x + this.draggingOffset.x, point.y + this.draggingOffset.y);\n      if (this.trackerPointIsInAce(position)) {\n        leadingWhitespaceRegex = /^(\\s*)/;\n        pos = this.aceEditor.renderer.screenToTextCoordinates(position.x, position.y);\n        line = this.aceEditor.session.getLine(pos.row);\n        indentation = leadingWhitespaceRegex.exec(line)[0];\n        skipInitialIndent = true;\n        prefix = '';\n        suffix = '';\n        if (this.dropIntoAceAtLineStart) {\n          firstNonWhitespaceRegex = /\\S/;\n          firstChar = firstNonWhitespaceRegex.exec(line);\n          if (firstChar && firstChar[0] === '}') {\n            prevLine = this.aceEditor.session.getLine(pos.row - 1);\n            indentation = leadingWhitespaceRegex.exec(prevLine)[0];\n          }\n          pos = this.adjustPosToLineStart(pos);\n          skipInitialIndent = false;\n          if (pos.column === 0) {\n            suffix = '\\n';\n          } else {\n            prefix = '\\n';\n          }\n        } else if (indentation.length === line.length || indentation.length === pos.column) {\n          suffix = '\\n' + indentation;\n        } else if (pos.column === line.length) {\n          prefix = '\\n';\n          skipInitialIndent = false;\n          nextLine = this.aceEditor.session.getLine(pos.row + 1);\n          indentation = leadingWhitespaceRegex.exec(nextLine)[0];\n        }\n        this.prepareNode(this.draggingBlock, null);\n        text = this.draggingBlock.stringify(this.mode);\n        text = text.split('\\n').map((function(_this) {\n          return function(line, index) {\n            return (index === 0 && skipInitialIndent ? '' : indentation) + line;\n          };\n        })(this)).join('\\n');\n        text = prefix + text + suffix;\n        return this.aceEditor.onTextInput(text);\n      }\n    } else if (this.lastHighlight != null) {\n      this.undoCapture();\n      rememberedSocketOffsets = this.spliceRememberedSocketOffsets(this.draggingBlock);\n      hadTextToken = this.draggingBlock.start.next.type === 'text';\n      this.spliceOut(this.draggingBlock);\n      this.draggingBlock.expansion = null;\n      this.draggingBlock.lastExpansionText = null;\n      this.clearHighlightCanvas();\n      this.fireEvent('sound', [this.lastHighlight.type]);\n      switch (this.lastHighlight.type) {\n        case 'indent':\n        case 'socket':\n          this.spliceIn(this.draggingBlock, this.lastHighlight.start);\n          break;\n        case 'block':\n          this.spliceIn(this.draggingBlock, this.lastHighlight.end);\n          break;\n        default:\n          if (this.lastHighlight.type === 'document') {\n            this.spliceIn(this.draggingBlock, this.lastHighlight.start);\n          }\n      }\n      hasTextToken = this.draggingBlock.start.next.type === 'text';\n      if (hadTextToken && !hasTextToken) {\n        rememberedSocketOffsets.forEach(function(x) {\n          return x.offset -= 1;\n        });\n      } else if (hasTextToken && !hadTextToken) {\n        rememberedSocketOffsets.forEach(function(x) {\n          return x.offset += 1;\n        });\n      }\n      futureCursorLocation = this.toCrossDocumentLocation(this.draggingBlock.start);\n      if (this.lastHighlight.type === 'socket') {\n        this.reparse(this.draggingBlock.parent.parent);\n      }\n      this.endDrag();\n      if (futureCursorLocation != null) {\n        this.setCursor(futureCursorLocation);\n      }\n      newBeginning = futureCursorLocation.location.count;\n      newIndex = futureCursorLocation.document;\n      for (i = j = 0, len = rememberedSocketOffsets.length; j < len; i = ++j) {\n        el = rememberedSocketOffsets[i];\n        this.rememberedSockets.push(new RememberedSocketRecord(new CrossDocumentLocation(newIndex, new model.Location(el.offset + newBeginning, 'socket')), el.text));\n      }\n      return this.fireEvent('block-click');\n    }\n  }\n});\n\nEditor.prototype.spliceRememberedSocketOffsets = function(block) {\n  var blockBegin, el, i, j, len, newRememberedSockets, offsets, ref1;\n  if (block.getDocument() != null) {\n    blockBegin = block.start.getLocation().count;\n    offsets = [];\n    newRememberedSockets = [];\n    ref1 = this.rememberedSockets;\n    for (i = j = 0, len = ref1.length; j < len; i = ++j) {\n      el = ref1[i];\n      if (block.contains(this.fromCrossDocumentLocation(el.socket))) {\n        offsets.push({\n          offset: el.socket.location.count - blockBegin,\n          text: el.text\n        });\n      } else {\n        newRememberedSockets.push(el);\n      }\n    }\n    this.rememberedSockets = newRememberedSockets;\n    return offsets;\n  } else {\n    return [];\n  }\n};\n\nhook('populate', 0, function() {\n  return this.floatingBlocks = [];\n});\n\nFloatingBlockRecord = (function() {\n  function FloatingBlockRecord(block1, position1) {\n    this.block = block1;\n    this.position = position1;\n  }\n\n  return FloatingBlockRecord;\n\n})();\n\nEditor.prototype.inTree = function(block) {\n  var ref1;\n  return ((ref1 = block.container) != null ? ref1 : block).getDocument() === this.tree;\n};\n\nEditor.prototype.inDisplay = function(block) {\n  var ref1, ref2;\n  return ref1 = ((ref2 = block.container) != null ? ref2 : block).getDocument(), indexOf.call(this.getDocuments(), ref1) >= 0;\n};\n\nhook('mouseup', 0, function(point, event, state) {\n  var addBlockAsFloatingBlock, el, i, j, len, newDocument, palettePoint, ref1, ref2, ref3, ref4, rememberedSocketOffsets, removeBlock, renderPoint, trackPoint;\n  if ((this.draggingBlock != null) && (this.lastHighlight == null) && !this.dragReplacing) {\n    trackPoint = new this.draw.Point(point.x + this.draggingOffset.x, point.y + this.draggingOffset.y);\n    renderPoint = this.trackerPointToMain(trackPoint);\n    palettePoint = this.trackerPointToPalette(trackPoint);\n    removeBlock = true;\n    addBlockAsFloatingBlock = true;\n    palettePoint = this.trackerPointToPalette(point);\n    if ((0 < (ref1 = palettePoint.x - this.scrollOffsets.palette.x) && ref1 < this.paletteCanvas.width) && (0 < (ref2 = palettePoint.y - this.scrollOffsets.palette.y) && ref2 < this.paletteCanvas.height) || !((-this.gutter.offsetWidth < (ref3 = renderPoint.x - this.scrollOffsets.main.x) && ref3 < this.mainCanvas.width) && (0 < (ref4 = renderPoint.y - this.scrollOffsets.main.y) && ref4 < this.mainCanvas.height))) {\n      if (this.draggingBlock === this.lassoSelection) {\n        this.lassoSelection = null;\n      }\n      addBlockAsFloatingBlock = false;\n    } else {\n      if (renderPoint.x - this.scrollOffsets.main.x < 0) {\n        renderPoint.x = this.scrollOffsets.main.x;\n      }\n      if (!this.allowFloatingBlocks) {\n        addBlockAsFloatingBlock = false;\n        removeBlock = false;\n      }\n    }\n    if (removeBlock) {\n      this.undoCapture();\n      rememberedSocketOffsets = this.spliceRememberedSocketOffsets(this.draggingBlock);\n      this.spliceOut(this.draggingBlock);\n    }\n    if (!addBlockAsFloatingBlock) {\n      this.endDrag();\n      return;\n    }\n    newDocument = new model.Document({\n      roundedSingletons: true\n    });\n    newDocument.insert(newDocument.start, this.draggingBlock);\n    this.pushUndo(new FloatingOperation(this.floatingBlocks.length, newDocument, renderPoint, 'create'));\n    this.floatingBlocks.push(new FloatingBlockRecord(newDocument, renderPoint));\n    this.setCursor(this.draggingBlock.start);\n    for (i = j = 0, len = rememberedSocketOffsets.length; j < len; i = ++j) {\n      el = rememberedSocketOffsets[i];\n      this.rememberedSockets.push(new RememberedSocketRecord(new CrossDocumentLocation(this.floatingBlocks.length, new model.Location(el.offset + 1, 'socket')), el.text));\n    }\n    this.draggingBlock = null;\n    this.draggingOffset = null;\n    this.lastHighlight = null;\n    this.clearDrag();\n    return this.redrawMain();\n  }\n});\n\nEditor.prototype.performFloatingOperation = function(op, direction) {\n  if ((op.type === 'create') === (direction === 'forward')) {\n    if (this.cursor.document > op.index) {\n      this.cursor.document += 1;\n    }\n    return this.floatingBlocks.splice(op.index, 0, new FloatingBlockRecord(op.block.clone(), op.position));\n  } else {\n    if (this.cursor.document === op.index + 1) {\n      this.setCursor(this.tree.start);\n    }\n    return this.floatingBlocks.splice(op.index, 1);\n  }\n};\n\nFloatingOperation = (function() {\n  function FloatingOperation(index1, block1, position1, type) {\n    this.index = index1;\n    this.block = block1;\n    this.position = position1;\n    this.type = type;\n    this.block = this.block.clone();\n  }\n\n  FloatingOperation.prototype.toString = function() {\n    return JSON.stringify({\n      index: this.index,\n      block: this.block.stringify(),\n      position: this.position.toString(),\n      type: this.type\n    });\n  };\n\n  return FloatingOperation;\n\n})();\n\nhook('populate', 0, function() {\n  this.paletteHeader = document.createElement('div');\n  this.paletteHeader.className = 'droplet-palette-header';\n  this.paletteElement.appendChild(this.paletteHeader);\n  return this.setPalette(this.paletteGroups);\n});\n\nparseBlock = (function(_this) {\n  return function(mode, code) {\n    var block;\n    block = mode.parse(code).start.next.container;\n    block.start.prev = block.end.next = null;\n    block.setParent(null);\n    return block;\n  };\n})(this);\n\nEditor.prototype.setPalette = function(paletteGroups) {\n  var fn1, i, j, len, paletteGroup, paletteHeaderRow, ref1;\n  this.paletteHeader.innerHTML = '';\n  this.paletteGroups = paletteGroups;\n  this.currentPaletteBlocks = [];\n  this.currentPaletteMetadata = [];\n  paletteHeaderRow = null;\n  ref1 = this.paletteGroups;\n  fn1 = (function(_this) {\n    return function(paletteGroup, i) {\n      var clickHandler, data, expansion, k, len1, newBlock, newPaletteBlocks, paletteGroupHeader, ref2, updatePalette;\n      if (i % 2 === 0) {\n        paletteHeaderRow = document.createElement('div');\n        paletteHeaderRow.className = 'droplet-palette-header-row';\n        _this.paletteHeader.appendChild(paletteHeaderRow);\n        if (_this.paletteGroups.length === 1 && !paletteGroup.name) {\n          paletteHeaderRow.style.height = 0;\n        }\n      }\n      paletteGroupHeader = paletteGroup.header = document.createElement('div');\n      paletteGroupHeader.className = 'droplet-palette-group-header';\n      if (paletteGroup.id) {\n        paletteGroupHeader.id = 'droplet-palette-group-header-' + paletteGroup.id;\n      }\n      paletteGroupHeader.innerText = paletteGroupHeader.textContent = paletteGroupHeader.textContent = paletteGroup.name;\n      if (paletteGroup.color) {\n        paletteGroupHeader.className += ' ' + paletteGroup.color;\n      }\n      paletteHeaderRow.appendChild(paletteGroupHeader);\n      newPaletteBlocks = [];\n      ref2 = paletteGroup.blocks;\n      for (k = 0, len1 = ref2.length; k < len1; k++) {\n        data = ref2[k];\n        newBlock = parseBlock(_this.mode, data.block);\n        expansion = data.expansion || null;\n        newPaletteBlocks.push({\n          block: newBlock,\n          expansion: expansion,\n          title: data.title,\n          id: data.id\n        });\n      }\n      paletteGroup.parsedBlocks = newPaletteBlocks;\n      updatePalette = function() {\n        return _this.changePaletteGroup(paletteGroup);\n      };\n      clickHandler = function() {\n        return updatePalette();\n      };\n      paletteGroupHeader.addEventListener('click', clickHandler);\n      paletteGroupHeader.addEventListener('touchstart', clickHandler);\n      if (i === 0) {\n        return updatePalette();\n      }\n    };\n  })(this);\n  for (i = j = 0, len = ref1.length; j < len; i = ++j) {\n    paletteGroup = ref1[i];\n    fn1(paletteGroup, i);\n  }\n  this.resizePalette();\n  return this.resizePaletteHighlight();\n};\n\nEditor.prototype.changePaletteGroup = function(group) {\n  var curGroup, i, j, len, paletteGroup, ref1, ref2;\n  ref1 = this.paletteGroups;\n  for (i = j = 0, len = ref1.length; j < len; i = ++j) {\n    curGroup = ref1[i];\n    if (group === curGroup || group === curGroup.id || group === curGroup.name) {\n      paletteGroup = curGroup;\n      break;\n    }\n  }\n  if (!paletteGroup) {\n    return;\n  }\n  this.currentPaletteGroup = paletteGroup.name;\n  this.currentPaletteBlocks = paletteGroup.parsedBlocks;\n  this.currentPaletteMetadata = paletteGroup.parsedBlocks;\n  if ((ref2 = this.currentPaletteGroupHeader) != null) {\n    ref2.className = this.currentPaletteGroupHeader.className.replace(/\\s[-\\w]*-selected\\b/, '');\n  }\n  this.currentPaletteGroupHeader = paletteGroup.header;\n  this.currentPaletteIndex = i;\n  this.currentPaletteGroupHeader.className += ' droplet-palette-group-header-selected';\n  this.rebuildPalette();\n  return this.fireEvent('selectpalette', [paletteGroup.name]);\n};\n\nhook('mousedown', 6, function(point, event, state) {\n  var entry, hitTestResult, j, len, palettePoint, ref1, ref2, ref3;\n  if (state.consumedHitTest) {\n    return;\n  }\n  if (!this.trackerPointIsInPalette(point)) {\n    return;\n  }\n  palettePoint = this.trackerPointToPalette(point);\n  if ((this.scrollOffsets.palette.y < (ref1 = palettePoint.y) && ref1 < this.scrollOffsets.palette.y + this.paletteCanvas.height) && (this.scrollOffsets.palette.x < (ref2 = palettePoint.x) && ref2 < this.scrollOffsets.palette.x + this.paletteCanvas.width)) {\n    if (this.handleTextInputClickInPalette(palettePoint)) {\n      state.consumedHitTest = true;\n      return;\n    }\n    ref3 = this.currentPaletteBlocks;\n    for (j = 0, len = ref3.length; j < len; j++) {\n      entry = ref3[j];\n      hitTestResult = this.hitTest(palettePoint, entry.block, this.paletteView);\n      if (hitTestResult != null) {\n        this.clickedBlock = entry.block;\n        this.clickedPoint = point;\n        this.clickedBlockPaletteEntry = entry;\n        state.consumedHitTest = true;\n        this.fireEvent('pickblock', [entry.id]);\n        return;\n      }\n    }\n  }\n  return this.clickedBlockPaletteEntry = null;\n});\n\nhook('populate', 1, function() {\n  this.paletteHighlightCanvas = document.createElement('canvas');\n  this.paletteHighlightCanvas.className = 'droplet-palette-highlight-canvas';\n  this.paletteHighlightCtx = this.paletteHighlightCanvas.getContext('2d');\n  this.paletteHighlightPath = null;\n  this.currentHighlightedPaletteBlock = null;\n  return this.paletteElement.appendChild(this.paletteHighlightCanvas);\n});\n\nEditor.prototype.resizePaletteHighlight = function() {\n  this.paletteHighlightCanvas.style.top = this.paletteHeader.offsetHeight + 'px';\n  this.paletteHighlightCanvas.width = this.paletteCanvas.width;\n  return this.paletteHighlightCanvas.height = this.paletteCanvas.height;\n};\n\nhook('redraw_palette', 0, function() {\n  this.clearPaletteHighlightCanvas();\n  if (this.currentHighlightedPaletteBlock != null) {\n    return this.paletteHighlightPath.draw(this.paletteHighlightCtx);\n  }\n});\n\nhook('rebuild_palette', 1, function() {\n  var block, bounds, data, fn1, hoverDiv, j, len, ref1, ref2, results;\n  this.paletteScrollerStuffing.innerHTML = '';\n  this.currentHighlightedPaletteBlock = null;\n  ref1 = this.currentPaletteMetadata;\n  fn1 = (function(_this) {\n    return function(block) {\n      hoverDiv.addEventListener('mousemove', function(event) {\n        var palettePoint;\n        palettePoint = _this.trackerPointToPalette(new _this.draw.Point(event.clientX, event.clientY));\n        if (_this.viewOrChildrenContains(block, palettePoint, _this.paletteView)) {\n          _this.clearPaletteHighlightCanvas();\n          _this.paletteHighlightPath = _this.getHighlightPath(block, {\n            color: '#FF0'\n          }, _this.paletteView);\n          _this.paletteHighlightPath.draw(_this.paletteHighlightCtx);\n          return _this.currentHighlightedPaletteBlock = block;\n        } else if (block === _this.currentHighlightedPaletteBlock) {\n          _this.currentHighlightedPaletteBlock = null;\n          return _this.clearPaletteHighlightCanvas();\n        }\n      });\n      return hoverDiv.addEventListener('mouseout', function(event) {\n        if (block === _this.currentHighlightedPaletteBlock) {\n          _this.currentHighlightedPaletteBlock = null;\n          return _this.paletteHighlightCtx.clearRect(_this.scrollOffsets.palette.x, _this.scrollOffsets.palette.y, _this.paletteHighlightCanvas.width + _this.scrollOffsets.palette.x, _this.paletteHighlightCanvas.height + _this.scrollOffsets.palette.y);\n        }\n      });\n    };\n  })(this);\n  results = [];\n  for (j = 0, len = ref1.length; j < len; j++) {\n    data = ref1[j];\n    block = data.block;\n    hoverDiv = document.createElement('div');\n    hoverDiv.className = 'droplet-hover-div';\n    hoverDiv.title = (ref2 = data.title) != null ? ref2 : block.stringify();\n    if (data.id != null) {\n      hoverDiv.setAttribute('data-id', data.id);\n    }\n    bounds = this.paletteView.getViewNodeFor(block).totalBounds;\n    hoverDiv.style.top = bounds.y + \"px\";\n    hoverDiv.style.left = bounds.x + \"px\";\n    hoverDiv.style.width = (Math.min(bounds.width, Infinity)) + \"px\";\n    hoverDiv.style.height = bounds.height + \"px\";\n    fn1(block);\n    results.push(this.paletteScrollerStuffing.appendChild(hoverDiv));\n  }\n  return results;\n});\n\nhook('populate', 1, function() {\n  var event, j, len, ref1, results;\n  this.hiddenInput = document.createElement('textarea');\n  this.hiddenInput.className = 'droplet-hidden-input';\n  this.hiddenInput.addEventListener('focus', (function(_this) {\n    return function() {\n      var bounds, inputLeft, inputTop;\n      if (_this.cursorAtSocket()) {\n        bounds = _this.view.getViewNodeFor(_this.getCursor()).bounds[0];\n        inputLeft = bounds.x + _this.mainCanvas.offsetLeft - _this.scrollOffsets.main.x;\n        inputLeft = Math.min(inputLeft, _this.dropletElement.clientWidth - 10);\n        inputLeft = Math.max(_this.mainCanvas.offsetLeft, inputLeft);\n        _this.hiddenInput.style.left = inputLeft + 'px';\n        inputTop = bounds.y - _this.scrollOffsets.main.y;\n        inputTop = Math.min(inputTop, _this.dropletElement.clientHeight - 10);\n        inputTop = Math.max(0, inputTop);\n        return _this.hiddenInput.style.top = inputTop + 'px';\n      }\n    };\n  })(this));\n  this.dropletElement.appendChild(this.hiddenInput);\n  this.textInputAnchor = null;\n  this.textInputSelecting = false;\n  this.oldFocusValue = null;\n  this.hiddenInput.addEventListener('keydown', (function(_this) {\n    return function(event) {\n      var ref1;\n      if (event.keyCode === 8 && _this.hiddenInput.value.length > 1 && _this.hiddenInput.value[0] === _this.hiddenInput.value[_this.hiddenInput.value.length - 1] && ((ref1 = _this.hiddenInput.value[0]) === '\\'' || ref1 === '\\\"') && _this.hiddenInput.selectionEnd === 1) {\n        return event.preventDefault();\n      }\n    };\n  })(this));\n  ref1 = ['input', 'keyup', 'keydown', 'select'];\n  results = [];\n  for (j = 0, len = ref1.length; j < len; j++) {\n    event = ref1[j];\n    results.push(this.hiddenInput.addEventListener(event, (function(_this) {\n      return function() {\n        _this.highlightFlashShow();\n        if (_this.cursorAtSocket()) {\n          _this.redrawTextInput();\n          if (_this.dropdownVisible) {\n            return _this.formatDropdown();\n          }\n        }\n      };\n    })(this)));\n  }\n  return results;\n});\n\nEditor.prototype.resizeAceElement = function() {\n  var width;\n  width = this.wrapperElement.clientWidth;\n  if (this.showPaletteInTextMode && this.paletteEnabled) {\n    width -= this.paletteWrapper.offsetWidth;\n  }\n  this.aceElement.style.width = width + \"px\";\n  return this.aceElement.style.height = this.wrapperElement.clientHeight + \"px\";\n};\n\nlast_ = function(array) {\n  return array[array.length - 1];\n};\n\nEditor.prototype.redrawTextInput = function() {\n  var dropletDocument, endRow, head, line, newp, oldp, rect, sameLength, startRow, textFocusView, treeView;\n  sameLength = this.getCursor().stringify().split('\\n').length === this.hiddenInput.value.split('\\n').length;\n  dropletDocument = this.getCursor().getDocument();\n  this.populateSocket(this.getCursor(), this.hiddenInput.value);\n  textFocusView = this.view.getViewNodeFor(this.getCursor());\n  startRow = this.getCursor().stringify().slice(0, this.hiddenInput.selectionStart).split('\\n').length - 1;\n  endRow = this.getCursor().stringify().slice(0, this.hiddenInput.selectionEnd).split('\\n').length - 1;\n  if (sameLength && startRow === endRow) {\n    line = endRow;\n    head = this.getCursor().start;\n    while (head !== dropletDocument.start) {\n      head = head.prev;\n      if (head.type === 'newline') {\n        line++;\n      }\n    }\n    treeView = this.view.getViewNodeFor(dropletDocument);\n    oldp = helper.deepCopy([treeView.glue[line - 1], treeView.glue[line], treeView.bounds[line].height]);\n    treeView.layout();\n    newp = helper.deepCopy([treeView.glue[line - 1], treeView.glue[line], treeView.bounds[line].height]);\n    if (helper.deepEquals(newp, oldp)) {\n      rect = new this.draw.NoRectangle();\n      if (line > 0) {\n        rect.unite(treeView.bounds[line - 1]);\n      }\n      rect.unite(treeView.bounds[line]);\n      if (line + 1 < treeView.bounds.length) {\n        rect.unite(treeView.bounds[line + 1]);\n      }\n      rect.width = Math.max(rect.width, this.mainCanvas.width);\n      return this.redrawMain({\n        boundingRectangle: rect\n      });\n    } else {\n      return this.redrawMain();\n    }\n  } else {\n    return this.redrawMain();\n  }\n};\n\nEditor.prototype.redrawTextHighlights = function(scrollIntoView) {\n  var endPosition, endRow, i, j, lines, ref1, ref2, startPosition, startRow, textFocusView;\n  if (scrollIntoView == null) {\n    scrollIntoView = false;\n  }\n  if (!this.cursorAtSocket()) {\n    return;\n  }\n  textFocusView = this.view.getViewNodeFor(this.getCursor());\n  startRow = this.getCursor().stringify().slice(0, this.hiddenInput.selectionStart).split('\\n').length - 1;\n  endRow = this.getCursor().stringify().slice(0, this.hiddenInput.selectionEnd).split('\\n').length - 1;\n  lines = this.getCursor().stringify().split('\\n');\n  startPosition = textFocusView.bounds[startRow].x + this.view.opts.textPadding + this.mainCtx.measureText(last_(this.getCursor().stringify().slice(0, this.hiddenInput.selectionStart).split('\\n'))).width + (this.getCursor().hasDropdown() ? helper.DROPDOWN_ARROW_WIDTH : 0);\n  endPosition = textFocusView.bounds[endRow].x + this.view.opts.textPadding + this.mainCtx.measureText(last_(this.getCursor().stringify().slice(0, this.hiddenInput.selectionEnd).split('\\n'))).width + (this.getCursor().hasDropdown() ? helper.DROPDOWN_ARROW_WIDTH : 0);\n  if (this.hiddenInput.selectionStart === this.hiddenInput.selectionEnd) {\n    this.cursorCtx.lineWidth = 1;\n    this.cursorCtx.strokeStyle = '#000';\n    this.cursorCtx.strokeRect(startPosition, textFocusView.bounds[startRow].y, 0, this.view.opts.textHeight);\n    this.textInputHighlighted = false;\n  } else {\n    this.textInputHighlighted = true;\n    this.cursorCtx.fillStyle = 'rgba(0, 0, 256, 0.3)';\n    if (startRow === endRow) {\n      this.cursorCtx.fillRect(startPosition, textFocusView.bounds[startRow].y + this.view.opts.textPadding, endPosition - startPosition, this.view.opts.textHeight);\n    } else {\n      this.cursorCtx.fillRect(startPosition, textFocusView.bounds[startRow].y + this.view.opts.textPadding, textFocusView.bounds[startRow].right() - this.view.opts.textPadding - startPosition, this.view.opts.textHeight);\n      for (i = j = ref1 = startRow + 1, ref2 = endRow; ref1 <= ref2 ? j < ref2 : j > ref2; i = ref1 <= ref2 ? ++j : --j) {\n        this.cursorCtx.fillRect(textFocusView.bounds[i].x, textFocusView.bounds[i].y + this.view.opts.textPadding, textFocusView.bounds[i].width, this.view.opts.textHeight);\n      }\n      this.cursorCtx.fillRect(textFocusView.bounds[endRow].x, textFocusView.bounds[endRow].y + this.view.opts.textPadding, endPosition - textFocusView.bounds[endRow].x, this.view.opts.textHeight);\n    }\n  }\n  if (scrollIntoView && endPosition > this.scrollOffsets.main.x + this.mainCanvas.width) {\n    return this.mainScroller.scrollLeft = endPosition - this.mainCanvas.width + this.view.opts.padding;\n  }\n};\n\nescapeString = function(str) {\n  return str[0] + str.slice(1, -1).replace(/(\\'|\\\"|\\n)/g, '\\\\$1') + str[str.length - 1];\n};\n\nhook('mousedown', 7, function() {\n  return this.hideDropdown();\n});\n\nEditor.prototype.reparse = function(list, updates, originalTrigger) {\n  var context, e, error, newList, originalText, originalUpdates, parent, ref1;\n  if (updates == null) {\n    updates = [];\n  }\n  if (originalTrigger == null) {\n    originalTrigger = list;\n  }\n  if (list.start.type === 'socketStart') {\n    if (list.start.next === list.end) {\n      return;\n    }\n    originalText = list.textContent();\n    originalUpdates = updates.map(function(location) {\n      return {\n        count: location.count,\n        type: location.type\n      };\n    });\n    this.reparse(new model.List(list.start.next, list.end.prev), updates, originalTrigger);\n    if (!this.reparse(list.parent, updates, originalTrigger)) {\n      this.populateSocket(list, originalText);\n      originalUpdates.forEach(function(location, i) {\n        updates[i].count = location.count;\n        return updates[i].type = location.type;\n      });\n      this.reparse(list.parent, updates, originalTrigger);\n    }\n    return;\n  }\n  parent = list.start.parent;\n  context = ((ref1 = list.start.container) != null ? ref1 : list.start.parent).parseContext;\n  try {\n    newList = this.mode.parse(list.stringifyInPlace(), {\n      wrapAtRoot: (parent != null ? parent.type : void 0) !== 'socket',\n      context: context\n    });\n  } catch (error) {\n    e = error;\n    while ((parent != null) && parent.type === 'socket') {\n      parent = parent.parent;\n    }\n    if (parent != null) {\n      return this.reparse(parent, updates, originalTrigger);\n    } else {\n      this.markBlock(originalTrigger, {\n        color: '#F00'\n      });\n      return false;\n    }\n  }\n  if (newList.start.next === newList.end) {\n    return;\n  }\n  newList = new model.List(newList.start.next, newList.end.prev);\n  newList.traverseOneLevel((function(_this) {\n    return function(head) {\n      return _this.prepareNode(head, parent);\n    };\n  })(this));\n  this.replace(list, newList, updates);\n  this.redrawMain();\n  return true;\n};\n\nEditor.prototype.setTextSelectionRange = function(selectionStart, selectionEnd) {\n  var ref1;\n  if ((selectionStart != null) && (selectionEnd == null)) {\n    selectionEnd = selectionStart;\n  }\n  if (this.cursorAtSocket()) {\n    this.hiddenInput.focus();\n    if ((selectionStart != null) && (selectionEnd != null)) {\n      this.hiddenInput.setSelectionRange(selectionStart, selectionEnd);\n    } else if (this.hiddenInput.value[0] === this.hiddenInput.value[this.hiddenInput.value.length - 1] && ((ref1 = this.hiddenInput.value[0]) === '\\'' || ref1 === '\"')) {\n      this.hiddenInput.setSelectionRange(1, this.hiddenInput.value.length - 1);\n    } else {\n      this.hiddenInput.setSelectionRange(0, this.hiddenInput.value.length);\n    }\n    this.redrawTextInput();\n  }\n  this.redrawMain();\n  return this.redrawTextInput();\n};\n\nEditor.prototype.cursorAtSocket = function() {\n  return this.getCursor().type === 'socket';\n};\n\nEditor.prototype.populateSocket = function(socket, string) {\n  var first, i, j, last, len, line, lines;\n  if (socket.textContent() !== string) {\n    lines = string.split('\\n');\n    if (socket.start.next !== socket.end) {\n      this.spliceOut(new model.List(socket.start.next, socket.end.prev));\n    }\n    first = last = new model.TextToken(lines[0]);\n    for (i = j = 0, len = lines.length; j < len; i = ++j) {\n      line = lines[i];\n      if (!(i > 0)) {\n        continue;\n      }\n      last = helper.connect(last, new model.NewlineToken());\n      last = helper.connect(last, new model.TextToken(line));\n    }\n    return this.spliceIn(new model.List(first, last), socket.start);\n  }\n};\n\nEditor.prototype.populateBlock = function(block, string) {\n  var location, newBlock, ref1;\n  newBlock = this.mode.parse(string, {\n    wrapAtRoot: false\n  }).start.next.container;\n  if (newBlock) {\n    location = block.start.prev;\n    while ((location != null ? location.type : void 0) === 'newline' && !(((ref1 = location.prev) != null ? ref1.type : void 0) === 'indentStart' && location.prev.container.end === block.end.next)) {\n      location = location.prev;\n    }\n    this.spliceOut(block);\n    this.spliceIn(newBlock, location);\n    return true;\n  }\n  return false;\n};\n\nEditor.prototype.hitTestTextInput = function(point, block) {\n  var head;\n  head = block.start;\n  while (head != null) {\n    if (head.type === 'socketStart' && head.container.isDroppable() && this.view.getViewNodeFor(head.container).path.contains(point)) {\n      return head.container;\n    }\n    head = head.next;\n  }\n  return null;\n};\n\nEditor.prototype.getTextPosition = function(point) {\n  var column, lines, row, textFocusView;\n  textFocusView = this.view.getViewNodeFor(this.getCursor());\n  row = Math.floor((point.y - textFocusView.bounds[0].y) / (this.fontSize + 2 * this.view.opts.padding));\n  row = Math.max(row, 0);\n  row = Math.min(row, textFocusView.lineLength - 1);\n  column = Math.max(0, Math.round((point.x - textFocusView.bounds[row].x - this.view.opts.textPadding - (this.getCursor().hasDropdown() ? helper.DROPDOWN_ARROW_WIDTH : 0)) / this.mainCtx.measureText(' ').width));\n  lines = this.getCursor().stringify().split('\\n').slice(0, +row + 1 || 9e9);\n  lines[lines.length - 1] = lines[lines.length - 1].slice(0, column);\n  return lines.join('\\n').length;\n};\n\nEditor.prototype.setTextInputAnchor = function(point) {\n  this.textInputAnchor = this.textInputHead = this.getTextPosition(point);\n  return this.hiddenInput.setSelectionRange(this.textInputAnchor, this.textInputHead);\n};\n\nEditor.prototype.selectDoubleClick = function(point) {\n  var after, before, position, ref1, ref2, ref3, ref4;\n  position = this.getTextPosition(point);\n  before = (ref1 = (ref2 = this.getCursor().stringify().slice(0, position).match(/\\w*$/)[0]) != null ? ref2.length : void 0) != null ? ref1 : 0;\n  after = (ref3 = (ref4 = this.getCursor().stringify().slice(position).match(/^\\w*/)[0]) != null ? ref4.length : void 0) != null ? ref3 : 0;\n  this.textInputAnchor = position - before;\n  this.textInputHead = position + after;\n  return this.hiddenInput.setSelectionRange(this.textInputAnchor, this.textInputHead);\n};\n\nEditor.prototype.setTextInputHead = function(point) {\n  this.textInputHead = this.getTextPosition(point);\n  return this.hiddenInput.setSelectionRange(Math.min(this.textInputAnchor, this.textInputHead), Math.max(this.textInputAnchor, this.textInputHead));\n};\n\nEditor.prototype.handleTextInputClick = function(mainPoint, dropletDocument) {\n  var hitTestResult;\n  hitTestResult = this.hitTestTextInput(mainPoint, dropletDocument);\n  if (hitTestResult != null) {\n    if (hitTestResult !== this.getCursor()) {\n      if (hitTestResult.editable()) {\n        this.undoCapture();\n        this.setCursor(hitTestResult);\n        this.redrawMain();\n      }\n      if (hitTestResult.hasDropdown() && ((!hitTestResult.editable()) || mainPoint.x - this.view.getViewNodeFor(hitTestResult).bounds[0].x < helper.DROPDOWN_ARROW_WIDTH)) {\n        this.showDropdown(hitTestResult);\n      }\n      this.textInputSelecting = false;\n    } else {\n      if (this.getCursor().hasDropdown() && mainPoint.x - this.view.getViewNodeFor(hitTestResult).bounds[0].x < helper.DROPDOWN_ARROW_WIDTH) {\n        this.showDropdown();\n      }\n      this.setTextInputAnchor(mainPoint);\n      this.redrawTextInput();\n      this.textInputSelecting = true;\n    }\n    this.hiddenInput.focus();\n    return true;\n  } else {\n    return false;\n  }\n};\n\nEditor.prototype.hitTestTextInputInPalette = function(point, block) {\n  var head;\n  head = block.start;\n  while (head != null) {\n    if (head.type === 'socketStart' && head.container.isDroppable() && this.paletteView.getViewNodeFor(head.container).path.contains(point)) {\n      return head.container;\n    }\n    head = head.next;\n  }\n  return null;\n};\n\nEditor.prototype.handleTextInputClickInPalette = function(palettePoint) {\n  var entry, hitTestResult, j, len, ref1;\n  ref1 = this.currentPaletteBlocks;\n  for (j = 0, len = ref1.length; j < len; j++) {\n    entry = ref1[j];\n    hitTestResult = this.hitTestTextInputInPalette(palettePoint, entry.block);\n    if (hitTestResult != null) {\n      if (hitTestResult.hasDropdown()) {\n        this.showDropdown(hitTestResult, true);\n        return true;\n      }\n    }\n  }\n  return false;\n};\n\nhook('populate', 0, function() {\n  this.dropdownElement = document.createElement('div');\n  this.dropdownElement.className = 'droplet-dropdown';\n  this.wrapperElement.appendChild(this.dropdownElement);\n  this.dropdownElement.innerHTML = '';\n  this.dropdownElement.style.display = 'inline-block';\n  return this.dropdownVisible = false;\n});\n\nEditor.prototype.formatDropdown = function(socket, view) {\n  if (socket == null) {\n    socket = this.getCursor();\n  }\n  if (view == null) {\n    view = this.view;\n  }\n  this.dropdownElement.style.fontFamily = this.fontFamily;\n  this.dropdownElement.style.fontSize = this.fontSize;\n  return this.dropdownElement.style.minWidth = view.getViewNodeFor(socket).bounds[0].width;\n};\n\nEditor.prototype.getDropdownList = function(socket) {\n  var result;\n  result = socket.dropdown;\n  if (result.generate) {\n    result = result.generate;\n  }\n  if ('function' === typeof result) {\n    result = result();\n  } else {\n    result = socket.dropdown;\n  }\n  if (result.options) {\n    result = result.options;\n  }\n  return result.map(function(x) {\n    if ('string' === typeof x) {\n      return {\n        text: x,\n        display: x\n      };\n    } else {\n      return x;\n    }\n  });\n};\n\nEditor.prototype.showDropdown = function(socket, inPalette) {\n  var dropdownItems, el, fn1, i, j, len, ref1;\n  if (socket == null) {\n    socket = this.getCursor();\n  }\n  if (inPalette == null) {\n    inPalette = false;\n  }\n  this.dropdownVisible = true;\n  dropdownItems = [];\n  this.dropdownElement.innerHTML = '';\n  this.dropdownElement.style.display = 'inline-block';\n  this.formatDropdown(socket, inPalette ? this.paletteView : this.view);\n  ref1 = this.getDropdownList(socket);\n  fn1 = (function(_this) {\n    return function(el) {\n      var div, setText;\n      div = document.createElement('div');\n      div.innerHTML = el.display;\n      div.className = 'droplet-dropdown-item';\n      dropdownItems.push(div);\n      div.style.paddingLeft = helper.DROPDOWN_ARROW_WIDTH;\n      setText = function(text) {\n        _this.undoCapture();\n        if (_this.dropdownElement.style.display === 'none') {\n          return;\n        }\n        if (inPalette) {\n          _this.populateSocket(socket, text);\n          _this.redrawPalette();\n        } else if (!socket.editable()) {\n          _this.populateSocket(socket, text);\n          _this.redrawMain();\n        } else {\n          if (!_this.cursorAtSocket()) {\n            return;\n          }\n          _this.populateSocket(_this.getCursor(), text);\n          _this.hiddenInput.value = text;\n          _this.redrawMain();\n        }\n        return _this.hideDropdown();\n      };\n      div.addEventListener('mouseup', function() {\n        if (el.click) {\n          return el.click(setText);\n        } else {\n          return setText(el.text);\n        }\n      });\n      return _this.dropdownElement.appendChild(div);\n    };\n  })(this);\n  for (i = j = 0, len = ref1.length; j < len; i = ++j) {\n    el = ref1[i];\n    fn1(el);\n  }\n  this.dropdownElement.style.top = '-9999px';\n  this.dropdownElement.style.left = '-9999px';\n  return setTimeout(((function(_this) {\n    return function() {\n      var dropdownTop, k, len1, location;\n      if (_this.dropdownElement.offsetHeight < _this.dropdownElement.scrollHeight) {\n        for (k = 0, len1 = dropdownItems.length; k < len1; k++) {\n          el = dropdownItems[k];\n          el.style.paddingRight = DROPDOWN_SCROLLBAR_PADDING;\n        }\n      }\n      if (inPalette) {\n        location = _this.paletteView.getViewNodeFor(socket).bounds[0];\n        _this.dropdownElement.style.left = location.x - _this.scrollOffsets.palette.x + _this.paletteCanvas.offsetLeft + 'px';\n        _this.dropdownElement.style.minWidth = location.width + 'px';\n        dropdownTop = location.y + _this.fontSize - _this.scrollOffsets.palette.y + _this.paletteCanvas.offsetTop;\n        if (dropdownTop + _this.dropdownElement.offsetHeight > _this.paletteElement.offsetHeight) {\n          dropdownTop -= _this.fontSize + _this.dropdownElement.offsetHeight;\n        }\n        return _this.dropdownElement.style.top = dropdownTop + 'px';\n      } else {\n        location = _this.view.getViewNodeFor(socket).bounds[0];\n        _this.dropdownElement.style.left = location.x - _this.scrollOffsets.main.x + _this.dropletElement.offsetLeft + _this.mainCanvas.offsetLeft + 'px';\n        _this.dropdownElement.style.minWidth = location.width + 'px';\n        dropdownTop = location.y + _this.fontSize - _this.scrollOffsets.main.y;\n        if (dropdownTop + _this.dropdownElement.offsetHeight > _this.dropletElement.offsetHeight) {\n          dropdownTop -= _this.fontSize + _this.dropdownElement.offsetHeight;\n        }\n        return _this.dropdownElement.style.top = dropdownTop + 'px';\n      }\n    };\n  })(this)), 0);\n};\n\nEditor.prototype.hideDropdown = function() {\n  this.dropdownVisible = false;\n  this.dropdownElement.style.display = 'none';\n  return this.dropletElement.focus();\n};\n\nhook('dblclick', 0, function(point, event, state) {\n  var dropletDocument, hitTestResult, j, len, mainPoint, ref1;\n  if (state.consumedHitTest) {\n    return;\n  }\n  ref1 = this.getDocuments();\n  for (j = 0, len = ref1.length; j < len; j++) {\n    dropletDocument = ref1[j];\n    mainPoint = this.trackerPointToMain(point);\n    hitTestResult = this.hitTestTextInput(mainPoint, this.tree);\n    if (hitTestResult !== this.getCursor()) {\n      if ((hitTestResult != null) && hitTestResult.editable()) {\n        this.redrawMain();\n        hitTestResult = this.hitTestTextInput(mainPoint, this.tree);\n      }\n    }\n    if ((hitTestResult != null) && hitTestResult.editable()) {\n      this.setCursor(hitTestResult);\n      this.redrawMain();\n      setTimeout(((function(_this) {\n        return function() {\n          _this.selectDoubleClick(mainPoint);\n          _this.redrawTextInput();\n          return _this.textInputSelecting = false;\n        };\n      })(this)), 0);\n      state.consumedHitTest = true;\n      return;\n    }\n  }\n});\n\nhook('mousemove', 0, function(point, event, state) {\n  var mainPoint;\n  if (this.textInputSelecting) {\n    if (!this.cursorAtSocket()) {\n      this.textInputSelecting = false;\n      return;\n    }\n    mainPoint = this.trackerPointToMain(point);\n    this.setTextInputHead(mainPoint);\n    return this.redrawTextInput();\n  }\n});\n\nhook('mouseup', 0, function(point, event, state) {\n  var mainPoint;\n  if (this.textInputSelecting) {\n    mainPoint = this.trackerPointToMain(point);\n    this.setTextInputHead(mainPoint);\n    this.redrawTextInput();\n    return this.textInputSelecting = false;\n  }\n});\n\nhook('populate', 0, function() {\n  this.lassoSelectCanvas = document.createElement('canvas');\n  this.lassoSelectCanvas.className = 'droplet-lasso-select-canvas';\n  this.lassoSelectCtx = this.lassoSelectCanvas.getContext('2d');\n  this.lassoSelectAnchor = null;\n  this.lassoSelection = null;\n  return this.dropletElement.appendChild(this.lassoSelectCanvas);\n});\n\nEditor.prototype.clearLassoSelectCanvas = function() {\n  return this.lassoSelectCtx.clearRect(0, 0, this.lassoSelectCanvas.width, this.lassoSelectCanvas.height);\n};\n\nEditor.prototype.resizeLassoCanvas = function() {\n  this.lassoSelectCanvas.width = this.dropletElement.offsetWidth - this.gutter.offsetWidth;\n  this.lassoSelectCanvas.style.width = this.lassoSelectCanvas.width + \"px\";\n  this.lassoSelectCanvas.height = this.dropletElement.offsetHeight;\n  this.lassoSelectCanvas.style.height = this.lassoSelectCanvas.height + \"px\";\n  return this.lassoSelectCanvas.style.left = this.mainCanvas.offsetLeft + \"px\";\n};\n\nEditor.prototype.clearLassoSelection = function() {\n  this.lassoSelection = null;\n  return this.redrawHighlights();\n};\n\nhook('mousedown', 0, function(point, event, state) {\n  var mainPoint, palettePoint;\n  if (!state.clickedLassoSelection) {\n    this.clearLassoSelection();\n  }\n  if (state.consumedHitTest || state.suppressLassoSelect) {\n    return;\n  }\n  if (!this.trackerPointIsInMain(point)) {\n    return;\n  }\n  if (this.trackerPointIsInPalette(point)) {\n    return;\n  }\n  mainPoint = this.trackerPointToMain(point).from(this.scrollOffsets.main);\n  palettePoint = this.trackerPointToPalette(point).from(this.scrollOffsets.palette);\n  return this.lassoSelectAnchor = this.trackerPointToMain(point);\n});\n\nhook('mousemove', 0, function(point, event, state) {\n  var dropletDocument, findLassoSelect, j, lassoRectangle, len, mainPoint, ref1, results;\n  if (this.lassoSelectAnchor != null) {\n    mainPoint = this.trackerPointToMain(point);\n    this.clearLassoSelectCanvas();\n    lassoRectangle = new this.draw.Rectangle(Math.min(this.lassoSelectAnchor.x, mainPoint.x), Math.min(this.lassoSelectAnchor.y, mainPoint.y), Math.abs(this.lassoSelectAnchor.x - mainPoint.x), Math.abs(this.lassoSelectAnchor.y - mainPoint.y));\n    findLassoSelect = (function(_this) {\n      return function(dropletDocument) {\n        var first, last, ref1;\n        first = dropletDocument.start;\n        while (!((first == null) || first.type === 'blockStart' && _this.view.getViewNodeFor(first.container).path.intersects(lassoRectangle))) {\n          first = first.next;\n        }\n        last = dropletDocument.end;\n        while (!((last == null) || last.type === 'blockEnd' && _this.view.getViewNodeFor(last.container).path.intersects(lassoRectangle))) {\n          last = last.prev;\n        }\n        _this.clearLassoSelectCanvas();\n        _this.clearHighlightCanvas();\n        _this.lassoSelectCtx.strokeStyle = '#00f';\n        _this.lassoSelectCtx.strokeRect(lassoRectangle.x - _this.scrollOffsets.main.x, lassoRectangle.y - _this.scrollOffsets.main.y, lassoRectangle.width, lassoRectangle.height);\n        if (first && (last != null)) {\n          ref1 = validateLassoSelection(dropletDocument, first, last), first = ref1[0], last = ref1[1];\n          _this.lassoSelection = new model.List(first, last);\n          _this.redrawLassoHighlight();\n          return true;\n        } else {\n          _this.lassoSelection = null;\n          return false;\n        }\n      };\n    })(this);\n    if (!((this.lassoSelectionDocument != null) && findLassoSelect(this.lassoSelectionDocument))) {\n      ref1 = this.getDocuments();\n      results = [];\n      for (j = 0, len = ref1.length; j < len; j++) {\n        dropletDocument = ref1[j];\n        if (findLassoSelect(dropletDocument)) {\n          this.lassoSelectionDocument = dropletDocument;\n          break;\n        } else {\n          results.push(void 0);\n        }\n      }\n      return results;\n    }\n  }\n});\n\nEditor.prototype.redrawLassoHighlight = function() {\n  var lassoView, mainCanvasRectangle;\n  if (this.lassoSelection != null) {\n    mainCanvasRectangle = new this.draw.Rectangle(this.scrollOffsets.main.x, this.scrollOffsets.main.y, this.mainCanvas.width, this.mainCanvas.height);\n    lassoView = this.view.getViewNodeFor(this.lassoSelection);\n    lassoView.absorbCache();\n    lassoView.draw(this.highlightCtx, mainCanvasRectangle, {\n      selected: true\n    });\n    return this.maskFloatingPaths(this.lassoSelection.start.getDocument());\n  }\n};\n\nEditor.prototype.maskFloatingPaths = function(dropletDocument) {\n  var i, j, record, ref1, results;\n  ref1 = this.floatingBlocks;\n  results = [];\n  for (i = j = ref1.length - 1; j >= 0; i = j += -1) {\n    record = ref1[i];\n    if (record.block === dropletDocument) {\n      break;\n    } else {\n      this.highlightCtx.save();\n      record.grayBoxPath.clip(this.highlightCtx);\n      record.grayBoxPath.bounds().clearRect(this.highlightCtx);\n      results.push(this.highlightCtx.restore());\n    }\n  }\n  return results;\n};\n\nvalidateLassoSelection = function(tree, first, last) {\n  var head, tokensToInclude;\n  tokensToInclude = [];\n  head = first;\n  while (head !== last.next) {\n    if (head instanceof model.StartToken || head instanceof model.EndToken) {\n      tokensToInclude.push(head.container.start);\n      tokensToInclude.push(head.container.end);\n    }\n    head = head.next;\n  }\n  first = tree.start;\n  while (indexOf.call(tokensToInclude, first) < 0) {\n    first = first.next;\n  }\n  last = tree.end;\n  while (indexOf.call(tokensToInclude, last) < 0) {\n    last = last.prev;\n  }\n  while (first.type !== 'blockStart') {\n    first = first.prev;\n    if (first.type === 'blockEnd') {\n      first = first.container.start.prev;\n    }\n  }\n  while (last.type !== 'blockEnd') {\n    last = last.next;\n    if (last.type === 'blockStart') {\n      last = last.container.end.next;\n    }\n  }\n  return [first, last];\n};\n\nhook('mouseup', 0, function(point, event, state) {\n  if (this.lassoSelectAnchor != null) {\n    if (this.lassoSelection != null) {\n      this.setCursor(this.lassoSelection.end);\n    }\n    this.lassoSelectAnchor = null;\n    this.clearLassoSelectCanvas();\n    this.redrawHighlights();\n  }\n  return this.lassoSelectionDocument = null;\n});\n\nhook('mousedown', 3, function(point, event, state) {\n  if (state.consumedHitTest) {\n    return;\n  }\n  if ((this.lassoSelection != null) && (this.hitTest(this.trackerPointToMain(point), this.lassoSelection) != null)) {\n    this.clickedBlock = this.lassoSelection;\n    this.clickedBlockPaletteEntry = null;\n    this.clickedPoint = point;\n    state.consumedHitTest = true;\n    return state.clickedLassoSelection = true;\n  }\n});\n\nhook('populate', 0, function() {\n  return this.cursor = new CrossDocumentLocation(0, new model.Location(0, 'documentStart'));\n});\n\nCrossDocumentLocation = (function() {\n  function CrossDocumentLocation(document1, location1) {\n    this.document = document1;\n    this.location = location1;\n  }\n\n  CrossDocumentLocation.prototype.is = function(other) {\n    return this.location.is(other.location) && this.document === other.document;\n  };\n\n  CrossDocumentLocation.prototype.clone = function() {\n    return new CrossDocumentLocation(this.document, this.location.clone());\n  };\n\n  return CrossDocumentLocation;\n\n})();\n\nEditor.prototype.validCursorPosition = function(destination) {\n  var ref1, ref2;\n  return ((ref1 = destination.type) === 'documentStart' || ref1 === 'indentStart') || destination.type === 'blockEnd' && ((ref2 = destination.parent.type) === 'document' || ref2 === 'indent') || destination.type === 'socketStart' && destination.container.editable();\n};\n\nEditor.prototype.setCursor = function(destination, validate, direction) {\n  var end, ref1, ref2, socket, start;\n  if (validate == null) {\n    validate = (function() {\n      return true;\n    });\n  }\n  if (direction == null) {\n    direction = 'after';\n  }\n  if ((destination != null) && destination instanceof CrossDocumentLocation) {\n    destination = this.fromCrossDocumentLocation(destination);\n  }\n  if (!((destination != null) && this.inDisplay(destination))) {\n    return;\n  }\n  if (destination instanceof model.Container) {\n    destination = destination.start;\n  }\n  while (!(this.validCursorPosition(destination) && validate(destination))) {\n    destination = (direction === 'after' ? destination.next : destination.prev);\n    if (destination == null) {\n      return;\n    }\n  }\n  destination = this.toCrossDocumentLocation(destination);\n  if (this.cursorAtSocket() && !this.cursor.is(destination)) {\n    socket = this.getCursor();\n    if (indexOf.call(socket.classes, '__comment__') < 0) {\n      this.reparse(socket, (destination.document === this.cursor.document ? [destination.location] : []));\n      this.hiddenInput.blur();\n      this.dropletElement.focus();\n    }\n  }\n  this.cursor = destination;\n  this.correctCursor();\n  this.redrawMain();\n  this.highlightFlashShow();\n  if (this.cursorAtSocket()) {\n    if (((ref1 = this.getCursor()) != null ? ref1.id : void 0) in this.extraMarks) {\n      delete this.extraMarks[typeof focus !== \"undefined\" && focus !== null ? focus.id : void 0];\n    }\n    this.undoCapture();\n    this.hiddenInput.value = this.getCursor().textContent();\n    this.hiddenInput.focus();\n    ref2 = this.mode.getDefaultSelectionRange(this.hiddenInput.value), start = ref2.start, end = ref2.end;\n    return this.setTextSelectionRange(start, end);\n  }\n};\n\nEditor.prototype.determineCursorPosition = function() {\n  var bound, cursor, line;\n  this.view.getViewNodeFor(this.tree).layout(0, this.nubbyHeight);\n  cursor = this.getCursor();\n  if (cursor.type === 'documentStart') {\n    bound = this.view.getViewNodeFor(cursor.container).bounds[0];\n    return new this.draw.Point(bound.x, bound.y);\n  } else if (cursor.type === 'indentStart') {\n    line = cursor.next.type === 'newline' ? 1 : 0;\n    bound = this.view.getViewNodeFor(cursor.container).bounds[line];\n    return new this.draw.Point(bound.x, bound.y);\n  } else {\n    line = this.getCursor().getTextLocation().row - cursor.parent.getTextLocation().row;\n    bound = this.view.getViewNodeFor(cursor.parent).bounds[line];\n    return new this.draw.Point(bound.x, bound.bottom());\n  }\n};\n\nEditor.prototype.getCursor = function() {\n  var cursor;\n  cursor = this.fromCrossDocumentLocation(this.cursor);\n  if (cursor.type === 'socketStart') {\n    return cursor.container;\n  } else {\n    return cursor;\n  }\n};\n\nEditor.prototype.scrollCursorIntoPosition = function() {\n  var axis;\n  axis = this.determineCursorPosition().y;\n  if (axis - this.scrollOffsets.main.y < 0) {\n    this.mainScroller.scrollTop = axis;\n  } else if (axis - this.scrollOffsets.main.y > this.mainCanvas.height) {\n    this.mainScroller.scrollTop = axis - this.mainCanvas.height;\n  }\n  return this.mainScroller.scrollLeft = 0;\n};\n\nEditor.prototype.scrollCursorToEndOfDocument = function() {\n  var pos;\n  if (this.currentlyUsingBlocks) {\n    pos = this.tree.end;\n    while (pos && !this.validCursorPosition(pos)) {\n      pos = pos.prev;\n    }\n    this.setCursor(pos);\n    return this.scrollCursorIntoPosition();\n  } else {\n    return this.aceEditor.scrollToLine(this.aceEditor.session.getLength());\n  }\n};\n\nhook('keydown', 0, function(event, state) {\n  var next, prev, ref1, ref2, ref3, ref4, ref5, ref6, ref7, ref8;\n  if (event.which === UP_ARROW_KEY) {\n    this.clearLassoSelection();\n    prev = (ref1 = this.getCursor().prev) != null ? ref1 : (ref2 = this.getCursor().start) != null ? ref2.prev : void 0;\n    this.setCursor(prev, (function(token) {\n      return token.type !== 'socketStart';\n    }), 'before');\n    return this.scrollCursorIntoPosition();\n  } else if (event.which === DOWN_ARROW_KEY) {\n    this.clearLassoSelection();\n    next = (ref3 = this.getCursor().next) != null ? ref3 : (ref4 = this.getCursor().end) != null ? ref4.next : void 0;\n    this.setCursor(next, (function(token) {\n      return token.type !== 'socketStart';\n    }), 'after');\n    return this.scrollCursorIntoPosition();\n  } else if (event.which === RIGHT_ARROW_KEY && (!this.cursorAtSocket() || this.hiddenInput.selectionStart === this.hiddenInput.value.length)) {\n    this.clearLassoSelection();\n    next = (ref5 = this.getCursor().next) != null ? ref5 : (ref6 = this.getCursor().end) != null ? ref6.next : void 0;\n    this.setCursor(next, null, 'after');\n    this.scrollCursorIntoPosition();\n    return event.preventDefault();\n  } else if (event.which === LEFT_ARROW_KEY && (!this.cursorAtSocket() || this.hiddenInput.selectionEnd === 0)) {\n    this.clearLassoSelection();\n    prev = (ref7 = this.getCursor().prev) != null ? ref7 : (ref8 = this.getCursor().start) != null ? ref8.prev : void 0;\n    this.setCursor(prev, null, 'before');\n    this.scrollCursorIntoPosition();\n    return event.preventDefault();\n  }\n});\n\nhook('keydown', 0, function(event, state) {\n  var next, prev, ref1, ref2, ref3, ref4;\n  if (event.which !== TAB_KEY) {\n    return;\n  }\n  if (event.shiftKey) {\n    prev = (ref1 = this.getCursor().prev) != null ? ref1 : (ref2 = this.getCursor().start) != null ? ref2.prev : void 0;\n    this.setCursor(prev, (function(token) {\n      return token.type === 'socketStart';\n    }), 'before');\n  } else {\n    next = (ref3 = this.getCursor().next) != null ? ref3 : (ref4 = this.getCursor().end) != null ? ref4.next : void 0;\n    this.setCursor(next, (function(token) {\n      return token.type === 'socketStart';\n    }), 'after');\n  }\n  return event.preventDefault();\n});\n\nEditor.prototype.deleteAtCursor = function() {\n  var block;\n  if (this.getCursor().type === 'blockEnd') {\n    block = this.getCursor().container;\n  } else if (this.getCursor().type === 'indentStart') {\n    block = this.getCursor().parent;\n  } else {\n    return;\n  }\n  this.setCursor(block.start, null, 'before');\n  this.undoCapture();\n  this.spliceOut(block);\n  return this.redrawMain();\n};\n\nhook('keydown', 0, function(event, state) {\n  if (this.readOnly) {\n    return;\n  }\n  if (event.which !== BACKSPACE_KEY) {\n    return;\n  }\n  if (state.capturedBackspace) {\n    return;\n  }\n  if (this.lassoSelection != null) {\n    this.deleteLassoSelection();\n    event.preventDefault();\n    return false;\n  } else if (!this.cursorAtSocket() || (this.hiddenInput.value.length === 0 && this.getCursor().handwritten)) {\n    this.deleteAtCursor();\n    state.capturedBackspace = true;\n    event.preventDefault();\n    return false;\n  }\n  return true;\n});\n\nEditor.prototype.deleteLassoSelection = function() {\n  var cursorTarget;\n  if (this.lassoSelection == null) {\n    if (DEBUG_FLAG) {\n      throw new Error('Cannot delete nonexistent lasso segment');\n    }\n    return null;\n  }\n  cursorTarget = this.lassoSelection.start.prev;\n  this.spliceOut(this.lassoSelection);\n  this.lassoSelection = null;\n  this.setCursor(cursorTarget);\n  return this.redrawMain();\n};\n\nhook('populate', 0, function() {\n  return this.handwrittenBlocks = [];\n});\n\nhook('keydown', 0, function(event, state) {\n  var head, newBlock, newSocket, newTextMarker, socket;\n  if (this.readOnly) {\n    return;\n  }\n  if (event.which === ENTER_KEY) {\n    if (!this.cursorAtSocket() && !event.shiftKey && !event.ctrlKey && !event.metaKey) {\n      newBlock = new model.Block();\n      newSocket = new model.Socket(this.mode.empty, Infinity, true);\n      newSocket.setParent(newBlock);\n      helper.connect(newBlock.start, newSocket.start);\n      helper.connect(newSocket.end, newBlock.end);\n      head = this.getCursor();\n      while (head.type === 'newline') {\n        head = head.prev;\n      }\n      this.spliceIn(newBlock, head);\n      this.redrawMain();\n      return this.newHandwrittenSocket = newSocket;\n    } else if (this.cursorAtSocket() && !event.shiftKey) {\n      socket = this.getCursor();\n      this.hiddenInput.blur();\n      this.dropletElement.focus();\n      this.setCursor(this.cursor, function(token) {\n        return token.type !== 'socketStart';\n      });\n      this.redrawMain();\n      if (indexOf.call(socket.classes, '__comment__') >= 0 && this.mode.startSingleLineComment) {\n        newBlock = new model.Block(0, 'blank', helper.ANY_DROP);\n        newBlock.classes = ['__comment__', 'block-only'];\n        newBlock.socketLevel = helper.BLOCK_ONLY;\n        newTextMarker = new model.TextToken(this.mode.startSingleLineComment);\n        newTextMarker.setParent(newBlock);\n        newSocket = new model.Socket('', 0, true);\n        newSocket.classes = ['__comment__'];\n        newSocket.setParent(newBlock);\n        helper.connect(newBlock.start, newTextMarker);\n        helper.connect(newTextMarker, newSocket.start);\n        helper.connect(newSocket.end, newBlock.end);\n        head = this.getCursor();\n        while (head.type === 'newline') {\n          head = head.prev;\n        }\n        this.spliceIn(newBlock, head);\n        this.redrawMain();\n        return this.newHandwrittenSocket = newSocket;\n      }\n    }\n  }\n});\n\nhook('keyup', 0, function(event, state) {\n  if (this.readOnly) {\n    return;\n  }\n  if (event.which === ENTER_KEY) {\n    if (this.newHandwrittenSocket != null) {\n      this.setCursor(this.newHandwrittenSocket);\n      return this.newHandwrittenSocket = null;\n    }\n  }\n});\n\ncontainsCursor = function(block) {\n  var head;\n  head = block.start;\n  while (head !== block.end) {\n    if (head.type === 'cursor') {\n      return true;\n    }\n    head = head.next;\n  }\n  return false;\n};\n\nEditor.prototype.copyAceEditor = function() {\n  this.gutter.style.width = this.aceEditor.renderer.$gutterLayer.gutterWidth + 'px';\n  this.resizeBlockMode();\n  return this.setValue_raw(this.getAceValue());\n};\n\nhook('populate', 1, function() {\n  var acemode;\n  this.aceElement = document.createElement('div');\n  this.aceElement.className = 'droplet-ace';\n  this.wrapperElement.appendChild(this.aceElement);\n  this.aceEditor = ace.edit(this.aceElement);\n  this.aceEditor.setTheme('ace/theme/chrome');\n  this.aceEditor.setFontSize(15);\n  acemode = this.options.mode;\n  if (acemode === 'coffeescript') {\n    acemode = 'coffee';\n  }\n  this.aceEditor.getSession().setMode('ace/mode/' + acemode);\n  this.aceEditor.getSession().setTabSize(2);\n  this.currentlyUsingBlocks = true;\n  this.currentlyAnimating = false;\n  this.transitionContainer = document.createElement('div');\n  this.transitionContainer.className = 'droplet-transition-container';\n  return this.dropletElement.appendChild(this.transitionContainer);\n});\n\ngetOffsetTop = function(element) {\n  var top;\n  top = element.offsetTop;\n  while ((element = element.offsetParent) != null) {\n    top += element.offsetTop;\n  }\n  return top;\n};\n\ngetOffsetLeft = function(element) {\n  var left;\n  left = element.offsetLeft;\n  while ((element = element.offsetParent) != null) {\n    left += element.offsetLeft;\n  }\n  return left;\n};\n\nEditor.prototype.computePlaintextTranslationVectors = function() {\n  var aceSession, corner, head, rownum, state, textElements, translationVectors, wrappedlines;\n  textElements = [];\n  translationVectors = [];\n  head = this.tree.start;\n  aceSession = this.aceEditor.session;\n  state = {\n    x: (this.aceEditor.container.getBoundingClientRect().left - this.aceElement.getBoundingClientRect().left + this.aceEditor.renderer.$gutterLayer.gutterWidth) - this.gutter.offsetWidth + 5,\n    y: (this.aceEditor.container.getBoundingClientRect().top - this.aceElement.getBoundingClientRect().top) - aceSession.getScrollTop(),\n    indent: 0,\n    lineHeight: this.aceEditor.renderer.layerConfig.lineHeight,\n    leftEdge: (this.aceEditor.container.getBoundingClientRect().left - getOffsetLeft(this.aceElement) + this.aceEditor.renderer.$gutterLayer.gutterWidth) - this.gutter.offsetWidth + 5\n  };\n  this.mainCtx.font = this.aceFontSize() + ' ' + this.fontFamily;\n  rownum = 0;\n  while (head !== this.tree.end) {\n    switch (head.type) {\n      case 'text':\n        corner = this.view.getViewNodeFor(head).bounds[0].upperLeftCorner();\n        corner.x -= this.scrollOffsets.main.x;\n        corner.y -= this.scrollOffsets.main.y;\n        translationVectors.push((new this.draw.Point(state.x, state.y)).from(corner));\n        textElements.push(this.view.getViewNodeFor(head));\n        state.x += this.mainCtx.measureText(head.value).width;\n        break;\n      case 'newline':\n        wrappedlines = Math.max(1, aceSession.documentToScreenRow(rownum + 1, 0) - aceSession.documentToScreenRow(rownum, 0));\n        rownum += 1;\n        state.y += state.lineHeight * wrappedlines;\n        if (head.specialIndent != null) {\n          state.x = state.leftEdge + this.mainCtx.measureText(head.specialIndent).width;\n        } else {\n          state.x = state.leftEdge + state.indent * this.mainCtx.measureText(' ').width;\n        }\n        break;\n      case 'indentStart':\n        state.indent += head.container.depth;\n        break;\n      case 'indentEnd':\n        state.indent -= head.container.depth;\n    }\n    head = head.next;\n  }\n  return {\n    textElements: textElements,\n    translationVectors: translationVectors\n  };\n};\n\nEditor.prototype.performMeltAnimation = function(fadeTime, translateTime, cb) {\n  var aceScrollTop, bottom, div, fn1, fn2, i, j, k, len, line, lineHeight, paletteDisappearingWithMelt, ref1, ref2, ref3, textElement, textElements, top, translatingElements, translationVectors, treeView;\n  if (fadeTime == null) {\n    fadeTime = 500;\n  }\n  if (translateTime == null) {\n    translateTime = 1000;\n  }\n  if (cb == null) {\n    cb = function() {};\n  }\n  if (this.currentlyUsingBlocks && !this.currentlyAnimating) {\n    this.hideDropdown();\n    this.fireEvent('statechange', [false]);\n    this.setAceValue(this.getValue());\n    top = this.findLineNumberAtCoordinate(this.scrollOffsets.main.y);\n    this.aceEditor.scrollToLine(top);\n    this.aceEditor.resize(true);\n    this.redrawMain({\n      noText: true\n    });\n    if (this.mainScroller.scrollWidth > this.mainScroller.offsetWidth) {\n      this.mainScroller.style.overflowX = 'scroll';\n    } else {\n      this.mainScroller.style.overflowX = 'hidden';\n    }\n    this.mainScroller.style.overflowY = 'hidden';\n    this.dropletElement.style.width = this.wrapperElement.clientWidth + 'px';\n    this.currentlyUsingBlocks = false;\n    this.currentlyAnimating = this.currentlyAnimating_suppressRedraw = true;\n    ref1 = this.computePlaintextTranslationVectors(), textElements = ref1.textElements, translationVectors = ref1.translationVectors;\n    translatingElements = [];\n    fn1 = (function(_this) {\n      return function(div, textElement, translationVectors, i) {\n        return setTimeout((function() {\n          div.style.left = (textElement.bounds[0].x - _this.scrollOffsets.main.x + translationVectors[i].x) + 'px';\n          div.style.top = (textElement.bounds[0].y - _this.scrollOffsets.main.y + translationVectors[i].y) + 'px';\n          return div.style.fontSize = _this.aceFontSize();\n        }), fadeTime);\n      };\n    })(this);\n    for (i = j = 0, len = textElements.length; j < len; i = ++j) {\n      textElement = textElements[i];\n      if (!(0 < textElement.bounds[0].bottom() - this.scrollOffsets.main.y + translationVectors[i].y && textElement.bounds[0].y - this.scrollOffsets.main.y + translationVectors[i].y < this.mainCanvas.height)) {\n        continue;\n      }\n      div = document.createElement('div');\n      div.style.whiteSpace = 'pre';\n      div.innerText = div.textContent = textElement.model.value;\n      div.style.font = this.fontSize + 'px ' + this.fontFamily;\n      div.style.left = (textElement.bounds[0].x - this.scrollOffsets.main.x) + \"px\";\n      div.style.top = (textElement.bounds[0].y - this.scrollOffsets.main.y - this.fontAscent) + \"px\";\n      div.className = 'droplet-transitioning-element';\n      div.style.transition = \"left \" + translateTime + \"ms, top \" + translateTime + \"ms, font-size \" + translateTime + \"ms\";\n      translatingElements.push(div);\n      this.transitionContainer.appendChild(div);\n      fn1(div, textElement, translationVectors, i);\n    }\n    top = Math.max(this.aceEditor.getFirstVisibleRow(), 0);\n    bottom = Math.min(this.aceEditor.getLastVisibleRow(), this.view.getViewNodeFor(this.tree).lineLength - 1);\n    aceScrollTop = this.aceEditor.session.getScrollTop();\n    treeView = this.view.getViewNodeFor(this.tree);\n    lineHeight = this.aceEditor.renderer.layerConfig.lineHeight;\n    fn2 = (function(_this) {\n      return function(div, line) {\n        return setTimeout((function() {\n          div.style.left = '0px';\n          div.style.top = (_this.aceEditor.session.documentToScreenRow(line, 0) * lineHeight - aceScrollTop) + 'px';\n          return div.style.fontSize = _this.aceFontSize();\n        }), fadeTime);\n      };\n    })(this);\n    for (line = k = ref2 = top, ref3 = bottom; ref2 <= ref3 ? k <= ref3 : k >= ref3; line = ref2 <= ref3 ? ++k : --k) {\n      div = document.createElement('div');\n      div.style.whiteSpace = 'pre';\n      div.innerText = div.textContent = line + 1;\n      div.style.left = 0;\n      div.style.top = (treeView.bounds[line].y + treeView.distanceToBase[line].above - this.view.opts.textHeight - this.fontAscent - this.scrollOffsets.main.y) + \"px\";\n      div.style.font = this.fontSize + 'px ' + this.fontFamily;\n      div.style.width = this.gutter.offsetWidth + \"px\";\n      translatingElements.push(div);\n      div.className = 'droplet-transitioning-element droplet-transitioning-gutter droplet-gutter-line';\n      if (this.annotations[line] != null) {\n        div.className += ' droplet_' + getMostSevereAnnotationType(this.annotations[line]);\n      }\n      div.style.transition = \"left \" + translateTime + \"ms, top \" + translateTime + \"ms, font-size \" + translateTime + \"ms\";\n      this.dropletElement.appendChild(div);\n      fn2(div, line);\n    }\n    this.lineNumberWrapper.style.display = 'none';\n    this.mainCanvas.style.transition = this.highlightCanvas.style.transition = this.cursorCanvas.style.opacity = \"opacity \" + fadeTime + \"ms linear\";\n    this.mainCanvas.style.opacity = this.highlightCanvas.style.opacity = this.cursorCanvas.style.opacity = 0;\n    paletteDisappearingWithMelt = this.paletteEnabled && !this.showPaletteInTextMode;\n    if (paletteDisappearingWithMelt) {\n      this.paletteHeader.style.zIndex = 0;\n      setTimeout(((function(_this) {\n        return function() {\n          _this.dropletElement.style.transition = _this.paletteWrapper.style.transition = \"left \" + translateTime + \"ms\";\n          _this.dropletElement.style.left = '0px';\n          return _this.paletteWrapper.style.left = (-_this.paletteWrapper.offsetWidth) + \"px\";\n        };\n      })(this)), fadeTime);\n    }\n    setTimeout(((function(_this) {\n      return function() {\n        var l, len1;\n        _this.dropletElement.style.transition = _this.paletteWrapper.style.transition = '';\n        _this.aceElement.style.top = '0px';\n        if (_this.showPaletteInTextMode && _this.paletteEnabled) {\n          _this.aceElement.style.left = _this.paletteWrapper.offsetWidth + \"px\";\n        } else {\n          _this.aceElement.style.left = '0px';\n        }\n        if (paletteDisappearingWithMelt) {\n          _this.paletteWrapper.style.top = '-9999px';\n          _this.paletteWrapper.style.left = '-9999px';\n        }\n        _this.dropletElement.style.top = '-9999px';\n        _this.dropletElement.style.left = '-9999px';\n        _this.currentlyAnimating = false;\n        _this.mainScroller.style.overflow = 'auto';\n        for (l = 0, len1 = translatingElements.length; l < len1; l++) {\n          div = translatingElements[l];\n          div.parentNode.removeChild(div);\n        }\n        _this.fireEvent('toggledone', [_this.currentlyUsingBlocks]);\n        if (cb != null) {\n          return cb();\n        }\n      };\n    })(this)), fadeTime + translateTime);\n    return {\n      success: true\n    };\n  }\n};\n\nEditor.prototype.aceFontSize = function() {\n  return parseFloat(this.aceEditor.getFontSize()) + 'px';\n};\n\nEditor.prototype.performFreezeAnimation = function(fadeTime, translateTime, cb) {\n  var setValueResult;\n  if (fadeTime == null) {\n    fadeTime = 500;\n  }\n  if (translateTime == null) {\n    translateTime = 500;\n  }\n  if (cb == null) {\n    cb = function() {};\n  }\n  if (!this.currentlyUsingBlocks && !this.currentlyAnimating) {\n    setValueResult = this.copyAceEditor();\n    if (!setValueResult.success) {\n      if (setValueResult.error) {\n        this.fireEvent('parseerror', [setValueResult.error]);\n      }\n      return setValueResult;\n    }\n    if (this.aceEditor.getFirstVisibleRow() === 0) {\n      this.mainScroller.scrollTop = 0;\n    } else {\n      this.mainScroller.scrollTop = this.view.getViewNodeFor(this.tree).bounds[this.aceEditor.getFirstVisibleRow()].y;\n    }\n    this.currentlyUsingBlocks = true;\n    this.currentlyAnimating = true;\n    this.fireEvent('statechange', [true]);\n    setTimeout(((function(_this) {\n      return function() {\n        var aceScrollTop, bottom, div, el, fn1, fn2, i, j, k, l, len, len1, line, lineHeight, paletteAppearingWithFreeze, ref1, ref2, ref3, ref4, textElement, textElements, top, translatingElements, translationVectors, treeView;\n        _this.mainScroller.style.overflow = 'hidden';\n        _this.dropletElement.style.width = _this.wrapperElement.clientWidth + 'px';\n        _this.redrawMain({\n          noText: true\n        });\n        _this.currentlyAnimating_suppressRedraw = true;\n        _this.aceElement.style.top = \"-9999px\";\n        _this.aceElement.style.left = \"-9999px\";\n        paletteAppearingWithFreeze = _this.paletteEnabled && !_this.showPaletteInTextMode;\n        if (paletteAppearingWithFreeze) {\n          _this.paletteWrapper.style.top = '0px';\n          _this.paletteWrapper.style.left = (-_this.paletteWrapper.offsetWidth) + \"px\";\n          _this.paletteHeader.style.zIndex = 0;\n        }\n        _this.dropletElement.style.top = \"0px\";\n        if (_this.paletteEnabled && !paletteAppearingWithFreeze) {\n          _this.dropletElement.style.left = _this.paletteWrapper.offsetWidth + \"px\";\n        } else {\n          _this.dropletElement.style.left = \"0px\";\n        }\n        ref1 = _this.computePlaintextTranslationVectors(), textElements = ref1.textElements, translationVectors = ref1.translationVectors;\n        translatingElements = [];\n        fn1 = function(div, textElement) {\n          return setTimeout((function() {\n            div.style.left = (textElement.bounds[0].x - _this.scrollOffsets.main.x) + \"px\";\n            div.style.top = (textElement.bounds[0].y - _this.scrollOffsets.main.y - _this.fontAscent) + \"px\";\n            return div.style.fontSize = _this.fontSize + 'px';\n          }), 0);\n        };\n        for (i = j = 0, len = textElements.length; j < len; i = ++j) {\n          textElement = textElements[i];\n          if (!(0 < textElement.bounds[0].bottom() - _this.scrollOffsets.main.y + translationVectors[i].y && textElement.bounds[0].y - _this.scrollOffsets.main.y + translationVectors[i].y < _this.mainCanvas.height)) {\n            continue;\n          }\n          div = document.createElement('div');\n          div.style.whiteSpace = 'pre';\n          div.innerText = div.textContent = textElement.model.value;\n          div.style.font = _this.aceFontSize() + ' ' + _this.fontFamily;\n          div.style.position = 'absolute';\n          div.style.left = (textElement.bounds[0].x - _this.scrollOffsets.main.x + translationVectors[i].x) + \"px\";\n          div.style.top = (textElement.bounds[0].y - _this.scrollOffsets.main.y + translationVectors[i].y) + \"px\";\n          div.className = 'droplet-transitioning-element';\n          div.style.transition = \"left \" + translateTime + \"ms, top \" + translateTime + \"ms, font-size \" + translateTime + \"ms\";\n          translatingElements.push(div);\n          _this.transitionContainer.appendChild(div);\n          fn1(div, textElement);\n        }\n        top = Math.max(_this.aceEditor.getFirstVisibleRow(), 0);\n        bottom = Math.min(_this.aceEditor.getLastVisibleRow(), _this.view.getViewNodeFor(_this.tree).lineLength - 1);\n        treeView = _this.view.getViewNodeFor(_this.tree);\n        lineHeight = _this.aceEditor.renderer.layerConfig.lineHeight;\n        aceScrollTop = _this.aceEditor.session.getScrollTop();\n        fn2 = function(div, line) {\n          return setTimeout((function() {\n            div.style.left = 0;\n            div.style.top = (treeView.bounds[line].y + treeView.distanceToBase[line].above - _this.view.opts.textHeight - _this.fontAscent - _this.scrollOffsets.main.y) + \"px\";\n            return div.style.fontSize = _this.fontSize + 'px';\n          }), 0);\n        };\n        for (line = k = ref2 = top, ref3 = bottom; ref2 <= ref3 ? k <= ref3 : k >= ref3; line = ref2 <= ref3 ? ++k : --k) {\n          div = document.createElement('div');\n          div.style.whiteSpace = 'pre';\n          div.innerText = div.textContent = line + 1;\n          div.style.font = _this.aceFontSize() + ' ' + _this.fontFamily;\n          div.style.width = _this.aceEditor.renderer.$gutter.offsetWidth + \"px\";\n          div.style.left = 0;\n          div.style.top = (_this.aceEditor.session.documentToScreenRow(line, 0) * lineHeight - aceScrollTop) + \"px\";\n          div.className = 'droplet-transitioning-element droplet-transitioning-gutter droplet-gutter-line';\n          if (_this.annotations[line] != null) {\n            div.className += ' droplet_' + getMostSevereAnnotationType(_this.annotations[line]);\n          }\n          div.style.transition = \"left \" + translateTime + \"ms, top \" + translateTime + \"ms, font-size \" + translateTime + \"ms\";\n          translatingElements.push(div);\n          _this.dropletElement.appendChild(div);\n          fn2(div, line);\n        }\n        ref4 = [_this.mainCanvas, _this.highlightCanvas, _this.cursorCanvas];\n        for (l = 0, len1 = ref4.length; l < len1; l++) {\n          el = ref4[l];\n          el.style.opacity = 0;\n        }\n        setTimeout((function() {\n          var len2, m, ref5;\n          ref5 = [_this.mainCanvas, _this.highlightCanvas, _this.cursorCanvas];\n          for (m = 0, len2 = ref5.length; m < len2; m++) {\n            el = ref5[m];\n            el.style.transition = \"opacity \" + fadeTime + \"ms linear\";\n          }\n          _this.mainCanvas.style.opacity = 1;\n          _this.highlightCanvas.style.opacity = 1;\n          if (_this.editorHasFocus()) {\n            return _this.cursorCanvas.style.opacity = 1;\n          } else {\n            return _this.cursorCanvas.style.opacity = CURSOR_UNFOCUSED_OPACITY;\n          }\n        }), translateTime);\n        _this.dropletElement.style.transition = \"left \" + fadeTime + \"ms\";\n        if (paletteAppearingWithFreeze) {\n          _this.paletteWrapper.style.transition = _this.dropletElement.style.transition;\n          _this.dropletElement.style.left = _this.paletteWrapper.offsetWidth + \"px\";\n          _this.paletteWrapper.style.left = '0px';\n        }\n        return setTimeout((function() {\n          var len2, m;\n          _this.dropletElement.style.transition = _this.paletteWrapper.style.transition = '';\n          _this.mainScroller.style.overflow = 'auto';\n          _this.currentlyAnimating = false;\n          _this.lineNumberWrapper.style.display = 'block';\n          _this.redrawMain();\n          _this.paletteHeader.style.zIndex = 257;\n          for (m = 0, len2 = translatingElements.length; m < len2; m++) {\n            div = translatingElements[m];\n            div.parentNode.removeChild(div);\n          }\n          _this.resizeBlockMode();\n          _this.fireEvent('toggledone', [_this.currentlyUsingBlocks]);\n          if (cb != null) {\n            return cb();\n          }\n        }), translateTime + fadeTime);\n      };\n    })(this)), 0);\n    return {\n      success: true\n    };\n  }\n};\n\nEditor.prototype.enablePalette = function(enabled) {\n  var activeElement;\n  if (!this.currentlyAnimating && this.paletteEnabled !== enabled) {\n    this.paletteEnabled = enabled;\n    this.currentlyAnimating = true;\n    if (this.currentlyUsingBlocks) {\n      activeElement = this.dropletElement;\n    } else {\n      activeElement = this.aceElement;\n    }\n    if (!this.paletteEnabled) {\n      activeElement.style.transition = this.paletteWrapper.style.transition = \"left 500ms\";\n      activeElement.style.left = '0px';\n      this.paletteWrapper.style.left = (-this.paletteWrapper.offsetWidth) + \"px\";\n      this.paletteHeader.style.zIndex = 0;\n      this.resize();\n      return setTimeout(((function(_this) {\n        return function() {\n          activeElement.style.transition = _this.paletteWrapper.style.transition = '';\n          _this.paletteWrapper.style.top = '-9999px';\n          _this.paletteWrapper.style.left = '-9999px';\n          _this.currentlyAnimating = false;\n          return _this.fireEvent('palettetoggledone', [_this.paletteEnabled]);\n        };\n      })(this)), 500);\n    } else {\n      this.paletteWrapper.style.top = '0px';\n      this.paletteWrapper.style.left = (-this.paletteWrapper.offsetWidth) + \"px\";\n      this.paletteHeader.style.zIndex = 257;\n      return setTimeout(((function(_this) {\n        return function() {\n          activeElement.style.transition = _this.paletteWrapper.style.transition = \"left 500ms\";\n          activeElement.style.left = _this.paletteWrapper.offsetWidth + \"px\";\n          _this.paletteWrapper.style.left = '0px';\n          return setTimeout((function() {\n            activeElement.style.transition = _this.paletteWrapper.style.transition = '';\n            _this.resize();\n            _this.currentlyAnimating = false;\n            return _this.fireEvent('palettetoggledone', [_this.paletteEnabled]);\n          }), 500);\n        };\n      })(this)), 0);\n    }\n  }\n};\n\nEditor.prototype.toggleBlocks = function(cb) {\n  if (this.currentlyUsingBlocks) {\n    return this.performMeltAnimation(500, 1000, cb);\n  } else {\n    return this.performFreezeAnimation(500, 500, cb);\n  }\n};\n\nhook('populate', 2, function() {\n  this.scrollOffsets = {\n    main: new this.draw.Point(0, 0),\n    palette: new this.draw.Point(0, 0)\n  };\n  this.mainScroller = document.createElement('div');\n  this.mainScroller.className = 'droplet-main-scroller';\n  this.mainScrollerStuffing = document.createElement('div');\n  this.mainScrollerStuffing.className = 'droplet-main-scroller-stuffing';\n  this.mainScroller.appendChild(this.mainScrollerStuffing);\n  this.dropletElement.appendChild(this.mainScroller);\n  this.wrapperElement.addEventListener('scroll', (function(_this) {\n    return function() {\n      return _this.wrapperElement.scrollTop = _this.wrapperElement.scrollLeft = 0;\n    };\n  })(this));\n  this.mainScroller.addEventListener('scroll', (function(_this) {\n    return function() {\n      _this.scrollOffsets.main.y = _this.mainScroller.scrollTop;\n      _this.scrollOffsets.main.x = _this.mainScroller.scrollLeft;\n      _this.mainCtx.setTransform(1, 0, 0, 1, -_this.scrollOffsets.main.x, -_this.scrollOffsets.main.y);\n      _this.highlightCtx.setTransform(1, 0, 0, 1, -_this.scrollOffsets.main.x, -_this.scrollOffsets.main.y);\n      _this.cursorCtx.setTransform(1, 0, 0, 1, -_this.scrollOffsets.main.x, -_this.scrollOffsets.main.y);\n      return _this.redrawMain();\n    };\n  })(this));\n  this.paletteScroller = document.createElement('div');\n  this.paletteScroller.className = 'droplet-palette-scroller';\n  this.paletteScrollerStuffing = document.createElement('div');\n  this.paletteScrollerStuffing.className = 'droplet-palette-scroller-stuffing';\n  this.paletteScroller.appendChild(this.paletteScrollerStuffing);\n  this.paletteElement.appendChild(this.paletteScroller);\n  return this.paletteScroller.addEventListener('scroll', (function(_this) {\n    return function() {\n      _this.scrollOffsets.palette.y = _this.paletteScroller.scrollTop;\n      _this.paletteCtx.setTransform(1, 0, 0, 1, -_this.scrollOffsets.palette.x, -_this.scrollOffsets.palette.y);\n      _this.paletteHighlightCtx.setTransform(1, 0, 0, 1, -_this.scrollOffsets.palette.x, -_this.scrollOffsets.palette.y);\n      return _this.redrawPalette();\n    };\n  })(this));\n});\n\nEditor.prototype.resizeMainScroller = function() {\n  this.mainScroller.style.width = this.dropletElement.offsetWidth + \"px\";\n  return this.mainScroller.style.height = this.dropletElement.offsetHeight + \"px\";\n};\n\nhook('resize_palette', 0, function() {\n  this.paletteScroller.style.top = this.paletteHeader.offsetHeight + \"px\";\n  this.paletteScroller.style.width = this.paletteCanvas.offsetWidth + \"px\";\n  return this.paletteScroller.style.height = this.paletteCanvas.offsetHeight + \"px\";\n});\n\nhook('redraw_main', 1, function() {\n  var bounds, j, len, record, ref1, ref2;\n  bounds = this.view.getViewNodeFor(this.tree).getBounds();\n  ref1 = this.floatingBlocks;\n  for (j = 0, len = ref1.length; j < len; j++) {\n    record = ref1[j];\n    bounds.unite(this.view.getViewNodeFor(record.block).getBounds());\n  }\n  this.mainScrollerStuffing.style.width = (bounds.right()) + \"px\";\n  return this.mainScrollerStuffing.style.height = (bounds.bottom() + ((ref2 = this.options.extraBottomHeight) != null ? ref2 : this.fontSize)) + \"px\";\n});\n\nhook('redraw_palette', 0, function() {\n  var bounds, entry, j, len, ref1;\n  bounds = new this.draw.NoRectangle();\n  ref1 = this.currentPaletteBlocks;\n  for (j = 0, len = ref1.length; j < len; j++) {\n    entry = ref1[j];\n    bounds.unite(this.paletteView.getViewNodeFor(entry.block).getBounds());\n  }\n  return this.paletteScrollerStuffing.style.height = (bounds.bottom()) + \"px\";\n});\n\nhook('populate', 0, function() {\n  var metrics;\n  this.fontSize = 15;\n  this.fontFamily = 'Courier New';\n  metrics = helper.fontMetrics(this.fontFamily, this.fontSize);\n  this.fontAscent = metrics.prettytop;\n  return this.fontDescent = metrics.descent;\n});\n\nEditor.prototype.setFontSize_raw = function(fontSize) {\n  var metrics;\n  if (this.fontSize !== fontSize) {\n    this.fontSize = fontSize;\n    this.paletteHeader.style.fontSize = fontSize + \"px\";\n    this.gutter.style.fontSize = fontSize + \"px\";\n    this.tooltipElement.style.fontSize = fontSize + \"px\";\n    this.view.opts.textHeight = this.dragView.opts.textHeight = helper.getFontHeight(this.fontFamily, this.fontSize);\n    metrics = helper.fontMetrics(this.fontFamily, this.fontSize);\n    this.fontAscent = metrics.prettytop;\n    this.fontDescent = metrics.descent;\n    this.view.clearCache();\n    this.dragView.clearCache();\n    this.gutter.style.width = this.aceEditor.renderer.$gutterLayer.gutterWidth + 'px';\n    this.redrawMain();\n    return this.rebuildPalette();\n  }\n};\n\nEditor.prototype.setFontFamily = function(fontFamily) {\n  this.draw.setGlobalFontFamily(fontFamily);\n  this.fontFamily = fontFamily;\n  this.view.opts.textHeight = helper.getFontHeight(this.fontFamily, this.fontSize);\n  this.fontAscent = helper.fontMetrics(this.fontFamily, this.fontSize).prettytop;\n  this.view.clearCache();\n  this.dragView.clearCache();\n  this.gutter.style.fontFamily = fontFamily;\n  this.tooltipElement.style.fontFamily = fontFamily;\n  this.redrawMain();\n  return this.rebuildPalette();\n};\n\nEditor.prototype.setFontSize = function(fontSize) {\n  this.setFontSize_raw(fontSize);\n  return this.resizeBlockMode();\n};\n\nhook('populate', 0, function() {\n  this.markedLines = {};\n  this.markedBlocks = {};\n  this.nextMarkedBlockId = 0;\n  return this.extraMarks = {};\n});\n\nEditor.prototype.getHighlightPath = function(model, style, view) {\n  var path;\n  if (view == null) {\n    view = this.view;\n  }\n  path = view.getViewNodeFor(model).path.clone();\n  path.style.fillColor = null;\n  path.style.strokeColor = style.color;\n  path.style.lineWidth = 3;\n  path.noclip = true;\n  path.bevel = false;\n  return path;\n};\n\nEditor.prototype.markLine = function(line, style) {\n  var block;\n  block = this.tree.getBlockOnLine(line);\n  if (block != null) {\n    this.markedLines[line] = {\n      model: block,\n      style: style\n    };\n  }\n  return this.redrawHighlights();\n};\n\nEditor.prototype.markBlock = function(block, style) {\n  var key;\n  key = this.nextMarkedBlockId++;\n  this.markedBlocks[key] = {\n    model: block,\n    style: style\n  };\n  return key;\n};\n\nEditor.prototype.mark = function(location, style) {\n  var block, key, ref1;\n  block = this.tree.getFromTextLocation(location);\n  block = (ref1 = block.container) != null ? ref1 : block;\n  key = this.nextMarkedBlockId++;\n  this.markedBlocks[key] = {\n    model: block,\n    style: style\n  };\n  this.redrawHighlights();\n  return key;\n};\n\nEditor.prototype.unmark = function(key) {\n  delete this.markedBlocks[key];\n  this.redrawHighlights();\n  return true;\n};\n\nEditor.prototype.unmarkLine = function(line) {\n  delete this.markedLines[line];\n  return this.redrawHighlights();\n};\n\nEditor.prototype.clearLineMarks = function() {\n  this.markedLines = this.markedBlocks = {};\n  return this.redrawHighlights();\n};\n\nhook('populate', 0, function() {\n  return this.lastHoveredLine = null;\n});\n\nhook('mousemove', 0, function(point, event, state) {\n  var hoveredLine, mainPoint, treeView;\n  if ((this.draggingBlock == null) && (this.clickedBlock == null) && this.hasEvent('linehover')) {\n    if (!this.trackerPointIsInMainScroller(point)) {\n      return;\n    }\n    mainPoint = this.trackerPointToMain(point);\n    treeView = this.view.getViewNodeFor(this.tree);\n    if ((this.lastHoveredLine != null) && (treeView.bounds[this.lastHoveredLine] != null) && treeView.bounds[this.lastHoveredLine].contains(mainPoint)) {\n      return;\n    }\n    hoveredLine = this.findLineNumberAtCoordinate(mainPoint.y);\n    if (!treeView.bounds[hoveredLine].contains(mainPoint)) {\n      hoveredLine = null;\n    }\n    if (hoveredLine !== this.lastHoveredLine) {\n      return this.fireEvent('linehover', [\n        {\n          line: this.lastHoveredLine = hoveredLine\n        }\n      ]);\n    }\n  }\n});\n\nhook('populate', 0, function() {\n  return this.trimWhitespace = false;\n});\n\nEditor.prototype.setTrimWhitespace = function(trimWhitespace) {\n  return this.trimWhitespace = trimWhitespace;\n};\n\nEditor.prototype.setValue_raw = function(value) {\n  var e, error, newParse, removal;\n  try {\n    if (this.trimWhitespace) {\n      value = value.trim();\n    }\n    newParse = this.mode.parse(value, {\n      wrapAtRoot: true\n    });\n    if (this.tree.start.next !== this.tree.end) {\n      removal = new model.List(this.tree.start.next, this.tree.end.prev);\n      this.spliceOut(removal);\n    }\n    if (newParse.start.next !== newParse.end) {\n      this.spliceIn(new model.List(newParse.start.next, newParse.end.prev), this.tree.start);\n    }\n    this.removeBlankLines();\n    this.redrawMain();\n    return {\n      success: true\n    };\n  } catch (error) {\n    e = error;\n    return {\n      success: false,\n      error: e\n    };\n  }\n};\n\nEditor.prototype.setValue = function(value) {\n  var oldScrollTop, result;\n  oldScrollTop = this.aceEditor.session.getScrollTop();\n  this.setAceValue(value);\n  this.resizeTextMode();\n  this.aceEditor.session.setScrollTop(oldScrollTop);\n  if (this.currentlyUsingBlocks) {\n    result = this.setValue_raw(value);\n    if (result.success === false) {\n      this.setEditorState(false);\n      this.aceEditor.setValue(value);\n      if (result.error) {\n        return this.fireEvent('parseerror', [result.error]);\n      }\n    }\n  }\n};\n\nEditor.prototype.addEmptyLine = function(str) {\n  if (str.length === 0 || str[str.length - 1] === '\\n') {\n    return str;\n  } else {\n    return str + '\\n';\n  }\n};\n\nEditor.prototype.getValue = function() {\n  if (this.currentlyUsingBlocks) {\n    return this.addEmptyLine(this.tree.stringify());\n  } else {\n    return this.getAceValue();\n  }\n};\n\nEditor.prototype.getAceValue = function() {\n  var value;\n  value = this.aceEditor.getValue();\n  return this.lastAceSeenValue = value;\n};\n\nEditor.prototype.setAceValue = function(value) {\n  if (value !== this.lastAceSeenValue) {\n    this.aceEditor.setValue(value, 1);\n    return this.lastAceSeenValue = value;\n  }\n};\n\nEditor.prototype.on = function(event, handler) {\n  return this.bindings[event] = handler;\n};\n\nEditor.prototype.once = function(event, handler) {\n  return this.bindings[event] = function() {\n    handler.apply(this, arguments);\n    return this.bindings[event] = null;\n  };\n};\n\nEditor.prototype.fireEvent = function(event, args) {\n  if (event in this.bindings) {\n    return this.bindings[event].apply(this, args);\n  }\n};\n\nEditor.prototype.hasEvent = function(event) {\n  return event in this.bindings && (this.bindings[event] != null);\n};\n\nEditor.prototype.setEditorState = function(useBlocks) {\n  var oldScrollTop, paletteVisibleInNewState;\n  if (useBlocks) {\n    if (!this.currentlyUsingBlocks) {\n      this.setValue(this.getAceValue());\n    }\n    this.dropletElement.style.top = '0px';\n    if (this.paletteEnabled) {\n      this.paletteWrapper.style.top = this.paletteWrapper.style.left = '0px';\n      this.dropletElement.style.left = this.paletteWrapper.offsetWidth + \"px\";\n    } else {\n      this.paletteWrapper.style.top = this.paletteWrapper.style.left = '-9999px';\n      this.dropletElement.style.left = '0px';\n    }\n    this.aceElement.style.top = this.aceElement.style.left = '-9999px';\n    this.currentlyUsingBlocks = true;\n    this.lineNumberWrapper.style.display = 'block';\n    this.mainCanvas.opacity = this.paletteWrapper.opacity = this.highlightCanvas.opacity = 1;\n    this.resizeBlockMode();\n    return this.redrawMain();\n  } else {\n    this.hideDropdown();\n    paletteVisibleInNewState = this.paletteEnabled && this.showPaletteInTextMode;\n    oldScrollTop = this.aceEditor.session.getScrollTop();\n    if (this.currentlyUsingBlocks) {\n      this.setAceValue(this.getValue());\n    }\n    this.aceEditor.resize(true);\n    this.aceEditor.session.setScrollTop(oldScrollTop);\n    this.dropletElement.style.top = this.dropletElement.style.left = '-9999px';\n    if (paletteVisibleInNewState) {\n      this.paletteWrapper.style.top = this.paletteWrapper.style.left = '0px';\n    } else {\n      this.paletteWrapper.style.top = this.paletteWrapper.style.left = '-9999px';\n    }\n    this.aceElement.style.top = '0px';\n    if (paletteVisibleInNewState) {\n      this.aceElement.style.left = this.paletteWrapper.offsetWidth + \"px\";\n    } else {\n      this.aceElement.style.left = '0px';\n    }\n    this.currentlyUsingBlocks = false;\n    this.lineNumberWrapper.style.display = 'none';\n    this.mainCanvas.opacity = this.highlightCanvas.opacity = 0;\n    return this.resizeBlockMode();\n  }\n};\n\nhook('populate', 0, function() {\n  this.dragCover = document.createElement('div');\n  this.dragCover.className = 'droplet-drag-cover';\n  this.dragCover.style.display = 'none';\n  return document.body.appendChild(this.dragCover);\n});\n\nhook('mousedown', -1, function() {\n  if (this.clickedBlock != null) {\n    return this.dragCover.style.display = 'block';\n  }\n});\n\nhook('mouseup', 0, function() {\n  this.dragCanvas.style.top = this.dragCanvas.style.left = '-9999px';\n  return this.dragCover.style.display = 'none';\n});\n\nhook('mousedown', 10, function() {\n  if (this.draggingBlock != null) {\n    return this.endDrag();\n  }\n});\n\nEditor.prototype.endDrag = function() {\n  if (this.cursorAtSocket()) {\n    this.setCursor(this.cursor, function(x) {\n      return x.type !== 'socketStart';\n    });\n  }\n  this.draggingBlock = null;\n  this.draggingOffset = null;\n  this.lastHighlight = null;\n  this.clearDrag();\n  this.redrawMain();\n};\n\nhook('rebuild_palette', 0, function() {\n  return this.fireEvent('changepalette', []);\n});\n\ntouchEvents = {\n  'touchstart': 'mousedown',\n  'touchmove': 'mousemove',\n  'touchend': 'mouseup'\n};\n\nTOUCH_SELECTION_TIMEOUT = 1000;\n\nEditor.prototype.touchEventToPoint = function(event, index) {\n  var absolutePoint;\n  absolutePoint = new this.draw.Point(event.changedTouches[index].clientX, event.changedTouches[index].clientY);\n  return absolutePoint;\n};\n\nEditor.prototype.queueLassoMousedown = function(trackPoint, event) {\n  return this.lassoSelectStartTimeout = setTimeout(((function(_this) {\n    return function() {\n      var handler, j, len, ref1, results, state;\n      state = {};\n      ref1 = editorBindings.mousedown;\n      results = [];\n      for (j = 0, len = ref1.length; j < len; j++) {\n        handler = ref1[j];\n        results.push(handler.call(_this, trackPoint, event, state));\n      }\n      return results;\n    };\n  })(this)), TOUCH_SELECTION_TIMEOUT);\n};\n\nhook('populate', 0, function() {\n  this.touchScrollAnchor = new this.draw.Point(0, 0);\n  this.lassoSelectStartTimeout = null;\n  this.wrapperElement.addEventListener('touchstart', (function(_this) {\n    return function(event) {\n      var handler, j, len, ref1, state, trackPoint;\n      clearTimeout(_this.lassoSelectStartTimeout);\n      trackPoint = _this.touchEventToPoint(event, 0);\n      state = {\n        suppressLassoSelect: true\n      };\n      ref1 = editorBindings.mousedown;\n      for (j = 0, len = ref1.length; j < len; j++) {\n        handler = ref1[j];\n        handler.call(_this, trackPoint, event, state);\n      }\n      if (state.consumedHitTest) {\n        return event.preventDefault();\n      } else {\n        return _this.queueLassoMousedown(trackPoint, event);\n      }\n    };\n  })(this));\n  this.wrapperElement.addEventListener('touchmove', (function(_this) {\n    return function(event) {\n      var handler, j, len, ref1, state, trackPoint;\n      clearTimeout(_this.lassoSelectStartTimeout);\n      trackPoint = _this.touchEventToPoint(event, 0);\n      if (!((_this.clickedBlock != null) || (_this.draggingBlock != null))) {\n        _this.queueLassoMousedown(trackPoint, event);\n      }\n      state = {};\n      ref1 = editorBindings.mousemove;\n      for (j = 0, len = ref1.length; j < len; j++) {\n        handler = ref1[j];\n        handler.call(_this, trackPoint, event, state);\n      }\n      if ((_this.clickedBlock != null) || (_this.draggingBlock != null) || (_this.lassoSelectAnchor != null) || _this.textInputSelecting) {\n        return event.preventDefault();\n      }\n    };\n  })(this));\n  return this.wrapperElement.addEventListener('touchend', (function(_this) {\n    return function(event) {\n      var handler, j, len, ref1, state, trackPoint;\n      clearTimeout(_this.lassoSelectStartTimeout);\n      trackPoint = _this.touchEventToPoint(event, 0);\n      state = {};\n      ref1 = editorBindings.mouseup;\n      for (j = 0, len = ref1.length; j < len; j++) {\n        handler = ref1[j];\n        handler.call(_this, trackPoint, event, state);\n      }\n      return event.preventDefault();\n    };\n  })(this));\n});\n\nhook('populate', 0, function() {\n  this.cursorCanvas = document.createElement('canvas');\n  this.cursorCanvas.className = 'droplet-highlight-canvas droplet-cursor-canvas';\n  this.cursorCtx = this.cursorCanvas.getContext('2d');\n  return this.dropletElement.appendChild(this.cursorCanvas);\n});\n\nEditor.prototype.resizeCursorCanvas = function() {\n  this.cursorCanvas.width = this.dropletElement.offsetWidth - this.gutter.offsetWidth;\n  this.cursorCanvas.style.width = this.cursorCanvas.width + \"px\";\n  this.cursorCanvas.height = this.dropletElement.offsetHeight;\n  this.cursorCanvas.style.height = this.cursorCanvas.height + \"px\";\n  return this.cursorCanvas.style.left = this.mainCanvas.offsetLeft + \"px\";\n};\n\nEditor.prototype.strokeCursor = function(point) {\n  var arcAngle, arcCenter, endAngle, h, startAngle, w;\n  if (point == null) {\n    return;\n  }\n  this.cursorCtx.beginPath();\n  this.cursorCtx.fillStyle = this.cursorCtx.strokeStyle = '#000';\n  this.cursorCtx.lineCap = 'round';\n  this.cursorCtx.lineWidth = 3;\n  w = this.view.opts.tabWidth / 2 - CURSOR_WIDTH_DECREASE;\n  h = this.view.opts.tabHeight - CURSOR_HEIGHT_DECREASE;\n  arcCenter = new this.draw.Point(point.x + this.view.opts.tabOffset + w + CURSOR_WIDTH_DECREASE, point.y - (w * w + h * h) / (2 * h) + h + CURSOR_HEIGHT_DECREASE / 2);\n  arcAngle = Math.atan2(w, (w * w + h * h) / (2 * h) - h);\n  startAngle = 0.5 * Math.PI - arcAngle;\n  endAngle = 0.5 * Math.PI + arcAngle;\n  this.cursorCtx.arc(arcCenter.x, arcCenter.y, (w * w + h * h) / (2 * h), startAngle, endAngle);\n  return this.cursorCtx.stroke();\n};\n\nEditor.prototype.highlightFlashShow = function() {\n  if (this.flashTimeout != null) {\n    clearTimeout(this.flashTimeout);\n  }\n  this.cursorCanvas.style.display = 'block';\n  this.highlightsCurrentlyShown = true;\n  return this.flashTimeout = setTimeout(((function(_this) {\n    return function() {\n      return _this.flash();\n    };\n  })(this)), 500);\n};\n\nEditor.prototype.highlightFlashHide = function() {\n  if (this.flashTimeout != null) {\n    clearTimeout(this.flashTimeout);\n  }\n  this.cursorCanvas.style.display = 'none';\n  this.highlightsCurrentlyShown = false;\n  return this.flashTimeout = setTimeout(((function(_this) {\n    return function() {\n      return _this.flash();\n    };\n  })(this)), 500);\n};\n\nEditor.prototype.editorHasFocus = function() {\n  var ref1;\n  return ((ref1 = document.activeElement) === this.dropletElement || ref1 === this.hiddenInput || ref1 === this.copyPasteInput) && document.hasFocus();\n};\n\nEditor.prototype.flash = function() {\n  if ((this.lassoSelection != null) || (this.draggingBlock != null) || (this.cursorAtSocket() && this.textInputHighlighted) || !this.highlightsCurrentlyShown || !this.editorHasFocus()) {\n    return this.highlightFlashShow();\n  } else {\n    return this.highlightFlashHide();\n  }\n};\n\nhook('populate', 0, function() {\n  var blurCursors, focusCursors;\n  this.highlightsCurrentlyShown = false;\n  blurCursors = (function(_this) {\n    return function() {\n      _this.highlightFlashShow();\n      _this.cursorCanvas.style.transition = '';\n      return _this.cursorCanvas.style.opacity = CURSOR_UNFOCUSED_OPACITY;\n    };\n  })(this);\n  this.dropletElement.addEventListener('blur', blurCursors);\n  this.hiddenInput.addEventListener('blur', blurCursors);\n  this.copyPasteInput.addEventListener('blur', blurCursors);\n  focusCursors = (function(_this) {\n    return function() {\n      _this.highlightFlashShow();\n      _this.cursorCanvas.style.transition = '';\n      return _this.cursorCanvas.style.opacity = 1;\n    };\n  })(this);\n  this.dropletElement.addEventListener('focus', focusCursors);\n  this.hiddenInput.addEventListener('focus', focusCursors);\n  this.copyPasteInput.addEventListener('focus', focusCursors);\n  return this.flashTimeout = setTimeout(((function(_this) {\n    return function() {\n      return _this.flash();\n    };\n  })(this)), 0);\n});\n\nEditor.prototype.viewOrChildrenContains = function(model, point, view) {\n  var childObj, j, len, modelView, ref1;\n  if (view == null) {\n    view = this.view;\n  }\n  modelView = view.getViewNodeFor(model);\n  if (modelView.path.contains(point)) {\n    return true;\n  }\n  ref1 = modelView.children;\n  for (j = 0, len = ref1.length; j < len; j++) {\n    childObj = ref1[j];\n    if (this.viewOrChildrenContains(childObj.child, point, view)) {\n      return true;\n    }\n  }\n  return false;\n};\n\nhook('populate', 0, function() {\n  this.gutter = document.createElement('div');\n  this.gutter.className = 'droplet-gutter';\n  this.lineNumberWrapper = document.createElement('div');\n  this.gutter.appendChild(this.lineNumberWrapper);\n  this.gutterVersion = -1;\n  this.lastGutterWidth = null;\n  this.lineNumberTags = {};\n  this.mainScroller.appendChild(this.gutter);\n  this.annotations = {};\n  this.breakpoints = {};\n  this.tooltipElement = document.createElement('div');\n  this.tooltipElement.className = 'droplet-tooltip';\n  this.dropletElement.appendChild(this.tooltipElement);\n  return this.aceEditor.on('guttermousedown', (function(_this) {\n    return function(e) {\n      var row, target;\n      target = e.domEvent.target;\n      if (target.className.indexOf('ace_gutter-cell') === -1) {\n        return;\n      }\n      row = e.getDocumentPosition().row;\n      e.stop();\n      return _this.fireEvent('guttermousedown', [\n        {\n          line: row,\n          event: e.domEvent\n        }\n      ]);\n    };\n  })(this));\n});\n\nhook('mousedown', 11, function(point, event, state) {\n  var clickedLine, mainPoint, treeView;\n  if (!this.trackerPointIsInGutter(point)) {\n    return;\n  }\n  mainPoint = this.trackerPointToMain(point);\n  treeView = this.view.getViewNodeFor(this.tree);\n  clickedLine = this.findLineNumberAtCoordinate(mainPoint.y);\n  this.fireEvent('guttermousedown', [\n    {\n      line: clickedLine,\n      event: event\n    }\n  ]);\n  return true;\n});\n\nEditor.prototype.setBreakpoint = function(row) {\n  this.aceEditor.session.setBreakpoint(row);\n  this.breakpoints[row] = true;\n  return this.redrawGutter(false);\n};\n\nEditor.prototype.clearBreakpoint = function(row) {\n  this.aceEditor.session.clearBreakpoint(row);\n  this.breakpoints[row] = false;\n  return this.redrawGutter(false);\n};\n\nEditor.prototype.clearBreakpoints = function(row) {\n  this.aceEditor.session.clearBreakpoints();\n  this.breakpoints = {};\n  return this.redrawGutter(false);\n};\n\nEditor.prototype.getBreakpoints = function(row) {\n  return this.aceEditor.session.getBreakpoints();\n};\n\nEditor.prototype.setAnnotations = function(annotations) {\n  var base, el, i, j, len, name;\n  this.aceEditor.session.setAnnotations(annotations);\n  this.annotations = {};\n  for (i = j = 0, len = annotations.length; j < len; i = ++j) {\n    el = annotations[i];\n    if ((base = this.annotations)[name = el.row] == null) {\n      base[name] = [];\n    }\n    this.annotations[el.row].push(el);\n  }\n  return this.redrawGutter(false);\n};\n\nEditor.prototype.resizeGutter = function() {\n  if (this.lastGutterWidth !== this.aceEditor.renderer.$gutterLayer.gutterWidth) {\n    this.lastGutterWidth = this.aceEditor.renderer.$gutterLayer.gutterWidth;\n    this.gutter.style.width = this.lastGutterWidth + 'px';\n    return this.resize();\n  }\n  return this.gutter.style.height = (Math.max(this.dropletElement.offsetHeight, this.mainScrollerStuffing.offsetHeight)) + \"px\";\n};\n\nEditor.prototype.addLineNumberForLine = function(line) {\n  var lineDiv, title, treeView;\n  treeView = this.view.getViewNodeFor(this.tree);\n  if (line in this.lineNumberTags) {\n    lineDiv = this.lineNumberTags[line];\n  } else {\n    lineDiv = document.createElement('div');\n    lineDiv.innerText = lineDiv.textContent = line + 1;\n    this.lineNumberTags[line] = lineDiv;\n  }\n  lineDiv.className = 'droplet-gutter-line';\n  if (this.annotations[line] != null) {\n    lineDiv.className += ' droplet_' + getMostSevereAnnotationType(this.annotations[line]);\n    title = this.annotations[line].map(function(x) {\n      return x.text;\n    }).join('\\n');\n    lineDiv.addEventListener('mouseover', (function(_this) {\n      return function() {\n        _this.tooltipElement.innerText = _this.tooltipElement.textContent = title;\n        return _this.tooltipElement.style.display = 'block';\n      };\n    })(this));\n    lineDiv.addEventListener('mousemove', (function(_this) {\n      return function(event) {\n        _this.tooltipElement.style.left = event.pageX + 'px';\n        return _this.tooltipElement.style.top = event.pageY + 'px';\n      };\n    })(this));\n    lineDiv.addEventListener('mouseout', (function(_this) {\n      return function() {\n        return _this.tooltipElement.style.display = 'none';\n      };\n    })(this));\n  }\n  if (this.breakpoints[line]) {\n    lineDiv.className += ' droplet_breakpoint';\n  }\n  lineDiv.style.top = treeView.bounds[line].y + \"px\";\n  lineDiv.style.paddingTop = (treeView.distanceToBase[line].above - this.view.opts.textHeight - this.fontAscent) + \"px\";\n  lineDiv.style.paddingBottom = \"\" + (treeView.distanceToBase[line].below - this.fontDescent);\n  lineDiv.style.height = treeView.bounds[line].height + 'px';\n  lineDiv.style.fontSize = this.fontSize + 'px';\n  return this.lineNumberWrapper.appendChild(lineDiv);\n};\n\nTYPE_SEVERITY = {\n  'error': 2,\n  'warning': 1,\n  'info': 0\n};\n\nTYPE_FROM_SEVERITY = ['info', 'warning', 'error'];\n\ngetMostSevereAnnotationType = function(arr) {\n  return TYPE_FROM_SEVERITY[Math.max.apply(this, arr.map(function(x) {\n    return TYPE_SEVERITY[x.type];\n  }))];\n};\n\nEditor.prototype.findLineNumberAtCoordinate = function(coord) {\n  var end, pivot, start, treeView;\n  treeView = this.view.getViewNodeFor(this.tree);\n  start = 0;\n  end = treeView.bounds.length;\n  pivot = Math.floor((start + end) / 2);\n  while (treeView.bounds[pivot].y !== coord && start < end) {\n    if (start === pivot || end === pivot) {\n      return pivot;\n    }\n    if (treeView.bounds[pivot].y > coord) {\n      end = pivot;\n    } else {\n      start = pivot;\n    }\n    if (end < 0) {\n      return 0;\n    }\n    if (start >= treeView.bounds.length) {\n      return treeView.bounds.length - 1;\n    }\n    pivot = Math.floor((start + end) / 2);\n  }\n  return pivot;\n};\n\nhook('redraw_main', 0, function(changedBox) {\n  return this.redrawGutter(changedBox);\n});\n\nEditor.prototype.redrawGutter = function(changedBox) {\n  var bottom, j, line, ref1, ref2, ref3, tag, top, treeView;\n  if (changedBox == null) {\n    changedBox = true;\n  }\n  treeView = this.view.getViewNodeFor(this.tree);\n  top = this.findLineNumberAtCoordinate(this.scrollOffsets.main.y);\n  bottom = this.findLineNumberAtCoordinate(this.scrollOffsets.main.y + this.mainCanvas.height);\n  for (line = j = ref1 = top, ref2 = bottom; ref1 <= ref2 ? j <= ref2 : j >= ref2; line = ref1 <= ref2 ? ++j : --j) {\n    this.addLineNumberForLine(line);\n  }\n  ref3 = this.lineNumberTags;\n  for (line in ref3) {\n    tag = ref3[line];\n    if (line < top || line > bottom) {\n      this.lineNumberTags[line].parentNode.removeChild(this.lineNumberTags[line]);\n      delete this.lineNumberTags[line];\n    }\n  }\n  if (changedBox) {\n    return this.resizeGutter();\n  }\n};\n\nEditor.prototype.setPaletteWidth = function(width) {\n  this.paletteWrapper.style.width = width + 'px';\n  return this.resizeBlockMode();\n};\n\nhook('populate', 1, function() {\n  var pressedVKey, pressedXKey;\n  this.copyPasteInput = document.createElement('textarea');\n  this.copyPasteInput.style.position = 'absolute';\n  this.copyPasteInput.style.left = this.copyPasteInput.style.top = '-9999px';\n  this.dropletElement.appendChild(this.copyPasteInput);\n  pressedVKey = false;\n  pressedXKey = false;\n  this.copyPasteInput.addEventListener('keydown', function(event) {\n    pressedVKey = pressedXKey = false;\n    if (event.keyCode === 86) {\n      return pressedVKey = true;\n    } else if (event.keyCode === 88) {\n      return pressedXKey = true;\n    }\n  });\n  return this.copyPasteInput.addEventListener('input', (function(_this) {\n    return function() {\n      var blocks, e, error, lines, minIndent, str;\n      if (_this.readOnly) {\n        return;\n      }\n      if (pressedVKey && !_this.cursorAtSocket()) {\n        str = _this.copyPasteInput.value;\n        lines = str.split('\\n');\n        minIndent = lines.map(function(line) {\n          return line.length - line.trimLeft().length;\n        }).reduce(function(a, b) {\n          return Math.min(a, b);\n        });\n        str = lines.map(function(line) {\n          return line.slice(minIndent);\n        }).join('\\n');\n        str = str.replace(/^\\n*|\\n*$/g, '');\n        try {\n          blocks = _this.mode.parse(str);\n          blocks = new model.List(blocks.start.next, blocks.end.prev);\n        } catch (error) {\n          e = error;\n          blocks = null;\n        }\n        if (blocks == null) {\n          return;\n        }\n        _this.undoCapture();\n        _this.spliceIn(blocks, _this.getCursor());\n        _this.setCursor(blocks.end);\n        _this.redrawMain();\n        return _this.copyPasteInput.setSelectionRange(0, _this.copyPasteInput.value.length);\n      } else if (pressedXKey && (_this.lassoSelection != null)) {\n        _this.spliceOut(_this.lassoSelection);\n        _this.lassoSelection = null;\n        return _this.redrawMain();\n      }\n    };\n  })(this));\n});\n\nhook('keydown', 0, function(event, state) {\n  var ref1, x, y;\n  if (ref1 = event.which, indexOf.call(command_modifiers, ref1) >= 0) {\n    if (!this.cursorAtSocket()) {\n      x = document.body.scrollLeft;\n      y = document.body.scrollTop;\n      this.copyPasteInput.focus();\n      window.scrollTo(x, y);\n      if (this.lassoSelection != null) {\n        this.copyPasteInput.value = this.lassoSelection.stringifyInPlace();\n      }\n      return this.copyPasteInput.setSelectionRange(0, this.copyPasteInput.value.length);\n    }\n  }\n});\n\nhook('keyup', 0, function(point, event, state) {\n  var ref1;\n  if (ref1 = event.which, indexOf.call(command_modifiers, ref1) >= 0) {\n    if (this.cursorAtSocket()) {\n      return this.hiddenInput.focus();\n    } else {\n      return this.dropletElement.focus();\n    }\n  }\n});\n\nEditor.prototype.overflowsX = function() {\n  return this.documentDimensions().width > this.viewportDimensions().width;\n};\n\nEditor.prototype.overflowsY = function() {\n  return this.documentDimensions().height > this.viewportDimensions().height;\n};\n\nEditor.prototype.documentDimensions = function() {\n  var bounds;\n  bounds = this.view.getViewNodeFor(this.tree).totalBounds;\n  return {\n    width: bounds.width,\n    height: bounds.height\n  };\n};\n\nEditor.prototype.viewportDimensions = function() {\n  return {\n    width: this.mainCanvas.width,\n    height: this.mainCanvas.height\n  };\n};\n\nEditor.prototype.getLineMetrics = function(row) {\n  var bounds, viewNode;\n  viewNode = this.view.getViewNodeFor(this.tree);\n  bounds = (new this.view.draw.Rectangle()).copy(viewNode.bounds[row]);\n  bounds.x += this.mainCanvas.offsetLeft + this.mainCanvas.offsetParent.offsetLeft;\n  return {\n    bounds: bounds,\n    distanceToBase: {\n      above: viewNode.distanceToBase[row].above,\n      below: viewNode.distanceToBase[row].below\n    }\n  };\n};\n\nEditor.prototype.dumpNodeForDebug = function(hitTestResult, line) {\n  console.log('Model node:');\n  console.log(hitTestResult.serialize());\n  console.log('View node:');\n  return console.log(this.view.getViewNodeFor(hitTestResult).serialize(line));\n};\n\nfor (key in unsortedEditorBindings) {\n  unsortedEditorBindings[key].sort(function(a, b) {\n    if (a.priority > b.priority) {\n      return -1;\n    } else {\n      return 1;\n    }\n  });\n  editorBindings[key] = [];\n  ref1 = unsortedEditorBindings[key];\n  for (j = 0, len = ref1.length; j < len; j++) {\n    binding = ref1[j];\n    editorBindings[key].push(binding.fn);\n  }\n}\n\n\n},{\"../vendor/quadtree.js\":36,\"./draw.coffee\":27,\"./helper.coffee\":28,\"./model.coffee\":31,\"./modes.coffee\":32,\"./view.coffee\":34}],27:[function(require,module,exports){\nvar Draw, _area, _intersects, avgColor, helper, max, memoizedAvgColor, min, toHex, toRGB, twoDigitHex, zeroPad,\n  extend = function(child, parent) { for (var key in parent) { if (hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; },\n  hasProp = {}.hasOwnProperty;\n\nhelper = require('./helper.coffee');\n\n_area = function(a, b, c) {\n  return (b.x - a.x) * (c.y - a.y) - (c.x - a.x) * (b.y - a.y);\n};\n\n_intersects = function(a, b, c, d) {\n  return ((_area(a, b, c) > 0) !== (_area(a, b, d) > 0)) && ((_area(c, d, a) > 0) !== (_area(c, d, b) > 0));\n};\n\nmax = function(a, b) {\n  return (a > b ? a : b);\n};\n\nmin = function(a, b) {\n  return (b > a ? a : b);\n};\n\ntoRGB = function(hex) {\n  var b, c, g, r;\n  if (hex.length === 4) {\n    hex = ((function() {\n      var j, len1, results;\n      results = [];\n      for (j = 0, len1 = hex.length; j < len1; j++) {\n        c = hex[j];\n        results.push(c + c);\n      }\n      return results;\n    })()).join('').slice(1);\n  }\n  r = parseInt(hex.slice(1, 3), 16);\n  g = parseInt(hex.slice(3, 5), 16);\n  b = parseInt(hex.slice(5, 7), 16);\n  return [r, g, b];\n};\n\nzeroPad = function(str, len) {\n  if (str.length < len) {\n    return ((function() {\n      var j, ref, ref1, results;\n      results = [];\n      for (j = ref = str.length, ref1 = len; ref <= ref1 ? j < ref1 : j > ref1; ref <= ref1 ? j++ : j--) {\n        results.push('0');\n      }\n      return results;\n    })()).join('') + str;\n  } else {\n    return str;\n  }\n};\n\ntwoDigitHex = function(n) {\n  return zeroPad(Math.round(n).toString(16), 2);\n};\n\ntoHex = function(rgb) {\n  var k;\n  return '#' + ((function() {\n    var j, len1, results;\n    results = [];\n    for (j = 0, len1 = rgb.length; j < len1; j++) {\n      k = rgb[j];\n      results.push(twoDigitHex(k));\n    }\n    return results;\n  })()).join('');\n};\n\nmemoizedAvgColor = {};\n\navgColor = function(a, factor, b) {\n  var c, i, k, newRGB;\n  c = a + ',' + factor + ',' + b;\n  if (c in memoizedAvgColor) {\n    return memoizedAvgColor[c];\n  }\n  a = toRGB(a);\n  b = toRGB(b);\n  newRGB = (function() {\n    var j, len1, results;\n    results = [];\n    for (i = j = 0, len1 = a.length; j < len1; i = ++j) {\n      k = a[i];\n      results.push(a[i] * factor + b[i] * (1 - factor));\n    }\n    return results;\n  })();\n  return memoizedAvgColor[c] = toHex(newRGB);\n};\n\nexports.Draw = Draw = (function() {\n  function Draw() {\n    var NoRectangle, Path, Point, Rectangle, Size, Text, self;\n    this.ctx = null;\n    this.fontSize = 15;\n    this.fontFamily = 'Courier New, monospace';\n    this.fontAscent = 2;\n    self = this;\n    this.Point = Point = (function() {\n      function Point(x1, y1) {\n        this.x = x1;\n        this.y = y1;\n      }\n\n      Point.prototype.clone = function() {\n        return new Point(this.x, this.y);\n      };\n\n      Point.prototype.magnitude = function() {\n        return Math.sqrt(this.x * this.x + this.y * this.y);\n      };\n\n      Point.prototype.translate = function(vector) {\n        this.x += vector.x;\n        return this.y += vector.y;\n      };\n\n      Point.prototype.add = function(x, y) {\n        this.x += x;\n        return this.y += y;\n      };\n\n      Point.prototype.plus = function(arg) {\n        var x, y;\n        x = arg.x, y = arg.y;\n        return new Point(this.x + x, this.y + y);\n      };\n\n      Point.prototype.toMagnitude = function(mag) {\n        var r;\n        r = mag / this.magnitude();\n        return new Point(this.x * r, this.y * r);\n      };\n\n      Point.prototype.copy = function(point) {\n        this.x = point.x;\n        this.y = point.y;\n        return this;\n      };\n\n      Point.prototype.from = function(point) {\n        return new Point(this.x - point.x, this.y - point.y);\n      };\n\n      Point.prototype.clear = function() {\n        return this.x = this.y = 0;\n      };\n\n      Point.prototype.equals = function(point) {\n        return point.x === this.x && point.y === this.y;\n      };\n\n      return Point;\n\n    })();\n    this.Size = Size = (function() {\n      function Size(width, height) {\n        this.width = width;\n        this.height = height;\n      }\n\n      Size.prototype.equals = function(size) {\n        return this.width === size.width && this.height === size.height;\n      };\n\n      Size.copy = function(size) {\n        return new Size(size.width, size.height);\n      };\n\n      return Size;\n\n    })();\n    this.Rectangle = Rectangle = (function() {\n      function Rectangle(x1, y1, width, height) {\n        this.x = x1;\n        this.y = y1;\n        this.width = width;\n        this.height = height;\n      }\n\n      Rectangle.prototype.contains = function(point) {\n        return (this.x != null) && (this.y != null) && !((point.x < this.x) || (point.x > this.x + this.width) || (point.y < this.y) || (point.y > this.y + this.height));\n      };\n\n      Rectangle.prototype.equals = function(other) {\n        if (!(other instanceof Rectangle)) {\n          return false;\n        }\n        return this.x === other.x && this.y === other.y && this.width === other.width && this.height === other.height;\n      };\n\n      Rectangle.prototype.copy = function(rect) {\n        this.x = rect.x;\n        this.y = rect.y;\n        this.width = rect.width;\n        this.height = rect.height;\n        return this;\n      };\n\n      Rectangle.prototype.clip = function(ctx) {\n        ctx.rect(this.x, this.y, this.width, this.height);\n        return ctx.clip();\n      };\n\n      Rectangle.prototype.clearRect = function(ctx) {\n        return ctx.clearRect(this.x, this.y, this.width, this.height);\n      };\n\n      Rectangle.prototype.clone = function() {\n        var rect;\n        rect = new Rectangle(0, 0, 0, 0);\n        rect.copy(this);\n        return rect;\n      };\n\n      Rectangle.prototype.clear = function() {\n        this.width = this.height = 0;\n        return this.x = this.y = null;\n      };\n\n      Rectangle.prototype.bottom = function() {\n        return this.y + this.height;\n      };\n\n      Rectangle.prototype.right = function() {\n        return this.x + this.width;\n      };\n\n      Rectangle.prototype.fill = function(ctx, style) {\n        ctx.fillStyle = style;\n        return ctx.fillRect(this.x, this.y, this.width, this.height);\n      };\n\n      Rectangle.prototype.unite = function(rectangle) {\n        if (!((this.x != null) && (this.y != null))) {\n          return this.copy(rectangle);\n        } else if (!((rectangle.x != null) && (rectangle.y != null))) {\n\n        } else {\n          this.width = max(this.right(), rectangle.right()) - (this.x = min(this.x, rectangle.x));\n          return this.height = max(this.bottom(), rectangle.bottom()) - (this.y = min(this.y, rectangle.y));\n        }\n      };\n\n      Rectangle.prototype.swallow = function(point) {\n        if (!((this.x != null) && (this.y != null))) {\n          return this.copy(new Rectangle(point.x, point.y, 0, 0));\n        } else {\n          this.width = max(this.right(), point.x) - (this.x = min(this.x, point.x));\n          return this.height = max(this.bottom(), point.y) - (this.y = min(this.y, point.y));\n        }\n      };\n\n      Rectangle.prototype.overlap = function(rectangle) {\n        return (this.x != null) && (this.y != null) && !((rectangle.right()) < this.x || (rectangle.bottom() < this.y) || (rectangle.x > this.right()) || (rectangle.y > this.bottom()));\n      };\n\n      Rectangle.prototype.translate = function(vector) {\n        this.x += vector.x;\n        return this.y += vector.y;\n      };\n\n      Rectangle.prototype.stroke = function(ctx, style) {\n        ctx.strokeStyle = style;\n        return ctx.strokeRect(this.x, this.y, this.width, this.height);\n      };\n\n      Rectangle.prototype.fill = function(ctx, style) {\n        ctx.fillStyle = style;\n        return ctx.fillRect(this.x, this.y, this.width, this.height);\n      };\n\n      Rectangle.prototype.upperLeftCorner = function() {\n        return new Point(this.x, this.y);\n      };\n\n      Rectangle.prototype.toPath = function() {\n        var j, len1, path, point, ref;\n        path = new Path();\n        ref = [[this.x, this.y], [this.x, this.bottom()], [this.right(), this.bottom()], [this.right(), this.y]];\n        for (j = 0, len1 = ref.length; j < len1; j++) {\n          point = ref[j];\n          path.push(new Point(point[0], point[1]));\n        }\n        return path;\n      };\n\n      return Rectangle;\n\n    })();\n    this.NoRectangle = NoRectangle = (function(superClass) {\n      extend(NoRectangle, superClass);\n\n      function NoRectangle() {\n        NoRectangle.__super__.constructor.call(this, null, null, 0, 0);\n      }\n\n      return NoRectangle;\n\n    })(Rectangle);\n    this.Path = Path = (function() {\n      function Path() {\n        this._points = [];\n        this._cachedTranslation = new Point(0, 0);\n        this._cacheFlag = false;\n        this._bounds = new NoRectangle();\n        this.bevel = this.noclip = this.dotted = false;\n        this.style = {\n          'strokeColor': '#000',\n          'lineWidth': 1,\n          'fillColor': null\n        };\n      }\n\n      Path.prototype._clearCache = function() {\n        var j, len1, maxX, maxY, minX, minY, point, ref;\n        this._cacheFlag = true;\n        if (this._cacheFlag) {\n          if (this._points.length === 0) {\n            return this._bounds = new NoRectangle();\n          } else {\n            minX = minY = Infinity;\n            maxX = maxY = 0;\n            ref = this._points;\n            for (j = 0, len1 = ref.length; j < len1; j++) {\n              point = ref[j];\n              minX = min(minX, point.x);\n              maxX = max(maxX, point.x);\n              minY = min(minY, point.y);\n              maxY = max(maxY, point.y);\n            }\n            this._bounds.x = minX;\n            this._bounds.y = minY;\n            this._bounds.width = maxX - minX;\n            this._bounds.height = maxY - minY;\n            return this._cacheFlag = false;\n          }\n        }\n      };\n\n      Path.prototype.push = function(point) {\n        this._points.push(point);\n        return this._cacheFlag = true;\n      };\n\n      Path.prototype.unshift = function(point) {\n        this._points.unshift(point);\n        return this._cacheFlag = true;\n      };\n\n      Path.prototype.reverse = function() {\n        this._points.reverse();\n        return this;\n      };\n\n      Path.prototype.contains = function(point) {\n        var count, dest, end, j, last, len1, ref;\n        this._clearCache();\n        if (this._points.length === 0) {\n          return false;\n        }\n        if (!this._bounds.contains(point)) {\n          return false;\n        }\n        dest = new Point(this._bounds.x - 10, point.y);\n        count = 0;\n        last = this._points[this._points.length - 1];\n        ref = this._points;\n        for (j = 0, len1 = ref.length; j < len1; j++) {\n          end = ref[j];\n          if (_intersects(last, end, point, dest)) {\n            count += 1;\n          }\n          last = end;\n        }\n        return count % 2 === 1;\n      };\n\n      Path.prototype.intersects = function(rectangle) {\n        var end, j, l, last, lastSide, len1, len2, rectSides, ref, side;\n        this._clearCache();\n        if (this._points.length === 0) {\n          return false;\n        }\n        if (!rectangle.overlap(this._bounds)) {\n          return false;\n        } else {\n          last = this._points[this._points.length - 1];\n          rectSides = [new Point(rectangle.x, rectangle.y), new Point(rectangle.right(), rectangle.y), new Point(rectangle.right(), rectangle.bottom()), new Point(rectangle.x, rectangle.bottom())];\n          ref = this._points;\n          for (j = 0, len1 = ref.length; j < len1; j++) {\n            end = ref[j];\n            lastSide = rectSides[rectSides.length - 1];\n            for (l = 0, len2 = rectSides.length; l < len2; l++) {\n              side = rectSides[l];\n              if (_intersects(last, end, lastSide, side)) {\n                return true;\n              }\n              lastSide = side;\n            }\n            last = end;\n          }\n          if (this.contains(rectSides[0])) {\n            return true;\n          }\n          if (rectangle.contains(this._points[0])) {\n            return true;\n          }\n          return false;\n        }\n      };\n\n      Path.prototype.bounds = function() {\n        this._clearCache();\n        return this._bounds;\n      };\n\n      Path.prototype.translate = function(vector) {\n        this._cachedTranslation.translate(vector);\n        return this._cacheFlag = true;\n      };\n\n      Path.prototype.clip = function(ctx) {\n        var j, len1, point, ref;\n        this._clearCache();\n        if (this._points.length === 0) {\n          return;\n        }\n        ctx.beginPath();\n        ctx.moveTo(this._points[0].x, this._points[0].y);\n        ref = this._points;\n        for (j = 0, len1 = ref.length; j < len1; j++) {\n          point = ref[j];\n          ctx.lineTo(point.x, point.y);\n        }\n        ctx.lineTo(this._points[0].x, this._points[0].y);\n        if (this._points.length > 1) {\n          ctx.lineTo(this._points[1].x, this._points[1].y);\n        }\n        return ctx.clip();\n      };\n\n      Path.prototype.draw = function(ctx) {\n        var i, j, l, len1, len2, len3, m, point, ref, ref1, ref2;\n        this._clearCache();\n        if (this._points.length === 0) {\n          return;\n        }\n        ctx.strokeStyle = this.style.strokeColor;\n        ctx.lineWidth = this.style.lineWidth;\n        if (this.style.fillColor != null) {\n          ctx.fillStyle = this.style.fillColor;\n        }\n        ctx.beginPath();\n        ctx.moveTo(this._points[0].x, this._points[0].y);\n        ref = this._points;\n        for (j = 0, len1 = ref.length; j < len1; j++) {\n          point = ref[j];\n          ctx.lineTo(point.x, point.y);\n        }\n        ctx.lineTo(this._points[0].x, this._points[0].y);\n        if (this._points.length > 1) {\n          ctx.lineTo(this._points[1].x, this._points[1].y);\n        }\n        if (this.style.fillColor != null) {\n          ctx.fill();\n        }\n        ctx.save();\n        if (!this.noclip) {\n          ctx.clip();\n        }\n        if (this.bevel) {\n          ctx.beginPath();\n          ctx.moveTo(this._points[0].x, this._points[0].y);\n          ref1 = this._points.slice(1);\n          for (i = l = 0, len2 = ref1.length; l < len2; i = ++l) {\n            point = ref1[i];\n            if ((point.x < this._points[i].x && point.y >= this._points[i].y) || (point.y > this._points[i].y && point.x <= this._points[i].x)) {\n              ctx.lineTo(point.x, point.y);\n            } else if (!point.equals(this._points[i])) {\n              ctx.moveTo(point.x, point.y);\n            }\n          }\n          if (!(this._points[0].x > this._points[this._points.length - 1].x || this._points[0].y < this._points[this._points.length - 1].y)) {\n            ctx.lineTo(this._points[0].x, this._points[0].y);\n          }\n          ctx.lineWidth = 4;\n          ctx.strokeStyle = avgColor(this.style.fillColor, 0.85, '#000');\n          ctx.stroke();\n          ctx.lineWidth = 2;\n          ctx.strokeStyle = avgColor(this.style.fillColor, 0.7, '#000');\n          ctx.stroke();\n          ctx.beginPath();\n          ctx.moveTo(this._points[0].x, this._points[0].y);\n          ref2 = this._points.slice(1);\n          for (i = m = 0, len3 = ref2.length; m < len3; i = ++m) {\n            point = ref2[i];\n            if ((point.x > this._points[i].x && point.y <= this._points[i].y) || (point.y < this._points[i].y && point.x >= this._points[i].x)) {\n              ctx.lineTo(point.x, point.y);\n            } else if (!point.equals(this._points[i])) {\n              ctx.moveTo(point.x, point.y);\n            }\n          }\n          if (this._points[0].x > this._points[this._points.length - 1].x || this._points[0].y < this._points[this._points.length - 1].y) {\n            ctx.lineTo(this._points[0].x, this._points[0].y);\n          }\n          ctx.lineWidth = 4;\n          ctx.strokeStyle = avgColor(this.style.fillColor, 0.85, '#FFF');\n          ctx.stroke();\n          ctx.lineWidth = 2;\n          ctx.strokeStyle = avgColor(this.style.fillColor, 0.7, '#FFF');\n          ctx.stroke();\n        } else {\n          if (this.dotted && (ctx.setLineDash != null)) {\n            ctx.setLineDash([8, 5]);\n          }\n          ctx.stroke();\n        }\n        return ctx.restore();\n      };\n\n      Path.prototype.clone = function() {\n        var clone, el, j, len1, ref;\n        clone = new Path();\n        ref = this._points;\n        for (j = 0, len1 = ref.length; j < len1; j++) {\n          el = ref[j];\n          clone.push(el);\n        }\n        return clone;\n      };\n\n      Path.prototype.drawShadow = function(ctx, offsetX, offsetY, blur) {\n        var j, key, len1, oldValues, point, ref, results, value;\n        this._clearCache();\n        ctx.fillStyle = this.style.fillColor;\n        if (this._points.length === 0) {\n          return;\n        }\n        oldValues = {\n          shadowColor: ctx.shadowColor,\n          shadowBlur: ctx.shadowBlur,\n          shadowOffsetY: ctx.shadowOffsetY,\n          shadowOffsetX: ctx.shadowOffsetX,\n          globalAlpha: ctx.globalAlpha\n        };\n        ctx.globalAlpha = 0.5;\n        ctx.shadowColor = '#000';\n        ctx.shadowBlur = blur;\n        ctx.shadowOffsetX = offsetX;\n        ctx.shadowOffsetY = offsetY;\n        ctx.beginPath();\n        ctx.moveTo(this._points[0].x, this._points[0].y);\n        ref = this._points;\n        for (j = 0, len1 = ref.length; j < len1; j++) {\n          point = ref[j];\n          ctx.lineTo(point.x, point.y);\n        }\n        ctx.lineTo(this._points[0].x, this._points[0].y);\n        ctx.fill();\n        results = [];\n        for (key in oldValues) {\n          if (!hasProp.call(oldValues, key)) continue;\n          value = oldValues[key];\n          results.push(ctx[key] = value);\n        }\n        return results;\n      };\n\n      return Path;\n\n    })();\n    this.Text = Text = (function() {\n      function Text(point1, value1) {\n        this.point = point1;\n        this.value = value1;\n        this.wantedFont = self.fontSize + 'px ' + self.fontFamily;\n        if (self.ctx.font !== this.wantedFont) {\n          self.ctx.font = self.fontSize + 'px ' + self.fontFamily;\n        }\n        this._bounds = new Rectangle(this.point.x, this.point.y, self.ctx.measureText(this.value).width, self.fontSize);\n      }\n\n      Text.prototype.bounds = function() {\n        return this._bounds;\n      };\n\n      Text.prototype.contains = function(point) {\n        return this._bounds.contains(point);\n      };\n\n      Text.prototype.translate = function(vector) {\n        this.point.translate(vector);\n        return this._bounds.translate(vector);\n      };\n\n      Text.prototype.setPosition = function(point) {\n        return this.translate(point.from(this.point));\n      };\n\n      Text.prototype.draw = function(ctx) {\n        ctx.textBaseline = 'top';\n        ctx.font = self.fontSize + 'px ' + self.fontFamily;\n        ctx.fillStyle = '#000';\n        return ctx.fillText(this.value, this.point.x, this.point.y - self.fontAscent);\n      };\n\n      return Text;\n\n    })();\n  }\n\n  Draw.prototype.refreshFontCapital = function() {\n    return this.fontAscent = helper.fontMetrics(this.fontFamily, this.fontSize).prettytop;\n  };\n\n  Draw.prototype.setCtx = function(ctx) {\n    return this.ctx = ctx;\n  };\n\n  Draw.prototype.setGlobalFontSize = function(size) {\n    this.fontSize = size;\n    return this.refreshFontCapital();\n  };\n\n  Draw.prototype.setGlobalFontFamily = function(family) {\n    this.fontFamily = family;\n    return this.refreshFontCapital();\n  };\n\n  Draw.prototype.getGlobalFontSize = function() {\n    return this.fontSize;\n  };\n\n  return Draw;\n\n})();\n\n\n},{\"./helper.coffee\":28}],28:[function(require,module,exports){\nvar deepCopy, deepEquals, fontMetrics, fontMetricsCache, sax,\n  hasProp = {}.hasOwnProperty;\n\nsax = require('sax');\n\nexports.ANY_DROP = 0;\n\nexports.BLOCK_ONLY = 1;\n\nexports.MOSTLY_BLOCK = 2;\n\nexports.MOSTLY_VALUE = 3;\n\nexports.VALUE_ONLY = 4;\n\nexports.ENCOURAGE = 1;\n\nexports.DISCOURAGE = 0;\n\nexports.FORBID = -1;\n\nexports.DROPDOWN_ARROW_WIDTH = 15;\n\nexports.DROPDOWN_ARROW_PADDING = 3;\n\nif (typeof window !== \"undefined\" && window !== null) {\n  window.String.prototype.trimLeft = function() {\n    return this.replace(/^\\s+/, '');\n  };\n  window.String.prototype.trimRight = function() {\n    return this.replace(/\\s+$/, '');\n  };\n}\n\nexports.extend = function(target) {\n  var sources;\n  sources = [].slice.call(arguments, 1);\n  sources.forEach(function(source) {\n    if (source) {\n      return Object.getOwnPropertyNames(source).forEach(function(prop) {\n        return Object.defineProperty(target, prop, Object.getOwnPropertyDescriptor(source, prop));\n      });\n    }\n  });\n  return target;\n};\n\nexports.xmlPrettyPrint = function(str) {\n  var result, xmlParser;\n  result = '';\n  xmlParser = sax.parser(true);\n  xmlParser.ontext = function(text) {\n    return result += exports.escapeXMLText(text);\n  };\n  xmlParser.onopentag = function(node) {\n    var attr, ref, val;\n    result += '<' + node.name;\n    ref = node.attributes;\n    for (attr in ref) {\n      val = ref[attr];\n      result += '\\n  ' + attr + '=' + JSON.stringify(val);\n    }\n    return result += '>';\n  };\n  xmlParser.onclosetag = function(name) {\n    return result += '</' + name + '>';\n  };\n  xmlParser.write(str).close();\n  return result;\n};\n\nfontMetricsCache = {};\n\nexports.fontMetrics = fontMetrics = function(fontFamily, fontHeight) {\n  var baseline, canvas, capital, ctx, ex, fontStyle, gp, height, lf, metrics, result, textTopAndBottom, width;\n  fontStyle = fontHeight + \"px \" + fontFamily;\n  result = fontMetricsCache[fontStyle];\n  textTopAndBottom = function(testText) {\n    var col, first, index, j, k, last, pixels, ref, ref1, right, row;\n    ctx.fillStyle = 'black';\n    ctx.fillRect(0, 0, width, height);\n    ctx.textBaseline = 'top';\n    ctx.fillStyle = 'white';\n    ctx.fillText(testText, 0, 0);\n    right = Math.ceil(ctx.measureText(testText).width);\n    pixels = ctx.getImageData(0, 0, width, height).data;\n    first = -1;\n    last = height;\n    for (row = j = 0, ref = height; 0 <= ref ? j < ref : j > ref; row = 0 <= ref ? ++j : --j) {\n      for (col = k = 1, ref1 = right; 1 <= ref1 ? k < ref1 : k > ref1; col = 1 <= ref1 ? ++k : --k) {\n        index = (row * width + col) * 4;\n        if (pixels[index] !== 0) {\n          if (first < 0) {\n            first = row;\n          }\n          break;\n        }\n      }\n      if (first >= 0 && col >= right) {\n        last = row;\n        break;\n      }\n    }\n    return {\n      top: first,\n      bottom: last\n    };\n  };\n  if (!result) {\n    canvas = document.createElement('canvas');\n    ctx = canvas.getContext('2d');\n    ctx.font = fontStyle;\n    metrics = ctx.measureText('Hg');\n    if (canvas.height < fontHeight * 2 || canvas.width < metrics.width) {\n      canvas.width = Math.ceil(metrics.width);\n      canvas.height = fontHeight * 2;\n      ctx = canvas.getContext('2d');\n      ctx.font = fontStyle;\n    }\n    width = canvas.width;\n    height = canvas.height;\n    capital = textTopAndBottom('H');\n    ex = textTopAndBottom('x');\n    lf = textTopAndBottom('lf');\n    gp = textTopAndBottom('g');\n    baseline = capital.bottom;\n    result = {\n      ascent: lf.top,\n      capital: capital.top,\n      ex: ex.top,\n      baseline: capital.bottom,\n      descent: gp.bottom\n    };\n    result.prettytop = Math.max(0, Math.min(result.ascent, result.ex - (result.descent - result.baseline)));\n    fontMetricsCache[fontStyle] = result;\n  }\n  return result;\n};\n\nexports.clipLines = function(lines, start, end) {\n  if (start.line !== end.line) {\n    console.log('pieces:', \"'\" + lines[start.line].slice(start.column) + \"'\", \"'\" + (lines.slice(start.line + 1, end.line).join('\\n')) + \"'\", \"'\" + lines[end.line].slice(0, end.column) + \"'\");\n    return lines[start.line].slice(start.column) + lines.slice(start.line + 1, end.line).join('\\n') + lines[end.line].slice(0, end.column);\n  } else {\n    console.log('clipping', lines[start.line], 'from', start.column + 1, 'to', end.column);\n    return lines[start.line].slice(start.column, end.column);\n  }\n};\n\nexports.getFontHeight = function(family, size) {\n  var metrics;\n  metrics = fontMetrics(family, size);\n  return metrics.descent - metrics.prettytop;\n};\n\nexports.escapeXMLText = function(str) {\n  return str.replace(/</g, '&lt;').replace(/>/g, '&gt;').replace(/&/g, '&amp;').replace(/\"/g, '&quot;').replace(/'/g, '&apos;');\n};\n\nexports.serializeShallowDict = function(dict) {\n  var key, props, val;\n  props = [];\n  for (key in dict) {\n    val = dict[key];\n    props.push(key + ':' + val);\n  }\n  return props.join(';');\n};\n\nexports.deserializeShallowDict = function(str) {\n  var dict, j, key, len, prop, props, ref, val;\n  if (str == null) {\n    return void 0;\n  }\n  dict = {};\n  props = str.split(';');\n  for (j = 0, len = props.length; j < len; j++) {\n    prop = props[j];\n    ref = prop.split(':'), key = ref[0], val = ref[1];\n    dict[key] = val;\n  }\n  return dict;\n};\n\nexports.connect = function(a, b) {\n  if (a != null) {\n    a.next = b;\n  }\n  if (b != null) {\n    b.prev = a;\n  }\n  return b;\n};\n\nexports.string = function(arr) {\n  var el, i, j, last, len;\n  last = arr[0];\n  for (i = j = 0, len = arr.length; j < len; i = ++j) {\n    el = arr[i];\n    if (i > 0) {\n      last = exports.connect(last, el);\n    }\n  }\n  return last;\n};\n\nexports.deepCopy = deepCopy = function(a) {\n  var key, newObject, val;\n  if (a instanceof Object) {\n    newObject = {};\n    for (key in a) {\n      val = a[key];\n      newObject[key] = deepCopy(val);\n    }\n    return newObject;\n  } else {\n    return a;\n  }\n};\n\nexports.deepEquals = deepEquals = function(a, b) {\n  var key, val;\n  if (a instanceof Object && b instanceof Object) {\n    for (key in a) {\n      if (!hasProp.call(a, key)) continue;\n      val = a[key];\n      if (!deepEquals(b[key], val)) {\n        return false;\n      }\n    }\n    for (key in b) {\n      if (!hasProp.call(b, key)) continue;\n      val = b[key];\n      if (!key in a) {\n        if (!deepEquals(a[key], val)) {\n          return false;\n        }\n      }\n    }\n    return true;\n  } else {\n    return a === b;\n  }\n};\n\n\n},{\"sax\":25}],29:[function(require,module,exports){\nvar CATEGORIES, CLASS_EXCEPTIONS, DEFAULT_INDENT_DEPTH, JavaScriptParser, KNOWN_FUNCTIONS, LOGICAL_OPERATORS, NEVER_PAREN, NODE_CATEGORIES, OPERATOR_PRECEDENCES, STATEMENT_NODE_TYPES, acorn, helper, isStandardForLoop, model, parser,\n  extend = function(child, parent) { for (var key in parent) { if (hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; },\n  hasProp = {}.hasOwnProperty,\n  indexOf = [].indexOf || function(item) { for (var i = 0, l = this.length; i < l; i++) { if (i in this && this[i] === item) return i; } return -1; };\n\nhelper = require('../helper.coffee');\n\nmodel = require('../model.coffee');\n\nparser = require('../parser.coffee');\n\nacorn = require('../../vendor/acorn');\n\nSTATEMENT_NODE_TYPES = ['ExpressionStatement', 'ReturnStatement', 'BreakStatement', 'ThrowStatement'];\n\nNEVER_PAREN = 100;\n\nKNOWN_FUNCTIONS = {\n  'alert': {},\n  'prompt': {},\n  'console.log': {},\n  '*.toString': {\n    value: true\n  },\n  'Math.abs': {\n    value: true\n  },\n  'Math.acos': {\n    value: true\n  },\n  'Math.asin': {\n    value: true\n  },\n  'Math.atan': {\n    value: true\n  },\n  'Math.atan2': {\n    value: true\n  },\n  'Math.cos': {\n    value: true\n  },\n  'Math.sin': {\n    value: true\n  },\n  'Math.tan': {\n    value: true\n  },\n  'Math.ceil': {\n    value: true\n  },\n  'Math.floor': {\n    value: true\n  },\n  'Math.round': {\n    value: true\n  },\n  'Math.exp': {\n    value: true\n  },\n  'Math.ln': {\n    value: true\n  },\n  'Math.log10': {\n    value: true\n  },\n  'Math.pow': {\n    value: true\n  },\n  'Math.sqrt': {\n    value: true\n  },\n  'Math.max': {\n    value: true\n  },\n  'Math.min': {\n    value: true\n  },\n  'Math.random': {\n    value: true\n  }\n};\n\nCATEGORIES = {\n  functions: {\n    color: 'purple'\n  },\n  returns: {\n    color: 'yellow'\n  },\n  comments: {\n    color: 'gray'\n  },\n  arithmetic: {\n    color: 'green'\n  },\n  logic: {\n    color: 'cyan'\n  },\n  containers: {\n    color: 'teal'\n  },\n  assignments: {\n    color: 'blue'\n  },\n  loops: {\n    color: 'orange'\n  },\n  conditionals: {\n    color: 'orange'\n  },\n  value: {\n    color: 'green'\n  },\n  command: {\n    color: 'blue'\n  },\n  errors: {\n    color: '#f00'\n  }\n};\n\nLOGICAL_OPERATORS = {\n  '==': true,\n  '!=': true,\n  '===': true,\n  '!==': true,\n  '<': true,\n  '<=': true,\n  '>': true,\n  '>=': true,\n  'in': true,\n  'instanceof': true,\n  '||': true,\n  '&&': true,\n  '!': true\n};\n\nNODE_CATEGORIES = {\n  'BinaryExpression': 'arithmetic',\n  'UnaryExpression': 'arithmetic',\n  'ConditionalExpression': 'arithmetic',\n  'LogicalExpression': 'logic',\n  'FunctionExpression': 'functions',\n  'FunctionDeclaration': 'functions',\n  'AssignmentExpression': 'assignments',\n  'UpdateExpression': 'assignments',\n  'VariableDeclaration': 'assignments',\n  'ReturnStatement': 'returns',\n  'IfStatement': 'conditionals',\n  'SwitchStatement': 'conditionals',\n  'ForStatement': 'loops',\n  'ForInStatement': 'loops',\n  'WhileStatement': 'loops',\n  'DoWhileStatement': 'loops',\n  'NewExpression': 'containers',\n  'ObjectExpression': 'containers',\n  'ArrayExpression': 'containers',\n  'MemberExpression': 'containers',\n  'BreakStatement': 'returns',\n  'ThrowStatement': 'returns',\n  'TryStatement': 'returns',\n  'CallExpression': 'command',\n  'SequenceExpression': 'command',\n  'Identifier': 'value'\n};\n\nOPERATOR_PRECEDENCES = {\n  '++': 3,\n  '--': 3,\n  '!': 4,\n  '~': 4,\n  '*': 5,\n  '/': 5,\n  '%': 5,\n  '+': 6,\n  '-': 6,\n  '<<': 7,\n  '>>': 7,\n  '>>>': 7,\n  '<': 8,\n  '>': 8,\n  '>=': 8,\n  'in': 8,\n  'instanceof': 8,\n  '==': 9,\n  '!=': 9,\n  '===': 9,\n  '!==': 9,\n  '&': 10,\n  '^': 11,\n  '|': 12,\n  '&&': 13,\n  '||': 14\n};\n\nCLASS_EXCEPTIONS = {\n  'ForStatement': ['ends-with-brace', 'block-only'],\n  'FunctionDeclaration': ['ends-with-brace', 'block-only'],\n  'IfStatement': ['ends-with-brace', 'block-only'],\n  'WhileStatement': ['ends-with-brace', 'block-only'],\n  'DoWhileStatement': ['ends-with-brace', 'block-only'],\n  'SwitchStatement': ['ends-with-brace', 'block-only'],\n  'AssignmentExpression': ['mostly-block']\n};\n\nDEFAULT_INDENT_DEPTH = '  ';\n\nexports.JavaScriptParser = JavaScriptParser = (function(superClass) {\n  extend(JavaScriptParser, superClass);\n\n  function JavaScriptParser(text1, opts) {\n    var base;\n    this.text = text1;\n    JavaScriptParser.__super__.constructor.apply(this, arguments);\n    if ((base = this.opts).functions == null) {\n      base.functions = KNOWN_FUNCTIONS;\n    }\n    this.opts.categories = helper.extend({}, CATEGORIES, this.opts.categories);\n    this.lines = this.text.split('\\n');\n  }\n\n  JavaScriptParser.prototype.markRoot = function() {\n    var tree;\n    if (this.text[0] === '{') {\n      this.text = \"(\" + this.text + \")\";\n    }\n    tree = acorn.parse(this.text, {\n      locations: true,\n      line: 0,\n      allowReturnOutsideFunction: true\n    });\n    return this.mark(0, tree, 0, null);\n  };\n\n  JavaScriptParser.prototype.fullNameArray = function(obj) {\n    var props;\n    props = [];\n    while (obj.type === 'MemberExpression') {\n      props.unshift(obj.property.name);\n      obj = obj.object;\n    }\n    if (obj.type === 'Identifier') {\n      props.unshift(obj.name);\n    } else {\n      props.unshift('*');\n    }\n    return props;\n  };\n\n  JavaScriptParser.prototype.lookupKnownName = function(node) {\n    var fn, fname, full, identifier, last, wildcard;\n    if (node.type === 'CallExpression' || node.type === 'NewExpression') {\n      identifier = false;\n    } else if (node.type === 'Identifier' || node.type === 'MemberExpression') {\n      identifier = true;\n    } else {\n      throw new Error;\n    }\n    fname = this.fullNameArray(identifier ? node : node.callee);\n    full = fname.join('.');\n    fn = this.opts.functions[full];\n    if (fn && ((identifier && fn.property) || (!identifier && !fn.property))) {\n      return {\n        name: full,\n        anyobj: false,\n        fn: this.opts.functions[full]\n      };\n    }\n    last = fname[fname.length - 1];\n    if (fname.length > 1 && !((wildcard = '*.' + last) in this.opts.functions)) {\n      wildcard = null;\n    }\n    if (!wildcard && !((wildcard = '?.' + last) in this.opts.functions)) {\n      wildcard = null;\n    }\n    if (wildcard !== null) {\n      fn = this.opts.functions[wildcard];\n      if (fn && ((identifier && fn.property) || (!identifier && !fn.property))) {\n        return {\n          name: last,\n          anyobj: true,\n          fn: this.opts.functions[wildcard]\n        };\n      }\n    }\n    return null;\n  };\n\n  JavaScriptParser.prototype.getAcceptsRule = function(node) {\n    return {\n      \"default\": helper.NORMAL\n    };\n  };\n\n  JavaScriptParser.prototype.getClasses = function(node) {\n    var known;\n    if (node.type in CLASS_EXCEPTIONS) {\n      return CLASS_EXCEPTIONS[node.type].concat([node.type]);\n    } else {\n      if (node.type === 'CallExpression' || node.type === 'NewExpression' || node.type === 'Identifier') {\n        known = this.lookupKnownName(node);\n        if (!known || (known.fn.value && known.fn.command)) {\n          return [node.type, 'any-drop'];\n        }\n        if (known.fn.value) {\n          return [node.type, 'mostly-value'];\n        } else {\n          return [node.type, 'mostly-block'];\n        }\n      }\n      if (node.type.match(/Expression$/) != null) {\n        return [node.type, 'mostly-value'];\n      } else if (node.type.match(/Declaration$/) != null) {\n        return [node.type, 'block-only'];\n      } else if (node.type.match(/Statement$/) != null) {\n        return [node.type, 'mostly-block'];\n      } else {\n        return [node.type, 'any-drop'];\n      }\n    }\n  };\n\n  JavaScriptParser.prototype.getPrecedence = function(node) {\n    var ref, ref1;\n    switch (node.type) {\n      case 'BinaryExpression':\n      case 'LogicalExpression':\n        return OPERATOR_PRECEDENCES[node.operator];\n      case 'AssignStatement':\n        return 16;\n      case 'UnaryExpression':\n        if (node.prefix) {\n          return (ref = OPERATOR_PRECEDENCES[node.operator]) != null ? ref : 4;\n        } else {\n          return (ref1 = OPERATOR_PRECEDENCES[node.operator]) != null ? ref1 : 3;\n        }\n        break;\n      case 'CallExpression':\n        return 2;\n      case 'NewExpression':\n        return 2;\n      case 'MemberExpression':\n        return 1;\n      case 'ExpressionStatement':\n        return this.getPrecedence(node.expression);\n      default:\n        return 0;\n    }\n  };\n\n  JavaScriptParser.prototype.lookupCategory = function(node) {\n    var category;\n    switch (node.type) {\n      case 'BinaryExpression':\n      case 'UnaryExpression':\n        if (LOGICAL_OPERATORS.hasOwnProperty(node.operator)) {\n          category = 'logic';\n        } else {\n          category = 'arithmetic';\n        }\n        break;\n      default:\n        category = NODE_CATEGORIES[node.type];\n    }\n    return this.opts.categories[category];\n  };\n\n  JavaScriptParser.prototype.getColor = function(node) {\n    var category, known;\n    switch (node.type) {\n      case 'ExpressionStatement':\n        return this.getColor(node.expression);\n      case 'CallExpression':\n      case 'NewExpression':\n      case 'MemberExpression':\n      case 'Identifier':\n        known = this.lookupKnownName(node);\n        if (known) {\n          if (known.fn.color) {\n            return known.fn.color;\n          } else if (known.fn.value && !known.fn.command) {\n            return this.opts.categories.value.color;\n          }\n        }\n    }\n    category = this.lookupCategory(node);\n    return (category != null ? category.color : void 0) || 'command';\n  };\n\n  JavaScriptParser.prototype.getSocketLevel = function(node) {\n    return helper.ANY_DROP;\n  };\n\n  JavaScriptParser.prototype.getBounds = function(node) {\n    var bounds, line, ref, ref1, semicolon, semicolonLength;\n    if (node.type === 'BlockStatement') {\n      bounds = {\n        start: {\n          line: node.loc.start.line,\n          column: node.loc.start.column + 1\n        },\n        end: {\n          line: node.loc.end.line,\n          column: node.loc.end.column - 1\n        }\n      };\n      bounds.start.column += ((ref = this.lines[bounds.start.line].slice(bounds.start.column).match(/^\\s*/)) != null ? ref : [''])[0].length;\n      if (this.lines[bounds.end.line].slice(0, bounds.end.column).trim().length === 0) {\n        bounds.end.line -= 1;\n        bounds.end.column = this.lines[bounds.end.line].length;\n      }\n      return bounds;\n    } else if (ref1 = node.type, indexOf.call(STATEMENT_NODE_TYPES, ref1) >= 0) {\n      line = this.lines[node.loc.end.line];\n      semicolon = this.lines[node.loc.end.line].slice(node.loc.end.column - 1).indexOf(';');\n      if (semicolon >= 0) {\n        semicolonLength = this.lines[node.loc.end.line].slice(node.loc.end.column - 1).match(/;\\s*/)[0].length;\n        return {\n          start: {\n            line: node.loc.start.line,\n            column: node.loc.start.column\n          },\n          end: {\n            line: node.loc.end.line,\n            column: node.loc.end.column + semicolon + semicolonLength - 1\n          }\n        };\n      }\n    }\n    return {\n      start: {\n        line: node.loc.start.line,\n        column: node.loc.start.column\n      },\n      end: {\n        line: node.loc.end.line,\n        column: node.loc.end.column\n      }\n    };\n  };\n\n  JavaScriptParser.prototype.getCaseIndentBounds = function(node) {\n    var bounds;\n    bounds = {\n      start: this.getBounds(node.consequent[0]).start,\n      end: this.getBounds(node.consequent[node.consequent.length - 1]).end\n    };\n    if (this.lines[bounds.start.line].slice(0, bounds.start.column).trim().length === 0) {\n      bounds.start.line -= 1;\n      bounds.start.column = this.lines[bounds.start.line].length;\n    }\n    if (this.lines[bounds.end.line].slice(0, bounds.end.column).trim().length === 0) {\n      bounds.end.line -= 1;\n      bounds.end.column = this.lines[bounds.end.line].length;\n    }\n    return bounds;\n  };\n\n  JavaScriptParser.prototype.getIndentPrefix = function(bounds, indentDepth) {\n    var line;\n    if (bounds.end.line - bounds.start.line < 1) {\n      return DEFAULT_INDENT_DEPTH;\n    } else {\n      line = this.lines[bounds.start.line + 1];\n      return line.slice(indentDepth, line.length - line.trimLeft().length);\n    }\n  };\n\n  JavaScriptParser.prototype.isComment = function(text) {\n    return text.match(/^\\s*\\/\\/.*$/);\n  };\n\n  JavaScriptParser.prototype.indentAndCommentMarker = function(text) {\n    return text.match(/^\\s*\\/\\//)[0];\n  };\n\n  JavaScriptParser.prototype.handleButton = function(text, button, oldBlock) {\n    var argCount, currentElif, elementCount, elseLocation, known, lastArgPosition, lastElPosition, lastParamPosition, lines, match, maxArgs, minArgs, newLastArgPosition, newLastElPosition, newLastParamPosition, node, paramCount;\n    if (button === 'add-button' && indexOf.call(oldBlock.classes, 'IfStatement') >= 0) {\n      node = acorn.parse(text, {\n        locations: true,\n        line: 0,\n        allowReturnOutsideFunction: true\n      }).body[0];\n      currentElif = node;\n      elseLocation = null;\n      while (true) {\n        if (currentElif.type === 'IfStatement') {\n          if (currentElif.alternate != null) {\n            elseLocation = {\n              line: currentElif.alternate.loc.start.line,\n              column: currentElif.alternate.loc.start.column\n            };\n            currentElif = currentElif.alternate;\n          } else {\n            elseLocation = null;\n            break;\n          }\n        } else {\n          break;\n        }\n      }\n      if (elseLocation != null) {\n        lines = text.split('\\n');\n        elseLocation = lines.slice(0, elseLocation.line).join('\\n').length + elseLocation.column + 1;\n        return text.slice(0, elseLocation).trimRight() + ' if (__) ' + text.slice(elseLocation).trimLeft() + ' else {\\n  __\\n}';\n      } else {\n        return text + ' else {\\n  __\\n}';\n      }\n    } else if (indexOf.call(oldBlock.classes, 'CallExpression') >= 0) {\n      node = acorn.parse(text, {\n        line: 0,\n        allowReturnOutsideFunction: true\n      }).body[0];\n      known = this.lookupKnownName(node.expression);\n      argCount = node.expression[\"arguments\"].length;\n      if (button === 'add-button') {\n        maxArgs = known != null ? known.fn.maxArgs : void 0;\n        if (maxArgs == null) {\n          maxArgs = Infinity;\n        }\n        if (argCount >= maxArgs) {\n          return;\n        }\n        if (argCount) {\n          lastArgPosition = node.expression[\"arguments\"][argCount - 1].end;\n          return text.slice(0, lastArgPosition).trimRight() + ', __' + text.slice(lastArgPosition).trimLeft();\n        } else {\n          lastArgPosition = node.expression.end - 1;\n          return text.slice(0, lastArgPosition).trimRight() + '__' + text.slice(lastArgPosition).trimLeft();\n        }\n      } else if (button === 'subtract-button') {\n        minArgs = known != null ? known.fn.minArgs : void 0;\n        if (minArgs == null) {\n          minArgs = 0;\n        }\n        if (argCount <= minArgs) {\n          return;\n        }\n        if (argCount > 0) {\n          lastArgPosition = node.expression[\"arguments\"][argCount - 1].end;\n          if (argCount === 1) {\n            newLastArgPosition = node.expression[\"arguments\"][0].start;\n          } else {\n            newLastArgPosition = node.expression[\"arguments\"][argCount - 2].end;\n          }\n          return text.slice(0, newLastArgPosition).trimRight() + text.slice(lastArgPosition).trimLeft();\n        }\n      }\n    } else if (indexOf.call(oldBlock.classes, 'FunctionDeclaration') >= 0) {\n      node = acorn.parse(text, {\n        line: 0,\n        allowReturnOutsideFunction: true\n      }).body[0];\n      paramCount = node.params.length;\n      if (button === 'add-button') {\n        if (paramCount) {\n          lastParamPosition = node.params[paramCount - 1].end;\n          return text.slice(0, lastParamPosition).trimRight() + ', __' + text.slice(lastParamPosition).trimLeft();\n        } else {\n          match = text.match(/\\((\\s*)\\)/);\n          if (match != null) {\n            lastParamPosition = match.index + 1;\n            return text.slice(0, lastParamPosition).trimRight() + '__' + text.slice(lastParamPosition).trimLeft();\n          }\n        }\n      } else if (button === 'subtract-button') {\n        if (paramCount > 0) {\n          lastParamPosition = node.params[paramCount - 1].end;\n          if (paramCount === 1) {\n            newLastParamPosition = node.params[0].start;\n          } else {\n            newLastParamPosition = node.params[paramCount - 2].end;\n          }\n          return text.slice(0, newLastParamPosition).trimRight() + text.slice(lastParamPosition).trimLeft();\n        }\n      }\n    } else if (indexOf.call(oldBlock.classes, 'ArrayExpression') >= 0) {\n      node = acorn.parse(text, {\n        line: 0,\n        allowReturnOutsideFunction: true\n      }).body[0];\n      elementCount = node.expression.elements.length;\n      if (button === 'add-button') {\n        if (elementCount) {\n          lastElPosition = node.expression.elements[elementCount - 1].end;\n          return text.slice(0, lastElPosition).trimRight() + ', __' + text.slice(lastElPosition).trimLeft();\n        } else {\n          lastElPosition = node.expression.end - 1;\n          return text.slice(0, lastElPosition).trimRight() + '__' + text.slice(lastElPosition).trimLeft();\n        }\n      } else if (button === 'subtract-button') {\n        if (elementCount > 0) {\n          lastElPosition = node.expression.elements[elementCount - 1].end;\n          if (elementCount === 1) {\n            newLastElPosition = node.expression.elements[0].start;\n          } else {\n            newLastElPosition = node.expression.elements[elementCount - 2].end;\n          }\n          return text.slice(0, newLastElPosition).trimRight() + text.slice(lastElPosition).trimLeft();\n        }\n      }\n    }\n  };\n\n  JavaScriptParser.prototype.mark = function(indentDepth, node, depth, bounds) {\n    var argCount, argument, block, buttons, currentElif, declaration, element, endPosition, expression, i, j, k, known, l, len, len1, len2, len3, len4, len5, len6, len7, len8, len9, m, match, maxArgs, minArgs, n, nodeBoundsStart, o, p, param, position, prefix, property, q, r, ref, ref1, ref10, ref11, ref12, ref13, ref14, ref15, ref16, ref2, ref3, ref4, ref5, ref6, ref7, ref8, ref9, results, results1, results2, results3, results4, results5, results6, results7, results8, results9, s, showButtons, space, statement, string, switchCase;\n    switch (node.type) {\n      case 'Program':\n        ref = node.body;\n        results = [];\n        for (j = 0, len = ref.length; j < len; j++) {\n          statement = ref[j];\n          results.push(this.mark(indentDepth, statement, depth + 1, null));\n        }\n        return results;\n        break;\n      case 'Function':\n        this.jsBlock(node, depth, bounds);\n        return this.mark(indentDepth, node.body, depth + 1, null);\n      case 'SequenceExpression':\n        this.jsBlock(node, depth, bounds);\n        ref1 = node.expressions;\n        results1 = [];\n        for (k = 0, len1 = ref1.length; k < len1; k++) {\n          expression = ref1[k];\n          results1.push(this.jsSocketAndMark(indentDepth, expression, depth + 1, null));\n        }\n        return results1;\n        break;\n      case 'FunctionDeclaration':\n        buttons = {\n          onFirstLine: true\n        };\n        if (!(this.opts.lockZeroParamFunctions && node.params.length === 0)) {\n          buttons.addButton = '\\u21A0';\n        }\n        if (node.params.length > 0) {\n          buttons.subtractButton = '\\u219E';\n        }\n        this.jsBlock(node, depth, bounds, buttons);\n        this.mark(indentDepth, node.body, depth + 1, null);\n        this.jsSocketAndMark(indentDepth, node.id, depth + 1, null, null, ['no-drop']);\n        ref2 = node.params;\n        results2 = [];\n        for (l = 0, len2 = ref2.length; l < len2; l++) {\n          param = ref2[l];\n          results2.push(this.jsSocketAndMark(indentDepth, param, depth + 1, NEVER_PAREN));\n        }\n        return results2;\n        break;\n      case 'FunctionExpression':\n        this.jsBlock(node, depth, bounds);\n        this.mark(indentDepth, node.body, depth + 1, null);\n        if (node.id != null) {\n          this.jsSocketAndMark(indentDepth, node.id, depth + 1, null, null, ['no-drop']);\n        }\n        if (node.params.length > 0) {\n          return this.addSocket({\n            bounds: {\n              start: this.getBounds(node.params[0]).start,\n              end: this.getBounds(node.params[node.params.length - 1]).end\n            },\n            depth: depth + 1,\n            precedence: 0,\n            dropdown: null,\n            classes: ['no-drop'],\n            empty: ''\n          });\n        } else if (!this.opts.lockZeroParamFunctions) {\n          if (node.id != null) {\n            nodeBoundsStart = this.getBounds(node.id).end;\n            match = this.lines[nodeBoundsStart.line].slice(nodeBoundsStart.column).match(/^(\\s*\\()(\\s*)\\)/);\n          } else {\n            nodeBoundsStart = this.getBounds(node).start;\n            match = this.lines[nodeBoundsStart.line].slice(nodeBoundsStart.column).match(/^(\\s*function\\s*\\()(\\s*)\\)/);\n          }\n          if (match != null) {\n            return position = this.addSocket({\n              bounds: {\n                start: {\n                  line: nodeBoundsStart.line,\n                  column: nodeBoundsStart.column + match[1].length\n                },\n                end: {\n                  line: nodeBoundsStart.line,\n                  column: nodeBoundsStart.column + match[1].length + match[2].length\n                }\n              },\n              depth: depth,\n              precedence: 0,\n              dropdown: null,\n              classes: ['forbid-all', '__function_param__'],\n              empty: ''\n            });\n          }\n        }\n        break;\n      case 'AssignmentExpression':\n        this.jsBlock(node, depth, bounds);\n        this.jsSocketAndMark(indentDepth, node.left, depth + 1, NEVER_PAREN);\n        return this.jsSocketAndMark(indentDepth, node.right, depth + 1, NEVER_PAREN);\n      case 'ReturnStatement':\n        this.jsBlock(node, depth, bounds);\n        if (node.argument != null) {\n          return this.jsSocketAndMark(indentDepth, node.argument, depth + 1, null);\n        }\n        break;\n      case 'IfStatement':\n      case 'ConditionalExpression':\n        this.jsBlock(node, depth, bounds, {\n          addButton: '+'\n        });\n        this.jsSocketAndMark(indentDepth, node.test, depth + 1, NEVER_PAREN);\n        this.jsSocketAndMark(indentDepth, node.consequent, depth + 1, null);\n        currentElif = node.alternate;\n        results3 = [];\n        while (currentElif != null) {\n          if (currentElif.type === 'IfStatement') {\n            this.jsSocketAndMark(indentDepth, currentElif.test, depth + 1, null);\n            this.jsSocketAndMark(indentDepth, currentElif.consequent, depth + 1, null);\n            results3.push(currentElif = currentElif.alternate);\n          } else {\n            this.jsSocketAndMark(indentDepth, currentElif, depth + 1, 10);\n            results3.push(currentElif = null);\n          }\n        }\n        return results3;\n        break;\n      case 'ForInStatement':\n        this.jsBlock(node, depth, bounds);\n        if (node.left != null) {\n          this.jsSocketAndMark(indentDepth, node.left, depth + 1, NEVER_PAREN, null, ['foreach-lhs']);\n        }\n        if (node.right != null) {\n          this.jsSocketAndMark(indentDepth, node.right, depth + 1, 10);\n        }\n        return this.mark(indentDepth, node.body, depth + 1);\n      case 'BreakStatement':\n      case 'ContinueStatement':\n        this.jsBlock(node, depth, bounds);\n        if (node.label != null) {\n          return this.jsSocketAndMark(indentDepth, node.label, depth + 1, null);\n        }\n        break;\n      case 'ThrowStatement':\n        this.jsBlock(node, depth, bounds);\n        return this.jsSocketAndMark(indentDepth, node.argument, depth + 1, null);\n      case 'ForStatement':\n        this.jsBlock(node, depth, bounds);\n        if (this.opts.categories.loops.beginner && isStandardForLoop(node)) {\n          this.jsSocketAndMark(indentDepth, node.test.right);\n        } else {\n          if (node.init != null) {\n            this.jsSocketAndMark(indentDepth, node.init, depth + 1, NEVER_PAREN, null, ['for-statement-init']);\n          }\n          if (node.test != null) {\n            this.jsSocketAndMark(indentDepth, node.test, depth + 1, 10);\n          }\n          if (node.update != null) {\n            this.jsSocketAndMark(indentDepth, node.update, depth + 1, 10, null, ['for-statement-update']);\n          }\n        }\n        return this.mark(indentDepth, node.body, depth + 1);\n      case 'BlockStatement':\n        prefix = this.getIndentPrefix(this.getBounds(node), indentDepth);\n        indentDepth += prefix.length;\n        this.addIndent({\n          bounds: this.getBounds(node),\n          depth: depth,\n          prefix: prefix\n        });\n        ref3 = node.body;\n        results4 = [];\n        for (m = 0, len3 = ref3.length; m < len3; m++) {\n          statement = ref3[m];\n          results4.push(this.mark(indentDepth, statement, depth + 1, null));\n        }\n        return results4;\n        break;\n      case 'BinaryExpression':\n        this.jsBlock(node, depth, bounds);\n        this.jsSocketAndMark(indentDepth, node.left, depth + 1, OPERATOR_PRECEDENCES[node.operator]);\n        return this.jsSocketAndMark(indentDepth, node.right, depth + 1, OPERATOR_PRECEDENCES[node.operator]);\n      case 'UnaryExpression':\n        if (!(((ref4 = node.operator) === '-' || ref4 === '+') && ((ref5 = node.argument.type) === 'Identifier' || ref5 === 'Literal'))) {\n          this.jsBlock(node, depth, bounds);\n          return this.jsSocketAndMark(indentDepth, node.argument, depth + 1, this.getPrecedence(node));\n        }\n        break;\n      case 'ExpressionStatement':\n        return this.mark(indentDepth, node.expression, depth + 1, this.getBounds(node));\n      case 'Identifier':\n        if (node.name === '__') {\n          block = this.jsBlock(node, depth, bounds);\n          return block.flagToRemove = true;\n        } else if (this.lookupKnownName(node)) {\n          return this.jsBlock(node, depth, bounds);\n        }\n        break;\n      case 'CallExpression':\n      case 'NewExpression':\n        known = this.lookupKnownName(node);\n        buttons = {};\n        argCount = node[\"arguments\"].length;\n        if (known != null ? known.fn : void 0) {\n          showButtons = (known.fn.minArgs != null) || (known.fn.maxArgs != null);\n          minArgs = (ref6 = known.fn.minArgs) != null ? ref6 : 0;\n          maxArgs = (ref7 = known.fn.maxArgs) != null ? ref7 : Infinity;\n        } else {\n          showButtons = this.opts.paramButtonsForUnknownFunctions && (argCount !== 0 || !this.opts.lockZeroParamFunctions);\n          minArgs = 0;\n          maxArgs = Infinity;\n        }\n        if (showButtons) {\n          if (argCount < maxArgs) {\n            buttons.addButton = '\\u21A0';\n          }\n          if (argCount > minArgs) {\n            buttons.subtractButton = '\\u219E';\n          }\n        }\n        this.jsBlock(node, depth, bounds, buttons);\n        if (!known) {\n          this.jsSocketAndMark(indentDepth, node.callee, depth + 1, NEVER_PAREN);\n        } else if (known.anyobj && node.callee.type === 'MemberExpression') {\n          this.jsSocketAndMark(indentDepth, node.callee.object, depth + 1, NEVER_PAREN, null, null, known != null ? (ref8 = known.fn) != null ? ref8.objectDropdown : void 0 : void 0);\n        }\n        ref9 = node[\"arguments\"];\n        for (i = n = 0, len4 = ref9.length; n < len4; i = ++n) {\n          argument = ref9[i];\n          this.jsSocketAndMark(indentDepth, argument, depth + 1, NEVER_PAREN, null, null, known != null ? (ref10 = known.fn) != null ? (ref11 = ref10.dropdown) != null ? ref11[i] : void 0 : void 0 : void 0);\n        }\n        if (!known && argCount === 0 && !this.opts.lockZeroParamFunctions) {\n          position = {\n            line: node.callee.loc.end.line,\n            column: node.callee.loc.end.column\n          };\n          string = this.lines[position.line].slice(position.column).match(/^\\s*\\(/)[0];\n          position.column += string.length;\n          endPosition = {\n            line: position.line,\n            column: position.column\n          };\n          space = this.lines[position.line].slice(position.column).match(/^(\\s*)\\)/);\n          if (space != null) {\n            endPosition.column += space[1].length;\n          }\n          return this.addSocket({\n            bounds: {\n              start: position,\n              end: endPosition\n            },\n            depth: depth + 1,\n            precedence: NEVER_PAREN,\n            dropdown: null,\n            classes: ['mostly-value'],\n            empty: ''\n          });\n        }\n        break;\n      case 'MemberExpression':\n        this.jsBlock(node, depth, bounds);\n        known = this.lookupKnownName(node);\n        if (!known) {\n          this.jsSocketAndMark(indentDepth, node.property, depth + 1);\n        }\n        if (!known || known.anyobj) {\n          return this.jsSocketAndMark(indentDepth, node.object, depth + 1);\n        }\n        break;\n      case 'UpdateExpression':\n        this.jsBlock(node, depth, bounds);\n        return this.jsSocketAndMark(indentDepth, node.argument, depth + 1);\n      case 'VariableDeclaration':\n        this.jsBlock(node, depth, bounds);\n        ref12 = node.declarations;\n        results5 = [];\n        for (o = 0, len5 = ref12.length; o < len5; o++) {\n          declaration = ref12[o];\n          results5.push(this.mark(indentDepth, declaration, depth + 1));\n        }\n        return results5;\n        break;\n      case 'VariableDeclarator':\n        this.jsSocketAndMark(indentDepth, node.id, depth);\n        if (node.init != null) {\n          return this.jsSocketAndMark(indentDepth, node.init, depth, NEVER_PAREN);\n        }\n        break;\n      case 'LogicalExpression':\n        this.jsBlock(node, depth, bounds);\n        this.jsSocketAndMark(indentDepth, node.left, depth + 1, this.getPrecedence(node));\n        return this.jsSocketAndMark(indentDepth, node.right, depth + 1, this.getPrecedence(node));\n      case 'WhileStatement':\n      case 'DoWhileStatement':\n        this.jsBlock(node, depth, bounds);\n        this.jsSocketAndMark(indentDepth, node.body, depth + 1);\n        return this.jsSocketAndMark(indentDepth, node.test, depth + 1);\n      case 'ObjectExpression':\n        this.jsBlock(node, depth, bounds);\n        ref13 = node.properties;\n        results6 = [];\n        for (p = 0, len6 = ref13.length; p < len6; p++) {\n          property = ref13[p];\n          this.jsSocketAndMark(indentDepth, property.key, depth + 1);\n          results6.push(this.jsSocketAndMark(indentDepth, property.value, depth + 1));\n        }\n        return results6;\n        break;\n      case 'SwitchStatement':\n        this.jsBlock(node, depth, bounds);\n        this.jsSocketAndMark(indentDepth, node.discriminant, depth + 1);\n        ref14 = node.cases;\n        results7 = [];\n        for (q = 0, len7 = ref14.length; q < len7; q++) {\n          switchCase = ref14[q];\n          results7.push(this.mark(indentDepth, switchCase, depth + 1, null));\n        }\n        return results7;\n        break;\n      case 'SwitchCase':\n        if (node.test != null) {\n          this.jsSocketAndMark(indentDepth, node.test, depth + 1);\n        }\n        if (node.consequent.length > 0) {\n          bounds = this.getCaseIndentBounds(node);\n          prefix = this.getIndentPrefix(this.getBounds(node), indentDepth);\n          indentDepth += prefix.length;\n          this.addIndent({\n            bounds: bounds,\n            depth: depth + 1,\n            prefix: prefix\n          });\n          ref15 = node.consequent;\n          results8 = [];\n          for (r = 0, len8 = ref15.length; r < len8; r++) {\n            statement = ref15[r];\n            results8.push(this.mark(indentDepth, statement, depth + 2));\n          }\n          return results8;\n        }\n        break;\n      case 'TryStatement':\n        this.jsBlock(node, depth, bounds);\n        this.jsSocketAndMark(indentDepth, node.block, depth + 1, null);\n        if (node.handler != null) {\n          if (node.handler.guard != null) {\n            this.jsSocketAndMark(indentDepth, node.handler.guard, depth + 1, null);\n          }\n          if (node.handler.param != null) {\n            this.jsSocketAndMark(indentDepth, node.handler.param, depth + 1, null);\n          }\n          this.jsSocketAndMark(indentDepth, node.handler.body, depth + 1, null);\n        }\n        if (node.finalizer != null) {\n          return this.jsSocketAndMark(indentDepth, node.finalizer, depth + 1, null);\n        }\n        break;\n      case 'ArrayExpression':\n        buttons = {\n          addButton: '\\u21A0'\n        };\n        if (node.elements.length > 0) {\n          buttons.subtractButton = '\\u219E';\n        }\n        this.jsBlock(node, depth, bounds, buttons);\n        ref16 = node.elements;\n        results9 = [];\n        for (s = 0, len9 = ref16.length; s < len9; s++) {\n          element = ref16[s];\n          if (element != null) {\n            results9.push(this.jsSocketAndMark(indentDepth, element, depth + 1, null));\n          } else {\n            results9.push(void 0);\n          }\n        }\n        return results9;\n        break;\n      case 'Literal':\n        return null;\n      default:\n        return console.log('Unrecognized', node);\n    }\n  };\n\n  JavaScriptParser.prototype.jsBlock = function(node, depth, bounds, buttons) {\n    return this.addBlock({\n      bounds: bounds != null ? bounds : this.getBounds(node),\n      depth: depth,\n      precedence: this.getPrecedence(node),\n      color: this.getColor(node),\n      classes: this.getClasses(node),\n      socketLevel: this.getSocketLevel(node),\n      buttons: buttons\n    });\n  };\n\n  JavaScriptParser.prototype.jsSocketAndMark = function(indentDepth, node, depth, precedence, bounds, classes, dropdown, empty) {\n    if (node.type !== 'BlockStatement') {\n      this.addSocket({\n        bounds: bounds != null ? bounds : this.getBounds(node),\n        depth: depth,\n        precedence: precedence,\n        classes: classes != null ? classes : [],\n        dropdown: dropdown,\n        empty: empty\n      });\n    }\n    return this.mark(indentDepth, node, depth + 1, bounds);\n  };\n\n  return JavaScriptParser;\n\n})(parser.Parser);\n\nJavaScriptParser.parens = function(leading, trailing, node, context) {\n  if (indexOf.call(node.classes, '__comment__') >= 0) {\n    return;\n  }\n  if ((context != null ? context.type : void 0) === 'socket' || ((context == null) && indexOf.call(node.classes, 'mostly-value') >= 0 || indexOf.call(node.classes, 'value-only') >= 0) || indexOf.call(node.classes, 'ends-with-brace') >= 0 || node.type === 'document') {\n    trailing(trailing().replace(/;?\\s*$/, ''));\n  } else {\n    trailing(trailing().replace(/;?\\s*$/, ';'));\n  }\n  while (true) {\n    if ((leading().match(/^\\s*\\(/) != null) && (trailing().match(/\\)\\s*/) != null)) {\n      leading(leading().replace(/^\\s*\\(\\s*/, ''));\n      trailing(trailing().replace(/\\s*\\)\\s*$/, ''));\n    } else {\n      break;\n    }\n  }\n  if (!(context === null || context.type !== 'socket' || context.precedence > node.precedence)) {\n    leading('(' + leading());\n    return trailing(trailing() + ')');\n  }\n};\n\nJavaScriptParser.drop = function(block, context, pred) {\n  var ref, ref1;\n  if (context.type === 'socket') {\n    if (indexOf.call(context.classes, 'lvalue') >= 0) {\n      if (indexOf.call(block.classes, 'Value') >= 0 && ((ref = block.properties) != null ? ref.length : void 0) > 0) {\n        return helper.ENCOURAGE;\n      } else {\n        return helper.FORBID;\n      }\n    } else if (indexOf.call(context.classes, 'no-drop') >= 0) {\n      return helper.FORBID;\n    } else if (indexOf.call(context.classes, 'property-access') >= 0) {\n      if (indexOf.call(block.classes, 'works-as-method-call') >= 0) {\n        return helper.ENCOURAGE;\n      } else {\n        return helper.FORBID;\n      }\n    } else if (indexOf.call(block.classes, 'value-only') >= 0 || indexOf.call(block.classes, 'mostly-value') >= 0 || indexOf.call(block.classes, 'any-drop') >= 0 || indexOf.call(context.classes, 'for-statement-init') >= 0 || (indexOf.call(block.classes, 'mostly-block') >= 0 && indexOf.call(context.classes, 'for-statement-update') >= 0)) {\n      return helper.ENCOURAGE;\n    } else if (indexOf.call(block.classes, 'mostly-block') >= 0) {\n      return helper.DISCOURAGE;\n    }\n  } else if ((ref1 = context.type) === 'indent' || ref1 === 'document') {\n    if (indexOf.call(block.classes, 'block-only') >= 0 || indexOf.call(block.classes, 'mostly-block') >= 0 || indexOf.call(block.classes, 'any-drop') >= 0 || block.type === 'document') {\n      return helper.ENCOURAGE;\n    } else if (indexOf.call(block.classes, 'mostly-value') >= 0) {\n      return helper.DISCOURAGE;\n    }\n  }\n  return helper.DISCOURAGE;\n};\n\nisStandardForLoop = function(node) {\n  var ref, variableName;\n  if (!((node.init != null) && (node.test != null) && (node.update != null))) {\n    return false;\n  }\n  if (node.init.type === 'VariableDeclaration') {\n    variableName = node.init.declarations[0].id.name;\n  } else if (node.init.type === 'AssignmentExpression' && node.operator === '=' && node.left.type === 'Identifier') {\n    variableName = node.left.name;\n  } else {\n    return false;\n  }\n  return node.test.type === 'BinaryExpression' && node.test.operator === '<' && node.test.left.type === 'Identifier' && node.test.left.name === variableName && ((ref = node.test.right.type) === 'Literal' || ref === 'Identifier') && node.update.type === 'UpdateExpression' && node.update.operator === '++' && node.update.argument.type === 'Identifier' && node.update.argument.name === variableName;\n};\n\nJavaScriptParser.empty = \"__\";\n\nJavaScriptParser.emptyIndent = \"\";\n\nJavaScriptParser.startComment = '/*';\n\nJavaScriptParser.endComment = '*/';\n\nJavaScriptParser.startSingleLineComment = '//';\n\nJavaScriptParser.getDefaultSelectionRange = function(string) {\n  var end, ref, start;\n  start = 0;\n  end = string.length;\n  if (string[0] === string[string.length - 1] && ((ref = string[0]) === '\"' || ref === '\\'' || ref === '/')) {\n    start += 1;\n    end -= 1;\n  }\n  return {\n    start: start,\n    end: end\n  };\n};\n\nmodule.exports = parser.wrapParser(JavaScriptParser);\n\n\n},{\"../../vendor/acorn\":35,\"../helper.coffee\":28,\"../model.coffee\":31,\"../parser.coffee\":33}],30:[function(require,module,exports){\nmodule.exports = {\n  Editor: require('./controller.coffee').Editor\n};\n\n\n},{\"./controller.coffee\":26}],31:[function(require,module,exports){\nvar Block, BlockEndToken, BlockStartToken, Container, Document, DocumentEndToken, DocumentStartToken, EndToken, FORBID, Indent, IndentEndToken, IndentStartToken, List, Location, NO, NORMAL, NewlineToken, Operation, ReplaceOperation, Socket, SocketEndToken, SocketStartToken, StartToken, TextLocation, TextToken, Token, YES, _id, helper, isTreeValid, traverseOneLevel,\n  extend = function(child, parent) { for (var key in parent) { if (hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; },\n  hasProp = {}.hasOwnProperty;\n\nhelper = require('./helper.coffee');\n\nYES = function() {\n  return true;\n};\n\nNO = function() {\n  return false;\n};\n\nNORMAL = {\n  \"default\": helper.NORMAL\n};\n\nFORBID = {\n  \"default\": helper.FORBID\n};\n\n_id = 0;\n\nFunction.prototype.trigger = function(prop, get, set) {\n  return Object.defineProperty(this.prototype, prop, {\n    get: get,\n    set: set\n  });\n};\n\nexports.isTreeValid = isTreeValid = function(tree) {\n  var hare, k, lastHare, ref, ref1, ref2, ref3, stack, tortise;\n  tortise = hare = tree.start.next;\n  stack = [];\n  while (true) {\n    tortise = tortise.next;\n    lastHare = hare;\n    hare = hare.next;\n    if (hare == null) {\n      window._droplet_debug_lastHare = lastHare;\n      throw new Error('Ran off the end of the document before EOF');\n    }\n    if (lastHare !== hare.prev) {\n      throw new Error('Linked list is not properly bidirectional');\n    }\n    if (hare === tree.end) {\n      if (stack.length > 0) {\n        throw new Error('Document ended before: ' + ((function() {\n          var j, len, results;\n          results = [];\n          for (j = 0, len = stack.length; j < len; j++) {\n            k = stack[j];\n            results.push(k.type);\n          }\n          return results;\n        })()).join(','));\n      }\n      break;\n    }\n    if (hare instanceof StartToken) {\n      stack.push(hare.container);\n    } else if (hare instanceof EndToken) {\n      if (stack[stack.length - 1] !== hare.container) {\n        throw new Error(\"Stack does not align \" + ((ref = stack[stack.length - 1]) != null ? ref.type : void 0) + \" != \" + ((ref1 = hare.container) != null ? ref1.type : void 0));\n      } else {\n        stack.pop();\n      }\n    }\n    lastHare = hare;\n    hare = hare.next;\n    if (hare == null) {\n      window._droplet_debug_lastHare = lastHare;\n      throw new Error('Ran off the end of the document before EOF');\n    }\n    if (lastHare !== hare.prev) {\n      throw new Error('Linked list is not properly bidirectional');\n    }\n    if (hare === tree.end) {\n      if (stack.length > 0) {\n        throw new Error('Document ended before: ' + ((function() {\n          var j, len, results;\n          results = [];\n          for (j = 0, len = stack.length; j < len; j++) {\n            k = stack[j];\n            results.push(k.type);\n          }\n          return results;\n        })()).join(','));\n      }\n      break;\n    }\n    if (hare instanceof StartToken) {\n      stack.push(hare.container);\n    } else if (hare instanceof EndToken) {\n      if (stack[stack.length - 1] !== hare.container) {\n        throw new Error(\"Stack does not align \" + ((ref2 = stack[stack.length - 1]) != null ? ref2.type : void 0) + \" != \" + ((ref3 = hare.container) != null ? ref3.type : void 0));\n      } else {\n        stack.pop();\n      }\n    }\n    if (tortise === hare) {\n      throw new Error('Linked list loops');\n    }\n  }\n  return true;\n};\n\nOperation = (function() {\n  function Operation(type, list) {\n    this.type = type;\n    this.location = null;\n    this.list = list.clone();\n    this.start = list.start.getLocation();\n    this.end = list.end.getLocation();\n  }\n\n  Operation.prototype.toString = function() {\n    return JSON.stringify({\n      location: this.location.toString(),\n      list: this.list.stringify(),\n      start: this.start.toString(),\n      end: this.end.toString(),\n      type: this.type\n    });\n  };\n\n  return Operation;\n\n})();\n\nReplaceOperation = (function() {\n  function ReplaceOperation(beforeStart1, before1, beforeEnd1, afterStart1, after1, afterEnd1) {\n    this.beforeStart = beforeStart1;\n    this.before = before1;\n    this.beforeEnd = beforeEnd1;\n    this.afterStart = afterStart1;\n    this.after = after1;\n    this.afterEnd = afterEnd1;\n    this.type = 'replace';\n  }\n\n  ReplaceOperation.prototype.toString = function() {\n    return JSON.stringify({\n      beforeStart: this.beforeStart.toString(),\n      before: this.before.stringify(),\n      beforeEnd: this.beforeEnd.toString(),\n      afterStart: this.afterStart.toString(),\n      after: this.after.stringify(),\n      afterEnd: this.afterEnd.toString(),\n      type: this.type\n    });\n  };\n\n  return ReplaceOperation;\n\n})();\n\nexports.List = List = (function() {\n  function List(start1, end) {\n    this.start = start1;\n    this.end = end;\n    this.id = ++_id;\n  }\n\n  List.prototype.contains = function(token) {\n    var head;\n    if (token instanceof Container) {\n      token = token.start;\n    }\n    head = this.start;\n    while (head !== this.end) {\n      if (head === token) {\n        return true;\n      }\n      head = head.next;\n    }\n    if (token === this.end) {\n      return true;\n    } else {\n      return false;\n    }\n  };\n\n  List.prototype.getDocument = function() {\n    return this.start.getDocument();\n  };\n\n  List.prototype.insert = function(token, list, updates) {\n    var after, first, head, last, location, operation, ref, updateTokens;\n    if (updates == null) {\n      updates = [];\n    }\n    ref = [list.start, list.end], first = ref[0], last = ref[1];\n    updateTokens = updates.map((function(_this) {\n      return function(x) {\n        return _this.getFromLocation(x);\n      };\n    })(this));\n    switch (token.type) {\n      case 'indentStart':\n        head = token.container.end.prev;\n        if (head.type === 'newline') {\n          token = token.next;\n        } else {\n          first = new NewlineToken();\n          helper.connect(first, list.start);\n        }\n        break;\n      case 'blockEnd':\n        first = new NewlineToken();\n        helper.connect(first, list.start);\n        break;\n      case 'documentStart':\n        if (token.next !== token.container.end) {\n          last = new NewlineToken();\n          helper.connect(list.end, last);\n        }\n    }\n    location = token.getLocation();\n    list = new List(first, last);\n    after = token.next;\n    helper.connect(token, list.start);\n    if (token instanceof StartToken) {\n      list.setParent(token.container);\n    } else {\n      list.setParent(token.parent);\n    }\n    helper.connect(list.end, after);\n    list.notifyChange();\n    if (location != null) {\n      operation = new Operation('insert', list);\n      operation.location = location;\n      updates.forEach(function(x, i) {\n        return x.set(updateTokens[i].getLocation());\n      });\n    } else {\n      operation = null;\n    }\n    return operation;\n  };\n\n  List.prototype.remove = function(list, updates) {\n    var first, last, location, record, ref, ref1, ref2, ref3, updateTokens;\n    if (updates == null) {\n      updates = [];\n    }\n    first = list.start.prev;\n    last = list.end.next;\n    while ((first != null ? first.type : void 0) === 'newline' && ((ref = last != null ? last.type : void 0) === (void 0) || ref === 'newline' || ref === 'indentEnd' || ref === 'documentEnd') && !(((ref1 = first.prev) != null ? ref1.type : void 0) === 'indentStart' && first.prev.container.end === last)) {\n      first = first.prev;\n    }\n    while ((last != null ? last.type : void 0) === 'newline' && ((last != null ? (ref2 = last.next) != null ? ref2.type : void 0 : void 0) === 'newline' || ((ref3 = first != null ? first.type : void 0) === (void 0) || ref3 === 'documentStart'))) {\n      last = last.next;\n    }\n    first = first.next;\n    last = last.prev;\n    list = new List(first, last);\n    list.notifyChange();\n    updateTokens = updates.map((function(_this) {\n      return function(x) {\n        return _this.getFromLocation(x);\n      };\n    })(this)).map((function(_this) {\n      return function(x) {\n        if (list.contains(x)) {\n          return list.start.prev;\n        } else {\n          return x;\n        }\n      };\n    })(this));\n    record = new Operation('remove', list);\n    location = list.start.prev;\n    helper.connect(list.start.prev, list.end.next);\n    list.start.prev = list.end.next = null;\n    list.setParent(null);\n    record.location = location.getLocation();\n    updates.forEach((function(_this) {\n      return function(x, i) {\n        return x.set(updateTokens[i].getLocation());\n      };\n    })(this));\n    return record;\n  };\n\n  List.prototype.replace = function(before, after, updates) {\n    var afterEnd, afterStart, beforeEnd, beforeLength, beforeStart, parent, updateTextLocations;\n    if (updates == null) {\n      updates = [];\n    }\n    updateTextLocations = updates.map((function(_this) {\n      return function(x) {\n        return _this.getFromLocation(x).getTextLocation();\n      };\n    })(this));\n    beforeStart = before.start.getLocation();\n    beforeEnd = before.end.getLocation();\n    beforeLength = before.stringify().length;\n    parent = before.start.parent;\n    helper.connect(before.start.prev, after.start);\n    helper.connect(after.end, before.end.next);\n    before.setParent(null);\n    after.setParent(parent);\n    after.notifyChange();\n    afterStart = after.start.getLocation();\n    afterEnd = after.end.getLocation();\n    updates.forEach((function(_this) {\n      return function(x, i) {\n        return x.set(_this.getFromTextLocation(updateTextLocations[i]).getLocation());\n      };\n    })(this));\n    return new ReplaceOperation(beforeStart, before.clone(), beforeEnd, afterStart, after.clone(), afterEnd);\n  };\n\n  List.prototype.perform = function(operation, direction, updates) {\n    var after, before, list, parent, updateTextLocations, updateTokens;\n    if (updates == null) {\n      updates = [];\n    }\n    if (operation instanceof Operation) {\n      if ((operation.type === 'insert') !== (direction === 'forward')) {\n        list = new List(this.getFromLocation(operation.start), this.getFromLocation(operation.end));\n        list.notifyChange();\n        updateTokens = updates.map((function(_this) {\n          return function(x) {\n            return _this.getFromLocation(x);\n          };\n        })(this)).map((function(_this) {\n          return function(x) {\n            if (list.contains(x)) {\n              return list.start.prev;\n            } else {\n              return x;\n            }\n          };\n        })(this));\n        helper.connect(list.start.prev, list.end.next);\n        updates.forEach(function(x, i) {\n          return x.set(updateTokens[i].getLocation());\n        });\n        return operation;\n      } else if ((operation.type === 'remove') !== (direction === 'forward')) {\n        updateTokens = updates.map((function(_this) {\n          return function(x) {\n            return _this.getFromLocation(x);\n          };\n        })(this));\n        list = operation.list.clone();\n        before = this.getFromLocation(operation.location);\n        after = before.next;\n        helper.connect(before, list.start);\n        helper.connect(list.end, after);\n        if (before instanceof StartToken) {\n          list.setParent(before.container);\n        } else {\n          list.setParent(before.parent);\n        }\n        list.notifyChange();\n        updates.forEach(function(x, i) {\n          return x.set(updateTokens[i].getLocation());\n        });\n        return operation;\n      }\n    } else if (operation.type === 'replace') {\n      updateTextLocations = updates.map((function(_this) {\n        return function(x) {\n          return _this.getFromLocation(x).getTextLocation();\n        };\n      })(this));\n      if (direction === 'forward') {\n        before = new List(this.getFromLocation(operation.beforeStart), this.getFromLocation(operation.beforeEnd));\n        after = operation.after.clone();\n      } else {\n        before = new List(this.getFromLocation(operation.afterStart), this.getFromLocation(operation.afterEnd));\n        after = operation.before.clone();\n      }\n      parent = before.start.parent;\n      helper.connect(before.start.prev, after.start);\n      helper.connect(after.end, before.end.next);\n      after.setParent(parent);\n      before.setParent(null);\n      after.notifyChange();\n      updates.forEach((function(_this) {\n        return function(x, i) {\n          return x.set(_this.getFromTextLocation(updateTextLocations[i]).getLocation());\n        };\n      })(this));\n      return null;\n    }\n  };\n\n  List.prototype.notifyChange = function() {\n    return this.traverseOneLevel(function(head) {\n      return head.notifyChange();\n    });\n  };\n\n  List.prototype.traverseOneLevel = function(fn) {\n    return traverseOneLevel(this.start, fn, this.end);\n  };\n\n  List.prototype.isFirstOnLine = function() {\n    var ref, ref1, ref2, ref3, ref4;\n    return ((ref = this.start.prev) === ((ref1 = this.parent) != null ? ref1.start : void 0) || ref === ((ref2 = this.parent) != null ? (ref3 = ref2.parent) != null ? ref3.start : void 0 : void 0) || ref === null) || ((ref4 = this.start.prev) != null ? ref4.type : void 0) === 'newline';\n  };\n\n  List.prototype.isLastOnLine = function() {\n    var ref, ref1, ref2, ref3, ref4, ref5;\n    return ((ref = this.end.next) === ((ref1 = this.parent) != null ? ref1.end : void 0) || ref === ((ref2 = this.parent) != null ? (ref3 = ref2.parent) != null ? ref3.end : void 0 : void 0) || ref === null) || ((ref4 = (ref5 = this.end.next) != null ? ref5.type : void 0) === 'newline' || ref4 === 'indentStart' || ref4 === 'indentEnd');\n  };\n\n  List.prototype.getReader = function() {\n    return {\n      type: 'document',\n      classes: []\n    };\n  };\n\n  List.prototype.setParent = function(parent) {\n    return traverseOneLevel(this.start, (function(head) {\n      return head.setParent(parent);\n    }), this.end);\n  };\n\n  List.prototype.clone = function() {\n    var assembler, clone, head;\n    assembler = head = {};\n    this.traverseOneLevel((function(_this) {\n      return function(head) {\n        var clone;\n        if (head instanceof Container) {\n          clone = head.clone();\n          helper.connect(assembler, clone.start);\n          return assembler = clone.end;\n        } else {\n          return assembler = helper.connect(assembler, head.clone());\n        }\n      };\n    })(this));\n    head = head.next;\n    head.prev = null;\n    clone = new List(head, assembler);\n    clone.correctParentTree();\n    return clone;\n  };\n\n  List.prototype.correctParentTree = function() {\n    return this.traverseOneLevel((function(_this) {\n      return function(head) {\n        head.parent = _this;\n        if (head instanceof Container) {\n          head.start.parent = head.end.parent = _this;\n          return head.correctParentTree();\n        }\n      };\n    })(this));\n  };\n\n  List.prototype.stringify = function() {\n    var head, str;\n    head = this.start;\n    str = head.stringify();\n    while (head !== this.end) {\n      head = head.next;\n      str += head.stringify();\n    }\n    return str;\n  };\n\n  List.prototype.stringifyInPlace = function() {\n    var head, indent, ref, str;\n    str = '';\n    indent = [];\n    head = this.start;\n    while (true) {\n      if (head instanceof IndentStartToken) {\n        indent.push(head.container.prefix);\n      } else if (head instanceof IndentEndToken) {\n        indent.pop();\n      }\n      if (head instanceof NewlineToken) {\n        str += '\\n' + ((ref = head.specialIndent) != null ? ref : indent.join(''));\n      } else {\n        str += head.stringify();\n      }\n      if (head === this.end) {\n        break;\n      }\n      head = head.next;\n    }\n    return str;\n  };\n\n  return List;\n\n})();\n\nexports.Container = Container = (function(superClass) {\n  extend(Container, superClass);\n\n  function Container() {\n    if (!((this.start != null) || (this.end != null))) {\n      this.start = new StartToken(this);\n      this.end = new EndToken(this);\n      this.type = 'container';\n    }\n    this.id = ++_id;\n    this.parent = null;\n    this.version = 0;\n    helper.connect(this.start, this.end);\n    this.ephemeral = false;\n    this.lineMarkStyles = [];\n  }\n\n  Container.prototype.getLocation = function() {\n    var location;\n    location = this.start.getLocation();\n    location.type = this.type;\n    return location;\n  };\n\n  Container.prototype.getTextLocation = function() {\n    var location;\n    location = this.start.getTextLocation();\n    location.type = this.type;\n    return location;\n  };\n\n  Container.prototype._cloneEmpty = function() {\n    return new Container();\n  };\n\n  Container.prototype._firstChild = function() {\n    var head;\n    head = this.start.next;\n    while (head !== this.end) {\n      if (head instanceof StartToken) {\n        return head.container;\n      }\n      head = head.next;\n    }\n    return null;\n  };\n\n  Container.prototype.getReader = function() {\n    return {\n      id: this.id,\n      type: this.type,\n      precedence: this.precedence,\n      classes: this.classes\n    };\n  };\n\n  Container.prototype.setParent = function(parent) {\n    return this.parent = this.start.parent = this.end.parent = parent;\n  };\n\n  Container.prototype.hasParent = function(parent) {\n    var head;\n    head = this;\n    while (head !== parent && head !== null) {\n      head = head.parent;\n    }\n    return head === parent;\n  };\n\n  Container.prototype.getLinesToParent = function() {\n    var head, lines;\n    head = this.start;\n    lines = 0;\n    while (head !== this.parent.start) {\n      if (head.type === 'newline') {\n        lines++;\n      }\n      head = head.prev;\n    }\n    return lines;\n  };\n\n  Container.prototype.clone = function() {\n    var assembler, selfClone;\n    selfClone = this._cloneEmpty();\n    assembler = selfClone.start;\n    this.traverseOneLevel((function(_this) {\n      return function(head) {\n        var clone;\n        if (head instanceof Container) {\n          clone = head.clone();\n          helper.connect(assembler, clone.start);\n          return assembler = clone.end;\n        } else {\n          return assembler = helper.connect(assembler, head.clone());\n        }\n      };\n    })(this));\n    helper.connect(assembler, selfClone.end);\n    selfClone.correctParentTree();\n    return selfClone;\n  };\n\n  Container.prototype.rawReplace = function(other) {\n    if (other.start.prev != null) {\n      helper.connect(other.start.prev, this.start);\n    }\n    if (other.end.next != null) {\n      helper.connect(this.end, other.end.next);\n    }\n    this.start.parent = this.end.parent = this.parent = other.parent;\n    other.parent = other.start.parent = other.end.parent = null;\n    other.start.prev = other.end.next = null;\n    return this.notifyChange();\n  };\n\n  Container.prototype.getNewlineBefore = function(n) {\n    var head, lines;\n    head = this.start;\n    lines = 0;\n    while (!(lines === n || head === this.end)) {\n      head = head.next;\n      if (head.type === 'newline') {\n        lines++;\n      }\n    }\n    return head;\n  };\n\n  Container.prototype.getNewlineAfter = function(n) {\n    var head;\n    head = this.getNewlineBefore(n).next;\n    while (!(start.type === 'newline' || head === this.end)) {\n      head = head.next;\n    }\n    return head;\n  };\n\n  Container.prototype.getLeadingText = function() {\n    if (this.start.next.type === 'text') {\n      return this.start.next.value;\n    } else {\n      return '';\n    }\n  };\n\n  Container.prototype.getTrailingText = function() {\n    if (this.end.prev.type === 'text') {\n      return this.end.prev.value;\n    } else {\n      return '';\n    }\n  };\n\n  Container.prototype.setLeadingText = function(value) {\n    if (value != null) {\n      if (this.start.next.type === 'text') {\n        if (value.length === 0) {\n          return this.start.next.remove();\n        } else {\n          return this.start.next.value = value;\n        }\n      } else if (value.length !== 0) {\n        return this.start.insert(new TextToken(value));\n      }\n    }\n  };\n\n  Container.prototype.setTrailingText = function(value) {\n    if (value != null) {\n      if (this.end.prev.type === 'text') {\n        if (value.length === 0) {\n          return this.end.prev.remove();\n        } else {\n          return this.end.prev.value = value;\n        }\n      } else if (value.length !== 0) {\n        return this.end.prev.insert(new TextToken(value));\n      }\n    }\n  };\n\n  Container.prototype.serialize = function() {\n    var str;\n    str = this._serialize_header();\n    this.traverseOneLevel(function(child) {\n      return str += child.serialize();\n    });\n    return str += this._serialize_footer();\n  };\n\n  Container.prototype._serialize_header = \"<container>\";\n\n  Container.prototype._serialize_header = \"</container>\";\n\n  Container.prototype.contents = function() {\n    var clone;\n    clone = this.clone();\n    if (clone.start.next === clone.end) {\n      return null;\n    } else {\n      clone.start.next.prev = null;\n      clone.end.prev.next = null;\n      return clone.start.next;\n    }\n  };\n\n  Container.prototype.notifyChange = function() {\n    var head, results;\n    head = this;\n    results = [];\n    while (head != null) {\n      head.version++;\n      results.push(head = head.parent);\n    }\n    return results;\n  };\n\n  Container.prototype.getBlockOnLine = function(line) {\n    var head, lineCount, stack;\n    head = this.start;\n    lineCount = 0;\n    stack = [];\n    while (!(lineCount === line || (head == null))) {\n      switch (head.type) {\n        case 'newline':\n          lineCount++;\n          break;\n        case 'blockStart':\n          stack.push(head.container);\n          break;\n        case 'blockEnd':\n          stack.pop();\n      }\n      head = head.next;\n    }\n    while ((head != null ? head.type : void 0) === 'newline' || (head instanceof StartToken && head.type !== 'blockStart')) {\n      head = head.next;\n    }\n    if ((head != null ? head.type : void 0) === 'blockStart') {\n      stack.push(head.container);\n    }\n    return stack[stack.length - 1];\n  };\n\n  Container.prototype.traverseOneLevel = function(fn) {\n    if (this.start.next !== this.end) {\n      return traverseOneLevel(this.start.next, fn, this.end.prev);\n    }\n  };\n\n  Container.prototype.addLineMark = function(mark) {\n    return this.lineMarkStyles.push(mark);\n  };\n\n  Container.prototype.removeLineMark = function(tag) {\n    var mark;\n    return this.lineMarkStyles = (function() {\n      var j, len, ref, results;\n      ref = this.lineMarkStyles;\n      results = [];\n      for (j = 0, len = ref.length; j < len; j++) {\n        mark = ref[j];\n        if (mark.tag !== tag) {\n          results.push(mark);\n        }\n      }\n      return results;\n    }).call(this);\n  };\n\n  Container.prototype.clearLineMarks = function() {\n    return this.lineMarkStyles = [];\n  };\n\n  Container.prototype.getFromLocation = function(location) {\n    var head, j, ref;\n    head = this.start;\n    for (j = 0, ref = location.count; 0 <= ref ? j < ref : j > ref; 0 <= ref ? j++ : j--) {\n      head = head.next;\n    }\n    if (location.type === head.type) {\n      return head;\n    } else if (location.type === head.container.type) {\n      return head.container;\n    } else {\n      throw new Error(\"Could not retrieve location \" + location);\n    }\n  };\n\n  Container.prototype.getFromTextLocation = function(location) {\n    var best, col, head, ref, ref1, ref2, row;\n    head = this.start.next;\n    best = head;\n    row = 0;\n    while (!((head == null) || row === location.row)) {\n      head = head.next;\n      if (head instanceof NewlineToken) {\n        row += 1;\n      }\n    }\n    if (head == null) {\n      return this.end;\n    } else {\n      best = head;\n    }\n    if (head instanceof NewlineToken) {\n      col = head.stringify().length - 1;\n      head = head.next;\n    } else {\n      col = head.stringify().length;\n    }\n    while (!(((head == null) || head instanceof NewlineToken) || col >= location.col)) {\n      col += head.stringify().length;\n      head = head.next;\n    }\n    if (col < location.col) {\n      return head != null ? head : this.end;\n    } else {\n      best = head;\n    }\n    if (location.length != null) {\n      while (!(((head == null) || head.stringify().length > 0) || (((ref = head.container) != null ? ref : head).stringify().length === location.length))) {\n        head = head.next;\n      }\n      if ((head != null) && ((ref1 = head.container) != null ? ref1 : head).stringify().length === location.length) {\n        best = head;\n      } else {\n        head = best;\n      }\n    }\n    if (location.type != null) {\n      while (!(((head == null) || head.stringify().length > 0) || head.type === location.type || head.container.type === location.type)) {\n        head = head.next;\n      }\n      if ((head != null ? (ref2 = head.container) != null ? ref2.type : void 0 : void 0) === location.type) {\n        head = head.container;\n      }\n      if ((head != null ? head.type : void 0) === location.type) {\n        best = head;\n      }\n    }\n    return best;\n  };\n\n  return Container;\n\n})(List);\n\nexports.Token = Token = (function() {\n  function Token() {\n    this.id = ++_id;\n    this.prev = this.next = this.parent = null;\n    this.version = 0;\n  }\n\n  Token.prototype.getLinesToParent = function() {\n    var head, lines;\n    head = this;\n    lines = 0;\n    while (head !== this.parent.start) {\n      if (head.type === 'newline') {\n        lines++;\n      }\n      head = head.prev;\n    }\n    return lines;\n  };\n\n  Token.prototype.setParent = function(parent1) {\n    this.parent = parent1;\n  };\n\n  Token.prototype.hasParent = function(parent) {\n    var head;\n    head = this;\n    while (head !== parent && head !== null) {\n      head = head.parent;\n    }\n    return head === parent;\n  };\n\n  Token.prototype.insert = function(token) {\n    token.next = this.next;\n    token.prev = this;\n    this.next.prev = token;\n    this.next = token;\n    if (this instanceof StartToken) {\n      token.parent = this.container;\n    } else {\n      token.parent = parent;\n    }\n    return token;\n  };\n\n  Token.prototype.remove = function() {\n    if (this.prev != null) {\n      helper.connect(this.prev, this.next);\n    } else if (this.next != null) {\n      this.next.prev = null;\n    }\n    return this.prev = this.next = this.parent = null;\n  };\n\n  Token.prototype.notifyChange = function() {\n    var head;\n    head = this;\n    while (head != null) {\n      head.version++;\n      head = head.parent;\n    }\n    return null;\n  };\n\n  Token.prototype.isFirstOnLine = function() {\n    var ref, ref1;\n    return this.prev === ((ref = this.parent) != null ? ref.start : void 0) || ((ref1 = this.prev) != null ? ref1.type : void 0) === 'newline';\n  };\n\n  Token.prototype.isLastOnLine = function() {\n    var ref, ref1, ref2;\n    return this.next === ((ref = this.parent) != null ? ref.end : void 0) || ((ref1 = (ref2 = this.next) != null ? ref2.type : void 0) === 'newline' || ref1 === 'indentEnd');\n  };\n\n  Token.prototype.clone = function() {\n    return new Token();\n  };\n\n  Token.prototype.getSerializedLocation = function() {\n    var count, head;\n    head = this;\n    count = 0;\n    while (head !== null) {\n      count++;\n      head = head.prev;\n    }\n    return count;\n  };\n\n  Token.prototype.getIndent = function() {\n    var head, prefix;\n    head = this;\n    prefix = '';\n    while (head != null) {\n      if (head.type === 'indent') {\n        prefix = head.prefix + prefix;\n      }\n      head = head.parent;\n    }\n    return prefix;\n  };\n\n  Token.prototype.getTextLocation = function() {\n    var head, location;\n    location = new TextLocation();\n    head = this.prev;\n    location.type = this.type;\n    if (this instanceof StartToken || this instanceof EndToken) {\n      location.length = this.container.stringify().length;\n    } else {\n      location.length = this.stringify().length;\n    }\n    while (!((head == null) || head instanceof NewlineToken)) {\n      location.col += head.stringify().length;\n      head = head.prev;\n    }\n    if (head != null) {\n      location.col += head.stringify().length - 1;\n    }\n    while (head != null) {\n      if (head instanceof NewlineToken) {\n        location.row += 1;\n      }\n      head = head.prev;\n    }\n    return location;\n  };\n\n  Token.prototype.getDocument = function() {\n    var head, ref;\n    head = (ref = this.container) != null ? ref : this;\n    while (!((head == null) || head instanceof Document)) {\n      head = head.parent;\n    }\n    return head;\n  };\n\n  Token.prototype.getLocation = function() {\n    var count, dropletDocument, head;\n    count = 0;\n    head = this;\n    dropletDocument = this.getDocument();\n    if (dropletDocument == null) {\n      return null;\n    }\n    while (head !== dropletDocument.start) {\n      head = head.prev;\n      count += 1;\n    }\n    return new Location(count, this.type);\n  };\n\n  Token.prototype.stringify = function() {\n    return '';\n  };\n\n  Token.prototype.serialize = function() {\n    return '';\n  };\n\n  return Token;\n\n})();\n\nexports.Location = Location = (function() {\n  function Location(count1, type) {\n    this.count = count1;\n    this.type = type;\n  }\n\n  Location.prototype.toString = function() {\n    return this.count + \", \" + this.type;\n  };\n\n  Location.prototype.set = function(other) {\n    this.count = other.count;\n    return this.type = other.type;\n  };\n\n  Location.prototype.is = function(other) {\n    if (!(other instanceof Location)) {\n      other = other.getLocation();\n    }\n    return other.count === this.count && other.type === this.type;\n  };\n\n  Location.prototype.clone = function() {\n    return new Location(this.count, this.type);\n  };\n\n  return Location;\n\n})();\n\nexports.TextLocation = TextLocation = (function() {\n  function TextLocation(row1, col1, type, length) {\n    this.row = row1 != null ? row1 : 0;\n    this.col = col1 != null ? col1 : 0;\n    this.type = type != null ? type : null;\n    this.length = length != null ? length : null;\n  }\n\n  TextLocation.prototype.toString = function() {\n    return \"(\" + this.row + \", \" + this.col + \", \" + this.type + \", \" + this.length + \")\";\n  };\n\n  TextLocation.prototype.set = function(other) {\n    this.row = other.row;\n    this.col = other.col;\n    this.type = other.type;\n    return this.length = other.length;\n  };\n\n  TextLocation.prototype.is = function(other) {\n    var answer;\n    if (!(other instanceof TextLocation)) {\n      other = other.getLocation();\n    }\n    answer = other.row === this.row && other.col === this.col && ((this.type != null) && (other.type != null) ? answer = answer && this.type === other.type : void 0);\n    if ((this.length != null) && (other.length != null)) {\n      answer = answer && this.length === other.length;\n    }\n    return answer;\n  };\n\n  return TextLocation;\n\n})();\n\nexports.StartToken = StartToken = (function(superClass) {\n  extend(StartToken, superClass);\n\n  function StartToken(container) {\n    this.container = container;\n    StartToken.__super__.constructor.apply(this, arguments);\n    this.markup = 'begin';\n  }\n\n  StartToken.prototype.insert = function(token) {\n    if (token instanceof StartToken || token instanceof EndToken) {\n      console.warn('\"insert\"-ing a container can cause problems');\n    }\n    token.next = this.next;\n    token.prev = this;\n    this.next.prev = token;\n    this.next = token;\n    token.parent = this.container;\n    return token;\n  };\n\n  StartToken.prototype.serialize = function() {\n    return '<container>';\n  };\n\n  return StartToken;\n\n})(Token);\n\nexports.EndToken = EndToken = (function(superClass) {\n  extend(EndToken, superClass);\n\n  function EndToken(container) {\n    this.container = container;\n    EndToken.__super__.constructor.apply(this, arguments);\n    this.markup = 'end';\n  }\n\n  EndToken.prototype.insert = function(token) {\n    if (token instanceof StartToken || token instanceof EndToken) {\n      console.warn('\"insert\"-ing a container can cause problems');\n    }\n    token.next = this.next;\n    token.prev = this;\n    this.next.prev = token;\n    this.next = token;\n    token.parent = this.container.parent;\n    return token;\n  };\n\n  EndToken.prototype.serialize = function() {\n    return '</container>';\n  };\n\n  return EndToken;\n\n})(Token);\n\nexports.BlockStartToken = BlockStartToken = (function(superClass) {\n  extend(BlockStartToken, superClass);\n\n  function BlockStartToken(container) {\n    this.container = container;\n    BlockStartToken.__super__.constructor.apply(this, arguments);\n    this.type = 'blockStart';\n  }\n\n  return BlockStartToken;\n\n})(StartToken);\n\nexports.BlockEndToken = BlockEndToken = (function(superClass) {\n  extend(BlockEndToken, superClass);\n\n  function BlockEndToken(container) {\n    this.container = container;\n    BlockEndToken.__super__.constructor.apply(this, arguments);\n    this.type = 'blockEnd';\n  }\n\n  BlockEndToken.prototype.serialize = function() {\n    return \"</block>\";\n  };\n\n  return BlockEndToken;\n\n})(EndToken);\n\nexports.Block = Block = (function(superClass) {\n  extend(Block, superClass);\n\n  function Block(precedence, color, socketLevel, classes, parseContext, buttons) {\n    this.precedence = precedence != null ? precedence : 0;\n    this.color = color != null ? color : 'blank';\n    this.socketLevel = socketLevel != null ? socketLevel : helper.ANY_DROP;\n    this.classes = classes != null ? classes : [];\n    this.parseContext = parseContext;\n    this.buttons = buttons != null ? buttons : {};\n    this.start = new BlockStartToken(this);\n    this.end = new BlockEndToken(this);\n    this.type = 'block';\n    Block.__super__.constructor.apply(this, arguments);\n  }\n\n  Block.prototype.nextSibling = function() {\n    var head, parent;\n    head = this.end.next;\n    parent = head.parent;\n    while (head && head.container !== parent) {\n      if (head instanceof StartToken) {\n        return head.container;\n      }\n      head = head.next;\n    }\n    return null;\n  };\n\n  Block.prototype._cloneEmpty = function() {\n    var clone;\n    clone = new Block(this.precedence, this.color, this.socketLevel, this.classes, this.parseContext, this.buttons);\n    clone.currentlyParenWrapped = this.currentlyParenWrapped;\n    return clone;\n  };\n\n  Block.prototype._serialize_header = function() {\n    var ref, ref1;\n    return \"<block precedence=\\\"\" + this.precedence + \"\\\" color=\\\"\" + this.color + \"\\\" socketLevel=\\\"\" + this.socketLevel + \"\\\" classes=\\\"\" + ((ref = (ref1 = this.classes) != null ? typeof ref1.join === \"function\" ? ref1.join(' ') : void 0 : void 0) != null ? ref : '') + \"\\\" >\";\n  };\n\n  Block.prototype._serialize_footer = function() {\n    return \"</block>\";\n  };\n\n  return Block;\n\n})(Container);\n\nexports.SocketStartToken = SocketStartToken = (function(superClass) {\n  extend(SocketStartToken, superClass);\n\n  function SocketStartToken(container) {\n    this.container = container;\n    SocketStartToken.__super__.constructor.apply(this, arguments);\n    this.type = 'socketStart';\n  }\n\n  return SocketStartToken;\n\n})(StartToken);\n\nexports.SocketEndToken = SocketEndToken = (function(superClass) {\n  extend(SocketEndToken, superClass);\n\n  function SocketEndToken(container) {\n    this.container = container;\n    SocketEndToken.__super__.constructor.apply(this, arguments);\n    this.type = 'socketEnd';\n  }\n\n  SocketEndToken.prototype.stringify = function() {\n    if (this.prev === this.container.start || this.prev.type === 'text' && this.prev.value === '') {\n      return this.container.emptyString;\n    } else {\n      return '';\n    }\n  };\n\n  return SocketEndToken;\n\n})(EndToken);\n\nexports.Socket = Socket = (function(superClass) {\n  extend(Socket, superClass);\n\n  function Socket(emptyString, precedence, handwritten, classes, dropdown) {\n    this.emptyString = emptyString;\n    this.precedence = precedence != null ? precedence : 0;\n    this.handwritten = handwritten != null ? handwritten : false;\n    this.classes = classes != null ? classes : [];\n    this.dropdown = dropdown != null ? dropdown : null;\n    this.start = new SocketStartToken(this);\n    this.end = new SocketEndToken(this);\n    this.type = 'socket';\n    Socket.__super__.constructor.apply(this, arguments);\n  }\n\n  Socket.prototype.textContent = function() {\n    var head, str;\n    head = this.start.next;\n    str = '';\n    while (head !== this.end) {\n      str += head.stringify();\n      head = head.next;\n    }\n    return str;\n  };\n\n  Socket.prototype.hasDropdown = function() {\n    return (this.dropdown != null) && this.isDroppable();\n  };\n\n  Socket.prototype.editable = function() {\n    return (!((this.dropdown != null) && this.dropdown.dropdownOnly)) && this.isDroppable();\n  };\n\n  Socket.prototype.isDroppable = function() {\n    return this.start.next === this.end || this.start.next.type === 'text';\n  };\n\n  Socket.prototype._cloneEmpty = function() {\n    return new Socket(this.emptyString, this.precedence, this.handwritten, this.classes, this.dropdown);\n  };\n\n  Socket.prototype._serialize_header = function() {\n    var ref, ref1, ref2, ref3;\n    return \"<socket precedence=\\\"\" + this.precedence + \"\\\" handwritten=\\\"\" + this.handwritten + \"\\\" classes=\\\"\" + ((ref = (ref1 = this.classes) != null ? typeof ref1.join === \"function\" ? ref1.join(' ') : void 0 : void 0) != null ? ref : '') + \"\\\"\" + (this.dropdown != null ? \" dropdown=\\\"\" + ((ref2 = (ref3 = this.dropdown) != null ? typeof ref3.join === \"function\" ? ref3.join(' ') : void 0 : void 0) != null ? ref2 : '') + \"\\\"\" : '') + \">\";\n  };\n\n  Socket.prototype._serialize_footer = function() {\n    return \"</socket>\";\n  };\n\n  return Socket;\n\n})(Container);\n\nexports.IndentStartToken = IndentStartToken = (function(superClass) {\n  extend(IndentStartToken, superClass);\n\n  function IndentStartToken(container) {\n    this.container = container;\n    IndentStartToken.__super__.constructor.apply(this, arguments);\n    this.type = 'indentStart';\n  }\n\n  return IndentStartToken;\n\n})(StartToken);\n\nexports.IndentEndToken = IndentEndToken = (function(superClass) {\n  extend(IndentEndToken, superClass);\n\n  function IndentEndToken(container) {\n    this.container = container;\n    IndentEndToken.__super__.constructor.apply(this, arguments);\n    this.type = 'indentEnd';\n  }\n\n  IndentEndToken.prototype.stringify = function() {\n    if (this.prev.prev === this.container.start) {\n      return this.container.emptyString;\n    } else {\n      return '';\n    }\n  };\n\n  IndentEndToken.prototype.serialize = function() {\n    return \"</indent>\";\n  };\n\n  return IndentEndToken;\n\n})(EndToken);\n\nexports.Indent = Indent = (function(superClass) {\n  extend(Indent, superClass);\n\n  function Indent(emptyString, prefix1, classes) {\n    this.emptyString = emptyString;\n    this.prefix = prefix1 != null ? prefix1 : '';\n    this.classes = classes != null ? classes : [];\n    this.start = new IndentStartToken(this);\n    this.end = new IndentEndToken(this);\n    this.type = 'indent';\n    this.depth = this.prefix.length;\n    Indent.__super__.constructor.apply(this, arguments);\n  }\n\n  Indent.prototype._cloneEmpty = function() {\n    return new Indent(this.emptyString, this.prefix, this.classes);\n  };\n\n  Indent.prototype.firstChild = function() {\n    return this._firstChild();\n  };\n\n  Indent.prototype._serialize_header = function() {\n    var ref, ref1;\n    return \"<indent prefix=\\\"\" + this.prefix + \"\\\" classes=\\\"\" + ((ref = (ref1 = this.classes) != null ? typeof ref1.join === \"function\" ? ref1.join(' ') : void 0 : void 0) != null ? ref : '') + \"\\\">\";\n  };\n\n  Indent.prototype._serialize_footer = function() {\n    return \"</indent>\";\n  };\n\n  return Indent;\n\n})(Container);\n\nexports.DocumentStartToken = DocumentStartToken = (function(superClass) {\n  extend(DocumentStartToken, superClass);\n\n  function DocumentStartToken(container) {\n    this.container = container;\n    DocumentStartToken.__super__.constructor.apply(this, arguments);\n    this.type = 'documentStart';\n  }\n\n  DocumentStartToken.prototype.serialize = function() {\n    return \"<document>\";\n  };\n\n  return DocumentStartToken;\n\n})(StartToken);\n\nexports.DocumentEndToken = DocumentEndToken = (function(superClass) {\n  extend(DocumentEndToken, superClass);\n\n  function DocumentEndToken(container) {\n    this.container = container;\n    DocumentEndToken.__super__.constructor.apply(this, arguments);\n    this.type = 'documentEnd';\n  }\n\n  DocumentEndToken.prototype.serialize = function() {\n    return \"</document>\";\n  };\n\n  return DocumentEndToken;\n\n})(EndToken);\n\nexports.Document = Document = (function(superClass) {\n  extend(Document, superClass);\n\n  function Document(opts) {\n    this.opts = opts != null ? opts : {};\n    this.start = new DocumentStartToken(this);\n    this.end = new DocumentEndToken(this);\n    this.classes = ['__document__'];\n    this.type = 'document';\n    Document.__super__.constructor.apply(this, arguments);\n  }\n\n  Document.prototype._cloneEmpty = function() {\n    return new Document(this.opts);\n  };\n\n  Document.prototype.firstChild = function() {\n    return this._firstChild();\n  };\n\n  Document.prototype._serialize_header = function() {\n    return \"<document>\";\n  };\n\n  Document.prototype._serialize_footer = function() {\n    return \"</document>\";\n  };\n\n  return Document;\n\n})(Container);\n\nexports.TextToken = TextToken = (function(superClass) {\n  extend(TextToken, superClass);\n\n  function TextToken(_value) {\n    this._value = _value;\n    TextToken.__super__.constructor.apply(this, arguments);\n    this.type = 'text';\n  }\n\n  TextToken.trigger('value', (function() {\n    return this._value;\n  }), function(value) {\n    this._value = value;\n    return this.notifyChange();\n  });\n\n  TextToken.prototype.stringify = function() {\n    return this._value;\n  };\n\n  TextToken.prototype.serialize = function() {\n    return helper.escapeXMLText(this._value);\n  };\n\n  TextToken.prototype.clone = function() {\n    return new TextToken(this._value);\n  };\n\n  return TextToken;\n\n})(Token);\n\nexports.NewlineToken = NewlineToken = (function(superClass) {\n  extend(NewlineToken, superClass);\n\n  function NewlineToken(specialIndent) {\n    this.specialIndent = specialIndent;\n    NewlineToken.__super__.constructor.apply(this, arguments);\n    this.type = 'newline';\n  }\n\n  NewlineToken.prototype.stringify = function() {\n    var ref;\n    return '\\n' + ((ref = this.specialIndent) != null ? ref : this.getIndent());\n  };\n\n  NewlineToken.prototype.serialize = function() {\n    return '\\n';\n  };\n\n  NewlineToken.prototype.clone = function() {\n    return new NewlineToken(this.specialIndent);\n  };\n\n  return NewlineToken;\n\n})(Token);\n\ntraverseOneLevel = function(head, fn, tail) {\n  while (true) {\n    if (head instanceof StartToken) {\n      fn(head.container);\n      head = head.container.end;\n    } else {\n      fn(head);\n    }\n    if (head === tail) {\n      return;\n    }\n    head = head.next;\n  }\n};\n\n\n},{\"./helper.coffee\":28}],32:[function(require,module,exports){\nvar c, coffee, html, java, javascript, python;\n\njavascript = require('./languages/javascript.coffee');\n\ncoffee = require('./languages/coffee.coffee');\n\nc = require('./languages/c.coffee');\n\njava = require('./languages/java.coffee');\n\npython = require('./languages/python.coffee');\n\nhtml = require('./languages/html.coffee');\n\nmodule.exports = {\n  'javascript': javascript,\n  'coffee': coffee,\n  'coffeescript': coffee,\n  'c': c,\n  'java': java,\n  'python': python,\n  'html': html\n};\n\n\n},{\"./languages/c.coffee\":1,\"./languages/coffee.coffee\":1,\"./languages/html.coffee\":1,\"./languages/java.coffee\":1,\"./languages/javascript.coffee\":29,\"./languages/python.coffee\":1}],33:[function(require,module,exports){\nvar Parser, ParserFactory, YES, _extend, getDefaultSelectionRange, hasSomeTextAfter, helper, model, sax, stripFlaggedBlocks,\n  extend = function(child, parent) { for (var key in parent) { if (hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; },\n  hasProp = {}.hasOwnProperty;\n\nhelper = require('./helper.coffee');\n\nmodel = require('./model.coffee');\n\nsax = require('sax');\n\n_extend = function(opts, defaults) {\n  var key, val;\n  if (opts == null) {\n    return defaults;\n  }\n  for (key in defaults) {\n    val = defaults[key];\n    if (!(key in opts)) {\n      opts[key] = val;\n    }\n  }\n  return opts;\n};\n\nYES = function() {\n  return true;\n};\n\nexports.ParserFactory = ParserFactory = (function() {\n  function ParserFactory(opts1) {\n    this.opts = opts1 != null ? opts1 : {};\n  }\n\n  ParserFactory.prototype.createParser = function(text) {\n    return new Parser(text, this.opts);\n  };\n\n  return ParserFactory;\n\n})();\n\nexports.Parser = Parser = (function() {\n  function Parser(text1, opts1) {\n    this.text = text1;\n    this.opts = opts1 != null ? opts1 : {};\n    this.originalText = this.text;\n    this.markup = [];\n  }\n\n  Parser.prototype._parse = function(opts) {\n    var document;\n    opts = _extend(opts, {\n      wrapAtRoot: true\n    });\n    this.markRoot(opts.context);\n    this.sortMarkup();\n    document = this.applyMarkup(opts);\n    this.detectParenWrap(document);\n    document.correctParentTree();\n    stripFlaggedBlocks(document);\n    return document;\n  };\n\n  Parser.prototype.markRoot = function() {};\n\n  Parser.prototype.isParenWrapped = function(block) {\n    return block.start.next.type === 'text' && block.start.next.value[0] === '(' && block.end.prev.type === 'text' && block.end.prev.value[block.end.prev.value.length - 1] === ')';\n  };\n\n  Parser.prototype.detectParenWrap = function(document) {\n    var head;\n    head = document.start;\n    while (head !== document.end) {\n      head = head.next;\n      if (head.type === 'blockStart' && this.isParenWrapped(head.container)) {\n        head.container.currentlyParenWrapped = true;\n      }\n    }\n    return document;\n  };\n\n  Parser.prototype.addBlock = function(opts) {\n    var block;\n    block = new model.Block(opts.precedence, opts.color, opts.socketLevel, opts.classes, opts.parseContext, opts.buttons);\n    return this.addMarkup(block, opts.bounds, opts.depth);\n  };\n\n  Parser.prototype.addSocket = function(opts) {\n    var ref, socket;\n    socket = new model.Socket((ref = opts.empty) != null ? ref : this.empty, opts.precedence, false, opts.classes, opts.dropdown);\n    return this.addMarkup(socket, opts.bounds, opts.depth);\n  };\n\n  Parser.prototype.addIndent = function(opts) {\n    var indent;\n    indent = new model.Indent(this.emptyIndent, opts.prefix, opts.classes);\n    return this.addMarkup(indent, opts.bounds, opts.depth);\n  };\n\n  Parser.prototype.checkBounds = function(bounds) {\n    var ref, ref1, ref2, ref3;\n    if (!(((bounds != null ? (ref = bounds.start) != null ? ref.line : void 0 : void 0) != null) && ((bounds != null ? (ref1 = bounds.start) != null ? ref1.column : void 0 : void 0) != null) && ((bounds != null ? (ref2 = bounds.end) != null ? ref2.line : void 0 : void 0) != null) && ((bounds != null ? (ref3 = bounds.end) != null ? ref3.column : void 0 : void 0) != null))) {\n      throw new IllegalArgumentException('bad bounds object');\n    }\n  };\n\n  Parser.prototype.addMarkup = function(container, bounds, depth) {\n    this.checkBounds(bounds);\n    this.markup.push({\n      token: container.start,\n      location: bounds.start,\n      depth: depth,\n      start: true\n    });\n    this.markup.push({\n      token: container.end,\n      location: bounds.end,\n      depth: depth,\n      start: false\n    });\n    return container;\n  };\n\n  Parser.prototype.sortMarkup = function() {\n    return this.markup.sort(function(a, b) {\n      var isDifferent;\n      if (a.location.line > b.location.line) {\n        return 1;\n      }\n      if (b.location.line > a.location.line) {\n        return -1;\n      }\n      if (a.location.column > b.location.column) {\n        return 1;\n      }\n      if (b.location.column > a.location.column) {\n        return -1;\n      }\n      isDifferent = 1;\n      if (a.token.container === b.token.container) {\n        isDifferent = -1;\n      }\n      if (a.start && !b.start) {\n        return isDifferent;\n      }\n      if (b.start && !a.start) {\n        return -isDifferent;\n      }\n      if (a.start && b.start) {\n        if (a.depth > b.depth) {\n          return 1;\n        } else {\n          return -1;\n        }\n      }\n      if ((!a.start) && (!b.start)) {\n        if (a.depth > b.depth) {\n          return -1;\n        } else {\n          return 1;\n        }\n      }\n    });\n  };\n\n  Parser.prototype.constructHandwrittenBlock = function(text) {\n    var block, posAfterIndentAndCommentMarker, socket, textPrefix, textPrefixToken, textToken;\n    block = new model.Block(0, 'blank', helper.ANY_DROP);\n    socket = new model.Socket('', 0, true);\n    socket.setParent(block);\n    if (this.isComment(text)) {\n      posAfterIndentAndCommentMarker = this.indentAndCommentMarker(text).length;\n      if (posAfterIndentAndCommentMarker) {\n        textPrefix = text.slice(0, posAfterIndentAndCommentMarker);\n        text = text.slice(posAfterIndentAndCommentMarker);\n      }\n      block.socketLevel = helper.BLOCK_ONLY;\n      block.classes = ['__comment__', 'block-only'];\n      socket.classes = ['__comment__'];\n    } else {\n      block.classes = ['__handwritten__', 'block-only'];\n    }\n    textToken = new model.TextToken(text);\n    textToken.setParent(block);\n    if (textPrefix) {\n      textPrefixToken = new model.TextToken(textPrefix);\n      textPrefixToken.setParent(block);\n      helper.connect(block.start, textPrefixToken);\n      helper.connect(textPrefixToken, socket.start);\n    } else {\n      helper.connect(block.start, socket.start);\n    }\n    helper.connect(socket.start, textToken);\n    helper.connect(textToken, socket.end);\n    helper.connect(socket.end, block.end);\n    return block;\n  };\n\n  Parser.prototype.handleButton = function(text, command, oldblock) {\n    return text;\n  };\n\n  Parser.prototype.applyMarkup = function(opts) {\n    var block, document, head, i, indentDepth, j, k, l, lastIndex, len, len1, len2, line, lines, mark, markupOnLines, name, ref, ref1, ref2, ref3, ref4, ref5, ref6, ref7, ref8, ref9, stack;\n    markupOnLines = {};\n    ref = this.markup;\n    for (j = 0, len = ref.length; j < len; j++) {\n      mark = ref[j];\n      if (markupOnLines[name = mark.location.line] == null) {\n        markupOnLines[name] = [];\n      }\n      markupOnLines[mark.location.line].push(mark);\n    }\n    lines = this.text.split('\\n');\n    indentDepth = 0;\n    stack = [];\n    document = new model.Document();\n    head = document.start;\n    for (i = k = 0, len1 = lines.length; k < len1; i = ++k) {\n      line = lines[i];\n      if (!(i in markupOnLines)) {\n        if (indentDepth > line.length || line.slice(0, indentDepth).trim().length > 0) {\n          head.specialIndent = ((function() {\n            var l, ref1, results;\n            results = [];\n            for (l = 0, ref1 = line.length - line.trimLeft().length; 0 <= ref1 ? l < ref1 : l > ref1; 0 <= ref1 ? l++ : l--) {\n              results.push(' ');\n            }\n            return results;\n          })()).join('');\n          line = line.trimLeft();\n        } else {\n          line = line.slice(indentDepth);\n        }\n        if (line.length > 0) {\n          if ((opts.wrapAtRoot && stack.length === 0) || ((ref1 = stack[stack.length - 1]) != null ? ref1.type : void 0) === 'indent') {\n            block = this.constructHandwrittenBlock(line);\n            helper.connect(head, block.start);\n            head = block.end;\n          } else {\n            head = helper.connect(head, new model.TextToken(line));\n          }\n        } else if (((ref2 = (ref3 = stack[stack.length - 1]) != null ? ref3.type : void 0) === 'indent' || ref2 === 'document' || ref2 === (void 0)) && hasSomeTextAfter(lines, i)) {\n          block = new model.Block(0, this.opts.emptyLineColor, helper.BLOCK_ONLY);\n          head = helper.connect(head, block.start);\n          head = helper.connect(head, block.end);\n        }\n        head = helper.connect(head, new model.NewlineToken());\n      } else {\n        if (indentDepth > line.length || line.slice(0, indentDepth).trim().length > 0) {\n          lastIndex = line.length - line.trimLeft().length;\n          head.specialIndent = line.slice(0, lastIndex);\n        } else {\n          lastIndex = indentDepth;\n        }\n        ref4 = markupOnLines[i];\n        for (l = 0, len2 = ref4.length; l < len2; l++) {\n          mark = ref4[l];\n          if (!(lastIndex >= mark.location.column || lastIndex >= line.length)) {\n            if ((opts.wrapAtRoot && stack.length === 0) || ((ref5 = stack[stack.length - 1]) != null ? ref5.type : void 0) === 'indent') {\n              block = this.constructHandwrittenBlock(line.slice(lastIndex, mark.location.column));\n              helper.connect(head, block.start);\n              head = block.end;\n            } else {\n              head = helper.connect(head, new model.TextToken(line.slice(lastIndex, mark.location.column)));\n            }\n          }\n          switch (mark.token.type) {\n            case 'indentStart':\n              if ((stack != null ? (ref6 = stack[stack.length - 1]) != null ? ref6.type : void 0 : void 0) !== 'block') {\n                throw new Error('Improper parser: indent must be inside block, but is inside ' + (stack != null ? (ref7 = stack[stack.length - 1]) != null ? ref7.type : void 0 : void 0));\n              }\n              indentDepth += mark.token.container.prefix.length;\n              break;\n            case 'blockStart':\n              if (((ref8 = stack[stack.length - 1]) != null ? ref8.type : void 0) === 'block') {\n                throw new Error('Improper parser: block cannot nest immediately inside another block.');\n              }\n              break;\n            case 'socketStart':\n              if (((ref9 = stack[stack.length - 1]) != null ? ref9.type : void 0) !== 'block') {\n                throw new Error('Improper parser: socket must be immediately inside a block.');\n              }\n              break;\n            case 'indentEnd':\n              indentDepth -= mark.token.container.prefix.length;\n          }\n          if (mark.token instanceof model.StartToken) {\n            stack.push(mark.token.container);\n          } else if (mark.token instanceof model.EndToken) {\n            if (mark.token.container !== stack[stack.length - 1]) {\n              throw new Error(\"Improper parser: \" + head.container.type + \" ended too early.\");\n            }\n            stack.pop();\n          }\n          head = helper.connect(head, mark.token);\n          lastIndex = mark.location.column;\n        }\n        if (!(lastIndex >= line.length)) {\n          if (stack.length === 0 || stack[stack.length - 1].type === 'indent') {\n            block = this.constructHandwrittenBlock(line.slice(lastIndex, line.length));\n            helper.connect(head, block.start);\n            head = block.end;\n          } else {\n            head = helper.connect(head, new model.TextToken(line.slice(lastIndex, line.length)));\n          }\n        }\n        head = helper.connect(head, new model.NewlineToken());\n      }\n    }\n    head = head.prev;\n    head.next.remove();\n    head = helper.connect(head, document.end);\n    return document;\n  };\n\n  return Parser;\n\n})();\n\nexports.parseXML = function(xml) {\n  var head, parser, root, stack;\n  root = new model.Document();\n  head = root.start;\n  stack = [];\n  parser = sax.parser(true);\n  parser.ontext = function(text) {\n    var i, j, len, results, token, tokens;\n    tokens = text.split('\\n');\n    results = [];\n    for (i = j = 0, len = tokens.length; j < len; i = ++j) {\n      token = tokens[i];\n      if (token.length !== 0) {\n        head = helper.connect(head, new model.TextToken(token));\n      }\n      if (i !== tokens.length - 1) {\n        results.push(head = helper.connect(head, new model.NewlineToken()));\n      } else {\n        results.push(void 0);\n      }\n    }\n    return results;\n  };\n  parser.onopentag = function(node) {\n    var attributes, container, ref, ref1, ref2;\n    attributes = node.attributes;\n    switch (node.name) {\n      case 'block':\n        container = new model.Block(attributes.precedence, attributes.color, attributes.socketLevel, (ref = attributes.classes) != null ? typeof ref.split === \"function\" ? ref.split(' ') : void 0 : void 0);\n        break;\n      case 'socket':\n        container = new model.Socket('', attributes.precedence, attributes.handritten, (ref1 = attributes.classes) != null ? typeof ref1.split === \"function\" ? ref1.split(' ') : void 0 : void 0);\n        break;\n      case 'indent':\n        container = new model.Indent('', attributes.prefix, (ref2 = attributes.classes) != null ? typeof ref2.split === \"function\" ? ref2.split(' ') : void 0 : void 0);\n        break;\n      case 'document':\n        if (stack.length !== 0) {\n          container = new model.Document();\n        }\n        break;\n      case 'br':\n        head = helper.connect(head, new model.NewlineToken());\n        return null;\n    }\n    if (container != null) {\n      stack.push({\n        node: node,\n        container: container\n      });\n      return head = helper.connect(head, container.start);\n    }\n  };\n  parser.onclosetag = function(nodeName) {\n    if (stack.length > 0 && nodeName === stack[stack.length - 1].node.name) {\n      head = helper.connect(head, stack[stack.length - 1].container.end);\n      return stack.pop();\n    }\n  };\n  parser.onerror = function(e) {\n    throw e;\n  };\n  parser.write(xml).close();\n  head = helper.connect(head, root.end);\n  root.correctParentTree();\n  return root;\n};\n\nhasSomeTextAfter = function(lines, i) {\n  while (i !== lines.length) {\n    if (lines[i].length > 0) {\n      return true;\n    }\n    i += 1;\n  }\n  return false;\n};\n\nstripFlaggedBlocks = function(document) {\n  var container, head, ref, results, text;\n  head = document.start;\n  results = [];\n  while (head !== document.end) {\n    if (head instanceof model.StartToken && head.container.flagToRemove) {\n      container = head.container;\n      head = container.end.next;\n      results.push(document.remove(container));\n    } else if (head instanceof model.StartToken && head.container.flagToStrip) {\n      if ((ref = head.container.parent) != null) {\n        ref.color = 'error';\n      }\n      text = head.next;\n      text.value = text.value.substring(head.container.flagToStrip.left, text.value.length - head.container.flagToStrip.right);\n      results.push(head = text.next);\n    } else {\n      results.push(head = head.next);\n    }\n  }\n  return results;\n};\n\nParser.parens = function(leading, trailing, node, context) {\n  var results;\n  if (context === null || context.type !== 'socket' || (context != null ? context.precedence : void 0) < node.precedence) {\n    results = [];\n    while (true) {\n      if ((leading().match(/^\\s*\\(/) != null) && (trailing().match(/\\)\\s*/) != null)) {\n        leading(leading().replace(/^\\s*\\(\\s*/, ''));\n        results.push(trailing(trailing().replace(/^\\s*\\)\\s*/, '')));\n      } else {\n        break;\n      }\n    }\n    return results;\n  } else {\n    leading('(' + leading());\n    return trailing(trailing() + ')');\n  }\n};\n\nParser.drop = function(block, context, pred, next) {\n  if (block.type === 'document' && context.type === 'socket') {\n    return helper.FORBID;\n  } else {\n    return helper.ENCOURAGE;\n  }\n};\n\nParser.empty = '';\n\nParser.emptyIndent = '';\n\ngetDefaultSelectionRange = function(string) {\n  return {\n    start: 0,\n    end: string.length\n  };\n};\n\nexports.wrapParser = function(CustomParser) {\n  var CustomParserFactory;\n  return CustomParserFactory = (function(superClass) {\n    extend(CustomParserFactory, superClass);\n\n    function CustomParserFactory(opts1) {\n      var ref, ref1, ref2;\n      this.opts = opts1 != null ? opts1 : {};\n      this.empty = CustomParser.empty;\n      this.emptyIndent = CustomParser.emptyIndent;\n      this.startComment = (ref = CustomParser.startComment) != null ? ref : '/*';\n      this.endComment = (ref1 = CustomParser.endComment) != null ? ref1 : '*/';\n      this.startSingleLineComment = CustomParser.startSingleLineComment;\n      this.getDefaultSelectionRange = (ref2 = CustomParser.getDefaultSelectionRange) != null ? ref2 : getDefaultSelectionRange;\n    }\n\n    CustomParserFactory.prototype.createParser = function(text) {\n      var parser;\n      parser = new CustomParser(text, this.opts);\n      parser.empty = this.empty;\n      parser.emptyIndent = this.emptyIndent;\n      return parser;\n    };\n\n    CustomParserFactory.prototype.parse = function(text, opts) {\n      this.opts.parseOptions = opts;\n      if (opts == null) {\n        opts = {\n          wrapAtRoot: true\n        };\n      }\n      return this.createParser(text)._parse(opts);\n    };\n\n    CustomParserFactory.prototype.parens = function(leading, trailing, node, context) {\n      var leadingFn, trailingFn;\n      leadingFn = function(value) {\n        if (value != null) {\n          leading = value;\n        }\n        return leading;\n      };\n      if (trailing != null) {\n        trailingFn = function(value) {\n          if (value != null) {\n            trailing = value;\n          }\n          return trailing;\n        };\n      } else {\n        trailingFn = leadingFn;\n      }\n      CustomParser.parens(leadingFn, trailingFn, node, context);\n      return [leading, trailing];\n    };\n\n    CustomParserFactory.prototype.drop = function(block, context, pred, next) {\n      return CustomParser.drop(block, context, pred, next);\n    };\n\n    CustomParserFactory.prototype.handleButton = function(text, command, oldblock) {\n      var parser;\n      parser = this.createParser(text);\n      return parser.handleButton(text, command, oldblock);\n    };\n\n    return CustomParserFactory;\n\n  })(ParserFactory);\n};\n\n\n},{\"./helper.coffee\":28,\"./model.coffee\":31,\"sax\":25}],34:[function(require,module,exports){\nvar ANY_DROP, BLOCK_ONLY, CARRIAGE_ARROW_INDENT, CARRIAGE_ARROW_NONE, CARRIAGE_ARROW_SIDEALONG, CARRIAGE_GROW_DOWN, DEFAULT_OPTIONS, DROPDOWN_ARROW_HEIGHT, DROP_TRIANGLE_COLOR, MOSTLY_BLOCK, MOSTLY_VALUE, MULTILINE_END, MULTILINE_END_START, MULTILINE_MIDDLE, MULTILINE_START, NO, NO_MULTILINE, VALUE_ONLY, View, YES, arrayEq, avgColor, draw, helper, model, toHex, toRGB, twoDigitHex, zeroPad,\n  indexOf = [].indexOf || function(item) { for (var i = 0, l = this.length; i < l; i++) { if (i in this && this[i] === item) return i; } return -1; },\n  extend = function(child, parent) { for (var key in parent) { if (hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; },\n  hasProp = {}.hasOwnProperty,\n  modulo = function(a, b) { return (+a % (b = +b) + b) % b; };\n\nhelper = require('./helper.coffee');\n\ndraw = require('./draw.coffee');\n\nmodel = require('./model.coffee');\n\nNO_MULTILINE = 0;\n\nMULTILINE_START = 1;\n\nMULTILINE_MIDDLE = 2;\n\nMULTILINE_END = 3;\n\nMULTILINE_END_START = 4;\n\nANY_DROP = helper.ANY_DROP;\n\nBLOCK_ONLY = helper.BLOCK_ONLY;\n\nMOSTLY_BLOCK = helper.MOSTLY_BLOCK;\n\nMOSTLY_VALUE = helper.MOSTLY_VALUE;\n\nVALUE_ONLY = helper.VALUE_ONLY;\n\nCARRIAGE_ARROW_SIDEALONG = 0;\n\nCARRIAGE_ARROW_INDENT = 1;\n\nCARRIAGE_ARROW_NONE = 2;\n\nCARRIAGE_GROW_DOWN = 3;\n\nDROPDOWN_ARROW_HEIGHT = 8;\n\nDROP_TRIANGLE_COLOR = '#555';\n\nDEFAULT_OPTIONS = {\n  buttonWidth: 15,\n  buttonHeight: 15,\n  buttonPadding: 6,\n  showDropdowns: true,\n  padding: 5,\n  indentWidth: 10,\n  indentTongueHeight: 10,\n  tabOffset: 10,\n  tabWidth: 15,\n  tabHeight: 5,\n  tabSideWidth: 0.125,\n  dropAreaHeight: 20,\n  indentDropAreaMinWidth: 50,\n  minSocketWidth: 10,\n  invisibleSocketWidth: 5,\n  textHeight: 15,\n  textPadding: 1,\n  emptyLineWidth: 50,\n  highlightAreaHeight: 10,\n  bevelClip: 3,\n  shadowBlur: 5,\n  ctx: document.createElement('canvas').getContext('2d'),\n  colors: {\n    error: '#ff0000',\n    \"return\": '#fff59d',\n    control: '#ffcc80',\n    value: '#a5d6a7',\n    command: '#90caf9',\n    red: '#ef9a9a',\n    pink: '#f48fb1',\n    purple: '#ce93d8',\n    deeppurple: '#b39ddb',\n    indigo: '#9fa8da',\n    blue: '#90caf9',\n    lightblue: '#81d4fa',\n    cyan: '#80deea',\n    teal: '#80cbc4',\n    green: '#a5d6a7',\n    lightgreen: '#c5e1a5',\n    lime: '#e6ee9c',\n    yellow: '#fff59d',\n    amber: '#ffe082',\n    orange: '#ffcc80',\n    deeporange: '#ffab91',\n    brown: '#bcaaa4',\n    grey: '#eeeeee',\n    bluegrey: '#b0bec5'\n  }\n};\n\nYES = function() {\n  return true;\n};\n\nNO = function() {\n  return false;\n};\n\narrayEq = function(a, b) {\n  var i, k;\n  if (a.length !== b.length) {\n    return false;\n  }\n  if ((function() {\n    var j, len1, results;\n    results = [];\n    for (i = j = 0, len1 = a.length; j < len1; i = ++j) {\n      k = a[i];\n      results.push(k !== b[i]);\n    }\n    return results;\n  })()) {\n    return false;\n  }\n  return true;\n};\n\nexports.View = View = (function() {\n  var BlockViewNode, ContainerViewNode, DocumentViewNode, GenericViewNode, IndentViewNode, ListViewNode, SocketViewNode, TextViewNode;\n\n  function View(opts) {\n    var option, ref;\n    this.opts = opts != null ? opts : {};\n    this.map = {};\n    this.draw = (ref = this.opts.draw) != null ? ref : new draw.Draw();\n    for (option in DEFAULT_OPTIONS) {\n      if (!(option in this.opts)) {\n        this.opts[option] = DEFAULT_OPTIONS[option];\n      }\n    }\n    this.draw.setCtx(this.opts.ctx);\n  }\n\n  View.prototype.clearCache = function() {\n    return this.map = {};\n  };\n\n  View.prototype.getViewNodeFor = function(model) {\n    if (model.id in this.map) {\n      return this.map[model.id];\n    } else {\n      return this.createView(model);\n    }\n  };\n\n  View.prototype.hasViewNodeFor = function(model) {\n    return (model != null) && model.id in this.map;\n  };\n\n  View.prototype.createView = function(entity) {\n    if ((entity instanceof model.List) && !(entity instanceof model.Container)) {\n      return new ListViewNode(entity, this);\n    }\n    switch (entity.type) {\n      case 'text':\n        return new TextViewNode(entity, this);\n      case 'block':\n        return new BlockViewNode(entity, this);\n      case 'indent':\n        return new IndentViewNode(entity, this);\n      case 'socket':\n        return new SocketViewNode(entity, this);\n      case 'document':\n        return new DocumentViewNode(entity, this);\n    }\n  };\n\n  View.prototype.getColor = function(color) {\n    var ref;\n    if (color && '#' === color.charAt(0)) {\n      return color;\n    } else {\n      return (ref = this.opts.colors[color]) != null ? ref : '#ffffff';\n    }\n  };\n\n  GenericViewNode = (function() {\n    function GenericViewNode(model1, view1) {\n      this.model = model1;\n      this.view = view1;\n      this.view.map[this.model.id] = this;\n      this.lastCoordinate = new this.view.draw.Point(0, 0);\n      this.invalidate = false;\n      this.lineLength = 0;\n      this.children = [];\n      this.lineChildren = [];\n      this.multilineChildrenData = [];\n      this.margins = {\n        left: 0,\n        right: 0,\n        top: 0,\n        bottom: 0\n      };\n      this.topLineSticksToBottom = false;\n      this.bottomLineSticksToTop = false;\n      this.minDimensions = [];\n      this.minDistanceToBase = [];\n      this.dimensions = [];\n      this.distanceToBase = [];\n      this.carriageArrow = CARRIAGE_ARROW_NONE;\n      this.bevels = {\n        top: false,\n        bottom: false\n      };\n      this.bounds = [];\n      this.changedBoundingBox = true;\n      this.glue = {};\n      this.path = new this.view.draw.Path();\n      this.dropArea = this.highlightArea = null;\n      this.computedVersion = -1;\n    }\n\n    GenericViewNode.prototype.serialize = function(line) {\n      var child, i, j, l, len1, len2, len3, len4, len5, len6, m, o, p, prop, q, ref, ref1, ref2, ref3, ref4, ref5, ref6, result, s;\n      result = [];\n      ref = ['lineLength', 'margins', 'topLineSticksToBottom', 'bottomLineSticksToTop', 'changedBoundingBox', 'path', 'highlightArea', 'computedVersion', 'carriageArrow', 'bevels'];\n      for (j = 0, len1 = ref.length; j < len1; j++) {\n        prop = ref[j];\n        result.push(prop + ': ' + JSON.stringify(this[prop]));\n      }\n      ref1 = this.children;\n      for (i = l = 0, len2 = ref1.length; l < len2; i = ++l) {\n        child = ref1[i];\n        result.push((\"child \" + i + \": {startLine: \" + child.startLine + \", \") + (\"endLine: \" + child.endLine + \"}\"));\n      }\n      if (line != null) {\n        ref2 = ['multilineChildrenData', 'minDimensions', 'minDistanceToBase', 'dimensions', 'distanceToBase', 'bounds', 'glue'];\n        for (m = 0, len3 = ref2.length; m < len3; m++) {\n          prop = ref2[m];\n          result.push(prop + \" \" + line + \": \" + (JSON.stringify(this[prop][line])));\n        }\n        ref3 = this.lineChildren[line];\n        for (i = o = 0, len4 = ref3.length; o < len4; i = ++o) {\n          child = ref3[i];\n          result.push((\"line \" + line + \" child \" + i + \": \") + (\"{startLine: \" + child.startLine + \", \") + (\"endLine: \" + child.endLine + \"}}\"));\n        }\n      } else {\n        for (line = p = 0, ref4 = this.lineLength; 0 <= ref4 ? p < ref4 : p > ref4; line = 0 <= ref4 ? ++p : --p) {\n          ref5 = ['multilineChildrenData', 'minDimensions', 'minDistanceToBase', 'dimensions', 'distanceToBase', 'bounds', 'glue'];\n          for (q = 0, len5 = ref5.length; q < len5; q++) {\n            prop = ref5[q];\n            result.push(prop + \" \" + line + \": \" + (JSON.stringify(this[prop][line])));\n          }\n          ref6 = this.lineChildren[line];\n          for (i = s = 0, len6 = ref6.length; s < len6; i = ++s) {\n            child = ref6[i];\n            result.push((\"line \" + line + \" child \" + i + \": \") + (\"{startLine: \" + child.startLine + \", \") + (\"endLine: \" + child.endLine + \"}}\"));\n          }\n        }\n      }\n      return result.join('\\n');\n    };\n\n    GenericViewNode.prototype.computeChildren = function() {\n      return this.lineLength;\n    };\n\n    GenericViewNode.prototype.computeCarriageArrow = function() {\n      var childObj, j, len1, ref;\n      ref = this.children;\n      for (j = 0, len1 = ref.length; j < len1; j++) {\n        childObj = ref[j];\n        this.view.getViewNodeFor(childObj.child).computeCarriageArrow();\n      }\n      return this.carriageArrow;\n    };\n\n    GenericViewNode.prototype.computeMargins = function() {\n      var childObj, j, left, len1, padding, parenttype, ref, ref1, right;\n      if (this.computedVersion === this.model.version && ((this.model.parent == null) || this.model.parent.version === this.view.getViewNodeFor(this.model.parent).computedVersion)) {\n        return this.margins;\n      }\n      parenttype = (ref = this.model.parent) != null ? ref.type : void 0;\n      padding = this.view.opts.padding;\n      left = this.model.isFirstOnLine() || this.lineLength > 1 ? padding : 0;\n      right = this.model.isLastOnLine() || this.lineLength > 1 ? padding : 0;\n      if (parenttype === 'block' && this.model.type === 'indent') {\n        this.margins = {\n          top: this.view.opts.padding,\n          bottom: this.lineLength > 1 ? this.view.opts.indentTongueHeight : this.view.opts.padding,\n          firstLeft: 0,\n          midLeft: this.view.opts.indentWidth,\n          lastLeft: this.view.opts.indentWidth,\n          firstRight: 0,\n          midRight: 0,\n          lastRight: padding\n        };\n      } else if (this.model.type === 'text' && parenttype === 'socket') {\n        this.margins = {\n          top: this.view.opts.textPadding,\n          bottom: this.view.opts.textPadding,\n          firstLeft: this.view.opts.textPadding,\n          midLeft: this.view.opts.textPadding,\n          lastLeft: this.view.opts.textPadding,\n          firstRight: this.view.opts.textPadding,\n          midRight: this.view.opts.textPadding,\n          lastRight: this.view.opts.textPadding\n        };\n      } else if (this.model.type === 'text' && parenttype === 'block') {\n        this.margins = {\n          top: padding,\n          bottom: padding,\n          firstLeft: left,\n          midLeft: left,\n          lastLeft: left,\n          firstRight: right,\n          midRight: right,\n          lastRight: right\n        };\n      } else if (parenttype === 'block') {\n        this.margins = {\n          top: padding,\n          bottom: padding,\n          firstLeft: left,\n          midLeft: padding,\n          lastLeft: padding,\n          firstRight: right,\n          midRight: 0,\n          lastRight: right\n        };\n      } else {\n        this.margins = {\n          firstLeft: 0,\n          midLeft: 0,\n          lastLeft: 0,\n          firstRight: 0,\n          midRight: 0,\n          lastRight: 0,\n          top: 0,\n          bottom: 0\n        };\n      }\n      this.firstMargins = {\n        left: this.margins.firstLeft,\n        right: this.margins.firstRight,\n        top: this.margins.top,\n        bottom: this.lineLength === 1 ? this.margins.bottom : 0\n      };\n      this.midMargins = {\n        left: this.margins.midLeft,\n        right: this.margins.midRight,\n        top: 0,\n        bottom: 0\n      };\n      this.lastMargins = {\n        left: this.margins.lastLeft,\n        right: this.margins.lastRight,\n        top: this.lineLength === 1 ? this.margins.top : 0,\n        bottom: this.margins.bottom\n      };\n      ref1 = this.children;\n      for (j = 0, len1 = ref1.length; j < len1; j++) {\n        childObj = ref1[j];\n        this.view.getViewNodeFor(childObj.child).computeMargins();\n      }\n      return null;\n    };\n\n    GenericViewNode.prototype.getMargins = function(line) {\n      if (line === 0) {\n        return this.firstMargins;\n      } else if (line === this.lineLength - 1) {\n        return this.lastMargins;\n      } else {\n        return this.midMargins;\n      }\n    };\n\n    GenericViewNode.prototype.computeBevels = function() {\n      var childObj, j, len1, ref;\n      ref = this.children;\n      for (j = 0, len1 = ref.length; j < len1; j++) {\n        childObj = ref[j];\n        this.view.getViewNodeFor(childObj.child).computeBevels();\n      }\n      return this.bevels;\n    };\n\n    GenericViewNode.prototype.computeMinDimensions = function() {\n      var i, j, ref;\n      if (this.minDimensions.length > this.lineLength) {\n        this.minDimensions.length = this.minDistanceToBase.length = this.lineLength;\n      } else {\n        while (this.minDimensions.length !== this.lineLength) {\n          this.minDimensions.push(new this.view.draw.Size(0, 0));\n          this.minDistanceToBase.push({\n            above: 0,\n            below: 0\n          });\n        }\n      }\n      for (i = j = 0, ref = this.lineLength; 0 <= ref ? j < ref : j > ref; i = 0 <= ref ? ++j : --j) {\n        this.minDimensions[i].width = this.minDimensions[i].height = 0;\n        this.minDistanceToBase[i].above = this.minDistanceToBase[i].below = 0;\n      }\n      return null;\n    };\n\n    GenericViewNode.prototype.computeDimensions = function(force, root) {\n      var changed, childObj, distance, i, j, l, len1, len2, line, lineCount, m, oldDimensions, oldDistanceToBase, parentNode, ref, ref1, ref2, size, startLine;\n      if (root == null) {\n        root = false;\n      }\n      if (this.computedVersion === this.model.version && !force && !this.invalidate) {\n        return;\n      }\n      oldDimensions = this.dimensions;\n      oldDistanceToBase = this.distanceToBase;\n      this.dimensions = (function() {\n        var j, ref, results;\n        results = [];\n        for (j = 0, ref = this.lineLength; 0 <= ref ? j < ref : j > ref; 0 <= ref ? j++ : j--) {\n          results.push(new this.view.draw.Size(0, 0));\n        }\n        return results;\n      }).call(this);\n      this.distanceToBase = (function() {\n        var j, ref, results;\n        results = [];\n        for (j = 0, ref = this.lineLength; 0 <= ref ? j < ref : j > ref; 0 <= ref ? j++ : j--) {\n          results.push({\n            above: 0,\n            below: 0\n          });\n        }\n        return results;\n      }).call(this);\n      ref = this.minDimensions;\n      for (i = j = 0, len1 = ref.length; j < len1; i = ++j) {\n        size = ref[i];\n        this.dimensions[i].width = size.width;\n        this.dimensions[i].height = size.height;\n        this.distanceToBase[i].above = this.minDistanceToBase[i].above;\n        this.distanceToBase[i].below = this.minDistanceToBase[i].below;\n      }\n      if ((this.model.parent != null) && !root && (this.topLineSticksToBottom || this.bottomLineSticksToTop || (this.lineLength > 1 && !this.model.isLastOnLine()))) {\n        parentNode = this.view.getViewNodeFor(this.model.parent);\n        startLine = this.model.getLinesToParent();\n        if (this.topLineSticksToBottom) {\n          distance = this.distanceToBase[0];\n          distance.below = Math.max(distance.below, parentNode.distanceToBase[startLine].below);\n          this.dimensions[0] = new this.view.draw.Size(this.dimensions[0].width, distance.below + distance.above);\n        }\n        if (this.bottomLineSticksToTop) {\n          lineCount = this.distanceToBase.length;\n          distance = this.distanceToBase[lineCount - 1];\n          distance.above = Math.max(distance.above, parentNode.distanceToBase[startLine + lineCount - 1].above);\n          this.dimensions[lineCount - 1] = new this.view.draw.Size(this.dimensions[lineCount - 1].width, distance.below + distance.above);\n        }\n        if (this.lineLength > 1 && !this.model.isLastOnLine() && this.model.type === 'block') {\n          distance = this.distanceToBase[this.lineLength - 1];\n          distance.below = parentNode.distanceToBase[startLine + this.lineLength - 1].below;\n          this.dimensions[lineCount - 1] = new this.view.draw.Size(this.dimensions[lineCount - 1].width, distance.below + distance.above);\n        }\n      }\n      changed = oldDimensions.length !== this.lineLength;\n      if (!changed) {\n        for (line = l = 0, ref1 = this.lineLength; 0 <= ref1 ? l < ref1 : l > ref1; line = 0 <= ref1 ? ++l : --l) {\n          if (!oldDimensions[line].equals(this.dimensions[line]) || oldDistanceToBase[line].above !== this.distanceToBase[line].above || oldDistanceToBase[line].below !== this.distanceToBase[line].below) {\n            changed = true;\n            break;\n          }\n        }\n      }\n      this.changedBoundingBox || (this.changedBoundingBox = changed);\n      ref2 = this.children;\n      for (m = 0, len2 = ref2.length; m < len2; m++) {\n        childObj = ref2[m];\n        if (indexOf.call(this.lineChildren[0], childObj) >= 0 || indexOf.call(this.lineChildren[this.lineLength - 1], childObj) >= 0) {\n          this.view.getViewNodeFor(childObj.child).computeDimensions(changed, !(this.model instanceof model.Container));\n        } else {\n          this.view.getViewNodeFor(childObj.child).computeDimensions(false, !(this.model instanceof model.Container));\n        }\n      }\n      return null;\n    };\n\n    GenericViewNode.prototype.computeBoundingBoxX = function(left, line) {\n      var ref, ref1, ref2;\n      if (this.computedVersion === this.model.version && left === ((ref = this.bounds[line]) != null ? ref.x : void 0) && !this.changedBoundingBox || ((ref1 = this.bounds[line]) != null ? ref1.x : void 0) === left && ((ref2 = this.bounds[line]) != null ? ref2.width : void 0) === this.dimensions[line].width) {\n        return this.bounds[line];\n      }\n      this.changedBoundingBox = true;\n      if (this.bounds[line] != null) {\n        this.bounds[line].x = left;\n        this.bounds[line].width = this.dimensions[line].width;\n      } else {\n        this.bounds[line] = new this.view.draw.Rectangle(left, 0, this.dimensions[line].width, 0);\n      }\n      return this.bounds[line];\n    };\n\n    GenericViewNode.prototype.computeAllBoundingBoxX = function(left) {\n      var j, len1, line, ref, size;\n      if (left == null) {\n        left = 0;\n      }\n      ref = this.dimensions;\n      for (line = j = 0, len1 = ref.length; j < len1; line = ++j) {\n        size = ref[line];\n        this.computeBoundingBoxX(left, line);\n      }\n      return this.bounds;\n    };\n\n    GenericViewNode.prototype.computeGlue = function() {\n      return this.glue = {};\n    };\n\n    GenericViewNode.prototype.computeBoundingBoxY = function(top, line) {\n      var ref;\n      if (this.computedVersion === this.model.version && top === ((ref = this.bounds[line]) != null ? ref.y : void 0) && !this.changedBoundingBox || this.bounds[line].y === top && this.bounds[line].height === this.dimensions[line].height) {\n        return this.bounds[line];\n      }\n      this.changedBoundingBox = true;\n      this.bounds[line].y = top;\n      this.bounds[line].height = this.dimensions[line].height;\n      return this.bounds[line];\n    };\n\n    GenericViewNode.prototype.computeAllBoundingBoxY = function(top) {\n      var j, len1, line, ref, size;\n      if (top == null) {\n        top = 0;\n      }\n      ref = this.dimensions;\n      for (line = j = 0, len1 = ref.length; j < len1; line = ++j) {\n        size = ref[line];\n        this.computeBoundingBoxY(top, line);\n        top += size.height;\n        if (line in this.glue) {\n          top += this.glue[line].height;\n        }\n      }\n      return this.bounds;\n    };\n\n    GenericViewNode.prototype.getBounds = function() {\n      return this.totalBounds;\n    };\n\n    GenericViewNode.prototype.computeOwnPath = function() {\n      return this.path = new this.view.draw.Path();\n    };\n\n    GenericViewNode.prototype.computePath = function() {\n      var bound, child, childObj, j, l, len1, len2, len3, m, maxRight, ref, ref1, ref2;\n      if (this.computedVersion === this.model.version && (this.model.isLastOnLine() === this.lastComputedLinePredicate) && !this.changedBoundingBox) {\n        return null;\n      }\n      ref = this.children;\n      for (j = 0, len1 = ref.length; j < len1; j++) {\n        childObj = ref[j];\n        this.view.getViewNodeFor(childObj.child).computePath();\n      }\n      if (this.changedBoundingBox || (this.model.isLastOnLine() !== this.lastComputedLinePredicate)) {\n        this.computeOwnPath();\n        this.totalBounds = new this.view.draw.NoRectangle();\n        if (this.bounds.length > 0) {\n          this.totalBounds.unite(this.bounds[0]);\n          this.totalBounds.unite(this.bounds[this.bounds.length - 1]);\n        }\n        if (this.bounds.length > this.children.length) {\n          ref1 = this.children;\n          for (l = 0, len2 = ref1.length; l < len2; l++) {\n            child = ref1[l];\n            this.totalBounds.unite(this.view.getViewNodeFor(child.child).totalBounds);\n          }\n        } else {\n          maxRight = this.totalBounds.right();\n          ref2 = this.bounds;\n          for (m = 0, len3 = ref2.length; m < len3; m++) {\n            bound = ref2[m];\n            this.totalBounds.x = Math.min(this.totalBounds.x, bound.x);\n            maxRight = Math.max(maxRight, bound.right());\n          }\n          this.totalBounds.width = maxRight - this.totalBounds.x;\n        }\n        this.totalBounds.unite(this.path.bounds());\n      }\n      this.lastComputedLinePredicate = this.model.isLastOnLine();\n      return null;\n    };\n\n    GenericViewNode.prototype.computeOwnDropArea = function() {};\n\n    GenericViewNode.prototype.computeDropAreas = function() {\n      var childObj, j, len1, ref;\n      if (this.computedVersion === this.model.version && !this.changedBoundingBox) {\n        return null;\n      }\n      this.computeOwnDropArea();\n      ref = this.children;\n      for (j = 0, len1 = ref.length; j < len1; j++) {\n        childObj = ref[j];\n        this.view.getViewNodeFor(childObj.child).computeDropAreas();\n      }\n      return null;\n    };\n\n    GenericViewNode.prototype.computeNewVersionNumber = function() {\n      var childObj, j, len1, ref;\n      if (this.computedVersion === this.model.version && !this.changedBoundingBox) {\n        return null;\n      }\n      this.changedBoundingBox = false;\n      this.invalidate = false;\n      this.computedVersion = this.model.version;\n      ref = this.children;\n      for (j = 0, len1 = ref.length; j < len1; j++) {\n        childObj = ref[j];\n        this.view.getViewNodeFor(childObj.child).computeNewVersionNumber();\n      }\n      return null;\n    };\n\n    GenericViewNode.prototype.drawSelf = function(ctx, style) {\n      if (style == null) {\n        style = {};\n      }\n    };\n\n    GenericViewNode.prototype.draw = function(ctx, boundingRect, style) {\n      var childObj, j, len1, ref;\n      if (style == null) {\n        style = {};\n      }\n      if (this.totalBounds.overlap(boundingRect)) {\n        this.drawSelf(ctx, style);\n        ref = this.children;\n        for (j = 0, len1 = ref.length; j < len1; j++) {\n          childObj = ref[j];\n          this.view.getViewNodeFor(childObj.child).draw(ctx, boundingRect, style);\n        }\n      }\n      return null;\n    };\n\n    GenericViewNode.prototype.drawShadow = function(ctx) {};\n\n    GenericViewNode.prototype.debugDimensions = function(x, y, line, ctx) {\n      var childObj, childView, j, len1, ref, results;\n      ctx.fillStyle = '#00F';\n      ctx.strokeStyle = '#000';\n      ctx.lineWidth = 1;\n      ctx.fillRect(x, y, this.dimensions[line].width, this.dimensions[line].height);\n      ctx.strokeRect(x, y, this.dimensions[line].width, this.dimensions[line].height);\n      ref = this.lineChildren[line];\n      results = [];\n      for (j = 0, len1 = ref.length; j < len1; j++) {\n        childObj = ref[j];\n        childView = this.view.getViewNodeFor(childObj.child);\n        x += childView.getMargins(line).left;\n        childView.debugDimensions(x, y, line - childObj.startLine, ctx);\n        results.push(x += childView.dimensions[line - childObj.startLine].width + childView.getMargins(line).right);\n      }\n      return results;\n    };\n\n    GenericViewNode.prototype.debugAllDimensions = function(ctx) {\n      var j, len1, line, ref, size, y;\n      ctx.globalAlpha = 0.1;\n      y = 0;\n      ref = this.dimensions;\n      for (line = j = 0, len1 = ref.length; j < len1; line = ++j) {\n        size = ref[line];\n        this.debugDimensions(0, y, line, ctx);\n        y += size.height;\n      }\n      return ctx.globalAlpha = 1;\n    };\n\n    GenericViewNode.prototype.debugAllBoundingBoxes = function(ctx) {\n      var bound, childObj, j, l, len1, len2, ref, ref1;\n      ctx.globalAlpha = 0.1;\n      ref = this.bounds;\n      for (j = 0, len1 = ref.length; j < len1; j++) {\n        bound = ref[j];\n        bound.fill(ctx, '#00F');\n        bound.stroke(ctx, '#000');\n      }\n      ref1 = this.children;\n      for (l = 0, len2 = ref1.length; l < len2; l++) {\n        childObj = ref1[l];\n        this.view.getViewNodeFor(childObj.child).debugAllBoundingBoxes(ctx);\n      }\n      return ctx.globalAlpha = 1;\n    };\n\n    return GenericViewNode;\n\n  })();\n\n  ListViewNode = (function(superClass) {\n    extend(ListViewNode, superClass);\n\n    function ListViewNode(model1, view1) {\n      this.model = model1;\n      this.view = view1;\n      ListViewNode.__super__.constructor.apply(this, arguments);\n    }\n\n    ListViewNode.prototype.computeChildren = function() {\n      var base, i, j, line, ref;\n      if (this.computedVersion === this.model.version) {\n        return this.lineLength;\n      }\n      this.lineLength = 0;\n      this.lineChildren = [[]];\n      this.children = [];\n      this.multilineChildrenData = [];\n      this.topLineSticksToBottom = false;\n      this.bottomLineSticksToTop = false;\n      line = 0;\n      this.model.traverseOneLevel((function(_this) {\n        return function(head) {\n          var base, base1, childLength, childObject, i, j, l, ref, ref1, ref2, ref3, view;\n          if (head.type === 'newline') {\n            line += 1;\n            return (base = _this.lineChildren)[line] != null ? base[line] : base[line] = [];\n          } else {\n            view = _this.view.getViewNodeFor(head);\n            childLength = view.computeChildren();\n            childObject = {\n              child: head,\n              startLine: line,\n              endLine: line + childLength - 1\n            };\n            _this.children.push(childObject);\n            for (i = j = ref = line, ref1 = line + childLength; ref <= ref1 ? j < ref1 : j > ref1; i = ref <= ref1 ? ++j : --j) {\n              if ((base1 = _this.lineChildren)[i] == null) {\n                base1[i] = [];\n              }\n              if (head.type !== 'cursor') {\n                _this.lineChildren[i].push(childObject);\n              }\n            }\n            if (view.lineLength > 1) {\n              if (_this.multilineChildrenData[line] === MULTILINE_END) {\n                _this.multilineChildrenData[line] = MULTILINE_END_START;\n              } else {\n                _this.multilineChildrenData[line] = MULTILINE_START;\n              }\n              for (i = l = ref2 = line + 1, ref3 = line + childLength - 1; ref2 <= ref3 ? l < ref3 : l > ref3; i = ref2 <= ref3 ? ++l : --l) {\n                _this.multilineChildrenData[i] = MULTILINE_MIDDLE;\n              }\n              _this.multilineChildrenData[line + childLength - 1] = MULTILINE_END;\n            }\n            return line += childLength - 1;\n          }\n        };\n      })(this));\n      this.lineLength = line + 1;\n      if (this.bounds.length !== this.lineLength) {\n        this.changedBoundingBox = true;\n        this.bounds = this.bounds.slice(0, this.lineLength);\n      }\n      for (i = j = 0, ref = this.lineLength; 0 <= ref ? j < ref : j > ref; i = 0 <= ref ? ++j : --j) {\n        if ((base = this.multilineChildrenData)[i] == null) {\n          base[i] = NO_MULTILINE;\n        }\n      }\n      if (this.lineLength > 1) {\n        this.topLineSticksToBottom = true;\n        this.bottomLineSticksToTop = true;\n      }\n      return this.lineLength;\n    };\n\n    ListViewNode.prototype.computeMinDimensions = function() {\n      var bottomMargin, buttonLine, childNode, childObject, desiredLine, j, l, len1, len2, len3, len4, len5, len6, line, lineChild, lineChildView, linesToExtend, m, margins, minDimension, minDimensions, minDistanceToBase, o, p, preIndentLines, q, ref, ref1, ref2, ref3, ref4, ref5, size;\n      if (this.computedVersion === this.model.version) {\n        return null;\n      }\n      ListViewNode.__super__.computeMinDimensions.apply(this, arguments);\n      linesToExtend = [];\n      preIndentLines = [];\n      ref = this.children;\n      for (j = 0, len1 = ref.length; j < len1; j++) {\n        childObject = ref[j];\n        childNode = this.view.getViewNodeFor(childObject.child);\n        childNode.computeMinDimensions();\n        minDimensions = childNode.minDimensions;\n        minDistanceToBase = childNode.minDistanceToBase;\n        for (line = l = 0, len2 = minDimensions.length; l < len2; line = ++l) {\n          size = minDimensions[line];\n          desiredLine = line + childObject.startLine;\n          margins = childNode.getMargins(line);\n          this.minDimensions[desiredLine].width += size.width + margins.left + margins.right;\n          if (childObject.child.type === 'indent' && line === minDimensions.length - 1 && desiredLine < this.lineLength - 1) {\n            bottomMargin = 0;\n            linesToExtend.push(desiredLine + 1);\n          } else if (childObject.child.type === 'indent' && line === 0) {\n            preIndentLines.push(desiredLine);\n            bottomMargin = margins.bottom;\n          } else {\n            bottomMargin = margins.bottom;\n          }\n          this.minDistanceToBase[desiredLine].above = Math.max(this.minDistanceToBase[desiredLine].above, minDistanceToBase[line].above + margins.top);\n          this.minDistanceToBase[desiredLine].below = Math.max(this.minDistanceToBase[desiredLine].below, minDistanceToBase[line].below + Math.max(bottomMargin, (buttonLine = ((ref1 = this.model.buttons) != null ? ref1.onFirstLine : void 0) ? 0 : this.lineLength - 1, (((ref2 = this.model.buttons) != null ? ref2.addButton : void 0) || ((ref3 = this.model.buttons) != null ? ref3.subtractButton : void 0)) && desiredLine === buttonLine && this.multilineChildrenData[line] === MULTILINE_END && this.lineChildren[line].length === 1 ? this.view.opts.buttonPadding + this.view.opts.buttonHeight : 0)));\n        }\n      }\n      ref4 = this.minDimensions;\n      for (line = m = 0, len3 = ref4.length; m < len3; line = ++m) {\n        minDimension = ref4[line];\n        if (this.lineChildren[line].length === 0) {\n          if (this.model.type === 'socket') {\n            this.minDistanceToBase[line].above = this.view.opts.textHeight * this.view.opts.textPadding;\n            this.minDistanceToBase[line].above = this.view.opts.textPadding;\n          } else {\n            this.minDistanceToBase[line].above = this.view.opts.textHeight + this.view.opts.padding;\n            this.minDistanceToBase[line].below = this.view.opts.padding;\n          }\n        }\n        minDimension.height = this.minDistanceToBase[line].above + this.minDistanceToBase[line].below;\n      }\n      for (o = 0, len4 = linesToExtend.length; o < len4; o++) {\n        line = linesToExtend[o];\n        this.minDimensions[line].width = Math.max(this.minDimensions[line].width, this.minDimensions[line - 1].width);\n      }\n      for (p = 0, len5 = preIndentLines.length; p < len5; p++) {\n        line = preIndentLines[p];\n        this.minDimensions[line].width = Math.max(this.minDimensions[line].width, this.view.opts.indentWidth + this.view.opts.tabWidth + this.view.opts.tabOffset + this.view.opts.bevelClip);\n      }\n      ref5 = this.lineChildren[this.lineLength - 1];\n      for (q = 0, len6 = ref5.length; q < len6; q++) {\n        lineChild = ref5[q];\n        lineChildView = this.view.getViewNodeFor(lineChild.child);\n        if (lineChildView.carriageArrow !== CARRIAGE_ARROW_NONE) {\n          this.minDistanceToBase[this.lineLength - 1].below += this.view.opts.padding;\n          this.minDimensions[this.lineLength - 1].height = this.minDistanceToBase[this.lineLength - 1].above + this.minDistanceToBase[this.lineLength - 1].below;\n          break;\n        }\n      }\n      return null;\n    };\n\n    ListViewNode.prototype.computeBoundingBoxX = function(left, line, offset) {\n      var childLeft, childLine, childMargins, childView, i, j, len1, lineChild, ref, ref1, ref2, ref3;\n      if (offset == null) {\n        offset = 0;\n      }\n      if (this.computedVersion === this.model.version && left === ((ref = this.bounds[line]) != null ? ref.x : void 0) && !this.changedBoundingBox) {\n        return this.bounds[line];\n      }\n      if (!(((ref1 = this.bounds[line]) != null ? ref1.x : void 0) === left && ((ref2 = this.bounds[line]) != null ? ref2.width : void 0) === this.dimensions[line].width)) {\n        if (this.bounds[line] != null) {\n          this.bounds[line].x = left;\n          this.bounds[line].width = this.dimensions[line].width;\n        } else {\n          this.bounds[line] = new this.view.draw.Rectangle(left, 0, this.dimensions[line].width, 0);\n        }\n        this.changedBoundingBox = true;\n      }\n      childLeft = left + offset;\n      ref3 = this.lineChildren[line];\n      for (i = j = 0, len1 = ref3.length; j < len1; i = ++j) {\n        lineChild = ref3[i];\n        childView = this.view.getViewNodeFor(lineChild.child);\n        childLine = line - lineChild.startLine;\n        childMargins = childView.getMargins(childLine);\n        childLeft += childMargins.left;\n        childView.computeBoundingBoxX(childLeft, childLine);\n        childLeft += childView.dimensions[childLine].width + childMargins.right;\n      }\n      return this.bounds[line];\n    };\n\n    ListViewNode.prototype.computeBoundingBoxY = function(top, line) {\n      var above, childAbove, childLine, childView, i, j, len1, lineChild, ref, ref1, ref2, ref3;\n      if (this.computedVersion === this.model.version && top === ((ref = this.bounds[line]) != null ? ref.y : void 0) && !this.changedBoundingBox) {\n        return this.bounds[line];\n      }\n      if (!(((ref1 = this.bounds[line]) != null ? ref1.y : void 0) === top && ((ref2 = this.bounds[line]) != null ? ref2.height : void 0) === this.dimensions[line].height)) {\n        this.bounds[line].y = top;\n        this.bounds[line].height = this.dimensions[line].height;\n        this.changedBoundingBox = true;\n      }\n      above = this.distanceToBase[line].above;\n      ref3 = this.lineChildren[line];\n      for (i = j = 0, len1 = ref3.length; j < len1; i = ++j) {\n        lineChild = ref3[i];\n        childView = this.view.getViewNodeFor(lineChild.child);\n        childLine = line - lineChild.startLine;\n        childAbove = childView.distanceToBase[childLine].above;\n        childView.computeBoundingBoxY(top + above - childAbove, childLine);\n      }\n      return this.bounds[line];\n    };\n\n    ListViewNode.prototype.layout = function(left, top) {\n      var changedBoundingBox;\n      if (left == null) {\n        left = this.lastCoordinate.x;\n      }\n      if (top == null) {\n        top = this.lastCoordinate.y;\n      }\n      this.lastCoordinate = new this.view.draw.Point(left, top);\n      this.computeChildren();\n      this.computeCarriageArrow(true);\n      this.computeMargins();\n      this.computeBevels();\n      this.computeMinDimensions();\n      this.computeDimensions(0, true);\n      this.computeAllBoundingBoxX(left);\n      this.computeGlue();\n      this.computeAllBoundingBoxY(top);\n      this.computePath();\n      this.computeDropAreas();\n      changedBoundingBox = this.changedBoundingBox;\n      this.computeNewVersionNumber();\n      return changedBoundingBox;\n    };\n\n    ListViewNode.prototype.absorbCache = function() {\n      var child, childView, j, l, left, len1, len2, line, ref, ref1, size, top;\n      this.computeChildren();\n      this.computeCarriageArrow(true);\n      this.computeMargins();\n      this.computeBevels();\n      this.computeMinDimensions();\n      this.computeDimensions(0, true);\n      ref = this.dimensions;\n      for (line = j = 0, len1 = ref.length; j < len1; line = ++j) {\n        size = ref[line];\n        child = this.lineChildren[line][0];\n        childView = this.view.getViewNodeFor(child.child);\n        left = childView.bounds[line - child.startLine].x;\n        this.computeBoundingBoxX(left, line);\n      }\n      this.computeGlue();\n      ref1 = this.dimensions;\n      for (line = l = 0, len2 = ref1.length; l < len2; line = ++l) {\n        size = ref1[line];\n        child = this.lineChildren[line][0];\n        childView = this.view.getViewNodeFor(child.child);\n        top = childView.bounds[line - child.startLine].y;\n        this.computeBoundingBoxY(top, line);\n      }\n      this.computePath();\n      this.computeDropAreas();\n      return true;\n    };\n\n    ListViewNode.prototype.computeGlue = function() {\n      var box, childLine, childObj, childView, j, l, len1, len2, len3, line, lineChild, m, ref, ref1, ref2;\n      if (this.computedVersion === this.model.version && !this.changedBoundingBox) {\n        return this.glue;\n      }\n      ref = this.children;\n      for (j = 0, len1 = ref.length; j < len1; j++) {\n        childObj = ref[j];\n        this.view.getViewNodeFor(childObj.child).computeGlue();\n      }\n      this.glue = {};\n      ref1 = this.bounds;\n      for (line = l = 0, len2 = ref1.length; l < len2; line = ++l) {\n        box = ref1[line];\n        if (!(line < this.bounds.length - 1)) {\n          continue;\n        }\n        this.glue[line] = {\n          type: 'normal',\n          height: 0,\n          draw: false\n        };\n        ref2 = this.lineChildren[line];\n        for (m = 0, len3 = ref2.length; m < len3; m++) {\n          lineChild = ref2[m];\n          childView = this.view.getViewNodeFor(lineChild.child);\n          childLine = line - lineChild.startLine;\n          if (childLine in childView.glue) {\n            this.glue[line].height = Math.max(this.glue[line].height, childView.glue[childLine].height);\n          }\n          if (childView.carriageArrow !== CARRIAGE_ARROW_NONE) {\n            this.glue[line].height = Math.max(this.glue[line].height, this.view.opts.padding);\n          }\n        }\n      }\n      return this.glue;\n    };\n\n    ListViewNode.prototype.drawShadow = function(ctx, x, y) {\n      var childObj, j, len1, ref;\n      this.path.drawShadow(ctx, x, y, this.view.opts.shadowBlur);\n      ref = this.children;\n      for (j = 0, len1 = ref.length; j < len1; j++) {\n        childObj = ref[j];\n        this.view.getViewNodeFor(childObj.child).drawShadow(ctx, x, y);\n      }\n      return null;\n    };\n\n    return ListViewNode;\n\n  })(GenericViewNode);\n\n  ContainerViewNode = (function(superClass) {\n    extend(ContainerViewNode, superClass);\n\n    function ContainerViewNode(model1, view1) {\n      this.model = model1;\n      this.view = view1;\n      ContainerViewNode.__super__.constructor.apply(this, arguments);\n    }\n\n    ContainerViewNode.prototype.computeCarriageArrow = function(root) {\n      var head, oldCarriageArrow, parent;\n      if (root == null) {\n        root = false;\n      }\n      oldCarriageArrow = this.carriageArrow;\n      this.carriageArrow = CARRIAGE_ARROW_NONE;\n      parent = this.model.parent;\n      if ((!root) && (parent != null ? parent.type : void 0) === 'indent' && this.view.getViewNodeFor(parent).lineLength > 1 && this.lineLength === 1) {\n        head = this.model.start;\n        while (!(head === parent.start || head.type === 'newline')) {\n          head = head.prev;\n        }\n        if (head === parent.start) {\n          if (this.model.isLastOnLine()) {\n            this.carriageArrow = CARRIAGE_ARROW_INDENT;\n          } else {\n            this.carriageArrow = CARRIAGE_GROW_DOWN;\n          }\n        } else if (!this.model.isFirstOnLine()) {\n          this.carriageArrow = CARRIAGE_ARROW_SIDEALONG;\n        }\n      }\n      if (this.carriageArrow !== oldCarriageArrow) {\n        this.changedBoundingBox = true;\n      }\n      if (this.computedVersion === this.model.version && ((this.model.parent == null) || this.model.parent.version === this.view.getViewNodeFor(this.model.parent).computedVersion)) {\n        return null;\n      }\n      return ContainerViewNode.__super__.computeCarriageArrow.apply(this, arguments);\n    };\n\n    ContainerViewNode.prototype.computeGlue = function() {\n      var box, j, len1, line, overlap, ref, ref1;\n      if (this.computedVersion === this.model.version && !this.changedBoundingBox) {\n        return this.glue;\n      }\n      ContainerViewNode.__super__.computeGlue.apply(this, arguments);\n      ref = this.bounds;\n      for (line = j = 0, len1 = ref.length; j < len1; line = ++j) {\n        box = ref[line];\n        if (line < this.bounds.length - 1) {\n          if (this.multilineChildrenData[line] !== MULTILINE_MIDDLE) {\n            overlap = Math.min(this.bounds[line].right() - this.bounds[line + 1].x, this.bounds[line + 1].right() - this.bounds[line].x);\n            if ((ref1 = this.multilineChildrenData[line]) === MULTILINE_START || ref1 === MULTILINE_END_START) {\n              overlap = Math.min(overlap, this.bounds[line + 1].x + this.view.opts.indentWidth - this.bounds[line].x);\n            }\n            if (overlap < this.view.opts.padding && this.model.type !== 'indent') {\n              this.glue[line].height += this.view.opts.padding;\n              this.glue[line].draw = true;\n            }\n          }\n        }\n      }\n      return this.glue;\n    };\n\n    ContainerViewNode.prototype.computeBevels = function() {\n      var oldBevels, ref, ref1, ref2, ref3, ref4, ref5, ref6;\n      oldBevels = this.bevels;\n      this.bevels = {\n        top: true,\n        bottom: true\n      };\n      if (((ref = (ref1 = this.model.parent) != null ? ref1.type : void 0) === 'indent' || ref === 'document') && ((ref2 = this.model.start.prev) != null ? ref2.type : void 0) === 'newline' && ((ref3 = this.model.start.prev) != null ? ref3.prev : void 0) !== this.model.parent.start) {\n        this.bevels.top = false;\n      }\n      if (((ref4 = (ref5 = this.model.parent) != null ? ref5.type : void 0) === 'indent' || ref4 === 'document') && ((ref6 = this.model.end.next) != null ? ref6.type : void 0) === 'newline') {\n        this.bevels.bottom = false;\n      }\n      if (!(oldBevels.top === this.bevels.top && oldBevels.bottom === this.bevels.bottom)) {\n        this.changedBoundingBox = true;\n      }\n      if (this.computedVersion === this.model.version) {\n        return null;\n      }\n      return ContainerViewNode.__super__.computeBevels.apply(this, arguments);\n    };\n\n    ContainerViewNode.prototype.computeOwnPath = function() {\n      var bounds, destinationBounds, el, glueTop, i, innerLeft, innerRight, j, l, left, leftmost, len1, len2, len3, line, m, multilineBounds, multilineChild, multilineNode, multilineView, newPath, next, parentViewNode, path, point, prev, ref, ref1, ref2, ref3, ref4, ref5, ref6, right, rightmost;\n      left = [];\n      right = [];\n      if (this.shouldAddTab() && this.model.isFirstOnLine() && this.carriageArrow !== CARRIAGE_ARROW_SIDEALONG) {\n        this.addTabReverse(right, new this.view.draw.Point(this.bounds[0].x + this.view.opts.tabOffset, this.bounds[0].y));\n      }\n      ref = this.bounds;\n      for (line = j = 0, len1 = ref.length; j < len1; line = ++j) {\n        bounds = ref[line];\n        if (this.multilineChildrenData[line] === NO_MULTILINE) {\n          left.push(new this.view.draw.Point(bounds.x, bounds.y));\n          left.push(new this.view.draw.Point(bounds.x, bounds.bottom()));\n          right.push(new this.view.draw.Point(bounds.right(), bounds.y));\n          right.push(new this.view.draw.Point(bounds.right(), bounds.bottom()));\n        }\n        if (this.multilineChildrenData[line] === MULTILINE_START) {\n          left.push(new this.view.draw.Point(bounds.x, bounds.y));\n          left.push(new this.view.draw.Point(bounds.x, bounds.bottom()));\n          multilineChild = this.lineChildren[line][this.lineChildren[line].length - 1];\n          multilineView = this.view.getViewNodeFor(multilineChild.child);\n          multilineBounds = multilineView.bounds[line - multilineChild.startLine];\n          if (multilineBounds.width === 0) {\n            right.push(new this.view.draw.Point(bounds.right(), bounds.y));\n          } else {\n            right.push(new this.view.draw.Point(bounds.right(), bounds.y));\n            right.push(new this.view.draw.Point(bounds.right(), multilineBounds.y));\n            if (multilineChild.child.type === 'indent') {\n              this.addTab(right, new this.view.draw.Point(multilineBounds.x + this.view.opts.tabOffset, multilineBounds.y));\n            }\n            right.push(new this.view.draw.Point(multilineBounds.x, multilineBounds.y));\n            right.push(new this.view.draw.Point(multilineBounds.x, multilineBounds.bottom()));\n          }\n        }\n        if (this.multilineChildrenData[line] === MULTILINE_MIDDLE) {\n          multilineChild = this.lineChildren[line][0];\n          multilineBounds = this.view.getViewNodeFor(multilineChild.child).bounds[line - multilineChild.startLine];\n          left.push(new this.view.draw.Point(bounds.x, bounds.y));\n          left.push(new this.view.draw.Point(bounds.x, bounds.bottom()));\n          if (!(((ref1 = this.multilineChildrenData[line - 1]) === MULTILINE_START || ref1 === MULTILINE_END_START) && multilineChild.child.type === 'indent')) {\n            right.push(new this.view.draw.Point(multilineBounds.x, bounds.y));\n          }\n          right.push(new this.view.draw.Point(multilineBounds.x, bounds.bottom()));\n        }\n        if ((ref2 = this.multilineChildrenData[line]) === MULTILINE_END || ref2 === MULTILINE_END_START) {\n          left.push(new this.view.draw.Point(bounds.x, bounds.y));\n          left.push(new this.view.draw.Point(bounds.x, bounds.bottom()));\n          multilineChild = this.lineChildren[line][0];\n          multilineBounds = this.view.getViewNodeFor(multilineChild.child).bounds[line - multilineChild.startLine];\n          if (!(((ref3 = this.multilineChildrenData[line - 1]) === MULTILINE_START || ref3 === MULTILINE_END_START) && multilineChild.child.type === 'indent')) {\n            right.push(new this.view.draw.Point(multilineBounds.x, multilineBounds.y));\n          }\n          right.push(new this.view.draw.Point(multilineBounds.x, multilineBounds.bottom()));\n          if (multilineChild.child.type === 'indent') {\n            this.addTabReverse(right, new this.view.draw.Point(multilineBounds.x + this.view.opts.tabOffset, multilineBounds.bottom()));\n          }\n          right.push(new this.view.draw.Point(multilineBounds.right(), multilineBounds.bottom()));\n          if (this.lineChildren[line].length > 1) {\n            right.push(new this.view.draw.Point(multilineBounds.right(), multilineBounds.y));\n            if (this.multilineChildrenData[line] === MULTILINE_END) {\n              right.push(new this.view.draw.Point(bounds.right(), bounds.y));\n              right.push(new this.view.draw.Point(bounds.right(), bounds.bottom()));\n            } else {\n              multilineChild = this.lineChildren[line][this.lineChildren[line].length - 1];\n              multilineView = this.view.getViewNodeFor(multilineChild.child);\n              multilineBounds = multilineView.bounds[line - multilineChild.startLine];\n              right.push(new this.view.draw.Point(bounds.right(), bounds.y));\n              if (multilineBounds.width === 0) {\n                right.push(new this.view.draw.Point(bounds.right(), bounds.y));\n                right.push(new this.view.draw.Point(bounds.right(), bounds.bottom()));\n              } else {\n                right.push(new this.view.draw.Point(bounds.right(), multilineBounds.y));\n                right.push(new this.view.draw.Point(multilineBounds.x, multilineBounds.y));\n                right.push(new this.view.draw.Point(multilineBounds.x, multilineBounds.bottom()));\n              }\n            }\n          } else {\n            right.push(new this.view.draw.Point(bounds.right(), multilineBounds.bottom()));\n            right.push(new this.view.draw.Point(bounds.right(), bounds.bottom()));\n          }\n        }\n        if (line < this.lineLength - 1 && line in this.glue && this.glue[line].draw) {\n          glueTop = this.bounds[line + 1].y - this.glue[line].height;\n          leftmost = Math.min(this.bounds[line + 1].x, this.bounds[line].x);\n          rightmost = Math.max(this.bounds[line + 1].right(), this.bounds[line].right());\n          left.push(new this.view.draw.Point(this.bounds[line].x, glueTop));\n          left.push(new this.view.draw.Point(leftmost, glueTop));\n          left.push(new this.view.draw.Point(leftmost, glueTop + this.view.opts.padding));\n          if (this.multilineChildrenData[line] !== MULTILINE_START) {\n            right.push(new this.view.draw.Point(this.bounds[line].right(), glueTop));\n            right.push(new this.view.draw.Point(rightmost, glueTop));\n            right.push(new this.view.draw.Point(rightmost, glueTop + this.view.opts.padding));\n          }\n        } else if ((this.bounds[line + 1] != null) && this.multilineChildrenData[line] !== MULTILINE_MIDDLE) {\n          innerLeft = Math.max(this.bounds[line + 1].x, this.bounds[line].x);\n          innerRight = Math.min(this.bounds[line + 1].right(), this.bounds[line].right());\n          left.push(new this.view.draw.Point(innerLeft, this.bounds[line].bottom()));\n          left.push(new this.view.draw.Point(innerLeft, this.bounds[line + 1].y));\n          if ((ref4 = this.multilineChildrenData[line]) !== MULTILINE_START && ref4 !== MULTILINE_END_START) {\n            right.push(new this.view.draw.Point(innerRight, this.bounds[line].bottom()));\n            right.push(new this.view.draw.Point(innerRight, this.bounds[line + 1].y));\n          }\n        } else if (this.carriageArrow === CARRIAGE_GROW_DOWN) {\n          parentViewNode = this.view.getViewNodeFor(this.model.parent);\n          destinationBounds = parentViewNode.bounds[1];\n          right.push(new this.view.draw.Point(this.bounds[line].right(), destinationBounds.y - this.view.opts.padding));\n          left.push(new this.view.draw.Point(this.bounds[line].x, destinationBounds.y - this.view.opts.padding));\n        } else if (this.carriageArrow === CARRIAGE_ARROW_INDENT) {\n          parentViewNode = this.view.getViewNodeFor(this.model.parent);\n          destinationBounds = parentViewNode.bounds[1];\n          right.push(new this.view.draw.Point(this.bounds[line].right(), destinationBounds.y));\n          right.push(new this.view.draw.Point(destinationBounds.x + this.view.opts.tabOffset + this.view.opts.tabWidth, destinationBounds.y));\n          left.push(new this.view.draw.Point(this.bounds[line].x, destinationBounds.y - this.view.opts.padding));\n          left.push(new this.view.draw.Point(destinationBounds.x, destinationBounds.y - this.view.opts.padding));\n          left.push(new this.view.draw.Point(destinationBounds.x, destinationBounds.y));\n          this.addTab(right, new this.view.draw.Point(destinationBounds.x + this.view.opts.tabOffset, destinationBounds.y));\n        } else if (this.carriageArrow === CARRIAGE_ARROW_SIDEALONG && this.model.isLastOnLine()) {\n          parentViewNode = this.view.getViewNodeFor(this.model.parent);\n          destinationBounds = parentViewNode.bounds[this.model.getLinesToParent()];\n          right.push(new this.view.draw.Point(this.bounds[line].right(), destinationBounds.bottom() + this.view.opts.padding));\n          right.push(new this.view.draw.Point(destinationBounds.x + this.view.opts.tabOffset + this.view.opts.tabWidth, destinationBounds.bottom() + this.view.opts.padding));\n          left.push(new this.view.draw.Point(this.bounds[line].x, destinationBounds.bottom()));\n          left.push(new this.view.draw.Point(destinationBounds.x, destinationBounds.bottom()));\n          left.push(new this.view.draw.Point(destinationBounds.x, destinationBounds.bottom() + this.view.opts.padding));\n          this.addTab(right, new this.view.draw.Point(destinationBounds.x + this.view.opts.tabOffset, destinationBounds.bottom() + this.view.opts.padding));\n        }\n        if ((ref5 = this.multilineChildrenData[line]) === MULTILINE_START || ref5 === MULTILINE_END_START) {\n          multilineChild = this.lineChildren[line][this.lineChildren[line].length - 1];\n          multilineNode = this.view.getViewNodeFor(multilineChild.child);\n          multilineBounds = multilineNode.bounds[line - multilineChild.startLine];\n          if ((ref6 = this.glue[line]) != null ? ref6.draw : void 0) {\n            glueTop = this.bounds[line + 1].y - this.glue[line].height + this.view.opts.padding;\n          } else {\n            glueTop = this.bounds[line].bottom();\n          }\n          if (multilineChild.child.type === 'indent' && multilineChild.child.start.next.type === 'newline') {\n            right.push(new this.view.draw.Point(this.bounds[line].right(), glueTop));\n            this.addTab(right, new this.view.draw.Point(this.bounds[line + 1].x + this.view.opts.indentWidth + this.view.opts.tabOffset, glueTop), true);\n          } else {\n            right.push(new this.view.draw.Point(multilineBounds.x, glueTop));\n          }\n          if (glueTop !== this.bounds[line + 1].y) {\n            right.push(new this.view.draw.Point(multilineNode.bounds[line - multilineChild.startLine + 1].x, glueTop));\n          }\n          right.push(new this.view.draw.Point(multilineNode.bounds[line - multilineChild.startLine + 1].x, this.bounds[line + 1].y));\n        }\n      }\n      if (this.shouldAddTab() && this.model.isLastOnLine() && this.carriageArrow === CARRIAGE_ARROW_NONE) {\n        this.addTab(right, new this.view.draw.Point(this.bounds[this.lineLength - 1].x + this.view.opts.tabOffset, this.bounds[this.lineLength - 1].bottom()));\n      }\n      path = left.reverse().concat(right);\n      newPath = [];\n      for (i = l = 0, len2 = path.length; l < len2; i = ++l) {\n        point = path[i];\n        if (i === 0 && !this.bevels.bottom) {\n          newPath.push(point);\n          continue;\n        }\n        if (i === (left.length - 1) && !this.bevels.top) {\n          newPath.push(point);\n          continue;\n        }\n        next = path[modulo(i + 1, path.length)];\n        prev = path[modulo(i - 1, path.length)];\n        if ((point.x === next.x) !== (point.y === next.y) && (point.x === prev.x) !== (point.y === prev.y)) {\n          newPath.push(point.plus(point.from(prev).toMagnitude(-this.view.opts.bevelClip)));\n          newPath.push(point.plus(point.from(next).toMagnitude(-this.view.opts.bevelClip)));\n        } else {\n          newPath.push(point);\n        }\n      }\n      this.path = new this.view.draw.Path();\n      for (m = 0, len3 = newPath.length; m < len3; m++) {\n        el = newPath[m];\n        this.path.push(el);\n      }\n      return this.path;\n    };\n\n    ContainerViewNode.prototype.addTab = function(array, point) {\n      array.push(new this.view.draw.Point(point.x + this.view.opts.tabWidth, point.y));\n      array.push(new this.view.draw.Point(point.x + this.view.opts.tabWidth * (1 - this.view.opts.tabSideWidth), point.y + this.view.opts.tabHeight));\n      array.push(new this.view.draw.Point(point.x + this.view.opts.tabWidth * this.view.opts.tabSideWidth, point.y + this.view.opts.tabHeight));\n      array.push(new this.view.draw.Point(point.x, point.y));\n      return array.push(point);\n    };\n\n    ContainerViewNode.prototype.addTabReverse = function(array, point) {\n      array.push(point);\n      array.push(new this.view.draw.Point(point.x, point.y));\n      array.push(new this.view.draw.Point(point.x + this.view.opts.tabWidth * this.view.opts.tabSideWidth, point.y + this.view.opts.tabHeight));\n      array.push(new this.view.draw.Point(point.x + this.view.opts.tabWidth * (1 - this.view.opts.tabSideWidth), point.y + this.view.opts.tabHeight));\n      return array.push(new this.view.draw.Point(point.x + this.view.opts.tabWidth, point.y));\n    };\n\n    ContainerViewNode.prototype.computeOwnDropArea = function() {\n      return this.dropArea = this.highlightArea = null;\n    };\n\n    ContainerViewNode.prototype.shouldAddTab = NO;\n\n    ContainerViewNode.prototype.drawSelf = function(ctx, style) {\n      var oldFill, oldStroke;\n      if (style == null) {\n        style = {};\n      }\n      oldFill = this.path.style.fillColor;\n      oldStroke = this.path.style.strokeColor;\n      if (style.grayscale) {\n        this.path.style.fillColor = avgColor(this.path.style.fillColor, 0.5, '#888');\n        this.path.style.strokeColor = avgColor(this.path.style.strokeColor, 0.5, '#888');\n      }\n      if (style.selected) {\n        this.path.style.fillColor = avgColor(this.path.style.fillColor, 0.7, '#00F');\n        this.path.style.strokeColor = avgColor(this.path.style.strokeColor, 0.7, '#00F');\n      }\n      this.path.draw(ctx);\n      this.path.style.fillColor = oldFill;\n      this.path.style.strokeColor = oldStroke;\n      return null;\n    };\n\n    return ContainerViewNode;\n\n  })(ListViewNode);\n\n  BlockViewNode = (function(superClass) {\n    extend(BlockViewNode, superClass);\n\n    function BlockViewNode() {\n      BlockViewNode.__super__.constructor.apply(this, arguments);\n    }\n\n    BlockViewNode.prototype.computeMinDimensions = function() {\n      var buttonLine, i, j, len1, ref, ref1, size;\n      if (this.computedVersion === this.model.version) {\n        return null;\n      }\n      BlockViewNode.__super__.computeMinDimensions.apply(this, arguments);\n      this.extraWidth = 0;\n      if (this.model.buttons.addButton) {\n        this.extraWidth += this.view.opts.buttonWidth + this.view.opts.buttonPadding;\n      }\n      if (this.model.buttons.subtractButton) {\n        this.extraWidth += this.view.opts.buttonWidth + this.view.opts.buttonPadding;\n      }\n      ref = this.minDimensions;\n      for (i = j = 0, len1 = ref.length; j < len1; i = ++j) {\n        size = ref[i];\n        size.width = Math.max(size.width, this.view.opts.tabWidth + this.view.opts.tabOffset);\n      }\n      buttonLine = ((ref1 = this.model.buttons) != null ? ref1.onFirstLine : void 0) ? 0 : this.minDimensions.length - 1;\n      this.minDimensions[buttonLine].width += this.extraWidth;\n      return null;\n    };\n\n    BlockViewNode.prototype.drawSelf = function(ctx, style) {\n      var drawButton;\n      BlockViewNode.__super__.drawSelf.apply(this, arguments);\n      drawButton = (function(_this) {\n        return function(text, rect, ctx) {\n          var dx, dy, path, textElement;\n          path = rect.toPath().reverse();\n          path.style.fillColor = _this.path.style.fillColor;\n          if (style.grayscale) {\n            path.style.fillColor = avgColor(_this.path.style.fillColor, 0.5, '#888');\n          }\n          if (style.selected) {\n            path.style.fillColor = avgColor(_this.path.style.fillColor, 0.7, '#00F');\n          }\n          path.bevel = true;\n          path.draw(ctx);\n          textElement = new _this.view.draw.Text(new _this.view.draw.Point(0, 0), text);\n          dx = rect.width - textElement.bounds().width;\n          dy = rect.height - _this.view.opts.textHeight;\n          textElement.translate({\n            x: rect.x + Math.ceil(dx / 2),\n            y: rect.y + Math.ceil(dy)\n          });\n          return textElement.draw(ctx);\n        };\n      })(this);\n      if (this.model.buttons.addButton) {\n        drawButton(this.model.buttons.addButton, this.addButtonRect, ctx);\n      }\n      if (this.model.buttons.subtractButton) {\n        return drawButton(this.model.buttons.subtractButton, this.subtractButtonRect, ctx);\n      }\n    };\n\n    BlockViewNode.prototype.shouldAddTab = function() {\n      var ref;\n      if ((this.model.parent != null) && this.view.hasViewNodeFor(this.model.parent) && !(this.model.parent.type === 'document' && this.model.parent.opts.roundedSingletons && this.model.start.prev === this.model.parent.start && this.model.end.next === this.model.parent.end)) {\n        return ((ref = this.model.parent) != null ? ref.type : void 0) !== 'socket';\n      } else {\n        return !(indexOf.call(this.model.classes, 'mostly-value') >= 0 || indexOf.call(this.model.classes, 'value-only') >= 0);\n      }\n    };\n\n    BlockViewNode.prototype.computePath = function() {\n      var buttonStart, buttonTop, firstRect, firstStart, firstTop, height, lastLine, lastRect, multilineBounds, multilineChild, start, top;\n      BlockViewNode.__super__.computePath.apply(this, arguments);\n      firstRect = this.bounds[0];\n      firstStart = firstRect.x + firstRect.width - this.extraWidth;\n      firstTop = firstRect.y + firstRect.height / 2 - this.view.opts.buttonHeight / 2;\n      lastLine = this.bounds.length - 1;\n      lastRect = this.bounds[lastLine];\n      start = lastRect.x + lastRect.width - this.extraWidth;\n      top = lastRect.y + lastRect.height / 2 - this.view.opts.buttonHeight / 2;\n      if (this.multilineChildrenData[lastLine] === MULTILINE_END) {\n        multilineChild = this.lineChildren[lastLine][0];\n        multilineBounds = this.view.getViewNodeFor(multilineChild.child).bounds[lastLine - multilineChild.startLine];\n        if (this.lineChildren[lastLine].length > 1) {\n          height = multilineBounds.bottom() - lastRect.y;\n          top = lastRect.y + height / 2 - this.view.opts.buttonHeight / 2;\n        } else {\n          height = lastRect.bottom() - multilineBounds.bottom();\n          top = multilineBounds.bottom() + height / 2 - this.view.opts.buttonHeight / 2;\n        }\n      }\n      buttonStart = this.model.buttons.onFirstLine ? firstStart : start;\n      buttonTop = this.model.buttons.onFirstLine ? firstTop : top;\n      if (this.model.buttons.subtractButton) {\n        this.subtractButtonRect = new this.view.draw.Rectangle(buttonStart, buttonTop, this.view.opts.buttonWidth, this.view.opts.buttonHeight);\n        buttonStart += this.view.opts.buttonWidth + this.view.opts.buttonPadding;\n      }\n      if (this.model.buttons.addButton) {\n        return this.addButtonRect = new this.view.draw.Rectangle(buttonStart, buttonTop, this.view.opts.buttonWidth, this.view.opts.buttonHeight);\n      }\n    };\n\n    BlockViewNode.prototype.computeOwnPath = function() {\n      BlockViewNode.__super__.computeOwnPath.apply(this, arguments);\n      this.path.style.fillColor = this.view.getColor(this.model.color);\n      this.path.style.strokeColor = '#888';\n      this.path.bevel = true;\n      return this.path;\n    };\n\n    BlockViewNode.prototype.computeOwnDropArea = function() {\n      var destinationBounds, highlightAreaPoints, j, lastBoundsLeft, lastBoundsRight, len1, parentViewNode, point;\n      if (this.carriageArrow === CARRIAGE_ARROW_INDENT) {\n        parentViewNode = this.view.getViewNodeFor(this.model.parent);\n        destinationBounds = parentViewNode.bounds[1];\n        this.dropPoint = new this.view.draw.Point(destinationBounds.x, destinationBounds.y);\n        lastBoundsLeft = destinationBounds.x;\n        lastBoundsRight = destinationBounds.right();\n      } else if (this.carriageArrow === CARRIAGE_ARROW_SIDEALONG) {\n        parentViewNode = this.view.getViewNodeFor(this.model.parent);\n        destinationBounds = parentViewNode.bounds[1];\n        this.dropPoint = new this.view.draw.Point(destinationBounds.x, this.bounds[this.lineLength - 1].bottom() + this.view.opts.padding);\n        lastBoundsLeft = destinationBounds.x;\n        lastBoundsRight = this.bounds[this.lineLength - 1].right();\n      } else {\n        this.dropPoint = new this.view.draw.Point(this.bounds[this.lineLength - 1].x, this.bounds[this.lineLength - 1].bottom());\n        lastBoundsLeft = this.bounds[this.lineLength - 1].x;\n        lastBoundsRight = this.bounds[this.lineLength - 1].right();\n      }\n      this.highlightArea = new this.view.draw.Path();\n      highlightAreaPoints = [];\n      highlightAreaPoints.push(new this.view.draw.Point(lastBoundsLeft, this.dropPoint.y - this.view.opts.highlightAreaHeight / 2 + this.view.opts.bevelClip));\n      highlightAreaPoints.push(new this.view.draw.Point(lastBoundsLeft + this.view.opts.bevelClip, this.dropPoint.y - this.view.opts.highlightAreaHeight / 2));\n      this.addTabReverse(highlightAreaPoints, new this.view.draw.Point(lastBoundsLeft + this.view.opts.tabOffset, this.dropPoint.y - this.view.opts.highlightAreaHeight / 2));\n      highlightAreaPoints.push(new this.view.draw.Point(lastBoundsRight - this.view.opts.bevelClip, this.dropPoint.y - this.view.opts.highlightAreaHeight / 2));\n      highlightAreaPoints.push(new this.view.draw.Point(lastBoundsRight, this.dropPoint.y - this.view.opts.highlightAreaHeight / 2 + this.view.opts.bevelClip));\n      highlightAreaPoints.push(new this.view.draw.Point(lastBoundsRight, this.dropPoint.y + this.view.opts.highlightAreaHeight / 2 - this.view.opts.bevelClip));\n      highlightAreaPoints.push(new this.view.draw.Point(lastBoundsRight - this.view.opts.bevelClip, this.dropPoint.y + this.view.opts.highlightAreaHeight / 2));\n      this.addTab(highlightAreaPoints, new this.view.draw.Point(lastBoundsLeft + this.view.opts.tabOffset, this.dropPoint.y + this.view.opts.highlightAreaHeight / 2));\n      highlightAreaPoints.push(new this.view.draw.Point(lastBoundsLeft + this.view.opts.bevelClip, this.dropPoint.y + this.view.opts.highlightAreaHeight / 2));\n      highlightAreaPoints.push(new this.view.draw.Point(lastBoundsLeft, this.dropPoint.y + this.view.opts.highlightAreaHeight / 2 - this.view.opts.bevelClip));\n      for (j = 0, len1 = highlightAreaPoints.length; j < len1; j++) {\n        point = highlightAreaPoints[j];\n        this.highlightArea.push(point);\n      }\n      this.highlightArea.style.lineWidth = 1;\n      this.highlightArea.style.strokeColor = '#ff0';\n      return this.highlightArea.style.fillColor = '#ff0';\n    };\n\n    return BlockViewNode;\n\n  })(ContainerViewNode);\n\n  SocketViewNode = (function(superClass) {\n    extend(SocketViewNode, superClass);\n\n    function SocketViewNode() {\n      SocketViewNode.__super__.constructor.apply(this, arguments);\n    }\n\n    SocketViewNode.prototype.shouldAddTab = NO;\n\n    SocketViewNode.prototype.isInvisibleSocket = function() {\n      var ref;\n      return '' === this.model.emptyString && ((ref = this.model.start) != null ? ref.next : void 0) === this.model.end;\n    };\n\n    SocketViewNode.prototype.computeMinDimensions = function() {\n      var dimension, j, len1, ref;\n      if (this.computedVersion === this.model.version) {\n        return null;\n      }\n      SocketViewNode.__super__.computeMinDimensions.apply(this, arguments);\n      this.minDistanceToBase[0].above = Math.max(this.minDistanceToBase[0].above, this.view.opts.textHeight + this.view.opts.textPadding);\n      this.minDistanceToBase[0].below = Math.max(this.minDistanceToBase[0].below, this.view.opts.textPadding);\n      this.minDimensions[0].height = this.minDistanceToBase[0].above + this.minDistanceToBase[0].below;\n      ref = this.minDimensions;\n      for (j = 0, len1 = ref.length; j < len1; j++) {\n        dimension = ref[j];\n        dimension.width = Math.max(dimension.width, this.isInvisibleSocket() ? this.view.opts.invisibleSocketWidth : this.view.opts.minSocketWidth);\n        if (this.model.hasDropdown() && this.view.opts.showDropdowns) {\n          dimension.width += helper.DROPDOWN_ARROW_WIDTH;\n        }\n      }\n      return null;\n    };\n\n    SocketViewNode.prototype.computeBoundingBoxX = function(left, line) {\n      return SocketViewNode.__super__.computeBoundingBoxX.call(this, left, line, (this.model.hasDropdown() && this.view.opts.showDropdowns ? helper.DROPDOWN_ARROW_WIDTH : 0));\n    };\n\n    SocketViewNode.prototype.computeGlue = function() {\n      var view;\n      if (this.computedVersion === this.model.version && !this.changedBoundingBox) {\n        return this.glue;\n      }\n      if (this.model.start.next.type === 'blockStart') {\n        view = this.view.getViewNodeFor(this.model.start.next.container);\n        return this.glue = view.computeGlue();\n      } else {\n        return SocketViewNode.__super__.computeGlue.apply(this, arguments);\n      }\n    };\n\n    SocketViewNode.prototype.computeOwnPath = function() {\n      var ref, view;\n      if (this.computedVersion === this.model.version && !this.changedBoundingBox) {\n        return this.path;\n      }\n      if (this.model.start.next.type === 'blockStart') {\n        view = this.view.getViewNodeFor(this.model.start.next.container);\n        this.path = view.computeOwnPath().clone();\n      } else {\n        SocketViewNode.__super__.computeOwnPath.apply(this, arguments);\n      }\n      if ('' === this.model.emptyString && ((ref = this.model.start) != null ? ref.next : void 0) === this.model.end) {\n        this.path.style.fillColor = this.path.style.strokeColor = 'rgba(0,0,0,0)';\n      } else {\n        this.path.style.fillColor = this.path.style.strokeColor = '#FFF';\n      }\n      return this.path;\n    };\n\n    SocketViewNode.prototype.drawSelf = function(ctx) {\n      SocketViewNode.__super__.drawSelf.apply(this, arguments);\n      if (this.model.hasDropdown() && this.view.opts.showDropdowns) {\n        ctx.beginPath();\n        ctx.fillStyle = DROP_TRIANGLE_COLOR;\n        ctx.moveTo(this.bounds[0].x + helper.DROPDOWN_ARROW_PADDING, this.bounds[0].y + (this.bounds[0].height - DROPDOWN_ARROW_HEIGHT) / 2);\n        ctx.lineTo(this.bounds[0].x + helper.DROPDOWN_ARROW_WIDTH - helper.DROPDOWN_ARROW_PADDING, this.bounds[0].y + (this.bounds[0].height - DROPDOWN_ARROW_HEIGHT) / 2);\n        ctx.lineTo(this.bounds[0].x + helper.DROPDOWN_ARROW_WIDTH / 2, this.bounds[0].y + (this.bounds[0].height + DROPDOWN_ARROW_HEIGHT) / 2);\n        return ctx.fill();\n      }\n    };\n\n    SocketViewNode.prototype.computeOwnDropArea = function() {\n      if (this.model.start.next.type === 'blockStart') {\n        return this.dropArea = this.highlightArea = null;\n      } else {\n        this.dropPoint = this.bounds[0].upperLeftCorner();\n        this.highlightArea = this.path.clone();\n        this.highlightArea.noclip = true;\n        this.highlightArea.style.strokeColor = '#FF0';\n        return this.highlightArea.style.lineWidth = this.view.opts.padding;\n      }\n    };\n\n    return SocketViewNode;\n\n  })(ContainerViewNode);\n\n  IndentViewNode = (function(superClass) {\n    extend(IndentViewNode, superClass);\n\n    function IndentViewNode() {\n      IndentViewNode.__super__.constructor.apply(this, arguments);\n      this.lastFirstChildren = [];\n      this.lastLastChildren = [];\n    }\n\n    IndentViewNode.prototype.computeOwnPath = function() {\n      return this.path = new this.view.draw.Path();\n    };\n\n    IndentViewNode.prototype.computeChildren = function() {\n      var childObj, childRef, childView, j, l, len1, len2, len3, m, ref, ref1, ref2;\n      IndentViewNode.__super__.computeChildren.apply(this, arguments);\n      if (!(arrayEq(this.lineChildren[0], this.lastFirstChildren) && arrayEq(this.lineChildren[this.lineLength - 1], this.lastLastChildren))) {\n        ref = this.children;\n        for (j = 0, len1 = ref.length; j < len1; j++) {\n          childObj = ref[j];\n          childView = this.view.getViewNodeFor(childObj.child);\n          if (childView.topLineSticksToBottom || childView.bottomLineSticksToTop) {\n            childView.invalidate = true;\n          }\n          if (childView.lineLength === 1) {\n            childView.topLineSticksToBottom = childView.bottomLineSticksToTop = false;\n          }\n        }\n      }\n      ref1 = this.lineChildren[0];\n      for (l = 0, len2 = ref1.length; l < len2; l++) {\n        childRef = ref1[l];\n        childView = this.view.getViewNodeFor(childRef.child);\n        if (!childView.topLineSticksToBottom) {\n          childView.invalidate = true;\n        }\n        childView.topLineSticksToBottom = true;\n      }\n      ref2 = this.lineChildren[this.lineChildren.length - 1];\n      for (m = 0, len3 = ref2.length; m < len3; m++) {\n        childRef = ref2[m];\n        childView = this.view.getViewNodeFor(childRef.child);\n        if (!childView.bottomLineSticksToTop) {\n          childView.invalidate = true;\n        }\n        childView.bottomLineSticksToTop = true;\n      }\n      return this.lineLength;\n    };\n\n    IndentViewNode.prototype.computeMinDimensions = function() {\n      var j, len1, line, ref, results, size;\n      IndentViewNode.__super__.computeMinDimensions.apply(this, arguments);\n      ref = this.minDimensions.slice(1);\n      results = [];\n      for (line = j = 0, len1 = ref.length; j < len1; line = ++j) {\n        size = ref[line];\n        if (size.width === 0) {\n          results.push(size.width = this.view.opts.emptyLineWidth);\n        }\n      }\n      return results;\n    };\n\n    IndentViewNode.prototype.drawSelf = function() {\n      return null;\n    };\n\n    IndentViewNode.prototype.computeOwnDropArea = function() {\n      var highlightAreaPoints, j, lastBounds, len1, point;\n      lastBounds = new this.view.draw.NoRectangle();\n      if (this.model.start.next.type === 'newline') {\n        this.dropPoint = this.bounds[1].upperLeftCorner();\n        lastBounds.copy(this.bounds[1]);\n      } else {\n        this.dropPoint = this.bounds[0].upperLeftCorner();\n        lastBounds.copy(this.bounds[0]);\n      }\n      lastBounds.width = Math.max(lastBounds.width, this.view.opts.indentDropAreaMinWidth);\n      this.highlightArea = new this.view.draw.Path();\n      highlightAreaPoints = [];\n      highlightAreaPoints.push(new this.view.draw.Point(lastBounds.x, lastBounds.y - this.view.opts.highlightAreaHeight / 2 + this.view.opts.bevelClip));\n      highlightAreaPoints.push(new this.view.draw.Point(lastBounds.x + this.view.opts.bevelClip, lastBounds.y - this.view.opts.highlightAreaHeight / 2));\n      this.addTabReverse(highlightAreaPoints, new this.view.draw.Point(lastBounds.x + this.view.opts.tabOffset, lastBounds.y - this.view.opts.highlightAreaHeight / 2));\n      highlightAreaPoints.push(new this.view.draw.Point(lastBounds.right() - this.view.opts.bevelClip, lastBounds.y - this.view.opts.highlightAreaHeight / 2));\n      highlightAreaPoints.push(new this.view.draw.Point(lastBounds.right(), lastBounds.y - this.view.opts.highlightAreaHeight / 2 + this.view.opts.bevelClip));\n      highlightAreaPoints.push(new this.view.draw.Point(lastBounds.right(), lastBounds.y + this.view.opts.highlightAreaHeight / 2 - this.view.opts.bevelClip));\n      highlightAreaPoints.push(new this.view.draw.Point(lastBounds.right() - this.view.opts.bevelClip, lastBounds.y + this.view.opts.highlightAreaHeight / 2));\n      this.addTab(highlightAreaPoints, new this.view.draw.Point(lastBounds.x + this.view.opts.tabOffset, lastBounds.y + this.view.opts.highlightAreaHeight / 2));\n      highlightAreaPoints.push(new this.view.draw.Point(lastBounds.x + this.view.opts.bevelClip, lastBounds.y + this.view.opts.highlightAreaHeight / 2));\n      highlightAreaPoints.push(new this.view.draw.Point(lastBounds.x, lastBounds.y + this.view.opts.highlightAreaHeight / 2 - this.view.opts.bevelClip));\n      for (j = 0, len1 = highlightAreaPoints.length; j < len1; j++) {\n        point = highlightAreaPoints[j];\n        this.highlightArea.push(point);\n      }\n      this.highlightArea.style.lineWidth = 1;\n      this.highlightArea.style.strokeColor = '#ff0';\n      return this.highlightArea.style.fillColor = '#ff0';\n    };\n\n    return IndentViewNode;\n\n  })(ContainerViewNode);\n\n  DocumentViewNode = (function(superClass) {\n    extend(DocumentViewNode, superClass);\n\n    function DocumentViewNode() {\n      DocumentViewNode.__super__.constructor.apply(this, arguments);\n    }\n\n    DocumentViewNode.prototype.computeOwnPath = function() {\n      return this.path = new this.view.draw.Path();\n    };\n\n    DocumentViewNode.prototype.computeOwnDropArea = function() {\n      var highlightAreaPoints, j, lastBounds, len1, point;\n      this.dropPoint = this.bounds[0].upperLeftCorner();\n      this.highlightArea = new this.view.draw.Path();\n      highlightAreaPoints = [];\n      lastBounds = new this.view.draw.NoRectangle();\n      lastBounds.copy(this.bounds[0]);\n      lastBounds.width = Math.max(lastBounds.width, this.view.opts.indentDropAreaMinWidth);\n      highlightAreaPoints.push(new this.view.draw.Point(lastBounds.x, lastBounds.y - this.view.opts.highlightAreaHeight / 2 + this.view.opts.bevelClip));\n      highlightAreaPoints.push(new this.view.draw.Point(lastBounds.x + this.view.opts.bevelClip, lastBounds.y - this.view.opts.highlightAreaHeight / 2));\n      this.addTabReverse(highlightAreaPoints, new this.view.draw.Point(lastBounds.x + this.view.opts.tabOffset, lastBounds.y - this.view.opts.highlightAreaHeight / 2));\n      highlightAreaPoints.push(new this.view.draw.Point(lastBounds.right() - this.view.opts.bevelClip, lastBounds.y - this.view.opts.highlightAreaHeight / 2));\n      highlightAreaPoints.push(new this.view.draw.Point(lastBounds.right(), lastBounds.y - this.view.opts.highlightAreaHeight / 2 + this.view.opts.bevelClip));\n      highlightAreaPoints.push(new this.view.draw.Point(lastBounds.right(), lastBounds.y + this.view.opts.highlightAreaHeight / 2 - this.view.opts.bevelClip));\n      highlightAreaPoints.push(new this.view.draw.Point(lastBounds.right() - this.view.opts.bevelClip, lastBounds.y + this.view.opts.highlightAreaHeight / 2));\n      this.addTab(highlightAreaPoints, new this.view.draw.Point(lastBounds.x + this.view.opts.tabOffset, lastBounds.y + this.view.opts.highlightAreaHeight / 2));\n      highlightAreaPoints.push(new this.view.draw.Point(lastBounds.x + this.view.opts.bevelClip, lastBounds.y + this.view.opts.highlightAreaHeight / 2));\n      highlightAreaPoints.push(new this.view.draw.Point(lastBounds.x, lastBounds.y + this.view.opts.highlightAreaHeight / 2 - this.view.opts.bevelClip));\n      for (j = 0, len1 = highlightAreaPoints.length; j < len1; j++) {\n        point = highlightAreaPoints[j];\n        this.highlightArea.push(point);\n      }\n      this.highlightArea.style.fillColor = '#ff0';\n      this.highlightArea.style.strokeColor = '#ff0';\n      return null;\n    };\n\n    return DocumentViewNode;\n\n  })(ContainerViewNode);\n\n  TextViewNode = (function(superClass) {\n    extend(TextViewNode, superClass);\n\n    function TextViewNode(model1, view1) {\n      this.model = model1;\n      this.view = view1;\n      TextViewNode.__super__.constructor.apply(this, arguments);\n    }\n\n    TextViewNode.prototype.computeChildren = function() {\n      this.multilineChildrenData = [NO_MULTILINE];\n      return this.lineLength = 1;\n    };\n\n    TextViewNode.prototype.computeMinDimensions = function() {\n      var height;\n      if (this.computedVersion === this.model.version) {\n        return null;\n      }\n      this.textElement = new this.view.draw.Text(new this.view.draw.Point(0, 0), this.model.value);\n      height = this.view.opts.textHeight;\n      this.minDimensions[0] = new this.view.draw.Size(this.textElement.bounds().width, height);\n      this.minDistanceToBase[0] = {\n        above: height,\n        below: 0\n      };\n      return null;\n    };\n\n    TextViewNode.prototype.computeBoundingBoxX = function(left, line) {\n      this.textElement.point.x = left;\n      return TextViewNode.__super__.computeBoundingBoxX.apply(this, arguments);\n    };\n\n    TextViewNode.prototype.computeBoundingBoxY = function(top, line) {\n      this.textElement.point.y = top;\n      return TextViewNode.__super__.computeBoundingBoxY.apply(this, arguments);\n    };\n\n    TextViewNode.prototype.drawSelf = function(ctx, style) {\n      if (style == null) {\n        style = {};\n      }\n      if (!style.noText) {\n        this.textElement.draw(ctx);\n      }\n      return null;\n    };\n\n    TextViewNode.prototype.debugDimensions = function(x, y, line, ctx) {\n      var oldPoint;\n      ctx.globalAlpha = 1;\n      oldPoint = this.textElement.point;\n      this.textElement.point = new this.view.draw.Point(x, y);\n      this.textElement.draw(ctx);\n      this.textElement.point = oldPoint;\n      return ctx.globalAlpha = 0.1;\n    };\n\n    TextViewNode.prototype.debugAllBoundingBoxes = function(ctx) {\n      ctx.globalAlpha = 1;\n      this.computeOwnPath();\n      this.textElement.draw(ctx);\n      return ctx.globalAlpha = 0.1;\n    };\n\n    return TextViewNode;\n\n  })(GenericViewNode);\n\n  return View;\n\n})();\n\ntoRGB = function(hex) {\n  var b, c, g, r;\n  if (hex.length === 4) {\n    hex = ((function() {\n      var j, len1, results;\n      results = [];\n      for (j = 0, len1 = hex.length; j < len1; j++) {\n        c = hex[j];\n        results.push(c + c);\n      }\n      return results;\n    })()).join('').slice(1);\n  }\n  r = parseInt(hex.slice(1, 3), 16);\n  g = parseInt(hex.slice(3, 5), 16);\n  b = parseInt(hex.slice(5, 7), 16);\n  return [r, g, b];\n};\n\nzeroPad = function(str, len) {\n  if (str.length < len) {\n    return ((function() {\n      var j, ref, ref1, results;\n      results = [];\n      for (j = ref = str.length, ref1 = len; ref <= ref1 ? j < ref1 : j > ref1; ref <= ref1 ? j++ : j--) {\n        results.push('0');\n      }\n      return results;\n    })()).join('') + str;\n  } else {\n    return str;\n  }\n};\n\ntwoDigitHex = function(n) {\n  return zeroPad(Math.round(n).toString(16), 2);\n};\n\ntoHex = function(rgb) {\n  var k;\n  return '#' + ((function() {\n    var j, len1, results;\n    results = [];\n    for (j = 0, len1 = rgb.length; j < len1; j++) {\n      k = rgb[j];\n      results.push(twoDigitHex(k));\n    }\n    return results;\n  })()).join('');\n};\n\navgColor = function(a, factor, b) {\n  var i, k, newRGB;\n  a = toRGB(a);\n  b = toRGB(b);\n  newRGB = (function() {\n    var j, len1, results;\n    results = [];\n    for (i = j = 0, len1 = a.length; j < len1; i = ++j) {\n      k = a[i];\n      results.push(a[i] * factor + b[i] * (1 - factor));\n    }\n    return results;\n  })();\n  return toHex(newRGB);\n};\n\n\n},{\"./draw.coffee\":27,\"./helper.coffee\":28,\"./model.coffee\":31}],35:[function(require,module,exports){\n// Acorn is a tiny, fast JavaScript parser written in JavaScript.\n//\n// Acorn was written by Marijn Haverbeke and various contributors and\n// released under an MIT license. The Unicode regexps (for identifiers\n// and whitespace) were taken from [Esprima](http://esprima.org) by\n// Ariya Hidayat.\n//\n// Git repositories for Acorn are available at\n//\n//     http://marijnhaverbeke.nl/git/acorn\n//     https://github.com/marijnh/acorn.git\n//\n// Please use the [github bug tracker][ghbt] to report issues.\n//\n// [ghbt]: https://github.com/marijnh/acorn/issues\n//\n// This file defines the main parser interface. The library also comes\n// with a [error-tolerant parser][dammit] and an\n// [abstract syntax tree walker][walk], defined in other files.\n//\n// [dammit]: acorn_loose.js\n// [walk]: util/walk.js\n\n(function(root, mod) {\n  if (typeof exports == \"object\" && typeof module == \"object\") return mod(exports); // CommonJS\n  if (typeof define == \"function\" && define.amd) return define([\"exports\"], mod); // AMD\n  mod(root.acorn || (root.acorn = {})); // Plain browser env\n})(this, function(exports) {\n  \"use strict\";\n\n  exports.version = \"0.7.1\";\n\n  // The main exported interface (under `self.acorn` when in the\n  // browser) is a `parse` function that takes a code string and\n  // returns an abstract syntax tree as specified by [Mozilla parser\n  // API][api], with the caveat that inline XML is not recognized.\n  //\n  // [api]: https://developer.mozilla.org/en-US/docs/SpiderMonkey/Parser_API\n\n  var options, input, inputLen, sourceFile;\n\n  exports.parse = function(inpt, opts) {\n    input = String(inpt); inputLen = input.length;\n    setOptions(opts);\n    initTokenState();\n    return parseTopLevel(options.program);\n  };\n\n  // A second optional argument can be given to further configure\n  // the parser process. These options are recognized:\n\n  var defaultOptions = exports.defaultOptions = {\n    // `ecmaVersion` indicates the ECMAScript version to parse. Must\n    // be either 3, or 5, or 6. This influences support for strict\n    // mode, the set of reserved words, support for getters and\n    // setters and other features.\n    ecmaVersion: 5,\n    // Turn on `strictSemicolons` to prevent the parser from doing\n    // automatic semicolon insertion.\n    strictSemicolons: false,\n    // When `allowTrailingCommas` is false, the parser will not allow\n    // trailing commas in array and object literals.\n    allowTrailingCommas: true,\n    // By default, reserved words are not enforced. Enable\n    // `forbidReserved` to enforce them. When this option has the\n    // value \"everywhere\", reserved words and keywords can also not be\n    // used as property names.\n    forbidReserved: false,\n    // When enabled, a return at the top level is not considered an\n    // error.\n    allowReturnOutsideFunction: false,\n    // When `locations` is on, `loc` properties holding objects with\n    // `start` and `end` properties in `{line, column}` form (with\n    // line being 1-based and column 0-based) will be attached to the\n    // nodes.\n    locations: false,\n    // A function can be passed as `onToken` option, which will\n    // cause Acorn to call that function with object in the same\n    // format as tokenize() returns. Note that you are not\n    // allowed to call the parser from the callbackthat will\n    // corrupt its internal state.\n    onToken: null,\n    // A function can be passed as `onComment` option, which will\n    // cause Acorn to call that function with `(block, text, start,\n    // end)` parameters whenever a comment is skipped. `block` is a\n    // boolean indicating whether this is a block (`/* */`) comment,\n    // `text` is the content of the comment, and `start` and `end` are\n    // character offsets that denote the start and end of the comment.\n    // When the `locations` option is on, two more parameters are\n    // passed, the full `{line, column}` locations of the start and\n    // end of the comments. Note that you are not allowed to call the\n    // parser from the callbackthat will corrupt its internal state.\n    onComment: null,\n    // Nodes have their start and end characters offsets recorded in\n    // `start` and `end` properties (directly on the node, rather than\n    // the `loc` object, which holds line/column data. To also add a\n    // [semi-standardized][range] `range` property holding a `[start,\n    // end]` array with the same numbers, set the `ranges` option to\n    // `true`.\n    //\n    // [range]: https://bugzilla.mozilla.org/show_bug.cgi?id=745678\n    ranges: false,\n    // It is possible to parse multiple files into a single AST by\n    // passing the tree produced by parsing the first file as\n    // `program` option in subsequent parses. This will add the\n    // toplevel forms of the parsed file to the `Program` (top) node\n    // of an existing parse tree.\n    program: null,\n    // When `locations` is on, you can pass this to record the source\n    // file in every node's `loc` object.\n    sourceFile: null,\n    // This value, if given, is stored in every node, whether\n    // `locations` is on or off.\n    directSourceFile: null,\n    // By default, source location line numbers are one-based.\n    // This can be configured with this option.\n    line: 1\n  };\n\n  function setOptions(opts) {\n    options = opts || {};\n    for (var opt in defaultOptions) if (!has(options, opt))\n      options[opt] = defaultOptions[opt];\n    sourceFile = options.sourceFile || null;\n\n    isKeyword = options.ecmaVersion >= 6 ? isEcma6Keyword : isEcma5AndLessKeyword;\n  }\n\n  // The `getLineInfo` function is mostly useful when the\n  // `locations` option is off (for performance reasons) and you\n  // want to find the line/column position for a given character\n  // offset. `input` should be the code string that the offset refers\n  // into.\n\n  var getLineInfo = exports.getLineInfo = function(input, offset) {\n    for (var line = options.line, cur = 0;;) {\n      lineBreak.lastIndex = cur;\n      var match = lineBreak.exec(input);\n      if (match && match.index < offset) {\n        ++line;\n        cur = match.index + match[0].length;\n      } else break;\n    }\n    return {line: line, column: offset - cur};\n  };\n\n  var getCurrentToken = function () {\n    var token = {\n      type: tokType,\n      value: tokVal,\n      start: tokStart,\n      end: tokEnd\n    };\n    if (options.locations) {\n      token.startLoc = tokStartLoc;\n      token.endLoc = tokEndLoc;\n    }\n    return token;\n  };\n\n  // Acorn is organized as a tokenizer and a recursive-descent parser.\n  // The `tokenize` export provides an interface to the tokenizer.\n  // Because the tokenizer is optimized for being efficiently used by\n  // the Acorn parser itself, this interface is somewhat crude and not\n  // very modular. Performing another parse or call to `tokenize` will\n  // reset the internal state, and invalidate existing tokenizers.\n\n  exports.tokenize = function(inpt, opts) {\n    input = String(inpt); inputLen = input.length;\n    setOptions(opts);\n    initTokenState();\n\n    function getToken(forceRegexp) {\n      lastEnd = tokEnd;\n      readToken(forceRegexp);\n      return getCurrentToken();\n    }\n    getToken.jumpTo = function(pos, reAllowed) {\n      tokPos = pos;\n      if (options.locations) {\n        tokCurLine = options.line;\n        tokLineStart = lineBreak.lastIndex = 0;\n        var match;\n        while ((match = lineBreak.exec(input)) && match.index < pos) {\n          ++tokCurLine;\n          tokLineStart = match.index + match[0].length;\n        }\n      }\n      tokRegexpAllowed = reAllowed;\n      skipSpace();\n    };\n    return getToken;\n  };\n\n  // State is kept in (closure-)global variables. We already saw the\n  // `options`, `input`, and `inputLen` variables above.\n\n  // The current position of the tokenizer in the input.\n\n  var tokPos;\n\n  // The start and end offsets of the current token.\n\n  var tokStart, tokEnd;\n\n  // When `options.locations` is true, these hold objects\n  // containing the tokens start and end line/column pairs.\n\n  var tokStartLoc, tokEndLoc;\n\n  // The type and value of the current token. Token types are objects,\n  // named by variables against which they can be compared, and\n  // holding properties that describe them (indicating, for example,\n  // the precedence of an infix operator, and the original name of a\n  // keyword token). The kind of value that's held in `tokVal` depends\n  // on the type of the token. For literals, it is the literal value,\n  // for operators, the operator name, and so on.\n\n  var tokType, tokVal;\n\n  // Internal state for the tokenizer. To distinguish between division\n  // operators and regular expressions, it remembers whether the last\n  // token was one that is allowed to be followed by an expression.\n  // (If it is, a slash is probably a regexp, if it isn't it's a\n  // division operator. See the `parseStatement` function for a\n  // caveat.)\n\n  var tokRegexpAllowed;\n\n  // When `options.locations` is true, these are used to keep\n  // track of the current line, and know when a new line has been\n  // entered.\n\n  var tokCurLine, tokLineStart;\n\n  // These store the position of the previous token, which is useful\n  // when finishing a node and assigning its `end` position.\n\n  var lastStart, lastEnd, lastEndLoc;\n\n  // This is the parser's state. `inFunction` is used to reject\n  // `return` statements outside of functions, `inGenerator` to\n  // reject `yield`s outside of generators, `labels` to verify\n  // that `break` and `continue` have somewhere to jump to, and\n  // `strict` indicates whether strict mode is on.\n\n  var inFunction, inGenerator, labels, strict;\n\n  // This counter is used for checking that arrow expressions did\n  // not contain nested parentheses in argument list.\n\n  var metParenL;\n\n  // This is used by parser for detecting if it's inside ES6\n  // Template String. If it is, it should treat '$' as prefix before\n  // '{expression}' and everything else as string literals.\n\n  var inTemplate;\n\n  // This function is used to raise exceptions on parse errors. It\n  // takes an offset integer (into the current `input`) to indicate\n  // the location of the error, attaches the position to the end\n  // of the error message, and then raises a `SyntaxError` with that\n  // message.\n\n  function raise(pos, message) {\n    var loc = getLineInfo(input, pos);\n    message += \" (\" + loc.line + \":\" + loc.column + \")\";\n    var err = new SyntaxError(message);\n    err.pos = pos; err.loc = loc; err.raisedAt = tokPos;\n    throw err;\n  }\n\n  // Reused empty array added for node fields that are always empty.\n\n  var empty = [];\n\n  // ## Token types\n\n  // The assignment of fine-grained, information-carrying type objects\n  // allows the tokenizer to store the information it has about a\n  // token in a way that is very cheap for the parser to look up.\n\n  // All token type variables start with an underscore, to make them\n  // easy to recognize.\n\n  // These are the general types. The `type` property is only used to\n  // make them recognizeable when debugging.\n\n  var _num = {type: \"num\"}, _regexp = {type: \"regexp\"}, _string = {type: \"string\"};\n  var _name = {type: \"name\"}, _eof = {type: \"eof\"};\n\n  // Keyword tokens. The `keyword` property (also used in keyword-like\n  // operators) indicates that the token originated from an\n  // identifier-like word, which is used when parsing property names.\n  //\n  // The `beforeExpr` property is used to disambiguate between regular\n  // expressions and divisions. It is set on all token types that can\n  // be followed by an expression (thus, a slash after them would be a\n  // regular expression).\n  //\n  // `isLoop` marks a keyword as starting a loop, which is important\n  // to know when parsing a label, in order to allow or disallow\n  // continue jumps to that label.\n\n  var _break = {keyword: \"break\"}, _case = {keyword: \"case\", beforeExpr: true}, _catch = {keyword: \"catch\"};\n  var _continue = {keyword: \"continue\"}, _debugger = {keyword: \"debugger\"}, _default = {keyword: \"default\"};\n  var _do = {keyword: \"do\", isLoop: true}, _else = {keyword: \"else\", beforeExpr: true};\n  var _finally = {keyword: \"finally\"}, _for = {keyword: \"for\", isLoop: true}, _function = {keyword: \"function\"};\n  var _if = {keyword: \"if\"}, _return = {keyword: \"return\", beforeExpr: true}, _switch = {keyword: \"switch\"};\n  var _throw = {keyword: \"throw\", beforeExpr: true}, _try = {keyword: \"try\"}, _var = {keyword: \"var\"};\n  var _let = {keyword: \"let\"}, _const = {keyword: \"const\"};\n  var _while = {keyword: \"while\", isLoop: true}, _with = {keyword: \"with\"}, _new = {keyword: \"new\", beforeExpr: true};\n  var _this = {keyword: \"this\"};\n  var _class = {keyword: \"class\"}, _extends = {keyword: \"extends\", beforeExpr: true};\n  var _export = {keyword: \"export\"}, _import = {keyword: \"import\"};\n  var _yield = {keyword: \"yield\", beforeExpr: true};\n\n  // The keywords that denote values.\n\n  var _null = {keyword: \"null\", atomValue: null}, _true = {keyword: \"true\", atomValue: true};\n  var _false = {keyword: \"false\", atomValue: false};\n\n  // Some keywords are treated as regular operators. `in` sometimes\n  // (when parsing `for`) needs to be tested against specifically, so\n  // we assign a variable name to it for quick comparing.\n\n  var _in = {keyword: \"in\", binop: 7, beforeExpr: true};\n\n  // Map keyword names to token types.\n\n  var keywordTypes = {\"break\": _break, \"case\": _case, \"catch\": _catch,\n                      \"continue\": _continue, \"debugger\": _debugger, \"default\": _default,\n                      \"do\": _do, \"else\": _else, \"finally\": _finally, \"for\": _for,\n                      \"function\": _function, \"if\": _if, \"return\": _return, \"switch\": _switch,\n                      \"throw\": _throw, \"try\": _try, \"var\": _var, \"let\": _let, \"const\": _const,\n                      \"while\": _while, \"with\": _with,\n                      \"null\": _null, \"true\": _true, \"false\": _false, \"new\": _new, \"in\": _in,\n                      \"instanceof\": {keyword: \"instanceof\", binop: 7, beforeExpr: true}, \"this\": _this,\n                      \"typeof\": {keyword: \"typeof\", prefix: true, beforeExpr: true},\n                      \"void\": {keyword: \"void\", prefix: true, beforeExpr: true},\n                      \"delete\": {keyword: \"delete\", prefix: true, beforeExpr: true},\n                      \"class\": _class, \"extends\": _extends,\n                      \"export\": _export, \"import\": _import, \"yield\": _yield};\n\n  // Punctuation token types. Again, the `type` property is purely for debugging.\n\n  var _bracketL = {type: \"[\", beforeExpr: true}, _bracketR = {type: \"]\"}, _braceL = {type: \"{\", beforeExpr: true};\n  var _braceR = {type: \"}\"}, _parenL = {type: \"(\", beforeExpr: true}, _parenR = {type: \")\"};\n  var _comma = {type: \",\", beforeExpr: true}, _semi = {type: \";\", beforeExpr: true};\n  var _colon = {type: \":\", beforeExpr: true}, _dot = {type: \".\"}, _ellipsis = {type: \"...\"}, _question = {type: \"?\", beforeExpr: true};\n  var _arrow = {type: \"=>\", beforeExpr: true}, _bquote = {type: \"`\"}, _dollarBraceL = {type: \"${\", beforeExpr: true};\n\n  // Operators. These carry several kinds of properties to help the\n  // parser use them properly (the presence of these properties is\n  // what categorizes them as operators).\n  //\n  // `binop`, when present, specifies that this operator is a binary\n  // operator, and will refer to its precedence.\n  //\n  // `prefix` and `postfix` mark the operator as a prefix or postfix\n  // unary operator. `isUpdate` specifies that the node produced by\n  // the operator should be of type UpdateExpression rather than\n  // simply UnaryExpression (`++` and `--`).\n  //\n  // `isAssign` marks all of `=`, `+=`, `-=` etcetera, which act as\n  // binary operators with a very low precedence, that should result\n  // in AssignmentExpression nodes.\n\n  var _slash = {binop: 10, beforeExpr: true}, _eq = {isAssign: true, beforeExpr: true};\n  var _assign = {isAssign: true, beforeExpr: true};\n  var _incDec = {postfix: true, prefix: true, isUpdate: true}, _prefix = {prefix: true, beforeExpr: true};\n  var _logicalOR = {binop: 1, beforeExpr: true};\n  var _logicalAND = {binop: 2, beforeExpr: true};\n  var _bitwiseOR = {binop: 3, beforeExpr: true};\n  var _bitwiseXOR = {binop: 4, beforeExpr: true};\n  var _bitwiseAND = {binop: 5, beforeExpr: true};\n  var _equality = {binop: 6, beforeExpr: true};\n  var _relational = {binop: 7, beforeExpr: true};\n  var _bitShift = {binop: 8, beforeExpr: true};\n  var _plusMin = {binop: 9, prefix: true, beforeExpr: true};\n  var _modulo = {binop: 10, beforeExpr: true};\n\n  // '*' may be multiply or have special meaning in ES6\n  var _star = {binop: 10, beforeExpr: true};\n\n  // Provide access to the token types for external users of the\n  // tokenizer.\n\n  exports.tokTypes = {bracketL: _bracketL, bracketR: _bracketR, braceL: _braceL, braceR: _braceR,\n                      parenL: _parenL, parenR: _parenR, comma: _comma, semi: _semi, colon: _colon,\n                      dot: _dot, ellipsis: _ellipsis, question: _question, slash: _slash, eq: _eq,\n                      name: _name, eof: _eof, num: _num, regexp: _regexp, string: _string,\n                      arrow: _arrow, bquote: _bquote, dollarBraceL: _dollarBraceL};\n  for (var kw in keywordTypes) exports.tokTypes[\"_\" + kw] = keywordTypes[kw];\n\n  // This is a trick taken from Esprima. It turns out that, on\n  // non-Chrome browsers, to check whether a string is in a set, a\n  // predicate containing a big ugly `switch` statement is faster than\n  // a regular expression, and on Chrome the two are about on par.\n  // This function uses `eval` (non-lexical) to produce such a\n  // predicate from a space-separated string of words.\n  //\n  // It starts by sorting the words by length.\n\n  function makePredicate(words) {\n    words = words.split(\" \");\n    var f = \"\", cats = [];\n    out: for (var i = 0; i < words.length; ++i) {\n      for (var j = 0; j < cats.length; ++j)\n        if (cats[j][0].length == words[i].length) {\n          cats[j].push(words[i]);\n          continue out;\n        }\n      cats.push([words[i]]);\n    }\n    function compareTo(arr) {\n      if (arr.length == 1) return f += \"return str === \" + JSON.stringify(arr[0]) + \";\";\n      f += \"switch(str){\";\n      for (var i = 0; i < arr.length; ++i) f += \"case \" + JSON.stringify(arr[i]) + \":\";\n      f += \"return true}return false;\";\n    }\n\n    // When there are more than three length categories, an outer\n    // switch first dispatches on the lengths, to save on comparisons.\n\n    if (cats.length > 3) {\n      cats.sort(function(a, b) {return b.length - a.length;});\n      f += \"switch(str.length){\";\n      for (var i = 0; i < cats.length; ++i) {\n        var cat = cats[i];\n        f += \"case \" + cat[0].length + \":\";\n        compareTo(cat);\n      }\n      f += \"}\";\n\n    // Otherwise, simply generate a flat `switch` statement.\n\n    } else {\n      compareTo(words);\n    }\n    return new Function(\"str\", f);\n  }\n\n  // The ECMAScript 3 reserved word list.\n\n  var isReservedWord3 = makePredicate(\"abstract boolean byte char class double enum export extends final float goto implements import int interface long native package private protected public short static super synchronized throws transient volatile\");\n\n  // ECMAScript 5 reserved words.\n\n  var isReservedWord5 = makePredicate(\"class enum extends super const export import\");\n\n  // The additional reserved words in strict mode.\n\n  var isStrictReservedWord = makePredicate(\"implements interface let package private protected public static yield\");\n\n  // The forbidden variable names in strict mode.\n\n  var isStrictBadIdWord = makePredicate(\"eval arguments\");\n\n  // And the keywords.\n\n  var ecma5AndLessKeywords = \"break case catch continue debugger default do else finally for function if return switch throw try var while with null true false instanceof typeof void delete new in this\";\n\n  var isEcma5AndLessKeyword = makePredicate(ecma5AndLessKeywords);\n\n  var isEcma6Keyword = makePredicate(ecma5AndLessKeywords + \" let const class extends export import yield\");\n\n  var isKeyword = isEcma5AndLessKeyword;\n\n  // ## Character categories\n\n  // Big ugly regular expressions that match characters in the\n  // whitespace, identifier, and identifier-start categories. These\n  // are only applied when a character is found to actually have a\n  // code point above 128.\n  // Generated by `tools/generate-identifier-regex.js`.\n\n  var nonASCIIwhitespace = /[\\u1680\\u180e\\u2000-\\u200a\\u202f\\u205f\\u3000\\ufeff]/;\n  var nonASCIIidentifierStartChars = \"\\xAA\\xB5\\xBA\\xC0-\\xD6\\xD8-\\xF6\\xF8-\\u02C1\\u02C6-\\u02D1\\u02E0-\\u02E4\\u02EC\\u02EE\\u0370-\\u0374\\u0376\\u0377\\u037A-\\u037D\\u037F\\u0386\\u0388-\\u038A\\u038C\\u038E-\\u03A1\\u03A3-\\u03F5\\u03F7-\\u0481\\u048A-\\u052F\\u0531-\\u0556\\u0559\\u0561-\\u0587\\u05D0-\\u05EA\\u05F0-\\u05F2\\u0620-\\u064A\\u066E\\u066F\\u0671-\\u06D3\\u06D5\\u06E5\\u06E6\\u06EE\\u06EF\\u06FA-\\u06FC\\u06FF\\u0710\\u0712-\\u072F\\u074D-\\u07A5\\u07B1\\u07CA-\\u07EA\\u07F4\\u07F5\\u07FA\\u0800-\\u0815\\u081A\\u0824\\u0828\\u0840-\\u0858\\u08A0-\\u08B2\\u0904-\\u0939\\u093D\\u0950\\u0958-\\u0961\\u0971-\\u0980\\u0985-\\u098C\\u098F\\u0990\\u0993-\\u09A8\\u09AA-\\u09B0\\u09B2\\u09B6-\\u09B9\\u09BD\\u09CE\\u09DC\\u09DD\\u09DF-\\u09E1\\u09F0\\u09F1\\u0A05-\\u0A0A\\u0A0F\\u0A10\\u0A13-\\u0A28\\u0A2A-\\u0A30\\u0A32\\u0A33\\u0A35\\u0A36\\u0A38\\u0A39\\u0A59-\\u0A5C\\u0A5E\\u0A72-\\u0A74\\u0A85-\\u0A8D\\u0A8F-\\u0A91\\u0A93-\\u0AA8\\u0AAA-\\u0AB0\\u0AB2\\u0AB3\\u0AB5-\\u0AB9\\u0ABD\\u0AD0\\u0AE0\\u0AE1\\u0B05-\\u0B0C\\u0B0F\\u0B10\\u0B13-\\u0B28\\u0B2A-\\u0B30\\u0B32\\u0B33\\u0B35-\\u0B39\\u0B3D\\u0B5C\\u0B5D\\u0B5F-\\u0B61\\u0B71\\u0B83\\u0B85-\\u0B8A\\u0B8E-\\u0B90\\u0B92-\\u0B95\\u0B99\\u0B9A\\u0B9C\\u0B9E\\u0B9F\\u0BA3\\u0BA4\\u0BA8-\\u0BAA\\u0BAE-\\u0BB9\\u0BD0\\u0C05-\\u0C0C\\u0C0E-\\u0C10\\u0C12-\\u0C28\\u0C2A-\\u0C39\\u0C3D\\u0C58\\u0C59\\u0C60\\u0C61\\u0C85-\\u0C8C\\u0C8E-\\u0C90\\u0C92-\\u0CA8\\u0CAA-\\u0CB3\\u0CB5-\\u0CB9\\u0CBD\\u0CDE\\u0CE0\\u0CE1\\u0CF1\\u0CF2\\u0D05-\\u0D0C\\u0D0E-\\u0D10\\u0D12-\\u0D3A\\u0D3D\\u0D4E\\u0D60\\u0D61\\u0D7A-\\u0D7F\\u0D85-\\u0D96\\u0D9A-\\u0DB1\\u0DB3-\\u0DBB\\u0DBD\\u0DC0-\\u0DC6\\u0E01-\\u0E30\\u0E32\\u0E33\\u0E40-\\u0E46\\u0E81\\u0E82\\u0E84\\u0E87\\u0E88\\u0E8A\\u0E8D\\u0E94-\\u0E97\\u0E99-\\u0E9F\\u0EA1-\\u0EA3\\u0EA5\\u0EA7\\u0EAA\\u0EAB\\u0EAD-\\u0EB0\\u0EB2\\u0EB3\\u0EBD\\u0EC0-\\u0EC4\\u0EC6\\u0EDC-\\u0EDF\\u0F00\\u0F40-\\u0F47\\u0F49-\\u0F6C\\u0F88-\\u0F8C\\u1000-\\u102A\\u103F\\u1050-\\u1055\\u105A-\\u105D\\u1061\\u1065\\u1066\\u106E-\\u1070\\u1075-\\u1081\\u108E\\u10A0-\\u10C5\\u10C7\\u10CD\\u10D0-\\u10FA\\u10FC-\\u1248\\u124A-\\u124D\\u1250-\\u1256\\u1258\\u125A-\\u125D\\u1260-\\u1288\\u128A-\\u128D\\u1290-\\u12B0\\u12B2-\\u12B5\\u12B8-\\u12BE\\u12C0\\u12C2-\\u12C5\\u12C8-\\u12D6\\u12D8-\\u1310\\u1312-\\u1315\\u1318-\\u135A\\u1380-\\u138F\\u13A0-\\u13F4\\u1401-\\u166C\\u166F-\\u167F\\u1681-\\u169A\\u16A0-\\u16EA\\u16EE-\\u16F8\\u1700-\\u170C\\u170E-\\u1711\\u1720-\\u1731\\u1740-\\u1751\\u1760-\\u176C\\u176E-\\u1770\\u1780-\\u17B3\\u17D7\\u17DC\\u1820-\\u1877\\u1880-\\u18A8\\u18AA\\u18B0-\\u18F5\\u1900-\\u191E\\u1950-\\u196D\\u1970-\\u1974\\u1980-\\u19AB\\u19C1-\\u19C7\\u1A00-\\u1A16\\u1A20-\\u1A54\\u1AA7\\u1B05-\\u1B33\\u1B45-\\u1B4B\\u1B83-\\u1BA0\\u1BAE\\u1BAF\\u1BBA-\\u1BE5\\u1C00-\\u1C23\\u1C4D-\\u1C4F\\u1C5A-\\u1C7D\\u1CE9-\\u1CEC\\u1CEE-\\u1CF1\\u1CF5\\u1CF6\\u1D00-\\u1DBF\\u1E00-\\u1F15\\u1F18-\\u1F1D\\u1F20-\\u1F45\\u1F48-\\u1F4D\\u1F50-\\u1F57\\u1F59\\u1F5B\\u1F5D\\u1F5F-\\u1F7D\\u1F80-\\u1FB4\\u1FB6-\\u1FBC\\u1FBE\\u1FC2-\\u1FC4\\u1FC6-\\u1FCC\\u1FD0-\\u1FD3\\u1FD6-\\u1FDB\\u1FE0-\\u1FEC\\u1FF2-\\u1FF4\\u1FF6-\\u1FFC\\u2071\\u207F\\u2090-\\u209C\\u2102\\u2107\\u210A-\\u2113\\u2115\\u2119-\\u211D\\u2124\\u2126\\u2128\\u212A-\\u212D\\u212F-\\u2139\\u213C-\\u213F\\u2145-\\u2149\\u214E\\u2160-\\u2188\\u2C00-\\u2C2E\\u2C30-\\u2C5E\\u2C60-\\u2CE4\\u2CEB-\\u2CEE\\u2CF2\\u2CF3\\u2D00-\\u2D25\\u2D27\\u2D2D\\u2D30-\\u2D67\\u2D6F\\u2D80-\\u2D96\\u2DA0-\\u2DA6\\u2DA8-\\u2DAE\\u2DB0-\\u2DB6\\u2DB8-\\u2DBE\\u2DC0-\\u2DC6\\u2DC8-\\u2DCE\\u2DD0-\\u2DD6\\u2DD8-\\u2DDE\\u2E2F\\u3005-\\u3007\\u3021-\\u3029\\u3031-\\u3035\\u3038-\\u303C\\u3041-\\u3096\\u309D-\\u309F\\u30A1-\\u30FA\\u30FC-\\u30FF\\u3105-\\u312D\\u3131-\\u318E\\u31A0-\\u31BA\\u31F0-\\u31FF\\u3400-\\u4DB5\\u4E00-\\u9FCC\\uA000-\\uA48C\\uA4D0-\\uA4FD\\uA500-\\uA60C\\uA610-\\uA61F\\uA62A\\uA62B\\uA640-\\uA66E\\uA67F-\\uA69D\\uA6A0-\\uA6EF\\uA717-\\uA71F\\uA722-\\uA788\\uA78B-\\uA78E\\uA790-\\uA7AD\\uA7B0\\uA7B1\\uA7F7-\\uA801\\uA803-\\uA805\\uA807-\\uA80A\\uA80C-\\uA822\\uA840-\\uA873\\uA882-\\uA8B3\\uA8F2-\\uA8F7\\uA8FB\\uA90A-\\uA925\\uA930-\\uA946\\uA960-\\uA97C\\uA984-\\uA9B2\\uA9CF\\uA9E0-\\uA9E4\\uA9E6-\\uA9EF\\uA9FA-\\uA9FE\\uAA00-\\uAA28\\uAA40-\\uAA42\\uAA44-\\uAA4B\\uAA60-\\uAA76\\uAA7A\\uAA7E-\\uAAAF\\uAAB1\\uAAB5\\uAAB6\\uAAB9-\\uAABD\\uAAC0\\uAAC2\\uAADB-\\uAADD\\uAAE0-\\uAAEA\\uAAF2-\\uAAF4\\uAB01-\\uAB06\\uAB09-\\uAB0E\\uAB11-\\uAB16\\uAB20-\\uAB26\\uAB28-\\uAB2E\\uAB30-\\uAB5A\\uAB5C-\\uAB5F\\uAB64\\uAB65\\uABC0-\\uABE2\\uAC00-\\uD7A3\\uD7B0-\\uD7C6\\uD7CB-\\uD7FB\\uF900-\\uFA6D\\uFA70-\\uFAD9\\uFB00-\\uFB06\\uFB13-\\uFB17\\uFB1D\\uFB1F-\\uFB28\\uFB2A-\\uFB36\\uFB38-\\uFB3C\\uFB3E\\uFB40\\uFB41\\uFB43\\uFB44\\uFB46-\\uFBB1\\uFBD3-\\uFD3D\\uFD50-\\uFD8F\\uFD92-\\uFDC7\\uFDF0-\\uFDFB\\uFE70-\\uFE74\\uFE76-\\uFEFC\\uFF21-\\uFF3A\\uFF41-\\uFF5A\\uFF66-\\uFFBE\\uFFC2-\\uFFC7\\uFFCA-\\uFFCF\\uFFD2-\\uFFD7\\uFFDA-\\uFFDC\";\n  var nonASCIIidentifierChars = \"\\u0300-\\u036F\\u0483-\\u0487\\u0591-\\u05BD\\u05BF\\u05C1\\u05C2\\u05C4\\u05C5\\u05C7\\u0610-\\u061A\\u064B-\\u0669\\u0670\\u06D6-\\u06DC\\u06DF-\\u06E4\\u06E7\\u06E8\\u06EA-\\u06ED\\u06F0-\\u06F9\\u0711\\u0730-\\u074A\\u07A6-\\u07B0\\u07C0-\\u07C9\\u07EB-\\u07F3\\u0816-\\u0819\\u081B-\\u0823\\u0825-\\u0827\\u0829-\\u082D\\u0859-\\u085B\\u08E4-\\u0903\\u093A-\\u093C\\u093E-\\u094F\\u0951-\\u0957\\u0962\\u0963\\u0966-\\u096F\\u0981-\\u0983\\u09BC\\u09BE-\\u09C4\\u09C7\\u09C8\\u09CB-\\u09CD\\u09D7\\u09E2\\u09E3\\u09E6-\\u09EF\\u0A01-\\u0A03\\u0A3C\\u0A3E-\\u0A42\\u0A47\\u0A48\\u0A4B-\\u0A4D\\u0A51\\u0A66-\\u0A71\\u0A75\\u0A81-\\u0A83\\u0ABC\\u0ABE-\\u0AC5\\u0AC7-\\u0AC9\\u0ACB-\\u0ACD\\u0AE2\\u0AE3\\u0AE6-\\u0AEF\\u0B01-\\u0B03\\u0B3C\\u0B3E-\\u0B44\\u0B47\\u0B48\\u0B4B-\\u0B4D\\u0B56\\u0B57\\u0B62\\u0B63\\u0B66-\\u0B6F\\u0B82\\u0BBE-\\u0BC2\\u0BC6-\\u0BC8\\u0BCA-\\u0BCD\\u0BD7\\u0BE6-\\u0BEF\\u0C00-\\u0C03\\u0C3E-\\u0C44\\u0C46-\\u0C48\\u0C4A-\\u0C4D\\u0C55\\u0C56\\u0C62\\u0C63\\u0C66-\\u0C6F\\u0C81-\\u0C83\\u0CBC\\u0CBE-\\u0CC4\\u0CC6-\\u0CC8\\u0CCA-\\u0CCD\\u0CD5\\u0CD6\\u0CE2\\u0CE3\\u0CE6-\\u0CEF\\u0D01-\\u0D03\\u0D3E-\\u0D44\\u0D46-\\u0D48\\u0D4A-\\u0D4D\\u0D57\\u0D62\\u0D63\\u0D66-\\u0D6F\\u0D82\\u0D83\\u0DCA\\u0DCF-\\u0DD4\\u0DD6\\u0DD8-\\u0DDF\\u0DE6-\\u0DEF\\u0DF2\\u0DF3\\u0E31\\u0E34-\\u0E3A\\u0E47-\\u0E4E\\u0E50-\\u0E59\\u0EB1\\u0EB4-\\u0EB9\\u0EBB\\u0EBC\\u0EC8-\\u0ECD\\u0ED0-\\u0ED9\\u0F18\\u0F19\\u0F20-\\u0F29\\u0F35\\u0F37\\u0F39\\u0F3E\\u0F3F\\u0F71-\\u0F84\\u0F86\\u0F87\\u0F8D-\\u0F97\\u0F99-\\u0FBC\\u0FC6\\u102B-\\u103E\\u1040-\\u1049\\u1056-\\u1059\\u105E-\\u1060\\u1062-\\u1064\\u1067-\\u106D\\u1071-\\u1074\\u1082-\\u108D\\u108F-\\u109D\\u135D-\\u135F\\u1712-\\u1714\\u1732-\\u1734\\u1752\\u1753\\u1772\\u1773\\u17B4-\\u17D3\\u17DD\\u17E0-\\u17E9\\u180B-\\u180D\\u1810-\\u1819\\u18A9\\u1920-\\u192B\\u1930-\\u193B\\u1946-\\u194F\\u19B0-\\u19C0\\u19C8\\u19C9\\u19D0-\\u19D9\\u1A17-\\u1A1B\\u1A55-\\u1A5E\\u1A60-\\u1A7C\\u1A7F-\\u1A89\\u1A90-\\u1A99\\u1AB0-\\u1ABD\\u1B00-\\u1B04\\u1B34-\\u1B44\\u1B50-\\u1B59\\u1B6B-\\u1B73\\u1B80-\\u1B82\\u1BA1-\\u1BAD\\u1BB0-\\u1BB9\\u1BE6-\\u1BF3\\u1C24-\\u1C37\\u1C40-\\u1C49\\u1C50-\\u1C59\\u1CD0-\\u1CD2\\u1CD4-\\u1CE8\\u1CED\\u1CF2-\\u1CF4\\u1CF8\\u1CF9\\u1DC0-\\u1DF5\\u1DFC-\\u1DFF\\u200C\\u200D\\u203F\\u2040\\u2054\\u20D0-\\u20DC\\u20E1\\u20E5-\\u20F0\\u2CEF-\\u2CF1\\u2D7F\\u2DE0-\\u2DFF\\u302A-\\u302F\\u3099\\u309A\\uA620-\\uA629\\uA66F\\uA674-\\uA67D\\uA69F\\uA6F0\\uA6F1\\uA802\\uA806\\uA80B\\uA823-\\uA827\\uA880\\uA881\\uA8B4-\\uA8C4\\uA8D0-\\uA8D9\\uA8E0-\\uA8F1\\uA900-\\uA909\\uA926-\\uA92D\\uA947-\\uA953\\uA980-\\uA983\\uA9B3-\\uA9C0\\uA9D0-\\uA9D9\\uA9E5\\uA9F0-\\uA9F9\\uAA29-\\uAA36\\uAA43\\uAA4C\\uAA4D\\uAA50-\\uAA59\\uAA7B-\\uAA7D\\uAAB0\\uAAB2-\\uAAB4\\uAAB7\\uAAB8\\uAABE\\uAABF\\uAAC1\\uAAEB-\\uAAEF\\uAAF5\\uAAF6\\uABE3-\\uABEA\\uABEC\\uABED\\uABF0-\\uABF9\\uFB1E\\uFE00-\\uFE0F\\uFE20-\\uFE2D\\uFE33\\uFE34\\uFE4D-\\uFE4F\\uFF10-\\uFF19\\uFF3F\";\n  var nonASCIIidentifierStart = new RegExp(\"[\" + nonASCIIidentifierStartChars + \"]\");\n  var nonASCIIidentifier = new RegExp(\"[\" + nonASCIIidentifierStartChars + nonASCIIidentifierChars + \"]\");\n\n  // Whether a single character denotes a newline.\n\n  var newline = /[\\n\\r\\u2028\\u2029]/;\n\n  // Matches a whole line break (where CRLF is considered a single\n  // line break). Used to count lines.\n\n  var lineBreak = /\\r\\n|[\\n\\r\\u2028\\u2029]/g;\n\n  // Test whether a given character code starts an identifier.\n\n  var isIdentifierStart = exports.isIdentifierStart = function(code) {\n    if (code < 65) return code === 36;\n    if (code < 91) return true;\n    if (code < 97) return code === 95;\n    if (code < 123)return true;\n    return code >= 0xaa && nonASCIIidentifierStart.test(String.fromCharCode(code));\n  };\n\n  // Test whether a given character is part of an identifier.\n\n  var isIdentifierChar = exports.isIdentifierChar = function(code) {\n    if (code < 48) return code === 36;\n    if (code < 58) return true;\n    if (code < 65) return false;\n    if (code < 91) return true;\n    if (code < 97) return code === 95;\n    if (code < 123)return true;\n    return code >= 0xaa && nonASCIIidentifier.test(String.fromCharCode(code));\n  };\n\n  // ## Tokenizer\n\n  // These are used when `options.locations` is on, for the\n  // `tokStartLoc` and `tokEndLoc` properties.\n\n  function Position() {\n    this.line = tokCurLine;\n    this.column = tokPos - tokLineStart;\n  }\n\n  // Reset the token state. Used at the start of a parse.\n\n  function initTokenState() {\n    tokCurLine = options.line;\n    tokPos = tokLineStart = 0;\n    tokRegexpAllowed = true;\n    metParenL = 0;\n    inTemplate = false;\n    skipSpace();\n  }\n\n  // Called at the end of every token. Sets `tokEnd`, `tokVal`, and\n  // `tokRegexpAllowed`, and skips the space after the token, so that\n  // the next one's `tokStart` will point at the right position.\n\n  function finishToken(type, val, shouldSkipSpace) {\n    tokEnd = tokPos;\n    if (options.locations) tokEndLoc = new Position;\n    tokType = type;\n    if (shouldSkipSpace !== false) skipSpace();\n    tokVal = val;\n    tokRegexpAllowed = type.beforeExpr;\n    if (options.onToken) {\n      options.onToken(getCurrentToken());\n    }\n  }\n\n  function skipBlockComment() {\n    var startLoc = options.onComment && options.locations && new Position;\n    var start = tokPos, end = input.indexOf(\"*/\", tokPos += 2);\n    if (end === -1) raise(tokPos - 2, \"Unterminated comment\");\n    tokPos = end + 2;\n    if (options.locations) {\n      lineBreak.lastIndex = start;\n      var match;\n      while ((match = lineBreak.exec(input)) && match.index < tokPos) {\n        ++tokCurLine;\n        tokLineStart = match.index + match[0].length;\n      }\n    }\n    if (options.onComment)\n      options.onComment(true, input.slice(start + 2, end), start, tokPos,\n                        startLoc, options.locations && new Position);\n  }\n\n  function skipLineComment() {\n    var start = tokPos;\n    var startLoc = options.onComment && options.locations && new Position;\n    var ch = input.charCodeAt(tokPos+=2);\n    while (tokPos < inputLen && ch !== 10 && ch !== 13 && ch !== 8232 && ch !== 8233) {\n      ++tokPos;\n      ch = input.charCodeAt(tokPos);\n    }\n    if (options.onComment)\n      options.onComment(false, input.slice(start + 2, tokPos), start, tokPos,\n                        startLoc, options.locations && new Position);\n  }\n\n  // Called at the start of the parse and after every token. Skips\n  // whitespace and comments, and.\n\n  function skipSpace() {\n    while (tokPos < inputLen) {\n      var ch = input.charCodeAt(tokPos);\n      if (ch === 32) { // ' '\n        ++tokPos;\n      } else if (ch === 13) {\n        ++tokPos;\n        var next = input.charCodeAt(tokPos);\n        if (next === 10) {\n          ++tokPos;\n        }\n        if (options.locations) {\n          ++tokCurLine;\n          tokLineStart = tokPos;\n        }\n      } else if (ch === 10 || ch === 8232 || ch === 8233) {\n        ++tokPos;\n        if (options.locations) {\n          ++tokCurLine;\n          tokLineStart = tokPos;\n        }\n      } else if (ch > 8 && ch < 14) {\n        ++tokPos;\n      } else if (ch === 47) { // '/'\n        var next = input.charCodeAt(tokPos + 1);\n        if (next === 42) { // '*'\n          skipBlockComment();\n        } else if (next === 47) { // '/'\n          skipLineComment();\n        } else break;\n      } else if (ch === 160) { // '\\xa0'\n        ++tokPos;\n      } else if (ch >= 5760 && nonASCIIwhitespace.test(String.fromCharCode(ch))) {\n        ++tokPos;\n      } else {\n        break;\n      }\n    }\n  }\n\n  // ### Token reading\n\n  // This is the function that is called to fetch the next token. It\n  // is somewhat obscure, because it works in character codes rather\n  // than characters, and because operator parsing has been inlined\n  // into it.\n  //\n  // All in the name of speed.\n  //\n  // The `forceRegexp` parameter is used in the one case where the\n  // `tokRegexpAllowed` trick does not work. See `parseStatement`.\n\n  function readToken_dot() {\n    var next = input.charCodeAt(tokPos + 1);\n    if (next >= 48 && next <= 57) return readNumber(true);\n    var next2 = input.charCodeAt(tokPos + 2);\n    if (options.ecmaVersion >= 6 && next === 46 && next2 === 46) { // 46 = dot '.'\n      tokPos += 3;\n      return finishToken(_ellipsis);\n    } else {\n      ++tokPos;\n      return finishToken(_dot);\n    }\n  }\n\n  function readToken_slash() { // '/'\n    var next = input.charCodeAt(tokPos + 1);\n    if (tokRegexpAllowed) {++tokPos; return readRegexp();}\n    if (next === 61) return finishOp(_assign, 2);\n    return finishOp(_slash, 1);\n  }\n\n  function readToken_mult_modulo(code) { // '%*'\n    var next = input.charCodeAt(tokPos + 1);\n    if (next === 61) return finishOp(_assign, 2);\n    return finishOp(code === 42 ? _star : _modulo, 1);\n  }\n\n  function readToken_pipe_amp(code) { // '|&'\n    var next = input.charCodeAt(tokPos + 1);\n    if (next === code) return finishOp(code === 124 ? _logicalOR : _logicalAND, 2);\n    if (next === 61) return finishOp(_assign, 2);\n    return finishOp(code === 124 ? _bitwiseOR : _bitwiseAND, 1);\n  }\n\n  function readToken_caret() { // '^'\n    var next = input.charCodeAt(tokPos + 1);\n    if (next === 61) return finishOp(_assign, 2);\n    return finishOp(_bitwiseXOR, 1);\n  }\n\n  function readToken_plus_min(code) { // '+-'\n    var next = input.charCodeAt(tokPos + 1);\n    if (next === code) {\n      if (next == 45 && input.charCodeAt(tokPos + 2) == 62 &&\n          newline.test(input.slice(lastEnd, tokPos))) {\n        // A `-->` line comment\n        tokPos += 3;\n        skipLineComment();\n        skipSpace();\n        return readToken();\n      }\n      return finishOp(_incDec, 2);\n    }\n    if (next === 61) return finishOp(_assign, 2);\n    return finishOp(_plusMin, 1);\n  }\n\n  function readToken_lt_gt(code) { // '<>'\n    var next = input.charCodeAt(tokPos + 1);\n    var size = 1;\n    if (next === code) {\n      size = code === 62 && input.charCodeAt(tokPos + 2) === 62 ? 3 : 2;\n      if (input.charCodeAt(tokPos + size) === 61) return finishOp(_assign, size + 1);\n      return finishOp(_bitShift, size);\n    }\n    if (next == 33 && code == 60 && input.charCodeAt(tokPos + 2) == 45 &&\n        input.charCodeAt(tokPos + 3) == 45) {\n      // `<!--`, an XML-style comment that should be interpreted as a line comment\n      tokPos += 4;\n      skipLineComment();\n      skipSpace();\n      return readToken();\n    }\n    if (next === 61)\n      size = input.charCodeAt(tokPos + 2) === 61 ? 3 : 2;\n    return finishOp(_relational, size);\n  }\n\n  function readToken_eq_excl(code) { // '=!', '=>'\n    var next = input.charCodeAt(tokPos + 1);\n    if (next === 61) return finishOp(_equality, input.charCodeAt(tokPos + 2) === 61 ? 3 : 2);\n    if (code === 61 && next === 62 && options.ecmaVersion >= 6) { // '=>'\n      tokPos += 2;\n      return finishToken(_arrow);\n    }\n    return finishOp(code === 61 ? _eq : _prefix, 1);\n  }\n\n  // Get token inside ES6 template (special rules work there).\n\n  function getTemplateToken(code) {\n    // '`' and '${' have special meanings, but they should follow\n    // string (can be empty)\n    if (tokType === _string) {\n      if (code === 96) { // '`'\n        ++tokPos;\n        return finishToken(_bquote);\n      } else\n      if (code === 36 && input.charCodeAt(tokPos + 1) === 123) { // '${'\n        tokPos += 2;\n        return finishToken(_dollarBraceL);\n      }\n    }\n\n    if (code === 125) { // '}'\n      ++tokPos;\n      return finishToken(_braceR, undefined, false);\n    }\n\n    // anything else is considered string literal\n    return readTmplString();\n  }\n\n  function getTokenFromCode(code) {\n    switch (code) {\n    // The interpretation of a dot depends on whether it is followed\n    // by a digit or another two dots.\n    case 46: // '.'\n      return readToken_dot();\n\n    // Punctuation tokens.\n    case 40: ++tokPos; return finishToken(_parenL);\n    case 41: ++tokPos; return finishToken(_parenR);\n    case 59: ++tokPos; return finishToken(_semi);\n    case 44: ++tokPos; return finishToken(_comma);\n    case 91: ++tokPos; return finishToken(_bracketL);\n    case 93: ++tokPos; return finishToken(_bracketR);\n    case 123: ++tokPos; return finishToken(_braceL);\n    case 125: ++tokPos; return finishToken(_braceR);\n    case 58: ++tokPos; return finishToken(_colon);\n    case 63: ++tokPos; return finishToken(_question);\n\n    case 96: // '`'\n      if (options.ecmaVersion >= 6) {\n        ++tokPos;\n        return finishToken(_bquote, undefined, false);\n      }\n\n    case 48: // '0'\n      var next = input.charCodeAt(tokPos + 1);\n      if (next === 120 || next === 88) return readRadixNumber(16); // '0x', '0X' - hex number\n      if (options.ecmaVersion >= 6) {\n        if (next === 111 || next === 79) return readRadixNumber(8); // '0o', '0O' - octal number\n        if (next === 98 || next === 66) return readRadixNumber(2); // '0b', '0B' - binary number\n      }\n    // Anything else beginning with a digit is an integer, octal\n    // number, or float.\n    case 49: case 50: case 51: case 52: case 53: case 54: case 55: case 56: case 57: // 1-9\n      return readNumber(false);\n\n    // Quotes produce strings.\n    case 34: case 39: // '\"', \"'\"\n      return readString(code);\n\n    // Operators are parsed inline in tiny state machines. '=' (61) is\n    // often referred to. `finishOp` simply skips the amount of\n    // characters it is given as second argument, and returns a token\n    // of the type given by its first argument.\n\n    case 47: // '/'\n      return readToken_slash();\n\n    case 37: case 42: // '%*'\n      return readToken_mult_modulo(code);\n\n    case 124: case 38: // '|&'\n      return readToken_pipe_amp(code);\n\n    case 94: // '^'\n      return readToken_caret();\n\n    case 43: case 45: // '+-'\n      return readToken_plus_min(code);\n\n    case 60: case 62: // '<>'\n      return readToken_lt_gt(code);\n\n    case 61: case 33: // '=!'\n      return readToken_eq_excl(code);\n\n    case 126: // '~'\n      return finishOp(_prefix, 1);\n    }\n\n    return false;\n  }\n\n  function readToken(forceRegexp) {\n    if (!forceRegexp) tokStart = tokPos;\n    else tokPos = tokStart + 1;\n    if (options.locations) tokStartLoc = new Position;\n    if (forceRegexp) return readRegexp();\n    if (tokPos >= inputLen) return finishToken(_eof);\n\n    var code = input.charCodeAt(tokPos);\n\n    if (inTemplate) return getTemplateToken(code);\n\n    // Identifier or keyword. '\\uXXXX' sequences are allowed in\n    // identifiers, so '\\' also dispatches to that.\n    if (isIdentifierStart(code) || code === 92 /* '\\' */) return readWord();\n\n    var tok = getTokenFromCode(code);\n\n    if (tok === false) {\n      // If we are here, we either found a non-ASCII identifier\n      // character, or something that's entirely disallowed.\n      var ch = String.fromCharCode(code);\n      if (ch === \"\\\\\" || nonASCIIidentifierStart.test(ch)) return readWord();\n      raise(tokPos, \"Unexpected character '\" + ch + \"'\");\n    }\n    return tok;\n  }\n\n  function finishOp(type, size) {\n    var str = input.slice(tokPos, tokPos + size);\n    tokPos += size;\n    finishToken(type, str);\n  }\n\n  // Parse a regular expression. Some context-awareness is necessary,\n  // since a '/' inside a '[]' set does not end the expression.\n\n  function readRegexp() {\n    var content = \"\", escaped, inClass, start = tokPos;\n    for (;;) {\n      if (tokPos >= inputLen) raise(start, \"Unterminated regular expression\");\n      var ch = input.charAt(tokPos);\n      if (newline.test(ch)) raise(start, \"Unterminated regular expression\");\n      if (!escaped) {\n        if (ch === \"[\") inClass = true;\n        else if (ch === \"]\" && inClass) inClass = false;\n        else if (ch === \"/\" && !inClass) break;\n        escaped = ch === \"\\\\\";\n      } else escaped = false;\n      ++tokPos;\n    }\n    var content = input.slice(start, tokPos);\n    ++tokPos;\n    // Need to use `readWord1` because '\\uXXXX' sequences are allowed\n    // here (don't ask).\n    var mods = readWord1();\n    if (mods && !/^[gmsiy]*$/.test(mods)) raise(start, \"Invalid regular expression flag\");\n    try {\n      var value = new RegExp(content, mods);\n    } catch (e) {\n      if (e instanceof SyntaxError) raise(start, \"Error parsing regular expression: \" + e.message);\n      raise(e);\n    }\n    return finishToken(_regexp, value);\n  }\n\n  // Read an integer in the given radix. Return null if zero digits\n  // were read, the integer value otherwise. When `len` is given, this\n  // will return `null` unless the integer has exactly `len` digits.\n\n  function readInt(radix, len) {\n    var start = tokPos, total = 0;\n    for (var i = 0, e = len == null ? Infinity : len; i < e; ++i) {\n      var code = input.charCodeAt(tokPos), val;\n      if (code >= 97) val = code - 97 + 10; // a\n      else if (code >= 65) val = code - 65 + 10; // A\n      else if (code >= 48 && code <= 57) val = code - 48; // 0-9\n      else val = Infinity;\n      if (val >= radix) break;\n      ++tokPos;\n      total = total * radix + val;\n    }\n    if (tokPos === start || len != null && tokPos - start !== len) return null;\n\n    return total;\n  }\n\n  function readRadixNumber(radix) {\n    tokPos += 2; // 0x\n    var val = readInt(radix);\n    if (val == null) raise(tokStart + 2, \"Expected number in radix \" + radix);\n    if (isIdentifierStart(input.charCodeAt(tokPos))) raise(tokPos, \"Identifier directly after number\");\n    return finishToken(_num, val);\n  }\n\n  // Read an integer, octal integer, or floating-point number.\n\n  function readNumber(startsWithDot) {\n    var start = tokPos, isFloat = false, octal = input.charCodeAt(tokPos) === 48;\n    if (!startsWithDot && readInt(10) === null) raise(start, \"Invalid number\");\n    if (input.charCodeAt(tokPos) === 46) {\n      ++tokPos;\n      readInt(10);\n      isFloat = true;\n    }\n    var next = input.charCodeAt(tokPos);\n    if (next === 69 || next === 101) { // 'eE'\n      next = input.charCodeAt(++tokPos);\n      if (next === 43 || next === 45) ++tokPos; // '+-'\n      if (readInt(10) === null) raise(start, \"Invalid number\");\n      isFloat = true;\n    }\n    if (isIdentifierStart(input.charCodeAt(tokPos))) raise(tokPos, \"Identifier directly after number\");\n\n    var str = input.slice(start, tokPos), val;\n    if (isFloat) val = parseFloat(str);\n    else if (!octal || str.length === 1) val = parseInt(str, 10);\n    else if (/[89]/.test(str) || strict) raise(start, \"Invalid number\");\n    else val = parseInt(str, 8);\n    return finishToken(_num, val);\n  }\n\n  // Read a string value, interpreting backslash-escapes.\n\n  function readCodePoint() {\n    var ch = input.charCodeAt(tokPos), code;\n\n    if (ch === 123) {\n      if (options.ecmaVersion < 6) unexpected();\n      ++tokPos;\n      code = readHexChar(input.indexOf('}', tokPos) - tokPos);\n      ++tokPos;\n      if (code > 0x10FFFF) unexpected();\n    } else {\n      code = readHexChar(4);\n    }\n\n    // UTF-16 Encoding\n    if (code <= 0xFFFF) {\n      return String.fromCharCode(code);\n    }\n    var cu1 = ((code - 0x10000) >> 10) + 0xD800;\n    var cu2 = ((code - 0x10000) & 1023) + 0xDC00;\n    return String.fromCharCode(cu1, cu2);\n  }\n\n  function readString(quote) {\n    ++tokPos;\n    var out = \"\";\n    for (;;) {\n      if (tokPos >= inputLen) raise(tokStart, \"Unterminated string constant\");\n      var ch = input.charCodeAt(tokPos);\n      if (ch === quote) {\n        ++tokPos;\n        return finishToken(_string, out);\n      }\n      if (ch === 92) { // '\\'\n        out += readEscapedChar();\n      } else {\n        ++tokPos;\n        if (newline.test(String.fromCharCode(ch))) {\n          raise(tokStart, \"Unterminated string constant\");\n        }\n        out += String.fromCharCode(ch); // '\\'\n      }\n    }\n  }\n\n  function readTmplString() {\n    var out = \"\";\n    for (;;) {\n      if (tokPos >= inputLen) raise(tokStart, \"Unterminated string constant\");\n      var ch = input.charCodeAt(tokPos);\n      if (ch === 96 || ch === 36 && input.charCodeAt(tokPos + 1) === 123) // '`', '${'\n        return finishToken(_string, out);\n      if (ch === 92) { // '\\'\n        out += readEscapedChar();\n      } else {\n        ++tokPos;\n        if (newline.test(String.fromCharCode(ch))) {\n          if (ch === 13 && input.charCodeAt(tokPos) === 10) {\n            ++tokPos;\n            ch = 10;\n          }\n          if (options.locations) {\n            ++tokCurLine;\n            tokLineStart = tokPos;\n          }\n        }\n        out += String.fromCharCode(ch); // '\\'\n      }\n    }\n  }\n\n  // Used to read escaped characters\n\n  function readEscapedChar() {\n    var ch = input.charCodeAt(++tokPos);\n    var octal = /^[0-7]+/.exec(input.slice(tokPos, tokPos + 3));\n    if (octal) octal = octal[0];\n    while (octal && parseInt(octal, 8) > 255) octal = octal.slice(0, -1);\n    if (octal === \"0\") octal = null;\n    ++tokPos;\n    if (octal) {\n      if (strict) raise(tokPos - 2, \"Octal literal in strict mode\");\n      tokPos += octal.length - 1;\n      return String.fromCharCode(parseInt(octal, 8));\n    } else {\n      switch (ch) {\n        case 110: return \"\\n\"; // 'n' -> '\\n'\n        case 114: return \"\\r\"; // 'r' -> '\\r'\n        case 120: return String.fromCharCode(readHexChar(2)); // 'x'\n        case 117: return readCodePoint(); // 'u'\n        case 85: return String.fromCharCode(readHexChar(8)); // 'U'\n        case 116: return \"\\t\"; // 't' -> '\\t'\n        case 98: return \"\\b\"; // 'b' -> '\\b'\n        case 118: return \"\\u000b\"; // 'v' -> '\\u000b'\n        case 102: return \"\\f\"; // 'f' -> '\\f'\n        case 48: return \"\\0\"; // 0 -> '\\0'\n        case 13: if (input.charCodeAt(tokPos) === 10) ++tokPos; // '\\r\\n'\n        case 10: // ' \\n'\n          if (options.locations) { tokLineStart = tokPos; ++tokCurLine; }\n          return \"\";\n        default: return String.fromCharCode(ch);\n      }\n    }\n  }\n\n  // Used to read character escape sequences ('\\x', '\\u', '\\U').\n\n  function readHexChar(len) {\n    var n = readInt(16, len);\n    if (n === null) raise(tokStart, \"Bad character escape sequence\");\n    return n;\n  }\n\n  // Used to signal to callers of `readWord1` whether the word\n  // contained any escape sequences. This is needed because words with\n  // escape sequences must not be interpreted as keywords.\n\n  var containsEsc;\n\n  // Read an identifier, and return it as a string. Sets `containsEsc`\n  // to whether the word contained a '\\u' escape.\n  //\n  // Only builds up the word character-by-character when it actually\n  // containeds an escape, as a micro-optimization.\n\n  function readWord1() {\n    containsEsc = false;\n    var word, first = true, start = tokPos;\n    for (;;) {\n      var ch = input.charCodeAt(tokPos);\n      if (isIdentifierChar(ch)) {\n        if (containsEsc) word += input.charAt(tokPos);\n        ++tokPos;\n      } else if (ch === 92) { // \"\\\"\n        if (!containsEsc) word = input.slice(start, tokPos);\n        containsEsc = true;\n        if (input.charCodeAt(++tokPos) != 117) // \"u\"\n          raise(tokPos, \"Expecting Unicode escape sequence \\\\uXXXX\");\n        ++tokPos;\n        var esc = readHexChar(4);\n        var escStr = String.fromCharCode(esc);\n        if (!escStr) raise(tokPos - 1, \"Invalid Unicode escape\");\n        if (!(first ? isIdentifierStart(esc) : isIdentifierChar(esc)))\n          raise(tokPos - 4, \"Invalid Unicode escape\");\n        word += escStr;\n      } else {\n        break;\n      }\n      first = false;\n    }\n    return containsEsc ? word : input.slice(start, tokPos);\n  }\n\n  // Read an identifier or keyword token. Will check for reserved\n  // words when necessary.\n\n  function readWord() {\n    var word = readWord1();\n    var type = _name;\n    if (!containsEsc && isKeyword(word))\n      type = keywordTypes[word];\n    return finishToken(type, word);\n  }\n\n  // ## Parser\n\n  // A recursive descent parser operates by defining functions for all\n  // syntactic elements, and recursively calling those, each function\n  // advancing the input stream and returning an AST node. Precedence\n  // of constructs (for example, the fact that `!x[1]` means `!(x[1])`\n  // instead of `(!x)[1]` is handled by the fact that the parser\n  // function that parses unary prefix operators is called first, and\n  // in turn calls the function that parses `[]` subscripts  that\n  // way, it'll receive the node for `x[1]` already parsed, and wraps\n  // *that* in the unary operator node.\n  //\n  // Acorn uses an [operator precedence parser][opp] to handle binary\n  // operator precedence, because it is much more compact than using\n  // the technique outlined above, which uses different, nesting\n  // functions to specify precedence, for all of the ten binary\n  // precedence levels that JavaScript defines.\n  //\n  // [opp]: http://en.wikipedia.org/wiki/Operator-precedence_parser\n\n  // ### Parser utilities\n\n  // Continue to the next token.\n\n  function next() {\n    lastStart = tokStart;\n    lastEnd = tokEnd;\n    lastEndLoc = tokEndLoc;\n    readToken();\n  }\n\n  // Enter strict mode. Re-reads the next token to please pedantic\n  // tests (\"use strict\"; 010; -- should fail).\n\n  function setStrict(strct) {\n    strict = strct;\n    tokPos = tokStart;\n    if (options.locations) {\n      while (tokPos < tokLineStart) {\n        tokLineStart = input.lastIndexOf(\"\\n\", tokLineStart - 2) + 1;\n        --tokCurLine;\n      }\n    }\n    skipSpace();\n    readToken();\n  }\n\n  // Start an AST node, attaching a start offset.\n\n  function Node() {\n    this.type = null;\n    this.start = tokStart;\n    this.end = null;\n  }\n\n  exports.Node = Node;\n\n  function SourceLocation() {\n    this.start = tokStartLoc;\n    this.end = null;\n    if (sourceFile !== null) this.source = sourceFile;\n  }\n\n  function startNode() {\n    var node = new Node();\n    if (options.locations)\n      node.loc = new SourceLocation();\n    if (options.directSourceFile)\n      node.sourceFile = options.directSourceFile;\n    if (options.ranges)\n      node.range = [tokStart, 0];\n    return node;\n  }\n\n  // Start a node whose start offset information should be based on\n  // the start of another node. For example, a binary operator node is\n  // only started after its left-hand side has already been parsed.\n\n  function startNodeFrom(other) {\n    var node = new Node();\n    node.start = other.start;\n    if (options.locations) {\n      node.loc = new SourceLocation();\n      node.loc.start = other.loc.start;\n    }\n    if (options.ranges)\n      node.range = [other.range[0], 0];\n\n    return node;\n  }\n\n  // Finish an AST node, adding `type` and `end` properties.\n\n  function finishNode(node, type) {\n    node.type = type;\n    node.end = lastEnd;\n    if (options.locations)\n      node.loc.end = lastEndLoc;\n    if (options.ranges)\n      node.range[1] = lastEnd;\n    return node;\n  }\n\n  // Test whether a statement node is the string literal `\"use strict\"`.\n\n  function isUseStrict(stmt) {\n    return options.ecmaVersion >= 5 && stmt.type === \"ExpressionStatement\" &&\n      stmt.expression.type === \"Literal\" && stmt.expression.value === \"use \" + \"strict\";\n  }\n\n  // Predicate that tests whether the next token is of the given\n  // type, and if yes, consumes it as a side effect.\n\n  function eat(type) {\n    if (tokType === type) {\n      next();\n      return true;\n    } else {\n      return false;\n    }\n  }\n\n  // Test whether a semicolon can be inserted at the current position.\n\n  function canInsertSemicolon() {\n    return !options.strictSemicolons &&\n      (tokType === _eof || tokType === _braceR || newline.test(input.slice(lastEnd, tokStart)));\n  }\n\n  // Consume a semicolon, or, failing that, see if we are allowed to\n  // pretend that there is a semicolon at this position.\n\n  function semicolon() {\n    if (!eat(_semi) && !canInsertSemicolon()) unexpected();\n  }\n\n  // Expect a token of a given type. If found, consume it, otherwise,\n  // raise an unexpected token error.\n\n  function expect(type) {\n    eat(type) || unexpected();\n  }\n\n  // Raise an unexpected token error.\n\n  function unexpected(pos) {\n    raise(pos != null ? pos : tokStart, \"Unexpected token\");\n  }\n\n  // Checks if hash object has a property.\n\n  function has(obj, propName) {\n    return Object.prototype.hasOwnProperty.call(obj, propName);\n  }\n  // Convert existing expression atom to assignable pattern\n  // if possible.\n\n  function toAssignable(node, allowSpread, checkType) {\n    if (options.ecmaVersion >= 6 && node) {\n      switch (node.type) {\n        case \"Identifier\":\n        case \"MemberExpression\":\n          break;\n\n        case \"ObjectExpression\":\n          node.type = \"ObjectPattern\";\n          for (var i = 0; i < node.properties.length; i++) {\n            var prop = node.properties[i];\n            if (prop.kind !== \"init\") unexpected(prop.key.start);\n            toAssignable(prop.value, false, checkType);\n          }\n          break;\n\n        case \"ArrayExpression\":\n          node.type = \"ArrayPattern\";\n          for (var i = 0, lastI = node.elements.length - 1; i <= lastI; i++) {\n            toAssignable(node.elements[i], i === lastI, checkType);\n          }\n          break;\n\n        case \"SpreadElement\":\n          if (allowSpread) {\n            toAssignable(node.argument, false, checkType);\n            checkSpreadAssign(node.argument);\n          } else {\n            unexpected(node.start);\n          }\n          break;\n\n        default:\n          if (checkType) unexpected(node.start);\n      }\n    }\n    return node;\n  }\n\n  // Checks if node can be assignable spread argument.\n\n  function checkSpreadAssign(node) {\n    if (node.type !== \"Identifier\" && node.type !== \"ArrayPattern\")\n      unexpected(node.start);\n  }\n\n  // Verify that argument names are not repeated, and it does not\n  // try to bind the words `eval` or `arguments`.\n\n  function checkFunctionParam(param, nameHash) {\n    switch (param.type) {\n      case \"Identifier\":\n        if (isStrictReservedWord(param.name) || isStrictBadIdWord(param.name))\n          raise(param.start, \"Defining '\" + param.name + \"' in strict mode\");\n        if (has(nameHash, param.name))\n          raise(param.start, \"Argument name clash in strict mode\");\n        nameHash[param.name] = true;\n        break;\n\n      case \"ObjectPattern\":\n        for (var i = 0; i < param.properties.length; i++)\n          checkFunctionParam(param.properties[i].value, nameHash);\n        break;\n\n      case \"ArrayPattern\":\n        for (var i = 0; i < param.elements.length; i++)\n          checkFunctionParam(param.elements[i], nameHash);\n        break;\n    }\n  }\n\n  // Check if property name clashes with already added.\n  // Object/class getters and setters are not allowed to clash \n  // either with each other or with an init property  and in\n  // strict mode, init properties are also not allowed to be repeated.\n\n  function checkPropClash(prop, propHash) {\n    if (prop.computed) return;\n    var key = prop.key, name;\n    switch (key.type) {\n      case \"Identifier\": name = key.name; break;\n      case \"Literal\": name = String(key.value); break;\n      default: return;\n    }\n    var kind = prop.kind || \"init\", other;\n    if (has(propHash, name)) {\n      other = propHash[name];\n      var isGetSet = kind !== \"init\";\n      if ((strict || isGetSet) && other[kind] || !(isGetSet ^ other.init))\n        raise(key.start, \"Redefinition of property\");\n    } else {\n      other = propHash[name] = {\n        init: false,\n        get: false,\n        set: false\n      };\n    }\n    other[kind] = true;\n  }\n\n  // Verify that a node is an lval  something that can be assigned\n  // to.\n\n  function checkLVal(expr, isBinding) {\n    switch (expr.type) {\n      case \"Identifier\":\n        if (strict && (isStrictBadIdWord(expr.name) || isStrictReservedWord(expr.name)))\n          raise(expr.start, isBinding\n            ? \"Binding \" + expr.name + \" in strict mode\"\n            : \"Assigning to \" + expr.name + \" in strict mode\"\n          );\n        break;\n\n      case \"MemberExpression\":\n        if (!isBinding) break;\n\n      case \"ObjectPattern\":\n        for (var i = 0; i < expr.properties.length; i++)\n          checkLVal(expr.properties[i].value, isBinding);\n        break;\n\n      case \"ArrayPattern\":\n        for (var i = 0; i < expr.elements.length; i++) {\n          var elem = expr.elements[i];\n          if (elem) checkLVal(elem, isBinding);\n        }\n        break;\n\n      case \"SpreadElement\":\n        break;\n\n      default:\n        raise(expr.start, \"Assigning to rvalue\");\n    }\n  }\n\n  // ### Statement parsing\n\n  // Parse a program. Initializes the parser, reads any number of\n  // statements, and wraps them in a Program node.  Optionally takes a\n  // `program` argument.  If present, the statements will be appended\n  // to its body instead of creating a new node.\n\n  function parseTopLevel(program) {\n    lastStart = lastEnd = tokPos;\n    if (options.locations) lastEndLoc = new Position;\n    inFunction = inGenerator = strict = null;\n    labels = [];\n    readToken();\n\n    var node = program || startNode(), first = true;\n    if (!program) node.body = [];\n    while (tokType !== _eof) {\n      var stmt = parseStatement();\n      node.body.push(stmt);\n      if (first && isUseStrict(stmt)) setStrict(true);\n      first = false;\n    }\n    return finishNode(node, \"Program\");\n  }\n\n  var loopLabel = {kind: \"loop\"}, switchLabel = {kind: \"switch\"};\n\n  // Parse a single statement.\n  //\n  // If expecting a statement and finding a slash operator, parse a\n  // regular expression literal. This is to handle cases like\n  // `if (foo) /blah/.exec(foo);`, where looking at the previous token\n  // does not help.\n\n  function parseStatement() {\n    if (tokType === _slash || tokType === _assign && tokVal == \"/=\")\n      readToken(true);\n\n    var starttype = tokType, node = startNode();\n\n    // Most types of statements are recognized by the keyword they\n    // start with. Many are trivial to parse, some require a bit of\n    // complexity.\n\n    switch (starttype) {\n    case _break: case _continue: return parseBreakContinueStatement(node, starttype.keyword);\n    case _debugger: return parseDebuggerStatement(node);\n    case _do: return parseDoStatement(node);\n    case _for: return parseForStatement(node);\n    case _function: return parseFunctionStatement(node);\n    case _class: return parseClass(node, true);\n    case _if: return parseIfStatement(node);\n    case _return: return parseReturnStatement(node);\n    case _switch: return parseSwitchStatement(node);\n    case _throw: return parseThrowStatement(node);\n    case _try: return parseTryStatement(node);\n    case _var: case _let: case _const: return parseVarStatement(node, starttype.keyword);\n    case _while: return parseWhileStatement(node);\n    case _with: return parseWithStatement(node);\n    case _braceL: return parseBlock(); // no point creating a function for this\n    case _semi: return parseEmptyStatement(node);\n    case _export: return parseExport(node);\n    case _import: return parseImport(node);\n\n      // If the statement does not start with a statement keyword or a\n      // brace, it's an ExpressionStatement or LabeledStatement. We\n      // simply start parsing an expression, and afterwards, if the\n      // next token is a colon and the expression was a simple\n      // Identifier node, we switch to interpreting it as a label.\n    default:\n      var maybeName = tokVal, expr = parseExpression();\n      if (starttype === _name && expr.type === \"Identifier\" && eat(_colon))\n        return parseLabeledStatement(node, maybeName, expr);\n      else return parseExpressionStatement(node, expr);\n    }\n  }\n\n  function parseBreakContinueStatement(node, keyword) {\n    var isBreak = keyword == \"break\";\n    next();\n    if (eat(_semi) || canInsertSemicolon()) node.label = null;\n    else if (tokType !== _name) unexpected();\n    else {\n      node.label = parseIdent();\n      semicolon();\n    }\n\n    // Verify that there is an actual destination to break or\n    // continue to.\n    for (var i = 0; i < labels.length; ++i) {\n      var lab = labels[i];\n      if (node.label == null || lab.name === node.label.name) {\n        if (lab.kind != null && (isBreak || lab.kind === \"loop\")) break;\n        if (node.label && isBreak) break;\n      }\n    }\n    if (i === labels.length) raise(node.start, \"Unsyntactic \" + keyword);\n    return finishNode(node, isBreak ? \"BreakStatement\" : \"ContinueStatement\");\n  }\n\n  function parseDebuggerStatement(node) {\n    next();\n    semicolon();\n    return finishNode(node, \"DebuggerStatement\");\n  }\n\n  function parseDoStatement(node) {\n    next();\n    labels.push(loopLabel);\n    node.body = parseStatement();\n    labels.pop();\n    expect(_while);\n    node.test = parseParenExpression();\n    semicolon();\n    return finishNode(node, \"DoWhileStatement\");\n  }\n\n  // Disambiguating between a `for` and a `for`/`in` or `for`/`of`\n  // loop is non-trivial. Basically, we have to parse the init `var`\n  // statement or expression, disallowing the `in` operator (see\n  // the second parameter to `parseExpression`), and then check\n  // whether the next token is `in` or `of`. When there is no init\n  // part (semicolon immediately after the opening parenthesis), it\n  // is a regular `for` loop.\n\n  function parseForStatement(node) {\n    next();\n    labels.push(loopLabel);\n    expect(_parenL);\n    if (tokType === _semi) return parseFor(node, null);\n    if (tokType === _var || tokType === _let) {\n      var init = startNode(), varKind = tokType.keyword, isLet = tokType === _let;\n      next();\n      parseVar(init, true, varKind);\n      finishNode(init, \"VariableDeclaration\");\n      if ((tokType === _in || (tokType === _name && tokVal === \"of\")) && init.declarations.length === 1 &&\n          !(isLet && init.declarations[0].init))\n        return parseForIn(node, init);\n      return parseFor(node, init);\n    }\n    var init = parseExpression(false, true);\n    if (tokType === _in || (tokType === _name && tokVal === \"of\")) {\n      checkLVal(init);\n      return parseForIn(node, init);\n    }\n    return parseFor(node, init);\n  }\n\n  function parseFunctionStatement(node) {\n    next();\n    return parseFunction(node, true);\n  }\n\n  function parseIfStatement(node) {\n    next();\n    node.test = parseParenExpression();\n    node.consequent = parseStatement();\n    node.alternate = eat(_else) ? parseStatement() : null;\n    return finishNode(node, \"IfStatement\");\n  }\n\n  function parseReturnStatement(node) {\n    if (!inFunction && !options.allowReturnOutsideFunction)\n      raise(tokStart, \"'return' outside of function\");\n    next();\n\n    // In `return` (and `break`/`continue`), the keywords with\n    // optional arguments, we eagerly look for a semicolon or the\n    // possibility to insert one.\n\n    if (eat(_semi) || canInsertSemicolon()) node.argument = null;\n    else { node.argument = parseExpression(); semicolon(); }\n    return finishNode(node, \"ReturnStatement\");\n  }\n\n  function parseSwitchStatement(node) {\n    next();\n    node.discriminant = parseParenExpression();\n    node.cases = [];\n    expect(_braceL);\n    labels.push(switchLabel);\n\n    // Statements under must be grouped (by label) in SwitchCase\n    // nodes. `cur` is used to keep the node that we are currently\n    // adding statements to.\n\n    for (var cur, sawDefault; tokType != _braceR;) {\n      if (tokType === _case || tokType === _default) {\n        var isCase = tokType === _case;\n        if (cur) finishNode(cur, \"SwitchCase\");\n        node.cases.push(cur = startNode());\n        cur.consequent = [];\n        next();\n        if (isCase) cur.test = parseExpression();\n        else {\n          if (sawDefault) raise(lastStart, \"Multiple default clauses\"); sawDefault = true;\n          cur.test = null;\n        }\n        expect(_colon);\n      } else {\n        if (!cur) unexpected();\n        cur.consequent.push(parseStatement());\n      }\n    }\n    if (cur) finishNode(cur, \"SwitchCase\");\n    next(); // Closing brace\n    labels.pop();\n    return finishNode(node, \"SwitchStatement\");\n  }\n\n  function parseThrowStatement(node) {\n    next();\n    if (newline.test(input.slice(lastEnd, tokStart)))\n      raise(lastEnd, \"Illegal newline after throw\");\n    node.argument = parseExpression();\n    semicolon();\n    return finishNode(node, \"ThrowStatement\");\n  }\n\n  function parseTryStatement(node) {\n    next();\n    node.block = parseBlock();\n    node.handler = null;\n    if (tokType === _catch) {\n      var clause = startNode();\n      next();\n      expect(_parenL);\n      clause.param = parseIdent();\n      if (strict && isStrictBadIdWord(clause.param.name))\n        raise(clause.param.start, \"Binding \" + clause.param.name + \" in strict mode\");\n      expect(_parenR);\n      clause.guard = null;\n      clause.body = parseBlock();\n      node.handler = finishNode(clause, \"CatchClause\");\n    }\n    node.guardedHandlers = empty;\n    node.finalizer = eat(_finally) ? parseBlock() : null;\n    if (!node.handler && !node.finalizer)\n      raise(node.start, \"Missing catch or finally clause\");\n    return finishNode(node, \"TryStatement\");\n  }\n\n  function parseVarStatement(node, kind) {\n    next();\n    parseVar(node, false, kind);\n    semicolon();\n    return finishNode(node, \"VariableDeclaration\");\n  }\n\n  function parseWhileStatement(node) {\n    next();\n    node.test = parseParenExpression();\n    labels.push(loopLabel);\n    node.body = parseStatement();\n    labels.pop();\n    return finishNode(node, \"WhileStatement\");\n  }\n\n  function parseWithStatement(node) {\n    if (strict) raise(tokStart, \"'with' in strict mode\");\n    next();\n    node.object = parseParenExpression();\n    node.body = parseStatement();\n    return finishNode(node, \"WithStatement\");\n  }\n\n  function parseEmptyStatement(node) {\n    next();\n    return finishNode(node, \"EmptyStatement\");\n  }\n\n  function parseLabeledStatement(node, maybeName, expr) {\n    for (var i = 0; i < labels.length; ++i)\n      if (labels[i].name === maybeName) raise(expr.start, \"Label '\" + maybeName + \"' is already declared\");\n    var kind = tokType.isLoop ? \"loop\" : tokType === _switch ? \"switch\" : null;\n    labels.push({name: maybeName, kind: kind});\n    node.body = parseStatement();\n    labels.pop();\n    node.label = expr;\n    return finishNode(node, \"LabeledStatement\");\n  }\n\n  function parseExpressionStatement(node, expr) {\n    node.expression = expr;\n    semicolon();\n    return finishNode(node, \"ExpressionStatement\");\n  }\n\n  // Used for constructs like `switch` and `if` that insist on\n  // parentheses around their expression.\n\n  function parseParenExpression() {\n    expect(_parenL);\n    var val = parseExpression();\n    expect(_parenR);\n    return val;\n  }\n\n  // Parse a semicolon-enclosed block of statements, handling `\"use\n  // strict\"` declarations when `allowStrict` is true (used for\n  // function bodies).\n\n  function parseBlock(allowStrict) {\n    var node = startNode(), first = true, strict = false, oldStrict;\n    node.body = [];\n    expect(_braceL);\n    while (!eat(_braceR)) {\n      var stmt = parseStatement();\n      node.body.push(stmt);\n      if (first && allowStrict && isUseStrict(stmt)) {\n        oldStrict = strict;\n        setStrict(strict = true);\n      }\n      first = false;\n    }\n    if (strict && !oldStrict) setStrict(false);\n    return finishNode(node, \"BlockStatement\");\n  }\n\n  // Parse a regular `for` loop. The disambiguation code in\n  // `parseStatement` will already have parsed the init statement or\n  // expression.\n\n  function parseFor(node, init) {\n    node.init = init;\n    expect(_semi);\n    node.test = tokType === _semi ? null : parseExpression();\n    expect(_semi);\n    node.update = tokType === _parenR ? null : parseExpression();\n    expect(_parenR);\n    node.body = parseStatement();\n    labels.pop();\n    return finishNode(node, \"ForStatement\");\n  }\n\n  // Parse a `for`/`in` and `for`/`of` loop, which are almost\n  // same from parser's perspective.\n\n  function parseForIn(node, init) {\n    var type = tokType === _in ? \"ForInStatement\" : \"ForOfStatement\";\n    next();\n    node.left = init;\n    node.right = parseExpression();\n    expect(_parenR);\n    node.body = parseStatement();\n    labels.pop();\n    return finishNode(node, type);\n  }\n\n  // Parse a list of variable declarations.\n\n  function parseVar(node, noIn, kind) {\n    node.declarations = [];\n    node.kind = kind;\n    for (;;) {\n      var decl = startNode();\n      decl.id = options.ecmaVersion >= 6 ? toAssignable(parseExprAtom()) : parseIdent();\n      checkLVal(decl.id, true);\n      decl.init = eat(_eq) ? parseExpression(true, noIn) : (kind === _const.keyword ? unexpected() : null);\n      node.declarations.push(finishNode(decl, \"VariableDeclarator\"));\n      if (!eat(_comma)) break;\n    }\n    return node;\n  }\n\n  // ### Expression parsing\n\n  // These nest, from the most general expression type at the top to\n  // 'atomic', nondivisible expression types at the bottom. Most of\n  // the functions will simply let the function(s) below them parse,\n  // and, *if* the syntactic construct they handle is present, wrap\n  // the AST node that the inner parser gave them in another node.\n\n  // Parse a full expression. The arguments are used to forbid comma\n  // sequences (in argument lists, array literals, or object literals)\n  // or the `in` operator (in for loops initalization expressions).\n\n  function parseExpression(noComma, noIn) {\n    var expr = parseMaybeAssign(noIn);\n    if (!noComma && tokType === _comma) {\n      var node = startNodeFrom(expr);\n      node.expressions = [expr];\n      while (eat(_comma)) node.expressions.push(parseMaybeAssign(noIn));\n      return finishNode(node, \"SequenceExpression\");\n    }\n    return expr;\n  }\n\n  // Parse an assignment expression. This includes applications of\n  // operators like `+=`.\n\n  function parseMaybeAssign(noIn) {\n    var left = parseMaybeConditional(noIn);\n    if (tokType.isAssign) {\n      var node = startNodeFrom(left);\n      node.operator = tokVal;\n      node.left = tokType === _eq ? toAssignable(left) : left;\n      checkLVal(left);\n      next();\n      node.right = parseMaybeAssign(noIn);\n      return finishNode(node, \"AssignmentExpression\");\n    }\n    return left;\n  }\n\n  // Parse a ternary conditional (`?:`) operator.\n\n  function parseMaybeConditional(noIn) {\n    var expr = parseExprOps(noIn);\n    if (eat(_question)) {\n      var node = startNodeFrom(expr);\n      node.test = expr;\n      node.consequent = parseExpression(true);\n      expect(_colon);\n      node.alternate = parseExpression(true, noIn);\n      return finishNode(node, \"ConditionalExpression\");\n    }\n    return expr;\n  }\n\n  // Start the precedence parser.\n\n  function parseExprOps(noIn) {\n    return parseExprOp(parseMaybeUnary(), -1, noIn);\n  }\n\n  // Parse binary operators with the operator precedence parsing\n  // algorithm. `left` is the left-hand side of the operator.\n  // `minPrec` provides context that allows the function to stop and\n  // defer further parser to one of its callers when it encounters an\n  // operator that has a lower precedence than the set it is parsing.\n\n  function parseExprOp(left, minPrec, noIn) {\n    var prec = tokType.binop;\n    if (prec != null && (!noIn || tokType !== _in)) {\n      if (prec > minPrec) {\n        var node = startNodeFrom(left);\n        node.left = left;\n        node.operator = tokVal;\n        var op = tokType;\n        next();\n        node.right = parseExprOp(parseMaybeUnary(), prec, noIn);\n        var exprNode = finishNode(node, (op === _logicalOR || op === _logicalAND) ? \"LogicalExpression\" : \"BinaryExpression\");\n        return parseExprOp(exprNode, minPrec, noIn);\n      }\n    }\n    return left;\n  }\n\n  // Parse unary operators, both prefix and postfix.\n\n  function parseMaybeUnary() {\n    if (tokType.prefix) {\n      var node = startNode(), update = tokType.isUpdate;\n      node.operator = tokVal;\n      node.prefix = true;\n      tokRegexpAllowed = true;\n      next();\n      node.argument = parseMaybeUnary();\n      if (update) checkLVal(node.argument);\n      else if (strict && node.operator === \"delete\" &&\n               node.argument.type === \"Identifier\")\n        raise(node.start, \"Deleting local variable in strict mode\");\n      return finishNode(node, update ? \"UpdateExpression\" : \"UnaryExpression\");\n    }\n    var expr = parseExprSubscripts();\n    while (tokType.postfix && !canInsertSemicolon()) {\n      var node = startNodeFrom(expr);\n      node.operator = tokVal;\n      node.prefix = false;\n      node.argument = expr;\n      checkLVal(expr);\n      next();\n      expr = finishNode(node, \"UpdateExpression\");\n    }\n    return expr;\n  }\n\n  // Parse call, dot, and `[]`-subscript expressions.\n\n  function parseExprSubscripts() {\n    return parseSubscripts(parseExprAtom());\n  }\n\n  function parseSubscripts(base, noCalls) {\n    if (eat(_dot)) {\n      var node = startNodeFrom(base);\n      node.object = base;\n      node.property = parseIdent(true);\n      node.computed = false;\n      return parseSubscripts(finishNode(node, \"MemberExpression\"), noCalls);\n    } else if (eat(_bracketL)) {\n      var node = startNodeFrom(base);\n      node.object = base;\n      node.property = parseExpression();\n      node.computed = true;\n      expect(_bracketR);\n      return parseSubscripts(finishNode(node, \"MemberExpression\"), noCalls);\n    } else if (!noCalls && eat(_parenL)) {\n      var node = startNodeFrom(base);\n      node.callee = base;\n      node.arguments = parseExprList(_parenR, false);\n      return parseSubscripts(finishNode(node, \"CallExpression\"), noCalls);\n    } else if (tokType === _bquote) {\n      var node = startNodeFrom(base);\n      node.tag = base;\n      node.quasi = parseTemplate();\n      return parseSubscripts(finishNode(node, \"TaggedTemplateExpression\"), noCalls);\n    } return base;\n  }\n\n  // Parse an atomic expression  either a single token that is an\n  // expression, an expression started by a keyword like `function` or\n  // `new`, or an expression wrapped in punctuation like `()`, `[]`,\n  // or `{}`.\n\n  function parseExprAtom() {\n    switch (tokType) {\n    case _this:\n      var node = startNode();\n      next();\n      return finishNode(node, \"ThisExpression\");\n\n    case _yield:\n      if (inGenerator) return parseYield();\n\n    case _name:\n      var id = parseIdent(tokType !== _name);\n      if (eat(_arrow)) {\n        return parseArrowExpression(startNodeFrom(id), [id]);\n      }\n      return id;\n\n    case _num: case _string: case _regexp:\n      var node = startNode();\n      node.value = tokVal;\n      node.raw = input.slice(tokStart, tokEnd);\n      next();\n      return finishNode(node, \"Literal\");\n\n    case _null: case _true: case _false:\n      var node = startNode();\n      node.value = tokType.atomValue;\n      node.raw = tokType.keyword;\n      next();\n      return finishNode(node, \"Literal\");\n\n    case _parenL:\n      var tokStartLoc1 = tokStartLoc, tokStart1 = tokStart, val, exprList;\n      next();\n      // check whether this is generator comprehension or regular expression\n      if (options.ecmaVersion >= 6 && tokType === _for) {\n        val = parseComprehension(startNode(), true);\n      } else {\n        var oldParenL = ++metParenL;\n        if (tokType !== _parenR) {\n          val = parseExpression();\n          exprList = val.type === \"SequenceExpression\" ? val.expressions : [val];\n        } else {\n          exprList = [];\n        }\n        expect(_parenR);\n        // if '=>' follows '(...)', convert contents to arguments\n        if (metParenL === oldParenL && eat(_arrow)) {\n          val = parseArrowExpression(startNode(), exprList);\n        } else {\n          // forbid '()' before everything but '=>'\n          if (!val) unexpected(lastStart);\n          // forbid '...' in sequence expressions\n          if (options.ecmaVersion >= 6) {\n            for (var i = 0; i < exprList.length; i++) {\n              if (exprList[i].type === \"SpreadElement\") unexpected();\n            }\n          }\n        }\n      }\n      val.start = tokStart1;\n      val.end = lastEnd;\n      if (options.locations) {\n        val.loc.start = tokStartLoc1;\n        val.loc.end = lastEndLoc;\n      }\n      if (options.ranges) {\n        val.range = [tokStart1, lastEnd];\n      }\n      return val;\n\n    case _bracketL:\n      var node = startNode();\n      next();\n      // check whether this is array comprehension or regular array\n      if (options.ecmaVersion >= 6 && tokType === _for) {\n        return parseComprehension(node, false);\n      }\n      node.elements = parseExprList(_bracketR, true, true);\n      return finishNode(node, \"ArrayExpression\");\n\n    case _braceL:\n      return parseObj();\n\n    case _function:\n      var node = startNode();\n      next();\n      return parseFunction(node, false);\n\n    case _class:\n      return parseClass(startNode(), false);\n\n    case _new:\n      return parseNew();\n\n    case _ellipsis:\n      return parseSpread();\n\n    case _bquote:\n      return parseTemplate();\n\n    default:\n      unexpected();\n    }\n  }\n\n  // New's precedence is slightly tricky. It must allow its argument\n  // to be a `[]` or dot subscript expression, but not a call  at\n  // least, not without wrapping it in parentheses. Thus, it uses the\n\n  function parseNew() {\n    var node = startNode();\n    next();\n    node.callee = parseSubscripts(parseExprAtom(), true);\n    if (eat(_parenL)) node.arguments = parseExprList(_parenR, false);\n    else node.arguments = empty;\n    return finishNode(node, \"NewExpression\");\n  }\n\n  // Parse spread element '...expr'\n\n  function parseSpread() {\n    var node = startNode();\n    next();\n    node.argument = parseExpression(true);\n    return finishNode(node, \"SpreadElement\");\n  }\n\n  // Parse template expression.\n\n  function parseTemplate() {\n    var node = startNode();\n    node.expressions = [];\n    node.quasis = [];\n    inTemplate = true;\n    next();\n    for (;;) {\n      var elem = startNode();\n      elem.value = {cooked: tokVal, raw: input.slice(tokStart, tokEnd)};\n      elem.tail = false;\n      next();\n      node.quasis.push(finishNode(elem, \"TemplateElement\"));\n      if (eat(_bquote)) { // '`', end of template\n        elem.tail = true;\n        break;\n      }\n      inTemplate = false;\n      expect(_dollarBraceL);\n      node.expressions.push(parseExpression());\n      inTemplate = true;\n      expect(_braceR);\n    }\n    inTemplate = false;\n    return finishNode(node, \"TemplateLiteral\");\n  }\n\n  // Parse an object literal.\n\n  function parseObj() {\n    var node = startNode(), first = true, propHash = {};\n    node.properties = [];\n    next();\n    while (!eat(_braceR)) {\n      if (!first) {\n        expect(_comma);\n        if (options.allowTrailingCommas && eat(_braceR)) break;\n      } else first = false;\n\n      var prop = startNode(), isGenerator;\n      if (options.ecmaVersion >= 6) {\n        prop.method = false;\n        prop.shorthand = false;\n        isGenerator = eat(_star);\n      }\n      parsePropertyName(prop);\n      if (eat(_colon)) {\n        prop.value = parseExpression(true);\n        prop.kind = \"init\";\n      } else if (options.ecmaVersion >= 6 && tokType === _parenL) {\n        prop.kind = \"init\";\n        prop.method = true;\n        prop.value = parseMethod(isGenerator);\n      } else if (options.ecmaVersion >= 5 && !prop.computed && prop.key.type === \"Identifier\" &&\n                 (prop.key.name === \"get\" || prop.key.name === \"set\")) {\n        if (isGenerator) unexpected();\n        prop.kind = prop.key.name;\n        parsePropertyName(prop);\n        prop.value = parseMethod(false);\n      } else if (options.ecmaVersion >= 6 && !prop.computed && prop.key.type === \"Identifier\") {\n        prop.kind = \"init\";\n        prop.value = prop.key;\n        prop.shorthand = true;\n      } else unexpected();\n\n      checkPropClash(prop, propHash);\n      node.properties.push(finishNode(prop, \"Property\"));\n    }\n    return finishNode(node, \"ObjectExpression\");\n  }\n\n  function parsePropertyName(prop) {\n    if (options.ecmaVersion >= 6) {\n      if (eat(_bracketL)) {\n        prop.computed = true;\n        prop.key = parseExpression();\n        expect(_bracketR);\n        return;\n      } else {\n        prop.computed = false;\n      }\n    }\n    prop.key = (tokType === _num || tokType === _string) ? parseExprAtom() : parseIdent(true);\n  }\n\n  // Initialize empty function node.\n\n  function initFunction(node) {\n    node.id = null;\n    node.params = [];\n    if (options.ecmaVersion >= 6) {\n      node.defaults = [];\n      node.rest = null;\n      node.generator = false;\n    }\n  }\n\n  // Parse a function declaration or literal (depending on the\n  // `isStatement` parameter).\n\n  function parseFunction(node, isStatement, allowExpressionBody) {\n    initFunction(node);\n    if (options.ecmaVersion >= 6) {\n      node.generator = eat(_star);\n    }\n    if (isStatement || tokType === _name) {\n      node.id = parseIdent();\n    }\n    parseFunctionParams(node);\n    parseFunctionBody(node, allowExpressionBody);\n    return finishNode(node, isStatement ? \"FunctionDeclaration\" : \"FunctionExpression\");\n  }\n\n  // Parse object or class method.\n\n  function parseMethod(isGenerator) {\n    var node = startNode();\n    initFunction(node);\n    parseFunctionParams(node);\n    var allowExpressionBody;\n    if (options.ecmaVersion >= 6) {\n      node.generator = isGenerator;\n      allowExpressionBody = true;\n    } else {\n      allowExpressionBody = false;\n    }\n    parseFunctionBody(node, allowExpressionBody);\n    return finishNode(node, \"FunctionExpression\");\n  }\n\n  // Parse arrow function expression with given parameters.\n\n  function parseArrowExpression(node, params) {\n    initFunction(node);\n\n    var defaults = node.defaults, hasDefaults = false;\n\n    for (var i = 0, lastI = params.length - 1; i <= lastI; i++) {\n      var param = params[i];\n\n      if (param.type === \"AssignmentExpression\" && param.operator === \"=\") {\n        hasDefaults = true;\n        params[i] = param.left;\n        defaults.push(param.right);\n      } else {\n        toAssignable(param, i === lastI, true);\n        defaults.push(null);\n        if (param.type === \"SpreadElement\") {\n          params.length--;\n          node.rest = param.argument;\n          break;\n        }\n      }\n    }\n\n    node.params = params;\n    if (!hasDefaults) node.defaults = [];\n\n    parseFunctionBody(node, true);\n    return finishNode(node, \"ArrowFunctionExpression\");\n  }\n\n  // Parse function parameters.\n\n  function parseFunctionParams(node) {\n    var defaults = [], hasDefaults = false;\n\n    expect(_parenL);\n    for (;;) {\n      if (eat(_parenR)) {\n        break;\n      } else if (options.ecmaVersion >= 6 && eat(_ellipsis)) {\n        node.rest = toAssignable(parseExprAtom(), false, true);\n        checkSpreadAssign(node.rest);\n        expect(_parenR);\n        break;\n      } else {\n        node.params.push(options.ecmaVersion >= 6 ? toAssignable(parseExprAtom(), false, true) : parseIdent());\n        if (options.ecmaVersion >= 6 && tokType === _eq) {\n          next();\n          hasDefaults = true;\n          defaults.push(parseExpression(true));\n        }\n        if (!eat(_comma)) {\n          expect(_parenR);\n          break;\n        }\n      }\n    }\n\n    if (hasDefaults) node.defaults = defaults;\n  }\n\n  // Parse function body and check parameters.\n\n  function parseFunctionBody(node, allowExpression) {\n    var isExpression = allowExpression && tokType !== _braceL;\n\n    if (isExpression) {\n      node.body = parseExpression(true);\n      node.expression = true;\n    } else {\n      // Start a new scope with regard to labels and the `inFunction`\n      // flag (restore them to their old value afterwards).\n      var oldInFunc = inFunction, oldInGen = inGenerator, oldLabels = labels;\n      inFunction = true; inGenerator = node.generator; labels = [];\n      node.body = parseBlock(true);\n      node.expression = false;\n      inFunction = oldInFunc; inGenerator = oldInGen; labels = oldLabels;\n    }\n\n    // If this is a strict mode function, verify that argument names\n    // are not repeated, and it does not try to bind the words `eval`\n    // or `arguments`.\n    if (strict || !isExpression && node.body.body.length && isUseStrict(node.body.body[0])) {\n      var nameHash = {};\n      if (node.id)\n        checkFunctionParam(node.id, nameHash);\n      for (var i = 0; i < node.params.length; i++)\n        checkFunctionParam(node.params[i], nameHash);\n      if (node.rest)\n        checkFunctionParam(node.rest, nameHash);\n    }\n  }\n\n  // Parse a class declaration or literal (depending on the\n  // `isStatement` parameter).\n\n  function parseClass(node, isStatement) {\n    next();\n    node.id = tokType === _name ? parseIdent() : isStatement ? unexpected() : null;\n    node.superClass = eat(_extends) ? parseExpression() : null;\n    var classBody = startNode(), methodHash = {}, staticMethodHash = {};\n    classBody.body = [];\n    expect(_braceL);\n    while (!eat(_braceR)) {\n      var method = startNode();\n      if (tokType === _name && tokVal === \"static\") {\n        next();\n        method['static'] = true;\n      } else {\n        method['static'] = false;\n      }\n      var isGenerator = eat(_star);\n      parsePropertyName(method);\n      if (tokType === _name && !method.computed && method.key.type === \"Identifier\" &&\n          (method.key.name === \"get\" || method.key.name === \"set\")) {\n        if (isGenerator) unexpected();\n        method.kind = method.key.name;\n        parsePropertyName(method);\n      } else {\n        method.kind = \"\";\n      }\n      method.value = parseMethod(isGenerator);\n      checkPropClash(method, method['static'] ? staticMethodHash : methodHash);\n      classBody.body.push(finishNode(method, \"MethodDefinition\"));\n      eat(_semi);\n    }\n    node.body = finishNode(classBody, \"ClassBody\");\n    return finishNode(node, isStatement ? \"ClassDeclaration\" : \"ClassExpression\");\n  }\n\n  // Parses a comma-separated list of expressions, and returns them as\n  // an array. `close` is the token type that ends the list, and\n  // `allowEmpty` can be turned on to allow subsequent commas with\n  // nothing in between them to be parsed as `null` (which is needed\n  // for array literals).\n\n  function parseExprList(close, allowTrailingComma, allowEmpty) {\n    var elts = [], first = true;\n    while (!eat(close)) {\n      if (!first) {\n        expect(_comma);\n        if (allowTrailingComma && options.allowTrailingCommas && eat(close)) break;\n      } else first = false;\n\n      if (allowEmpty && tokType === _comma) elts.push(null);\n      else elts.push(parseExpression(true));\n    }\n    return elts;\n  }\n\n  // Parse the next token as an identifier. If `liberal` is true (used\n  // when parsing properties), it will also convert keywords into\n  // identifiers.\n\n  function parseIdent(liberal) {\n    var node = startNode();\n    if (liberal && options.forbidReserved == \"everywhere\") liberal = false;\n    if (tokType === _name) {\n      if (!liberal &&\n          (options.forbidReserved &&\n           (options.ecmaVersion === 3 ? isReservedWord3 : isReservedWord5)(tokVal) ||\n           strict && isStrictReservedWord(tokVal)) &&\n          input.slice(tokStart, tokEnd).indexOf(\"\\\\\") == -1)\n        raise(tokStart, \"The keyword '\" + tokVal + \"' is reserved\");\n      node.name = tokVal;\n    } else if (liberal && tokType.keyword) {\n      node.name = tokType.keyword;\n    } else {\n      unexpected();\n    }\n    tokRegexpAllowed = false;\n    next();\n    return finishNode(node, \"Identifier\");\n  }\n\n  // Parses module export declaration.\n\n  function parseExport(node) {\n    next();\n    // export var|const|let|function|class ...;\n    if (tokType === _var || tokType === _const || tokType === _let || tokType === _function || tokType === _class) {\n      node.declaration = parseStatement();\n      node['default'] = false;\n      node.specifiers = null;\n      node.source = null;\n    } else\n    // export default ...;\n    if (eat(_default)) {\n      node.declaration = parseExpression(true);\n      node['default'] = true;\n      node.specifiers = null;\n      node.source = null;\n      semicolon();\n    } else {\n      // export * from '...'\n      // export { x, y as z } [from '...']\n      var isBatch = tokType === _star;\n      node.declaration = null;\n      node['default'] = false;\n      node.specifiers = parseExportSpecifiers();\n      if (tokType === _name && tokVal === \"from\") {\n        next();\n        node.source = tokType === _string ? parseExprAtom() : unexpected();\n      } else {\n        if (isBatch) unexpected();\n        node.source = null;\n      }\n    }\n    return finishNode(node, \"ExportDeclaration\");\n  }\n\n  // Parses a comma-separated list of module exports.\n\n  function parseExportSpecifiers() {\n    var nodes = [], first = true;\n    if (tokType === _star) {\n      // export * from '...'\n      var node = startNode();\n      next();\n      nodes.push(finishNode(node, \"ExportBatchSpecifier\"));\n    } else {\n      // export { x, y as z } [from '...']\n      expect(_braceL);\n      while (!eat(_braceR)) {\n        if (!first) {\n          expect(_comma);\n          if (options.allowTrailingCommas && eat(_braceR)) break;\n        } else first = false;\n\n        var node = startNode();\n        node.id = parseIdent();\n        if (tokType === _name && tokVal === \"as\") {\n          next();\n          node.name = parseIdent(true);\n        } else {\n          node.name = null;\n        }\n        nodes.push(finishNode(node, \"ExportSpecifier\"));\n      }\n    }\n    return nodes;\n  }\n\n  // Parses import declaration.\n\n  function parseImport(node) {\n    next();\n    // import '...';\n    if (tokType === _string) {\n      node.specifiers = [];\n      node.source = parseExprAtom();\n      node.kind = \"\";\n    } else {\n      node.specifiers = parseImportSpecifiers();\n      if (tokType !== _name || tokVal !== \"from\") unexpected();\n      next();\n      node.source = tokType === _string ? parseExprAtom() : unexpected();\n      // only for backward compatibility with Esprima's AST\n      // (it doesn't support mixed default + named yet)\n      node.kind = node.specifiers[0]['default'] ? \"default\" : \"named\";\n    }\n    return finishNode(node, \"ImportDeclaration\");\n  }\n\n  // Parses a comma-separated list of module imports.\n\n  function parseImportSpecifiers() {\n    var nodes = [], first = true;\n    if (tokType === _star) {\n      var node = startNode();\n      next();\n      if (tokType !== _name || tokVal !== \"as\") unexpected();\n      next();\n      node.name = parseIdent();\n      checkLVal(node.name, true);\n      nodes.push(finishNode(node, \"ImportBatchSpecifier\"));\n      return nodes;\n    }\n    if (tokType === _name) {\n      // import defaultObj, { x, y as z } from '...'\n      var node = startNode();\n      node.id = parseIdent();\n      checkLVal(node.id, true);\n      node.name = null;\n      node['default'] = true;\n      nodes.push(finishNode(node, \"ImportSpecifier\"));\n      if (!eat(_comma)) return nodes;\n    }\n    expect(_braceL);\n    while (!eat(_braceR)) {\n      if (!first) {\n        expect(_comma);\n        if (options.allowTrailingCommas && eat(_braceR)) break;\n      } else first = false;\n\n      var node = startNode();\n      node.id = parseIdent(true);\n      if (tokType === _name && tokVal === \"as\") {\n        next();\n        node.name = parseIdent();\n      } else {\n        node.name = null;\n      }\n      checkLVal(node.name || node.id, true);\n      node['default'] = false;\n      nodes.push(finishNode(node, \"ImportSpecifier\"));\n    }\n    return nodes;\n  }\n\n  // Parses yield expression inside generator.\n\n  function parseYield() {\n    var node = startNode();\n    next();\n    if (eat(_semi) || canInsertSemicolon()) {\n      node.delegate = false;\n      node.argument = null;\n    } else {\n      node.delegate = eat(_star);\n      node.argument = parseExpression(true);\n    }\n    return finishNode(node, \"YieldExpression\");\n  }\n\n  // Parses array and generator comprehensions.\n\n  function parseComprehension(node, isGenerator) {\n    node.blocks = [];\n    while (tokType === _for) {\n      var block = startNode();\n      next();\n      expect(_parenL);\n      block.left = toAssignable(parseExprAtom());\n      checkLVal(block.left, true);\n      if (tokType !== _name || tokVal !== \"of\") unexpected();\n      next();\n      // `of` property is here for compatibility with Esprima's AST\n      // which also supports deprecated [for (... in ...) expr]\n      block.of = true;\n      block.right = parseExpression();\n      expect(_parenR);\n      node.blocks.push(finishNode(block, \"ComprehensionBlock\"));\n    }\n    node.filter = eat(_if) ? parseParenExpression() : null;\n    node.body = parseExpression();\n    expect(isGenerator ? _parenR : _bracketR);\n    node.generator = isGenerator;\n    return finishNode(node, \"ComprehensionExpression\");\n  }\n\n});\n\n},{}],36:[function(require,module,exports){\n(function (global){\n; var __browserify_shim_require__=require;(function browserifyShim(module, exports, require, define, browserify_shim__define__module__export__) {\n/*\n * QuadTree Implementation in JavaScript\n * @author: silflow <https://github.com/silflow>\n *\n * Usage:\n * To create a new empty Quadtree, do this:\n * var tree = QUAD.init(args)\n *\n * args = {\n *    // mandatory fields\n *    x : x coordinate\n *    y : y coordinate\n *    w : width\n *    h : height\n *\n *    // optional fields\n *    maxChildren : max children per node\n *    maxDepth : max depth of the tree\n *}\n *\n * API:\n * tree.insert() accepts arrays or single items\n * every item must have a .x, .y, .w, and .h property. if they don't, the tree will break.\n *\n * tree.retrieve(selector, callback) calls the callback for all objects that are in\n * the same region or overlapping.\n *\n * tree.clear() removes all items from the quadtree.\n */\n\nvar QUAD = {}; // global var for the quadtree\n\nQUAD.init = function (args) {\n\n    var node;\n    var TOP_LEFT     = 0;\n    var TOP_RIGHT    = 1;\n    var BOTTOM_LEFT  = 2;\n    var BOTTOM_RIGHT = 3;\n    var PARENT       = 4;\n\n    // assign default values\n    args.maxChildren = args.maxChildren || 2;\n    args.maxDepth = args.maxDepth || 4;\n\n    /**\n     * Node creator. You should never create a node manually. the algorithm takes\n     * care of that for you.\n     */\n    node = function (x, y, w, h, depth, maxChildren, maxDepth) {\n\n        var items = [], // holds all items\n            nodes = []; // holds all child nodes\n\n        // returns a fresh node object\n        return {\n\n            x : x, // top left point\n            y : y, // top right point\n            w : w, // width\n            h : h, // height\n            depth : depth, // depth level of the node\n\n            /**\n             * iterates all items that match the selector and invokes the supplied callback on them.\n             */\n            retrieve: function(item, callback, instance) {\n                for (var i = 0; i < items.length; ++i) {\n                   (instance) ? callback.call(instance, items[i]) : callback(items[i]); \n                }\n                // check if node has subnodes\n                if (nodes.length) {\n                    // call retrieve on all matching subnodes\n                    this.findOverlappingNodes(item, function(dir) {\n                        nodes[dir].retrieve(item, callback, instance);\n                    });\n                }\n            },\n\n            /**\n             * Adds a new Item to the node.\n             *\n             * If the node already has subnodes, the item gets pushed down one level.\n             * If the item does not fit into the subnodes, it gets saved in the\n             * \"children\"-array.\n             *\n             * If the maxChildren limit is exceeded after inserting the item,\n             * the node gets divided and all items inside the \"children\"-array get\n             * pushed down to the new subnodes.\n             */\n            insert : function (item) {\n\n                var i;\n\n                if (nodes.length) {\n                    // get the node in which the item fits best\n                    i = this.findInsertNode(item);\n                    if (i === PARENT) {\n                        // if the item does not fit, push it into the\n                        // children array\n                        items.push(item);\n                    } else {\n                        nodes[i].insert(item);\n                    }\n                } else {\n                    items.push(item);\n                    //divide the node if maxChildren is exceeded and maxDepth is not reached\n                    if (items.length > maxChildren && this.depth < maxDepth) {\n                        this.divide();\n                    }\n                }\n            },\n\n            /**\n             * Find a node the item should be inserted in.\n             */\n            findInsertNode : function (item) {\n                // left\n                if (item.x + item.w < x + (w / 2)) {\n                    if (item.y + item.h < y + (h / 2)) {\n\t\t\t\t\t\treturn TOP_LEFT;\n\t\t\t\t\t}\n                    if (item.y >= y + (h / 2)) {\n\t\t\t\t\t\treturn BOTTOM_LEFT;\n\t\t\t\t\t}\n                    return PARENT;\n                }\n\n                // right\n                if (item.x >= x + (w / 2)) {\n                    if (item.y + item.h < y + (h / 2)) {\n\t\t\t\t\t\treturn TOP_RIGHT;\n\t\t\t\t\t}\n                    if (item.y >= y + (h / 2)) {\n\t\t\t\t\t\treturn BOTTOM_RIGHT;\n\t\t\t\t\t}\n                    return PARENT;\n                }\n\n                return PARENT;\n            },\n\n            /**\n             * Finds the regions the item overlaps with. See constants defined\n             * above. The callback is called for every region the item overlaps.\n             */\n            findOverlappingNodes : function (item, callback) {\n                // left\n                if (item.x < x + (w / 2)) {\n                    if (item.y < y + (h / 2)) {\n\t\t\t\t\t\tcallback(TOP_LEFT);\n\t\t\t\t\t}\n                    if (item.y + item.h >= y + h / 2) {\n\t\t\t\t\t\tcallback(BOTTOM_LEFT);\n\t\t\t\t\t}\n                }\n                // right\n                if (item.x + item.w >= x + (w / 2)) {\n                    if (item.y < y + (h / 2)) {\n\t\t\t\t\t\tcallback(TOP_RIGHT);\n\t\t\t\t\t}\n                    if (item.y + item.h >= y + h / 2) {\n\t\t\t\t\t\tcallback(BOTTOM_RIGHT);\n\t\t\t\t\t}\n                }\n            },\n\n            /**\n             * Divides the current node into four subnodes and adds them\n             * to the nodes array of the current node. Then reinserts all\n             * children.\n             */\n            divide : function () {\n                var width, height, i, oldChildren;\n                var childrenDepth = this.depth + 1;\n                // set dimensions of the new nodes\n                width = (w / 2);\n                height = (h / 2);\n                // create top left node\n                nodes.push(node(this.x, this.y, width, height, childrenDepth, maxChildren, maxDepth));\n                // create top right node\n                nodes.push(node(this.x + width, this.y, width, height, childrenDepth, maxChildren, maxDepth));\n                // create bottom left node\n                nodes.push(node(this.x, this.y + height, width, height, childrenDepth, maxChildren, maxDepth));\n                // create bottom right node\n                nodes.push(node(this.x + width, this.y + height, width, height, childrenDepth, maxChildren, maxDepth));\n\n                oldChildren = items;\n                items = [];\n                for (i = 0; i < oldChildren.length; i++) {\n                    this.insert(oldChildren[i]);\n                }\n            },\n\n            /**\n             * Clears the node and all its subnodes.\n             */\n            clear : function () {\n\t\t\t\tvar i;\n                for (i = 0; i < nodes.length; i++) {\n\t\t\t\t\tnodes[i].clear();\n\t\t\t\t}\n                items.length = 0;\n                nodes.length = 0;\n            },\n\n            /*\n             * convenience method: is not used in the core algorithm.\n             * ---------------------------------------------------------\n             * returns this nodes subnodes. this is usful if we want to do stuff\n             * with the nodes, i.e. accessing the bounds of the nodes to draw them\n             * on a canvas for debugging etc...\n             */\n            getNodes : function () {\n                return nodes.length ? nodes : false;\n            }\n        };\n    };\n\n    return {\n\n        root : (function () {\n            return node(args.x, args.y, args.w, args.h, 0, args.maxChildren, args.maxDepth);\n        }()),\n\n        insert : function (item) {\n\n            var len, i;\n\n            if (item instanceof Array) {\n                len = item.length;\n                for (i = 0; i < len; i++) {\n                    this.root.insert(item[i]);\n                }\n\n            } else {\n                this.root.insert(item);\n            }\n        },\n\n        retrieve : function (selector, callback, instance) {\n            return this.root.retrieve(selector, callback, instance);\n        },\n\n        clear : function () {\n            this.root.clear();\n        }\n    };\n};\n\n; browserify_shim__define__module__export__(typeof QUAD != \"undefined\" ? QUAD : window.QUAD);\n\n}).call(global, undefined, undefined, undefined, undefined, function defineExport(ex) { module.exports = ex; });\n\n}).call(this,typeof global !== \"undefined\" ? global : typeof self !== \"undefined\" ? self : typeof window !== \"undefined\" ? window : {})\n},{}]},{},[30])(30)\n});"]}